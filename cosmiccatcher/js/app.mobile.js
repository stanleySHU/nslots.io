function z(t){return t!=null}function B(t){return t==null}function bs(t){return typeof t=="string"}function qs(t){return typeof t=="function"}function Ks(t){return qs(t)}function Js(t){return Array.isArray(t)}function Zs(t){return Object.keys(t).length===0&&t.constructor===Object}function Qs(...t){let e={};for(let i=0;i<t.length;i++){let n=t[i];if(n!=null)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}var Ee=(t=>(t[t.PERCENT=0]="PERCENT",t[t.PIXEL=1]="PIXEL",t))(Ee||{});function G(t,e){if(!t)return;let n=t.childNodes.length;for(let s=0;s<n;s++){let r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE&&e(r,s)}}function en(t,e){let i=t.childNodes;for(let n=0;n<i.length;n++){let s=t.childNodes[n];if(s.nodeType===Node.ELEMENT_NODE&&F(s)===e)return s}}function tn(t,e){if(!t)return;let n=t.childNodes.length;for(let s=n-1;s>=0;s--){let r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE&&e(r,s)}}function De(t,e){return z(t.attributes[e])}function ae(t,e,i){t&&t.attributes[e]&&i&&(t.attributes[e].value=i)}function K(t,e,i=void 0){return t&&t.attributes[e]?t.attributes[e].value:i}function F(t,e=""){return K(t,"id",e)}function Wi(t,e=""){return K(t,"name",e)}function a(t,e,i=0){return+K(t,e,i)}function qi(t,e){let i=K(t,e,"");return vs(i)}function vs(t){return t=t.replace(" ",""),t?t.indexOf("%")>-1?{value:Number(t.substr(0,t.length-1))/100,unit:0}:t.indexOf("px")>-1?{value:+t.substr(0,t.length-2),unit:1}:{value:+t,unit:1}:{value:0}}function sn(t,e){let i=c(t,e,"0").split(","),n=[{value:0},{value:0}];for(let s=0;s<i.length;s++)n[s]=vs(i[s]);return n}function c(t,e,i=""){return K(t,e,i)}function g(t,e,i=!1){return c(t,e,i?"true":"false").toLowerCase()==="true"}function ge(t,e=""){return z(t)?t.textContent:e}function te(t,e,i,n){let s=c(t,e),r;if(s)r=s.split(",");else return[];i=z(i)?i:r.length;let o=new Array(i);for(let l=0;l<i;l++)o[l]=n?r[l]:parseFloat(r[l]);return o}function nn(t,e,i){return te(t,e,i,!0)}function ys(t,e,i=[0,0]){let n=c(t,e,"0").split(","),s=i;for(let r=0;r<n.length;r++)s[r]=parseFloat(n[r]);return s}function rn(t,e){let i=c(t,e,"0").split(",");return{x:parseFloat(i[0]),y:parseFloat(i[1])}}function on(t,e){let i=te(t,e,2);return{width:i[0],height:i[1]}}function an(t,e){let i=te(t,e),n=[];for(let s=0;s<i.length;s++)s%2==0&&n.push({width:i[s],height:i[s+1]});return n}function ws(t){return{align:c(t,"align","left"),breakWords:g(t,"breakWords",!1),fontFamily:c(t,"fontFamily"),fontSize:a(t,"fontSize"),fontStyle:c(t,"fontStyle","normal"),fontVariant:c(t,"fontVariant","normal"),fontWeight:c(t,"fontWeight","normal"),fill:De(t,"fills")?nn(t,"fills"):a(t,"fill",16777215),fillGradientType:a(t,"fillGradientType",0),fillGradientStops:te(t,"fillGradientStops"),stroke:a(t,"stroke",0),strokeThickness:a(t,"strokeThickness",0),wordWrap:g(t,"wordWrap",!1),wordWrapWidth:a(t,"wordWrapWidth",100),dropShadow:g(t,"dropShadow",!1),dropShadowColor:c(t,"dropShadowColor","#000000"),dropShadowBlur:a(t,"dropShadowBlur",0),dropShadowAngle:a(t,"dropShadowAngle",Math.PI/6),dropShadowDistance:a(t,"dropShadowDistance",5),padding:a(t,"padding",0),textBaseline:c(t,"textBaseline","alphabetic"),miterLimit:a(t,"miterLimit",10),lineJoin:c(t,"lineJoin","miter"),letterSpacing:a(t,"letterSpacing",0),lineHeight:a(t,"lineHeight",0)}}let ln=(()=>{if(DOMParser){let t=new DOMParser;return e=>t.parseFromString(e,"text/xml").documentElement}else if(typeof ActiveXObject<"u")return t=>{let e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return t=>{}})();class hn{constructor(){this.ie=!1,this.ieVersion=0,this.android=!1,this.chrome=!1,this.windowsPhone=!1,this.checkOS(),this.checkBrowser()}checkOS(){let e=navigator.userAgent;/Android/.test(e)&&(this.android=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(this.android=!1,this.windowsPhone=!0)}checkBrowser(){let e=navigator.userAgent;/Chrome\/(\d+)/.test(e)&&!this.windowsPhone?this.chrome=!0:/MSIE (\d+\.\d+);/.test(e)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(this.ie=!0,this.ieVersion=parseInt(RegExp.$3,10))}get isUCBrowser(){return navigator.userAgent.toLowerCase().indexOf("ucbrowser")>-1}get isQQBrowser(){return navigator.userAgent.toLowerCase().indexOf("qqbrowser")>-1}get isXiaoMiBrowser(){return navigator.userAgent.toLowerCase().indexOf("xiaomi")>-1}get desktop(){return is.desktop()}get mobile(){return is.mobile()}get tablet(){return is.tablet()}}class un{constructor(){this.mappings={}}map(e,i){let n=new mn(e,i);return this.mappings[e]=n,n}unmap(e){this.mappings[e]=void 0}get(e,...i){let n=this.mappings[e];if(!B(n))return n.get(i)}resolve(){console.warn("Injector.resolve() is not implement yet")}}class cn{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class dn{constructor(e){this.type=e}get(e){return xs(this.type,e)}destroy(){this.type=void 0}}class pn{constructor(e){this.type=e}get(e){return B(this.instance)&&(this.instance=xs(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class fn{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class mn{constructor(e,i){this.name=e,this.type=i}get(e){return B(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new cn(e)}toType(e){this.destroy(),this.provider=new dn(e)}toSingleton(e){this.destroy(),this.provider=new pn(e)}asSingleton(){if(this.destroy(),B(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new fn(e)}destroy(){z(this.provider)&&this.provider.destroy()}}function xs(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}let gn=Object.prototype.hasOwnProperty,V=typeof Object.create!="function"?"~":!1;class Ki{constructor(e,i,n=!1){this.fn=e,this.context=i,this.once=n}}class Ss{constructor(){this.off=this.removeListener}eventNames(){let e=this._events,i=[],n;if(!e)return i;for(n in e)gn.call(e,n)&&i.push(V?n.slice(1):n);return i}listeners(e,i=!1){let n=V?V+e:e,s=this._events&&this._events[n];if(i)return!!s;if(!s)return[];if(s.fn)return[s.fn];let r=s.length,o=new Array(r);for(let l=0;l<r;l++)o[l]=s[l].fn;return o}emit(e,...i){let n=V?V+e:e;if(!this._events||!this._events[n])return!1;let s=this._events[n],r=i.length,o;if(typeof s.fn=="function"){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),r){case 0:return s.fn.call(s.context),!0;case 1:return s.fn.call(s.context,i[0]),!0;case 2:return s.fn.call(s.context,i[0],i[1]),!0;case 3:return s.fn.call(s.context,i[0],i[1],i[2]),!0;case 4:return s.fn.call(s.context,i[0],i[1],i[2],i[3]),!0;case 5:return s.fn.call(s.context,i[0],i[1],i[2],i[3],i[4]),!0}s.fn.apply(s.context,i)}else{let l=s.length;for(o=0;o<l;o++)switch(s[o].once&&this.removeListener(e,s[o].fn,void 0,!0),r){case 0:s[o].fn.call(s[o].context);break;case 1:s[o].fn.call(s[o].context,i[0]);break;case 2:s[o].fn.call(s[o].context,i[0],i[1]);break;default:s[o].fn.apply(s[o].context,i)}}return!0}on(e,i,n){let s=new Ki(i,n||this),r=V?V+e:e;return this._events||(this._events=V?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],s]:this._events[r].push(s):this._events[r]=s,this}once(e,i,n){let s=new Ki(i,n||this,!0),r=V?V+e:e;return this._events||(this._events=V?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],s]:this._events[r].push(s):this._events[r]=s,this}removeListener(e,i,n,s){let r=V?V+e:e;if(!this._events||!this._events[r])return this;let o=this._events[r],l=[];if(i)if(o.fn)(o.fn!==i||s&&!o.once||n&&o.context!==n)&&l.push(o);else for(let u=0,h=o.length;u<h;u++)(o[u].fn!==i||s&&!o[u].once||n&&o[u].context!==n)&&l.push(o[u]);return l.length?this._events[r]=l.length===1?l[0]:l:delete this._events[r],this}removeAllListeners(e){return this._events?(e?delete this._events[V?V+e:e]:this._events=V?{}:Object.create(null),this):this}}class Ps extends Ss{on(e,i,n){return this.off(e),super.on(e,i,n)}}class ee{constructor(e,i,n=!0){this.id=e,this.src=i,this.global=n}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){}destroy(e){this.data&&this.data.texture.destroy(e)}static getVersionSrc(e){let i=L.get("context");return this.checkSrcFormat(i.applyTimeVersion(i.resolve(K(e,"src"))))}static checkSrcFormat(e){const i=e.match(/\[(?:.+)\]/);if(i){const n=i[0].replace("[","").replace("]","").split(",");for(let s of n){const r=s==="avif",o=s==="webp";if(r&&et.avif||o&&et.webp||!r&&!o)return e.replace(`${i[0]}`,s)}}return e}static create(e){return new ee(F(e),this.getVersionSrc(e),g(e,"global",!0))}}function oe(t,e){let i=t.toString();return new Array(e-i.length+1).join("0")+i}function bn(t,e="{{",i="}}"){let n=[],s=0,r=0;for(;s=t.indexOf(e,r),s!==-1;)if(r=t.indexOf(i,s),s>-1&&r>-1)n.push(t.substr(s+2,r-s-2));else break;return n}function Ui(t){let e=t.split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function re(t){return new Decimal(t).toFixed(2,Decimal.ROUND_FLOOR)}function vn(t,e){return e?Ui(re(t)):t}function Dt(t,e){if(!e)return t+" ";switch(t){case"USD":return"$";case"CNY":case"RMB":case"JPY":return"¥";case"KRW":return"₩";case"MYR":return"RM";case"IDR":return"Rp";case"THB":return"฿";case"VND":return"₫";case"EUR":return"€";default:return t+" "}}function _s(t,e){return e?Dt(t,!0):""}class Nt extends ee{constructor(e,i,n,s){super(e,e,s),this.id=e,this.src=i,this.options=n}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){const i={};for(let s=0;s<this.options.frame;s++)i[`${this.id}_${oe(s,4)}`]={frame:{x:s%this.options.width*this.options.size[0],y:Math.floor(s/this.options.width)*this.options.size[1],w:this.options.size[0],h:this.options.size[1]}};const n=e.get(this.id);this.sheet=new PIXI.Spritesheet({texture:n,data:{frames:i,meta:{scale:1}}}),this.sheet.parse()}static create(e){let i={size:ys(e,"size"),frame:a(e,"frame"),width:a(e,"width",0)};return new Nt(F(e),this.getVersionSrc(e),i,g(e,"global",!0))}}class Le extends ee{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){return new Le(F(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}class $i extends ee{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}static create(e){return new $i(F(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}function Ji(t,e){let i=L.get("context"),n=K(t,e,void 0);return n==null?n:i.applyTimeVersion(i.resolve(K(t,e)))}class Hi extends ee{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.options=n}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){var i=Ji(e,"atlas"),n=K(e,"rawAtlas",void 0);let s={spineAtlasFile:i,rawAtlasData:n};return new Hi(F(e),this.checkSrcFormat(Ji(e,"json")),s,g(e,"global",!0))}}class Mt extends ee{constructor(e,i,n){super(e,i,n),this.id=e,this.src=i}get rawAtlas(){return this.data}addTo(e){}static create(e){return new Mt(F(e),this.getVersionSrc(e),g(e,"global",!0))}}class Ke extends ee{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}get frag(){return this.data}get vert(){return this.data}static create(e){return new Ke(F(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}async function yn(t,e,i){const n=PIXI.TextFormat.test(t)?PIXI.TextFormat.parse(t):PIXI.XMLStringFormat.parse(t),{src:s}=e,{page:r}=n,o=[];for(let h=0;h<r.length;++h){const b=r[h].file,P=s.split("?")[0].split("/");P.pop(),P.push(b);let m=P.join("/");m=PIXI.copySearchParams(m,s),o.push(m)}const l=await i.load(o),u=o.map(h=>l[h]);return PIXI.BitmapFont.install(n,u,!0)}function wn(){const t=PIXI.loadBitmapFont;t.parse=yn,PIXI.extensions.add(PIXI.loadBitmapFont)}class xn extends Ss{constructor(){super(),this.ids=[],this.sheetResource={},this.assets=PIXI.Assets,wn()}get progress(){return this._progress}onProgress(e){this._progress=e,this.emit("progress",e)}onLoaded(e){e.forEach(i=>{var n;(n=this.sheetResource[i])==null||n.loaded(this.assets)}),this.emit("complete",!1)}add(e,i=!1){e.addTo(this.assets),e instanceof Mt||(this.ids.push(e.id),e instanceof Nt&&(this.sheetResource[e.id]=e))}load(){this.assets.load([...this.ids],this.onProgress.bind(this)).then(this.onLoaded.bind(this,[...this.ids])),this.ids=[]}json(e){return this.assets.get(e)}frag(e){return this.assets.get(e)}vert(e){return this.assets.get(e)}resolveImage(e){return this.assets.get(e)??PIXI.Texture.EMPTY}resolveTextureAtlas(e){const i=e[1],n=this.assets.get(i);if(e.length==2)return n.textures;{const s=e[2].split("|");return s.length==1?n.textures[s[0]]:s.map(r=>n.textures[r])}}resolveAtlasTextures(e){const i=e[1],n=this.assets.get(i);let s=[];const r=Object.keys(n.textures);if(e.length==2)s=Object.keys(n.textures);else for(let o of r)o.startsWith(e[1])&&s.push(o);return s=s.sort((o,l)=>o.localeCompare(l)),s.map(o=>n.textures[o])}resolveAnimations(e){const n=PIXI.Assets.get(e[1]).data.animations[e[2]],s=[];for(const r of n)s.push(this.resolveTextureAtlas(["@atlas",e[1],r]));return s}resolveSpriteSheet(e){const i=this.sheetResource[e];return Object.values(i.sheet.textures)}resource(e){return this.assets.get(e)}text(e){return this.resource(e)}resolve(e){let i=PIXI.Texture.EMPTY;if(!e||e.length===0)return i;let n=e.split("/");switch(n[0]){case"@img":return this.resolveImage(n[1]);case"@atlas":return this.resolveTextureAtlas(n);case"@atlasTextures":return this.resolveAtlasTextures(n);case"@animations":return this.resolveAnimations(n);case"@sheet":return this.resolveSpriteSheet(n[1]);case"@json":return this.json(n[1]);case"@spine":return this.resource(n[1]);case"@frag":return this.frag(n[1]);case"@vert":return this.vert(n[1]);case"@res":return this.resource(n[1]);case"@text":return this.text(n[1]);default:return i}}downloadApi(){return this.assets.add({src:"../_commons/api.json",alias:"api"}),this.assets.load("api")}get api(){return this.json("api")}getApiBy(e,i){return this.api[e]||i}}let Sn={atlas:ee,img:ee,audio:$i,res:ee,sheet:Nt,spine:Hi,rawAtlas:Mt,text:Le,json:Le,xml:Le,frag:Ke,vert:Ke};function Pn(t){let e=Sn[t.nodeName];if(e)return e.create(t);throw`not found the resource by ${t.nodeName}`}function Rt(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)}function _n(t,e,i){let n=[],s=[];i=i||(r=>r);for(let r=0,o=0;r<e.length;r++)s.push(i(e[r])),o++,o===t&&(n.push(s),o=0,s=[]);return n}function Os(t,e){let i=[];return t.forEach((n,s,r)=>{let o=e(n);i.push(o)}),i}function On(t){if(t&&t.length>0)return t[0]}function zt(t){if(t)return t[t.length-1]}function In(t,e){var i=0;if(t&&(i=t.length),i>0){for(var n=0;n<i;n++)if(e(t[n]))return t[n]}}function Cn(t){return new Date(t)}function Is(){return new Date}function Je(){return Is().getTime()}function Zi(t,e){let i=Is(),n=i.getUTCHours()+t;n>23&&(n=n-24);let s=i.getUTCMinutes(),r=i.getSeconds(),o=oe(n,2)+":"+oe(s,2);return e?o+" (+"+t+")":o+":"+oe(r,2)+" (GMT+"+t+")"}var Y=(t=>(t[t.Identify=0]="Identify",t[t.PageView=1]="PageView",t[t.ScreenView=2]="ScreenView",t[t.Event=3]="Event",t[t.Request=4]="Request",t[t.Response=5]="Response",t[t.Transaction=6]="Transaction",t[t.Exception=7]="Exception",t[t.Timing=8]="Timing",t[t.Metric=9]="Metric",t[t.StartScreen=10]="StartScreen",t[t.StopScreen=11]="StopScreen",t))(Y||{});let oi;function En(t){oi=t}class Ln{constructor(){this.listeners=[]}initialize(){if(this.userAgent=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",z(oi))for(let e of oi){let i=new e;i.initialize(),this.addListener(i)}this.handleGlobalError()}handleGlobalError(){window.onerror=(e,i,n,s,r)=>{this.exception({name:"GlobalError",description:e,fatal:!1,error:r,extraInfo:{filename:i,lineno:n,colno:s}})}}addListener(e){this.listeners.push(e)}removeListener(e){Rt(this.listeners,e)}identify(e){this.track(Y.Identify,e)}screen(e){B(e)&&(e={name:E.current.id}),this.track(Y.ScreenView,e)}startScreen(e){this.track(Y.StartScreen,e)}stopScreen(e){this.track(Y.StopScreen,e)}metric(e){this.track(Y.Metric,e)}event(e){this.track(Y.Event,e)}exception(e){this.track(Y.Exception,e)}request(e){this.track(Y.Request,e)}response(e){this.track(Y.Response,e)}pageView(e){this.track(Y.PageView,e)}track(e,i){let n=p,s={time:Je(),type:e,userID:n.TRACKER_USER_ID,data:i};for(let r of this.listeners)r.track.call(r,s)}}const ne=new Ln;function Ve(t,e,i,n=1,s=0){return t.alpha=s,Ze(t,{alpha:s},{alpha:n},e,i)}function Wt(t,e,i,n=1,s=0){return t.alpha=n,Ze(t,{alpha:n},{alpha:s},e,i)}function Tn(t,e,i,n,s,r=TWEEN.Easing.Linear.None,o=0,l=!1){let u=e;return new TWEEN.Tween(u).to(i,n).easing(r).repeat(o).yoyo(l).onUpdate(()=>{for(let b in e)b==="scale"?t.scale.x=t.scale.y=u[b]:t[b]=u[b]}).onComplete(()=>{s&&(s.length?s(t):s())})}function Ze(t,e,i,n,s,r=TWEEN.Easing.Linear.None){let o=Tn(t,e,i,n,s,r);return o.start(),o}function ai(t,e,i=0,n=1){let s=new PIXI.Graphics;return s.beginFill(i),s.drawRect(0,0,t,e),s.endFill(),s.alpha=n,s}function Bn(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawPolygon(t),i}function Cs(t,e,i=0,n=1){let s=new PIXI.Graphics;return s.lineStyle(n,i),s.drawRect(0,0,t,e),s}function Es(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawCircle(0,0,t),i.endFill(),i}function Ne(t,e,i=0,n=0){let s=new PIXI.Graphics;return s.beginFill(n),s.drawRoundedRect(0,0,t,e,i),s.endFill(),s}const Qe="REGISTER_METADATA_KEY",An="component",Dn="service",Nn="scene";function d(t){return e=>(t.category=t.category||"component",e.prototype[Qe]=t,e)}function Qi(t){if(Qe in t.prototype){let e=t.prototype[Qe];switch(e.category){case An:L.map(`component:${e.tag}`).toFactory(()=>t);break;case Dn:let i=v.get(e.tag);i&&console.warn(`${e.tag}: ${i.constructor.name} is replaced by ${t.name}.`),v.register(e.tag,new t);break;case Nn:L.map(`scene:${e.tag}`).toType(t);break}}else throw"Invaildate component, missing metadata of "+t}function Ut(t){if(Js(t))for(let e of t)Qi(e);else Qi(t)}class Mn{constructor(){this.views=[]}add(e){this.pane&&this.views.push(e)}remove(e){if(this.pane){let i=this.views.indexOf(e);i>=0&&this.views.splice(i,1),this.refresh()}}refresh(){for(let e of this.pane.children)this.pane.remove(e);for(let e of this.views)e.showBoundingBox(),e.createItemControllers(e)}addRefreshButton(){this.pane.addButton({title:"refresh"}).on("click",()=>{this.refresh()})}}class Rn{createItemControllers(e){ie.pane.addBinding(e,"x"),ie.pane.addBinding(e,"y"),ie.pane.addBinding(e,"width"),ie.pane.addBinding(e,"height"),ie.pane.addBinding(e,"rotation"),ie.pane.addBinding(e,"scale"),ie.pane.addBinding(e,"visible"),ie.pane.addBinding(e,"alpha")}}function Wn(...t){return e=>e}var Un=Object.defineProperty,$n=Object.getOwnPropertyDescriptor,Hn=(t,e,i,n)=>{for(var s=n>1?void 0:n?$n(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Un(e,i,s),s};function es(t){return t instanceof _||t instanceof $t}class $t{getComponentByID(e){}}let _=class extends PIXI.Container{constructor(){super(...arguments),this.components=[],this.fadeInTime=-1,this.fadeOutTime=-1,this.editAble=!1}addToEdit(){this.editAble&&ie.add(this)}removeFromEdit(){this.editAble&&ie.remove(this)}addChild(...t){if(t=t[0],t instanceof PIXI.DisplayObject&&super.addChild(t),es(t))return t instanceof _&&(t.fadeIn(),t.addToEdit()),this.components.push(t),t}fadeIn(t){t===void 0&&(t=this.fadeInTime),t>0&&(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=Ve(this,t))}fadeOut(t,e=!0){t===void 0&&(t=this.fadeOutTime),t>0?(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=Wt(this,t,e?()=>{this.parent&&this.parent.removeChild(this)}:void 0)):e&&this.parent&&this.parent.removeChild(this)}removeChild(...t){return t=t[0],t instanceof PIXI.DisplayObject&&super.removeChild(t),es(t)&&(Rt(this.components,t),t.deactivate()),t}removeChildren(t,e){return this.removeAllComponents(),super.removeChildren(t,e)}removeAllComponents(){this.deactivate(),this.components=[]}activate(){this.fadeIn(),this.components.forEach(t=>t.activate())}deactivate(){this.removeFromEdit(),this.fadeTween&&this.fadeTween.stop(),this.components.forEach(t=>t.deactivate())}getComponentByID(t){for(let e=0;e<this.components.length;e++){let i=this.components[e];if(i.id===t)return i;let n=i.getComponentByID(t);if(n)return n}}getComponentByTag(t){for(let e of this.components){let i=e.constructor.prototype[Qe];if(i&&i.tag===t)return e}}showBoundingBox(){z(this.boundingBox)&&(this.boundingBox.destroy(),this.removeChild(this.boundingBox));let t=this.getBounding();this.boundingBox=Cs(t.width,t.height,0,5),this.addChild(this.boundingBox)}getBounding(){return this.getBounds()}bringToTop(t){this.setChildIndex(t,this.children.length-1)}applyLayout(t){if(t)for(let e in t){let i=t[e];e==="scale"?this.scale.set(i[0],i[1]):e==="pivot"?this.pivot.set(i[0],i[1]):e==="activate"?i?this.activate():this.deactivate():this[e]=i}}onOrientationChange(t){this.layoutInfo&&this.applyLayout(this.layoutInfo[t])}};_=Hn([Wn(Rn)],_);var y=(t=>(t[t.LANDSCAPE=0]="LANDSCAPE",t[t.PORTRAIT=1]="PORTRAIT",t))(y||{});function Ls(t){let e=c(t,"render");return!(e==="webgl"&&U.type!==PIXI.RENDERER_TYPE.WEBGL||e==="canvas"&&U.type===PIXI.RENDERER_TYPE.WEBGL)}function Vn(t){let e=c(t,"brand",null);return e===null||e==="all"&&!p.BRAND||e.toLowerCase()===String(p.BRAND).toLowerCase()}function ue(t,e){if(!t||!Ls(t))return null;let i=t.nodeName,n=L.get(`component:${i}`);if(n){let s=n.create(t,e);return s instanceof _&&g(t,"boundingBox")&&s.showBoundingBox(),s}else console.warn(`can't find component by tag name "${i}"`);return null}function X(t,e,i=!0){if(!e.parent)throw new Error("call builder.createChildren must pass parent.");(i?tn:G)(t,(s,r)=>{let o=ue(s,e);o&&e.parent.addChild(o)})}function D(t,e,i){i.scene;let n=i.parent,s=F(e,null);t.id=s,s&&n&&(n[s]=t),t instanceof _&&(t.name=e.tagName+(B(s)?"":`#${s}`),Fn(t,e,i))}function Fn(t,e,i){let n=[{},{},{}],s=i.scene,r=i.parent,o=!1,l=2;for(let u=0;u<e.attributes.length;u++){let h=e.attributes[u].name,b=h,P=l;if(h.indexOf("p-")===0?(P=y.PORTRAIT,b=h.substr(2),o=!0):h.indexOf("l-")===0&&(P=y.LANDSCAPE,b=h.substr(2),o=!0),b==="x"){let m=qi(e,h);n[P].x=m.unit===Ee.PERCENT?r.width*m.value:m.value}else if(b==="y"){let m=qi(e,h);n[P].y=m.unit===Ee.PERCENT?r.height*m.value:m.value}else if(b==="alpha")n[P].alpha=a(e,h);else if(b==="pivot"){let[m,O]=sn(e,h),S=t.getLocalBounds();n[P].pivot=[m.unit===Ee.PERCENT?m.value*S.width:m.value,O.unit===Ee.PERCENT?O.value*S.height:O.value]}else if(b==="scale")if(K(e,h).indexOf(",")!==-1)n[P].scale=ys(e,h,[1,1]);else{let m=a(e,h);n[P].scale=[m,m]}else b==="rotation"?n[P].rotation=a(e,h)/180*Math.PI:b==="visible"?n[P].visible=g(e,h,!0):b==="activate"&&(n[P].activate=g(e,h))}e.hasAttribute("interactive")&&(t.interactive=g(e,"interactive")),e.hasAttribute("interactiveChildren")&&(t.interactiveChildren=g(e,"interactiveChildren")),e.hasAttribute("visible")&&(t.visible=g(e,"visible",!0)),t.fadeInTime=a(e,"fadein",-1),t.fadeOutTime=a(e,"fadeout",-1),t.editAble=g(e,"editAble",!1);for(let u=1;u<10;u++)e.hasAttribute("argument"+u)&&(t["argument"+u]=c(e,"argument"+u));o&&(s.multiLayoutComponents.push(t),t.layoutInfo=n),t.applyLayout(n[l])}function jn(t,e,i,n,s){let r=e.hasAttribute("p-"+i),o=e.hasAttribute("l-"+i);!r&&!o||(r&&(t.layoutInfo[y.PORTRAIT][i]=n(e,"p-"+i,s)),o&&(t.layoutInfo[y.LANDSCAPE][i]=n(e,"l-"+i,s)))}function Gn(t,e,i,n,s){let r=i.scene,o=c(e,n,void 0);if(o&&r[o]){let l=c(e,"parameter",void 0),u=r[o];t[s]=()=>{u.call(r,t,l)}}}function Ht(t,e,i){for(var n=0;n<e.attributes.length;n++){var s=e.attributes[n];s&&s.name.match(/on[A-Z]\w+/)&&Gn(t,e,i,s.name,s.name+"Handler")}}function Te(t,e){let i=e[t+"Handler"];return i?(i(),!0):!1}function Ts(t){let e=t.hitArea;if(e){let i=Cs(e.width,e.height,16711680,2);t.addChild(i)}}const li="__guitarist_bindings__";class kn{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=L.get(this.key)}}class Xn{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=v.get(this.key)}}function Bs(t){return(e,i)=>{let n=e[li]||[];n.push(t(e,i)),e[li]=n}}function Vt(t){return Bs((e,i)=>new kn(t,i))}function ce(t){return Bs((e,i)=>new Xn(t,i))}function ts(t){(t[li]||[]).forEach(i=>i.apply(t))}function Yn(t){let e=t?t.split(","):null;return(e?e.shift():null)=="fadein"?zn(parseFloat(e.shift())||800):n=>{E.replace(n)}}function zn(t){return e=>{let i=E.current;i&&(i.interactive=!1,i.interactiveChildren=!1);let n=E.resolve(e);n.alpha=0,E.add(n),Ve(n,t,()=>{i&&(i.exit(),E.remove(i))})}}class Fe extends _{constructor(e){super(),this.layout=e,this.multiLayoutComponents=[],this.id=F(e),this.name="scene#"+this.id,this.transitions=c(e,"transitions",null)}loadResources(){let e=A,i=this.layout.querySelector("scene resources");i?(e.retryTimes=a(i,"retry",2),G(i,(n,s)=>{if(Ls(n)&&Vn(n)){let r=Pn(n);e.add(r)}}),e.on("progress",n=>{this.onProgress(n)}),e.once("complete",()=>{e.removeAllListeners(),this.onLoaded()}),e.load()):this.onLoaded()}create(e){let i=this.layout.querySelector("scene view");i&&X(i,{scene:this,parent:this}),ts(this);let n=v.get("orientationService");n.mode==="both"&&this.onOrientationChange(n.getOrientation()),this.onCreated(e)}enter(e){ne.screen({name:this.id}),this.layout&&(this.loadResources(),this.create(e))}focus(){}blur(){}exit(){this.removeChildren()}setState(e){e.scene=this,this.state&&this.state.exit(),ts(e),this.state=e,this.state.enter()}get isPortraitLayout(){let e=v.get("orientationService");return e.mode==="both"&&e.getOrientation()===y.PORTRAIT}onProgress(e){}onLoaded(){this.next=c(this.layout,"next",null),this.next&&this.transit()}transit(){Yn(this.transitions)(this.next)}onCreated(e){}onOrientationChange(e){for(let i=0;i<this.multiLayoutComponents.length;i++)this.multiLayoutComponents[i].onOrientationChange(e)}onSceneResize(){}}class qn{constructor(){this.overlayContainer=new PIXI.Container,this.sceneContainer=new PIXI.Container,this.scenesRegistry={},this.scenes=[]}register(e){this.scenesRegistry[F(e)]=e}push(e,i=!0,n){this._current&&(this._current.blur(),this._current.visible=!i),this.add(this.resolve(e),n)}pop(){if(this._current&&(this._current.exit(),this.sceneContainer.removeChild(this._current),this.scenes.pop()),this.scenes.length>0){let e=this.scenes[this.scenes.length-1];e.visible=!0,e.focus(),this._current=e}}remove(e){this.sceneContainer.removeChild(e),this.scenes.splice(this.scenes.indexOf(e),1)}replace(e,i){this._current&&(this._current.exit(),this.remove(this._current)),this.add(this.resolve(e),i)}resolve(e){if(bs(e)){let i=e,n=this.scenesRegistry[i],s=L.get(`scene:${i}`,n);return s||(s=new Fe(n)),s}else return e}addOverlay(e){this.overlayContainer.addChild(e)}removeOverlay(e){this.overlayContainer.removeChild(e)}get current(){return this._current}add(e,i){this.scenes.push(e),this.sceneContainer.addChild(e),this._current=e,this._current.enter(i)}}class j{configure(e){}startup(){}shutdown(){}}class Kn{constructor(){this.services={}}get(e){return this.services[e]}register(e,i){let n;return Ks(i)?n=new i:n=i,this.services[e]=n,n}has(e){return z(this.services[e])}startup(){for(let e in this.services)this.services[e].startup()}shutdown(){for(let e in this.services)this.services[e].shutdown()}}class Jn{constructor(){this.count=0}push(e,i=!1){if(!(!i&&this.has(e))){var n={value:e,next:void 0};if(this.count++,!this.head)this.head=n;else{let s=this.head;for(;s.next;)s=s.next;s.next=n}}}forEach(e){let i=this.head;for(;i;)e(i.value),i=i.next}has(e){let i=this.head;for(;i;){if(i.value===e)return!0;i=i.next}return!1}clear(){this.head=void 0,this.count=0}remove(e){let i=this.head;for(var n=i;i;){if(i.value===e){this.count--,n.next=i.next,i===this.head&&(this.head=i.next);return}n=i,i=i.next}}}class Zn{constructor(){this.list=new Jn}advanceTime(e){return this.list.forEach(i=>{i.advanceTime(e)}),!0}add(e){this.list.push(e)}remove(e){this.list.remove(e)}contains(e){return this.list.has(e)}clear(){this.list.clear()}}const ie=new Mn,L=new un,E=new qn,A=new xn,v=new Kn,Z=new Ps,x=new Ps,T=new Zn,w=new hn;let f,U,M,p,hi,et={avif:!1,webp:!1};function Qn(){return Promise.all([PIXI.detectAvif.test(),PIXI.detectWebp.test()]).then(([t,e])=>{et.avif=t,et.webp=e})}function er(t){let e={width:t.width,height:t.height,view:t.canvas,backgroundColor:t.backgroundColor,autoResize:!0,antialias:!0,resolution:Math.min(t.resolution,2)};const i=PIXI.autoDetectRenderer(e);return B(t.canvas)&&document.body.appendChild(i.view),i}function tr(t){return hi=t,w.platform=t.config.name,t.launchTime,ne.initialize(),p=L.get("context"),Promise.all([p.initialize(),Qn()])}function ir(t,e){f=e,p.ID=F(t);let i=c(t,"enter");f.minWidth=a(t,"minWidth",0),f.minHeight=a(t,"minHeight",0),f.width=a(t,"width",800),f.height=a(t,"height",600),f.resolution=window.devicePixelRatio??a(t,"resolution",1),f.backgroundColor=a(t,"backgroundColor",0),U=er(f);for(let s=0;s<t.attributes.length;s++){let r=t.attributes[s].name;p[r]===void 0&&(p[r]=t.attributes[s].value)}const n=A.api;for(let s in n)p[s]=n[s];p.getHudLanguage(),p.printEngineVersion(),hi.opid=(p.OPERATOR||"").toUpperCase(),hi.gameid=p.ID,nr(),M=new PIXI.Container,M.name="world",M.addChild(E.sceneContainer),M.addChild(E.overlayContainer),M.pivot.set(f.width/2,f.height/2),G(t.querySelector("scenes"),(s,r)=>{E.register(s)}),G(t.querySelector("services"),(s,r)=>{let o=v.get(s.nodeName);o||console.log("service "+s.nodeName+" not found"),o.configure(s)}),v.startup(),E.replace(i),PIXI.Ticker.shared.maxFPS=a(t,"maxFPS",59.99),PIXI.Ticker.shared.minFPS=a(t,"minFPS",55),PIXI.Ticker.shared.add(sr),PIXI.Ticker.shared.autoStart=!0}function sr(t){PIXI.Ticker.shared.elapsedMS,T.advanceTime(t),U.render(M)}function nr(){try{if(navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)){let e=U.plugins&&U.plugins.interaction?U.plugins.interaction:U.events;if(!e)return;let i=e.interactionDOMElement?e.interactionDOMElement:e.domElement;if(!i)return;window.document.removeEventListener("mousemove",e.onMouseMove,!0),i.removeEventListener("mousedown",e.onMouseDown,!0),i.removeEventListener("mouseout",e.onMouseOut,!0)}}catch{console.log("InteractionManager not applicable.")}}function rr(t){let e="",i=0;for(let n in t)t.hasOwnProperty(n)&&(i++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]))}let Ge;function or(){if(Ge===void 0)try{Ge=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{Ge=!1}return Ge}let ss=[],As=class{constructor(e=!1){this.isXDR=!1,e&&or()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,ss.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,n){return n&&(this.client.responseType="json"),this.client.open("POST",e),i&&this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.send(i)}afterDone(){this.isXDR&&Rt(ss,this.client)}send(e){return new Promise((i,n)=>{setTimeout(()=>{e?this.client.send(rr(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?i(this.client):n(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),n(new Error("Request timeout"))},this.client.onerror=s=>{this.afterDone(),n(new Error(s.toString()))}})}};function Ds(t,e){return new As(!0).get(t)}function Ns(t){let e=t||"",i=e.split("."),n=i.length;return n>1?`${i[n-2]}.${i[n-1]}`:e}function ar(t){return w.ie&&w.ieVersion<10?ln(t.responseText):t.responseXML.documentElement}function lr(t){t.bootstrap=()=>{let e=t.config;A.downloadApi().then(()=>{tr(t).then(()=>{let i=p.resolve(e.layout+"/{{LANGUAGE}}.min.xml");i=p.applyTimeVersion(i),new As().get("layout/"+i).then(n=>{let s=ar(n);ir(s,{canvas:document.querySelector("#stage")})}).catch(n=>{ne.exception({name:n.name,description:n.message,fatal:!0,extraInfo:n})})}).catch(i=>{alert(i)})})}}const hr="events:errorpopup:open",Ms="events:errorpopup:close",ur=11;let Be=document.getElementById("errorDialog"),ke=document.getElementsByClassName("close")[0],qt=document.getElementById("historyContainer"),ns=document.getElementsByClassName("closeHistory")[0],Ie,me,Kt,Jt,Zt,rs=0,os=0,Vi=!1;function _e(t){if(me===void 0||t!=null){let e=v.get("symbolService");t!=null?me=e.multiSize[t].height:me=e.size.height,me==null&&(me=e.multiSize[0].height)}return me}function je(){if(Ie===void 0){let t=v.get("symbolService");Ie=t.size.width,Ie==null&&t.multiSize!=null&&(Ie=t.multiSize[0].width)}return Ie}function Rs(t){return t===void 0?rs:(rs=t,t)}function cr(t){return t===void 0?os:(os=t,t)}function R(){return Kt===void 0&&(Kt=L.get("user")),Kt}function C(){return Jt===void 0&&(Jt=L.get("context")),Jt}function Fi(){return C().NUM_OF_COLUMN}function Ws(){return C().NUM_OF_ROW}function ui(t,e,i=!1,n){return N(t,e,i,!0,n)}function N(t,e,i=!1,n=!1,s){return v.get("soundService").play(t,e,i,n,s)}function tt(t){if(!t)return;v.get("soundService").stop(t.soundId)}function ji(t="button"){N(t,"default",!0)}function Ft(t){return Zt===void 0&&(Zt=v.get("textService")),Zt.translate(t)}function Q(t){return Ft("{{"+t+"}}")}function dr(){if(!Vi&&qt){const e=()=>{qt.style.display="block";let n=document.getElementById("historyFrame"),s=()=>{ns.removeEventListener("click",s,!1),qt.style.display="none",n.src=""};n.src=C().historyUrl,ns.addEventListener("click",s,!1)},i=()=>{Me("Network Error",0,!0)};var t=new Image;t.onload=e,t.onerror=i,console.log(C().historyUrlDomain+"x.png?d="+escape(Date())),t.src=C().historyUrlDomain+"x.png?d="+escape(Date())}}function Me(t,e,i){if(!Vi)if(Be){Be.style.display="block";let n=document.getElementById("errormessage"),s=document.getElementById("errorcode");if(n.innerHTML=t,s.innerHTML=oe(e,3),i||gr(e)){mr();let r=()=>{br({code:e})};ke.style.display!=="none"&&(ke.style.display="none",n.parentElement.appendChild(vr(Q("ok"),r)))}else{let r=()=>{switch(ke.removeEventListener("click",r,!1),Be.style.display="none",e){case 0:case 5:case 7:case 14:ci();break;case 20:case 21:case 24:ci(!0);break;case 27:yr()}x.emit(Ms,{code:e})};ke.addEventListener("click",r,!1),x.emit(hr,{code:e})}}else alert(t)}function pr(t,e){if(Be&&Be.style.display==="block"){let i=document.getElementById("errormessage");i.innerHTML=t}else Me(t,e)}function fr(){let t=p.collapsingBonusID;return t||""}function Us(){return p.isProgressiveJackpot==="true"}function mr(){let t=v.get("keyboardService");t&&t.shutdown(),R().stopAutoSpin(),E.current.id==="main"&&(E.current.exit(),E.replace("main"))}function gr(t){return parseInt(t)!==10&&parseInt(t)!==29&&!C().loginUrl&&(!C().LOBBY_URL||C().HIDE_LOBBY==="1")}function br(t){t&&(x.emit(Ms,t),window.open("","_self"),self.close(),pr(Q("closegame"),t.code),Vi=!0)}function vr(t,e){let i=document.createElement("div"),n=document.createElement("span");return n.innerHTML=t,n.className="button",i.className="buttons",i.appendChild(n),n.addEventListener("click",()=>{i.parentElement&&i.parentElement.removeChild(i),e&&e()},!1),i}function yr(){window.close(),setTimeout(()=>ci(!0),50)}function ci(t=!1){C().loginUrl&&C().loginUrl!==""&&!t?window.open(C().loginUrl,"_self"):C().HIDE_LOBBY==="0"&&C().LOBBY_URL&&C().LOBBY_URL!==""&&window.open(C().realLobbyUrl,"_self")}function di(t="0",e){t===""&&(t="0"),Me(Ft(`{{err_${oe(t,3)}}}`),t,e)}function wr(t,e){if(De(t,"frsum")){let s=a(t,"frsum");R().froundSum=s}return De(t,"expired")&&(R().froundExpired=c(t,"expired")==="1"),e}function xr(t){if(t.tagName==="error")return{success:!1,data:{code:a(t,"code"),message:ge(t)}};{let e=t.querySelector("bonus"),i=t.querySelector("wheels"),n=te(i,"rows"),s=t.querySelector("bonusposition"),r=n.length&&p.bonusAsWinlinesRow!=="true";return{success:!0,data:wr(t,{win:new Decimal(ge(t.querySelector("win"))),balance:new Decimal(ge(t.querySelector("balance"))),multiplier:a(t,"multiplier",1),wheels:_r(i,n),winLines:as(t.querySelector("winposition")),bonusPosition:r?Pr(s,n):as(s),bonusID:F(e,void 0),bonusKey:ge(e,void 0),bonus:e,data:t,fround:Sr(t)})}}}function Sr(t){let e=t.querySelector("fround");if(e)return{round:a(e,"round"),finished:c(e,"isfinished")==="1"}}function as(t){let e=[];return G(t,(i,n)=>{let s=[],r=Os(ge(i).split(","),o=>parseInt(o)-1);for(let o=0;o<r.length;o++)r[o]>=0&&s.push([o,r[o]]);e.push({index:a(i,"line"),win:a(i,"win"),multiplier:a(i,"mul"),positions:s,type:c(i,"type")})}),e}function Pr(t,e){let i=[];return G(t,(n,s)=>{let r=[],o=Os(ge(n).split(","),u=>parseInt(u)),l=[];for(let u=0;u<e.length;u++){l=o.splice(0,e[u]);for(let h=0;h<l.length;h++)l[h]>0&&r.push([u,h])}i.push({index:a(n,"line"),win:a(n,"win"),multiplier:a(n,"mul"),positions:r,type:c(n,"type")})}),i}function _r(t,e=[]){let i=te(t,"val");if(e.length!==Fi())return _n(3,i,parseInt);let n=[];for(let s=0;s<e.length;s++)n.push(i.splice(0,e[s]));return n}const Or="1";class Ir{constructor(){this.restoreBonus=!1,this.bonusBet=!1,this.autoSpinValues=[100,75,50,25,10],this.autoSpin=10,this._betValueIndex=0,this._multiplierIndex=0,this.maxBetRevertIndex=0,this.isTurbo=!1,this.accountName="Funplay",this.displayName="Funplay",this.funplay=!0,this.currency="RMB",this.balance=new Decimal(0),this.winAmount=new Decimal(0),this.bet={lines:0,credits:0,amount:0,multiplier:1}}setDefaultBet(){let e=p.defaultBet;if(e=e?JSON.parse(e):{},!e||e[this.currency]===void 0)this.betValueIndex=0;else{let i=this.betValues.indexOf(e[this.currency]);this.betValueIndex=Math.max(0,i)}}setMaxBet(){this.betValueIndex=this.betValues.length-1}get isMaxBet(){return this.displayedBetIndex===this.betValues.length-1}set multiplierIndex(e){this._multiplierIndex=e,this.bet.multiplier=this.multiplierValues[e]}get multiplierIndex(){return this._multiplierIndex}set betValueIndex(e){this._betValueIndex=e,this.bet.amount=this.betValues[e]}get betValueIndex(){return this._betValueIndex}set betValue(e){this.betValueIndex=Math.max(0,this.betValues.indexOf(e))}get betValue(){return this.bet.amount}get froundBet(){if(this.fround)return this.fround.bet!==void 0?this.fround.bet:a(this.fround,"bet",0)}get froundMul(){if(this.fround){if(this.fround.multiplier!==void 0){let e=this.fround.multiplier;return this.multiplierValues.indexOf(e)<0&&(e=this.multiplierValues[0]),e}return a(this.fround,"mul",1)}else return}get froundTotalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.froundBet)).times(this.froundMul)}get froundBetIndex(){return Math.max(this.betValues.indexOf(this.froundBet))}get froundMultiplierIndex(){return Math.max(this.multiplierValues.indexOf(this.froundMul),0)}get totalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.bet.amount)).times(this.bonusBet?2:1).times(this.bet.multiplier).times(this.bet.betLevel?this.bet.betLevel:1)}get displayedMultiplier(){return this.froundOn?this.froundMul:this.bet.multiplier}get displayedBetAmount(){return this.froundOn?this.froundBet:this.bet.amount}get displayedTotalBet(){return this.froundOn?this.froundTotalBet:this.totalBet}get linesCredits(){return this.bet.credits>0?this.bet.credits:this.bet.lines}get displayedBetIndex(){return this.froundOn?this.froundBetIndex:this.betValueIndex}get displayedMultiplierIndex(){return this.froundOn?this.froundMultiplierIndex:this._multiplierIndex}get isDoubleUp(){return this.bonus&&this.bonus.id===Or}checkAutoSpinConditions(){if(!this.autoSpinSettings||!this.autoSpinSettings.inAutoSpins)return!1;let e=new Decimal(0),i=this.balance.minus(this.autoSpinSettings.startBalance);i.lt(0)&&(e=i.dividedBy(this.totalBet).abs());let n=this.bonus!==void 0&&this.bonus!==null&&this.bonus.id!==fr();return this.autoSpin===0||this.autoSpinSettings.stopAtFeature&&n||this.autoSpinSettings.stopAtWin>0&&this.winAmount.gt(this.autoSpinSettings.stopAtWin)||this.autoSpinSettings.stopAtBalance>0&&i.gte(this.autoSpinSettings.stopAtBalance)||this.autoSpinSettings.stopAtTotalBet>0&&e.gte(this.autoSpinSettings.stopAtTotalBet)||this.autoSpinSettings.stopAtCustom>0&&i.lte(-this.autoSpinSettings.stopAtCustom)?(this.stopAutoSpin(),!1):!0}stopAutoSpin(){this.isAutoSpinOn&&(this.autoSpinSettings.inAutoSpins=!1)}get isAutoSpinOn(){return this.autoSpinSettings&&this.autoSpinSettings.inAutoSpins}}var Cr=Object.defineProperty,Er=Object.getOwnPropertyDescriptor,Lr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Er(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Cr(e,i,s),s};const Tr="events:reel:slow",Br="events:reel:normal";let it=class{constructor(){this.acceleration=2,this.deceleration=2,this.stopacceleration=2,this.minSpeed=10,this.maxSpeed=60,this.duration=300,this._frameToStop=0,this.numberRandomize=1}advanceTime(t){if(this.enabled){try{this.getSpeed(),this.move(this.currentSpeed),this.addAndRemoveSymbols(),this._state==2&&Math.abs(this.currentSpeed-this.stopSpeed)<.01&&(this.stopSpeed=this.currentStopSpeed,this.displayReel(),this.cancel(),this.resolve())}catch{this.reject&&this.reject({code:ur,message:""})}return!0}}displayReel(){this.reel.display()}getSpeed(){if(this._state===3)this.currentSpeed=this.minSpeed;else if(this._state===4)x.emit(Br,this.reel),this.currentSpeed+=this.currentAcc,this._state=0;else if(this._state===0)this.currentSpeed+=this.currentAcc;else if(this._state===1)this.stopDistance-=this.currentSpeed,this.readyToStop();else if(this._state===2)this.currentSpeed-=this.currentAcc;else return 0;return this.currentSpeed=Math.min(this.currentSpeed,this.maxSpeed),this.currentSpeed}play(t){this.enabled=!0,this._state=0,this.reel=t,this.currentSpeed=this.startSpeed,this.currentAcc=this.acceleration,T.add(this),this.reel.options.restrictedSymbols&&this.reel.options.slowRestriction&&(this.slowRestrictedSymbols=this.reel.options.restrictedSymbols.split(","))}stop(t){if(this.slowStopping=!1,!this.enabled)return Promise.resolve();if(this._state===3)this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0;else if(this.slowRestrictedSymbols){for(let e=0;e<this.slowRestrictedSymbols.length;e++)if(t.indexOf(Number(this.slowRestrictedSymbols[e]))>=0){this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0,this.reel.options.slowSound&&ui(this.reel.options.slowSound,"default",!0);break}}return this.reel.addSymbolsAtTop(t,e=>e.idle()),this.stopDistance=this.getStopDistance(),this.readyToStop(),new Promise((e,i)=>{this.resolve=e,this.reject=i})}getStopDistance(){return-this.reel.topSymbol.y+this.reel.getTopSymbolY()}readyToStop(){this._frameToStop=0,this._state=1;var t=this.distanceToStop();this.stopDistance<=t&&(this.currentSpeed=this.speedToStop(),this._state=2)}cancel(){this.enabled=!1,T.remove(this)}move(t){this.reel.symbolContainer.children.forEach(e=>{e.y+=t})}addAndRemoveSymbols(){let t=this.reel.viewport;if(this.reel.topSymbol.y>=t.y){let i=this.reel.pickMany(this.numberRandomize);if(this.slowRestrictedSymbols){if(this._state===0&&this.slowRestrictedSymbols.indexOf(i[0].toString())>=0)this._state=3,this.currentSpeed=this.minSpeed,x.emit(Tr,this.reel),this.reel.options.slowSound&&ui(this.reel.options.slowSound,"default",!0);else if(this._state===3){let n=!1;for(let s=0;s<this.slowRestrictedSymbols.length;s++){let r=this.reel.symbolContainer.getSymbolIndex(Number(this.slowRestrictedSymbols[s]));r>=0&&this.reel.symbolContainer.get(r).y>=t.y+Ws()*_e()&&(n=!0)}n&&(this._state=4)}}this.reel.addSymbolsAtTop(i,n=>n.spin())}this.reel.removeOutsideSymbols()}speedToStop(){for(var t=this.stopDistance,e=this.stopSpeed,i=0,n=0;i<=t;)i+=e,e+=this.slowStopping?this.deceleration:this.stopacceleration,n++;let s=(t-n*this.stopSpeed)*2/(n*(n-1));return this.currentAcc=s,this.stopSpeed+n*s}distanceToStop(){for(var t=this.maxSpeed,e=0;t>=this.stopSpeed;)t-=this.slowStopping?this.deceleration:this.stopacceleration,e+=t;return e}static create(t){let e=new it;return e.maxSpeed=a(t,"max",60),e.minSpeed=a(t,"min",10),e.startSpeed=a(t,"startSpeed",0),e.stopSpeed=a(t,"stopSpeed",0),e.acceleration=a(t,"acceleration",2),e.deceleration=a(t,"deceleration",2),e.stopacceleration=a(t,"stopacceleration",e.acceleration),e.duration=a(t,"duration",300),e.numberRandomize=a(t,"numberRandomize",1),e.currentStopSpeed=e.stopSpeed,e}};it=Lr([d({tag:"animator:inback"})],it);function st(t){let e=Object.create(null);return t=t.trim().replace(/^(\?|#|&)/,""),t&&t.split("&").forEach(i=>{let n=i.replace(/\+/g," ").split("="),s=n.shift(),r=n.length>0?n.join("="):void 0;s=decodeURIComponent(s),r=r===void 0?null:decodeURIComponent(r),e[s]===void 0?e[s]=r:Array.isArray(e[s])?e[s].push(r):e[s]=[e[s],r]}),e}function $s(t){let e="",i=0;for(let n in t)t[n]&&(i++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Ar(t){return t===void 0&&(t=jt()),`${location.protocol}//${location.host}${location.pathname}?`+$s(t)}function jt(){return st(location.search)}function Dr(t,e){let i=jt();return i[t]=e,Ar(i)}function Nr(t,e){let i=jt();return i[t]?i[t]:e}class ls{constructor(e){e===void 0&&(e=location.toString());let i=e.indexOf("?"),n=i>0?e.substr(i+1):"";this.front=i>0?e.substr(0,i):e,this.queryString=st(n)}get search(){let e=$s(this.queryString);return e?"?"+e:""}set search(e){this.queryString=st(e)}toString(){let e=this.search;return this.front+e}getParameter(e,i){return this.queryString[e]?this.queryString[e]:i}setParameter(e,i){return this.queryString[e]=i,this}}function ze(t,e=!1){let i=document.cookie?document.cookie.split(";"):[],n=/(%[0-9A-Z]{2})+/g,s;for(let r of i){let o=r.split("="),l=o.slice(1).join("=");l.charAt(0)==='"'&&(l=l.slice(1,-1));try{let u=o[0].replace(n,decodeURIComponent);if(e&&(u=u.replace(/ +/,"")),l=l.replace(n,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch{}if(t===u){s=l;break}t||(s[u]=l)}catch{}}return s}function Mr(t,e){let i=new Date;i.setTime(i.getTime()+365*24*60*60*1e3),document.cookie=t+"="+e+";expires="+i.toUTCString()+";path=/"}const q=class q{};q.English="en",q.Chinese="cs",q.Vietnamese="vn",q.Thai="th",q.Khmer="kh",q.Indonesian="id",q.Korean="kr",q.Japanese="jp",q.Turkish="tr",q.Portuguese="pt",q.Hindi="hi";let I=q;class Rr{constructor(){this.LANGUAGE=I.English,this.HUDLANG=I.English}initialize(){return new Promise((e,i)=>{this.LANGUAGE=this.tryGetParameter("lang",I.English),this.DOMAIN=Ns(location.hostname),e()})}getHudLanguage(){return this.hudLang&&(this.HUDLANG=this.hudLang.indexOf(this.LANGUAGE)>-1?this.LANGUAGE:I.English),this.HUDLANG}tryGetParameter(e,i){return B(this.queryString)&&(this.queryString=jt()),this.queryString[e]?this.queryString[e]:i}resolve(e,i){let n=Qs(this,i);for(let s in n)n[s]&&bs(n[s])&&(e=e.replace(`{{${s}}}`,n[s]));return e}printEngineVersion(){this.engineVersion&&console.log("Guitarist "+this.engineVersion)}applyTimeVersion(e){return e+"?v="+(this.publishTime||Date.now().toString())}}class Wr extends Rr{constructor(){super(...arguments),this.HELP_URL=null}initialize(){if(this.configureLanguage(),this.configureFunplay(),this.configureToken(),this.configureDomain(),this.BRAND=this.tryGetParameter("brand"),this.OPERATOR=this.tryGetParameter("op"),this.AUTHENTICATED=this.tryGetParameter("auth","0"),this.HIDE_LOBBY=this.tryGetParameter("hidelobby","0"),this.HIDE_FULLSCREEN=this.tryGetParameter("hidefullscreen"),this.CHEAT=this.tryGetParameter("cheat"),this.CURRENCY_SYMBOL=this.tryGetParameter("currencySymbol","0")==="1",this.AUTHENTICATED==="1"){let e=R();e.accountName=e.displayName=this.tryGetParameter("username")}return this.loadUrlsConfig(this.tryGetParameter("config")).then(e=>{this.LOGIN_URL=e.loginURL,this.HOME_URL=e.homeURL,this.FUNDS_URL=e.fundsURL,this.LOBBY_URL=e.lobbyURL,this.LIVECHAT_URL=e.livechatURL,this.HIDE_LOBBY=e.hidelobby,e.currencySymbol&&(this.CURRENCY_SYMBOL=!0)}).then(()=>this.verify())}initActitvityTimer(){this.activeTimeout=0,this.inactiveTimeout=0;let e=A.json("configcommons");e&&(e.activeTimeout&&(this.activeTimeout=e.activeTimeout,this.startActivityTimer()),e.inactiveTimeout&&(this.inactiveTimeout=e.inactiveTimeout,this.startInactivityTimer()))}startInactivityTimer(){this.inactiveTimer=this.startTimer(this.inactiveTimer,this.inactiveTimeout,()=>this.inactivityTimesUp())}startActivityTimer(){this.activeTimer=this.startTimer(this.activeTimer,this.activeTimeout,()=>this.activityTimesUp()),this.sessionTimestamp=Je(),this.sessionUserBalance=R().balance}startTimer(e,i,n){return i>0&&(this.clearTimer(e),e=setTimeout(()=>n(),i*6e4)),e}clearTimer(e){e&&clearTimeout(e)}activityTimesUp(){if(E.current.checkExtendActivityTimesUp){this.isActivityTimesUp=!0;return}this.isActivityTimesUp=!1;let e=R(),i=Q("err_998"),n=Cn(Je()-this.sessionTimestamp),s=oe(n.getUTCHours(),2)+":"+oe(n.getUTCMinutes(),2)+":"+oe(n.getUTCSeconds(),2),r=e.balance.minus(this.sessionUserBalance),o=r.lt(0)?Q("youvelost"):Q("youvewon");o+=e.currency+" "+Ui(re(r.abs())),i=i.replace("%time%",s).replace("%winlose%",o),Me(i,"998",!0)}inactivityTimesUp(){let e=Q("err_999").replace("%s%",this.inactiveTimeout);Me(e,"999",!0)}configureLanguage(){let e=this.tryGetParameter("lang",I.English)||ze("lang");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e=I.English;break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e=I.Chinese;break;case e.indexOf("th")>=0:e=I.Thai;break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e=I.Vietnamese;break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e=I.Korean;break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e=I.Khmer;break;case e.indexOf("id")>=0:e=I.Indonesian;break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e=I.Japanese;break;case e.indexOf("tr")>=0:e=I.Turkish;break;case e.indexOf("pt")>=0:case e.indexOf("br")>=0:e=I.Portuguese;break;case e.indexOf("hi")>=0:case e.indexOf("in")>=0:e=I.Hindi;break;default:e=I.English}this.LANGUAGE=e}configureFunplay(){this.ANONYMOUS=this.FUNPLAY=this.tryGetParameter("fun","1")==="1"}configureToken(){this.TOKEN=this.tryGetParameter("token")||this.tryGetParameter("s")||ze("g")||ze("s")}configureDomain(){this.DOMAIN_FULL=location.hostname,this.DOMAIN=Ns(this.DOMAIN_FULL),this.URL_DOMAIN=this.DOMAIN,this.DOMAIN==="cloudfront.net"&&(this.DOMAIN="gpiops.com"),this.DOMAIN=this.tryGetParameter("domainlink",this.DOMAIN)}loadUrlsConfig(e){let i={loginURL:this.tryGetParameter("loginURL"),homeURL:this.tryGetParameter("homeURL"),fundsURL:this.tryGetParameter("fundsURL")||this.tryGetParameter("FundURL"),lobbyURL:this.tryGetParameter("lobbyURL"),livechatURL:this.tryGetParameter("livechatURL"),hidelobby:this.tryGetParameter("hidelobby","0"),currencySymbol:this.tryGetParameter("currencySymbol","0")==="1"};return B(e)?new Promise((n,s)=>{n(i)}):Ds(e).then(n=>{let s;try{s=JSON.parse(n.responseText)}catch{return console.warn("error in parse config.json"),i}return{loginURL:this.applyDomain(s.loginURL),homeURL:this.applyDomain(s.homeURL),fundsURL:this.applyDomain(s.fundsURL),lobbyURL:this.applyDomain(s.lobbyURL),livechatURL:this.applyDomain(s.livechatURL),hidelobby:s.hidelobby?String(s.hidelobby):"0",currencySymbol:s.currencySymbol}}).catch(n=>(console.warn("error in get config.json"),i))}applyDomain(e){if(e)return e.replace("[%%DOMAINLINK%%]",this.DOMAIN).replace("[%%URLDOMAIN%%]",this.URL_DOMAIN).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL)}verify(){return new Promise((e,i)=>{B(this.OPERATOR)&&i("The operator parameter is missing!"),!this.FUNPLAY&&B(this.TOKEN)?window.location.href=this.loginUrl:e()})}getDefaultLoginURL(){if(this.OPERATOR==="w88"&&this.defaultLoginURL)return this.defaultLoginURL}get loginUrl(){let e=this.applyDomain(this.LOGIN_URL||this.getDefaultLoginURL());return e?`${e}?url=`+encodeURIComponent(Dr("fun","0")):this.realLobbyUrl}get hasLobbyUrl(){return this.LOBBY_URL||this.defaultLobbyUrl}get realLobbyUrl(){if(this._realLobbyUrl===void 0){if(this.HIDE_LOBBY==="1")return this._realLobbyUrl="",this._realLobbyUrl;let e=this.applyDomain(this.LOBBY_URL||"//"+this.defaultLobbyUrl),i=new ls(e);i.search||(i.search=location.search),!this.FUNPLAY&&!B(this.USER_ID)&&(Nr("s")?i.setParameter("s",this.USER_ID):i.setParameter("token",this.USER_ID)),this._realLobbyUrl=i.toString()}return this._realLobbyUrl}get realPlayUrl(){let e=new ls;return e.setParameter("fun","0"),this.TOKEN?e.toString():this.loginUrl}get livechatUrl(){let e=R();return this.LIVECHAT_URL?this.applyDomain(this.LIVECHAT_URL).replace("[%%MEMBERID%%]",this.FUNPLAY?"0":e.accountName).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL).replace("[%%LANG%%]",this.LANGUAGE):""}get homeURL(){return this.applyDomain(this.HOME_URL||"//"+this.homeUrl)}get helpUrl(){if(this.HELP_URL===null){this.HELP_URL="";let e=A.json("configcommons");if(e&&e.help){let i=e.help.url,n=e.help.games[this.ID];i&&n&&(this.HELP_URL=i.replace("[%%GAME%%]",n))}this.HELP_URL=this.HELP_URL.replace("[%%LANG%%]",this.LANGUAGE)}return this.applyDomain(this.HELP_URL)}get langFullName(){return In(["en-us","id-id","ja-jp","km-kh","ko-kr","pt-br","th-th","tr-tr","vi-vn","zh-cn"],e=>e.indexOf(this.LANGUAGE)!==-1||this.LANGUAGE==="cs"&&e==="zh-cn")}get historyUrlDomain(){let e=A.json("configcommons");return this.applyDomain(e.historyUrl)}get historyUrl(){let e=this.historyVersion?`&ver=${this.historyVersion}`:"";return this.historyUrlDomain+"?key="+this.TOKEN+"&lang="+this.langFullName+e+"&gID="+this.gID}get hasFeatures(){return!(this.features&&this.features==="false")}get miniFooter(){return this.tryGetParameter("p")==="mini"&&this.tryGetParameter("footer")==="1"}get isWinWays(){return this.winWays&&this.winWays!==""}get isMultiplierDefaultLastIndex(){return this.multiplierDefaultIndex&&this.multiplierDefaultIndex==="last"}get multiplierAsCreditBet(){return this.creditBet==="true"}get isVibrationActivated(){return this.vibrationActivated==="true"}get mockFroundToggle(){return this.tryGetParameter("mfr")==="1"&&this.FUNPLAY&&R().demo==="1"}checkActivityTimesUp(){this.isActivityTimesUp&&this.activityTimesUp()}}class Ur extends Wr{constructor(){super(),this.NUM_OF_ROW=3,this.NUM_OF_COLUMN=5,this.PAYLINES=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,0,0],[2,2,1,2,2],[1,2,2,2,1],[1,0,0,0,1],[1,0,1,0,1],[1,2,1,2,1],[0,1,0,1,0],[2,1,2,1,2],[1,1,0,1,1],[1,1,2,1,1],[0,1,1,1,0],[2,1,1,1,2],[0,1,2,2,2],[2,1,0,0,0],[0,2,0,2,0],[2,0,2,0,2],[0,2,2,2,0],[2,0,0,0,2],[0,0,2,0,0],[2,2,0,2,2],[0,2,1,0,2],[2,0,1,2,0],[0,0,1,2,2],[2,2,1,0,0],[1,0,2,0,1],[1,2,0,2,1],[1,1,1,1,0],[1,1,1,1,2],[0,0,0,0,1],[2,2,2,2,1],[0,1,2,1,2],[2,1,0,1,0],[2,2,2,2,0],[0,0,0,0,2],[0,1,2,1,1],[2,1,0,1,1],[0,0,1,2,1],[2,2,1,0,1],[1,2,2,2,0],[1,0,0,0,2],[0,1,1,1,2],[2,1,1,1,0],[1,1,0,1,0],[1,1,2,1,2],[0,0,0,1,2]]}}function $r(t,e,i){return t<e?e:t>i?i:t}var Hr=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,Fr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Vr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Hr(e,i,s),s};let nt=class extends $t{constructor(t){super(),this.options=t}activate(){this.deactivate();let t=v.get("soundService");this.playback=this.options.bgm?t.playBgm(this.options.name):t.play(this.options.name,this.options.channel,!1,this.options.softBgm),z(this.playback)&&t.setVolume(this.options.volume,this.playback.soundId)}deactivate(){!this.options.bgm&&z(this.playback)&&(v.get("soundService").stop(this.playback.soundId),this.playback=void 0)}static create(t,e){let i=g(t,"auto"),n=new nt({name:Wi(t),volume:$r(a(t,"volume",1),0,1),channel:c(t,"channel","default"),bgm:g(t,"bgm",!1),softBgm:g(t,"softbgm",!1)});return i&&n.activate(),n}};nt=Fr([d({tag:"sound"})],nt);function de(t,e,i){let n=new t;return Gi(n,e,i)}function Gi(t,e,i){return X(e,{scene:i.scene,parent:t,context:i.context}),D(t,e,i),t}var jr=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,kr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Gr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&jr(e,i,s),s};let rt=class extends _{static create(t,e){let n=v.get("widgetService").get(K(t,"name"),e);return Gi(n,t,e)}};rt=kr([d({tag:"widget"})],rt);class Xr{constructor(){this.log=!1}initialize(){st(location.search).log==="1"&&(this.log=!0)}track(e){if(this.log)switch(e.type){case Y.Request:Yr(e.data);break;case Y.Response:zr(e.data);break;case Y.Exception:qr(e.data)}}}function Yr(t){console.log(t.method,t.url)}function zr(t){console.log(t.data)}function qr(t){console.log("Error: ",t.description,`
`,t.extraInfo)}var Kr=Object.defineProperty,Jr=Object.getOwnPropertyDescriptor,Zr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Jr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Kr(e,i,s),s};let ot=class extends _{constructor(){super(...arguments),this.ccy=""}show(t,e,i){this.label.value=this.ccy+t.toFixed(2),e&&(this.x=e.x+(je()-this.width)/2,this.y=e.y+_e()/4),i.addChild(this),this.visible=t>0&&e!==void 0}clear(){}static create(t,e){let i=de(ot,t,e);return i.ccy=_s(R().currency,C().CURRENCY_SYMBOL),i}};ot=Zr([d({tag:"multiplier"})],ot);var Qr=Object.defineProperty,eo=Object.getOwnPropertyDescriptor,to=(t,e,i,n)=>{for(var s=n>1?void 0:n?eo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Qr(e,i,s),s};let k=class extends _{static create(t,e){return de(k,t,e)}};k=to([d({tag:"layer"})],k);var io=Object.defineProperty,so=Object.getOwnPropertyDescriptor,no=(t,e,i,n)=>{for(var s=n>1?void 0:n?so(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&io(e,i,s),s};const ro={linear:TWEEN.Interpolation.Linear,curve:TWEEN.Interpolation.CatmullRom};function oo(t){return{color:a(t,"color",0),colorRight:a(t,"colorRight",0),width:a(t,"width",1),border:a(t,"border",0),borderColor:a(t,"borderColor",0),borderColorRight:a(t,"borderColorRight",-1),borderBlur:a(t,"borderBlur",0),blur:a(t,"blur",0),blendMode:c(t,"blendMode"),portion:a(t,"portion",1.5),emitFrequency:a(t,"emitFrequency",1),emitSpeed:a(t,"emitSpeed",0),emitEndTime:a(t,"emitEndTime",0),emitOnTop:g(t,"emitOnTop",!1),direction:c(t,"direction","left"),lineOffsets:a(t,"lineOffsets",0),showAllLines:g(t,"showAllLines",!1),singleLine:g(t,"singleLine",!1),fade:a(t,"fade",0),alpha:a(t,"alpha",1),threshold:a(t,"threshold",1),segments:a(t,"segments",5),outline:a(t,"outline",1),outlineColor:a(t,"outlineColor",0),outlineBlur:a(t,"outlineBlur",1),glowColor:a(t,"glowColor",0),glowWidth:a(t,"glowWidth",1),glowBlur:a(t,"glowBlur",1),glowAlpha:a(t,"glowAlpha",1),interpolationFunc:ro[c(t,"lineType","linear")]}}function ao(t){return{x:a(t,"x",0),y:a(t,"y",0),width:a(t,"width",Fi()*(je()+Rs())),height:a(t,"height",Ws()*_e()),radius:a(t,"radius",0),color:a(t,"color",0),alpha:a(t,"alpha",.7)}}const be=class be extends _{constructor(e){super(),this.lines=[],this.symbolAnimGap=0,this.animTimers=[],this.numWinningCols=0,this.symbolService=v.get("symbolService"),this.options=e,this.btmContent=new k,this.addChild(this.btmContent),this.drawLines(),this.content=new k,this.addChild(this.content),this.initSymbolPrefabs(),this.hideLines()}initSymbolPrefabs(){this.symbolsPrefabs=[];for(let e=0;e<C().NUM_OF_COLUMN;e++){let i=[];for(let n=0;n<C().NUM_OF_ROW;n++)i.push(void 0);this.symbolsPrefabs.push(i)}}drawLines(){}showLines(e,i=!1,n=!0){this.hideLines(),this.hideSymbols(),this.symbols=[],this.animTimers=[];let s;for(let o of e)this.winningLine=o,this.showLine(o.index-1),s=o.animation,this.setupSymbols(o);this.options.fade&&Ve(this.lineContent,this.options.fade);let r=L.get(be.WINLINE_SYMBOLS_ADJUSTMENT);r&&r(this),n&&this.showSymbols(s,i)}redrawLines(){let e=this.getChildIndex(this.lineContent);this.removeChild(this.lineContent),this.lineContent.removeChildren(),this.lines=[],this.createJoins(),this.drawLines(),this.hideLines(),this.addChildAt(this.lineContent,e)}winlinesLoop(){}createJoins(){}showLine(e){let i=this.lines[e];i&&(i.visible=!0,i.activate())}setupSymbols(e){let i=L.get("winLineSetupSymbols");if(i){i(this,e);return}for(let n=0;n<e.positions.length;n++){let[s,r]=e.positions[n],o=this.symbolsPrefabs[s][r];if(o===void 0){let l=this.reels.getRegisterPoint(s,r);o=this.reels.getSymbol(s,r).clone(),o.col=s,o.row=r,o.x=l.x,o.y=l.y;let u=this.reels.getSymbolPos(s,r);for(let h of u)this.symbolsPrefabs[h.x][h.y]=o}this.symbols.indexOf(o)===-1&&this.symbols.push(o)}}showSymbols(e,i=!1){let n=r=>{r.reference.visible=!1,r.animate(e,i);let o=L.get("winLineSymbolStrategy");o?o({view:r.content})?this.content.addChild(r):this.btmContent.addChild(r):this.content.addChild(r),r.activate()},s=this.getSymbolAnimTimers();this.symbols.forEach(r=>{if(this.symbolAnimGap>0){let o=this.symbolAnimGap*s.indexOf(r.col);o>0?this.animTimers.push(setTimeout(()=>n(r),o)):n(r)}else n(r)})}getSymbolAnimTimers(){let e=[];if(this.symbolAnimGap>0){for(let i=0;i<this.symbols.length;i++){let n=this.symbols[i].col;e.indexOf(n)===-1&&e.push(n)}e.sort()}return this.numWinningCols=e.length,e}getRightMostSymbol(){let e=0,i;for(let n=0;n<this.symbols.length;n++)e<this.symbols[n].col&&(i=this.symbols[n]);return i}removeContent(){for(let e=0;e<this.animTimers.length;e++)clearTimeout(this.animTimers[e]);this.content.removeChildren(),this.btmContent.removeChildren()}hideLines(){for(let e of this.lines)e.visible=!1,e.deactivate()}hideSymbols(){this.symbols&&this.symbols.forEach(e=>e.reference.visible=!0),this.removeContent()}clear(){let e=[];for(let i=0;i<C().NUM_OF_COLUMN;i++)for(let n=0;n<C().NUM_OF_ROW;n++){let s=this.symbolsPrefabs[i][n];s&&e.indexOf(s)===-1&&(e.push(s),s.reference.visible=!0,this.symbolService.free(s))}this.initSymbolPrefabs(),this.removeContent(),this.hideLines(),this.symbols=void 0}resetSymbolPrefabs(){this.initSymbolPrefabs()}};be.WINLINE_SHOW_ALL="all",be.WINLINE_SHOW_ALL_ONCE="allonly",be.WINLINE_SYMBOLS_ADJUSTMENT="winLineSymbolsAdjustment";let pe=be,$=class extends _{constructor(e){super(),this.options=e;let i=e.querySelector("multiplier");this.showMask=g(e,"mask");let n=L.get("multiplier");i&&(this.multiplier=n?n(i,{}):ot.create(i,{})),this.animationTimer=a(e,"timer",-1),this.mode=c(e,"mode"),this.animatedAll=g(e,"animatedAll",!0),this.animationAllTimer=a(e,"animationAllTimer",-1),this.showMask&&(this.maskOptions=ao(e.querySelector("mask"))),this.isWinningLine=!1}show(e,i=!1){this.forceEnd=!1,this.clear(),this.winlineSound=!1,this.winLines=e,this.silent=i,this.currentWinlineLoop=0,this.addChild(this.paylines),this.hasWinLines?(this.emit($.EVENT_WIN_PANEL_SHOW),this.addMask(),this.displayNextLine(),this.emit($.EVENT_START)):(this.silent||this.emit($.EVENT_LOOP),this.paylines.winlinesLoop())}close(){this.isWinningLine&&this.emit($.EVENT_WIN_PANEL_CLOSE),this.isWinningLine=!1,this.clear()}addMask(){if(this.showMask&&this.maskSprite===void 0){let e=Ne(this.maskOptions.width,this.maskOptions.height,this.maskOptions.radius,this.maskOptions.color);e.position.set(this.maskOptions.x,this.maskOptions.y),e.alpha=this.maskOptions.alpha,this.addChildAt(e,0)}else this.showMask&&this.maskSprite&&(this.addChildAt(this.maskSprite,0),this.maskSprite.visible=!0)}clear(){this.maskSprite&&(this.maskSprite.visible=!1),this.multiplier&&this.multiplier.clear(),this.currentLineIndex=this.mode===pe.WINLINE_SHOW_ALL?-2:-1,this.paylines.clear(),this.clearTimer(),this.removeChildren()}get hasWinLines(){return this.winLines&&this.winLines.length>0}get currentWinLine(){return this.winLines[this.currentLineIndex]}displayNextLine(){if(this.currentLineIndex++,this.currentLineIndex===this.winLines.length||this.mode===pe.WINLINE_SHOW_ALL&&this.currentLineIndex===0||this.mode===pe.WINLINE_SHOW_ALL_ONCE&&this.currentLineIndex>0){if(this.currentLineIndex=0,this.winlineSound=!1,this.silent||this.emit($.EVENT_LOOP),this.paylines.winlinesLoop(),this.forceEnd){this.close(),this.emit($.EVENT_END);return}if(this.winlinesLoop>0){if(this.currentWinlineLoop++,this.currentWinlineLoop>=this.winlinesLoop){this.forceEnd=!0,this.close(),this.emit($.EVENT_END);return}this.winlineSound=this.symbolSoundLoop>0&&this.currentWinlineLoop>=this.symbolSoundLoop}}let e=this.currentLineIndex===-1||this.mode===pe.WINLINE_SHOW_ALL_ONCE,i=e?this.winLines:[this.currentWinLine],n=!0;e&&(n=this.animatedAll),i.length===1&&i[0].index===0&&(n=!0),this.paylines.showLines(i,this.winlineSound,n),this.isWinningLine=!0,this.emit($.EVENT_WINLINE,i);let s=this.updateMultiplier(e);this.animationTimer>0?(this.clearTimer(),this.startTimer(e||i.length===1&&i[0].index===0)):s.content.once("animationComplete",()=>this.displayNextLine())}updateMultiplier(e=!1){if(e)return this.paylines.symbols[0];let i=this.currentWinLine,n=v.get("multiplierService"),s=n?n.getSymbol(this.paylines.symbols):this.paylines.symbols[0];return this.multiplier&&this.multiplier.show(i.win,s,this),s}getWinLineHighestSymbol(e,i=-1){let n=-1;for(let s=0;s<e.positions.length;s++){let[r,o]=e.positions[s],l=Number(this.paylines.reels.getSymbol(r,o).index);n<l&&l!=i&&(n=l)}return n===-1?i:n}clearTimer(){clearTimeout(this.timer)}startTimer(e){let i=this.animationTimer+(this.paylines.numWinningCols-1)*this.paylines.symbolAnimGap;e&&this.animationAllTimer>=0&&(i=this.animationAllTimer),this.timer=setTimeout(()=>{this.displayNextLine()},i)}static create(e,i){let n=lo($,e,i);return G(e,(s,r)=>{s.nodeName==="mask"&&(c(s,"render")==="canvas"&&U.type===PIXI.RENDERER_TYPE.CANVAS?(n.maskSprite=Ne(n.maskOptions.width,n.maskOptions.height,n.maskOptions.radius,n.maskOptions.color),n.maskSprite.position.set(n.maskOptions.x,n.maskOptions.y),n.maskSprite.alpha=n.maskOptions.alpha):c(s,"render")==="webgl"&&U.type===PIXI.RENDERER_TYPE.WEBGL&&(n.maskSprite=new PIXI.Sprite(A.resolve(c(s,"src"))),n.maskSprite.position.set(a(s,"x"),a(s,"y")),n.maskSprite.scale.set(a(s,"scale",1)),n.maskSprite.alpha=n.maskOptions.alpha))}),n}};$.EVENT_LOOP="loop";$.EVENT_WIN_PANEL_SHOW="show";$.EVENT_WIN_PANEL_CLOSE="stopped";$.EVENT_WINLINE="winline";$.EVENT_START="start";$.EVENT_END="end";$=no([d({tag:"winPanel"})],$);function lo(t,e,i){let n=v.get("winLineService"),s=E.current.getComponentByTag("reels");s||(s=E.current.getComponentByID("reels"));let r=new t(e);return r.paylines=n.generate(s.reels),r.paylines.reels=s,r.paylines.symbolAnimGap=a(e,"symbolAnimGap",0),r.winlinesLoop=a(e,"winlinesLoop",5),r.symbolSoundLoop=a(e,"symbolSoundLoop",2),r.x=s.x,r.y=s.y,D(r,e,i),r}var ho=Object.defineProperty,uo=Object.getOwnPropertyDescriptor,co=(t,e,i,n)=>{for(var s=n>1?void 0:n?uo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ho(e,i,s),s};let Re=class extends _{constructor(t,e,i,n,s,r,o=-1,l=-1){super(),this.content=new PIXI.Graphics,this.content.beginFill(i),s&&o<0&&l<0&&this.content.lineStyle(s,r),n?this.content.drawRoundedRect(0,0,t,e,n):this.content.drawRect(0,0,t,e),this.drawShadow(s,o,t,e),this.drawShadow(s,l,t,e,t,e),U.type!==PIXI.RENDERER_TYPE.WEBGL&&this.content.generateCanvasTexture?(this.canvasContent=new PIXI.Sprite(this.content.generateCanvasTexture(1,1)),this.addChild(this.canvasContent)):this.addChild(this.content)}set tint(t){t<0||(this.canvasContent?this.canvasContent.tint=t:this.content.tint=t)}drawShadow(t,e,i,n,s=0,r=0){e<0||(this.content.lineStyle(t,e),this.content.moveTo(s,r),this.content.lineTo(i,0),this.content.moveTo(s,r),this.content.lineTo(0,n))}static create(t,e){ae(t,"color",p.resolve(c(t,"color"))),ae(t,"innerShadow",p.resolve(c(t,"innerShadow")));let i=new Re(a(t,"width",0),a(t,"height",0),a(t,"color",0),a(t,"radius",0),a(t,"border",0),a(t,"bcolor",0),a(t,"innerShadow",-1),a(t,"dropShadow",-1));return i.tint=a(t,"tint",-1),D(i,t,e),X(t,{scene:e.scene,parent:i,context:e.context}),i}};Re=co([d({tag:"rectangle"})],Re);var po=Object.defineProperty,fo=Object.getOwnPropertyDescriptor,mo=(t,e,i,n)=>{for(var s=n>1?void 0:n?fo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&po(e,i,s),s};let We=class extends _{constructor(t,e,i,n){super(),this.content=new PIXI.Graphics,this.content.beginFill(e),i&&this.content.lineStyle(i,n),this.content.drawPolygon(t),this.addChild(this.content)}static create(t,e){let i=new We(te(t,"path"),a(t,"color",0),a(t,"border",0),a(t,"bcolor",0));return D(i,t,e),X(t,{scene:e.scene,parent:i,context:e.context}),i}};We=mo([d({tag:"polygon"})],We);var go=Object.defineProperty,bo=Object.getOwnPropertyDescriptor,vo=(t,e,i,n)=>{for(var s=n>1?void 0:n?bo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&go(e,i,s),s};let pi=class extends j{configure(t){this.options=t}translate(t){this.dict===void 0&&this.initDict();let e=bn(t);for(let i=0;i<e.length;i++){let n=e[i];t=t.replace(`{{${n}}}`,this.dict[n])}return t}initDict(){if(this.dict!==void 0)return;let t=c(this.options,"resource").split(",");for(let e=0;e<t.length;e++)if(this.dict===void 0)this.dict=A.json(t[e]);else{let i=A.json(t[e]);for(let n in i)this.dict[n]=i[n]}}};pi=vo([d({tag:"textService",category:"service"})],pi);var yo=Object.defineProperty,wo=Object.getOwnPropertyDescriptor,xo=(t,e,i,n)=>{for(var s=n>1?void 0:n?wo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&yo(e,i,s),s};let fi=class extends j{configure(t){this.options=t}getSymbol(t){if(t.length===0)return;let e=c(this.options,"mode","last");if(e==="last")return zt(t);if(e==="middle"){let i=t.length,n=Math.floor(i/2);return i%2==0&&zt(t).col==Fi()-1&&(n-=1),t[n]}else return e==="third"?t.length>2?t[2]:zt(t):t[0]}};fi=xo([d({tag:"multiplierService",category:"service"})],fi);var So=Object.defineProperty,Po=Object.getOwnPropertyDescriptor,_o=(t,e,i,n)=>{for(var s=n>1?void 0:n?Po(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&So(e,i,s),s};let mi=class extends j{constructor(){super(...arguments),this.adjustment={size:0,x:0,y:0}}configure(t){this.options=t,this.adjustment.x=a(t,"x",0),this.adjustment.y=a(t,"y",0),this.adjustment.size=a(t,"size",0)}};mi=_o([d({tag:"fontService",category:"service"})],mi);var Oo=Object.defineProperty,Io=Object.getOwnPropertyDescriptor,Co=(t,e,i,n)=>{for(var s=n>1?void 0:n?Io(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Oo(e,i,s),s};let gi=class extends j{startup(){if(p){let t=p.LANGUAGE;[I.English,I.Japanese,I.Chinese].indexOf(t)===-1&&(t=I.English);let e=`assets/icons/icon192.${t}.jpg`;this.addLink("apple-touch-icon",e),this.addLink("apple-touch-startup-image",e)}}setTitle(){document.title=Ft("{{gametitle}}")}addLink(t,e){var i=document.createElement("link");i.rel=t,i.href=e,document.head.appendChild(i)}};gi=Co([d({tag:"i18nService",category:"service"})],gi);var Eo=Object.defineProperty,Lo=Object.getOwnPropertyDescriptor,Hs=(t,e,i,n)=>{for(var s=n>1?void 0:n?Lo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Eo(e,i,s),s};let at=class extends $t{constructor(t){super(),this.tween=t}activate(){this.active!==!0&&(this.tween.start(),this.active=!0)}deactivate(){this.active!==!1&&(this.tween.stop(),this.active=!1)}static create(t,e){let i=Wi(t),n=v.get("tweenService");if(n&&e.parent instanceof PIXI.DisplayObject){let s=new at(n.create(i,e.parent,t));return g(t,"auto")&&s.activate(),s}}};at=Hs([d({tag:"tween"})],at);let bi=class extends j{constructor(){super(...arguments),this.tweens={}}register(t,e){this.tweens[t]=e}create(t,e,i){return this.tweens[t](e,i)}startup(){PIXI.Ticker.shared.add(this.update)}shutdown(){PIXI.Ticker.shared.remove(this.update)}update(){TWEEN.update()}};bi=Hs([d({tag:"tweenService",category:"service"})],bi);var To=Object.defineProperty,Bo=Object.getOwnPropertyDescriptor,Ao=(t,e,i,n)=>{for(var s=n>1?void 0:n?Bo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&To(e,i,s),s};let vi=class extends j{configure(t){this.options=t}generate(){return Do(this.options,No)}};vi=Ao([d({tag:"winLineService",category:"service"})],vi);function Do(t,e){L.get("reels");let i=je(),n=_e(),r=C().PAYLINES,o=r.length,l=oo(t),u=[];for(let h=0;h<o;h++){let b=r[h],P=b.length,m=[];for(let O=0;O<P;O++){let S=b[O],Yt={x:Vs(O)+i/2,y:Fs(S)+n/2};m.push(Yt)}m.length>=2&&(m.unshift({x:m[0].x-i/2,y:m[0].y}),m.push({x:m[m.length-1].x+i/2,y:m[m.length-1].y})),u.push(m)}return l.joints=u,new e(l)}class No extends pe{constructor(e){super(e),e.emitOnTop&&this.addChild(this.lineContent)}drawLines(){this.lineContent=new k,this.addChild(this.lineContent);for(let e of this.options.joints){let i=this.drawLine(e);this.lines.push(i),this.lineContent.addChild(i)}}drawLine(e){let i=new k;if(this.options.border>0){let s=this.joinLines(e,2*this.options.border+this.options.width,this.options.borderColor);if(i.addChild(s),this.options.borderBlur)if(U.type===PIXI.RENDERER_TYPE.WEBGL){let r=new PIXI.filters.BlurFilter;r.blur=this.options.borderBlur,s.filters=[r]}else s.alpha=this.options.borderBlur/80}let n=this.joinLines(e,this.options.width,this.options.color);return i.addChild(n),i}createJoins(){L.get("reels");let e=je(),i=_e(),s=C().PAYLINES,r=s.length,o=[];for(let l=0;l<r;l++){let u=s[l],h=[];for(let b=0;b<u.length;b++){let P=u[b],m={x:Vs(b)+e/2,y:Fs(P)+i/2};h.push(m)}h.length>=2&&(h.unshift({x:h[0].x-e/2,y:h[0].y}),h.push({x:h[h.length-1].x+e/2,y:h[h.length-1].y})),o.push(h)}this.options.joints=o}joinLines(e,i,n){let s=new PIXI.Graphics,r=e.length;if(s.lineStyle(i,n),U.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.blur>0){let o=new PIXI.filters.BlurFilter;o.blur=this.options.blur,s.filters=[o]}this.options.blendMode&&(this.options.blendMode==="screen"?s.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(s.blendMode=PIXI.BLEND_MODES.ADD)),this.options.alpha!==void 0&&this.options.alpha!==null&&(s.alpha=this.options.alpha);for(let o=0;o<r;o++){let l=e[o];o===0?s.moveTo(l.x,l.y):s.lineTo(l.x,l.y)}return s}}function Vs(t){return t*(je()+Rs())}function Fs(t){return t*(_e()+cr())}let qe=["VisibilityState","visibilitychange","Hidden"],Ae,ki=[],Xi=[];function Mo(){if(!Ae){let t=["webkit","ms","o","moz","khtml"];for(let e of t)if(e+qe[2]in document)return Ae=e,Ae}}function Yi(t){return Ae==null?qe[t].substring(0,1).toLowerCase()+qe[t].substring(1):Ae+qe[t]}function Ro(t){return document[Yi(t)]}function js(t){let e=t?ki:Xi,i=e.length;for(;i--;)e[i]()}function Qt(){js(!0)}function ei(){js(!1)}function Wo(){try{if(Uo())document.addEventListener(Yi(1),()=>{Ro(2)?ei():Qt()},!0);else if(document.addEventListener)window.addEventListener("focus",Qt,!0),window.addEventListener("blur",ei,!0);else{let t=document.attachEvent;t&&(t("onfocusin",Qt),t("onfocusout",ei))}}catch(t){console.error(t)}}function Uo(){return Yi(2)in document}function $o(t){ki.push(t)}function Ho(t){Xi.push(t)}function Vo(){ki=[],Xi=[]}function Fo(){Mo(),Wo()}class jo{constructor(e=1,i="stage"){this.imageUrl="assets/swipeup.png",this.enabled=!0,this.uc=!1,this.dolfin=!1,this.chromeIOS=!1,this.iphone=!1,this.qq=!1,this.ios=!1,this.ipad=!1,this.safari=!1,this.vivonative=!1,this.initHeight=-1,this.canvasName=i,this.resolution=e;let n=window.navigator.userAgent;this.canvas=document.getElementById(i),this.ios=n.toLowerCase().indexOf("mac")>-1,this.ipad=n.toLowerCase().indexOf("ipad")>-1,this.skipper=n.toLowerCase().indexOf("qqbrowser")>-1||n.toLowerCase().indexOf("sony")&&n.toLowerCase().indexOf("ucbrowser")>-1,this.uc=n.toLowerCase().indexOf("ucbrowser")>-1,this.qq=this.isQQ(n),this.chromeIOS=n.toLowerCase().indexOf("crios")>-1,this.iphone=n.toLowerCase().indexOf("iphone")>-1,this.vivonative=n.toLowerCase().indexOf("vivobrowser")>-1;let s=/Chrome\/([0-9.]+)/.exec(n),r=null;s&&(r=/Chrome\/([0-9.]+)/.exec(n)[1]),this.dolfin=n.toLowerCase().indexOf("dolfin")>-1||r&&Number(r.split(".")[0])<34}isQQ(e){let i=e.toLowerCase().match(/chrom(e|ium)\/([0-9]+)\./);i=i?parseInt(i[2],10):!1;let n=e.match(/Mobile\/\w{5,}\sQQ\/(\d+[\.\d]+)/),s=window.innerWidth<780;return!!((i<45||n)&&s)}get isLandscape(){return window.innerHeight<=window.innerWidth}get isFullScreen(){let e=10;if(this.isLandscape||(e=8,this.skipper&&(e=4)),"standalone"in window.navigator&&window.navigator.standalone)return this.enabled=!1,!0;let i=Math.abs(this.canvas.width/this.resolution-window.innerWidth)<window.innerWidth/e,n=document.webkitCurrentFullScreenElement&&typeof document.webkitCurrentFullScreenElement<"u"||document.fullscreenElement!==null&&document.fullscreenElement!==void 0||document.mozFullScreenElement!==null&&document.mozFullScreenElement!==void 0||document.webkitFullscreenElement!==null&&document.webkitFullscreenElement!==void 0||document.msFullscreenElement!==null&&document.msFullscreenElement!==void 0;return i&&n}setFullscreen(){this.enabled&&(this.uc||this.dolfin||this.qq||this.vivonative||this.isFullScreen||(this.applyFullscreenAPI(),this.ios||window.scrollTo(0,1)))}addOverlay(){if(!window.addEventListener)return;let e=document.getElementById("swipeLayer");if(e){e.style.width!==this.canvas.style.width&&(e.style.width=this.canvas.style.width,e.style.marginLeft=this.canvas.style.marginLeft);return}let i=window.innerHeight*(this.chromeIOS?1:2),n=`<div id="swipeLayer" style="position: fixed; left:${this.canvas.style.marginLeft}; top:0; width:${this.canvas.style.width}; min-height:${i}px; height:${i}px; display:block; ">
</div>`;var s=document.createElement("div");if(s.innerHTML=n,e=s.firstChild,this.addEventListeners(e),this.canvas.parentElement.insertBefore(e,this.canvas),this.chromeIOS||document.getElementById("swipeBackground"))return;let r=`<div id="swipeBackground" style="position: relative; z-index:-1; left:0; top:0; width:${window.innerWidth}px; min-height:${i}px; height:${i}px; display:block; ">
</div>`;s=document.createElement("div"),s.innerHTML=r;let o=s.firstChild;this.addEventListeners(o),window.document.body.insertBefore(o,window.document.body.lastChild)}addEventListeners(e){e.addEventListener("touchstart",()=>{this.enabled=!1,this.removeOverlay()}),e.addEventListener("touchend",()=>{this.enabled=!0,window.scrollTo(0,1)}),e.addEventListener("touchcancel",()=>{this.enabled=!0,window.scrollTo(0,1)})}removeOverlay(){let e=document.getElementById("swipeLayer");e&&(e.parentElement.removeChild(e),this.chromeIOS||window.scrollTo(0,1))}applyFullscreenAPI(){if(this.isFullScreen)return;let e=window.document.documentElement,i=document.requestFullscreen||e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen||e.requestFullScreen||e.webkitCurrentRequestFullScreen;i&&i.call(e)}update(){!this.enabled||!this.ios||this.uc||this.qq||this.canvas.height==screen.width-20||this.canvas.width===window.innerWidth&&this.canvas.height===window.innerHeight||(this.isLandscape?this.addOverlay():this.removeOverlay())}}var Go=Object.defineProperty,ko=Object.getOwnPropertyDescriptor,Xo=(t,e,i,n)=>{for(var s=n>1?void 0:n?ko(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Go(e,i,s),s};const yi="notify:visibility.visible",wi="notify:visibility.hidden";let xi=class extends j{configure(t){}startup(){Fo(),$o(()=>{Z.emit(yi)}),Ho(()=>{Z.emit(wi)}),w.mobile&&(this.fullscreenAPI=new jo(f.resolution),this.fullscreenAPI.enabled=!1,T.add(this))}set fullScreenEnabled(t){this.fullscreenAPI&&(this.fullscreenAPI.enabled=t)}setDeviceFullscreen(){this.fullscreenAPI&&this.fullscreenAPI.setFullscreen()}shutdown(){T.remove(this),Vo()}advanceTime(t){return this.fullscreenAPI.update(),!0}};xi=Xo([d({tag:"deviceService",category:"service"})],xi);var Yo=Object.defineProperty,zo=Object.getOwnPropertyDescriptor,qo=(t,e,i,n)=>{for(var s=n>1?void 0:n?zo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Yo(e,i,s),s};class Ko{constructor(){this.channels={}}lengthOfChannels(){return Object.keys(this.channels).length}lengthOfChannel(e){return B(this.channels[e])?0:Object.keys(this.channels[e]).length}exist(e,i){let n=this.channels[e];return z(n)&&z(n[i])}getPlaybackBySoundId(e){for(let i in this.channels){let n=this.channels[i];for(let s in n){let r=n[s];if(r.soundId===e)return r}}}add(e,i,n,s){let r=this.channels[e];B(r)&&(r={},this.channels[e]=r);let o={channelId:e,name:i,soundId:n,volume:1,softBgm:s};return r[i]=o,o}removeBySoundId(e){return this.removeBy(i=>i.soundId===e)}removeByName(e){return this.removeBy(i=>i.name===e)}removeBy(e){for(let i in this.channels){let n=this.channels[i];for(let s in n){let r=n[s];if(e(r))return delete n[s],Zs(n)&&delete this.channels[i],r}}}}let Si=class extends j{constructor(){super(...arguments),this.howlers={},this._muted=!1,this._volume=1,this.audios={},this.scope="sounds",this.commonScope="commonsounds"}configure(t){let e=c(t,"resource");e!==this.commonScope&&(this.defaultScope=e,this.scope=this.defaultScope),this.softBgmValue=a(t,"softBgm",.3),this.channelManager=new Ko}initSoundSettings(){let t=ze(p.ID+"-muted",!0);this.muted=t=="true"}get backgroundMusic(){return this.bgm}startup(){v.has("deviceService")||v.register("deviceService",xi).startup(),Z.on(yi,()=>{this.ready&&!this.muted&&Howler.volume(this._volume)}),Z.on(wi,()=>{this.ready&&Howler.volume(0)})}shutdown(){Z.off(yi),Z.off(wi)}get ready(){return z(this.howlers[this.scope])}get soundPlayer(){try{if(!this.ready){let t=A.json(this.scope);z(t)&&(t.onend=e=>{this.resetBgm(e),this.channelManager.removeBySoundId(e)},this.howlers[this.scope]=new Howl(t)),this.initSoundSettings()}return this.howlers[this.scope]}catch{return null}}play(t,e="default",i=!1,n=!1,s){if(w.isUCBrowser)return!this._muted&&t==="spin"&&this.playAudio(t),null;if(!i&&!this.soundPlayer&&this.channelManager.exist(e,t)||!this.soundPlayer)return null;if(i){let o=this.channelManager.removeByName(t);o&&this.stop(o.soundId)}n&&this.softBgm();let r=this.soundPlayer.play(t);return s&&this.soundPlayer.once("end",s,r),this.channelManager.add(e,t,r,n)}playAudio(t){this.audios[t]?(this.audios[t].ended||(this.audios[t].currentTime=0),this.audios[t].play()):this.loadAudio(t).play()}loadAudio(t){let e=document.createElement("audio");return e.setAttribute("src","./assets/"+t+".m4a"),e.load(),e.addEventListener("canplaythrough",()=>{this.audios[t]=e}),e}soundURLS(t){let e=t.substr(0,t.length-3),i=[],n=["m4a","ogg","ac3","mp3"];for(let s=0;s<n.length;s++)i.push(e+n[s]);return i}stopBgm(){this.bgm&&this.stop(this.bgm.soundId),this.bgm=void 0}playBgm(t,e=!1){if(!(!e&&this.bgm&&this.bgm.name===t))return this.stopBgm(),this.bgm=this.play(t,"bgm",!0),this.bgm}softBgm(){this.bgm&&this.setVolume(this.softBgmValue*this.bgm.volume,this.bgm.soundId,!0)}fade(t,e,i,n,s){this.soundPlayer.fade(t,e,i,n),s&&this.soundPlayer.once("fade",()=>{s()})}resetBgm(t){if(this.bgm&&this.bgm.soundId!==t){let e=this.channelManager.getPlaybackBySoundId(t);e&&e.softBgm&&this.setVolume(this.bgm.volume,this.bgm.soundId,!0)}}resume(){for(let t in this.channelManager.channels){let e=this.channelManager.channels[t];for(let i in e)this.soundPlayer.play(e[i].soundId)}}pause(t){return this.resetBgm(t),this.soundPlayer.pause(t),this}stop(t){if(t)return this.resetBgm(t),this.channelManager.removeBySoundId(t),this.soundPlayer.stop(t),this}switchScope(t){return this.setVolume(0),this.scope=this.defaultScope,t?(this.scope=this.commonScope,this.soundPlayer?(this.setVolume(1),!0):(this.scope=this.defaultScope,!1)):(this.setVolume(1),!0)}setVolume(t,e,i=!1){if(!i){let n=this.channelManager.getPlaybackBySoundId(e);n&&(n.volume=t)}return this.soundPlayer.volume(t*this.volume,e),this}getVolume(){return this.soundPlayer.volume()}set volume(t){this._volume=t,this._muted||Howler.volume(t)}get volume(){return this._volume}get muted(){return this._muted}set muted(t){this._muted=t,Mr(p.ID+"-muted",t),t?Howler.volume(0):Howler.volume(this._volume)}};Si=qo([d({tag:"soundService",category:"service"})],Si);function Pi(t,e=0){return Math.floor(Math.random()*(t-e))+e}class Jo{constructor(e,i){this.capability=e,this.factory=i,this.pool=[],this.metrics={totalAlloc:0,totalFree:0}}allocate(...e){let i;return this.pool.length===0?(i=this.factory.apply(this.factory,e),this.metrics.totalAlloc++):(i=this.pool.pop(),this.metrics.totalFree--),i}free(e){this.capability<=this.pool.length?(this.destroy(e),e=void 0):this.pool.indexOf(e)===-1&&this.pool.push(e),this.metrics.totalFree++}destroy(e){let i=e;i.dispose&&i.dispose()}collect(e){this.pool.forEach(n=>{this.destroy(n)}),this.pool=[];let i=this.metrics.totalAlloc-this.metrics.totalFree;this.clearMetrics(i)}find(e){let i=this.pool.length;for(var n=0;n<i;n++){let s=this.pool[n];if(e(s))return s}}clearMetrics(e){this.metrics.totalAlloc=e||0,this.metrics.totalFree=0}}const hs="idle",Zo="spin",Qo="animate",ea="events:symbol:state";let us=class Gs extends _{constructor(e,i,n){super(),this.index=e,this.prefab=i,this.masking=n,this.attachedFollow=!1,this.row=-1,this.col=-1,this.frame=new PIXI.Container,this.views={}}idle(){this.setState(hs)}spin(){this.setState(Zo)}animate(e=Qo,i=!0){this.setState(e,i)}set onAnimationComplete(e){this.content.onComplete=e}deactivate(){super.deactivate(),this.deactivateViews()}clone(){let i=v.get("symbolService").get(this.index);return i.reference=this,i.col=this.col,i.row=this.row,i}free(){this.attachedSymbol=void 0,this.attachedFollow=!1,this.reference=void 0,this.deactivate(),this.views={}}attach(e,i=!1){this.attachedSymbol=e,this.attachedFollow=i,this.updateAttached()}updateAttached(){this.attachedSymbol&&this.attachedFollow&&(this.attachedSymbol.x=this.x,this.attachedSymbol.y=this.y)}checkCurrentState(e){return this.state===e}deactivateViews(){for(let e in this.views)e&&this.views[e].deactivate()}resetStateViews(){for(let e in this.views)this.views[e]=void 0}setState(e,i=!1){this.hasState(e)||(e=hs),this.deactivate(),this.removeChildren();let n=this.views[e];if(i){if(n=ue(this.getPrefab(e),{}),n.components)for(let s=0;s<n.components.length;s++)n.components[s].options&&n.components[s].options.volume&&(n.components.splice(s,1),N("winline","default",!0))}else n||(n=ue(this.getPrefab(e),{}));return this.content=n,this.addChild(this.content),this.activate(),this.views[e]=n,Z.emit(ea,this),this.masking&&(this.addChild(this.masking),this.content.mask=this.masking),this.addChild(this.frame),this.state=e,this.content}hasState(e){return this.prefab&&this.prefab.definitions&&this.prefab.definitions[e]!==void 0}getPrefab(e){return this.prefab?this.prefab.definitions[e]:null}static create(e,i,n){let s=null;n&&(s=Ne(n.width,n.height,n.radius),s.position.set(n.x,n.y));let r=new Gs(e,i,s);return r.name=`symbol#${e}`,r}};var ta=Object.defineProperty,ia=Object.getOwnPropertyDescriptor,sa=(t,e,i,n)=>{for(var s=n>1?void 0:n?ia(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ta(e,i,s),s};let _i=class extends j{configure(t){if(this.total=a(t,"total"),t.childElementCount<this.total&&B(t.querySelector("#default")))throw new Error("the number of symbol prefabs must equals the total of symbols or there is a prefab named 'default'.");this.size=on(t,"size"),this.multiSize=an(t,"multiSize");let e=rn(t,"anchor");this.poolsOn=g(t,"pool"),this.anchor={x:this.size.width*e.x,y:this.size.height*e.y},this.symbolPrefabs={},this.symbolMasking={},G(t,(i,n)=>{let s=F(i),r={definitions:{}};G(i,(o,l)=>{r.definitions[Wi(o)]=o.firstElementChild}),this.symbolPrefabs[s]=r,g(i,"mask",!1)&&(this.symbolMasking[s]={x:a(i,"x",0),y:a(i,"y",0),width:a(i,"width",this.size.width),height:a(i,"height",this.size.width),radius:a(i,"radius",0)})}),this.pools={}}pickMany(t){let e=[];for(let i=0;i<t;i++)e.push(Pi(this.total));return e}pickOne(){return this.get(Pi(this.total))}get(t){let e=this.symbolPrefabs[t.toString()];return B(e)&&(e=this.symbolPrefabs.default),this.poolsOn?this.getObjectPool(t).allocate(t,e,this.symbolMasking[t.toString()]):us.create(t,e,this.symbolMasking[t.toString()])}free(t){t.free(),this.poolsOn&&this.getObjectPool(t.index).free(t)}hasSymbol(t){return!B(this.symbolPrefabs[t.toString()])}getObjectPool(t){let e=t.toString(),i=this.pools[e];return B(i)&&(this.pools[e]=i=new Jo(5,us.create)),i}};_i=sa([d({tag:"symbolService",category:"service"})],_i);var na=Object.defineProperty,ra=Object.getOwnPropertyDescriptor,oa=(t,e,i,n)=>{for(var s=n>1?void 0:n?ra(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&na(e,i,s),s};let Oi=class extends j{configure(t){this.options=t}create(){return L.get(`component:animator:${c(this.options,"type")}`).create(this.options)}};Oi=oa([d({tag:"reelAnimatorService",category:"service"})],Oi);var aa=Object.defineProperty,la=Object.getOwnPropertyDescriptor,ha=(t,e,i,n)=>{for(var s=n>1?void 0:n?la(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&aa(e,i,s),s};let Ii=class extends j{constructor(){super(...arguments),this.cache={}}configure(t){this.options=t}get(t,e={}){let i=en(this.options,t);if(z(i)){let n=c(i,"mode","new");if(n==="new")return this.create(i,e);if(n==="singleton")return this.takeFromCache(i,e)}}dispose(){for(let t in this.cache)this.cache[t].deactivate();this.cache={}}create(t,e){let i=ue(t,e);return D(i,t,e),i}takeFromCache(t,e){let i=F(t);return this.cache[i]||(this.cache[i]=this.create(t,e)),this.cache[i]}};Ii=ha([d({tag:"widgetService",category:"service"})],Ii);var ua=Object.defineProperty,ca=Object.getOwnPropertyDescriptor,da=(t,e,i,n)=>{for(var s=n>1?void 0:n?ca(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ua(e,i,s),s};let Ue=class extends j{constructor(){super(...arguments),this.started=!1,this.strictMode=!1,this.strictLandscapeWeb=!1}getOrientation(){return this.strictLandscapeWeb&&!w.mobile&&!w.tablet||window.innerHeight<=window.innerWidth?y.LANDSCAPE:y.PORTRAIT}get isPortrait(){return this.getOrientation()===y.PORTRAIT}get isLandscape(){return this.getOrientation()===y.LANDSCAPE}configure(t){}startup(){this.mode=p.orientation||"landscape",this.started=!0,this.strictMode=p.strictMode&&p.strictMode==="true",this.strictLandscapeWeb=p.strictLandscapeWeb&&p.strictLandscapeWeb==="true"}};Ue=da([d({tag:"orientationService",category:"service"})],Ue);var pa=Object.defineProperty,fa=Object.getOwnPropertyDescriptor,ma=(t,e,i,n)=>{for(var s=n>1?void 0:n?fa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&pa(e,i,s),s};const ga="events:resize",ba="events:web_resize";let Ci=class extends j{constructor(){super(...arguments),this.prevOrientation=0}configure(e){}startup(){v.has("orientationService")||v.register("orientationService",Ue).startup(),this.orientationService=v.get("orientationService"),this.orientationService.started||this.orientationService.startup(),this.resizeAndOrientaionChecker=setInterval(()=>{this.checkResize(),this.checkSecondaryOrientation()},30),this.checkResize()}checkResize(){let e=window.innerWidth,i=window.innerHeight;(this.windowHeight!==i||this.windowWidth!==e)&&(this.windowHeight=i,this.windowWidth=e,this.layout(),Z.emit(ga),Z.emit(ba))}checkSecondaryOrientation(){this.windowOrientation!==window.orientation&&(this.windowOrientation=window.orientation,this.layout())}shutdown(){clearInterval(this.resizeAndOrientaionChecker)}layout(){let e=f,i=e.minWidth,n=e.minHeight,s=e.width,r=e.height,o=1,l=0,u=this.orientationService.getOrientation();if(ti(!1),this.isBothEnaled&&u===y.PORTRAIT&&!this.orientationService.strictLandscapeWeb||this.isPortraitOnlyEnabled&&this.isNotMobile&&u===y.LANDSCAPE||this.isBothEnaled&&u===y.PORTRAIT&&this.orientationService.strictLandscapeWeb&&this.isMobileOrTablet?(s=e.height,r=e.width,i=e.minHeight,n=e.minWidth):this.isPortraitOnlyEnabled&&this.isMobileOrTablet&&u===y.LANDSCAPE?ti(!0):w.mobile&&(this.orientationService.mode==="portrait"&&u===y.LANDSCAPE||this.orientationService.mode==="landscape"&&u===y.PORTRAIT)&&(this.orientationService.strictMode?this.orientationService.mode==="portrait"&&ti(!0):(l=Math.PI/2,s=e.height,r=e.width,i=e.minHeight,n=e.minWidth)),i>0&&n>0&&this.isMobileOrTablet){let S=Math.min(window.innerWidth/i,window.innerHeight/r),Yt=Math.min(window.innerWidth/(u===y.PORTRAIT?i:s),window.innerHeight/n);o=Math.max(S,Yt)}else o=Math.min(window.innerWidth/(i>0?i:s),window.innerHeight/r);let h=Math.ceil(s*o),b=Math.ceil(r*o);M.scale.set(o),M.rotation=l,this.isBothEnaled?(M.position.set(0,0),M.pivot.set(0,0)):M.position.set(h/2,b/2),U.resize(h,b);let P=(window.innerWidth-h)/2,m=(window.innerHeight-b)/2,O=e.canvas;O.style.marginLeft=P+"px",O.style.marginTop=m+"px",O.style.width=h+"px",O.style.height=b+"px",this.offsetX=P/o,this.offsetY=m/o,E.current&&(this.prevOrientation!=u&&this.isBothEnaled&&E.current.onOrientationChange(u),E.current.onSceneResize()),this.prevOrientation=u,this.scrollTop()}scrollTop(){let e=w;e.mobile&&(e.android&&!e.chrome?window.scrollTo(0,1):window.scrollTo(0,0))}get isBothEnaled(){return this.orientationService.mode==="both"||this.orientationService.mode==="portrait-only"}get isPortraitOnlyEnabled(){return this.orientationService.mode==="portrait-only"}get isNotMobile(){return!w.mobile&&!w.tablet}get isMobileOrTablet(){return w.mobile||w.tablet}get deviceViewportOffset(){let e=window.innerWidth,i=window.innerHeight,n=f.width,s=f.height,r=M.scale.x,o=new PIXI.Point;return this.isMobileOrTablet&&this.orientationService.getOrientation()===y.PORTRAIT&&(n=f.height,s=f.width),e<n*r&&(o.x=Math.floor((n*r-e)*(.5/r))),i<s*r&&(o.y=Math.floor((s*r-i)*(.5/r))),o}};Ci=ma([d({tag:"layoutService",category:"service"})],Ci);function ti(t){let e=document.getElementById("portraitonly");if(!e)return;let i=document.getElementById("portraitonlytext");if(i){let n="Please use portrait mode for the best experience.";try{Q("portraitonly")&&(n=Q("portraitonly"))}catch{}B(n)&&(n="Please use portrait mode for the best experience."),i.textContent=n}va(!t),e.style.visibility=t?"visible":"hidden"}function va(t){let e=document.getElementById("wrapper");e&&(e.style.visibility=t?"visible":"hidden")}Ut([it,nt,at,$,rt,Re,We]);Ut([_i,Oi,Ii,Ci,Ue,vi,Si,pi,fi,mi,gi,bi]);L.map("context").toSingleton(Ur);L.map("user",Ir).asSingleton();L.map("normalSpinParser").toValue(xr);En([Xr]);function ya(){lr(slotapp)}function zi(t,e,i){let n=new t({value:c(e,"value"),style:ws(e),bitmap:g(e,"bitmap",!1),align:c(e,"align","left"),case:c(e,"case"),comma:g(e,"comma",!0),verticalAlign:c(e,"verticalAlign"),decimalPlace:a(e,"decimalPlace",2),duration:a(e,"duration",500),prefix:c(e,"prefix",""),suffix:c(e,"suffix",""),wordWrap:g(e,"wordWrap",!1),wordWrapWidth:a(e,"wordWrapWidth",0),maxWidth:a(e,"maxWidth",0),letterSpacing:a(e,"letterSpacing",0),lineHeight:a(e,"lineHeight",0),lineJoin:c(e,"lineJoin","miter"),animZoom:g(e,"animZoom",!1),animScale:a(e,"animScale",1.2),durationMultiplierByValue:a(e,"durationMultiplierByValue")});return D(n,e,i),X(e,{scene:i.scene,parent:n,context:i.context}),jn(n,e,"align",c,"left"),n}var wa=Object.defineProperty,xa=Object.getOwnPropertyDescriptor,Sa=(t,e,i,n)=>{for(var s=n>1?void 0:n?xa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&wa(e,i,s),s};let we=class extends _{constructor(t){super(),this.hasComma=!0,this.options=t,this.initText(),this.update()}initText(){let t=this.options.style;this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:t.fontSize,fontName:t.fontFamily}),this.text.tint=t.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,t),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text)}set value(t){this.text.text=t,this.update()}set align(t){this.options.align=t,this.update()}set tint(t){this.text.tint=t}set fill(t){this.options.bitmap||(this.text.style.fill=t)}get value(){return this.text.text}get anchorX(){if(this.options.align==="left")return 0;if(this.options.align==="center")return .5;if(this.options.align==="right")return 1}get anchorY(){if(!this.options.verticalAlign)return-1;if(this.options.verticalAlign==="top")return 0;if(this.options.verticalAlign==="middle")return .5;if(this.options.verticalAlign==="bottom")return 1}update(){this.updateLetterCase(),this.updateComma(),this.updateAnchorX(),this.updateAnchorY()}updateLetterCase(){this.options.case==="upper"?this.text.text=this.text.text.toUpperCase():this.options.case==="lower"&&(this.text.text=this.text.text.toLowerCase())}updateComma(){this.hasComma&&(this.text.text=Ui(this.text.text))}updateAnchorX(){}updateAnchorY(){this.options.verticalAlign&&(this.text.y=-this.text.height*this.anchorY)}set fontSize(t){this.options.bitmap?this.text.fontSize=t:this.text.style.fontSize=t}static create(t,e){return ae(t,"fill",p.resolve(c(t,"fill"))),zi(we,t,e)}};we=Sa([d({tag:"label"})],we);var Pa=Object.defineProperty,_a=Object.getOwnPropertyDescriptor,Oa=(t,e,i,n)=>{for(var s=n>1?void 0:n?_a(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Pa(e,i,s),s};let lt=class extends we{constructor(t){super(t),this._value=new Decimal(0),this._tweeningDisplayValue=0,this.prefix="",this.suffix="",this.lastValue="",this.currentValue="a",this.ON_UPDATE_START="OnUpdateStart",this.ON_UPDATING_BY_ZOOM="OnUpdatingByZoom",this.ON_UPDATE_COMPLETE="OnUpdateComplete",this._value=new Decimal(t.value),this.prefix=t.prefix,this.suffix=t.suffix,this.update()}set value(t){let e;if(e=new Decimal(t),e.equals(this._value))return;this.removeTween(),e.toNumber()-this._value.toNumber();let i=this.options.duration,n={value:this._value.toNumber()};this.tween=new TWEEN.Tween(n).onStart(()=>{this.emit(this.ON_UPDATE_START)}).to({value:e.toNumber()},i).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.update(n.value)}).onComplete(()=>{this.emit(this.ON_UPDATE_COMPLETE)}),this._value=e,this.tween.start()}set duration(t){this.options.duration=t}get value(){return this._value.toString()}get tweeningDisplayValue(){return this._tweeningDisplayValue}update(t){let e=t||this._value||0;this._tweeningDisplayValue=e instanceof Decimal?e.toNumber():e,this.text.text=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.updateLetterCase(),this.updateComma(),this.updatePrefixSuffix(),this.currentValue=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.lastValue!=this.currentValue&&(this.lastValue=this.currentValue,this.options.animZoom==!0&&(this.onAnimZoom(),this.emit(this.ON_UPDATING_BY_ZOOM)),this.updateAnchorX(),this.updateAnchorY())}resetScale(){this.text.scale.set(1)}onAnimZoom(){this.text.position;let t={scale:this.options.animScale},e=new TWEEN.Tween(t).onStart(()=>{this.text.scale.set(t.scale)}).to({scale:1},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.text.scale.set(t.scale)}).onComplete(()=>{this.resetScale(),this.updateAnchorX(),this.updateAnchorY(),e.stop(),e=null});e.start()}updatePrefixSuffix(){this.text.text=this.prefix+this.text.text+this.suffix}setValueDirectly(t){this._value=new Decimal(t),this.removeTween(),this.update()}reset(){this.setValueDirectly("0")}removeTween(){this.tween&&this.tween.stop()}deactivate(){this.removeTween()}static create(t,e){return zi(lt,t,e)}};lt=Oa([d({tag:"animatedLabel"})],lt);var le=(t=>(t[t.Mouse=0]="Mouse",t[t.Keyboard=1]="Keyboard",t[t.None=2]="None",t))(le||{}),Ia=Object.defineProperty,Ca=Object.getOwnPropertyDescriptor,Ea=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ca(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ia(e,i,s),s};let ht=class extends _{constructor(t){super(),this.options=t,this._enabled=!0,this.upTexture=t.up,this.downTexture=t.down,this.disabledTexture=t.disabled,this.sprite=new PIXI.Sprite(this.upTexture),this.addChild(this.sprite),this.interactive=!0,this.command=t.command,this.cursor="pointer",this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonDownHandler(t){this._enabled&&(this.downTexture&&(this.sprite.texture=this.downTexture),this.sprite.x=this.options.dx,this.sprite.y=this.options.dy,Te("onDown",this))}buttonUpHandler(){this._enabled&&(this.sprite.texture=this.upTexture,this.sprite.x=0,this.sprite.y=0,Te("onUp",this))}buttonClickedHandler(){this._enabled&&(ji(this.options.sound),!Te("onClick",this)&&this.command&&x.emit(this.command,{source:le.Mouse,context:this}),this.activate())}set enabled(t){this._enabled=t,this.cursor="pointer",this._enabled?this.sprite.texture=this.upTexture:this.sprite.texture=this.disabledTexture?this.disabledTexture:this.upTexture}get enabled(){return this._enabled}static create(t,e){let i=A,n=i.resolve(c(t,"up")),s;De(t,"down")&&(s=i.resolve(c(t,"down")));let r;De(t,"disabled")&&(r=i.resolve(c(t,"disabled")));let o=new ht({up:n,down:s,disabled:r,command:c(t,"command"),sound:c(t,"sound","button"),dx:a(t,"dx"),dy:a(t,"dy")});return Ht(o,t,e),g(t,"debug")&&Ts(o),X(t,{scene:e.scene,parent:o,context:e.context}),D(o,t,e),o}};ht=Ea([d({tag:"button"})],ht);function ks(t,e,i){let n=new t;D(n,e,i),G(e,(r,o)=>{let l=ue(r,{scene:i.scene,parent:n,context:i.context});l instanceof _&&(l.name=F(r),l.visible=!1,n.frames.push(l))});let s=c(e,"goto")||0;return n.goto(s),n}var La=Object.defineProperty,Ta=Object.getOwnPropertyDescriptor,Ba=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ta(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&La(e,i,s),s};let $e=class extends _{constructor(){super(...arguments),this.frames=[]}goto(t){if(this.removeChildren(),typeof t=="number"?this.currFrameIndex=t<this.frames.length?t:0:this.currFrameIndex=this.indexOfFrame(t),this.currFrameIndex>=0){let e=this.frames[this.currFrameIndex];return e.visible=!0,this.addChild(e),!0}else return!1}get current(){return this.frames[this.currFrameIndex]}get numSlides(){return this.frames.length}next(){let t=this.currFrameIndex;t++,t>-1&&(t>=this.numSlides&&(t=0),this.goto(t))}prev(){let t=this.currFrameIndex;t--,t<0&&(t=this.numSlides-1),this.goto(t)}indexOfFrame(t){for(let e=0;e<this.frames.length;e++)if(this.frames[e].name===t)return e;return-1}static create(t,e){return ks($e,t,e)}};$e=Ba([d({tag:"slide"})],$e);var Aa=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,Na=(t,e,i,n)=>{for(var s=n>1?void 0:n?Da(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Aa(e,i,s),s};const ve=class ve{};ve.disable="disable",ve.up="up",ve.down="down",ve.over="over";let se=ve,ut=class extends $e{constructor(){super(),this._enabled=!0,this._down=!1,this._over=!1,this._holdEnabled=!1,this._tick=0,this.interactive=!0,this.cursor="pointer",this.initialScale=this.scale.clone(),this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}enableOver(){this.on("mouseover",this.buttonOverHandler).on("mouseout",this.buttonOutHandler)}set clickable(t){if(t.content&&t.content.geometry.graphicsData&&t.content.geometry.graphicsData.length){let e=t.content.geometry.graphicsData[0].shape;e&&(t instanceof We?this.hitArea=new PIXI.Polygon(e.points):this.hitArea=new PIXI.Circle(t.x,t.y,e.radius))}}set holdEnabled(t){this._holdEnabled=t,t&&T.add(this)}goto(t){return super.goto(t)||super.goto(se.up),!0}buttonDownHandler(t){this._enabled&&(this._down=!0,this._downTime=this._tick,this.goto(se.down),this.animateButton(!0))}buttonOverHandler(t){this._enabled&&(this._over=!0,this.goto(se.over),this.onmouseover&&x.emit(this.onmouseover,{source:le.Mouse,context:this}))}buttonOutHandler(){this._enabled&&(this._over=!1,this._down=!1,this._down||this.goto(se.up))}buttonUpHandler(){this._enabled&&(this._down=!1,this.goto(this._over?se.over:se.up),this.animateButton(!1))}buttonClickedHandler(){this._enabled&&(ji(this.sound),!Te("onClick",this)&&this.command&&x.emit(this.command,{source:le.Mouse,context:this}),this.activate())}animateButton(t){this.animate!=!1&&(t?this.scale.set(this.initialScale.x*1.1):this.scale.set(this.initialScale.x))}set enabled(t){this._enabled=t,this._enabled?(this.cursor="pointer",this.goto(se.up)):(this.cursor=null,this._down=!1,this.goto(se.disable))}get enabled(){return this._enabled}advanceTime(t){if(this._tick++,this._down&&this._enabled&&this._tick-this._downTime>30){this._tick%2===0&&x.emit(this.command,{source:le.Mouse,context:this});return}return!0}deactivate(){super.deactivate(),T.remove(this)}activate(){super.activate(),this._holdEnabled&&T.add(this)}static create(t,e){return Ma(ut,t,e)}};ut=Na([d({tag:"buttonSlide"})],ut);function Ma(t,e,i){let n=ks(t,e,i),s=n.indexOfFrame("hit");return n.command=c(e,"command"),n.sound=c(e,"sound","button"),n.onmouseover=()=>{},n.animate=g(e,"animate",!1),n.over&&n.enableOver(),s>=0&&(n.clickable=n.frames.splice(s,1)[0],n.hit=void 0),Ht(n,e,i),n.holdEnabled=g(e,"holdEnabled"),n}var Ra=Object.defineProperty,Wa=Object.getOwnPropertyDescriptor,Ua=(t,e,i,n)=>{for(var s=n>1?void 0:n?Wa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ra(e,i,s),s};let ct=class extends _{constructor(t,e){super(),this.content=Es(t,e),this.addChild(this.content)}static create(t,e){ae(t,"color",p.resolve(c(t,"color")));let i=new ct(a(t,"radius",10),a(t,"color",0));return D(i,t,e),i}};ct=Ua([d({tag:"circle"})],ct);var $a=Object.defineProperty,Ha=Object.getOwnPropertyDescriptor,Va=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ha(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&$a(e,i,s),s};let he=class extends _{constructor(e){super(),this._sprite=new PIXI.Sprite(e),this.addChild(this._sprite)}set resource(e){if(e instanceof PIXI.Texture)this._sprite.texture=e;else{let i=A.resolve(e);this._sprite.texture=i}}set tint(e){e>=0&&(this._sprite.tint=e)}get tint(){return this._sprite.tint}set blendMode(e){e==="screen"?this._sprite.blendMode=PIXI.BLEND_MODES.SCREEN:e==="add"?this._sprite.blendMode=PIXI.BLEND_MODES.ADD:this._sprite.blendMode=PIXI.BLEND_MODES.NORMAL}get sprite(){return this._sprite}static create(e,i){ae(e,"tint",p.resolve(c(e,"tint")));let n=L.get("context"),r=A.resolve(n.resolve(c(e,"res"),i.context)),o=new he(r);return o.tint=a(e,"tint",-1),o.blendMode=c(e,"blendMode",""),D(o,e,i),X(e,{scene:i.scene,parent:o,context:i.context}),o}static instantiate(e){let n=A.resolve(e);return new he(n)}};he=Va([d({tag:"img"})],he);var Fa=Object.defineProperty,ja=Object.getOwnPropertyDescriptor,Ga=(t,e,i,n)=>{for(var s=n>1?void 0:n?ja(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Fa(e,i,s),s};const ka={rectangle:0,polygon:1,image:2,circle:3};let dt=class extends $t{constructor(t,e,i){switch(super(),this.target=t,e){case 2:U.type===PIXI.RENDERER_TYPE.WEBGL?this.content=new PIXI.Sprite(A.resolve(i.res)):this.content=ai(i.width,i.height);break;case 0:this.content=ai(i.width,i.height);break;case 1:this.content=Bn(i.path);break;case 3:this.content=Es(i.radius);break}this.content.x=i.x,this.content.y=i.y,this.target.addChild(this.content),this.target.mask=this.content}activate(){this.active!==!0&&(this.target.mask!=this.content&&(this.target.mask=this.content),this.active=!0)}deactivate(){this.active!==!1&&(this.target.mask!=null&&(this.target.mask=null),this.active=!1)}static create(t,e){let i=ka[c(t,"type","rectangle")],n={width:a(t,"width",0),height:a(t,"height",0),x:a(t,"x",0),y:a(t,"y",0),path:te(t,"path"),res:c(t,"res",null),radius:a(t,"radius",0)};if(e.parent instanceof PIXI.Container)return new dt(e.parent,i,n)}};dt=Ga([d({tag:"mask"})],dt);function Xa(t){return new Promise(e=>{setTimeout(e,t)})}function J(t){let e=0;return new Promise(i=>{const n={advanceTime:s=>(e+=s*PIXI.Ticker.shared.elapsedMS,e>=t&&(T.remove(n),i()),!0)};T.add(n)})}function W(t){let e=0;return new Promise(i=>{const n={advanceTime:s=>(e+=16.66666666667,e>=t&&(T.remove(n),i()),!0)};T.add(n)})}var Ya=Object.defineProperty,za=Object.getOwnPropertyDescriptor,qa=(t,e,i,n)=>{for(var s=n>1?void 0:n?za(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ya(e,i,s),s};let pt=class extends _{constructor(t,e){super(),this.options=e,this.animator=new PIXI.AnimatedSprite(t),this.animator.loop=!1,this.currentFrame=0,this.setHueAndBlendMode(),this.addChild(this.animator)}play(t=-1){if(t!==0)return this.loop=t,new Promise((e,i)=>{this.animator.onComplete=this.makeCompleteHandler(e),this.animator.gotoAndPlay(this.currentFrame)})}get speed(){return this.animator.animationSpeed}set speed(t){this.animator.animationSpeed=t}set tint(t){this.animator.tint=t}makeCompleteHandler(t){return()=>{this.loop===1?(t(),this.onComplete()):this.loop===-1?this.playLoop():this.loop>1&&(this.loop--,this.playLoop())}}playLoop(){this.options.loopDelay>0?Xa(this.options.loopDelay).then(()=>this.animator.gotoAndPlay(0)):this.animator.gotoAndPlay(0)}playOnce(){return this.play(1)}activate(){super.activate(),this.options.continuous||(this.currentFrame=0),this.play(this.options.loop)}deactivate(){super.deactivate(),this.animator.stop(),this.options.continuous&&(this.currentFrame=this.animator.currentFrame)}onComplete(){this.emit("animationComplete"),this.options.removeOnComplete&&this.parent&&this.parent.removeChild(this)}setHueAndBlendMode(){if(U.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.hue!==0){let t=new PIXI.ColorMatrixFilter;t.hue(this.options.hue,!1),this.setBlendMode(t),this.animator.filters=[t]}else this.setBlendMode(this.animator)}setBlendMode(t){this.options.blendMode&&(this.options.blendMode==="screen"?t.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(t.blendMode=PIXI.BLEND_MODES.ADD))}static create(t,e){let i=L.get("context"),s=A.resolve(i.resolve(c(t,"res"),e.context));if(ae(t,"tint",p.resolve(c(t,"tint"))),g(t,"reverse",!1)&&s&&s.length){let h=s.slice(0);h.reverse(),s=h.slice(a(t,"reverseStart",0))}let r=a(t,"loop",1),o=new pt(s,{loop:r,loopDelay:a(t,"loopDelay",0),hue:a(t,"hue",0),blendMode:c(t,"blendMode",null),continuous:g(t,"continuous",!1),removeOnComplete:g(t,"removeOnComplete",!1)});o.speed=a(t,"speed",1),o.currentFrame=a(t,"startFrame",0);let l=a(t,"tint",-1);return l>=0&&(o.tint=l),X(t,{scene:e.scene,parent:o,context:e.context}),D(o,t,e),g(t,"play",!0)&&o.play(r),o}};pt=qa([d({tag:"movieClip"})],pt);var Ka=Object.defineProperty,Ja=Object.getOwnPropertyDescriptor,Za=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ja(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ka(e,i,s),s};const Qa="events:afterTrackTime";let ft=class extends _{constructor(t,e,i,n){super(),this.trackTimeIndex=0,this.animation=new PIXI.spine.Spine(t),this.animation.skeleton.setToSetupPose(),this.animation.update(0),this.animation.autoUpdate=!1,e&&(this.actionName=e,this.loop=i,this.trackIndex=0,this.animation.state.setAnimation(this.trackIndex,e,i)),n&&(this.eventListener={event:(s,r)=>{this.emit(r.data.name,this)}},this.animation.state.addListener(this.eventListener)),this.addChild(this.animation)}setAnimation(t,e,i,...n){return this.actionName=e,this.loop=i,this.trackIndex=t,this.trackTimeIndex=0,this.afterTrackTime=n,this.animation.state.setAnimation(t,e,i)}addAnimation(t,e,i){this.animation.state.addAnimation(t,e,i,0)}setSkin(t){this.animation.skeleton.setSkinByName(t)}advanceTime(t){return this.animation.update(.01666666666667),this.afterTrackTime&&this.trackTimeIndex<this.afterTrackTime.length?this.animation.state.tracks[this.trackIndex].trackTime>=this.afterTrackTime[this.trackTimeIndex]&&(this.trackTimeIndex++,this.emit(Qa,this)):(this.trackTimeIndex=0,this.afterTrackTime=null),!0}isCurrentAction(t){return this.actionName===t}hasAnimation(t){return this.animation.state.hasAnimation(t)}set tint(t){this.animation.tint=t,this.additionalAssets&&this.additionalAssets.forEach((e,i)=>{e.tint=t})}get animated(){return this._animated}set animated(t){t!==this._animated&&(this._animated=t,t?T.add(this):T.remove(this))}get currentAction(){return this.actionName}addCompleteListener(t){let e={complete:i=>t(i.trackIndex,i.loopsCount())};return this.animation.state.addListener(e),e}removeCompleteListener(t){this.animation.state.removeListener(t)}removeSpineEventListener(){this.eventListener&&this.animation.state.removeListener(this.eventListener)}removeAllCompleteListener(){this.animation.state.clearListeners()}setVisibleAnimated(t){this.visible=this.animated=t}set timeScale(t){this.animation.state.timeScale=t}set continuous(t){this._continuous=t}getSlotContainerByName(t){return this.animation.slotContainers[this.animation.skeleton.findSlotIndex(t)]}getAdditionalAssets(){return this.additionalAssets}addWidgetToSlotContainer(t,e,i,n){let s=this.getWidgetByName(e),r=this.getSlotContainerByName(t);if(s&&r){if(i&&r.removeChildren(),n){let o=s.scale.y;s.scale.set(s.scale.x,-o)}r.addChild(s),this.additionalAssets||(this.additionalAssets=[]),this.additionalAssets.push(s)}}activate(){super.activate(),this.trackIndex!==void 0&&this.actionName!=null&&!this._continuous&&(this.animation.skeleton.setToSetupPose(),this.animation.state.clearTrack(this.trackIndex),this.setAnimation(this.trackIndex,this.actionName,this.loop)),this.animated&&T.add(this)}deactivate(){T.remove(this),super.deactivate()}getWidgetByName(t){return v.get("widgetService").get(t)}resetTrackTime(){this.setTrackTime(0),this.animation.update(0)}endTrackTime(){this.setTrackTime(this.animation.state.tracks[this.trackIndex].trackEnd)}setTrackTime(t){this.animation.state.tracks[this.trackIndex].trackTime=t}static create(t,e){if(U.type!==PIXI.RENDERER_TYPE.WEBGL)return null;let i=L.get("context"),n=A,s=i.resolve(c(t,"res"),e.context),r=a(t,"speed",1),o=n.resolve(s),l=new ft(o.spineData,c(t,"action"),g(t,"loop",!0),g(t,"event",!1)),u=c(t,"skin"),h=a(t,"trackTime",0);return u&&l.setSkin(u),h&&l.setTrackTime(h),D(l,t,e),l.animation.state.timeScale=r,l.tint=a(t,"tint",16777215),l.animated=g(t,"auto"),l.continuous=g(t,"continuous",!1),G(t,(b,P)=>{b.nodeName==="slot"&&l.addWidgetToSlotContainer(c(b,"name"),c(b,"widget"),g(t,"clearFirst",!1))}),l.animated||l.animation.update(0),l}};ft=Za([d({tag:"spineAnimation"})],ft);function el(t,e,i){let n=de(t,e,i);return Ht(n,e,i),n.selected=K(e,"selected")==="true",n.command=c(e,"command"),n.sound=c(e,"sound","button"),n}var tl=Object.defineProperty,il=Object.getOwnPropertyDescriptor,sl=(t,e,i,n)=>{for(var s=n>1?void 0:n?il(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&tl(e,i,s),s};let mt=class extends _{constructor(){super(),this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpOutsideHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpOutsideHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonUpHandler(t){}buttonDownHandler(t){}buttonClickedHandler(){this.selected=!this._selected,ji(this.sound),!Te("onClick",this)&&this.command&&x.emit(this.command,{source:le.Mouse,context:this})}buttonUpOutsideHandler(){}set selected(t){this._selected=t,t?(this.down&&(this.down.visible=!0),this.up&&(this.up.visible=!1)):(this.down&&(this.down.visible=!1),this.up&&(this.up.visible=!0))}get selected(){return this._selected}get currentButton(){return this.down&&this.down.visible?this.down:this.up&&this.up.visible?this.up:null}static create(t,e){return el(mt,t,e)}};mt=sl([d({tag:"toggleButton"})],mt);var nl=Object.defineProperty,rl=Object.getOwnPropertyDescriptor,ol=(t,e,i,n)=>{for(var s=n>1?void 0:n?rl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&nl(e,i,s),s};let Ei=class extends j{constructor(){super(...arguments),this.keybindings=[],this.keys=[]}keyDownHandler(t){if(this._enabled&&t&&t.key){let e=t.key.toLowerCase();if(this.keys.indexOf(e)===-1){this.keys.push(e);let i=this.getKeybinding();i&&i.emitOnKeyPressed&&x.emit(i.command,{source:le.Keyboard,key:e})}}}keyUpHandler(t){if(t&&t.key){let e=t.key.toLowerCase(),i=this.keys.indexOf(e),n=this.getKeybinding();n&&!n.emitOnKeyPressed&&x.emit(n.command,{source:le.Keyboard,key:e}),i>-1&&this.keys.splice(i,1)}}getKeybinding(){for(let t of this.keybindings){if(t.scene!==E.current.id)continue;let e=!0;for(let i of t.keys)if(this.keys.indexOf(i)===-1){e=!1;break}if(e)return t}}configure(t){this.options=t,G(t,(e,i)=>{let n=c(e,"when"),s=n.indexOf("."),r="";s!==-1&&(r=n.substr(s+1),n=n.substr(0,s)),this.keybindings.push({keys:c(e,"key").split("+"),command:c(e,"command"),when:r,scene:n,emitOnKeyPressed:g(e,"emitOnKeyPressed")})})}set enabled(t){this._enabled=t}startup(){this._enabled=!0,window.addEventListener("keydown",t=>this.keyDownHandler(t)),window.addEventListener("keyup",t=>this.keyUpHandler(t))}shutdown(){this._enabled=!1,window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("keyup",this.keyUpHandler),this.keybindings=[]}};Ei=ol([d({tag:"keyboardService",category:"service"})],Ei);var al=Object.defineProperty,ll=Object.getOwnPropertyDescriptor,hl=(t,e,i,n)=>{for(var s=n>1?void 0:n?ll(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&al(e,i,s),s};const Li="events:comboSelectionUp",Xs="events:comboSelectedIndexChanged";let gt=class extends _{constructor(t){super(),this.selectedIndex=0,this.isDown=!1,this.texts=[],this.ymovecount=0,this.options=t,this.spriteBG=new PIXI.Sprite(this.options.spriteBG),this.drawDropdown(),this.dropdown.on("mousedown",this.dropdownDownHandler,this).on("touchstart",this.dropdownDownHandler,this).on("mouseup",this.dropdownUpHandler,this).on("touchend",this.dropdownUpHandler,this).on("mouseupoutside",this.dropdownUpOutsideHandler,this).on("touchendoutside",this.dropdownUpOutsideHandler,this).on("touchmove",this.dropdownMoveHandler,this).on("mousemove",this.dropdownMoveHandler,this),this.options.mouseWheelEnabled&&this.addMouseWheelEvent()}addMouseWheelEvent(){if(document.addEventListener)document.addEventListener("mousewheel",t=>this.dropdownWheelHandler(t),!0),document.addEventListener("DOMMouseScroll",t=>this.dropdownWheelHandler(t),!0);else{let t=document.attachEvent;t&&t("onmousewheel",e=>this.dropdownWheelHandler(e))}}drawDropdown(){this.dropdownHeight=this.options.itemHeight*this.options.numItemsShown,this.dropdown=new PIXI.Container,this.dropdown.width=this.options.dropdownWidth,this.dropdown.height=this.dropdownHeight,this.dropdown.y-=Math.floor(this.dropdown.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdown),this.dropdown.cursor="pointer",this.dropdown.interactive=!0,this.dropdown.visible=!0,this.dropdown.x=1,this.dropdownMask=Ne(this.options.dropdownWidth,this.dropdownHeight,0,16711680),this.dropdownMask.y-=Math.floor(this.dropdownMask.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdownMask),this.dropdown.mask=this.dropdownMask}setValues(t,e=!1,i=0,n=""){if(this.items&&this.items.length>0)return;this.items=t,this.itemsContainer=new PIXI.Container;let s=Ne(this.options.dropdownWidth,this.options.itemHeight*t.length,0,this.options.dropdownColor);s.interactive=!0,s.cursor="pointer",s.y-=this.options.itemHeight/2,s.alpha=0,this.itemsContainer.addChild(s),this.baseY=0,this.dropdown.addChild(this.itemsContainer);for(let r=0;r<t.length;r++){let o=new PIXI.Text(vn(t[r],e),this.options.style);o.style.fill=this.options.itemsTextColor,o.pivot.x=.5*o.width,o.pivot.y=.5*o.height,o.x=this.options.dropdownWidth/2,o.y=this.options.itemHeight*r,this.itemsContainer.addChild(o),this.texts.push(o)}this.select(i,!0)}dropdownWheelHandler(t){if(!this.dropdown||!this.visible)return;let e=t||window.event,i=e.clientX,n=e.clientY;var s;e.target&&(s=e.target.getBoundingClientRect()),s&&(i-=s.left,n-=s.top);let r=this.dropdownMask.getGlobalPosition(),o=new PIXI.Point(this.options.dropdownWidth*M.scale.x,this.dropdownHeight*M.scale.y);if(i>=r.x&&i<=r.x+o.x&&n>=r.y&&n<=r.y+o.y){let l=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),u=this.itemsContainer.y-this.options.mouseWheelGap;l>0&&(u=this.itemsContainer.y+this.options.mouseWheelGap),this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(u,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}this.snapItemInMiddle()}dropdownMoveHandler(t){if(this.isDown){let e=this.touchDownItemsY+t.data.getLocalPosition(this,t.data.global).y-this.touchDownY;this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(e,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}}dropdownDownHandler(t){this.isDown=!0,this.touchDownY=t.data.getLocalPosition(this,t.data.global).y,this.touchDownItemsY=this.itemsContainer.y,this.clearItemsScale()}dropdownUpHandler(t){if(this.isDown=!1,this.options.selectItemOnClick){let e=t.data.getLocalPosition(this,t.data.global).y,i=e-this.touchDownY;if(Math.abs(i)<=5){let n=Math.floor((e-this.itemsContainer.y)/this.options.itemHeight);this.selectedIndex!==n&&this.emit(Li,n),this.select(n,!1,!1,!0);return}}this.snapItemInMiddle(!0)}dropdownUpOutsideHandler(){this.isDown=!1,this.snapItemInMiddle()}snapItemInMiddle(t){let e=Math.ceil((this.baseY-this.itemsContainer.y)/this.options.itemHeight);Ze(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-e*this.options.itemHeight},100,TWEEN.Easing.Quadratic.Out),this.select(e,!1,!1,t)}select(t,e,i,n){if(this.clearItemsScale(),this.selectedIndex!==t||e){let s=this.texts[this.selectedIndex];s.style.fill=this.options.itemsTextColor,s=this.texts[t],s.style.fill=this.options.selectedItemTextColor,Ze(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-t*this.options.itemHeight},Math.abs(t-this.selectedIndex)*30,null,TWEEN.Easing.Quadratic.Out),this.selectedIndex=t,i||this.emit(Xs,t)}else n&&!i&&this.emit(Li,t);this.setTextsScale(this.texts[this.selectedIndex],1),this.setItemsScale()}setItemsScale(){if(this.options.scaleTopBottomItems>0){let t=1,e=this.selectedIndex-this.options.scaleTopBottomItems;this.texts[this.selectedIndex].scale.set(t,t);for(let i=e+1;i>=e&&i>=0;i--)t=1-(this.selectedIndex-i)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[i],t);e=this.selectedIndex+this.options.scaleTopBottomItems;for(let i=e-1;i<=e&&i<this.texts.length;i++)t=1-(i-this.selectedIndex)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[i],t)}}clearItemsScale(){if(this.options.scaleTopBottomItems>0){let t=1-this.options.scaleTopBottomValue*this.options.scaleTopBottomItems;this.texts.forEach((e,i)=>{this.setTextsScale(e,t)})}}setTextsScale(t,e){t.scale.set(e,e),t.alpha=e}static create(t,e){let i=A,n=i.resolve(c(t,"spriteBG")),s=i.resolve(c(t,"dropdown")),r=K(t,"selected")==="true",o=Number(p.resolve(c(t,"itemsTextColor","0xFFFFFF"))),l=Number(p.resolve(c(t,"selectedItemTextColor","0xFFFFFF"))),u=new gt({spriteBG:n,numItemsShown:a(t,"numItemsShown",5),dropdown:s,selected:r,highlightColor:a(t,"highlightColor",5592405),dropdownColor:a(t,"dropdownColor",11184810),dropdownWidth:a(t,"dropdownWidth",150),itemHeight:a(t,"itemHeight",30),itemsTextColor:o,selectedItemTextColor:l,scaleTopBottomItems:a(t,"scaleTopBottomItems",0),scaleTopBottomValue:a(t,"scaleTopBottomValue",.1),mouseWheelGap:a(t,"mouseWheelGap",30),mouseWheelEnabled:g(t,"mouseWheelEnabled",!1),selectItemOnClick:g(t,"selectItemOnClick",!1),style:ws(t)});return Ht(u,t,e),g(t,"debug")&&Ts(u),D(u,t,e),u}};gt=hl([d({tag:"carousel"})],gt);var ul=Object.defineProperty,cl=Object.getOwnPropertyDescriptor,dl=(t,e,i,n)=>{for(var s=n>1?void 0:n?cl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ul(e,i,s),s};const Ys="events:betChanged",Ti="events:betVisibility";let bt=class extends _{init(){this.visible=this.selection.visible=!1,this.selection.on(Li,t=>this.close()),this.selection.on(Xs,t=>this.betChangedHandler(t))}select(t){this.values&&this.values.length&&this.selection.select(t,!1,!0)}setValues(t,e){this.values=t,this.selection.setValues(t,!0,e)}open(){return this.visible?!1:(this.openClose(!1,()=>{this.addCloseHandler()}),this.visible=this.selection.visible=!0,this.emit(Ti,this.visible),!0)}close(){this.visible&&(this.removeCloseHandler(),this.openClose(!0,()=>{this.visible=this.selection.visible=!1,this.emit(Ti,this.visible)}))}betChangedHandler(t){this.emit(Ys,t)}openClose(t,e){let i={scale:0},n={scale:1},s=TWEEN.Easing.Exponential.Out;t&&(i={scale:1},n={scale:0},s=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(n,100).easing(s).onUpdate(()=>{this.scale.y=i.scale}).onComplete(()=>{e&&e()}).start()}addCloseHandler(){this.btnClose.enabled=!0,this.btnClose.on("mouseup",this.close,this).on("touchend",this.close,this),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!0,this.parent.clickable.on("mousedown",this.close,this).on("touchstart",this.close,this))}removeCloseHandler(){this.btnClose.enabled=!1,this.btnClose.off("mouseup").off("touchend"),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!1,this.parent.clickable.off("mousedown").off("touchstart"))}static create(t,e){let i=de(bt,t,e);return i.init(),i}};bt=dl([d({tag:"betSelection"})],bt);var pl=Object.defineProperty,fl=Object.getOwnPropertyDescriptor,ml=(t,e,i,n)=>{for(var s=n>1?void 0:n?fl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&pl(e,i,s),s};let vt=class extends _{constructor(){super(...arguments),this.cheatKeys={}}initCommand(){for(let t=0;t<10;t++)this.cheatKeys[t.toString()]&&(x.off("cheat"+t),x.on("cheat"+t,e=>{this.highlight(e.key),R().cheat=e.key}));x.off("cheatToggle"),x.on("cheatToggle",t=>{this.toggleVisibility()})}init(t){this.removeChildren();let e=ai(f.width,21,0);e.y=-1,e.alpha=.7,this.addChild(e);let i=this.cheatStr.split(","),n=[];n.push(this.createText("press")),n.push(this.createText("0:Hide Bar"));for(let s of i){let r=s.split(":")[0];this.cheatKeys[r]=s.split(":")[1],n.push(this.createText(s,t==r))}n.push(this.createText('then press "SPIN"')),this.texts=n,this.arrange()}highlight(t){this.init(t)}arrange(){let t=f.width,e=0;for(let s of this.texts)e+=s.width;let i=(t-e)/(this.texts.length+1),n=i;for(let s=0;s<this.texts.length;s++)this.texts[s].x=n,n+=i+this.texts[s].width}toggleVisibility(){R().demo!="1"||!w.desktop?this.visible=!1:this.visible=!this.visible}createText(t,e){let i=new PIXI.Text(t,{fontFamily:"Arial",fontSize:"16px",fill:e?15982143:16777215});return i.y=1,this.addChild(i),i}static create(t,e){let i=de(vt,t,e);return i.cheatStr=c(t,"keys"),i.init(),i.initCommand(),i}};vt=ml([d({tag:"cheatBar"})],vt);var gl=Object.defineProperty,bl=Object.getOwnPropertyDescriptor,vl=(t,e,i,n)=>{for(var s=n>1?void 0:n?bl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&gl(e,i,s),s};const yl="events:winbox";let yt=class extends _{constructor(){super(...arguments),this.autohide=!0,this.accumulative=!1}init(){this.totalBet||(this.totalBet=this.getComponentByID("totalBet")),this.balance||(this.balance=this.getComponentByID("balance")),this.time||(this.time=this.getComponentByID("time")),(this.usertime||this.time)&&(this.usertime&&(this.usertime.hasComma=!1),this.time&&(this.time.hasComma=!1),T.add(this)),this.username&&R().displayName&&(this.username.hasComma=!1,this.username.value=R().displayName),C().miniFooter&&(this.balance.visible=this.iconBal.visible=!1,this.win.visible=this.iconWin.visible=!0,this.labelBalWin.value=Q("win"));let e="";w.platform!=="mini"&&(e=Dt(R().currency,C().CURRENCY_SYMBOL)),this.winBoxLabel.prefix=_s(R().currency,C().CURRENCY_SYMBOL),this.winBoxLabel.updatePrefixSuffix(),this.totalBet.prefix=this.win.prefix=this.balance.prefix=e,this.totalBet.updatePrefixSuffix(),this.win.updatePrefixSuffix(),this.balance.updatePrefixSuffix()}updateTotalBet(e){this.totalBet&&(this.totalBet.value=re(e))}animateBalance(e){this.balance.value=re(e)}updateBalance(e){this.balance.setValueDirectly(re(e))}updateWinAmount(e){this.win.value=re(e)}directUpdateWinAmount(e){this.win.setValueDirectly(re(e))}get winBoxLabel(){return this._winBoxLabel===void 0&&(this._winBoxLabel=this.getComponentByID("winBoxLabel")),this._winBoxLabel}showBox(e){if(this.winBox)return Z.emit(yl,e),this.winBoxSound=ui("winmeter","default",!0),new Promise((i,n)=>{this.winBox.visible=!0,this.accumulative||this.winBoxLabel.reset(),this.winBoxLabel.value=this.accumulative?this.winBoxLabel._value.plus(e).toString():e.toString(),this.activate(),clearTimeout(this.showTimer),this.showTimer=setTimeout(()=>{this.autohide&&this.hideBox(),i()},this.winBoxLabel.options.duration+1e3)})}hideBox(){this.winBox&&(clearTimeout(this.showTimer),tt(this.winBoxSound),this.winBox.visible=!1,this.winBoxSound=null,this.winBoxLabel.deactivate())}resetWinAmount(){this.win.reset(),this.hideBox()}advanceTime(e){return this.usertime?this.usertime.value=Zi(8):this.time&&(this.time.value=Zi(8,!0)),!this.winBox.visible&&this.winBoxSound&&tt(this.winBoxSound),!0}deactivate(){this.hideBox(),(this.usertime||this.time)&&T.remove(this)}static create(e,i){let n=de(yt,e,i);return n.init(),n}};yt=vl([d({tag:"footerBar"})],yt);var wl=Object.defineProperty,xl=Object.getOwnPropertyDescriptor,Sl=(t,e,i,n)=>{for(var s=n>1?void 0:n?xl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&wl(e,i,s),s};let wt=class extends yt{init(t){super.init();let e="";t&&(e=Dt(R().currency,C().CURRENCY_SYMBOL)),this.totalBet.prefix=this.balance.prefix=this.win.prefix=e,this.totalBet.updatePrefixSuffix(),this.balance.updatePrefixSuffix(),this.win.updatePrefixSuffix()}static create(t,e){let i=de(wt,t,e);return i.init(g(t,"includeCurrency")),i}};wt=Sl([d({tag:"footerBar"})],wt);var Pl=Object.defineProperty,_l=Object.getOwnPropertyDescriptor,Ol=(t,e,i,n)=>{for(var s=n>1?void 0:n?_l(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Pl(e,i,s),s};let H=class extends _{constructor(){super(),this.clearMessage()}showMessage(t,e,i){if(!(!this.txt||e!==void 0&&e===0))if(t!==void 0){let n=Q(t);if(n&&n!=="undefined"){let s="";e&&(s=Dt(R().currency,C().CURRENCY_SYMBOL)+re(e)),this.fade&&this.fade.stop(),this.txt.value=n.replace("%number%",i?i.toString():"").replace("%win%",s).replace("%npl%",i>1?"s":"").replace("%ppl%",i===1?"s":""),this.visible?this.alpha=1:this.fade=Ve(this,200),this.visible=!0}else this.clearMessage()}else this.clearMessage()}clearMessage(){!this.txt||!this.visible||(this.fade&&this.fade.stop(),this.fade=Wt(this,200,()=>{this.txt.value="",this.visible=!1}))}static create(t,e){return de(H,t,e)}};H.SPIN="msg_spin";H.NO_WIN="msg_nowin";H.LINE_WIN="msg_linewin";H.SCATTER_WIN="msg_scatterwin";H.WILD_WIN="msg_wildwin";H.FEATURE_WIN="msg_featurewin";H.BONUS_WIN="msg_bonuswin";H.WAYS_WIN="msg_wayswin";H.LINES_WIN="msg_lineswin";H.BONUS="msg_bonus";H.FREESPIN="msg_freespin";H.RESPIN="msg_respin";H.RESPINS="msg_respins";H=Ol([d({tag:"hudMessage"})],H);var Il=Object.defineProperty,Cl=Object.getOwnPropertyDescriptor,El=(t,e,i,n)=>{for(var s=n>1?void 0:n?Cl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Il(e,i,s),s};let xt=class extends _{constructor(e){super(),this.pages=[],this.indicators=[],this.options=e}initIndicators(){let e=this.options.numPages;if(!(e<2)){this.indicators=[];for(let i=0;i<e;i++){let n=this.getIndicators(),s=this.getIndicators(!0);n.y=s.y=f.height-this.y-70+this.options.indicatorY,n.x=s.x=(f.width-this.options.indicatorGap*(e-1)-n.width)/2+i*this.options.indicatorGap,this.setIndicatorHandler(s,i),this.addChild(n),this.addChild(s),this.indicators.push({on:n,off:s})}this.updatedHitArea(f.width)}}setIndicatorHandler(e,i){e.interactive=e.buttonMode=!0,e.on("mouseup",n=>this.gotoPage(i)).on("touchend",n=>this.gotoPage(i))}updatedHitArea(e){if(!this.indicators||!this.indicators.length)return;let i=this.indicators[0].off,n=this.options.indicatorGap;this.hitArea=new PIXI.Rectangle(this.x,this.y,e-this.x,i.y-this.options.indicatorY),i.hitArea=new PIXI.Rectangle(-n/10,-n/2,i.width+n/5,i.height+n)}initPages(e,i){let n=this.options.numPages;this.pages=[];for(let s=0;s<n;s++){let r=he.instantiate("@img/info"+(s+1));this.addChild(r),this.pages.push(r)}}initListeners(){this.options.numPages>1&&(this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("touchmove",this.dropdownMoveHandler).on("mousemove",this.dropdownMoveHandler))}getIndicators(e=!1){let i;return this.options.indicatorBase?i=he.instantiate(this.options.indicatorBase):i=he.instantiate(e?this.options.indicatorOff:this.options.indicatorOn),e&&this.options.indicatorOffTint>-1&&(i.tint=this.options.indicatorOffTint),!e&&this.options.indicatorOnTint>-1&&(i.tint=this.options.indicatorOnTint),i}get currentPage(){return this.pages[this._currentPageIndex]}get currentPageIndex(){return this._currentPageIndex}setPageIndex(e,i=!1){if(this.options.numPages<2||this._currentPageIndex===e&&!i)return;for(let s=0;s<this.pages.length;s++)this.pages[s].visible=!1,this.indicators[s].on.visible=!1,this.indicators[s].off.visible=!0;let n=this.pages[this._currentPageIndex];n&&n.deactivate(),this._currentPageIndex=e,this.pages[e].activate(),this.currentPage.visible=!0,this.indicators[e].on.visible=!0,this.indicators[e].off.visible=!1}gotoPage(e){this.interactive=!1,this.isDown=!1;let i={x:this.currentPage.x},n=-1,s=this.currentPage.width;e>this.currentPageIndex&&(s*=n,n=1),this.pages[e].x=this.currentPage.width*-n,this.pages[e].visible=!0,new TWEEN.Tween(i).to({x:s},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=i.x,this.pages[e].x=this.currentPage.x+this.currentPage.width*n}).onComplete(()=>{this.interactive=!0,this.currentPage.deactivate(),this.setPageIndex(e),this.track()}).start()}buttonDownHandler(e){this.isDown=!0,this.touchDownX=e.data.getLocalPosition(this,e.data.global).x}buttonUpHandler(e){if(!this.isDown)return;this.isDown=!1;let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;if(this.interactive=!1,i>0){let n={x:this.currentPage.x};new TWEEN.Tween(n).to({x:i>100?this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=n.x,this.prevPage.x=this.currentPage.x-this.currentPage.width}).onComplete(()=>{this.interactive=!0,i>100&&(this.setPageIndex(this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1),this.track())}).start()}else{let n={x:this.currentPage.x};new TWEEN.Tween(n).to({x:i<-100?-this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=n.x,this.nextPage.x=this.currentPage.x+this.currentPage.width}).onComplete(()=>{this.interactive=!0,i<-100&&(this.setPageIndex(this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1),this.track())}).start()}}track(){ne.screen({name:"info"+this.currentPageIndex})}get nextPage(){return this.pages[this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1]}get prevPage(){return this.pages[this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1]}dropdownMoveHandler(e){if(this.isDown){let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;this.currentPage.x=i,i>0?(this.nextPage.visible=!1,this.prevPage.visible=!0,this.prevPage.x=this.currentPage.x-this.currentPage.width):(this.prevPage.visible=!1,this.nextPage.visible=!0,this.nextPage.x=this.currentPage.x+this.currentPage.width)}}static create(e,i){return Gt(xt,e,i)}};xt=El([d({tag:"infoPanel"})],xt);function Gt(t,e,i){ae(e,"indicatorOnTint",p.resolve(c(e,"indicatorOnTint"))),ae(e,"indicatorOffTint",p.resolve(c(e,"indicatorOffTint")));let n=new t({numPages:parseInt(p.resolve(c(e,"pages"))),indicatorBase:c(e,"indicatorBase"),indicatorOn:c(e,"indicatorOn"),indicatorOff:c(e,"indicatorOff"),indicatorOnTint:a(e,"indicatorOnTint",-1),indicatorOffTint:a(e,"indicatorOffTint",-1),indicatorOffsetYL:a(e,"indicatorOffsetYL",50),indicatorOffsetYP:a(e,"indicatorOffsetYP",180),indicatorGap:a(e,"indicatorGap",80),indicatorY:a(e,"indicatorY",0)});return D(n,e,i),n.initPages(e,i),n.initIndicators(),n.initListeners(),n.setPageIndex(0),n}var Ll=Object.defineProperty,Tl=Object.getOwnPropertyDescriptor,Bl=(t,e,i,n)=>{for(var s=n>1?void 0:n?Tl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ll(e,i,s),s};let St=class extends xt{initPages(e,i){this.pages=[],G(e,(n,s)=>{let r=ue(n,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}static create(e,i){return Gt(St,e,i)}};St=Bl([d({tag:"infoPanel"})],St);var Al=Object.defineProperty,Dl=Object.getOwnPropertyDescriptor,Nl=(t,e,i,n)=>{for(var s=n>1?void 0:n?Dl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Al(e,i,s),s};let Pt=class extends St{initIndicators(){let e=this.options.numPages;if(!(e<2)){for(let i=0;i<e;i++){let n=this.getIndicators(),s=this.getIndicators(!0);this.addChild(n),this.addChild(s),this.indicators.push({on:n,off:s})}this.setIndicatorsPoistion(!0)}}setIndicatorsPoistion(e=!1){let i=this.options.numPages;if(i<2)return;let n=v.get("orientationService").getOrientation();for(let s=0;s<i;s++){let r=this.indicators[s].on,o=this.indicators[s].off,l,u;n===y.LANDSCAPE?(l=f.height-this.y-this.options.indicatorOffsetYL+this.options.indicatorY,u=(f.width-this.options.indicatorGap*(i-1)-r.width)/2+s*this.options.indicatorGap):(l=f.width-this.y-this.options.indicatorOffsetYP+this.options.indicatorY,u=(f.height-this.options.indicatorGap*(i-1)-r.width)/2+s*this.options.indicatorGap),r.y=o.y=l,r.x=o.x=u,e&&this.setIndicatorHandler(o,s)}this.updatedHitArea(n===y.LANDSCAPE?f.width:f.height)}initPages(e,i){this.pages=[],G(e,(n,s)=>{let r=ue(n,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}refreshCurrentPage(){this.setPageIndex(this.currentPageIndex,!0)}onOrientationChange(e){super.onOrientationChange(e),this.setIndicatorsPoistion(),this.refreshCurrentPage()}static create(e,i){return Gt(Pt,e,i)}};Pt=Nl([d({tag:"infoPanel"})],Pt);var Ml=Object.defineProperty,Rl=Object.getOwnPropertyDescriptor,Wl=(t,e,i,n)=>{for(var s=n>1?void 0:n?Rl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ml(e,i,s),s};let _t=class extends Pt{setIndicatorsPoistion(t=!1){let e=this.options.numPages;if(e<2)return;let i=v.get("orientationService").getOrientation();for(let n=0;n<e;n++){let s=this.indicators[n].on,r=this.indicators[n].off,o,l;i===y.LANDSCAPE?(o=f.minHeight-this.options.indicatorOffsetYL,l=(f.minWidth-this.options.indicatorGap*(e-1)-s.width)/2+n*this.options.indicatorGap):(o=f.minWidth-this.options.indicatorOffsetYP,l=(f.minHeight-this.options.indicatorGap*(e-1)-s.width)/2+n*this.options.indicatorGap),s.y=r.y=o,s.x=r.x=l,t&&this.setIndicatorHandler(r,n)}this.updatedHitArea(i===y.LANDSCAPE?f.width:f.height)}setIndicatorHandler(t,e){super.setIndicatorHandler(t,e),t.hitArea=new PIXI.Rectangle(-2,-2,t.width+4,t.height+6),t.cursor="pointer"}updatedHitArea(t){if(!this.indicators||!this.indicators.length)return;let e=this.indicators[0].off;this.hitArea=new PIXI.Rectangle(-this.x,0,t,e.y+e.height+6)}initPages(t,e){let i=te(t,"jackpotPagesNo");if(i.length>0&&!Us()){let s=1;this.pages=[],G(t,(r,o)=>{if(i.indexOf(s++)<0){let l=ue(r,{scene:e.scene,parent:this,context:e.context});this.addChild(l),this.pages.push(l)}}),this.options.numPages=this.pages.length;return}super.initPages(t,e)}static create(t,e){return Gt(_t,t,e)}};_t=Wl([d({tag:"infoPanel"})],_t);var Ul=Object.defineProperty,$l=Object.getOwnPropertyDescriptor,Hl=(t,e,i,n)=>{for(var s=n>1?void 0:n?$l(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ul(e,i,s),s};let He=class extends we{static create(t,e){ae(t,"fill",p.resolve(c(t,"fill")));let i=zi(He,t,e);return i.value=p.resolve(c(t,"value")),i}initText(){let t=v.get("fontService"),e=t?Math.round(t.adjustment.size*this.options.style.fontSize):0,i=t?t.adjustment.x:0,n=t?t.adjustment.y:0;this.options.style.fontSize+=e;let s=this.options.style;this.isDefaultFont?(s.fontFamily="Arial",this.text=new PIXI.Text(this.options.value,s),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)):this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:s.fontSize,fontName:s.fontFamily}),this.text.tint=s.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,s),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text),this.text.x+=Math.round(this.options.style.fontSize*i),this.text.y+=Math.round(this.options.style.fontSize*n)}get isDefaultFont(){return p.LANGUAGE===I.Khmer||p.LANGUAGE===I.Turkish||p.LANGUAGE===I.Portuguese||p.LANGUAGE===I.Hindi}};He=Hl([d({tag:"langLabel"})],He);Object.defineProperty(He.prototype,"value",{get:function(){return this.text.text},set:function(t){this.text.text=Ft(t),this.update()}});let zs=!0,Ce;function Vl(){if(Ce!==void 0)return Ce;Ce=!1;try{(w.mobile||w.tablet)&&"userActivation"in navigator&&navigator.userActivation.hasBeenActive&&"vibrate"in navigator&&(Ce=!0)}catch{}return Ce}function Fl(){return zs}function jl(t){zs=t}var Gl=Object.defineProperty,kl=Object.getOwnPropertyDescriptor,Xl=(t,e,i,n)=>{for(var s=n>1?void 0:n?kl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Gl(e,i,s),s};let xe=class extends _{constructor(t){super(),this.options=t}init(t){this.context=t,this.visible=!1,this.initCloseClickable(),this.arrangeButtons(),this.checkSounds(),this.checkVibration()}show(){}arrangeButtons(){this.setLandscapeButtons(),this.setPortraitButtons()}checkSounds(){let t=v.get("soundService");this.panel.landscape.sound.selected=this.panel.portrait.sound.selected=t.muted}checkVibration(){this.panel.landscape.vibration&&this.panel.portrait.vibration&&(this.panel.landscape.vibration.selected=this.panel.portrait.vibration.selected=Fl())}setLandscapeButtons(){let t=this.panel.landscape;if(t.panelbglong&&t.panelbgshort){this.setDynamicLayout("landscape");return}let e=4,i=this.getButtonsOrder(t),n=Math.floor(this.options.l_center-this.options.l_gap*i.buttons.length/2+this.options.l_gap/2);for(var s=0;s<i.buttons.length;s++)i.buttons[s].visible=!0,i.buttons[s].x=n+this.options.l_gap*s,i.labels[s].visible=!0,i.labels[s].x=i.buttons[s].x-e,i.labels[s].y=i.buttons[s].y+i.buttons[s].height-Math.floor(i.labels[s].height/2)}setPortraitButtons(){this.setDynamicLayout("portrait")}setDynamicLayout(t){let e=4,i=t.charAt(0)+"_",n=this.panel[t],s=this.getButtonsOrder(n);n.panelbgshort.visible=!1,n.panelbglong.visible=!1;let r=[],o=0;for(var l=0;l<s.buttons.length;l++)l%this.options[i+"itemPerRow"]===0&&(r[o]=[]),r[o].push({button:s.buttons[l],label:s.labels[l]}),(l+1)%this.options[i+"itemPerRow"]===0&&o++;if(r.length==2)n.panelbgshort.visible=!1,n.panelbglong.visible=!0,r.reverse();else{let b=n.panelbglong.height-n.panelbgshort.height;n.panelbgshort.visible=!0,n.panelbglong.visible=!1,n.logo.y+=b,n.close.y+=b}for(var u=0;u<r.length;u++){let b=Math.floor(this.options[i+"center"]-this.options[i+"gap"]*r[u].length/2+this.options[i+"gap"]/2);for(var h=0;h<r[u].length;h++)r[u][h].button.visible=!0,r[u][h].label.visible=!0,r[u][h].button.x=b+this.options[i+"gap"]*h,r[u][h].label.x=r[u][h].button.x-e,r[u][h].button.y=this.options[i+"row"][u],r[u][h].label.y=this.options[i+"row"][u]+r[u][h].button.height-Math.floor(r[u][h].label.height/2)}}getButtonsOrder(t){let e=[t.info,t.sound],i=[t.lblInfo,t.lblSound];return this.lobbyVisible&&(e.push(t.lobby),i.push(t.lblLobby)),t.settings&&(e.push(t.settings),i.push(t.lblSettings)),this.historyVisible&&(e.push(t.history),i.push(t.lblHistory)),this.homeVisible&&(e.push(t.home),i.push(t.lblHome)),this.vibrationVisible&&(t.vibration&&e.push(t.vibration),t.lblVibration&&i.push(t.lblVibration)),this.liveChatVisible&&(e.push(t.livechat),i.push(t.lblLiveChat)),this.helpVisible&&(e.push(t.help),i.push(t.lblHelp)),{buttons:e,labels:i}}hide(){this.close(),this.visible=!1}toggleAll(t){this.bonusbet&&(this.bonusbet.visible=t),this.fround&&(this.fround.visible=this.froundVisible&&t),this.help&&(this.help.visible=this.helpVisible&&t)}open(){return this.visible?!1:(this.closing=!1,this.openClose(),this.visible=!0,!0)}close(t){!this.visible||this.closing||(this.closing=!0,this.openClose(!0,()=>{this.closing=!1,this.visible=!1,this.emit(xe.MENU_CLOSED)}))}openClose(t,e){let i={scale:0,y:this.height},n={scale:1,y:0},s=TWEEN.Easing.Exponential.Out;t&&(i={scale:1,y:0},n={scale:0,y:this.height},s=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(n,100).easing(s).onUpdate(()=>{this.panel.scale.y=i.scale,this.panel.y=i.y}).onComplete(()=>{e&&e()}).start()}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.panel.landscape.close&&this.panel.landscape.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this),this.panel.portrait.close&&this.panel.portrait.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)}get froundVisible(){return R().fround}get lobbyVisible(){return this.context.realLobbyUrl&&this.context.HIDE_LOBBY==="0"}get liveChatVisible(){return this.context.livechatUrl}get historyVisible(){return!this.context.FUNPLAY}get homeVisible(){return this.context.HOME_URL}get vibrationVisible(){return this.context&&this.context.isVibrationActivated&&Vl()}get helpVisible(){return this.context.helpUrl}get buttonCloseLandscape(){return this.panel.landscape.close}get buttonClosePortrait(){return this.panel.portrait.close}static create(t,e){let i=te(t,"p-row");i.length===0&&(i=[350,235]);let n=new xe({l_center:a(t,"l-center",480),p_center:a(t,"p-center",270),l_gap:a(t,"l-gap",125),p_gap:a(t,"p-gap",125),l_itemPerRow:a(t,"l-itemPerRow",4),p_itemPerRow:a(t,"p-itemPerRow",4),l_row:te(t,"l-row"),p_row:i});return Gi(n,t,e)}onOrientationChange(t){super.onOrientationChange(t),this.checkSounds(),this.checkVibration()}};xe.MENU_CLOSED="events:menu_closed";xe=Xl([d({tag:"menu"})],xe);var Yl=Object.defineProperty,zl=Object.getOwnPropertyDescriptor,kt=(t,e,i,n)=>{for(var s=n>1?void 0:n?zl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Yl(e,i,s),s};let Se=class extends Fe{onCreated(){this.playSound(),this.onSceneResize()}backClickHandler(){E.pop()}playSound(t=!0){t?this.soundService.switchScope(!0)&&(this.bgmInfo=this.soundService.play("bgm-info","info")):(this.bgmInfo&&this.soundService.stop(this.bgmInfo.soundId),this.soundService.switchScope(),this.bgmInfo=null)}onSceneResize(){const t=v.get("orientationService").getOrientation(),e=v.get("layoutService"),i={x:-Math.min(0,e.offsetX),y:-Math.min(0,e.offsetY)};t==y.PORTRAIT?this.btnBack.x=f.height-50-i.x:this.btnBack.x=f.width-50-i.x,this.y=i.y}onOrientationChange(t){super.onOrientationChange(t),this.btnBackX=this.btnBack.x}exit(){this.playSound(!1),super.exit()}};kt([ce("layoutService")],Se.prototype,"layoutService",2);kt([ce("orientationService")],Se.prototype,"orientationService",2);kt([ce("soundService")],Se.prototype,"soundService",2);Se=kt([d({tag:"infoPage",category:"scene"})],Se);const ye=class ye{constructor(){ye.canvas||(ye.canvas=document.getElementById("stage"))}createDiv(e){var i=document.createElement("div");return i.innerHTML=e,i}createPlaceholder(e){var i=document.createElement("div");return i.style.height=e,i}static getBase(){return this.base||(this.base=document.createElement("div"),this.base.style=this.canvas.style,this.canvas.parentElement.insertBefore(this.base,this.canvas)),this.base}render(){}static getFont(){let e=p.LANGUAGE;return this.font[e]||this.font[I.English]}show(){this.content&&(this.content.style.display="block")}hide(){this.content&&(this.content.style.display="none")}static querySelector(e){let i=new ye;return i.content=document.querySelector(e),i}};ye.font={en:"DIN",cs:"Microsoft YaHei",jp:"Kozuka Mincho Pro",kh:"Khmer OS Battambang",kr:"Nokora",pt:"Arial",th:"Tahoma",tr:"Arial",vn:"Tahoma"};let Ot=ye;function cs(t){let e=[];return t&&t.forEach((i,n)=>{e.push(ql(i))}),e}function ql(t){let e=[];return t.rowPositions&&t.rowPositions.forEach((i,n)=>{i>0&&e.push([n,i-1])}),{index:t.line,win:t.win,multiplier:t.multiplier,wildMultiplier:t.wildMultiplier||0,positions:e,symbol:t.symbol,type:t.type}}function Kl(t){if(t.value.bonus){let e,i;if(t.value.bonus.gameResult.spinResult?e=t.value.bonus.gameResult.spinResult:t.value.bonus.gameResult&&(e=t.value.bonus.gameResult),e)return i=t.value.bonus,{id:String(i.id)||void 0,key:i.guid||void 0,count:i.counter||0,step:i.currentStep||void 0,wheels:e.wheel?e.wheel.reels:[],mode:e.mode||0,position:cs(e.winPositions),bonusPosition:cs(e.bonusPositions),data:{win:new Decimal(t.value.bonus.gameResult.win||0),balance:new Decimal(t.value.bonus.gameResult.balance&&t.value.bonus.gameResult.balance.value?t.value.bonus.gameResult.balance.value:0)},rsp:i}}return null}var Jl=Object.defineProperty,Zl=Object.getOwnPropertyDescriptor,Ql=(t,e,i,n)=>{for(var s=n>1?void 0:n?Zl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Jl(e,i,s),s};let Bi=class extends Fe{enter(){super.enter(),T.add(this),this.version&&(this.version.value="v"+p.engineVersion)}advanceTime(t){return this.circle&&(this.circle.rotation+=.2),!0}exit(){super.exit(),T.remove(this)}};Bi=Ql([d({tag:"loading",category:"scene"})],Bi);var eh=Object.defineProperty,th=Object.getOwnPropertyDescriptor,Xt=(t,e,i,n)=>{for(var s=n>1?void 0:n?th(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&eh(e,i,s),s};let Pe=class extends Bi{constructor(){super(...arguments),this.isLoaded=!1,this.isLogin=!1}enter(){super.enter(),Ot.querySelector(".gplogo").hide(),Ot.querySelector(".loader").hide()}nextScene(){this.isLoaded&&this.isLogin&&E.replace("splash")}onLoaded(){this.isLoaded=!0,this.nextScene()}onCreated(){this.player.bet.lines=parseInt(p.numBetLines),p.creditsBetLines&&(this.player.bet.credits=parseInt(p.creditsBetLines)),this.netService.signIn().then(t=>{this.netService.json?t.value&&(t.value.sessionKey?(this.context.USER_ID=this.player.sessionKey=t.value.sessionKey,t.value.memberName&&(this.player.accountName=this.player.displayName=t.value.memberName)):this.context.USER_ID=this.player.sessionKey=t.value):(this.context.USER_ID=this.player.sessionKey=t.token,t.name&&(this.player.accountName=this.player.displayName=t.name))}).then(()=>Promise.all([this.netService.getBalance().then(t=>{if(this.netService.json?t.value&&(this.player.balance=new Decimal(t.value.amount),t.value.currency!==void 0&&(this.player.currency=t.value.currency)):(this.player.balance=t.balance,this.player.currency=t.currency,t.userid!==void 0&&(this.player.accountName=t.userid)),this.context.ANONYMOUS)this.context.TRACKER_USER_ID=this.context.USER_ID;else{this.context.TRACKER_USER_ID=this.player.accountName;const e=window.appInsights;e&&e.setAuthenticatedUserContext(this.context.TRACKER_USER_ID)}}),this.netService.getBets().then(t=>{if(this.netService.json){if(t.value){if(L.map("gameState").toValue(t.value),this.player.symbols=t.value.wheel.reels,this.player.betValues=t.value.coins,t.value.extraGameSettings&&this.context.multiplierAsCreditBet){const e=t.value.extraGameSettings.creditBet;this.player.multiplierValues=e||[1]}else this.player.multiplierValues=[1];if(this.player.bet.amount=t.value.coins[0],this.player.setDefaultBet(),this.player.betValue=t.value.bet||t.value.coins[0],this.player.demo=t.value.funPlayDemo?"1":"0",this.player.getBet=t.value,this.player.bonus=Kl(t),this.player.bonus&&(this.player.restoreBonus=!0,this.player.bonus.wheels&&(this.player.symbols=this.player.bonus.wheels)),t.value.multiplier?this.player.multiplierValues.indexOf(this.player.bet.multiplier)>=0&&(this.player.multiplierIndex=this.player.multiplierValues.indexOf(this.player.bet.multiplier)):this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"){let e=t.value.freeGameInfo;t.value.dailyFreeGameInfo&&(e=t.value.dailyFreeGameInfo),e&&(this.player.fround=e,this.player.froundCount=e.round)}}this.extraGetBetsSetting(t)}else L.map("gameState").toValue(t),this.player.symbols=t.wheels,this.player.betValues=t.betValues,this.player.multiplierValues=t.multiplier,this.player.bet.amount=On(t.betValues),this.player.setDefaultBet(),this.player.betValue=t.bet,this.player.demo=t.demo,this.player.getBet=t.data,this.player.multiplierIndex=0,this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"&&(this.player.fround=t.fround,this.player.froundCount=t.froundCount),t.bonus&&(this.player.bonus=t.bonus,this.player.restoreBonus=!0)}),this.netService.jackpot().then(t=>{t.value&&t.value.pool?this.player.progressiveJackpot=t.value.pool:this.context.isProgressiveJackpot="false"}).catch(t=>{this.context.isProgressiveJackpot="false"})])).then(()=>{this.isLogin=!0,this.nextScene()}).catch(t=>{console.error(t),t.code?di(t.code,!0):di(t.error?t.error:"0",!0)})}extraGetBetsSetting(t){}};Xt([Vt("context")],Pe.prototype,"context",2);Xt([ce("netService")],Pe.prototype,"netService",2);Xt([Vt("user")],Pe.prototype,"player",2);Pe=Xt([d({tag:"login",category:"scene"})],Pe);var ih=Object.defineProperty,sh=Object.getOwnPropertyDescriptor,nh=(t,e,i,n)=>{for(var s=n>1?void 0:n?sh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ih(e,i,s),s};const rh="events:resize",oh="events:web_resize";let Ai=class extends j{constructor(){super(...arguments),this.prevOrientation=0}configure(t){}startup(){v.has("orientationService")||v.register("orientationService",Ue).startup(),this.orientationService=v.get("orientationService"),this.orientationService.started||this.orientationService.startup(),this.resizeAndOrientaionChecker=setInterval(()=>{this.checkResize(),this.checkSecondaryOrientation()},30),this.checkResize()}checkResize(){const t=window.innerWidth,e=window.innerHeight;(this.windowHeight!==e||this.windowWidth!==t)&&(this.windowHeight=e,this.windowWidth=t,this.layout(),Z.emit(rh),Z.emit(oh))}checkSecondaryOrientation(){this.windowOrientation!==window.orientation&&(this.windowOrientation=window.orientation,this.layout())}shutdown(){clearInterval(this.resizeAndOrientaionChecker)}layout(){const t=f;let e=t.minWidth,i=t.minHeight,n=t.width,s=t.height,r=1,o=0;const l=this.orientationService.getOrientation();ii(!1),this.isBothEnaled&&l===y.PORTRAIT&&!this.orientationService.strictLandscapeWeb||this.isPortraitOnlyEnabled&&this.isNotMobile&&l===y.LANDSCAPE||this.isBothEnaled&&l===y.PORTRAIT&&this.orientationService.strictLandscapeWeb&&this.isMobileOrTablet?(n=t.height,s=t.width,e=t.minHeight,i=t.minWidth):this.isPortraitOnlyEnabled&&this.isMobileOrTablet&&l===y.LANDSCAPE?ii(!0):w.mobile&&(this.orientationService.mode==="portrait"&&l===y.LANDSCAPE||this.orientationService.mode==="landscape"&&l===y.PORTRAIT)&&(this.orientationService.strictMode?this.orientationService.mode==="portrait"&&ii(!0):(o=Math.PI/2,n=t.height,s=t.width,e=t.minHeight,i=t.minWidth)),e>0&&i>0&&this.isMobileOrTablet?r=Math.min(window.innerWidth/e,window.innerHeight/i):r=Math.min(window.innerWidth/(e>0?e:n),window.innerHeight/s);const u=Math.ceil(n*r),h=Math.ceil(s*r);M.scale.set(r),M.rotation=o,this.isBothEnaled?(M.position.set(0,0),M.pivot.set(0,0)):M.position.set(u/2,h/2),U.resize(u,h);const b=(window.innerWidth-u)/2,P=(window.innerHeight-h)/2,m=t.canvas;m.style.marginLeft=b+"px",m.style.marginTop=P+"px",m.style.width=u+"px",m.style.height=h+"px",this.offsetX=b/r,this.offsetY=P/r,E.current&&(this.prevOrientation!=l&&this.isBothEnaled&&E.current.onOrientationChange(l),E.current.onSceneResize()),this.prevOrientation=l,this.scrollTop()}scrollTop(){const t=w;t.mobile&&(t.android&&!t.chrome?window.scrollTo(0,1):window.scrollTo(0,0))}get isBothEnaled(){return this.orientationService.mode==="both"||this.orientationService.mode==="portrait-only"}get isPortraitOnlyEnabled(){return this.orientationService.mode==="portrait-only"}get isNotMobile(){return!w.mobile&&!w.tablet}get isMobileOrTablet(){return w.mobile||w.tablet}get deviceViewportOffset(){const t=window.innerWidth,e=window.innerHeight;let i=f.width,n=f.height;const s=M.scale.x,r=new PIXI.Point;return this.isMobileOrTablet&&this.orientationService.getOrientation()===y.PORTRAIT&&(i=f.height,n=f.width),t<i*s&&(r.x=Math.floor((i*s-t)*(.5/s))),e<n*s&&(r.y=Math.floor((n*s-e)*(.5/s))),r}};Ai=nh([d({tag:"layoutService",category:"service"})],Ai);function ii(t){const e=document.getElementById("portraitonly");if(!e)return;const i=document.getElementById("portraitonlytext");if(i){let n="Please use portrait mode for the best experience.";try{Q("portraitonly")&&(n=Q("portraitonly"))}catch{}B(n)&&(n="Please use portrait mode for the best experience."),i.textContent=n}ah(!t),e.style.visibility=t?"visible":"hidden"}function ah(t){const e=document.getElementById("wrapper");e&&(e.style.visibility=t?"visible":"hidden")}var lh=Object.defineProperty,hh=Object.getOwnPropertyDescriptor,uh=(t,e,i,n)=>{for(var s=n>1?void 0:n?hh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&lh(e,i,s),s};const ds=0;let Di=class extends j{constructor(){super(...arguments),this.fround=!1,this.json=!0}configure(e){this.appContext=C();let i=A.getApiBy("apiName")||"";this.service=(A.getApiBy("service")??"https://rslotservice.w88api.com/onlinecasino/")+i+"/"}startup(){this.player=R(),this.refreshTicket()}refreshTicket(){this.ticket=Je().toString()}send(e,i=!1){return this.refreshTicket(),e+="&ts="+this.ticket,ne.request({id:this.ticket,url:e,method:"GET"}),i==!1&&this.appContext.startInactivityTimer(),new Promise((n,s)=>{Ds(e).then(r=>r.responseText).then(r=>{let o=JSON.parse(r);o?(ne.response({requestID:this.ticket,data:o}),o.isError?s({code:o.error,message:""}):n(o)):s({code:ds,message:"Unexpected Error"})}).catch(r=>{s({code:ds,message:"Unexpected Error"})})})}signIn(){if(B(this.appContext.OPERATOR))return new Promise((e,i)=>i({code:77,message:""}));if(this.isWebGLOnlyNotSupported)return new Promise((e,i)=>i({code:997,message:""}));if(this.appContext.FUNPLAY){let e=this.service+"User/GetFunPlayKey?op="+encodeURIComponent(this.appContext.OPERATOR);return this.send(e)}else{if(this.appContext.AUTHENTICATED==="1")return Promise.resolve({value:{sessionKey:this.appContext.TOKEN,memberName:this.player.accountName}});let e=this.service+"User/Authenticate?op="+encodeURIComponent(this.appContext.OPERATOR)+"&token="+encodeURIComponent(this.appContext.TOKEN);return this.send(e)}}getBalance(){let e=this.service+"User/GetBalance?token="+this.player.sessionKey+"&game="+this.appContext.ID+"&platform="+w.platform;return this.send(e)}getBets(){let e=this.service+"Game/GetBets/?game="+this.appContext.ID+"&key="+this.player.sessionKey;return this.send(e)}spin(e,i){let n=this.player.cheat||this.appContext.CHEAT,s=e.amount,r=e.multiplier;this.fround&&(s=this.player.froundBet,r=this.player.froundMul);let o=this.service+"Game/"+(this.fround?"FreeRound":"Spin")+"?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+s+(this.appContext.multiplierAsCreditBet?"&creditBet=":"&multiplier=")+r+(this.player.bonusBet?"&sidebet=1":"")+"&platform="+w.platform+(n?"&cheat="+n:"");return i&&i.forEach((l,u)=>{o+=`&${l.key}=${l.value}`}),this.player.cheat=void 0,this.send(o)}bonus(e,i){let n=this.player.cheat||this.appContext.CHEAT,s=this.service+"Game/BonusGame?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bonus="+e.key+"&param="+e.index+"&platform="+w.platform+(n?"&cheat="+n:"");return this.send(s)}jackpot(){if(!Us())return new Promise((i,n)=>n({code:33,message:""}));let e=this.service+"Jackpot/GetAvailableJackpot?game="+this.appContext.ID+"&token="+this.player.sessionKey+"&platform="+w.platform;return this.send(e,!0)}claimFround(){let e=this.service+"Game/ClaimDailyFreeSpin?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+this.player.froundBet+"&multiplier="+this.player.froundMul+"&platform="+w.platform;return this.send(e)}custom(e,i){let n=this.service+"Game/"+e+"/?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&platform="+w.platform;return i&&i.forEach((s,r)=>{n+=`&${s.key}=${s.value}`}),this.send(n)}get isWebGLOnlyNotSupported(){return p.webGLOnly&&p.webGLOnly==="true"&&U.type!==PIXI.RENDERER_TYPE.WEBGL}};Di=uh([d({tag:"netService",category:"service"})],Di);let Xe;function ch(){if(Xe===void 0)try{Xe=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{Xe=!1}return Xe}const ps=[];class dh{constructor(e=!1){this.isXDR=!1,e&&ch()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,ps.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,n,s=!0){if(this.client.open("POST",e),n&&(this.client.responseType="json"),i&&s)return this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.send(i,!0);if(i&&!s)return this.client.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.send(i,!1)}afterDone(){this.isXDR&&Rt(ps,this.client)}send(e,i=!0){return new Promise((n,s)=>{setTimeout(()=>{e?i||this.client.send(JSON.stringify(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?n(this.client):s(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),s(new Error("Request timeout"))},this.client.onerror=r=>{this.afterDone(),s(new Error(r.toString()))}})}}function ph(t,e,i,n=!0){return new dh(!0).post(t,e,i,n)}var fh=Object.defineProperty,mh=Object.getOwnPropertyDescriptor,gh=(t,e,i,n)=>{for(var s=n>1?void 0:n?mh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&fh(e,i,s),s};let Ni=class extends Di{doubleUp(t){const e=`${this.service}Game/BonusGame?game=${this.appContext.ID}&key=${this.player.sessionKey}&param=${t?"1":"0"}`;return this.send(e)}collectDoubleUp(){const t=`${this.service}Game/CollectDoubleUp?game=${this.appContext.ID}&key=${this.player.sessionKey}`;return this.send(t)}spin(t){this.refreshTicket();const e=w.platform,i=`${this.service}Game/Spin`,n=i+"?ts="+this.ticket;ne.request({id:this.ticket,url:n,method:"POST"});const s={game:this.appContext.ID,key:this.player.sessionKey,bet:this.player.totalBet.toNumber(),odds:t,platform:e},r=this.player.cheat||this.appContext.CHEAT;return r&&(s.cheat=r),new Promise((o,l)=>{ph(i,s,!1,!1).then(u=>u.responseText).then(u=>{const h=JSON.parse(u);h?(ne.response({requestID:this.ticket,data:h}),h.isError?l({code:h.error,message:""}):o(h)):l({code:0,message:"Unexpected Error"})}).catch(u=>{l({code:0,message:"Unexpected Error"})})})}};Ni=gh([d({tag:"netService",category:"service"})],Ni);var bh=Object.defineProperty,vh=Object.getOwnPropertyDescriptor,yh=(t,e,i,n)=>{for(var s=n>1?void 0:n?vh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&bh(e,i,s),s};let It=class extends k{constructor(){super(...arguments),this._betCountMap={}}get betCountData(){const t=[];let e=0;for(const i in this._betCountMap){const n=this._betCountMap[i];n>0&&(t.push({bet:Number(i),volume:n}),e+=n)}return{bet:t,count:e}}getTotlaBet(t){const e=this.betCountData;return t.times(e.count)}init(t){for(const e of t)this._betCountMap[e.bet]=e.volume;this.refresh()}getBetButton(t){return this[`bet${t}`]}onBet(t,e){const i=this._betCountMap[e]||0;this._betCountMap[e]=i+1,t.sparkle.visible||(t.sparkle.visible=!0,t.sparkle.play(1).then(()=>{t.sparkle.visible=!1}))}onClearBet(){this._betCountMap={},this.refresh()}refresh(){const t=R().totalBet;for(let e=2;e<=9;e++){const i=this.getBetButton(e),n=this._betCountMap[e]||0;i.box.bet.visible=n==0,i.box.amount.visible=n>0,i.box.amount.label.value=`${t.times(n)}`}}showWinFrame(t){for(const e of t){const i=this.getBetButton(e.symbol);i.winFrame.setAnimation(0,"winFrame",!0),i.winFrame.setVisibleAnimated(!0)}}hideWinFrame(){for(let t=2;t<=9;t++)this.getBetButton(t).winFrame.setVisibleAnimated(!1)}static create(t,e){const i=new It;return X(t,{scene:e.scene,parent:i,context:e.context}),D(i,t,e),i.refresh(),i}};It=yh([d({tag:"betPanel",category:"component"})],It);var wh=Object.defineProperty,xh=Object.getOwnPropertyDescriptor,Sh=(t,e,i,n)=>{for(var s=n>1?void 0:n?xh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&wh(e,i,s),s};let Ct=class extends k{get beamLAngle(){return this._beamLAngle||(this._beamLAngle=this.argument1.split(",").map(t=>Number(t))),this._beamLAngle}get beamPAngle(){return this._beamPAngle||(this._beamPAngle=this.argument2.split(",").map(t=>Number(t))),this._beamPAngle}get beamAngle(){return this.orientation==y.LANDSCAPE?this.beamLAngle:this.beamPAngle}init(){}showBonus1(t){const e=this.bonus1.animation;return e.state.setAnimation(0,"bonusAL_entry",!1),e.state.addAnimation(0,"bonusAL_idle",!0,0),this.bonus1.setVisibleAnimated(!0),W(2e3).then(()=>this.showBeams(t).then(()=>(e.state.setAnimation(0,"bonusAL_exit",!1),W(1e3))))}showBonus2(t){return new Promise(e=>{const i=this.bonus2.getSlotContainerByName("FS_AMT");i.removeChildren(),i.addChild(this.multiperLayer[`_${t}`]),this.bonus2.setAnimation(0,"bonusBL",!1),this.bonus2.addCompleteListener(()=>{this.bonus2.animation.state.clearListeners(),this.bonus2.setAnimation(0,"bonusBL_smallIdle",!0),W(500).then(()=>{e()})}),this.bonus2.setVisibleAnimated(!0)})}hideBonus2(){return Wt(this.bonus2,500,()=>{this.bonus2.alpha=1,this.bonus2.setVisibleAnimated(!1)}),W(500)}onOrientationChanged(t){this.orientation=t}getBeam(t){return this.beams[`beam${t}`]}showBeams(t){const e=this.beamAngle;for(let i=0;i<t.length;i++){const n=t[i],s=this.getBeam(i);s.setVisibleAnimated(!0),s.rotation=e[n.index]*Math.PI/180}return W(2e3).then(()=>{for(let i=0;i<t.length;i++)this.getBeam(i).setVisibleAnimated(!1)})}static create(t,e){const i=new Ct;return X(t,{scene:e.scene,parent:i,context:e.context}),D(i,t,e),i.init(),i}};Ct=Sh([d({tag:"bonusEffect",category:"component"})],Ct);var Ph=Object.defineProperty,_h=Object.getOwnPropertyDescriptor,Oh=(t,e,i,n)=>{for(var s=n>1?void 0:n?_h(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ph(e,i,s),s};let Et=class extends k{showBonus1(){return this.spineL.setVisibleAnimated(!0),W(4800).then(()=>{this.spineL.setVisibleAnimated(!1)})}static create(t,e){const i=new Et;return X(t,{scene:e.scene,parent:i,context:e.context}),D(i,t,e),i}};Et=Oh([d({tag:"chase",category:"component"})],Et);var Ih=Object.defineProperty,Ch=Object.getOwnPropertyDescriptor,Eh=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ch(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ih(e,i,s),s};let Lt=class extends k{init(){const t=this.multiper.spine.getSlotContainerByName("DU_AMT");t.removeChildren(),t.addChild(this.multiper.label)}setRandomNumberValue(t){this.multiper.label.value=`${t}`}onBig(){this.selected="big",this.bet()}onSmall(){this.selected="small",this.bet()}toStop(t){const e=new Date().getTime(),i=1500-Math.min(e-this.randomTime,1500);return W(i).then(()=>{this.setRandomNumberValue(t),t>7?this.multiper.spine.setAnimation(0,"doubleUp_PinkWin",!0):this.multiper.spine.setAnimation(0,"doubleUp_GreenWin",!0)}).then(()=>W(500))}bet(){this.randomTime=new Date().getTime(),this.setSmallBigBtnStatus(),this.multiper.spine.setAnimation(0,"doubleUp_spin",!0),this.multiper.spine.setVisibleAnimated(!0),this.multiper.bgSlide.visible=!1}set enable(t){this._enable=t,this.setSmallBigBtnStatus()}get enable(){return this._enable}show(){this.visible=!0,Ve(this,500,()=>{},1)}hide(){this.visible&&Wt(this,500,()=>{this.reset(),this.visible=!1})}reset(){this.selected=void 0,this.setRandomNumberValue(0),this.multiper.bgSlide.visible=!0,this.multiper.spine.setVisibleAnimated(!1)}setSmallBigBtnStatus(){const t=this._enable?"default":"disable";this.smallSlide.goto(this.selected==="small"?"highlight":t),this.bigSlide.goto(this.selected==="big"?"highlight":t)}static create(t,e){const i=new Lt;return X(t,{scene:e.scene,parent:i,context:e.context}),D(i,t,e),i.init(),i}};Lt=Eh([d({tag:"doubleSelecter",category:"component"})],Lt);const Lh=1,Th=0,Bh=[0],si=[0],Ah=[8.2],Dh=[0],fs={defaultUp:(t,e,i)=>1/2*e*i*i+t*i,up:(t,e,i,n)=>{if(i=i/1e3,n=n/1e3,i==0)return 0;const s=(e-t)/i;return t*n+s*n*n/2},down:(t,e,i,n)=>{if(i=i/1e3,n=n/1e3,i==0)return 0;const s=(t-e)/i;return t*n-s*n*n/2}};function Nh(t,e="components/"){return A.resolve("@atlas/"+e+t+".png")}function Mh(){const t=[];for(let e=1;e<=14;e++)t.push(Nh("coin_"+e));return t}const Rh={alpha:{start:1,end:1},scale:{start:.2,end:1,minimumScaleMultiplier:1},color:{start:"#e6e6e6",end:"#ffffff"},speed:{start:900,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:2400},maxSpeed:0,startRotation:{min:230,max:310},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:1.2,max:1.2},blendMode:"normal",frequency:.08,emitterLifetime:-1,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:0,h:0}};class Ye{constructor(e){this.data=e}get symbolInfo(){return this.data.value.wheelStopPosition}get isBonus(){return this.isBonus1||this.isBonus2}get isBonus1(){return this.symbolInfo.symbol==Lh}get isBonus2(){return this.symbolInfo.symbol==Th}get bonusSymbolInfos(){return this.data.value.wheelBonusStopPosition}get isExistWin(){return this.win.gt(0)}get win(){return new Decimal(this.data.value.cumulativeWin)}get balance(){return new Decimal(this.data.value.balance.value)}get doubleup(){return this.data.value.doubleUp}get bet(){return new Decimal(this.data.value.bet)}}function ni(t,e=""){window.open(t,e).focus()}function ri(t){window.location.href=t}var Wh=Object.defineProperty,Uh=Object.getOwnPropertyDescriptor,Oe=(t,e,i,n)=>{for(var s=n>1?void 0:n?Uh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Wh(e,i,s),s};let fe=class extends Fe{onCreated(){super.onCreated(),this.initFooterLabels(),this.onSceneResize(),this.initCommand(),this.updateBetAmount(),this.updateFooterBar(),this.initBetSelection(),this.menuBtnLayer.realPlay.visible=this.realPlayVisible,this.menuBtnLayer.fund.visible=this.fundVisible}exit(){super.exit(),x.off("infoPage"),x.off("spin"),x.off("betSelection"),x.off("lobby"),x.off("home"),x.off("help"),x.off("livechat"),x.off("history")}onSpin(){}initCommand(){x.on("history",()=>this.clickHistoryHandler()),x.on("livechat",()=>this.clickLiveChatHandler()),x.on("help",()=>this.clickHelpHandler()),x.on("home",()=>this.clickHomeHandler()),x.on("lobby",()=>this.clickExitHandler()),x.on("infoPage",()=>{E.push("infoPage")}),x.on("spin",this.onSpin.bind(this)),x.on("betSelection",()=>this.clickBetSelectionHandler())}initFooterLabels(){this.betAmount=this.footerBar.getComponentByID("betAmount")}checkDeviceResize(e){v.get("orientationService").getOrientation()==y.PORTRAIT?(this.menuBtnLayer.realPlay.y=this.menuBtnLayer.fund.y=this.menuBtnLayer.btnMenu.y=f.width-e.y-120,this.menuBtnLayer.realPlay.x=this.menuBtnLayer.fund.x=f.height-e.x-40,this.footerBar.panels.y=this.selectionPanel.y=f.width-e.y-1060,this.selectionPanel.y=f.width-e.y-1060):(this.menuBtnLayer.realPlay.y=this.menuBtnLayer.fund.y=this.menuBtnLayer.btnMenu.y=f.height-e.y-40,this.menuBtnLayer.realPlay.x=this.menuBtnLayer.fund.x=f.width-e.x-40,this.footerBar.panels.y=this.selectionPanel.y=f.height-e.y-640,this.selectionPanel.y=f.height-e.y-640),this.menuBtnLayer.btnMenu.x=e.x+40,this.menu.y=-e.y}setComponentsPositions(e){v.get("orientationService").getOrientation()==y.PORTRAIT?this.menu.buttonCloseLandscape.x=this.menu.buttonClosePortrait.x=f.height-e.x-40:this.menu.buttonCloseLandscape.x=this.menu.buttonClosePortrait.x=f.width-e.x-40,this.footerBar.timebox.position.set(-e.x,e.y)}onSceneResize(){const e=v.get("layoutService"),i={x:-Math.min(0,e.offsetX),y:-Math.min(0,e.offsetY)};this.setComponentsPositions(i),this.checkDeviceResize(i)}animateFooterBar(e){this.updateTotalBet(),this.animateBalanceAmount()}updateFooterBar(e){this.updateTotalBet(),this.updateBalanceAmount()}animateBalanceAmount(e){this.footerBar.animateBalance(e||this.player.balance)}updateBalanceAmount(e){this.footerBar.updateBalance(e||this.player.balance)}updateTotalBet(){this.footerBar.updateTotalBet(this.player.displayedTotalBet)}updateBetAmount(){this.betAmount&&(this.betAmount.value=re(this.player.displayedBetAmount))}betChangedHandler(e){this.player.betValueIndex=e,this.updateTotalBet(),this.updateBalanceAmount(),this.updateBetAmount()}betSelectionVisibilityHandler(e){}clickBetSelectionHandler(){this.selectionPanel.betSelection&&(this.selectionPanel.betSelection.visible?this.selectionPanel.betSelection.close():this.selectionPanel.betSelection.open())}initBetSelection(){this.selectionPanel.betSelection.setValues(this.player.betValues.concat(),this.player.betValueIndex),this.selectionPanel.betSelection.on(Ys,e=>this.betChangedHandler(e)),this.selectionPanel.betSelection.on(Ti,e=>this.betSelectionVisibilityHandler(e)),this.updateTotalBet()}get fundVisible(){return!this.context.FUNPLAY&&!!this.context.FUNDS_URL}get realPlayVisible(){return this.context.FUNPLAY&&!!this.context.LOGIN_URL}onOpenMenu(){this.menu.open()}onOpenRealplay(){ri(this.context.realPlayUrl)}onOpenFundtransfer(){ni(this.context.FUNDS_URL)}clickExitHandler(){ri(this.context.realLobbyUrl)}clickHelpHandler(){ni(this.context.helpUrl)}clickHomeHandler(){ri(this.context.HOME_URL)}clickLiveChatHandler(){ni(this.context.livechatUrl,"LiveChat")}clickVibrationHandler(e){jl(e.selected),ne.event({name:"vibration",properties:{Action:e.selected?"On":"Off"},measurements:{}})}clickSoundHandler(e){this.soundService.muted=e.selected,ne.event({name:"mute sound",properties:{Action:this.soundService.muted?"Off":"On"},measurements:{}})}clickHistoryHandler(){dr()}};Oe([ce("netService")],fe.prototype,"netService",2);Oe([ce("deviceService")],fe.prototype,"deviceService",2);Oe([ce("soundService")],fe.prototype,"soundService",2);Oe([Vt("context")],fe.prototype,"context",2);Oe([ce("layoutService")],fe.prototype,"layoutService",2);Oe([Vt("user")],fe.prototype,"player",2);var $h=Object.defineProperty,Hh=Object.getOwnPropertyDescriptor,Vh=(t,e,i,n)=>{for(var s=n>1?void 0:n?Hh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&$h(e,i,s),s};let Mi=class extends fe{constructor(t){super(t),this.gameStatus="idle",this.statusOrder=[],this._soundSpinning=null}onCreated(){super.onCreated(),this.reel.spinStopHandler=this.handleStoped.bind(this),this.showMessage("Please Spin"),this.menu.init(this.context),this.initMainBGM(),this.restore()}restore(){const t=L.get("gameState");t.bonus&&t.bonus.gameResult&&(this.enableMenuButton(!1),this.enableSpinClearButtonStatus(!1),this.rspModel=new Ye({value:t.bonus.gameResult}),this.betPanel.init(t.bonus.odds),this.rspModel.bonusSymbolInfos.length>0?this.reel.showWinSymbols(this.rspModel.bonusSymbolInfos):this.reel.showWinSymbols([this.rspModel.symbolInfo]),this.statusOrder.push("selectDouble","idle"),this.nextStatus())}onBet(t,e){this.gameStatus=="idle"&&(this.betPanel.onBet(t,e),this.updateTotalBet())}onClearBet(){this.betPanel.onClearBet(),this.updateTotalBet()}onSpin(){if(this.gameStatus=="selectDouble")this.onCollectDoubleUp();else{super.onSpin();const t=this.betPanel.betCountData,e=this.player.totalBet.times(t.count);if(t.bet.length>0)if(!this.player.balance.greaterThanOrEqualTo(e))di("10");else{this.enableSpinClearButtonStatus(!1),this.reel.showBoxSpineOnce().then(()=>{N("spin_button"),this.netService.spin(t.bet).then(this.spinServiceHandler.bind(this)),this.statusOrder.push("spinning"),this.nextStatus()});const i=this.player.balance.minus(e);this.player.balance=i,this.animateBalanceAmount(i)}else N("button")}}onCollectDoubleUp(){this.enableCollectButton(!1),this.netService.collectDoubleUp().then(t=>{const e=new Ye(t);this.showWin(e.win.toNumber(),e.bet.toNumber(),e.balance)})}onBig(){this.doubleSelecter.onBig(),this.handleDoubleUp(!1)}onSmall(){this.doubleSelecter.onSmall(),this.handleDoubleUp(!0)}handleBonus(){this.netService.bonus({key:"",step:1,index:0})}handleDoubleUp(t){this.enableCollectButton(!1),this.netService.doubleUp(t).then(e=>{const i=new Ye(e);this.doubleSelecter.toStop(i.doubleup.value).then(()=>W(2e3)).then(()=>{i.doubleup.isWin?(N("Double_up_win"),this.showWinAmount(i.win.toNumber(),500).then(()=>J(500)).then(()=>{i.doubleup.isComplete?this.showWin(i.win.toNumber(),i.bet.toNumber(),i.balance):(this.showCollectButton(!0),this.doubleSelecter.reset())})):(N("Double_up_lose"),this.showMessage("You Lose"),this.nextStatus())})})}handleStoped(){this.stopSoundSpinning(),N("reel_stop"),J(300).then(()=>{this.rspModel.isExistWin?this.rspModel.isBonus?N("high_win","default",!0):N("normal_win","default",!0):N("no_win","default",!0)}),this.gameStatus=="stopping"?this.reel.showSpinStoped(this.rspModel.symbolInfo):this.reel.showSpinStoped(this.rspModel.bonusSymbolInfos[0]),J(500).then(()=>{this.statusOrder=[],this.gameStatus=="stopping"?this.rspModel.isBonus1?this.statusOrder.push("showWinBonus1"):this.rspModel.isBonus2&&this.statusOrder.push("showWinBonus2","reSpinning","reStopping"):this.gameStatus=="reStopping",this.rspModel.isExistWin&&this.statusOrder.push("selectDouble"),this.statusOrder.push("idle"),this.gameStatus=="reStopping"?this.bonusEffect.hideBonus2().then(()=>{this.nextStatus()}):this.nextStatus()})}spinServiceHandler(t){const e=new Ye(t);this.rspModel=e,this.statusOrder.push("stopping"),this.nextStatus()}nextStatus(){const t=this.statusOrder.shift();if(t)switch(this.gameStatus=t,this.gameStatus){case"idle":{this.stopBgmLayer(),this.betPanel.onClearBet(),this.enableSpinClearButtonStatus(),this.betPanel.hideWinFrame(),this.doubleSelecter.hide(),this.showCollectButton(!1),this.enableMenuButton(!0);break}case"spinning":{this.enableMenuButton(!1),this.playSoundSpinning(),this.showMessage("Good Luck"),this.reel.onSpin(!1),this.doubleSelecter.hide(),this.reel.showWinSymbols([]),this.enableSpinClearButtonStatus();break}case"reSpinning":{this.reel.showWinSymbols([]),this.playSoundSpinning(),N("spin_button"),this.showMessage("Good Luck"),this.reel.onSpin(!0),this.doubleSelecter.hide();break}case"stopping":{this.reel.toStop(this.rspModel.symbolInfo);break}case"reStopping":{this.reel.toStop(this.rspModel.bonusSymbolInfos[0]);break}case"showWinBonus1":{N("chase_animation"),this.chase.showBonus1().then(()=>{this.reel.showWinSymbols([]),W(300).then(()=>{N("bonus_Multiselect_win","default",!0),this.bonusEffect.showBonus1(this.rspModel.bonusSymbolInfos).then(()=>{this.nextStatus()}),W(2e3).then(()=>{this.reel.showWinSymbols(this.rspModel.bonusSymbolInfos)})})});break}case"showWinBonus2":{this.showMessage("YOU WON A RESPIN"),W(1e3).then(()=>{W(300).then(()=>{N("bonus_Multiplier_win","default",!0),this.bonusEffect.showBonus2(this.rspModel.bonusSymbolInfos[0].multiplier).then(()=>{this.nextStatus(),J(2e3).then(this.nextStatus.bind(this))})})});break}case"selectDouble":{this.playBgmLayer(),this.enableCollectButton(!0),this.showCollectButton(!0),this.showWinAmount(this.rspModel.win.toNumber(),500),this.doubleSelecter.show(),this.rspModel.bonusSymbolInfos.length>0?this.betPanel.showWinFrame(this.rspModel.bonusSymbolInfos):this.betPanel.showWinFrame([this.rspModel.symbolInfo]);break}}}showMessage(t){this.infoBar.message.value=t,this.infoBar.message.visible=!0,this.infoBar.amount.visible=!1}showWinAmount(t,e){return this.infoBar.message.visible=!1,this.infoBar.amount.visible=!0,this.infoBar.amount.duration=e,this.infoBar.amount.value=`${t}`,J(e)}onOrientationChange(t){super.onOrientationChange(t),this.reel.onOrientationChanged(t),this.bonusEffect.onOrientationChanged(t)}showWin(t,e,i){this.player.balance=i;const n=new Decimal(t),s=n.div(e).toNumber();let r=0;if(n.gt(0)){for(let o=si.length-1;o>=0;o--)if(s>=si[o]){r=o;break}r==si.length-1?(N("big_win","default",!0),this.winPanel.showWin(n.toNumber()).then(()=>{this.animateBalanceAmount(i),this.nextStatus()})):(this.winPanel.playWinEffect(r),this.winmeterSound=N(`winmeter${r+1}`,"default",!0),J(Ah[r]*1e3).then(()=>{this.animateBalanceAmount(i),this.winPanel.removeWinEffect(),this.nextStatus()})),this.showMessage(`you collect ${n}`)}}fade(t,e,i,n=500,s=0,r){const o=v.get("soundService");if(i&&i.volume===e)return o.setVolume(e,i.soundId),null;const l={volume:t},u=i?i.soundId:void 0,h=new TWEEN.Tween(l).to({volume:e},n).onUpdate(()=>{o.setVolume(l.volume,u)}).onComplete(()=>{i&&(i.volume=l.volume),r&&r()}).delay(s);return h.start(),h}initMainBGM(){if(w.isUCBrowser)return;const t=v.get("soundService");t.stopBgm(),t.volume=0,this.bgmMain=N("bgm-main","default",!0),this.playMainBGM(),J(200).then(()=>{t.volume=1,t.setVolume(1,this.bgmMain.soundId),this.bgmMain.volume=1})}playMainBGM(t=500){if(!this.bgmMain||w.isUCBrowser)return;const e=v.get("soundService");this.bgmMain.volume===0?(e.setVolume(0,this.bgmMain.soundId),this.bgmMain.volume=0,this.fade(0,1,this.bgmMain,t)):(e.setVolume(1,this.bgmMain.soundId),this.bgmMain.volume=1)}stopMainBGM(t,e=500){if(!this.bgmMain||w.isUCBrowser)return;const i=v.get("soundService");this.bgmMain.volume===1?(i.setVolume(1,this.bgmMain.soundId),this.bgmMain.volume=1,this.fade(1,0,this.bgmMain,e)):(i.setVolume(0,this.bgmMain.soundId),this.bgmMain.volume=0)}playSoundSpinning(){w.isUCBrowser||(this._soundSpinning=N("reelspinningbgm","default",!0))}stopSoundSpinning(){this._soundSpinning&&(tt(this._soundSpinning),this._soundSpinning=null)}playBgmLayer(){w.isUCBrowser||(this._soundSpinning=N("bgm-main-layer","default",!0))}stopBgmLayer(){this._soundSpinning&&(tt(this._soundSpinning),this._soundSpinning=null)}updateTotalBet(){const t=this.betPanel.getTotlaBet(this.player.totalBet);this.footerBar.updateTotalBet(t),this.betPanel.refresh()}enableMenuButton(t){this.menuBtnLayer.btnMenu.enabled=t,this.menuBtnLayer.realPlay.enabled=t,this.menuBtnLayer.fund.enabled=t,this.selectionPanel.btnBetSelection.enabled=t}enableSpinClearButtonStatus(t=!0){this.spinButton.enabled=t&&this.gameStatus=="idle",this.clearButton.enabled=t&&this.gameStatus=="idle"}showCollectButton(t){this.spinButton.visible=!t,this.collectContainer.visible=t}enableCollectButton(t){this.collectContainer.collectButton.enabled=t,this.collectContainer.fx.visible=t,this.doubleSelecter.enable=t}};Mi=Vh([d({tag:"main",category:"scene"})],Mi);class Fh{constructor(){this.pathL=[{x:0,y:0},{x:522,y:0},{x:522,y:336},{x:0,y:336}],this.pathP=[{x:0,y:0},{x:336,y:0},{x:336,y:522},{x:0,y:522}],this._pathNodeLengthL=[],this._pathNodeLengthP=[]}calPathLength(e){let i=0;const n=[];for(let s=0;s<e.length;s++){const r=e[s],o=e[(s+1)%e.length],l=Math.sqrt((o.x-r.x)**2+(o.y-r.y)**2);i+=l,n.push(i)}return[i,n]}getPathLengthL(){return this._pathLengthL||([this._pathLengthL,this._pathNodeLengthL]=this.calPathLength(this.pathL)),this._pathLengthL}getPathLengthP(){return this._pathLengthP||([this._pathLengthP,this._pathNodeLengthP]=this.calPathLength(this.pathP)),this._pathLengthP}getPointAndSpeedVectorWith(e,i,n){let s,r;return e<i[0]?(s={x:e+n[0].x,y:n[0].y},r={x:1,y:0}):e<i[1]?(s={x:n[1].x,y:e-i[0]},r={x:0,y:-1}):e<i[2]?(s={x:n[2].x-(e-i[1]),y:n[2].y},r={x:-1,y:0}):(s={x:n[3].x,y:n[3].y-(e-i[2])},r={x:0,y:1}),[s,r]}getPointAndSpeedVector(e,i){const n=i==y.LANDSCAPE?this._pathNodeLengthL:this._pathNodeLengthP,s=i==y.LANDSCAPE?this.pathL:this.pathP;return this.getPointAndSpeedVectorWith(e,n,s)}getPathLength(e){return e==y.LANDSCAPE?this.getPathLengthL():this.getPathLengthP()}update(e,i,n){const s=this.getPathLength(n),r=i%s,[o,l]=this.getPointAndSpeedVector(r,n);return{point:o,speedVector:l,speed:e,offsetInPathPct:r/s}}}class jh extends Fh{constructor(){super(...arguments),this.halfWidth=38}calPolygonPath(e,i,n){const s=[],r=n==y.LANDSCAPE?this.pathL:this.pathP,o=this.getPathLength(n),l=TWEEN.Easing.Circular.In(e.speed/2e3)*250,u=(i-l-this.halfWidth+o)%o,[h,b]=this.getPointAndSpeedVector(u,n),P=b.x!=e.speedVector.x||b.y!=e.speedVector.y,m=[],O=[],S=[];return e.speedVector.x==1?(m.push({x:e.point.x-this.halfWidth,y:e.point.y-this.halfWidth},{x:e.point.x-this.halfWidth,y:e.point.y+this.halfWidth}),P?(O.push({x:r[0].x-this.halfWidth,y:r[0].y-this.halfWidth},{x:r[0].x+this.halfWidth,y:r[0].y+this.halfWidth}),S.push({x:h.x-this.halfWidth,y:h.y},{x:h.x+this.halfWidth,y:h.y}),S[0].y=Math.max(S[0].y,O[1].y),S[1].y=Math.max(S[1].y,O[1].y)):S.push({x:h.x,y:h.y-this.halfWidth},{x:h.x,y:h.y+this.halfWidth})):e.speedVector.y==-1?(m.push({x:e.point.x+this.halfWidth,y:e.point.y-this.halfWidth},{x:e.point.x-this.halfWidth,y:e.point.y-this.halfWidth}),P?(O.push({x:r[1].x+this.halfWidth,y:r[1].y-this.halfWidth},{x:r[1].x-this.halfWidth,y:r[1].y+this.halfWidth}),S.push({x:h.x,y:h.y-this.halfWidth},{x:h.x,y:h.y+this.halfWidth}),S[0].x=Math.min(S[0].x,O[1].x),S[1].x=Math.min(S[1].x,O[1].x)):S.push({x:h.x+this.halfWidth,y:h.y},{x:h.x-this.halfWidth,y:h.y})):e.speedVector.x==-1?(m.push({x:e.point.x+this.halfWidth,y:e.point.y+this.halfWidth},{x:e.point.x+this.halfWidth,y:e.point.y-this.halfWidth}),P?(O.push({x:r[2].x+this.halfWidth,y:r[2].y+this.halfWidth},{x:r[2].x-this.halfWidth,y:r[2].y-this.halfWidth}),S.push({x:h.x+this.halfWidth,y:h.y},{x:h.x-this.halfWidth,y:h.y}),S[0].y=Math.min(S[0].y,O[1].y),S[1].y=Math.min(S[1].y,O[1].y)):S.push({x:h.x,y:h.y+this.halfWidth},{x:h.x,y:h.y-this.halfWidth})):(m.push({x:e.point.x-this.halfWidth,y:e.point.y+this.halfWidth},{x:e.point.x+this.halfWidth,y:e.point.y+this.halfWidth}),P?(O.push({x:r[3].x-this.halfWidth,y:r[3].y+this.halfWidth},{x:r[3].x+this.halfWidth,y:r[3].y-this.halfWidth}),S.push({x:h.x,y:h.y+this.halfWidth},{x:h.x,y:h.y-this.halfWidth}),S[0].x=Math.max(S[0].x,O[1].x),S[1].x=Math.max(S[1].x,O[1].x)):S.push({x:h.x-this.halfWidth,y:h.y},{x:h.x+this.halfWidth,y:h.y})),P?s.push(m[0],O[0],...S,O[1],m[1]):s.push(m[0],...S,m[1]),s}update(e,i,n){const s=super.update(e,i,n);return s.path=this.calPolygonPath(s,i,n),s}}var Gh=Object.defineProperty,kh=Object.getOwnPropertyDescriptor,Xh=(t,e,i,n)=>{for(var s=n>1?void 0:n?kh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Gh(e,i,s),s};let Tt=class extends k{constructor(){super(...arguments),this.boxStatus=["idle","idle","idle"],this.respin=!1,this.spinTime=0,this.symbolInSpinTweenMap={}}get symbolOffsetL(){return this.argument1}get symbolOffsetP(){return this.argument2}initIndex(t){this.spinAnimation.index=t,this.onUpdate()}init(t){this.spinAnimation=new Yh(t),this.setColorBox(!1)}onUpdate(){const t=this.spinAnimation.onUpdate(this.spinTime),e=t.speed/40,i=this.spinAnimation.onUpdate(this.spinTime-e),n=t.speed/40*2,s=this.spinAnimation.onUpdate(this.spinTime-n),r=[this.colorBox.box0,this.colorBox.box1,this.colorBox.box2],o=[t,i,s];for(let l=0;l<o.length;l++){const u=o[l],h=r[l];h.position.set(u.point.x,u.point.y),u.speed>0?(u.speed>this.spinAnimation.maxSpeed*.7&&this.boxStatus[l]=="idle"?(h.spine.setAnimation(0,this.respin?"bonusSpin_arrow":"normalSpin_arrow",!0),this.boxStatus[l]="tail"):u.speed<=this.spinAnimation.maxSpeed*.7&&this.boxStatus[l]=="tail"&&(h.spine.setAnimation(0,this.respin?"bonusSpin_arrow_noTrail":"normalSpin_arrow_noTrail",!0),this.boxStatus[l]="idle"),h.spine.animated||(h.spine.setAnimation(0,this.respin?"bonusSpin_arrow_noTrail":"normalSpin_arrow_noTrail",!0),this.boxStatus[l]="idle",h.default.visible=!1,h.spine.setVisibleAnimated(!0))):(h.default.visible=!0,h.spine.setVisibleAnimated(!1)),h.spine.rotation=Math.PI/2*(u.speedVector.x==1?0:u.speedVector.x==-1?2:u.speedVector.y==1?3:1)}for(let l=0;l<this.spinAnimation.symbols.length;l++){const u=this.spinAnimation.symbols[l],h=u.pct;if(h-t.offsetInPathPct<.02&&(h-t.offsetInPathPct>0||h-t.offsetInPathPct<-.98)){this.symbolInSpinTweenMap[l]||(this.symbolInSpinTweenMap[l]=u),u.playOnce().then(()=>{delete this.symbolInSpinTweenMap[l]});break}}t.stop&&(r[1].position.set(t.point.x,t.point.y),r[2].position.set(t.point.x,t.point.y),this.onEndSpin())}advanceTime(t){return this.spinTime+=t*PIXI.Ticker.shared.elapsedMS,this.onUpdate(),!0}setColorBox(t){this.colorBox=t?this.container.yellowBox:this.container.blueBox,this.container.yellowBox.visible=!1,this.container.blueBox.visible=!1}onSpin(t){this.respin=t,this.setColorBox(t),this.colorBox.visible=!0,T.add(this)}toStop(t){this.spinAnimation.toStop(t,this.spinTime)}onEndSpin(){T.remove(this),this.spinTime=0,this.spinStopHandler()}showBoxSpineOnce(){for(const t of[0,1,2]){const e=this.colorBox[`box${t}`];e.default.visible=!1,e.spine.setAnimation(0,"normalSpin_winfx",!1),e.spine.setVisibleAnimated(!0)}return this.colorBox.visible=!0,W(300).then(()=>{for(const t of[0,1,2])this.colorBox[`box${t}`].spine.setVisibleAnimated(!1)})}showSpinStoped(t){for(const e of[0,1,2]){const i=this.colorBox[`box${e}`];i.default.visible=!1,i.spine.setAnimation(0,this.respin?"bonusSpin_winfx":"normalSpin_winfx",!0),i.spine.setVisibleAnimated(!0)}return W(900).then(()=>{for(const e of[0,1,2])this.colorBox[`box${e}`].spine.setVisibleAnimated(!1);this.colorBox.visible=!1,this.showWinSymbols([t])})}showWinSymbols(t){const e=t.length>0,i={};for(const n of t){const s=i[n.index];s?i[n.index]=s+1:i[n.index]=1}for(const n of this.spinAnimation.symbols)n.showWinFrame(!1),n.tint=e?8947848:16777215;for(const n in i){const s=this.spinAnimation.symbols[n];s.tint=16777215;const r=i[n];s.showWinFrame(!0,r)}}onOrientationChanged(t){this.orientation=t,this.spinAnimation.onOrientationChanged(t),this.onUpdate()}static create(t,e){const i=new Tt;X(t,{scene:e.scene,parent:i,context:e.context}),D(i,t,e);const n=[],s=[];for(let l=0;l<i.symbols.children.length;l++){const u=i.symbols[`s${l}`];n.push(u),s.push(u)}const r=n.splice(0,i.symbolOffsetL),o=s.splice(0,i.symbolOffsetP);return i.init({symbolsL:[...n,...r],symbolsP:[...s,...o],spinStartSpeed:a(t,"spinStartSpeed"),spinEndSpeed:a(t,"spinEndSpeed"),maxSpeed:a(t,"maxSpeed"),speedUpTime:a(t,"speedUpTime"),speedDownTime:a(t,"speedDownTime")}),i}};Tt=Xh([d({tag:"reel",category:"component"})],Tt);class Yh{constructor(e){this.index=0,this.willStopIndex=0,this.animator=new jh,this.symbolsL=e.symbolsL,this.symbolsP=e.symbolsP,this.spinStartSpeed=e.spinStartSpeed,this.spinEndSpeed=e.spinEndSpeed,this.maxSpeed=e.maxSpeed,this.speedUpTime=e.speedUpTime,this.speedDownTime=e.speedDownTime}get symbols(){return this.orientation==y.LANDSCAPE?this.symbolsL:this.symbolsP}getSpeedUpOffset(e){return fs.up(this.spinStartSpeed,this.maxSpeed,this.speedUpTime,e)}getSpeedDownOffset(e){return fs.down(this.maxSpeed,this.spinEndSpeed,this.speedDownTime,e)}get currentIndexOffset(){return this.symbols[this.index].pct*this.animator.getPathLength(this.orientation)}getMoveDistanceAndSpeed(e){let i=0,n=this.spinStartSpeed,s=!1;if(e<this.speedUpTime)i=this.getSpeedUpOffset(e),n=this.spinStartSpeed+(this.maxSpeed-this.spinStartSpeed)*(e/this.speedUpTime);else if(e>this.stopedTime-this.speedDownTime){let r=e-this.stopedTime+this.speedDownTime;e>this.stopedTime&&(r=this.speedDownTime,s=!0),n=(this.maxSpeed-this.spinEndSpeed)*((this.speedDownTime-r)/this.speedDownTime),i=this.getSpeedUpOffset(this.speedUpTime)+(this.stopedTime-this.speedUpTime-this.speedDownTime)/1e3*this.maxSpeed+this.getSpeedDownOffset(r)}else n=this.maxSpeed,i=this.getSpeedUpOffset(this.speedUpTime)+(e-this.speedUpTime)/1e3*this.maxSpeed;return i+=this.currentIndexOffset,this.animator.update(n,i,0),s&&(this.index=this.willStopIndex),[i,n,s]}getRandomSymbol(e){const i=[],n=[];for(let r=0;r<this.symbols.length;r++){const o=this.symbols[r];o.index===e&&(i.push(o),n.push(r))}const s=Pi(i.length);return[i[s],n[s]]}toStop(e,i){this.willStopIndex=e.index;const n=this.symbols[e.index],s=this.animator.getPathLength(this.orientation),r=s*n.pct+(this.animator.getPathLength(this.orientation)-this.currentIndexOffset),o=Math.ceil(Math.max(this.getMoveDistanceAndSpeed(i)[0],this.getSpeedUpOffset(this.speedUpTime)+this.getSpeedDownOffset(this.speedDownTime))/s)*s+r;this.stopedTime=(o-this.getSpeedUpOffset(this.speedUpTime)-this.getSpeedDownOffset(this.speedDownTime))/this.maxSpeed*1e3+this.speedUpTime+this.speedDownTime}onOrientationChanged(e){this.orientation=e}onUpdate(e){const[i,n,s]=this.getMoveDistanceAndSpeed(e),r=this.animator.update(n,i,this.orientation);return r.stop=s,r}}var zh=Object.defineProperty,qh=Object.getOwnPropertyDescriptor,Kh=(t,e,i,n)=>{for(var s=n>1?void 0:n?qh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&zh(e,i,s),s};const ms={symbol:2,index:0,multiplier:1},gs={symbol:1,index:11,multiplier:1};let Ri=class extends Fe{constructor(){super(...arguments),this.status="spin"}onContinue(){E.replace("main")}onCreated(){super.onCreated(),this.version.value="v"+p.engineVersion,x.on("continueClickHandler",this.onContinue.bind(this)),this.container.reel.spinStopHandler=this.spinStopHandler.bind(this),J(1e3).then(this.run.bind(this)),v.get("deviceService").fullScreenEnabled=!0;const t=v.get("i18nService");t&&t.setTitle()}exit(){super.exit(),this.exist=!0,x.off("continueClickHandler",this.onContinue.bind(this))}run(){this.exist||(this.status=="spin"?(this.container.reel.onSpin(!1),J(1e3).then(()=>{this.container.reel.toStop(gs)})):this.status=="respin"&&(this.container.reel.onSpin(!0),J(1e3).then(()=>{this.container.reel.toStop(ms)})))}spinStopHandler(){this.status=="spin"?(this.status="respin",this.container.reel.showSpinStoped(gs).then(()=>J(1e3)).then(()=>{this.container.reel.showWinSymbols([]),this.run()})):this.status=="respin"&&(this.status="spin",this.container.reel.showSpinStoped(ms),J(4e3).then(()=>{this.container.reel.showWinSymbols([]),this.run()}))}onLeft(){}onRight(){}onOrientationChange(t){super.onOrientationChange(t),this.container.reel.onOrientationChanged(y.LANDSCAPE)}};Ri=Kh([d({tag:"splash",category:"scene"})],Ri);var Jh=Object.defineProperty,Zh=Object.getOwnPropertyDescriptor,Qh=(t,e,i,n)=>{for(var s=n>1?void 0:n?Zh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Jh(e,i,s),s};let Bt=class extends k{constructor(e){super(),this.index=e.s}init(){const e=this.spine.getSlotContainerByName("glow");e.removeChildren(),e.addChild(this.symbol2),this.symbol2.blendMode="add";const i=this.spine.getSlotContainerByName("symbol");i.removeChildren(),i.addChild(this.symbol1);const n=this.winFrame.spine.getSlotContainerByName("MP_AMT");n.removeChildren(),n.addChild(this.winFrame.multiper)}playOnce(){return new Promise(e=>{this.spine.animated=!0,this.spine.setAnimation(0,"symbol_grow",!1),this.spine.addCompleteListener((i,n)=>{this.spine.animated=!1,this.spine.animation.state.clearListeners(),e()})})}play(){this.spine.setAnimation(0,"symbol_grow",!0),this.spine.animated=!0}stop(){this.spine.animated=!1,this.spine.resetTrackTime()}showWinFrame(e,i=0){e?(this.winFrame.multiper.value=`x${i}`,this.winFrame.visible=!0,this.play(),this.spine.scale.set(.5),this.parent.setChildIndex(this,this.parent.children.length-1),i&&i>1&&W(2200).then(()=>{this.winFrame.spine.setAnimation(0,"bonusA_mutiplier",!1),this.winFrame.spine.addCompleteListener(()=>{this.winFrame.spine.animation.state.clearListeners(),this.winFrame.spine.setAnimation(0,"bonusA_mutiplierStill",!0)}),this.winFrame.spine.setVisibleAnimated(!0)})):(this.winFrame.spine.setVisibleAnimated(!1),this.winFrame.visible=!1,this.stop(),this.spine.scale.set(.33))}set tint(e){this.symbol1.tint=this.symbol2.tint=e}onOrientationChange(e){super.onOrientationChange(e),this.pct=e==y.LANDSCAPE?Number(this.argument1):Number(this.argument2)}static create(e,i){const n=new Bt({s:a(e,"s")});return X(e,{scene:i.scene,parent:n,context:i.context}),D(n,e,i),n.init(),n}};Bt=Qh([d({tag:"symbol",category:"component"})],Bt);const eu=.001;class tu{constructor(e,i,n,s=eu,r=30){this.parent=e,this.speed=s;const o=new PIXI.Container,l=[{textures:i,framerate:r,loop:!0}];this.emitter=new PIXI.particles.Emitter(o,PIXI.particles.upgradeConfig(n,l)),this.emitter.emit=!1,e.addChild(o),T.add(this)}show(e){this.emitter&&(this.emitter.maxParticles=Dh[e],this.emitter.frequency=Bh[e],this.elapsed=Date.now(),this.emitter.emit=!0)}stop(){this.emitter.emit=!1}destroy(){T.remove(this),this.emitter.destroy(),this.emitter.cleanup(),this.emitter=null,this.parent.removeChildren()}advanceTime(e){if(!this.emitter&&this.emitter.emit)return!0;const i=Date.now();return this.emitter.update((i-this.elapsed)*this.speed),this.elapsed=i,!0}}var iu=Object.defineProperty,su=Object.getOwnPropertyDescriptor,nu=(t,e,i,n)=>{for(var s=n>1?void 0:n?su(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&iu(e,i,s),s};let At=class extends k{constructor(){super()}init(){this.coinsEmitter=new tu(this.coinsLayer,Mh(),Rh,.0012)}showWin(t){const e=this.spine.getSlotContainerByName("AMT");return this.spine.setAnimation(0,"youwinL_entry",!1),this.spine.addAnimation(0,"youwinL_idle",!0),e.removeChildren(),W(1e3).then(()=>{e.addChild(this.amount),this.amount.duration=2e3,this.amount.value=`${t}`}),this.spine.setVisibleAnimated(!0),this.visible=!0,W(4e3).then(()=>(this.spine.setAnimation(0,"youwinL_exit",!1),W(2e3).then(()=>{this.visible=!1,this.spine.setVisibleAnimated(!1),this.amount.value="0"})))}playWinEffect(t){this.visible=!0,this.coinsEmitter.show(t)}removeWinEffect(){this.coinsEmitter.stop(),this.visible=!1}static create(t,e){const i=new At;return X(t,{scene:e.scene,parent:i,context:e.context}),D(i,t,e),i.init(),i}};At=nu([d({tag:"winPanel",category:"component"})],At);Ut([Ai,gt,bt,Se,vt,_t,ct,He,mt,Re,xe,wt,$e,lt,he,we,k,Pe,Ei,Ni,ht,rt,ft,dt,pt,ut,H]);Ut([Ri,Mi,It,Tt,Bt,Lt,Ct,At,Et]);ya();
