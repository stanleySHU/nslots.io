function H(t){return t!=null}function A(t){return t==null}function Ki(t){return typeof t=="string"}function Cs(t){return typeof t=="function"}function Ls(t){return Cs(t)}function Ts(t){return Array.isArray(t)}function As(t){return Object.keys(t).length===0&&t.constructor===Object}function Ds(...t){let e={};for(let i=0;i<t.length;i++){let n=t[i];if(n!=null)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}var Pe=(t=>(t[t.PERCENT=0]="PERCENT",t[t.PIXEL=1]="PIXEL",t))(Pe||{});function V(t,e){if(!t)return;let n=t.childNodes.length;for(let s=0;s<n;s++){let r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE&&e(r,s)}}function Bs(t,e){let i=t.childNodes;for(let n=0;n<i.length;n++){let s=t.childNodes[n];if(s.nodeType===Node.ELEMENT_NODE&&$(s)===e)return s}}function Ns(t,e){if(!t)return;let n=t.childNodes.length;for(let s=n-1;s>=0;s--){let r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE&&e(r,s)}}function Le(t,e){return H(t.attributes[e])}function ie(t,e,i){t&&t.attributes[e]&&i&&(t.attributes[e].value=i)}function q(t,e,i=void 0){return t&&t.attributes[e]?t.attributes[e].value:i}function $(t,e=""){return q(t,"id",e)}function mi(t,e=""){return q(t,"name",e)}function a(t,e,i=0){return+q(t,e,i)}function Ti(t,e){let i=q(t,e,"");return Ji(i)}function Ji(t){return t=t.replace(" ",""),t?t.indexOf("%")>-1?{value:Number(t.substr(0,t.length-1))/100,unit:0}:t.indexOf("px")>-1?{value:+t.substr(0,t.length-2),unit:1}:{value:+t,unit:1}:{value:0}}function Rs(t,e){let i=u(t,e,"0").split(","),n=[{value:0},{value:0}];for(let s=0;s<i.length;s++)n[s]=Ji(i[s]);return n}function u(t,e,i=""){return q(t,e,i)}function g(t,e,i=!1){return u(t,e,i?"true":"false").toLowerCase()==="true"}function pe(t,e=""){return H(t)?t.textContent:e}function K(t,e,i,n){let s=u(t,e),r;if(s)r=s.split(",");else return[];i=H(i)?i:r.length;let o=new Array(i);for(let l=0;l<i;l++)o[l]=n?r[l]:parseFloat(r[l]);return o}function Ms(t,e,i){return K(t,e,i,!0)}function Qi(t,e,i=[0,0]){let n=u(t,e,"0").split(","),s=i;for(let r=0;r<n.length;r++)s[r]=parseFloat(n[r]);return s}function Us(t,e){let i=u(t,e,"0").split(",");return{x:parseFloat(i[0]),y:parseFloat(i[1])}}function Ws(t,e){let i=K(t,e,2);return{width:i[0],height:i[1]}}function $s(t,e){let i=K(t,e),n=[];for(let s=0;s<i.length;s++)s%2==0&&n.push({width:i[s],height:i[s+1]});return n}function Vs(t){return{align:u(t,"align","left"),breakWords:g(t,"breakWords",!1),fontFamily:u(t,"fontFamily"),fontSize:a(t,"fontSize"),fontStyle:u(t,"fontStyle","normal"),fontVariant:u(t,"fontVariant","normal"),fontWeight:u(t,"fontWeight","normal"),fill:Le(t,"fills")?Ms(t,"fills"):a(t,"fill",16777215),fillGradientType:a(t,"fillGradientType",0),fillGradientStops:K(t,"fillGradientStops"),stroke:a(t,"stroke",0),strokeThickness:a(t,"strokeThickness",0),wordWrap:g(t,"wordWrap",!1),wordWrapWidth:a(t,"wordWrapWidth",100),dropShadow:g(t,"dropShadow",!1),dropShadowColor:u(t,"dropShadowColor","#000000"),dropShadowBlur:a(t,"dropShadowBlur",0),dropShadowAngle:a(t,"dropShadowAngle",Math.PI/6),dropShadowDistance:a(t,"dropShadowDistance",5),padding:a(t,"padding",0),textBaseline:u(t,"textBaseline","alphabetic"),miterLimit:a(t,"miterLimit",10),lineJoin:u(t,"lineJoin","miter"),letterSpacing:a(t,"letterSpacing",0),lineHeight:a(t,"lineHeight",0)}}let Fs=(()=>{if(DOMParser){let t=new DOMParser;return e=>t.parseFromString(e,"text/xml").documentElement}else if(typeof ActiveXObject<"u")return t=>{let e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return t=>{}})();class js{constructor(){this.ie=!1,this.ieVersion=0,this.android=!1,this.chrome=!1,this.windowsPhone=!1,this.checkOS(),this.checkBrowser()}checkOS(){let e=navigator.userAgent;/Android/.test(e)&&(this.android=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(this.android=!1,this.windowsPhone=!0)}checkBrowser(){let e=navigator.userAgent;/Chrome\/(\d+)/.test(e)&&!this.windowsPhone?this.chrome=!0:/MSIE (\d+\.\d+);/.test(e)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(this.ie=!0,this.ieVersion=parseInt(RegExp.$3,10))}get isUCBrowser(){return navigator.userAgent.toLowerCase().indexOf("ucbrowser")>-1}get isQQBrowser(){return navigator.userAgent.toLowerCase().indexOf("qqbrowser")>-1}get isXiaoMiBrowser(){return navigator.userAgent.toLowerCase().indexOf("xiaomi")>-1}get desktop(){return is.desktop()}get mobile(){return is.mobile()}get tablet(){return is.tablet()}}class Hs{constructor(){this.mappings={}}map(e,i){let n=new qs(e,i);return this.mappings[e]=n,n}unmap(e){this.mappings[e]=void 0}get(e,...i){let n=this.mappings[e];if(!A(n))return n.get(i)}resolve(){console.warn("Injector.resolve() is not implement yet")}}class Gs{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class ks{constructor(e){this.type=e}get(e){return Zi(this.type,e)}destroy(){this.type=void 0}}class Xs{constructor(e){this.type=e}get(e){return A(this.instance)&&(this.instance=Zi(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class Ys{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class qs{constructor(e,i){this.name=e,this.type=i}get(e){return A(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new Gs(e)}toType(e){this.destroy(),this.provider=new ks(e)}toSingleton(e){this.destroy(),this.provider=new Xs(e)}asSingleton(){if(this.destroy(),A(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new Ys(e)}destroy(){H(this.provider)&&this.provider.destroy()}}function Zi(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}let zs=Object.prototype.hasOwnProperty,W=typeof Object.create!="function"?"~":!1;class Ai{constructor(e,i,n=!1){this.fn=e,this.context=i,this.once=n}}class es{constructor(){this.off=this.removeListener}eventNames(){let e=this._events,i=[],n;if(!e)return i;for(n in e)zs.call(e,n)&&i.push(W?n.slice(1):n);return i}listeners(e,i=!1){let n=W?W+e:e,s=this._events&&this._events[n];if(i)return!!s;if(!s)return[];if(s.fn)return[s.fn];let r=s.length,o=new Array(r);for(let l=0;l<r;l++)o[l]=s[l].fn;return o}emit(e,...i){let n=W?W+e:e;if(!this._events||!this._events[n])return!1;let s=this._events[n],r=i.length,o;if(typeof s.fn=="function"){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),r){case 0:return s.fn.call(s.context),!0;case 1:return s.fn.call(s.context,i[0]),!0;case 2:return s.fn.call(s.context,i[0],i[1]),!0;case 3:return s.fn.call(s.context,i[0],i[1],i[2]),!0;case 4:return s.fn.call(s.context,i[0],i[1],i[2],i[3]),!0;case 5:return s.fn.call(s.context,i[0],i[1],i[2],i[3],i[4]),!0}s.fn.apply(s.context,i)}else{let l=s.length;for(o=0;o<l;o++)switch(s[o].once&&this.removeListener(e,s[o].fn,void 0,!0),r){case 0:s[o].fn.call(s[o].context);break;case 1:s[o].fn.call(s[o].context,i[0]);break;case 2:s[o].fn.call(s[o].context,i[0],i[1]);break;default:s[o].fn.apply(s[o].context,i)}}return!0}on(e,i,n){let s=new Ai(i,n||this),r=W?W+e:e;return this._events||(this._events=W?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],s]:this._events[r].push(s):this._events[r]=s,this}once(e,i,n){let s=new Ai(i,n||this,!0),r=W?W+e:e;return this._events||(this._events=W?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],s]:this._events[r].push(s):this._events[r]=s,this}removeListener(e,i,n,s){let r=W?W+e:e;if(!this._events||!this._events[r])return this;let o=this._events[r],l=[];if(i)if(o.fn)(o.fn!==i||s&&!o.once||n&&o.context!==n)&&l.push(o);else for(let c=0,h=o.length;c<h;c++)(o[c].fn!==i||s&&!o[c].once||n&&o[c].context!==n)&&l.push(o[c]);return l.length?this._events[r]=l.length===1?l[0]:l:delete this._events[r],this}removeAllListeners(e){return this._events?(e?delete this._events[W?W+e:e]:this._events=W?{}:Object.create(null),this):this}}class ts extends es{on(e,i,n){return this.off(e),super.on(e,i,n)}}class z{constructor(e,i,n=!0){this.id=e,this.src=i,this.global=n}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){}destroy(e){this.data&&this.data.texture.destroy(e)}static getVersionSrc(e){let i=E.get("context");return this.checkSrcFormat(i.applyTimeVersion(i.resolve(q(e,"src"))))}static checkSrcFormat(e){const i=e.match(/\[(?:.+)\]/);if(i){const n=i[0].replace("[","").replace("]","").split(",");for(let s of n){const r=s==="avif",o=s==="webp";if(r&&Ye.avif||o&&Ye.webp||!r&&!o)return e.replace(`${i[0]}`,s)}}return e}static create(e){return new z($(e),this.getVersionSrc(e),g(e,"global",!0))}}function te(t,e){let i=t.toString();return new Array(e-i.length+1).join("0")+i}function Ks(t,e="{{",i="}}"){let n=[],s=0,r=0;for(;s=t.indexOf(e,r),s!==-1;)if(r=t.indexOf(i,s),s>-1&&r>-1)n.push(t.substr(s+2,r-s-2));else break;return n}function ss(t){let e=t.split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function ae(t){return new Decimal(t).toFixed(2,Decimal.ROUND_FLOOR)}function It(t,e){if(!e)return t+" ";switch(t){case"USD":return"$";case"CNY":case"RMB":case"JPY":return"¥";case"KRW":return"₩";case"MYR":return"RM";case"IDR":return"Rp";case"THB":return"฿";case"VND":return"₫";case"EUR":return"€";default:return t+" "}}function ns(t,e){return e?It(t,!0):""}class Et extends z{constructor(e,i,n,s){super(e,e,s),this.id=e,this.src=i,this.options=n}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){const i={};for(let s=0;s<this.options.frame;s++)i[`${this.id}_${te(s,4)}`]={frame:{x:s%this.options.width*this.options.size[0],y:Math.floor(s/this.options.width)*this.options.size[1],w:this.options.size[0],h:this.options.size[1]}};const n=e.get(this.id);this.sheet=new PIXI.Spritesheet({texture:n,data:{frames:i,meta:{scale:1}}}),this.sheet.parse()}static create(e){let i={size:Qi(e,"size"),frame:a(e,"frame"),width:a(e,"width",0)};return new Et($(e),this.getVersionSrc(e),i,g(e,"global",!0))}}class Oe extends z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){return new Oe($(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}class gi extends z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}static create(e){return new gi($(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}function Di(t,e){let i=E.get("context"),n=q(t,e,void 0);return n==null?n:i.applyTimeVersion(i.resolve(q(t,e)))}class vi extends z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.options=n}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){var i=Di(e,"atlas"),n=q(e,"rawAtlas",void 0);let s={spineAtlasFile:i,rawAtlasData:n};return new vi($(e),this.checkSrcFormat(Di(e,"json")),s,g(e,"global",!0))}}class Ct extends z{constructor(e,i,n){super(e,i,n),this.id=e,this.src=i}get rawAtlas(){return this.data}addTo(e){}static create(e){return new Ct($(e),this.getVersionSrc(e),g(e,"global",!0))}}class Ge extends z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}get frag(){return this.data}get vert(){return this.data}static create(e){return new Ge($(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}async function Js(t,e,i){const n=PIXI.TextFormat.test(t)?PIXI.TextFormat.parse(t):PIXI.XMLStringFormat.parse(t),{src:s}=e,{page:r}=n,o=[];for(let h=0;h<r.length;++h){const f=r[h].file,x=s.split("?")[0].split("/");x.pop(),x.push(f);let m=x.join("/");m=PIXI.copySearchParams(m,s),o.push(m)}const l=await i.load(o),c=o.map(h=>l[h]);return PIXI.BitmapFont.install(n,c,!0)}function Qs(){const t=PIXI.loadBitmapFont;t.parse=Js,PIXI.extensions.add(PIXI.loadBitmapFont)}class Zs extends es{constructor(){super(),this.ids=[],this.sheetResource={},this.assets=PIXI.Assets,Qs()}get progress(){return this._progress}onProgress(e){this._progress=e,this.emit("progress",e)}onLoaded(e){e.forEach(i=>{var n;(n=this.sheetResource[i])==null||n.loaded(this.assets)}),this.emit("complete",!1)}add(e,i=!1){e.addTo(this.assets),e instanceof Ct||(this.ids.push(e.id),e instanceof Et&&(this.sheetResource[e.id]=e))}load(){this.assets.load([...this.ids],this.onProgress.bind(this)).then(this.onLoaded.bind(this,[...this.ids])),this.ids=[]}json(e){return this.assets.get(e)}frag(e){return this.assets.get(e)}vert(e){return this.assets.get(e)}resolveImage(e){return this.assets.get(e)??PIXI.Texture.EMPTY}resolveTextureAtlas(e){const i=e[1],n=this.assets.get(i);if(e.length==2)return n.textures;{const s=e[2].split("|");return s.length==1?n.textures[s[0]]:s.map(r=>n.textures[r])}}resolveAtlasTextures(e){const i=e[1],n=this.assets.get(i);let s=[];const r=Object.keys(n.textures);if(e.length==2)s=Object.keys(n.textures);else for(let o of r)o.startsWith(e[1])&&s.push(o);return s=s.sort((o,l)=>o.localeCompare(l)),s.map(o=>n.textures[o])}resolveAnimations(e){const n=PIXI.Assets.get(e[1]).data.animations[e[2]],s=[];for(const r of n)s.push(this.resolveTextureAtlas(["@atlas",e[1],r]));return s}resolveSpriteSheet(e){const i=this.sheetResource[e];return Object.values(i.sheet.textures)}resource(e){return this.assets.get(e)}text(e){return this.resource(e)}resolve(e){let i=PIXI.Texture.EMPTY;if(!e||e.length===0)return i;let n=e.split("/");switch(n[0]){case"@img":return this.resolveImage(n[1]);case"@atlas":return this.resolveTextureAtlas(n);case"@atlasTextures":return this.resolveAtlasTextures(n);case"@animations":return this.resolveAnimations(n);case"@sheet":return this.resolveSpriteSheet(n[1]);case"@json":return this.json(n[1]);case"@spine":return this.resource(n[1]);case"@frag":return this.frag(n[1]);case"@vert":return this.vert(n[1]);case"@res":return this.resource(n[1]);case"@text":return this.text(n[1]);default:return i}}downloadApi(){return this.assets.add({src:"../_commons/api.json",alias:"api"}),this.assets.load("api")}get api(){return this.json("api")}getApiBy(e,i){return this.api[e]||i}}let en={atlas:z,img:z,audio:gi,res:z,sheet:Et,spine:vi,rawAtlas:Ct,text:Oe,json:Oe,xml:Oe,frag:Ge,vert:Ge};function tn(t){let e=en[t.nodeName];if(e)return e.create(t);throw`not found the resource by ${t.nodeName}`}function Lt(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)}function sn(t,e,i){let n=[],s=[];i=i||(r=>r);for(let r=0,o=0;r<e.length;r++)s.push(i(e[r])),o++,o===t&&(n.push(s),o=0,s=[]);return n}function rs(t,e){let i=[];return t.forEach((n,s,r)=>{let o=e(n);i.push(o)}),i}function nn(t){if(t&&t.length>0)return t[0]}function Ut(t){if(t)return t[t.length-1]}function rn(t,e){var i=0;if(t&&(i=t.length),i>0){for(var n=0;n<i;n++)if(e(t[n]))return t[n]}}function on(t){return new Date(t)}function os(){return new Date}function ke(){return os().getTime()}function Bi(t,e){let i=os(),n=i.getUTCHours()+t;n>23&&(n=n-24);let s=i.getUTCMinutes(),r=i.getSeconds(),o=te(n,2)+":"+te(s,2);return e?o+" (+"+t+")":o+":"+te(r,2)+" (GMT+"+t+")"}var j=(t=>(t[t.Identify=0]="Identify",t[t.PageView=1]="PageView",t[t.ScreenView=2]="ScreenView",t[t.Event=3]="Event",t[t.Request=4]="Request",t[t.Response=5]="Response",t[t.Transaction=6]="Transaction",t[t.Exception=7]="Exception",t[t.Timing=8]="Timing",t[t.Metric=9]="Metric",t[t.StartScreen=10]="StartScreen",t[t.StopScreen=11]="StopScreen",t))(j||{});let Gt;function an(t){Gt=t}class ln{constructor(){this.listeners=[]}initialize(){if(this.userAgent=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",H(Gt))for(let e of Gt){let i=new e;i.initialize(),this.addListener(i)}this.handleGlobalError()}handleGlobalError(){window.onerror=(e,i,n,s,r)=>{this.exception({name:"GlobalError",description:e,fatal:!1,error:r,extraInfo:{filename:i,lineno:n,colno:s}})}}addListener(e){this.listeners.push(e)}removeListener(e){Lt(this.listeners,e)}identify(e){this.track(j.Identify,e)}screen(e){A(e)&&(e={name:L.current.id}),this.track(j.ScreenView,e)}startScreen(e){this.track(j.StartScreen,e)}stopScreen(e){this.track(j.StopScreen,e)}metric(e){this.track(j.Metric,e)}event(e){this.track(j.Event,e)}exception(e){this.track(j.Exception,e)}request(e){this.track(j.Request,e)}response(e){this.track(j.Response,e)}pageView(e){this.track(j.PageView,e)}track(e,i){let n=d,s={time:ke(),type:e,userID:n.TRACKER_USER_ID,data:i};for(let r of this.listeners)r.track.call(r,s)}}const re=new ln;function Re(t,e,i,n=1,s=0){return t.alpha=s,as(t,{alpha:s},{alpha:n},e,i)}function bi(t,e,i,n=1,s=0){return t.alpha=n,as(t,{alpha:n},{alpha:s},e,i)}function hn(t,e,i,n,s,r=TWEEN.Easing.Linear.None,o=0,l=!1){let c=e;return new TWEEN.Tween(c).to(i,n).easing(r).repeat(o).yoyo(l).onUpdate(()=>{for(let f in e)f==="scale"?t.scale.x=t.scale.y=c[f]:t[f]=c[f]}).onComplete(()=>{s&&(s.length?s(t):s())})}function as(t,e,i,n,s,r=TWEEN.Easing.Linear.None){let o=hn(t,e,i,n,s,r);return o.start(),o}function kt(t,e,i=0,n=1){let s=new PIXI.Graphics;return s.beginFill(i),s.drawRect(0,0,t,e),s.endFill(),s.alpha=n,s}function un(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawPolygon(t),i}function ls(t,e,i=0,n=1){let s=new PIXI.Graphics;return s.lineStyle(n,i),s.drawRect(0,0,t,e),s}function hs(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawCircle(0,0,t),i.endFill(),i}function Xt(t,e,i=0,n=0){let s=new PIXI.Graphics;return s.beginFill(n),s.drawRoundedRect(0,0,t,e,i),s.endFill(),s}const Xe="REGISTER_METADATA_KEY",cn="component",pn="service",dn="scene";function p(t){return e=>(t.category=t.category||"component",e.prototype[Xe]=t,e)}function Ni(t){if(Xe in t.prototype){let e=t.prototype[Xe];switch(e.category){case cn:E.map(`component:${e.tag}`).toFactory(()=>t);break;case pn:let i=y.get(e.tag);i&&console.warn(`${e.tag}: ${i.constructor.name} is replaced by ${t.name}.`),y.register(e.tag,new t);break;case dn:E.map(`scene:${e.tag}`).toType(t);break}}else throw"Invaildate component, missing metadata of "+t}function Tt(t){if(Ts(t))for(let e of t)Ni(e);else Ni(t)}class fn{constructor(){this.views=[]}add(e){this.pane&&this.views.push(e)}remove(e){if(this.pane){let i=this.views.indexOf(e);i>=0&&this.views.splice(i,1),this.refresh()}}refresh(){for(let e of this.pane.children)this.pane.remove(e);for(let e of this.views)e.showBoundingBox(),e.createItemControllers(e)}addRefreshButton(){this.pane.addButton({title:"refresh"}).on("click",()=>{this.refresh()})}}class mn{createItemControllers(e){J.pane.addBinding(e,"x"),J.pane.addBinding(e,"y"),J.pane.addBinding(e,"width"),J.pane.addBinding(e,"height"),J.pane.addBinding(e,"rotation"),J.pane.addBinding(e,"scale"),J.pane.addBinding(e,"visible"),J.pane.addBinding(e,"alpha")}}function gn(...t){return e=>e}var vn=Object.defineProperty,bn=Object.getOwnPropertyDescriptor,yn=(t,e,i,n)=>{for(var s=n>1?void 0:n?bn(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&vn(e,i,s),s};function Ri(t){return t instanceof S||t instanceof At}class At{getComponentByID(e){}}let S=class extends PIXI.Container{constructor(){super(...arguments),this.components=[],this.fadeInTime=-1,this.fadeOutTime=-1,this.editAble=!1}addToEdit(){this.editAble&&J.add(this)}removeFromEdit(){this.editAble&&J.remove(this)}addChild(...t){if(t=t[0],t instanceof PIXI.DisplayObject&&super.addChild(t),Ri(t))return t instanceof S&&(t.fadeIn(),t.addToEdit()),this.components.push(t),t}fadeIn(t){t===void 0&&(t=this.fadeInTime),t>0&&(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=Re(this,t))}fadeOut(t,e=!0){t===void 0&&(t=this.fadeOutTime),t>0?(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=bi(this,t,e?()=>{this.parent&&this.parent.removeChild(this)}:void 0)):e&&this.parent&&this.parent.removeChild(this)}removeChild(...t){return t=t[0],t instanceof PIXI.DisplayObject&&super.removeChild(t),Ri(t)&&(Lt(this.components,t),t.deactivate()),t}removeChildren(t,e){return this.removeAllComponents(),super.removeChildren(t,e)}removeAllComponents(){this.deactivate(),this.components=[]}activate(){this.fadeIn(),this.components.forEach(t=>t.activate())}deactivate(){this.removeFromEdit(),this.fadeTween&&this.fadeTween.stop(),this.components.forEach(t=>t.deactivate())}getComponentByID(t){for(let e=0;e<this.components.length;e++){let i=this.components[e];if(i.id===t)return i;let n=i.getComponentByID(t);if(n)return n}}getComponentByTag(t){for(let e of this.components){let i=e.constructor.prototype[Xe];if(i&&i.tag===t)return e}}showBoundingBox(){H(this.boundingBox)&&(this.boundingBox.destroy(),this.removeChild(this.boundingBox));let t=this.getBounding();this.boundingBox=ls(t.width,t.height,0,5),this.addChild(this.boundingBox)}getBounding(){return this.getBounds()}bringToTop(t){this.setChildIndex(t,this.children.length-1)}applyLayout(t){if(t)for(let e in t){let i=t[e];e==="scale"?this.scale.set(i[0],i[1]):e==="pivot"?this.pivot.set(i[0],i[1]):e==="activate"?i?this.activate():this.deactivate():this[e]=i}}onOrientationChange(t){this.layoutInfo&&this.applyLayout(this.layoutInfo[t])}};S=yn([gn(mn)],S);var w=(t=>(t[t.LANDSCAPE=0]="LANDSCAPE",t[t.PORTRAIT=1]="PORTRAIT",t))(w||{});function us(t){let e=u(t,"render");return!(e==="webgl"&&M.type!==PIXI.RENDERER_TYPE.WEBGL||e==="canvas"&&M.type===PIXI.RENDERER_TYPE.WEBGL)}function wn(t){let e=u(t,"brand",null);return e===null||e==="all"&&!d.BRAND||e.toLowerCase()===String(d.BRAND).toLowerCase()}function oe(t,e){if(!t||!us(t))return null;let i=t.nodeName,n=E.get(`component:${i}`);if(n){let s=n.create(t,e);return s instanceof S&&g(t,"boundingBox")&&s.showBoundingBox(),s}else console.warn(`can't find component by tag name "${i}"`);return null}function k(t,e,i=!0){if(!e.parent)throw new Error("call builder.createChildren must pass parent.");(i?Ns:V)(t,(s,r)=>{let o=oe(s,e);o&&e.parent.addChild(o)})}function N(t,e,i){i.scene;let n=i.parent,s=$(e,null);t.id=s,s&&n&&(n[s]=t),t instanceof S&&(t.name=e.tagName+(A(s)?"":`#${s}`),xn(t,e,i))}function xn(t,e,i){let n=[{},{},{}],s=i.scene,r=i.parent,o=!1,l=2;for(let c=0;c<e.attributes.length;c++){let h=e.attributes[c].name,f=h,x=l;if(h.indexOf("p-")===0?(x=w.PORTRAIT,f=h.substr(2),o=!0):h.indexOf("l-")===0&&(x=w.LANDSCAPE,f=h.substr(2),o=!0),f==="x"){let m=Ti(e,h);n[x].x=m.unit===Pe.PERCENT?r.width*m.value:m.value}else if(f==="y"){let m=Ti(e,h);n[x].y=m.unit===Pe.PERCENT?r.height*m.value:m.value}else if(f==="alpha")n[x].alpha=a(e,h);else if(f==="pivot"){let[m,O]=Rs(e,h),v=t.getLocalBounds();n[x].pivot=[m.unit===Pe.PERCENT?m.value*v.width:m.value,O.unit===Pe.PERCENT?O.value*v.height:O.value]}else if(f==="scale")if(q(e,h).indexOf(",")!==-1)n[x].scale=Qi(e,h,[1,1]);else{let m=a(e,h);n[x].scale=[m,m]}else f==="rotation"?n[x].rotation=a(e,h)/180*Math.PI:f==="visible"?n[x].visible=g(e,h,!0):f==="activate"&&(n[x].activate=g(e,h))}e.hasAttribute("interactive")&&(t.interactive=g(e,"interactive")),e.hasAttribute("interactiveChildren")&&(t.interactiveChildren=g(e,"interactiveChildren")),e.hasAttribute("visible")&&(t.visible=g(e,"visible",!0)),t.fadeInTime=a(e,"fadein",-1),t.fadeOutTime=a(e,"fadeout",-1),t.editAble=g(e,"editAble",!1);for(let c=1;c<10;c++)e.hasAttribute("argument"+c)&&(t["argument"+c]=u(e,"argument"+c));o&&(s.multiLayoutComponents.push(t),t.layoutInfo=n),t.applyLayout(n[l])}function Sn(t,e,i,n,s){let r=e.hasAttribute("p-"+i),o=e.hasAttribute("l-"+i);!r&&!o||(r&&(t.layoutInfo[w.PORTRAIT][i]=n(e,"p-"+i,s)),o&&(t.layoutInfo[w.LANDSCAPE][i]=n(e,"l-"+i,s)))}function Pn(t,e,i,n,s){let r=i.scene,o=u(e,n,void 0);if(o&&r[o]){let l=u(e,"parameter",void 0),c=r[o];t[s]=()=>{c.call(r,t,l)}}}function yi(t,e,i){for(var n=0;n<e.attributes.length;n++){var s=e.attributes[n];s&&s.name.match(/on[A-Z]\w+/)&&Pn(t,e,i,s.name,s.name+"Handler")}}function Ie(t,e){let i=e[t+"Handler"];return i?(i(),!0):!1}function _n(t){let e=t.hitArea;if(e){let i=ls(e.width,e.height,16711680,2);t.addChild(i)}}const Yt="__guitarist_bindings__";class On{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=E.get(this.key)}}class In{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=y.get(this.key)}}function cs(t){return(e,i)=>{let n=e[Yt]||[];n.push(t(e,i)),e[Yt]=n}}function wi(t){return cs((e,i)=>new On(t,i))}function Me(t){return cs((e,i)=>new In(t,i))}function Mi(t){(t[Yt]||[]).forEach(i=>i.apply(t))}function En(t){let e=t?t.split(","):null;return(e?e.shift():null)=="fadein"?Cn(parseFloat(e.shift())||800):n=>{L.replace(n)}}function Cn(t){return e=>{let i=L.current;i&&(i.interactive=!1,i.interactiveChildren=!1);let n=L.resolve(e);n.alpha=0,L.add(n),Re(n,t,()=>{i&&(i.exit(),L.remove(i))})}}class Ue extends S{constructor(e){super(),this.layout=e,this.multiLayoutComponents=[],this.id=$(e),this.name="scene#"+this.id,this.transitions=u(e,"transitions",null)}loadResources(){let e=D,i=this.layout.querySelector("scene resources");i?(e.retryTimes=a(i,"retry",2),V(i,(n,s)=>{if(us(n)&&wn(n)){let r=tn(n);e.add(r)}}),e.on("progress",n=>{this.onProgress(n)}),e.once("complete",()=>{e.removeAllListeners(),this.onLoaded()}),e.load()):this.onLoaded()}create(e){let i=this.layout.querySelector("scene view");i&&k(i,{scene:this,parent:this}),Mi(this);let n=y.get("orientationService");n.mode==="both"&&this.onOrientationChange(n.getOrientation()),this.onCreated(e)}enter(e){re.screen({name:this.id}),this.layout&&(this.loadResources(),this.create(e))}focus(){}blur(){}exit(){this.removeChildren()}setState(e){e.scene=this,this.state&&this.state.exit(),Mi(e),this.state=e,this.state.enter()}get isPortraitLayout(){let e=y.get("orientationService");return e.mode==="both"&&e.getOrientation()===w.PORTRAIT}onProgress(e){}onLoaded(){this.next=u(this.layout,"next",null),this.next&&this.transit()}transit(){En(this.transitions)(this.next)}onCreated(e){}onOrientationChange(e){for(let i=0;i<this.multiLayoutComponents.length;i++)this.multiLayoutComponents[i].onOrientationChange(e)}onSceneResize(){}}class Ln{constructor(){this.overlayContainer=new PIXI.Container,this.sceneContainer=new PIXI.Container,this.scenesRegistry={},this.scenes=[]}register(e){this.scenesRegistry[$(e)]=e}push(e,i=!0,n){this._current&&(this._current.blur(),this._current.visible=!i),this.add(this.resolve(e),n)}pop(){if(this._current&&(this._current.exit(),this.sceneContainer.removeChild(this._current),this.scenes.pop()),this.scenes.length>0){let e=this.scenes[this.scenes.length-1];e.visible=!0,e.focus(),this._current=e}}remove(e){this.sceneContainer.removeChild(e),this.scenes.splice(this.scenes.indexOf(e),1)}replace(e,i){this._current&&(this._current.exit(),this.remove(this._current)),this.add(this.resolve(e),i)}resolve(e){if(Ki(e)){let i=e,n=this.scenesRegistry[i],s=E.get(`scene:${i}`,n);return s||(s=new Ue(n)),s}else return e}addOverlay(e){this.overlayContainer.addChild(e)}removeOverlay(e){this.overlayContainer.removeChild(e)}get current(){return this._current}add(e,i){this.scenes.push(e),this.sceneContainer.addChild(e),this._current=e,this._current.enter(i)}}class F{configure(e){}startup(){}shutdown(){}}class Tn{constructor(){this.services={}}get(e){return this.services[e]}register(e,i){let n;return Ls(i)?n=new i:n=i,this.services[e]=n,n}has(e){return H(this.services[e])}startup(){for(let e in this.services)this.services[e].startup()}shutdown(){for(let e in this.services)this.services[e].shutdown()}}class An{constructor(){this.count=0}push(e,i=!1){if(!(!i&&this.has(e))){var n={value:e,next:void 0};if(this.count++,!this.head)this.head=n;else{let s=this.head;for(;s.next;)s=s.next;s.next=n}}}forEach(e){let i=this.head;for(;i;)e(i.value),i=i.next}has(e){let i=this.head;for(;i;){if(i.value===e)return!0;i=i.next}return!1}clear(){this.head=void 0,this.count=0}remove(e){let i=this.head;for(var n=i;i;){if(i.value===e){this.count--,n.next=i.next,i===this.head&&(this.head=i.next);return}n=i,i=i.next}}}class Dn{constructor(){this.list=new An}advanceTime(e){return this.list.forEach(i=>{i.advanceTime(e)}),!0}add(e){this.list.push(e)}remove(e){this.list.remove(e)}contains(e){return this.list.has(e)}clear(){this.list.clear()}}const J=new fn,E=new Hs,L=new Ln,D=new Zs,y=new Tn,Z=new ts,T=new ts,_=new Dn,C=new js;let b,M,Y,d,qt,Ye={avif:!1,webp:!1};function Bn(){return Promise.all([PIXI.detectAvif.test(),PIXI.detectWebp.test()]).then(([t,e])=>{Ye.avif=t,Ye.webp=e})}function Nn(t){let e={width:t.width,height:t.height,view:t.canvas,backgroundColor:t.backgroundColor,autoResize:!0,antialias:!0,resolution:Math.min(t.resolution,2)};const i=PIXI.autoDetectRenderer(e);return A(t.canvas)&&document.body.appendChild(i.view),i}function Rn(t){return qt=t,C.platform=t.config.name,t.launchTime,re.initialize(),d=E.get("context"),Promise.all([d.initialize(),Bn()])}function Mn(t,e){b=e,d.ID=$(t);let i=u(t,"enter");b.minWidth=a(t,"minWidth",0),b.minHeight=a(t,"minHeight",0),b.width=a(t,"width",800),b.height=a(t,"height",600),b.resolution=window.devicePixelRatio??a(t,"resolution",1),b.backgroundColor=a(t,"backgroundColor",0),M=Nn(b);for(let s=0;s<t.attributes.length;s++){let r=t.attributes[s].name;d[r]===void 0&&(d[r]=t.attributes[s].value)}const n=D.api;for(let s in n)d[s]=n[s];d.getHudLanguage(),d.printEngineVersion(),qt.opid=(d.OPERATOR||"").toUpperCase(),qt.gameid=d.ID,Wn(),Y=new PIXI.Container,Y.name="world",Y.addChild(L.sceneContainer),Y.addChild(L.overlayContainer),Y.pivot.set(b.width/2,b.height/2),V(t.querySelector("scenes"),(s,r)=>{L.register(s)}),V(t.querySelector("services"),(s,r)=>{let o=y.get(s.nodeName);o||console.log("service "+s.nodeName+" not found"),o.configure(s)}),y.startup(),L.replace(i),PIXI.Ticker.shared.maxFPS=a(t,"maxFPS",59.99),PIXI.Ticker.shared.minFPS=a(t,"minFPS",55),PIXI.Ticker.shared.add(Un),PIXI.Ticker.shared.autoStart=!0}function Un(t){PIXI.Ticker.shared.elapsedMS,_.advanceTime(t),M.render(Y)}function Wn(){try{if(navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)){let e=M.plugins&&M.plugins.interaction?M.plugins.interaction:M.events;if(!e)return;let i=e.interactionDOMElement?e.interactionDOMElement:e.domElement;if(!i)return;window.document.removeEventListener("mousemove",e.onMouseMove,!0),i.removeEventListener("mousedown",e.onMouseDown,!0),i.removeEventListener("mouseout",e.onMouseOut,!0)}}catch{console.log("InteractionManager not applicable.")}}function $n(t){let e="",i=0;for(let n in t)t.hasOwnProperty(n)&&(i++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]))}let $e;function Vn(){if($e===void 0)try{$e=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{$e=!1}return $e}let Ui=[],ps=class{constructor(e=!1){this.isXDR=!1,e&&Vn()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,Ui.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,n){return n&&(this.client.responseType="json"),this.client.open("POST",e),i&&this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.send(i)}afterDone(){this.isXDR&&Lt(Ui,this.client)}send(e){return new Promise((i,n)=>{setTimeout(()=>{e?this.client.send($n(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?i(this.client):n(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),n(new Error("Request timeout"))},this.client.onerror=s=>{this.afterDone(),n(new Error(s.toString()))}})}};function ds(t,e){return new ps(!0).get(t)}function fs(t){let e=t||"",i=e.split("."),n=i.length;return n>1?`${i[n-2]}.${i[n-1]}`:e}function Fn(t){return C.ie&&C.ieVersion<10?Fs(t.responseText):t.responseXML.documentElement}function jn(t){t.bootstrap=()=>{let e=t.config;D.downloadApi().then(()=>{Rn(t).then(()=>{let i=d.resolve(e.layout+"/{{LANGUAGE}}.min.xml");i=d.applyTimeVersion(i),new ps().get("layout/"+i).then(n=>{let s=Fn(n);Mn(s,{canvas:document.querySelector("#stage")})}).catch(n=>{re.exception({name:n.name,description:n.message,fatal:!0,extraInfo:n})})}).catch(i=>{alert(i)})})}}const Hn="events:errorpopup:open",ms="events:errorpopup:close",Gn=11;let Ee=document.getElementById("errorDialog"),Ve=document.getElementsByClassName("close")[0];document.getElementById("historyContainer");document.getElementsByClassName("closeHistory")[0];let xe,ce,Wt,$t,Vt,Wi=0,$i=0,gs=!1;function we(t){if(ce===void 0||t!=null){let e=y.get("symbolService");t!=null?ce=e.multiSize[t].height:ce=e.size.height,ce==null&&(ce=e.multiSize[0].height)}return ce}function We(){if(xe===void 0){let t=y.get("symbolService");xe=t.size.width,xe==null&&t.multiSize!=null&&(xe=t.multiSize[0].width)}return xe}function vs(t){return t===void 0?Wi:(Wi=t,t)}function kn(t){return t===void 0?$i:($i=t,t)}function B(){return Wt===void 0&&(Wt=E.get("user")),Wt}function I(){return $t===void 0&&($t=E.get("context")),$t}function xi(){return I().NUM_OF_COLUMN}function bs(){return I().NUM_OF_ROW}function zt(t,e,i=!1,n){return Si(t,e,i,!0,n)}function Si(t,e,i=!1,n=!1,s){return y.get("soundService").play(t,e,i,n,s)}function Vi(t){if(!t)return;y.get("soundService").stop(t.soundId)}function Pi(t="button"){Si(t,"default",!0)}function Dt(t){return Vt===void 0&&(Vt=y.get("textService")),Vt.translate(t)}function ee(t){return Dt("{{"+t+"}}")}function qe(t,e,i){if(!gs)if(Ee){Ee.style.display="block";let n=document.getElementById("errormessage"),s=document.getElementById("errorcode");if(n.innerHTML=t,s.innerHTML=te(e,3),i||zn(e)){qn();let r=()=>{Kn({code:e})};Ve.style.display!=="none"&&(Ve.style.display="none",n.parentElement.appendChild(Jn(ee("ok"),r)))}else{let r=()=>{switch(Ve.removeEventListener("click",r,!1),Ee.style.display="none",e){case 0:case 5:case 7:case 14:Kt();break;case 20:case 21:case 24:Kt(!0);break;case 27:Qn()}T.emit(ms,{code:e})};Ve.addEventListener("click",r,!1),T.emit(Hn,{code:e})}}else alert(t)}function Xn(t,e){if(Ee&&Ee.style.display==="block"){let i=document.getElementById("errormessage");i.innerHTML=t}else qe(t,e)}function Yn(){let t=d.collapsingBonusID;return t||""}function ys(){return d.isProgressiveJackpot==="true"}function qn(){let t=y.get("keyboardService");t&&t.shutdown(),B().stopAutoSpin(),L.current.id==="main"&&(L.current.exit(),L.replace("main"))}function zn(t){return parseInt(t)!==10&&parseInt(t)!==29&&!I().loginUrl&&(!I().LOBBY_URL||I().HIDE_LOBBY==="1")}function Kn(t){t&&(T.emit(ms,t),window.open("","_self"),self.close(),Xn(ee("closegame"),t.code),gs=!0)}function Jn(t,e){let i=document.createElement("div"),n=document.createElement("span");return n.innerHTML=t,n.className="button",i.className="buttons",i.appendChild(n),n.addEventListener("click",()=>{i.parentElement&&i.parentElement.removeChild(i),e&&e()},!1),i}function Qn(){window.close(),setTimeout(()=>Kt(!0),50)}function Kt(t=!1){I().loginUrl&&I().loginUrl!==""&&!t?window.open(I().loginUrl,"_self"):I().HIDE_LOBBY==="0"&&I().LOBBY_URL&&I().LOBBY_URL!==""&&window.open(I().realLobbyUrl,"_self")}function Fi(t="0",e){t===""&&(t="0"),qe(Dt(`{{err_${te(t,3)}}}`),t,e)}function Zn(t,e){if(Le(t,"frsum")){let s=a(t,"frsum");B().froundSum=s}return Le(t,"expired")&&(B().froundExpired=u(t,"expired")==="1"),e}function er(t){if(t.tagName==="error")return{success:!1,data:{code:a(t,"code"),message:pe(t)}};{let e=t.querySelector("bonus"),i=t.querySelector("wheels"),n=K(i,"rows"),s=t.querySelector("bonusposition"),r=n.length&&d.bonusAsWinlinesRow!=="true";return{success:!0,data:Zn(t,{win:new Decimal(pe(t.querySelector("win"))),balance:new Decimal(pe(t.querySelector("balance"))),multiplier:a(t,"multiplier",1),wheels:sr(i,n),winLines:ji(t.querySelector("winposition")),bonusPosition:r?ir(s,n):ji(s),bonusID:$(e,void 0),bonusKey:pe(e,void 0),bonus:e,data:t,fround:tr(t)})}}}function tr(t){let e=t.querySelector("fround");if(e)return{round:a(e,"round"),finished:u(e,"isfinished")==="1"}}function ji(t){let e=[];return V(t,(i,n)=>{let s=[],r=rs(pe(i).split(","),o=>parseInt(o)-1);for(let o=0;o<r.length;o++)r[o]>=0&&s.push([o,r[o]]);e.push({index:a(i,"line"),win:a(i,"win"),multiplier:a(i,"mul"),positions:s,type:u(i,"type")})}),e}function ir(t,e){let i=[];return V(t,(n,s)=>{let r=[],o=rs(pe(n).split(","),c=>parseInt(c)),l=[];for(let c=0;c<e.length;c++){l=o.splice(0,e[c]);for(let h=0;h<l.length;h++)l[h]>0&&r.push([c,h])}i.push({index:a(n,"line"),win:a(n,"win"),multiplier:a(n,"mul"),positions:r,type:u(n,"type")})}),i}function sr(t,e=[]){let i=K(t,"val");if(e.length!==xi())return sn(3,i,parseInt);let n=[];for(let s=0;s<e.length;s++)n.push(i.splice(0,e[s]));return n}const nr="1";class rr{constructor(){this.restoreBonus=!1,this.bonusBet=!1,this.autoSpinValues=[100,75,50,25,10],this.autoSpin=10,this._betValueIndex=0,this._multiplierIndex=0,this.maxBetRevertIndex=0,this.isTurbo=!1,this.accountName="Funplay",this.displayName="Funplay",this.funplay=!0,this.currency="RMB",this.balance=new Decimal(0),this.winAmount=new Decimal(0),this.bet={lines:0,credits:0,amount:0,multiplier:1}}setDefaultBet(){let e=d.defaultBet;if(e=e?JSON.parse(e):{},!e||e[this.currency]===void 0)this.betValueIndex=0;else{let i=this.betValues.indexOf(e[this.currency]);this.betValueIndex=Math.max(0,i)}}setMaxBet(){this.betValueIndex=this.betValues.length-1}get isMaxBet(){return this.displayedBetIndex===this.betValues.length-1}set multiplierIndex(e){this._multiplierIndex=e,this.bet.multiplier=this.multiplierValues[e]}get multiplierIndex(){return this._multiplierIndex}set betValueIndex(e){this._betValueIndex=e,this.bet.amount=this.betValues[e]}get betValueIndex(){return this._betValueIndex}set betValue(e){this.betValueIndex=Math.max(0,this.betValues.indexOf(e))}get betValue(){return this.bet.amount}get froundBet(){if(this.fround)return this.fround.bet!==void 0?this.fround.bet:a(this.fround,"bet",0)}get froundMul(){if(this.fround){if(this.fround.multiplier!==void 0){let e=this.fround.multiplier;return this.multiplierValues.indexOf(e)<0&&(e=this.multiplierValues[0]),e}return a(this.fround,"mul",1)}else return}get froundTotalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.froundBet)).times(this.froundMul)}get froundBetIndex(){return Math.max(this.betValues.indexOf(this.froundBet))}get froundMultiplierIndex(){return Math.max(this.multiplierValues.indexOf(this.froundMul),0)}get totalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.bet.amount)).times(this.bonusBet?2:1).times(this.bet.multiplier).times(this.bet.betLevel?this.bet.betLevel:1)}get displayedMultiplier(){return this.froundOn?this.froundMul:this.bet.multiplier}get displayedBetAmount(){return this.froundOn?this.froundBet:this.bet.amount}get displayedTotalBet(){return this.froundOn?this.froundTotalBet:this.totalBet}get linesCredits(){return this.bet.credits>0?this.bet.credits:this.bet.lines}get displayedBetIndex(){return this.froundOn?this.froundBetIndex:this.betValueIndex}get displayedMultiplierIndex(){return this.froundOn?this.froundMultiplierIndex:this._multiplierIndex}get isDoubleUp(){return this.bonus&&this.bonus.id===nr}checkAutoSpinConditions(){if(!this.autoSpinSettings||!this.autoSpinSettings.inAutoSpins)return!1;let e=new Decimal(0),i=this.balance.minus(this.autoSpinSettings.startBalance);i.lt(0)&&(e=i.dividedBy(this.totalBet).abs());let n=this.bonus!==void 0&&this.bonus!==null&&this.bonus.id!==Yn();return this.autoSpin===0||this.autoSpinSettings.stopAtFeature&&n||this.autoSpinSettings.stopAtWin>0&&this.winAmount.gt(this.autoSpinSettings.stopAtWin)||this.autoSpinSettings.stopAtBalance>0&&i.gte(this.autoSpinSettings.stopAtBalance)||this.autoSpinSettings.stopAtTotalBet>0&&e.gte(this.autoSpinSettings.stopAtTotalBet)||this.autoSpinSettings.stopAtCustom>0&&i.lte(-this.autoSpinSettings.stopAtCustom)?(this.stopAutoSpin(),!1):!0}stopAutoSpin(){this.isAutoSpinOn&&(this.autoSpinSettings.inAutoSpins=!1)}get isAutoSpinOn(){return this.autoSpinSettings&&this.autoSpinSettings.inAutoSpins}}var or=Object.defineProperty,ar=Object.getOwnPropertyDescriptor,lr=(t,e,i,n)=>{for(var s=n>1?void 0:n?ar(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&or(e,i,s),s};const hr="events:reel:slow",ur="events:reel:normal";let ze=class{constructor(){this.acceleration=2,this.deceleration=2,this.stopacceleration=2,this.minSpeed=10,this.maxSpeed=60,this.duration=300,this._frameToStop=0,this.numberRandomize=1}advanceTime(t){if(this.enabled){try{this.getSpeed(),this.move(this.currentSpeed),this.addAndRemoveSymbols(),this._state==2&&Math.abs(this.currentSpeed-this.stopSpeed)<.01&&(this.stopSpeed=this.currentStopSpeed,this.displayReel(),this.cancel(),this.resolve())}catch{this.reject&&this.reject({code:Gn,message:""})}return!0}}displayReel(){this.reel.display()}getSpeed(){if(this._state===3)this.currentSpeed=this.minSpeed;else if(this._state===4)T.emit(ur,this.reel),this.currentSpeed+=this.currentAcc,this._state=0;else if(this._state===0)this.currentSpeed+=this.currentAcc;else if(this._state===1)this.stopDistance-=this.currentSpeed,this.readyToStop();else if(this._state===2)this.currentSpeed-=this.currentAcc;else return 0;return this.currentSpeed=Math.min(this.currentSpeed,this.maxSpeed),this.currentSpeed}play(t){this.enabled=!0,this._state=0,this.reel=t,this.currentSpeed=this.startSpeed,this.currentAcc=this.acceleration,_.add(this),this.reel.options.restrictedSymbols&&this.reel.options.slowRestriction&&(this.slowRestrictedSymbols=this.reel.options.restrictedSymbols.split(","))}stop(t){if(this.slowStopping=!1,!this.enabled)return Promise.resolve();if(this._state===3)this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0;else if(this.slowRestrictedSymbols){for(let e=0;e<this.slowRestrictedSymbols.length;e++)if(t.indexOf(Number(this.slowRestrictedSymbols[e]))>=0){this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0,this.reel.options.slowSound&&zt(this.reel.options.slowSound,"default",!0);break}}return this.reel.addSymbolsAtTop(t,e=>e.idle()),this.stopDistance=this.getStopDistance(),this.readyToStop(),new Promise((e,i)=>{this.resolve=e,this.reject=i})}getStopDistance(){return-this.reel.topSymbol.y+this.reel.getTopSymbolY()}readyToStop(){this._frameToStop=0,this._state=1;var t=this.distanceToStop();this.stopDistance<=t&&(this.currentSpeed=this.speedToStop(),this._state=2)}cancel(){this.enabled=!1,_.remove(this)}move(t){this.reel.symbolContainer.children.forEach(e=>{e.y+=t})}addAndRemoveSymbols(){let t=this.reel.viewport;if(this.reel.topSymbol.y>=t.y){let i=this.reel.pickMany(this.numberRandomize);if(this.slowRestrictedSymbols){if(this._state===0&&this.slowRestrictedSymbols.indexOf(i[0].toString())>=0)this._state=3,this.currentSpeed=this.minSpeed,T.emit(hr,this.reel),this.reel.options.slowSound&&zt(this.reel.options.slowSound,"default",!0);else if(this._state===3){let n=!1;for(let s=0;s<this.slowRestrictedSymbols.length;s++){let r=this.reel.symbolContainer.getSymbolIndex(Number(this.slowRestrictedSymbols[s]));r>=0&&this.reel.symbolContainer.get(r).y>=t.y+bs()*we()&&(n=!0)}n&&(this._state=4)}}this.reel.addSymbolsAtTop(i,n=>n.spin())}this.reel.removeOutsideSymbols()}speedToStop(){for(var t=this.stopDistance,e=this.stopSpeed,i=0,n=0;i<=t;)i+=e,e+=this.slowStopping?this.deceleration:this.stopacceleration,n++;let s=(t-n*this.stopSpeed)*2/(n*(n-1));return this.currentAcc=s,this.stopSpeed+n*s}distanceToStop(){for(var t=this.maxSpeed,e=0;t>=this.stopSpeed;)t-=this.slowStopping?this.deceleration:this.stopacceleration,e+=t;return e}static create(t){let e=new ze;return e.maxSpeed=a(t,"max",60),e.minSpeed=a(t,"min",10),e.startSpeed=a(t,"startSpeed",0),e.stopSpeed=a(t,"stopSpeed",0),e.acceleration=a(t,"acceleration",2),e.deceleration=a(t,"deceleration",2),e.stopacceleration=a(t,"stopacceleration",e.acceleration),e.duration=a(t,"duration",300),e.numberRandomize=a(t,"numberRandomize",1),e.currentStopSpeed=e.stopSpeed,e}};ze=lr([p({tag:"animator:inback"})],ze);function Ke(t){let e=Object.create(null);return t=t.trim().replace(/^(\?|#|&)/,""),t&&t.split("&").forEach(i=>{let n=i.replace(/\+/g," ").split("="),s=n.shift(),r=n.length>0?n.join("="):void 0;s=decodeURIComponent(s),r=r===void 0?null:decodeURIComponent(r),e[s]===void 0?e[s]=r:Array.isArray(e[s])?e[s].push(r):e[s]=[e[s],r]}),e}function ws(t){let e="",i=0;for(let n in t)t[n]&&(i++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function cr(t){return t===void 0&&(t=Bt()),`${location.protocol}//${location.host}${location.pathname}?`+ws(t)}function Bt(){return Ke(location.search)}function pr(t,e){let i=Bt();return i[t]=e,cr(i)}function dr(t,e){let i=Bt();return i[t]?i[t]:e}class Hi{constructor(e){e===void 0&&(e=location.toString());let i=e.indexOf("?"),n=i>0?e.substr(i+1):"";this.front=i>0?e.substr(0,i):e,this.queryString=Ke(n)}get search(){let e=ws(this.queryString);return e?"?"+e:""}set search(e){this.queryString=Ke(e)}toString(){let e=this.search;return this.front+e}getParameter(e,i){return this.queryString[e]?this.queryString[e]:i}setParameter(e,i){return this.queryString[e]=i,this}}function je(t,e=!1){let i=document.cookie?document.cookie.split(";"):[],n=/(%[0-9A-Z]{2})+/g,s;for(let r of i){let o=r.split("="),l=o.slice(1).join("=");l.charAt(0)==='"'&&(l=l.slice(1,-1));try{let c=o[0].replace(n,decodeURIComponent);if(e&&(c=c.replace(/ +/,"")),l=l.replace(n,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch{}if(t===c){s=l;break}t||(s[c]=l)}catch{}}return s}function fr(t,e){let i=new Date;i.setTime(i.getTime()+365*24*60*60*1e3),document.cookie=t+"="+e+";expires="+i.toUTCString()+";path=/"}const X=class X{};X.English="en",X.Chinese="cs",X.Vietnamese="vn",X.Thai="th",X.Khmer="kh",X.Indonesian="id",X.Korean="kr",X.Japanese="jp",X.Turkish="tr",X.Portuguese="pt",X.Hindi="hi";let P=X;class mr{constructor(){this.LANGUAGE=P.English,this.HUDLANG=P.English}initialize(){return new Promise((e,i)=>{this.LANGUAGE=this.tryGetParameter("lang",P.English),this.DOMAIN=fs(location.hostname),e()})}getHudLanguage(){return this.hudLang&&(this.HUDLANG=this.hudLang.indexOf(this.LANGUAGE)>-1?this.LANGUAGE:P.English),this.HUDLANG}tryGetParameter(e,i){return A(this.queryString)&&(this.queryString=Bt()),this.queryString[e]?this.queryString[e]:i}resolve(e,i){let n=Ds(this,i);for(let s in n)n[s]&&Ki(n[s])&&(e=e.replace(`{{${s}}}`,n[s]));return e}printEngineVersion(){this.engineVersion&&console.log("Guitarist "+this.engineVersion)}applyTimeVersion(e){return e+"?v="+(this.publishTime||Date.now().toString())}}class gr extends mr{constructor(){super(...arguments),this.HELP_URL=null}initialize(){if(this.configureLanguage(),this.configureFunplay(),this.configureToken(),this.configureDomain(),this.BRAND=this.tryGetParameter("brand"),this.OPERATOR=this.tryGetParameter("op"),this.AUTHENTICATED=this.tryGetParameter("auth","0"),this.HIDE_LOBBY=this.tryGetParameter("hidelobby","0"),this.HIDE_FULLSCREEN=this.tryGetParameter("hidefullscreen"),this.CHEAT=this.tryGetParameter("cheat"),this.CURRENCY_SYMBOL=this.tryGetParameter("currencySymbol","0")==="1",this.AUTHENTICATED==="1"){let e=B();e.accountName=e.displayName=this.tryGetParameter("username")}return this.loadUrlsConfig(this.tryGetParameter("config")).then(e=>{this.LOGIN_URL=e.loginURL,this.HOME_URL=e.homeURL,this.FUNDS_URL=e.fundsURL,this.LOBBY_URL=e.lobbyURL,this.LIVECHAT_URL=e.livechatURL,this.HIDE_LOBBY=e.hidelobby,e.currencySymbol&&(this.CURRENCY_SYMBOL=!0)}).then(()=>this.verify())}initActitvityTimer(){this.activeTimeout=0,this.inactiveTimeout=0;let e=D.json("configcommons");e&&(e.activeTimeout&&(this.activeTimeout=e.activeTimeout,this.startActivityTimer()),e.inactiveTimeout&&(this.inactiveTimeout=e.inactiveTimeout,this.startInactivityTimer()))}startInactivityTimer(){this.inactiveTimer=this.startTimer(this.inactiveTimer,this.inactiveTimeout,()=>this.inactivityTimesUp())}startActivityTimer(){this.activeTimer=this.startTimer(this.activeTimer,this.activeTimeout,()=>this.activityTimesUp()),this.sessionTimestamp=ke(),this.sessionUserBalance=B().balance}startTimer(e,i,n){return i>0&&(this.clearTimer(e),e=setTimeout(()=>n(),i*6e4)),e}clearTimer(e){e&&clearTimeout(e)}activityTimesUp(){if(L.current.checkExtendActivityTimesUp){this.isActivityTimesUp=!0;return}this.isActivityTimesUp=!1;let e=B(),i=ee("err_998"),n=on(ke()-this.sessionTimestamp),s=te(n.getUTCHours(),2)+":"+te(n.getUTCMinutes(),2)+":"+te(n.getUTCSeconds(),2),r=e.balance.minus(this.sessionUserBalance),o=r.lt(0)?ee("youvelost"):ee("youvewon");o+=e.currency+" "+ss(ae(r.abs())),i=i.replace("%time%",s).replace("%winlose%",o),qe(i,"998",!0)}inactivityTimesUp(){let e=ee("err_999").replace("%s%",this.inactiveTimeout);qe(e,"999",!0)}configureLanguage(){let e=this.tryGetParameter("lang",P.English)||je("lang");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e=P.English;break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e=P.Chinese;break;case e.indexOf("th")>=0:e=P.Thai;break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e=P.Vietnamese;break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e=P.Korean;break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e=P.Khmer;break;case e.indexOf("id")>=0:e=P.Indonesian;break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e=P.Japanese;break;case e.indexOf("tr")>=0:e=P.Turkish;break;case e.indexOf("pt")>=0:case e.indexOf("br")>=0:e=P.Portuguese;break;case e.indexOf("hi")>=0:case e.indexOf("in")>=0:e=P.Hindi;break;default:e=P.English}this.LANGUAGE=e}configureFunplay(){this.ANONYMOUS=this.FUNPLAY=this.tryGetParameter("fun","1")==="1"}configureToken(){this.TOKEN=this.tryGetParameter("token")||this.tryGetParameter("s")||je("g")||je("s")}configureDomain(){this.DOMAIN_FULL=location.hostname,this.DOMAIN=fs(this.DOMAIN_FULL),this.URL_DOMAIN=this.DOMAIN,this.DOMAIN==="cloudfront.net"&&(this.DOMAIN="gpiops.com"),this.DOMAIN=this.tryGetParameter("domainlink",this.DOMAIN)}loadUrlsConfig(e){let i={loginURL:this.tryGetParameter("loginURL"),homeURL:this.tryGetParameter("homeURL"),fundsURL:this.tryGetParameter("fundsURL")||this.tryGetParameter("FundURL"),lobbyURL:this.tryGetParameter("lobbyURL"),livechatURL:this.tryGetParameter("livechatURL"),hidelobby:this.tryGetParameter("hidelobby","0"),currencySymbol:this.tryGetParameter("currencySymbol","0")==="1"};return A(e)?new Promise((n,s)=>{n(i)}):ds(e).then(n=>{let s;try{s=JSON.parse(n.responseText)}catch{return console.warn("error in parse config.json"),i}return{loginURL:this.applyDomain(s.loginURL),homeURL:this.applyDomain(s.homeURL),fundsURL:this.applyDomain(s.fundsURL),lobbyURL:this.applyDomain(s.lobbyURL),livechatURL:this.applyDomain(s.livechatURL),hidelobby:s.hidelobby?String(s.hidelobby):"0",currencySymbol:s.currencySymbol}}).catch(n=>(console.warn("error in get config.json"),i))}applyDomain(e){if(e)return e.replace("[%%DOMAINLINK%%]",this.DOMAIN).replace("[%%URLDOMAIN%%]",this.URL_DOMAIN).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL)}verify(){return new Promise((e,i)=>{A(this.OPERATOR)&&i("The operator parameter is missing!"),!this.FUNPLAY&&A(this.TOKEN)?window.location.href=this.loginUrl:e()})}getDefaultLoginURL(){if(this.OPERATOR==="w88"&&this.defaultLoginURL)return this.defaultLoginURL}get loginUrl(){let e=this.applyDomain(this.LOGIN_URL||this.getDefaultLoginURL());return e?`${e}?url=`+encodeURIComponent(pr("fun","0")):this.realLobbyUrl}get hasLobbyUrl(){return this.LOBBY_URL||this.defaultLobbyUrl}get realLobbyUrl(){if(this._realLobbyUrl===void 0){if(this.HIDE_LOBBY==="1")return this._realLobbyUrl="",this._realLobbyUrl;let e=this.applyDomain(this.LOBBY_URL||"//"+this.defaultLobbyUrl),i=new Hi(e);i.search||(i.search=location.search),!this.FUNPLAY&&!A(this.USER_ID)&&(dr("s")?i.setParameter("s",this.USER_ID):i.setParameter("token",this.USER_ID)),this._realLobbyUrl=i.toString()}return this._realLobbyUrl}get realPlayUrl(){let e=new Hi;return e.setParameter("fun","0"),this.TOKEN?e.toString():this.loginUrl}get livechatUrl(){let e=B();return this.LIVECHAT_URL?this.applyDomain(this.LIVECHAT_URL).replace("[%%MEMBERID%%]",this.FUNPLAY?"0":e.accountName).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL).replace("[%%LANG%%]",this.LANGUAGE):""}get homeURL(){return this.applyDomain(this.HOME_URL||"//"+this.homeUrl)}get helpUrl(){if(this.HELP_URL===null){this.HELP_URL="";let e=D.json("configcommons");if(e&&e.help){let i=e.help.url,n=e.help.games[this.ID];i&&n&&(this.HELP_URL=i.replace("[%%GAME%%]",n))}this.HELP_URL=this.HELP_URL.replace("[%%LANG%%]",this.LANGUAGE)}return this.applyDomain(this.HELP_URL)}get langFullName(){return rn(["en-us","id-id","ja-jp","km-kh","ko-kr","pt-br","th-th","tr-tr","vi-vn","zh-cn"],e=>e.indexOf(this.LANGUAGE)!==-1||this.LANGUAGE==="cs"&&e==="zh-cn")}get historyUrlDomain(){let e=D.json("configcommons");return this.applyDomain(e.historyUrl)}get historyUrl(){let e=this.historyVersion?`&ver=${this.historyVersion}`:"";return this.historyUrlDomain+"?key="+this.TOKEN+"&lang="+this.langFullName+e+"&gID="+this.gID}get hasFeatures(){return!(this.features&&this.features==="false")}get miniFooter(){return this.tryGetParameter("p")==="mini"&&this.tryGetParameter("footer")==="1"}get isWinWays(){return this.winWays&&this.winWays!==""}get isMultiplierDefaultLastIndex(){return this.multiplierDefaultIndex&&this.multiplierDefaultIndex==="last"}get multiplierAsCreditBet(){return this.creditBet==="true"}get isVibrationActivated(){return this.vibrationActivated==="true"}get mockFroundToggle(){return this.tryGetParameter("mfr")==="1"&&this.FUNPLAY&&B().demo==="1"}checkActivityTimesUp(){this.isActivityTimesUp&&this.activityTimesUp()}}class vr extends gr{constructor(){super(),this.NUM_OF_ROW=3,this.NUM_OF_COLUMN=5,this.PAYLINES=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,0,0],[2,2,1,2,2],[1,2,2,2,1],[1,0,0,0,1],[1,0,1,0,1],[1,2,1,2,1],[0,1,0,1,0],[2,1,2,1,2],[1,1,0,1,1],[1,1,2,1,1],[0,1,1,1,0],[2,1,1,1,2],[0,1,2,2,2],[2,1,0,0,0],[0,2,0,2,0],[2,0,2,0,2],[0,2,2,2,0],[2,0,0,0,2],[0,0,2,0,0],[2,2,0,2,2],[0,2,1,0,2],[2,0,1,2,0],[0,0,1,2,2],[2,2,1,0,0],[1,0,2,0,1],[1,2,0,2,1],[1,1,1,1,0],[1,1,1,1,2],[0,0,0,0,1],[2,2,2,2,1],[0,1,2,1,2],[2,1,0,1,0],[2,2,2,2,0],[0,0,0,0,2],[0,1,2,1,1],[2,1,0,1,1],[0,0,1,2,1],[2,2,1,0,1],[1,2,2,2,0],[1,0,0,0,2],[0,1,1,1,2],[2,1,1,1,0],[1,1,0,1,0],[1,1,2,1,2],[0,0,0,1,2]]}}function br(t,e,i){return t<e?e:t>i?i:t}var yr=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,xr=(t,e,i,n)=>{for(var s=n>1?void 0:n?wr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&yr(e,i,s),s};let Je=class extends At{constructor(t){super(),this.options=t}activate(){this.deactivate();let t=y.get("soundService");this.playback=this.options.bgm?t.playBgm(this.options.name):t.play(this.options.name,this.options.channel,!1,this.options.softBgm),H(this.playback)&&t.setVolume(this.options.volume,this.playback.soundId)}deactivate(){!this.options.bgm&&H(this.playback)&&(y.get("soundService").stop(this.playback.soundId),this.playback=void 0)}static create(t,e){let i=g(t,"auto"),n=new Je({name:mi(t),volume:br(a(t,"volume",1),0,1),channel:u(t,"channel","default"),bgm:g(t,"bgm",!1),softBgm:g(t,"softbgm",!1)});return i&&n.activate(),n}};Je=xr([p({tag:"sound"})],Je);function ue(t,e,i){let n=new t;return _i(n,e,i)}function _i(t,e,i){return k(e,{scene:i.scene,parent:t,context:i.context}),N(t,e,i),t}var Sr=Object.defineProperty,Pr=Object.getOwnPropertyDescriptor,_r=(t,e,i,n)=>{for(var s=n>1?void 0:n?Pr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Sr(e,i,s),s};let Qe=class extends S{static create(t,e){let n=y.get("widgetService").get(q(t,"name"),e);return _i(n,t,e)}};Qe=_r([p({tag:"widget"})],Qe);class Or{constructor(){this.log=!1}initialize(){Ke(location.search).log==="1"&&(this.log=!0)}track(e){if(this.log)switch(e.type){case j.Request:Ir(e.data);break;case j.Response:Er(e.data);break;case j.Exception:Cr(e.data)}}}function Ir(t){console.log(t.method,t.url)}function Er(t){console.log(t.data)}function Cr(t){console.log("Error: ",t.description,`
`,t.extraInfo)}var Lr=Object.defineProperty,Tr=Object.getOwnPropertyDescriptor,Ar=(t,e,i,n)=>{for(var s=n>1?void 0:n?Tr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Lr(e,i,s),s};let Ze=class extends S{constructor(){super(...arguments),this.ccy=""}show(t,e,i){this.label.value=this.ccy+t.toFixed(2),e&&(this.x=e.x+(We()-this.width)/2,this.y=e.y+we()/4),i.addChild(this),this.visible=t>0&&e!==void 0}clear(){}static create(t,e){let i=ue(Ze,t,e);return i.ccy=ns(B().currency,I().CURRENCY_SYMBOL),i}};Ze=Ar([p({tag:"multiplier"})],Ze);var Dr=Object.defineProperty,Br=Object.getOwnPropertyDescriptor,Nr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Br(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Dr(e,i,s),s};let G=class extends S{static create(t,e){return ue(G,t,e)}};G=Nr([p({tag:"layer"})],G);var Rr=Object.defineProperty,Mr=Object.getOwnPropertyDescriptor,Ur=(t,e,i,n)=>{for(var s=n>1?void 0:n?Mr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Rr(e,i,s),s};const Wr={linear:TWEEN.Interpolation.Linear,curve:TWEEN.Interpolation.CatmullRom};function $r(t){return{color:a(t,"color",0),colorRight:a(t,"colorRight",0),width:a(t,"width",1),border:a(t,"border",0),borderColor:a(t,"borderColor",0),borderColorRight:a(t,"borderColorRight",-1),borderBlur:a(t,"borderBlur",0),blur:a(t,"blur",0),blendMode:u(t,"blendMode"),portion:a(t,"portion",1.5),emitFrequency:a(t,"emitFrequency",1),emitSpeed:a(t,"emitSpeed",0),emitEndTime:a(t,"emitEndTime",0),emitOnTop:g(t,"emitOnTop",!1),direction:u(t,"direction","left"),lineOffsets:a(t,"lineOffsets",0),showAllLines:g(t,"showAllLines",!1),singleLine:g(t,"singleLine",!1),fade:a(t,"fade",0),alpha:a(t,"alpha",1),threshold:a(t,"threshold",1),segments:a(t,"segments",5),outline:a(t,"outline",1),outlineColor:a(t,"outlineColor",0),outlineBlur:a(t,"outlineBlur",1),glowColor:a(t,"glowColor",0),glowWidth:a(t,"glowWidth",1),glowBlur:a(t,"glowBlur",1),glowAlpha:a(t,"glowAlpha",1),interpolationFunc:Wr[u(t,"lineType","linear")]}}function Vr(t){return{x:a(t,"x",0),y:a(t,"y",0),width:a(t,"width",xi()*(We()+vs())),height:a(t,"height",bs()*we()),radius:a(t,"radius",0),color:a(t,"color",0),alpha:a(t,"alpha",.7)}}const de=class de extends S{constructor(e){super(),this.lines=[],this.symbolAnimGap=0,this.animTimers=[],this.numWinningCols=0,this.symbolService=y.get("symbolService"),this.options=e,this.btmContent=new G,this.addChild(this.btmContent),this.drawLines(),this.content=new G,this.addChild(this.content),this.initSymbolPrefabs(),this.hideLines()}initSymbolPrefabs(){this.symbolsPrefabs=[];for(let e=0;e<I().NUM_OF_COLUMN;e++){let i=[];for(let n=0;n<I().NUM_OF_ROW;n++)i.push(void 0);this.symbolsPrefabs.push(i)}}drawLines(){}showLines(e,i=!1,n=!0){this.hideLines(),this.hideSymbols(),this.symbols=[],this.animTimers=[];let s;for(let o of e)this.winningLine=o,this.showLine(o.index-1),s=o.animation,this.setupSymbols(o);this.options.fade&&Re(this.lineContent,this.options.fade);let r=E.get(de.WINLINE_SYMBOLS_ADJUSTMENT);r&&r(this),n&&this.showSymbols(s,i)}redrawLines(){let e=this.getChildIndex(this.lineContent);this.removeChild(this.lineContent),this.lineContent.removeChildren(),this.lines=[],this.createJoins(),this.drawLines(),this.hideLines(),this.addChildAt(this.lineContent,e)}winlinesLoop(){}createJoins(){}showLine(e){let i=this.lines[e];i&&(i.visible=!0,i.activate())}setupSymbols(e){let i=E.get("winLineSetupSymbols");if(i){i(this,e);return}for(let n=0;n<e.positions.length;n++){let[s,r]=e.positions[n],o=this.symbolsPrefabs[s][r];if(o===void 0){let l=this.reels.getRegisterPoint(s,r);o=this.reels.getSymbol(s,r).clone(),o.col=s,o.row=r,o.x=l.x,o.y=l.y;let c=this.reels.getSymbolPos(s,r);for(let h of c)this.symbolsPrefabs[h.x][h.y]=o}this.symbols.indexOf(o)===-1&&this.symbols.push(o)}}showSymbols(e,i=!1){let n=r=>{r.reference.visible=!1,r.animate(e,i);let o=E.get("winLineSymbolStrategy");o?o({view:r.content})?this.content.addChild(r):this.btmContent.addChild(r):this.content.addChild(r),r.activate()},s=this.getSymbolAnimTimers();this.symbols.forEach(r=>{if(this.symbolAnimGap>0){let o=this.symbolAnimGap*s.indexOf(r.col);o>0?this.animTimers.push(setTimeout(()=>n(r),o)):n(r)}else n(r)})}getSymbolAnimTimers(){let e=[];if(this.symbolAnimGap>0){for(let i=0;i<this.symbols.length;i++){let n=this.symbols[i].col;e.indexOf(n)===-1&&e.push(n)}e.sort()}return this.numWinningCols=e.length,e}getRightMostSymbol(){let e=0,i;for(let n=0;n<this.symbols.length;n++)e<this.symbols[n].col&&(i=this.symbols[n]);return i}removeContent(){for(let e=0;e<this.animTimers.length;e++)clearTimeout(this.animTimers[e]);this.content.removeChildren(),this.btmContent.removeChildren()}hideLines(){for(let e of this.lines)e.visible=!1,e.deactivate()}hideSymbols(){this.symbols&&this.symbols.forEach(e=>e.reference.visible=!0),this.removeContent()}clear(){let e=[];for(let i=0;i<I().NUM_OF_COLUMN;i++)for(let n=0;n<I().NUM_OF_ROW;n++){let s=this.symbolsPrefabs[i][n];s&&e.indexOf(s)===-1&&(e.push(s),s.reference.visible=!0,this.symbolService.free(s))}this.initSymbolPrefabs(),this.removeContent(),this.hideLines(),this.symbols=void 0}resetSymbolPrefabs(){this.initSymbolPrefabs()}};de.WINLINE_SHOW_ALL="all",de.WINLINE_SHOW_ALL_ONCE="allonly",de.WINLINE_SYMBOLS_ADJUSTMENT="winLineSymbolsAdjustment";let le=de,R=class extends S{constructor(e){super(),this.options=e;let i=e.querySelector("multiplier");this.showMask=g(e,"mask");let n=E.get("multiplier");i&&(this.multiplier=n?n(i,{}):Ze.create(i,{})),this.animationTimer=a(e,"timer",-1),this.mode=u(e,"mode"),this.animatedAll=g(e,"animatedAll",!0),this.animationAllTimer=a(e,"animationAllTimer",-1),this.showMask&&(this.maskOptions=Vr(e.querySelector("mask"))),this.isWinningLine=!1}show(e,i=!1){this.forceEnd=!1,this.clear(),this.winlineSound=!1,this.winLines=e,this.silent=i,this.currentWinlineLoop=0,this.addChild(this.paylines),this.hasWinLines?(this.emit(R.EVENT_WIN_PANEL_SHOW),this.addMask(),this.displayNextLine(),this.emit(R.EVENT_START)):(this.silent||this.emit(R.EVENT_LOOP),this.paylines.winlinesLoop())}close(){this.isWinningLine&&this.emit(R.EVENT_WIN_PANEL_CLOSE),this.isWinningLine=!1,this.clear()}addMask(){if(this.showMask&&this.maskSprite===void 0){let e=Xt(this.maskOptions.width,this.maskOptions.height,this.maskOptions.radius,this.maskOptions.color);e.position.set(this.maskOptions.x,this.maskOptions.y),e.alpha=this.maskOptions.alpha,this.addChildAt(e,0)}else this.showMask&&this.maskSprite&&(this.addChildAt(this.maskSprite,0),this.maskSprite.visible=!0)}clear(){this.maskSprite&&(this.maskSprite.visible=!1),this.multiplier&&this.multiplier.clear(),this.currentLineIndex=this.mode===le.WINLINE_SHOW_ALL?-2:-1,this.paylines.clear(),this.clearTimer(),this.removeChildren()}get hasWinLines(){return this.winLines&&this.winLines.length>0}get currentWinLine(){return this.winLines[this.currentLineIndex]}displayNextLine(){if(this.currentLineIndex++,this.currentLineIndex===this.winLines.length||this.mode===le.WINLINE_SHOW_ALL&&this.currentLineIndex===0||this.mode===le.WINLINE_SHOW_ALL_ONCE&&this.currentLineIndex>0){if(this.currentLineIndex=0,this.winlineSound=!1,this.silent||this.emit(R.EVENT_LOOP),this.paylines.winlinesLoop(),this.forceEnd){this.close(),this.emit(R.EVENT_END);return}if(this.winlinesLoop>0){if(this.currentWinlineLoop++,this.currentWinlineLoop>=this.winlinesLoop){this.forceEnd=!0,this.close(),this.emit(R.EVENT_END);return}this.winlineSound=this.symbolSoundLoop>0&&this.currentWinlineLoop>=this.symbolSoundLoop}}let e=this.currentLineIndex===-1||this.mode===le.WINLINE_SHOW_ALL_ONCE,i=e?this.winLines:[this.currentWinLine],n=!0;e&&(n=this.animatedAll),i.length===1&&i[0].index===0&&(n=!0),this.paylines.showLines(i,this.winlineSound,n),this.isWinningLine=!0,this.emit(R.EVENT_WINLINE,i);let s=this.updateMultiplier(e);this.animationTimer>0?(this.clearTimer(),this.startTimer(e||i.length===1&&i[0].index===0)):s.content.once("animationComplete",()=>this.displayNextLine())}updateMultiplier(e=!1){if(e)return this.paylines.symbols[0];let i=this.currentWinLine,n=y.get("multiplierService"),s=n?n.getSymbol(this.paylines.symbols):this.paylines.symbols[0];return this.multiplier&&this.multiplier.show(i.win,s,this),s}getWinLineHighestSymbol(e,i=-1){let n=-1;for(let s=0;s<e.positions.length;s++){let[r,o]=e.positions[s],l=Number(this.paylines.reels.getSymbol(r,o).index);n<l&&l!=i&&(n=l)}return n===-1?i:n}clearTimer(){clearTimeout(this.timer)}startTimer(e){let i=this.animationTimer+(this.paylines.numWinningCols-1)*this.paylines.symbolAnimGap;e&&this.animationAllTimer>=0&&(i=this.animationAllTimer),this.timer=setTimeout(()=>{this.displayNextLine()},i)}static create(e,i){let n=Fr(R,e,i);return V(e,(s,r)=>{s.nodeName==="mask"&&(u(s,"render")==="canvas"&&M.type===PIXI.RENDERER_TYPE.CANVAS?(n.maskSprite=Xt(n.maskOptions.width,n.maskOptions.height,n.maskOptions.radius,n.maskOptions.color),n.maskSprite.position.set(n.maskOptions.x,n.maskOptions.y),n.maskSprite.alpha=n.maskOptions.alpha):u(s,"render")==="webgl"&&M.type===PIXI.RENDERER_TYPE.WEBGL&&(n.maskSprite=new PIXI.Sprite(D.resolve(u(s,"src"))),n.maskSprite.position.set(a(s,"x"),a(s,"y")),n.maskSprite.scale.set(a(s,"scale",1)),n.maskSprite.alpha=n.maskOptions.alpha))}),n}};R.EVENT_LOOP="loop";R.EVENT_WIN_PANEL_SHOW="show";R.EVENT_WIN_PANEL_CLOSE="stopped";R.EVENT_WINLINE="winline";R.EVENT_START="start";R.EVENT_END="end";R=Ur([p({tag:"winPanel"})],R);function Fr(t,e,i){let n=y.get("winLineService"),s=L.current.getComponentByTag("reels");s||(s=L.current.getComponentByID("reels"));let r=new t(e);return r.paylines=n.generate(s.reels),r.paylines.reels=s,r.paylines.symbolAnimGap=a(e,"symbolAnimGap",0),r.winlinesLoop=a(e,"winlinesLoop",5),r.symbolSoundLoop=a(e,"symbolSoundLoop",2),r.x=s.x,r.y=s.y,N(r,e,i),r}var jr=Object.defineProperty,Hr=Object.getOwnPropertyDescriptor,Gr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Hr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&jr(e,i,s),s};let Te=class extends S{constructor(t,e,i,n,s,r,o=-1,l=-1){super(),this.content=new PIXI.Graphics,this.content.beginFill(i),s&&o<0&&l<0&&this.content.lineStyle(s,r),n?this.content.drawRoundedRect(0,0,t,e,n):this.content.drawRect(0,0,t,e),this.drawShadow(s,o,t,e),this.drawShadow(s,l,t,e,t,e),M.type!==PIXI.RENDERER_TYPE.WEBGL&&this.content.generateCanvasTexture?(this.canvasContent=new PIXI.Sprite(this.content.generateCanvasTexture(1,1)),this.addChild(this.canvasContent)):this.addChild(this.content)}set tint(t){t<0||(this.canvasContent?this.canvasContent.tint=t:this.content.tint=t)}drawShadow(t,e,i,n,s=0,r=0){e<0||(this.content.lineStyle(t,e),this.content.moveTo(s,r),this.content.lineTo(i,0),this.content.moveTo(s,r),this.content.lineTo(0,n))}static create(t,e){ie(t,"color",d.resolve(u(t,"color"))),ie(t,"innerShadow",d.resolve(u(t,"innerShadow")));let i=new Te(a(t,"width",0),a(t,"height",0),a(t,"color",0),a(t,"radius",0),a(t,"border",0),a(t,"bcolor",0),a(t,"innerShadow",-1),a(t,"dropShadow",-1));return i.tint=a(t,"tint",-1),N(i,t,e),k(t,{scene:e.scene,parent:i,context:e.context}),i}};Te=Gr([p({tag:"rectangle"})],Te);var kr=Object.defineProperty,Xr=Object.getOwnPropertyDescriptor,Yr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Xr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&kr(e,i,s),s};let Ae=class extends S{constructor(t,e,i,n){super(),this.content=new PIXI.Graphics,this.content.beginFill(e),i&&this.content.lineStyle(i,n),this.content.drawPolygon(t),this.addChild(this.content)}static create(t,e){let i=new Ae(K(t,"path"),a(t,"color",0),a(t,"border",0),a(t,"bcolor",0));return N(i,t,e),k(t,{scene:e.scene,parent:i,context:e.context}),i}};Ae=Yr([p({tag:"polygon"})],Ae);var qr=Object.defineProperty,zr=Object.getOwnPropertyDescriptor,Kr=(t,e,i,n)=>{for(var s=n>1?void 0:n?zr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&qr(e,i,s),s};let Jt=class extends F{configure(t){this.options=t}translate(t){this.dict===void 0&&this.initDict();let e=Ks(t);for(let i=0;i<e.length;i++){let n=e[i];t=t.replace(`{{${n}}}`,this.dict[n])}return t}initDict(){if(this.dict!==void 0)return;let t=u(this.options,"resource").split(",");for(let e=0;e<t.length;e++)if(this.dict===void 0)this.dict=D.json(t[e]);else{let i=D.json(t[e]);for(let n in i)this.dict[n]=i[n]}}};Jt=Kr([p({tag:"textService",category:"service"})],Jt);var Jr=Object.defineProperty,Qr=Object.getOwnPropertyDescriptor,Zr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Qr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Jr(e,i,s),s};let Qt=class extends F{configure(t){this.options=t}getSymbol(t){if(t.length===0)return;let e=u(this.options,"mode","last");if(e==="last")return Ut(t);if(e==="middle"){let i=t.length,n=Math.floor(i/2);return i%2==0&&Ut(t).col==xi()-1&&(n-=1),t[n]}else return e==="third"?t.length>2?t[2]:Ut(t):t[0]}};Qt=Zr([p({tag:"multiplierService",category:"service"})],Qt);var eo=Object.defineProperty,to=Object.getOwnPropertyDescriptor,io=(t,e,i,n)=>{for(var s=n>1?void 0:n?to(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&eo(e,i,s),s};let Zt=class extends F{constructor(){super(...arguments),this.adjustment={size:0,x:0,y:0}}configure(t){this.options=t,this.adjustment.x=a(t,"x",0),this.adjustment.y=a(t,"y",0),this.adjustment.size=a(t,"size",0)}};Zt=io([p({tag:"fontService",category:"service"})],Zt);var so=Object.defineProperty,no=Object.getOwnPropertyDescriptor,ro=(t,e,i,n)=>{for(var s=n>1?void 0:n?no(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&so(e,i,s),s};let ei=class extends F{startup(){if(d){let t=d.LANGUAGE;[P.English,P.Japanese,P.Chinese].indexOf(t)===-1&&(t=P.English);let e=`assets/icons/icon192.${t}.jpg`;this.addLink("apple-touch-icon",e),this.addLink("apple-touch-startup-image",e)}}setTitle(){document.title=Dt("{{gametitle}}")}addLink(t,e){var i=document.createElement("link");i.rel=t,i.href=e,document.head.appendChild(i)}};ei=ro([p({tag:"i18nService",category:"service"})],ei);var oo=Object.defineProperty,ao=Object.getOwnPropertyDescriptor,xs=(t,e,i,n)=>{for(var s=n>1?void 0:n?ao(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&oo(e,i,s),s};let et=class extends At{constructor(t){super(),this.tween=t}activate(){this.active!==!0&&(this.tween.start(),this.active=!0)}deactivate(){this.active!==!1&&(this.tween.stop(),this.active=!1)}static create(t,e){let i=mi(t),n=y.get("tweenService");if(n&&e.parent instanceof PIXI.DisplayObject){let s=new et(n.create(i,e.parent,t));return g(t,"auto")&&s.activate(),s}}};et=xs([p({tag:"tween"})],et);let ti=class extends F{constructor(){super(...arguments),this.tweens={}}register(t,e){this.tweens[t]=e}create(t,e,i){return this.tweens[t](e,i)}startup(){PIXI.Ticker.shared.add(this.update)}shutdown(){PIXI.Ticker.shared.remove(this.update)}update(){TWEEN.update()}};ti=xs([p({tag:"tweenService",category:"service"})],ti);var lo=Object.defineProperty,ho=Object.getOwnPropertyDescriptor,uo=(t,e,i,n)=>{for(var s=n>1?void 0:n?ho(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&lo(e,i,s),s};let ii=class extends F{configure(t){this.options=t}generate(){return co(this.options,po)}};ii=uo([p({tag:"winLineService",category:"service"})],ii);function co(t,e){E.get("reels");let i=We(),n=we(),r=I().PAYLINES,o=r.length,l=$r(t),c=[];for(let h=0;h<o;h++){let f=r[h],x=f.length,m=[];for(let O=0;O<x;O++){let v=f[O],Es={x:Ss(O)+i/2,y:Ps(v)+n/2};m.push(Es)}m.length>=2&&(m.unshift({x:m[0].x-i/2,y:m[0].y}),m.push({x:m[m.length-1].x+i/2,y:m[m.length-1].y})),c.push(m)}return l.joints=c,new e(l)}class po extends le{constructor(e){super(e),e.emitOnTop&&this.addChild(this.lineContent)}drawLines(){this.lineContent=new G,this.addChild(this.lineContent);for(let e of this.options.joints){let i=this.drawLine(e);this.lines.push(i),this.lineContent.addChild(i)}}drawLine(e){let i=new G;if(this.options.border>0){let s=this.joinLines(e,2*this.options.border+this.options.width,this.options.borderColor);if(i.addChild(s),this.options.borderBlur)if(M.type===PIXI.RENDERER_TYPE.WEBGL){let r=new PIXI.filters.BlurFilter;r.blur=this.options.borderBlur,s.filters=[r]}else s.alpha=this.options.borderBlur/80}let n=this.joinLines(e,this.options.width,this.options.color);return i.addChild(n),i}createJoins(){E.get("reels");let e=We(),i=we(),s=I().PAYLINES,r=s.length,o=[];for(let l=0;l<r;l++){let c=s[l],h=[];for(let f=0;f<c.length;f++){let x=c[f],m={x:Ss(f)+e/2,y:Ps(x)+i/2};h.push(m)}h.length>=2&&(h.unshift({x:h[0].x-e/2,y:h[0].y}),h.push({x:h[h.length-1].x+e/2,y:h[h.length-1].y})),o.push(h)}this.options.joints=o}joinLines(e,i,n){let s=new PIXI.Graphics,r=e.length;if(s.lineStyle(i,n),M.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.blur>0){let o=new PIXI.filters.BlurFilter;o.blur=this.options.blur,s.filters=[o]}this.options.blendMode&&(this.options.blendMode==="screen"?s.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(s.blendMode=PIXI.BLEND_MODES.ADD)),this.options.alpha!==void 0&&this.options.alpha!==null&&(s.alpha=this.options.alpha);for(let o=0;o<r;o++){let l=e[o];o===0?s.moveTo(l.x,l.y):s.lineTo(l.x,l.y)}return s}}function Ss(t){return t*(We()+vs())}function Ps(t){return t*(we()+kn())}let He=["VisibilityState","visibilitychange","Hidden"],Ce,Oi=[],Ii=[];function fo(){if(!Ce){let t=["webkit","ms","o","moz","khtml"];for(let e of t)if(e+He[2]in document)return Ce=e,Ce}}function Ei(t){return Ce==null?He[t].substring(0,1).toLowerCase()+He[t].substring(1):Ce+He[t]}function mo(t){return document[Ei(t)]}function _s(t){let e=t?Oi:Ii,i=e.length;for(;i--;)e[i]()}function Ft(){_s(!0)}function jt(){_s(!1)}function go(){try{if(vo())document.addEventListener(Ei(1),()=>{mo(2)?jt():Ft()},!0);else if(document.addEventListener)window.addEventListener("focus",Ft,!0),window.addEventListener("blur",jt,!0);else{let t=document.attachEvent;t&&(t("onfocusin",Ft),t("onfocusout",jt))}}catch(t){console.error(t)}}function vo(){return Ei(2)in document}function bo(t){Oi.push(t)}function yo(t){Ii.push(t)}function wo(){Oi=[],Ii=[]}function xo(){fo(),go()}class So{constructor(e=1,i="stage"){this.imageUrl="assets/swipeup.png",this.enabled=!0,this.uc=!1,this.dolfin=!1,this.chromeIOS=!1,this.iphone=!1,this.qq=!1,this.ios=!1,this.ipad=!1,this.safari=!1,this.vivonative=!1,this.initHeight=-1,this.canvasName=i,this.resolution=e;let n=window.navigator.userAgent;this.canvas=document.getElementById(i),this.ios=n.toLowerCase().indexOf("mac")>-1,this.ipad=n.toLowerCase().indexOf("ipad")>-1,this.skipper=n.toLowerCase().indexOf("qqbrowser")>-1||n.toLowerCase().indexOf("sony")&&n.toLowerCase().indexOf("ucbrowser")>-1,this.uc=n.toLowerCase().indexOf("ucbrowser")>-1,this.qq=this.isQQ(n),this.chromeIOS=n.toLowerCase().indexOf("crios")>-1,this.iphone=n.toLowerCase().indexOf("iphone")>-1,this.vivonative=n.toLowerCase().indexOf("vivobrowser")>-1;let s=/Chrome\/([0-9.]+)/.exec(n),r=null;s&&(r=/Chrome\/([0-9.]+)/.exec(n)[1]),this.dolfin=n.toLowerCase().indexOf("dolfin")>-1||r&&Number(r.split(".")[0])<34}isQQ(e){let i=e.toLowerCase().match(/chrom(e|ium)\/([0-9]+)\./);i=i?parseInt(i[2],10):!1;let n=e.match(/Mobile\/\w{5,}\sQQ\/(\d+[\.\d]+)/),s=window.innerWidth<780;return!!((i<45||n)&&s)}get isLandscape(){return window.innerHeight<=window.innerWidth}get isFullScreen(){let e=10;if(this.isLandscape||(e=8,this.skipper&&(e=4)),"standalone"in window.navigator&&window.navigator.standalone)return this.enabled=!1,!0;let i=Math.abs(this.canvas.width/this.resolution-window.innerWidth)<window.innerWidth/e,n=document.webkitCurrentFullScreenElement&&typeof document.webkitCurrentFullScreenElement<"u"||document.fullscreenElement!==null&&document.fullscreenElement!==void 0||document.mozFullScreenElement!==null&&document.mozFullScreenElement!==void 0||document.webkitFullscreenElement!==null&&document.webkitFullscreenElement!==void 0||document.msFullscreenElement!==null&&document.msFullscreenElement!==void 0;return i&&n}setFullscreen(){this.enabled&&(this.uc||this.dolfin||this.qq||this.vivonative||this.isFullScreen||(this.applyFullscreenAPI(),this.ios||window.scrollTo(0,1)))}addOverlay(){if(!window.addEventListener)return;let e=document.getElementById("swipeLayer");if(e){e.style.width!==this.canvas.style.width&&(e.style.width=this.canvas.style.width,e.style.marginLeft=this.canvas.style.marginLeft);return}let i=window.innerHeight*(this.chromeIOS?1:2),n=`<div id="swipeLayer" style="position: fixed; left:${this.canvas.style.marginLeft}; top:0; width:${this.canvas.style.width}; min-height:${i}px; height:${i}px; display:block; ">
</div>`;var s=document.createElement("div");if(s.innerHTML=n,e=s.firstChild,this.addEventListeners(e),this.canvas.parentElement.insertBefore(e,this.canvas),this.chromeIOS||document.getElementById("swipeBackground"))return;let r=`<div id="swipeBackground" style="position: relative; z-index:-1; left:0; top:0; width:${window.innerWidth}px; min-height:${i}px; height:${i}px; display:block; ">
</div>`;s=document.createElement("div"),s.innerHTML=r;let o=s.firstChild;this.addEventListeners(o),window.document.body.insertBefore(o,window.document.body.lastChild)}addEventListeners(e){e.addEventListener("touchstart",()=>{this.enabled=!1,this.removeOverlay()}),e.addEventListener("touchend",()=>{this.enabled=!0,window.scrollTo(0,1)}),e.addEventListener("touchcancel",()=>{this.enabled=!0,window.scrollTo(0,1)})}removeOverlay(){let e=document.getElementById("swipeLayer");e&&(e.parentElement.removeChild(e),this.chromeIOS||window.scrollTo(0,1))}applyFullscreenAPI(){if(this.isFullScreen)return;let e=window.document.documentElement,i=document.requestFullscreen||e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen||e.requestFullScreen||e.webkitCurrentRequestFullScreen;i&&i.call(e)}update(){!this.enabled||!this.ios||this.uc||this.qq||this.canvas.height==screen.width-20||this.canvas.width===window.innerWidth&&this.canvas.height===window.innerHeight||(this.isLandscape?this.addOverlay():this.removeOverlay())}}var Po=Object.defineProperty,_o=Object.getOwnPropertyDescriptor,Oo=(t,e,i,n)=>{for(var s=n>1?void 0:n?_o(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Po(e,i,s),s};const si="notify:visibility.visible",ni="notify:visibility.hidden";let ri=class extends F{configure(t){}startup(){xo(),bo(()=>{Z.emit(si)}),yo(()=>{Z.emit(ni)}),C.mobile&&(this.fullscreenAPI=new So(b.resolution),this.fullscreenAPI.enabled=!1,_.add(this))}set fullScreenEnabled(t){this.fullscreenAPI&&(this.fullscreenAPI.enabled=t)}setDeviceFullscreen(){this.fullscreenAPI&&this.fullscreenAPI.setFullscreen()}shutdown(){_.remove(this),wo()}advanceTime(t){return this.fullscreenAPI.update(),!0}};ri=Oo([p({tag:"deviceService",category:"service"})],ri);var Io=Object.defineProperty,Eo=Object.getOwnPropertyDescriptor,Co=(t,e,i,n)=>{for(var s=n>1?void 0:n?Eo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Io(e,i,s),s};class Lo{constructor(){this.channels={}}lengthOfChannels(){return Object.keys(this.channels).length}lengthOfChannel(e){return A(this.channels[e])?0:Object.keys(this.channels[e]).length}exist(e,i){let n=this.channels[e];return H(n)&&H(n[i])}getPlaybackBySoundId(e){for(let i in this.channels){let n=this.channels[i];for(let s in n){let r=n[s];if(r.soundId===e)return r}}}add(e,i,n,s){let r=this.channels[e];A(r)&&(r={},this.channels[e]=r);let o={channelId:e,name:i,soundId:n,volume:1,softBgm:s};return r[i]=o,o}removeBySoundId(e){return this.removeBy(i=>i.soundId===e)}removeByName(e){return this.removeBy(i=>i.name===e)}removeBy(e){for(let i in this.channels){let n=this.channels[i];for(let s in n){let r=n[s];if(e(r))return delete n[s],As(n)&&delete this.channels[i],r}}}}let oi=class extends F{constructor(){super(...arguments),this.howlers={},this._muted=!1,this._volume=1,this.audios={},this.scope="sounds",this.commonScope="commonsounds"}configure(t){let e=u(t,"resource");e!==this.commonScope&&(this.defaultScope=e,this.scope=this.defaultScope),this.softBgmValue=a(t,"softBgm",.3),this.channelManager=new Lo}initSoundSettings(){let t=je(d.ID+"-muted",!0);this.muted=t=="true"}get backgroundMusic(){return this.bgm}startup(){y.has("deviceService")||y.register("deviceService",ri).startup(),Z.on(si,()=>{this.ready&&!this.muted&&Howler.volume(this._volume)}),Z.on(ni,()=>{this.ready&&Howler.volume(0)})}shutdown(){Z.off(si),Z.off(ni)}get ready(){return H(this.howlers[this.scope])}get soundPlayer(){try{if(!this.ready){let t=D.json(this.scope);H(t)&&(t.onend=e=>{this.resetBgm(e),this.channelManager.removeBySoundId(e)},this.howlers[this.scope]=new Howl(t)),this.initSoundSettings()}return this.howlers[this.scope]}catch{return null}}play(t,e="default",i=!1,n=!1,s){if(C.isUCBrowser)return!this._muted&&t==="spin"&&this.playAudio(t),null;if(!i&&!this.soundPlayer&&this.channelManager.exist(e,t)||!this.soundPlayer)return null;if(i){let o=this.channelManager.removeByName(t);o&&this.stop(o.soundId)}n&&this.softBgm();let r=this.soundPlayer.play(t);return s&&this.soundPlayer.once("end",s,r),this.channelManager.add(e,t,r,n)}playAudio(t){this.audios[t]?(this.audios[t].ended||(this.audios[t].currentTime=0),this.audios[t].play()):this.loadAudio(t).play()}loadAudio(t){let e=document.createElement("audio");return e.setAttribute("src","./assets/"+t+".m4a"),e.load(),e.addEventListener("canplaythrough",()=>{this.audios[t]=e}),e}soundURLS(t){let e=t.substr(0,t.length-3),i=[],n=["m4a","ogg","ac3","mp3"];for(let s=0;s<n.length;s++)i.push(e+n[s]);return i}stopBgm(){this.bgm&&this.stop(this.bgm.soundId),this.bgm=void 0}playBgm(t,e=!1){if(!(!e&&this.bgm&&this.bgm.name===t))return this.stopBgm(),this.bgm=this.play(t,"bgm",!0),this.bgm}softBgm(){this.bgm&&this.setVolume(this.softBgmValue*this.bgm.volume,this.bgm.soundId,!0)}fade(t,e,i,n,s){this.soundPlayer.fade(t,e,i,n),s&&this.soundPlayer.once("fade",()=>{s()})}resetBgm(t){if(this.bgm&&this.bgm.soundId!==t){let e=this.channelManager.getPlaybackBySoundId(t);e&&e.softBgm&&this.setVolume(this.bgm.volume,this.bgm.soundId,!0)}}resume(){for(let t in this.channelManager.channels){let e=this.channelManager.channels[t];for(let i in e)this.soundPlayer.play(e[i].soundId)}}pause(t){return this.resetBgm(t),this.soundPlayer.pause(t),this}stop(t){if(t)return this.resetBgm(t),this.channelManager.removeBySoundId(t),this.soundPlayer.stop(t),this}switchScope(t){return this.setVolume(0),this.scope=this.defaultScope,t?(this.scope=this.commonScope,this.soundPlayer?(this.setVolume(1),!0):(this.scope=this.defaultScope,!1)):(this.setVolume(1),!0)}setVolume(t,e,i=!1){if(!i){let n=this.channelManager.getPlaybackBySoundId(e);n&&(n.volume=t)}return this.soundPlayer.volume(t*this.volume,e),this}getVolume(){return this.soundPlayer.volume()}set volume(t){this._volume=t,this._muted||Howler.volume(t)}get volume(){return this._volume}get muted(){return this._muted}set muted(t){this._muted=t,fr(d.ID+"-muted",t),t?Howler.volume(0):Howler.volume(this._volume)}};oi=Co([p({tag:"soundService",category:"service"})],oi);function tt(t,e=0){return Math.floor(Math.random()*(t-e))+e}class To{constructor(e,i){this.capability=e,this.factory=i,this.pool=[],this.metrics={totalAlloc:0,totalFree:0}}allocate(...e){let i;return this.pool.length===0?(i=this.factory.apply(this.factory,e),this.metrics.totalAlloc++):(i=this.pool.pop(),this.metrics.totalFree--),i}free(e){this.capability<=this.pool.length?(this.destroy(e),e=void 0):this.pool.indexOf(e)===-1&&this.pool.push(e),this.metrics.totalFree++}destroy(e){let i=e;i.dispose&&i.dispose()}collect(e){this.pool.forEach(n=>{this.destroy(n)}),this.pool=[];let i=this.metrics.totalAlloc-this.metrics.totalFree;this.clearMetrics(i)}find(e){let i=this.pool.length;for(var n=0;n<i;n++){let s=this.pool[n];if(e(s))return s}}clearMetrics(e){this.metrics.totalAlloc=e||0,this.metrics.totalFree=0}}const Gi="idle",Ao="spin",Do="animate",Bo="events:symbol:state";let ki=class Os extends S{constructor(e,i,n){super(),this.index=e,this.prefab=i,this.masking=n,this.attachedFollow=!1,this.row=-1,this.col=-1,this.frame=new PIXI.Container,this.views={}}idle(){this.setState(Gi)}spin(){this.setState(Ao)}animate(e=Do,i=!0){this.setState(e,i)}set onAnimationComplete(e){this.content.onComplete=e}deactivate(){super.deactivate(),this.deactivateViews()}clone(){let i=y.get("symbolService").get(this.index);return i.reference=this,i.col=this.col,i.row=this.row,i}free(){this.attachedSymbol=void 0,this.attachedFollow=!1,this.reference=void 0,this.deactivate(),this.views={}}attach(e,i=!1){this.attachedSymbol=e,this.attachedFollow=i,this.updateAttached()}updateAttached(){this.attachedSymbol&&this.attachedFollow&&(this.attachedSymbol.x=this.x,this.attachedSymbol.y=this.y)}checkCurrentState(e){return this.state===e}deactivateViews(){for(let e in this.views)e&&this.views[e].deactivate()}resetStateViews(){for(let e in this.views)this.views[e]=void 0}setState(e,i=!1){this.hasState(e)||(e=Gi),this.deactivate(),this.removeChildren();let n=this.views[e];if(i){if(n=oe(this.getPrefab(e),{}),n.components)for(let s=0;s<n.components.length;s++)n.components[s].options&&n.components[s].options.volume&&(n.components.splice(s,1),Si("winline","default",!0))}else n||(n=oe(this.getPrefab(e),{}));return this.content=n,this.addChild(this.content),this.activate(),this.views[e]=n,Z.emit(Bo,this),this.masking&&(this.addChild(this.masking),this.content.mask=this.masking),this.addChild(this.frame),this.state=e,this.content}hasState(e){return this.prefab&&this.prefab.definitions&&this.prefab.definitions[e]!==void 0}getPrefab(e){return this.prefab?this.prefab.definitions[e]:null}static create(e,i,n){let s=null;n&&(s=Xt(n.width,n.height,n.radius),s.position.set(n.x,n.y));let r=new Os(e,i,s);return r.name=`symbol#${e}`,r}};var No=Object.defineProperty,Ro=Object.getOwnPropertyDescriptor,Mo=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ro(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&No(e,i,s),s};let ai=class extends F{configure(t){if(this.total=a(t,"total"),t.childElementCount<this.total&&A(t.querySelector("#default")))throw new Error("the number of symbol prefabs must equals the total of symbols or there is a prefab named 'default'.");this.size=Ws(t,"size"),this.multiSize=$s(t,"multiSize");let e=Us(t,"anchor");this.poolsOn=g(t,"pool"),this.anchor={x:this.size.width*e.x,y:this.size.height*e.y},this.symbolPrefabs={},this.symbolMasking={},V(t,(i,n)=>{let s=$(i),r={definitions:{}};V(i,(o,l)=>{r.definitions[mi(o)]=o.firstElementChild}),this.symbolPrefabs[s]=r,g(i,"mask",!1)&&(this.symbolMasking[s]={x:a(i,"x",0),y:a(i,"y",0),width:a(i,"width",this.size.width),height:a(i,"height",this.size.width),radius:a(i,"radius",0)})}),this.pools={}}pickMany(t){let e=[];for(let i=0;i<t;i++)e.push(tt(this.total));return e}pickOne(){return this.get(tt(this.total))}get(t){let e=this.symbolPrefabs[t.toString()];return A(e)&&(e=this.symbolPrefabs.default),this.poolsOn?this.getObjectPool(t).allocate(t,e,this.symbolMasking[t.toString()]):ki.create(t,e,this.symbolMasking[t.toString()])}free(t){t.free(),this.poolsOn&&this.getObjectPool(t.index).free(t)}hasSymbol(t){return!A(this.symbolPrefabs[t.toString()])}getObjectPool(t){let e=t.toString(),i=this.pools[e];return A(i)&&(this.pools[e]=i=new To(5,ki.create)),i}};ai=Mo([p({tag:"symbolService",category:"service"})],ai);var Uo=Object.defineProperty,Wo=Object.getOwnPropertyDescriptor,$o=(t,e,i,n)=>{for(var s=n>1?void 0:n?Wo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Uo(e,i,s),s};let li=class extends F{configure(t){this.options=t}create(){return E.get(`component:animator:${u(this.options,"type")}`).create(this.options)}};li=$o([p({tag:"reelAnimatorService",category:"service"})],li);var Vo=Object.defineProperty,Fo=Object.getOwnPropertyDescriptor,jo=(t,e,i,n)=>{for(var s=n>1?void 0:n?Fo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Vo(e,i,s),s};let hi=class extends F{constructor(){super(...arguments),this.cache={}}configure(t){this.options=t}get(t,e={}){let i=Bs(this.options,t);if(H(i)){let n=u(i,"mode","new");if(n==="new")return this.create(i,e);if(n==="singleton")return this.takeFromCache(i,e)}}dispose(){for(let t in this.cache)this.cache[t].deactivate();this.cache={}}create(t,e){let i=oe(t,e);return N(i,t,e),i}takeFromCache(t,e){let i=$(t);return this.cache[i]||(this.cache[i]=this.create(t,e)),this.cache[i]}};hi=jo([p({tag:"widgetService",category:"service"})],hi);var Ho=Object.defineProperty,Go=Object.getOwnPropertyDescriptor,ko=(t,e,i,n)=>{for(var s=n>1?void 0:n?Go(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ho(e,i,s),s};let it=class extends F{constructor(){super(...arguments),this.started=!1,this.strictMode=!1,this.strictLandscapeWeb=!1}getOrientation(){return this.strictLandscapeWeb&&!C.mobile&&!C.tablet||window.innerHeight<=window.innerWidth?w.LANDSCAPE:w.PORTRAIT}get isPortrait(){return this.getOrientation()===w.PORTRAIT}get isLandscape(){return this.getOrientation()===w.LANDSCAPE}configure(t){}startup(){this.mode=d.orientation||"landscape",this.started=!0,this.strictMode=d.strictMode&&d.strictMode==="true",this.strictLandscapeWeb=d.strictLandscapeWeb&&d.strictLandscapeWeb==="true"}};it=ko([p({tag:"orientationService",category:"service"})],it);var Xo=Object.defineProperty,Yo=Object.getOwnPropertyDescriptor,qo=(t,e,i,n)=>{for(var s=n>1?void 0:n?Yo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Xo(e,i,s),s};const zo="events:resize",Ko="events:web_resize";let ui=class extends F{constructor(){super(...arguments),this.prevOrientation=0}configure(t){}startup(){y.has("orientationService")||y.register("orientationService",it).startup(),this.orientationService=y.get("orientationService"),this.orientationService.started||this.orientationService.startup(),this.resizeAndOrientaionChecker=setInterval(()=>{this.checkResize(),this.checkSecondaryOrientation()},30),this.checkResize()}checkResize(){let t=window.innerWidth,e=window.innerHeight;(this.windowHeight!==e||this.windowWidth!==t)&&(this.windowHeight=e,this.windowWidth=t,this.layout(),Z.emit(zo),Z.emit(Ko))}checkSecondaryOrientation(){this.windowOrientation!==window.orientation&&(this.windowOrientation=window.orientation,this.layout())}shutdown(){clearInterval(this.resizeAndOrientaionChecker)}layout(){let t=b,e=t.minWidth,i=t.minHeight,n=t.width,s=t.height,r=1,o=0,l=this.orientationService.getOrientation();if(Ht(!1),this.isBothEnaled&&l===w.PORTRAIT&&!this.orientationService.strictLandscapeWeb||this.isPortraitOnlyEnabled&&this.isNotMobile&&l===w.LANDSCAPE||this.isBothEnaled&&l===w.PORTRAIT&&this.orientationService.strictLandscapeWeb&&this.isMobileOrTablet?(n=t.height,s=t.width,e=t.minHeight,i=t.minWidth):this.isPortraitOnlyEnabled&&this.isMobileOrTablet&&l===w.LANDSCAPE?Ht(!0):C.mobile&&(this.orientationService.mode==="portrait"&&l===w.LANDSCAPE||this.orientationService.mode==="landscape"&&l===w.PORTRAIT)&&(this.orientationService.strictMode?this.orientationService.mode==="portrait"&&Ht(!0):(o=Math.PI/2,n=t.height,s=t.width,e=t.minHeight,i=t.minWidth)),e>0&&i>0&&this.isMobileOrTablet){let O=Math.min(window.innerWidth/e,window.innerHeight/s),v=Math.min(window.innerWidth/(l===w.PORTRAIT?e:n),window.innerHeight/i);r=Math.max(O,v)}else r=Math.min(window.innerWidth/(e>0?e:n),window.innerHeight/s);let c=Math.ceil(n*r),h=Math.ceil(s*r);Y.scale.set(r),Y.rotation=o,this.isBothEnaled?(Y.position.set(0,0),Y.pivot.set(0,0)):Y.position.set(c/2,h/2),M.resize(c,h);let f=(window.innerWidth-c)/2,x=(window.innerHeight-h)/2,m=t.canvas;m.style.marginLeft=f+"px",m.style.marginTop=x+"px",m.style.width=c+"px",m.style.height=h+"px",this.offsetX=f/r,this.offsetY=x/r,L.current&&(this.prevOrientation!=l&&this.isBothEnaled&&L.current.onOrientationChange(l),L.current.onSceneResize()),this.prevOrientation=l,this.scrollTop()}scrollTop(){let t=C;t.mobile&&(t.android&&!t.chrome?window.scrollTo(0,1):window.scrollTo(0,0))}get isBothEnaled(){return this.orientationService.mode==="both"||this.orientationService.mode==="portrait-only"}get isPortraitOnlyEnabled(){return this.orientationService.mode==="portrait-only"}get isNotMobile(){return!C.mobile&&!C.tablet}get isMobileOrTablet(){return C.mobile||C.tablet}get deviceViewportOffset(){let t=window.innerWidth,e=window.innerHeight,i=b.width,n=b.height,s=Y.scale.x,r=new PIXI.Point;return this.isMobileOrTablet&&this.orientationService.getOrientation()===w.PORTRAIT&&(i=b.height,n=b.width),t<i*s&&(r.x=Math.floor((i*s-t)*(.5/s))),e<n*s&&(r.y=Math.floor((n*s-e)*(.5/s))),r}};ui=qo([p({tag:"layoutService",category:"service"})],ui);function Ht(t){let e=document.getElementById("portraitonly");if(!e)return;let i=document.getElementById("portraitonlytext");if(i){let n="Please use portrait mode for the best experience.";try{ee("portraitonly")&&(n=ee("portraitonly"))}catch{}A(n)&&(n="Please use portrait mode for the best experience."),i.textContent=n}Jo(!t),e.style.visibility=t?"visible":"hidden"}function Jo(t){let e=document.getElementById("wrapper");e&&(e.style.visibility=t?"visible":"hidden")}Tt([ze,Je,et,R,Qe,Te,Ae]);Tt([ai,li,hi,ui,it,ii,oi,Jt,Qt,Zt,ei,ti]);E.map("context").toSingleton(vr);E.map("user",rr).asSingleton();E.map("normalSpinParser").toValue(er);an([Or]);function Qo(){jn(slotapp)}function Ci(t,e,i){let n=new t({value:u(e,"value"),style:Vs(e),bitmap:g(e,"bitmap",!1),align:u(e,"align","left"),case:u(e,"case"),comma:g(e,"comma",!0),verticalAlign:u(e,"verticalAlign"),decimalPlace:a(e,"decimalPlace",2),duration:a(e,"duration",500),prefix:u(e,"prefix",""),suffix:u(e,"suffix",""),wordWrap:g(e,"wordWrap",!1),wordWrapWidth:a(e,"wordWrapWidth",0),maxWidth:a(e,"maxWidth",0),letterSpacing:a(e,"letterSpacing",0),lineHeight:a(e,"lineHeight",0),lineJoin:u(e,"lineJoin","miter"),animZoom:g(e,"animZoom",!1),animScale:a(e,"animScale",1.2),durationMultiplierByValue:a(e,"durationMultiplierByValue")});return N(n,e,i),k(e,{scene:i.scene,parent:n,context:i.context}),Sn(n,e,"align",u,"left"),n}var Zo=Object.defineProperty,ea=Object.getOwnPropertyDescriptor,ta=(t,e,i,n)=>{for(var s=n>1?void 0:n?ea(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Zo(e,i,s),s};let ge=class extends S{constructor(t){super(),this.hasComma=!0,this.options=t,this.initText(),this.update()}initText(){let t=this.options.style;this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:t.fontSize,fontName:t.fontFamily}),this.text.tint=t.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,t),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text)}set value(t){this.text.text=t,this.update()}set align(t){this.options.align=t,this.update()}set tint(t){this.text.tint=t}set fill(t){this.options.bitmap||(this.text.style.fill=t)}get value(){return this.text.text}get anchorX(){if(this.options.align==="left")return 0;if(this.options.align==="center")return .5;if(this.options.align==="right")return 1}get anchorY(){if(!this.options.verticalAlign)return-1;if(this.options.verticalAlign==="top")return 0;if(this.options.verticalAlign==="middle")return .5;if(this.options.verticalAlign==="bottom")return 1}update(){this.updateLetterCase(),this.updateComma(),this.updateAnchorX(),this.updateAnchorY()}updateLetterCase(){this.options.case==="upper"?this.text.text=this.text.text.toUpperCase():this.options.case==="lower"&&(this.text.text=this.text.text.toLowerCase())}updateComma(){this.hasComma&&(this.text.text=ss(this.text.text))}updateAnchorX(){this.options.maxWidth&&(this.fontSize=this.options.style.fontSize,this.text.width>this.options.maxWidth&&(this.fontSize=this.options.style.fontSize*this.options.maxWidth/this.text.width)),this.text.x=-this.text.width*this.anchorX}updateAnchorY(){this.options.verticalAlign&&(this.text.y=-this.text.height*this.anchorY)}set fontSize(t){this.options.bitmap?this.text.fontSize=t:this.text.style.fontSize=t}static create(t,e){return ie(t,"fill",d.resolve(u(t,"fill"))),Ci(ge,t,e)}};ge=ta([p({tag:"label"})],ge);var ia=Object.defineProperty,sa=Object.getOwnPropertyDescriptor,na=(t,e,i,n)=>{for(var s=n>1?void 0:n?sa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ia(e,i,s),s};let st=class extends ge{constructor(t){super(t),this._value=new Decimal(0),this._tweeningDisplayValue=0,this.prefix="",this.suffix="",this.lastValue="",this.currentValue="a",this.ON_UPDATE_START="OnUpdateStart",this.ON_UPDATING_BY_ZOOM="OnUpdatingByZoom",this.ON_UPDATE_COMPLETE="OnUpdateComplete",this._value=new Decimal(t.value),this.prefix=t.prefix,this.suffix=t.suffix,this.update()}set value(t){let e;if(e=new Decimal(t),e.equals(this._value))return;this.removeTween(),e.toNumber()-this._value.toNumber();let i=this.options.duration,n={value:this._value.toNumber()};this.tween=new TWEEN.Tween(n).onStart(()=>{this.emit(this.ON_UPDATE_START)}).to({value:e.toNumber()},i).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.update(n.value)}).onComplete(()=>{this.emit(this.ON_UPDATE_COMPLETE)}),this._value=e,this.tween.start()}set duration(t){this.options.duration=t}get value(){return this._value.toString()}get tweeningDisplayValue(){return this._tweeningDisplayValue}update(t){let e=t||this._value||0;this._tweeningDisplayValue=e instanceof Decimal?e.toNumber():e,this.text.text=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.updateLetterCase(),this.updateComma(),this.updatePrefixSuffix(),this.currentValue=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.lastValue!=this.currentValue&&(this.lastValue=this.currentValue,this.options.animZoom==!0&&(this.onAnimZoom(),this.emit(this.ON_UPDATING_BY_ZOOM)),this.updateAnchorX(),this.updateAnchorY())}resetScale(){this.text.scale.set(1)}onAnimZoom(){this.text.position;let t={scale:this.options.animScale},e=new TWEEN.Tween(t).onStart(()=>{this.text.scale.set(t.scale)}).to({scale:1},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.text.scale.set(t.scale)}).onComplete(()=>{this.resetScale(),this.updateAnchorX(),this.updateAnchorY(),e.stop(),e=null});e.start()}updatePrefixSuffix(){this.text.text=this.prefix+this.text.text+this.suffix}setValueDirectly(t){this._value=new Decimal(t),this.removeTween(),this.update()}reset(){this.setValueDirectly("0")}removeTween(){this.tween&&this.tween.stop()}deactivate(){this.removeTween()}static create(t,e){return Ci(st,t,e)}};st=na([p({tag:"animatedLabel"})],st);var se=(t=>(t[t.Mouse=0]="Mouse",t[t.Keyboard=1]="Keyboard",t[t.None=2]="None",t))(se||{}),ra=Object.defineProperty,oa=Object.getOwnPropertyDescriptor,aa=(t,e,i,n)=>{for(var s=n>1?void 0:n?oa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ra(e,i,s),s};let nt=class extends S{constructor(t){super(),this.options=t,this._enabled=!0,this.upTexture=t.up,this.downTexture=t.down,this.disabledTexture=t.disabled,this.sprite=new PIXI.Sprite(this.upTexture),this.addChild(this.sprite),this.interactive=!0,this.command=t.command,this.cursor="pointer",this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonDownHandler(t){this._enabled&&(this.downTexture&&(this.sprite.texture=this.downTexture),this.sprite.x=this.options.dx,this.sprite.y=this.options.dy,Ie("onDown",this))}buttonUpHandler(){this._enabled&&(this.sprite.texture=this.upTexture,this.sprite.x=0,this.sprite.y=0,Ie("onUp",this))}buttonClickedHandler(){this._enabled&&(Pi(this.options.sound),!Ie("onClick",this)&&this.command&&T.emit(this.command,{source:se.Mouse,context:this}),this.activate())}set enabled(t){this._enabled=t,this.cursor="pointer",this._enabled?this.sprite.texture=this.upTexture:this.sprite.texture=this.disabledTexture?this.disabledTexture:this.upTexture}get enabled(){return this._enabled}static create(t,e){let i=D,n=i.resolve(u(t,"up")),s;Le(t,"down")&&(s=i.resolve(u(t,"down")));let r;Le(t,"disabled")&&(r=i.resolve(u(t,"disabled")));let o=new nt({up:n,down:s,disabled:r,command:u(t,"command"),sound:u(t,"sound","button"),dx:a(t,"dx"),dy:a(t,"dy")});return yi(o,t,e),g(t,"debug")&&_n(o),k(t,{scene:e.scene,parent:o,context:e.context}),N(o,t,e),o}};nt=aa([p({tag:"button"})],nt);function Is(t,e,i){let n=new t;N(n,e,i),V(e,(r,o)=>{let l=oe(r,{scene:i.scene,parent:n,context:i.context});l instanceof S&&(l.name=$(r),l.visible=!1,n.frames.push(l))});let s=u(e,"goto")||0;return n.goto(s),n}var la=Object.defineProperty,ha=Object.getOwnPropertyDescriptor,ua=(t,e,i,n)=>{for(var s=n>1?void 0:n?ha(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&la(e,i,s),s};let De=class extends S{constructor(){super(...arguments),this.frames=[]}goto(t){if(this.removeChildren(),typeof t=="number"?this.currFrameIndex=t<this.frames.length?t:0:this.currFrameIndex=this.indexOfFrame(t),this.currFrameIndex>=0){let e=this.frames[this.currFrameIndex];return e.visible=!0,this.addChild(e),!0}else return!1}get current(){return this.frames[this.currFrameIndex]}get numSlides(){return this.frames.length}next(){let t=this.currFrameIndex;t++,t>-1&&(t>=this.numSlides&&(t=0),this.goto(t))}prev(){let t=this.currFrameIndex;t--,t<0&&(t=this.numSlides-1),this.goto(t)}indexOfFrame(t){for(let e=0;e<this.frames.length;e++)if(this.frames[e].name===t)return e;return-1}static create(t,e){return Is(De,t,e)}};De=ua([p({tag:"slide"})],De);var ca=Object.defineProperty,pa=Object.getOwnPropertyDescriptor,da=(t,e,i,n)=>{for(var s=n>1?void 0:n?pa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ca(e,i,s),s};const fe=class fe{};fe.disable="disable",fe.up="up",fe.down="down",fe.over="over";let Q=fe,rt=class extends De{constructor(){super(),this._enabled=!0,this._down=!1,this._over=!1,this._holdEnabled=!1,this._tick=0,this.interactive=!0,this.cursor="pointer",this.initialScale=this.scale.clone(),this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}enableOver(){this.on("mouseover",this.buttonOverHandler).on("mouseout",this.buttonOutHandler)}set clickable(t){if(t.content&&t.content.geometry.graphicsData&&t.content.geometry.graphicsData.length){let e=t.content.geometry.graphicsData[0].shape;e&&(t instanceof Ae?this.hitArea=new PIXI.Polygon(e.points):this.hitArea=new PIXI.Circle(t.x,t.y,e.radius))}}set holdEnabled(t){this._holdEnabled=t,t&&_.add(this)}goto(t){return super.goto(t)||super.goto(Q.up),!0}buttonDownHandler(t){this._enabled&&(this._down=!0,this._downTime=this._tick,this.goto(Q.down),this.animateButton(!0))}buttonOverHandler(t){this._enabled&&(this._over=!0,this.goto(Q.over),this.onmouseover&&T.emit(this.onmouseover,{source:se.Mouse,context:this}))}buttonOutHandler(){this._enabled&&(this._over=!1,this._down=!1,this._down||this.goto(Q.up))}buttonUpHandler(){this._enabled&&(this._down=!1,this.goto(this._over?Q.over:Q.up),this.animateButton(!1))}buttonClickedHandler(){this._enabled&&(Pi(this.sound),!Ie("onClick",this)&&this.command&&T.emit(this.command,{source:se.Mouse,context:this}),this.activate())}animateButton(t){this.animate!=!1&&(t?this.scale.set(this.initialScale.x*1.1):this.scale.set(this.initialScale.x))}set enabled(t){this._enabled=t,this._enabled?(this.cursor="pointer",this.goto(Q.up)):(this.cursor=null,this._down=!1,this.goto(Q.disable))}get enabled(){return this._enabled}advanceTime(t){if(this._tick++,this._down&&this._enabled&&this._tick-this._downTime>30){this._tick%2===0&&T.emit(this.command,{source:se.Mouse,context:this});return}return!0}deactivate(){super.deactivate(),_.remove(this)}activate(){super.activate(),this._holdEnabled&&_.add(this)}static create(t,e){return fa(rt,t,e)}};rt=da([p({tag:"buttonSlide"})],rt);function fa(t,e,i){let n=Is(t,e,i),s=n.indexOfFrame("hit");return n.command=u(e,"command"),n.sound=u(e,"sound","button"),n.onmouseover=()=>{},n.animate=g(e,"animate",!1),n.over&&n.enableOver(),s>=0&&(n.clickable=n.frames.splice(s,1)[0],n.hit=void 0),yi(n,e,i),n.holdEnabled=g(e,"holdEnabled"),n}var ma=Object.defineProperty,ga=Object.getOwnPropertyDescriptor,va=(t,e,i,n)=>{for(var s=n>1?void 0:n?ga(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ma(e,i,s),s};let ot=class extends S{constructor(t,e){super(),this.content=hs(t,e),this.addChild(this.content)}static create(t,e){ie(t,"color",d.resolve(u(t,"color")));let i=new ot(a(t,"radius",10),a(t,"color",0));return N(i,t,e),i}};ot=va([p({tag:"circle"})],ot);var ba=Object.defineProperty,ya=Object.getOwnPropertyDescriptor,wa=(t,e,i,n)=>{for(var s=n>1?void 0:n?ya(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ba(e,i,s),s};let ne=class extends S{constructor(t){super(),this._sprite=new PIXI.Sprite(t),this.addChild(this._sprite)}set resource(t){if(t instanceof PIXI.Texture)this._sprite.texture=t;else{let e=D.resolve(t);this._sprite.texture=e}}set tint(t){t>=0&&(this._sprite.tint=t)}get tint(){return this._sprite.tint}set blendMode(t){t==="screen"?this._sprite.blendMode=PIXI.BLEND_MODES.SCREEN:t==="add"?this._sprite.blendMode=PIXI.BLEND_MODES.ADD:this._sprite.blendMode=PIXI.BLEND_MODES.NORMAL}get sprite(){return this._sprite}static create(t,e){ie(t,"tint",d.resolve(u(t,"tint")));let i=E.get("context"),s=D.resolve(i.resolve(u(t,"res"),e.context)),r=new ne(s);return r.tint=a(t,"tint",-1),r.blendMode=u(t,"blendMode",""),N(r,t,e),k(t,{scene:e.scene,parent:r,context:e.context}),r}static instantiate(t){let i=D.resolve(t);return new ne(i)}};ne=wa([p({tag:"img"})],ne);var xa=Object.defineProperty,Sa=Object.getOwnPropertyDescriptor,Pa=(t,e,i,n)=>{for(var s=n>1?void 0:n?Sa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&xa(e,i,s),s};const _a={rectangle:0,polygon:1,image:2,circle:3};let at=class extends At{constructor(t,e,i){switch(super(),this.target=t,e){case 2:M.type===PIXI.RENDERER_TYPE.WEBGL?this.content=new PIXI.Sprite(D.resolve(i.res)):this.content=kt(i.width,i.height);break;case 0:this.content=kt(i.width,i.height);break;case 1:this.content=un(i.path);break;case 3:this.content=hs(i.radius);break}this.content.x=i.x,this.content.y=i.y,this.target.addChild(this.content),this.target.mask=this.content}activate(){this.active!==!0&&(this.target.mask!=this.content&&(this.target.mask=this.content),this.active=!0)}deactivate(){this.active!==!1&&(this.target.mask!=null&&(this.target.mask=null),this.active=!1)}static create(t,e){let i=_a[u(t,"type","rectangle")],n={width:a(t,"width",0),height:a(t,"height",0),x:a(t,"x",0),y:a(t,"y",0),path:K(t,"path"),res:u(t,"res",null),radius:a(t,"radius",0)};if(e.parent instanceof PIXI.Container)return new at(e.parent,i,n)}};at=Pa([p({tag:"mask"})],at);function Oa(t){return new Promise(e=>{setTimeout(e,t)})}function _e(t){let e=0;return new Promise(i=>{const n={advanceTime:s=>(e+=s*PIXI.Ticker.shared.elapsedMS,e>=t&&(_.remove(n),i()),!0)};_.add(n)})}function he(t){let e=0;return new Promise(i=>{const n={advanceTime:s=>(e+=16.66666666667,e>=t&&(_.remove(n),i()),!0)};_.add(n)})}var Ia=Object.defineProperty,Ea=Object.getOwnPropertyDescriptor,Ca=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ea(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ia(e,i,s),s};let lt=class extends S{constructor(t,e){super(),this.options=e,this.animator=new PIXI.AnimatedSprite(t),this.animator.loop=!1,this.currentFrame=0,this.setHueAndBlendMode(),this.addChild(this.animator)}play(t=-1){if(t!==0)return this.loop=t,new Promise((e,i)=>{this.animator.onComplete=this.makeCompleteHandler(e),this.animator.gotoAndPlay(this.currentFrame)})}get speed(){return this.animator.animationSpeed}set speed(t){this.animator.animationSpeed=t}set tint(t){this.animator.tint=t}makeCompleteHandler(t){return()=>{this.loop===1?(t(),this.onComplete()):this.loop===-1?this.playLoop():this.loop>1&&(this.loop--,this.playLoop())}}playLoop(){this.options.loopDelay>0?Oa(this.options.loopDelay).then(()=>this.animator.gotoAndPlay(0)):this.animator.gotoAndPlay(0)}playOnce(){return this.play(1)}activate(){super.activate(),this.options.continuous||(this.currentFrame=0),this.play(this.options.loop)}deactivate(){super.deactivate(),this.animator.stop(),this.options.continuous&&(this.currentFrame=this.animator.currentFrame)}onComplete(){this.emit("animationComplete"),this.options.removeOnComplete&&this.parent&&this.parent.removeChild(this)}setHueAndBlendMode(){if(M.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.hue!==0){let t=new PIXI.ColorMatrixFilter;t.hue(this.options.hue,!1),this.setBlendMode(t),this.animator.filters=[t]}else this.setBlendMode(this.animator)}setBlendMode(t){this.options.blendMode&&(this.options.blendMode==="screen"?t.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(t.blendMode=PIXI.BLEND_MODES.ADD))}static create(t,e){let i=E.get("context"),s=D.resolve(i.resolve(u(t,"res"),e.context));if(ie(t,"tint",d.resolve(u(t,"tint"))),g(t,"reverse",!1)&&s&&s.length){let h=s.slice(0);h.reverse(),s=h.slice(a(t,"reverseStart",0))}let r=a(t,"loop",1),o=new lt(s,{loop:r,loopDelay:a(t,"loopDelay",0),hue:a(t,"hue",0),blendMode:u(t,"blendMode",null),continuous:g(t,"continuous",!1),removeOnComplete:g(t,"removeOnComplete",!1)});o.speed=a(t,"speed",1),o.currentFrame=a(t,"startFrame",0);let l=a(t,"tint",-1);return l>=0&&(o.tint=l),k(t,{scene:e.scene,parent:o,context:e.context}),N(o,t,e),g(t,"play",!0)&&o.play(r),o}};lt=Ca([p({tag:"movieClip"})],lt);var La=Object.defineProperty,Ta=Object.getOwnPropertyDescriptor,Aa=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ta(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&La(e,i,s),s};const Da="events:afterTrackTime";let ht=class extends S{constructor(t,e,i,n){super(),this.trackTimeIndex=0,this.animation=new PIXI.spine.Spine(t),this.animation.skeleton.setToSetupPose(),this.animation.update(0),this.animation.autoUpdate=!1,e&&(this.actionName=e,this.loop=i,this.trackIndex=0,this.animation.state.setAnimation(this.trackIndex,e,i)),n&&(this.eventListener={event:(s,r)=>{this.emit(r.data.name,this)}},this.animation.state.addListener(this.eventListener)),this.addChild(this.animation)}setAnimation(t,e,i,...n){return this.actionName=e,this.loop=i,this.trackIndex=t,this.trackTimeIndex=0,this.afterTrackTime=n,this.animation.state.setAnimation(t,e,i)}addAnimation(t,e,i){this.animation.state.addAnimation(t,e,i,0)}setSkin(t){this.animation.skeleton.setSkinByName(t)}advanceTime(t){return this.animation.update(.01666666666667),this.afterTrackTime&&this.trackTimeIndex<this.afterTrackTime.length?this.animation.state.tracks[this.trackIndex].trackTime>=this.afterTrackTime[this.trackTimeIndex]&&(this.trackTimeIndex++,this.emit(Da,this)):(this.trackTimeIndex=0,this.afterTrackTime=null),!0}isCurrentAction(t){return this.actionName===t}hasAnimation(t){return this.animation.state.hasAnimation(t)}set tint(t){this.animation.tint=t,this.additionalAssets&&this.additionalAssets.forEach((e,i)=>{e.tint=t})}get animated(){return this._animated}set animated(t){t!==this._animated&&(this._animated=t,t?_.add(this):_.remove(this))}get currentAction(){return this.actionName}addCompleteListener(t){let e={complete:i=>t(i.trackIndex,i.loopsCount())};return this.animation.state.addListener(e),e}removeCompleteListener(t){this.animation.state.removeListener(t)}removeSpineEventListener(){this.eventListener&&this.animation.state.removeListener(this.eventListener)}removeAllCompleteListener(){this.animation.state.clearListeners()}setVisibleAnimated(t){this.visible=this.animated=t}set timeScale(t){this.animation.state.timeScale=t}set continuous(t){this._continuous=t}getSlotContainerByName(t){return this.animation.slotContainers[this.animation.skeleton.findSlotIndex(t)]}getAdditionalAssets(){return this.additionalAssets}addWidgetToSlotContainer(t,e,i,n){let s=this.getWidgetByName(e),r=this.getSlotContainerByName(t);if(s&&r){if(i&&r.removeChildren(),n){let o=s.scale.y;s.scale.set(s.scale.x,-o)}r.addChild(s),this.additionalAssets||(this.additionalAssets=[]),this.additionalAssets.push(s)}}activate(){super.activate(),this.trackIndex!==void 0&&this.actionName!=null&&!this._continuous&&(this.animation.skeleton.setToSetupPose(),this.animation.state.clearTrack(this.trackIndex),this.setAnimation(this.trackIndex,this.actionName,this.loop)),this.animated&&_.add(this)}deactivate(){_.remove(this),super.deactivate()}getWidgetByName(t){return y.get("widgetService").get(t)}resetTrackTime(){this.setTrackTime(0),this.animation.update(0)}endTrackTime(){this.setTrackTime(this.animation.state.tracks[this.trackIndex].trackEnd)}setTrackTime(t){this.animation.state.tracks[this.trackIndex].trackTime=t}static create(t,e){if(M.type!==PIXI.RENDERER_TYPE.WEBGL)return null;let i=E.get("context"),n=D,s=i.resolve(u(t,"res"),e.context),r=a(t,"speed",1),o=n.resolve(s),l=new ht(o.spineData,u(t,"action"),g(t,"loop",!0),g(t,"event",!1)),c=u(t,"skin"),h=a(t,"trackTime",0);return c&&l.setSkin(c),h&&l.setTrackTime(h),N(l,t,e),l.animation.state.timeScale=r,l.tint=a(t,"tint",16777215),l.animated=g(t,"auto"),l.continuous=g(t,"continuous",!1),V(t,(f,x)=>{f.nodeName==="slot"&&l.addWidgetToSlotContainer(u(f,"name"),u(f,"widget"),g(t,"clearFirst",!1))}),l.animated||l.animation.update(0),l}};ht=Aa([p({tag:"spineAnimation"})],ht);function Ba(t,e,i){let n=ue(t,e,i);return yi(n,e,i),n.selected=q(e,"selected")==="true",n.command=u(e,"command"),n.sound=u(e,"sound","button"),n}var Na=Object.defineProperty,Ra=Object.getOwnPropertyDescriptor,Ma=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ra(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Na(e,i,s),s};let ut=class extends S{constructor(){super(),this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpOutsideHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpOutsideHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonUpHandler(t){}buttonDownHandler(t){}buttonClickedHandler(){this.selected=!this._selected,Pi(this.sound),!Ie("onClick",this)&&this.command&&T.emit(this.command,{source:se.Mouse,context:this})}buttonUpOutsideHandler(){}set selected(t){this._selected=t,t?(this.down&&(this.down.visible=!0),this.up&&(this.up.visible=!1)):(this.down&&(this.down.visible=!1),this.up&&(this.up.visible=!0))}get selected(){return this._selected}get currentButton(){return this.down&&this.down.visible?this.down:this.up&&this.up.visible?this.up:null}static create(t,e){return Ba(ut,t,e)}};ut=Ma([p({tag:"toggleButton"})],ut);var Ua=Object.defineProperty,Wa=Object.getOwnPropertyDescriptor,$a=(t,e,i,n)=>{for(var s=n>1?void 0:n?Wa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ua(e,i,s),s};let ci=class extends F{constructor(){super(...arguments),this.keybindings=[],this.keys=[]}keyDownHandler(t){if(this._enabled&&t&&t.key){let e=t.key.toLowerCase();if(this.keys.indexOf(e)===-1){this.keys.push(e);let i=this.getKeybinding();i&&i.emitOnKeyPressed&&T.emit(i.command,{source:se.Keyboard,key:e})}}}keyUpHandler(t){if(t&&t.key){let e=t.key.toLowerCase(),i=this.keys.indexOf(e),n=this.getKeybinding();n&&!n.emitOnKeyPressed&&T.emit(n.command,{source:se.Keyboard,key:e}),i>-1&&this.keys.splice(i,1)}}getKeybinding(){for(let t of this.keybindings){if(t.scene!==L.current.id)continue;let e=!0;for(let i of t.keys)if(this.keys.indexOf(i)===-1){e=!1;break}if(e)return t}}configure(t){this.options=t,V(t,(e,i)=>{let n=u(e,"when"),s=n.indexOf("."),r="";s!==-1&&(r=n.substr(s+1),n=n.substr(0,s)),this.keybindings.push({keys:u(e,"key").split("+"),command:u(e,"command"),when:r,scene:n,emitOnKeyPressed:g(e,"emitOnKeyPressed")})})}set enabled(t){this._enabled=t}startup(){this._enabled=!0,window.addEventListener("keydown",t=>this.keyDownHandler(t)),window.addEventListener("keyup",t=>this.keyUpHandler(t))}shutdown(){this._enabled=!1,window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("keyup",this.keyUpHandler),this.keybindings=[]}};ci=$a([p({tag:"keyboardService",category:"service"})],ci);var Va=Object.defineProperty,Fa=Object.getOwnPropertyDescriptor,ja=(t,e,i,n)=>{for(var s=n>1?void 0:n?Fa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Va(e,i,s),s};let ct=class extends S{constructor(){super(...arguments),this.cheatKeys={}}initCommand(){for(let t=0;t<10;t++)this.cheatKeys[t.toString()]&&(T.off("cheat"+t),T.on("cheat"+t,e=>{this.highlight(e.key),B().cheat=e.key}));T.off("cheatToggle"),T.on("cheatToggle",t=>{this.toggleVisibility()})}init(t){this.removeChildren();let e=kt(b.width,21,0);e.y=-1,e.alpha=.7,this.addChild(e);let i=this.cheatStr.split(","),n=[];n.push(this.createText("press")),n.push(this.createText("0:Hide Bar"));for(let s of i){let r=s.split(":")[0];this.cheatKeys[r]=s.split(":")[1],n.push(this.createText(s,t==r))}n.push(this.createText('then press "SPIN"')),this.texts=n,this.arrange()}highlight(t){this.init(t)}arrange(){let t=b.width,e=0;for(let s of this.texts)e+=s.width;let i=(t-e)/(this.texts.length+1),n=i;for(let s=0;s<this.texts.length;s++)this.texts[s].x=n,n+=i+this.texts[s].width}toggleVisibility(){B().demo!="1"||!C.desktop?this.visible=!1:this.visible=!this.visible}createText(t,e){let i=new PIXI.Text(t,{fontFamily:"Arial",fontSize:"16px",fill:e?15982143:16777215});return i.y=1,this.addChild(i),i}static create(t,e){let i=ue(ct,t,e);return i.cheatStr=u(t,"keys"),i.init(),i.initCommand(),i}};ct=ja([p({tag:"cheatBar"})],ct);var Ha=Object.defineProperty,Ga=Object.getOwnPropertyDescriptor,ka=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ga(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ha(e,i,s),s};const Xa="events:winbox";let pt=class extends S{constructor(){super(...arguments),this.autohide=!0,this.accumulative=!1}init(){this.totalBet||(this.totalBet=this.getComponentByID("totalBet")),this.balance||(this.balance=this.getComponentByID("balance")),this.time||(this.time=this.getComponentByID("time")),(this.usertime||this.time)&&(this.usertime&&(this.usertime.hasComma=!1),this.time&&(this.time.hasComma=!1),_.add(this)),this.username&&B().displayName&&(this.username.hasComma=!1,this.username.value=B().displayName),I().miniFooter&&(this.balance.visible=this.iconBal.visible=!1,this.win.visible=this.iconWin.visible=!0,this.labelBalWin.value=ee("win"));let e="";C.platform!=="mini"&&(e=It(B().currency,I().CURRENCY_SYMBOL)),this.winBoxLabel.prefix=ns(B().currency,I().CURRENCY_SYMBOL),this.winBoxLabel.updatePrefixSuffix(),this.totalBet.prefix=this.win.prefix=this.balance.prefix=e,this.totalBet.updatePrefixSuffix(),this.win.updatePrefixSuffix(),this.balance.updatePrefixSuffix()}updateTotalBet(e){this.totalBet&&(this.totalBet.value=ae(e))}animateBalance(e){this.balance.value=ae(e)}updateBalance(e){this.balance.setValueDirectly(ae(e))}updateWinAmount(e){this.win.value=ae(e)}directUpdateWinAmount(e){this.win.setValueDirectly(ae(e))}get winBoxLabel(){return this._winBoxLabel===void 0&&(this._winBoxLabel=this.getComponentByID("winBoxLabel")),this._winBoxLabel}showBox(e){if(this.winBox)return Z.emit(Xa,e),this.winBoxSound=zt("winmeter","default",!0),new Promise((i,n)=>{this.winBox.visible=!0,this.accumulative||this.winBoxLabel.reset(),this.winBoxLabel.value=this.accumulative?this.winBoxLabel._value.plus(e).toString():e.toString(),this.activate(),clearTimeout(this.showTimer),this.showTimer=setTimeout(()=>{this.autohide&&this.hideBox(),i()},this.winBoxLabel.options.duration+1e3)})}hideBox(){this.winBox&&(clearTimeout(this.showTimer),Vi(this.winBoxSound),this.winBox.visible=!1,this.winBoxSound=null,this.winBoxLabel.deactivate())}resetWinAmount(){this.win.reset(),this.hideBox()}advanceTime(e){return this.usertime?this.usertime.value=Bi(8):this.time&&(this.time.value=Bi(8,!0)),!this.winBox.visible&&this.winBoxSound&&Vi(this.winBoxSound),!0}deactivate(){this.hideBox(),(this.usertime||this.time)&&_.remove(this)}static create(e,i){let n=ue(pt,e,i);return n.init(),n}};pt=ka([p({tag:"footerBar"})],pt);var Ya=Object.defineProperty,qa=Object.getOwnPropertyDescriptor,za=(t,e,i,n)=>{for(var s=n>1?void 0:n?qa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ya(e,i,s),s};let dt=class extends pt{init(t){super.init();let e="";t&&(e=It(B().currency,I().CURRENCY_SYMBOL)),this.totalBet.prefix=this.balance.prefix=this.win.prefix=e,this.totalBet.updatePrefixSuffix(),this.balance.updatePrefixSuffix(),this.win.updatePrefixSuffix()}static create(t,e){let i=ue(dt,t,e);return i.init(g(t,"includeCurrency")),i}};dt=za([p({tag:"footerBar"})],dt);var Ka=Object.defineProperty,Ja=Object.getOwnPropertyDescriptor,Qa=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ja(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ka(e,i,s),s};let U=class extends S{constructor(){super(),this.clearMessage()}showMessage(t,e,i){if(!(!this.txt||e!==void 0&&e===0))if(t!==void 0){let n=ee(t);if(n&&n!=="undefined"){let s="";e&&(s=It(B().currency,I().CURRENCY_SYMBOL)+ae(e)),this.fade&&this.fade.stop(),this.txt.value=n.replace("%number%",i?i.toString():"").replace("%win%",s).replace("%npl%",i>1?"s":"").replace("%ppl%",i===1?"s":""),this.visible?this.alpha=1:this.fade=Re(this,200),this.visible=!0}else this.clearMessage()}else this.clearMessage()}clearMessage(){!this.txt||!this.visible||(this.fade&&this.fade.stop(),this.fade=bi(this,200,()=>{this.txt.value="",this.visible=!1}))}static create(t,e){return ue(U,t,e)}};U.SPIN="msg_spin";U.NO_WIN="msg_nowin";U.LINE_WIN="msg_linewin";U.SCATTER_WIN="msg_scatterwin";U.WILD_WIN="msg_wildwin";U.FEATURE_WIN="msg_featurewin";U.BONUS_WIN="msg_bonuswin";U.WAYS_WIN="msg_wayswin";U.LINES_WIN="msg_lineswin";U.BONUS="msg_bonus";U.FREESPIN="msg_freespin";U.RESPIN="msg_respin";U.RESPINS="msg_respins";U=Qa([p({tag:"hudMessage"})],U);var Za=Object.defineProperty,el=Object.getOwnPropertyDescriptor,tl=(t,e,i,n)=>{for(var s=n>1?void 0:n?el(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Za(e,i,s),s};let ft=class extends S{constructor(e){super(),this.pages=[],this.indicators=[],this.options=e}initIndicators(){let e=this.options.numPages;if(!(e<2)){this.indicators=[];for(let i=0;i<e;i++){let n=this.getIndicators(),s=this.getIndicators(!0);n.y=s.y=b.height-this.y-70+this.options.indicatorY,n.x=s.x=(b.width-this.options.indicatorGap*(e-1)-n.width)/2+i*this.options.indicatorGap,this.setIndicatorHandler(s,i),this.addChild(n),this.addChild(s),this.indicators.push({on:n,off:s})}this.updatedHitArea(b.width)}}setIndicatorHandler(e,i){e.interactive=e.buttonMode=!0,e.on("mouseup",n=>this.gotoPage(i)).on("touchend",n=>this.gotoPage(i))}updatedHitArea(e){if(!this.indicators||!this.indicators.length)return;let i=this.indicators[0].off,n=this.options.indicatorGap;this.hitArea=new PIXI.Rectangle(this.x,this.y,e-this.x,i.y-this.options.indicatorY),i.hitArea=new PIXI.Rectangle(-n/10,-n/2,i.width+n/5,i.height+n)}initPages(e,i){let n=this.options.numPages;this.pages=[];for(let s=0;s<n;s++){let r=ne.instantiate("@img/info"+(s+1));this.addChild(r),this.pages.push(r)}}initListeners(){this.options.numPages>1&&(this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("touchmove",this.dropdownMoveHandler).on("mousemove",this.dropdownMoveHandler))}getIndicators(e=!1){let i;return this.options.indicatorBase?i=ne.instantiate(this.options.indicatorBase):i=ne.instantiate(e?this.options.indicatorOff:this.options.indicatorOn),e&&this.options.indicatorOffTint>-1&&(i.tint=this.options.indicatorOffTint),!e&&this.options.indicatorOnTint>-1&&(i.tint=this.options.indicatorOnTint),i}get currentPage(){return this.pages[this._currentPageIndex]}get currentPageIndex(){return this._currentPageIndex}setPageIndex(e,i=!1){if(this.options.numPages<2||this._currentPageIndex===e&&!i)return;for(let s=0;s<this.pages.length;s++)this.pages[s].visible=!1,this.indicators[s].on.visible=!1,this.indicators[s].off.visible=!0;let n=this.pages[this._currentPageIndex];n&&n.deactivate(),this._currentPageIndex=e,this.pages[e].activate(),this.currentPage.visible=!0,this.indicators[e].on.visible=!0,this.indicators[e].off.visible=!1}gotoPage(e){this.interactive=!1,this.isDown=!1;let i={x:this.currentPage.x},n=-1,s=this.currentPage.width;e>this.currentPageIndex&&(s*=n,n=1),this.pages[e].x=this.currentPage.width*-n,this.pages[e].visible=!0,new TWEEN.Tween(i).to({x:s},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=i.x,this.pages[e].x=this.currentPage.x+this.currentPage.width*n}).onComplete(()=>{this.interactive=!0,this.currentPage.deactivate(),this.setPageIndex(e),this.track()}).start()}buttonDownHandler(e){this.isDown=!0,this.touchDownX=e.data.getLocalPosition(this,e.data.global).x}buttonUpHandler(e){if(!this.isDown)return;this.isDown=!1;let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;if(this.interactive=!1,i>0){let n={x:this.currentPage.x};new TWEEN.Tween(n).to({x:i>100?this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=n.x,this.prevPage.x=this.currentPage.x-this.currentPage.width}).onComplete(()=>{this.interactive=!0,i>100&&(this.setPageIndex(this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1),this.track())}).start()}else{let n={x:this.currentPage.x};new TWEEN.Tween(n).to({x:i<-100?-this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=n.x,this.nextPage.x=this.currentPage.x+this.currentPage.width}).onComplete(()=>{this.interactive=!0,i<-100&&(this.setPageIndex(this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1),this.track())}).start()}}track(){re.screen({name:"info"+this.currentPageIndex})}get nextPage(){return this.pages[this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1]}get prevPage(){return this.pages[this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1]}dropdownMoveHandler(e){if(this.isDown){let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;this.currentPage.x=i,i>0?(this.nextPage.visible=!1,this.prevPage.visible=!0,this.prevPage.x=this.currentPage.x-this.currentPage.width):(this.prevPage.visible=!1,this.nextPage.visible=!0,this.nextPage.x=this.currentPage.x+this.currentPage.width)}}static create(e,i){return Nt(ft,e,i)}};ft=tl([p({tag:"infoPanel"})],ft);function Nt(t,e,i){ie(e,"indicatorOnTint",d.resolve(u(e,"indicatorOnTint"))),ie(e,"indicatorOffTint",d.resolve(u(e,"indicatorOffTint")));let n=new t({numPages:parseInt(d.resolve(u(e,"pages"))),indicatorBase:u(e,"indicatorBase"),indicatorOn:u(e,"indicatorOn"),indicatorOff:u(e,"indicatorOff"),indicatorOnTint:a(e,"indicatorOnTint",-1),indicatorOffTint:a(e,"indicatorOffTint",-1),indicatorOffsetYL:a(e,"indicatorOffsetYL",50),indicatorOffsetYP:a(e,"indicatorOffsetYP",180),indicatorGap:a(e,"indicatorGap",80),indicatorY:a(e,"indicatorY",0)});return N(n,e,i),n.initPages(e,i),n.initIndicators(),n.initListeners(),n.setPageIndex(0),n}var il=Object.defineProperty,sl=Object.getOwnPropertyDescriptor,nl=(t,e,i,n)=>{for(var s=n>1?void 0:n?sl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&il(e,i,s),s};let mt=class extends ft{initPages(e,i){this.pages=[],V(e,(n,s)=>{let r=oe(n,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}static create(e,i){return Nt(mt,e,i)}};mt=nl([p({tag:"infoPanel"})],mt);var rl=Object.defineProperty,ol=Object.getOwnPropertyDescriptor,al=(t,e,i,n)=>{for(var s=n>1?void 0:n?ol(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&rl(e,i,s),s};let gt=class extends mt{initIndicators(){let e=this.options.numPages;if(!(e<2)){for(let i=0;i<e;i++){let n=this.getIndicators(),s=this.getIndicators(!0);this.addChild(n),this.addChild(s),this.indicators.push({on:n,off:s})}this.setIndicatorsPoistion(!0)}}setIndicatorsPoistion(e=!1){let i=this.options.numPages;if(i<2)return;let n=y.get("orientationService").getOrientation();for(let s=0;s<i;s++){let r=this.indicators[s].on,o=this.indicators[s].off,l,c;n===w.LANDSCAPE?(l=b.height-this.y-this.options.indicatorOffsetYL+this.options.indicatorY,c=(b.width-this.options.indicatorGap*(i-1)-r.width)/2+s*this.options.indicatorGap):(l=b.width-this.y-this.options.indicatorOffsetYP+this.options.indicatorY,c=(b.height-this.options.indicatorGap*(i-1)-r.width)/2+s*this.options.indicatorGap),r.y=o.y=l,r.x=o.x=c,e&&this.setIndicatorHandler(o,s)}this.updatedHitArea(n===w.LANDSCAPE?b.width:b.height)}initPages(e,i){this.pages=[],V(e,(n,s)=>{let r=oe(n,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}refreshCurrentPage(){this.setPageIndex(this.currentPageIndex,!0)}onOrientationChange(e){super.onOrientationChange(e),this.setIndicatorsPoistion(),this.refreshCurrentPage()}static create(e,i){return Nt(gt,e,i)}};gt=al([p({tag:"infoPanel"})],gt);var ll=Object.defineProperty,hl=Object.getOwnPropertyDescriptor,ul=(t,e,i,n)=>{for(var s=n>1?void 0:n?hl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ll(e,i,s),s};let vt=class extends gt{setIndicatorsPoistion(t=!1){let e=this.options.numPages;if(e<2)return;let i=y.get("orientationService").getOrientation();for(let n=0;n<e;n++){let s=this.indicators[n].on,r=this.indicators[n].off,o,l;i===w.LANDSCAPE?(o=b.minHeight-this.options.indicatorOffsetYL,l=(b.minWidth-this.options.indicatorGap*(e-1)-s.width)/2+n*this.options.indicatorGap):(o=b.minWidth-this.options.indicatorOffsetYP,l=(b.minHeight-this.options.indicatorGap*(e-1)-s.width)/2+n*this.options.indicatorGap),s.y=r.y=o,s.x=r.x=l,t&&this.setIndicatorHandler(r,n)}this.updatedHitArea(i===w.LANDSCAPE?b.width:b.height)}setIndicatorHandler(t,e){super.setIndicatorHandler(t,e),t.hitArea=new PIXI.Rectangle(-2,-2,t.width+4,t.height+6),t.cursor="pointer"}updatedHitArea(t){if(!this.indicators||!this.indicators.length)return;let e=this.indicators[0].off;this.hitArea=new PIXI.Rectangle(-this.x,0,t,e.y+e.height+6)}initPages(t,e){let i=K(t,"jackpotPagesNo");if(i.length>0&&!ys()){let s=1;this.pages=[],V(t,(r,o)=>{if(i.indexOf(s++)<0){let l=oe(r,{scene:e.scene,parent:this,context:e.context});this.addChild(l),this.pages.push(l)}}),this.options.numPages=this.pages.length;return}super.initPages(t,e)}static create(t,e){return Nt(vt,t,e)}};vt=ul([p({tag:"infoPanel"})],vt);var cl=Object.defineProperty,pl=Object.getOwnPropertyDescriptor,dl=(t,e,i,n)=>{for(var s=n>1?void 0:n?pl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&cl(e,i,s),s};let Be=class extends ge{static create(t,e){ie(t,"fill",d.resolve(u(t,"fill")));let i=Ci(Be,t,e);return i.value=d.resolve(u(t,"value")),i}initText(){let t=y.get("fontService"),e=t?Math.round(t.adjustment.size*this.options.style.fontSize):0,i=t?t.adjustment.x:0,n=t?t.adjustment.y:0;this.options.style.fontSize+=e;let s=this.options.style;this.isDefaultFont?(s.fontFamily="Arial",this.text=new PIXI.Text(this.options.value,s),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)):this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:s.fontSize,fontName:s.fontFamily}),this.text.tint=s.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,s),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text),this.text.x+=Math.round(this.options.style.fontSize*i),this.text.y+=Math.round(this.options.style.fontSize*n)}get isDefaultFont(){return d.LANGUAGE===P.Khmer||d.LANGUAGE===P.Turkish||d.LANGUAGE===P.Portuguese||d.LANGUAGE===P.Hindi}};Be=dl([p({tag:"langLabel"})],Be);Object.defineProperty(Be.prototype,"value",{get:function(){return this.text.text},set:function(t){this.text.text=Dt(t),this.update()}});let fl=!0,Se;function ml(){if(Se!==void 0)return Se;Se=!1;try{(C.mobile||C.tablet)&&"userActivation"in navigator&&navigator.userActivation.hasBeenActive&&"vibrate"in navigator&&(Se=!0)}catch{}return Se}function gl(){return fl}var vl=Object.defineProperty,bl=Object.getOwnPropertyDescriptor,yl=(t,e,i,n)=>{for(var s=n>1?void 0:n?bl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&vl(e,i,s),s};let ve=class extends S{constructor(t){super(),this.options=t}init(t){this.context=t,this.visible=!1,this.initCloseClickable(),this.arrangeButtons(),this.checkSounds(),this.checkVibration()}show(){}arrangeButtons(){this.setLandscapeButtons(),this.setPortraitButtons()}checkSounds(){let t=y.get("soundService");this.panel.landscape.sound.selected=this.panel.portrait.sound.selected=t.muted}checkVibration(){this.panel.landscape.vibration&&this.panel.portrait.vibration&&(this.panel.landscape.vibration.selected=this.panel.portrait.vibration.selected=gl())}setLandscapeButtons(){let t=this.panel.landscape;if(t.panelbglong&&t.panelbgshort){this.setDynamicLayout("landscape");return}let e=4,i=this.getButtonsOrder(t),n=Math.floor(this.options.l_center-this.options.l_gap*i.buttons.length/2+this.options.l_gap/2);for(var s=0;s<i.buttons.length;s++)i.buttons[s].visible=!0,i.buttons[s].x=n+this.options.l_gap*s,i.labels[s].visible=!0,i.labels[s].x=i.buttons[s].x-e,i.labels[s].y=i.buttons[s].y+i.buttons[s].height-Math.floor(i.labels[s].height/2)}setPortraitButtons(){this.setDynamicLayout("portrait")}setDynamicLayout(t){let e=4,i=t.charAt(0)+"_",n=this.panel[t],s=this.getButtonsOrder(n);n.panelbgshort.visible=!1,n.panelbglong.visible=!1;let r=[],o=0;for(var l=0;l<s.buttons.length;l++)l%this.options[i+"itemPerRow"]===0&&(r[o]=[]),r[o].push({button:s.buttons[l],label:s.labels[l]}),(l+1)%this.options[i+"itemPerRow"]===0&&o++;if(r.length==2)n.panelbgshort.visible=!1,n.panelbglong.visible=!0,r.reverse();else{let f=n.panelbglong.height-n.panelbgshort.height;n.panelbgshort.visible=!0,n.panelbglong.visible=!1,n.logo.y+=f,n.close.y+=f}for(var c=0;c<r.length;c++){let f=Math.floor(this.options[i+"center"]-this.options[i+"gap"]*r[c].length/2+this.options[i+"gap"]/2);for(var h=0;h<r[c].length;h++)r[c][h].button.visible=!0,r[c][h].label.visible=!0,r[c][h].button.x=f+this.options[i+"gap"]*h,r[c][h].label.x=r[c][h].button.x-e,r[c][h].button.y=this.options[i+"row"][c],r[c][h].label.y=this.options[i+"row"][c]+r[c][h].button.height-Math.floor(r[c][h].label.height/2)}}getButtonsOrder(t){let e=[t.info,t.sound],i=[t.lblInfo,t.lblSound];return this.lobbyVisible&&(e.push(t.lobby),i.push(t.lblLobby)),t.settings&&(e.push(t.settings),i.push(t.lblSettings)),this.historyVisible&&(e.push(t.history),i.push(t.lblHistory)),this.homeVisible&&(e.push(t.home),i.push(t.lblHome)),this.vibrationVisible&&(t.vibration&&e.push(t.vibration),t.lblVibration&&i.push(t.lblVibration)),this.liveChatVisible&&(e.push(t.livechat),i.push(t.lblLiveChat)),this.helpVisible&&(e.push(t.help),i.push(t.lblHelp)),{buttons:e,labels:i}}hide(){this.close(),this.visible=!1}toggleAll(t){this.bonusbet&&(this.bonusbet.visible=t),this.fround&&(this.fround.visible=this.froundVisible&&t),this.help&&(this.help.visible=this.helpVisible&&t)}open(){return this.visible?!1:(this.closing=!1,this.openClose(),this.visible=!0,!0)}close(t){!this.visible||this.closing||(this.closing=!0,this.openClose(!0,()=>{this.closing=!1,this.visible=!1,this.emit(ve.MENU_CLOSED)}))}openClose(t,e){let i={scale:0,y:this.height},n={scale:1,y:0},s=TWEEN.Easing.Exponential.Out;t&&(i={scale:1,y:0},n={scale:0,y:this.height},s=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(n,100).easing(s).onUpdate(()=>{this.panel.scale.y=i.scale,this.panel.y=i.y}).onComplete(()=>{e&&e()}).start()}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.panel.landscape.close&&this.panel.landscape.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this),this.panel.portrait.close&&this.panel.portrait.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)}get froundVisible(){return B().fround}get lobbyVisible(){return this.context.realLobbyUrl&&this.context.HIDE_LOBBY==="0"}get liveChatVisible(){return this.context.livechatUrl}get historyVisible(){return!this.context.FUNPLAY}get homeVisible(){return this.context.HOME_URL}get vibrationVisible(){return this.context&&this.context.isVibrationActivated&&ml()}get helpVisible(){return this.context.helpUrl}get buttonCloseLandscape(){return this.panel.landscape.close}get buttonClosePortrait(){return this.panel.portrait.close}static create(t,e){let i=K(t,"p-row");i.length===0&&(i=[350,235]);let n=new ve({l_center:a(t,"l-center",480),p_center:a(t,"p-center",270),l_gap:a(t,"l-gap",125),p_gap:a(t,"p-gap",125),l_itemPerRow:a(t,"l-itemPerRow",4),p_itemPerRow:a(t,"p-itemPerRow",4),l_row:K(t,"l-row"),p_row:i});return _i(n,t,e)}onOrientationChange(t){super.onOrientationChange(t),this.checkSounds(),this.checkVibration()}};ve.MENU_CLOSED="events:menu_closed";ve=yl([p({tag:"menu"})],ve);var wl=Object.defineProperty,xl=Object.getOwnPropertyDescriptor,Rt=(t,e,i,n)=>{for(var s=n>1?void 0:n?xl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&wl(e,i,s),s};let be=class extends Ue{onCreated(){this.initCommand(),this.playSound(),this.onSceneResize()}initCommand(){T.on("infoPage",()=>{this.backClickHandler()})}backClickHandler(){L.replace("main")}playSound(t=!0){t?this.soundService.switchScope(!0)&&(this.bgmInfo=this.soundService.play("bgm-info","info")):(this.bgmInfo&&this.soundService.stop(this.bgmInfo.soundId),this.soundService.switchScope(),this.bgmInfo=null)}onSceneResize(){let t=this.layoutService.deviceViewportOffset;this.btnBack.x=this.btnBackX-t.x}onOrientationChange(t){super.onOrientationChange(t),this.btnBackX=this.btnBack.x}exit(){T.off("infoPage"),this.playSound(!1),super.exit()}};Rt([Me("layoutService")],be.prototype,"layoutService",2);Rt([Me("orientationService")],be.prototype,"orientationService",2);Rt([Me("soundService")],be.prototype,"soundService",2);be=Rt([p({tag:"infoPage",category:"scene"})],be);var Sl=Object.defineProperty,Pl=Object.getOwnPropertyDescriptor,_l=(t,e,i,n)=>{for(var s=n>1?void 0:n?Pl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Sl(e,i,s),s};let bt=class extends Ue{enter(){super.enter(),_.add(this),this.version&&(this.version.value="v"+d.engineVersion)}advanceTime(t){return this.circle&&(this.circle.rotation+=.2),!0}exit(){super.exit(),_.remove(this)}};bt=_l([p({tag:"loading",category:"scene"})],bt);const me=class me{constructor(){me.canvas||(me.canvas=document.getElementById("stage"))}createDiv(e){var i=document.createElement("div");return i.innerHTML=e,i}createPlaceholder(e){var i=document.createElement("div");return i.style.height=e,i}static getBase(){return this.base||(this.base=document.createElement("div"),this.base.style=this.canvas.style,this.canvas.parentElement.insertBefore(this.base,this.canvas)),this.base}render(){}static getFont(){let e=d.LANGUAGE;return this.font[e]||this.font[P.English]}show(){this.content&&(this.content.style.display="block")}hide(){this.content&&(this.content.style.display="none")}static querySelector(e){let i=new me;return i.content=document.querySelector(e),i}};me.font={en:"DIN",cs:"Microsoft YaHei",jp:"Kozuka Mincho Pro",kh:"Khmer OS Battambang",kr:"Nokora",pt:"Arial",th:"Tahoma",tr:"Arial",vn:"Tahoma"};let yt=me;function Xi(t){let e=[];return t&&t.forEach((i,n)=>{e.push(Ol(i))}),e}function Ol(t){let e=[];return t.rowPositions&&t.rowPositions.forEach((i,n)=>{i>0&&e.push([n,i-1])}),{index:t.line,win:t.win,multiplier:t.multiplier,wildMultiplier:t.wildMultiplier||0,positions:e,symbol:t.symbol,type:t.type}}function Il(t){if(t.value.bonus){let e,i;if(t.value.bonus.gameResult.spinResult?e=t.value.bonus.gameResult.spinResult:t.value.bonus.gameResult&&(e=t.value.bonus.gameResult),e)return i=t.value.bonus,{id:String(i.id)||void 0,key:i.guid||void 0,count:i.counter||0,step:i.currentStep||void 0,wheels:e.wheel?e.wheel.reels:[],mode:e.mode||0,position:Xi(e.winPositions),bonusPosition:Xi(e.bonusPositions),data:{win:new Decimal(t.value.bonus.gameResult.win||0),balance:new Decimal(t.value.bonus.gameResult.balance&&t.value.bonus.gameResult.balance.value?t.value.bonus.gameResult.balance.value:0)},rsp:i}}return null}var El=Object.defineProperty,Cl=Object.getOwnPropertyDescriptor,Mt=(t,e,i,n)=>{for(var s=n>1?void 0:n?Cl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&El(e,i,s),s};let ye=class extends bt{enter(){super.enter(),yt.querySelector(".gplogo").hide(),yt.querySelector(".loader").hide()}onCreated(){this.player.bet.lines=parseInt(d.numBetLines),d.creditsBetLines&&(this.player.bet.credits=parseInt(d.creditsBetLines)),this.netService.signIn().then(t=>{this.netService.json?t.value&&(t.value.sessionKey?(this.context.USER_ID=this.player.sessionKey=t.value.sessionKey,t.value.memberName&&(this.player.accountName=this.player.displayName=t.value.memberName)):this.context.USER_ID=this.player.sessionKey=t.value):(this.context.USER_ID=this.player.sessionKey=t.token,t.name&&(this.player.accountName=this.player.displayName=t.name))}).then(()=>Promise.all([this.netService.getBalance().then(t=>{if(this.netService.json?t.value&&(this.player.balance=new Decimal(t.value.amount),t.value.currency!==void 0&&(this.player.currency=t.value.currency)):(this.player.balance=t.balance,this.player.currency=t.currency,t.userid!==void 0&&(this.player.accountName=t.userid)),this.context.ANONYMOUS)this.context.TRACKER_USER_ID=this.context.USER_ID;else{this.context.TRACKER_USER_ID=this.player.accountName;let e=window.appInsights;e&&e.setAuthenticatedUserContext(this.context.TRACKER_USER_ID)}}),this.netService.getBets().then(t=>{if(this.netService.json){if(t.value){if(E.map("gameState").toValue(t.value),this.player.symbols=t.value.wheel.reels,this.player.betValues=t.value.coins,t.value.extraGameSettings&&this.context.multiplierAsCreditBet){let e=t.value.extraGameSettings.creditBet;this.player.multiplierValues=e||t.value.multipliers}else this.player.multiplierValues=t.value.multipliers;if(this.player.bet.amount=t.value.coins[0],this.player.setDefaultBet(),this.player.betValue=t.value.bet||t.value.coins[0],this.player.demo=t.value.funPlayDemo?"1":"0",this.player.getBet=t.value,this.player.bonus=Il(t),this.player.bonus&&(this.player.restoreBonus=!0,this.player.bonus.wheels&&(this.player.symbols=this.player.bonus.wheels)),t.value.multiplier?this.player.multiplierValues.indexOf(this.player.bet.multiplier)>=0&&(this.player.multiplierIndex=this.player.multiplierValues.indexOf(this.player.bet.multiplier)):this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"){let e=t.value.freeGameInfo;t.value.dailyFreeGameInfo&&(e=t.value.dailyFreeGameInfo),e&&(this.player.fround=e,this.player.froundCount=e.round)}}this.extraGetBetsSetting(t)}else E.map("gameState").toValue(t),this.player.symbols=t.wheels,this.player.betValues=t.betValues,this.player.multiplierValues=t.multiplier,this.player.bet.amount=nn(t.betValues),this.player.setDefaultBet(),this.player.betValue=t.bet,this.player.demo=t.demo,this.player.getBet=t.data,this.player.multiplierIndex=0,this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"&&(this.player.fround=t.fround,this.player.froundCount=t.froundCount),t.bonus&&(this.player.bonus=t.bonus,this.player.restoreBonus=!0)}),this.netService.jackpot().then(t=>{t.value&&t.value.pool?this.player.progressiveJackpot=t.value.pool:this.context.isProgressiveJackpot="false"}).catch(t=>{this.context.isProgressiveJackpot="false"})])).then(()=>L.replace(this.next||"splash")).catch(t=>{t.code?Fi(t.code,!0):Fi(t.error?t.error:"0",!0)})}extraGetBetsSetting(t){}};Mt([wi("context")],ye.prototype,"context",2);Mt([Me("netService")],ye.prototype,"netService",2);Mt([wi("user")],ye.prototype,"player",2);ye=Mt([p({tag:"login",category:"scene"})],ye);var Ll=Object.defineProperty,Tl=Object.getOwnPropertyDescriptor,Al=(t,e,i,n)=>{for(var s=n>1?void 0:n?Tl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ll(e,i,s),s};const Yi=0;let pi=class extends F{constructor(){super(...arguments),this.fround=!1,this.json=!0}configure(e){this.appContext=I();let i=D.getApiBy("apiName")||"";this.service=(D.getApiBy("service")??"https://rslotservice.w88api.com/onlinecasino/")+i+"/"}startup(){this.player=B(),this.refreshTicket()}refreshTicket(){this.ticket=ke().toString()}send(e,i=!1){return this.refreshTicket(),e+="&ts="+this.ticket,re.request({id:this.ticket,url:e,method:"GET"}),i==!1&&this.appContext.startInactivityTimer(),new Promise((n,s)=>{ds(e).then(r=>r.responseText).then(r=>{let o=JSON.parse(r);o?(re.response({requestID:this.ticket,data:o}),o.isError?s({code:o.error,message:""}):n(o)):s({code:Yi,message:"Unexpected Error"})}).catch(r=>{s({code:Yi,message:"Unexpected Error"})})})}signIn(){if(A(this.appContext.OPERATOR))return new Promise((e,i)=>i({code:77,message:""}));if(this.isWebGLOnlyNotSupported)return new Promise((e,i)=>i({code:997,message:""}));if(this.appContext.FUNPLAY){let e=this.service+"User/GetFunPlayKey?op="+encodeURIComponent(this.appContext.OPERATOR);return this.send(e)}else{if(this.appContext.AUTHENTICATED==="1")return Promise.resolve({value:{sessionKey:this.appContext.TOKEN,memberName:this.player.accountName}});let e=this.service+"User/Authenticate?op="+encodeURIComponent(this.appContext.OPERATOR)+"&token="+encodeURIComponent(this.appContext.TOKEN);return this.send(e)}}getBalance(){let e=this.service+"User/GetBalance?token="+this.player.sessionKey+"&game="+this.appContext.ID+"&platform="+C.platform;return this.send(e)}getBets(){let e=this.service+"Game/GetBets/?game="+this.appContext.ID+"&key="+this.player.sessionKey;return this.send(e)}spin(e,i){let n=this.player.cheat||this.appContext.CHEAT,s=e.amount,r=e.multiplier;this.fround&&(s=this.player.froundBet,r=this.player.froundMul);let o=this.service+"Game/"+(this.fround?"FreeRound":"Spin")+"?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+s+(this.appContext.multiplierAsCreditBet?"&creditBet=":"&multiplier=")+r+(this.player.bonusBet?"&sidebet=1":"")+"&platform="+C.platform+(n?"&cheat="+n:"");return i&&i.forEach((l,c)=>{o+=`&${l.key}=${l.value}`}),this.player.cheat=void 0,this.send(o)}bonus(e,i){let n=this.player.cheat||this.appContext.CHEAT,s=this.service+"Game/BonusGame?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bonus="+e.key+"&param="+e.index+"&platform="+C.platform+(n?"&cheat="+n:"");return this.send(s)}jackpot(){if(!ys())return new Promise((i,n)=>n({code:33,message:""}));let e=this.service+"Jackpot/GetAvailableJackpot?game="+this.appContext.ID+"&token="+this.player.sessionKey+"&platform="+C.platform;return this.send(e,!0)}claimFround(){let e=this.service+"Game/ClaimDailyFreeSpin?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+this.player.froundBet+"&multiplier="+this.player.froundMul+"&platform="+C.platform;return this.send(e)}custom(e,i){let n=this.service+"Game/"+e+"/?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&platform="+C.platform;return i&&i.forEach((s,r)=>{n+=`&${s.key}=${s.value}`}),this.send(n)}get isWebGLOnlyNotSupported(){return d.webGLOnly&&d.webGLOnly==="true"&&M.type!==PIXI.RENDERER_TYPE.WEBGL}};pi=Al([p({tag:"netService",category:"service"})],pi);let Fe;function Dl(){if(Fe===void 0)try{Fe=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{Fe=!1}return Fe}const qi=[];class Bl{constructor(e=!1){this.isXDR=!1,e&&Dl()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,qi.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,n,s=!0){if(this.client.open("POST",e),n&&(this.client.responseType="json"),i&&s)return this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.send(i,!0);if(i&&!s)return this.client.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.send(i,!1)}afterDone(){this.isXDR&&Lt(qi,this.client)}send(e,i=!0){return new Promise((n,s)=>{setTimeout(()=>{e?i||this.client.send(JSON.stringify(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?n(this.client):s(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),s(new Error("Request timeout"))},this.client.onerror=r=>{this.afterDone(),s(new Error(r.toString()))}})}}function Nl(t,e,i,n=!0){return new Bl(!0).post(t,e,i,n)}var Rl=Object.defineProperty,Ml=Object.getOwnPropertyDescriptor,Ul=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ml(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Rl(e,i,s),s};let di=class extends pi{doubleUp(t){const e=`${this.service}Game/DoubleUp?game=${this.appContext.ID}&key=${this.player.sessionKey}&isLow=${t?"1":"0"}`;return this.send(e)}spin(t,e){this.refreshTicket();const i=C.platform,n=`${this.service}Game/Spin`,s=n+"?ts="+this.ticket;re.request({id:this.ticket,url:s,method:"POST"});const r={game:this.appContext.ID,key:this.player.sessionKey,bet:t,odds:e,platform:i},o=this.player.cheat||this.appContext.CHEAT;return o&&(r.cheat=o),new Promise((l,c)=>{Nl(n,r,!1,!1).then(h=>h.responseText).then(h=>{const f=JSON.parse(h);f?(re.response({requestID:this.ticket,data:f}),f.isError?c({code:f.error,message:""}):l(f)):c({code:0,message:"Unexpected Error"})}).catch(h=>{c({code:0,message:"Unexpected Error"})})})}};di=Ul([p({tag:"netService",category:"service"})],di);var Wl=Object.defineProperty,$l=Object.getOwnPropertyDescriptor,Vl=(t,e,i,n)=>{for(var s=n>1?void 0:n?$l(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Wl(e,i,s),s};let wt=class extends G{constructor(){super(...arguments),this._betCountMap={}}get betCountData(){const t=[];for(const e in this._betCountMap){const i=this._betCountMap[e];i>0&&t.push({bet:Number(e),volume:i})}return t}getBetButton(t){return this[`bet${t}`]}onBet(t,e){const i=this._betCountMap[e]||0;this._betCountMap[e]=i+1,this.refresh(),t.sparkle.visible||(t.sparkle.visible=!0,t.sparkle.play(1).then(()=>{t.sparkle.visible=!1}))}onClearBet(){this._betCountMap={},this.refresh()}refresh(){for(let t=2;t<=9;t++){const e=this.getBetButton(t),i=this._betCountMap[t]||0;e.box.bet.visible=i==0,e.box.amount.visible=i>0,e.box.amount.label.value=`${i}`}}showWinFrame(t){for(const e of t){const i=this.getBetButton(e.symbol);i.winFrame.setAnimation(0,"winFrame",!0),i.winFrame.setVisibleAnimated(!0)}}hideWinFrame(){for(let t=2;t<=9;t++)this.getBetButton(t).winFrame.setVisibleAnimated(!1)}static create(t,e){const i=new wt;return k(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i.refresh(),i}};wt=Vl([p({tag:"betPanel",category:"component"})],wt);var Fl=Object.defineProperty,jl=Object.getOwnPropertyDescriptor,Hl=(t,e,i,n)=>{for(var s=n>1?void 0:n?jl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Fl(e,i,s),s};let xt=class extends G{get beamLAngle(){return this._beamLAngle||(this._beamLAngle=this.argument1.split(",").map(t=>Number(t))),this._beamLAngle}get beamPAngle(){return this._beamPAngle||(this._beamPAngle=this.argument2.split(",").map(t=>Number(t))),this._beamPAngle}get beamAngle(){return this.orientation==w.LANDSCAPE?this.beamLAngle:this.beamPAngle}init(){}showBonus1(t){const e=this.bonus1.animation;return e.state.setAnimation(0,"bonusAL_entry",!1),e.state.addAnimation(0,"bonusAL_idle",!0,0),this.bonus1.setVisibleAnimated(!0),he(2e3).then(()=>this.showBeams(t).then(()=>(e.state.setAnimation(0,"bonusAL_exit",!1),he(1e3))))}showBonus2(t){return new Promise(e=>{const i=this.bonus2.getSlotContainerByName("FS_AMT");i.removeChildren(),i.addChild(this.multiperLayer[`_${t}`]),this.bonus2.setAnimation(0,"bonusBL",!1);const n=this.bonus2.addCompleteListener(()=>{this.bonus2.removeCompleteListener(n),e()});this.bonus2.setVisibleAnimated(!0)})}onOrientationChanged(t){this.orientation=t}getBeam(t){return this.beams[`beam${t}`]}showBeams(t){const e=this.beamAngle;for(let i=0;i<t.length;i++){const n=t[i],s=this.getBeam(i);s.setVisibleAnimated(!0),s.rotation=e[n.index]*Math.PI/180}return he(2e3).then(()=>{for(let i=0;i<t.length;i++)this.getBeam(i).setVisibleAnimated(!1)})}static create(t,e){const i=new xt;return k(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i.init(),i}};xt=Hl([p({tag:"bonusEffect",category:"component"})],xt);var Gl=Object.defineProperty,kl=Object.getOwnPropertyDescriptor,Xl=(t,e,i,n)=>{for(var s=n>1?void 0:n?kl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Gl(e,i,s),s};let St=class extends G{setRandomNumberValue(t){const e=t??tt(15,1);this.multiper.label.value=`${e}`,this.setMultiperBgStatus(e)}onBig(){this.selected="big",this.bet()}onSmall(){this.selected="small",this.bet()}toStop(t){return this.setRandomNumberValue(t),_.remove(this),_e(500)}bet(){this.setSmallBigBtnStatus(),_.add(this)}show(){this.reset(),this.visible=!0,Re(this,500,()=>{},1)}hide(){this.visible&&bi(this,500,()=>{this.visible=!1})}lose(t){this._disable=t,this.selected=void 0,this.setSmallBigBtnStatus()}reset(){this.selected=void 0,this.lose(!1),this.setRandomNumberValue(0)}setMultiperBgStatus(t){this.multiper.bgSlide.goto(t>7?"pink":t>0&&t<=7?"green":"blue")}setSmallBigBtnStatus(){const t=this._disable?"disable":"default";this.smallSlide.goto(this.selected==="small"?"highlight":t),this.bigSlide.goto(this.selected==="big"?"highlight":t)}advanceTime(t){return this.setRandomNumberValue(),!0}static create(t,e){const i=new St;return k(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i}};St=Xl([p({tag:"doubleSelecter",category:"component"})],St);const Yl=1,ql=0,zl=[.11,.1,.09,.08,0],Kl=[20,40,80,200,0],zi={defaultUp:(t,e,i)=>1/2*e*i*i+t*i,up:(t,e,i,n)=>{if(i=i/1e3,n=n/1e3,i==0)return 0;const s=(e-t)/i;return t*n+s*n*n/2},down:(t,e,i,n)=>{if(i=i/1e3,n=n/1e3,i==0)return 0;const s=(t-e)/i;return t*n-s*n*n/2}};function Jl(t,e="components/"){return D.resolve("@atlas/"+e+t+".png")}function Ql(){const t=[];for(let e=1;e<=14;e++)t.push(Jl("coin_"+e));return t}const Zl={alpha:{start:1,end:1},scale:{start:.2,end:1,minimumScaleMultiplier:1},color:{start:"#e6e6e6",end:"#ffffff"},speed:{start:900,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:2400},maxSpeed:0,startRotation:{min:230,max:310},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:1.2,max:1.2},blendMode:"normal",frequency:.08,emitterLifetime:-1,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:0,h:0}};class eh{constructor(e){this.data=e}get symbolInfo(){return this.data.value.wheelStopPosition}get isBonus1(){return this.symbolInfo.symbol==Yl}get isBonus2(){return this.symbolInfo.symbol==ql}get bonusSymbolInfos(){return this.data.value.wheelBonusStopPosition}get isExistWin(){return this.win>0}get win(){return this.data.value.win}}var th=Object.defineProperty,ih=Object.getOwnPropertyDescriptor,Li=(t,e,i,n)=>{for(var s=n>1?void 0:n?ih(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&th(e,i,s),s};let Ne=class extends Ue{constructor(t){super(t),this.multiplier=1,this.gameStatus="idle",this.statusOrder=[]}onCreated(){super.onCreated(),this.reel.spinStopHandler=this.handleStoped.bind(this),this.showMessage("Please Spin"),this.menu.init(this.context),this.initCommand()}exit(){super.exit(),T.off("infoPage"),T.off("spin")}initCommand(){T.on("infoPage",()=>{L.replace("infoPage")}),T.on("spin",this.onSpin.bind(this))}onBet(t,e){this.gameStatus=="idle"&&this.betPanel.onBet(t,e)}onClearBet(){this.betPanel.onClearBet()}onSpin(){const t=this.betPanel.betCountData;t.length>0&&(this.netService.spin(.1,t).then(this.spinServiceHandler.bind(this)),this.statusOrder.push("spinning"),this.nextStatus())}onBig(){this.doubleSelecter.onBig(),this.handleDoubleUp(!1)}onSmall(){this.doubleSelecter.onSmall(),this.handleDoubleUp(!0)}onOpenMenu(){this.menu.open()}handleBonus(){this.netService.bonus({key:"",step:1,index:0})}handleDoubleUp(t){this.netService.doubleUp(t).then(e=>{this.doubleSelecter.toStop(e.value.doubleUpValue).then(()=>{e.value.isWinDoubleUp?this.showWinAmount(e.value.win,500).then(()=>_e(500)).then(()=>{e.value.doubleUpCount<5?this.doubleSelecter.reset():(this.statusOrder.unshift("win"),this.nextStatus())}):(this.showMessage("You Lose"),this.doubleSelecter.lose(!0),this.nextStatus())})})}handleStoped(){_e(500).then(()=>{this.statusOrder=[],this.gameStatus=="stopping"?(this.rspModel.isBonus1?this.statusOrder.push("showWinBonus1"):this.rspModel.isBonus2&&this.statusOrder.push("showWinBonus2","reSpinning","reStopping"),this.reel.showWinSymbols([this.rspModel.symbolInfo])):this.gameStatus=="reStopping"&&this.reel.showWinSymbols(this.rspModel.bonusSymbolInfos),this.rspModel.isExistWin&&this.statusOrder.push("selectDouble"),this.statusOrder.push("idle"),this.nextStatus()})}spinServiceHandler(t){const e=new eh(t);this.rspModel=e,this.statusOrder.push("stopping"),this.nextStatus()}nextStatus(){const t=this.statusOrder.shift();if(t)switch(this.gameStatus=t,this.gameStatus){case"idle":{this.betPanel.onClearBet(),this.setButtonStatus(),this.betPanel.hideWinFrame();break}case"spinning":{this.showMessage("Good Luck"),this.reel.onSpin(!1),this.doubleSelecter.hide(),this.reel.showWinSymbols([]),this.setButtonStatus();break}case"reSpinning":{this.showMessage("Good Luck"),this.reel.onSpin(!0),this.doubleSelecter.hide();break}case"stopping":{this.reel.toStop(this.rspModel.symbolInfo);break}case"reStopping":{this.reel.toStop(this.rspModel.bonusSymbolInfos[0]);break}case"showWinBonus1":{this.bonusEffect.showBonus1(this.rspModel.bonusSymbolInfos).then(()=>{this.nextStatus()}),he(2e3).then(()=>{this.reel.showWinSymbols(this.rspModel.bonusSymbolInfos)});break}case"showWinBonus2":{this.showMessage("YOU WON A RESPIN"),this.bonusEffect.showBonus2(this.rspModel.bonusSymbolInfos[0].multiplier).then(()=>{this.nextStatus(),_e(2e3).then(this.nextStatus.bind(this))});break}case"selectDouble":{this.showWinAmount(this.rspModel.win,500),this.doubleSelecter.show(),this.rspModel.bonusSymbolInfos.length>0?this.betPanel.showWinFrame(this.rspModel.bonusSymbolInfos):this.betPanel.showWinFrame([this.rspModel.symbolInfo]);break}}}setButtonStatus(){this.spinButton.enabled=this.gameStatus=="idle",this.clearButton.enabled=this.gameStatus=="idle"}showMessage(t){this.infoBar.message.value=t,this.infoBar.message.visible=!0,this.infoBar.amount.visible=!1}showWinAmount(t,e){return this.infoBar.message.visible=!1,this.infoBar.amount.visible=!0,this.infoBar.amount.duration=e,this.infoBar.amount.value=`${t}`,_e(e)}onOrientationChange(t){super.onOrientationChange(t),this.reel.onOrientationChanged(t),this.bonusEffect.onOrientationChanged(t)}};Li([Me("netService")],Ne.prototype,"netService",2);Li([wi("context")],Ne.prototype,"context",2);Ne=Li([p({tag:"main",category:"scene"})],Ne);class sh{constructor(){this.pathL=[{x:0,y:0},{x:522,y:0},{x:522,y:336},{x:0,y:336}],this.pathP=[{x:0,y:0},{x:336,y:0},{x:336,y:522},{x:0,y:522}],this._pathNodeLengthL=[],this._pathNodeLengthP=[]}calPathLength(e){let i=0;const n=[];for(let s=0;s<e.length;s++){const r=e[s],o=e[(s+1)%e.length],l=Math.sqrt((o.x-r.x)**2+(o.y-r.y)**2);i+=l,n.push(i)}return[i,n]}getPathLengthL(){return this._pathLengthL||([this._pathLengthL,this._pathNodeLengthL]=this.calPathLength(this.pathL)),this._pathLengthL}getPathLengthP(){return this._pathLengthP||([this._pathLengthP,this._pathNodeLengthP]=this.calPathLength(this.pathP)),this._pathLengthP}getPointAndSpeedVectorWith(e,i,n){let s,r;return e<i[0]?(s={x:e+n[0].x,y:n[0].y},r={x:1,y:0}):e<i[1]?(s={x:n[1].x,y:e-i[0]},r={x:0,y:-1}):e<i[2]?(s={x:n[2].x-(e-i[1]),y:n[2].y},r={x:-1,y:0}):(s={x:n[3].x,y:n[3].y-(e-i[2])},r={x:0,y:1}),[s,r]}getPointAndSpeedVector(e,i){const n=i==w.LANDSCAPE?this._pathNodeLengthL:this._pathNodeLengthP,s=i==w.LANDSCAPE?this.pathL:this.pathP;return this.getPointAndSpeedVectorWith(e,n,s)}getPathLength(e){return e==w.LANDSCAPE?this.getPathLengthL():this.getPathLengthP()}update(e,i,n){const s=this.getPathLength(n),r=i%s,[o,l]=this.getPointAndSpeedVector(r,n);return{point:o,speedVector:l,speed:e,offsetInPathPct:r/s}}}class nh extends sh{constructor(){super(...arguments),this.halfWidth=38}calPolygonPath(e,i,n){const s=[],r=n==w.LANDSCAPE?this.pathL:this.pathP,o=this.getPathLength(n),l=TWEEN.Easing.Circular.In(e.speed/2e3)*250,c=(i-l-this.halfWidth+o)%o,[h,f]=this.getPointAndSpeedVector(c,n),x=f.x!=e.speedVector.x||f.y!=e.speedVector.y,m=[],O=[],v=[];return e.speedVector.x==1?(m.push({x:e.point.x-this.halfWidth,y:e.point.y-this.halfWidth},{x:e.point.x-this.halfWidth,y:e.point.y+this.halfWidth}),x?(O.push({x:r[0].x-this.halfWidth,y:r[0].y-this.halfWidth},{x:r[0].x+this.halfWidth,y:r[0].y+this.halfWidth}),v.push({x:h.x-this.halfWidth,y:h.y},{x:h.x+this.halfWidth,y:h.y}),v[0].y=Math.max(v[0].y,O[1].y),v[1].y=Math.max(v[1].y,O[1].y)):v.push({x:h.x,y:h.y-this.halfWidth},{x:h.x,y:h.y+this.halfWidth})):e.speedVector.y==-1?(m.push({x:e.point.x+this.halfWidth,y:e.point.y-this.halfWidth},{x:e.point.x-this.halfWidth,y:e.point.y-this.halfWidth}),x?(O.push({x:r[1].x+this.halfWidth,y:r[1].y-this.halfWidth},{x:r[1].x-this.halfWidth,y:r[1].y+this.halfWidth}),v.push({x:h.x,y:h.y-this.halfWidth},{x:h.x,y:h.y+this.halfWidth}),v[0].x=Math.min(v[0].x,O[1].x),v[1].x=Math.min(v[1].x,O[1].x)):v.push({x:h.x+this.halfWidth,y:h.y},{x:h.x-this.halfWidth,y:h.y})):e.speedVector.x==-1?(m.push({x:e.point.x+this.halfWidth,y:e.point.y+this.halfWidth},{x:e.point.x+this.halfWidth,y:e.point.y-this.halfWidth}),x?(O.push({x:r[2].x+this.halfWidth,y:r[2].y+this.halfWidth},{x:r[2].x-this.halfWidth,y:r[2].y-this.halfWidth}),v.push({x:h.x+this.halfWidth,y:h.y},{x:h.x-this.halfWidth,y:h.y}),v[0].y=Math.min(v[0].y,O[1].y),v[1].y=Math.min(v[1].y,O[1].y)):v.push({x:h.x,y:h.y+this.halfWidth},{x:h.x,y:h.y-this.halfWidth})):(m.push({x:e.point.x-this.halfWidth,y:e.point.y+this.halfWidth},{x:e.point.x+this.halfWidth,y:e.point.y+this.halfWidth}),x?(O.push({x:r[3].x-this.halfWidth,y:r[3].y+this.halfWidth},{x:r[3].x+this.halfWidth,y:r[3].y-this.halfWidth}),v.push({x:h.x,y:h.y+this.halfWidth},{x:h.x,y:h.y-this.halfWidth}),v[0].x=Math.max(v[0].x,O[1].x),v[1].x=Math.max(v[1].x,O[1].x)):v.push({x:h.x-this.halfWidth,y:h.y},{x:h.x+this.halfWidth,y:h.y})),x?s.push(m[0],O[0],...v,O[1],m[1]):s.push(m[0],...v,m[1]),s}update(e,i,n){const s=super.update(e,i,n);return s.path=this.calPolygonPath(s,i,n),s}}var rh=Object.defineProperty,oh=Object.getOwnPropertyDescriptor,ah=(t,e,i,n)=>{for(var s=n>1?void 0:n?oh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&rh(e,i,s),s};let Pt=class extends G{constructor(){super(...arguments),this.spinTime=0,this.symbolInSpinTweenMap={}}get symbolOffsetL(){return this.argument1}get symbolOffsetP(){return this.argument2}init(t){this.spinAnimation=new lh(t),this.spinAnimation.spinStopHandler=this.onEndSpin.bind(this),this.setColorBox(!1)}onUpdate(){const t=this.spinAnimation.onUpdate(this.spinTime);this.colorBox.position.set(t.point.x,t.point.y),t.speed>this.spinAnimation.maxSpeed*.7?this.colorBox.spine.animated||(this.colorBox.default.visible=!1,this.colorBox.spine.setVisibleAnimated(!0)):(this.colorBox.default.visible=!0,this.colorBox.spine.setVisibleAnimated(!1)),this.colorBox.spine.rotation=Math.PI/2*(t.speedVector.x==1?0:t.speedVector.x==-1?2:t.speedVector.y==1?3:1);for(let e=0;e<this.spinAnimation.symbols.length;e++){const i=this.spinAnimation.symbols[e],n=i.pct;if(n-t.offsetInPathPct<.02&&n-t.offsetInPathPct>0){const s=new TWEEN.Tween({k:0}).to({k:1},400).onUpdate(r=>{i.scale.set(1+.1*Math.sin(Math.PI*r.k))}).onComplete(()=>{delete this.symbolInSpinTweenMap[e]}).start();this.symbolInSpinTweenMap[e]=s;break}}}advanceTime(t){return this.spinTime+=t*PIXI.Ticker.shared.elapsedMS,this.onUpdate(),!0}setColorBox(t){this.colorBox=t?this.container.yellowBox:this.container.blueBox,this.container.yellowBox.visible=t,this.container.blueBox.visible=!t,this.colorBox.spine.setAnimation(0,t?"bonusSpin_arrow":"normalSpin_arrow",!0)}onSpin(t){this.spinTime=0,this.setColorBox(t),_.add(this)}toStop(t){this.spinAnimation.toStop(t,this.spinTime)}onEndSpin(){_.remove(this),this.spinStopHandler()}showWinSymbols(t){const e={};for(const i of t){const n=e[i.index];n?e[i.index]=n+i.multiplier:e[i.index]=i.multiplier}for(const i of this.spinAnimation.symbols)i.showWinFrame(!1);for(const i in e){const n=this.spinAnimation.symbols[i],s=e[i];n.showWinFrame(!0,s)}}onOrientationChanged(t){this.orientation=t,this.spinAnimation.onOrientationChanged(t),this.onUpdate()}static create(t,e){const i=new Pt;k(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e);const n=[],s=[];for(let l=0;l<i.symbols.children.length;l++){const c=i.symbols[`s${l}`];n.push(c),s.push(c)}const r=n.splice(0,i.symbolOffsetL),o=s.splice(0,i.symbolOffsetP);return i.init({symbolsL:[...n,...r],symbolsP:[...s,...o],spinStartSpeed:a(t,"spinStartSpeed"),spinEndSpeed:a(t,"spinEndSpeed"),maxSpeed:a(t,"maxSpeed"),speedUpTime:a(t,"speedUpTime"),speedDownTime:a(t,"speedDownTime")}),i}};Pt=ah([p({tag:"reel",category:"component"})],Pt);class lh{constructor(e){this.index=0,this.willStopIndex=0,this.animator=new nh,this.symbolsL=e.symbolsL,this.symbolsP=e.symbolsP,this.spinStartSpeed=e.spinStartSpeed,this.spinEndSpeed=e.spinEndSpeed,this.maxSpeed=e.maxSpeed,this.speedUpTime=e.speedUpTime,this.speedDownTime=e.speedDownTime}get symbols(){return this.orientation==w.LANDSCAPE?this.symbolsL:this.symbolsP}getSpeedUpOffset(e){return zi.up(this.spinStartSpeed,this.maxSpeed,this.speedUpTime,e)}getSpeedDownOffset(e){return zi.down(this.maxSpeed,this.spinEndSpeed,this.speedDownTime,e)}get currentIndexOffset(){return this.symbols[this.index].pct*this.animator.getPathLength(this.orientation)}getMoveDistanceAndSpeed(e){let i=0,n=this.spinStartSpeed,s=!1;if(e<this.speedUpTime)i=this.getSpeedUpOffset(e),n=this.spinStartSpeed+(this.maxSpeed-this.spinStartSpeed)*(e/this.speedUpTime);else if(e>this.stopedTime-this.speedDownTime){let r=e-this.stopedTime+this.speedDownTime;e>this.stopedTime&&(r=this.speedDownTime,s=!0),n=(this.maxSpeed-this.spinEndSpeed)*((this.speedDownTime-r)/this.speedDownTime),i=this.getSpeedUpOffset(this.speedUpTime)+(this.stopedTime-this.speedUpTime-this.speedDownTime)/1e3*this.maxSpeed+this.getSpeedDownOffset(r)}else n=this.maxSpeed,i=this.getSpeedUpOffset(this.speedUpTime)+(e-this.speedUpTime)/1e3*this.maxSpeed;return i+=this.currentIndexOffset,this.animator.update(n,i,0),s&&(this.index=this.willStopIndex,this.spinStopHandler()),[i,n]}getRandomSymbol(e){const i=[],n=[];for(let r=0;r<this.symbols.length;r++){const o=this.symbols[r];o.index===e&&(i.push(o),n.push(r))}const s=tt(i.length);return[i[s],n[s]]}toStop(e,i){this.willStopIndex=e.index;const n=this.symbols[e.index],s=this.animator.getPathLength(this.orientation),r=s*n.pct+(this.animator.getPathLength(this.orientation)-this.currentIndexOffset),o=Math.ceil(Math.max(this.getMoveDistanceAndSpeed(i)[0],this.getSpeedUpOffset(this.speedUpTime)+this.getSpeedDownOffset(this.speedDownTime))/s)*s+r;this.stopedTime=(o-this.getSpeedUpOffset(this.speedUpTime)-this.getSpeedDownOffset(this.speedDownTime))/this.maxSpeed*1e3+this.speedUpTime+this.speedDownTime}onOrientationChanged(e){this.orientation=e}onUpdate(e){const[i,n]=this.getMoveDistanceAndSpeed(e);return this.animator.update(n,i,this.orientation)}}var hh=Object.defineProperty,uh=Object.getOwnPropertyDescriptor,ch=(t,e,i,n)=>{for(var s=n>1?void 0:n?uh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&hh(e,i,s),s};let fi=class extends Ue{onContinue(){L.replace("main")}onCreated(){super.onCreated(),T.on("continueClickHandler",this.onContinue.bind(this))}exit(){super.exit(),T.off("continueClickHandler",this.onContinue.bind(this))}onLeft(){}onRight(){}};fi=ch([p({tag:"splash",category:"scene"})],fi);var ph=Object.defineProperty,dh=Object.getOwnPropertyDescriptor,fh=(t,e,i,n)=>{for(var s=n>1?void 0:n?dh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ph(e,i,s),s};let _t=class extends G{constructor(e){super(),this.index=e.s}showWinFrame(e,i=0){e?(this.winFrame.multiper.value=`x${i}`,this.winFrame.visible=!0,this.winFrame.multiper.visible=i>1||!0):this.winFrame.visible=!1}onOrientationChange(e){super.onOrientationChange(e),this.pct=e==w.LANDSCAPE?Number(this.argument1):Number(this.argument2)}static create(e,i){const n=new _t({s:a(e,"s")});return k(e,{scene:i.scene,parent:n,context:i.context}),N(n,e,i),n}};_t=fh([p({tag:"symbol",category:"component"})],_t);const mh=.001;class gh{constructor(e,i,n,s=mh,r=30){this.parent=e,this.speed=s;const o=new PIXI.Container,l=[{textures:i,framerate:r,loop:!0}];this.emitter=new PIXI.particles.Emitter(o,PIXI.particles.upgradeConfig(n,l)),this.emitter.emit=!1,e.addChild(o),_.add(this)}show(e=0){this.emitter&&(e>0&&(this.emitter.maxParticles=Kl[e-1],this.emitter.frequency=zl[e-1]),this.elapsed=Date.now(),this.emitter.emit=!0)}stop(){this.emitter.emit=!1}destroy(){_.remove(this),this.emitter.destroy(),this.emitter.cleanup(),this.emitter=null,this.parent.removeChildren()}advanceTime(e){if(!this.emitter)return!0;const i=Date.now();return this.emitter.update((i-this.elapsed)*this.speed),this.elapsed=i,!0}}var vh=Object.defineProperty,bh=Object.getOwnPropertyDescriptor,yh=(t,e,i,n)=>{for(var s=n>1?void 0:n?bh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&vh(e,i,s),s};let Ot=class extends G{constructor(){super()}init(){this.coinsEmitter=new gh(this.coinsLayer,Ql(),Zl,.0012)}showWin(t){const e=this.spine.getSlotContainerByName("AMT");return this.spine.setAnimation(0,"youwinL_entry",!1),this.spine.addAnimation(0,"youwinL_idle",!0),e.removeChildren(),he(1e3).then(()=>{e.addChild(this.amount),this.amount.duration=4e3,this.amount.value=`${t}`}),this.spine.setVisibleAnimated(!0),this.visible=!0,he(6e3).then(()=>(this.spine.setAnimation(0,"youwinL_exit",!1),he(2e3).then(()=>{this.visible=!1,this.spine.setVisibleAnimated(!1)})))}playWinEffect(t){this.coinsEmitter.show(t)}removeWinEffect(){this.coinsEmitter&&this.coinsEmitter.stop()}static create(t,e){const i=new Ot;return k(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i.init(),i}};Ot=yh([p({tag:"winPanel",category:"component"})],Ot);Tt([be,ct,vt,ot,Be,ut,Te,ve,dt,De,st,ne,ge,G,ye,ci,di,bt,nt,Qe,ht,at,lt,rt,U]);Tt([fi,Ne,wt,Pt,_t,St,xt,Ot]);Qo();
