function k(t){return t!=null}function A(t){return t==null}function ls(t){return typeof t=="string"}function Hs(t){return typeof t=="function"}function Vs(t){return Hs(t)}function Fs(t){return Array.isArray(t)}function js(t){return Object.keys(t).length===0&&t.constructor===Object}function Gs(...t){let e={};for(let i=0;i<t.length;i++){let n=t[i];if(n!=null)for(let s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}var Ie=(t=>(t[t.PERCENT=0]="PERCENT",t[t.PIXEL=1]="PIXEL",t))(Ie||{});function j(t,e){if(!t)return;let n=t.childNodes.length;for(let s=0;s<n;s++){let r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE&&e(r,s)}}function ks(t,e){let i=t.childNodes;for(let n=0;n<i.length;n++){let s=t.childNodes[n];if(s.nodeType===Node.ELEMENT_NODE&&V(s)===e)return s}}function Xs(t,e){if(!t)return;let n=t.childNodes.length;for(let s=n-1;s>=0;s--){let r=t.childNodes[s];r.nodeType===Node.ELEMENT_NODE&&e(r,s)}}function Ae(t,e){return k(t.attributes[e])}function re(t,e,i){t&&t.attributes[e]&&i&&(t.attributes[e].value=i)}function K(t,e,i=void 0){return t&&t.attributes[e]?t.attributes[e].value:i}function V(t,e=""){return K(t,"id",e)}function Li(t,e=""){return K(t,"name",e)}function a(t,e,i=0){return+K(t,e,i)}function Fi(t,e){let i=K(t,e,"");return hs(i)}function hs(t){return t=t.replace(" ",""),t?t.indexOf("%")>-1?{value:Number(t.substr(0,t.length-1))/100,unit:0}:t.indexOf("px")>-1?{value:+t.substr(0,t.length-2),unit:1}:{value:+t,unit:1}:{value:0}}function Ys(t,e){let i=c(t,e,"0").split(","),n=[{value:0},{value:0}];for(let s=0;s<i.length;s++)n[s]=hs(i[s]);return n}function c(t,e,i=""){return K(t,e,i)}function g(t,e,i=!1){return c(t,e,i?"true":"false").toLowerCase()==="true"}function fe(t,e=""){return k(t)?t.textContent:e}function ee(t,e,i,n){let s=c(t,e),r;if(s)r=s.split(",");else return[];i=k(i)?i:r.length;let o=new Array(i);for(let l=0;l<i;l++)o[l]=n?r[l]:parseFloat(r[l]);return o}function zs(t,e,i){return ee(t,e,i,!0)}function us(t,e,i=[0,0]){let n=c(t,e,"0").split(","),s=i;for(let r=0;r<n.length;r++)s[r]=parseFloat(n[r]);return s}function qs(t,e){let i=c(t,e,"0").split(",");return{x:parseFloat(i[0]),y:parseFloat(i[1])}}function Ks(t,e){let i=ee(t,e,2);return{width:i[0],height:i[1]}}function Js(t,e){let i=ee(t,e),n=[];for(let s=0;s<i.length;s++)s%2==0&&n.push({width:i[s],height:i[s+1]});return n}function cs(t){return{align:c(t,"align","left"),breakWords:g(t,"breakWords",!1),fontFamily:c(t,"fontFamily"),fontSize:a(t,"fontSize"),fontStyle:c(t,"fontStyle","normal"),fontVariant:c(t,"fontVariant","normal"),fontWeight:c(t,"fontWeight","normal"),fill:Ae(t,"fills")?zs(t,"fills"):a(t,"fill",16777215),fillGradientType:a(t,"fillGradientType",0),fillGradientStops:ee(t,"fillGradientStops"),stroke:a(t,"stroke",0),strokeThickness:a(t,"strokeThickness",0),wordWrap:g(t,"wordWrap",!1),wordWrapWidth:a(t,"wordWrapWidth",100),dropShadow:g(t,"dropShadow",!1),dropShadowColor:c(t,"dropShadowColor","#000000"),dropShadowBlur:a(t,"dropShadowBlur",0),dropShadowAngle:a(t,"dropShadowAngle",Math.PI/6),dropShadowDistance:a(t,"dropShadowDistance",5),padding:a(t,"padding",0),textBaseline:c(t,"textBaseline","alphabetic"),miterLimit:a(t,"miterLimit",10),lineJoin:c(t,"lineJoin","miter"),letterSpacing:a(t,"letterSpacing",0),lineHeight:a(t,"lineHeight",0)}}let Qs=(()=>{if(DOMParser){let t=new DOMParser;return e=>t.parseFromString(e,"text/xml").documentElement}else if(typeof ActiveXObject<"u")return t=>{let e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return t=>{}})();class Zs{constructor(){this.ie=!1,this.ieVersion=0,this.android=!1,this.chrome=!1,this.windowsPhone=!1,this.checkOS(),this.checkBrowser()}checkOS(){let e=navigator.userAgent;/Android/.test(e)&&(this.android=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(this.android=!1,this.windowsPhone=!0)}checkBrowser(){let e=navigator.userAgent;/Chrome\/(\d+)/.test(e)&&!this.windowsPhone?this.chrome=!0:/MSIE (\d+\.\d+);/.test(e)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(this.ie=!0,this.ieVersion=parseInt(RegExp.$3,10))}get isUCBrowser(){return navigator.userAgent.toLowerCase().indexOf("ucbrowser")>-1}get isQQBrowser(){return navigator.userAgent.toLowerCase().indexOf("qqbrowser")>-1}get isXiaoMiBrowser(){return navigator.userAgent.toLowerCase().indexOf("xiaomi")>-1}get desktop(){return is.desktop()}get mobile(){return is.mobile()}get tablet(){return is.tablet()}}class en{constructor(){this.mappings={}}map(e,i){let n=new on(e,i);return this.mappings[e]=n,n}unmap(e){this.mappings[e]=void 0}get(e,...i){let n=this.mappings[e];if(!A(n))return n.get(i)}resolve(){console.warn("Injector.resolve() is not implement yet")}}class tn{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class sn{constructor(e){this.type=e}get(e){return ds(this.type,e)}destroy(){this.type=void 0}}class nn{constructor(e){this.type=e}get(e){return A(this.instance)&&(this.instance=ds(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class rn{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class on{constructor(e,i){this.name=e,this.type=i}get(e){return A(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new tn(e)}toType(e){this.destroy(),this.provider=new sn(e)}toSingleton(e){this.destroy(),this.provider=new nn(e)}asSingleton(){if(this.destroy(),A(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new rn(e)}destroy(){k(this.provider)&&this.provider.destroy()}}function ds(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}let an=Object.prototype.hasOwnProperty,H=typeof Object.create!="function"?"~":!1;class ji{constructor(e,i,n=!1){this.fn=e,this.context=i,this.once=n}}class ps{constructor(){this.off=this.removeListener}eventNames(){let e=this._events,i=[],n;if(!e)return i;for(n in e)an.call(e,n)&&i.push(H?n.slice(1):n);return i}listeners(e,i=!1){let n=H?H+e:e,s=this._events&&this._events[n];if(i)return!!s;if(!s)return[];if(s.fn)return[s.fn];let r=s.length,o=new Array(r);for(let l=0;l<r;l++)o[l]=s[l].fn;return o}emit(e,...i){let n=H?H+e:e;if(!this._events||!this._events[n])return!1;let s=this._events[n],r=i.length,o;if(typeof s.fn=="function"){switch(s.once&&this.removeListener(e,s.fn,void 0,!0),r){case 0:return s.fn.call(s.context),!0;case 1:return s.fn.call(s.context,i[0]),!0;case 2:return s.fn.call(s.context,i[0],i[1]),!0;case 3:return s.fn.call(s.context,i[0],i[1],i[2]),!0;case 4:return s.fn.call(s.context,i[0],i[1],i[2],i[3]),!0;case 5:return s.fn.call(s.context,i[0],i[1],i[2],i[3],i[4]),!0}s.fn.apply(s.context,i)}else{let l=s.length;for(o=0;o<l;o++)switch(s[o].once&&this.removeListener(e,s[o].fn,void 0,!0),r){case 0:s[o].fn.call(s[o].context);break;case 1:s[o].fn.call(s[o].context,i[0]);break;case 2:s[o].fn.call(s[o].context,i[0],i[1]);break;default:s[o].fn.apply(s[o].context,i)}}return!0}on(e,i,n){let s=new ji(i,n||this),r=H?H+e:e;return this._events||(this._events=H?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],s]:this._events[r].push(s):this._events[r]=s,this}once(e,i,n){let s=new ji(i,n||this,!0),r=H?H+e:e;return this._events||(this._events=H?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],s]:this._events[r].push(s):this._events[r]=s,this}removeListener(e,i,n,s){let r=H?H+e:e;if(!this._events||!this._events[r])return this;let o=this._events[r],l=[];if(i)if(o.fn)(o.fn!==i||s&&!o.once||n&&o.context!==n)&&l.push(o);else for(let u=0,h=o.length;u<h;u++)(o[u].fn!==i||s&&!o[u].once||n&&o[u].context!==n)&&l.push(o[u]);return l.length?this._events[r]=l.length===1?l[0]:l:delete this._events[r],this}removeAllListeners(e){return this._events?(e?delete this._events[H?H+e:e]:this._events=H?{}:Object.create(null),this):this}}class fs extends ps{on(e,i,n){return this.off(e),super.on(e,i,n)}}class Z{constructor(e,i,n=!0){this.id=e,this.src=i,this.global=n}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){}destroy(e){this.data&&this.data.texture.destroy(e)}static getVersionSrc(e){let i=L.get("context");return this.checkSrcFormat(i.applyTimeVersion(i.resolve(K(e,"src"))))}static checkSrcFormat(e){const i=e.match(/\[(?:.+)\]/);if(i){const n=i[0].replace("[","").replace("]","").split(",");for(let s of n){const r=s==="avif",o=s==="webp";if(r&&Je.avif||o&&Je.webp||!r&&!o)return e.replace(`${i[0]}`,s)}}return e}static create(e){return new Z(V(e),this.getVersionSrc(e),g(e,"global",!0))}}function ne(t,e){let i=t.toString();return new Array(e-i.length+1).join("0")+i}function ln(t,e="{{",i="}}"){let n=[],s=0,r=0;for(;s=t.indexOf(e,r),s!==-1;)if(r=t.indexOf(i,s),s>-1&&r>-1)n.push(t.substr(s+2,r-s-2));else break;return n}function Ai(t){let e=t.split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function se(t){return new Decimal(t).toFixed(2,Decimal.ROUND_FLOOR)}function hn(t,e){return e?Ai(se(t)):t}function Bt(t,e){if(!e)return t+" ";switch(t){case"USD":return"$";case"CNY":case"RMB":case"JPY":return"¥";case"KRW":return"₩";case"MYR":return"RM";case"IDR":return"Rp";case"THB":return"฿";case"VND":return"₫";case"EUR":return"€";default:return t+" "}}function ms(t,e){return e?Bt(t,!0):""}class Dt extends Z{constructor(e,i,n,s){super(e,e,s),this.id=e,this.src=i,this.options=n}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){const i={};for(let s=0;s<this.options.frame;s++)i[`${this.id}_${ne(s,4)}`]={frame:{x:s%this.options.width*this.options.size[0],y:Math.floor(s/this.options.width)*this.options.size[1],w:this.options.size[0],h:this.options.size[1]}};const n=e.get(this.id);this.sheet=new PIXI.Spritesheet({texture:n,data:{frames:i,meta:{scale:1}}}),this.sheet.parse()}static create(e){let i={size:us(e,"size"),frame:a(e,"frame"),width:a(e,"width",0)};return new Dt(V(e),this.getVersionSrc(e),i,g(e,"global",!0))}}class Ce extends Z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){return new Ce(V(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}class Bi extends Z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}static create(e){return new Bi(V(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}function Gi(t,e){let i=L.get("context"),n=K(t,e,void 0);return n==null?n:i.applyTimeVersion(i.resolve(K(t,e)))}class Di extends Z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.options=n}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){var i=Gi(e,"atlas"),n=K(e,"rawAtlas",void 0);let s={spineAtlasFile:i,rawAtlasData:n};return new Di(V(e),this.checkSrcFormat(Gi(e,"json")),s,g(e,"global",!0))}}class Nt extends Z{constructor(e,i,n){super(e,i,n),this.id=e,this.src=i}get rawAtlas(){return this.data}addTo(e){}static create(e){return new Nt(V(e),this.getVersionSrc(e),g(e,"global",!0))}}class Ye extends Z{constructor(e,i,n,s){super(e,i,s),this.id=e,this.src=i,this.type=n}get frag(){return this.data}get vert(){return this.data}static create(e){return new Ye(V(e),this.getVersionSrc(e),e.tagName,g(e,"global",!0))}}async function un(t,e,i){const n=PIXI.TextFormat.test(t)?PIXI.TextFormat.parse(t):PIXI.XMLStringFormat.parse(t),{src:s}=e,{page:r}=n,o=[];for(let h=0;h<r.length;++h){const f=r[h].file,S=s.split("?")[0].split("/");S.pop(),S.push(f);let m=S.join("/");m=PIXI.copySearchParams(m,s),o.push(m)}const l=await i.load(o),u=o.map(h=>l[h]);return PIXI.BitmapFont.install(n,u,!0)}function cn(){const t=PIXI.loadBitmapFont;t.parse=un,PIXI.extensions.add(PIXI.loadBitmapFont)}class dn extends ps{constructor(){super(),this.ids=[],this.sheetResource={},this.assets=PIXI.Assets,cn()}get progress(){return this._progress}onProgress(e){this._progress=e,this.emit("progress",e)}onLoaded(e){e.forEach(i=>{var n;(n=this.sheetResource[i])==null||n.loaded(this.assets)}),this.emit("complete",!1)}add(e,i=!1){e.addTo(this.assets),e instanceof Nt||(this.ids.push(e.id),e instanceof Dt&&(this.sheetResource[e.id]=e))}load(){this.assets.load([...this.ids],this.onProgress.bind(this)).then(this.onLoaded.bind(this,[...this.ids])),this.ids=[]}json(e){return this.assets.get(e)}frag(e){return this.assets.get(e)}vert(e){return this.assets.get(e)}resolveImage(e){return this.assets.get(e)??PIXI.Texture.EMPTY}resolveTextureAtlas(e){const i=e[1],n=this.assets.get(i);if(e.length==2)return n.textures;{const s=e[2].split("|");return s.length==1?n.textures[s[0]]:s.map(r=>n.textures[r])}}resolveAtlasTextures(e){const i=e[1],n=this.assets.get(i);let s=[];const r=Object.keys(n.textures);if(e.length==2)s=Object.keys(n.textures);else for(let o of r)o.startsWith(e[1])&&s.push(o);return s=s.sort((o,l)=>o.localeCompare(l)),s.map(o=>n.textures[o])}resolveAnimations(e){const n=PIXI.Assets.get(e[1]).data.animations[e[2]],s=[];for(const r of n)s.push(this.resolveTextureAtlas(["@atlas",e[1],r]));return s}resolveSpriteSheet(e){const i=this.sheetResource[e];return Object.values(i.sheet.textures)}resource(e){return this.assets.get(e)}text(e){return this.resource(e)}resolve(e){let i=PIXI.Texture.EMPTY;if(!e||e.length===0)return i;let n=e.split("/");switch(n[0]){case"@img":return this.resolveImage(n[1]);case"@atlas":return this.resolveTextureAtlas(n);case"@atlasTextures":return this.resolveAtlasTextures(n);case"@animations":return this.resolveAnimations(n);case"@sheet":return this.resolveSpriteSheet(n[1]);case"@json":return this.json(n[1]);case"@spine":return this.resource(n[1]);case"@frag":return this.frag(n[1]);case"@vert":return this.vert(n[1]);case"@res":return this.resource(n[1]);case"@text":return this.text(n[1]);default:return i}}downloadApi(){return this.assets.add({src:"../_commons/api.json",alias:"api"}),this.assets.load("api")}get api(){return this.json("api")}getApiBy(e,i){return this.api[e]||i}}let pn={atlas:Z,img:Z,audio:Bi,res:Z,sheet:Dt,spine:Di,rawAtlas:Nt,text:Ce,json:Ce,xml:Ce,frag:Ye,vert:Ye};function fn(t){let e=pn[t.nodeName];if(e)return e.create(t);throw`not found the resource by ${t.nodeName}`}function Mt(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)}function mn(t,e,i){let n=[],s=[];i=i||(r=>r);for(let r=0,o=0;r<e.length;r++)s.push(i(e[r])),o++,o===t&&(n.push(s),o=0,s=[]);return n}function gs(t,e){let i=[];return t.forEach((n,s,r)=>{let o=e(n);i.push(o)}),i}function gn(t){if(t&&t.length>0)return t[0]}function Yt(t){if(t)return t[t.length-1]}function vn(t,e){var i=0;if(t&&(i=t.length),i>0){for(var n=0;n<i;n++)if(e(t[n]))return t[n]}}function bn(t){return new Date(t)}function vs(){return new Date}function ze(){return vs().getTime()}function ki(t,e){let i=vs(),n=i.getUTCHours()+t;n>23&&(n=n-24);let s=i.getUTCMinutes(),r=i.getSeconds(),o=ne(n,2)+":"+ne(s,2);return e?o+" (+"+t+")":o+":"+ne(r,2)+" (GMT+"+t+")"}var G=(t=>(t[t.Identify=0]="Identify",t[t.PageView=1]="PageView",t[t.ScreenView=2]="ScreenView",t[t.Event=3]="Event",t[t.Request=4]="Request",t[t.Response=5]="Response",t[t.Transaction=6]="Transaction",t[t.Exception=7]="Exception",t[t.Timing=8]="Timing",t[t.Metric=9]="Metric",t[t.StartScreen=10]="StartScreen",t[t.StopScreen=11]="StopScreen",t))(G||{});let ii;function yn(t){ii=t}class wn{constructor(){this.listeners=[]}initialize(){if(this.userAgent=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",k(ii))for(let e of ii){let i=new e;i.initialize(),this.addListener(i)}this.handleGlobalError()}handleGlobalError(){window.onerror=(e,i,n,s,r)=>{this.exception({name:"GlobalError",description:e,fatal:!1,error:r,extraInfo:{filename:i,lineno:n,colno:s}})}}addListener(e){this.listeners.push(e)}removeListener(e){Mt(this.listeners,e)}identify(e){this.track(G.Identify,e)}screen(e){A(e)&&(e={name:I.current.id}),this.track(G.ScreenView,e)}startScreen(e){this.track(G.StartScreen,e)}stopScreen(e){this.track(G.StopScreen,e)}metric(e){this.track(G.Metric,e)}event(e){this.track(G.Event,e)}exception(e){this.track(G.Exception,e)}request(e){this.track(G.Request,e)}response(e){this.track(G.Response,e)}pageView(e){this.track(G.PageView,e)}track(e,i){let n=p,s={time:ze(),type:e,userID:n.TRACKER_USER_ID,data:i};for(let r of this.listeners)r.track.call(r,s)}}const he=new wn;function Ue(t,e,i,n=1,s=0){return t.alpha=s,qe(t,{alpha:s},{alpha:n},e,i)}function Ni(t,e,i,n=1,s=0){return t.alpha=n,qe(t,{alpha:n},{alpha:s},e,i)}function xn(t,e,i,n,s,r=TWEEN.Easing.Linear.None,o=0,l=!1){let u=e;return new TWEEN.Tween(u).to(i,n).easing(r).repeat(o).yoyo(l).onUpdate(()=>{for(let f in e)f==="scale"?t.scale.x=t.scale.y=u[f]:t[f]=u[f]}).onComplete(()=>{s&&(s.length?s(t):s())})}function qe(t,e,i,n,s,r=TWEEN.Easing.Linear.None){let o=xn(t,e,i,n,s,r);return o.start(),o}function si(t,e,i=0,n=1){let s=new PIXI.Graphics;return s.beginFill(i),s.drawRect(0,0,t,e),s.endFill(),s.alpha=n,s}function Sn(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawPolygon(t),i}function bs(t,e,i=0,n=1){let s=new PIXI.Graphics;return s.lineStyle(n,i),s.drawRect(0,0,t,e),s}function ys(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawCircle(0,0,t),i.endFill(),i}function Be(t,e,i=0,n=0){let s=new PIXI.Graphics;return s.beginFill(n),s.drawRoundedRect(0,0,t,e,i),s.endFill(),s}const Ke="REGISTER_METADATA_KEY",Pn="component",_n="service",On="scene";function d(t){return e=>(t.category=t.category||"component",e.prototype[Ke]=t,e)}function Xi(t){if(Ke in t.prototype){let e=t.prototype[Ke];switch(e.category){case Pn:L.map(`component:${e.tag}`).toFactory(()=>t);break;case _n:let i=b.get(e.tag);i&&console.warn(`${e.tag}: ${i.constructor.name} is replaced by ${t.name}.`),b.register(e.tag,new t);break;case On:L.map(`scene:${e.tag}`).toType(t);break}}else throw"Invaildate component, missing metadata of "+t}function Rt(t){if(Fs(t))for(let e of t)Xi(e);else Xi(t)}class In{constructor(){this.views=[]}add(e){this.pane&&this.views.push(e)}remove(e){if(this.pane){let i=this.views.indexOf(e);i>=0&&this.views.splice(i,1),this.refresh()}}refresh(){for(let e of this.pane.children)this.pane.remove(e);for(let e of this.views)e.showBoundingBox(),e.createItemControllers(e)}addRefreshButton(){this.pane.addButton({title:"refresh"}).on("click",()=>{this.refresh()})}}class Cn{createItemControllers(e){te.pane.addBinding(e,"x"),te.pane.addBinding(e,"y"),te.pane.addBinding(e,"width"),te.pane.addBinding(e,"height"),te.pane.addBinding(e,"rotation"),te.pane.addBinding(e,"scale"),te.pane.addBinding(e,"visible"),te.pane.addBinding(e,"alpha")}}function En(...t){return e=>e}var Tn=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,An=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ln(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Tn(e,i,s),s};function Yi(t){return t instanceof P||t instanceof Wt}class Wt{getComponentByID(e){}}let P=class extends PIXI.Container{constructor(){super(...arguments),this.components=[],this.fadeInTime=-1,this.fadeOutTime=-1,this.editAble=!1}addToEdit(){this.editAble&&te.add(this)}removeFromEdit(){this.editAble&&te.remove(this)}addChild(...t){if(t=t[0],t instanceof PIXI.DisplayObject&&super.addChild(t),Yi(t))return t instanceof P&&(t.fadeIn(),t.addToEdit()),this.components.push(t),t}fadeIn(t){t===void 0&&(t=this.fadeInTime),t>0&&(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=Ue(this,t))}fadeOut(t,e=!0){t===void 0&&(t=this.fadeOutTime),t>0?(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=Ni(this,t,e?()=>{this.parent&&this.parent.removeChild(this)}:void 0)):e&&this.parent&&this.parent.removeChild(this)}removeChild(...t){return t=t[0],t instanceof PIXI.DisplayObject&&super.removeChild(t),Yi(t)&&(Mt(this.components,t),t.deactivate()),t}removeChildren(t,e){return this.removeAllComponents(),super.removeChildren(t,e)}removeAllComponents(){this.deactivate(),this.components=[]}activate(){this.fadeIn(),this.components.forEach(t=>t.activate())}deactivate(){this.removeFromEdit(),this.fadeTween&&this.fadeTween.stop(),this.components.forEach(t=>t.deactivate())}getComponentByID(t){for(let e=0;e<this.components.length;e++){let i=this.components[e];if(i.id===t)return i;let n=i.getComponentByID(t);if(n)return n}}getComponentByTag(t){for(let e of this.components){let i=e.constructor.prototype[Ke];if(i&&i.tag===t)return e}}showBoundingBox(){k(this.boundingBox)&&(this.boundingBox.destroy(),this.removeChild(this.boundingBox));let t=this.getBounding();this.boundingBox=bs(t.width,t.height,0,5),this.addChild(this.boundingBox)}getBounding(){return this.getBounds()}bringToTop(t){this.setChildIndex(t,this.children.length-1)}applyLayout(t){if(t)for(let e in t){let i=t[e];e==="scale"?this.scale.set(i[0],i[1]):e==="pivot"?this.pivot.set(i[0],i[1]):e==="activate"?i?this.activate():this.deactivate():this[e]=i}}onOrientationChange(t){this.layoutInfo&&this.applyLayout(this.layoutInfo[t])}};P=An([En(Cn)],P);var y=(t=>(t[t.LANDSCAPE=0]="LANDSCAPE",t[t.PORTRAIT=1]="PORTRAIT",t))(y||{});function ws(t){let e=c(t,"render");return!(e==="webgl"&&W.type!==PIXI.RENDERER_TYPE.WEBGL||e==="canvas"&&W.type===PIXI.RENDERER_TYPE.WEBGL)}function Bn(t){let e=c(t,"brand",null);return e===null||e==="all"&&!p.BRAND||e.toLowerCase()===String(p.BRAND).toLowerCase()}function ue(t,e){if(!t||!ws(t))return null;let i=t.nodeName,n=L.get(`component:${i}`);if(n){let s=n.create(t,e);return s instanceof P&&g(t,"boundingBox")&&s.showBoundingBox(),s}else console.warn(`can't find component by tag name "${i}"`);return null}function Y(t,e,i=!0){if(!e.parent)throw new Error("call builder.createChildren must pass parent.");(i?Xs:j)(t,(s,r)=>{let o=ue(s,e);o&&e.parent.addChild(o)})}function N(t,e,i){i.scene;let n=i.parent,s=V(e,null);t.id=s,s&&n&&(n[s]=t),t instanceof P&&(t.name=e.tagName+(A(s)?"":`#${s}`),Dn(t,e,i))}function Dn(t,e,i){let n=[{},{},{}],s=i.scene,r=i.parent,o=!1,l=2;for(let u=0;u<e.attributes.length;u++){let h=e.attributes[u].name,f=h,S=l;if(h.indexOf("p-")===0?(S=y.PORTRAIT,f=h.substr(2),o=!0):h.indexOf("l-")===0&&(S=y.LANDSCAPE,f=h.substr(2),o=!0),f==="x"){let m=Fi(e,h);n[S].x=m.unit===Ie.PERCENT?r.width*m.value:m.value}else if(f==="y"){let m=Fi(e,h);n[S].y=m.unit===Ie.PERCENT?r.height*m.value:m.value}else if(f==="alpha")n[S].alpha=a(e,h);else if(f==="pivot"){let[m,_]=Ys(e,h),x=t.getLocalBounds();n[S].pivot=[m.unit===Ie.PERCENT?m.value*x.width:m.value,_.unit===Ie.PERCENT?_.value*x.height:_.value]}else if(f==="scale")if(K(e,h).indexOf(",")!==-1)n[S].scale=us(e,h,[1,1]);else{let m=a(e,h);n[S].scale=[m,m]}else f==="rotation"?n[S].rotation=a(e,h)/180*Math.PI:f==="visible"?n[S].visible=g(e,h,!0):f==="activate"&&(n[S].activate=g(e,h))}e.hasAttribute("interactive")&&(t.interactive=g(e,"interactive")),e.hasAttribute("interactiveChildren")&&(t.interactiveChildren=g(e,"interactiveChildren")),e.hasAttribute("visible")&&(t.visible=g(e,"visible",!0)),t.fadeInTime=a(e,"fadein",-1),t.fadeOutTime=a(e,"fadeout",-1),t.editAble=g(e,"editAble",!1);for(let u=1;u<10;u++)e.hasAttribute("argument"+u)&&(t["argument"+u]=c(e,"argument"+u));o&&(s.multiLayoutComponents.push(t),t.layoutInfo=n),t.applyLayout(n[l])}function Nn(t,e,i,n,s){let r=e.hasAttribute("p-"+i),o=e.hasAttribute("l-"+i);!r&&!o||(r&&(t.layoutInfo[y.PORTRAIT][i]=n(e,"p-"+i,s)),o&&(t.layoutInfo[y.LANDSCAPE][i]=n(e,"l-"+i,s)))}function Mn(t,e,i,n,s){let r=i.scene,o=c(e,n,void 0);if(o&&r[o]){let l=c(e,"parameter",void 0),u=r[o];t[s]=()=>{u.call(r,t,l)}}}function Ut(t,e,i){for(var n=0;n<e.attributes.length;n++){var s=e.attributes[n];s&&s.name.match(/on[A-Z]\w+/)&&Mn(t,e,i,s.name,s.name+"Handler")}}function Ee(t,e){let i=e[t+"Handler"];return i?(i(),!0):!1}function xs(t){let e=t.hitArea;if(e){let i=bs(e.width,e.height,16711680,2);t.addChild(i)}}const ni="__guitarist_bindings__";class Rn{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=L.get(this.key)}}class Wn{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=b.get(this.key)}}function Ss(t){return(e,i)=>{let n=e[ni]||[];n.push(t(e,i)),e[ni]=n}}function $t(t){return Ss((e,i)=>new Rn(t,i))}function Se(t){return Ss((e,i)=>new Wn(t,i))}function zi(t){(t[ni]||[]).forEach(i=>i.apply(t))}function Un(t){let e=t?t.split(","):null;return(e?e.shift():null)=="fadein"?$n(parseFloat(e.shift())||800):n=>{I.replace(n)}}function $n(t){return e=>{let i=I.current;i&&(i.interactive=!1,i.interactiveChildren=!1);let n=I.resolve(e);n.alpha=0,I.add(n),Ue(n,t,()=>{i&&(i.exit(),I.remove(i))})}}class $e extends P{constructor(e){super(),this.layout=e,this.multiLayoutComponents=[],this.id=V(e),this.name="scene#"+this.id,this.transitions=c(e,"transitions",null)}loadResources(){let e=B,i=this.layout.querySelector("scene resources");i?(e.retryTimes=a(i,"retry",2),j(i,(n,s)=>{if(ws(n)&&Bn(n)){let r=fn(n);e.add(r)}}),e.on("progress",n=>{this.onProgress(n)}),e.once("complete",()=>{e.removeAllListeners(),this.onLoaded()}),e.load()):this.onLoaded()}create(e){let i=this.layout.querySelector("scene view");i&&Y(i,{scene:this,parent:this}),zi(this);let n=b.get("orientationService");n.mode==="both"&&this.onOrientationChange(n.getOrientation()),this.onCreated(e)}enter(e){he.screen({name:this.id}),this.layout&&(this.loadResources(),this.create(e))}focus(){}blur(){}exit(){this.removeChildren()}setState(e){e.scene=this,this.state&&this.state.exit(),zi(e),this.state=e,this.state.enter()}get isPortraitLayout(){let e=b.get("orientationService");return e.mode==="both"&&e.getOrientation()===y.PORTRAIT}onProgress(e){}onLoaded(){this.next=c(this.layout,"next",null),this.next&&this.transit()}transit(){Un(this.transitions)(this.next)}onCreated(e){}onOrientationChange(e){for(let i=0;i<this.multiLayoutComponents.length;i++)this.multiLayoutComponents[i].onOrientationChange(e)}onSceneResize(){}}class Hn{constructor(){this.overlayContainer=new PIXI.Container,this.sceneContainer=new PIXI.Container,this.scenesRegistry={},this.scenes=[]}register(e){this.scenesRegistry[V(e)]=e}push(e,i=!0,n){this._current&&(this._current.blur(),this._current.visible=!i),this.add(this.resolve(e),n)}pop(){if(this._current&&(this._current.exit(),this.sceneContainer.removeChild(this._current),this.scenes.pop()),this.scenes.length>0){let e=this.scenes[this.scenes.length-1];e.visible=!0,e.focus(),this._current=e}}remove(e){this.sceneContainer.removeChild(e),this.scenes.splice(this.scenes.indexOf(e),1)}replace(e,i){this._current&&(this._current.exit(),this.remove(this._current)),this.add(this.resolve(e),i)}resolve(e){if(ls(e)){let i=e,n=this.scenesRegistry[i],s=L.get(`scene:${i}`,n);return s||(s=new $e(n)),s}else return e}addOverlay(e){this.overlayContainer.addChild(e)}removeOverlay(e){this.overlayContainer.removeChild(e)}get current(){return this._current}add(e,i){this.scenes.push(e),this.sceneContainer.addChild(e),this._current=e,this._current.enter(i)}}class F{configure(e){}startup(){}shutdown(){}}class Vn{constructor(){this.services={}}get(e){return this.services[e]}register(e,i){let n;return Vs(i)?n=new i:n=i,this.services[e]=n,n}has(e){return k(this.services[e])}startup(){for(let e in this.services)this.services[e].startup()}shutdown(){for(let e in this.services)this.services[e].shutdown()}}class Fn{constructor(){this.count=0}push(e,i=!1){if(!(!i&&this.has(e))){var n={value:e,next:void 0};if(this.count++,!this.head)this.head=n;else{let s=this.head;for(;s.next;)s=s.next;s.next=n}}}forEach(e){let i=this.head;for(;i;)e(i.value),i=i.next}has(e){let i=this.head;for(;i;){if(i.value===e)return!0;i=i.next}return!1}clear(){this.head=void 0,this.count=0}remove(e){let i=this.head;for(var n=i;i;){if(i.value===e){this.count--,n.next=i.next,i===this.head&&(this.head=i.next);return}n=i,i=i.next}}}class jn{constructor(){this.list=new Fn}advanceTime(e){return this.list.forEach(i=>{i.advanceTime(e)}),!0}add(e){this.list.push(e)}remove(e){this.list.remove(e)}contains(e){return this.list.has(e)}clear(){this.list.clear()}}const te=new In,L=new en,I=new Hn,B=new dn,b=new Vn,J=new fs,C=new fs,E=new jn,w=new Zs;let v,W,D,p,ri,Je={avif:!1,webp:!1};function Gn(){return Promise.all([PIXI.detectAvif.test(),PIXI.detectWebp.test()]).then(([t,e])=>{Je.avif=t,Je.webp=e})}function kn(t){let e={width:t.width,height:t.height,view:t.canvas,backgroundColor:t.backgroundColor,autoResize:!0,antialias:!0,resolution:Math.min(t.resolution,2)};const i=PIXI.autoDetectRenderer(e);return A(t.canvas)&&document.body.appendChild(i.view),i}function Xn(t){return ri=t,w.platform=t.config.name,t.launchTime,he.initialize(),p=L.get("context"),Promise.all([p.initialize(),Gn()])}function Yn(t,e){v=e,p.ID=V(t);let i=c(t,"enter");v.minWidth=a(t,"minWidth",0),v.minHeight=a(t,"minHeight",0),v.width=a(t,"width",800),v.height=a(t,"height",600),v.resolution=window.devicePixelRatio??a(t,"resolution",1),v.backgroundColor=a(t,"backgroundColor",0),W=kn(v);for(let s=0;s<t.attributes.length;s++){let r=t.attributes[s].name;p[r]===void 0&&(p[r]=t.attributes[s].value)}const n=B.api;for(let s in n)p[s]=n[s];p.getHudLanguage(),p.printEngineVersion(),ri.opid=(p.OPERATOR||"").toUpperCase(),ri.gameid=p.ID,qn(),D=new PIXI.Container,D.name="world",D.addChild(I.sceneContainer),D.addChild(I.overlayContainer),D.pivot.set(v.width/2,v.height/2),j(t.querySelector("scenes"),(s,r)=>{I.register(s)}),j(t.querySelector("services"),(s,r)=>{let o=b.get(s.nodeName);o||console.log("service "+s.nodeName+" not found"),o.configure(s)}),b.startup(),I.replace(i),PIXI.Ticker.shared.maxFPS=a(t,"maxFPS",59.99),PIXI.Ticker.shared.minFPS=a(t,"minFPS",55),PIXI.Ticker.shared.add(zn),PIXI.Ticker.shared.autoStart=!0}function zn(t){PIXI.Ticker.shared.elapsedMS,E.advanceTime(t),W.render(D)}function qn(){try{if(navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)){let e=W.plugins&&W.plugins.interaction?W.plugins.interaction:W.events;if(!e)return;let i=e.interactionDOMElement?e.interactionDOMElement:e.domElement;if(!i)return;window.document.removeEventListener("mousemove",e.onMouseMove,!0),i.removeEventListener("mousedown",e.onMouseDown,!0),i.removeEventListener("mouseout",e.onMouseOut,!0)}}catch{console.log("InteractionManager not applicable.")}}function Kn(t){let e="",i=0;for(let n in t)t.hasOwnProperty(n)&&(i++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]))}let Fe;function Jn(){if(Fe===void 0)try{Fe=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{Fe=!1}return Fe}let qi=[],Ps=class{constructor(e=!1){this.isXDR=!1,e&&Jn()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,qi.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,n){return n&&(this.client.responseType="json"),this.client.open("POST",e),i&&this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.send(i)}afterDone(){this.isXDR&&Mt(qi,this.client)}send(e){return new Promise((i,n)=>{setTimeout(()=>{e?this.client.send(Kn(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?i(this.client):n(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),n(new Error("Request timeout"))},this.client.onerror=s=>{this.afterDone(),n(new Error(s.toString()))}})}};function _s(t,e){return new Ps(!0).get(t)}function Os(t){let e=t||"",i=e.split("."),n=i.length;return n>1?`${i[n-2]}.${i[n-1]}`:e}function Qn(t){return w.ie&&w.ieVersion<10?Qs(t.responseText):t.responseXML.documentElement}function Zn(t){t.bootstrap=()=>{let e=t.config;B.downloadApi().then(()=>{Xn(t).then(()=>{let i=p.resolve(e.layout+"/{{LANGUAGE}}.min.xml");i=p.applyTimeVersion(i),new Ps().get("layout/"+i).then(n=>{let s=Qn(n);Yn(s,{canvas:document.querySelector("#stage")})}).catch(n=>{he.exception({name:n.name,description:n.message,fatal:!0,extraInfo:n})})}).catch(i=>{alert(i)})})}}const er="events:errorpopup:open",Is="events:errorpopup:close",tr=11;let Te=document.getElementById("errorDialog"),je=document.getElementsByClassName("close")[0];document.getElementById("historyContainer");document.getElementsByClassName("closeHistory")[0];let _e,pe,zt,qt,Kt,Ki=0,Ji=0,Cs=!1;function Pe(t){if(pe===void 0||t!=null){let e=b.get("symbolService");t!=null?pe=e.multiSize[t].height:pe=e.size.height,pe==null&&(pe=e.multiSize[0].height)}return pe}function He(){if(_e===void 0){let t=b.get("symbolService");_e=t.size.width,_e==null&&t.multiSize!=null&&(_e=t.multiSize[0].width)}return _e}function Es(t){return t===void 0?Ki:(Ki=t,t)}function ir(t){return t===void 0?Ji:(Ji=t,t)}function R(){return zt===void 0&&(zt=L.get("user")),zt}function T(){return qt===void 0&&(qt=L.get("context")),qt}function Mi(){return T().NUM_OF_COLUMN}function Ts(){return T().NUM_OF_ROW}function oi(t,e,i=!1,n){return M(t,e,i,!0,n)}function M(t,e,i=!1,n=!1,s){return b.get("soundService").play(t,e,i,n,s)}function Qe(t){if(!t)return;b.get("soundService").stop(t.soundId)}function Ri(t="button"){M(t,"default",!0)}function Ht(t){return Kt===void 0&&(Kt=b.get("textService")),Kt.translate(t)}function Q(t){return Ht("{{"+t+"}}")}function Ze(t,e,i){if(!Cs)if(Te){Te.style.display="block";let n=document.getElementById("errormessage"),s=document.getElementById("errorcode");if(n.innerHTML=t,s.innerHTML=ne(e,3),i||or(e)){rr();let r=()=>{ar({code:e})};je.style.display!=="none"&&(je.style.display="none",n.parentElement.appendChild(lr(Q("ok"),r)))}else{let r=()=>{switch(je.removeEventListener("click",r,!1),Te.style.display="none",e){case 0:case 5:case 7:case 14:ai();break;case 20:case 21:case 24:ai(!0);break;case 27:hr()}C.emit(Is,{code:e})};je.addEventListener("click",r,!1),C.emit(er,{code:e})}}else alert(t)}function sr(t,e){if(Te&&Te.style.display==="block"){let i=document.getElementById("errormessage");i.innerHTML=t}else Ze(t,e)}function nr(){let t=p.collapsingBonusID;return t||""}function Ls(){return p.isProgressiveJackpot==="true"}function rr(){let t=b.get("keyboardService");t&&t.shutdown(),R().stopAutoSpin(),I.current.id==="main"&&(I.current.exit(),I.replace("main"))}function or(t){return parseInt(t)!==10&&parseInt(t)!==29&&!T().loginUrl&&(!T().LOBBY_URL||T().HIDE_LOBBY==="1")}function ar(t){t&&(C.emit(Is,t),window.open("","_self"),self.close(),sr(Q("closegame"),t.code),Cs=!0)}function lr(t,e){let i=document.createElement("div"),n=document.createElement("span");return n.innerHTML=t,n.className="button",i.className="buttons",i.appendChild(n),n.addEventListener("click",()=>{i.parentElement&&i.parentElement.removeChild(i),e&&e()},!1),i}function hr(){window.close(),setTimeout(()=>ai(!0),50)}function ai(t=!1){T().loginUrl&&T().loginUrl!==""&&!t?window.open(T().loginUrl,"_self"):T().HIDE_LOBBY==="0"&&T().LOBBY_URL&&T().LOBBY_URL!==""&&window.open(T().realLobbyUrl,"_self")}function Qi(t="0",e){t===""&&(t="0"),Ze(Ht(`{{err_${ne(t,3)}}}`),t,e)}function ur(t,e){if(Ae(t,"frsum")){let s=a(t,"frsum");R().froundSum=s}return Ae(t,"expired")&&(R().froundExpired=c(t,"expired")==="1"),e}function cr(t){if(t.tagName==="error")return{success:!1,data:{code:a(t,"code"),message:fe(t)}};{let e=t.querySelector("bonus"),i=t.querySelector("wheels"),n=ee(i,"rows"),s=t.querySelector("bonusposition"),r=n.length&&p.bonusAsWinlinesRow!=="true";return{success:!0,data:ur(t,{win:new Decimal(fe(t.querySelector("win"))),balance:new Decimal(fe(t.querySelector("balance"))),multiplier:a(t,"multiplier",1),wheels:fr(i,n),winLines:Zi(t.querySelector("winposition")),bonusPosition:r?pr(s,n):Zi(s),bonusID:V(e,void 0),bonusKey:fe(e,void 0),bonus:e,data:t,fround:dr(t)})}}}function dr(t){let e=t.querySelector("fround");if(e)return{round:a(e,"round"),finished:c(e,"isfinished")==="1"}}function Zi(t){let e=[];return j(t,(i,n)=>{let s=[],r=gs(fe(i).split(","),o=>parseInt(o)-1);for(let o=0;o<r.length;o++)r[o]>=0&&s.push([o,r[o]]);e.push({index:a(i,"line"),win:a(i,"win"),multiplier:a(i,"mul"),positions:s,type:c(i,"type")})}),e}function pr(t,e){let i=[];return j(t,(n,s)=>{let r=[],o=gs(fe(n).split(","),u=>parseInt(u)),l=[];for(let u=0;u<e.length;u++){l=o.splice(0,e[u]);for(let h=0;h<l.length;h++)l[h]>0&&r.push([u,h])}i.push({index:a(n,"line"),win:a(n,"win"),multiplier:a(n,"mul"),positions:r,type:c(n,"type")})}),i}function fr(t,e=[]){let i=ee(t,"val");if(e.length!==Mi())return mn(3,i,parseInt);let n=[];for(let s=0;s<e.length;s++)n.push(i.splice(0,e[s]));return n}const mr="1";class gr{constructor(){this.restoreBonus=!1,this.bonusBet=!1,this.autoSpinValues=[100,75,50,25,10],this.autoSpin=10,this._betValueIndex=0,this._multiplierIndex=0,this.maxBetRevertIndex=0,this.isTurbo=!1,this.accountName="Funplay",this.displayName="Funplay",this.funplay=!0,this.currency="RMB",this.balance=new Decimal(0),this.winAmount=new Decimal(0),this.bet={lines:0,credits:0,amount:0,multiplier:1}}setDefaultBet(){let e=p.defaultBet;if(e=e?JSON.parse(e):{},!e||e[this.currency]===void 0)this.betValueIndex=0;else{let i=this.betValues.indexOf(e[this.currency]);this.betValueIndex=Math.max(0,i)}}setMaxBet(){this.betValueIndex=this.betValues.length-1}get isMaxBet(){return this.displayedBetIndex===this.betValues.length-1}set multiplierIndex(e){this._multiplierIndex=e,this.bet.multiplier=this.multiplierValues[e]}get multiplierIndex(){return this._multiplierIndex}set betValueIndex(e){this._betValueIndex=e,this.bet.amount=this.betValues[e]}get betValueIndex(){return this._betValueIndex}set betValue(e){this.betValueIndex=Math.max(0,this.betValues.indexOf(e))}get betValue(){return this.bet.amount}get froundBet(){if(this.fround)return this.fround.bet!==void 0?this.fround.bet:a(this.fround,"bet",0)}get froundMul(){if(this.fround){if(this.fround.multiplier!==void 0){let e=this.fround.multiplier;return this.multiplierValues.indexOf(e)<0&&(e=this.multiplierValues[0]),e}return a(this.fround,"mul",1)}else return}get froundTotalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.froundBet)).times(this.froundMul)}get froundBetIndex(){return Math.max(this.betValues.indexOf(this.froundBet))}get froundMultiplierIndex(){return Math.max(this.multiplierValues.indexOf(this.froundMul),0)}get totalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.bet.amount)).times(this.bonusBet?2:1).times(this.bet.multiplier).times(this.bet.betLevel?this.bet.betLevel:1)}get displayedMultiplier(){return this.froundOn?this.froundMul:this.bet.multiplier}get displayedBetAmount(){return this.froundOn?this.froundBet:this.bet.amount}get displayedTotalBet(){return this.froundOn?this.froundTotalBet:this.totalBet}get linesCredits(){return this.bet.credits>0?this.bet.credits:this.bet.lines}get displayedBetIndex(){return this.froundOn?this.froundBetIndex:this.betValueIndex}get displayedMultiplierIndex(){return this.froundOn?this.froundMultiplierIndex:this._multiplierIndex}get isDoubleUp(){return this.bonus&&this.bonus.id===mr}checkAutoSpinConditions(){if(!this.autoSpinSettings||!this.autoSpinSettings.inAutoSpins)return!1;let e=new Decimal(0),i=this.balance.minus(this.autoSpinSettings.startBalance);i.lt(0)&&(e=i.dividedBy(this.totalBet).abs());let n=this.bonus!==void 0&&this.bonus!==null&&this.bonus.id!==nr();return this.autoSpin===0||this.autoSpinSettings.stopAtFeature&&n||this.autoSpinSettings.stopAtWin>0&&this.winAmount.gt(this.autoSpinSettings.stopAtWin)||this.autoSpinSettings.stopAtBalance>0&&i.gte(this.autoSpinSettings.stopAtBalance)||this.autoSpinSettings.stopAtTotalBet>0&&e.gte(this.autoSpinSettings.stopAtTotalBet)||this.autoSpinSettings.stopAtCustom>0&&i.lte(-this.autoSpinSettings.stopAtCustom)?(this.stopAutoSpin(),!1):!0}stopAutoSpin(){this.isAutoSpinOn&&(this.autoSpinSettings.inAutoSpins=!1)}get isAutoSpinOn(){return this.autoSpinSettings&&this.autoSpinSettings.inAutoSpins}}var vr=Object.defineProperty,br=Object.getOwnPropertyDescriptor,yr=(t,e,i,n)=>{for(var s=n>1?void 0:n?br(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&vr(e,i,s),s};const wr="events:reel:slow",xr="events:reel:normal";let et=class{constructor(){this.acceleration=2,this.deceleration=2,this.stopacceleration=2,this.minSpeed=10,this.maxSpeed=60,this.duration=300,this._frameToStop=0,this.numberRandomize=1}advanceTime(t){if(this.enabled){try{this.getSpeed(),this.move(this.currentSpeed),this.addAndRemoveSymbols(),this._state==2&&Math.abs(this.currentSpeed-this.stopSpeed)<.01&&(this.stopSpeed=this.currentStopSpeed,this.displayReel(),this.cancel(),this.resolve())}catch{this.reject&&this.reject({code:tr,message:""})}return!0}}displayReel(){this.reel.display()}getSpeed(){if(this._state===3)this.currentSpeed=this.minSpeed;else if(this._state===4)C.emit(xr,this.reel),this.currentSpeed+=this.currentAcc,this._state=0;else if(this._state===0)this.currentSpeed+=this.currentAcc;else if(this._state===1)this.stopDistance-=this.currentSpeed,this.readyToStop();else if(this._state===2)this.currentSpeed-=this.currentAcc;else return 0;return this.currentSpeed=Math.min(this.currentSpeed,this.maxSpeed),this.currentSpeed}play(t){this.enabled=!0,this._state=0,this.reel=t,this.currentSpeed=this.startSpeed,this.currentAcc=this.acceleration,E.add(this),this.reel.options.restrictedSymbols&&this.reel.options.slowRestriction&&(this.slowRestrictedSymbols=this.reel.options.restrictedSymbols.split(","))}stop(t){if(this.slowStopping=!1,!this.enabled)return Promise.resolve();if(this._state===3)this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0;else if(this.slowRestrictedSymbols){for(let e=0;e<this.slowRestrictedSymbols.length;e++)if(t.indexOf(Number(this.slowRestrictedSymbols[e]))>=0){this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0,this.reel.options.slowSound&&oi(this.reel.options.slowSound,"default",!0);break}}return this.reel.addSymbolsAtTop(t,e=>e.idle()),this.stopDistance=this.getStopDistance(),this.readyToStop(),new Promise((e,i)=>{this.resolve=e,this.reject=i})}getStopDistance(){return-this.reel.topSymbol.y+this.reel.getTopSymbolY()}readyToStop(){this._frameToStop=0,this._state=1;var t=this.distanceToStop();this.stopDistance<=t&&(this.currentSpeed=this.speedToStop(),this._state=2)}cancel(){this.enabled=!1,E.remove(this)}move(t){this.reel.symbolContainer.children.forEach(e=>{e.y+=t})}addAndRemoveSymbols(){let t=this.reel.viewport;if(this.reel.topSymbol.y>=t.y){let i=this.reel.pickMany(this.numberRandomize);if(this.slowRestrictedSymbols){if(this._state===0&&this.slowRestrictedSymbols.indexOf(i[0].toString())>=0)this._state=3,this.currentSpeed=this.minSpeed,C.emit(wr,this.reel),this.reel.options.slowSound&&oi(this.reel.options.slowSound,"default",!0);else if(this._state===3){let n=!1;for(let s=0;s<this.slowRestrictedSymbols.length;s++){let r=this.reel.symbolContainer.getSymbolIndex(Number(this.slowRestrictedSymbols[s]));r>=0&&this.reel.symbolContainer.get(r).y>=t.y+Ts()*Pe()&&(n=!0)}n&&(this._state=4)}}this.reel.addSymbolsAtTop(i,n=>n.spin())}this.reel.removeOutsideSymbols()}speedToStop(){for(var t=this.stopDistance,e=this.stopSpeed,i=0,n=0;i<=t;)i+=e,e+=this.slowStopping?this.deceleration:this.stopacceleration,n++;let s=(t-n*this.stopSpeed)*2/(n*(n-1));return this.currentAcc=s,this.stopSpeed+n*s}distanceToStop(){for(var t=this.maxSpeed,e=0;t>=this.stopSpeed;)t-=this.slowStopping?this.deceleration:this.stopacceleration,e+=t;return e}static create(t){let e=new et;return e.maxSpeed=a(t,"max",60),e.minSpeed=a(t,"min",10),e.startSpeed=a(t,"startSpeed",0),e.stopSpeed=a(t,"stopSpeed",0),e.acceleration=a(t,"acceleration",2),e.deceleration=a(t,"deceleration",2),e.stopacceleration=a(t,"stopacceleration",e.acceleration),e.duration=a(t,"duration",300),e.numberRandomize=a(t,"numberRandomize",1),e.currentStopSpeed=e.stopSpeed,e}};et=yr([d({tag:"animator:inback"})],et);function tt(t){let e=Object.create(null);return t=t.trim().replace(/^(\?|#|&)/,""),t&&t.split("&").forEach(i=>{let n=i.replace(/\+/g," ").split("="),s=n.shift(),r=n.length>0?n.join("="):void 0;s=decodeURIComponent(s),r=r===void 0?null:decodeURIComponent(r),e[s]===void 0?e[s]=r:Array.isArray(e[s])?e[s].push(r):e[s]=[e[s],r]}),e}function As(t){let e="",i=0;for(let n in t)t[n]&&(i++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Sr(t){return t===void 0&&(t=Vt()),`${location.protocol}//${location.host}${location.pathname}?`+As(t)}function Vt(){return tt(location.search)}function Pr(t,e){let i=Vt();return i[t]=e,Sr(i)}function _r(t,e){let i=Vt();return i[t]?i[t]:e}class es{constructor(e){e===void 0&&(e=location.toString());let i=e.indexOf("?"),n=i>0?e.substr(i+1):"";this.front=i>0?e.substr(0,i):e,this.queryString=tt(n)}get search(){let e=As(this.queryString);return e?"?"+e:""}set search(e){this.queryString=tt(e)}toString(){let e=this.search;return this.front+e}getParameter(e,i){return this.queryString[e]?this.queryString[e]:i}setParameter(e,i){return this.queryString[e]=i,this}}function ke(t,e=!1){let i=document.cookie?document.cookie.split(";"):[],n=/(%[0-9A-Z]{2})+/g,s;for(let r of i){let o=r.split("="),l=o.slice(1).join("=");l.charAt(0)==='"'&&(l=l.slice(1,-1));try{let u=o[0].replace(n,decodeURIComponent);if(e&&(u=u.replace(/ +/,"")),l=l.replace(n,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch{}if(t===u){s=l;break}t||(s[u]=l)}catch{}}return s}function Or(t,e){let i=new Date;i.setTime(i.getTime()+365*24*60*60*1e3),document.cookie=t+"="+e+";expires="+i.toUTCString()+";path=/"}const z=class z{};z.English="en",z.Chinese="cs",z.Vietnamese="vn",z.Thai="th",z.Khmer="kh",z.Indonesian="id",z.Korean="kr",z.Japanese="jp",z.Turkish="tr",z.Portuguese="pt",z.Hindi="hi";let O=z;class Ir{constructor(){this.LANGUAGE=O.English,this.HUDLANG=O.English}initialize(){return new Promise((e,i)=>{this.LANGUAGE=this.tryGetParameter("lang",O.English),this.DOMAIN=Os(location.hostname),e()})}getHudLanguage(){return this.hudLang&&(this.HUDLANG=this.hudLang.indexOf(this.LANGUAGE)>-1?this.LANGUAGE:O.English),this.HUDLANG}tryGetParameter(e,i){return A(this.queryString)&&(this.queryString=Vt()),this.queryString[e]?this.queryString[e]:i}resolve(e,i){let n=Gs(this,i);for(let s in n)n[s]&&ls(n[s])&&(e=e.replace(`{{${s}}}`,n[s]));return e}printEngineVersion(){this.engineVersion&&console.log("Guitarist "+this.engineVersion)}applyTimeVersion(e){return e+"?v="+(this.publishTime||Date.now().toString())}}class Cr extends Ir{constructor(){super(...arguments),this.HELP_URL=null}initialize(){if(this.configureLanguage(),this.configureFunplay(),this.configureToken(),this.configureDomain(),this.BRAND=this.tryGetParameter("brand"),this.OPERATOR=this.tryGetParameter("op"),this.AUTHENTICATED=this.tryGetParameter("auth","0"),this.HIDE_LOBBY=this.tryGetParameter("hidelobby","0"),this.HIDE_FULLSCREEN=this.tryGetParameter("hidefullscreen"),this.CHEAT=this.tryGetParameter("cheat"),this.CURRENCY_SYMBOL=this.tryGetParameter("currencySymbol","0")==="1",this.AUTHENTICATED==="1"){let e=R();e.accountName=e.displayName=this.tryGetParameter("username")}return this.loadUrlsConfig(this.tryGetParameter("config")).then(e=>{this.LOGIN_URL=e.loginURL,this.HOME_URL=e.homeURL,this.FUNDS_URL=e.fundsURL,this.LOBBY_URL=e.lobbyURL,this.LIVECHAT_URL=e.livechatURL,this.HIDE_LOBBY=e.hidelobby,e.currencySymbol&&(this.CURRENCY_SYMBOL=!0)}).then(()=>this.verify())}initActitvityTimer(){this.activeTimeout=0,this.inactiveTimeout=0;let e=B.json("configcommons");e&&(e.activeTimeout&&(this.activeTimeout=e.activeTimeout,this.startActivityTimer()),e.inactiveTimeout&&(this.inactiveTimeout=e.inactiveTimeout,this.startInactivityTimer()))}startInactivityTimer(){this.inactiveTimer=this.startTimer(this.inactiveTimer,this.inactiveTimeout,()=>this.inactivityTimesUp())}startActivityTimer(){this.activeTimer=this.startTimer(this.activeTimer,this.activeTimeout,()=>this.activityTimesUp()),this.sessionTimestamp=ze(),this.sessionUserBalance=R().balance}startTimer(e,i,n){return i>0&&(this.clearTimer(e),e=setTimeout(()=>n(),i*6e4)),e}clearTimer(e){e&&clearTimeout(e)}activityTimesUp(){if(I.current.checkExtendActivityTimesUp){this.isActivityTimesUp=!0;return}this.isActivityTimesUp=!1;let e=R(),i=Q("err_998"),n=bn(ze()-this.sessionTimestamp),s=ne(n.getUTCHours(),2)+":"+ne(n.getUTCMinutes(),2)+":"+ne(n.getUTCSeconds(),2),r=e.balance.minus(this.sessionUserBalance),o=r.lt(0)?Q("youvelost"):Q("youvewon");o+=e.currency+" "+Ai(se(r.abs())),i=i.replace("%time%",s).replace("%winlose%",o),Ze(i,"998",!0)}inactivityTimesUp(){let e=Q("err_999").replace("%s%",this.inactiveTimeout);Ze(e,"999",!0)}configureLanguage(){let e=this.tryGetParameter("lang",O.English)||ke("lang");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e=O.English;break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e=O.Chinese;break;case e.indexOf("th")>=0:e=O.Thai;break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e=O.Vietnamese;break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e=O.Korean;break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e=O.Khmer;break;case e.indexOf("id")>=0:e=O.Indonesian;break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e=O.Japanese;break;case e.indexOf("tr")>=0:e=O.Turkish;break;case e.indexOf("pt")>=0:case e.indexOf("br")>=0:e=O.Portuguese;break;case e.indexOf("hi")>=0:case e.indexOf("in")>=0:e=O.Hindi;break;default:e=O.English}this.LANGUAGE=e}configureFunplay(){this.ANONYMOUS=this.FUNPLAY=this.tryGetParameter("fun","1")==="1"}configureToken(){this.TOKEN=this.tryGetParameter("token")||this.tryGetParameter("s")||ke("g")||ke("s")}configureDomain(){this.DOMAIN_FULL=location.hostname,this.DOMAIN=Os(this.DOMAIN_FULL),this.URL_DOMAIN=this.DOMAIN,this.DOMAIN==="cloudfront.net"&&(this.DOMAIN="gpiops.com"),this.DOMAIN=this.tryGetParameter("domainlink",this.DOMAIN)}loadUrlsConfig(e){let i={loginURL:this.tryGetParameter("loginURL"),homeURL:this.tryGetParameter("homeURL"),fundsURL:this.tryGetParameter("fundsURL")||this.tryGetParameter("FundURL"),lobbyURL:this.tryGetParameter("lobbyURL"),livechatURL:this.tryGetParameter("livechatURL"),hidelobby:this.tryGetParameter("hidelobby","0"),currencySymbol:this.tryGetParameter("currencySymbol","0")==="1"};return A(e)?new Promise((n,s)=>{n(i)}):_s(e).then(n=>{let s;try{s=JSON.parse(n.responseText)}catch{return console.warn("error in parse config.json"),i}return{loginURL:this.applyDomain(s.loginURL),homeURL:this.applyDomain(s.homeURL),fundsURL:this.applyDomain(s.fundsURL),lobbyURL:this.applyDomain(s.lobbyURL),livechatURL:this.applyDomain(s.livechatURL),hidelobby:s.hidelobby?String(s.hidelobby):"0",currencySymbol:s.currencySymbol}}).catch(n=>(console.warn("error in get config.json"),i))}applyDomain(e){if(e)return e.replace("[%%DOMAINLINK%%]",this.DOMAIN).replace("[%%URLDOMAIN%%]",this.URL_DOMAIN).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL)}verify(){return new Promise((e,i)=>{A(this.OPERATOR)&&i("The operator parameter is missing!"),!this.FUNPLAY&&A(this.TOKEN)?window.location.href=this.loginUrl:e()})}getDefaultLoginURL(){if(this.OPERATOR==="w88"&&this.defaultLoginURL)return this.defaultLoginURL}get loginUrl(){let e=this.applyDomain(this.LOGIN_URL||this.getDefaultLoginURL());return e?`${e}?url=`+encodeURIComponent(Pr("fun","0")):this.realLobbyUrl}get hasLobbyUrl(){return this.LOBBY_URL||this.defaultLobbyUrl}get realLobbyUrl(){if(this._realLobbyUrl===void 0){if(this.HIDE_LOBBY==="1")return this._realLobbyUrl="",this._realLobbyUrl;let e=this.applyDomain(this.LOBBY_URL||"//"+this.defaultLobbyUrl),i=new es(e);i.search||(i.search=location.search),!this.FUNPLAY&&!A(this.USER_ID)&&(_r("s")?i.setParameter("s",this.USER_ID):i.setParameter("token",this.USER_ID)),this._realLobbyUrl=i.toString()}return this._realLobbyUrl}get realPlayUrl(){let e=new es;return e.setParameter("fun","0"),this.TOKEN?e.toString():this.loginUrl}get livechatUrl(){let e=R();return this.LIVECHAT_URL?this.applyDomain(this.LIVECHAT_URL).replace("[%%MEMBERID%%]",this.FUNPLAY?"0":e.accountName).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL).replace("[%%LANG%%]",this.LANGUAGE):""}get homeURL(){return this.applyDomain(this.HOME_URL||"//"+this.homeUrl)}get helpUrl(){if(this.HELP_URL===null){this.HELP_URL="";let e=B.json("configcommons");if(e&&e.help){let i=e.help.url,n=e.help.games[this.ID];i&&n&&(this.HELP_URL=i.replace("[%%GAME%%]",n))}this.HELP_URL=this.HELP_URL.replace("[%%LANG%%]",this.LANGUAGE)}return this.applyDomain(this.HELP_URL)}get langFullName(){return vn(["en-us","id-id","ja-jp","km-kh","ko-kr","pt-br","th-th","tr-tr","vi-vn","zh-cn"],e=>e.indexOf(this.LANGUAGE)!==-1||this.LANGUAGE==="cs"&&e==="zh-cn")}get historyUrlDomain(){let e=B.json("configcommons");return this.applyDomain(e.historyUrl)}get historyUrl(){let e=this.historyVersion?`&ver=${this.historyVersion}`:"";return this.historyUrlDomain+"?key="+this.TOKEN+"&lang="+this.langFullName+e+"&gID="+this.gID}get hasFeatures(){return!(this.features&&this.features==="false")}get miniFooter(){return this.tryGetParameter("p")==="mini"&&this.tryGetParameter("footer")==="1"}get isWinWays(){return this.winWays&&this.winWays!==""}get isMultiplierDefaultLastIndex(){return this.multiplierDefaultIndex&&this.multiplierDefaultIndex==="last"}get multiplierAsCreditBet(){return this.creditBet==="true"}get isVibrationActivated(){return this.vibrationActivated==="true"}get mockFroundToggle(){return this.tryGetParameter("mfr")==="1"&&this.FUNPLAY&&R().demo==="1"}checkActivityTimesUp(){this.isActivityTimesUp&&this.activityTimesUp()}}class Er extends Cr{constructor(){super(),this.NUM_OF_ROW=3,this.NUM_OF_COLUMN=5,this.PAYLINES=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,0,0],[2,2,1,2,2],[1,2,2,2,1],[1,0,0,0,1],[1,0,1,0,1],[1,2,1,2,1],[0,1,0,1,0],[2,1,2,1,2],[1,1,0,1,1],[1,1,2,1,1],[0,1,1,1,0],[2,1,1,1,2],[0,1,2,2,2],[2,1,0,0,0],[0,2,0,2,0],[2,0,2,0,2],[0,2,2,2,0],[2,0,0,0,2],[0,0,2,0,0],[2,2,0,2,2],[0,2,1,0,2],[2,0,1,2,0],[0,0,1,2,2],[2,2,1,0,0],[1,0,2,0,1],[1,2,0,2,1],[1,1,1,1,0],[1,1,1,1,2],[0,0,0,0,1],[2,2,2,2,1],[0,1,2,1,2],[2,1,0,1,0],[2,2,2,2,0],[0,0,0,0,2],[0,1,2,1,1],[2,1,0,1,1],[0,0,1,2,1],[2,2,1,0,1],[1,2,2,2,0],[1,0,0,0,2],[0,1,1,1,2],[2,1,1,1,0],[1,1,0,1,0],[1,1,2,1,2],[0,0,0,1,2]]}}function Tr(t,e,i){return t<e?e:t>i?i:t}var Lr=Object.defineProperty,Ar=Object.getOwnPropertyDescriptor,Br=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ar(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Lr(e,i,s),s};let it=class extends Wt{constructor(t){super(),this.options=t}activate(){this.deactivate();let t=b.get("soundService");this.playback=this.options.bgm?t.playBgm(this.options.name):t.play(this.options.name,this.options.channel,!1,this.options.softBgm),k(this.playback)&&t.setVolume(this.options.volume,this.playback.soundId)}deactivate(){!this.options.bgm&&k(this.playback)&&(b.get("soundService").stop(this.playback.soundId),this.playback=void 0)}static create(t,e){let i=g(t,"auto"),n=new it({name:Li(t),volume:Tr(a(t,"volume",1),0,1),channel:c(t,"channel","default"),bgm:g(t,"bgm",!1),softBgm:g(t,"softbgm",!1)});return i&&n.activate(),n}};it=Br([d({tag:"sound"})],it);function ce(t,e,i){let n=new t;return Wi(n,e,i)}function Wi(t,e,i){return Y(e,{scene:i.scene,parent:t,context:i.context}),N(t,e,i),t}var Dr=Object.defineProperty,Nr=Object.getOwnPropertyDescriptor,Mr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Nr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Dr(e,i,s),s};let st=class extends P{static create(t,e){let n=b.get("widgetService").get(K(t,"name"),e);return Wi(n,t,e)}};st=Mr([d({tag:"widget"})],st);class Rr{constructor(){this.log=!1}initialize(){tt(location.search).log==="1"&&(this.log=!0)}track(e){if(this.log)switch(e.type){case G.Request:Wr(e.data);break;case G.Response:Ur(e.data);break;case G.Exception:$r(e.data)}}}function Wr(t){console.log(t.method,t.url)}function Ur(t){console.log(t.data)}function $r(t){console.log("Error: ",t.description,`
`,t.extraInfo)}var Hr=Object.defineProperty,Vr=Object.getOwnPropertyDescriptor,Fr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Vr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Hr(e,i,s),s};let nt=class extends P{constructor(){super(...arguments),this.ccy=""}show(t,e,i){this.label.value=this.ccy+t.toFixed(2),e&&(this.x=e.x+(He()-this.width)/2,this.y=e.y+Pe()/4),i.addChild(this),this.visible=t>0&&e!==void 0}clear(){}static create(t,e){let i=ce(nt,t,e);return i.ccy=ms(R().currency,T().CURRENCY_SYMBOL),i}};nt=Fr([d({tag:"multiplier"})],nt);var jr=Object.defineProperty,Gr=Object.getOwnPropertyDescriptor,kr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Gr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&jr(e,i,s),s};let X=class extends P{static create(t,e){return ce(X,t,e)}};X=kr([d({tag:"layer"})],X);var Xr=Object.defineProperty,Yr=Object.getOwnPropertyDescriptor,zr=(t,e,i,n)=>{for(var s=n>1?void 0:n?Yr(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Xr(e,i,s),s};const qr={linear:TWEEN.Interpolation.Linear,curve:TWEEN.Interpolation.CatmullRom};function Kr(t){return{color:a(t,"color",0),colorRight:a(t,"colorRight",0),width:a(t,"width",1),border:a(t,"border",0),borderColor:a(t,"borderColor",0),borderColorRight:a(t,"borderColorRight",-1),borderBlur:a(t,"borderBlur",0),blur:a(t,"blur",0),blendMode:c(t,"blendMode"),portion:a(t,"portion",1.5),emitFrequency:a(t,"emitFrequency",1),emitSpeed:a(t,"emitSpeed",0),emitEndTime:a(t,"emitEndTime",0),emitOnTop:g(t,"emitOnTop",!1),direction:c(t,"direction","left"),lineOffsets:a(t,"lineOffsets",0),showAllLines:g(t,"showAllLines",!1),singleLine:g(t,"singleLine",!1),fade:a(t,"fade",0),alpha:a(t,"alpha",1),threshold:a(t,"threshold",1),segments:a(t,"segments",5),outline:a(t,"outline",1),outlineColor:a(t,"outlineColor",0),outlineBlur:a(t,"outlineBlur",1),glowColor:a(t,"glowColor",0),glowWidth:a(t,"glowWidth",1),glowBlur:a(t,"glowBlur",1),glowAlpha:a(t,"glowAlpha",1),interpolationFunc:qr[c(t,"lineType","linear")]}}function Jr(t){return{x:a(t,"x",0),y:a(t,"y",0),width:a(t,"width",Mi()*(He()+Es())),height:a(t,"height",Ts()*Pe()),radius:a(t,"radius",0),color:a(t,"color",0),alpha:a(t,"alpha",.7)}}const me=class me extends P{constructor(e){super(),this.lines=[],this.symbolAnimGap=0,this.animTimers=[],this.numWinningCols=0,this.symbolService=b.get("symbolService"),this.options=e,this.btmContent=new X,this.addChild(this.btmContent),this.drawLines(),this.content=new X,this.addChild(this.content),this.initSymbolPrefabs(),this.hideLines()}initSymbolPrefabs(){this.symbolsPrefabs=[];for(let e=0;e<T().NUM_OF_COLUMN;e++){let i=[];for(let n=0;n<T().NUM_OF_ROW;n++)i.push(void 0);this.symbolsPrefabs.push(i)}}drawLines(){}showLines(e,i=!1,n=!0){this.hideLines(),this.hideSymbols(),this.symbols=[],this.animTimers=[];let s;for(let o of e)this.winningLine=o,this.showLine(o.index-1),s=o.animation,this.setupSymbols(o);this.options.fade&&Ue(this.lineContent,this.options.fade);let r=L.get(me.WINLINE_SYMBOLS_ADJUSTMENT);r&&r(this),n&&this.showSymbols(s,i)}redrawLines(){let e=this.getChildIndex(this.lineContent);this.removeChild(this.lineContent),this.lineContent.removeChildren(),this.lines=[],this.createJoins(),this.drawLines(),this.hideLines(),this.addChildAt(this.lineContent,e)}winlinesLoop(){}createJoins(){}showLine(e){let i=this.lines[e];i&&(i.visible=!0,i.activate())}setupSymbols(e){let i=L.get("winLineSetupSymbols");if(i){i(this,e);return}for(let n=0;n<e.positions.length;n++){let[s,r]=e.positions[n],o=this.symbolsPrefabs[s][r];if(o===void 0){let l=this.reels.getRegisterPoint(s,r);o=this.reels.getSymbol(s,r).clone(),o.col=s,o.row=r,o.x=l.x,o.y=l.y;let u=this.reels.getSymbolPos(s,r);for(let h of u)this.symbolsPrefabs[h.x][h.y]=o}this.symbols.indexOf(o)===-1&&this.symbols.push(o)}}showSymbols(e,i=!1){let n=r=>{r.reference.visible=!1,r.animate(e,i);let o=L.get("winLineSymbolStrategy");o?o({view:r.content})?this.content.addChild(r):this.btmContent.addChild(r):this.content.addChild(r),r.activate()},s=this.getSymbolAnimTimers();this.symbols.forEach(r=>{if(this.symbolAnimGap>0){let o=this.symbolAnimGap*s.indexOf(r.col);o>0?this.animTimers.push(setTimeout(()=>n(r),o)):n(r)}else n(r)})}getSymbolAnimTimers(){let e=[];if(this.symbolAnimGap>0){for(let i=0;i<this.symbols.length;i++){let n=this.symbols[i].col;e.indexOf(n)===-1&&e.push(n)}e.sort()}return this.numWinningCols=e.length,e}getRightMostSymbol(){let e=0,i;for(let n=0;n<this.symbols.length;n++)e<this.symbols[n].col&&(i=this.symbols[n]);return i}removeContent(){for(let e=0;e<this.animTimers.length;e++)clearTimeout(this.animTimers[e]);this.content.removeChildren(),this.btmContent.removeChildren()}hideLines(){for(let e of this.lines)e.visible=!1,e.deactivate()}hideSymbols(){this.symbols&&this.symbols.forEach(e=>e.reference.visible=!0),this.removeContent()}clear(){let e=[];for(let i=0;i<T().NUM_OF_COLUMN;i++)for(let n=0;n<T().NUM_OF_ROW;n++){let s=this.symbolsPrefabs[i][n];s&&e.indexOf(s)===-1&&(e.push(s),s.reference.visible=!0,this.symbolService.free(s))}this.initSymbolPrefabs(),this.removeContent(),this.hideLines(),this.symbols=void 0}resetSymbolPrefabs(){this.initSymbolPrefabs()}};me.WINLINE_SHOW_ALL="all",me.WINLINE_SHOW_ALL_ONCE="allonly",me.WINLINE_SYMBOLS_ADJUSTMENT="winLineSymbolsAdjustment";let de=me,U=class extends P{constructor(e){super(),this.options=e;let i=e.querySelector("multiplier");this.showMask=g(e,"mask");let n=L.get("multiplier");i&&(this.multiplier=n?n(i,{}):nt.create(i,{})),this.animationTimer=a(e,"timer",-1),this.mode=c(e,"mode"),this.animatedAll=g(e,"animatedAll",!0),this.animationAllTimer=a(e,"animationAllTimer",-1),this.showMask&&(this.maskOptions=Jr(e.querySelector("mask"))),this.isWinningLine=!1}show(e,i=!1){this.forceEnd=!1,this.clear(),this.winlineSound=!1,this.winLines=e,this.silent=i,this.currentWinlineLoop=0,this.addChild(this.paylines),this.hasWinLines?(this.emit(U.EVENT_WIN_PANEL_SHOW),this.addMask(),this.displayNextLine(),this.emit(U.EVENT_START)):(this.silent||this.emit(U.EVENT_LOOP),this.paylines.winlinesLoop())}close(){this.isWinningLine&&this.emit(U.EVENT_WIN_PANEL_CLOSE),this.isWinningLine=!1,this.clear()}addMask(){if(this.showMask&&this.maskSprite===void 0){let e=Be(this.maskOptions.width,this.maskOptions.height,this.maskOptions.radius,this.maskOptions.color);e.position.set(this.maskOptions.x,this.maskOptions.y),e.alpha=this.maskOptions.alpha,this.addChildAt(e,0)}else this.showMask&&this.maskSprite&&(this.addChildAt(this.maskSprite,0),this.maskSprite.visible=!0)}clear(){this.maskSprite&&(this.maskSprite.visible=!1),this.multiplier&&this.multiplier.clear(),this.currentLineIndex=this.mode===de.WINLINE_SHOW_ALL?-2:-1,this.paylines.clear(),this.clearTimer(),this.removeChildren()}get hasWinLines(){return this.winLines&&this.winLines.length>0}get currentWinLine(){return this.winLines[this.currentLineIndex]}displayNextLine(){if(this.currentLineIndex++,this.currentLineIndex===this.winLines.length||this.mode===de.WINLINE_SHOW_ALL&&this.currentLineIndex===0||this.mode===de.WINLINE_SHOW_ALL_ONCE&&this.currentLineIndex>0){if(this.currentLineIndex=0,this.winlineSound=!1,this.silent||this.emit(U.EVENT_LOOP),this.paylines.winlinesLoop(),this.forceEnd){this.close(),this.emit(U.EVENT_END);return}if(this.winlinesLoop>0){if(this.currentWinlineLoop++,this.currentWinlineLoop>=this.winlinesLoop){this.forceEnd=!0,this.close(),this.emit(U.EVENT_END);return}this.winlineSound=this.symbolSoundLoop>0&&this.currentWinlineLoop>=this.symbolSoundLoop}}let e=this.currentLineIndex===-1||this.mode===de.WINLINE_SHOW_ALL_ONCE,i=e?this.winLines:[this.currentWinLine],n=!0;e&&(n=this.animatedAll),i.length===1&&i[0].index===0&&(n=!0),this.paylines.showLines(i,this.winlineSound,n),this.isWinningLine=!0,this.emit(U.EVENT_WINLINE,i);let s=this.updateMultiplier(e);this.animationTimer>0?(this.clearTimer(),this.startTimer(e||i.length===1&&i[0].index===0)):s.content.once("animationComplete",()=>this.displayNextLine())}updateMultiplier(e=!1){if(e)return this.paylines.symbols[0];let i=this.currentWinLine,n=b.get("multiplierService"),s=n?n.getSymbol(this.paylines.symbols):this.paylines.symbols[0];return this.multiplier&&this.multiplier.show(i.win,s,this),s}getWinLineHighestSymbol(e,i=-1){let n=-1;for(let s=0;s<e.positions.length;s++){let[r,o]=e.positions[s],l=Number(this.paylines.reels.getSymbol(r,o).index);n<l&&l!=i&&(n=l)}return n===-1?i:n}clearTimer(){clearTimeout(this.timer)}startTimer(e){let i=this.animationTimer+(this.paylines.numWinningCols-1)*this.paylines.symbolAnimGap;e&&this.animationAllTimer>=0&&(i=this.animationAllTimer),this.timer=setTimeout(()=>{this.displayNextLine()},i)}static create(e,i){let n=Qr(U,e,i);return j(e,(s,r)=>{s.nodeName==="mask"&&(c(s,"render")==="canvas"&&W.type===PIXI.RENDERER_TYPE.CANVAS?(n.maskSprite=Be(n.maskOptions.width,n.maskOptions.height,n.maskOptions.radius,n.maskOptions.color),n.maskSprite.position.set(n.maskOptions.x,n.maskOptions.y),n.maskSprite.alpha=n.maskOptions.alpha):c(s,"render")==="webgl"&&W.type===PIXI.RENDERER_TYPE.WEBGL&&(n.maskSprite=new PIXI.Sprite(B.resolve(c(s,"src"))),n.maskSprite.position.set(a(s,"x"),a(s,"y")),n.maskSprite.scale.set(a(s,"scale",1)),n.maskSprite.alpha=n.maskOptions.alpha))}),n}};U.EVENT_LOOP="loop";U.EVENT_WIN_PANEL_SHOW="show";U.EVENT_WIN_PANEL_CLOSE="stopped";U.EVENT_WINLINE="winline";U.EVENT_START="start";U.EVENT_END="end";U=zr([d({tag:"winPanel"})],U);function Qr(t,e,i){let n=b.get("winLineService"),s=I.current.getComponentByTag("reels");s||(s=I.current.getComponentByID("reels"));let r=new t(e);return r.paylines=n.generate(s.reels),r.paylines.reels=s,r.paylines.symbolAnimGap=a(e,"symbolAnimGap",0),r.winlinesLoop=a(e,"winlinesLoop",5),r.symbolSoundLoop=a(e,"symbolSoundLoop",2),r.x=s.x,r.y=s.y,N(r,e,i),r}var Zr=Object.defineProperty,eo=Object.getOwnPropertyDescriptor,to=(t,e,i,n)=>{for(var s=n>1?void 0:n?eo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Zr(e,i,s),s};let De=class extends P{constructor(t,e,i,n,s,r,o=-1,l=-1){super(),this.content=new PIXI.Graphics,this.content.beginFill(i),s&&o<0&&l<0&&this.content.lineStyle(s,r),n?this.content.drawRoundedRect(0,0,t,e,n):this.content.drawRect(0,0,t,e),this.drawShadow(s,o,t,e),this.drawShadow(s,l,t,e,t,e),W.type!==PIXI.RENDERER_TYPE.WEBGL&&this.content.generateCanvasTexture?(this.canvasContent=new PIXI.Sprite(this.content.generateCanvasTexture(1,1)),this.addChild(this.canvasContent)):this.addChild(this.content)}set tint(t){t<0||(this.canvasContent?this.canvasContent.tint=t:this.content.tint=t)}drawShadow(t,e,i,n,s=0,r=0){e<0||(this.content.lineStyle(t,e),this.content.moveTo(s,r),this.content.lineTo(i,0),this.content.moveTo(s,r),this.content.lineTo(0,n))}static create(t,e){re(t,"color",p.resolve(c(t,"color"))),re(t,"innerShadow",p.resolve(c(t,"innerShadow")));let i=new De(a(t,"width",0),a(t,"height",0),a(t,"color",0),a(t,"radius",0),a(t,"border",0),a(t,"bcolor",0),a(t,"innerShadow",-1),a(t,"dropShadow",-1));return i.tint=a(t,"tint",-1),N(i,t,e),Y(t,{scene:e.scene,parent:i,context:e.context}),i}};De=to([d({tag:"rectangle"})],De);var io=Object.defineProperty,so=Object.getOwnPropertyDescriptor,no=(t,e,i,n)=>{for(var s=n>1?void 0:n?so(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&io(e,i,s),s};let Ne=class extends P{constructor(t,e,i,n){super(),this.content=new PIXI.Graphics,this.content.beginFill(e),i&&this.content.lineStyle(i,n),this.content.drawPolygon(t),this.addChild(this.content)}static create(t,e){let i=new Ne(ee(t,"path"),a(t,"color",0),a(t,"border",0),a(t,"bcolor",0));return N(i,t,e),Y(t,{scene:e.scene,parent:i,context:e.context}),i}};Ne=no([d({tag:"polygon"})],Ne);var ro=Object.defineProperty,oo=Object.getOwnPropertyDescriptor,ao=(t,e,i,n)=>{for(var s=n>1?void 0:n?oo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ro(e,i,s),s};let li=class extends F{configure(t){this.options=t}translate(t){this.dict===void 0&&this.initDict();let e=ln(t);for(let i=0;i<e.length;i++){let n=e[i];t=t.replace(`{{${n}}}`,this.dict[n])}return t}initDict(){if(this.dict!==void 0)return;let t=c(this.options,"resource").split(",");for(let e=0;e<t.length;e++)if(this.dict===void 0)this.dict=B.json(t[e]);else{let i=B.json(t[e]);for(let n in i)this.dict[n]=i[n]}}};li=ao([d({tag:"textService",category:"service"})],li);var lo=Object.defineProperty,ho=Object.getOwnPropertyDescriptor,uo=(t,e,i,n)=>{for(var s=n>1?void 0:n?ho(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&lo(e,i,s),s};let hi=class extends F{configure(t){this.options=t}getSymbol(t){if(t.length===0)return;let e=c(this.options,"mode","last");if(e==="last")return Yt(t);if(e==="middle"){let i=t.length,n=Math.floor(i/2);return i%2==0&&Yt(t).col==Mi()-1&&(n-=1),t[n]}else return e==="third"?t.length>2?t[2]:Yt(t):t[0]}};hi=uo([d({tag:"multiplierService",category:"service"})],hi);var co=Object.defineProperty,po=Object.getOwnPropertyDescriptor,fo=(t,e,i,n)=>{for(var s=n>1?void 0:n?po(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&co(e,i,s),s};let ui=class extends F{constructor(){super(...arguments),this.adjustment={size:0,x:0,y:0}}configure(t){this.options=t,this.adjustment.x=a(t,"x",0),this.adjustment.y=a(t,"y",0),this.adjustment.size=a(t,"size",0)}};ui=fo([d({tag:"fontService",category:"service"})],ui);var mo=Object.defineProperty,go=Object.getOwnPropertyDescriptor,vo=(t,e,i,n)=>{for(var s=n>1?void 0:n?go(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&mo(e,i,s),s};let ci=class extends F{startup(){if(p){let t=p.LANGUAGE;[O.English,O.Japanese,O.Chinese].indexOf(t)===-1&&(t=O.English);let e=`assets/icons/icon192.${t}.jpg`;this.addLink("apple-touch-icon",e),this.addLink("apple-touch-startup-image",e)}}setTitle(){document.title=Ht("{{gametitle}}")}addLink(t,e){var i=document.createElement("link");i.rel=t,i.href=e,document.head.appendChild(i)}};ci=vo([d({tag:"i18nService",category:"service"})],ci);var bo=Object.defineProperty,yo=Object.getOwnPropertyDescriptor,Bs=(t,e,i,n)=>{for(var s=n>1?void 0:n?yo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&bo(e,i,s),s};let rt=class extends Wt{constructor(t){super(),this.tween=t}activate(){this.active!==!0&&(this.tween.start(),this.active=!0)}deactivate(){this.active!==!1&&(this.tween.stop(),this.active=!1)}static create(t,e){let i=Li(t),n=b.get("tweenService");if(n&&e.parent instanceof PIXI.DisplayObject){let s=new rt(n.create(i,e.parent,t));return g(t,"auto")&&s.activate(),s}}};rt=Bs([d({tag:"tween"})],rt);let di=class extends F{constructor(){super(...arguments),this.tweens={}}register(t,e){this.tweens[t]=e}create(t,e,i){return this.tweens[t](e,i)}startup(){PIXI.Ticker.shared.add(this.update)}shutdown(){PIXI.Ticker.shared.remove(this.update)}update(){TWEEN.update()}};di=Bs([d({tag:"tweenService",category:"service"})],di);var wo=Object.defineProperty,xo=Object.getOwnPropertyDescriptor,So=(t,e,i,n)=>{for(var s=n>1?void 0:n?xo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&wo(e,i,s),s};let pi=class extends F{configure(t){this.options=t}generate(){return Po(this.options,_o)}};pi=So([d({tag:"winLineService",category:"service"})],pi);function Po(t,e){L.get("reels");let i=He(),n=Pe(),r=T().PAYLINES,o=r.length,l=Kr(t),u=[];for(let h=0;h<o;h++){let f=r[h],S=f.length,m=[];for(let _=0;_<S;_++){let x=f[_],Xt={x:Ds(_)+i/2,y:Ns(x)+n/2};m.push(Xt)}m.length>=2&&(m.unshift({x:m[0].x-i/2,y:m[0].y}),m.push({x:m[m.length-1].x+i/2,y:m[m.length-1].y})),u.push(m)}return l.joints=u,new e(l)}class _o extends de{constructor(e){super(e),e.emitOnTop&&this.addChild(this.lineContent)}drawLines(){this.lineContent=new X,this.addChild(this.lineContent);for(let e of this.options.joints){let i=this.drawLine(e);this.lines.push(i),this.lineContent.addChild(i)}}drawLine(e){let i=new X;if(this.options.border>0){let s=this.joinLines(e,2*this.options.border+this.options.width,this.options.borderColor);if(i.addChild(s),this.options.borderBlur)if(W.type===PIXI.RENDERER_TYPE.WEBGL){let r=new PIXI.filters.BlurFilter;r.blur=this.options.borderBlur,s.filters=[r]}else s.alpha=this.options.borderBlur/80}let n=this.joinLines(e,this.options.width,this.options.color);return i.addChild(n),i}createJoins(){L.get("reels");let e=He(),i=Pe(),s=T().PAYLINES,r=s.length,o=[];for(let l=0;l<r;l++){let u=s[l],h=[];for(let f=0;f<u.length;f++){let S=u[f],m={x:Ds(f)+e/2,y:Ns(S)+i/2};h.push(m)}h.length>=2&&(h.unshift({x:h[0].x-e/2,y:h[0].y}),h.push({x:h[h.length-1].x+e/2,y:h[h.length-1].y})),o.push(h)}this.options.joints=o}joinLines(e,i,n){let s=new PIXI.Graphics,r=e.length;if(s.lineStyle(i,n),W.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.blur>0){let o=new PIXI.filters.BlurFilter;o.blur=this.options.blur,s.filters=[o]}this.options.blendMode&&(this.options.blendMode==="screen"?s.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(s.blendMode=PIXI.BLEND_MODES.ADD)),this.options.alpha!==void 0&&this.options.alpha!==null&&(s.alpha=this.options.alpha);for(let o=0;o<r;o++){let l=e[o];o===0?s.moveTo(l.x,l.y):s.lineTo(l.x,l.y)}return s}}function Ds(t){return t*(He()+Es())}function Ns(t){return t*(Pe()+ir())}let Xe=["VisibilityState","visibilitychange","Hidden"],Le,Ui=[],$i=[];function Oo(){if(!Le){let t=["webkit","ms","o","moz","khtml"];for(let e of t)if(e+Xe[2]in document)return Le=e,Le}}function Hi(t){return Le==null?Xe[t].substring(0,1).toLowerCase()+Xe[t].substring(1):Le+Xe[t]}function Io(t){return document[Hi(t)]}function Ms(t){let e=t?Ui:$i,i=e.length;for(;i--;)e[i]()}function Jt(){Ms(!0)}function Qt(){Ms(!1)}function Co(){try{if(Eo())document.addEventListener(Hi(1),()=>{Io(2)?Qt():Jt()},!0);else if(document.addEventListener)window.addEventListener("focus",Jt,!0),window.addEventListener("blur",Qt,!0);else{let t=document.attachEvent;t&&(t("onfocusin",Jt),t("onfocusout",Qt))}}catch(t){console.error(t)}}function Eo(){return Hi(2)in document}function To(t){Ui.push(t)}function Lo(t){$i.push(t)}function Ao(){Ui=[],$i=[]}function Bo(){Oo(),Co()}class Do{constructor(e=1,i="stage"){this.imageUrl="assets/swipeup.png",this.enabled=!0,this.uc=!1,this.dolfin=!1,this.chromeIOS=!1,this.iphone=!1,this.qq=!1,this.ios=!1,this.ipad=!1,this.safari=!1,this.vivonative=!1,this.initHeight=-1,this.canvasName=i,this.resolution=e;let n=window.navigator.userAgent;this.canvas=document.getElementById(i),this.ios=n.toLowerCase().indexOf("mac")>-1,this.ipad=n.toLowerCase().indexOf("ipad")>-1,this.skipper=n.toLowerCase().indexOf("qqbrowser")>-1||n.toLowerCase().indexOf("sony")&&n.toLowerCase().indexOf("ucbrowser")>-1,this.uc=n.toLowerCase().indexOf("ucbrowser")>-1,this.qq=this.isQQ(n),this.chromeIOS=n.toLowerCase().indexOf("crios")>-1,this.iphone=n.toLowerCase().indexOf("iphone")>-1,this.vivonative=n.toLowerCase().indexOf("vivobrowser")>-1;let s=/Chrome\/([0-9.]+)/.exec(n),r=null;s&&(r=/Chrome\/([0-9.]+)/.exec(n)[1]),this.dolfin=n.toLowerCase().indexOf("dolfin")>-1||r&&Number(r.split(".")[0])<34}isQQ(e){let i=e.toLowerCase().match(/chrom(e|ium)\/([0-9]+)\./);i=i?parseInt(i[2],10):!1;let n=e.match(/Mobile\/\w{5,}\sQQ\/(\d+[\.\d]+)/),s=window.innerWidth<780;return!!((i<45||n)&&s)}get isLandscape(){return window.innerHeight<=window.innerWidth}get isFullScreen(){let e=10;if(this.isLandscape||(e=8,this.skipper&&(e=4)),"standalone"in window.navigator&&window.navigator.standalone)return this.enabled=!1,!0;let i=Math.abs(this.canvas.width/this.resolution-window.innerWidth)<window.innerWidth/e,n=document.webkitCurrentFullScreenElement&&typeof document.webkitCurrentFullScreenElement<"u"||document.fullscreenElement!==null&&document.fullscreenElement!==void 0||document.mozFullScreenElement!==null&&document.mozFullScreenElement!==void 0||document.webkitFullscreenElement!==null&&document.webkitFullscreenElement!==void 0||document.msFullscreenElement!==null&&document.msFullscreenElement!==void 0;return i&&n}setFullscreen(){this.enabled&&(this.uc||this.dolfin||this.qq||this.vivonative||this.isFullScreen||(this.applyFullscreenAPI(),this.ios||window.scrollTo(0,1)))}addOverlay(){if(!window.addEventListener)return;let e=document.getElementById("swipeLayer");if(e){e.style.width!==this.canvas.style.width&&(e.style.width=this.canvas.style.width,e.style.marginLeft=this.canvas.style.marginLeft);return}let i=window.innerHeight*(this.chromeIOS?1:2),n=`<div id="swipeLayer" style="position: fixed; left:${this.canvas.style.marginLeft}; top:0; width:${this.canvas.style.width}; min-height:${i}px; height:${i}px; display:block; ">
</div>`;var s=document.createElement("div");if(s.innerHTML=n,e=s.firstChild,this.addEventListeners(e),this.canvas.parentElement.insertBefore(e,this.canvas),this.chromeIOS||document.getElementById("swipeBackground"))return;let r=`<div id="swipeBackground" style="position: relative; z-index:-1; left:0; top:0; width:${window.innerWidth}px; min-height:${i}px; height:${i}px; display:block; ">
</div>`;s=document.createElement("div"),s.innerHTML=r;let o=s.firstChild;this.addEventListeners(o),window.document.body.insertBefore(o,window.document.body.lastChild)}addEventListeners(e){e.addEventListener("touchstart",()=>{this.enabled=!1,this.removeOverlay()}),e.addEventListener("touchend",()=>{this.enabled=!0,window.scrollTo(0,1)}),e.addEventListener("touchcancel",()=>{this.enabled=!0,window.scrollTo(0,1)})}removeOverlay(){let e=document.getElementById("swipeLayer");e&&(e.parentElement.removeChild(e),this.chromeIOS||window.scrollTo(0,1))}applyFullscreenAPI(){if(this.isFullScreen)return;let e=window.document.documentElement,i=document.requestFullscreen||e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen||e.requestFullScreen||e.webkitCurrentRequestFullScreen;i&&i.call(e)}update(){!this.enabled||!this.ios||this.uc||this.qq||this.canvas.height==screen.width-20||this.canvas.width===window.innerWidth&&this.canvas.height===window.innerHeight||(this.isLandscape?this.addOverlay():this.removeOverlay())}}var No=Object.defineProperty,Mo=Object.getOwnPropertyDescriptor,Ro=(t,e,i,n)=>{for(var s=n>1?void 0:n?Mo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&No(e,i,s),s};const fi="notify:visibility.visible",mi="notify:visibility.hidden";let gi=class extends F{configure(t){}startup(){Bo(),To(()=>{J.emit(fi)}),Lo(()=>{J.emit(mi)}),w.mobile&&(this.fullscreenAPI=new Do(v.resolution),this.fullscreenAPI.enabled=!1,E.add(this))}set fullScreenEnabled(t){this.fullscreenAPI&&(this.fullscreenAPI.enabled=t)}setDeviceFullscreen(){this.fullscreenAPI&&this.fullscreenAPI.setFullscreen()}shutdown(){E.remove(this),Ao()}advanceTime(t){return this.fullscreenAPI.update(),!0}};gi=Ro([d({tag:"deviceService",category:"service"})],gi);var Wo=Object.defineProperty,Uo=Object.getOwnPropertyDescriptor,$o=(t,e,i,n)=>{for(var s=n>1?void 0:n?Uo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Wo(e,i,s),s};class Ho{constructor(){this.channels={}}lengthOfChannels(){return Object.keys(this.channels).length}lengthOfChannel(e){return A(this.channels[e])?0:Object.keys(this.channels[e]).length}exist(e,i){let n=this.channels[e];return k(n)&&k(n[i])}getPlaybackBySoundId(e){for(let i in this.channels){let n=this.channels[i];for(let s in n){let r=n[s];if(r.soundId===e)return r}}}add(e,i,n,s){let r=this.channels[e];A(r)&&(r={},this.channels[e]=r);let o={channelId:e,name:i,soundId:n,volume:1,softBgm:s};return r[i]=o,o}removeBySoundId(e){return this.removeBy(i=>i.soundId===e)}removeByName(e){return this.removeBy(i=>i.name===e)}removeBy(e){for(let i in this.channels){let n=this.channels[i];for(let s in n){let r=n[s];if(e(r))return delete n[s],js(n)&&delete this.channels[i],r}}}}let vi=class extends F{constructor(){super(...arguments),this.howlers={},this._muted=!1,this._volume=1,this.audios={},this.scope="sounds",this.commonScope="commonsounds"}configure(t){let e=c(t,"resource");e!==this.commonScope&&(this.defaultScope=e,this.scope=this.defaultScope),this.softBgmValue=a(t,"softBgm",.3),this.channelManager=new Ho}initSoundSettings(){let t=ke(p.ID+"-muted",!0);this.muted=t=="true"}get backgroundMusic(){return this.bgm}startup(){b.has("deviceService")||b.register("deviceService",gi).startup(),J.on(fi,()=>{this.ready&&!this.muted&&Howler.volume(this._volume)}),J.on(mi,()=>{this.ready&&Howler.volume(0)})}shutdown(){J.off(fi),J.off(mi)}get ready(){return k(this.howlers[this.scope])}get soundPlayer(){try{if(!this.ready){let t=B.json(this.scope);k(t)&&(t.onend=e=>{this.resetBgm(e),this.channelManager.removeBySoundId(e)},this.howlers[this.scope]=new Howl(t)),this.initSoundSettings()}return this.howlers[this.scope]}catch{return null}}play(t,e="default",i=!1,n=!1,s){if(w.isUCBrowser)return!this._muted&&t==="spin"&&this.playAudio(t),null;if(!i&&!this.soundPlayer&&this.channelManager.exist(e,t)||!this.soundPlayer)return null;if(i){let o=this.channelManager.removeByName(t);o&&this.stop(o.soundId)}n&&this.softBgm();let r=this.soundPlayer.play(t);return s&&this.soundPlayer.once("end",s,r),this.channelManager.add(e,t,r,n)}playAudio(t){this.audios[t]?(this.audios[t].ended||(this.audios[t].currentTime=0),this.audios[t].play()):this.loadAudio(t).play()}loadAudio(t){let e=document.createElement("audio");return e.setAttribute("src","./assets/"+t+".m4a"),e.load(),e.addEventListener("canplaythrough",()=>{this.audios[t]=e}),e}soundURLS(t){let e=t.substr(0,t.length-3),i=[],n=["m4a","ogg","ac3","mp3"];for(let s=0;s<n.length;s++)i.push(e+n[s]);return i}stopBgm(){this.bgm&&this.stop(this.bgm.soundId),this.bgm=void 0}playBgm(t,e=!1){if(!(!e&&this.bgm&&this.bgm.name===t))return this.stopBgm(),this.bgm=this.play(t,"bgm",!0),this.bgm}softBgm(){this.bgm&&this.setVolume(this.softBgmValue*this.bgm.volume,this.bgm.soundId,!0)}fade(t,e,i,n,s){this.soundPlayer.fade(t,e,i,n),s&&this.soundPlayer.once("fade",()=>{s()})}resetBgm(t){if(this.bgm&&this.bgm.soundId!==t){let e=this.channelManager.getPlaybackBySoundId(t);e&&e.softBgm&&this.setVolume(this.bgm.volume,this.bgm.soundId,!0)}}resume(){for(let t in this.channelManager.channels){let e=this.channelManager.channels[t];for(let i in e)this.soundPlayer.play(e[i].soundId)}}pause(t){return this.resetBgm(t),this.soundPlayer.pause(t),this}stop(t){if(t)return this.resetBgm(t),this.channelManager.removeBySoundId(t),this.soundPlayer.stop(t),this}switchScope(t){return this.setVolume(0),this.scope=this.defaultScope,t?(this.scope=this.commonScope,this.soundPlayer?(this.setVolume(1),!0):(this.scope=this.defaultScope,!1)):(this.setVolume(1),!0)}setVolume(t,e,i=!1){if(!i){let n=this.channelManager.getPlaybackBySoundId(e);n&&(n.volume=t)}return this.soundPlayer.volume(t*this.volume,e),this}getVolume(){return this.soundPlayer.volume()}set volume(t){this._volume=t,this._muted||Howler.volume(t)}get volume(){return this._volume}get muted(){return this._muted}set muted(t){this._muted=t,Or(p.ID+"-muted",t),t?Howler.volume(0):Howler.volume(this._volume)}};vi=$o([d({tag:"soundService",category:"service"})],vi);function ot(t,e=0){return Math.floor(Math.random()*(t-e))+e}class Vo{constructor(e,i){this.capability=e,this.factory=i,this.pool=[],this.metrics={totalAlloc:0,totalFree:0}}allocate(...e){let i;return this.pool.length===0?(i=this.factory.apply(this.factory,e),this.metrics.totalAlloc++):(i=this.pool.pop(),this.metrics.totalFree--),i}free(e){this.capability<=this.pool.length?(this.destroy(e),e=void 0):this.pool.indexOf(e)===-1&&this.pool.push(e),this.metrics.totalFree++}destroy(e){let i=e;i.dispose&&i.dispose()}collect(e){this.pool.forEach(n=>{this.destroy(n)}),this.pool=[];let i=this.metrics.totalAlloc-this.metrics.totalFree;this.clearMetrics(i)}find(e){let i=this.pool.length;for(var n=0;n<i;n++){let s=this.pool[n];if(e(s))return s}}clearMetrics(e){this.metrics.totalAlloc=e||0,this.metrics.totalFree=0}}const ts="idle",Fo="spin",jo="animate",Go="events:symbol:state";let ss=class Rs extends P{constructor(e,i,n){super(),this.index=e,this.prefab=i,this.masking=n,this.attachedFollow=!1,this.row=-1,this.col=-1,this.frame=new PIXI.Container,this.views={}}idle(){this.setState(ts)}spin(){this.setState(Fo)}animate(e=jo,i=!0){this.setState(e,i)}set onAnimationComplete(e){this.content.onComplete=e}deactivate(){super.deactivate(),this.deactivateViews()}clone(){let i=b.get("symbolService").get(this.index);return i.reference=this,i.col=this.col,i.row=this.row,i}free(){this.attachedSymbol=void 0,this.attachedFollow=!1,this.reference=void 0,this.deactivate(),this.views={}}attach(e,i=!1){this.attachedSymbol=e,this.attachedFollow=i,this.updateAttached()}updateAttached(){this.attachedSymbol&&this.attachedFollow&&(this.attachedSymbol.x=this.x,this.attachedSymbol.y=this.y)}checkCurrentState(e){return this.state===e}deactivateViews(){for(let e in this.views)e&&this.views[e].deactivate()}resetStateViews(){for(let e in this.views)this.views[e]=void 0}setState(e,i=!1){this.hasState(e)||(e=ts),this.deactivate(),this.removeChildren();let n=this.views[e];if(i){if(n=ue(this.getPrefab(e),{}),n.components)for(let s=0;s<n.components.length;s++)n.components[s].options&&n.components[s].options.volume&&(n.components.splice(s,1),M("winline","default",!0))}else n||(n=ue(this.getPrefab(e),{}));return this.content=n,this.addChild(this.content),this.activate(),this.views[e]=n,J.emit(Go,this),this.masking&&(this.addChild(this.masking),this.content.mask=this.masking),this.addChild(this.frame),this.state=e,this.content}hasState(e){return this.prefab&&this.prefab.definitions&&this.prefab.definitions[e]!==void 0}getPrefab(e){return this.prefab?this.prefab.definitions[e]:null}static create(e,i,n){let s=null;n&&(s=Be(n.width,n.height,n.radius),s.position.set(n.x,n.y));let r=new Rs(e,i,s);return r.name=`symbol#${e}`,r}};var ko=Object.defineProperty,Xo=Object.getOwnPropertyDescriptor,Yo=(t,e,i,n)=>{for(var s=n>1?void 0:n?Xo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ko(e,i,s),s};let bi=class extends F{configure(t){if(this.total=a(t,"total"),t.childElementCount<this.total&&A(t.querySelector("#default")))throw new Error("the number of symbol prefabs must equals the total of symbols or there is a prefab named 'default'.");this.size=Ks(t,"size"),this.multiSize=Js(t,"multiSize");let e=qs(t,"anchor");this.poolsOn=g(t,"pool"),this.anchor={x:this.size.width*e.x,y:this.size.height*e.y},this.symbolPrefabs={},this.symbolMasking={},j(t,(i,n)=>{let s=V(i),r={definitions:{}};j(i,(o,l)=>{r.definitions[Li(o)]=o.firstElementChild}),this.symbolPrefabs[s]=r,g(i,"mask",!1)&&(this.symbolMasking[s]={x:a(i,"x",0),y:a(i,"y",0),width:a(i,"width",this.size.width),height:a(i,"height",this.size.width),radius:a(i,"radius",0)})}),this.pools={}}pickMany(t){let e=[];for(let i=0;i<t;i++)e.push(ot(this.total));return e}pickOne(){return this.get(ot(this.total))}get(t){let e=this.symbolPrefabs[t.toString()];return A(e)&&(e=this.symbolPrefabs.default),this.poolsOn?this.getObjectPool(t).allocate(t,e,this.symbolMasking[t.toString()]):ss.create(t,e,this.symbolMasking[t.toString()])}free(t){t.free(),this.poolsOn&&this.getObjectPool(t.index).free(t)}hasSymbol(t){return!A(this.symbolPrefabs[t.toString()])}getObjectPool(t){let e=t.toString(),i=this.pools[e];return A(i)&&(this.pools[e]=i=new Vo(5,ss.create)),i}};bi=Yo([d({tag:"symbolService",category:"service"})],bi);var zo=Object.defineProperty,qo=Object.getOwnPropertyDescriptor,Ko=(t,e,i,n)=>{for(var s=n>1?void 0:n?qo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&zo(e,i,s),s};let yi=class extends F{configure(t){this.options=t}create(){return L.get(`component:animator:${c(this.options,"type")}`).create(this.options)}};yi=Ko([d({tag:"reelAnimatorService",category:"service"})],yi);var Jo=Object.defineProperty,Qo=Object.getOwnPropertyDescriptor,Zo=(t,e,i,n)=>{for(var s=n>1?void 0:n?Qo(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Jo(e,i,s),s};let wi=class extends F{constructor(){super(...arguments),this.cache={}}configure(t){this.options=t}get(t,e={}){let i=ks(this.options,t);if(k(i)){let n=c(i,"mode","new");if(n==="new")return this.create(i,e);if(n==="singleton")return this.takeFromCache(i,e)}}dispose(){for(let t in this.cache)this.cache[t].deactivate();this.cache={}}create(t,e){let i=ue(t,e);return N(i,t,e),i}takeFromCache(t,e){let i=V(t);return this.cache[i]||(this.cache[i]=this.create(t,e)),this.cache[i]}};wi=Zo([d({tag:"widgetService",category:"service"})],wi);var ea=Object.defineProperty,ta=Object.getOwnPropertyDescriptor,ia=(t,e,i,n)=>{for(var s=n>1?void 0:n?ta(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ea(e,i,s),s};let Me=class extends F{constructor(){super(...arguments),this.started=!1,this.strictMode=!1,this.strictLandscapeWeb=!1}getOrientation(){return this.strictLandscapeWeb&&!w.mobile&&!w.tablet||window.innerHeight<=window.innerWidth?y.LANDSCAPE:y.PORTRAIT}get isPortrait(){return this.getOrientation()===y.PORTRAIT}get isLandscape(){return this.getOrientation()===y.LANDSCAPE}configure(t){}startup(){this.mode=p.orientation||"landscape",this.started=!0,this.strictMode=p.strictMode&&p.strictMode==="true",this.strictLandscapeWeb=p.strictLandscapeWeb&&p.strictLandscapeWeb==="true"}};Me=ia([d({tag:"orientationService",category:"service"})],Me);var sa=Object.defineProperty,na=Object.getOwnPropertyDescriptor,ra=(t,e,i,n)=>{for(var s=n>1?void 0:n?na(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&sa(e,i,s),s};const oa="events:resize",aa="events:web_resize";let xi=class extends F{constructor(){super(...arguments),this.prevOrientation=0}configure(e){}startup(){b.has("orientationService")||b.register("orientationService",Me).startup(),this.orientationService=b.get("orientationService"),this.orientationService.started||this.orientationService.startup(),this.resizeAndOrientaionChecker=setInterval(()=>{this.checkResize(),this.checkSecondaryOrientation()},30),this.checkResize()}checkResize(){let e=window.innerWidth,i=window.innerHeight;(this.windowHeight!==i||this.windowWidth!==e)&&(this.windowHeight=i,this.windowWidth=e,this.layout(),J.emit(oa),J.emit(aa))}checkSecondaryOrientation(){this.windowOrientation!==window.orientation&&(this.windowOrientation=window.orientation,this.layout())}shutdown(){clearInterval(this.resizeAndOrientaionChecker)}layout(){let e=v,i=e.minWidth,n=e.minHeight,s=e.width,r=e.height,o=1,l=0,u=this.orientationService.getOrientation();if(Zt(!1),this.isBothEnaled&&u===y.PORTRAIT&&!this.orientationService.strictLandscapeWeb||this.isPortraitOnlyEnabled&&this.isNotMobile&&u===y.LANDSCAPE||this.isBothEnaled&&u===y.PORTRAIT&&this.orientationService.strictLandscapeWeb&&this.isMobileOrTablet?(s=e.height,r=e.width,i=e.minHeight,n=e.minWidth):this.isPortraitOnlyEnabled&&this.isMobileOrTablet&&u===y.LANDSCAPE?Zt(!0):w.mobile&&(this.orientationService.mode==="portrait"&&u===y.LANDSCAPE||this.orientationService.mode==="landscape"&&u===y.PORTRAIT)&&(this.orientationService.strictMode?this.orientationService.mode==="portrait"&&Zt(!0):(l=Math.PI/2,s=e.height,r=e.width,i=e.minHeight,n=e.minWidth)),i>0&&n>0&&this.isMobileOrTablet){let x=Math.min(window.innerWidth/i,window.innerHeight/r),Xt=Math.min(window.innerWidth/(u===y.PORTRAIT?i:s),window.innerHeight/n);o=Math.max(x,Xt)}else o=Math.min(window.innerWidth/(i>0?i:s),window.innerHeight/r);let h=Math.ceil(s*o),f=Math.ceil(r*o);D.scale.set(o),D.rotation=l,this.isBothEnaled?(D.position.set(0,0),D.pivot.set(0,0)):D.position.set(h/2,f/2),W.resize(h,f);let S=(window.innerWidth-h)/2,m=(window.innerHeight-f)/2,_=e.canvas;_.style.marginLeft=S+"px",_.style.marginTop=m+"px",_.style.width=h+"px",_.style.height=f+"px",this.offsetX=S/o,this.offsetY=m/o,I.current&&(this.prevOrientation!=u&&this.isBothEnaled&&I.current.onOrientationChange(u),I.current.onSceneResize()),this.prevOrientation=u,this.scrollTop()}scrollTop(){let e=w;e.mobile&&(e.android&&!e.chrome?window.scrollTo(0,1):window.scrollTo(0,0))}get isBothEnaled(){return this.orientationService.mode==="both"||this.orientationService.mode==="portrait-only"}get isPortraitOnlyEnabled(){return this.orientationService.mode==="portrait-only"}get isNotMobile(){return!w.mobile&&!w.tablet}get isMobileOrTablet(){return w.mobile||w.tablet}get deviceViewportOffset(){let e=window.innerWidth,i=window.innerHeight,n=v.width,s=v.height,r=D.scale.x,o=new PIXI.Point;return this.isMobileOrTablet&&this.orientationService.getOrientation()===y.PORTRAIT&&(n=v.height,s=v.width),e<n*r&&(o.x=Math.floor((n*r-e)*(.5/r))),i<s*r&&(o.y=Math.floor((s*r-i)*(.5/r))),o}};xi=ra([d({tag:"layoutService",category:"service"})],xi);function Zt(t){let e=document.getElementById("portraitonly");if(!e)return;let i=document.getElementById("portraitonlytext");if(i){let n="Please use portrait mode for the best experience.";try{Q("portraitonly")&&(n=Q("portraitonly"))}catch{}A(n)&&(n="Please use portrait mode for the best experience."),i.textContent=n}la(!t),e.style.visibility=t?"visible":"hidden"}function la(t){let e=document.getElementById("wrapper");e&&(e.style.visibility=t?"visible":"hidden")}Rt([et,it,rt,U,st,De,Ne]);Rt([bi,yi,wi,xi,Me,pi,vi,li,hi,ui,ci,di]);L.map("context").toSingleton(Er);L.map("user",gr).asSingleton();L.map("normalSpinParser").toValue(cr);yn([Rr]);function ha(){Zn(slotapp)}function Vi(t,e,i){let n=new t({value:c(e,"value"),style:cs(e),bitmap:g(e,"bitmap",!1),align:c(e,"align","left"),case:c(e,"case"),comma:g(e,"comma",!0),verticalAlign:c(e,"verticalAlign"),decimalPlace:a(e,"decimalPlace",2),duration:a(e,"duration",500),prefix:c(e,"prefix",""),suffix:c(e,"suffix",""),wordWrap:g(e,"wordWrap",!1),wordWrapWidth:a(e,"wordWrapWidth",0),maxWidth:a(e,"maxWidth",0),letterSpacing:a(e,"letterSpacing",0),lineHeight:a(e,"lineHeight",0),lineJoin:c(e,"lineJoin","miter"),animZoom:g(e,"animZoom",!1),animScale:a(e,"animScale",1.2),durationMultiplierByValue:a(e,"durationMultiplierByValue")});return N(n,e,i),Y(e,{scene:i.scene,parent:n,context:i.context}),Nn(n,e,"align",c,"left"),n}var ua=Object.defineProperty,ca=Object.getOwnPropertyDescriptor,da=(t,e,i,n)=>{for(var s=n>1?void 0:n?ca(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ua(e,i,s),s};let be=class extends P{constructor(t){super(),this.hasComma=!0,this.options=t,this.initText(),this.update()}initText(){let t=this.options.style;this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:t.fontSize,fontName:t.fontFamily}),this.text.tint=t.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,t),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text)}set value(t){this.text.text=t,this.update()}set align(t){this.options.align=t,this.update()}set tint(t){this.text.tint=t}set fill(t){this.options.bitmap||(this.text.style.fill=t)}get value(){return this.text.text}get anchorX(){if(this.options.align==="left")return 0;if(this.options.align==="center")return .5;if(this.options.align==="right")return 1}get anchorY(){if(!this.options.verticalAlign)return-1;if(this.options.verticalAlign==="top")return 0;if(this.options.verticalAlign==="middle")return .5;if(this.options.verticalAlign==="bottom")return 1}update(){this.updateLetterCase(),this.updateComma(),this.updateAnchorX(),this.updateAnchorY()}updateLetterCase(){this.options.case==="upper"?this.text.text=this.text.text.toUpperCase():this.options.case==="lower"&&(this.text.text=this.text.text.toLowerCase())}updateComma(){this.hasComma&&(this.text.text=Ai(this.text.text))}updateAnchorX(){this.options.maxWidth&&(this.fontSize=this.options.style.fontSize,this.text.width>this.options.maxWidth&&(this.fontSize=this.options.style.fontSize*this.options.maxWidth/this.text.width)),this.text.x=-this.text.width*this.anchorX}updateAnchorY(){this.options.verticalAlign&&(this.text.y=-this.text.height*this.anchorY)}set fontSize(t){this.options.bitmap?this.text.fontSize=t:this.text.style.fontSize=t}static create(t,e){return re(t,"fill",p.resolve(c(t,"fill"))),Vi(be,t,e)}};be=da([d({tag:"label"})],be);var pa=Object.defineProperty,fa=Object.getOwnPropertyDescriptor,ma=(t,e,i,n)=>{for(var s=n>1?void 0:n?fa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&pa(e,i,s),s};let at=class extends be{constructor(t){super(t),this._value=new Decimal(0),this._tweeningDisplayValue=0,this.prefix="",this.suffix="",this.lastValue="",this.currentValue="a",this.ON_UPDATE_START="OnUpdateStart",this.ON_UPDATING_BY_ZOOM="OnUpdatingByZoom",this.ON_UPDATE_COMPLETE="OnUpdateComplete",this._value=new Decimal(t.value),this.prefix=t.prefix,this.suffix=t.suffix,this.update()}set value(t){let e;if(e=new Decimal(t),e.equals(this._value))return;this.removeTween(),e.toNumber()-this._value.toNumber();let i=this.options.duration,n={value:this._value.toNumber()};this.tween=new TWEEN.Tween(n).onStart(()=>{this.emit(this.ON_UPDATE_START)}).to({value:e.toNumber()},i).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.update(n.value)}).onComplete(()=>{this.emit(this.ON_UPDATE_COMPLETE)}),this._value=e,this.tween.start()}set duration(t){this.options.duration=t}get value(){return this._value.toString()}get tweeningDisplayValue(){return this._tweeningDisplayValue}update(t){let e=t||this._value||0;this._tweeningDisplayValue=e instanceof Decimal?e.toNumber():e,this.text.text=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.updateLetterCase(),this.updateComma(),this.updatePrefixSuffix(),this.currentValue=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.lastValue!=this.currentValue&&(this.lastValue=this.currentValue,this.options.animZoom==!0&&(this.onAnimZoom(),this.emit(this.ON_UPDATING_BY_ZOOM)),this.updateAnchorX(),this.updateAnchorY())}resetScale(){this.text.scale.set(1)}onAnimZoom(){this.text.position;let t={scale:this.options.animScale},e=new TWEEN.Tween(t).onStart(()=>{this.text.scale.set(t.scale)}).to({scale:1},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.text.scale.set(t.scale)}).onComplete(()=>{this.resetScale(),this.updateAnchorX(),this.updateAnchorY(),e.stop(),e=null});e.start()}updatePrefixSuffix(){this.text.text=this.prefix+this.text.text+this.suffix}setValueDirectly(t){this._value=new Decimal(t),this.removeTween(),this.update()}reset(){this.setValueDirectly("0")}removeTween(){this.tween&&this.tween.stop()}deactivate(){this.removeTween()}static create(t,e){return Vi(at,t,e)}};at=ma([d({tag:"animatedLabel"})],at);var ae=(t=>(t[t.Mouse=0]="Mouse",t[t.Keyboard=1]="Keyboard",t[t.None=2]="None",t))(ae||{}),ga=Object.defineProperty,va=Object.getOwnPropertyDescriptor,ba=(t,e,i,n)=>{for(var s=n>1?void 0:n?va(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ga(e,i,s),s};let lt=class extends P{constructor(t){super(),this.options=t,this._enabled=!0,this.upTexture=t.up,this.downTexture=t.down,this.disabledTexture=t.disabled,this.sprite=new PIXI.Sprite(this.upTexture),this.addChild(this.sprite),this.interactive=!0,this.command=t.command,this.cursor="pointer",this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonDownHandler(t){this._enabled&&(this.downTexture&&(this.sprite.texture=this.downTexture),this.sprite.x=this.options.dx,this.sprite.y=this.options.dy,Ee("onDown",this))}buttonUpHandler(){this._enabled&&(this.sprite.texture=this.upTexture,this.sprite.x=0,this.sprite.y=0,Ee("onUp",this))}buttonClickedHandler(){this._enabled&&(Ri(this.options.sound),!Ee("onClick",this)&&this.command&&C.emit(this.command,{source:ae.Mouse,context:this}),this.activate())}set enabled(t){this._enabled=t,this.cursor="pointer",this._enabled?this.sprite.texture=this.upTexture:this.sprite.texture=this.disabledTexture?this.disabledTexture:this.upTexture}get enabled(){return this._enabled}static create(t,e){let i=B,n=i.resolve(c(t,"up")),s;Ae(t,"down")&&(s=i.resolve(c(t,"down")));let r;Ae(t,"disabled")&&(r=i.resolve(c(t,"disabled")));let o=new lt({up:n,down:s,disabled:r,command:c(t,"command"),sound:c(t,"sound","button"),dx:a(t,"dx"),dy:a(t,"dy")});return Ut(o,t,e),g(t,"debug")&&xs(o),Y(t,{scene:e.scene,parent:o,context:e.context}),N(o,t,e),o}};lt=ba([d({tag:"button"})],lt);function Ws(t,e,i){let n=new t;N(n,e,i),j(e,(r,o)=>{let l=ue(r,{scene:i.scene,parent:n,context:i.context});l instanceof P&&(l.name=V(r),l.visible=!1,n.frames.push(l))});let s=c(e,"goto")||0;return n.goto(s),n}var ya=Object.defineProperty,wa=Object.getOwnPropertyDescriptor,xa=(t,e,i,n)=>{for(var s=n>1?void 0:n?wa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ya(e,i,s),s};let Re=class extends P{constructor(){super(...arguments),this.frames=[]}goto(t){if(this.removeChildren(),typeof t=="number"?this.currFrameIndex=t<this.frames.length?t:0:this.currFrameIndex=this.indexOfFrame(t),this.currFrameIndex>=0){let e=this.frames[this.currFrameIndex];return e.visible=!0,this.addChild(e),!0}else return!1}get current(){return this.frames[this.currFrameIndex]}get numSlides(){return this.frames.length}next(){let t=this.currFrameIndex;t++,t>-1&&(t>=this.numSlides&&(t=0),this.goto(t))}prev(){let t=this.currFrameIndex;t--,t<0&&(t=this.numSlides-1),this.goto(t)}indexOfFrame(t){for(let e=0;e<this.frames.length;e++)if(this.frames[e].name===t)return e;return-1}static create(t,e){return Ws(Re,t,e)}};Re=xa([d({tag:"slide"})],Re);var Sa=Object.defineProperty,Pa=Object.getOwnPropertyDescriptor,_a=(t,e,i,n)=>{for(var s=n>1?void 0:n?Pa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Sa(e,i,s),s};const ge=class ge{};ge.disable="disable",ge.up="up",ge.down="down",ge.over="over";let ie=ge,ht=class extends Re{constructor(){super(),this._enabled=!0,this._down=!1,this._over=!1,this._holdEnabled=!1,this._tick=0,this.interactive=!0,this.cursor="pointer",this.initialScale=this.scale.clone(),this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}enableOver(){this.on("mouseover",this.buttonOverHandler).on("mouseout",this.buttonOutHandler)}set clickable(t){if(t.content&&t.content.geometry.graphicsData&&t.content.geometry.graphicsData.length){let e=t.content.geometry.graphicsData[0].shape;e&&(t instanceof Ne?this.hitArea=new PIXI.Polygon(e.points):this.hitArea=new PIXI.Circle(t.x,t.y,e.radius))}}set holdEnabled(t){this._holdEnabled=t,t&&E.add(this)}goto(t){return super.goto(t)||super.goto(ie.up),!0}buttonDownHandler(t){this._enabled&&(this._down=!0,this._downTime=this._tick,this.goto(ie.down),this.animateButton(!0))}buttonOverHandler(t){this._enabled&&(this._over=!0,this.goto(ie.over),this.onmouseover&&C.emit(this.onmouseover,{source:ae.Mouse,context:this}))}buttonOutHandler(){this._enabled&&(this._over=!1,this._down=!1,this._down||this.goto(ie.up))}buttonUpHandler(){this._enabled&&(this._down=!1,this.goto(this._over?ie.over:ie.up),this.animateButton(!1))}buttonClickedHandler(){this._enabled&&(Ri(this.sound),!Ee("onClick",this)&&this.command&&C.emit(this.command,{source:ae.Mouse,context:this}),this.activate())}animateButton(t){this.animate!=!1&&(t?this.scale.set(this.initialScale.x*1.1):this.scale.set(this.initialScale.x))}set enabled(t){this._enabled=t,this._enabled?(this.cursor="pointer",this.goto(ie.up)):(this.cursor=null,this._down=!1,this.goto(ie.disable))}get enabled(){return this._enabled}advanceTime(t){if(this._tick++,this._down&&this._enabled&&this._tick-this._downTime>30){this._tick%2===0&&C.emit(this.command,{source:ae.Mouse,context:this});return}return!0}deactivate(){super.deactivate(),E.remove(this)}activate(){super.activate(),this._holdEnabled&&E.add(this)}static create(t,e){return Oa(ht,t,e)}};ht=_a([d({tag:"buttonSlide"})],ht);function Oa(t,e,i){let n=Ws(t,e,i),s=n.indexOfFrame("hit");return n.command=c(e,"command"),n.sound=c(e,"sound","button"),n.onmouseover=()=>{},n.animate=g(e,"animate",!1),n.over&&n.enableOver(),s>=0&&(n.clickable=n.frames.splice(s,1)[0],n.hit=void 0),Ut(n,e,i),n.holdEnabled=g(e,"holdEnabled"),n}var Ia=Object.defineProperty,Ca=Object.getOwnPropertyDescriptor,Ea=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ca(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ia(e,i,s),s};let ut=class extends P{constructor(t,e){super(),this.content=ys(t,e),this.addChild(this.content)}static create(t,e){re(t,"color",p.resolve(c(t,"color")));let i=new ut(a(t,"radius",10),a(t,"color",0));return N(i,t,e),i}};ut=Ea([d({tag:"circle"})],ut);var Ta=Object.defineProperty,La=Object.getOwnPropertyDescriptor,Aa=(t,e,i,n)=>{for(var s=n>1?void 0:n?La(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ta(e,i,s),s};let le=class extends P{constructor(t){super(),this._sprite=new PIXI.Sprite(t),this.addChild(this._sprite)}set resource(t){if(t instanceof PIXI.Texture)this._sprite.texture=t;else{let e=B.resolve(t);this._sprite.texture=e}}set tint(t){t>=0&&(this._sprite.tint=t)}get tint(){return this._sprite.tint}set blendMode(t){t==="screen"?this._sprite.blendMode=PIXI.BLEND_MODES.SCREEN:t==="add"?this._sprite.blendMode=PIXI.BLEND_MODES.ADD:this._sprite.blendMode=PIXI.BLEND_MODES.NORMAL}get sprite(){return this._sprite}static create(t,e){re(t,"tint",p.resolve(c(t,"tint")));let i=L.get("context"),s=B.resolve(i.resolve(c(t,"res"),e.context)),r=new le(s);return r.tint=a(t,"tint",-1),r.blendMode=c(t,"blendMode",""),N(r,t,e),Y(t,{scene:e.scene,parent:r,context:e.context}),r}static instantiate(t){let i=B.resolve(t);return new le(i)}};le=Aa([d({tag:"img"})],le);var Ba=Object.defineProperty,Da=Object.getOwnPropertyDescriptor,Na=(t,e,i,n)=>{for(var s=n>1?void 0:n?Da(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ba(e,i,s),s};const Ma={rectangle:0,polygon:1,image:2,circle:3};let ct=class extends Wt{constructor(t,e,i){switch(super(),this.target=t,e){case 2:W.type===PIXI.RENDERER_TYPE.WEBGL?this.content=new PIXI.Sprite(B.resolve(i.res)):this.content=si(i.width,i.height);break;case 0:this.content=si(i.width,i.height);break;case 1:this.content=Sn(i.path);break;case 3:this.content=ys(i.radius);break}this.content.x=i.x,this.content.y=i.y,this.target.addChild(this.content),this.target.mask=this.content}activate(){this.active!==!0&&(this.target.mask!=this.content&&(this.target.mask=this.content),this.active=!0)}deactivate(){this.active!==!1&&(this.target.mask!=null&&(this.target.mask=null),this.active=!1)}static create(t,e){let i=Ma[c(t,"type","rectangle")],n={width:a(t,"width",0),height:a(t,"height",0),x:a(t,"x",0),y:a(t,"y",0),path:ee(t,"path"),res:c(t,"res",null),radius:a(t,"radius",0)};if(e.parent instanceof PIXI.Container)return new ct(e.parent,i,n)}};ct=Na([d({tag:"mask"})],ct);function Ra(t){return new Promise(e=>{setTimeout(e,t)})}function oe(t){let e=0;return new Promise(i=>{const n={advanceTime:s=>(e+=s*PIXI.Ticker.shared.elapsedMS,e>=t&&(E.remove(n),i()),!0)};E.add(n)})}function q(t){let e=0;return new Promise(i=>{const n={advanceTime:s=>(e+=16.66666666667,e>=t&&(E.remove(n),i()),!0)};E.add(n)})}var Wa=Object.defineProperty,Ua=Object.getOwnPropertyDescriptor,$a=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ua(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Wa(e,i,s),s};let dt=class extends P{constructor(t,e){super(),this.options=e,this.animator=new PIXI.AnimatedSprite(t),this.animator.loop=!1,this.currentFrame=0,this.setHueAndBlendMode(),this.addChild(this.animator)}play(t=-1){if(t!==0)return this.loop=t,new Promise((e,i)=>{this.animator.onComplete=this.makeCompleteHandler(e),this.animator.gotoAndPlay(this.currentFrame)})}get speed(){return this.animator.animationSpeed}set speed(t){this.animator.animationSpeed=t}set tint(t){this.animator.tint=t}makeCompleteHandler(t){return()=>{this.loop===1?(t(),this.onComplete()):this.loop===-1?this.playLoop():this.loop>1&&(this.loop--,this.playLoop())}}playLoop(){this.options.loopDelay>0?Ra(this.options.loopDelay).then(()=>this.animator.gotoAndPlay(0)):this.animator.gotoAndPlay(0)}playOnce(){return this.play(1)}activate(){super.activate(),this.options.continuous||(this.currentFrame=0),this.play(this.options.loop)}deactivate(){super.deactivate(),this.animator.stop(),this.options.continuous&&(this.currentFrame=this.animator.currentFrame)}onComplete(){this.emit("animationComplete"),this.options.removeOnComplete&&this.parent&&this.parent.removeChild(this)}setHueAndBlendMode(){if(W.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.hue!==0){let t=new PIXI.ColorMatrixFilter;t.hue(this.options.hue,!1),this.setBlendMode(t),this.animator.filters=[t]}else this.setBlendMode(this.animator)}setBlendMode(t){this.options.blendMode&&(this.options.blendMode==="screen"?t.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(t.blendMode=PIXI.BLEND_MODES.ADD))}static create(t,e){let i=L.get("context"),s=B.resolve(i.resolve(c(t,"res"),e.context));if(re(t,"tint",p.resolve(c(t,"tint"))),g(t,"reverse",!1)&&s&&s.length){let h=s.slice(0);h.reverse(),s=h.slice(a(t,"reverseStart",0))}let r=a(t,"loop",1),o=new dt(s,{loop:r,loopDelay:a(t,"loopDelay",0),hue:a(t,"hue",0),blendMode:c(t,"blendMode",null),continuous:g(t,"continuous",!1),removeOnComplete:g(t,"removeOnComplete",!1)});o.speed=a(t,"speed",1),o.currentFrame=a(t,"startFrame",0);let l=a(t,"tint",-1);return l>=0&&(o.tint=l),Y(t,{scene:e.scene,parent:o,context:e.context}),N(o,t,e),g(t,"play",!0)&&o.play(r),o}};dt=$a([d({tag:"movieClip"})],dt);var Ha=Object.defineProperty,Va=Object.getOwnPropertyDescriptor,Fa=(t,e,i,n)=>{for(var s=n>1?void 0:n?Va(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ha(e,i,s),s};const ja="events:afterTrackTime";let pt=class extends P{constructor(t,e,i,n){super(),this.trackTimeIndex=0,this.animation=new PIXI.spine.Spine(t),this.animation.skeleton.setToSetupPose(),this.animation.update(0),this.animation.autoUpdate=!1,e&&(this.actionName=e,this.loop=i,this.trackIndex=0,this.animation.state.setAnimation(this.trackIndex,e,i)),n&&(this.eventListener={event:(s,r)=>{this.emit(r.data.name,this)}},this.animation.state.addListener(this.eventListener)),this.addChild(this.animation)}setAnimation(t,e,i,...n){return this.actionName=e,this.loop=i,this.trackIndex=t,this.trackTimeIndex=0,this.afterTrackTime=n,this.animation.state.setAnimation(t,e,i)}addAnimation(t,e,i){this.animation.state.addAnimation(t,e,i,0)}setSkin(t){this.animation.skeleton.setSkinByName(t)}advanceTime(t){return this.animation.update(.01666666666667),this.afterTrackTime&&this.trackTimeIndex<this.afterTrackTime.length?this.animation.state.tracks[this.trackIndex].trackTime>=this.afterTrackTime[this.trackTimeIndex]&&(this.trackTimeIndex++,this.emit(ja,this)):(this.trackTimeIndex=0,this.afterTrackTime=null),!0}isCurrentAction(t){return this.actionName===t}hasAnimation(t){return this.animation.state.hasAnimation(t)}set tint(t){this.animation.tint=t,this.additionalAssets&&this.additionalAssets.forEach((e,i)=>{e.tint=t})}get animated(){return this._animated}set animated(t){t!==this._animated&&(this._animated=t,t?E.add(this):E.remove(this))}get currentAction(){return this.actionName}addCompleteListener(t){let e={complete:i=>t(i.trackIndex,i.loopsCount())};return this.animation.state.addListener(e),e}removeCompleteListener(t){this.animation.state.removeListener(t)}removeSpineEventListener(){this.eventListener&&this.animation.state.removeListener(this.eventListener)}removeAllCompleteListener(){this.animation.state.clearListeners()}setVisibleAnimated(t){this.visible=this.animated=t}set timeScale(t){this.animation.state.timeScale=t}set continuous(t){this._continuous=t}getSlotContainerByName(t){return this.animation.slotContainers[this.animation.skeleton.findSlotIndex(t)]}getAdditionalAssets(){return this.additionalAssets}addWidgetToSlotContainer(t,e,i,n){let s=this.getWidgetByName(e),r=this.getSlotContainerByName(t);if(s&&r){if(i&&r.removeChildren(),n){let o=s.scale.y;s.scale.set(s.scale.x,-o)}r.addChild(s),this.additionalAssets||(this.additionalAssets=[]),this.additionalAssets.push(s)}}activate(){super.activate(),this.trackIndex!==void 0&&this.actionName!=null&&!this._continuous&&(this.animation.skeleton.setToSetupPose(),this.animation.state.clearTrack(this.trackIndex),this.setAnimation(this.trackIndex,this.actionName,this.loop)),this.animated&&E.add(this)}deactivate(){E.remove(this),super.deactivate()}getWidgetByName(t){return b.get("widgetService").get(t)}resetTrackTime(){this.setTrackTime(0),this.animation.update(0)}endTrackTime(){this.setTrackTime(this.animation.state.tracks[this.trackIndex].trackEnd)}setTrackTime(t){this.animation.state.tracks[this.trackIndex].trackTime=t}static create(t,e){if(W.type!==PIXI.RENDERER_TYPE.WEBGL)return null;let i=L.get("context"),n=B,s=i.resolve(c(t,"res"),e.context),r=a(t,"speed",1),o=n.resolve(s),l=new pt(o.spineData,c(t,"action"),g(t,"loop",!0),g(t,"event",!1)),u=c(t,"skin"),h=a(t,"trackTime",0);return u&&l.setSkin(u),h&&l.setTrackTime(h),N(l,t,e),l.animation.state.timeScale=r,l.tint=a(t,"tint",16777215),l.animated=g(t,"auto"),l.continuous=g(t,"continuous",!1),j(t,(f,S)=>{f.nodeName==="slot"&&l.addWidgetToSlotContainer(c(f,"name"),c(f,"widget"),g(t,"clearFirst",!1))}),l.animated||l.animation.update(0),l}};pt=Fa([d({tag:"spineAnimation"})],pt);function Ga(t,e,i){let n=ce(t,e,i);return Ut(n,e,i),n.selected=K(e,"selected")==="true",n.command=c(e,"command"),n.sound=c(e,"sound","button"),n}var ka=Object.defineProperty,Xa=Object.getOwnPropertyDescriptor,Ya=(t,e,i,n)=>{for(var s=n>1?void 0:n?Xa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ka(e,i,s),s};let ft=class extends P{constructor(){super(),this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpOutsideHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpOutsideHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonUpHandler(t){}buttonDownHandler(t){}buttonClickedHandler(){this.selected=!this._selected,Ri(this.sound),!Ee("onClick",this)&&this.command&&C.emit(this.command,{source:ae.Mouse,context:this})}buttonUpOutsideHandler(){}set selected(t){this._selected=t,t?(this.down&&(this.down.visible=!0),this.up&&(this.up.visible=!1)):(this.down&&(this.down.visible=!1),this.up&&(this.up.visible=!0))}get selected(){return this._selected}get currentButton(){return this.down&&this.down.visible?this.down:this.up&&this.up.visible?this.up:null}static create(t,e){return Ga(ft,t,e)}};ft=Ya([d({tag:"toggleButton"})],ft);var za=Object.defineProperty,qa=Object.getOwnPropertyDescriptor,Ka=(t,e,i,n)=>{for(var s=n>1?void 0:n?qa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&za(e,i,s),s};let Si=class extends F{constructor(){super(...arguments),this.keybindings=[],this.keys=[]}keyDownHandler(t){if(this._enabled&&t&&t.key){let e=t.key.toLowerCase();if(this.keys.indexOf(e)===-1){this.keys.push(e);let i=this.getKeybinding();i&&i.emitOnKeyPressed&&C.emit(i.command,{source:ae.Keyboard,key:e})}}}keyUpHandler(t){if(t&&t.key){let e=t.key.toLowerCase(),i=this.keys.indexOf(e),n=this.getKeybinding();n&&!n.emitOnKeyPressed&&C.emit(n.command,{source:ae.Keyboard,key:e}),i>-1&&this.keys.splice(i,1)}}getKeybinding(){for(let t of this.keybindings){if(t.scene!==I.current.id)continue;let e=!0;for(let i of t.keys)if(this.keys.indexOf(i)===-1){e=!1;break}if(e)return t}}configure(t){this.options=t,j(t,(e,i)=>{let n=c(e,"when"),s=n.indexOf("."),r="";s!==-1&&(r=n.substr(s+1),n=n.substr(0,s)),this.keybindings.push({keys:c(e,"key").split("+"),command:c(e,"command"),when:r,scene:n,emitOnKeyPressed:g(e,"emitOnKeyPressed")})})}set enabled(t){this._enabled=t}startup(){this._enabled=!0,window.addEventListener("keydown",t=>this.keyDownHandler(t)),window.addEventListener("keyup",t=>this.keyUpHandler(t))}shutdown(){this._enabled=!1,window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("keyup",this.keyUpHandler),this.keybindings=[]}};Si=Ka([d({tag:"keyboardService",category:"service"})],Si);var Ja=Object.defineProperty,Qa=Object.getOwnPropertyDescriptor,Za=(t,e,i,n)=>{for(var s=n>1?void 0:n?Qa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ja(e,i,s),s};const Pi="events:comboSelectionUp",Us="events:comboSelectedIndexChanged";let mt=class extends P{constructor(t){super(),this.selectedIndex=0,this.isDown=!1,this.texts=[],this.ymovecount=0,this.options=t,this.spriteBG=new PIXI.Sprite(this.options.spriteBG),this.drawDropdown(),this.dropdown.on("mousedown",this.dropdownDownHandler,this).on("touchstart",this.dropdownDownHandler,this).on("mouseup",this.dropdownUpHandler,this).on("touchend",this.dropdownUpHandler,this).on("mouseupoutside",this.dropdownUpOutsideHandler,this).on("touchendoutside",this.dropdownUpOutsideHandler,this).on("touchmove",this.dropdownMoveHandler,this).on("mousemove",this.dropdownMoveHandler,this),this.options.mouseWheelEnabled&&this.addMouseWheelEvent()}addMouseWheelEvent(){if(document.addEventListener)document.addEventListener("mousewheel",t=>this.dropdownWheelHandler(t),!0),document.addEventListener("DOMMouseScroll",t=>this.dropdownWheelHandler(t),!0);else{let t=document.attachEvent;t&&t("onmousewheel",e=>this.dropdownWheelHandler(e))}}drawDropdown(){this.dropdownHeight=this.options.itemHeight*this.options.numItemsShown,this.dropdown=new PIXI.Container,this.dropdown.width=this.options.dropdownWidth,this.dropdown.height=this.dropdownHeight,this.dropdown.y-=Math.floor(this.dropdown.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdown),this.dropdown.cursor="pointer",this.dropdown.interactive=!0,this.dropdown.visible=!0,this.dropdown.x=1,this.dropdownMask=Be(this.options.dropdownWidth,this.dropdownHeight,0,16711680),this.dropdownMask.y-=Math.floor(this.dropdownMask.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdownMask),this.dropdown.mask=this.dropdownMask}setValues(t,e=!1,i=0,n=""){if(this.items&&this.items.length>0)return;this.items=t,this.itemsContainer=new PIXI.Container;let s=Be(this.options.dropdownWidth,this.options.itemHeight*t.length,0,this.options.dropdownColor);s.interactive=!0,s.cursor="pointer",s.y-=this.options.itemHeight/2,s.alpha=0,this.itemsContainer.addChild(s),this.baseY=0,this.dropdown.addChild(this.itemsContainer);for(let r=0;r<t.length;r++){let o=new PIXI.Text(hn(t[r],e),this.options.style);o.style.fill=this.options.itemsTextColor,o.pivot.x=.5*o.width,o.pivot.y=.5*o.height,o.x=this.options.dropdownWidth/2,o.y=this.options.itemHeight*r,this.itemsContainer.addChild(o),this.texts.push(o)}this.select(i,!0)}dropdownWheelHandler(t){if(!this.dropdown||!this.visible)return;let e=t||window.event,i=e.clientX,n=e.clientY;var s;e.target&&(s=e.target.getBoundingClientRect()),s&&(i-=s.left,n-=s.top);let r=this.dropdownMask.getGlobalPosition(),o=new PIXI.Point(this.options.dropdownWidth*D.scale.x,this.dropdownHeight*D.scale.y);if(i>=r.x&&i<=r.x+o.x&&n>=r.y&&n<=r.y+o.y){let l=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),u=this.itemsContainer.y-this.options.mouseWheelGap;l>0&&(u=this.itemsContainer.y+this.options.mouseWheelGap),this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(u,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}this.snapItemInMiddle()}dropdownMoveHandler(t){if(this.isDown){let e=this.touchDownItemsY+t.data.getLocalPosition(this,t.data.global).y-this.touchDownY;this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(e,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}}dropdownDownHandler(t){this.isDown=!0,this.touchDownY=t.data.getLocalPosition(this,t.data.global).y,this.touchDownItemsY=this.itemsContainer.y,this.clearItemsScale()}dropdownUpHandler(t){if(this.isDown=!1,this.options.selectItemOnClick){let e=t.data.getLocalPosition(this,t.data.global).y,i=e-this.touchDownY;if(Math.abs(i)<=5){let n=Math.floor((e-this.itemsContainer.y)/this.options.itemHeight);this.selectedIndex!==n&&this.emit(Pi,n),this.select(n,!1,!1,!0);return}}this.snapItemInMiddle(!0)}dropdownUpOutsideHandler(){this.isDown=!1,this.snapItemInMiddle()}snapItemInMiddle(t){let e=Math.ceil((this.baseY-this.itemsContainer.y)/this.options.itemHeight);qe(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-e*this.options.itemHeight},100,TWEEN.Easing.Quadratic.Out),this.select(e,!1,!1,t)}select(t,e,i,n){if(this.clearItemsScale(),this.selectedIndex!==t||e){let s=this.texts[this.selectedIndex];s.style.fill=this.options.itemsTextColor,s=this.texts[t],s.style.fill=this.options.selectedItemTextColor,qe(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-t*this.options.itemHeight},Math.abs(t-this.selectedIndex)*30,null,TWEEN.Easing.Quadratic.Out),this.selectedIndex=t,i||this.emit(Us,t)}else n&&!i&&this.emit(Pi,t);this.setTextsScale(this.texts[this.selectedIndex],1),this.setItemsScale()}setItemsScale(){if(this.options.scaleTopBottomItems>0){let t=1,e=this.selectedIndex-this.options.scaleTopBottomItems;this.texts[this.selectedIndex].scale.set(t,t);for(let i=e+1;i>=e&&i>=0;i--)t=1-(this.selectedIndex-i)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[i],t);e=this.selectedIndex+this.options.scaleTopBottomItems;for(let i=e-1;i<=e&&i<this.texts.length;i++)t=1-(i-this.selectedIndex)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[i],t)}}clearItemsScale(){if(this.options.scaleTopBottomItems>0){let t=1-this.options.scaleTopBottomValue*this.options.scaleTopBottomItems;this.texts.forEach((e,i)=>{this.setTextsScale(e,t)})}}setTextsScale(t,e){t.scale.set(e,e),t.alpha=e}static create(t,e){let i=B,n=i.resolve(c(t,"spriteBG")),s=i.resolve(c(t,"dropdown")),r=K(t,"selected")==="true",o=Number(p.resolve(c(t,"itemsTextColor","0xFFFFFF"))),l=Number(p.resolve(c(t,"selectedItemTextColor","0xFFFFFF"))),u=new mt({spriteBG:n,numItemsShown:a(t,"numItemsShown",5),dropdown:s,selected:r,highlightColor:a(t,"highlightColor",5592405),dropdownColor:a(t,"dropdownColor",11184810),dropdownWidth:a(t,"dropdownWidth",150),itemHeight:a(t,"itemHeight",30),itemsTextColor:o,selectedItemTextColor:l,scaleTopBottomItems:a(t,"scaleTopBottomItems",0),scaleTopBottomValue:a(t,"scaleTopBottomValue",.1),mouseWheelGap:a(t,"mouseWheelGap",30),mouseWheelEnabled:g(t,"mouseWheelEnabled",!1),selectItemOnClick:g(t,"selectItemOnClick",!1),style:cs(t)});return Ut(u,t,e),g(t,"debug")&&xs(u),N(u,t,e),u}};mt=Za([d({tag:"carousel"})],mt);var el=Object.defineProperty,tl=Object.getOwnPropertyDescriptor,il=(t,e,i,n)=>{for(var s=n>1?void 0:n?tl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&el(e,i,s),s};const $s="events:betChanged",_i="events:betVisibility";let gt=class extends P{init(){this.visible=this.selection.visible=!1,this.selection.on(Pi,t=>this.close()),this.selection.on(Us,t=>this.betChangedHandler(t))}select(t){this.values&&this.values.length&&this.selection.select(t,!1,!0)}setValues(t,e){this.values=t,this.selection.setValues(t,!0,e)}open(){return this.visible?!1:(this.openClose(!1,()=>{this.addCloseHandler()}),this.visible=this.selection.visible=!0,this.emit(_i,this.visible),!0)}close(){this.visible&&(this.removeCloseHandler(),this.openClose(!0,()=>{this.visible=this.selection.visible=!1,this.emit(_i,this.visible)}))}betChangedHandler(t){this.emit($s,t)}openClose(t,e){let i={scale:0},n={scale:1},s=TWEEN.Easing.Exponential.Out;t&&(i={scale:1},n={scale:0},s=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(n,100).easing(s).onUpdate(()=>{this.scale.y=i.scale}).onComplete(()=>{e&&e()}).start()}addCloseHandler(){this.btnClose.enabled=!0,this.btnClose.on("mouseup",this.close,this).on("touchend",this.close,this),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!0,this.parent.clickable.on("mousedown",this.close,this).on("touchstart",this.close,this))}removeCloseHandler(){this.btnClose.enabled=!1,this.btnClose.off("mouseup").off("touchend"),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!1,this.parent.clickable.off("mousedown").off("touchstart"))}static create(t,e){let i=ce(gt,t,e);return i.init(),i}};gt=il([d({tag:"betSelection"})],gt);var sl=Object.defineProperty,nl=Object.getOwnPropertyDescriptor,rl=(t,e,i,n)=>{for(var s=n>1?void 0:n?nl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&sl(e,i,s),s};let vt=class extends P{constructor(){super(...arguments),this.cheatKeys={}}initCommand(){for(let t=0;t<10;t++)this.cheatKeys[t.toString()]&&(C.off("cheat"+t),C.on("cheat"+t,e=>{this.highlight(e.key),R().cheat=e.key}));C.off("cheatToggle"),C.on("cheatToggle",t=>{this.toggleVisibility()})}init(t){this.removeChildren();let e=si(v.width,21,0);e.y=-1,e.alpha=.7,this.addChild(e);let i=this.cheatStr.split(","),n=[];n.push(this.createText("press")),n.push(this.createText("0:Hide Bar"));for(let s of i){let r=s.split(":")[0];this.cheatKeys[r]=s.split(":")[1],n.push(this.createText(s,t==r))}n.push(this.createText('then press "SPIN"')),this.texts=n,this.arrange()}highlight(t){this.init(t)}arrange(){let t=v.width,e=0;for(let s of this.texts)e+=s.width;let i=(t-e)/(this.texts.length+1),n=i;for(let s=0;s<this.texts.length;s++)this.texts[s].x=n,n+=i+this.texts[s].width}toggleVisibility(){R().demo!="1"||!w.desktop?this.visible=!1:this.visible=!this.visible}createText(t,e){let i=new PIXI.Text(t,{fontFamily:"Arial",fontSize:"16px",fill:e?15982143:16777215});return i.y=1,this.addChild(i),i}static create(t,e){let i=ce(vt,t,e);return i.cheatStr=c(t,"keys"),i.init(),i.initCommand(),i}};vt=rl([d({tag:"cheatBar"})],vt);var ol=Object.defineProperty,al=Object.getOwnPropertyDescriptor,ll=(t,e,i,n)=>{for(var s=n>1?void 0:n?al(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ol(e,i,s),s};const hl="events:winbox";let bt=class extends P{constructor(){super(...arguments),this.autohide=!0,this.accumulative=!1}init(){this.totalBet||(this.totalBet=this.getComponentByID("totalBet")),this.balance||(this.balance=this.getComponentByID("balance")),this.time||(this.time=this.getComponentByID("time")),(this.usertime||this.time)&&(this.usertime&&(this.usertime.hasComma=!1),this.time&&(this.time.hasComma=!1),E.add(this)),this.username&&R().displayName&&(this.username.hasComma=!1,this.username.value=R().displayName),T().miniFooter&&(this.balance.visible=this.iconBal.visible=!1,this.win.visible=this.iconWin.visible=!0,this.labelBalWin.value=Q("win"));let e="";w.platform!=="mini"&&(e=Bt(R().currency,T().CURRENCY_SYMBOL)),this.winBoxLabel.prefix=ms(R().currency,T().CURRENCY_SYMBOL),this.winBoxLabel.updatePrefixSuffix(),this.totalBet.prefix=this.win.prefix=this.balance.prefix=e,this.totalBet.updatePrefixSuffix(),this.win.updatePrefixSuffix(),this.balance.updatePrefixSuffix()}updateTotalBet(e){this.totalBet&&(this.totalBet.value=se(e))}animateBalance(e){this.balance.value=se(e)}updateBalance(e){this.balance.setValueDirectly(se(e))}updateWinAmount(e){this.win.value=se(e)}directUpdateWinAmount(e){this.win.setValueDirectly(se(e))}get winBoxLabel(){return this._winBoxLabel===void 0&&(this._winBoxLabel=this.getComponentByID("winBoxLabel")),this._winBoxLabel}showBox(e){if(this.winBox)return J.emit(hl,e),this.winBoxSound=oi("winmeter","default",!0),new Promise((i,n)=>{this.winBox.visible=!0,this.accumulative||this.winBoxLabel.reset(),this.winBoxLabel.value=this.accumulative?this.winBoxLabel._value.plus(e).toString():e.toString(),this.activate(),clearTimeout(this.showTimer),this.showTimer=setTimeout(()=>{this.autohide&&this.hideBox(),i()},this.winBoxLabel.options.duration+1e3)})}hideBox(){this.winBox&&(clearTimeout(this.showTimer),Qe(this.winBoxSound),this.winBox.visible=!1,this.winBoxSound=null,this.winBoxLabel.deactivate())}resetWinAmount(){this.win.reset(),this.hideBox()}advanceTime(e){return this.usertime?this.usertime.value=ki(8):this.time&&(this.time.value=ki(8,!0)),!this.winBox.visible&&this.winBoxSound&&Qe(this.winBoxSound),!0}deactivate(){this.hideBox(),(this.usertime||this.time)&&E.remove(this)}static create(e,i){let n=ce(bt,e,i);return n.init(),n}};bt=ll([d({tag:"footerBar"})],bt);var ul=Object.defineProperty,cl=Object.getOwnPropertyDescriptor,dl=(t,e,i,n)=>{for(var s=n>1?void 0:n?cl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ul(e,i,s),s};let yt=class extends bt{init(t){super.init();let e="";t&&(e=Bt(R().currency,T().CURRENCY_SYMBOL)),this.totalBet.prefix=this.balance.prefix=this.win.prefix=e,this.totalBet.updatePrefixSuffix(),this.balance.updatePrefixSuffix(),this.win.updatePrefixSuffix()}static create(t,e){let i=ce(yt,t,e);return i.init(g(t,"includeCurrency")),i}};yt=dl([d({tag:"footerBar"})],yt);var pl=Object.defineProperty,fl=Object.getOwnPropertyDescriptor,ml=(t,e,i,n)=>{for(var s=n>1?void 0:n?fl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&pl(e,i,s),s};let $=class extends P{constructor(){super(),this.clearMessage()}showMessage(t,e,i){if(!(!this.txt||e!==void 0&&e===0))if(t!==void 0){let n=Q(t);if(n&&n!=="undefined"){let s="";e&&(s=Bt(R().currency,T().CURRENCY_SYMBOL)+se(e)),this.fade&&this.fade.stop(),this.txt.value=n.replace("%number%",i?i.toString():"").replace("%win%",s).replace("%npl%",i>1?"s":"").replace("%ppl%",i===1?"s":""),this.visible?this.alpha=1:this.fade=Ue(this,200),this.visible=!0}else this.clearMessage()}else this.clearMessage()}clearMessage(){!this.txt||!this.visible||(this.fade&&this.fade.stop(),this.fade=Ni(this,200,()=>{this.txt.value="",this.visible=!1}))}static create(t,e){return ce($,t,e)}};$.SPIN="msg_spin";$.NO_WIN="msg_nowin";$.LINE_WIN="msg_linewin";$.SCATTER_WIN="msg_scatterwin";$.WILD_WIN="msg_wildwin";$.FEATURE_WIN="msg_featurewin";$.BONUS_WIN="msg_bonuswin";$.WAYS_WIN="msg_wayswin";$.LINES_WIN="msg_lineswin";$.BONUS="msg_bonus";$.FREESPIN="msg_freespin";$.RESPIN="msg_respin";$.RESPINS="msg_respins";$=ml([d({tag:"hudMessage"})],$);var gl=Object.defineProperty,vl=Object.getOwnPropertyDescriptor,bl=(t,e,i,n)=>{for(var s=n>1?void 0:n?vl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&gl(e,i,s),s};let wt=class extends P{constructor(e){super(),this.pages=[],this.indicators=[],this.options=e}initIndicators(){let e=this.options.numPages;if(!(e<2)){this.indicators=[];for(let i=0;i<e;i++){let n=this.getIndicators(),s=this.getIndicators(!0);n.y=s.y=v.height-this.y-70+this.options.indicatorY,n.x=s.x=(v.width-this.options.indicatorGap*(e-1)-n.width)/2+i*this.options.indicatorGap,this.setIndicatorHandler(s,i),this.addChild(n),this.addChild(s),this.indicators.push({on:n,off:s})}this.updatedHitArea(v.width)}}setIndicatorHandler(e,i){e.interactive=e.buttonMode=!0,e.on("mouseup",n=>this.gotoPage(i)).on("touchend",n=>this.gotoPage(i))}updatedHitArea(e){if(!this.indicators||!this.indicators.length)return;let i=this.indicators[0].off,n=this.options.indicatorGap;this.hitArea=new PIXI.Rectangle(this.x,this.y,e-this.x,i.y-this.options.indicatorY),i.hitArea=new PIXI.Rectangle(-n/10,-n/2,i.width+n/5,i.height+n)}initPages(e,i){let n=this.options.numPages;this.pages=[];for(let s=0;s<n;s++){let r=le.instantiate("@img/info"+(s+1));this.addChild(r),this.pages.push(r)}}initListeners(){this.options.numPages>1&&(this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("touchmove",this.dropdownMoveHandler).on("mousemove",this.dropdownMoveHandler))}getIndicators(e=!1){let i;return this.options.indicatorBase?i=le.instantiate(this.options.indicatorBase):i=le.instantiate(e?this.options.indicatorOff:this.options.indicatorOn),e&&this.options.indicatorOffTint>-1&&(i.tint=this.options.indicatorOffTint),!e&&this.options.indicatorOnTint>-1&&(i.tint=this.options.indicatorOnTint),i}get currentPage(){return this.pages[this._currentPageIndex]}get currentPageIndex(){return this._currentPageIndex}setPageIndex(e,i=!1){if(this.options.numPages<2||this._currentPageIndex===e&&!i)return;for(let s=0;s<this.pages.length;s++)this.pages[s].visible=!1,this.indicators[s].on.visible=!1,this.indicators[s].off.visible=!0;let n=this.pages[this._currentPageIndex];n&&n.deactivate(),this._currentPageIndex=e,this.pages[e].activate(),this.currentPage.visible=!0,this.indicators[e].on.visible=!0,this.indicators[e].off.visible=!1}gotoPage(e){this.interactive=!1,this.isDown=!1;let i={x:this.currentPage.x},n=-1,s=this.currentPage.width;e>this.currentPageIndex&&(s*=n,n=1),this.pages[e].x=this.currentPage.width*-n,this.pages[e].visible=!0,new TWEEN.Tween(i).to({x:s},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=i.x,this.pages[e].x=this.currentPage.x+this.currentPage.width*n}).onComplete(()=>{this.interactive=!0,this.currentPage.deactivate(),this.setPageIndex(e),this.track()}).start()}buttonDownHandler(e){this.isDown=!0,this.touchDownX=e.data.getLocalPosition(this,e.data.global).x}buttonUpHandler(e){if(!this.isDown)return;this.isDown=!1;let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;if(this.interactive=!1,i>0){let n={x:this.currentPage.x};new TWEEN.Tween(n).to({x:i>100?this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=n.x,this.prevPage.x=this.currentPage.x-this.currentPage.width}).onComplete(()=>{this.interactive=!0,i>100&&(this.setPageIndex(this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1),this.track())}).start()}else{let n={x:this.currentPage.x};new TWEEN.Tween(n).to({x:i<-100?-this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=n.x,this.nextPage.x=this.currentPage.x+this.currentPage.width}).onComplete(()=>{this.interactive=!0,i<-100&&(this.setPageIndex(this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1),this.track())}).start()}}track(){he.screen({name:"info"+this.currentPageIndex})}get nextPage(){return this.pages[this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1]}get prevPage(){return this.pages[this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1]}dropdownMoveHandler(e){if(this.isDown){let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;this.currentPage.x=i,i>0?(this.nextPage.visible=!1,this.prevPage.visible=!0,this.prevPage.x=this.currentPage.x-this.currentPage.width):(this.prevPage.visible=!1,this.nextPage.visible=!0,this.nextPage.x=this.currentPage.x+this.currentPage.width)}}static create(e,i){return Ft(wt,e,i)}};wt=bl([d({tag:"infoPanel"})],wt);function Ft(t,e,i){re(e,"indicatorOnTint",p.resolve(c(e,"indicatorOnTint"))),re(e,"indicatorOffTint",p.resolve(c(e,"indicatorOffTint")));let n=new t({numPages:parseInt(p.resolve(c(e,"pages"))),indicatorBase:c(e,"indicatorBase"),indicatorOn:c(e,"indicatorOn"),indicatorOff:c(e,"indicatorOff"),indicatorOnTint:a(e,"indicatorOnTint",-1),indicatorOffTint:a(e,"indicatorOffTint",-1),indicatorOffsetYL:a(e,"indicatorOffsetYL",50),indicatorOffsetYP:a(e,"indicatorOffsetYP",180),indicatorGap:a(e,"indicatorGap",80),indicatorY:a(e,"indicatorY",0)});return N(n,e,i),n.initPages(e,i),n.initIndicators(),n.initListeners(),n.setPageIndex(0),n}var yl=Object.defineProperty,wl=Object.getOwnPropertyDescriptor,xl=(t,e,i,n)=>{for(var s=n>1?void 0:n?wl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&yl(e,i,s),s};let xt=class extends wt{initPages(e,i){this.pages=[],j(e,(n,s)=>{let r=ue(n,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}static create(e,i){return Ft(xt,e,i)}};xt=xl([d({tag:"infoPanel"})],xt);var Sl=Object.defineProperty,Pl=Object.getOwnPropertyDescriptor,_l=(t,e,i,n)=>{for(var s=n>1?void 0:n?Pl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Sl(e,i,s),s};let St=class extends xt{initIndicators(){let e=this.options.numPages;if(!(e<2)){for(let i=0;i<e;i++){let n=this.getIndicators(),s=this.getIndicators(!0);this.addChild(n),this.addChild(s),this.indicators.push({on:n,off:s})}this.setIndicatorsPoistion(!0)}}setIndicatorsPoistion(e=!1){let i=this.options.numPages;if(i<2)return;let n=b.get("orientationService").getOrientation();for(let s=0;s<i;s++){let r=this.indicators[s].on,o=this.indicators[s].off,l,u;n===y.LANDSCAPE?(l=v.height-this.y-this.options.indicatorOffsetYL+this.options.indicatorY,u=(v.width-this.options.indicatorGap*(i-1)-r.width)/2+s*this.options.indicatorGap):(l=v.width-this.y-this.options.indicatorOffsetYP+this.options.indicatorY,u=(v.height-this.options.indicatorGap*(i-1)-r.width)/2+s*this.options.indicatorGap),r.y=o.y=l,r.x=o.x=u,e&&this.setIndicatorHandler(o,s)}this.updatedHitArea(n===y.LANDSCAPE?v.width:v.height)}initPages(e,i){this.pages=[],j(e,(n,s)=>{let r=ue(n,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}refreshCurrentPage(){this.setPageIndex(this.currentPageIndex,!0)}onOrientationChange(e){super.onOrientationChange(e),this.setIndicatorsPoistion(),this.refreshCurrentPage()}static create(e,i){return Ft(St,e,i)}};St=_l([d({tag:"infoPanel"})],St);var Ol=Object.defineProperty,Il=Object.getOwnPropertyDescriptor,Cl=(t,e,i,n)=>{for(var s=n>1?void 0:n?Il(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ol(e,i,s),s};let Pt=class extends St{setIndicatorsPoistion(t=!1){let e=this.options.numPages;if(e<2)return;let i=b.get("orientationService").getOrientation();for(let n=0;n<e;n++){let s=this.indicators[n].on,r=this.indicators[n].off,o,l;i===y.LANDSCAPE?(o=v.minHeight-this.options.indicatorOffsetYL,l=(v.minWidth-this.options.indicatorGap*(e-1)-s.width)/2+n*this.options.indicatorGap):(o=v.minWidth-this.options.indicatorOffsetYP,l=(v.minHeight-this.options.indicatorGap*(e-1)-s.width)/2+n*this.options.indicatorGap),s.y=r.y=o,s.x=r.x=l,t&&this.setIndicatorHandler(r,n)}this.updatedHitArea(i===y.LANDSCAPE?v.width:v.height)}setIndicatorHandler(t,e){super.setIndicatorHandler(t,e),t.hitArea=new PIXI.Rectangle(-2,-2,t.width+4,t.height+6),t.cursor="pointer"}updatedHitArea(t){if(!this.indicators||!this.indicators.length)return;let e=this.indicators[0].off;this.hitArea=new PIXI.Rectangle(-this.x,0,t,e.y+e.height+6)}initPages(t,e){let i=ee(t,"jackpotPagesNo");if(i.length>0&&!Ls()){let s=1;this.pages=[],j(t,(r,o)=>{if(i.indexOf(s++)<0){let l=ue(r,{scene:e.scene,parent:this,context:e.context});this.addChild(l),this.pages.push(l)}}),this.options.numPages=this.pages.length;return}super.initPages(t,e)}static create(t,e){return Ft(Pt,t,e)}};Pt=Cl([d({tag:"infoPanel"})],Pt);var El=Object.defineProperty,Tl=Object.getOwnPropertyDescriptor,Ll=(t,e,i,n)=>{for(var s=n>1?void 0:n?Tl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&El(e,i,s),s};let We=class extends be{static create(t,e){re(t,"fill",p.resolve(c(t,"fill")));let i=Vi(We,t,e);return i.value=p.resolve(c(t,"value")),i}initText(){let t=b.get("fontService"),e=t?Math.round(t.adjustment.size*this.options.style.fontSize):0,i=t?t.adjustment.x:0,n=t?t.adjustment.y:0;this.options.style.fontSize+=e;let s=this.options.style;this.isDefaultFont?(s.fontFamily="Arial",this.text=new PIXI.Text(this.options.value,s),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)):this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:s.fontSize,fontName:s.fontFamily}),this.text.tint=s.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,s),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text),this.text.x+=Math.round(this.options.style.fontSize*i),this.text.y+=Math.round(this.options.style.fontSize*n)}get isDefaultFont(){return p.LANGUAGE===O.Khmer||p.LANGUAGE===O.Turkish||p.LANGUAGE===O.Portuguese||p.LANGUAGE===O.Hindi}};We=Ll([d({tag:"langLabel"})],We);Object.defineProperty(We.prototype,"value",{get:function(){return this.text.text},set:function(t){this.text.text=Ht(t),this.update()}});let Al=!0,Oe;function Bl(){if(Oe!==void 0)return Oe;Oe=!1;try{(w.mobile||w.tablet)&&"userActivation"in navigator&&navigator.userActivation.hasBeenActive&&"vibrate"in navigator&&(Oe=!0)}catch{}return Oe}function Dl(){return Al}var Nl=Object.defineProperty,Ml=Object.getOwnPropertyDescriptor,Rl=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ml(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Nl(e,i,s),s};let ye=class extends P{constructor(t){super(),this.options=t}init(t){this.context=t,this.visible=!1,this.initCloseClickable(),this.arrangeButtons(),this.checkSounds(),this.checkVibration()}show(){}arrangeButtons(){this.setLandscapeButtons(),this.setPortraitButtons()}checkSounds(){let t=b.get("soundService");this.panel.landscape.sound.selected=this.panel.portrait.sound.selected=t.muted}checkVibration(){this.panel.landscape.vibration&&this.panel.portrait.vibration&&(this.panel.landscape.vibration.selected=this.panel.portrait.vibration.selected=Dl())}setLandscapeButtons(){let t=this.panel.landscape;if(t.panelbglong&&t.panelbgshort){this.setDynamicLayout("landscape");return}let e=4,i=this.getButtonsOrder(t),n=Math.floor(this.options.l_center-this.options.l_gap*i.buttons.length/2+this.options.l_gap/2);for(var s=0;s<i.buttons.length;s++)i.buttons[s].visible=!0,i.buttons[s].x=n+this.options.l_gap*s,i.labels[s].visible=!0,i.labels[s].x=i.buttons[s].x-e,i.labels[s].y=i.buttons[s].y+i.buttons[s].height-Math.floor(i.labels[s].height/2)}setPortraitButtons(){this.setDynamicLayout("portrait")}setDynamicLayout(t){let e=4,i=t.charAt(0)+"_",n=this.panel[t],s=this.getButtonsOrder(n);n.panelbgshort.visible=!1,n.panelbglong.visible=!1;let r=[],o=0;for(var l=0;l<s.buttons.length;l++)l%this.options[i+"itemPerRow"]===0&&(r[o]=[]),r[o].push({button:s.buttons[l],label:s.labels[l]}),(l+1)%this.options[i+"itemPerRow"]===0&&o++;if(r.length==2)n.panelbgshort.visible=!1,n.panelbglong.visible=!0,r.reverse();else{let f=n.panelbglong.height-n.panelbgshort.height;n.panelbgshort.visible=!0,n.panelbglong.visible=!1,n.logo.y+=f,n.close.y+=f}for(var u=0;u<r.length;u++){let f=Math.floor(this.options[i+"center"]-this.options[i+"gap"]*r[u].length/2+this.options[i+"gap"]/2);for(var h=0;h<r[u].length;h++)r[u][h].button.visible=!0,r[u][h].label.visible=!0,r[u][h].button.x=f+this.options[i+"gap"]*h,r[u][h].label.x=r[u][h].button.x-e,r[u][h].button.y=this.options[i+"row"][u],r[u][h].label.y=this.options[i+"row"][u]+r[u][h].button.height-Math.floor(r[u][h].label.height/2)}}getButtonsOrder(t){let e=[t.info,t.sound],i=[t.lblInfo,t.lblSound];return this.lobbyVisible&&(e.push(t.lobby),i.push(t.lblLobby)),t.settings&&(e.push(t.settings),i.push(t.lblSettings)),this.historyVisible&&(e.push(t.history),i.push(t.lblHistory)),this.homeVisible&&(e.push(t.home),i.push(t.lblHome)),this.vibrationVisible&&(t.vibration&&e.push(t.vibration),t.lblVibration&&i.push(t.lblVibration)),this.liveChatVisible&&(e.push(t.livechat),i.push(t.lblLiveChat)),this.helpVisible&&(e.push(t.help),i.push(t.lblHelp)),{buttons:e,labels:i}}hide(){this.close(),this.visible=!1}toggleAll(t){this.bonusbet&&(this.bonusbet.visible=t),this.fround&&(this.fround.visible=this.froundVisible&&t),this.help&&(this.help.visible=this.helpVisible&&t)}open(){return this.visible?!1:(this.closing=!1,this.openClose(),this.visible=!0,!0)}close(t){!this.visible||this.closing||(this.closing=!0,this.openClose(!0,()=>{this.closing=!1,this.visible=!1,this.emit(ye.MENU_CLOSED)}))}openClose(t,e){let i={scale:0,y:this.height},n={scale:1,y:0},s=TWEEN.Easing.Exponential.Out;t&&(i={scale:1,y:0},n={scale:0,y:this.height},s=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(n,100).easing(s).onUpdate(()=>{this.panel.scale.y=i.scale,this.panel.y=i.y}).onComplete(()=>{e&&e()}).start()}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.panel.landscape.close&&this.panel.landscape.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this),this.panel.portrait.close&&this.panel.portrait.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)}get froundVisible(){return R().fround}get lobbyVisible(){return this.context.realLobbyUrl&&this.context.HIDE_LOBBY==="0"}get liveChatVisible(){return this.context.livechatUrl}get historyVisible(){return!this.context.FUNPLAY}get homeVisible(){return this.context.HOME_URL}get vibrationVisible(){return this.context&&this.context.isVibrationActivated&&Bl()}get helpVisible(){return this.context.helpUrl}get buttonCloseLandscape(){return this.panel.landscape.close}get buttonClosePortrait(){return this.panel.portrait.close}static create(t,e){let i=ee(t,"p-row");i.length===0&&(i=[350,235]);let n=new ye({l_center:a(t,"l-center",480),p_center:a(t,"p-center",270),l_gap:a(t,"l-gap",125),p_gap:a(t,"p-gap",125),l_itemPerRow:a(t,"l-itemPerRow",4),p_itemPerRow:a(t,"p-itemPerRow",4),l_row:ee(t,"l-row"),p_row:i});return Wi(n,t,e)}onOrientationChange(t){super.onOrientationChange(t),this.checkSounds(),this.checkVibration()}};ye.MENU_CLOSED="events:menu_closed";ye=Rl([d({tag:"menu"})],ye);var Wl=Object.defineProperty,Ul=Object.getOwnPropertyDescriptor,jt=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ul(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Wl(e,i,s),s};let we=class extends $e{onCreated(){this.initCommand(),this.playSound(),this.onSceneResize()}initCommand(){C.on("infoPage",()=>{this.backClickHandler()})}backClickHandler(){I.replace("main")}playSound(t=!0){t?this.soundService.switchScope(!0)&&(this.bgmInfo=this.soundService.play("bgm-info","info")):(this.bgmInfo&&this.soundService.stop(this.bgmInfo.soundId),this.soundService.switchScope(),this.bgmInfo=null)}onSceneResize(){let t=this.layoutService.deviceViewportOffset;this.btnBack.x=this.btnBackX-t.x}onOrientationChange(t){super.onOrientationChange(t),this.btnBackX=this.btnBack.x}exit(){C.off("infoPage"),this.playSound(!1),super.exit()}};jt([Se("layoutService")],we.prototype,"layoutService",2);jt([Se("orientationService")],we.prototype,"orientationService",2);jt([Se("soundService")],we.prototype,"soundService",2);we=jt([d({tag:"infoPage",category:"scene"})],we);var $l=Object.defineProperty,Hl=Object.getOwnPropertyDescriptor,Vl=(t,e,i,n)=>{for(var s=n>1?void 0:n?Hl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&$l(e,i,s),s};let _t=class extends $e{enter(){super.enter(),E.add(this),this.version&&(this.version.value="v"+p.engineVersion)}advanceTime(t){return this.circle&&(this.circle.rotation+=.2),!0}exit(){super.exit(),E.remove(this)}};_t=Vl([d({tag:"loading",category:"scene"})],_t);const ve=class ve{constructor(){ve.canvas||(ve.canvas=document.getElementById("stage"))}createDiv(e){var i=document.createElement("div");return i.innerHTML=e,i}createPlaceholder(e){var i=document.createElement("div");return i.style.height=e,i}static getBase(){return this.base||(this.base=document.createElement("div"),this.base.style=this.canvas.style,this.canvas.parentElement.insertBefore(this.base,this.canvas)),this.base}render(){}static getFont(){let e=p.LANGUAGE;return this.font[e]||this.font[O.English]}show(){this.content&&(this.content.style.display="block")}hide(){this.content&&(this.content.style.display="none")}static querySelector(e){let i=new ve;return i.content=document.querySelector(e),i}};ve.font={en:"DIN",cs:"Microsoft YaHei",jp:"Kozuka Mincho Pro",kh:"Khmer OS Battambang",kr:"Nokora",pt:"Arial",th:"Tahoma",tr:"Arial",vn:"Tahoma"};let Ot=ve;function ns(t){let e=[];return t&&t.forEach((i,n)=>{e.push(Fl(i))}),e}function Fl(t){let e=[];return t.rowPositions&&t.rowPositions.forEach((i,n)=>{i>0&&e.push([n,i-1])}),{index:t.line,win:t.win,multiplier:t.multiplier,wildMultiplier:t.wildMultiplier||0,positions:e,symbol:t.symbol,type:t.type}}function jl(t){if(t.value.bonus){let e,i;if(t.value.bonus.gameResult.spinResult?e=t.value.bonus.gameResult.spinResult:t.value.bonus.gameResult&&(e=t.value.bonus.gameResult),e)return i=t.value.bonus,{id:String(i.id)||void 0,key:i.guid||void 0,count:i.counter||0,step:i.currentStep||void 0,wheels:e.wheel?e.wheel.reels:[],mode:e.mode||0,position:ns(e.winPositions),bonusPosition:ns(e.bonusPositions),data:{win:new Decimal(t.value.bonus.gameResult.win||0),balance:new Decimal(t.value.bonus.gameResult.balance&&t.value.bonus.gameResult.balance.value?t.value.bonus.gameResult.balance.value:0)},rsp:i}}return null}var Gl=Object.defineProperty,kl=Object.getOwnPropertyDescriptor,Gt=(t,e,i,n)=>{for(var s=n>1?void 0:n?kl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Gl(e,i,s),s};let xe=class extends _t{enter(){super.enter(),Ot.querySelector(".gplogo").hide(),Ot.querySelector(".loader").hide()}onCreated(){this.player.bet.lines=parseInt(p.numBetLines),p.creditsBetLines&&(this.player.bet.credits=parseInt(p.creditsBetLines)),this.netService.signIn().then(t=>{this.netService.json?t.value&&(t.value.sessionKey?(this.context.USER_ID=this.player.sessionKey=t.value.sessionKey,t.value.memberName&&(this.player.accountName=this.player.displayName=t.value.memberName)):this.context.USER_ID=this.player.sessionKey=t.value):(this.context.USER_ID=this.player.sessionKey=t.token,t.name&&(this.player.accountName=this.player.displayName=t.name))}).then(()=>Promise.all([this.netService.getBalance().then(t=>{if(this.netService.json?t.value&&(this.player.balance=new Decimal(t.value.amount),t.value.currency!==void 0&&(this.player.currency=t.value.currency)):(this.player.balance=t.balance,this.player.currency=t.currency,t.userid!==void 0&&(this.player.accountName=t.userid)),this.context.ANONYMOUS)this.context.TRACKER_USER_ID=this.context.USER_ID;else{this.context.TRACKER_USER_ID=this.player.accountName;let e=window.appInsights;e&&e.setAuthenticatedUserContext(this.context.TRACKER_USER_ID)}}),this.netService.getBets().then(t=>{if(this.netService.json){if(t.value){if(L.map("gameState").toValue(t.value),this.player.symbols=t.value.wheel.reels,this.player.betValues=t.value.coins,t.value.extraGameSettings&&this.context.multiplierAsCreditBet){let e=t.value.extraGameSettings.creditBet;this.player.multiplierValues=e||t.value.multipliers}else this.player.multiplierValues=t.value.multipliers;if(this.player.bet.amount=t.value.coins[0],this.player.setDefaultBet(),this.player.betValue=t.value.bet||t.value.coins[0],this.player.demo=t.value.funPlayDemo?"1":"0",this.player.getBet=t.value,this.player.bonus=jl(t),this.player.bonus&&(this.player.restoreBonus=!0,this.player.bonus.wheels&&(this.player.symbols=this.player.bonus.wheels)),t.value.multiplier?this.player.multiplierValues.indexOf(this.player.bet.multiplier)>=0&&(this.player.multiplierIndex=this.player.multiplierValues.indexOf(this.player.bet.multiplier)):this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"){let e=t.value.freeGameInfo;t.value.dailyFreeGameInfo&&(e=t.value.dailyFreeGameInfo),e&&(this.player.fround=e,this.player.froundCount=e.round)}}this.extraGetBetsSetting(t)}else L.map("gameState").toValue(t),this.player.symbols=t.wheels,this.player.betValues=t.betValues,this.player.multiplierValues=t.multiplier,this.player.bet.amount=gn(t.betValues),this.player.setDefaultBet(),this.player.betValue=t.bet,this.player.demo=t.demo,this.player.getBet=t.data,this.player.multiplierIndex=0,this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"&&(this.player.fround=t.fround,this.player.froundCount=t.froundCount),t.bonus&&(this.player.bonus=t.bonus,this.player.restoreBonus=!0)}),this.netService.jackpot().then(t=>{t.value&&t.value.pool?this.player.progressiveJackpot=t.value.pool:this.context.isProgressiveJackpot="false"}).catch(t=>{this.context.isProgressiveJackpot="false"})])).then(()=>I.replace(this.next||"splash")).catch(t=>{t.code?Qi(t.code,!0):Qi(t.error?t.error:"0",!0)})}extraGetBetsSetting(t){}};Gt([$t("context")],xe.prototype,"context",2);Gt([Se("netService")],xe.prototype,"netService",2);Gt([$t("user")],xe.prototype,"player",2);xe=Gt([d({tag:"login",category:"scene"})],xe);var Xl=Object.defineProperty,Yl=Object.getOwnPropertyDescriptor,zl=(t,e,i,n)=>{for(var s=n>1?void 0:n?Yl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Xl(e,i,s),s};const ql="events:resize",Kl="events:web_resize";let Oi=class extends F{constructor(){super(...arguments),this.prevOrientation=0}configure(t){}startup(){b.has("orientationService")||b.register("orientationService",Me).startup(),this.orientationService=b.get("orientationService"),this.orientationService.started||this.orientationService.startup(),this.resizeAndOrientaionChecker=setInterval(()=>{this.checkResize(),this.checkSecondaryOrientation()},30),this.checkResize()}checkResize(){const t=window.innerWidth,e=window.innerHeight;(this.windowHeight!==e||this.windowWidth!==t)&&(this.windowHeight=e,this.windowWidth=t,this.layout(),J.emit(ql),J.emit(Kl))}checkSecondaryOrientation(){this.windowOrientation!==window.orientation&&(this.windowOrientation=window.orientation,this.layout())}shutdown(){clearInterval(this.resizeAndOrientaionChecker)}layout(){const t=v;let e=t.minWidth,i=t.minHeight,n=t.width,s=t.height,r=1,o=0;const l=this.orientationService.getOrientation();ei(!1),this.isBothEnaled&&l===y.PORTRAIT&&!this.orientationService.strictLandscapeWeb||this.isPortraitOnlyEnabled&&this.isNotMobile&&l===y.LANDSCAPE||this.isBothEnaled&&l===y.PORTRAIT&&this.orientationService.strictLandscapeWeb&&this.isMobileOrTablet?(n=t.height,s=t.width,e=t.minHeight,i=t.minWidth):this.isPortraitOnlyEnabled&&this.isMobileOrTablet&&l===y.LANDSCAPE?ei(!0):w.mobile&&(this.orientationService.mode==="portrait"&&l===y.LANDSCAPE||this.orientationService.mode==="landscape"&&l===y.PORTRAIT)&&(this.orientationService.strictMode?this.orientationService.mode==="portrait"&&ei(!0):(o=Math.PI/2,n=t.height,s=t.width,e=t.minHeight,i=t.minWidth)),e>0&&i>0&&this.isMobileOrTablet?r=Math.min(window.innerWidth/e,window.innerHeight/i):r=Math.min(window.innerWidth/(e>0?e:n),window.innerHeight/s);const u=Math.ceil(n*r),h=Math.ceil(s*r);D.scale.set(r),D.rotation=o,this.isBothEnaled?(D.position.set(0,0),D.pivot.set(0,0)):D.position.set(u/2,h/2),W.resize(u,h);const f=(window.innerWidth-u)/2,S=(window.innerHeight-h)/2,m=t.canvas;m.style.marginLeft=f+"px",m.style.marginTop=S+"px",m.style.width=u+"px",m.style.height=h+"px",this.offsetX=f/r,this.offsetY=S/r,I.current&&(this.prevOrientation!=l&&this.isBothEnaled&&I.current.onOrientationChange(l),I.current.onSceneResize()),this.prevOrientation=l,this.scrollTop()}scrollTop(){const t=w;t.mobile&&(t.android&&!t.chrome?window.scrollTo(0,1):window.scrollTo(0,0))}get isBothEnaled(){return this.orientationService.mode==="both"||this.orientationService.mode==="portrait-only"}get isPortraitOnlyEnabled(){return this.orientationService.mode==="portrait-only"}get isNotMobile(){return!w.mobile&&!w.tablet}get isMobileOrTablet(){return w.mobile||w.tablet}get deviceViewportOffset(){const t=window.innerWidth,e=window.innerHeight;let i=v.width,n=v.height;const s=D.scale.x,r=new PIXI.Point;return this.isMobileOrTablet&&this.orientationService.getOrientation()===y.PORTRAIT&&(i=v.height,n=v.width),t<i*s&&(r.x=Math.floor((i*s-t)*(.5/s))),e<n*s&&(r.y=Math.floor((n*s-e)*(.5/s))),r}};Oi=zl([d({tag:"layoutService",category:"service"})],Oi);function ei(t){const e=document.getElementById("portraitonly");if(!e)return;const i=document.getElementById("portraitonlytext");if(i){let n="Please use portrait mode for the best experience.";try{Q("portraitonly")&&(n=Q("portraitonly"))}catch{}A(n)&&(n="Please use portrait mode for the best experience."),i.textContent=n}Jl(!t),e.style.visibility=t?"visible":"hidden"}function Jl(t){const e=document.getElementById("wrapper");e&&(e.style.visibility=t?"visible":"hidden")}var Ql=Object.defineProperty,Zl=Object.getOwnPropertyDescriptor,eh=(t,e,i,n)=>{for(var s=n>1?void 0:n?Zl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ql(e,i,s),s};const rs=0;let Ii=class extends F{constructor(){super(...arguments),this.fround=!1,this.json=!0}configure(e){this.appContext=T();let i=B.getApiBy("apiName")||"";this.service=(B.getApiBy("service")??"https://rslotservice.w88api.com/onlinecasino/")+i+"/"}startup(){this.player=R(),this.refreshTicket()}refreshTicket(){this.ticket=ze().toString()}send(e,i=!1){return this.refreshTicket(),e+="&ts="+this.ticket,he.request({id:this.ticket,url:e,method:"GET"}),i==!1&&this.appContext.startInactivityTimer(),new Promise((n,s)=>{_s(e).then(r=>r.responseText).then(r=>{let o=JSON.parse(r);o?(he.response({requestID:this.ticket,data:o}),o.isError?s({code:o.error,message:""}):n(o)):s({code:rs,message:"Unexpected Error"})}).catch(r=>{s({code:rs,message:"Unexpected Error"})})})}signIn(){if(A(this.appContext.OPERATOR))return new Promise((e,i)=>i({code:77,message:""}));if(this.isWebGLOnlyNotSupported)return new Promise((e,i)=>i({code:997,message:""}));if(this.appContext.FUNPLAY){let e=this.service+"User/GetFunPlayKey?op="+encodeURIComponent(this.appContext.OPERATOR);return this.send(e)}else{if(this.appContext.AUTHENTICATED==="1")return Promise.resolve({value:{sessionKey:this.appContext.TOKEN,memberName:this.player.accountName}});let e=this.service+"User/Authenticate?op="+encodeURIComponent(this.appContext.OPERATOR)+"&token="+encodeURIComponent(this.appContext.TOKEN);return this.send(e)}}getBalance(){let e=this.service+"User/GetBalance?token="+this.player.sessionKey+"&game="+this.appContext.ID+"&platform="+w.platform;return this.send(e)}getBets(){let e=this.service+"Game/GetBets/?game="+this.appContext.ID+"&key="+this.player.sessionKey;return this.send(e)}spin(e,i){let n=this.player.cheat||this.appContext.CHEAT,s=e.amount,r=e.multiplier;this.fround&&(s=this.player.froundBet,r=this.player.froundMul);let o=this.service+"Game/"+(this.fround?"FreeRound":"Spin")+"?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+s+(this.appContext.multiplierAsCreditBet?"&creditBet=":"&multiplier=")+r+(this.player.bonusBet?"&sidebet=1":"")+"&platform="+w.platform+(n?"&cheat="+n:"");return i&&i.forEach((l,u)=>{o+=`&${l.key}=${l.value}`}),this.player.cheat=void 0,this.send(o)}bonus(e,i){let n=this.player.cheat||this.appContext.CHEAT,s=this.service+"Game/BonusGame?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bonus="+e.key+"&param="+e.index+"&platform="+w.platform+(n?"&cheat="+n:"");return this.send(s)}jackpot(){if(!Ls())return new Promise((i,n)=>n({code:33,message:""}));let e=this.service+"Jackpot/GetAvailableJackpot?game="+this.appContext.ID+"&token="+this.player.sessionKey+"&platform="+w.platform;return this.send(e,!0)}claimFround(){let e=this.service+"Game/ClaimDailyFreeSpin?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+this.player.froundBet+"&multiplier="+this.player.froundMul+"&platform="+w.platform;return this.send(e)}custom(e,i){let n=this.service+"Game/"+e+"/?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&platform="+w.platform;return i&&i.forEach((s,r)=>{n+=`&${s.key}=${s.value}`}),this.send(n)}get isWebGLOnlyNotSupported(){return p.webGLOnly&&p.webGLOnly==="true"&&W.type!==PIXI.RENDERER_TYPE.WEBGL}};Ii=eh([d({tag:"netService",category:"service"})],Ii);let Ge;function th(){if(Ge===void 0)try{Ge=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{Ge=!1}return Ge}const os=[];class ih{constructor(e=!1){this.isXDR=!1,e&&th()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,os.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,n,s=!0){if(this.client.open("POST",e),n&&(this.client.responseType="json"),i&&s)return this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.send(i,!0);if(i&&!s)return this.client.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.send(i,!1)}afterDone(){this.isXDR&&Mt(os,this.client)}send(e,i=!0){return new Promise((n,s)=>{setTimeout(()=>{e?i||this.client.send(JSON.stringify(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?n(this.client):s(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),s(new Error("Request timeout"))},this.client.onerror=r=>{this.afterDone(),s(new Error(r.toString()))}})}}function sh(t,e,i,n=!0){return new ih(!0).post(t,e,i,n)}var nh=Object.defineProperty,rh=Object.getOwnPropertyDescriptor,oh=(t,e,i,n)=>{for(var s=n>1?void 0:n?rh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&nh(e,i,s),s};let Ci=class extends Ii{doubleUp(t){const e=`${this.service}Game/DoubleUp?game=${this.appContext.ID}&key=${this.player.sessionKey}&isLow=${t?"1":"0"}`;return this.send(e)}collectDoubleUp(){const t=`${this.service}Game/CollectDoubleUp?game=${this.appContext.ID}&key=${this.player.sessionKey}`;return this.send(t)}spin(t,e){this.refreshTicket();const i=w.platform,n=`${this.service}Game/Spin`,s=n+"?ts="+this.ticket;he.request({id:this.ticket,url:s,method:"POST"});const r={game:this.appContext.ID,key:this.player.sessionKey,bet:t,odds:e,platform:i},o=this.player.cheat||this.appContext.CHEAT;return o&&(r.cheat=o),new Promise((l,u)=>{sh(n,r,!1,!1).then(h=>h.responseText).then(h=>{const f=JSON.parse(h);f?(he.response({requestID:this.ticket,data:f}),f.isError?u({code:f.error,message:""}):l(f)):u({code:0,message:"Unexpected Error"})}).catch(h=>{u({code:0,message:"Unexpected Error"})})})}};Ci=oh([d({tag:"netService",category:"service"})],Ci);var ah=Object.defineProperty,lh=Object.getOwnPropertyDescriptor,hh=(t,e,i,n)=>{for(var s=n>1?void 0:n?lh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ah(e,i,s),s};let It=class extends X{constructor(){super(...arguments),this._betCountMap={}}get betCountData(){const t=[];for(const e in this._betCountMap){const i=this._betCountMap[e];i>0&&t.push({bet:Number(e),volume:i})}return t}getBetButton(t){return this[`bet${t}`]}onBet(t,e){const i=this._betCountMap[e]||0;this._betCountMap[e]=i+1,this.refresh(),t.sparkle.visible||(t.sparkle.visible=!0,t.sparkle.play(1).then(()=>{t.sparkle.visible=!1}))}onClearBet(){this._betCountMap={},this.refresh()}refresh(){for(let t=2;t<=9;t++){const e=this.getBetButton(t),i=this._betCountMap[t]||0;e.box.bet.visible=i==0,e.box.amount.visible=i>0,e.box.amount.label.value=`${i}`}}showWinFrame(t){for(const e of t){const i=this.getBetButton(e.symbol);i.winFrame.setAnimation(0,"winFrame",!0),i.winFrame.setVisibleAnimated(!0)}}hideWinFrame(){for(let t=2;t<=9;t++)this.getBetButton(t).winFrame.setVisibleAnimated(!1)}static create(t,e){const i=new It;return Y(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i.refresh(),i}};It=hh([d({tag:"betPanel",category:"component"})],It);var uh=Object.defineProperty,ch=Object.getOwnPropertyDescriptor,dh=(t,e,i,n)=>{for(var s=n>1?void 0:n?ch(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&uh(e,i,s),s};let Ct=class extends X{get beamLAngle(){return this._beamLAngle||(this._beamLAngle=this.argument1.split(",").map(t=>Number(t))),this._beamLAngle}get beamPAngle(){return this._beamPAngle||(this._beamPAngle=this.argument2.split(",").map(t=>Number(t))),this._beamPAngle}get beamAngle(){return this.orientation==y.LANDSCAPE?this.beamLAngle:this.beamPAngle}init(){}showBonus1(t){const e=this.bonus1.animation;return e.state.setAnimation(0,"bonusAL_entry",!1),e.state.addAnimation(0,"bonusAL_idle",!0,0),this.bonus1.setVisibleAnimated(!0),q(2e3).then(()=>this.showBeams(t).then(()=>(e.state.setAnimation(0,"bonusAL_exit",!1),q(1e3))))}showBonus2(t){return new Promise(e=>{const i=this.bonus2.getSlotContainerByName("FS_AMT");i.removeChildren(),i.addChild(this.multiperLayer[`_${t}`]),this.bonus2.setAnimation(0,"bonusBL",!1);const n=this.bonus2.addCompleteListener(()=>{this.bonus2.removeCompleteListener(n),e()});this.bonus2.setVisibleAnimated(!0)})}onOrientationChanged(t){this.orientation=t}getBeam(t){return this.beams[`beam${t}`]}showBeams(t){const e=this.beamAngle;for(let i=0;i<t.length;i++){const n=t[i],s=this.getBeam(i);s.setVisibleAnimated(!0),s.rotation=e[n.index]*Math.PI/180}return q(2e3).then(()=>{for(let i=0;i<t.length;i++)this.getBeam(i).setVisibleAnimated(!1)})}static create(t,e){const i=new Ct;return Y(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i.init(),i}};Ct=dh([d({tag:"bonusEffect",category:"component"})],Ct);var ph=Object.defineProperty,fh=Object.getOwnPropertyDescriptor,mh=(t,e,i,n)=>{for(var s=n>1?void 0:n?fh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&ph(e,i,s),s};let Et=class extends X{setRandomNumberValue(t){const e=t??ot(15,1);this.multiper.label.value=`${e}`,this.setMultiperBgStatus(e)}onBig(){this.selected="big",this.bet()}onSmall(){this.selected="small",this.bet()}toStop(t){return this.setRandomNumberValue(t),E.remove(this),oe(500)}bet(){this.setSmallBigBtnStatus(),E.add(this)}show(){this.reset(),this.visible=!0,Ue(this,500,()=>{},1)}hide(){this.visible&&Ni(this,500,()=>{this.visible=!1})}lose(t){this._disable=t,this.selected=void 0,this.setSmallBigBtnStatus()}reset(){this.selected=void 0,this.lose(!1),this.setRandomNumberValue(0)}setMultiperBgStatus(t){this.multiper.bgSlide.goto(t>7?"pink":t>0&&t<=7?"green":"blue")}setSmallBigBtnStatus(){const t=this._disable?"disable":"default";this.smallSlide.goto(this.selected==="small"?"highlight":t),this.bigSlide.goto(this.selected==="big"?"highlight":t)}advanceTime(t){return this.setRandomNumberValue(),!0}static create(t,e){const i=new Et;return Y(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i}};Et=mh([d({tag:"doubleSelecter",category:"component"})],Et);const gh=1,vh=0,bh=[.11,.1,.09,.08,0],ti=[0,6,17,26,38],yh=[1,4,9,18,8.2],wh=[20,40,80,200,0],as={defaultUp:(t,e,i)=>1/2*e*i*i+t*i,up:(t,e,i,n)=>{if(i=i/1e3,n=n/1e3,i==0)return 0;const s=(e-t)/i;return t*n+s*n*n/2},down:(t,e,i,n)=>{if(i=i/1e3,n=n/1e3,i==0)return 0;const s=(t-e)/i;return t*n-s*n*n/2}};function xh(t,e="components/"){return B.resolve("@atlas/"+e+t+".png")}function Sh(){const t=[];for(let e=1;e<=14;e++)t.push(xh("coin_"+e));return t}const Ph={alpha:{start:1,end:1},scale:{start:.2,end:1,minimumScaleMultiplier:1},color:{start:"#e6e6e6",end:"#ffffff"},speed:{start:900,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:2400},maxSpeed:0,startRotation:{min:230,max:310},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:1.2,max:1.2},blendMode:"normal",frequency:.08,emitterLifetime:-1,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:0,h:0}};class _h{constructor(e){this.data=e}get symbolInfo(){return this.data.value.wheelStopPosition}get isBonus(){return this.isBonus1||this.isBonus2}get isBonus1(){return this.symbolInfo.symbol==gh}get isBonus2(){return this.symbolInfo.symbol==vh}get bonusSymbolInfos(){return this.data.value.wheelBonusStopPosition}get isExistWin(){return this.win>0}get win(){return this.data.value.win}}var Oh=Object.defineProperty,Ih=Object.getOwnPropertyDescriptor,kt=(t,e,i,n)=>{for(var s=n>1?void 0:n?Ih(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Oh(e,i,s),s};let Ve=class extends $e{onCreated(){super.onCreated(),this.initFooterLabels(),this.onSceneResize(),this.initCommand(),this.updateBetAmount(),this.updateFooterBar(),this.initBetSelection()}exit(){super.exit(),C.off("infoPage"),C.off("spin"),C.off("betSelection")}onSpin(){}initCommand(){C.on("infoPage",()=>{I.replace("infoPage")}),C.on("spin",this.onSpin.bind(this)),C.on("betSelection",()=>this.clickBetSelectionHandler())}initFooterLabels(){this.betAmount=this.footerBar.getComponentByID("betAmount")}checkDeviceResize(e){b.get("orientationService").getOrientation()==y.PORTRAIT?(this.btnMenu.y=v.width-e.y-120,this.footerBar.panels.y=this.selectionPanel.y=v.width-e.y-1060,this.selectionPanel.y=v.width-e.y-1060):(this.btnMenu.y=v.height-e.y-40,this.footerBar.panels.y=this.selectionPanel.y=v.height-e.y-640,this.selectionPanel.y=v.height-e.y-640),this.btnMenu.x=e.x+40,this.menu.y=-e.y}setComponentsPositions(e){b.get("orientationService").getOrientation()==y.PORTRAIT?this.menu.buttonCloseLandscape.x=this.menu.buttonClosePortrait.x=(v.height-e.x-40)*1.5:this.menu.buttonCloseLandscape.x=this.menu.buttonClosePortrait.x=(v.width-e.x-40)*1.5,this.footerBar.timebox.position.set(-e.x,e.y)}onSceneResize(){const e=b.get("layoutService"),i={x:-Math.min(0,e.offsetX),y:-Math.min(0,e.offsetY)};this.setComponentsPositions(i),this.checkDeviceResize(i)}animateFooterBar(e){this.updateTotalBet(),this.animateBalanceAmount()}updateFooterBar(e){this.updateTotalBet(),this.updateBalanceAmount()}animateBalanceAmount(e){this.footerBar.animateBalance(e||this.player.balance)}updateBalanceAmount(e){this.footerBar.updateBalance(e||this.player.balance)}updateTotalBet(){this.footerBar.updateTotalBet(this.player.displayedTotalBet)}updateBetAmount(){this.betAmount&&(this.betAmount.value=se(this.player.displayedBetAmount))}betChangedHandler(e){this.player.betValueIndex=e,this.updateTotalBet(),this.updateBalanceAmount(),this.updateBetAmount()}betSelectionVisibilityHandler(e){}clickBetSelectionHandler(){this.selectionPanel.betSelection&&(this.selectionPanel.betSelection.visible?this.selectionPanel.betSelection.close():this.selectionPanel.betSelection.open())}initBetSelection(){this.selectionPanel.betSelection.setValues(this.player.betValues.concat(),this.player.betValueIndex),this.selectionPanel.betSelection.on($s,e=>this.betChangedHandler(e)),this.selectionPanel.betSelection.on(_i,e=>this.betSelectionVisibilityHandler(e)),this.updateTotalBet()}};kt([Se("netService")],Ve.prototype,"netService",2);kt([$t("context")],Ve.prototype,"context",2);kt([Se("layoutService")],Ve.prototype,"layoutService",2);kt([$t("user")],Ve.prototype,"player",2);var Ch=Object.defineProperty,Eh=Object.getOwnPropertyDescriptor,Th=(t,e,i,n)=>{for(var s=n>1?void 0:n?Eh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Ch(e,i,s),s};let Ei=class extends Ve{constructor(t){super(t),this.gameStatus="idle",this.statusOrder=[],this._soundSpinning=null}onCreated(){super.onCreated(),this.reel.spinStopHandler=this.handleStoped.bind(this),this.showMessage("Please Spin"),this.menu.init(this.context),this.initMainBGM()}onBet(t,e){this.gameStatus=="idle"&&this.betPanel.onBet(t,e)}onClearBet(){this.betPanel.onClearBet()}onSpin(){const t=this.betPanel.betCountData;t.length>0?this.reel.showBoxSpineOnce().then(()=>{M("spin_button"),this.netService.spin(.1,t).then(this.spinServiceHandler.bind(this)),this.statusOrder.push("spinning"),this.nextStatus()}):M("button")}onCollectDoubleUp(){this.netService.collectDoubleUp().then(t=>{this.showWin(t.value.win)})}onBig(){this.doubleSelecter.onBig(),this.handleDoubleUp(!1)}onSmall(){this.doubleSelecter.onSmall(),this.handleDoubleUp(!0)}onOpenMenu(){this.menu.open()}handleBonus(){this.netService.bonus({key:"",step:1,index:0})}handleDoubleUp(t){this.netService.doubleUp(t).then(e=>{this.doubleSelecter.toStop(e.value.doubleUpValue).then(()=>{e.value.isWinDoubleUp?(M("Double_up_win"),this.showWinAmount(e.value.win,500).then(()=>oe(500)).then(()=>{e.value.doubleUpCount<5?this.doubleSelecter.reset():this.showWin(e.value.win)})):(M("Double_up_lose"),this.showMessage("You Lose"),this.doubleSelecter.lose(!0),this.hideCollectButton(),this.nextStatus())})})}handleStoped(){this.stopSoundSpinning(),M("reel_stop"),oe(300).then(()=>{this.rspModel.win>0?this.rspModel.isBonus?M("high_win","default",!0):M("normal_win","default",!0):M("no_win","default",!0)}),this.gameStatus=="stopping"?this.reel.showSpinStoped(this.rspModel.symbolInfo):this.reel.showSpinStoped(this.rspModel.bonusSymbolInfos[0]),oe(500).then(()=>{this.statusOrder=[],this.gameStatus=="stopping"?this.rspModel.isBonus1?this.statusOrder.push("showWinBonus1"):this.rspModel.isBonus2&&this.statusOrder.push("showWinBonus2","reSpinning","reStopping"):this.gameStatus=="reStopping",this.rspModel.isExistWin&&this.statusOrder.push("selectDouble"),this.statusOrder.push("idle"),this.nextStatus()})}spinServiceHandler(t){const e=new _h(t);this.rspModel=e,this.statusOrder.push("stopping"),this.nextStatus()}nextStatus(){const t=this.statusOrder.shift();if(t)switch(this.gameStatus=t,this.gameStatus){case"idle":{this.stopBgmLayer(),this.betPanel.onClearBet(),this.setButtonStatus(),this.betPanel.hideWinFrame(),this.doubleSelecter.hide(),this.hideCollectButton();break}case"spinning":{this.playSoundSpinning(),this.showMessage("Good Luck"),this.reel.onSpin(!1),this.doubleSelecter.hide(),this.reel.showWinSymbols([]),this.setButtonStatus();break}case"reSpinning":{this.reel.showWinSymbols([]),this.playSoundSpinning(),M("spin_button"),this.showMessage("Good Luck"),this.reel.onSpin(!0),this.doubleSelecter.hide();break}case"stopping":{this.reel.toStop(this.rspModel.symbolInfo);break}case"reStopping":{this.reel.toStop(this.rspModel.bonusSymbolInfos[0]);break}case"showWinBonus1":{q(1e3).then(()=>{this.reel.showWinSymbols([]),q(300).then(()=>{M("bonus_Multiselect_win","default",!0),this.bonusEffect.showBonus1(this.rspModel.bonusSymbolInfos).then(()=>{this.nextStatus()}),q(2e3).then(()=>{this.reel.showWinSymbols(this.rspModel.bonusSymbolInfos)})})});break}case"showWinBonus2":{this.showMessage("YOU WON A RESPIN"),q(1e3).then(()=>{q(300).then(()=>{M("bonus_Multiplier_win","default",!0),this.bonusEffect.showBonus2(this.rspModel.bonusSymbolInfos[0].multiplier).then(()=>{this.nextStatus(),oe(2e3).then(this.nextStatus.bind(this))})})});break}case"selectDouble":{this.playBgmLayer(),this.showCollectButton(),this.showWinAmount(this.rspModel.win,500),this.doubleSelecter.show(),this.rspModel.bonusSymbolInfos.length>0?this.betPanel.showWinFrame(this.rspModel.bonusSymbolInfos):this.betPanel.showWinFrame([this.rspModel.symbolInfo]);break}}}setButtonStatus(){this.spinButton.enabled=this.gameStatus=="idle",this.clearButton.enabled=this.gameStatus=="idle"}showMessage(t){this.infoBar.message.value=t,this.infoBar.message.visible=!0,this.infoBar.amount.visible=!1}showWinAmount(t,e){return this.infoBar.message.visible=!1,this.infoBar.amount.visible=!0,this.infoBar.amount.duration=e,this.infoBar.amount.value=`${t}`,oe(e)}onOrientationChange(t){super.onOrientationChange(t),this.reel.onOrientationChanged(t),this.bonusEffect.onOrientationChanged(t)}showCollectButton(){this.spinButton.visible=!1,this.collectButton.visible=!0}hideCollectButton(){this.spinButton.visible=!0,this.collectButton.visible=!1}showWin(t){const e=new Decimal(t),i=new Decimal(.1),n=e.div(i).toNumber();let s=0;if(e.gt(0)){for(let r=ti.length-1;r>=0;r--)if(n>=ti[r]){s=r;break}s==ti.length-1?(M("big_win","default",!0),this.winPanel.showWin(e.toNumber()).then(()=>{this.nextStatus()})):(this.winPanel.playWinEffect(s),this.winmeterSound=M(`winmeter${s+1}`,"default",!0),oe(yh[s]*1e3).then(()=>{this.winPanel.removeWinEffect(),this.nextStatus()})),this.showMessage(`you collect ${e}`)}}fade(t,e,i,n=500,s=0,r){const o=b.get("soundService");if(i&&i.volume===e)return o.setVolume(e,i.soundId),null;const l={volume:t},u=i?i.soundId:void 0,h=new TWEEN.Tween(l).to({volume:e},n).onUpdate(()=>{o.setVolume(l.volume,u)}).onComplete(()=>{i&&(i.volume=l.volume),r&&r()}).delay(s);return h.start(),h}initMainBGM(){if(w.isUCBrowser)return;const t=b.get("soundService");t.stopBgm(),t.volume=0,this.bgmMain=M("bgm-main","default",!0),this.playMainBGM(),oe(200).then(()=>{t.volume=1,t.setVolume(1,this.bgmMain.soundId),this.bgmMain.volume=1})}playMainBGM(t=500){if(!this.bgmMain||w.isUCBrowser)return;const e=b.get("soundService");this.bgmMain.volume===0?(e.setVolume(0,this.bgmMain.soundId),this.bgmMain.volume=0,this.fade(0,1,this.bgmMain,t)):(e.setVolume(1,this.bgmMain.soundId),this.bgmMain.volume=1)}stopMainBGM(t,e=500){if(!this.bgmMain||w.isUCBrowser)return;const i=b.get("soundService");this.bgmMain.volume===1?(i.setVolume(1,this.bgmMain.soundId),this.bgmMain.volume=1,this.fade(1,0,this.bgmMain,e)):(i.setVolume(0,this.bgmMain.soundId),this.bgmMain.volume=0)}playSoundSpinning(){w.isUCBrowser||(this._soundSpinning=M("reelspinningbgm","default",!0))}stopSoundSpinning(){this._soundSpinning&&(Qe(this._soundSpinning),this._soundSpinning=null)}playBgmLayer(){w.isUCBrowser||(this._soundSpinning=M("bgm-main-layer","default",!0))}stopBgmLayer(){this._soundSpinning&&(Qe(this._soundSpinning),this._soundSpinning=null)}};Ei=Th([d({tag:"main",category:"scene"})],Ei);class Lh{constructor(){this.pathL=[{x:0,y:0},{x:522,y:0},{x:522,y:336},{x:0,y:336}],this.pathP=[{x:0,y:0},{x:336,y:0},{x:336,y:522},{x:0,y:522}],this._pathNodeLengthL=[],this._pathNodeLengthP=[]}calPathLength(e){let i=0;const n=[];for(let s=0;s<e.length;s++){const r=e[s],o=e[(s+1)%e.length],l=Math.sqrt((o.x-r.x)**2+(o.y-r.y)**2);i+=l,n.push(i)}return[i,n]}getPathLengthL(){return this._pathLengthL||([this._pathLengthL,this._pathNodeLengthL]=this.calPathLength(this.pathL)),this._pathLengthL}getPathLengthP(){return this._pathLengthP||([this._pathLengthP,this._pathNodeLengthP]=this.calPathLength(this.pathP)),this._pathLengthP}getPointAndSpeedVectorWith(e,i,n){let s,r;return e<i[0]?(s={x:e+n[0].x,y:n[0].y},r={x:1,y:0}):e<i[1]?(s={x:n[1].x,y:e-i[0]},r={x:0,y:-1}):e<i[2]?(s={x:n[2].x-(e-i[1]),y:n[2].y},r={x:-1,y:0}):(s={x:n[3].x,y:n[3].y-(e-i[2])},r={x:0,y:1}),[s,r]}getPointAndSpeedVector(e,i){const n=i==y.LANDSCAPE?this._pathNodeLengthL:this._pathNodeLengthP,s=i==y.LANDSCAPE?this.pathL:this.pathP;return this.getPointAndSpeedVectorWith(e,n,s)}getPathLength(e){return e==y.LANDSCAPE?this.getPathLengthL():this.getPathLengthP()}update(e,i,n){const s=this.getPathLength(n),r=i%s,[o,l]=this.getPointAndSpeedVector(r,n);return{point:o,speedVector:l,speed:e,offsetInPathPct:r/s}}}class Ah extends Lh{constructor(){super(...arguments),this.halfWidth=38}calPolygonPath(e,i,n){const s=[],r=n==y.LANDSCAPE?this.pathL:this.pathP,o=this.getPathLength(n),l=TWEEN.Easing.Circular.In(e.speed/2e3)*250,u=(i-l-this.halfWidth+o)%o,[h,f]=this.getPointAndSpeedVector(u,n),S=f.x!=e.speedVector.x||f.y!=e.speedVector.y,m=[],_=[],x=[];return e.speedVector.x==1?(m.push({x:e.point.x-this.halfWidth,y:e.point.y-this.halfWidth},{x:e.point.x-this.halfWidth,y:e.point.y+this.halfWidth}),S?(_.push({x:r[0].x-this.halfWidth,y:r[0].y-this.halfWidth},{x:r[0].x+this.halfWidth,y:r[0].y+this.halfWidth}),x.push({x:h.x-this.halfWidth,y:h.y},{x:h.x+this.halfWidth,y:h.y}),x[0].y=Math.max(x[0].y,_[1].y),x[1].y=Math.max(x[1].y,_[1].y)):x.push({x:h.x,y:h.y-this.halfWidth},{x:h.x,y:h.y+this.halfWidth})):e.speedVector.y==-1?(m.push({x:e.point.x+this.halfWidth,y:e.point.y-this.halfWidth},{x:e.point.x-this.halfWidth,y:e.point.y-this.halfWidth}),S?(_.push({x:r[1].x+this.halfWidth,y:r[1].y-this.halfWidth},{x:r[1].x-this.halfWidth,y:r[1].y+this.halfWidth}),x.push({x:h.x,y:h.y-this.halfWidth},{x:h.x,y:h.y+this.halfWidth}),x[0].x=Math.min(x[0].x,_[1].x),x[1].x=Math.min(x[1].x,_[1].x)):x.push({x:h.x+this.halfWidth,y:h.y},{x:h.x-this.halfWidth,y:h.y})):e.speedVector.x==-1?(m.push({x:e.point.x+this.halfWidth,y:e.point.y+this.halfWidth},{x:e.point.x+this.halfWidth,y:e.point.y-this.halfWidth}),S?(_.push({x:r[2].x+this.halfWidth,y:r[2].y+this.halfWidth},{x:r[2].x-this.halfWidth,y:r[2].y-this.halfWidth}),x.push({x:h.x+this.halfWidth,y:h.y},{x:h.x-this.halfWidth,y:h.y}),x[0].y=Math.min(x[0].y,_[1].y),x[1].y=Math.min(x[1].y,_[1].y)):x.push({x:h.x,y:h.y+this.halfWidth},{x:h.x,y:h.y-this.halfWidth})):(m.push({x:e.point.x-this.halfWidth,y:e.point.y+this.halfWidth},{x:e.point.x+this.halfWidth,y:e.point.y+this.halfWidth}),S?(_.push({x:r[3].x-this.halfWidth,y:r[3].y+this.halfWidth},{x:r[3].x+this.halfWidth,y:r[3].y-this.halfWidth}),x.push({x:h.x,y:h.y+this.halfWidth},{x:h.x,y:h.y-this.halfWidth}),x[0].x=Math.max(x[0].x,_[1].x),x[1].x=Math.max(x[1].x,_[1].x)):x.push({x:h.x-this.halfWidth,y:h.y},{x:h.x+this.halfWidth,y:h.y})),S?s.push(m[0],_[0],...x,_[1],m[1]):s.push(m[0],...x,m[1]),s}update(e,i,n){const s=super.update(e,i,n);return s.path=this.calPolygonPath(s,i,n),s}}var Bh=Object.defineProperty,Dh=Object.getOwnPropertyDescriptor,Nh=(t,e,i,n)=>{for(var s=n>1?void 0:n?Dh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Bh(e,i,s),s};let Tt=class extends X{constructor(){super(...arguments),this.boxStatus=["idle","idle","idle"],this.respin=!1,this.spinTime=0,this.symbolInSpinTweenMap={}}get symbolOffsetL(){return this.argument1}get symbolOffsetP(){return this.argument2}initIndex(t){this.spinAnimation.index=t,this.onUpdate()}init(t){this.spinAnimation=new Mh(t),this.setColorBox(!1)}onUpdate(){const t=this.spinAnimation.onUpdate(this.spinTime),e=t.speed/40,i=this.spinAnimation.onUpdate(this.spinTime-e),n=t.speed/40*2,s=this.spinAnimation.onUpdate(this.spinTime-n),r=[this.colorBox.box0,this.colorBox.box1,this.colorBox.box2],o=[t,i,s];for(let l=0;l<o.length;l++){const u=o[l],h=r[l];h.position.set(u.point.x,u.point.y),u.speed>0?(u.speed>this.spinAnimation.maxSpeed*.7&&this.boxStatus[l]=="idle"?(h.spine.setAnimation(0,this.respin?"bonusSpin_arrow":"normalSpin_arrow",!0),this.boxStatus[l]="tail"):u.speed<=this.spinAnimation.maxSpeed*.7&&this.boxStatus[l]=="tail"&&(h.spine.setAnimation(0,this.respin?"bonusSpin_arrow_noTrail":"normalSpin_arrow_noTrail",!0),this.boxStatus[l]="idle"),h.spine.animated||(h.spine.setAnimation(0,this.respin?"bonusSpin_arrow_noTrail":"normalSpin_arrow_noTrail",!0),this.boxStatus[l]="idle",h.default.visible=!1,h.spine.setVisibleAnimated(!0))):(h.default.visible=!0,h.spine.setVisibleAnimated(!1)),h.spine.rotation=Math.PI/2*(u.speedVector.x==1?0:u.speedVector.x==-1?2:u.speedVector.y==1?3:1)}for(let l=0;l<this.spinAnimation.symbols.length;l++){const u=this.spinAnimation.symbols[l],h=u.pct;if(h-t.offsetInPathPct<.02&&(h-t.offsetInPathPct>0||h-t.offsetInPathPct<-.98)){this.symbolInSpinTweenMap[l]||(this.symbolInSpinTweenMap[l]=u),u.playOnce().then(()=>{delete this.symbolInSpinTweenMap[l]});break}}t.stop&&(r[1].position.set(t.point.x,t.point.y),r[2].position.set(t.point.x,t.point.y),this.onEndSpin())}advanceTime(t){return this.spinTime+=t*PIXI.Ticker.shared.elapsedMS,this.onUpdate(),!0}setColorBox(t){this.colorBox=t?this.container.yellowBox:this.container.blueBox,this.container.yellowBox.visible=!1,this.container.blueBox.visible=!1}onSpin(t){this.respin=t,this.setColorBox(t),this.colorBox.visible=!0,E.add(this)}toStop(t){this.spinAnimation.toStop(t,this.spinTime)}onEndSpin(){E.remove(this),this.spinTime=0,this.spinStopHandler()}showBoxSpineOnce(){for(const t of[0,1,2]){const e=this.colorBox[`box${t}`];e.default.visible=!1,e.spine.setAnimation(0,this.respin?"bonusSpin_winfx":"normalSpin_winfx",!1),e.spine.setVisibleAnimated(!0)}return this.colorBox.visible=!0,q(300).then(()=>{for(const t of[0,1,2])this.colorBox[`box${t}`].spine.setVisibleAnimated(!1)})}showSpinStoped(t){for(const e of[0,1,2]){const i=this.colorBox[`box${e}`];i.default.visible=!1,i.spine.setAnimation(0,this.respin?"bonusSpin_winfx":"normalSpin_winfx",!0),i.spine.setVisibleAnimated(!0)}q(900).then(()=>{for(const e of[0,1,2])this.colorBox[`box${e}`].spine.setVisibleAnimated(!1);this.colorBox.visible=!1,this.showWinSymbols([t])})}showWinSymbols(t){const e=t.length>0,i={};for(const n of t){const s=i[n.index];s?i[n.index]=s+n.multiplier:i[n.index]=n.multiplier}for(const n of this.spinAnimation.symbols)n.showWinFrame(!1),n.tint=e?8947848:16777215;for(const n in i){const s=this.spinAnimation.symbols[n];s.tint=16777215;const r=i[n];s.showWinFrame(!0,r)}}onOrientationChanged(t){this.orientation=t,this.spinAnimation.onOrientationChanged(t),this.onUpdate()}static create(t,e){const i=new Tt;Y(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e);const n=[],s=[];for(let l=0;l<i.symbols.children.length;l++){const u=i.symbols[`s${l}`];n.push(u),s.push(u)}const r=n.splice(0,i.symbolOffsetL),o=s.splice(0,i.symbolOffsetP);return i.init({symbolsL:[...n,...r],symbolsP:[...s,...o],spinStartSpeed:a(t,"spinStartSpeed"),spinEndSpeed:a(t,"spinEndSpeed"),maxSpeed:a(t,"maxSpeed"),speedUpTime:a(t,"speedUpTime"),speedDownTime:a(t,"speedDownTime")}),i}};Tt=Nh([d({tag:"reel",category:"component"})],Tt);class Mh{constructor(e){this.index=0,this.willStopIndex=0,this.animator=new Ah,this.symbolsL=e.symbolsL,this.symbolsP=e.symbolsP,this.spinStartSpeed=e.spinStartSpeed,this.spinEndSpeed=e.spinEndSpeed,this.maxSpeed=e.maxSpeed,this.speedUpTime=e.speedUpTime,this.speedDownTime=e.speedDownTime}get symbols(){return this.orientation==y.LANDSCAPE?this.symbolsL:this.symbolsP}getSpeedUpOffset(e){return as.up(this.spinStartSpeed,this.maxSpeed,this.speedUpTime,e)}getSpeedDownOffset(e){return as.down(this.maxSpeed,this.spinEndSpeed,this.speedDownTime,e)}get currentIndexOffset(){return this.symbols[this.index].pct*this.animator.getPathLength(this.orientation)}getMoveDistanceAndSpeed(e){let i=0,n=this.spinStartSpeed,s=!1;if(e<this.speedUpTime)i=this.getSpeedUpOffset(e),n=this.spinStartSpeed+(this.maxSpeed-this.spinStartSpeed)*(e/this.speedUpTime);else if(e>this.stopedTime-this.speedDownTime){let r=e-this.stopedTime+this.speedDownTime;e>this.stopedTime&&(r=this.speedDownTime,s=!0),n=(this.maxSpeed-this.spinEndSpeed)*((this.speedDownTime-r)/this.speedDownTime),i=this.getSpeedUpOffset(this.speedUpTime)+(this.stopedTime-this.speedUpTime-this.speedDownTime)/1e3*this.maxSpeed+this.getSpeedDownOffset(r)}else n=this.maxSpeed,i=this.getSpeedUpOffset(this.speedUpTime)+(e-this.speedUpTime)/1e3*this.maxSpeed;return i+=this.currentIndexOffset,this.animator.update(n,i,0),s&&(this.index=this.willStopIndex),[i,n,s]}getRandomSymbol(e){const i=[],n=[];for(let r=0;r<this.symbols.length;r++){const o=this.symbols[r];o.index===e&&(i.push(o),n.push(r))}const s=ot(i.length);return[i[s],n[s]]}toStop(e,i){this.willStopIndex=e.index;const n=this.symbols[e.index],s=this.animator.getPathLength(this.orientation),r=s*n.pct+(this.animator.getPathLength(this.orientation)-this.currentIndexOffset),o=Math.ceil(Math.max(this.getMoveDistanceAndSpeed(i)[0],this.getSpeedUpOffset(this.speedUpTime)+this.getSpeedDownOffset(this.speedDownTime))/s)*s+r;this.stopedTime=(o-this.getSpeedUpOffset(this.speedUpTime)-this.getSpeedDownOffset(this.speedDownTime))/this.maxSpeed*1e3+this.speedUpTime+this.speedDownTime}onOrientationChanged(e){this.orientation=e}onUpdate(e){const[i,n,s]=this.getMoveDistanceAndSpeed(e),r=this.animator.update(n,i,this.orientation);return r.stop=s,r}}var Rh=Object.defineProperty,Wh=Object.getOwnPropertyDescriptor,Uh=(t,e,i,n)=>{for(var s=n>1?void 0:n?Wh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Rh(e,i,s),s};let Ti=class extends $e{onContinue(){I.replace("main")}onCreated(){super.onCreated(),C.on("continueClickHandler",this.onContinue.bind(this))}exit(){super.exit(),C.off("continueClickHandler",this.onContinue.bind(this))}onLeft(){}onRight(){}};Ti=Uh([d({tag:"splash",category:"scene"})],Ti);var $h=Object.defineProperty,Hh=Object.getOwnPropertyDescriptor,Vh=(t,e,i,n)=>{for(var s=n>1?void 0:n?Hh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&$h(e,i,s),s};let Lt=class extends X{constructor(e){super(),this.index=e.s}init(){const e=this.spine.getSlotContainerByName("glow");e.removeChildren(),e.addChild(this.symbol2),this.symbol2.blendMode="add";const i=this.spine.getSlotContainerByName("symbol");i.removeChildren(),i.addChild(this.symbol1)}playOnce(){return new Promise(e=>{this.spine.animated=!0,this.spine.setAnimation(0,"symbol_grow",!1),this.spine.addCompleteListener((i,n)=>{this.spine.animated=!1,this.spine.animation.state.clearListeners(),e()})})}play(){this.spine.setAnimation(0,"symbol_grow",!0),this.spine.animated=!0}stop(){this.spine.animated=!1,this.spine.resetTrackTime()}showWinFrame(e,i=0){e?(this.winFrame.multiper.value=`x${i}`,this.winFrame.visible=!0,this.winFrame.multiper.visible=!!i&&i>1,this.play(),this.spine.scale.set(.5),this.parent.setChildIndex(this,this.parent.children.length-1)):(this.winFrame.visible=!1,this.stop(),this.spine.scale.set(.33))}set tint(e){this.symbol1.tint=this.symbol2.tint=e}onOrientationChange(e){super.onOrientationChange(e),this.pct=e==y.LANDSCAPE?Number(this.argument1):Number(this.argument2)}static create(e,i){const n=new Lt({s:a(e,"s")});return Y(e,{scene:i.scene,parent:n,context:i.context}),N(n,e,i),n.init(),n}};Lt=Vh([d({tag:"symbol",category:"component"})],Lt);const Fh=.001;class jh{constructor(e,i,n,s=Fh,r=30){this.parent=e,this.speed=s;const o=new PIXI.Container,l=[{textures:i,framerate:r,loop:!0}];this.emitter=new PIXI.particles.Emitter(o,PIXI.particles.upgradeConfig(n,l)),this.emitter.emit=!1,e.addChild(o),E.add(this)}show(e){this.emitter&&(this.emitter.maxParticles=wh[e],this.emitter.frequency=bh[e],this.elapsed=Date.now(),this.emitter.emit=!0)}stop(){this.emitter.emit=!1}destroy(){E.remove(this),this.emitter.destroy(),this.emitter.cleanup(),this.emitter=null,this.parent.removeChildren()}advanceTime(e){if(!this.emitter&&this.emitter.emit)return!0;const i=Date.now();return this.emitter.update((i-this.elapsed)*this.speed),this.elapsed=i,!0}}var Gh=Object.defineProperty,kh=Object.getOwnPropertyDescriptor,Xh=(t,e,i,n)=>{for(var s=n>1?void 0:n?kh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(s=(n?o(e,i,s):o(s))||s);return n&&s&&Gh(e,i,s),s};let At=class extends X{constructor(){super()}init(){this.coinsEmitter=new jh(this.coinsLayer,Sh(),Ph,.0012)}showWin(t){const e=this.spine.getSlotContainerByName("AMT");return this.spine.setAnimation(0,"youwinL_entry",!1),this.spine.addAnimation(0,"youwinL_idle",!0),e.removeChildren(),q(1e3).then(()=>{e.addChild(this.amount),this.amount.duration=2e3,this.amount.value=`${t}`}),this.spine.setVisibleAnimated(!0),this.visible=!0,q(4e3).then(()=>(this.spine.setAnimation(0,"youwinL_exit",!1),q(2e3).then(()=>{this.visible=!1,this.spine.setVisibleAnimated(!1),this.amount.value="0"})))}playWinEffect(t){this.visible=!0,this.coinsEmitter.show(t)}removeWinEffect(){this.coinsEmitter.stop(),this.visible=!1}static create(t,e){const i=new At;return Y(t,{scene:e.scene,parent:i,context:e.context}),N(i,t,e),i.init(),i}};At=Xh([d({tag:"winPanel",category:"component"})],At);Rt([Oi,mt,gt,we,vt,Pt,ut,We,ft,De,ye,yt,Re,at,le,be,X,xe,Si,Ci,_t,lt,st,pt,ct,dt,ht,$]);Rt([Ti,Ei,It,Tt,Lt,Et,Ct,At]);ha();
