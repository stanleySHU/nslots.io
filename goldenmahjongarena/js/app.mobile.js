function oe(t){return t!=null}function V(t){return t==null}function Cr(t){return typeof t=="string"}function Oo(t){return typeof t=="function"}function Lo(t){return Oo(t)}function Tr(t){return Array.isArray(t)}function Ao(t){return Object.keys(t).length===0&&t.constructor===Object}function Do(...t){let e={};for(let i=0;i<t.length;i++){let s=t[i];if(s!=null)for(let n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}var Nt=(t=>(t[t.PERCENT=0]="PERCENT",t[t.PIXEL=1]="PIXEL",t))(Nt||{});function K(t,e){if(!t)return;let s=t.childNodes.length;for(let n=0;n<s;n++){let r=t.childNodes[n];r.nodeType===Node.ELEMENT_NODE&&e(r,n)}}function No(t,e){let i=t.childNodes;for(let s=0;s<i.length;s++){let n=t.childNodes[s];if(n.nodeType===Node.ELEMENT_NODE&&te(n)===e)return n}}function Ro(t,e){if(!t)return;let s=t.childNodes.length;for(let n=s-1;n>=0;n--){let r=t.childNodes[n];r.nodeType===Node.ELEMENT_NODE&&e(r,n)}}function $t(t,e){return oe(t.attributes[e])}function Be(t,e,i){t&&t.attributes[e]&&i&&(t.attributes[e].value=i)}function ae(t,e,i=void 0){return t&&t.attributes[e]?t.attributes[e].value:i}function te(t,e=""){return ae(t,"id",e)}function Bn(t,e=""){return ae(t,"name",e)}function l(t,e,i=0){return+ae(t,e,i)}function tr(t,e){let i=ae(t,e,"");return Br(i)}function Br(t){return t=t.replace(" ",""),t?t.indexOf("%")>-1?{value:Number(t.substr(0,t.length-1))/100,unit:0}:t.indexOf("px")>-1?{value:+t.substr(0,t.length-2),unit:1}:{value:+t,unit:1}:{value:0}}function Mo(t,e){let i=c(t,e,"0").split(","),s=[{value:0},{value:0}];for(let n=0;n<i.length;n++)s[n]=Br(i[n]);return s}function c(t,e,i=""){return ae(t,e,i)}function x(t,e,i=!1){return c(t,e,i?"true":"false").toLowerCase()==="true"}function fe(t,e=""){return oe(t)?t.textContent:e}function Fo(t){return t.attributes.length===0&&t.childElementCount===0}function Ee(t,e,i,s){let n=c(t,e),r;if(n)r=n.split(",");else return[];i=oe(i)?i:r.length;let o=new Array(i);for(let a=0;a<i;a++)o[a]=s?r[a]:parseFloat(r[a]);return o}function Wo(t,e,i){return Ee(t,e,i,!0)}function Er(t,e,i=[0,0]){let s=c(t,e,"0").split(","),n=i;for(let r=0;r<s.length;r++)n[r]=parseFloat(s[r]);return n}function Ho(t,e){let i=c(t,e,"0").split(",");return{x:parseFloat(i[0]),y:parseFloat(i[1])}}function Or(t,e){let i=Ee(t,e,2);return{width:i[0],height:i[1]}}function ko(t,e){let i=Ee(t,e),s=[];for(let n=0;n<i.length;n++)n%2==0&&s.push({width:i[n],height:i[n+1]});return s}function ds(t){return{align:c(t,"align","left"),breakWords:x(t,"breakWords",!1),fontFamily:c(t,"fontFamily"),fontSize:l(t,"fontSize"),fontStyle:c(t,"fontStyle","normal"),fontVariant:c(t,"fontVariant","normal"),fontWeight:c(t,"fontWeight","normal"),fill:$t(t,"fills")?Wo(t,"fills"):l(t,"fill",16777215),fillGradientType:l(t,"fillGradientType",0),fillGradientStops:Ee(t,"fillGradientStops"),stroke:l(t,"stroke",0),strokeThickness:l(t,"strokeThickness",0),wordWrap:x(t,"wordWrap",!1),wordWrapWidth:l(t,"wordWrapWidth",100),dropShadow:x(t,"dropShadow",!1),dropShadowColor:c(t,"dropShadowColor","#000000"),dropShadowBlur:l(t,"dropShadowBlur",0),dropShadowAngle:l(t,"dropShadowAngle",Math.PI/6),dropShadowDistance:l(t,"dropShadowDistance",5),padding:l(t,"padding",0),textBaseline:c(t,"textBaseline","alphabetic"),miterLimit:l(t,"miterLimit",10),lineJoin:c(t,"lineJoin","miter"),letterSpacing:l(t,"letterSpacing",0),lineHeight:l(t,"lineHeight",0)}}let Uo=(()=>{if(DOMParser){let t=new DOMParser;return e=>t.parseFromString(e,"text/xml").documentElement}else if(typeof ActiveXObject<"u")return t=>{let e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return t=>{}})();class $o{constructor(){this.ie=!1,this.ieVersion=0,this.android=!1,this.chrome=!1,this.windowsPhone=!1,this.checkOS(),this.checkBrowser()}checkOS(){let e=navigator.userAgent;/Android/.test(e)&&(this.android=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(this.android=!1,this.windowsPhone=!0)}checkBrowser(){let e=navigator.userAgent;/Chrome\/(\d+)/.test(e)&&!this.windowsPhone?this.chrome=!0:/MSIE (\d+\.\d+);/.test(e)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(this.ie=!0,this.ieVersion=parseInt(RegExp.$3,10))}get isUCBrowser(){return navigator.userAgent.toLowerCase().indexOf("ucbrowser")>-1}get isQQBrowser(){return navigator.userAgent.toLowerCase().indexOf("qqbrowser")>-1}get isXiaoMiBrowser(){return navigator.userAgent.toLowerCase().indexOf("xiaomi")>-1}get desktop(){return is.desktop()}get mobile(){return is.mobile()}get tablet(){return is.tablet()}}class Vo{constructor(){this.mappings={}}map(e,i){let s=new zo(e,i);return this.mappings[e]=s,s}unmap(e){this.mappings[e]=void 0}get(e,...i){let s=this.mappings[e];if(!V(s))return s.get(i)}resolve(){console.warn("Injector.resolve() is not implement yet")}}class jo{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class Go{constructor(e){this.type=e}get(e){return Lr(this.type,e)}destroy(){this.type=void 0}}class Xo{constructor(e){this.type=e}get(e){return V(this.instance)&&(this.instance=Lr(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class Yo{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class zo{constructor(e,i){this.name=e,this.type=i}get(e){return V(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new jo(e)}toType(e){this.destroy(),this.provider=new Go(e)}toSingleton(e){this.destroy(),this.provider=new Xo(e)}asSingleton(){if(this.destroy(),V(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new Yo(e)}destroy(){oe(this.provider)&&this.provider.destroy()}}function Lr(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}let qo=Object.prototype.hasOwnProperty,se=typeof Object.create!="function"?"~":!1;class ir{constructor(e,i,s=!1){this.fn=e,this.context=i,this.once=s}}class Ar{constructor(){this.off=this.removeListener}eventNames(){let e=this._events,i=[],s;if(!e)return i;for(s in e)qo.call(e,s)&&i.push(se?s.slice(1):s);return i}listeners(e,i=!1){let s=se?se+e:e,n=this._events&&this._events[s];if(i)return!!n;if(!n)return[];if(n.fn)return[n.fn];let r=n.length,o=new Array(r);for(let a=0;a<r;a++)o[a]=n[a].fn;return o}emit(e,...i){let s=se?se+e:e;if(!this._events||!this._events[s])return!1;let n=this._events[s],r=i.length,o;if(typeof n.fn=="function"){switch(n.once&&this.removeListener(e,n.fn,void 0,!0),r){case 0:return n.fn.call(n.context),!0;case 1:return n.fn.call(n.context,i[0]),!0;case 2:return n.fn.call(n.context,i[0],i[1]),!0;case 3:return n.fn.call(n.context,i[0],i[1],i[2]),!0;case 4:return n.fn.call(n.context,i[0],i[1],i[2],i[3]),!0;case 5:return n.fn.call(n.context,i[0],i[1],i[2],i[3],i[4]),!0}n.fn.apply(n.context,i)}else{let a=n.length;for(o=0;o<a;o++)switch(n[o].once&&this.removeListener(e,n[o].fn,void 0,!0),r){case 0:n[o].fn.call(n[o].context);break;case 1:n[o].fn.call(n[o].context,i[0]);break;case 2:n[o].fn.call(n[o].context,i[0],i[1]);break;default:n[o].fn.apply(n[o].context,i)}}return!0}on(e,i,s){let n=new ir(i,s||this),r=se?se+e:e;return this._events||(this._events=se?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):this._events[r]=n,this}once(e,i,s){let n=new ir(i,s||this,!0),r=se?se+e:e;return this._events||(this._events=se?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):this._events[r]=n,this}removeListener(e,i,s,n){let r=se?se+e:e;if(!this._events||!this._events[r])return this;let o=this._events[r],a=[];if(i)if(o.fn)(o.fn!==i||n&&!o.once||s&&o.context!==s)&&a.push(o);else for(let h=0,u=o.length;h<u;h++)(o[h].fn!==i||n&&!o[h].once||s&&o[h].context!==s)&&a.push(o[h]);return a.length?this._events[r]=a.length===1?a[0]:a:delete this._events[r],this}removeAllListeners(e){return this._events?(e?delete this._events[se?se+e:e]:this._events=se?{}:Object.create(null),this):this}}class Dr extends Ar{on(e,i,s){return this.off(e),super.on(e,i,s)}}class Te{constructor(e,i,s=!0){this.id=e,this.src=i,this.global=s}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){}destroy(e){this.data&&this.data.texture.destroy(e)}static getVersionSrc(e){let i=w.get("context");return this.checkSrcFormat(i.applyTimeVersion(i.resolve(ae(e,"src"))))}static checkSrcFormat(e){const i=e.match(/\[(?:.+)\]/);if(i){const s=i[0].replace("[","").replace("]","").split(",");for(let n of s){const r=n==="avif",o=n==="webp";if(r&&bi.avif||o&&bi.webp||!r&&!o)return e.replace(`${i[0]}`,n)}}return e}static create(e){return new Te(te(e),this.getVersionSrc(e),x(e,"global",!0))}}function He(t,e){let i=t.toString();return new Array(e-i.length+1).join("0")+i}class Ko{static fromCharCode(e){return String.fromCharCode(e)}static charCodeAt(e,i){return e.charCodeAt(i)}static split(e,i){return e.split(i)}static equals(e,i){return e===i}static stripLeft(e,i){if(e&&e.length){let s=0;for(let n=0;n<e.length&&!(i.indexOf(e[n])<0);n++)s++;e=e.substring(s)}return e}static stripRight(e,i){if(e&&e.length){let s=e.length;for(let n=e.length-1;n>=0&&!(i.indexOf(e[n])<0);n--)s--;e=e.substring(0,s)}return e}static replace(e,i,s){return e.replace(i,s)}static replaceAll(e,i,s){return e.replace(i,s)}static slice(e,i=0,s=null){return e.slice(i,s===null?void 0:s)}static replaceAllMapped(e,i,s){return e.replace(i,function(...n){return n.splice(-2,2),s(n)})}static contains(e,i){return e.indexOf(i)!==-1}static compare(e,i){return e<i?-1:e>i?1:0}}function Jo(t,e="{{",i="}}"){let s=[],n=0,r=0;for(;n=t.indexOf(e,r),n!==-1;)if(r=t.indexOf(i,n),n>-1&&r>-1)s.push(t.substr(n+2,r-n-2));else break;return s}function st(t){let e=t.split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function de(t){return new Decimal(t).toFixed(2,Decimal.ROUND_FLOOR)}function Zo(t,e){return e?st(de(t)):t}function Ct(t,e){if(!e)return t+" ";switch(t){case"USD":return"$";case"CNY":case"RMB":case"JPY":return"¥";case"KRW":return"₩";case"MYR":return"RM";case"IDR":return"Rp";case"THB":return"฿";case"VND":return"₫";case"EUR":return"€";default:return t+" "}}function En(t,e){return e?Ct(t,!0):""}class fs extends Te{constructor(e,i,s,n){super(e,e,n),this.id=e,this.src=i,this.options=s}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){const i={};for(let n=0;n<this.options.frame;n++)i[`${this.id}_${He(n,4)}`]={frame:{x:n%this.options.width*this.options.size[0],y:Math.floor(n/this.options.width)*this.options.size[1],w:this.options.size[0],h:this.options.size[1]}};const s=e.get(this.id);this.sheet=new PIXI.Spritesheet({texture:s,data:{frames:i,meta:{scale:1}}}),this.sheet.parse()}static create(e){let i={size:Er(e,"size"),frame:l(e,"frame"),width:l(e,"width",0)};return new fs(te(e),this.getVersionSrc(e),i,x(e,"global",!0))}}class Mt extends Te{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.type=s}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){return new Mt(te(e),this.getVersionSrc(e),e.tagName,x(e,"global",!0))}}class On extends Te{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.type=s}static create(e){return new On(te(e),this.getVersionSrc(e),e.tagName,x(e,"global",!0))}}function sr(t,e){let i=w.get("context"),s=ae(t,e,void 0);return s==null?s:i.applyTimeVersion(i.resolve(ae(t,e)))}class Ln extends Te{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.options=s}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){var i=sr(e,"atlas"),s=ae(e,"rawAtlas",void 0);let n={spineAtlasFile:i,rawAtlasData:s};return new Ln(te(e),this.checkSrcFormat(sr(e,"json")),n,x(e,"global",!0))}}class ms extends Te{constructor(e,i,s){super(e,i,s),this.id=e,this.src=i}get rawAtlas(){return this.data}addTo(e){}static create(e){return new ms(te(e),this.getVersionSrc(e),x(e,"global",!0))}}class fi extends Te{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.type=s}get frag(){return this.data}get vert(){return this.data}static create(e){return new fi(te(e),this.getVersionSrc(e),e.tagName,x(e,"global",!0))}}async function Qo(t,e,i){const s=PIXI.TextFormat.test(t)?PIXI.TextFormat.parse(t):PIXI.XMLStringFormat.parse(t),{src:n}=e,{page:r}=s,o=[];for(let u=0;u<r.length;++u){const p=r[u].file,g=n.split("?")[0].split("/");g.pop(),g.push(p);let b=g.join("/");b=PIXI.copySearchParams(b,n),o.push(b)}const a=await i.load(o),h=o.map(u=>a[u]);return PIXI.BitmapFont.install(s,h,!0)}function ea(){const t=PIXI.loadBitmapFont;t.parse=Qo,PIXI.extensions.add(PIXI.loadBitmapFont)}class ta extends Ar{constructor(){super(),this.ids=[],this.sheetResource={},this.assets=PIXI.Assets,ea()}get progress(){return this._progress}onProgress(e){this._progress=e,this.emit("progress",e)}onLoaded(e){e.forEach(i=>{var s;(s=this.sheetResource[i])==null||s.loaded(this.assets)}),this.emit("complete",!1)}add(e,i=!1){e.addTo(this.assets),e instanceof ms||(this.ids.push(e.id),e instanceof fs&&(this.sheetResource[e.id]=e))}load(){this.assets.load([...this.ids],this.onProgress.bind(this)).then(this.onLoaded.bind(this,[...this.ids])),this.ids=[]}json(e){return this.assets.get(e)}frag(e){return this.assets.get(e)}vert(e){return this.assets.get(e)}resolveImage(e){return this.assets.get(e)??PIXI.Texture.EMPTY}resolveTextureAtlas(e){const i=e[1],s=this.assets.get(i);if(e.length==2)return s.textures;{const n=e[2].split("|");return n.length==1?s.textures[n[0]]:n.map(r=>s.textures[r])}}resolveAtlasTextures(e){const i=e[1],s=this.assets.get(i);let n=[];const r=Object.keys(s.textures);if(e.length==2)n=Object.keys(s.textures);else for(let o of r)o.startsWith(e[1])&&n.push(o);return n=n.sort((o,a)=>o.localeCompare(a)),n.map(o=>s.textures[o])}resolveSpriteSheet(e){const i=this.sheetResource[e];return Object.values(i.sheet.textures)}resource(e){return this.assets.get(e)}text(e){return this.resource(e)}resolve(e){let i=PIXI.Texture.EMPTY;if(!e||e.length===0)return i;let s=e.split("/");switch(s[0]){case"@img":return this.resolveImage(s[1]);case"@atlas":return this.resolveTextureAtlas(s);case"@atlasTextures":return this.resolveAtlasTextures(s);case"@sheet":return this.resolveSpriteSheet(s[1]);case"@json":return this.json(s[1]);case"@spine":return this.resource(s[1]);case"@frag":return this.frag(s[1]);case"@vert":return this.vert(s[1]);case"@res":return this.resource(s[1]);case"@text":return this.text(s[1]);default:return i}}downloadApi(){return this.assets.add({src:"../_commons/api.json",alias:"api"}),this.assets.load("api")}get api(){return this.json("api")}getApiBy(e,i){return this.api[e]||i}}let ia={atlas:Te,img:Te,audio:On,res:Te,sheet:fs,spine:Ln,rawAtlas:ms,text:Mt,json:Mt,xml:Mt,frag:fi,vert:fi};function sa(t){let e=ia[t.nodeName];if(e)return e.create(t);throw`not found the resource by ${t.nodeName}`}function Ge(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)}function na(t,e,i){let s=[],n=[];i=i||(r=>r);for(let r=0,o=0;r<e.length;r++)n.push(i(e[r])),o++,o===t&&(s.push(n),o=0,n=[]);return s}function Nr(t,e){let i=[];return t.forEach((s,n,r)=>{let o=e(s);i.push(o)}),i}function ra(t){if(t&&t.length>0)return t[0]}function Ms(t){if(t)return t[t.length-1]}function oa(t,e){var i=0;if(t&&(i=t.length),i>0){for(var s=0;s<i;s++)if(e(t[s]))return t[s]}}function aa(t){return new Date(t)}function Rr(){return new Date}function Vt(){return Rr().getTime()}function nr(t,e){let i=Rr(),s=i.getUTCHours()+t;s>23&&(s=s-24);let n=i.getUTCMinutes(),r=i.getSeconds(),o=He(s,2)+":"+He(n,2);return e?o+" (+"+t+")":o+":"+He(r,2)+" (GMT+"+t+")"}var $=(t=>(t[t.Identify=0]="Identify",t[t.PageView=1]="PageView",t[t.ScreenView=2]="ScreenView",t[t.Event=3]="Event",t[t.Request=4]="Request",t[t.Response=5]="Response",t[t.Transaction=6]="Transaction",t[t.Exception=7]="Exception",t[t.Timing=8]="Timing",t[t.Metric=9]="Metric",t[t.StartScreen=10]="StartScreen",t[t.StopScreen=11]="StopScreen",t))($||{});let Gs;function Mr(t){Gs=t}class la{constructor(){this.listeners=[]}initialize(){if(this.userAgent=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",oe(Gs))for(let e of Gs){let i=new e;i.initialize(),this.addListener(i)}this.handleGlobalError()}handleGlobalError(){window.onerror=(e,i,s,n,r)=>{this.exception({name:"GlobalError",description:e,fatal:!1,error:r,extraInfo:{filename:i,lineno:s,colno:n}})}}addListener(e){this.listeners.push(e)}removeListener(e){Ge(this.listeners,e)}identify(e){this.track($.Identify,e)}screen(e){V(e)&&(e={name:N.current.id}),this.track($.ScreenView,e)}startScreen(e){this.track($.StartScreen,e)}stopScreen(e){this.track($.StopScreen,e)}metric(e){this.track($.Metric,e)}event(e){this.track($.Event,e)}exception(e){this.track($.Exception,e)}request(e){this.track($.Request,e)}response(e){this.track($.Response,e)}pageView(e){this.track($.PageView,e)}track(e,i){let s=v,n={time:Vt(),type:e,userID:s.TRACKER_USER_ID,data:i};for(let r of this.listeners)r.track.call(r,n)}}const Z=new la;function ne(t,e,i,s=1,n=0){return t.alpha=n,jt(t,{alpha:n},{alpha:s},e,i)}function Pe(t,e,i,s=1,n=0){return t.alpha=s,jt(t,{alpha:s},{alpha:n},e,i)}function ha(t,e,i,s,n,r=TWEEN.Easing.Linear.None,o=0,a=!1){let h=e;return new TWEEN.Tween(h).to(i,s).easing(r).repeat(o).yoyo(a).onUpdate(()=>{for(let p in e)p==="scale"?t.scale.x=t.scale.y=h[p]:t[p]=h[p]}).onComplete(()=>{n&&(n.length?n(t):n())})}function jt(t,e,i,s,n,r=TWEEN.Easing.Linear.None){let o=ha(t,e,i,s,n,r);return o.start(),o}function Gt(t,e,i=0,s=1){let n=new PIXI.Graphics;return n.beginFill(i),n.drawRect(0,0,t,e),n.endFill(),n.alpha=s,n}function ua(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawPolygon(t),i}function Fr(t,e,i=0,s=1){let n=new PIXI.Graphics;return n.lineStyle(s,i),n.drawRect(0,0,t,e),n}function Xs(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawCircle(0,0,t),i.endFill(),i}function Me(t,e,i=0,s=0){let n=new PIXI.Graphics;return n.beginFill(s),n.drawRoundedRect(0,0,t,e,i),n.endFill(),n}const mi="REGISTER_METADATA_KEY",ca="component",pa="service",da="scene";function m(t){return e=>(t.category=t.category||"component",e.prototype[mi]=t,e)}function rr(t){if(mi in t.prototype){let e=t.prototype[mi];switch(e.category){case ca:w.map(`component:${e.tag}`).toFactory(()=>t);break;case pa:let i=y.get(e.tag);i&&console.warn(`${e.tag}: ${i.constructor.name} is replaced by ${t.name}.`),y.register(e.tag,new t);break;case da:w.map(`scene:${e.tag}`).toType(t);break}}else throw"Invaildate component, missing metadata of "+t}function bs(t){if(Tr(t))for(let e of t)rr(e);else rr(t)}class fa{constructor(){this.views=[]}add(e){this.pane&&this.views.push(e)}remove(e){if(this.pane){let i=this.views.indexOf(e);i>=0&&this.views.splice(i,1),this.refresh()}}refresh(){for(let e of this.pane.children)this.pane.remove(e);for(let e of this.views)e.showBoundingBox(),e.createItemControllers(e)}addRefreshButton(){this.pane.addButton({title:"refresh"}).on("click",()=>{this.refresh()})}}class ma{createItemControllers(e){Ne.pane.addBinding(e,"x"),Ne.pane.addBinding(e,"y"),Ne.pane.addBinding(e,"width"),Ne.pane.addBinding(e,"height"),Ne.pane.addBinding(e,"rotation"),Ne.pane.addBinding(e,"scale"),Ne.pane.addBinding(e,"visible"),Ne.pane.addBinding(e,"alpha")}}function ba(...t){return e=>e}var ga=Object.defineProperty,va=Object.getOwnPropertyDescriptor,ya=(t,e,i,s)=>{for(var n=s>1?void 0:s?va(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ga(e,i,n),n};function or(t){return t instanceof C||t instanceof gs}class gs{getComponentByID(e){}}let C=class extends PIXI.Container{constructor(){super(...arguments),this.components=[],this.fadeInTime=-1,this.fadeOutTime=-1,this.editAble=!1}addToEdit(){this.editAble&&Ne.add(this)}removeFromEdit(){this.editAble&&Ne.remove(this)}addChild(...t){if(t=t[0],t instanceof PIXI.DisplayObject&&super.addChild(t),or(t))return t instanceof C&&(t.fadeIn(),t.addToEdit()),this.components.push(t),t}fadeIn(t){t===void 0&&(t=this.fadeInTime),t>0&&(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=ne(this,t))}fadeOut(t,e=!0){t===void 0&&(t=this.fadeOutTime),t>0?(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=Pe(this,t,e?()=>{this.parent&&this.parent.removeChild(this)}:void 0)):e&&this.parent&&this.parent.removeChild(this)}removeChild(...t){return t=t[0],t instanceof PIXI.DisplayObject&&super.removeChild(t),or(t)&&(Ge(this.components,t),t.deactivate()),t}removeChildren(t,e){return this.removeAllComponents(),super.removeChildren(t,e)}removeAllComponents(){this.deactivate(),this.components=[]}activate(){this.fadeIn(),this.components.forEach(t=>t.activate())}deactivate(){this.removeFromEdit(),this.fadeTween&&this.fadeTween.stop(),this.components.forEach(t=>t.deactivate())}getComponentByID(t){for(let e=0;e<this.components.length;e++){let i=this.components[e];if(i.id===t)return i;let s=i.getComponentByID(t);if(s)return s}}getComponentByTag(t){for(let e of this.components){let i=e.constructor.prototype[mi];if(i&&i.tag===t)return e}}showBoundingBox(){oe(this.boundingBox)&&(this.boundingBox.destroy(),this.removeChild(this.boundingBox));let t=this.getBounding();this.boundingBox=Fr(t.width,t.height,0,5),this.addChild(this.boundingBox)}getBounding(){return this.getBounds()}bringToTop(t){this.setChildIndex(t,this.children.length-1)}applyLayout(t){if(t)for(let e in t){let i=t[e];e==="scale"?this.scale.set(i[0],i[1]):e==="pivot"?this.pivot.set(i[0],i[1]):e==="activate"?i?this.activate():this.deactivate():this[e]=i}}onOrientationChange(t){this.layoutInfo&&this.applyLayout(this.layoutInfo[t])}};C=ya([ba(ma)],C);var F=(t=>(t[t.LANDSCAPE=0]="LANDSCAPE",t[t.PORTRAIT=1]="PORTRAIT",t))(F||{});function Wr(t){let e=c(t,"render");return!(e==="webgl"&&X.type!==PIXI.RENDERER_TYPE.WEBGL||e==="canvas"&&X.type===PIXI.RENDERER_TYPE.WEBGL)}function Sa(t){let e=c(t,"brand",null);return e===null||e==="all"&&!v.BRAND||e.toLowerCase()===String(v.BRAND).toLowerCase()}function $e(t,e){if(!t||!Wr(t))return null;let i=t.nodeName,s=w.get(`component:${i}`);if(s){let n=s.create(t,e);return n instanceof C&&x(t,"boundingBox")&&n.showBoundingBox(),n}else console.warn(`can't find component by tag name "${i}"`);return null}function ue(t,e,i=!0){if(!e.parent)throw new Error("call builder.createChildren must pass parent.");(i?Ro:K)(t,(n,r)=>{let o=$e(n,e);o&&e.parent.addChild(o)})}function k(t,e,i){i.scene;let s=i.parent,n=te(e,null);t.id=n,n&&s&&(s[n]=t),t instanceof C&&(t.name=e.tagName+(V(n)?"":`#${n}`),wa(t,e,i))}function wa(t,e,i){let s=[{},{},{}],n=i.scene,r=i.parent,o=!1,a=2;for(let h=0;h<e.attributes.length;h++){let u=e.attributes[h].name,p=u,g=a;if(u.indexOf("p-")===0?(g=F.PORTRAIT,p=u.substr(2),o=!0):u.indexOf("l-")===0&&(g=F.LANDSCAPE,p=u.substr(2),o=!0),p==="x"){let b=tr(e,u);s[g].x=b.unit===Nt.PERCENT?r.width*b.value:b.value}else if(p==="y"){let b=tr(e,u);s[g].y=b.unit===Nt.PERCENT?r.height*b.value:b.value}else if(p==="alpha")s[g].alpha=l(e,u);else if(p==="pivot"){let[b,L]=Mo(e,u),O=t.getLocalBounds();s[g].pivot=[b.unit===Nt.PERCENT?b.value*O.width:b.value,L.unit===Nt.PERCENT?L.value*O.height:L.value]}else if(p==="scale")if(ae(e,u).indexOf(",")!==-1)s[g].scale=Er(e,u,[1,1]);else{let b=l(e,u);s[g].scale=[b,b]}else p==="rotation"?s[g].rotation=l(e,u)/180*Math.PI:p==="visible"?s[g].visible=x(e,u,!0):p==="activate"&&(s[g].activate=x(e,u))}e.hasAttribute("interactive")&&(t.interactive=x(e,"interactive")),e.hasAttribute("interactiveChildren")&&(t.interactiveChildren=x(e,"interactiveChildren")),e.hasAttribute("visible")&&(t.visible=x(e,"visible",!0)),t.fadeInTime=l(e,"fadein",-1),t.fadeOutTime=l(e,"fadeout",-1),t.editAble=x(e,"editAble",!1);for(let h=1;h<10;h++)e.hasAttribute("argument"+h)&&(t["argument"+h]=c(e,"argument"+h));o&&(n.multiLayoutComponents.push(t),t.layoutInfo=s),t.applyLayout(s[a])}function An(t,e,i,s,n){let r=e.hasAttribute("p-"+i),o=e.hasAttribute("l-"+i);!r&&!o||(r&&(t.layoutInfo[F.PORTRAIT][i]=s(e,"p-"+i,n)),o&&(t.layoutInfo[F.LANDSCAPE][i]=s(e,"l-"+i,n)))}function xa(t,e,i,s,n){let r=i.scene,o=c(e,s,void 0);if(o&&r[o]){let a=c(e,"parameter",void 0),h=r[o];t[n]=()=>{h.call(r,t,a)}}}function je(t,e,i){for(var s=0;s<e.attributes.length;s++){var n=e.attributes[s];n&&n.name.match(/on[A-Z]\w+/)&&xa(t,e,i,n.name,n.name+"Handler")}}function ke(t,e){let i=e[t+"Handler"];return i?(i(),!0):!1}function vs(t){let e=t.hitArea;if(e){let i=Fr(e.width,e.height,16711680,2);t.addChild(i)}}const Ys="__guitarist_bindings__";class Ia{constructor(e,i){this.viewID=e,this.propertyKey=i}apply(e){let i=N.current;e[this.propertyKey]=i.getComponentByID(this.viewID)}}class Pa{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=w.get(this.key)}}class _a{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=y.get(this.key)}}function Dn(t){return(e,i)=>{let s=e[Ys]||[];s.push(t(e,i)),e[Ys]=s}}function S(t){return Dn((e,i)=>new Ia(t,i))}function Tt(t){return Dn((e,i)=>new Pa(t,i))}function Fe(t){return Dn((e,i)=>new _a(t,i))}function ar(t){(t[Ys]||[]).forEach(i=>i.apply(t))}function Ca(t){let e=t?t.split(","):null;return(e?e.shift():null)=="fadein"?Ta(parseFloat(e.shift())||800):s=>{N.replace(s)}}function Ta(t){return e=>{let i=N.current;i&&(i.interactive=!1,i.interactiveChildren=!1);let s=N.resolve(e);s.alpha=0,N.add(s),ne(s,t,()=>{i&&(i.exit(),N.remove(i))})}}class Ba{}class Zt extends C{constructor(e){super(),this.layout=e,this.multiLayoutComponents=[],this.id=te(e),this.name="scene#"+this.id,this.transitions=c(e,"transitions",null)}loadResources(){let e=R,i=this.layout.querySelector("scene resources");i?(e.retryTimes=l(i,"retry",2),K(i,(s,n)=>{if(Wr(s)&&Sa(s)){let r=sa(s);e.add(r)}}),e.on("progress",s=>{this.onProgress(s)}),e.once("complete",()=>{e.removeAllListeners(),this.onLoaded()}),e.load()):this.onLoaded()}create(e){let i=this.layout.querySelector("scene view");i&&ue(i,{scene:this,parent:this}),ar(this);let s=y.get("orientationService");s.mode==="both"&&this.onOrientationChange(s.getOrientation()),this.onCreated(e)}enter(e){Z.screen({name:this.id}),this.layout&&(this.loadResources(),this.create(e))}focus(){}blur(){}exit(){this.removeChildren()}setState(e){e.scene=this,this.state&&this.state.exit(),ar(e),this.state=e,this.state.enter()}get isPortraitLayout(){let e=y.get("orientationService");return e.mode==="both"&&e.getOrientation()===F.PORTRAIT}onProgress(e){}onLoaded(){this.next=c(this.layout,"next",null),this.next&&this.transit()}transit(){Ca(this.transitions)(this.next)}onCreated(e){}onOrientationChange(e){for(let i=0;i<this.multiLayoutComponents.length;i++)this.multiLayoutComponents[i].onOrientationChange(e)}onSceneResize(){}}class Ea{constructor(){this.overlayContainer=new PIXI.Container,this.sceneContainer=new PIXI.Container,this.scenesRegistry={},this.scenes=[]}register(e){this.scenesRegistry[te(e)]=e}push(e,i=!0,s){this._current&&(this._current.blur(),this._current.visible=!i),this.add(this.resolve(e),s)}pop(){if(this._current&&(this._current.exit(),this.sceneContainer.removeChild(this._current),this.scenes.pop()),this.scenes.length>0){let e=this.scenes[this.scenes.length-1];e.visible=!0,e.focus(),this._current=e}}remove(e){this.sceneContainer.removeChild(e),this.scenes.splice(this.scenes.indexOf(e),1)}replace(e,i){this._current&&(this._current.exit(),this.remove(this._current)),this.add(this.resolve(e),i)}resolve(e){if(Cr(e)){let i=e,s=this.scenesRegistry[i],n=w.get(`scene:${i}`,s);return n||(n=new Zt(s)),n}else return e}addOverlay(e){this.overlayContainer.addChild(e)}removeOverlay(e){this.overlayContainer.removeChild(e)}get current(){return this._current}add(e,i){this.scenes.push(e),this.sceneContainer.addChild(e),this._current=e,this._current.enter(i)}}class ce{configure(e){}startup(){}shutdown(){}}class Oa{constructor(){this.services={}}get(e){return this.services[e]}register(e,i){let s;return Lo(i)?s=new i:s=i,this.services[e]=s,s}has(e){return oe(this.services[e])}startup(){for(let e in this.services)this.services[e].startup()}shutdown(){for(let e in this.services)this.services[e].shutdown()}}class La{constructor(){this.count=0}push(e,i=!1){if(!(!i&&this.has(e))){var s={value:e,next:void 0};if(this.count++,!this.head)this.head=s;else{let n=this.head;for(;n.next;)n=n.next;n.next=s}}}forEach(e){let i=this.head;for(;i;)e(i.value),i=i.next}has(e){let i=this.head;for(;i;){if(i.value===e)return!0;i=i.next}return!1}clear(){this.head=void 0,this.count=0}remove(e){let i=this.head;for(var s=i;i;){if(i.value===e){this.count--,s.next=i.next,i===this.head&&(this.head=i.next);return}s=i,i=i.next}}}class Aa{constructor(){this.list=new La}advanceTime(e){return this.list.forEach(i=>{i.advanceTime(e)}),!0}add(e){this.list.push(e)}remove(e){this.list.remove(e)}contains(e){return this.list.has(e)}clear(){this.list.clear()}}const Ne=new fa,w=new Vo,N=new Ea,R=new ta,y=new Oa,ee=new Dr,d=new Dr,B=new Aa,E=new $o;let P,X,G,v,zs,qs,bi={avif:!1,webp:!1};function Da(){return Promise.all([PIXI.detectAvif.test(),PIXI.detectWebp.test()]).then(([t,e])=>{bi.avif=t,bi.webp=e})}function Na(t){let e={width:t.width,height:t.height,view:t.canvas,backgroundColor:t.backgroundColor,autoResize:!0,antialias:!0,resolution:t.resolution};const i=PIXI.autoDetectRenderer(e);return V(t.canvas)&&document.body.appendChild(i.view),i}function Ra(t){return qs=t,E.platform=t.config.name,zs=t.launchTime,Z.initialize(),v=w.get("context"),Promise.all([v.initialize(),Da()])}function Ma(t,e){P=e,v.ID=te(t);let i=c(t,"enter");P.minWidth=l(t,"minWidth",0),P.minHeight=l(t,"minHeight",0),P.width=l(t,"width",800),P.height=l(t,"height",600),P.resolution=l(t,"resolution",1),P.backgroundColor=l(t,"backgroundColor",0),X=Na(P);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n].name;v[r]===void 0&&(v[r]=t.attributes[n].value)}const s=R.api;for(let n in s)v[n]=s[n];v.getHudLanguage(),v.printEngineVersion(),qs.opid=(v.OPERATOR||"").toUpperCase(),qs.gameid=v.ID,Wa(),G=new PIXI.Container,G.name="world",G.addChild(N.sceneContainer),G.addChild(N.overlayContainer),G.pivot.set(P.width/2,P.height/2),K(t.querySelector("scenes"),(n,r)=>{N.register(n)}),K(t.querySelector("services"),(n,r)=>{let o=y.get(n.nodeName);o||console.log("service "+n.nodeName+" not found"),o.configure(n)}),y.startup(),N.replace(i),PIXI.Ticker.shared.maxFPS=l(t,"maxFPS",59.99),PIXI.Ticker.shared.minFPS=l(t,"minFPS",55),PIXI.Ticker.shared.add(Fa),PIXI.Ticker.shared.autoStart=!0}function Fa(t){PIXI.Ticker.shared.elapsedMS,B.advanceTime(t),X.render(G)}function Wa(){try{if(navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)){let e=X.plugins&&X.plugins.interaction?X.plugins.interaction:X.events;if(!e)return;let i=e.interactionDOMElement?e.interactionDOMElement:e.domElement;if(!i)return;window.document.removeEventListener("mousemove",e.onMouseMove,!0),i.removeEventListener("mousedown",e.onMouseDown,!0),i.removeEventListener("mouseout",e.onMouseOut,!0)}}catch{console.log("InteractionManager not applicable.")}}function Ha(t){let e="",i=0;for(let s in t)t.hasOwnProperty(s)&&(i++&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]))}let ii;function ka(){if(ii===void 0)try{ii=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{ii=!1}return ii}let lr=[];class Hr{constructor(e=!1){this.isXDR=!1,e&&ka()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,lr.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,s){return i&&this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s&&(this.client.responseType="json"),this.client.open("POST",e),this.send(i)}afterDone(){this.isXDR&&Ge(lr,this.client)}send(e){return new Promise((i,s)=>{setTimeout(()=>{e?this.client.send(Ha(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?i(this.client):s(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),s(new Error("Request timeout"))},this.client.onerror=n=>{this.afterDone(),s(new Error(n.toString()))}})}}function Nn(t,e){return new Hr(!0).get(t)}function Rn(t){let e=t||"",i=e.split("."),s=i.length;return s>1?`${i[s-2]}.${i[s-1]}`:e}function Ua(t){return E.ie&&E.ieVersion<10?Uo(t.responseText):t.responseXML.documentElement}function $a(t){t.bootstrap=()=>{let e=t.config;R.downloadApi().then(()=>{Ra(t).then(()=>{let i=v.resolve(e.layout+"/{{LANGUAGE}}.min.xml");i=v.applyTimeVersion(i),new Hr().get("layout/"+i).then(s=>{let n=Ua(s);Ma(n,{canvas:document.querySelector("#stage")})}).catch(s=>{Z.exception({name:s.name,description:s.message,fatal:!0,extraInfo:s})})}).catch(i=>{alert(i)})})}}const kr="events:errorpopup:open",Mn="events:errorpopup:close",ys=11;let Ft=document.getElementById("errorDialog"),si=document.getElementsByClassName("close")[0],Fs=document.getElementById("historyContainer"),hr=document.getElementsByClassName("closeHistory")[0],Ot,lt,Ws,Hs,ks,ur=0,cr=0,Fn=!1;function Ie(t){if(lt===void 0||t!=null){let e=y.get("symbolService");t!=null?lt=e.multiSize[t].height:lt=e.size.height,lt==null&&(lt=e.multiSize[0].height)}return lt}function Bt(){if(Ot===void 0){let t=y.get("symbolService");Ot=t.size.width,Ot==null&&t.multiSize!=null&&(Ot=t.multiSize[0].width)}return Ot}function Xt(t){return t===void 0?ur:(ur=t,t)}function Ks(t){return t===void 0?cr:(cr=t,t)}function _(){return Ws===void 0&&(Ws=w.get("user")),Ws}function I(){return Hs===void 0&&(Hs=w.get("context")),Hs}function xe(){return I().NUM_OF_COLUMN}function Wn(){return I().NUM_OF_ROW}function Va(t){_().symbols=t}function ja(){return _().symbols}function pt(t,e,i=!1,s){return Y(t,e,i,!0,s)}function Y(t,e,i=!1,s=!1,n){return y.get("soundService").play(t,e,i,s,n)}function bt(t){if(!t)return;y.get("soundService").stop(t.soundId)}function ze(t="button"){Y(t,"default",!0)}function Ga(){return y.get("netService")}function U(){return y.get("widgetService")}function Ss(t){return ks===void 0&&(ks=y.get("textService")),ks.translate(t)}function H(t){return Ss("{{"+t+"}}")}function Xa(){if(!Fn&&Fs){const e=()=>{Fs.style.display="block";let s=document.getElementById("historyFrame"),n=()=>{hr.removeEventListener("click",n,!1),Fs.style.display="none",s.src=""};s.src=I().historyUrl,hr.addEventListener("click",n,!1)},i=()=>{Yt("Network Error",0,!0)};var t=new Image;t.onload=e,t.onerror=i,console.log(I().historyUrlDomain+"x.png?d="+escape(Date())),t.src=I().historyUrlDomain+"x.png?d="+escape(Date())}}function Yt(t,e,i){if(!Fn)if(Ft){Ft.style.display="block";let s=document.getElementById("errormessage"),n=document.getElementById("errorcode");if(s.innerHTML=t,n.innerHTML=He(e,3),i||Ka(e)){qa();let r=()=>{Ja({code:e})};si.style.display!=="none"&&(si.style.display="none",s.parentElement.appendChild(Za(H("ok"),r)))}else{let r=()=>{switch(si.removeEventListener("click",r,!1),Ft.style.display="none",e){case 0:case 5:case 7:case 14:Js();break;case 20:case 21:case 24:Js(!0);break;case 27:Qa()}d.emit(Mn,{code:e})};si.addEventListener("click",r,!1),d.emit(kr,{code:e})}}else alert(t)}function Ya(t,e){if(Ft&&Ft.style.display==="block"){let i=document.getElementById("errormessage");i.innerHTML=t}else Yt(t,e)}function Ur(){let t=v.collapsingBonusID;return t||""}function ws(){return v.isProgressiveJackpot==="true"}function za(){let t=v.jackpotInterval;return t?+t:3e4}function qa(){let t=y.get("keyboardService");t&&t.shutdown(),_().stopAutoSpin(),N.current.id==="main"&&(N.current.exit(),N.replace("main"))}function Ka(t){return parseInt(t)!==10&&parseInt(t)!==29&&!I().loginUrl&&(!I().LOBBY_URL||I().HIDE_LOBBY==="1")}function Ja(t){t&&(d.emit(Mn,t),window.open("","_self"),self.close(),Ya(H("closegame"),t.code),Fn=!0)}function Za(t,e){let i=document.createElement("div"),s=document.createElement("span");return s.innerHTML=t,s.className="button",i.className="buttons",i.appendChild(s),s.addEventListener("click",()=>{i.parentElement&&i.parentElement.removeChild(i),e&&e()},!1),i}function Qa(){window.close(),setTimeout(()=>Js(!0),50)}function Js(t=!1){I().loginUrl&&I().loginUrl!==""&&!t?window.open(I().loginUrl,"_self"):I().HIDE_LOBBY==="0"&&I().LOBBY_URL&&I().LOBBY_URL!==""&&window.open(I().realLobbyUrl,"_self")}function Ke(t="0",e){t===""&&(t="0"),Yt(Ss(`{{err_${He(t,3)}}}`),t,e)}function pr(t){let e=R.json("gamefolder");return e&&e[t]?e[t]:t}function $r(t,e){if($t(t,"frsum")){let n=l(t,"frsum");_().froundSum=n}return $t(t,"expired")&&(_().froundExpired=c(t,"expired")==="1"),e}function Vr(t){if(t.tagName==="error")return{success:!1,data:{code:l(t,"code"),message:fe(t)}};{let e=t.querySelector("bonus"),i=t.querySelector("wheels"),s=Ee(i,"rows"),n=t.querySelector("bonusposition"),r=s.length&&v.bonusAsWinlinesRow!=="true";return{success:!0,data:$r(t,{win:new Decimal(fe(t.querySelector("win"))),balance:new Decimal(fe(t.querySelector("balance"))),multiplier:l(t,"multiplier",1),wheels:il(i,s),winLines:dr(t.querySelector("winposition")),bonusPosition:r?tl(n,s):dr(n),bonusID:te(e,void 0),bonusKey:fe(e,void 0),bonus:e,data:t,fround:el(t)})}}}function el(t){let e=t.querySelector("fround");if(e)return{round:l(e,"round"),finished:c(e,"isfinished")==="1"}}function dr(t){let e=[];return K(t,(i,s)=>{let n=[],r=Nr(fe(i).split(","),o=>parseInt(o)-1);for(let o=0;o<r.length;o++)r[o]>=0&&n.push([o,r[o]]);e.push({index:l(i,"line"),win:l(i,"win"),multiplier:l(i,"mul"),positions:n,type:c(i,"type")})}),e}function tl(t,e){let i=[];return K(t,(s,n)=>{let r=[],o=Nr(fe(s).split(","),h=>parseInt(h)),a=[];for(let h=0;h<e.length;h++){a=o.splice(0,e[h]);for(let u=0;u<a.length;u++)a[u]>0&&r.push([h,u])}i.push({index:l(s,"line"),win:l(s,"win"),multiplier:l(s,"mul"),positions:r,type:c(s,"type")})}),i}function il(t,e=[]){let i=Ee(t,"val");if(e.length!==xe())return na(3,i,parseInt);let s=[];for(let n=0;n<e.length;n++)s.push(i.splice(0,e[n]));return s}const sl="1";class nl{constructor(){this.restoreBonus=!1,this.bonusBet=!1,this.autoSpinValues=[100,75,50,25,10],this.autoSpin=10,this._betValueIndex=0,this._multiplierIndex=0,this.maxBetRevertIndex=0,this.isTurbo=!1,this.accountName="Funplay",this.displayName="Funplay",this.funplay=!0,this.currency="RMB",this.balance=new Decimal(0),this.winAmount=new Decimal(0),this.bet={lines:0,credits:0,amount:0,multiplier:1}}setDefaultBet(){let e=v.defaultBet;if(e=e?JSON.parse(e):{},!e||e[this.currency]===void 0)this.betValueIndex=0;else{let i=this.betValues.indexOf(e[this.currency]);this.betValueIndex=Math.max(0,i)}}setMaxBet(){this.betValueIndex=this.betValues.length-1}get isMaxBet(){return this.displayedBetIndex===this.betValues.length-1}set multiplierIndex(e){this._multiplierIndex=e,this.bet.multiplier=this.multiplierValues[e]}get multiplierIndex(){return this._multiplierIndex}set betValueIndex(e){this._betValueIndex=e,this.bet.amount=this.betValues[e]}get betValueIndex(){return this._betValueIndex}set betValue(e){this.betValueIndex=Math.max(0,this.betValues.indexOf(e))}get betValue(){return this.bet.amount}get froundBet(){if(this.fround)return this.fround.bet!==void 0?this.fround.bet:l(this.fround,"bet",0)}get froundMul(){if(this.fround){if(this.fround.multiplier!==void 0){let e=this.fround.multiplier;return this.multiplierValues.indexOf(e)<0&&(e=this.multiplierValues[0]),e}return l(this.fround,"mul",1)}else return}get froundTotalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.froundBet)).times(this.froundMul)}get froundBetIndex(){return Math.max(this.betValues.indexOf(this.froundBet))}get froundMultiplierIndex(){return Math.max(this.multiplierValues.indexOf(this.froundMul),0)}get totalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.bet.amount)).times(this.bonusBet?2:1).times(this.bet.multiplier).times(this.bet.betLevel?this.bet.betLevel:1)}get displayedMultiplier(){return this.froundOn?this.froundMul:this.bet.multiplier}get displayedBetAmount(){return this.froundOn?this.froundBet:this.bet.amount}get displayedTotalBet(){return this.froundOn?this.froundTotalBet:this.totalBet}get linesCredits(){return this.bet.credits>0?this.bet.credits:this.bet.lines}get displayedBetIndex(){return this.froundOn?this.froundBetIndex:this.betValueIndex}get displayedMultiplierIndex(){return this.froundOn?this.froundMultiplierIndex:this._multiplierIndex}get isDoubleUp(){return this.bonus&&this.bonus.id===sl}checkAutoSpinConditions(){if(!this.autoSpinSettings||!this.autoSpinSettings.inAutoSpins)return!1;let e=new Decimal(0),i=this.balance.minus(this.autoSpinSettings.startBalance);i.lt(0)&&(e=i.dividedBy(this.totalBet).abs());let s=this.bonus!==void 0&&this.bonus!==null&&this.bonus.id!==Ur();return this.autoSpin===0||this.autoSpinSettings.stopAtFeature&&s||this.autoSpinSettings.stopAtWin>0&&this.winAmount.gt(this.autoSpinSettings.stopAtWin)||this.autoSpinSettings.stopAtBalance>0&&i.gte(this.autoSpinSettings.stopAtBalance)||this.autoSpinSettings.stopAtTotalBet>0&&e.gte(this.autoSpinSettings.stopAtTotalBet)||this.autoSpinSettings.stopAtCustom>0&&i.lte(-this.autoSpinSettings.stopAtCustom)?(this.stopAutoSpin(),!1):!0}stopAutoSpin(){this.isAutoSpinOn&&(this.autoSpinSettings.inAutoSpins=!1)}get isAutoSpinOn(){return this.autoSpinSettings&&this.autoSpinSettings.inAutoSpins}}var rl=Object.defineProperty,ol=Object.getOwnPropertyDescriptor,al=(t,e,i,s)=>{for(var n=s>1?void 0:s?ol(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&rl(e,i,n),n};const ll="events:reel:slow",hl="events:reel:normal";let gi=class{constructor(){this.acceleration=2,this.deceleration=2,this.stopacceleration=2,this.minSpeed=10,this.maxSpeed=60,this.duration=300,this._frameToStop=0,this.numberRandomize=1}advanceTime(e){if(this.enabled){try{this.getSpeed(),this.move(this.currentSpeed),this.addAndRemoveSymbols(),this._state==2&&Math.abs(this.currentSpeed-this.stopSpeed)<.01&&(this.stopSpeed=this.currentStopSpeed,this.displayReel(),this.cancel(),this.resolve())}catch{this.reject&&this.reject({code:ys,message:""})}return!0}}displayReel(){this.reel.display()}getSpeed(){if(this._state===3)this.currentSpeed=this.minSpeed;else if(this._state===4)d.emit(hl,this.reel),this.currentSpeed+=this.currentAcc,this._state=0;else if(this._state===0)this.currentSpeed+=this.currentAcc;else if(this._state===1)this.stopDistance-=this.currentSpeed,this.readyToStop();else if(this._state===2)this.currentSpeed-=this.currentAcc;else return 0;return this.currentSpeed=Math.min(this.currentSpeed,this.maxSpeed),this.currentSpeed}play(e){this.enabled=!0,this._state=0,this.reel=e,this.currentSpeed=this.startSpeed,this.currentAcc=this.acceleration,B.add(this),this.reel.options.restrictedSymbols&&this.reel.options.slowRestriction&&(this.slowRestrictedSymbols=this.reel.options.restrictedSymbols.split(","))}stop(e){if(this.slowStopping=!1,!this.enabled)return Promise.resolve();if(this._state===3)this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0;else if(this.slowRestrictedSymbols){for(let i=0;i<this.slowRestrictedSymbols.length;i++)if(e.indexOf(Number(this.slowRestrictedSymbols[i]))>=0){this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0,this.reel.options.slowSound&&pt(this.reel.options.slowSound,"default",!0);break}}return this.reel.addSymbolsAtTop(e,i=>i.idle()),this.stopDistance=this.getStopDistance(),this.readyToStop(),new Promise((i,s)=>{this.resolve=i,this.reject=s})}getStopDistance(){return-this.reel.topSymbol.y+this.reel.getTopSymbolY()}readyToStop(){this._frameToStop=0,this._state=1;var e=this.distanceToStop();this.stopDistance<=e&&(this.currentSpeed=this.speedToStop(),this._state=2)}cancel(){this.enabled=!1,B.remove(this)}move(e){this.reel.symbolContainer.children.forEach(i=>{i.y+=e})}addAndRemoveSymbols(){let e=this.reel.viewport;if(this.reel.topSymbol.y>=e.y){let s=this.reel.pickMany(this.numberRandomize);if(this.slowRestrictedSymbols){if(this._state===0&&this.slowRestrictedSymbols.indexOf(s[0].toString())>=0)this._state=3,this.currentSpeed=this.minSpeed,d.emit(ll,this.reel),this.reel.options.slowSound&&pt(this.reel.options.slowSound,"default",!0);else if(this._state===3){let n=!1;for(let r=0;r<this.slowRestrictedSymbols.length;r++){let o=this.reel.symbolContainer.getSymbolIndex(Number(this.slowRestrictedSymbols[r]));o>=0&&this.reel.symbolContainer.get(o).y>=e.y+Wn()*Ie()&&(n=!0)}n&&(this._state=4)}}this.reel.addSymbolsAtTop(s,n=>n.spin())}this.reel.removeOutsideSymbols()}speedToStop(){for(var e=this.stopDistance,i=this.stopSpeed,s=0,n=0;s<=e;)s+=i,i+=this.slowStopping?this.deceleration:this.stopacceleration,n++;let r=(e-n*this.stopSpeed)*2/(n*(n-1));return this.currentAcc=r,this.stopSpeed+n*r}distanceToStop(){for(var e=this.maxSpeed,i=0;e>=this.stopSpeed;)e-=this.slowStopping?this.deceleration:this.stopacceleration,i+=e;return i}static create(e){let i=new gi;return i.maxSpeed=l(e,"max",60),i.minSpeed=l(e,"min",10),i.startSpeed=l(e,"startSpeed",0),i.stopSpeed=l(e,"stopSpeed",0),i.acceleration=l(e,"acceleration",2),i.deceleration=l(e,"deceleration",2),i.stopacceleration=l(e,"stopacceleration",i.acceleration),i.duration=l(e,"duration",300),i.numberRandomize=l(e,"numberRandomize",1),i.currentStopSpeed=i.stopSpeed,i}};gi=al([m({tag:"animator:inback"})],gi);function vi(t){let e=Object.create(null);return t=t.trim().replace(/^(\?|#|&)/,""),t&&t.split("&").forEach(i=>{let s=i.replace(/\+/g," ").split("="),n=s.shift(),r=s.length>0?s.join("="):void 0;n=decodeURIComponent(n),r=r===void 0?null:decodeURIComponent(r),e[n]===void 0?e[n]=r:Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]}),e}function jr(t){let e="",i=0;for(let s in t)t[s]&&(i++&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function ul(t){return t===void 0&&(t=xs()),`${location.protocol}//${location.host}${location.pathname}?`+jr(t)}function xs(){return vi(location.search)}function cl(t,e){let i=xs();return i[t]=e,ul(i)}function pl(t,e){let i=xs();return i[t]?i[t]:e}class fr{constructor(e){e===void 0&&(e=location.toString());let i=e.indexOf("?"),s=i>0?e.substr(i+1):"";this.front=i>0?e.substr(0,i):e,this.queryString=vi(s)}get search(){let e=jr(this.queryString);return e?"?"+e:""}set search(e){this.queryString=vi(e)}toString(){let e=this.search;return this.front+e}getParameter(e,i){return this.queryString[e]?this.queryString[e]:i}setParameter(e,i){return this.queryString[e]=i,this}}function oi(t,e=!1){let i=document.cookie?document.cookie.split(";"):[],s=/(%[0-9A-Z]{2})+/g,n;for(let r of i){let o=r.split("="),a=o.slice(1).join("=");a.charAt(0)==='"'&&(a=a.slice(1,-1));try{let h=o[0].replace(s,decodeURIComponent);if(e&&(h=h.replace(/ +/,"")),a=a.replace(s,decodeURIComponent),this.json)try{a=JSON.parse(a)}catch{}if(t===h){n=a;break}t||(n[h]=a)}catch{}}return n}function dl(t,e){let i=new Date;i.setTime(i.getTime()+365*24*60*60*1e3),document.cookie=t+"="+e+";expires="+i.toUTCString()+";path=/"}const be=class be{};be.English="en",be.Chinese="cs",be.Vietnamese="vn",be.Thai="th",be.Khmer="kh",be.Indonesian="id",be.Korean="kr",be.Japanese="jp",be.Turkish="tr",be.Portuguese="pt",be.Hindi="hi";let D=be;class fl{constructor(){this.LANGUAGE=D.English,this.HUDLANG=D.English}initialize(){return new Promise((e,i)=>{this.LANGUAGE=this.tryGetParameter("lang",D.English),this.DOMAIN=Rn(location.hostname),e()})}getHudLanguage(){return this.hudLang&&(this.HUDLANG=this.hudLang.indexOf(this.LANGUAGE)>-1?this.LANGUAGE:D.English),this.HUDLANG}tryGetParameter(e,i){return V(this.queryString)&&(this.queryString=xs()),this.queryString[e]?this.queryString[e]:i}resolve(e,i){let s=Do(this,i);for(let n in s)s[n]&&Cr(s[n])&&(e=e.replace(`{{${n}}}`,s[n]));return e}printEngineVersion(){this.engineVersion&&console.log("Guitarist "+this.engineVersion)}applyTimeVersion(e){return e+"?v="+(this.publishTime||Date.now().toString())}}class Gr extends fl{constructor(){super(...arguments),this.HELP_URL=null}initialize(){if(this.configureLanguage(),this.configureFunplay(),this.configureToken(),this.configureDomain(),this.BRAND=this.tryGetParameter("brand"),this.OPERATOR=this.tryGetParameter("op"),this.AUTHENTICATED=this.tryGetParameter("auth","0"),this.HIDE_LOBBY=this.tryGetParameter("hidelobby","0"),this.HIDE_FULLSCREEN=this.tryGetParameter("hidefullscreen"),this.CHEAT=this.tryGetParameter("cheat"),this.CURRENCY_SYMBOL=this.tryGetParameter("currencySymbol","0")==="1",this.AUTHENTICATED==="1"){let e=_();e.accountName=e.displayName=this.tryGetParameter("username")}return this.loadUrlsConfig(this.tryGetParameter("config")).then(e=>{this.LOGIN_URL=e.loginURL,this.HOME_URL=e.homeURL,this.FUNDS_URL=e.fundsURL,this.LOBBY_URL=e.lobbyURL,this.LIVECHAT_URL=e.livechatURL,this.HIDE_LOBBY=e.hidelobby,e.currencySymbol&&(this.CURRENCY_SYMBOL=!0)}).then(()=>this.verify())}initActitvityTimer(){this.activeTimeout=0,this.inactiveTimeout=0;let e=R.json("configcommons");e&&(e.activeTimeout&&(this.activeTimeout=e.activeTimeout,this.startActivityTimer()),e.inactiveTimeout&&(this.inactiveTimeout=e.inactiveTimeout,this.startInactivityTimer()))}startInactivityTimer(){this.inactiveTimer=this.startTimer(this.inactiveTimer,this.inactiveTimeout,()=>this.inactivityTimesUp())}startActivityTimer(){this.activeTimer=this.startTimer(this.activeTimer,this.activeTimeout,()=>this.activityTimesUp()),this.sessionTimestamp=Vt(),this.sessionUserBalance=_().balance}startTimer(e,i,s){return i>0&&(this.clearTimer(e),e=setTimeout(()=>s(),i*6e4)),e}clearTimer(e){e&&clearTimeout(e)}activityTimesUp(){if(N.current.checkExtendActivityTimesUp){this.isActivityTimesUp=!0;return}this.isActivityTimesUp=!1;let e=_(),i=H("err_998"),s=aa(Vt()-this.sessionTimestamp),n=He(s.getUTCHours(),2)+":"+He(s.getUTCMinutes(),2)+":"+He(s.getUTCSeconds(),2),r=e.balance.minus(this.sessionUserBalance),o=r.lt(0)?H("youvelost"):H("youvewon");o+=e.currency+" "+st(de(r.abs())),i=i.replace("%time%",n).replace("%winlose%",o),Yt(i,"998",!0)}inactivityTimesUp(){let e=H("err_999").replace("%s%",this.inactiveTimeout);Yt(e,"999",!0)}configureLanguage(){let e=this.tryGetParameter("lang",D.English)||oi("lang");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e=D.English;break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e=D.Chinese;break;case e.indexOf("th")>=0:e=D.Thai;break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e=D.Vietnamese;break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e=D.Korean;break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e=D.Khmer;break;case e.indexOf("id")>=0:e=D.Indonesian;break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e=D.Japanese;break;case e.indexOf("tr")>=0:e=D.Turkish;break;case e.indexOf("pt")>=0:case e.indexOf("br")>=0:e=D.Portuguese;break;case e.indexOf("hi")>=0:case e.indexOf("in")>=0:e=D.Hindi;break;default:e=D.English}this.LANGUAGE=e}configureFunplay(){this.ANONYMOUS=this.FUNPLAY=this.tryGetParameter("fun","1")==="1"}configureToken(){this.TOKEN=this.tryGetParameter("token")||this.tryGetParameter("s")||oi("g")||oi("s")}configureDomain(){this.DOMAIN_FULL=location.hostname,this.DOMAIN=Rn(this.DOMAIN_FULL),this.URL_DOMAIN=this.DOMAIN,this.DOMAIN==="cloudfront.net"&&(this.DOMAIN="gpiops.com"),this.DOMAIN=this.tryGetParameter("domainlink",this.DOMAIN)}loadUrlsConfig(e){let i={loginURL:this.tryGetParameter("loginURL"),homeURL:this.tryGetParameter("homeURL"),fundsURL:this.tryGetParameter("fundsURL")||this.tryGetParameter("FundURL"),lobbyURL:this.tryGetParameter("lobbyURL"),livechatURL:this.tryGetParameter("livechatURL"),hidelobby:this.tryGetParameter("hidelobby","0"),currencySymbol:this.tryGetParameter("currencySymbol","0")==="1"};return V(e)?new Promise((s,n)=>{s(i)}):Nn(e).then(s=>{let n;try{n=JSON.parse(s.responseText)}catch{return console.warn("error in parse config.json"),i}return{loginURL:this.applyDomain(n.loginURL),homeURL:this.applyDomain(n.homeURL),fundsURL:this.applyDomain(n.fundsURL),lobbyURL:this.applyDomain(n.lobbyURL),livechatURL:this.applyDomain(n.livechatURL),hidelobby:n.hidelobby?String(n.hidelobby):"0",currencySymbol:n.currencySymbol}}).catch(s=>(console.warn("error in get config.json"),i))}applyDomain(e){if(e)return e.replace("[%%DOMAINLINK%%]",this.DOMAIN).replace("[%%URLDOMAIN%%]",this.URL_DOMAIN).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL)}verify(){return new Promise((e,i)=>{V(this.OPERATOR)&&i("The operator parameter is missing!"),!this.FUNPLAY&&V(this.TOKEN)?window.location.href=this.loginUrl:e()})}getDefaultLoginURL(){if(this.OPERATOR==="w88"&&this.defaultLoginURL)return this.defaultLoginURL}get loginUrl(){let e=this.applyDomain(this.LOGIN_URL||this.getDefaultLoginURL());return e?`${e}?url=`+encodeURIComponent(cl("fun","0")):this.realLobbyUrl}get hasLobbyUrl(){return this.LOBBY_URL||this.defaultLobbyUrl}get realLobbyUrl(){if(this._realLobbyUrl===void 0){if(this.HIDE_LOBBY==="1")return this._realLobbyUrl="",this._realLobbyUrl;let e=this.applyDomain(this.LOBBY_URL||"//"+this.defaultLobbyUrl),i=new fr(e);i.search||(i.search=location.search),!this.FUNPLAY&&!V(this.USER_ID)&&(pl("s")?i.setParameter("s",this.USER_ID):i.setParameter("token",this.USER_ID)),this._realLobbyUrl=i.toString()}return this._realLobbyUrl}get realPlayUrl(){let e=new fr;return e.setParameter("fun","0"),this.TOKEN?e.toString():this.loginUrl}get livechatUrl(){let e=_();return this.LIVECHAT_URL?this.applyDomain(this.LIVECHAT_URL).replace("[%%MEMBERID%%]",this.FUNPLAY?"0":e.accountName).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL).replace("[%%LANG%%]",this.LANGUAGE):""}get homeURL(){return this.applyDomain(this.HOME_URL||"//"+this.homeUrl)}get helpUrl(){if(this.HELP_URL===null){this.HELP_URL="";let e=R.json("configcommons");if(e&&e.help){let i=e.help.url,s=e.help.games[this.ID];i&&s&&(this.HELP_URL=i.replace("[%%GAME%%]",s))}this.HELP_URL=this.HELP_URL.replace("[%%LANG%%]",this.LANGUAGE)}return this.applyDomain(this.HELP_URL)}get langFullName(){return oa(["en-us","id-id","ja-jp","km-kh","ko-kr","pt-br","th-th","tr-tr","vi-vn","zh-cn"],e=>e.indexOf(this.LANGUAGE)!==-1||this.LANGUAGE==="cs"&&e==="zh-cn")}get historyUrlDomain(){let e=R.json("configcommons");return this.applyDomain(e.historyUrl)}get historyUrl(){let e=this.historyVersion?`&ver=${this.historyVersion}`:"";return this.historyUrlDomain+"?key="+this.TOKEN+"&lang="+this.langFullName+e+"&gID="+this.gID}get hasFeatures(){return!(this.features&&this.features==="false")}get miniFooter(){return this.tryGetParameter("p")==="mini"&&this.tryGetParameter("footer")==="1"}get isWinWays(){return this.winWays&&this.winWays!==""}get isMultiplierDefaultLastIndex(){return this.multiplierDefaultIndex&&this.multiplierDefaultIndex==="last"}get multiplierAsCreditBet(){return this.creditBet==="true"}get isVibrationActivated(){return this.vibrationActivated==="true"}get mockFroundToggle(){return this.tryGetParameter("mfr")==="1"&&this.FUNPLAY&&_().demo==="1"}checkActivityTimesUp(){this.isActivityTimesUp&&this.activityTimesUp()}}let ml=class extends Gr{constructor(){super(),this.NUM_OF_ROW=3,this.NUM_OF_COLUMN=5,this.PAYLINES=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,0,0],[2,2,1,2,2],[1,2,2,2,1],[1,0,0,0,1],[1,0,1,0,1],[1,2,1,2,1],[0,1,0,1,0],[2,1,2,1,2],[1,1,0,1,1],[1,1,2,1,1],[0,1,1,1,0],[2,1,1,1,2],[0,1,2,2,2],[2,1,0,0,0],[0,2,0,2,0],[2,0,2,0,2],[0,2,2,2,0],[2,0,0,0,2],[0,0,2,0,0],[2,2,0,2,2],[0,2,1,0,2],[2,0,1,2,0],[0,0,1,2,2],[2,2,1,0,0],[1,0,2,0,1],[1,2,0,2,1],[1,1,1,1,0],[1,1,1,1,2],[0,0,0,0,1],[2,2,2,2,1],[0,1,2,1,2],[2,1,0,1,0],[2,2,2,2,0],[0,0,0,0,2],[0,1,2,1,1],[2,1,0,1,1],[0,0,1,2,1],[2,2,1,0,1],[1,2,2,2,0],[1,0,0,0,2],[0,1,1,1,2],[2,1,1,1,0],[1,1,0,1,0],[1,1,2,1,2],[0,0,0,1,2]]}};function bl(t,e,i){return t<e?e:t>i?i:t}var gl=Object.defineProperty,vl=Object.getOwnPropertyDescriptor,yl=(t,e,i,s)=>{for(var n=s>1?void 0:s?vl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&gl(e,i,n),n};let yi=class extends gs{constructor(t){super(),this.options=t}activate(){this.deactivate();let t=y.get("soundService");this.playback=this.options.bgm?t.playBgm(this.options.name):t.play(this.options.name,this.options.channel,!1,this.options.softBgm),oe(this.playback)&&t.setVolume(this.options.volume,this.playback.soundId)}deactivate(){!this.options.bgm&&oe(this.playback)&&(y.get("soundService").stop(this.playback.soundId),this.playback=void 0)}static create(t,e){let i=x(t,"auto"),s=new yi({name:Bn(t),volume:bl(l(t,"volume",1),0,1),channel:c(t,"channel","default"),bgm:x(t,"bgm",!1),softBgm:x(t,"softbgm",!1)});return i&&s.activate(),s}};yi=yl([m({tag:"sound"})],yi);function me(t,e,i){let s=new t;return Hn(s,e,i)}function Hn(t,e,i){return ue(e,{scene:i.scene,parent:t,context:i.context}),k(t,e,i),t}var Sl=Object.defineProperty,wl=Object.getOwnPropertyDescriptor,xl=(t,e,i,s)=>{for(var n=s>1?void 0:s?wl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Sl(e,i,n),n};let Zs=class extends C{static create(t,e){let s=y.get("widgetService").get(ae(t,"name"));return Hn(s,t,e)}};Zs=xl([m({tag:"widget"})],Zs);class Xr{constructor(){this.log=!1}initialize(){vi(location.search).log==="1"&&(this.log=!0)}track(e){if(this.log)switch(e.type){case $.Request:Il(e.data);break;case $.Response:Pl(e.data);break;case $.Exception:_l(e.data)}}}function Il(t){console.log(t.method,t.url)}function Pl(t){console.log(t.data)}function _l(t){console.log("Error: ",t.description,`
`,t.extraInfo)}var Cl=Object.defineProperty,Tl=Object.getOwnPropertyDescriptor,Bl=(t,e,i,s)=>{for(var n=s>1?void 0:s?Tl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Cl(e,i,n),n};let Si=class extends C{constructor(){super(...arguments),this.ccy=""}show(t,e,i){this.label.value=this.ccy+t.toFixed(2),e&&(this.x=e.x+(Bt()-this.width)/2,this.y=e.y+Ie()/4),i.addChild(this),this.visible=t>0&&e!==void 0}clear(){}static create(t,e){let i=me(Si,t,e);return i.ccy=En(_().currency,I().CURRENCY_SYMBOL),i}};Si=Bl([m({tag:"multiplier"})],Si);var El=Object.defineProperty,Ol=Object.getOwnPropertyDescriptor,Ll=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ol(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&El(e,i,n),n};let Ve=class extends C{static create(t,e){return me(Ve,t,e)}};Ve=Ll([m({tag:"layer"})],Ve);var Al=Object.defineProperty,Dl=Object.getOwnPropertyDescriptor,Nl=(t,e,i,s)=>{for(var n=s>1?void 0:s?Dl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Al(e,i,n),n};const Rl={linear:TWEEN.Interpolation.Linear,curve:TWEEN.Interpolation.CatmullRom};function Ml(t){return{color:l(t,"color",0),colorRight:l(t,"colorRight",0),width:l(t,"width",1),border:l(t,"border",0),borderColor:l(t,"borderColor",0),borderColorRight:l(t,"borderColorRight",-1),borderBlur:l(t,"borderBlur",0),blur:l(t,"blur",0),blendMode:c(t,"blendMode"),portion:l(t,"portion",1.5),emitFrequency:l(t,"emitFrequency",1),emitSpeed:l(t,"emitSpeed",0),emitEndTime:l(t,"emitEndTime",0),emitOnTop:x(t,"emitOnTop",!1),direction:c(t,"direction","left"),lineOffsets:l(t,"lineOffsets",0),showAllLines:x(t,"showAllLines",!1),singleLine:x(t,"singleLine",!1),fade:l(t,"fade",0),alpha:l(t,"alpha",1),threshold:l(t,"threshold",1),segments:l(t,"segments",5),outline:l(t,"outline",1),outlineColor:l(t,"outlineColor",0),outlineBlur:l(t,"outlineBlur",1),glowColor:l(t,"glowColor",0),glowWidth:l(t,"glowWidth",1),glowBlur:l(t,"glowBlur",1),glowAlpha:l(t,"glowAlpha",1),interpolationFunc:Rl[c(t,"lineType","linear")]}}function Fl(t){return{x:l(t,"x",0),y:l(t,"y",0),width:l(t,"width",xe()*(Bt()+Xt())),height:l(t,"height",Wn()*Ie()),radius:l(t,"radius",0),color:l(t,"color",0),alpha:l(t,"alpha",.7)}}const ht=class ht extends C{constructor(e){super(),this.lines=[],this.symbolAnimGap=0,this.animTimers=[],this.numWinningCols=0,this.symbolService=y.get("symbolService"),this.options=e,this.btmContent=new Ve,this.addChild(this.btmContent),this.drawLines(),this.content=new Ve,this.addChild(this.content),this.initSymbolPrefabs(),this.hideLines()}initSymbolPrefabs(){this.symbolsPrefabs=[];for(let e=0;e<I().NUM_OF_COLUMN;e++){let i=[];for(let s=0;s<I().NUM_OF_ROW;s++)i.push(void 0);this.symbolsPrefabs.push(i)}}drawLines(){}showLines(e,i=!1,s=!0){this.hideLines(),this.hideSymbols(),this.symbols=[],this.animTimers=[];let n;for(let o of e)this.winningLine=o,this.showLine(o.index-1),n=o.animation,this.setupSymbols(o);this.options.fade&&ne(this.lineContent,this.options.fade);let r=w.get(ht.WINLINE_SYMBOLS_ADJUSTMENT);r&&r(this),s&&this.showSymbols(n,i)}redrawLines(){let e=this.getChildIndex(this.lineContent);this.removeChild(this.lineContent),this.lineContent.removeChildren(),this.lines=[],this.createJoins(),this.drawLines(),this.hideLines(),this.addChildAt(this.lineContent,e)}winlinesLoop(){}createJoins(){}showLine(e){let i=this.lines[e];i&&(i.visible=!0,i.activate())}setupSymbols(e){let i=w.get("winLineSetupSymbols");if(i){i(this,e);return}for(let s=0;s<e.positions.length;s++){let[n,r]=e.positions[s],o=this.symbolsPrefabs[n][r];if(o===void 0){let a=this.reels.getRegisterPoint(n,r);o=this.reels.getSymbol(n,r).clone(),o.col=n,o.row=r,o.x=a.x,o.y=a.y;let h=this.reels.getSymbolPos(n,r);for(let u of h)this.symbolsPrefabs[u.x][u.y]=o}this.symbols.indexOf(o)===-1&&this.symbols.push(o)}}showSymbols(e,i=!1){let s=r=>{r.reference.visible=!1,r.animate(e,i);let o=w.get("winLineSymbolStrategy");o?o({view:r.content})?this.content.addChild(r):this.btmContent.addChild(r):this.content.addChild(r),r.activate()},n=this.getSymbolAnimTimers();this.symbols.forEach(r=>{if(this.symbolAnimGap>0){let o=this.symbolAnimGap*n.indexOf(r.col);o>0?this.animTimers.push(setTimeout(()=>s(r),o)):s(r)}else s(r)})}getSymbolAnimTimers(){let e=[];if(this.symbolAnimGap>0){for(let i=0;i<this.symbols.length;i++){let s=this.symbols[i].col;e.indexOf(s)===-1&&e.push(s)}e.sort()}return this.numWinningCols=e.length,e}getRightMostSymbol(){let e=0,i;for(let s=0;s<this.symbols.length;s++)e<this.symbols[s].col&&(i=this.symbols[s]);return i}removeContent(){for(let e=0;e<this.animTimers.length;e++)clearTimeout(this.animTimers[e]);this.content.removeChildren(),this.btmContent.removeChildren()}hideLines(){for(let e of this.lines)e.visible=!1,e.deactivate()}hideSymbols(){this.symbols&&this.symbols.forEach(e=>e.reference.visible=!0),this.removeContent()}clear(){let e=[];for(let i=0;i<I().NUM_OF_COLUMN;i++)for(let s=0;s<I().NUM_OF_ROW;s++){let n=this.symbolsPrefabs[i][s];n&&e.indexOf(n)===-1&&(e.push(n),n.reference.visible=!0,this.symbolService.free(n))}this.initSymbolPrefabs(),this.removeContent(),this.hideLines(),this.symbols=void 0}resetSymbolPrefabs(){this.initSymbolPrefabs()}};ht.WINLINE_SHOW_ALL="all",ht.WINLINE_SHOW_ALL_ONCE="allonly",ht.WINLINE_SYMBOLS_ADJUSTMENT="winLineSymbolsAdjustment";let We=ht,j=class extends C{constructor(t){super(),this.options=t;let e=t.querySelector("multiplier");this.showMask=x(t,"mask");let i=w.get("multiplier");e&&(this.multiplier=i?i(e,{}):Si.create(e,{})),this.animationTimer=l(t,"timer",-1),this.mode=c(t,"mode"),this.animatedAll=x(t,"animatedAll",!0),this.animationAllTimer=l(t,"animationAllTimer",-1),this.showMask&&(this.maskOptions=Fl(t.querySelector("mask"))),this.isWinningLine=!1}show(t,e=!1){this.forceEnd=!1,this.clear(),this.winlineSound=!1,this.winLines=t,this.silent=e,this.currentWinlineLoop=0,this.addChild(this.paylines),this.hasWinLines?(this.emit(j.EVENT_WIN_PANEL_SHOW),this.addMask(),this.displayNextLine(),this.emit(j.EVENT_START)):(this.silent||this.emit(j.EVENT_LOOP),this.paylines.winlinesLoop())}close(){this.isWinningLine&&this.emit(j.EVENT_WIN_PANEL_CLOSE),this.isWinningLine=!1,this.clear()}addMask(){if(this.showMask&&this.maskSprite===void 0){let t=Me(this.maskOptions.width,this.maskOptions.height,this.maskOptions.radius,this.maskOptions.color);t.position.set(this.maskOptions.x,this.maskOptions.y),t.alpha=this.maskOptions.alpha,this.addChildAt(t,0)}else this.showMask&&this.maskSprite&&(this.addChildAt(this.maskSprite,0),this.maskSprite.visible=!0)}clear(){this.maskSprite&&(this.maskSprite.visible=!1),this.multiplier&&this.multiplier.clear(),this.currentLineIndex=this.mode===We.WINLINE_SHOW_ALL?-2:-1,this.paylines.clear(),this.clearTimer(),this.removeChildren()}get hasWinLines(){return this.winLines&&this.winLines.length>0}get currentWinLine(){return this.winLines[this.currentLineIndex]}displayNextLine(){if(this.currentLineIndex++,this.currentLineIndex===this.winLines.length||this.mode===We.WINLINE_SHOW_ALL&&this.currentLineIndex===0||this.mode===We.WINLINE_SHOW_ALL_ONCE&&this.currentLineIndex>0){if(this.currentLineIndex=0,this.winlineSound=!1,this.silent||this.emit(j.EVENT_LOOP),this.paylines.winlinesLoop(),this.forceEnd){this.close(),this.emit(j.EVENT_END);return}if(this.winlinesLoop>0){if(this.currentWinlineLoop++,this.currentWinlineLoop>=this.winlinesLoop){this.forceEnd=!0,this.close(),this.emit(j.EVENT_END);return}this.winlineSound=this.symbolSoundLoop>0&&this.currentWinlineLoop>=this.symbolSoundLoop}}let t=this.currentLineIndex===-1||this.mode===We.WINLINE_SHOW_ALL_ONCE,e=t?this.winLines:[this.currentWinLine],i=!0;t&&(i=this.animatedAll),e.length===1&&e[0].index===0&&(i=!0),this.paylines.showLines(e,this.winlineSound,i),this.isWinningLine=!0,this.emit(j.EVENT_WINLINE,e);let s=this.updateMultiplier(t);this.animationTimer>0?(this.clearTimer(),this.startTimer(t||e.length===1&&e[0].index===0)):s.content.once("animationComplete",()=>this.displayNextLine())}updateMultiplier(t=!1){if(t)return this.paylines.symbols[0];let e=this.currentWinLine,i=y.get("multiplierService"),s=i?i.getSymbol(this.paylines.symbols):this.paylines.symbols[0];return this.multiplier&&this.multiplier.show(e.win,s,this),s}getWinLineHighestSymbol(t,e=-1){let i=-1;for(let s=0;s<t.positions.length;s++){let[n,r]=t.positions[s],o=Number(this.paylines.reels.getSymbol(n,r).index);i<o&&o!=e&&(i=o)}return i===-1?e:i}clearTimer(){clearTimeout(this.timer)}startTimer(t){let e=this.animationTimer+(this.paylines.numWinningCols-1)*this.paylines.symbolAnimGap;t&&this.animationAllTimer>=0&&(e=this.animationAllTimer),this.timer=setTimeout(()=>{this.displayNextLine()},e)}static create(t,e){let i=Wl(j,t,e);return K(t,(s,n)=>{s.nodeName==="mask"&&(c(s,"render")==="canvas"&&X.type===PIXI.RENDERER_TYPE.CANVAS?(i.maskSprite=Me(i.maskOptions.width,i.maskOptions.height,i.maskOptions.radius,i.maskOptions.color),i.maskSprite.position.set(i.maskOptions.x,i.maskOptions.y),i.maskSprite.alpha=i.maskOptions.alpha):c(s,"render")==="webgl"&&X.type===PIXI.RENDERER_TYPE.WEBGL&&(i.maskSprite=new PIXI.Sprite(R.resolve(c(s,"src"))),i.maskSprite.position.set(l(s,"x"),l(s,"y")),i.maskSprite.scale.set(l(s,"scale",1)),i.maskSprite.alpha=i.maskOptions.alpha))}),i}};j.EVENT_LOOP="loop";j.EVENT_WIN_PANEL_SHOW="show";j.EVENT_WIN_PANEL_CLOSE="stopped";j.EVENT_WINLINE="winline";j.EVENT_START="start";j.EVENT_END="end";j=Nl([m({tag:"winPanel"})],j);function Wl(t,e,i){let s=y.get("winLineService"),n=N.current.getComponentByTag("reels");n||(n=N.current.getComponentByID("reels"));let r=new t(e);return r.paylines=s.generate(n.reels),r.paylines.reels=n,r.paylines.symbolAnimGap=l(e,"symbolAnimGap",0),r.winlinesLoop=l(e,"winlinesLoop",5),r.symbolSoundLoop=l(e,"symbolSoundLoop",2),r.x=n.x,r.y=n.y,k(r,e,i),r}var Hl=Object.defineProperty,kl=Object.getOwnPropertyDescriptor,Ul=(t,e,i,s)=>{for(var n=s>1?void 0:s?kl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Hl(e,i,n),n};let zt=class extends C{constructor(t,e,i,s,n,r,o=-1,a=-1){super(),this.content=new PIXI.Graphics,this.content.beginFill(i),n&&o<0&&a<0&&this.content.lineStyle(n,r),s?this.content.drawRoundedRect(0,0,t,e,s):this.content.drawRect(0,0,t,e),this.drawShadow(n,o,t,e),this.drawShadow(n,a,t,e,t,e),X.type!==PIXI.RENDERER_TYPE.WEBGL&&this.content.generateCanvasTexture?(this.canvasContent=new PIXI.Sprite(this.content.generateCanvasTexture(1,1)),this.addChild(this.canvasContent)):this.addChild(this.content)}set tint(t){t<0||(this.canvasContent?this.canvasContent.tint=t:this.content.tint=t)}drawShadow(t,e,i,s,n=0,r=0){e<0||(this.content.lineStyle(t,e),this.content.moveTo(n,r),this.content.lineTo(i,0),this.content.moveTo(n,r),this.content.lineTo(0,s))}static create(t,e){Be(t,"color",v.resolve(c(t,"color"))),Be(t,"innerShadow",v.resolve(c(t,"innerShadow")));let i=new zt(l(t,"width",0),l(t,"height",0),l(t,"color",0),l(t,"radius",0),l(t,"border",0),l(t,"bcolor",0),l(t,"innerShadow",-1),l(t,"dropShadow",-1));return i.tint=l(t,"tint",-1),k(i,t,e),ue(t,{scene:e.scene,parent:i,context:e.context}),i}};zt=Ul([m({tag:"rectangle"})],zt);var $l=Object.defineProperty,Vl=Object.getOwnPropertyDescriptor,jl=(t,e,i,s)=>{for(var n=s>1?void 0:s?Vl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&$l(e,i,n),n};let gt=class extends C{constructor(t,e,i,s){super(),this.content=new PIXI.Graphics,this.content.beginFill(e),i&&this.content.lineStyle(i,s),this.content.drawPolygon(t),this.addChild(this.content)}static create(t,e){let i=new gt(Ee(t,"path"),l(t,"color",0),l(t,"border",0),l(t,"bcolor",0));return k(i,t,e),ue(t,{scene:e.scene,parent:i,context:e.context}),i}};gt=jl([m({tag:"polygon"})],gt);var Gl=Object.defineProperty,Xl=Object.getOwnPropertyDescriptor,Yl=(t,e,i,s)=>{for(var n=s>1?void 0:s?Xl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Gl(e,i,n),n};let Qs=class extends ce{configure(t){this.options=t}translate(t){this.dict===void 0&&this.initDict();let e=Jo(t);for(let i=0;i<e.length;i++){let s=e[i];t=t.replace(`{{${s}}}`,this.dict[s])}return t}initDict(){if(this.dict!==void 0)return;let t=c(this.options,"resource").split(",");for(let e=0;e<t.length;e++)if(this.dict===void 0)this.dict=R.json(t[e]);else{let i=R.json(t[e]);for(let s in i)this.dict[s]=i[s]}}};Qs=Yl([m({tag:"textService",category:"service"})],Qs);var zl=Object.defineProperty,ql=Object.getOwnPropertyDescriptor,Kl=(t,e,i,s)=>{for(var n=s>1?void 0:s?ql(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&zl(e,i,n),n};let en=class extends ce{configure(t){this.options=t}getSymbol(t){if(t.length===0)return;let e=c(this.options,"mode","last");if(e==="last")return Ms(t);if(e==="middle"){let i=t.length,s=Math.floor(i/2);return i%2==0&&Ms(t).col==xe()-1&&(s-=1),t[s]}else return e==="third"?t.length>2?t[2]:Ms(t):t[0]}};en=Kl([m({tag:"multiplierService",category:"service"})],en);var Jl=Object.defineProperty,Zl=Object.getOwnPropertyDescriptor,Ql=(t,e,i,s)=>{for(var n=s>1?void 0:s?Zl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Jl(e,i,n),n};let tn=class extends ce{constructor(){super(...arguments),this.adjustment={size:0,x:0,y:0}}configure(t){this.options=t,this.adjustment.x=l(t,"x",0),this.adjustment.y=l(t,"y",0),this.adjustment.size=l(t,"size",0)}};tn=Ql([m({tag:"fontService",category:"service"})],tn);var eh=Object.defineProperty,th=Object.getOwnPropertyDescriptor,ih=(t,e,i,s)=>{for(var n=s>1?void 0:s?th(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&eh(e,i,n),n};let sn=class extends ce{startup(){if(v){let t=v.LANGUAGE;[D.English,D.Japanese,D.Chinese].indexOf(t)===-1&&(t=D.English);let e=`assets/icons/icon192.${t}.jpg`;this.addLink("apple-touch-icon",e),this.addLink("apple-touch-startup-image",e)}}setTitle(){document.title=Ss("{{gametitle}}")}addLink(t,e){var i=document.createElement("link");i.rel=t,i.href=e,document.head.appendChild(i)}};sn=ih([m({tag:"i18nService",category:"service"})],sn);var sh=Object.defineProperty,nh=Object.getOwnPropertyDescriptor,Yr=(t,e,i,s)=>{for(var n=s>1?void 0:s?nh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&sh(e,i,n),n};let wi=class extends gs{constructor(t){super(),this.tween=t}activate(){this.active!==!0&&(this.tween.start(),this.active=!0)}deactivate(){this.active!==!1&&(this.tween.stop(),this.active=!1)}static create(t,e){let i=Bn(t),s=y.get("tweenService");if(s&&e.parent instanceof PIXI.DisplayObject){let n=new wi(s.create(i,e.parent,t));return x(t,"auto")&&n.activate(),n}}};wi=Yr([m({tag:"tween"})],wi);let nn=class extends ce{constructor(){super(...arguments),this.tweens={}}register(t,e){this.tweens[t]=e}create(t,e,i){return this.tweens[t](e,i)}startup(){PIXI.Ticker.shared.add(this.update)}shutdown(){PIXI.Ticker.shared.remove(this.update)}update(){TWEEN.update()}};nn=Yr([m({tag:"tweenService",category:"service"})],nn);var rh=Object.defineProperty,oh=Object.getOwnPropertyDescriptor,ah=(t,e,i,s)=>{for(var n=s>1?void 0:s?oh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&rh(e,i,n),n};let xi=class extends ce{configure(t){this.options=t}generate(){return lh(this.options,hh)}};xi=ah([m({tag:"winLineService",category:"service"})],xi);function lh(t,e){w.get("reels");let i=Bt(),s=Ie(),r=I().PAYLINES,o=r.length,a=Ml(t),h=[];for(let u=0;u<o;u++){let p=r[u],g=p.length,b=[];for(let L=0;L<g;L++){let O=p[L],W={x:zr(L)+i/2,y:qr(O)+s/2};b.push(W)}b.length>=2&&(b.unshift({x:b[0].x-i/2,y:b[0].y}),b.push({x:b[b.length-1].x+i/2,y:b[b.length-1].y})),h.push(b)}return a.joints=h,new e(a)}class hh extends We{constructor(e){super(e),e.emitOnTop&&this.addChild(this.lineContent)}drawLines(){this.lineContent=new Ve,this.addChild(this.lineContent);for(let e of this.options.joints){let i=this.drawLine(e);this.lines.push(i),this.lineContent.addChild(i)}}drawLine(e){let i=new Ve;if(this.options.border>0){let n=this.joinLines(e,2*this.options.border+this.options.width,this.options.borderColor);if(i.addChild(n),this.options.borderBlur)if(X.type===PIXI.RENDERER_TYPE.WEBGL){let r=new PIXI.filters.BlurFilter;r.blur=this.options.borderBlur,n.filters=[r]}else n.alpha=this.options.borderBlur/80}let s=this.joinLines(e,this.options.width,this.options.color);return i.addChild(s),i}createJoins(){w.get("reels");let e=Bt(),i=Ie(),n=I().PAYLINES,r=n.length,o=[];for(let a=0;a<r;a++){let h=n[a],u=[];for(let p=0;p<h.length;p++){let g=h[p],b={x:zr(p)+e/2,y:qr(g)+i/2};u.push(b)}u.length>=2&&(u.unshift({x:u[0].x-e/2,y:u[0].y}),u.push({x:u[u.length-1].x+e/2,y:u[u.length-1].y})),o.push(u)}this.options.joints=o}joinLines(e,i,s){let n=new PIXI.Graphics,r=e.length;if(n.lineStyle(i,s),X.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.blur>0){let o=new PIXI.filters.BlurFilter;o.blur=this.options.blur,n.filters=[o]}this.options.blendMode&&(this.options.blendMode==="screen"?n.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(n.blendMode=PIXI.BLEND_MODES.ADD)),this.options.alpha!==void 0&&this.options.alpha!==null&&(n.alpha=this.options.alpha);for(let o=0;o<r;o++){let a=e[o];o===0?n.moveTo(a.x,a.y):n.lineTo(a.x,a.y)}return n}}function zr(t){return t*(Bt()+Xt())}function qr(t){return t*(Ie()+Ks())}let ai=["VisibilityState","visibilitychange","Hidden"],Wt,kn=[],Un=[];function uh(){if(!Wt){let t=["webkit","ms","o","moz","khtml"];for(let e of t)if(e+ai[2]in document)return Wt=e,Wt}}function $n(t){return Wt==null?ai[t].substring(0,1).toLowerCase()+ai[t].substring(1):Wt+ai[t]}function ch(t){return document[$n(t)]}function Kr(t){let e=t?kn:Un,i=e.length;for(;i--;)e[i]()}function Us(){Kr(!0)}function $s(){Kr(!1)}function ph(){try{if(dh())document.addEventListener($n(1),()=>{ch(2)?$s():Us()},!0);else if(document.addEventListener)window.addEventListener("focus",Us,!0),window.addEventListener("blur",$s,!0);else{let t=document.attachEvent;t&&(t("onfocusin",Us),t("onfocusout",$s))}}catch(t){console.error(t)}}function dh(){return $n(2)in document}function fh(t){kn.push(t)}function mh(t){Un.push(t)}function bh(){kn=[],Un=[]}function gh(){uh(),ph()}class vh{constructor(e=1,i="stage"){this.imageUrl="assets/swipeup.png",this.enabled=!0,this.uc=!1,this.dolfin=!1,this.chromeIOS=!1,this.iphone=!1,this.qq=!1,this.ios=!1,this.ipad=!1,this.safari=!1,this.vivonative=!1,this.initHeight=-1,this.canvasName=i,this.resolution=e;let s=window.navigator.userAgent;this.canvas=document.getElementById(i),this.ios=s.toLowerCase().indexOf("mac")>-1,this.ipad=s.toLowerCase().indexOf("ipad")>-1,this.skipper=s.toLowerCase().indexOf("qqbrowser")>-1||s.toLowerCase().indexOf("sony")&&s.toLowerCase().indexOf("ucbrowser")>-1,this.uc=s.toLowerCase().indexOf("ucbrowser")>-1,this.qq=this.isQQ(s),this.chromeIOS=s.toLowerCase().indexOf("crios")>-1,this.iphone=s.toLowerCase().indexOf("iphone")>-1,this.vivonative=s.toLowerCase().indexOf("vivobrowser")>-1;let n=/Chrome\/([0-9.]+)/.exec(s),r=null;n&&(r=/Chrome\/([0-9.]+)/.exec(s)[1]),this.dolfin=s.toLowerCase().indexOf("dolfin")>-1||r&&Number(r.split(".")[0])<34}isQQ(e){let i=e.toLowerCase().match(/chrom(e|ium)\/([0-9]+)\./);i=i?parseInt(i[2],10):!1;let s=e.match(/Mobile\/\w{5,}\sQQ\/(\d+[\.\d]+)/),n=window.innerWidth<780;return!!((i<45||s)&&n)}get isLandscape(){return window.innerHeight<=window.innerWidth}get isFullScreen(){let e=10;if(this.isLandscape||(e=8,this.skipper&&(e=4)),"standalone"in window.navigator&&window.navigator.standalone)return this.enabled=!1,!0;let i=Math.abs(this.canvas.width/this.resolution-window.innerWidth)<window.innerWidth/e,s=document.webkitCurrentFullScreenElement&&typeof document.webkitCurrentFullScreenElement<"u"||document.fullscreenElement!==null&&document.fullscreenElement!==void 0||document.mozFullScreenElement!==null&&document.mozFullScreenElement!==void 0||document.webkitFullscreenElement!==null&&document.webkitFullscreenElement!==void 0||document.msFullscreenElement!==null&&document.msFullscreenElement!==void 0;return i&&s}setFullscreen(){this.enabled&&(this.uc||this.dolfin||this.qq||this.vivonative||this.isFullScreen||(this.applyFullscreenAPI(),this.ios||window.scrollTo(0,1)))}addOverlay(){if(!window.addEventListener)return;let e=document.getElementById("swipeLayer");if(e){e.style.width!==this.canvas.style.width&&(e.style.width=this.canvas.style.width,e.style.marginLeft=this.canvas.style.marginLeft);return}let i=window.innerHeight*(this.chromeIOS?1:2),s=`<div id="swipeLayer" style="position: fixed; left:${this.canvas.style.marginLeft}; top:0; width:${this.canvas.style.width}; min-height:${i}px; height:${i}px; display:block; ">
</div>`;var n=document.createElement("div");if(n.innerHTML=s,e=n.firstChild,this.addEventListeners(e),this.canvas.parentElement.insertBefore(e,this.canvas),this.chromeIOS||document.getElementById("swipeBackground"))return;let r=`<div id="swipeBackground" style="position: relative; z-index:-1; left:0; top:0; width:${window.innerWidth}px; min-height:${i}px; height:${i}px; display:block; ">
</div>`;n=document.createElement("div"),n.innerHTML=r;let o=n.firstChild;this.addEventListeners(o),window.document.body.insertBefore(o,window.document.body.lastChild)}addEventListeners(e){e.addEventListener("touchstart",()=>{this.enabled=!1,this.removeOverlay()}),e.addEventListener("touchend",()=>{this.enabled=!0,window.scrollTo(0,1)}),e.addEventListener("touchcancel",()=>{this.enabled=!0,window.scrollTo(0,1)})}removeOverlay(){let e=document.getElementById("swipeLayer");e&&(e.parentElement.removeChild(e),this.chromeIOS||window.scrollTo(0,1))}applyFullscreenAPI(){if(this.isFullScreen)return;let e=window.document.documentElement,i=document.requestFullscreen||e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen||e.requestFullScreen||e.webkitCurrentRequestFullScreen;i&&i.call(e)}update(){!this.enabled||!this.ios||this.uc||this.qq||this.canvas.height==screen.width-20||this.canvas.width===window.innerWidth&&this.canvas.height===window.innerHeight||(this.isLandscape?this.addOverlay():this.removeOverlay())}}var yh=Object.defineProperty,Sh=Object.getOwnPropertyDescriptor,wh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Sh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&yh(e,i,n),n};const rn="notify:visibility.visible",on="notify:visibility.hidden";let an=class extends ce{configure(t){}startup(){gh(),fh(()=>{ee.emit(rn)}),mh(()=>{ee.emit(on)}),E.mobile&&(this.fullscreenAPI=new vh(P.resolution),this.fullscreenAPI.enabled=!1,B.add(this))}set fullScreenEnabled(t){this.fullscreenAPI&&(this.fullscreenAPI.enabled=t)}setDeviceFullscreen(){this.fullscreenAPI&&this.fullscreenAPI.setFullscreen()}shutdown(){B.remove(this),bh()}advanceTime(t){return this.fullscreenAPI.update(),!0}};an=wh([m({tag:"deviceService",category:"service"})],an);var xh=Object.defineProperty,Ih=Object.getOwnPropertyDescriptor,Ph=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ih(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&xh(e,i,n),n};class _h{constructor(){this.channels={}}lengthOfChannels(){return Object.keys(this.channels).length}lengthOfChannel(e){return V(this.channels[e])?0:Object.keys(this.channels[e]).length}exist(e,i){let s=this.channels[e];return oe(s)&&oe(s[i])}getPlaybackBySoundId(e){for(let i in this.channels){let s=this.channels[i];for(let n in s){let r=s[n];if(r.soundId===e)return r}}}add(e,i,s,n){let r=this.channels[e];V(r)&&(r={},this.channels[e]=r);let o={channelId:e,name:i,soundId:s,volume:1,softBgm:n};return r[i]=o,o}removeBySoundId(e){return this.removeBy(i=>i.soundId===e)}removeByName(e){return this.removeBy(i=>i.name===e)}removeBy(e){for(let i in this.channels){let s=this.channels[i];for(let n in s){let r=s[n];if(e(r))return delete s[n],Ao(s)&&delete this.channels[i],r}}}}let ln=class extends ce{constructor(){super(...arguments),this.howlers={},this._muted=!1,this._volume=1,this.audios={},this.scope="sounds",this.commonScope="commonsounds"}configure(t){let e=c(t,"resource");e!==this.commonScope&&(this.defaultScope=e,this.scope=this.defaultScope),this.softBgmValue=l(t,"softBgm",.3),this.channelManager=new _h;let i=oi(v.ID+"-muted",!0);this.muted=i=="true"}get backgroundMusic(){return this.bgm}startup(){y.has("deviceService")||y.register("deviceService",an).startup(),ee.on(rn,()=>{this.ready&&!this.muted&&Howler.volume(this._volume)}),ee.on(on,()=>{this.ready&&Howler.volume(0)})}shutdown(){ee.off(rn),ee.off(on)}get ready(){return oe(this.howlers[this.scope])}get soundPlayer(){try{if(!this.ready){let t=R.json(this.scope);oe(t)&&(t.onend=e=>{this.resetBgm(e),this.channelManager.removeBySoundId(e)},this.howlers[this.scope]=new Howl(t))}return this.howlers[this.scope]}catch{return null}}play(t,e="default",i=!1,s=!1,n){if(E.isUCBrowser)return!this._muted&&t==="spin"&&this.playAudio(t),null;if(!i&&!this.soundPlayer&&this.channelManager.exist(e,t)||!this.soundPlayer)return null;if(i){let o=this.channelManager.removeByName(t);o&&this.stop(o.soundId)}s&&this.softBgm();let r=this.soundPlayer.play(t);return n&&this.soundPlayer.once("end",n,r),this.channelManager.add(e,t,r,s)}playAudio(t){this.audios[t]?(this.audios[t].ended||(this.audios[t].currentTime=0),this.audios[t].play()):this.loadAudio(t).play()}loadAudio(t){let e=document.createElement("audio");return e.setAttribute("src","./assets/"+t+".m4a"),e.load(),e.addEventListener("canplaythrough",()=>{this.audios[t]=e}),e}soundURLS(t){let e=t.substr(0,t.length-3),i=[],s=["m4a","ogg","ac3","mp3"];for(let n=0;n<s.length;n++)i.push(e+s[n]);return i}stopBgm(){this.bgm&&this.stop(this.bgm.soundId),this.bgm=void 0}playBgm(t,e=!1){if(!(!e&&this.bgm&&this.bgm.name===t))return this.stopBgm(),this.bgm=this.play(t,"bgm",!0),this.bgm}softBgm(){this.bgm&&this.setVolume(this.softBgmValue*this.bgm.volume,this.bgm.soundId,!0)}fade(t,e,i,s,n){this.soundPlayer.fade(t,e,i,s),n&&this.soundPlayer.once("fade",()=>{n()})}resetBgm(t){if(this.bgm&&this.bgm.soundId!==t){let e=this.channelManager.getPlaybackBySoundId(t);e&&e.softBgm&&this.setVolume(this.bgm.volume,this.bgm.soundId,!0)}}resume(){for(let t in this.channelManager.channels){let e=this.channelManager.channels[t];for(let i in e)this.soundPlayer.play(e[i].soundId)}}pause(t){return this.resetBgm(t),this.soundPlayer.pause(t),this}stop(t){if(t)return this.resetBgm(t),this.channelManager.removeBySoundId(t),this.soundPlayer.stop(t),this}switchScope(t){return this.setVolume(0),this.scope=this.defaultScope,t?(this.scope=this.commonScope,this.soundPlayer?(this.setVolume(1),!0):(this.scope=this.defaultScope,!1)):(this.setVolume(1),!0)}setVolume(t,e,i=!1){if(!i){let s=this.channelManager.getPlaybackBySoundId(e);s&&(s.volume=t)}return this.soundPlayer.volume(t*this.volume,e),this}getVolume(){return this.soundPlayer.volume()}set volume(t){this._volume=t,this._muted||Howler.volume(t)}get volume(){return this._volume}get muted(){return this._muted}set muted(t){this._muted=t,dl(v.ID+"-muted",t),t?Howler.volume(0):Howler.volume(this._volume)}};ln=Ph([m({tag:"soundService",category:"service"})],ln);function nt(t,e=0){return Math.floor(Math.random()*(t-e))+e}class Ch{constructor(e,i){this.capability=e,this.factory=i,this.pool=[],this.metrics={totalAlloc:0,totalFree:0}}allocate(...e){let i;return this.pool.length===0?(i=this.factory.apply(this.factory,e),this.metrics.totalAlloc++):(i=this.pool.pop(),this.metrics.totalFree--),i}free(e){this.capability<=this.pool.length?(this.destroy(e),e=void 0):this.pool.indexOf(e)===-1&&this.pool.push(e),this.metrics.totalFree++}destroy(e){let i=e;i.dispose&&i.dispose()}collect(e){this.pool.forEach(s=>{this.destroy(s)}),this.pool=[];let i=this.metrics.totalAlloc-this.metrics.totalFree;this.clearMetrics(i)}find(e){let i=this.pool.length;for(var s=0;s<i;s++){let n=this.pool[s];if(e(n))return n}}clearMetrics(e){this.metrics.totalAlloc=e||0,this.metrics.totalFree=0}}const mr="idle",Th="spin",Bh="animate",Eh="events:symbol:state";let br=class Jr extends C{constructor(e,i,s){super(),this.index=e,this.prefab=i,this.masking=s,this.attachedFollow=!1,this.row=-1,this.col=-1,this.frame=new PIXI.Container,this.views={}}idle(){this.setState(mr)}spin(){this.setState(Th)}animate(e=Bh,i=!0){this.setState(e,i)}set onAnimationComplete(e){this.content.onComplete=e}deactivate(){super.deactivate(),this.deactivateViews()}clone(){let i=y.get("symbolService").get(this.index);return i.reference=this,i.col=this.col,i.row=this.row,i}free(){this.attachedSymbol=void 0,this.attachedFollow=!1,this.reference=void 0,this.deactivate(),this.views={}}attach(e,i=!1){this.attachedSymbol=e,this.attachedFollow=i,this.updateAttached()}updateAttached(){this.attachedSymbol&&this.attachedFollow&&(this.attachedSymbol.x=this.x,this.attachedSymbol.y=this.y)}checkCurrentState(e){return this.state===e}deactivateViews(){for(let e in this.views)e&&this.views[e].deactivate()}resetStateViews(){for(let e in this.views)this.views[e]=void 0}setState(e,i=!1){this.hasState(e)||(e=mr),this.deactivate(),this.removeChildren();let s=this.views[e];if(i){if(s=$e(this.getPrefab(e),{}),s.components)for(let n=0;n<s.components.length;n++)s.components[n].options&&s.components[n].options.volume&&(s.components.splice(n,1),Y("winline","default",!0))}else s||(s=$e(this.getPrefab(e),{}));return this.content=s,this.addChild(this.content),this.activate(),this.views[e]=s,ee.emit(Eh,this),this.masking&&(this.addChild(this.masking),this.content.mask=this.masking),this.addChild(this.frame),this.state=e,this.content}hasState(e){return this.prefab&&this.prefab.definitions&&this.prefab.definitions[e]!==void 0}getPrefab(e){return this.prefab?this.prefab.definitions[e]:null}static create(e,i,s){let n=null;s&&(n=Me(s.width,s.height,s.radius),n.position.set(s.x,s.y));let r=new Jr(e,i,n);return r.name=`symbol#${e}`,r}};var Oh=Object.defineProperty,Lh=Object.getOwnPropertyDescriptor,Ah=(t,e,i,s)=>{for(var n=s>1?void 0:s?Lh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Oh(e,i,n),n};let hn=class extends ce{configure(t){if(this.total=l(t,"total"),t.childElementCount<this.total&&V(t.querySelector("#default")))throw new Error("the number of symbol prefabs must equals the total of symbols or there is a prefab named 'default'.");this.size=Or(t,"size"),this.multiSize=ko(t,"multiSize");let e=Ho(t,"anchor");this.poolsOn=x(t,"pool"),this.anchor={x:this.size.width*e.x,y:this.size.height*e.y},this.symbolPrefabs={},this.symbolMasking={},K(t,(i,s)=>{let n=te(i),r={definitions:{}};K(i,(o,a)=>{r.definitions[Bn(o)]=o.firstElementChild}),this.symbolPrefabs[n]=r,x(i,"mask",!1)&&(this.symbolMasking[n]={x:l(i,"x",0),y:l(i,"y",0),width:l(i,"width",this.size.width),height:l(i,"height",this.size.width),radius:l(i,"radius",0)})}),this.pools={}}pickMany(t){let e=[];for(let i=0;i<t;i++)e.push(nt(this.total));return e}pickOne(){return this.get(nt(this.total))}get(t){let e=this.symbolPrefabs[t.toString()];return V(e)&&(e=this.symbolPrefabs.default),this.poolsOn?this.getObjectPool(t).allocate(t,e,this.symbolMasking[t.toString()]):br.create(t,e,this.symbolMasking[t.toString()])}free(t){t.free(),this.poolsOn&&this.getObjectPool(t.index).free(t)}hasSymbol(t){return!V(this.symbolPrefabs[t.toString()])}getObjectPool(t){let e=t.toString(),i=this.pools[e];return V(i)&&(this.pools[e]=i=new Ch(5,br.create)),i}};hn=Ah([m({tag:"symbolService",category:"service"})],hn);var Dh=Object.defineProperty,Nh=Object.getOwnPropertyDescriptor,Rh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Nh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Dh(e,i,n),n};let un=class extends ce{configure(t){this.options=t}create(){return w.get(`component:animator:${c(this.options,"type")}`).create(this.options)}};un=Rh([m({tag:"reelAnimatorService",category:"service"})],un);var Mh=Object.defineProperty,Fh=Object.getOwnPropertyDescriptor,Wh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Fh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Mh(e,i,n),n};let cn=class extends ce{constructor(){super(...arguments),this.cache={}}configure(t){this.options=t}get(t,e={}){let i=No(this.options,t);if(oe(i)){let s=c(i,"mode","new");if(s==="new")return this.create(i,e);if(s==="singleton")return this.takeFromCache(i,e)}}dispose(){for(let t in this.cache)this.cache[t].deactivate();this.cache={}}create(t,e){let i=$e(t,e);return k(i,t,e),i}takeFromCache(t,e){let i=te(t);return this.cache[i]||(this.cache[i]=this.create(t,e)),this.cache[i]}};cn=Wh([m({tag:"widgetService",category:"service"})],cn);var Hh=Object.defineProperty,kh=Object.getOwnPropertyDescriptor,Uh=(t,e,i,s)=>{for(var n=s>1?void 0:s?kh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Hh(e,i,n),n};let Ii=class extends ce{constructor(){super(...arguments),this.started=!1,this.strictMode=!1,this.strictLandscapeWeb=!1}getOrientation(){return this.strictLandscapeWeb&&!E.mobile&&!E.tablet||window.innerHeight<=window.innerWidth?F.LANDSCAPE:F.PORTRAIT}get isPortrait(){return this.getOrientation()===F.PORTRAIT}get isLandscape(){return this.getOrientation()===F.LANDSCAPE}configure(t){}startup(){this.mode=v.orientation||"landscape",this.started=!0,this.strictMode=v.strictMode&&v.strictMode==="true",this.strictLandscapeWeb=v.strictLandscapeWeb&&v.strictLandscapeWeb==="true"}};Ii=Uh([m({tag:"orientationService",category:"service"})],Ii);var $h=Object.defineProperty,Vh=Object.getOwnPropertyDescriptor,jh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Vh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&$h(e,i,n),n};const Pi="events:resize",pn="events:web_resize";let dn=class extends ce{constructor(){super(...arguments),this.prevOrientation=0}configure(t){}startup(){y.has("orientationService")||y.register("orientationService",Ii).startup(),this.orientationService=y.get("orientationService"),this.orientationService.started||this.orientationService.startup(),this.resizeAndOrientaionChecker=setInterval(()=>{this.checkResize(),this.checkSecondaryOrientation()},30),this.checkResize()}checkResize(){let t=window.innerWidth,e=window.innerHeight;(this.windowHeight!==e||this.windowWidth!==t)&&(this.windowHeight=e,this.windowWidth=t,this.layout(),ee.emit(Pi),ee.emit(pn))}checkSecondaryOrientation(){this.windowOrientation!==window.orientation&&(this.windowOrientation=window.orientation,this.layout())}shutdown(){clearInterval(this.resizeAndOrientaionChecker)}layout(){let t=P,e=t.minWidth,i=t.minHeight,s=t.width,n=t.height,r=1,o=0,a=this.orientationService.getOrientation();if(Vs(!1),this.isBothEnaled&&a===F.PORTRAIT&&!this.orientationService.strictLandscapeWeb||this.isPortraitOnlyEnabled&&this.isNotMobile&&a===F.LANDSCAPE||this.isBothEnaled&&a===F.PORTRAIT&&this.orientationService.strictLandscapeWeb&&this.isMobileOrTablet?(s=t.height,n=t.width,e=t.minHeight,i=t.minWidth):this.isPortraitOnlyEnabled&&this.isMobileOrTablet&&a===F.LANDSCAPE?Vs(!0):E.mobile&&(this.orientationService.mode==="portrait"&&a===F.LANDSCAPE||this.orientationService.mode==="landscape"&&a===F.PORTRAIT)&&(this.orientationService.strictMode?this.orientationService.mode==="portrait"&&Vs(!0):(o=Math.PI/2,s=t.height,n=t.width,e=t.minHeight,i=t.minWidth)),e>0&&i>0&&this.isMobileOrTablet){let L=Math.min(window.innerWidth/e,window.innerHeight/n),O=Math.min(window.innerWidth/(a===F.PORTRAIT?e:s),window.innerHeight/i);r=Math.max(L,O)}else r=Math.min(window.innerWidth/(e>0?e:s),window.innerHeight/n);let h=Math.ceil(s*r),u=Math.ceil(n*r);G.scale.set(r),G.rotation=o,this.isBothEnaled?(G.position.set(0,0),G.pivot.set(0,0)):G.position.set(h/2,u/2),X.resize(h,u);let p=(window.innerWidth-h)/2,g=(window.innerHeight-u)/2,b=t.canvas;b.style.marginLeft=p+"px",b.style.marginTop=g+"px",b.style.width=h+"px",b.style.height=u+"px",this.offsetX=p/r,this.offsetY=g/r,N.current&&(this.prevOrientation!=a&&this.isBothEnaled&&N.current.onOrientationChange(a),N.current.onSceneResize()),this.prevOrientation=a,this.scrollTop()}scrollTop(){let t=E;t.mobile&&(t.android&&!t.chrome?window.scrollTo(0,1):window.scrollTo(0,0))}get isBothEnaled(){return this.orientationService.mode==="both"||this.orientationService.mode==="portrait-only"}get isPortraitOnlyEnabled(){return this.orientationService.mode==="portrait-only"}get isNotMobile(){return!E.mobile&&!E.tablet}get isMobileOrTablet(){return E.mobile||E.tablet}get deviceViewportOffset(){let t=window.innerWidth,e=window.innerHeight,i=P.width,s=P.height,n=G.scale.x,r=new PIXI.Point;return this.isMobileOrTablet&&this.orientationService.getOrientation()===F.PORTRAIT&&(i=P.height,s=P.width),t<i*n&&(r.x=Math.floor((i*n-t)*(.5/n))),e<s*n&&(r.y=Math.floor((s*n-e)*(.5/n))),r}};dn=jh([m({tag:"layoutService",category:"service"})],dn);function Vs(t){let e=document.getElementById("portraitonly");if(!e)return;let i=document.getElementById("portraitonlytext");if(i){let s="Please use portrait mode for the best experience.";try{H("portraitonly")&&(s=H("portraitonly"))}catch{}V(s)&&(s="Please use portrait mode for the best experience."),i.textContent=s}Gh(!t),e.style.visibility=t?"visible":"hidden"}function Gh(t){let e=document.getElementById("wrapper");e&&(e.style.visibility=t?"visible":"hidden")}bs([gi,yi,wi,j,Zs,zt,gt]);bs([hn,un,cn,dn,Ii,xi,ln,Qs,en,tn,sn,nn]);w.map("context").toSingleton(ml);w.map("user",nl).asSingleton();w.map("normalSpinParser").toValue(Vr);Mr([Xr]);function Xh(){$a(slotapp)}function Is(t,e,i){let s=new t({value:c(e,"value"),style:ds(e),bitmap:x(e,"bitmap",!1),align:c(e,"align","left"),case:c(e,"case"),comma:x(e,"comma",!0),verticalAlign:c(e,"verticalAlign"),decimalPlace:l(e,"decimalPlace",2),duration:l(e,"duration",500),prefix:c(e,"prefix",""),suffix:c(e,"suffix",""),wordWrap:x(e,"wordWrap",!1),wordWrapWidth:l(e,"wordWrapWidth",0),letterSpacing:l(e,"letterSpacing",0),lineHeight:l(e,"lineHeight",0),lineJoin:c(e,"lineJoin","miter"),animZoom:x(e,"animZoom",!1),animScale:l(e,"animScale",1.2),durationMultiplierByValue:l(e,"durationMultiplierByValue")});return k(s,e,i),ue(e,{scene:i.scene,parent:s,context:i.context}),An(s,e,"align",c,"left"),s}var Yh=Object.defineProperty,zh=Object.getOwnPropertyDescriptor,qh=(t,e,i,s)=>{for(var n=s>1?void 0:s?zh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Yh(e,i,n),n};let vt=class extends C{constructor(e){super(),this.hasComma=!0,this.options=e,this.initText(),this.update()}initText(){let e=this.options.style;this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:e.fontSize,fontName:e.fontFamily}),this.text.tint=e.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,e),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text)}set value(e){this.text.text=e,this.update()}set align(e){this.options.align=e,this.update()}set tint(e){this.text.tint=e}set fill(e){this.options.bitmap||(this.text.style.fill=e)}get value(){return this.text.text}get anchorX(){if(this.options.align==="left")return 0;if(this.options.align==="center")return .5;if(this.options.align==="right")return 1}get anchorY(){if(!this.options.verticalAlign)return-1;if(this.options.verticalAlign==="top")return 0;if(this.options.verticalAlign==="middle")return .5;if(this.options.verticalAlign==="bottom")return 1}update(){this.updateLetterCase(),this.updateComma(),this.updateAnchorX(),this.updateAnchorY()}updateLetterCase(){this.options.case==="upper"?this.text.text=this.text.text.toUpperCase():this.options.case==="lower"&&(this.text.text=this.text.text.toLowerCase())}updateComma(){this.hasComma&&(this.text.text=st(this.text.text))}updateAnchorX(){this.text.x=-this.text.width*this.anchorX}updateAnchorY(){this.options.verticalAlign&&(this.text.y=-this.text.height*this.anchorY)}static create(e,i){return Be(e,"fill",v.resolve(c(e,"fill"))),Is(vt,e,i)}};vt=qh([m({tag:"label"})],vt);var Kh=Object.defineProperty,Jh=Object.getOwnPropertyDescriptor,Zh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Jh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Kh(e,i,n),n};let _i=class extends vt{constructor(t){super(t),this._value=new Decimal(0),this._tweeningDisplayValue=0,this.prefix="",this.suffix="",this.lastValue="",this.currentValue="a",this.ON_UPDATE_START="OnUpdateStart",this.ON_UPDATING_BY_ZOOM="OnUpdatingByZoom",this.ON_UPDATE_COMPLETE="OnUpdateComplete",this._value=new Decimal(t.value),this.prefix=t.prefix,this.suffix=t.suffix,this.update()}set value(t){let e;if(e=new Decimal(t),e.equals(this._value))return;this.removeTween(),e.toNumber()-this._value.toNumber();let i=this.options.duration,s={value:this._value.toNumber()};this.tween=new TWEEN.Tween(s).onStart(()=>{this.emit(this.ON_UPDATE_START)}).to({value:e.toNumber()},i).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.update(s.value)}).onComplete(()=>{this.emit(this.ON_UPDATE_COMPLETE)}),this._value=e,this.tween.start()}set duration(t){this.options.duration=t}get value(){return this._value.toString()}get tweeningDisplayValue(){return this._tweeningDisplayValue}update(t){let e=t||this._value||0;this._tweeningDisplayValue=e instanceof Decimal?e.toNumber():e,this.text.text=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.updateLetterCase(),this.updateComma(),this.updatePrefixSuffix(),this.currentValue=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.lastValue!=this.currentValue&&(this.lastValue=this.currentValue,this.options.animZoom==!0&&(this.onAnimZoom(),this.emit(this.ON_UPDATING_BY_ZOOM)),this.updateAnchorX())}resetScale(){this.text.scale.set(1)}onAnimZoom(){this.text.position;let t={scale:this.options.animScale},e=new TWEEN.Tween(t).onStart(()=>{this.text.scale.set(t.scale)}).to({scale:1},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.text.scale.set(t.scale)}).onComplete(()=>{this.resetScale(),this.updateAnchorX(),e.stop(),e=null});e.start()}updatePrefixSuffix(){this.text.text=this.prefix+this.text.text+this.suffix}setValueDirectly(t){this._value=new Decimal(t),this.removeTween(),this.update()}reset(){this.setValueDirectly("0")}removeTween(){this.tween&&this.tween.stop()}deactivate(){this.removeTween()}static create(t,e){return Is(_i,t,e)}};_i=Zh([m({tag:"animatedLabel"})],_i);var Qh=Object.defineProperty,eu=Object.getOwnPropertyDescriptor,tu=(t,e,i,s)=>{for(var n=s>1?void 0:s?eu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Qh(e,i,n),n};let Ci=class extends C{constructor(){super(...arguments),this.timeInterval=200,this.timeFade=500,this.frames=[]}init(){this.currFrameIndex=0,this.tick=0,this.stop(0),this.activate()}stop(t){this.started=!1,B.remove(this);for(let e=0;e<this.frames.length;e++)this.addChild(this.frames[e]),this.frames[e].alpha=0;this.frames[t].alpha=1}playSpecificFrame(t){this.currFrameIndex!=t&&(Pe(this.frames[this.currFrameIndex],500),this.currFrameIndex=t,ne(this.frames[this.currFrameIndex],500))}chooseRandomNextFrame(){let t=this.frames.length;if(t>1){let e=this.currFrameIndex,i=nt(t);for(;e==i;)i=nt(t);return i}return 0}nextFrame(){let t=this.currFrameIndex;Pe(this.frames[t],this.timeFade,()=>{this.frames[t].deactivate()}),this.next==="random"?this.currFrameIndex=this.chooseRandomNextFrame():this.currFrameIndex=(this.currFrameIndex+1)%this.frames.length,ne(this.frames[this.currFrameIndex],this.timeFade,()=>{this.frames[this.currFrameIndex].activate()})}advanceTime(t){return this.tick++,this.tick%this.timeInterval===0&&this.nextFrame(),!0}activate(){super.activate(),!this.started&&(this.started=!0,this.currFrameIndex=0,B.add(this))}deactivate(){super.deactivate(),this.started=!1,B.remove(this)}pause(){B.remove(this)}resume(){B.add(this)}static create(t,e){let i=new Ci;return k(i,t,e),K(t,(s,n)=>{i.frames.push($e(s,{scene:e.scene,parent:i,context:e.context}))}),i.init(),i.timeInterval=l(t,"interval",200),i.timeFade=l(t,"interval",500),i.next=c(t,"next","sequential"),i}};Ci=tu([m({tag:"callout"})],Ci);var iu=Object.defineProperty,su=Object.getOwnPropertyDescriptor,nu=(t,e,i,s)=>{for(var n=s>1?void 0:s?su(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&iu(e,i,n),n};let qe=class extends C{constructor(e){super(),this._sprite=new PIXI.Sprite(e),this.addChild(this._sprite)}set resource(e){if(e instanceof PIXI.Texture)this._sprite.texture=e;else{let i=R.resolve(e);this._sprite.texture=i}}set tint(e){e>=0&&(this._sprite.tint=e)}get tint(){return this._sprite.tint}set blendMode(e){e==="screen"?this._sprite.blendMode=PIXI.BLEND_MODES.SCREEN:e==="add"?this._sprite.blendMode=PIXI.BLEND_MODES.ADD:this._sprite.blendMode=PIXI.BLEND_MODES.NORMAL}get sprite(){return this._sprite}static create(e,i){Be(e,"tint",v.resolve(c(e,"tint")));let s=w.get("context"),r=R.resolve(s.resolve(c(e,"res"),i.context)),o=new qe(r);return o.tint=l(e,"tint",-1),o.blendMode=c(e,"blendMode",""),k(o,e,i),ue(e,{scene:i.scene,parent:o,context:i.context}),o}static instantiate(e){let s=R.resolve(e);return new qe(s)}};qe=nu([m({tag:"img"})],qe);var ru=Object.defineProperty,ou=Object.getOwnPropertyDescriptor,au=(t,e,i,s)=>{for(var n=s>1?void 0:s?ou(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ru(e,i,n),n};const lu={rectangle:0,polygon:1,image:2};let Ti=class extends gs{constructor(t,e,i){switch(super(),this.target=t,e){case 2:X.type===PIXI.RENDERER_TYPE.WEBGL?this.content=new PIXI.Sprite(R.resolve(i.res)):this.content=Gt(i.width,i.height);break;case 0:this.content=Gt(i.width,i.height);break;case 1:this.content=ua(i.path);break}this.content.x=i.x,this.content.y=i.y,this.target.addChild(this.content),this.target.mask=this.content}activate(){this.active!==!0&&(this.target.mask!=this.content&&(this.target.mask=this.content),this.active=!0)}deactivate(){this.active!==!1&&(this.target.mask!=null&&(this.target.mask=null),this.active=!1)}static create(t,e){let i=lu[c(t,"type","rectangle")],s={width:l(t,"width",0),height:l(t,"height",0),x:l(t,"x",0),y:l(t,"y",0),path:Ee(t,"path"),res:c(t,"res",null)};if(e.parent instanceof PIXI.Container)return new Ti(e.parent,i,s)}};Ti=au([m({tag:"mask"})],Ti);function ot(t,e=0,i=new uu){return new Promise(s=>{i.timer=setTimeout(()=>{i.value||(t(),s())},e)})}function hu(t){return new Promise(e=>{setTimeout(e,t)})}function ve(t){let e=0;return new Promise(i=>{const s={advanceTime:n=>(e+=n*PIXI.Ticker.shared.elapsedMS,e>=t&&(B.remove(s),i()),!0)};B.add(s)})}function re(t){let e=0;return new Promise(i=>{const s={advanceTime:n=>(e+=16.66666666667,e>=t&&(B.remove(s),i()),!0)};B.add(s)})}class uu{constructor(e=!1){this.value=e}cancel(){this.value=!0,clearTimeout(this.timer)}}var cu=Object.defineProperty,pu=Object.getOwnPropertyDescriptor,du=(t,e,i,s)=>{for(var n=s>1?void 0:s?pu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&cu(e,i,n),n};let Bi=class extends C{constructor(t,e){super(),this.options=e,this.animator=new PIXI.AnimatedSprite(t),this.animator.loop=!1,this.currentFrame=0,this.setHueAndBlendMode(),this.addChild(this.animator)}play(t=-1){if(t!==0)return this.loop=t,new Promise((e,i)=>{this.animator.onComplete=this.makeCompleteHandler(e),this.animator.gotoAndPlay(this.currentFrame)})}get speed(){return this.animator.animationSpeed}set speed(t){this.animator.animationSpeed=t}set tint(t){this.animator.tint=t}makeCompleteHandler(t){return()=>{this.loop===1?(t(),this.onComplete()):this.loop===-1?this.playLoop():this.loop>1&&(this.loop--,this.playLoop())}}playLoop(){this.options.loopDelay>0?hu(this.options.loopDelay).then(()=>this.animator.gotoAndPlay(0)):this.animator.gotoAndPlay(0)}playOnce(){return this.play(1)}activate(){super.activate(),this.options.continuous||(this.currentFrame=0),this.play(this.options.loop)}deactivate(){super.deactivate(),this.animator.stop(),this.options.continuous&&(this.currentFrame=this.animator.currentFrame)}onComplete(){this.emit("animationComplete"),this.options.removeOnComplete&&this.parent&&this.parent.removeChild(this)}setHueAndBlendMode(){if(X.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.hue!==0){let t=new PIXI.ColorMatrixFilter;t.hue(this.options.hue,!1),this.setBlendMode(t),this.animator.filters=[t]}else this.setBlendMode(this.animator)}setBlendMode(t){this.options.blendMode&&(this.options.blendMode==="screen"?t.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(t.blendMode=PIXI.BLEND_MODES.ADD))}static create(t,e){let i=w.get("context"),n=R.resolve(i.resolve(c(t,"res"),e.context));if(Be(t,"tint",v.resolve(c(t,"tint"))),x(t,"reverse",!1)&&n&&n.length){let u=n.slice(0);u.reverse(),n=u.slice(l(t,"reverseStart",0))}let r=l(t,"loop",1),o=new Bi(n,{loop:r,loopDelay:l(t,"loopDelay",0),hue:l(t,"hue",0),blendMode:c(t,"blendMode",null),continuous:x(t,"continuous",!1),removeOnComplete:x(t,"removeOnComplete",!1)});o.speed=l(t,"speed",1),o.currentFrame=l(t,"startFrame",0);let a=l(t,"tint",-1);return a>=0&&(o.tint=a),ue(t,{scene:e.scene,parent:o,context:e.context}),k(o,t,e),x(t,"play",!0)&&o.play(r),o}};Bi=du([m({tag:"movieClip"})],Bi);var fu=Object.defineProperty,mu=Object.getOwnPropertyDescriptor,bu=(t,e,i,s)=>{for(var n=s>1?void 0:s?mu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&fu(e,i,n),n};let Ei=class extends C{constructor(){super(),this._enabled=!0,this.interactive=!0,this.cursor="pointer",this.on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}set enabled(t){this._enabled=t,this.cursor=t?"pointer":null}get enabled(){return this._enabled}buttonClickedHandler(){this.enabled&&ke("onClick",this)}static create(t,e){let i=me(Ei,t,e);return je(i,t,e),i}};Ei=bu([m({tag:"selection"})],Ei);function Vn(t,e,i){let s=new t;k(s,e,i),K(e,(r,o)=>{let a=$e(r,{scene:i.scene,parent:s,context:i.context});a instanceof C&&(a.name=te(r),a.visible=!1,s.frames.push(a))});let n=c(e,"goto")||0;return s.goto(n),s}var gu=Object.defineProperty,vu=Object.getOwnPropertyDescriptor,yu=(t,e,i,s)=>{for(var n=s>1?void 0:s?vu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&gu(e,i,n),n};let yt=class extends C{constructor(){super(...arguments),this.frames=[]}goto(t){if(this.removeChildren(),typeof t=="number"?this.currFrameIndex=t<this.frames.length?t:0:this.currFrameIndex=this.indexOfFrame(t),this.currFrameIndex>=0){let e=this.frames[this.currFrameIndex];return e.visible=!0,this.addChild(e),!0}else return!1}get current(){return this.frames[this.currFrameIndex]}get numSlides(){return this.frames.length}next(){let t=this.currFrameIndex;t++,t>-1&&(t>=this.numSlides&&(t=0),this.goto(t))}prev(){let t=this.currFrameIndex;t--,t<0&&(t=this.numSlides-1),this.goto(t)}indexOfFrame(t){for(let e=0;e<this.frames.length;e++)if(this.frames[e].name===t)return e;return-1}static create(t,e){return Vn(yt,t,e)}};yt=yu([m({tag:"slide"})],yt);function Zr(t,e,i){let s=me(t,e,i);return je(s,e,i),s.selected=ae(e,"selected")==="true",s.command=c(e,"command"),s.sound=c(e,"sound","button"),s}var Ue=(t=>(t[t.Mouse=0]="Mouse",t[t.Keyboard=1]="Keyboard",t[t.None=2]="None",t))(Ue||{}),Su=Object.defineProperty,wu=Object.getOwnPropertyDescriptor,xu=(t,e,i,s)=>{for(var n=s>1?void 0:s?wu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Su(e,i,n),n};let qt=class extends C{constructor(){super(),this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpOutsideHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpOutsideHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonUpHandler(t){}buttonDownHandler(t){}buttonClickedHandler(){this.selected=!this._selected,ze(this.sound),!ke("onClick",this)&&this.command&&d.emit(this.command,{source:Ue.Mouse,context:this})}buttonUpOutsideHandler(){}set selected(t){this._selected=t,t?(this.down&&(this.down.visible=!0),this.up&&(this.up.visible=!1)):(this.down&&(this.down.visible=!1),this.up&&(this.up.visible=!0))}get selected(){return this._selected}get currentButton(){return this.down&&this.down.visible?this.down:this.up&&this.up.visible?this.up:null}static create(t,e){return Zr(qt,t,e)}};qt=xu([m({tag:"toggleButton"})],qt);var Iu=Object.defineProperty,Pu=Object.getOwnPropertyDescriptor,_u=(t,e,i,s)=>{for(var n=s>1?void 0:s?Pu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Iu(e,i,n),n};let Oi=class extends C{constructor(){super(...arguments),this.buttons=[],this.slides=[]}init(t,e){for(let i=1;i<=t;i++){let s=this.getComponentByID("btn"+i);s.index=i-1,s.onClickHandler=()=>this.select(s.index),this.buttons.push(s),this.slides.push(this.getComponentByID("slide"+i))}this._enabled=!0}select(t){this._enabled&&(this.selectedIndex=t,!ke("onClick",this)&&this.command&&d.emit(this.command,{source:Ue.Mouse,context:this}))}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){if(this._selectedIndex!==t){this._selectedIndex=t;for(let e=0;e<this.slides.length;e++)this.slides[e].goto(e===t?1:0)}}get enabled(){return this.enabled}set enabled(t){this._enabled=t;let e=this.buttons.length;for(let i=0;i<e;i++)this.buttons[i].enabled=t}static create(t,e){let i=me(Oi,t,e);return i.init(l(t,"numButtons"),l(t,"disabledTint",0)),i.selectedIndex=l(t,"selected"),i.command=c(t,"command"),je(i,t,e),i}};Oi=_u([m({tag:"toggleGroup"})],Oi);var Cu=Object.defineProperty,Tu=Object.getOwnPropertyDescriptor,Bu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Tu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Cu(e,i,n),n};let fn=class extends ce{constructor(){super(...arguments),this.keybindings=[],this.keys=[]}keyDownHandler(t){if(this._enabled&&t&&t.key){let e=t.key.toLowerCase();if(this.keys.indexOf(e)===-1){this.keys.push(e);let i=this.getKeybinding();i&&i.emitOnKeyPressed&&d.emit(i.command,{source:Ue.Keyboard,key:e})}}}keyUpHandler(t){if(t&&t.key){let e=t.key.toLowerCase(),i=this.keys.indexOf(e),s=this.getKeybinding();s&&!s.emitOnKeyPressed&&d.emit(s.command,{source:Ue.Keyboard,key:e}),i>-1&&this.keys.splice(i,1)}}getKeybinding(){for(let t of this.keybindings){if(t.scene!==N.current.id)continue;let e=!0;for(let i of t.keys)if(this.keys.indexOf(i)===-1){e=!1;break}if(e)return t}}configure(t){this.options=t,K(t,(e,i)=>{let s=c(e,"when"),n=s.indexOf("."),r="";n!==-1&&(r=s.substr(n+1),s=s.substr(0,n)),this.keybindings.push({keys:c(e,"key").split("+"),command:c(e,"command"),when:r,scene:s,emitOnKeyPressed:x(e,"emitOnKeyPressed")})})}set enabled(t){this._enabled=t}startup(){this._enabled=!0,window.addEventListener("keydown",t=>this.keyDownHandler(t)),window.addEventListener("keyup",t=>this.keyUpHandler(t))}shutdown(){this._enabled=!1,window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("keyup",this.keyUpHandler),this.keybindings=[]}};fn=Bu([m({tag:"keyboardService",category:"service"})],fn);var Eu=Object.defineProperty,Ou=Object.getOwnPropertyDescriptor,Lu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ou(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Eu(e,i,n),n};let Li=class extends C{play(t=-1){this.animator.play(t)}playOnce(){this.animator.playOnce()}static create(t,e){let i=new Li;return k(i,t,e),ue(t,{scene:e.scene,parent:i,context:e.context}),i.animator=i.getComponentByID("animator"),i.animator.on("animationComplete",()=>i.emit("animationComplete")),i}};Li=Lu([m({tag:"animation"})],Li);var Au=Object.defineProperty,Du=Object.getOwnPropertyDescriptor,Nu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Du(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Au(e,i,n),n};const Ru="events:winbox";let Ai=class extends C{constructor(){super(...arguments),this.autohide=!0,this.accumulative=!1}init(){this.totalBet||(this.totalBet=this.getComponentByID("totalBet")),this.balance||(this.balance=this.getComponentByID("balance")),this.time||(this.time=this.getComponentByID("time")),(this.usertime||this.time)&&(this.usertime&&(this.usertime.hasComma=!1),this.time&&(this.time.hasComma=!1),B.add(this)),this.username&&_().displayName&&(this.username.hasComma=!1,this.username.value=_().displayName),I().miniFooter&&(this.balance.visible=this.iconBal.visible=!1,this.win.visible=this.iconWin.visible=!0,this.labelBalWin.value=H("win"));let e="";E.platform!=="mini"&&(e=Ct(_().currency,I().CURRENCY_SYMBOL)),this.winBoxLabel.prefix=En(_().currency,I().CURRENCY_SYMBOL),this.winBoxLabel.updatePrefixSuffix(),this.totalBet.prefix=this.win.prefix=this.balance.prefix=e,this.totalBet.updatePrefixSuffix(),this.win.updatePrefixSuffix(),this.balance.updatePrefixSuffix()}updateTotalBet(e){this.totalBet&&(this.totalBet.value=de(e))}animateBalance(e){this.balance.value=de(e)}updateBalance(e){this.balance.setValueDirectly(de(e))}updateWinAmount(e){this.win.value=de(e)}directUpdateWinAmount(e){this.win.setValueDirectly(de(e))}get winBoxLabel(){return this._winBoxLabel===void 0&&(this._winBoxLabel=this.getComponentByID("winBoxLabel")),this._winBoxLabel}showBox(e){if(this.winBox)return ee.emit(Ru,e),this.winBoxSound=pt("winmeter","default",!0),new Promise((i,s)=>{this.winBox.visible=!0,this.accumulative||this.winBoxLabel.reset(),this.winBoxLabel.value=this.accumulative?this.winBoxLabel._value.plus(e).toString():e.toString(),this.activate(),clearTimeout(this.showTimer),this.showTimer=setTimeout(()=>{this.autohide&&this.hideBox(),i()},this.winBoxLabel.options.duration+1e3)})}hideBox(){this.winBox&&(clearTimeout(this.showTimer),bt(this.winBoxSound),this.winBox.visible=!1,this.winBoxSound=null,this.winBoxLabel.deactivate())}resetWinAmount(){this.win.reset(),this.hideBox()}advanceTime(e){return this.usertime?this.usertime.value=nr(8):this.time&&(this.time.value=nr(8,!0)),!this.winBox.visible&&this.winBoxSound&&bt(this.winBoxSound),!0}deactivate(){this.hideBox(),(this.usertime||this.time)&&B.remove(this)}static create(e,i){let s=me(Ai,e,i);return s.init(),s}};Ai=Nu([m({tag:"footerBar"})],Ai);var Mu=Object.defineProperty,Fu=Object.getOwnPropertyDescriptor,Wu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Fu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Mu(e,i,n),n};let Di=class extends Ai{init(t){super.init();let e="";t&&(e=Ct(_().currency,I().CURRENCY_SYMBOL)),this.totalBet.prefix=this.balance.prefix=this.win.prefix=e,this.totalBet.updatePrefixSuffix(),this.balance.updatePrefixSuffix(),this.win.updatePrefixSuffix()}static create(t,e){let i=me(Di,t,e);return i.init(x(t,"includeCurrency")),i}};Di=Wu([m({tag:"footerBar"})],Di);var Hu=Object.defineProperty,ku=Object.getOwnPropertyDescriptor,Uu=(t,e,i,s)=>{for(var n=s>1?void 0:s?ku(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Hu(e,i,n),n};const gr=0;let mn=class extends ce{constructor(){super(...arguments),this.fround=!1,this.json=!0}configure(t){this.appContext=I();let e=R.getApiBy("apiName")||"";this.service=(R.getApiBy("service")??"https://rslotservice.w88api.com/onlinecasino/")+e+"/"}startup(){this.player=_(),this.refreshTicket()}refreshTicket(){this.ticket=Vt().toString()}send(t,e=!1){return this.refreshTicket(),t+="&ts="+this.ticket,Z.request({id:this.ticket,url:t,method:"GET"}),e==!1&&this.appContext.startInactivityTimer(),new Promise((i,s)=>{Nn(t).then(n=>n.responseText).then(n=>{let r=JSON.parse(n);r?(Z.response({requestID:this.ticket,data:r}),r.isError?s({code:r.error,message:""}):i(r)):s({code:gr,message:"Unexpected Error"})}).catch(n=>{s({code:gr,message:"Unexpected Error"})})})}signIn(){if(V(this.appContext.OPERATOR))return new Promise((t,e)=>e({code:77,message:""}));if(this.isWebGLOnlyNotSupported)return new Promise((t,e)=>e({code:997,message:""}));if(this.appContext.FUNPLAY){let t=this.service+"User/GetFunPlayKey?op="+encodeURIComponent(this.appContext.OPERATOR);return this.send(t)}else{if(this.appContext.AUTHENTICATED==="1")return Promise.resolve({value:{sessionKey:this.appContext.TOKEN,memberName:this.player.accountName}});let t=this.service+"User/Authenticate?op="+encodeURIComponent(this.appContext.OPERATOR)+"&token="+encodeURIComponent(this.appContext.TOKEN);return this.send(t)}}getBalance(){let t=this.service+"User/GetBalance?token="+this.player.sessionKey+"&game="+this.appContext.ID+"&platform="+E.platform;return this.send(t)}getBets(){let t=this.service+"Game/GetBets/?game="+this.appContext.ID+"&key="+this.player.sessionKey;return this.send(t)}spin(t,e){let i=this.player.cheat||this.appContext.CHEAT,s=t.amount,n=t.multiplier;this.fround&&(s=this.player.froundBet,n=this.player.froundMul);let r=this.service+"Game/"+(this.fround?"FreeRound":"Spin")+"?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+s+(this.appContext.multiplierAsCreditBet?"&creditBet=":"&multiplier=")+n+(this.player.bonusBet?"&sidebet=1":"")+"&platform="+E.platform+(i?"&cheat="+i:"");return e&&e.forEach((o,a)=>{r+=`&${o.key}=${o.value}`}),this.player.cheat=void 0,this.send(r)}bonus(t,e){let i=this.player.cheat||this.appContext.CHEAT,s=this.service+"Game/BonusGame?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bonus="+t.key+"&param="+t.index+"&platform="+E.platform+(i?"&cheat="+i:"");return this.send(s)}jackpot(){if(!ws())return new Promise((e,i)=>i({code:33,message:""}));let t=this.service+"Jackpot/GetAvailableJackpot?game="+this.appContext.ID+"&token="+this.player.sessionKey+"&platform="+E.platform;return this.send(t,!0)}claimFround(){let t=this.service+"Game/ClaimDailyFreeSpin?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+this.player.froundBet+"&multiplier="+this.player.froundMul+"&platform="+E.platform;return this.send(t)}custom(t,e){let i=this.service+"Game/"+t+"/?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&platform="+E.platform;return e&&e.forEach((s,n)=>{i+=`&${s.key}=${s.value}`}),this.send(i)}get isWebGLOnlyNotSupported(){return v.webGLOnly&&v.webGLOnly==="true"&&X.type!==PIXI.RENDERER_TYPE.WEBGL}};mn=Uu([m({tag:"netService",category:"service"})],mn);class jn extends vt{update(){this.updateLetterCase(),this.updateComma(),this.resize(),this.updateAnchorX(),this.updateAnchorY()}resize(){if(this.maxWidth>0){const e=this.text.scale.x,i=this.text.width,n=this.maxWidth/i*e;n<1?this.text.scale.set(n,n):this.text.scale.x!=1&&this.text.scale.set(1,1)}}static create(e,i){const s=Is(jn,e,i);return s.maxWidth=l(e,"maxWidth",0),s.resize(),s}}var $u=Object.defineProperty,Vu=Object.getOwnPropertyDescriptor,ju=(t,e,i,s)=>{for(var n=s>1?void 0:s?Vu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&$u(e,i,n),n};let Ni=class extends C{constructor(t,e){super(),this.content=Xs(t,e),this.addChild(this.content)}static create(t,e){Be(t,"color",v.resolve(c(t,"color")));let i=new Ni(l(t,"radius",10),l(t,"color",0));return k(i,t,e),i}};Ni=ju([m({tag:"circle"})],Ni);var Gu=Object.defineProperty,Xu=Object.getOwnPropertyDescriptor,Yu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Xu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Gu(e,i,n),n};const zu="events:afterTrackTime";let Ri=class extends C{constructor(t,e,i,s){super(),this.trackTimeIndex=0,this.animation=new PIXI.spine.Spine(t),this.animation.skeleton.setToSetupPose(),this.animation.update(0),this.animation.autoUpdate=!1,e&&(this.actionName=e,this.loop=i,this.trackIndex=0,this.animation.state.setAnimation(this.trackIndex,e,i)),s&&(this.eventListener={event:(n,r)=>{this.emit(r.data.name,this)}},this.animation.state.addListener(this.eventListener)),this.addChild(this.animation)}setAnimation(t,e,i,...s){return this.actionName=e,this.loop=i,this.trackIndex=t,this.trackTimeIndex=0,this.afterTrackTime=s,this.animation.state.setAnimation(t,e,i)}addAnimation(t,e,i){this.animation.state.addAnimation(t,e,i,0)}setSkin(t){this.animation.skeleton.setSkinByName(t)}advanceTime(t){return this.animation.update(.01666666666667),this.afterTrackTime&&this.trackTimeIndex<this.afterTrackTime.length?this.animation.state.tracks[this.trackIndex].trackTime>=this.afterTrackTime[this.trackTimeIndex]&&(this.trackTimeIndex++,this.emit(zu,this)):(this.trackTimeIndex=0,this.afterTrackTime=null),!0}isCurrentAction(t){return this.actionName===t}hasAnimation(t){return this.animation.state.hasAnimation(t)}set tint(t){this.animation.tint=t,this.additionalAssets&&this.additionalAssets.forEach((e,i)=>{e.tint=t})}get animated(){return this._animated}set animated(t){t!==this._animated&&(this._animated=t,t?B.add(this):B.remove(this))}get currentAction(){return this.actionName}addCompleteListener(t){let e={complete:i=>t(i.trackIndex,i.loopsCount())};return this.animation.state.addListener(e),e}removeCompleteListener(t){this.animation.state.removeListener(t)}removeSpineEventListener(){this.eventListener&&this.animation.state.removeListener(this.eventListener)}removeAllCompleteListener(){this.animation.state.clearListeners()}setVisibleAnimated(t){this.visible=this.animated=t}set timeScale(t){this.animation.state.timeScale=t}set continuous(t){this._continuous=t}getSlotContainerByName(t){return this.animation.slotContainers[this.animation.skeleton.findSlotIndex(t)]}getAdditionalAssets(){return this.additionalAssets}addWidgetToSlotContainer(t,e,i,s){let n=this.getWidgetByName(e),r=this.getSlotContainerByName(t);if(n&&r){if(i&&r.removeChildren(),s){let o=n.scale.y;n.scale.set(n.scale.x,-o)}r.addChild(n),this.additionalAssets||(this.additionalAssets=[]),this.additionalAssets.push(n)}}activate(){super.activate(),this.trackIndex!==void 0&&this.actionName!=null&&!this._continuous&&(this.animation.skeleton.setToSetupPose(),this.animation.state.clearTrack(this.trackIndex),this.setAnimation(this.trackIndex,this.actionName,this.loop)),this.animated&&B.add(this)}deactivate(){B.remove(this),super.deactivate()}getWidgetByName(t){return y.get("widgetService").get(t)}resetTrackTime(){this.setTrackTime(0),this.animation.update(0)}endTrackTime(){this.setTrackTime(this.animation.state.tracks[this.trackIndex].trackEnd)}setTrackTime(t){this.animation.state.tracks[this.trackIndex].trackTime=t}static create(t,e){if(X.type!==PIXI.RENDERER_TYPE.WEBGL)return null;let i=w.get("context"),s=R,n=i.resolve(c(t,"res"),e.context),r=l(t,"speed",1),o=s.resolve(n),a=new Ri(o.spineData,c(t,"action"),x(t,"loop",!0),x(t,"event",!1)),h=c(t,"skin"),u=l(t,"trackTime",0);return h&&a.setSkin(h),u&&a.setTrackTime(u),k(a,t,e),a.animation.state.timeScale=r,a.tint=l(t,"tint",16777215),a.animated=x(t,"auto"),a.continuous=x(t,"continuous",!1),K(t,(p,g)=>{p.nodeName==="slot"&&a.addWidgetToSlotContainer(c(p,"name"),c(p,"widget"),x(t,"clearFirst",!1))}),a.animated||a.animation.update(0),a}};Ri=Yu([m({tag:"spineAnimation"})],Ri);var qu=Object.defineProperty,Ku=Object.getOwnPropertyDescriptor,Ju=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ku(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&qu(e,i,n),n};let Mi=class extends C{constructor(){super(...arguments),this.cheatKeys={}}initCommand(){for(let t=0;t<10;t++)this.cheatKeys[t.toString()]&&(d.off("cheat"+t),d.on("cheat"+t,e=>{this.highlight(e.key),_().cheat=e.key}));d.off("cheatToggle"),d.on("cheatToggle",t=>{this.toggleVisibility()})}init(t){this.removeChildren();let e=Gt(P.width,21,0);e.y=-1,e.alpha=.7,this.addChild(e);let i=this.cheatStr.split(","),s=[];s.push(this.createText("press")),s.push(this.createText("0:Hide Bar"));for(let n of i){let r=n.split(":")[0];this.cheatKeys[r]=n.split(":")[1],s.push(this.createText(n,t==r))}s.push(this.createText('then press "SPIN"')),this.texts=s,this.arrange()}highlight(t){this.init(t)}arrange(){let t=P.width,e=0;for(let n of this.texts)e+=n.width;let i=(t-e)/(this.texts.length+1),s=i;for(let n=0;n<this.texts.length;n++)this.texts[n].x=s,s+=i+this.texts[n].width}toggleVisibility(){_().demo!="1"||!E.desktop?this.visible=!1:this.visible=!this.visible}createText(t,e){let i=new PIXI.Text(t,{fontFamily:"Arial",fontSize:"16px",fill:e?15982143:16777215});return i.y=1,this.addChild(i),i}static create(t,e){let i=me(Mi,t,e);return i.cheatStr=c(t,"keys"),i.init(),i.initCommand(),i}};Mi=Ju([m({tag:"cheatBar"})],Mi);var Zu=Object.defineProperty,Qu=Object.getOwnPropertyDescriptor,ec=(t,e,i,s)=>{for(var n=s>1?void 0:s?Qu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Zu(e,i,n),n};let Fi=class extends qt{constructor(){super(),this.activated=!0}set enabled(t){t?(this.activated=!0,this.cursor="pointer",this.alpha=1,B.add(this)):(this.activated=!1,this.cursor=null,this.alpha=.6,B.remove(this))}set countVisible(t){this.froundCircle&&(this.froundCircle=t)}buttonClickedHandler(){this.activated&&super.buttonClickedHandler()}advanceTime(t){return this.shine.rotation+=.03,this.shine2.rotation+=.03,!0}static create(t,e){y.get("tweenService").register("box-anim",(r,o)=>{let a=r.y,h={y:a},u=new TWEEN.Tween(h).to({y:a-12},300).easing(TWEEN.Easing.Quartic.Out).onUpdate(g=>{r.y=h.y}),p=new TWEEN.Tween(h).to({y:a},700).easing(TWEEN.Easing.Elastic.Out).delay(200).onUpdate(g=>{r.y=h.y});return u.chain(p),p.chain(u),u});let s=Zr(Fi,t,e),n=s.getComponentByID("froundCount");return s.shine=s.getComponentByID("shine"),s.shine2=s.getComponentByID("shine2"),B.add(s),n&&n.parent&&(s.froundCircle=n.parent),s}};Fi=ec([m({tag:"froundToggle"})],Fi);var tc=Object.defineProperty,ic=Object.getOwnPropertyDescriptor,sc=(t,e,i,s)=>{for(var n=s>1?void 0:s?ic(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&tc(e,i,n),n};let Kt=class extends vt{static create(t,e){Be(t,"fill",v.resolve(c(t,"fill")));let i=Is(Kt,t,e);return i.value=v.resolve(c(t,"value")),i}initText(){let t=y.get("fontService"),e=t?Math.round(t.adjustment.size*this.options.style.fontSize):0,i=t?t.adjustment.x:0,s=t?t.adjustment.y:0;this.options.style.fontSize+=e;let n=this.options.style;this.isDefaultFont?(n.fontFamily="Arial",this.text=new PIXI.Text(this.options.value,n),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)):this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:n.fontSize,fontName:n.fontFamily}),this.text.tint=n.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,n),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text),this.text.x+=Math.round(this.options.style.fontSize*i),this.text.y+=Math.round(this.options.style.fontSize*s)}get isDefaultFont(){return v.LANGUAGE===D.Khmer||v.LANGUAGE===D.Turkish||v.LANGUAGE===D.Portuguese||v.LANGUAGE===D.Hindi}};Kt=sc([m({tag:"langLabel"})],Kt);Object.defineProperty(Kt.prototype,"value",{get:function(){return this.text.text},set:function(t){this.text.text=Ss(t),this.update()}});function Ht(t,e=""){window.open(t,e).focus()}function li(t){window.location.href=t}var nc=Object.defineProperty,rc=Object.getOwnPropertyDescriptor,Qr=(t,e,i,s)=>{for(var n=s>1?void 0:s?rc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&nc(e,i,n),n};let oc=CryptoJS.enc.Base64.parse("/JDHFYxE2XsN37cvDKU8ohyozWXqtVB3F8L7SsXcUnQ="),ac=CryptoJS.enc.Base64.parse("9GENvpwMQdaVELFDRVhaPw==");function lc(t){return CryptoJS.AES.encrypt(t,oc,{keySize:16,iv:ac,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7})+""}let Jt=class extends C{constructor(){super(),this._enabled=!0,this.canShow=!1,this.menuVisibilty=!1,this.visible=!1,this.netService=y.get("netService"),!(R.json("configcommons").tourexc.indexOf(I().OPERATOR)>=0)&&(d.on("menutoggle",i=>{this.canShow!==!1&&(this.menuVisibilty=i.visible,this.isPortraitLayout||(this.visible=!i.visible))}),this.addListener("added",this.onAdded),this.player=_())}get isPortraitLayout(){let t=y.get("orientationService");return t.mode==="both"&&t.getOrientation()===F.PORTRAIT}onOrientationChange(t){super.onOrientationChange(t),t===F.LANDSCAPE&&this.menuVisibilty===!0?this.visible=!1:this.canShow===!0&&(this.visible=!0)}onAdded(){if(this.player.tournament)this.setLink(this.player.tournament);else{let t=this.netService.service+"common/ti?ii="+encodeURIComponent(I().OPERATOR)+"&g="+encodeURIComponent(I().ID);t=this.urlTransformer(t),this.netService.json&&(t=this.netService.service+"tournament/getinfo?op="+encodeURIComponent(I().OPERATOR)+"&game="+encodeURIComponent(I().ID)),Nn(t,this.netService.json).then(e=>{let i=JSON.parse(e.responseText);this.player.tournament=i,this.setLink(i)}).catch(e=>{e&&e.code&&Promise.reject({code:e.code,message:e.toString()})})}}setLink(t){if(this.btTournament.off("click",()=>this.openLink()),this.btTournament.off("tap",()=>this.openLink()),t&&(t.code===200&&t.data||t.isError===!1&&t.value)){let e=E.mobile?.6:.7;this.btTournament.on("click",()=>this.openLink()),this.btTournament.on("tap",()=>this.openLink()),this.cursor="pointer",this.visible=!0,this.canShow=!0,this.enabled=this._enabled,jt(this,{scale:0},{scale:e},400,()=>{},TWEEN.Easing.Back.Out);return}this.canShow=!1,this.visible=!1}openLink(){if(!this.btTournament.enabled)return;let t=this.netService.json?this.player.tournament.value:this.player.tournament.data;Ht("/tournament/"+t.type+"?op="+I().OPERATOR+"&id="+t.id+"&lang="+I().LANGUAGE+"&token="+this.player.sessionKey)}set enabled(t){this._enabled=t,this.btTournament.enabled=t}urlTransformer(t){if(Ko.contains(t,"?")){let e=t.split("?"),i=e[0].split("/"),s=i.pop()+"?"+e[1];t=i.join("/")+"/"+v.apiName+"?key="+this.player.sessionKey+"&compress="+lc(s+"&timeStamp="+Vt())}return t}static create(t,e){return me(Jt,t,e)}};Qr([S("btTournament")],Jt.prototype,"btTournament",2);Jt=Qr([m({tag:"tournament"})],Jt);class hc extends Gr{constructor(){super(),this.NUM_OF_ROW=5,this.NUM_OF_COLUMN=5,this.PAYLINES=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,0,1,1,1],[2,2,1,1,1],[0,0,2,2,2],[2,2,0,0,0],[1,1,0,1,2],[1,1,2,1,0],[0,1,0,0,0],[2,1,2,2,2],[1,0,0,0,1],[1,2,2,2,1],[1,0,1,0,0],[1,2,1,2,2],[0,1,1,2,2],[2,1,1,0,0],[1,0,2,1,1],[1,2,0,1,1],[0,1,2,2,2],[2,1,0,0,0],[0,2,0,1,2],[2,0,2,1,0],[0,2,1,0,1],[2,0,1,2,1],[0,2,2,0,0],[2,0,0,2,2],[1,1,1,0,0],[1,1,1,2,2],[0,2,2,2,2]]}}let ni;class uc{initialize(){}track(e){if(appInsights)switch(e.type){case $.Request:e.data;break;case $.Response:e.data;break;case $.Exception:cc(e.data);break;case $.Event:pc(e.data);break;case $.ScreenView:dc(e.data);break;case $.StartScreen:eo(e.data);break;case $.StopScreen:to(e.data);break;case $.Metric:fc(e.data);break;case $.PageView:mc(e.data);break}}}function cc(t){appInsights.trackException(t.error)}function pc(t){appInsights.trackEvent(t.name,t.properties,t.measurements)}function dc(t){ni&&to({stopScreen:ni}),ni=t.name,eo({startScreen:ni})}function eo(t){appInsights.startTrackPage(t.startScreen)}function to(t){appInsights.stopTrackPage(t.stopScreen)}function fc(t){appInsights.trackMetric(t.name,t.value)}function mc(t){appInsights.trackPageView(t.title,null,{"Page View URL Referrer":document.referrer})}var bc=Object.defineProperty,gc=Object.getOwnPropertyDescriptor,vc=(t,e,i,s)=>{for(var n=s>1?void 0:s?gc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&bc(e,i,n),n};let Wi=class extends C{constructor(e){super(),this.options=e,this._enabled=!0,this.upTexture=e.up,this.downTexture=e.down,this.disabledTexture=e.disabled,this.sprite=new PIXI.Sprite(this.upTexture),this.addChild(this.sprite),this.interactive=!0,this.command=e.command,this.cursor="pointer",this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonDownHandler(e){this._enabled&&(this.downTexture&&(this.sprite.texture=this.downTexture),this.sprite.x=this.options.dx,this.sprite.y=this.options.dy,ke("onDown",this))}buttonUpHandler(){this._enabled&&(this.sprite.texture=this.upTexture,this.sprite.x=0,this.sprite.y=0,ke("onUp",this))}buttonClickedHandler(){this._enabled&&(ze(this.options.sound),!ke("onClick",this)&&this.command&&d.emit(this.command,{source:Ue.Mouse,context:this}),this.activate())}set enabled(e){this._enabled=e,this.cursor="pointer",this._enabled?this.sprite.texture=this.upTexture:this.sprite.texture=this.disabledTexture?this.disabledTexture:this.upTexture}get enabled(){return this._enabled}static create(e,i){let s=R,n=s.resolve(c(e,"up")),r;$t(e,"down")&&(r=s.resolve(c(e,"down")));let o;$t(e,"disabled")&&(o=s.resolve(c(e,"disabled")));let a=new Wi({up:n,down:r,disabled:o,command:c(e,"command"),sound:c(e,"sound","button"),dx:l(e,"dx"),dy:l(e,"dy")});return je(a,e,i),x(e,"debug")&&vs(a),ue(e,{scene:i.scene,parent:a,context:i.context}),k(a,e,i),a}};Wi=vc([m({tag:"button"})],Wi);var yc=Object.defineProperty,Sc=Object.getOwnPropertyDescriptor,wc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Sc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&yc(e,i,n),n};const ut=class ut{};ut.disable="disable",ut.up="up",ut.down="down",ut.over="over";let Re=ut,St=class extends yt{constructor(){super(),this._enabled=!0,this._down=!1,this._over=!1,this._holdEnabled=!1,this._tick=0,this.interactive=!0,this.cursor="pointer",this.initialScale=this.scale.clone(),this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}enableOver(){this.on("mouseover",this.buttonOverHandler).on("mouseout",this.buttonOutHandler)}set clickable(t){if(t.content&&t.content.geometry.graphicsData&&t.content.geometry.graphicsData.length){let e=t.content.geometry.graphicsData[0].shape;e&&(t instanceof gt?this.hitArea=new PIXI.Polygon(e.points):this.hitArea=new PIXI.Circle(t.x,t.y,e.radius))}}set holdEnabled(t){this._holdEnabled=t,t&&B.add(this)}goto(t){return super.goto(t)||super.goto(Re.up),!0}buttonDownHandler(t){this._enabled&&(this._down=!0,this._downTime=this._tick,this.goto(Re.down),this.animateButton(!0))}buttonOverHandler(t){this._enabled&&(this._over=!0,this.goto(Re.over),this.onmouseover&&d.emit(this.onmouseover,{source:Ue.Mouse,context:this}))}buttonOutHandler(){this._enabled&&(this._over=!1,this._down=!1,this._down||this.goto(Re.up))}buttonUpHandler(){this._enabled&&(this._down=!1,this.goto(this._over?Re.over:Re.up),this.animateButton(!1))}buttonClickedHandler(){this._enabled&&(ze(this.sound),this.command&&d.emit(this.command,{source:Ue.Mouse,context:this}),this.activate())}animateButton(t){this.animate!=!1&&(t?this.scale.set(this.initialScale.x*1.1):this.scale.set(this.initialScale.x))}set enabled(t){this._enabled=t,this._enabled?(this.cursor="pointer",this.goto(Re.up)):(this.cursor=null,this._down=!1,this.goto(Re.disable))}get enabled(){return this._enabled}advanceTime(t){if(this._tick++,this._down&&this._enabled&&this._tick-this._downTime>30){this._tick%2===0&&d.emit(this.command,{source:Ue.Mouse,context:this});return}return!0}deactivate(){super.deactivate(),B.remove(this)}activate(){super.activate(),this._holdEnabled&&B.add(this)}static create(t,e){return io(St,t,e)}};St=wc([m({tag:"buttonSlide"})],St);function io(t,e,i){let s=Vn(t,e,i),n=s.indexOfFrame("hit");return s.command=c(e,"command"),s.sound=c(e,"sound","button"),s.onmouseover=()=>{},s.animate=x(e,"animate",!1),s.over&&s.enableOver(),n>=0&&(s.clickable=s.frames.splice(n,1)[0],s.hit=void 0),je(s,e,i),s.holdEnabled=x(e,"holdEnabled"),s}var xc=Object.defineProperty,Ic=Object.getOwnPropertyDescriptor,Pc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ic(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&xc(e,i,n),n};const bn="events:comboSelectedIndexChanged";let Hi=class extends C{constructor(t){super(),this.selectedIndex=0,this.isDown=!1,this.texts=[],this.options=t,this.top=new PIXI.Sprite(this.options.top),this.dropdownWidth=this.top.width-3,this.drawDropdown(),this.addChild(this.top),this.top.interactive=!0,this.top.on("mousedown",this.topDownHandler,this).on("mouseup",this.topUpHandler,this).on("mouseupoutside",this.topUpOutsideHandler,this).on("touchstart",this.topDownHandler,this).on("touchend",this.topUpHandler,this).on("touchendoutside",this.topUpOutsideHandler,this),this.dropdown.on("mousedown",this.dropdownDownHandler,this).on("mouseup",this.dropdownUpHandler,this).on("mouseupoutside",this.dropdownUpOutsideHandler,this).on("touchstart",this.dropdownDownHandler,this).on("touchend",this.dropdownUpHandler,this).on("touchendoutside",this.dropdownUpOutsideHandler,this).on("touchmove",this.dropdownMoveHandler,this).on("mousemove",this.dropdownMoveHandler,this)}drawDropdown(){this.dropdown=Me(this.dropdownWidth,this.top.height*(this.options.numItemsShown+1),20,this.options.dropdownColor),this.addChild(this.dropdown),this.dropdown.interactive=!0,this.dropdown.visible=!1,this.dropdown.x=1;let t=Me(this.dropdownWidth,this.top.height*(this.options.numItemsShown+1),20);this.dropdown.addChild(t),this.dropdown.mask=t}setValues(t,e=!1,i=0,s=""){if(!(this.items&&this.items.length>0)){this.items=t,this.itemsContainer=new PIXI.Container,this.itemsContainer.y=this.top.height,this.dropdown.addChild(this.itemsContainer);for(let n=0;n<t.length;n++){let r=new PIXI.Text(t[n].toString(),this.options.style);r.style.fill=this.options.itemsTextColor,r.pivot.x=.5*r.width,r.pivot.y=.5*r.height,r.x=this.dropdownWidth/2,r.y=this.top.height*(n+.5),this.itemsContainer.addChild(r),this.texts.push(r)}this.label=new PIXI.Text("",this.options.style),this.label.style.fill=this.options.itemsTextColor,this.label.x=this.top.width/2,this.label.y=this.top.height/2,this.label.pivot.y=.5*this.label.height,this.addChild(this.label),this.select(i)}}dropdownMoveHandler(t){if(this.isDown){let e=this.touchDownItemsY+t.data.getLocalPosition(this,t.data.global).y-this.touchDownY;this.itemsContainer.y=Math.min(this.top.height,Math.max(e,(this.options.numItemsShown-this.items.length+1)*this.top.height))}}topDownHandler(t){}dropdownDownHandler(t){this.isDown=!0,this.touchDownY=t.data.getLocalPosition(this,t.data.global).y,this.touchDownItemsY=this.itemsContainer.y}topUpHandler(){this.dropdown.visible=!this.dropdown.visible}dropdownUpHandler(t){this.isDown=!1;let e=t.data.getLocalPosition(this,t.data.global).y,i=e-this.touchDownY;if(Math.abs(i)<=5){let s=Math.floor((e-this.itemsContainer.y)/this.top.height);this.select(s),this.dropdown.visible=!1,ke("onClick",this)}}topUpOutsideHandler(){}dropdownUpOutsideHandler(){this.isDown=!1}select(t){this.hightlight||(this.hightlight=new PIXI.Graphics,this.hightlight.beginFill(this.options.highlightColor),this.hightlight.drawRect(0,0,this.dropdownWidth,this.top.height),this.itemsContainer.addChildAt(this.hightlight,0)),this.hightlight.y=this.top.height*t,this.selectedIndex!==t&&this.emit(bn,t),this.selectedIndex=t,this.label.text=this.texts[t].text,this.label.pivot.x=.5*this.label.width}static create(t,e){let i=R,s=i.resolve(c(t,"top")),n=i.resolve(c(t,"dropdown")),r=ae(t,"selected")==="true",o=new Hi({top:s,numItemsShown:l(t,"numItemsShown",5),dropdown:n,selected:r,highlightColor:l(t,"highlightColor",5592405),dropdownColor:l(t,"dropdownColor",11184810),itemsTextColor:l(t,"itemsTextColor",16777215),style:ds(t)});return je(o,t,e),x(t,"debug")&&vs(o),k(o,t,e),o}};Hi=Pc([m({tag:"comboBox"})],Hi);var _c=Object.defineProperty,Cc=Object.getOwnPropertyDescriptor,Tc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Cc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&_c(e,i,n),n};let ki=class extends C{constructor(t){super(),this.isDown=!1,this._enabled=!0,this.options=t,this.drawBar(),this.button=Xs(this.options.buttonSize,16777215),this.touchButton=Xs(this.options.touchRadius,16711680),this.touchButton.alpha=0,this.addChild(this.button),this.addChild(this.touchButton),this.touchButton.interactive=!0,this.touchButton.on("mousedown",this.downHandler,this).on("mouseup",this.upHandler,this).on("mouseupoutside",this.upHandler,this).on("touchstart",this.downHandler,this).on("touchend",this.upHandler,this).on("touchendoutside",this.upHandler,this).on("touchmove",this.moveHandler,this).on("mousemove",this.moveHandler,this),this.setValues()}drawBar(){this.bgBar&&this.removeChild(this.bgBar),this.highlightBar&&this.removeChild(this.highlightBar),this.highlightBarMask&&this.removeChild(this.highlightBarMask),this.bgBar=Me(this.options.barLength,this.options.barHeight,1,this.options.bgColor),this.highlightBar=Me(this.options.barLength,this.options.barHeight,1,this.options.highlightColor),this.highlightBarMask=Gt(this.options.barLength,this.options.barHeight+4),this.highlightBarMask.y=-2,this.highlightBar.mask=this.highlightBarMask,this.addChild(this.bgBar),this.addChild(this.highlightBar),this.addChild(this.highlightBarMask),this.bgBar.y=this.highlightBar.y=this.highlightBarMask.y=-this.options.barHeight/2}select(t,e=!1){if(this.value!==t){this.value=t;let i=Math.min(this.barUnitLength*t,this.options.barLength);this.button.x=this.touchButton.x=i,this.highlightBarMask.x=i-this.options.barLength,e||ke("onChange",this)}}updateBarUnitLength(){this.barUnitLength=this.options.barLength/(this.items.length-1)}update(){this.items&&this.updateBarUnitLength();let t=this.value,e=Math.min(this.barUnitLength*t,this.options.barLength);this.button.x=this.touchButton.x=e,this.highlightBarMask.x=e-this.options.barLength}set enabled(t){this._enabled=t,this.isDown=!1,this.button.tint=this._enabled?16777215:this.options.disabledColor}get enabled(){return this._enabled}setValues(t){if(this.options.itemType=="number"){this.items=[];let e=this.options.minValue;for(;e<=this.options.maxValue;)this.items.push(e),e+=this.options.unit}else this.items=t;this.items&&(this.updateBarUnitLength(),this.select(0,!0))}downHandler(t){this._enabled&&(this.isDown=!0,this.touchDownX=t.data.getLocalPosition(this,t.data.global).x,this.touchDownItemsX=this.touchButton.x)}moveHandler(t){if(this._enabled&&this.isDown){let e=this.touchDownItemsX+t.data.getLocalPosition(this,t.data.global).x-this.touchDownX,i=Math.max(Math.min(e,this.options.barLength-2),2);this.select(Math.round(i/this.barUnitLength))}}get selectedItem(){return this.items[this.value]}set barLength(t){this.options.barLength=t,this.drawBar(),this.addChild(this.button),this.addChild(this.touchButton),this.update()}upHandler(t){this.isDown=!1,this.enabled&&ke("onSelect",this)}static create(t,e){let i=new ki({highlightColor:l(t,"highlightColor",15982143),bgColor:l(t,"bgColor",3355443),barLength:l(t,"barLength",385),barHeight:l(t,"barHeight",6),unit:l(t,"unit",1),minValue:l(t,"min",1),maxValue:l(t,"max",100),itemType:c(t,"type","number"),buttonSize:l(t,"btnSize",10),touchRadius:l(t,"touchRadius",20),disabledColor:l(t,"disabledColor",3355443)});return je(i,t,e),k(i,t,e),ue(t,{scene:e.scene,parent:i,context:e.context}),An(i,t,"barLength",l,385),i}};ki=Tc([m({tag:"trackBar"})],ki);var Bc=Object.defineProperty,Ec=Object.getOwnPropertyDescriptor,Oc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ec(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Bc(e,i,n),n};const gn="events:betChanged",Lc="events:betLevelChanged";let Ui=class extends C{constructor(){super(...arguments),this.MIN_WIDTH=1024,this.MAX_WIDTH=1170}init(t,e){this.visible=!1,this.isDesktop=E.desktop,this.initBetMethods(),this.initCurrency(),this.initCommand(),this.initSettings(),this.initCloseClickable()}open(){return this.visible?!1:(this.initSettings(),this.openClose(!1,()=>{this.closing=!1}),this.visible=!0,!0)}close(t){!this.visible||this.closing||(this.closing=!0,t&&(ze(),this.panel.betSelection.select(this.player.betValueIndex),this.panel.betLevelSelection&&this.panel.betLevelSelection.select(this.player.multiplierIndex)),this.openClose(!0,()=>{this.closing=!1,this.visible=!1}))}openClose(t,e){let i={scale:0,y:this.height},s={scale:1,y:0},n=TWEEN.Easing.Exponential.Out;t&&(i={scale:1,y:0},s={scale:0,y:this.height},n=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(s,100).easing(n).onUpdate(()=>{this.panel.scale.y=i.scale,this.panel.y=i.y}).onComplete(()=>{e&&e()}).start()}start(){}setMaxBet(){this.panel.betSelection.selectedIndex!==this.player.betValues.length-1?(this.player.maxBetRevertIndex=this.panel.betSelection.selectedIndex,this.panel.betSelection.select(this.player.betValues.length-1),this.panel.maxbetSelected&&(this.panel.maxbetSelected.visible=!0)):(this.panel.betSelection.select(this.player.maxBetRevertIndex),this.panel.maxbetSelected&&(this.panel.maxbetSelected.visible=!1))}confirmBet(){let t=this.panel.betSelection.selectedIndex;if(this.panel.betLevelSelection){let e=this.panel.betLevelSelection.selectedIndex;e!==this.player.multiplierValues.indexOf(this.player.bet.multiplier)&&(this.player.multiplierIndex=e,this.player.bet.multiplier=this.player.multiplierValues[e],t===this.player.betValueIndex&&this.emit(gn,t),this.emit(Lc,e))}t!==this.player.betValueIndex&&this.emit(gn,t),this.close()}initSettings(){I();let t=En(this.player.currency,I().CURRENCY_SYMBOL);this.panel.betSelection.setValues(this.player.betValues,!0,this.player.betValueIndex,t),this.panel.betSelection.on(bn,e=>this.betChangedHandler(e)),this.betChangedHandler(this.player.betValueIndex,!0),this.panel.betLevelSelection&&(this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.panel.betLevelSelection.setValues(this.player.multiplierValues,!1,this.player.multiplierIndex),this.panel.betLevelSelection.on(bn,e=>this.betLevelChangedHandler(e)),this.betLevelChangedHandler(this.player.multiplierIndex,!0))}betChangedHandler(t,e){e||ze();let i=this.player.bet.multiplier;this.panel.betLevelSelection&&(i=this.player.multiplierValues[this.panel.betLevelSelection.selectedIndex]),this.panel.totalBet.value=st(de(new Decimal(this.player.linesCredits).times(new Decimal(this.player.betValues[t])).times(this.player.bonusBet?2:1).times(i))),this.panel.maxbetSelected&&(this.panel.maxbetSelected.visible=t===this.player.betValues.length-1)}betLevelChangedHandler(t,e){e||ze(),this.panel.totalBet.value=st(de(new Decimal(this.player.linesCredits).times(new Decimal(this.player.betValues[this.panel.betSelection.selectedIndex])).times(this.player.bonusBet?2:1).times(this.player.multiplierValues[t])))}betSelectionOpen(){}updateBetLevelSelection(){this.panel.betLevelSelection&&(this.panel.betLevelSelection.select(this.player.multiplierIndex,!1,!0),this.panel.totalBet.value=st(de(new Decimal(this.player.linesCredits).times(new Decimal(this.player.betValues[this.panel.betSelection.selectedIndex])).times(this.player.bonusBet?2:1).times(this.player.multiplierValues[this.player.multiplierIndex]))))}initCommand(){d.on("onConfirmBet",()=>this.confirmBet()),d.on("onMaxBet",()=>this.setMaxBet()),this.panel.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this))}initBetMethods(){I().isWinWays&&this.panel.payways&&(this.panel.paylines.visible=this.panel.labelbet.linebet.visible=!1,this.panel.payways.visible=this.panel.labelbet.betamount.visible=!0)}initCurrency(){this.panel.labelbet.currency.value=this.panel.labelbet.currency.value.replace("{{CCY}}",this.player.currency),this.panel.labeltotalbet.currency.value=this.panel.labeltotalbet.currency.value.replace("{{CCY}}",this.player.currency),this.panel.labelbet.currency.x=this.panel.labelbet.linebet.width;let t=this.panel.labeltotalbet.currency.width*.5;this.panel.labeltotalbet.currency.x=this.panel.labeltotalbet.totalbet.width-t,this.panel.labeltotalbet.totalbet.x=-t,this.panel.labelbet.betamount&&this.panel.labelbet.betamount.visible&&(this.panel.labelbet.currency.x=this.panel.labelbet.betamount.width)}get player(){return _()}static create(t,e){let i=me(Ui,t,e);return i.init({x:0}),i}};Ui=Oc([m({tag:"betPanel"})],Ui);var Ac=Object.defineProperty,Dc=Object.getOwnPropertyDescriptor,Nc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Dc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Ac(e,i,n),n};const vn="events:comboSelectionUp",so="events:comboSelectedIndexChanged";let $i=class extends C{constructor(e){super(),this.selectedIndex=0,this.isDown=!1,this.texts=[],this.ymovecount=0,this.options=e,this.spriteBG=new PIXI.Sprite(this.options.spriteBG),this.drawDropdown(),this.dropdown.on("mousedown",this.dropdownDownHandler,this).on("touchstart",this.dropdownDownHandler,this).on("mouseup",this.dropdownUpHandler,this).on("touchend",this.dropdownUpHandler,this).on("mouseupoutside",this.dropdownUpOutsideHandler,this).on("touchendoutside",this.dropdownUpOutsideHandler,this).on("touchmove",this.dropdownMoveHandler,this).on("mousemove",this.dropdownMoveHandler,this),this.options.mouseWheelEnabled&&this.addMouseWheelEvent()}addMouseWheelEvent(){if(document.addEventListener)document.addEventListener("mousewheel",e=>this.dropdownWheelHandler(e),!0),document.addEventListener("DOMMouseScroll",e=>this.dropdownWheelHandler(e),!0);else{let e=document.attachEvent;e&&e("onmousewheel",i=>this.dropdownWheelHandler(i))}}drawDropdown(){this.dropdownHeight=this.options.itemHeight*this.options.numItemsShown,this.dropdown=new PIXI.Container,this.dropdown.width=this.options.dropdownWidth,this.dropdown.height=this.dropdownHeight,this.dropdown.y-=Math.floor(this.dropdown.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdown),this.dropdown.cursor="pointer",this.dropdown.interactive=!0,this.dropdown.visible=!0,this.dropdown.x=1,this.dropdownMask=Me(this.options.dropdownWidth,this.dropdownHeight,0,16711680),this.dropdownMask.y-=Math.floor(this.dropdownMask.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdownMask),this.dropdown.mask=this.dropdownMask}setValues(e,i=!1,s=0,n=""){if(this.items&&this.items.length>0)return;this.items=e,this.itemsContainer=new PIXI.Container;let r=Me(this.options.dropdownWidth,this.options.itemHeight*e.length,0,this.options.dropdownColor);r.interactive=!0,r.cursor="pointer",r.y-=this.options.itemHeight/2,r.alpha=0,this.itemsContainer.addChild(r),this.baseY=0,this.dropdown.addChild(this.itemsContainer);for(let o=0;o<e.length;o++){let a=new PIXI.Text(Zo(e[o],i),this.options.style);a.style.fill=this.options.itemsTextColor,a.pivot.x=.5*a.width,a.pivot.y=.5*a.height,a.x=this.options.dropdownWidth/2,a.y=this.options.itemHeight*o,this.itemsContainer.addChild(a),this.texts.push(a)}this.select(s,!0)}dropdownWheelHandler(e){if(!this.dropdown||!this.visible)return;let i=e||window.event,s=i.clientX,n=i.clientY;var r;i.target&&(r=i.target.getBoundingClientRect()),r&&(s-=r.left,n-=r.top);let o=this.dropdownMask.getGlobalPosition(),a=new PIXI.Point(this.options.dropdownWidth*G.scale.x,this.dropdownHeight*G.scale.y);if(s>=o.x&&s<=o.x+a.x&&n>=o.y&&n<=o.y+a.y){let h=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail)),u=this.itemsContainer.y-this.options.mouseWheelGap;h>0&&(u=this.itemsContainer.y+this.options.mouseWheelGap),this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(u,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}this.snapItemInMiddle()}dropdownMoveHandler(e){if(this.isDown){let i=this.touchDownItemsY+e.data.getLocalPosition(this,e.data.global).y-this.touchDownY;this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(i,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}}dropdownDownHandler(e){this.isDown=!0,this.touchDownY=e.data.getLocalPosition(this,e.data.global).y,this.touchDownItemsY=this.itemsContainer.y,this.clearItemsScale()}dropdownUpHandler(e){if(this.isDown=!1,this.options.selectItemOnClick){let i=e.data.getLocalPosition(this,e.data.global).y,s=i-this.touchDownY;if(Math.abs(s)<=5){let n=Math.floor((i-this.itemsContainer.y)/this.options.itemHeight);this.selectedIndex!==n&&this.emit(vn,n),this.select(n,!1,!1,!0);return}}this.snapItemInMiddle(!0)}dropdownUpOutsideHandler(){this.isDown=!1,this.snapItemInMiddle()}snapItemInMiddle(e){let i=Math.ceil((this.baseY-this.itemsContainer.y)/this.options.itemHeight);jt(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-i*this.options.itemHeight},100,TWEEN.Easing.Quadratic.Out),this.select(i,!1,!1,e)}select(e,i,s,n){if(this.clearItemsScale(),this.selectedIndex!==e||i){let r=this.texts[this.selectedIndex];r.style.fill=this.options.itemsTextColor,r=this.texts[e],r.style.fill=this.options.selectedItemTextColor,jt(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-e*this.options.itemHeight},Math.abs(e-this.selectedIndex)*30,null,TWEEN.Easing.Quadratic.Out),this.selectedIndex=e,s||this.emit(so,e)}else n&&!s&&this.emit(vn,e);this.setTextsScale(this.texts[this.selectedIndex],1),this.setItemsScale()}setItemsScale(){if(this.options.scaleTopBottomItems>0){let e=1,i=this.selectedIndex-this.options.scaleTopBottomItems;this.texts[this.selectedIndex].scale.set(e,e);for(let s=i+1;s>=i&&s>=0;s--)e=1-(this.selectedIndex-s)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[s],e);i=this.selectedIndex+this.options.scaleTopBottomItems;for(let s=i-1;s<=i&&s<this.texts.length;s++)e=1-(s-this.selectedIndex)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[s],e)}}clearItemsScale(){if(this.options.scaleTopBottomItems>0){let e=1-this.options.scaleTopBottomValue*this.options.scaleTopBottomItems;this.texts.forEach((i,s)=>{this.setTextsScale(i,e)})}}setTextsScale(e,i){e.scale.set(i,i),e.alpha=i}static create(e,i){let s=R,n=s.resolve(c(e,"spriteBG")),r=s.resolve(c(e,"dropdown")),o=ae(e,"selected")==="true",a=Number(v.resolve(c(e,"itemsTextColor","0xFFFFFF"))),h=Number(v.resolve(c(e,"selectedItemTextColor","0xFFFFFF"))),u=new $i({spriteBG:n,numItemsShown:l(e,"numItemsShown",5),dropdown:r,selected:o,highlightColor:l(e,"highlightColor",5592405),dropdownColor:l(e,"dropdownColor",11184810),dropdownWidth:l(e,"dropdownWidth",150),itemHeight:l(e,"itemHeight",30),itemsTextColor:a,selectedItemTextColor:h,scaleTopBottomItems:l(e,"scaleTopBottomItems",0),scaleTopBottomValue:l(e,"scaleTopBottomValue",.1),mouseWheelGap:l(e,"mouseWheelGap",30),mouseWheelEnabled:x(e,"mouseWheelEnabled",!1),selectItemOnClick:x(e,"selectItemOnClick",!1),style:ds(e)});return je(u,e,i),x(e,"debug")&&vs(u),k(u,e,i),u}};$i=Nc([m({tag:"carousel"})],$i);var Rc=Object.defineProperty,Mc=Object.getOwnPropertyDescriptor,Fc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Mc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Rc(e,i,n),n};const no="events:betChanged",yn="events:betVisibility";let Vi=class extends C{init(){this.visible=this.selection.visible=!1,this.selection.on(vn,t=>this.close()),this.selection.on(so,t=>this.betChangedHandler(t))}select(t){this.values&&this.values.length&&this.selection.select(t,!1,!0)}setValues(t,e){this.values=t,this.selection.setValues(t,!0,e)}open(){return this.visible?!1:(this.openClose(!1,()=>{this.addCloseHandler()}),this.visible=this.selection.visible=!0,this.emit(yn,this.visible),!0)}close(){this.visible&&(this.removeCloseHandler(),this.openClose(!0,()=>{this.visible=this.selection.visible=!1,this.emit(yn,this.visible)}))}betChangedHandler(t){this.emit(no,t)}openClose(t,e){let i={scale:0},s={scale:1},n=TWEEN.Easing.Exponential.Out;t&&(i={scale:1},s={scale:0},n=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(s,100).easing(n).onUpdate(()=>{this.scale.y=i.scale}).onComplete(()=>{e&&e()}).start()}addCloseHandler(){this.btnClose.enabled=!0,this.btnClose.on("mouseup",this.close,this).on("touchend",this.close,this),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!0,this.parent.clickable.on("mousedown",this.close,this).on("touchstart",this.close,this))}removeCloseHandler(){this.btnClose.enabled=!1,this.btnClose.off("mouseup").off("touchend"),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!1,this.parent.clickable.off("mousedown").off("touchstart"))}static create(t,e){let i=me(Vi,t,e);return i.init(),i}};Vi=Fc([m({tag:"betSelection"})],Vi);var Wc=Object.defineProperty,Hc=Object.getOwnPropertyDescriptor,kc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Hc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Wc(e,i,n),n};let M=class extends C{constructor(){super(),this.clearMessage()}showMessage(t,e,i){if(!(!this.txt||e!==void 0&&e===0))if(t!==void 0){let s=H(t);if(s&&s!=="undefined"){let n="";e&&(n=Ct(_().currency,I().CURRENCY_SYMBOL)+de(e)),this.fade&&this.fade.stop(),this.txt.value=s.replace("%number%",i?i.toString():"").replace("%win%",n).replace("%npl%",i>1?"s":"").replace("%ppl%",i===1?"s":""),this.visible?this.alpha=1:this.fade=ne(this,200),this.visible=!0}else this.clearMessage()}else this.clearMessage()}clearMessage(){!this.txt||!this.visible||(this.fade&&this.fade.stop(),this.fade=Pe(this,200,()=>{this.txt.value="",this.visible=!1}))}static create(t,e){return me(M,t,e)}};M.SPIN="msg_spin";M.NO_WIN="msg_nowin";M.LINE_WIN="msg_linewin";M.SCATTER_WIN="msg_scatterwin";M.WILD_WIN="msg_wildwin";M.FEATURE_WIN="msg_featurewin";M.BONUS_WIN="msg_bonuswin";M.WAYS_WIN="msg_wayswin";M.LINES_WIN="msg_lineswin";M.BONUS="msg_bonus";M.FREESPIN="msg_freespin";M.RESPIN="msg_respin";M.RESPINS="msg_respins";M=kc([m({tag:"hudMessage"})],M);let ro=!0,Lt;function Uc(){if(Lt!==void 0)return Lt;Lt=!1;try{(E.mobile||E.tablet)&&"userActivation"in navigator&&navigator.userActivation.hasBeenActive&&"vibrate"in navigator&&(Lt=!0)}catch{}return Lt}function $c(){return ro}function Vc(t){ro=t}var jc=Object.defineProperty,Gc=Object.getOwnPropertyDescriptor,Xc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Gc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&jc(e,i,n),n};let rt=class extends C{constructor(t){super(),this.options=t}init(t){this.context=t,this.visible=!1,this.initCloseClickable(),this.arrangeButtons(),this.checkSounds(),this.checkVibration()}show(){}arrangeButtons(){this.setLandscapeButtons(),this.setPortraitButtons()}checkSounds(){let t=y.get("soundService");this.panel.landscape.sound.selected=this.panel.portrait.sound.selected=t.muted}checkVibration(){this.panel.landscape.vibration&&this.panel.portrait.vibration&&(this.panel.landscape.vibration.selected=this.panel.portrait.vibration.selected=$c())}setLandscapeButtons(){let t=this.panel.landscape;if(t.panelbglong&&t.panelbgshort){this.setDynamicLayout("landscape");return}let e=4,i=this.getButtonsOrder(t),s=Math.floor(this.options.l_center-this.options.l_gap*i.buttons.length/2+this.options.l_gap/2);for(var n=0;n<i.buttons.length;n++)i.buttons[n].visible=!0,i.buttons[n].x=s+this.options.l_gap*n,i.labels[n].visible=!0,i.labels[n].x=i.buttons[n].x-e,i.labels[n].y=i.buttons[n].y+i.buttons[n].height-Math.floor(i.labels[n].height/2)}setPortraitButtons(){this.setDynamicLayout("portrait")}setDynamicLayout(t){let e=4,i=t.charAt(0)+"_",s=this.panel[t],n=this.getButtonsOrder(s);s.panelbgshort.visible=!1,s.panelbglong.visible=!1;let r=[],o=0;for(var a=0;a<n.buttons.length;a++)a%this.options[i+"itemPerRow"]===0&&(r[o]=[]),r[o].push({button:n.buttons[a],label:n.labels[a]}),(a+1)%this.options[i+"itemPerRow"]===0&&o++;if(r.length==2)s.panelbgshort.visible=!1,s.panelbglong.visible=!0,r.reverse();else{let p=s.panelbglong.height-s.panelbgshort.height;s.panelbgshort.visible=!0,s.panelbglong.visible=!1,s.logo.y+=p,s.close.y+=p}for(var h=0;h<r.length;h++){let p=Math.floor(this.options[i+"center"]-this.options[i+"gap"]*r[h].length/2+this.options[i+"gap"]/2);for(var u=0;u<r[h].length;u++)r[h][u].button.visible=!0,r[h][u].label.visible=!0,r[h][u].button.x=p+this.options[i+"gap"]*u,r[h][u].label.x=r[h][u].button.x-e,r[h][u].button.y=this.options[i+"row"][h],r[h][u].label.y=this.options[i+"row"][h]+r[h][u].button.height-Math.floor(r[h][u].label.height/2)}}getButtonsOrder(t){let e=[t.info,t.sound],i=[t.lblInfo,t.lblSound];return this.lobbyVisible&&(e.push(t.lobby),i.push(t.lblLobby)),t.settings&&(e.push(t.settings),i.push(t.lblSettings)),this.historyVisible&&(e.push(t.history),i.push(t.lblHistory)),this.homeVisible&&(e.push(t.home),i.push(t.lblHome)),this.vibrationVisible&&(t.vibration&&e.push(t.vibration),t.lblVibration&&i.push(t.lblVibration)),this.liveChatVisible&&(e.push(t.livechat),i.push(t.lblLiveChat)),this.helpVisible&&(e.push(t.help),i.push(t.lblHelp)),{buttons:e,labels:i}}hide(){this.close(),this.visible=!1}toggleAll(t){this.bonusbet&&(this.bonusbet.visible=t),this.fround&&(this.fround.visible=this.froundVisible&&t),this.help&&(this.help.visible=this.helpVisible&&t)}open(){return this.visible?!1:(this.closing=!1,this.openClose(),this.visible=!0,!0)}close(t){!this.visible||this.closing||(this.closing=!0,this.openClose(!0,()=>{this.closing=!1,this.visible=!1,this.emit(rt.MENU_CLOSED)}))}openClose(t,e){let i={scale:0,y:this.height},s={scale:1,y:0},n=TWEEN.Easing.Exponential.Out;t&&(i={scale:1,y:0},s={scale:0,y:this.height},n=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(s,100).easing(n).onUpdate(()=>{this.panel.scale.y=i.scale,this.panel.y=i.y}).onComplete(()=>{e&&e()}).start()}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.panel.landscape.close&&this.panel.landscape.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this),this.panel.portrait.close&&this.panel.portrait.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)}get froundVisible(){return _().fround}get lobbyVisible(){return this.context.realLobbyUrl&&this.context.HIDE_LOBBY==="0"}get liveChatVisible(){return this.context.livechatUrl}get historyVisible(){return!this.context.FUNPLAY}get homeVisible(){return this.context.HOME_URL}get vibrationVisible(){return this.context&&this.context.isVibrationActivated&&Uc()}get helpVisible(){return this.context.helpUrl}get buttonCloseLandscape(){return this.panel.landscape.close}get buttonClosePortrait(){return this.panel.portrait.close}static create(t,e){let i=Ee(t,"p-row");i.length===0&&(i=[350,235]);let s=new rt({l_center:l(t,"l-center",480),p_center:l(t,"p-center",270),l_gap:l(t,"l-gap",125),p_gap:l(t,"p-gap",125),l_itemPerRow:l(t,"l-itemPerRow",4),p_itemPerRow:l(t,"p-itemPerRow",4),l_row:Ee(t,"l-row"),p_row:i});return Hn(s,t,e)}onOrientationChange(t){super.onOrientationChange(t),this.checkSounds(),this.checkVibration()}};rt.MENU_CLOSED="events:menu_closed";rt=Xc([m({tag:"menu"})],rt);var Yc=Object.defineProperty,zc=Object.getOwnPropertyDescriptor,qc=(t,e,i,s)=>{for(var n=s>1?void 0:s?zc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Yc(e,i,n),n};let ji=class extends St{static create(t,e){return Kc(ji,t,e)}};ji=qc([m({tag:"button"})],ji);function Kc(t,e,i){return io(t,e,i)}var Jc=Object.defineProperty,Zc=Object.getOwnPropertyDescriptor,Qc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Zc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Jc(e,i,n),n};let Gi=class extends yt{constructor(){super(...arguments),this._enabled=!1}init(e){this.options=e,this.options.spinHintIndex=this.indexOfFrame("spinHint")}hide(){this.enabled=!1}show(e){e!==void 0&&(this._state=e),this.goto(this._state),this.enabled=!0}goto(e){let i=super.goto(e);return this._hintIndex=this.getHintIndex(e),this._hintIndex>=0&&(this.frames[this._hintIndex].visible=!0,this.addChild(this.frames[this._hintIndex])),i}getHintIndex(e){return this.indexOfFrame(e+"Hint")}set state(e){this.goto(e),this._state=e}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.current&&(this.current instanceof ji||this.current instanceof St)&&(this.current.enabled=e),this._hintIndex>=0&&(this.frames[this._hintIndex].tint=e?this.options.spinHintTint:this.options.spinHintDisabledTint)}update(){this._state=="spin"&&this._hintIndex>=0&&(this.frames[this._hintIndex].rotation+=this._enabled?this.options.spinHintRotation:this.options.spinningRotation)}resetSpinRotation(){this._hintIndex>=0&&(this.frames[this._hintIndex].rotation=0)}static create(e,i){return oo(Gi,e,i)}};Gi=Qc([m({tag:"spinButton"})],Gi);function oo(t,e,i){let s=Vn(t,e,i),n={spinHintIndex:-1,spinHintRotation:0,spinningRotation:0,spinHintTint:16777215,spinHintDisabledTint:16777215};return K(e,(r,o)=>{te(r)==="spinHint"&&(Be(r,"tint",v.resolve(c(r,"spinHintTint"))),Be(r,"spinHintDisabledTint",v.resolve(c(r,"spinHintDisabledTint"))),n.spinHintRotation=l(r,"spinHintRotation",.006),n.spinningRotation=l(r,"spinningRotation",.25),n.spinHintTint=l(r,"tint",16777215),n.spinHintDisabledTint=l(r,"spinHintDisabledTint",16777215))}),s.init(n),s}var ep=Object.defineProperty,tp=Object.getOwnPropertyDescriptor,ip=(t,e,i,s)=>{for(var n=s>1?void 0:s?tp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ep(e,i,n),n};let Xi=class extends Gi{static create(t,e){return sp(Xi,t,e)}};Xi=ip([m({tag:"spinButton"})],Xi);function sp(t,e,i){return oo(t,e,i)}var np=Object.defineProperty,rp=Object.getOwnPropertyDescriptor,ao=(t,e,i,s)=>{for(var n=s>1?void 0:s?rp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&np(e,i,n),n};let Yi=class extends Zt{onCreated(){this.initCommand(),this.playSound()}initCommand(){d.on("infoPage",()=>{this.backClickHandler()})}backClickHandler(){N.replace("main")}playSound(t=!0){t?this.soundService.switchScope(!0)&&(this.bgmInfo=this.soundService.play("bgm-info","info")):(this.bgmInfo&&this.soundService.stop(this.bgmInfo.soundId),this.soundService.switchScope(),this.bgmInfo=null)}exit(){d.off("infoPage"),this.playSound(!1),super.exit()}};ao([Fe("soundService")],Yi.prototype,"soundService",2);Yi=ao([m({tag:"infoPage",category:"scene"})],Yi);var op=Object.defineProperty,ap=Object.getOwnPropertyDescriptor,lp=(t,e,i,s)=>{for(var n=s>1?void 0:s?ap(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&op(e,i,n),n};let zi=class extends C{constructor(e){super(),this.pages=[],this.indicators=[],this.options=e}initIndicators(){let e=this.options.numPages;if(!(e<2)){this.indicators=[];for(let i=0;i<e;i++){let s=this.getIndicators(),n=this.getIndicators(!0);s.y=n.y=P.height-this.y-70+this.options.indicatorY,s.x=n.x=(P.width-this.options.indicatorGap*(e-1)-s.width)/2+i*this.options.indicatorGap,this.setIndicatorHandler(n,i),this.addChild(s),this.addChild(n),this.indicators.push({on:s,off:n})}this.updatedHitArea(P.width)}}setIndicatorHandler(e,i){e.interactive=e.buttonMode=!0,e.on("mouseup",s=>this.gotoPage(i)).on("touchend",s=>this.gotoPage(i))}updatedHitArea(e){if(!this.indicators||!this.indicators.length)return;let i=this.indicators[0].off,s=this.options.indicatorGap;this.hitArea=new PIXI.Rectangle(this.x,this.y,e-this.x,i.y-this.options.indicatorY),i.hitArea=new PIXI.Rectangle(-s/10,-s/2,i.width+s/5,i.height+s)}initPages(e,i){let s=this.options.numPages;this.pages=[];for(let n=0;n<s;n++){let r=qe.instantiate("@img/info"+(n+1));this.addChild(r),this.pages.push(r)}}initListeners(){this.options.numPages>1&&(this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("touchmove",this.dropdownMoveHandler).on("mousemove",this.dropdownMoveHandler))}getIndicators(e=!1){let i;return this.options.indicatorBase?i=qe.instantiate(this.options.indicatorBase):i=qe.instantiate(e?this.options.indicatorOff:this.options.indicatorOn),e&&this.options.indicatorOffTint>-1&&(i.tint=this.options.indicatorOffTint),!e&&this.options.indicatorOnTint>-1&&(i.tint=this.options.indicatorOnTint),i}get currentPage(){return this.pages[this._currentPageIndex]}get currentPageIndex(){return this._currentPageIndex}setPageIndex(e,i=!1){if(this.options.numPages<2||this._currentPageIndex===e&&!i)return;for(let n=0;n<this.pages.length;n++)this.pages[n].visible=!1,this.indicators[n].on.visible=!1,this.indicators[n].off.visible=!0;let s=this.pages[this._currentPageIndex];s&&s.deactivate(),this._currentPageIndex=e,this.pages[e].activate(),this.currentPage.visible=!0,this.indicators[e].on.visible=!0,this.indicators[e].off.visible=!1}gotoPage(e){this.interactive=!1,this.isDown=!1;let i={x:this.currentPage.x},s=-1,n=this.currentPage.width;e>this.currentPageIndex&&(n*=s,s=1),this.pages[e].x=this.currentPage.width*-s,this.pages[e].visible=!0,new TWEEN.Tween(i).to({x:n},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=i.x,this.pages[e].x=this.currentPage.x+this.currentPage.width*s}).onComplete(()=>{this.interactive=!0,this.currentPage.deactivate(),this.setPageIndex(e),this.track()}).start()}buttonDownHandler(e){this.isDown=!0,this.touchDownX=e.data.getLocalPosition(this,e.data.global).x}buttonUpHandler(e){if(!this.isDown)return;this.isDown=!1;let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;if(this.interactive=!1,i>0){let s={x:this.currentPage.x};new TWEEN.Tween(s).to({x:i>100?this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=s.x,this.prevPage.x=this.currentPage.x-this.currentPage.width}).onComplete(()=>{this.interactive=!0,i>100&&(this.setPageIndex(this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1),this.track())}).start()}else{let s={x:this.currentPage.x};new TWEEN.Tween(s).to({x:i<-100?-this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=s.x,this.nextPage.x=this.currentPage.x+this.currentPage.width}).onComplete(()=>{this.interactive=!0,i<-100&&(this.setPageIndex(this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1),this.track())}).start()}}track(){Z.screen({name:"info"+this.currentPageIndex})}get nextPage(){return this.pages[this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1]}get prevPage(){return this.pages[this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1]}dropdownMoveHandler(e){if(this.isDown){let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;this.currentPage.x=i,i>0?(this.nextPage.visible=!1,this.prevPage.visible=!0,this.prevPage.x=this.currentPage.x-this.currentPage.width):(this.prevPage.visible=!1,this.nextPage.visible=!0,this.nextPage.x=this.currentPage.x+this.currentPage.width)}}static create(e,i){return Qt(zi,e,i)}};zi=lp([m({tag:"infoPanel"})],zi);function Qt(t,e,i){Be(e,"indicatorOnTint",v.resolve(c(e,"indicatorOnTint"))),Be(e,"indicatorOffTint",v.resolve(c(e,"indicatorOffTint")));let s=new t({numPages:parseInt(v.resolve(c(e,"pages"))),indicatorBase:c(e,"indicatorBase"),indicatorOn:c(e,"indicatorOn"),indicatorOff:c(e,"indicatorOff"),indicatorOnTint:l(e,"indicatorOnTint",-1),indicatorOffTint:l(e,"indicatorOffTint",-1),indicatorOffsetYL:l(e,"indicatorOffsetYL",50),indicatorOffsetYP:l(e,"indicatorOffsetYP",180),indicatorGap:l(e,"indicatorGap",80),indicatorY:l(e,"indicatorY",0)});return k(s,e,i),s.initPages(e,i),s.initIndicators(),s.initListeners(),s.setPageIndex(0),s}var hp=Object.defineProperty,up=Object.getOwnPropertyDescriptor,cp=(t,e,i,s)=>{for(var n=s>1?void 0:s?up(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&hp(e,i,n),n};let qi=class extends zi{initPages(e,i){this.pages=[],K(e,(s,n)=>{let r=$e(s,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}static create(e,i){return Qt(qi,e,i)}};qi=cp([m({tag:"infoPanel"})],qi);var pp=Object.defineProperty,dp=Object.getOwnPropertyDescriptor,fp=(t,e,i,s)=>{for(var n=s>1?void 0:s?dp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&pp(e,i,n),n};let Ki=class extends qi{initIndicators(){let e=this.options.numPages;if(!(e<2)){for(let i=0;i<e;i++){let s=this.getIndicators(),n=this.getIndicators(!0);this.addChild(s),this.addChild(n),this.indicators.push({on:s,off:n})}this.setIndicatorsPoistion(!0)}}setIndicatorsPoistion(e=!1){let i=this.options.numPages;if(i<2)return;let s=y.get("orientationService").getOrientation();for(let n=0;n<i;n++){let r=this.indicators[n].on,o=this.indicators[n].off,a,h;s===F.LANDSCAPE?(a=P.height-this.y-this.options.indicatorOffsetYL+this.options.indicatorY,h=(P.width-this.options.indicatorGap*(i-1)-r.width)/2+n*this.options.indicatorGap):(a=P.width-this.y-this.options.indicatorOffsetYP+this.options.indicatorY,h=(P.height-this.options.indicatorGap*(i-1)-r.width)/2+n*this.options.indicatorGap),r.y=o.y=a,r.x=o.x=h,e&&this.setIndicatorHandler(o,n)}this.updatedHitArea(s===F.LANDSCAPE?P.width:P.height)}initPages(e,i){this.pages=[],K(e,(s,n)=>{let r=$e(s,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}refreshCurrentPage(){this.setPageIndex(this.currentPageIndex,!0)}onOrientationChange(e){super.onOrientationChange(e),this.setIndicatorsPoistion(),this.refreshCurrentPage()}static create(e,i){return Qt(Ki,e,i)}};Ki=fp([m({tag:"infoPanel"})],Ki);var mp=Object.defineProperty,bp=Object.getOwnPropertyDescriptor,gp=(t,e,i,s)=>{for(var n=s>1?void 0:s?bp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&mp(e,i,n),n};let Ji=class extends Ki{setIndicatorsPoistion(e=!1){let i=this.options.numPages;if(i<2)return;let s=y.get("orientationService").getOrientation();for(let n=0;n<i;n++){let r=this.indicators[n].on,o=this.indicators[n].off,a,h;s===F.LANDSCAPE?(a=P.minHeight-this.options.indicatorOffsetYL,h=(P.minWidth-this.options.indicatorGap*(i-1)-r.width)/2+n*this.options.indicatorGap):(a=P.minWidth-this.options.indicatorOffsetYP,h=(P.minHeight-this.options.indicatorGap*(i-1)-r.width)/2+n*this.options.indicatorGap),r.y=o.y=a,r.x=o.x=h,e&&this.setIndicatorHandler(o,n)}this.updatedHitArea(s===F.LANDSCAPE?P.width:P.height)}setIndicatorHandler(e,i){super.setIndicatorHandler(e,i),e.hitArea=new PIXI.Rectangle(-2,-2,e.width+4,e.height+6),e.cursor="pointer"}updatedHitArea(e){if(!this.indicators||!this.indicators.length)return;let i=this.indicators[0].off;this.hitArea=new PIXI.Rectangle(-this.x,0,e,i.y+i.height+6)}initPages(e,i){let s=Ee(e,"jackpotPagesNo");if(s.length>0&&!ws()){let r=1;this.pages=[],K(e,(o,a)=>{if(s.indexOf(r++)<0){let h=$e(o,{scene:i.scene,parent:this,context:i.context});this.addChild(h),this.pages.push(h)}}),this.options.numPages=this.pages.length;return}super.initPages(e,i)}static create(e,i){return Qt(Ji,e,i)}};Ji=gp([m({tag:"infoPanel"})],Ji);class Gn extends Ji{setIndicatorsPoistion(e=!1){const i=this.options.numPages;if(i<2)return;const s=y.get("orientationService").getOrientation();for(let n=0;n<i;n++){const r=this.indicators[n].on,o=this.indicators[n].off,a=P.minHeight-this.options.indicatorOffsetYL,h=(P.minWidth-this.options.indicatorGap*(i-1)-r.width)/2+n*this.options.indicatorGap;r.y=o.y=a,r.x=o.x=h,e&&this.setIndicatorHandler(o,n)}this.updatedHitArea(s===F.LANDSCAPE?P.width:P.height)}static create(e,i){return Qt(Gn,e,i)}}const ct=class ct{constructor(){ct.canvas||(ct.canvas=document.getElementById("stage"))}createDiv(e){var i=document.createElement("div");return i.innerHTML=e,i}createPlaceholder(e){var i=document.createElement("div");return i.style.height=e,i}static getBase(){return this.base||(this.base=document.createElement("div"),this.base.style=this.canvas.style,this.canvas.parentElement.insertBefore(this.base,this.canvas)),this.base}render(){}static getFont(){let e=v.LANGUAGE;return this.font[e]||this.font[D.English]}show(){this.content&&(this.content.style.display="block")}hide(){this.content&&(this.content.style.display="none")}static querySelector(e){let i=new ct;return i.content=document.querySelector(e),i}};ct.font={en:"DIN",cs:"Microsoft YaHei",jp:"Kozuka Mincho Pro",kh:"Khmer OS Battambang",kr:"Nokora",pt:"Arial",th:"Tahoma",tr:"Arial",vn:"Tahoma"};let le=ct;function dt(t){let e=document.getElementById(t);e&&e.parentElement&&e.parentElement.removeChild(e)}const kt=class kt extends C{constructor(){super(...arguments),this.MIN_WIDTH=1024,this.MAX_WIDTH=1170,this.stopTotalBetLimits=[5,10,20,50,-1]}init(e,i){this.visible=!1,dt("autospinCustomBox"),dt("autospinWinexceedsBox"),dt("autospinBalanceincreassesBox"),this.textInputOption=e,this.isDesktop=E.desktop,this.initCommand(),this.initSettings()}open(){return!1}close(e){}start(){this.player.autoSpinSettings&&(this.player.autoSpinSettings.inAutoSpins=!0,this.player.autoSpinSettings.startBalance=this.player.balance,this.track())}resetStopLimitBtn(){this.currentSettings.stopAtTotalBet!==0?(this.currentSettings.selectedLimit=this.currentSettings.stopAtTotalBet,this.currentSettings.stopAtTotalBet=0):(this.currentSettings.selectedLimit=-1,this.currentSettings.stopAtTotalBet=-1),this.enableStopLimitBtn()}enableNumSpinBtn(){this.enableSelectionBtn("numSpins",this.player.autoSpin,!0)}enableStopLimitBtn(){this.customInput&&(this.customInput.style.border=this.textInputOption.border),this.enableSelectionBtn("stopLimits",this.currentSettings.stopAtTotalBet)}enableSelectionBtn(e,i,s){}onNumSpinsHandler(e){let i=this.player.autoSpinValues.indexOf(parseInt(e.id));parseInt(e.id)===-1&&(this.player.autoSpin=parseInt(e.id)),i>=0&&(this.player.autoSpin=this.player.autoSpinValues[i]),this.currentSettings.autoSpin=this.player.autoSpin,this.enableNumSpinBtn()}onStopLimitHandler(e){let i=this.stopTotalBetLimits.indexOf(parseInt(e.id));i>=0?(this.currentSettings.stopAtTotalBet=this.stopTotalBetLimits[i],this.customInput&&(this.customInput.value="")):(this.currentSettings.stopAtTotalBet=0,this.customInput&&(this.customInput.value="")),this.enableStopLimitBtn(),this.currentSettings.selectedLimit=0,this.customInput&&this.customInput.blur()}onFeaturesHandler(e){this.currentSettings.stopAtFeature=e.selected,this.onBlurInputs()}renderInputs(){this.advanced.visible&&(this.customInput=this.setTextInput(this.customInput,"autospinCustomBox",this.currentSettings.stopAtCustom),this.winexceedsInput=this.setTextInput(this.winexceedsInput,"autospinWinexceedsBox",this.currentSettings.stopAtWin),this.balanceincreassesInput=this.setTextInput(this.balanceincreassesInput,"autospinBalanceincreassesBox",this.currentSettings.stopAtBalance),this.validateAllInputs())}setTextInput(e,i,s=0){if(!this.advanced.visible)return this.clearTextInputs(),e;let n=le.canvas,r=parseFloat(n.style.marginLeft),o=parseFloat(n.style.marginTop),a=this.advanced[i].width-3,h=this.advanced[i].height-5,u=Math.min(G.scale.x,G.scale.y);this.isDesktop&&P.width<this.MIN_WIDTH&&P.canvas.width>this.MIN_WIDTH&&(r=0,o=0,P.canvas.width>this.MAX_WIDTH&&(u=this.MAX_WIDTH/P.width));let p=parseFloat(this.textInputOption.textIndent)*u,g=a*u-p*2,b=h*u,L=u*this.textInputOption.fontSize,O=r+(this.parent.x+this.x+this.advanced.x-this.advanced.pivot.x+this.advanced[i].x)*u,W=o+(this.parent.y+this.y+this.advanced.y-this.advanced.pivot.y+this.advanced[i].y)*u;return e?e.style.visibility="hidden":(e=document.createElement("input"),e.type=this.textInputOption.type,e.min=this.textInputOption.min,e.max=this.textInputOption.max,e.contentEditable=this.textInputOption.contentEditable,e.style.fontFamily=this.textInputOption.fontFamily,e.style.textAlign=this.textInputOption.textAlign,e.style.color=this.textInputOption.color,e.style.position=this.textInputOption.position,e.style.background=this.textInputOption.background,e.style.border=this.textInputOption.border,e.style.outline=this.textInputOption.outline,e.id=i,s>0&&(e.value=s.toString()),n.parentElement.insertBefore(e,n),e.addEventListener("focus",Le=>this.onFocusInput(Le),!0),e.addEventListener("keypress",Le=>this.validateInputs(Le),!0),e.addEventListener("keyup",Le=>this.checkInputs(Le),!0)),e.style.fontSize=`${L}px`,e.style.width=`${g}px`,e.style.height=`${b}px`,e.style.marginTop=`${W}px`,e.style.marginLeft=`${O}px`,e.style.paddingLeft=e.style.paddingRight=`${p}px`,e.style.visibility="visible",e}clearTextInputs(){this.customInput&&(this.customInput.value&&parseFloat(this.customInput.value)>0?this.currentSettings.stopAtCustom=parseFloat(this.customInput.value):this.currentSettings.stopAtCustom=0,this.clearTextInput(this.customInput)),this.winexceedsInput&&(parseFloat(this.winexceedsInput.value)>=0?this.currentSettings.stopAtWin=parseFloat(this.winexceedsInput.value):this.currentSettings.stopAtWin=0,this.clearTextInput(this.winexceedsInput)),this.balanceincreassesInput&&(parseFloat(this.balanceincreassesInput.value)>=0?this.currentSettings.stopAtBalance=parseFloat(this.balanceincreassesInput.value):this.currentSettings.stopAtBalance=0,this.clearTextInput(this.balanceincreassesInput)),this.customInput=this.winexceedsInput=this.balanceincreassesInput=null}clearTextInput(e){e.removeEventListener("focus",i=>this.onFocusInput(i),!0),e.removeEventListener("keypress",i=>this.validateInputs(i),!0),e.removeEventListener("keyup",i=>this.checkInputs(i),!0),le.canvas.parentElement.removeChild(e)}validateInputs(e){if(e.target){if(["backspace","delete"].indexOf(e.key.toLowerCase())>=0)return;var i=/[0-9]|\./;(!i.test(e.key)||e.key==="."&&e.target.value.indexOf(".")>=0||e.target.value.length>=this.textInputOption.max.length)&&(e.returnValue=!1,e.preventDefault&&e.preventDefault()),e.target.value.length===0&&["0","."].indexOf(e.key)>=0&&(e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.target.value="0.")}}checkInputs(e){e.target&&(parseFloat(e.target.value)===0&&e.target.value.indexOf("0.")<0?e.target.value="":e.target.value.indexOf(".")<0&&!isNaN(parseFloat(e.target.value))?e.target.value=parseFloat(e.target.value):e.target.value.indexOf(".")===0&&(e.target.value="0"+e.target.value))}validateDecimal(e){e&&(e.value.indexOf(".")>=0&&(e.value=de(e.value)),e.style.border=this.textInputOption.border)}onFocusInput(e){this.validateAllInputs(),e.target&&e.target.id&&(e.target.id==="autospinCustomBox"?(this.resetStopLimitBtn(),this.customCurrency&&(this.customCurrency.visible=!0)):(e.target.id==="autospinWinexceedsBox"?this.winexceedsCurrency&&(this.winexceedsCurrency.visible=!0):this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=!0),this.resetStopLimitValue())),e.target.style.border=this.textInputOption.borderFocus}onBlurInputs(e=!0){this.validateAllInputs(!0),this.resetStopLimitValue()}validateAllInputs(e){this.customInput&&(this.validateDecimal(this.customInput),e&&this.customInput.blur(),this.customCurrency&&(this.customCurrency.visible=this.customInput.value!=="")),this.winexceedsInput&&(this.validateDecimal(this.winexceedsInput),e&&this.winexceedsInput.blur(),this.winexceedsCurrency&&(this.winexceedsCurrency.visible=this.winexceedsInput.value!=="")),this.balanceincreassesInput&&(this.validateDecimal(this.balanceincreassesInput),e&&this.balanceincreassesInput.blur(),this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=this.balanceincreassesInput.value!==""))}resetStopLimitValue(){this.customInput&&(this.stopTotalBetLimits.indexOf(this.currentSettings.selectedLimit)>=0&&(!this.customInput.value||parseFloat(this.customInput.value)<=0)&&(this.customInput.value="",this.currentSettings.stopAtTotalBet=this.currentSettings.selectedLimit,this.currentSettings.selectedLimit=0),this.enableStopLimitBtn())}initSettings(){this.player.autoSpinSettings||(this.player.autoSpinSettings={stopAtCustom:0,stopAtWin:0,stopAtBalance:0,stopAtFeature:!1,autoSpin:this.player.autoSpinValues[this.player.autoSpinValues.length-1],stopAtTotalBet:this.stopTotalBetLimits[this.stopTotalBetLimits.length-1],inAutoSpins:!1,selectedLimit:0,startBalance:this.player.balance}),this.currentSettings=Object.create(this.player.autoSpinSettings),this.currentSettings.inAutoSpins||(this.player.autoSpin=this.currentSettings.autoSpin),this.enableNumSpinBtn(),this.customCurrency&&this.winexceedsCurrency&&this.balanceincreassesCurrency&&(this.customCurrency.value=this.winexceedsCurrency.value=this.balanceincreassesCurrency.value=Ct(this.player.currency,I().CURRENCY_SYMBOL),this.customCurrency.visible=this.winexceedsCurrency.visible=this.balanceincreassesCurrency.visible=!1)}initCommand(){d.on("onNumSpins",e=>this.onNumSpinsHandler(e.context))}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.advanced.autospinCustomBox&&(this.advanced.autospinCustomBox.interactive=!0),this.advanced.autospinWinexceedsBox&&(this.advanced.autospinWinexceedsBox.interactive=!0),this.advanced.autospinBalanceincreassesBox&&(this.advanced.autospinBalanceincreassesBox.interactive=!0),this.advanced.panelBG.interactive=!0,this.advanced.panelBG.on("mouseup",()=>this.onBlurInputs(),this).on("touchend",()=>this.onBlurInputs(),this)}get customCurrency(){return this.advanced.customCurrency}get winexceedsCurrency(){return this.advanced.winexceedsCurrency}get balanceincreassesCurrency(){return this.advanced.balanceincreassesCurrency}get player(){return _()}track(){let e=this.player.currency+" ";Z.event({name:"autoSpin",properties:{"Auto Spin":this.currentSettings.autoSpin<0?"Unlimited":this.currentSettings.autoSpin,"Stop Auto - Loss Limit":this.currentSettings.stopAtCustom>0?e+this.currentSettings.stopAtCustom:this.currentSettings.stopAtTotalBet>0?"x"+this.currentSettings.stopAtTotalBet:"No Limit","Stop Auto - Single Win Exceeds":e+this.currentSettings.stopAtWin,"Stop Auto - Balance Increased By":e+this.currentSettings.stopAtBalance,"Stop Auto - Bonus Features Won":this.currentSettings.stopAtFeature},measurements:{}})}static createAutoSpin(e,i,s){let n=me(e,i,s);return n.init({type:c(i,"type","text"),min:c(i,"min","0"),max:c(i,"max","9999999999"),contentEditable:c(i,"contentEditable","true"),fontFamily:c(i,"fontFamily","Din, Arial"),fontSize:l(i,"fontSize",16),textAlign:c(i,"textAlign","left"),textIndent:c(i,"textIndent","0"),color:c(i,"color","0x0"),position:c(i,"position","absolute"),background:c(i,"background","transparent"),border:c(i,"border","none"),borderFocus:c(i,"borderFocus","none"),outline:c(i,"outline","none")},c(i,"view",kt.BASIC_VIEW)),n}};kt.BASIC_VIEW="basic",kt.ADVANCED_VIEW="advanced";let wt=kt;var vp=Object.defineProperty,yp=Object.getOwnPropertyDescriptor,Sp=(t,e,i,s)=>{for(var n=s>1?void 0:s?yp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&vp(e,i,n),n};let _e=class extends wt{init(e,i){this.view=i,super.init(e),this.initCloseClickable(),this.isDesktop?ee.on(Pi,this.renderInputs,this):(ee.on(Pi,this.setKeyboardPosition,this),this.customLabel&&(this.customLabel.hasComma=!1),this.winexceedsLabel&&(this.winexceedsLabel.hasComma=!1),this.balanceincreassesLabel&&(this.balanceincreassesLabel.hasComma=!1))}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.advanced.customBox&&(this.advanced.customBox.interactive=!0),this.advanced.winexceedsBox&&(this.advanced.winexceedsBox.interactive=!0),this.advanced.balanceincreassesBox&&(this.advanced.balanceincreassesBox.interactive=!0),this.advanced["panelBG-l"].interactive=!0,this.advanced["panelBG-l"].on("mouseup",()=>this.onBlurInputs(),this).on("touchend",()=>this.onBlurInputs(),this);let e=this.advanced["panelBG-p"];e&&(e.interactive=!0,e.on("mouseup",()=>this.onBlurInputs(),this).on("touchend",()=>this.onBlurInputs(),this))}open(){return this.visible?!1:(this.visible=!0,this.initSettings(),this.openClose(this.basic,!1,()=>{this.closing=!1}),this.visible=!0,this.view===_e.BASIC_VIEW||this.renderInputs(),!0)}close(e){if(!this.visible)return;this.closing=!0,this.clearTextInputs(),this.onBlurInputs(!1);let i=this.basic;this.advanced.visible&&(i=this.advanced),e?(ze(),this.currentSettings=Object.create(this.player.autoSpinSettings)):this.player.autoSpinSettings=Object.create(this.currentSettings),this.openClose(i,!0,()=>{this.closing=!1,this.visible=!1,this.basic.visible=!0,this.advanced.visible=!1,this.basic.scale.set(1,1),this.advanced.scale.set(1,1)})}renderInputs(){if(this.isDesktop){if(!this.advanced.visible)return;this.customInput=this.setTextInput(this.customInput,"customBox",this.currentSettings.stopAtCustom),this.winexceedsInput=this.setTextInput(this.winexceedsInput,"winexceedsBox",this.currentSettings.stopAtWin),this.balanceincreassesInput=this.setTextInput(this.balanceincreassesInput,"balanceincreassesBox",this.currentSettings.stopAtBalance),this.validateAllInputs();return}this.customLabel&&(this.customLabel.value="",this.currentSettings.stopAtCustom>0&&(this.customLabel.value=this.currentSettings.stopAtCustom.toString())),this.winexceedsLabel&&(this.winexceedsLabel.value="",this.currentSettings.stopAtWin>0&&(this.winexceedsLabel.value=this.currentSettings.stopAtWin.toString())),this.balanceincreassesLabel&&(this.balanceincreassesLabel.value="",this.currentSettings.stopAtBalance>0&&(this.balanceincreassesLabel.value=this.currentSettings.stopAtBalance.toString())),this.validateAllLabelInputs()}clearTextInputs(){if(this.isDesktop){super.clearTextInputs();return}this.customLabel&&(this.customLabel.value&&parseFloat(this.customLabel.value)>0?this.currentSettings.stopAtCustom=parseFloat(this.customLabel.value):this.currentSettings.stopAtCustom=0,this.customLabel.value=""),this.winexceedsLabel&&(parseFloat(this.winexceedsLabel.value)>=0?this.currentSettings.stopAtWin=parseFloat(this.winexceedsLabel.value):this.currentSettings.stopAtWin=0,this.winexceedsLabel.value=""),this.balanceincreassesLabel&&(parseFloat(this.balanceincreassesLabel.value)>=0?this.currentSettings.stopAtBalance=parseFloat(this.balanceincreassesLabel.value):this.currentSettings.stopAtBalance=0,this.balanceincreassesLabel.value)}onStopLimitHandler(e){if(this.isDesktop){super.onStopLimitHandler(e);return}let i=this.stopTotalBetLimits.indexOf(parseInt(e.id));i>=0&&(this.currentSettings.stopAtTotalBet=this.stopTotalBetLimits[i],this.customLabel&&(this.customLabel.value="")),this.enableStopLimitBtn(),this.currentSettings.selectedLimit=0,this.view===_e.ADVANCED_VIEW&&this.onBlurInputs()}enableSelectionBtn(e,i,s){let n,r;r=this.advanced[e],n=this.basic[e],n&&n.children.forEach((o,a)=>{o.enabled=parseInt(o.id)!==i}),r&&r.children.forEach((o,a)=>{o.enabled=parseInt(o.id)!==i})}onNumSpinsHandler(e){super.onNumSpinsHandler(e),this.view===_e.BASIC_VIEW||this.onBlurInputs()}checkLabelInputs(e,i){if(e){var s=/[0-9]|\./;if(!(!s.test(i)||i==="."&&e.value.indexOf(".")>=0||e.value.length>=this.textInputOption.max.length)){if(e.value===" "&&["0","."].indexOf(i)>=0){e.value="0.";return}e.value+=i,parseFloat(e.value)===0&&e.value.indexOf("0.")<0?e.value="":e.value.indexOf(".")<0&&!isNaN(parseFloat(e.value))?e.value=parseFloat(e.value).toString():e.value.indexOf(".")===0&&(e.value="0"+e.value)}}}validateLabelDecimal(e){e&&e.value.indexOf(".")>=0&&(e.value=de(e.value))}onFocusLabel(e){this.validateAllLabelInputs(),e.target.id==="customBox"?(this.currentLabel!==this.customLabel&&(this.customLabel.value===""||this.customLabel.value===" ")&&this.resetStopLimitBtn(),this.customCurrency&&(this.customCurrency.visible=!0),this.currentLabel=this.customLabel):(e.target.id==="winexceedsBox"?(this.currentLabel=this.winexceedsLabel,this.winexceedsCurrency&&(this.winexceedsCurrency.visible=!0)):(this.currentLabel=this.balanceincreassesLabel,this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=!0)),this.resetStopLimitValue()),this.currentBox=e.target,this.keyboard&&(this.keyboard.visible||(this.keyboard.visible=!0,ne(this.keyboard,200))),this.setKeyboardPosition()}onBlurInputs(e=!0){if(this.isDesktop){super.onBlurInputs();return}this.keyboard&&this.keyboard.visible&&Pe(this.keyboard,200,()=>{this.keyboard.visible=!1}),this.validateAllLabelInputs(),this.currentLabel=null,e&&this.resetStopLimitValue()}validateAllLabelInputs(){this.customLabel&&(this.validateLabelDecimal(this.customLabel),this.customCurrency&&(this.customCurrency.visible=this.customLabel.value!==""&&this.customLabel.value!==" ")),this.winexceedsLabel&&(this.validateLabelDecimal(this.winexceedsLabel),this.winexceedsCurrency&&(this.winexceedsCurrency.visible=this.winexceedsLabel.value!==""&&this.winexceedsLabel.value!==" ")),this.balanceincreassesLabel&&(this.validateLabelDecimal(this.balanceincreassesLabel),this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=this.balanceincreassesLabel.value!==""&&this.balanceincreassesLabel.value!==" "))}resetStopLimitValue(){if(this.isDesktop){super.resetStopLimitValue();return}this.stopTotalBetLimits.indexOf(this.currentSettings.selectedLimit)>=0&&this.customLabel&&(!this.customLabel.value||isNaN(parseFloat(this.customLabel.value))||parseFloat(this.customLabel.value)<=0)&&(this.customLabel.value="",this.currentSettings.stopAtTotalBet=this.currentSettings.selectedLimit,this.currentSettings.selectedLimit=0),this.enableStopLimitBtn()}initSettings(){super.initSettings()}initCommand(){super.initCommand(),d.on("onStopLimit",e=>this.onStopLimitHandler(e.context)),d.on("onStartAutoSpin",()=>this.startAutoSpin()),this.isDesktop||(d.on("onKeyboard",e=>this.onKeyboard(e.context)),this.advanced.customBox&&this.advanced.customBox.on("mouseup",e=>this.onFocusLabel(e),this).on("touchend",e=>this.onFocusLabel(e),this),this.advanced.winexceedsBox&&this.advanced.winexceedsBox.on("mouseup",e=>this.onFocusLabel(e),this).on("touchend",e=>this.onFocusLabel(e),this),this.advanced.balanceincreassesBox&&this.advanced.balanceincreassesBox.on("mouseup",e=>this.onFocusLabel(e),this).on("touchend",e=>this.onFocusLabel(e),this)),d.on("expand",()=>this.moreOptions(!0)),d.on("collapse",()=>this.moreOptions())}moreOptions(e=!1){this.expandCollapse(e,()=>{e||(this.showOptions=e),this.advanced.scale.y=1,this.renderInputs()}),e?this.showOptions=e:this.clearTextInputs()}set showOptions(e){this.basic.visible=!e,this.advanced.visible=e}expandCollapse(e,i){let s={scale:1},n={scale:this.basic.height/this.advanced.height},r=TWEEN.Easing.Exponential.In;e?(this.view=_e.ADVANCED_VIEW,s=n,n={scale:1},r=TWEEN.Easing.Exponential.Out):this.view=_e.BASIC_VIEW,this.view===_e.ADVANCED_VIEW&&(this.enableStopLimitBtn(),I().hasFeatures?(this.advanced.byFeatures.selected=this.currentSettings.stopAtFeature,d.on("onFeatures",a=>this.onFeaturesHandler(a.context))):this.advanced.labelFeatures.visible=this.advanced.byFeatures.visible=!1),new TWEEN.Tween(s).to(n,100).easing(r).onUpdate(()=>{this.advanced.scale.y=s.scale}).onComplete(()=>{i()}).start(),this.keyboard&&this.keyboard.visible&&Pe(this.keyboard,200,()=>{this.keyboard.visible=!1})}startAutoSpin(){this.view===_e.ADVANCED_VIEW&&this.onBlurInputs(),this.close(),this.start(),d.emit("startautospin")}onKeyboard(e){this.currentLabel&&(e.id==="X"?this.currentLabel.value="":this.checkLabelInputs(this.currentLabel,e.id))}setKeyboardPosition(){if(this.currentBox&&this.keyboard&&this.keyboard.visible){let e=y.get("orientationService");e&&e.getOrientation()===F.PORTRAIT&&this.advanced["panelBG-p"]?this.keyboard.position.set(this.advanced["panelBG-p"].width-this.keyboard.width-10,this.currentBox.y-this.keyboard.height+this.advanced.y-this.advanced["panelBG-p"].height-15):this.keyboard.position.set(this.currentBox.x,this.currentBox.y-this.keyboard.height-5)}}openClose(e,i,s){let n={scale:0},r={scale:1},o=TWEEN.Easing.Exponential.Out;i&&(n={scale:1},r={scale:0},o=TWEEN.Easing.Exponential.In),new TWEEN.Tween(n).to(r,100).easing(o).onUpdate(()=>{e.scale.y=n.scale}).onComplete(()=>{s&&s()}).start()}get customLabel(){return this.advanced.customLabel}get winexceedsLabel(){return this.advanced.winexceedsLabel}get balanceincreassesLabel(){return this.advanced.balanceincreassesLabel}static create(e,i){return wt.createAutoSpin(_e,e,i)}};_e=Sp([m({tag:"autoSpin"})],_e);var wp=Object.defineProperty,xp=Object.getOwnPropertyDescriptor,Ip=(t,e,i,s)=>{for(var n=s>1?void 0:s?xp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&wp(e,i,n),n};let Zi=class extends _e{init(e,i){this.view=i,this.visible=!1,dt("customBox"),dt("winexceedsBox"),dt("balanceincreassesBox"),this.textInputOption=e,this.isDesktop=E.desktop,this.initCommand(),this.initSettings(),this.initCloseClickable(),this.isDesktop?ee.on(pn,this.renderInputs,this):(ee.on(pn,this.setKeyboardPosition,this),this.customLabel&&(this.customLabel.hasComma=!1),this.winexceedsLabel&&(this.winexceedsLabel.hasComma=!1),this.balanceincreassesLabel&&(this.balanceincreassesLabel.hasComma=!1))}renderInputs(){if(this.isDesktop){if(!this.advanced.visible)return;this.customInput=this.setTextInput(this.customInput,"customBox",this.currentSettings.stopAtCustom),this.winexceedsInput=this.setTextInput(this.winexceedsInput,"winexceedsBox",this.currentSettings.stopAtWin),this.balanceincreassesInput=this.setTextInput(this.balanceincreassesInput,"balanceincreassesBox",this.currentSettings.stopAtBalance),this.validateAllInputs();return}super.renderInputs()}onFocusInput(e){this.validateAllInputs(),e.target&&e.target.id&&(e.target.id==="customBox"?(this.resetStopLimitBtn(),this.customCurrency&&(this.customCurrency.visible=!0)):(e.target.id==="winexceedsBox"?this.winexceedsCurrency&&(this.winexceedsCurrency.visible=!0):this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=!0),this.resetStopLimitValue())),e.target.style.border=this.textInputOption.borderFocus}setKeyboardPosition(){if(this.currentBox&&this.keyboard&&this.keyboard.visible){let e=this.advanced.x+this.currentBox.x+this.currentBox.width-this.keyboard.width,i=this.advanced.y-P.height+this.currentBox.y-this.currentBox.height-this.keyboard.height;this.keyboard.position.set(e,i)}}static create(e,i){return wt.createAutoSpin(Zi,e,i)}};Zi=Ip([m({tag:"autoSpin"})],Zi);var Pp=Object.defineProperty,_p=Object.getOwnPropertyDescriptor,Cp=(t,e,i,s)=>{for(var n=s>1?void 0:s?_p(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Pp(e,i,n),n};let Qi=class extends Zi{initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.advanced.customBox&&(this.advanced.customBox.interactive=!0),this.advanced.winexceedsBox&&(this.advanced.winexceedsBox.interactive=!0),this.advanced.balanceincreassesBox&&(this.advanced.balanceincreassesBox.interactive=!0),this.advanced["panelBG-p"].interactive=!0,this.advanced["panelBG-p"].on("mouseup",()=>this.onBlurInputs(),this).on("touchend",()=>this.onBlurInputs(),this);const t=this.getComponentByID("startautospinBtn");t&&(t.y+=10)}setKeyboardPosition(){if(this.currentBox&&this.keyboard&&this.keyboard.visible){const t=this.advanced.x+this.currentBox.x+this.currentBox.width-this.keyboard.width,e=this.advanced.y-P.height*(1/1.5)+this.currentBox.y-this.currentBox.height-this.keyboard.height;this.keyboard.position.set(t,e)}}setTextInput(t,e,i=0){if(!this.advanced.visible)return this.clearTextInputs(),t;const s=le.canvas;let n=parseFloat(s.style.marginLeft),r=parseFloat(s.style.marginTop);const o=this.advanced[e].width-3,a=this.advanced[e].height-5;let h=Math.min(G.scale.x,G.scale.y)*1.5;this.isDesktop&&P.width<this.MIN_WIDTH&&P.canvas.width>this.MIN_WIDTH&&(n=0,r=0,P.canvas.width>this.MAX_WIDTH&&(h=this.MAX_WIDTH/P.width));const u=parseFloat(this.textInputOption.textIndent)*h,p=o*h-u*2,g=a*h,b=h*this.textInputOption.fontSize,L=n+(this.parent.x+this.x+this.advanced.x-this.advanced.pivot.x+this.advanced[e].x)*h,O=r+(this.parent.y+this.y+this.advanced.y-this.advanced.pivot.y+this.advanced[e].y)*h;return t?t.style.visibility="hidden":(t=document.createElement("input"),t.type=this.textInputOption.type,t.min=this.textInputOption.min,t.max=this.textInputOption.max,t.contentEditable=this.textInputOption.contentEditable,t.style.fontFamily=this.textInputOption.fontFamily,t.style.textAlign=this.textInputOption.textAlign,t.style.color=this.textInputOption.color,t.style.position=this.textInputOption.position,t.style.background=this.textInputOption.background,t.style.border=this.textInputOption.border,t.style.outline=this.textInputOption.outline,t.id=e,i>0&&(t.value=i.toString()),s.parentElement.insertBefore(t,s),t.addEventListener("focus",W=>this.onFocusInput(W),!0),t.addEventListener("keypress",W=>this.validateInputs(W),!0),t.addEventListener("keyup",W=>this.checkInputs(W),!0)),t.style.fontSize=`${b}px`,t.style.width=`${p}px`,t.style.height=`${g}px`,t.style.marginTop=`${O}px`,t.style.marginLeft=`${L}px`,t.style.paddingLeft=t.style.paddingRight=`${u}px`,t.style.visibility="visible",t}static create(t,e){return wt.createAutoSpin(Qi,t,e)}};Qi=Cp([m({tag:"autoSpin"})],Qi);class Xn extends $i{dropdownWheelHandler(e){if(!this.dropdown||!this.visible)return;const i=e||window.event;let s=i.clientX,n=i.clientY,r;i.target&&(r=i.target.getBoundingClientRect()),r&&(s-=r.left,n-=r.top);const o=this.dropdownMask.getGlobalPosition(),a=new PIXI.Point(this.options.dropdownWidth*G.scale.x,this.dropdownHeight*G.scale.y);if(s>=o.x&&s-30<=o.x+a.x&&n>=o.y&&n-50<=o.y+a.y){const h=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));let u=this.itemsContainer.y-this.options.mouseWheelGap;h>0&&(u=this.itemsContainer.y+this.options.mouseWheelGap),this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(u,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}this.snapItemInMiddle()}static create(e,i){const s=R,n=s.resolve(c(e,"spriteBG")),r=s.resolve(c(e,"dropdown")),o=ae(e,"selected")==="true",a=Number(v.resolve(c(e,"itemsTextColor","0xFFFFFF"))),h=Number(v.resolve(c(e,"selectedItemTextColor","0xFFFFFF"))),u=new Xn({spriteBG:n,numItemsShown:l(e,"numItemsShown",5),dropdown:r,selected:o,highlightColor:l(e,"highlightColor",5592405),dropdownColor:l(e,"dropdownColor",11184810),dropdownWidth:l(e,"dropdownWidth",150),itemHeight:l(e,"itemHeight",30),itemsTextColor:a,selectedItemTextColor:h,scaleTopBottomItems:l(e,"scaleTopBottomItems",0),scaleTopBottomValue:l(e,"scaleTopBottomValue",.1),mouseWheelGap:l(e,"mouseWheelGap",30),mouseWheelEnabled:x(e,"mouseWheelEnabled",!1),selectItemOnClick:x(e,"selectItemOnClick",!1),style:ds(e)});return je(u,e,i),x(e,"debug")&&vs(u),k(u,e,i),u}}const et=500,Tp=[.11,.1,.09,.08,0],vr=[0,6,17,26,38],Bp=[2,5,10,19,8.2],Ep=[20,40,80,200,0],Op=2,Sn=5,Lp=990,yr=[1,2,3,5],Sr=[2,4,6,10],wr=[10,20,30,50],xr=1,lo=66,wn=328,Ap="Wild_Drop",Dp="Scatter_Drop",xt=10,Xe=9,Np=[11,12,13,14,15,16,17,18,19],Rp="bgm-main",Mp="bgm-free",Fp="sym_stop",Wp="slotfire_scatter",Hp="win_scatter1",kp="win_scatter2",Up="win_scatter3",$p="freespin_in",Vp="free_spin_win",jp="winmeter",xn="fromLoading";function Ir(){const t=[];for(let e=1;e<=20;e++)t.push(es("coin_"+e));return t}function js(){return[es("star_0005"),es("star_0010")]}function es(t,e="spritesAtlas/"){return R.resolve("@atlas/"+e+t+".png")}const Gp={alpha:{start:1,end:1},scale:{start:1,end:3,minimumScaleMultiplier:1},color:{start:"#e6e6e6",end:"#ffffff"},speed:{start:900,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:2400},maxSpeed:0,startRotation:{min:230,max:310},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:1.2,max:1.2},blendMode:"normal",frequency:.08,emitterLifetime:-1,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:0,h:0}},Xp={alpha:{start:1,end:1},scale:{start:1,end:.5,minimumScaleMultiplier:.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:50,end:60,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:0},noRotation:!1,rotationSpeed:{min:-15,max:30},lifetime:{min:2,max:5},blendMode:"screen",frequency:.01,emitterLifetime:10,maxParticles:200,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:200,minR:0}},Yp={alpha:{start:1,end:1},scale:{start:1,end:.2,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:600,startRotation:{min:0,max:-180},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:1},blendMode:"normal",frequency:.005,emitterLifetime:-1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-200,y:-150,w:400,h:300}},zp={alpha:{start:1,end:.8},scale:{start:1,end:1.5,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:300},maxSpeed:600,startRotation:{min:30,max:-180},noRotation:!1,rotationSpeed:{min:-180,max:540},lifetime:{min:5,max:5},blendMode:"normal",frequency:.005,emitterLifetime:.5,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-140,y:-5,w:280,h:10}},qp={alpha:{start:1,end:1},scale:{start:1,end:.2,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:600,startRotation:{min:0,max:-180},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:1},blendMode:"normal",frequency:.005,emitterLifetime:2,maxParticles:60,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-400,y:-150,w:800,h:300}},Kp={alpha:{start:1,end:.8},scale:{start:.8,end:1,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:300},maxSpeed:600,startRotation:{min:30,max:-180},noRotation:!1,rotationSpeed:{min:0,max:180},lifetime:{min:5,max:5},blendMode:"normal",frequency:.005,emitterLifetime:.5,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-140,y:-5,w:280,h:10}},Jp={bonus:{id:0,count:0},collapsingMultiplier:1,collapsingRemoves:{},collapsingAdds:{},isCollapse:!0,isFirstCollapse:!1,collapsingSpinCount:0,totalWin:0,cumulativeWin:0,spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},isBonus:!0,isBuyFreeSpin:!1,wheel:{height:5,reels:[[6,1,5,4],[0,0,1,2,0],[4,0,5,3,12],[0,6,2,16,7],[6,1,2,7]],type:0,parSheetClsId:0,fallDownAmount:[0,0,0,0,0],fallDownIndexes:[-1,-1,-1,-1,-1],width:5,rows:[4,5,5,5,4],mode:0},winElement:{credit:0,jackpot:0,value:20},numOfScatter:0,numOfFreeSpin:0,credit:0,winPositions:[{line:1,multiplier:.05,rowPositions:[2,3,5,0,0],symbol:1,count:3,win:20,bet:0}],currentFreeSpinStep:0,currentFreeSpinCounter:0,isFreeSpin:!1,isSuperFreeSpin:!1,multiplier:1,hasBonus:!0,type:"s",balance:{conversion:1,credit:9620,value:9620},bet:400,uniqueID:"y/ETRa35SZPKRrpsSAi3ryW8n+aqvRy/GHN8XhStrUo=",win:20,isFreeGame:!1,frsumm:0},Zp=0,Qp=!1,ed="None",td={value:Jp,error:Zp,isError:Qp,errorCode:ed},id={spinResult:{bonus:{id:0,count:0},collapsingMultiplier:1,collapsingRemoves:{0:[1],1:[2],2:[],3:[],4:[]},collapsingAdds:{0:[3],1:[0],2:[],3:[],4:[]},isCollapse:!1,isFirstCollapse:!1,collapsingSpinCount:1,totalWin:0,cumulativeWin:0,spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},isBonus:!1,isBuyFreeSpin:!1,wheel:{height:5,reels:[[3,6,5,4],[0,0,0,2,0],[4,0,5,3,10],[0,6,2,16,7],[6,1,2,7]],type:0,parSheetClsId:0,fallDownAmount:[0,0,0,0,0],fallDownIndexes:[-1,-1,-1,-1,-1],width:5,rows:[4,5,5,5,4],mode:0},winElement:{credit:0,jackpot:0,value:0},numOfScatter:0,numOfFreeSpin:0,credit:0,winPositions:[],currentFreeSpinStep:0,currentFreeSpinCounter:0,isFreeSpin:!1,isSuperFreeSpin:!1,multiplier:2,hasBonus:!1,type:"s",bet:0,win:0,isFreeGame:!1,frsumm:0},xmlType:2,isCompleted:!0,step:0,bonus:{spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},gameResult:{bonus:{id:0,count:0},collapsingMultiplier:1,collapsingRemoves:{0:[1],1:[2],2:[],3:[],4:[]},collapsingAdds:{0:[3],1:[0],2:[],3:[],4:[]},isCollapse:!1,isFirstCollapse:!1,collapsingSpinCount:1,totalWin:0,cumulativeWin:0,spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},isBonus:!1,isBuyFreeSpin:!1,wheel:{height:5,reels:[[3,6,5,4],[0,0,0,2,0],[4,0,5,3,10],[0,6,2,16,7],[6,1,2,7]],type:0,parSheetClsId:0,fallDownAmount:[0,0,0,0,0],fallDownIndexes:[-1,-1,-1,-1,-1],width:5,rows:[4,5,5,5,4],mode:0},winElement:{credit:0,jackpot:0,value:0},numOfScatter:0,numOfFreeSpin:0,credit:0,winPositions:[],currentFreeSpinStep:0,currentFreeSpinCounter:0,isFreeSpin:!1,isSuperFreeSpin:!1,multiplier:2,hasBonus:!1,type:"s",bet:0,win:0,isFreeGame:!1,frsumm:0},guid:"c54a6006-4f20-4189-86e3-c0ace13e3081",id:1,isCompleted:!1,isOptional:!1,isStarted:!0,maxRound:0,maxStepPerCurrentRound:0,version:2},type:"cs",balance:{conversion:1,credit:9620,value:9620},bet:0,uniqueID:"vJ6PmJ7Ooj454j8Smw3mZbLmpA88qktbJIEq8Rv7/tY=",win:0,isFreeGame:!1,frsumm:0},sd=0,nd=!1,rd="None",od={value:id,error:sd,isError:nd,errorCode:rd},ho={base_events:td,bonus_events:od},ad=.001;class ld{constructor(e,i,s,n=ad,r=30){this.parent=e,this.speed=n;const o=new PIXI.Container,a=[{textures:i,framerate:r,loop:!0}];this.emitter=new PIXI.particles.Emitter(o,PIXI.particles.upgradeConfig(s,a)),this.emitter.emit=!1,e.addChild(o),B.add(this)}show(e=0){this.emitter&&(e>0&&(this.emitter.maxParticles=Ep[e-1],this.emitter.frequency=Tp[e-1]),this.elapsed=Date.now(),this.emitter.emit=!0)}stop(){this.emitter.emit=!1}destroy(){B.remove(this),this.emitter.destroy(),this.emitter.cleanup(),this.emitter=null,this.parent.removeChildren()}advanceTime(e){if(!this.emitter)return!0;const i=Date.now();return this.emitter.update((i-this.elapsed)*this.speed),this.elapsed=i,!0}}function At(t){t.visible||(t.visible=!0,ne(t,500))}function Dt(t){t.visible&&Pe(t,500,()=>{t.visible=!1})}function T(t,e,i=!1,s,n=0){if(s){const r=t.addCompleteListener((o,a)=>{t.removeCompleteListener(r),s&&s()})}t.setAnimation(n,e,i),t.setVisibleAnimated(!0)}function hd(t){Y($p,"default");const e=_().isTurbo;t.content.spine.timeScale=e?2:1,t.content.spine.setAnimation(0,"Scatter_Trigger",!0),t.content.spine.animated=!0,re(e?1e3:2e3).then(()=>{t.content.spine.setAnimation(0,"Scatter_Idle",!0)})}function ud(t,e,i){const s=_().isTurbo,n=s?2:1;i.anime.timeScale=n,i.wild.timeScale=n;const r=Number(t),o=r>10;r!=10?(i.anime.setAnimation(0,"Tile FlipMerged",!1),i.anime.animated=!0):(i.anime.setSkin(`Wild_${mt(!0)}`),T(i.anime,"Wild_Trigger",!1,()=>{T(i.anime,"wildCollapse",!1,()=>{i.anime.setVisibleAnimated(!1)})})),re(s?1e3:2e3).then(()=>{i.anime.animated=!1,o&&(e.idle(),e.parent.addChildAt(e,e.parent.children.length-1),e.content.spine.setSkin(`Wild_${mt(!0)}`),e.content.spine.setAnimation(0,"Wild_Idle",!0),e.content.spine.animated=!0,e.content.spine.tint=16777215,e.index=10)}),o?re(s?500:1e3).then(()=>{Y("sfx_sym_wild_transform","default"),i.wild.setAnimation(0,"Wild_Trigger",!1),i.wild.animated=!0,i.wild.visible=!0}):i.wild.visible=!1}class cd{constructor(e){this.scene=e,this.animated=!0,this.coin_active=!1,this.activeArr=[],this.elapsed=Date.now(),this.coinsEmitter=new ld(e.wineffectbox,Ir(),Gp,.0012);const i=new PIXI.Container,s=new PIXI.Container,n=new PIXI.Container;this.getFreeEmitter=new PIXI.particles.Emitter(s,PIXI.particles.upgradeConfig(Yp,js())),this.bigWinEmitter=new PIXI.particles.Emitter(i,PIXI.particles.upgradeConfig(Xp,js())),this.freeWinEmitter_yuanbao=new PIXI.particles.Emitter(n,PIXI.particles.upgradeConfig(zp,es("yuanbao"))),this.freeWinEmitter_coin=new PIXI.particles.Emitter(n,PIXI.particles.upgradeConfig(Kp,Ir())),this.freeWinEmitter_s=new PIXI.particles.Emitter(n,PIXI.particles.upgradeConfig(qp,js())),e.bigWinEffectbox.addChild(i),e.getFreeEffectbox.addChild(s),e.freeWinEffectbox.addChild(n),B.add(this)}playGetFreeEffect(){this.activeArr.push(this.getFreeEmitter),this.getFreeEmitter.playOnce()}stopGetFreeEffect(){Ge(this.activeArr,this.getFreeEmitter),this.getFreeEmitter.cleanup()}playBigWinEffect(){this.activeArr.push(this.bigWinEmitter),this.bigWinEmitter.playOnce()}stopBigWinEffect(){Ge(this.activeArr,this.bigWinEmitter),this.bigWinEmitter.cleanup()}playFreeWinEffect(){this.activeArr.push(this.freeWinEmitter_yuanbao),this.activeArr.push(this.freeWinEmitter_coin),this.activeArr.push(this.freeWinEmitter_s),this.freeWinEmitter_yuanbao.playOnce(),this.freeWinEmitter_coin.playOnce(),this.freeWinEmitter_s.playOnce()}stopFreeWinEffect(){Ge(this.activeArr,this.freeWinEmitter_yuanbao),Ge(this.activeArr,this.freeWinEmitter_coin),Ge(this.activeArr,this.freeWinEmitter_s),this.freeWinEmitter_yuanbao.cleanup(),this.freeWinEmitter_coin.cleanup(),this.freeWinEmitter_s.cleanup()}playSmallWinEffect(e){!this.coin_active||!this.coinsEmitter||this.coinsEmitter.show(e)}playWinEffect(e){this.coin_active||(this.coin_active=!0,this.playSmallWinEffect(e))}removeWinEffect(){return this.coin_active=!1,this.coinsEmitter&&this.coinsEmitter.stop(),Promise.resolve()}advanceTime(e){const i=Date.now(),s=i-this.elapsed;for(const n of this.activeArr)n.update(s/1e3);return this.elapsed=i,!0}exit(){}}const pd="__text",dd="text";function uo(t,e=!0){let i={};return V(t)||(Fo(t)?i=fe(t):(md(i,t.attributes),e&&t.childElementCount>0?K(t,(s,n)=>{let r=uo(s);if(V(i[s.nodeName]))i[s.nodeName]=r;else{let o=i[s.nodeName];Tr(o)?o.push(r):o=[o,r],i[s.nodeName]=o}}):fd(i,t))),i}function fd(t,e){let i=fe(e).trim();oe(i)&&i.length>0&&(t[pd]=i,t[dd]=()=>i)}function md(t,e){let i=e.length;for(let s=0;s<i;s++){let n=e[s];t[n.name]=n.value}}function co(t,e){for(let i in t)e[i]===void 0?e[i]=t[i]:e[i].constructor.name=="Object"&&t[i].constructor.name=="Object"?co(t[i],e[i]):e[i]=t[i];return e}var po=(t=>(t[t.Unspecified_error=0]="Unspecified_error",t[t.Incorrect_lines_number=1]="Incorrect_lines_number",t[t.Incorrect_bet=2]="Incorrect_bet",t[t.Incorrect_multiplier=3]="Incorrect_multiplier",t[t.Bonus_Not_Exist=4]="Bonus_Not_Exist",t[t.Wrong_parameters=5]="Wrong_parameters",t[t.Wrong_bonus_step=6]="Wrong_bonus_step",t[t.Can_not_connect=7]="Can_not_connect",t[t.Missing_Room_for_this_user=8]="Missing_Room_for_this_user",t[t.Missing_group_for_this_user=9]="Missing_group_for_this_user",t[t.Insufficient_balance=10]="Insufficient_balance",t[t.Spin_error=11]="Spin_error",t[t.Missing_Currency_Setting=12]="Missing_Currency_Setting",t[t.Nonexistent_hand=13]="Nonexistent_hand",t[t.Wrong_Step=14]="Wrong_Step",t[t.Incorrect_Round=15]="Incorrect_Round",t[t.Unfinised_bonus_game=16]="Unfinised_bonus_game",t[t.Can_not_connect_Server=17]="Can_not_connect_Server",t[t.Login_exist=18]="Login_exist",t[t.Nonexistent_user_data=19]="Nonexistent_user_data",t[t.Game_Maintenance=20]="Game_Maintenance",t[t.System_Maintenance=21]="System_Maintenance",t[t.Non_Existing_Currency=22]="Non_Existing_Currency",t[t.Open_Bonus=23]="Open_Bonus",t[t.Multiple_logins=24]="Multiple_logins",t))(po||{});function fo(t){let e=l(t,"counter"),i=Vr(t.querySelector("spin"));if(i.success){let s=i.data;return{success:!0,data:$r(t,{type:ae(t,"type","fs"),mp:l(t,"mp",1),counter:e,win:parseFloat(fe(t.querySelector("win"))),balance:parseFloat(fe(t.querySelector("balance"))),finished:e===0,wheels:s.wheels,winLines:s.winLines,bonusID:s.bonusID,bonusKey:s.bonusKey,bonusPosition:s.bonusPosition,sum:l(t.querySelector("data"),"summ"),fsum:l(t.querySelector("data"),"fsumm"),fssum:l(t.querySelector("data"),"fssumm"),bsum:l(t.querySelector("data"),"bsumm"),addFSCount:l(t.querySelector("bonus"),"addFSCount",0),featureItems:bd(t.querySelector("feature")),data:t})}}else return{success:!1,data:{code:po.Unspecified_error}}}function bd(t){if(!t)return[];let e=t.querySelectorAll("item");if(!e)return[];let i=[];for(let s=0;s<e.length;s++){let n=e[s],r=uo(n,!1);r.value=parseFloat(fe(n.childNodes[0])),i.push(r)}return i}function In(t){let e=[];return t&&t.forEach((i,s)=>{e.push(gd(i))}),e}function gd(t){let e=[];return t.rowPositions&&t.rowPositions.forEach((i,s)=>{i>0&&e.push([s,i-1])}),{index:t.line,win:t.win,multiplier:t.multiplier,wildMultiplier:t.wildMultiplier||0,positions:e,symbol:t.symbol,type:t.type}}function vd(t){if(t.value.bonus){let e,i;if(t.value.bonus.gameResult.spinResult?e=t.value.bonus.gameResult.spinResult:t.value.bonus.gameResult&&(e=t.value.bonus.gameResult),e)return i=t.value.bonus,{id:String(i.id)||void 0,key:i.guid||void 0,count:i.counter||0,step:i.currentStep||void 0,wheels:e.wheel?e.wheel.reels:[],mode:e.mode||0,position:In(e.winPositions),bonusPosition:In(e.bonusPositions),data:{win:new Decimal(t.value.bonus.gameResult.win||0),balance:new Decimal(t.value.bonus.gameResult.balance&&t.value.bonus.gameResult.balance.value?t.value.bonus.gameResult.balance.value:0)},rsp:i}}return null}class mo{constructor(e,i){this.timer=setTimeout(e,i)}cancel(){this.timer!=null&&clearTimeout(this.timer)}}const yd="parseJson";var Sd=Object.defineProperty,wd=Object.getOwnPropertyDescriptor,pe=(t,e,i,s)=>{for(var n=s>1?void 0:s?wd(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Sd(e,i,n),n};class Yn extends Ba{clickSpinHandler(){}autoSpinHandler(){}clickJackpotHandler(){}exit(){}enter(){}showPanel(e,i,s){let n=U().get(e,{});return this.scene.addChild(n),setTimeout(()=>{s&&s(),n.fadeOut()},i),n}showPopupPanel(e,i,s,n=1e3){let r=U().get(e);return this.scene.addChild(r),r.showAndRemove(i,s,n)}}class Ps extends Yn{get currentResponse(){return this._currentResponse}clickSpinHandler(){this.scene.playSpinSound(),this.scene.numWinLoop=0,this.scene.resetWinAmount(),this.scene.btnSpin.hide(),this.scene.reels.spin(),this.scene.showHudMessage(M.SPIN),this.getSpinServie().then(e=>{this.spinServiceHandler(e),this.froundHandler(e)}).catch(e=>{this.resetStateOnError(),e.code?e.code===29?(this.scene.showFrounEnd(),this.scene.setState(w.get("idleState"))):Ke(e.code):Ke(e.error?e.error:"0",!0),this.scene.onErrorHandler()})}getSpinServie(){}spinServiceHandler(e,i=yd){let s=w.get(i,e);this._currentResponse=s,this.player.balance=s.balance,this.player.winAmount=s.winAmount,this.player.winLines=s.winLines,this.player.symbols=s.wheels,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(s.wheels,!1,s.winLines,n=>this.getReelsStopPromise(n)),this.scene.setState(w.get("spinState")),this.scene.checkFround(s.fround),ws()&&this.scene.initializeJackpotHandler()}froundHandler(e){if(this.netService.json&&e.value){let i=e.value.freeGameInfo;e.value.spinResult&&(i=e.value.spinResult.freeGameInfo,e.value.spinResult.frsumm&&(this.player.froundSum=e.value.spinResult.frsumm)),e.value.frsumm&&(this.player.froundSum=e.value.frsumm),i&&(this.player.froundExpired=i.isExpired,this.scene.checkFround(i),i.frsumm&&(this.player.froundSum=i.frsumm))}}bonusHandler(e){}clickJackpotHandler(){this.getProgressiveJackpot().then(e=>this.jackpotHandler(e)).catch(e=>{console.log("Jackpots Retrieving Failed",e.code)})}getProgressiveJackpot(){}jackpotHandler(e){e.value&&e.value.pool&&(this.player.progressiveJackpot=e.value.pool)}getReelsStopPromise(e){return this.scene.animateFooterBar(),this.scene.btnSpin.hide(),this.expandWild(e).then(()=>this.onReelsStop()).then(()=>this.updateState()).then(()=>this.showWinAmount())}expandWild(e){let i=w.get("expandWildPanel");return i?i.show(e):Promise.resolve()}showWinAmount(){return this.scene.showWinBoxLogic()?this.scene.footerBar.showBox(this.player.winAmount):Promise.resolve()}onReelsStop(){}updateState(){}trackSpinEvent(){let e={"Spin mode":this.scene.isFreeSpin?"Freespin":this.scene.isAutoSpin?"Autospin":"Normal",Muted:this.scene.soundService.muted?"True":"False",Orientation:this.scene.isPortraitLayout?"Portrait":"Landscape","Game mode":this.scene.context.FUNPLAY?"Fun":"Real",Platform:E.platform,Currency:this.player.currency,Fround:this.player.froundOn?"True":"False","Bonus bet":this.player.bonusBet?"True":"False","Bonus ID":this.bonusID||"-1"};this.scene.btnTurbo&&(e.Turbo=this.scene.player.isTurbo?"True":"False"),Z.event({name:"spin",properties:e,measurements:{}})}resetStateOnError(){this.scene.player.bonus=void 0,this.scene.player.winAmount=new Decimal(0),this.scene.player.winLines=[],this.scene.reels.isSpinning=!1,this.scene.reels.stopImmediately(),this.scene.reels.display(),this.scene.reels.winPanel.forceEnd=!0,this.scene.reels.winPanel.close(),this.scene.footerBar.hideBox(),this.scene.isFreeSpin=!1,this.scene.setState(w.get("idleState"))}}pe([Tt("user")],Ps.prototype,"player",2);pe([Fe("netService")],Ps.prototype,"netService",2);class xd extends Ps{constructor(){super(...arguments),this.counter=-1}enter(){this.scene.context.checkActivityTimesUp(),this.player.winAmount.greaterThan(0)?this.scene.btnSpin.show("skip"):this.scene.btnSpin.hide(),this.scene.isFreeSpin=!0}getSpinServie(){let e=_().bonus;return e?this.netService.bonus({key:e.key,step:e.step++,index:0},fo):Promise.reject({code:0})}bonusHandler(e){this.netService.json?e.value&&e.value.bonus&&(this.counter=oe(e.value.counter)?e.value.counter:e.value.bonus.counter,this.winAmount=e.value.bonus.cumulativeWin,this.addFSCount=e.value.spinResult&&e.value.spinResult.bonus?e.value.spinResult.bonus.count:0):(this.counter=e.counter,this.winAmount=e.sum,this.addFSCount=e.addFSCount)}onReelsStop(){if(this.scene.showHudMessage(),this.addFSCount>0)return this.showFreeSpinPanel()}updateState(){if(this.counter===0)return this.showWinPanel().then(()=>{_().bonus=void 0,this.scene.isFreeSpin=!1,this.scene.setState(w.get("idleState"))});this.scene.setState(w.get("freeSpin"))}showWinPanel(){return Promise.resolve()}showFreeSpinPanel(){}}class Id extends Yn{enter(){this.scene.btnSpin.show("bonus"),this.scene.isAutoSpin=!1}clickSpinHandler(){_().bonus.step=1,this.scene.setState(w.get("freeSpin")),this.scene.state.clickSpinHandler()}}class Pd extends Yn{enter(){this.showStopBtnTimer=new mo(()=>this.scene.btnSpin.show("stop"),500)}exit(){this.showStopBtnTimer&&this.showStopBtnTimer.cancel()}clickSpinHandler(){Z.event({name:"skip",properties:{},measurements:{}}),this.scene.btnSpin.hide(),this.scene.reels.stopImmediately()}}class _d extends Ps{enter(){this.scene.initFround(),this.scene.context.checkActivityTimesUp(),this.scene.player.checkAutoSpinConditions(),this.scene.btnSpin.show(this.scene.autoSpinLogic()?"skip":"spin")}clickSpinHandler(){if(!this.scene.checkBalance()){Ke("10"),this.scene.noBalanceHandler();return}this.spinSuccess()}spinSuccess(){if(!this.scene.isSpinFree){let e=this.player.balance.minus(this.player.totalBet);this.scene.updateBalanceAmount(e)}this.scene.showHudMessage(M.SPIN),super.clickSpinHandler()}getSpinServie(){return this.netService.spin(this.player.bet)}getProgressiveJackpot(){return this.netService.jackpot()}autoSpinHandler(){this.scene.isAutoSpin=!0,this.clickSpinHandler()}bonusHandler(e){let i,s,n;this.netService.json?e.value&&e.value.hasBonus&&e.value.bonus&&(i=String(e.value.bonus.id),s=e.value.bonus.value,n=In(e.value.bonusPositions)):(i=e.bonusID,s=e.bonusKey,n=e.bonusPosition),i?i==="1"&&this.scene.isAutoSpin?(this.player.bonus=void 0,i=void 0):(this.player.bonus={key:s,id:i,position:n,count:0},i!="1"&&(this.scene.isAutoSpin=!1)):this.player.bonus=void 0,this.bonusID=i,this.scene.checkAuto()}onReelsStop(){let e=this.getHudMessage();this.scene.showHudMessage(e),super.onReelsStop(),this.scene.updateAuto()}getHudMessage(){return this.bonusID&&this.bonusID!==Ur()?M.BONUS:this.player.winAmount.gt(0)||this.scene.isAutoSpin?void 0:M.NO_WIN}updateState(){this.scene.setState(w.get("idleState"))}}let Q=class extends Zt{constructor(){super(...arguments),this._isAutoSpin=!1,this.numWinLoop=0,this.froundRestore=!1}onCreated(t){this.isFreeSpin=!1,this.isReSpin=!1,this.reels.display(ja());for(let e=1;e<4;e++)this.footerBar["currency"+e]&&(this.footerBar["currency"+e].value=_().currency);this.updateFooterBar(),this.reels.winPanel.on(j.EVENT_LOOP,this.onWinLoopComplete,this),this.reels.winPanel.on(j.EVENT_WIN_PANEL_CLOSE,this.onWinPanelClose,this),this.reels.winPanel.on(j.EVENT_WINLINE,e=>this.onWinLine(e)),this.initCommand(),Q.initialised||(Q.initialised=!0,this.init()),this.setState(w.get("idleState")),this.resumeAutoSpin(),ws()&&this.initializeJackpotHandler()}init(){}initCommand(){d.on("spin",()=>this.clickSpinHandler()),d.on("autospin",()=>this.autoSpinHandler()),d.on("history",()=>this.clickHistoryHandler()),d.on("sound",()=>this.clickSoundHandler(this.getComponentByID("sound"))),d.on("vibration",()=>this.clickVibrationHandler(this.getComponentByID("vibration"))),d.on(kr,t=>this.onErrorPopUpOpen(t)),d.on(Mn,t=>this.onErrorPopUpClose(t))}resumeAutoSpin(){this.isAutoSpin&&(this.updateAutoSpinCount(),this.clickSpinHandler())}initializeJackpotHandler(){clearTimeout(this.progressiveJackpotTimer),this.state.clickJackpotHandler(),this.progressiveJackpotTimer=setTimeout(()=>{this.initializeJackpotHandler()},za())}onWinLoopComplete(){this.numWinLoop++,this.autoSpinLogic()&&(this.reels.winPanel.hasWinLines?(this.reels.winPanel.forceEnd=this.checkBalance(),this.state.clickSpinHandler()):(this.btnSpin.hide(),this.autoSpinTimer=setTimeout(()=>this.state.clickSpinHandler(),600)))}onWinLine(t){if(t.length===0)return;let e=this.getWinLineMessageDetails(t);e&&this.showHudMessage(e.message,e.win,e.count)}onWinPanelClose(){this.reels.isSpinning||this.showHudMessage()}autoSpinLogic(){return this.player.bonus===void 0&&this.isAutoSpin||this.isFreeSpin}animateFooterBar(t){this.updateWinAmount(t),this.updateTotalBet(),this.animateBalanceAmount()}updateFooterBar(t){this.updateWinAmount(t),this.updateTotalBet(),this.updateBalanceAmount()}animateBalanceAmount(t){this.footerBar.animateBalance(t||this.player.balance)}updateBalanceAmount(t){this.footerBar.updateBalance(t||this.player.balance)}updateTotalBet(){this.footerBar.updateTotalBet(this.player.displayedTotalBet)}updateWinAmount(t){t?this.footerBar.directUpdateWinAmount(this.player.winAmount||new Decimal(0)):this.footerBar.updateWinAmount(this.player.winAmount||new Decimal(0))}resetWinAmount(){this.footerBar.resetWinAmount()}playSpinSound(){Y("spin","default",!0)}clickSpinHandler(t){!this.btnSpin.visible||!this.btnSpin.enabled||(clearTimeout(this.autoSpinTimer),clearTimeout(this.progressiveJackpotTimer),E.desktop||this.deviceService.setDeviceFullscreen(),this.state.clickSpinHandler())}autoSpinHandler(){!this.btnSpin.visible||!this.btnSpin.enabled||(E.desktop||this.deviceService.setDeviceFullscreen(),clearTimeout(this.autoSpinTimer),this.state.autoSpinHandler())}holdSpinHandler(t){}clickSettingsHandler(t){N.replace("settings")}clickInfoHandler(){N.replace("info")}clickSoundHandler(t){this.soundService.muted=t.selected,Z.event({name:"mute sound",properties:{Action:this.soundService.muted?"Off":"On"},measurements:{}})}clickVibrationHandler(t){Vc(t.selected),Z.event({name:"vibration",properties:{Action:t.selected?"On":"Off"},measurements:{}})}clickExitHandler(){li(this.context.realLobbyUrl)}clickHomeHandler(){li(this.context.HOME_URL)}clickFundHandler(){Ht(this.context.FUNDS_URL)}clickHistoryHandler(){Xa()}clickRealPlayHandler(){li(this.context.realPlayUrl)}clickHelpHandler(){Ht(this.context.helpUrl)}clickLiveChatHandler(){Ht(this.context.livechatUrl,"LiveChat")}checkBalance(){return this.isSpinFree?!0:this.player.balance.greaterThanOrEqualTo(this.player.totalBet)}noBalanceHandler(){this.onErrorHandler(),this.btnSpin.show("spin"),this.isAutoSpin=!1}onErrorPopUpOpen(t){this.player.winAmount=new Decimal(0),this.reels.winLines=[],this.isFreeSpin=!1,this.isReSpin=!1,this.onErrorHandler(),this.autoSpinTimer&&clearTimeout(this.autoSpinTimer),this.progressiveJackpotTimer&&clearTimeout(this.progressiveJackpotTimer),this.reels.isSpinning&&(this.reels.isSpinning=!1,this.reels.stopImmediately()),this.reels.winPanel.forceEnd=!0,this.reels.winPanel.close(),this.footerBar.hideBox()}onErrorPopUpClose(t){this.onErrorHandler()}onErrorHandler(){}get isAutoSpin(){return this.player.autoSpinSettings&&(this._isAutoSpin=this.player.isAutoSpinOn),this._isAutoSpin}set isAutoSpin(t){this.player.autoSpinSettings&&(t=this.player.isAutoSpinOn),!t&&this.autoSpinTimer&&clearTimeout(this.autoSpinTimer),this._isAutoSpin=t}showHudMessage(t,e,i){this.hudMessage&&this.hudMessage.showMessage(t,e,i)}showFrounEnd(){}initFround(){}checkFround(t){t&&(this.player.froundCount=t.round)}checkAuto(){}updateAuto(){}updateAutoCount(t){this.player.autoSpin=t,this.updateAutoSpinCount()}updateAutoSpinCount(){this.autoSpinCount&&(this.player.autoSpin<0?this.autoSpinInfinity?(this.autoSpinCount.value="",this.autoSpinInfinity.visible=!0):this.autoSpinCount.value="∞":(this.autoSpinCount.value=this.player.autoSpin.toString(),this.autoSpinInfinity&&(this.autoSpinInfinity.visible=!1)))}showWinBoxLogic(){return this.player.winAmount.greaterThanOrEqualTo(this.player.totalBet)}trackDoubleup(){Z.event({name:"double up",properties:{},measurements:{}})}get isSpinFree(){return this.player.froundOn}getWinLineMessageDetails(t){let e,i,s=I().isWinWays;return t.length>1&&this.reels.winPanel&&[We.WINLINE_SHOW_ALL,We.WINLINE_SHOW_ALL_ONCE].indexOf(this.reels.winPanel.mode)>=0?(e=s?M.WAYS_WIN:M.LINES_WIN,i=this.getWinDetails(t)):Number(t[0].win)>0&&(Number(t[0].index)===0?(e=M.SCATTER_WIN,i={count:1,win:t[0].win}):s?(e=M.WAYS_WIN,i=this.getWinDetails(this.player.winLines,t[0])):(e=M.LINE_WIN,i={count:t[0].index,win:t[0].win})),i?{message:e,count:i.count,win:i.win}:null}getWinDetails(t,e){let i=0,s=0;return t.forEach((n,r)=>{(e&&Number(n.symbol)===Number(e.symbol)||!e&&Number(n.index)>0)&&(i++,s+=Number(n.win))}),{count:i,win:s}}exit(){d.off("spin"),d.off("autospin"),d.off("history"),d.off("sound"),d.off("vibration"),clearTimeout(this.autoSpinTimer),clearTimeout(this.progressiveJackpotTimer),this.isFreeSpin=!1,this.isAutoSpin=!1,Va(this.reels.symbolIndexes),this.soundService.stopBgm(),this.footerBar&&this.footerBar.deactivate(),super.exit()}suspendActivityTimesUp(){this.player.stopAutoSpin(),this.autoSpinTimer&&clearTimeout(this.autoSpinTimer)}get checkExtendActivityTimesUp(){return this.suspendActivityTimesUp(),this.reels.isSpinning}};Q.initialised=!1;pe([Fe("deviceService")],Q.prototype,"deviceService",2);pe([Fe("netService")],Q.prototype,"netService",2);pe([Fe("soundService")],Q.prototype,"soundService",2);pe([Tt("context")],Q.prototype,"context",2);pe([S("autoSpinDisplay")],Q.prototype,"autoSpinDisplay",2);pe([S("autoSpinCount")],Q.prototype,"autoSpinCount",2);pe([S("autoSpinInfinity")],Q.prototype,"autoSpinInfinity",2);pe([S("reels")],Q.prototype,"reels",2);pe([Tt("user")],Q.prototype,"player",2);pe([S("btnSpin")],Q.prototype,"btnSpin",2);pe([S("hudMessage")],Q.prototype,"hudMessage",2);pe([S("tournament")],Q.prototype,"tournament",2);Q=pe([m({tag:"main",category:"scene"})],Q);const we={ONGOING:"ongoing",UPCOMING:"upcoming",CLAIMED:"claimed",UNCLAIMED:"unclaimed",STANDARD:"standard"},Ut=class Ut extends le{constructor(){super(),this.width=786,this.height=513,this.bgWidth=717,this.bgHeight=409,this.visible=!1,this.callbacks={},this.curItemIdx=-1,this.selectedItemIdx=-1,this.itemsListIdx=-1,this.itemWidth=0,this.claimEnabled=!1,this.isDailyFR=!1,this.isTouchDown=!1,this.numItemMax={landscape:5,portrait:3},this.itemSize={w:119,h:129,ch:85,hh:114,th:29},this.buttonSize={w:242,h:68},this.arrowSize={w:22,h:38},this.flagIconSize={w:26,h:26},this.orientation="landscape",this.onItemsBoxDown=e=>{e.preventDefault(),!this.tweenNavItems&&(this.isTouchDown=!0,this.touchDownX=this.getClientX(e))},this.onItemsBoxUp=e=>{e.preventDefault(),this.isTouchDown&&(this.isTouchDown=!1,this.adjustMovedItems())},this.onItemsBoxOut=e=>{e.preventDefault(),this.isTouchDown&&(this.isTouchDown=!1,this.adjustMovedItems())},this.onItemsBoxMove=e=>{e.preventDefault(),this.isTouchDown&&(this.curMovedItemX=this.curItemMLeft+this.getClientX(e)-this.touchDownX,this.itemsList.style.marginLeft=this.getPixel(this.curMovedItemX))},ee.on(Pi,this.render,this),this.parseFround(),this.froundInfo&&(this.parseTemplate(),this.isDailyFR||(this.itemsFround=[{day:0,count:this.froundInfo.NoFreeSpin,state:we.STANDARD}]))}parseTemplate(){let e=R.json("frtemplate");!this.template.IsDefault&&this.template.PopUpMessage&&co(this.template.PopUpMessage,e.PopUpMessage),this.popupTemplate=e.PopUpMessage,this.popupTemplate.IconBorderColor||(this.popupTemplate.IconBorderColor="#F4D03A"),this.popupTemplate.GraphicButtonTextColor||(this.popupTemplate.GraphicButtonTextColor=this.popupTemplate.ButtonTextColor),this.popupTemplate.ItemTitleColor||(this.popupTemplate.ItemTitleColor=this.popupTemplate.GameNameColor),this.popupTemplate.ItemContentColor||(this.popupTemplate.ItemContentColor=this.popupTemplate.NoSpinColor)}showStart(){if(Ut.hasShown)this.visible=!1;else{let e=y.get("keyboardService");e&&(e.enabled=!1),this.visible=!0,this.name="start",this.render(),Ut.hasShown=!0}}showEnd(){let e=y.get("keyboardService");e&&(e.enabled=!1),this.visible=!0,this.selectedItemIdx=-1,this.name="end",this.render()}render(){if(!this.visible||!this.froundInfo)return;this.clear(),this.createBgLayer();let e=this.createPopup();this.content.appendChild(e),this.name==="end"?this.createEndContent(e):this.createStartContent(e),le.canvas.parentElement.insertBefore(this.content,le.canvas)}createBgLayer(){this.content=document.createElement("div"),this.content.style.cssText=le.canvas.style.cssText,this.content.style.backgroundColor="rgba(0,0,0,0.6)",this.content.style.position="absolute",this.content.style.margin="0px",this.content.style.color="#ffc600",this.content.style.textAlign="center",this.content.style.width="100%",this.content.style.height="100%",this.content.style.cursor="unset",this.content.className="noselect",this.content.style.fontFamily=le.getFont()}createPopup(){let e=R.json("frconfig"),i=this.popupTemplate.LandscapeBackgroundUrl,s=window.innerWidth,n=window.innerHeight,r=960,o=540;this.bgWidth=717,this.bgHeight=409,this.orientation="landscape",e&&(e.num_item_limits&&(this.numItemMax=e.num_item_max),e.item_size&&(this.itemSize=e.item_size),e.button_size&&(this.buttonSize=e.button_size),e.arrow_size&&(this.arrowSize=e.arrow_size),e.flag_icon_size&&(this.flagIconSize=e.flag_icon_size),e.fr_landscape_panel_size&&(this.bgWidth=e.fr_landscape_panel_size.w,this.bgHeight=e.fr_landscape_panel_size.h)),s<n&&(i=this.popupTemplate.PortraitBackgroundUrl,r=540,o=960,this.bgWidth=468,this.bgHeight=605,this.orientation="portrait",e&&e.fr_portriat_panel_size&&(this.bgWidth=e.fr_portriat_panel_size.w,this.bgHeight=e.fr_portriat_panel_size.h));let h=Math.min(s/r,n/o)*r,u=this.bgWidth/r*h,p=u/this.bgWidth*this.bgHeight,g=(n-p)/2,b=(s-u)/2;this.scale=u/this.bgWidth;let L=document.createElement("div");return L.style.cssText=`background-image:url(${i}); background-size: 100% 100%;
margin:${g}px ${b}px;
width:${u}px; height:${p}px;
position: relative;`,L}createTitle(e){let i=this.createAbsolute(12);return i.innerHTML=e,i.style.fontWeight="bold",i.style.fontSize=this.getPixel(23),i.style.lineHeight=this.getPixel(35),i.style.color=this.popupTemplate.TitleColor,i}createIcon(e,i="100%"){let s=this.createAbsolute(e,i);return s.style.padding="0 2%",s.innerHTML=`<img src="${this.iconUrl}" style="height:${this.getPixel(88)};width:${this.getPixel(88)};
${this.getRoundBorderCss(2,this.popupTemplate.IconBorderColor,5)}">`,s}createEndContent(e){let i=72,s=105,n=152,r=200,o=196;this.orientation==="portrait"&&(i=120,s=155,n=240,r=355,o=365),this.createItems(e,r);let a=_().froundSum;_().froundCount=0;let h=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_btn");h.onclick=()=>this.remove();let u=this.createRelative(o);u.appendChild(h);let p=document.createElement("div");p.style.position="relative",p.style.top=this.getPixel(o);let g=this.createPara(15,n);g.style.color=this.popupTemplate.ContentColor,g.style.lineHeight=this.getPixel(18);let b=this.isDailyFR&&this.curItemIdx<this.totaltems-1?"next":"more";g.appendChild(this.createSpan(H("fr_claimed"),{display:"block"})),g.appendChild(this.createSpan(H(`fr_logoff_${b}`),{display:"block"}));let L="fr_thank";if(a){let O=this.createPara(30,i);O.innerHTML=`${H("youwin")}`,O.style.color=this.popupTemplate.WinSummaryColor,O.style.fontWeight="bolder";let W=this.createPara(30,s);W.innerHTML=`${_().currency} ${st(a.toFixed(2))}`,W.style.color=this.popupTemplate.WinSummaryColor,W.style.fontWeight="bolder",e.appendChild(O),e.appendChild(W),L="fr_congrats"}else{let O=this.createPara(25,i);O.innerHTML=`${H("fr_nowin_title")}`,O.style.color=this.popupTemplate.WinSummaryColor,O.style.fontWeight="bolder";let W=this.createPara(16,s);W.innerHTML=H("fr_nowin_text"),W.style.color=this.popupTemplate.WinSummaryColor,W.style.fontWeight="bold",e.appendChild(O),e.appendChild(W)}e.appendChild(this.createTitle(H(L))),e.appendChild(g),e.appendChild(p),e.appendChild(u)}createStartContent(e){let i=R.json("frconfig"),s=0,n=64,r=161,o=200,a=196,h=1,u="38%",p="34%",g="58%",b="left";this.orientation==="portrait"&&(s=145,n=70,r=170,o=355,a=365,h=.85,u=null,p=g="96%",b="center"),this.createItems(e,o);let L=this.froundInfo,O=this.translate(this.froundInfo.Title);O||(O=this.isDailyFR?H("fr_daily"):H("fr_title"));let W=this.createTitle(O),Le=this.createIcon(n,p),Qe=this.createRelative(a),Et=document.createElement("div");Et.style.position="relative",Et.style.top=this.getPixel(a);let As=this.createParaT(H(L.Gameid),r,p),Ae=this.createPara(15,65+s,g);Ae.style.verticalAlign="middle",Ae.style.textAlign=b,Ae.style.lineHeight=this.getPixel(90),Ae.style.height=this.getPixel(128);let at=this.createSpan("",{lineHeight:"normal",display:"inline-block",verticalAlign:"middle"}),Ds=this.createSpan(this.translate(L.MessageContent).replace(/\r\n/gi,"<br>"),{display:"block",color:this.popupTemplate.ContentColor,lineHeight:this.getPixel(17),maxHeight:this.getPixel(69),overflow:"hidden"}),Ns=this.createSpan(H("fr_date").replace("%DATE%",L.ExpirationDate),{display:"block",color:this.popupTemplate.ExpiryDateColor,lineHeight:this.getPixel(18)});if(at.appendChild(Ds),at.appendChild(Ns),this.isDailyFR&&this.curItemIdx>=0&&this.gameID.toLowerCase()===I().ID.toLowerCase()){this.claimEnabled=!0;let De=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_active");De.onclick=()=>this.claimFround(),Qe.appendChild(De)}else{let De=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_ok",h),Rs=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_cancel",h);De.onclick=()=>this.emit("confirm"),Rs.onclick=()=>this.emit("cancel"),Qe.appendChild(De),Qe.appendChild(Rs)}if(i&&i.fr_url_tnc){let De=this.createSpan(H("fr_tnc"),{display:"block",color:this.popupTemplate.TNCColor,lineHeight:this.getPixel(18),cursor:"pointer"});De.onclick=Rs=>{Ht(i.fr_url_tnc.replace("[%%URLDOMAIN%%]",Rn(location.hostname)),"Free Rounds T&C")},at.appendChild(De)}u&&(Ae.style.left=u),Ae.appendChild(at),e.appendChild(W),e.appendChild(Le),e.appendChild(As),e.appendChild(Ae),e.appendChild(Et),e.appendChild(Qe)}get iconUrl(){let e=v.LANGUAGE;return`../${this.gameID}/assets/icons/icon192.${[D.Chinese,D.Japanese].indexOf(e)>-1?e:"en"}.jpg`}getRoundBorderCss(e,i,s){return`border:${this.getPixel(e)} solid ${i};border-radius:${this.getPixel(s)}`}getPixel(e){return this.scale*e+"px"}get gameID(){return this.froundInfo.Gameid}createButton(e,i,s,n="",r=1){let o=document.createElement("div");return o.style.cssText=`background-image: url(../_commons/freeround/img/${e}.png);
background-size: 100% 100%; float: left; cursor: pointer; margin: auto ${this.getPixel(10*r)};
width: ${this.getPixel(i*r)}; height: ${this.getPixel(s*r)}; line-height: ${this.getPixel(s*r)};
font-weight: bolder; font-size: ${this.getPixel(s*.3*r)}; color: ${this.popupTemplate.GraphicButtonTextColor}`,n&&(o.innerHTML=H(n)),o}clear(){this.content&&le.canvas.parentElement.removeChild(this.content)}remove(){let e=y.get("keyboardService");e&&(e.enabled=!0),this.visible=!1,this.clear(),this.content=void 0}parseFround(){let e=_().fround;if(y.get("netService").json){this.parseFroundJson(e);return}let i=fe(e.querySelector("message"));i&&(this.froundInfo=JSON.parse(i));let s=fe(e.querySelector("template"));s&&(this.template=JSON.parse(s));let n=fe(e.querySelector("rounds"));if(n){let r=JSON.parse(n);r&&r.length&&(this.isDailyFR=!0,this.itemsFround=r)}}parseFroundJson(e){if(e.rounds&&e.rounds.length&&(this.isDailyFR=!0,this.itemsFround=e.rounds),e.popUpMessageContent){let i={};for(let s in e.popUpMessageContent)i[this.capitalizeKey(s)]=e.popUpMessageContent[s];this.froundInfo=i}if(e.template){let i={};for(let s in e.template){let n={};if(typeof e.template[s]=="object")for(let r in e.template[s])n[this.capitalizeKey(r)]=e.template[s][r];else n=e.template[s];i[this.capitalizeKey(s)]=n}this.template=i}}capitalizeKey(e){return e.charAt(0).toUpperCase()+e.slice(1)}translate(e){let i;return I().LANGUAGE===D.Chinese?i=e.CH:i=e[I().LANGUAGE.toUpperCase()],i||(i=e.EN),i}createAbsolute(e,i="100%"){let s=document.createElement("div");return s.style.width=i,s.style.position="absolute",s.style.top=this.getPixel(e),s}createRelative(e){let i=document.createElement("div");return i.style.position="relative",i.style.display="inline-block",i.style.top=this.getPixel(e),i}createSpan(e,i){let s=document.createElement("span");s.innerHTML=e;for(let n in i)s.style[n]=i[n];return s}createPara(e,i,s="96%"){let n=document.createElement("div");return n.style.fontSize=this.getPixel(e),n.style.color="white",n.style.top=this.getPixel(i),n.style.width=s,n.style.lineHeight="1.2",n.style.padding="0 2%",n.style.position="absolute",n}createParaT(e,i,s="96%"){let n=this.createPara(15,i,s);return n.innerHTML=`${e}`,n.style.height=this.getPixel(34),n.style.color=this.popupTemplate.GameNameColor,n.style.lineHeight="1",n.style.fontWeight="bold",n.style.overflow="hidden",n}createItem(e){let i=this.itemsFround[e],s=document.createElement("li"),n="dailybox-expired",r=14,o=24,a=this.popupTemplate.DisabledTextColor,h=this.popupTemplate.DisabledTextColor,u=this.itemSize.ch,p=this.flagIconSize.h*.5;i.state===we.UPCOMING&&(n="dailybox-upcoming"),e===this.curItemIdx&&(n="dailybox-ongoing",r=18,o=35,a=this.popupTemplate.ItemTitleColor,h=this.popupTemplate.ItemContentColor,u=this.itemSize.hh,p=(this.itemSize.h-u)*.5);let g="",b=(this.itemSize.h-u)*.5,L=u-this.itemSize.th-4;if(i.state===we.STANDARD&&(n="standardbox",L=u-4),i.day>0&&(g=`<div style="color:${a};font-size:${this.getPixel(r)};line-height:${this.getPixel(this.itemSize.th)};display:block;">${H("fr_day").replace("%NUM%",`${i.day}`)}</div>`),s.innerHTML=`<div style="margin-top:${this.getPixel(b)};width:${this.getPixel(this.itemSize.w)};height:${this.getPixel(u)};line-height:normal;font-weight:bold">
${g}
<div style="height:${this.getPixel(L)};line-height:${this.getPixel(L)};display:block;">
<span style="color:${h};font-size:${this.getPixel(r)};line-height:${this.getPixel(r+1)};padding:0 ${this.getPixel(8)};display:inline-block;vertical-align:middle;">
<span style="font-weight:bolder;font-size:${this.getPixel(o)};line-height:${this.getPixel(o)};display:block;">${i.count}</span>
${H("fr_fsw").replace("%NUM%","")}
</span>
</div>
</div>`,[we.ONGOING,we.UPCOMING].indexOf(i.state)<0&&(_().froundCount===0||e!==this.curItemIdx)){let O=document.createElement("img");O.src=`../_commons/freeround/img/item${i.state===we.UNCLAIMED?"cross":"check"}.png`,O.style.cssText=`width:${this.getPixel(this.flagIconSize.w)};height:${this.getPixel(this.flagIconSize.h)};top:-${this.getPixel(p+u)};float:right;position:relative;`,s.appendChild(O)}return s.style.cssText=`background-image: url(../_commons/freeround/img/${n}.png);
background-size: 100% 100%; float: left; text-align: center;
width: ${this.getPixel(this.itemSize.w)}; height: ${this.getPixel(this.itemSize.h)};
line-height: ${this.getPixel(this.itemSize.h)}; margin: 0 ${this.getPixel(3)};`,s}createItems(e,i){if(this.itemsFround){this.curItemMLeft=0,this.totaltems=this.itemsFround.length,this.itemWidth=this.itemSize.w+6;let s=0,n=this.itemWidth*Math.min(this.totaltems,this.numItemMax[this.orientation]);this.itemsList=document.createElement("ul");for(let o=0;o<this.totaltems;o++)[we.ONGOING,we.STANDARD].indexOf(this.itemsFround[o].state)>=0?this.curItemIdx=o:[we.CLAIMED,we.UNCLAIMED].indexOf(this.itemsFround[o].state)>=0&&(o<this.totaltems-1&&this.itemsFround[o+1].state===we.UPCOMING||o===this.totaltems-1)&&(this.curItemIdx=o),this.itemsList.appendChild(this.createItem(o)),s+=this.itemWidth+6;if(this.curItemIdx<0)return;this.itemsBox&&this.removeItemsListEvents();let r=this.createRelative(i);if(this.itemsBox=document.createElement("div"),this.itemsBox.style.cssText=`width: ${this.getPixel(n)}; height: ${this.getPixel(this.itemSize.h)}; float: left; overflow: hidden;`,this.itemsList.style.cssText=`list-style-type: none; margin: 0; padding: 0; width: ${this.getPixel(s)};`,this.btnNext=this.btnPrev=void 0,this.totaltems>this.numItemMax[this.orientation]){let o=this.getPixel((this.itemSize.h-this.arrowSize.h)*.5);this.btnPrev=this.createButton("itemPrev",this.arrowSize.w,this.arrowSize.h),this.btnNext=this.createButton("itemNext",this.arrowSize.w,this.arrowSize.h),this.btnPrev.onclick=()=>this.itemPrev(),this.btnNext.onclick=()=>this.itemNext(),this.btnPrev.style.margin=`${o} ${this.getPixel(4)} 0 ${this.getPixel(16)}`,this.btnNext.style.margin=`${o} ${this.getPixel(16)} 0 ${this.getPixel(4)}`,this.btnPrev.style.marginTop=this.btnNext.style.marginTop=this.getPixel(o),this.selectedItemIdx<0&&(this.selectedItemIdx=this.curItemIdx),this.itemsListIdx=this.selectedItemIdx-Math.floor(this.numItemMax[this.orientation]*.5),this.adjustItem(!1),this.addItemsListEvents()}this.itemsBox.appendChild(this.itemsList),this.btnPrev&&r.appendChild(this.btnPrev),r.appendChild(this.itemsBox),this.btnNext&&r.appendChild(this.btnNext),e.appendChild(r)}}itemPrev(){this.btnPrev.style.opacity=="1"&&(this.checkNavIdx(),this.itemsListIdx--,this.selectedItemIdx--,this.adjustItem())}itemNext(){this.btnNext.style.opacity=="1"&&(this.checkNavIdx(),this.itemsListIdx++,this.selectedItemIdx++,this.adjustItem())}checkNavIdx(){let e=Math.floor(this.numItemMax[this.orientation]*.5),i=this.totaltems-Math.ceil(this.numItemMax[this.orientation]*.5);this.selectedItemIdx<e?this.selectedItemIdx=e:this.selectedItemIdx>i&&(this.selectedItemIdx=i)}adjustItem(e=!0){this.btnPrev.style.opacity="1",this.btnNext.style.opacity="1",this.btnPrev.style.cursor="pointer",this.btnNext.style.cursor="pointer",this.itemsListIdx<=0?(this.itemsListIdx=0,this.btnPrev.style.opacity="0.2",this.btnPrev.style.cursor="unset"):this.itemsListIdx>=this.totaltems-this.numItemMax[this.orientation]&&(this.itemsListIdx=this.totaltems-this.numItemMax[this.orientation],this.btnNext.style.opacity="0.2",this.btnNext.style.cursor="unset");let i=-1*this.itemsListIdx*this.itemWidth;if(this.tweenNavItems&&this.tweenNavItems.stop(),!e){this.curItemMLeft=this.curMovedItemX=i,this.itemsList.style.marginLeft=this.getPixel(this.curItemMLeft);return}let s={val:this.curItemMLeft};this.itemsList.style.marginLeft=this.getPixel(this.curItemMLeft),this.tweenNavItems=new TWEEN.Tween(s).to({val:i},400).easing(TWEEN.Easing.Quadratic.In).onUpdate(()=>{this.curItemMLeft=this.curMovedItemX=s.val,this.itemsList.style.marginLeft=this.getPixel(this.curItemMLeft)}).onComplete(()=>{this.tweenNavItems=null}),this.tweenNavItems.start()}claimFround(){if(this.claimEnabled){if(this.claimEnabled=!1,this.itemsFround[this.curItemIdx].state!==we.ONGOING){this.emit("confirm");return}Ga().claimFround().then(e=>{this.updateClaimedFround(e),this.emit("confirm")}).catch(e=>{e.code?Ke(e.code):Ke(e.error?e.error:"0"),this.emit("claimErr")})}}updateClaimedFround(e){let i=_();if(i.fround){if(y.get("netService").json){let s=e.value.freeGameInfo;s&&(s.round!==void 0&&(i.froundCount=s.round),s.rounds!==void 0&&(i.fround.rounds=s.rounds))}else{let s=e.querySelector("dailyFreeSpin");s&&(i.fround=s,i.froundCount=l(s,"round",i.froundCount))}this.parseFround()}}adjustMovedItems(){let e=this.itemsListIdx,i=this.curMovedItemX/this.itemWidth;i>0?i=0:i=i*-1,i>e?this.itemsListIdx=Math.ceil(i):i<e&&(this.itemsListIdx=Math.floor(i)),this.selectedItemIdx+=this.itemsListIdx-e,this.curItemMLeft=this.curMovedItemX,this.checkNavIdx(),this.adjustItem()}addListEventListeners(e,i,s){this.itemsBox.addEventListener(e,s),this.itemsBox.addEventListener(i,s)}removeListEventListeners(e,i,s){this.itemsBox.removeEventListener(e,s),this.itemsBox.removeEventListener(i,s)}addItemsListEvents(){this.addListEventListeners("mousedown","touchstart",this.onItemsBoxDown),this.addListEventListeners("mouseup","touchend",this.onItemsBoxUp),this.addListEventListeners("mouseleave","touchcancel",this.onItemsBoxOut),this.addListEventListeners("mousemove","touchmove",this.onItemsBoxMove)}removeItemsListEvents(){this.removeListEventListeners("mousedown","touchstart",this.onItemsBoxDown),this.removeListEventListeners("mouseup","touchend",this.onItemsBoxUp),this.removeListEventListeners("mouseleave","touchcancel",this.onItemsBoxOut),this.removeListEventListeners("mousemove","touchmove",this.onItemsBoxMove)}getClientX(e){return e.clientX!=null?e.clientX:e.touches&&e.touches[0]?e.touches[0].clientX:0}on(e,i,s,...n){this.callbacks[e]={context:s,callback:i,args:n}}emit(e){let i=this.callbacks[e];i&&i.callback.apply(i.context,i.args)}off(e){this.callbacks[e]=void 0}};Ut.hasShown=!1;let ts=Ut;var Cd=Object.defineProperty,Td=Object.getOwnPropertyDescriptor,ie=(t,e,i,s)=>{for(var n=s>1?void 0:s?Td(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Cd(e,i,n),n};let Bd=class extends Pd{clickSpinHandler(){this.scene.isAutoSpin=!1,super.clickSpinHandler()}},Pn=class extends _d{enter(){super.enter(),this.scene.player.checkAutoSpinConditions(),this.scene.isAutoSpin?this.scene.enabledBtnAutoSpin():(this.scene.resetAutoSpin(),this.scene.showButtons())}spinSuccess(){this.scene.resetCheatBar(),this.scene.menu.hide(),this.scene.hideButtons(),d.emit("menutoggle",{visible:this.scene.menu.visibility}),super.spinSuccess()}},Ed=class extends xd{enter(){super.enter(),this.scene.menu.hide()}clickSpinHandler(){super.clickSpinHandler(),this.scene.resetCheatBar()}},bo=class extends Id{enter(){super.enter(),this.scene.menu.hide()}},A=class extends Q{constructor(){super(...arguments),this.tick=0}onCreated(e){this.menu.init(this.context),this.cheatBar&&(this.cheatBar.visible=this.player.demo==="1"&&E.desktop),B.add(this),this.menu.sound&&(this.menu.sound.selected=this.soundService.muted),this.menu.bonusbet&&(this.menu.bonusbet.selected=this.player.bonusBet),this.froundToggle&&(this.froundToggle.selected=this.player.froundOn,this.froundToggle.visible=this.player.fround&&!0||this.context.mockFroundToggle),this.menu.on(rt.MENU_CLOSED,()=>this.menuClosedHandler()),this.betPanel&&this.betPanel.on(gn,i=>this.betChangedHandler(i)),super.onCreated(e),this.autoSpinDisplay&&(this.autoSpinDisplay.visible=this.isAutoSpin)}betChangedHandler(e){this.player.betValueIndex=e,this.updateFooterBar()}onErrorPopUpClose(e){super.onErrorPopUpClose(e),this.btnSpin.show("spin"),this.menu.show(),this.showButtons()}onErrorHandler(){super.onErrorHandler(),this.stopAutoHandler()}initCommand(){super.initCommand(),d.on("livechat",()=>this.clickLiveChatHandler()),d.on("help",()=>this.clickHelpHandler()),d.on("lobby",()=>this.clickExitHandler()),d.on("home",()=>this.clickHomeHandler()),d.on("startautospin",()=>this.startAutoSpinHandler()),d.on("bonusbet",()=>this.bonusBetHandler()),d.on("menu",()=>{this.menu.visible?this.menu.close(!0):this.btnMenu.enabled&&this.clickMenuHandler()}),d.on("paytable",()=>{N.replace("settings","paytable")}),d.on("settings",()=>{N.replace("settings")}),d.on("infoPage",()=>{N.replace("infoPage")})}clickSpinHandler(e){super.clickSpinHandler(e),this.closeAutoSpinBetSettings()}clickMenuHandler(){this.menu.open(),this.hideButtons()}menuClosedHandler(){this.showButtons()}clickAutospin(){this.autoSpinOptions&&this.autoSpinOptions.open()}clickSettings(){this.betPanel&&this.betPanel.open()}clickAdvancedAutoSpinHandler(){N.replace("settings","autospin")}stopAutoHandler(){this.player.stopAutoSpin(),this.resetAutoSpin(),this.state instanceof Pn&&(this.btnSpin.state==="skip"||this.btnSpin.state==="stop")&&!this.reels.isSpinning&&(this.btnSpin.show("spin"),this.menu.show(),this.showButtons())}autoSpinHandler(){}startAutoSpinHandler(){this.autoSpinDisplay&&(this.updateAutoCount(this.player.autoSpin),this.autoSpinDisplay.visible=!0,this.btnAutoSpin.visible=!1),super.autoSpinHandler()}closeAutoSpinBetSettings(){this.autoSpinOptions&&this.autoSpinOptions.close(),this.betPanel&&this.betPanel.close(!0)}hideButtons(){this.btnMenu.enabled=!1,this.btnAutoSpin.enabled=!1,this.btnAutoSpin.up.tint=8947848,this.btnAutoSpin["text-l"]&&(this.btnAutoSpin["text-l"].tint=8947848),this.btnAutoSpin["text-p"]&&(this.btnAutoSpin["text-p"].tint=8947848),this.fund.visible=!!this.fundVisible,this.fund.enabled=!1,this.realPlay.visible=!!this.realPlayVisible,this.realPlay.enabled=!1,this.tournament&&(this.tournament.enabled=!1),this.btnBetSettings&&(this.btnBetSettings.enabled=!1,this.btnBetSettings.up.tint=8947848,this.btnBetSettings.text.tint=8947848),this.froundToggle&&(this.froundToggle.enabled=!1)}showButtons(){this.btnMenu.enabled=!0,this.btnAutoSpin.enabled=!0;let e=Number(v["mainScene.hudPanelButton.tint"]);this.btnBetSettings&&(this.player.froundOn?(this.btnBetSettings.enabled=!1,this.btnBetSettings.up.tint=8947848,this.btnBetSettings.text.tint=8947848):(this.btnBetSettings.enabled=!0,this.btnBetSettings.up.tint=e,this.btnBetSettings.text.tint=e)),this.btnAutoSpin.up.tint=e,this.btnAutoSpin["text-l"]&&(this.btnAutoSpin["text-l"].tint=e),this.btnAutoSpin["text-p"]&&(this.btnAutoSpin["text-p"].tint=e),this.fund.visible=this.fund.enabled=!!this.fundVisible,this.realPlay.visible=this.realPlay.enabled=!!this.realPlayVisible,this.tournament&&(this.tournament.enabled=!0),this.btnBetSettings&&(this.btnBetSettings.enabled=!0,this.btnBetSettings.up.tint=e,this.btnBetSettings.text.tint=e),this.froundToggle&&(this.froundToggle.enabled=!0)}get fundVisible(){return!this.context.FUNPLAY&&this.context.FUNDS_URL}get realPlayVisible(){return this.context.FUNPLAY&&this.context.LOGIN_URL}resetCheatBar(){this.cheatBar&&this.cheatBar.visible&&this.cheatBar.init()}bonusBetHandler(){if(this.menu.bonusbet.selected){pt("bonusbeton");let e=U().get("bonusbetNote");this.addChild(e),setTimeout(()=>e.fadeOut(),2e3)}else pt("bonusbetoff");this.player.bonusBet=this.menu.bonusbet.selected,this.updateTotalBet()}showBonusBetLoading(e){this.isAutoSpin=!1;let i=U().get(e);this.addChild(i),pt("bonusbettrigger"),setTimeout(()=>i.fadeOut(),2e3),setTimeout(()=>N.replace("bonusbet"),2500)}exit(){d.off("bonusbet"),d.off("betsettings"),d.off("menu"),d.off("paytable"),d.off("settings"),d.off("infoPage"),B.remove(this),super.exit()}advanceTime(e){return this.tick++,this.bonusbetEffect&&(this.bonusbetEffect.visible=this.menu.bonusbet.visible&&this.menu.bonusbet.selected,this.bonusbetEffect.scale.set(.6+.02*Math.sin(this.tick*.1))),this.btnBonusEffect&&(this.btnBonusEffect.visible=this.btnSpin.visible&&this.btnSpin.enabled&&this.btnSpin.state==="bonus",this.btnBonusEffect.visible&&(this.btnBonusEffect.position.set(this.btnSpin.position.x,this.btnSpin.position.y),this.btnBonusEffect.rotation+=.07)),this.btnEffectStopAuto&&this.autoSpinDisplay&&this.autoSpinDisplay.visible&&this.autoSpinDisplay.alpha===1&&(this.btnEffectStopAuto.rotation+=.08),this.btnSpin.update(),!0}showFrounEnd(){this.player.fround&&(A.fround.showEnd(),this.isAutoSpin=!1,this.autoSpinOptions&&(this.player.stopAutoSpin(),this.resetAutoSpin()),this.froundToggle&&(this.froundToggle.visible=!1),this.player.froundOn=!1,y.get("netService").fround=!1,this.player.fround=void 0,this.player.froundExpired=!1,this.updateTotalBet())}showFrounStart(){A.fround.showStart(),A.fround.on("claimErr",()=>{Z.event({name:"fround dialog",properties:{Action:"ClaimError"},measurements:{}}),A.fround.remove(),this.player.froundOn=!1,this.player.fround=void 0,this.froundToggle&&(this.froundToggle.selected=!1,this.froundToggle.visible=!1)},A.fround),A.fround.on("cancel",()=>{Z.event({name:"fround dialog",properties:{Action:"Cancel"},measurements:{}}),A.fround.remove()},A.fround),A.fround.on("confirm",()=>{Z.event({name:"fround dialog",properties:{Action:"Confirm"},measurements:{}}),this.froundToggle&&(this.froundToggle.selected=!0),A.fround.remove(),this.clickFroundHandler()},this)}initFround(){this.player.fround&&(this.player.bonus==null||this.froundRestore?(A.fround||(A.fround=new ts,this.player.froundCount),this.player.froundCount>0&&!this.player.froundExpired?this.showFrounStart():ts.hasShown||this.froundRestore?this.showFrounEnd():(this.player.froundOn=!1,this.player.fround=void 0,this.froundToggle&&(this.froundToggle.selected=!1,this.froundToggle.visible=!1))):this.player.bonus!=null&&(this.player.froundCount==0||this.player.froundExpired)&&(this.froundRestore=!0)),this.player.froundCount!=null&&(this.froundCount.value=this.player.froundCount.toString())}clickFroundHandler(){if(!this.context.mockFroundToggle)if(this.context.ID===A.fround.gameID){Z.event({name:"fround box",properties:{Action:this.froundToggle.selected?"On":"Off"},measurements:{}}),this.player.froundOn=this.froundToggle.selected;let e=y.get("netService");e.fround=this.froundToggle.selected,this.updateTotalBet()}else{let e=pr(this.context.ID),i=pr(A.fround.gameID);if(e){Z.event({name:"fround box",properties:{Action:i},measurements:{}});let s=e.charAt(0).toUpperCase()+e.substr(1);li(location.toString().replace(e,i).replace(s,i))}}}checkFround(e){e&&(this.froundCount.value=e.round,this.player.froundCount=e.round)}checkAuto(){this.isAutoSpin&&this.player.isAutoSpinOn&&(this.isFreeSpin||this.updateAutoCount(this.player.autoSpin-1),this.player.checkAutoSpinConditions())}updateAuto(){this.isAutoSpin?this.enabledBtnAutoSpin():this.resetAutoSpin()}updateTotalBet(){super.updateTotalBet();let e=Number(v["mainScene.hudPanelButton.tint"]);if(this.btnBetSettings)if(this.player.froundOn)this.btnBetSettings.enabled=!1,this.btnBetSettings.up.tint=8947848,this.btnBetSettings.text.tint=8947848;else{let i=this.state instanceof Pn&&this.btnSpin.state==="spin"&&this.btnSpin.enabled;i||(e=8947848),this.btnBetSettings.enabled=i,this.btnBetSettings.up.tint=e,this.btnBetSettings.text.tint=e}}enabledBtnAutoSpin(){this.autoSpinDisplay&&(this.autoSpinDisplay.alpha=1,this.btnStopAuto.enabled=!0,this.player.bonus!==void 0&&this.player.bonus!==null&&(this.autoSpinDisplay.alpha=.5,this.btnStopAuto.enabled=!1))}resetAutoSpin(){this.autoSpinDisplay&&(clearTimeout(this.autoSpinTimer),this.autoSpinDisplay.visible=!1,this.btnAutoSpin.visible=!0)}};ie([Tt("user")],A.prototype,"player",2);ie([S("menu")],A.prototype,"menu",2);ie([S("btnMenu")],A.prototype,"btnMenu",2);ie([S("btnAutoSpin")],A.prototype,"btnAutoSpin",2);ie([S("btnBetSettings")],A.prototype,"btnBetSettings",2);ie([S("realPlay")],A.prototype,"realPlay",2);ie([S("fund")],A.prototype,"fund",2);ie([S("cheatBar")],A.prototype,"cheatBar",2);ie([S("bonusbetEffect")],A.prototype,"bonusbetEffect",2);ie([S("btnBonusEffect")],A.prototype,"btnBonusEffect",2);ie([S("btnEffectStopAuto")],A.prototype,"btnEffectStopAuto",2);ie([S("btnStopAuto")],A.prototype,"btnStopAuto",2);ie([S("fround")],A.prototype,"froundToggle",2);ie([S("froundCount")],A.prototype,"froundCount",2);ie([S("autoSpinOptions")],A.prototype,"autoSpinOptions",2);ie([S("betSettings")],A.prototype,"betPanel",2);A=ie([m({tag:"main",category:"scene"})],A);var Od=Object.defineProperty,Ld=Object.getOwnPropertyDescriptor,Se=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ld(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Od(e,i,n),n};class zn extends Pn{spinSuccess(){this.scene.btnSpin.state!=="bonus"&&this.scene.playBtnSpinEffect(),super.spinSuccess()}}class go extends Ed{clickSpinHandler(){this.scene.playBtnSpinEffect(),super.clickSpinHandler()}}let he=class extends A{constructor(){super(...arguments),this.iconExpandableDisabled=.4}enter(t){this.initHightlightGlow(),super.enter(t)}onCreated(t){super.onCreated(t),this.betSelection&&this.initBetSelection(),this.initFooterLabels(),this.initComponentPositions(),this.updateBetAmount(),this.onSceneResize(),this.updateFastSpin()}initCommand(){super.initCommand(),d.on("betSelection",()=>this.clickBetSelectionHandler()),d.on("autospin",()=>this.clickAutospin()),d.on("stopauto",()=>this.stopAutoHandler()),d.on("turbo",()=>this.clickTurboHandler()),d.on("realplay",()=>this.clickRealPlayHandler()),d.on("fundtransfer",()=>this.clickFundHandler())}initFooterLabels(){this.betAmount=this.footerBar.getComponentByID("betAmount");let t=this.footerBar.getComponentByID("balanceTitle"),e=this.footerBar.getComponentByID("totalTitle"),i=this.footerBar.getComponentByID("betamountTitle"),s=Ct(_().currency,I().CURRENCY_SYMBOL).replace(" ","");t&&(t.value+="("+s+")"),e&&(e.value+="("+s+")"),i&&(i.value+="("+s+")")}initComponentPositions(){this.buttonsPanelsY=this.footerBar.panels.y,this.menuBtnCloseLX=this.menu.buttonCloseLandscape.x,this.menuBtnClosePX=this.menu.buttonClosePortrait.x}playBtnSpinEffect(){this.btnSpinEffect&&(this.btnSpinEffect.visible=!0,this.btnSpinEffect.activate(),this.btnSpinEffect.playOnce().then(()=>{this.btnSpinEffect.deactivate(),this.btnSpinEffect.visible=!1}))}clickSpinHandler(t){super.clickSpinHandler(t),this.betSelection.close()}startAutoSpinHandler(){super.startAutoSpinHandler(),this.btnStopAuto.activate()}clickTurboHandler(){!this.btnTurbo.enabled&&!this.btnStopturbo.enabled||(this.player.isTurbo=!this.player.isTurbo,this.betSelection.close(),this.btnTurbo.visible=!this.player.isTurbo,this.btnStopturbo.visible=this.player.isTurbo,this.player.isTurbo&&this.btnStopturbo.activate(),this.updateFastSpin())}initBetSelection(){this.betLevelsSelection&&(this.betLevelsSelection.selectedIndex=this.player.multiplierIndex),this.betSelection.setValues(this.player.betValues.concat(),this.player.betValueIndex),this.betSelection.on(no,t=>this.betChangedHandler(t)),this.betSelection.on(yn,t=>this.betSelectionVisibilityHandler(t)),this.updateTotalBet()}onBetLevelSelect(){this.betLevelsSelection&&(ze(),this.player.multiplierIndex=this.betLevelsSelection.selectedIndex,this.betLevelsSelection.activate(),this.updateBetAmount(),this.updateFooterBar())}clickBetSelectionHandler(){this.betSelection&&(this.betSelection.visible?this.betSelection.close():this.betSelection.open()&&this.betSelectionOpen())}betChangedHandler(t){super.betChangedHandler(t),this.updateBetAmount()}betSelectionVisibilityHandler(t){this.iconBetExpandable.scale.y=t?-1:1}betSelectionOpen(){}updateBetAmount(){this.betAmount&&(this.betAmount.value=de(this.player.displayedBetAmount))}updateTotalBet(){super.updateTotalBet(),this.updateBetSelection()}updateBetSelection(){if(this.betLevelsSelection&&(this.betLevelsSelection.selectedIndex=this.player.displayedMultiplierIndex),this.betSelection.select(this.player.displayedBetIndex),this.updateBetAmount(),this.player.froundOn)this.betLevelsEnabled(!1),this.btnBetSelection.enabled=!1,this.iconBetExpandable.alpha=this.iconExpandableDisabled;else{let t=this.state instanceof zn&&this.btnSpin.state==="spin"&&this.btnSpin.enabled;this.betLevelsEnabled(t),this.btnBetSelection.enabled=t,this.iconBetExpandable.alpha=t?1:this.iconExpandableDisabled}}betLevelsEnabled(t){this.betLevelsSelection&&(this.betLevelsSelection.enabled=t,t?this.betLevelsSelection.activate():this.betLevelsSelection.deactivate())}updateFastSpin(){}hideButtons(){super.hideButtons(),this.btnTurbo.enabled=!1,this.btnStopturbo.enabled=!1,this.btnBetSelection.enabled=!1,this.iconBetExpandable.alpha=this.iconExpandableDisabled,this.betLevelsEnabled(!1),this.btnTurbo.visible=!this.player.isTurbo,this.btnStopturbo.visible=this.player.isTurbo}showButtons(){super.showButtons(),this.btnTurbo.enabled=!0,this.btnStopturbo.enabled=!0,this.player.froundOn?(this.btnBetSelection.enabled=!1,this.iconBetExpandable.alpha=this.iconExpandableDisabled,this.betLevelsEnabled(!1)):(this.btnBetSelection.enabled=!0,this.iconBetExpandable.alpha=1,this.betLevelsEnabled(!0)),this.player.isTurbo?(this.btnTurbo.visible=!1,this.btnStopturbo.visible=!0,this.btnStopturbo.activate()):(this.btnTurbo.visible=!0,this.btnStopturbo.visible=!1),this.isAutoSpin&&this.btnStopAuto.activate()}enabledBtnAutoSpin(){this.autoSpinDisplay&&(this.btnStopAuto.enabled=!0,this.player.bonus!==void 0&&this.player.bonus!==null&&(this.btnStopAuto.enabled=!1)),this.btnStopAuto.activate()}initHightlightGlow(){y.get("tweenService").register("btn-highlight-glow",(e,i)=>{let s={alpha:0};e.alpha=s.alpha;let n=new TWEEN.Tween(s).to({alpha:1},500).easing(TWEEN.Easing.Quartic.In).onUpdate(o=>{e.alpha=s.alpha}),r=new TWEEN.Tween(s).to({alpha:0},1e3).easing(TWEEN.Easing.Quartic.Out).onUpdate(o=>{e.alpha=s.alpha});return n.chain(r.chain(n)),n})}checkDeviceResize(t){this.autoSpinOptions.y=this.menu.y=-t.y,this.footerBar.panels.y=this.selectionPanel.y=Math.max(0,this.buttonsPanelsY-t.y),this.setComponentsPositions(t),this.orientationService.isPortrait?this.betButtons.y=this.settingButtons.y=Math.max(0,this.buttonsPanelsY-t.y)*.5:(this.betButtons.y=0,this.settingButtons.y=Math.max(0,this.buttonsPanelsY-t.y))}setComponentsPositions(t){this.menu.buttonCloseLandscape.x=this.menuBtnCloseLX-t.x,this.menu.buttonClosePortrait.x=this.menuBtnClosePX-t.x,this.footerBar.timebox.position.set(-t.x,t.y)}onSceneResize(){let t=this.layoutService.deviceViewportOffset;E.desktop?this.setComponentsPositions(t):this.checkDeviceResize(t)}onErrorPopUpOpen(t){super.onErrorPopUpOpen(t),this.btnSpin.hide(),this.menu.hide(),this.hideButtons()}onErrorPopUpClose(t){this.showButtons(),super.onErrorPopUpClose(t)}advanceTime(t){return super.advanceTime(t)}exit(){super.exit(),d.off("betSelection"),d.off("turbo"),d.off("stopauto"),d.off("realplay"),d.off("fundtransfer")}};Se([Fe("layoutService")],he.prototype,"layoutService",2);Se([Fe("orientationService")],he.prototype,"orientationService",2);Se([S("btnTurbo")],he.prototype,"btnTurbo",2);Se([S("btnStopturbo")],he.prototype,"btnStopturbo",2);Se([S("betLevelsSelection")],he.prototype,"betLevelsSelection",2);Se([S("betSelection")],he.prototype,"betSelection",2);Se([S("btnBetSelection")],he.prototype,"btnBetSelection",2);Se([S("iconBetExpandable")],he.prototype,"iconBetExpandable",2);Se([S("selectionPanel")],he.prototype,"selectionPanel",2);Se([S("betButtons")],he.prototype,"betButtons",2);Se([S("settingButtons")],he.prototype,"settingButtons",2);Se([S("btnSpinEffect")],he.prototype,"btnSpinEffect",2);he=Se([m({tag:"main",category:"scene"})],he);class Ad extends Bd{enter(){Ze("SPIN");const e=this.scene.reels.collapsing?300:500;this.showBtnTimer=new mo(()=>{this.scene.reels.isSpinning&&this.scene.btnSpin.show("stop")},this.scene.player.isTurbo?e*.4:e)}exit(){this.showBtnTimer&&this.showBtnTimer.cancel(),super.exit()}}class _s extends zn{enter(){super.enter(),this.scene.isBonus=!1,this.scene.isFreeSpin=!1,Ze("IDLE"),this.scene.reels.collapsing=!1,this.scene.forceStop=!1,this.scene.deactivated?(this.scene.btnSpin.hide(),this.scene.menu.hide(),this.scene.hideButtons()):this.scene.btnSpin.show("spin"),this.scene.mahjongMultiplier.updateMultiplierLayer("normal"),this.scene.resetData(),this.scene.hideFsPanel(),this.scene.showMainBg(),this.scene.showSpin(),this.scene.showBuyBonusBtn(),this.scene.isAutoSpin&&this.scene.setAutoSpin(()=>{this.clickSpinHandler()})}clickSpinHandler(){Dd("real"),this.scene.resultResponse=null,this.scene.btnSpin.state!=="bonus"&&(this.scene.btnSpin.state="spin"),this.scene.clearAutoSpin(),super.clickSpinHandler()}spinSuccess(){Zn(),super.spinSuccess()}spinServiceHandler(e){ei(e.value.wheel.reels),this.scene.resultResponse=e;const i=this.scene.resultResponse.value;let s,n,r,o;i&&(s=i.balance.value,n=i.win,r=Pt(i.winPositions),o=i.wheel.reels),this.player.balance=new Decimal(s),this.player.winAmount=new Decimal(n),this.player.winLines=r,this.player.symbols=o,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(o,!1,r,a=>this.getReelsStopPromise(a)),this.scene.setState(w.get("spinState"))}getReelsStopPromise(e){return Bs(this)}onReelsStop(){return this.scene.updateAuto(),ot(()=>{},200)}updateState(){Gd({state:this})}}class It extends zn{enter(){Ze("COLLAPSING"),this.scene.isBonus=!0;const e=this.scene.reels;e.collapsing=!0,e.getSymbolMapping(),this.scene.menu.hide(),this.scene.hideButtons(),this.clickSpinHandler()}getReelsStopPromise(e){return Bs(this)}clickSpinHandler(){zd(this.scene.reels,this.scene.resultResponse),this.scene.resultResponse=null,_n()==="real"&&(this.scene.onReelCollapse(),this.spinSuccess()),_n()==="test"&&(this.scene.onReelCollapse(),ve(500).then(()=>{this.spinServiceHandler(Rd.bonus_events),this.froundHandler(Nd.base_events)}))}getSpinServie(){return this.netService.bonus({key:"0",step:0,index:0},fo)}spinServiceHandler(e,i){qd().then(()=>{this.scene.resultResponse=e;const s=this.scene.resultResponse.value;ei(s.spinResult.wheel.reels);const n=this.scene.reels;let r,o,a,h,u;s&&(r=s.balance.value,s.win,s.spinResult&&(a=s.spinResult.cumulativeWin,o=s.spinResult.collapsingAdds,h=Pt(s.spinResult.winPositions),u=s.spinResult.wheel.reels)),n.addSymbols=o,this.player.balance=new Decimal(r),this.player.winAmount=new Decimal(a),this.player.winLines=h,this.player.symbols=u,e.value.hasBonus||(e.value.hasBonus=e.value.bonus&&!e.value.bonus.isCompleted),this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(u,!1,h,p=>this.getReelsStopPromise(p)),this.scene.setState(w.get("spinState"))})}onReelsStop(){return this.scene.updateAuto(),Es()}updateState(){const e=this.scene.reels;e.collapsing=!1,e.addSymbols=[],Xd({state:this})}}class qn extends bo{enter(){super.enter(),this.scene.hideButtons(),Ze("PREFS"),this.scene.isBonus=!0,this.scene.btnSpin.hide();const e=this.scene.resultResponse.value.bonus.numOfFreeSpin||this.scene.resultResponse.value.numOfFreeSpin;this.scene.youWonPanel.showYouWon(e),this.scene.updateFsPanel(e,e),re(1e3).then(()=>{this.scene.btnSpin.show("bonus")})}clickSpinHandler(){this.scene.hideBuyBonusBtn(),this.scene.btnSpin.hide(),this.scene.youWonPanel.hideYouWon().then(()=>{this.scene.mainUI.changeToFSUIAsync().then(()=>{this.scene.updateCorner("freeSpin")}),this.scene.mahjongMultiplier.updateMultiplierLayer("freeSpin"),this.scene.setState(new Cs)})}}class Cs extends go{enter(){super.enter(),this.scene.hideButtons(),Ze("FS"),this.scene.showFsPanel(),this.scene.showFreeBg(),this.scene.isFreeSpin=!0,this.scene.hideSpin(),this.autoClickTimer=setTimeout(()=>{this.clickSpinHandler()},300)}clickSpinHandler(){clearTimeout(this.autoClickTimer),Zn(),super.clickSpinHandler()}getSpinServie(){const e=_().bonus;return this.netService.bonus({key:e.key,step:e.step++,index:0})}spinServiceHandler(e,i){ei(e.value.spinResult.wheel.reels,!0),this.scene.resultResponse=e;const s=this.scene.resultResponse.value;let n,r,o,a,h;this.netService.json&&s&&(n=s.balance.value,r=s.win,o=Pt(s.spinResult.winPositions),a=s.spinResult.wheel.reels),this.player.balance=new Decimal(n),this.player.winAmount=new Decimal(r),this.player.winLines=o,this.player.symbols=a,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(a,!1,o,u=>this.getReelsStopPromise(u)),this.scene.setState(w.get("spinState")),this.scene.checkFround(h),this.scene.updateFsPanel(e.value.bonus.numOfFreeSpin,e.value.bonus.counter)}updateState(){return vo({state:this}).then(()=>{})}getReelsStopPromise(e){return Bs(this)}onReelsStop(){return Es(),this.scene.updateAuto(),this.scene.onReelsStop(),ot(()=>{},200)}}class Kn extends bo{enter(){super.enter(),this.scene.hideButtons(),Ze("PRESUPERGOLD"),this.scene.isSuperGold=!0,this.scene.btnSpin.hide();const e=this.scene.resultResponse.value.bonus.numOfFreeSpin||this.scene.resultResponse.value.numOfFreeSpin;this.scene.youWonPanel.showYouWon(e),re(1e3).then(()=>{this.scene.btnSpin.show("bonus")})}clickSpinHandler(){this.scene.hideBuyBonusBtn(),this.scene.btnSpin.hide(),this.scene.youWonPanel.hideYouWon().then(()=>{this.scene.mainUI.changeToFSUIAsync().then(()=>{this.scene.updateCorner("superGold")}),this.scene.mahjongMultiplier.updateMultiplierLayer("superGold"),this.scene.setState(new Ts)})}}class Ts extends go{enter(){super.enter(),this.scene.hideButtons(),Ze("SUPERGOLD"),this.scene.showSFsPanel(),this.scene.showFreeBg(),this.scene.hideSpin(),this.scene.isFreeSpin=!0,this.autoClickTimer=setTimeout(()=>{this.clickSpinHandler()},300)}clickSpinHandler(){clearTimeout(this.autoClickTimer),Zn(),super.clickSpinHandler()}getSpinServie(){const e=_().bonus;return this.netService.bonus({key:e.key,step:e.step++,index:0})}spinServiceHandler(e,i){ei(e.value.spinResult.wheel.reels,!0),this.scene.resultResponse=e;const s=this.scene.resultResponse.value;let n,r,o,a,h;this.netService.json&&s&&(n=s.balance.value,r=s.win,o=Pt(s.spinResult.winPositions),a=s.spinResult.wheel.reels),this.player.balance=new Decimal(n),this.player.winAmount=new Decimal(r),this.player.winLines=o,this.player.symbols=a,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(a,!1,o,u=>this.getReelsStopPromise(u)),this.scene.setState(w.get("spinState")),this.scene.checkFround(h),this.scene.updateFsPanel(e.value.bonus.numOfFreeSpin,e.value.bonus.counter)}updateState(){return vo({state:this})}getReelsStopPromise(e){return Bs(this)}onReelsStop(){return Es(),this.scene.updateAuto(),this.scene.onReelsStop(),ot(()=>{},200)}}let f,Ye=null,Jn=0,hi,Rt,ui,Ce=0,ft=null;const Ze=t=>{if(!f)return;f.gameState=t;const e=t==="IDLE"&&!f.isFreeSpin&&!f.isAutoSpin;f.buyBonusBtnspine.tint=e?16777215:8421504,f.buyBonusBtn.enabled=e,f.buyBonusBtn.cursor=e?"pointer":"default",f.buyBonusBtnspine.animation.update(0)},_n=()=>f.gameType,Dd=t=>{f&&(f.gameType=t)},Nd=JSON.parse(JSON.stringify(ho)),Rd=JSON.parse(JSON.stringify(ho)),Md=()=>f.gameState==="IDLE"&&!f.isAutoSpin&&!f.isFreeSpin;function Fd(t){t&&(f=t)}function Bs(t,e){return Es(),t.onReelsStop().then(()=>Wd()).then(()=>$d()).then(()=>Vd()).then(()=>t.updateState()).then(()=>t.scene.animateFooterBar(!0))}function Wd(){return f.player.bonus&&f.player.bonus.id!==void 0&&!f.isFreeSpin?f.showHudMessage(""):f.player.winAmount.lte(0)&&!f.isAutoSpin&&!f.isFreeSpin?f.showHudMessage(M.NO_WIN):f.showHudMessage(),Promise.resolve()}function ei(t,e=!1){for(let i=0;i<t.length;i++){const s=t[i];(i==0||i==4)&&s.push(nt(20))}}function ss(t){const i=f.reels.symbols;i.forEach(s=>{s.forEach(n=>{i.forEach(r=>{r.forEach(o=>{const a=Math.floor(255-100*Math.sin(Math.PI*t));if(o.content&&o.content.spine)try{o.content.spine.tint=`#${a.toString(16)}${a.toString(16)}${a.toString(16)}`,o.content.spine.animation.update(0)}catch{}})})})})}function Hd(){f.reels.symbols.forEach(i=>{i.forEach(s=>{s.idle()})})}function kd(){Rt=new TWEEN.Tween({k:0}).easing(t=>t<.25?t*2:t>.75?(1-t)/2:.5).to({k:1},_().isTurbo?1e3:2e3).onUpdate(t=>{ss(t.k)}).onComplete(()=>{ss(1)}).start()}function Ud(t){return(t.value.winPositions?t.value.winPositions:t.value.bonus&&t.value.bonus.gameResult?t.value.bonus.gameResult.winPositions?t.value.bonus.gameResult.winPositions:t.value.bonus.gameResult.spinResult.winPositions:[]).length}function $d(){const t=f.player.winLines;let e=!1;return t.length===0?Promise.resolve():(f.btnSpin.hide(),new Promise((i,s)=>{kd(),f.totalWinPanel.showTotalWin(f.resultResponse.value.win),f.showHudMessage(M.LINES_WIN,f.resultResponse.value.win,Ud(f.resultResponse));const r=f.reels.symbols,o=[];if(r)for(let a=0;a<t.length;a++){const u=t[a].positions;for(let p=0;p<u.length;p++){const g=u[p],b=r[g[0]][g[1]];b&&o.indexOf(b)===-1&&o.push(b)}}o.sort((a,h)=>a.index==xt?1:h.index==xt?-1:a.col-h.col==0?a.row-h.row:h.col-a.col);for(let a=0;a<o.length;a++){const h=o[a];h.parent.setChildIndex(h,h.parent.children.length-1),h.animate();const u=h.index;ud(u,h,h.content),re(_().isTurbo?1e3:2e3).then(()=>{Rt&&(Rt.end().stop(),TWEEN.remove(Rt),Rt=null),i(),Hd()}),h.index>10&&(e=!0)}Y(e?"lp_win":"hp_win","default"),re(_().isTurbo?600:1200).then(()=>{Y("collapse","default")})}))}function ns(){return f.btnSpin.show("stop"),f.btnSpin.hide(),f.showHudMessage(M.FREESPIN),new Promise(t=>{ve(500).then(()=>{const e=f.resultResponse.value,s=(e.wheel||e.spinResult.wheel).reels,n=e.numOfScatter||e.spinResult.numOfScatter,r=[];for(let o=0;o<s.length;o++){const a=s[o];for(let h=0;h<a.length;h++)a[h]==Xe&&n>r.length&&r.push(f.reels.symbols[o][h])}r.sort((o,a)=>o.col-a.col==0?o.row-a.row:a.col-o.col);for(let o=0;o<r.length;o++){const a=r[o];a.parent.setChildIndex(a,a.parent.children.length-1),hd(a)}re(_().isTurbo?666:2e3).then(()=>{f.showHudMessage(),t()})})})}function Vd(){return f.resultResponse.value.win==0?new Promise(e=>{Ye=()=>{f.mahjongMultiplier.setMultiplierIndex(0),ss(1),e()},Jd();const i=new Decimal(f.resultResponse.value.cumulativeWin);i.gt(0)?(f.btnSpin.hide(),Ce>=Sn?(f.youWonPanel.showBigWin(i.toNumber()),nf(),re(8e3).then(()=>{f.youWonPanel.hideBigWin(i.toNumber()).then(()=>{rf(),Ye(),Ye=null,f.btnSpin.show("spin")})})):(ss(.5),ve(200).then(()=>{Kd(),Yd(i)}))):(f.footerBar.winBox.visible=!1,Ye(),Ye=null)}):Promise.resolve()}function jd(){f.btnSpin.hide(),ft&&ft.stop(),hi&&(bt(hi),hi=null);const t=f.player.winAmount;f.winLevelLabel&&f.winLevelLabel.visible&&(f.winLevelLabel.value=t.toFixed(2)),f.footerBar.winBoxLabel.update(t),f.footerBar.directUpdateWinAmount(t),ft=null,So()}function Gd({state:t,restoreData:e}){return ot(()=>{if(_n()==="test"){t.scene.setState(new It);return}const i=t.scene.resultResponse,s=i.value;(()=>{if(s.hasBonus)if(s.isCollapse){t.scene.setState(new It);return}else{const r=i.value.numOfFreeSpin;if(s.isSuperFreeSpin){t.scene.toBonus=!0,ns().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new Kn),t.scene.updateFsPanel(r,r)});return}else{t.scene.toBonus=!0,ns().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new qn),t.scene.updateFsPanel(r,r)});return}}else t.scene.setState(new _s)})()})}function vo({state:t}){return ot(()=>{const i=t.scene.resultResponse.value,s=new Decimal(i.spinResult.win);if(i.isCompleted)yo(t);else if(s.gt(0)){t.scene.setState(new It);return}else t.scene.isSuperGold?t.scene.setState(new Ts):t.scene.setState(new Cs)})}function yo(t){const e=t.scene.resultResponse.value;function i(){f.isSuperGold=!1,f.isFreeSpin=!1,f.showButtons(),f.isBonus=!1,t.scene.mainUI.changeToNormalUI(),t.scene.setState(new _s),t.scene.updateCorner("normal")}e.bonus.totalWin>0?(f.youWonPanel.showTotalWin(e.bonus.totalWin),f.btnSpin.hide(),re(4e3).then(()=>{f.youWonPanel.hideTotalWin(e.bonus.totalWin).then(()=>{i()})})):i()}function Xd({state:t,restoreData:e}){return ot(()=>{const s=t.scene.resultResponse.value,n=new Decimal(s.spinResult.win);if(s.isCompleted)s.bonus&&s.bonus.isFreeSpin?yo(t):t.scene.setState(new _s);else if(n.gt(0))t.scene.setState(new It);else if(s.spinResult.isFreeSpin){const r=s.spinResult.currentFreeSpinStep;s.spinResult.isSuperFreeSpin?r==1?(t.scene.isSuperGold=!0,ns().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new Kn)})):t.scene.setState(new Ts):r==1?(t.scene.toBonus=!0,ns().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new qn)})):t.scene.setState(new Cs)}})}function Yd(t){const e={value:0};ft=new TWEEN.Tween(e).to({value:t.toNumber()},Jn).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{f.winLevelLabel&&f.winLevelLabel.visible&&(f.winLevelLabel.value=e.value.toFixed(2)),f.footerBar.directUpdateWinAmount(new Decimal(e.value)),f.footerBar.winBoxLabel.update(e.value)}).onComplete(()=>{So()}).start(),f.footerBar.winBoxLabel.scale.set([1,1,1.5,2,2,2][Ce-1]),f.footerBar.winBoxLabel.scale.set([1,1,1.3,1.6,2,2][Ce-1]),Ce>Op&&Ce<=Sn&&ve(1e3).then(()=>{f.btnSpin.show("skip")}),Ce<=Sn&&(f.footerBar.winBox.visible=!0,hi=Y(jp+Ce,"default",!0))}const Pr={};function zd(t,e){function i(h,u){return`${h}_${u}`}function s(h,u){let p=Pr[`r${h}_${u}`];if(!p){p=[];for(let g=0;g<10;g++)p.push([Math.random()*2-1,Math.random()*2-1]);p=[[0,0],...p,[0,0]],Pr[`${i(h,u)}`]=p}return p}function n(h,u,p,g,b){const L=u*b.length,O=Math.min(Math.floor(L),b.length-1),W=b[O][0],Le=b[O][1],Qe=Math.min(Math.ceil(L),b.length-1),Et=b[Qe][0],As=b[Qe][1],Ae=L-O,at=W+(Et-W)*Ae,Ds=Le+(As-Le)*Ae,Ns=-3*at,De=3*Ds;h.content.x=p+Ns,h.content.y=g+De}const r={},o={};for(let h=0;h<t.symbols.length;h++){const u=t.symbols[h];for(let p=0;p<u.length;p++){const g=i(h,p);if(!r[g]){const b=u[p];o[`${i(h,p)}`]={position:[b.content.x,b.content.y],symbol:b,range:s(h,p)}}}}function a(h){for(let u=0;u<t.symbols.length;u++){t.symbols[u];for(let p=0;p<6;p++){const g=o[`${i(u,p)}`];g&&n(g.symbol,h,g.position[0],g.position[1],g.range)}}}ui=new TWEEN.Tween({k:0}).to({k:1},300).onUpdate(h=>{a(h.k||1)}).repeat(Number.POSITIVE_INFINITY).start()}function qd(){return new Promise(t=>{t(),ve(_().isTurbo?300:800).then(()=>{ui.end().stop(),TWEEN.remove(ui),ui=null,t()})})}function Kd(){f.animation.playWinEffect(Ce)}function So(){Jn=0,ft=null,ve(500).then(()=>{f.animation.removeWinEffect().then(()=>{f.footerBar.winBox.visible=!1,f.btnSpin.show("spin"),Ye&&Ye(),Ye=null})})}function Jd(){const t=f.resultResponse.value.cumulativeWin;Ce=0;const e=new Decimal(t);if(e.gt(0)){const i=f.player.totalBet.toNumber();for(let s=vr.length-1;s>=0;s--)if(e.gte(i*vr[s])){Ce=s+1;break}Jn=Lp*Bp[Ce-1]}}function Es(){return ef(),ot(()=>{},200)}function Pt(t){const e=[];return t&&t.forEach((i,s)=>{e.push(Zd(i))}),e}function Zd(t){const e=[];for(let i=0;i<t.rowPositions.length;i++){const s=t.rowPositions[i]-1;s>=0&&e.push([i,s])}return{index:t.line,win:t.win,multiplier:t.multiplier,wildMultiplier:t.wildMultiplier||0,positions:e,symbol:t.symbol,type:t.type}}function mt(t=!1){const e=I().LANGUAGE;let i="en";return e===D.Chinese&&(i="cn"),t?i.toUpperCase():i.toLocaleLowerCase()}function Os(t,e,i,s=500,n=0,r){const o=y.get("soundService");if(i&&i.volume===e)return o.setVolume(e,i.soundId),null;const a={volume:t},h=i?i.soundId:void 0,u=new TWEEN.Tween(a).to({volume:e},s).onUpdate(()=>{o.setVolume(a.volume,h)}).onComplete(()=>{i&&(i.volume=a.volume),r&&r()}).delay(n);return u.start(),u}let q,ge,it,ci,pi,di;function Qd(){if(E.isUCBrowser)return;const t=y.get("soundService");if(t.stopBgm(),t.volume=0,q&&ge){rs(!0),ve(300).then(()=>{t.volume=1,t.setVolume(1,q.soundId),q.volume=1});return}ge=Y(Mp,"default",!0),q=Y(Rp,"default",!0),rs(!0),ve(200).then(()=>{t.volume=1,t.setVolume(1,q.soundId),q.volume=1})}function wo(t=500){if(!q||E.isUCBrowser)return;const e=y.get("soundService");q.volume===0?(e.setVolume(0,q.soundId),q.volume=0,Os(0,1,q,t)):(e.setVolume(1,q.soundId),q.volume=1)}function xo(t,e=500){if(!q||E.isUCBrowser)return;const i=y.get("soundService");q.volume===1?(i.setVolume(1,q.soundId),q.volume=1,Os(1,0,q,e)):(i.setVolume(0,q.soundId),q.volume=0)}function Io(){if(!ge||E.isUCBrowser)return;const t=y.get("soundService");it&&it.stop(),t.setVolume(0,ge.soundId),ge.volume=0,Os(0,.8,ge),it=null}function rs(t,e=500,i=0){if(!ge||E.isUCBrowser)return;const s=y.get("soundService");it&&(it.stop(),s.setVolume(0,ge.soundId),ge.volume=0),t?(s.setVolume(0,ge.soundId),ge.volume=0,it=null):ge.volume===.8&&(it=Os(.8,0,ge,e,i))}function Po(){f.isFreeSpin?Io():wo()}function Cn(){f.isFreeSpin?rs():xo()}function Zn(){E.isUCBrowser||(ci=Y("reelspinningbgm","default",!0))}function ef(){ci&&(bt(ci),ci=null)}function tf(){E.isUCBrowser||(pi=Y(Wp,"default"),Cn())}function sf(){pi&&(bt(pi),pi=null,Po())}function nf(){E.isUCBrowser||(di=Y("bigwin_level_body","default",!0,!1,()=>{Y("bigwin_level_outro","default",!0)}))}function rf(){di&&(bt(di),di=null)}const Qn="events:reel:stop",_o="events:reel:readystop",Co="events:reel:allstop";var tt=(t=>(t[t.Spin=0]="Spin",t[t.ReadyToStop=1]="ReadyToStop",t[t.Stopping=2]="Stopping",t[t.Stopped=3]="Stopped",t))(tt||{});let of=class{constructor(e){this.states=[],this.stopSequence=[[0],[1],[2],[3],[4]],this.spinTime=[0,0,0,0,0],this.stopSequenceIdx=0,this.spinAnimator=new er(e)}advanceTime(e){if(this.enabled){try{let i=this.spinAnimator.getSpeed(),s=this.stopAnimator?this.stopAnimator.getSpeed():0,n=0;for(let r=this.numCols-1;r>=0;r--){let o=this.states[r],a=this.reels.symbols[r];o!==3&&a.forEach(h=>{h.y+=o===0?i:s,h.updateAttached()}),o===0&&(n=r)}if(this.reels.symbols[n][0].y>0&&this.reels.addSpinSymbols(n),this.reels.removeOutsideSymbols(),this.stopAnimator&&this.stopAnimator.stopped){let r=[];for(let o=0;o<this.numCols;o++)this.states[o]===2&&(this.states[o]=3,this.reels.adjustCol(o),r.push(o));d.emit(Qn,r),this.allStopped?(this.cancel(),this.resolve()):this.readyToStop()}this.update&&this.update()}catch{this.reject&&this.reject({code:ys,message:""})}return!0}}get allStopped(){for(let e=0;e<this.numCols;e++)if(this.states[e]!==3)return!1;return!0}emptyArr(){let e=[];for(let i=0;i<this.numCols;i++)e.push(void 0);return e}play(){this.enabled=!0;for(let e=0;e<this.numCols;e++)this.states[e]=0;this.spinAnimator.init(),this.stopAnimator=void 0,B.add(this)}stop(){if(!this.enabled)return Promise.resolve();let e=new Promise((i,s)=>{this.resolve=i,this.reject=s});return this.readyToStop(),e}allNotEmpty(e){for(let i=0;i<this.numCols;i++)if(!e[i])return!1;return!0}readyToStop(){this.stopAnimator=void 0;let e=this.stopSequence[this.stopSequenceIdx],i=()=>{d.emit(_o,e),this.stopSequenceIdx++;let s;for(let n=e.length-1;n>=0;n--){let r=e[n];this.states[r]=2,s=this.reels.addStopSymbols(r)}this.stopAnimator=this.spinAnimator.clone(),this.stopAnimator.stop(s)};this.spinTime[this.stopSequenceIdx]?(this.spinTimer=setTimeout(i,this.spinTime[this.stopSequenceIdx]),this.setSpinTimeOnce&&(this.setSpinTimeOnce=!1,this.spinTime[this.stopSequenceIdx]=this.tempSpinTime)):i()}setSpinningTime(e,i,s=!0){this.tempSpinTime=this.spinTime[e],this.spinTime[e]=i,this.setSpinTimeOnce=s}get numCols(){return I().NUM_OF_COLUMN}cancel(){clearTimeout(this.spinTimer),this.init(),this.enabled=!1,B.remove(this)}init(){this.stopSequenceIdx=0}};class er{constructor(e){this.state=0,this.acceleration=2,this.deceleration=2,this.maxSpeed=30,this.startSpeed=0,this.stopSpeed=0,this.maxSpeed=e.maxSpeed,this.startSpeed=e.startSpeed,this.stopSpeed=e.stopSpeed,this.acceleration=e.acceleration,this.deceleration=e.deceleration||this.acceleration,this.options=e}init(){this.state=0,this.currentSpeed=this.startSpeed,this.currentAcc=this.acceleration}stop(e){return this.stopDistance=e,this.readyToStop(),new Promise((i,s)=>{this.resolve=i})}get stopped(){return this.state===3}clone(){let e=new er(this.options);return e.state=this.state,e.currentAcc=this.currentAcc,this.currentSpeed<=0?e.currentSpeed=this.maxSpeed:e.currentSpeed=this.currentSpeed,e}getSpeed(){if(this.state===0)this.currentSpeed+=this.currentAcc;else if(this.state===1)this.stopFrames--,this.stopDistance-=this.currentSpeed,this.readyToStop();else if(this.state===2)this.currentSpeed-=this.currentAcc,Math.abs(this.currentSpeed-this.stopSpeed)<this.currentAcc&&(this.state=3,this.resolve());else return 0;return this.currentSpeed=Math.min(this.currentSpeed,this.maxSpeed),this.currentSpeed}readyToStop(){this.state=1,this.stopFrames=0;let e=this.distanceToStop;this.stopDistance<=e&&(this.currentSpeed=this.speedToStop(),this.state=2)}speedToStop(){for(var e=this.stopDistance,i=this.stopSpeed,s=0,n=0;s<=e;)s+=i,i+=this.deceleration,n++;let r=(e-n*this.stopSpeed)*2/(n*(n-1));return this.currentAcc=r,this.stopSpeed+n*r}get distanceToStop(){if(!this._distanceToStop){var e=this.maxSpeed;for(this._distanceToStop=0;e>=this.stopSpeed;)e-=this.deceleration,this._distanceToStop+=e}return this._distanceToStop}}var af=Object.defineProperty,lf=Object.getOwnPropertyDescriptor,hf=(t,e,i,s)=>{for(var n=s>1?void 0:s?lf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&af(e,i,n),n};let Je=class extends C{constructor(){super(...arguments),this.mode="sfs"}get scene(){return this.parent}onCreate(){this.container.bannerBuyInButton.box.cursor=this.container.bannerFSClick.box.cursor=this.container.bannerSFSClick.box.cursor=this.container.close.box.cursor="pointer";const t=this.container.spine.getSlotContainerByName("BuyBonusText"),e=U().get("bonusBuyTitle");t.removeChildren(),t.addChild(e);const i=U().get("buyBonusCloseBtn"),s=U().get("bannerBuyInButton");t.addChild(i),t.addChild(s),this.buyBonusLabel=s;const n=this.container.bannerFS.getSlotContainerByName("BannerText3"),r=U().get("bonusMaxRandomCount");n.removeChildren(),n.addChild(r);const o=this.container.bannerSFS.getSlotContainerByName("BannerText3"),a=U().get("bonusMaxRandomCount");o.removeChildren(),o.addChild(a);const h=this.container.bannerFS.getSlotContainerByName("BannerText2"),u=U().get("bonusMaxUp10");h.removeChildren(),h.addChild(u);const p=this.container.bannerSFS.getSlotContainerByName("BannerText2"),g=U().get("bonusMaxUp50");p.removeChildren(),p.addChild(g);const b=this.container.bannerFS.getSlotContainerByName("BannerText1"),L=U().get("bonusBuyFsT");b.removeChildren(),b.addChild(L);const O=this.container.bannerSFS.getSlotContainerByName("BannerText1"),W=U().get("bonusBuySFsT");O.removeChildren(),O.addChild(W)}openBuyBonus(){this.container.bannerBuyInButton.enabled=!1,this.container.visible=!0,T(this.container.spine,"BuyBonus_Intro",!1,()=>{T(this.container.spine,"BuyBonus_Still",!0,()=>{}),this.enableButtons(!0)}),this.container.bannerFS.visible=!0,T(this.container.bannerFS,"Banner_Intro",!1,()=>{T(this.container.bannerFS,this.mode=="fs"?"Banner_IdleSelected":"Banner_IdleDefault",!0),this.container.bannerBuyInButton.enabled=!0}),this.container.bannerSFS.visible=!0,T(this.container.bannerSFS,"Banner_Intro",!1,()=>{T(this.container.bannerSFS,this.mode=="sfs"?"Banner_IdleSelected":"Banner_IdleDefault",!0),this.container.bannerBuyInButton.enabled=!0}),this.updateBuyInAmount()}updateBuyInAmount(){const t=_().totalBet.mul(this.mode=="fs"?lo:wn).toNumber();this.buyBonusLabel.label.value=`${t}`,this.buyBonusLabel.currency.value=H("buy").replace("{%value%}",`${_().currency}`)}enableButtons(t){this.container.bannerFSClick.enabled=t,this.container.bannerSFSClick.enabled=t,this.container.bannerBuyInButton.enabled=t,this.container.close.enabled=t}onClose(t){this.enableButtons(!1),T(this.container.spine,"BuyBonus_Outro",!1,()=>{this.enableButtons(!0),this.scene.buyBonusOpend=!1,this.container.visible=!1,this.scene.buyBonusBtn.enabled=!0,t&&t()})}onBuyInBonusConfirmed(){Y("sfx_button_bonus_purchase","default",!1,!0),this.onClose(()=>{this.emit(Je.EVENTS_BUY_BONUS_CONFIRMED,this.mode)})}onSelectedFs(){this.mode="fs",this.updateBuyInAmount(),T(this.container.bannerFS,"Banner_IdleSelected",!0),T(this.container.bannerSFS,"Banner_IdleDefault",!0),this.container.setChildIndex(this.container.bannerFS,3)}onSelectedSFs(){this.mode="sfs",this.updateBuyInAmount(),T(this.container.bannerSFS,"Banner_IdleSelected",!0),T(this.container.bannerFS,"Banner_IdleDefault",!0),this.container.setChildIndex(this.container.bannerSFS,3)}static create(t,e){const i=uf(Je,t,e);return i.onCreate(),i}};Je.EVENTS_BUY_BONUS_CONFIRMED="events:buybonus:confirmed";Je.EVENTS_BUY_BONUS_CLOSED="events:buybonus:closed";Je=hf([m({tag:"buyBonus"})],Je);function uf(t,e,i){const s=new t;return ue(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var cf=Object.defineProperty,pf=Object.getOwnPropertyDescriptor,J=(t,e,i,s)=>{for(var n=s>1?void 0:s?pf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&cf(e,i,n),n};let z=class extends he{constructor(){super(...arguments),this.deactivated=!1,this.isBonus=!1,this.isSuperGold=!1,this.forceStop=!1,this.toBonus=!1,this.gameState="IDLE",this.gameType="real"}enter(){const t=y.get("soundService");t&&(t.volume=0),super.enter()}onCreated(){super.onCreated(),this.reels.sortSymbols(),this.deactivated=!1,this.animation=new cd(this),Fd(this),Qd(),this.buyBonus&&this.buyBonus.on(Je.EVENTS_BUY_BONUS_CONFIRMED,t=>{t==="fs"&&this.setCreditBet(lo),t==="sfs"&&this.setCreditBet(wn),this.state.clickSpinHandler(),this.setCreditBet()}),d.on(_o,t=>this.addSlotFire(t)),d.on(Qn,t=>this.removeSlotfire(t)),d.on(Co,t=>this.allReelsStop()),w.get(xn)&&(this.initTo(),w.map(xn).toValue(!1)),this.playSymbolDropAnimAfterSkip()}initTo(){this.animationBuyBonusBtn();const t=w.get("gameState");let e,i=xr,s="normal",n=!1;const r=t.bonus&&t.bonus.gameResult?t.bonus.gameResult.winPositions?t.bonus.gameResult.winPositions:t.bonus.gameResult.spinResult.winPositions:[];t.bonus&&(t.bonus.id==1?(this.reels.winLines=Pt(r),e=new It):t.bonus.id==2&&(this.hideBuyBonusBtn(),this.showFreeBg(),i=t.bonus.spinResult.credit,n=t.bonus.numOfFreeSpin>t.bonus.counter,n&&this.hideSpin(),i==wn?(e=n?new Ts:new Kn,s="superGold",n&&this.showSFsPanel()):(e=n?new Cs:new qn,s="freeSpin",n&&this.showFsPanel()),r.length>0&&(this.reels.winLines=Pt(r),e=new It),this.updateFsPanel(t.bonus.numOfFreeSpin,t.bonus.counter))),s=="normal"?(this.mahjongMultiplier.init(),this.mainUI.init(),this.updateCorner(s)):n&&(this.mahjongMultiplier.updateMultiplierLayer(s),this.mainUI.changeToFSUIAsync().then(()=>{this.updateCorner(s)}),this.isSuperGold=s=="superGold",this.toBonus=s=="freeSpin"),t.bonus&&this.mahjongMultiplier.setMultiplierIndex(t.bonus.gameResult.multiplier,s),this.resultResponse={value:t},e&&this.setState(e)}addSlotFire(t){}removeSlotfire(t){for(const e of t){const i=this.resultResponse.value;if(!this.player.isTurbo){let s=0;const n=i.wheel?i.wheel:i.spinResult.wheel;for(let r=0;r<=e;r++)for(let o=1;o<n.reels[r].length-(r==0||r==4?2:1);o++)n.reels[r][o]==Xe&&s++;e>=2&&(this.slotFire[`p${e}`].spine.visible=!1,this.slotFire[`p${e}`].spine.animated=!1),s>=2&&e>=1&&e<4&&(this.slotFire[`p${e+1}`].spine.visible=!0,this.slotFire[`p${e+1}`].spine.animated=!0,this.reels.setSpinningTime(e+1,4e3),tf())}this.reels.reelStoped(e),this.playSymbolDropAnim(e)}Y(Fp,"default")}playSymbolDropAnim(t){const e=this.resultResponse.value,i=e.wheel?e.wheel:e.spinResult.wheel;let s=0;const n=i.reels[t].indexOf(Xe)>-1;for(let a=0;a<=t;a++){const h=i.reels[a];for(let u=0;u<h.length;u++)h[u]==Xe&&s++}const o=this.reels.symbols[t];if(t<4||t==4&&e.numOfScatter<3)for(const a of o){const h=Number(a.index);let u,p;if(h==xt?(u=Ap,p="Wild_Idle"):h==Xe&&(u=Dp,p="Scatter_Idle"),u&&a.row>=0){const g=a.content.spine;let b;s==1&&(b=Hp),s==2&&(b=kp),s>2&&(b=Up),b&&n&&Y(b,"default"),T(g,u,!1,()=>{a.idle(),g.setAnimation(0,p,!0),g.animation.update(0)})}}}playSymbolDropAnimAfterSkip(){for(const t of this.reels.symbols)for(const e of t){const i=Number(e.index);let s;if(i==xt?s="Wild_Idle":i==Xe&&(s="Scatter_Idle"),s){const n=e.content.spine;e.idle(),n.animated=!0,n.setAnimation(0,s,!0)}}}checkAuto(){this.isAutoSpin&&this.player.isAutoSpinOn&&(!this.isFreeSpin&&!this.isBonus&&this.updateAutoCount(this.player.autoSpin-1),this.player.checkAutoSpinConditions())}startAutoSpinHandler(){super.startAutoSpinHandler(),this.btnStopAuto.visible=!0,this.autoSpinDisplay.visible=!0}allReelsStop(){for(const t of[2,3,4])this.slotFire[`p${t}`].spine.visible=!1,this.slotFire[`p${t}`].spine.animated=!1;this.reels.sortSymbols(),sf(),this.btnSpin.hide(),!this.player.isTurbo&&this.playSymbolDropAnimAfterSkip()}setCreditBet(t=xr){this.player.bet.multiplier=t}onBetLevelSelect(){this.updateBetAmount(),this.updateFooterBar()}restore(){}onClickBuyBonus(){Md()&&(this.buyBonusOpend=!0,this.buyBonusBtn.enabled=!1,T(this.buyBonusBtnspine,"Trigger",!1,()=>{}),re(700).then(()=>{this.animationBuyBonusBtn(),this.buyBonus.openBuyBonus()}))}onReelCollapse(){this.mahjongMultiplier.increaseMultiplier()}resetData(){this.mahjongMultiplier.resetMultiplierIndex()}clickSpinHandler(t){if(!(!this.btnSpin.enabled||this.buyBonusOpend)){if(ft&&this.btnSpin.state==="skip"){jd();return}this.forceStop=this.btnSpin.state==="stop",super.clickSpinHandler(t)}}clickAutospin(){this.isBonus||super.clickAutospin()}clickBetSelectionHandler(){this.isBonus||super.clickBetSelectionHandler()}clickTurboHandler(){this.isBonus||(super.clickTurboHandler(),this.updateFastSpin())}updateFastSpin(){let t;const e=this.reels,i=w.get("reelsAnimator");this.player.isTurbo?(t={maxSpeed:60,startSpeed:0,stopSpeed:-15,acceleration:8,deceleration:10,stopSequence:[[0,1,2,3,4]]},e.stopTime=0,e.winPanel.animationTimer=500):(t={maxSpeed:60,startSpeed:0,stopSpeed:-15,acceleration:4,deceleration:10,stopSequence:[[0],[1],[2],[3],[4]]},e.stopTime=600,e.winPanel.animationTimer=2e3),i.spinAnimator.options=t,i.spinAnimator.maxSpeed=t.maxSpeed,i.spinAnimator.startSpeed=t.startSpeed,i.spinAnimator.stopSpeed=t.stopSpeed,i.spinAnimator.acceleration=t.acceleration,i.stopSequence=t.stopSequence}onErrorPopUpOpen(t){this.deactivated=!0,super.onErrorPopUpOpen(t)}onErrorPopUpClose(t){this.deactivated=!1,super.onErrorPopUpClose(t)}onWinLoopComplete(){}goToPreBonus(){return new Promise((t,e)=>{this.btnSpin.show("skip"),t(!0)})}onReelsStop(){}onWinLine(t){super.onWinLine(t),this.autoSpinLogic()&&this.btnSpin.show("skip")}onWinPanelClose(){super.onWinPanelClose()}onClose(){this.buyBonus.onClose()}onBuyInBonusConfirmed(){this.buyBonus.onBuyInBonusConfirmed()}onSelectedFs(){this.buyBonus.onSelectedFs()}onSelectedSFs(){this.buyBonus.onSelectedSFs()}autoSpinLogic(){return this.isAutoSpin||this.isBonus}setAutoSpin(t){this.autoSpinTimer=setTimeout(()=>{t()},_().isTurbo?300:600)}clearAutoSpin(){clearTimeout(this.autoSpinTimer)}stopAutoHandler(){this.player.stopAutoSpin(),this.resetAutoSpin(),this.clearAutoSpin(),this.reels.isSpinning||this.showButtons(),Ze(this.gameState)}getWinLineMessageDetails(t){return null}onOrientationChange(t){super.onOrientationChange(t)}advanceTime(t){return super.advanceTime(t)}checkDeviceResize(t){super.checkDeviceResize(t),this.autoSpinOptions.y=this.menu.y=-t.y*(1/1.5)}setComponentsPositions(t){const e=window.innerWidth,i=window.innerHeight,s=P.height,n=P.width,r=G.scale.x,o=new PIXI.Point;e<s*r&&(o.x=Math.floor((s*r-e)*(.5/r))*.65),i<n*r&&(o.y=Math.floor((n*r-i)*(.5/r))*.65),this.menu.buttonCloseLandscape.x=this.menuBtnCloseLX-o.x,this.menu.buttonClosePortrait.x=this.menuBtnClosePX-o.x,this.footerBar.timebox.position.set(-o.x-40,-o.y)}updateCorner(t){this.cornerN.visible=t=="normal",this.cornerFs.visible=t=="freeSpin",this.cornerSFs.visible=t=="superGold"}showMainBg(){At(this.mainBg),Dt(this.freeBg)}showFreeBg(){At(this.freeBg),Dt(this.mainBg)}showFsPanel(){At(this.fspanel)}showSFsPanel(){At(this.sfspanel)}updateFsPanel(t,e){this.fspanel.label.value=this.sfspanel.label.value=`${e} / ${t}`}hideFsPanel(){Dt(this.fspanel),Dt(this.sfspanel)}showBuyBonusBtn(){At(this.buyBonusBtnspine)}hideBuyBonusBtn(){Dt(this.buyBonusBtnspine)}updateBalanceAmount(t){this.gameState!="COLLAPSING"&&super.updateBalanceAmount(t)}showSpin(){this.betButtons.visible=!0,this.btnMenu.visible=!0}hideSpin(){this.betButtons.visible=!1,this.btnMenu.visible=!1}enabledBtnAutoSpin(){this.autoSpinDisplay&&(this.autoSpinDisplay.alpha=1,this.btnStopAuto.enabled=!0,this.player.bonus!==void 0&&this.player.bonus!==null&&this.player.bonus.id!=="0"&&(this.autoSpinDisplay.alpha=.5,this.btnStopAuto.enabled=!1))}animationBuyBonusBtn(){T(this.buyBonusBtnspine,"Idle",!0,()=>{})}exit(){this.animation&&this.animation.exit(),super.exit()}};J([Fe("widgetService")],z.prototype,"widgetService",2);J([S("mahjongMulti")],z.prototype,"mahjongMultiplier",2);J([S("totalWinPanel")],z.prototype,"totalWinPanel",2);J([S("youWonPanel")],z.prototype,"youWonPanel",2);J([S("buyBonus")],z.prototype,"buyBonus",2);J([S("mainUI")],z.prototype,"mainUI",2);J([S("cornerSFs")],z.prototype,"cornerSFs",2);J([S("cornerFs")],z.prototype,"cornerFs",2);J([S("cornerN")],z.prototype,"cornerN",2);J([S("slotFire")],z.prototype,"slotFire",2);J([S("fspanel")],z.prototype,"fspanel",2);J([S("sfspanel")],z.prototype,"sfspanel",2);J([S("bigWinEffectbox")],z.prototype,"bigWinEffectbox",2);J([S("getFreeEffectbox")],z.prototype,"getFreeEffectbox",2);J([S("freeWinEffectbox")],z.prototype,"freeWinEffectbox",2);J([S("bgp")],z.prototype,"bgp",2);J([S("buyBonusBtn")],z.prototype,"buyBonusBtn",2);J([S("buyBonusBtnspine")],z.prototype,"buyBonusBtnspine",2);z=J([m({tag:"main",category:"scene"})],z);var df=Object.defineProperty,ff=Object.getOwnPropertyDescriptor,Ls=(t,e,i,s)=>{for(var n=s>1?void 0:s?ff(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&df(e,i,n),n};let _t=class extends Zt{enter(){super.enter(),le.querySelector(".gplogo").hide(),le.querySelector(".loader").hide(),this.version&&(this.version.value="v"+v.engineVersion)}onCreated(){B.add(this),this.player.bet.lines=parseInt(v.numBetLines),v.creditsBetLines&&(this.player.bet.credits=parseInt(v.creditsBetLines)),this.netService.signIn().then(t=>{this.netService.json?t.value&&(t.value.sessionKey?(this.context.USER_ID=this.player.sessionKey=t.value.sessionKey,t.value.memberName&&(this.player.accountName=this.player.displayName=t.value.memberName)):this.context.USER_ID=this.player.sessionKey=t.value):(this.context.USER_ID=this.player.sessionKey=t.token,t.name&&(this.player.accountName=this.player.displayName=t.name))}).then(()=>Promise.all([this.netService.getBalance().then(t=>{if(this.netService.json?t.value&&(this.player.balance=new Decimal(t.value.amount),t.value.currency!==void 0&&(this.player.currency=t.value.currency)):(this.player.balance=t.balance,this.player.currency=t.currency,t.userid!==void 0&&(this.player.accountName=t.userid)),this.context.ANONYMOUS)this.context.TRACKER_USER_ID=this.context.USER_ID;else{this.context.TRACKER_USER_ID=this.player.accountName;const e=window.appInsights;e&&e.setAuthenticatedUserContext(this.context.TRACKER_USER_ID)}}),this.netService.getBets().then(t=>{if(this.netService.json){if(t.value){if(w.map("gameState").toValue(t.value),this.player.symbols=t.value.wheel.reels,this.player.betValues=t.value.coins,t.value.extraGameSettings&&this.context.multiplierAsCreditBet){const e=t.value.extraGameSettings.creditBet;this.player.multiplierValues=e||t.value.multipliers}else this.player.multiplierValues=t.value.multipliers;if(this.player.bet.amount=t.value.coins[0],this.player.setDefaultBet(),this.player.betValue=t.value.bet||t.value.coins[0],this.player.demo=t.value.funPlayDemo?"1":"0",this.player.getBet=t.value,this.player.bonus=vd(t),this.player.bonus&&(this.player.restoreBonus=!0,this.player.bonus.wheels&&(this.player.symbols=this.player.bonus.wheels)),ei(this.player.symbols),t.value.multiplier?this.player.multiplierValues.indexOf(this.player.bet.multiplier)>=0&&(this.player.multiplierIndex=this.player.multiplierValues.indexOf(this.player.bet.multiplier)):this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"){let e=t.value.freeGameInfo;t.value.dailyFreeGameInfo&&(e=t.value.dailyFreeGameInfo),e&&(this.player.fround=e,this.player.froundCount=e.round)}}this.extraGetBetsSetting(t)}else w.map("gameState").toValue(t),this.player.symbols=t.wheels,this.player.betValues=t.betValues,this.player.multiplierValues=t.multiplier,this.player.bet.amount=ra(t.betValues),this.player.setDefaultBet(),this.player.betValue=t.bet,this.player.demo=t.demo,this.player.getBet=t.data,this.player.multiplierIndex=0,this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"&&(this.player.fround=t.fround,this.player.froundCount=t.froundCount),t.bonus&&(this.player.bonus=t.bonus,this.player.restoreBonus=!0)}),this.netService.jackpot().then(t=>{t.value&&t.value.pool?this.player.progressiveJackpot=t.value.pool:this.context.isProgressiveJackpot="false"}).catch(t=>{this.context.isProgressiveJackpot="false"})])).then(()=>N.replace("splash")).catch(t=>{t.code?Ke(t.code,!0):Ke(t.error?t.error:"0",!0)})}extraGetBetsSetting(t){}exit(){super.exit(),B.remove(this)}advanceTime(t){return this.circle.rotation+=.2,!0}};Ls([Tt("context")],_t.prototype,"context",2);Ls([Fe("netService")],_t.prototype,"netService",2);Ls([Tt("user")],_t.prototype,"player",2);_t=Ls([m({tag:"login",category:"scene"})],_t);var mf=Object.defineProperty,bf=Object.getOwnPropertyDescriptor,gf=(t,e,i,s)=>{for(var n=s>1?void 0:s?bf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&mf(e,i,n),n};let Tn=class extends Zt{constructor(){super(...arguments),this.progressCompleted=!1}onCreated(){y.get("deviceService").fullScreenEnabled=!0;let e=y.get("i18nService");e&&e.setTitle(),B.add(this),this.version&&(this.version.value="v"+v.engineVersion)}exit(){super.exit(),I().initActitvityTimer(),B.remove(this)}advanceTime(e){return this.circle.rotation+=.2,!0}onProgress(e){this.label.value=Math.min(100,Math.round(e*100))+"%",this.trackPageLoad()}trackPageLoad(){if(zs&&!this.progressCompleted&&Math.round(R.progress)>=100){this.progressCompleted=!0;let e=I();Z.event({name:"load",properties:{"Game mode":e.FUNPLAY?"Fun":"Real",Platform:E.platform,Renderer:X.type===PIXI.RENDERER_TYPE.WEBGL?"webgl":"canvas",Currency:_().currency,"User ID":e.TRACKER_USER_ID},measurements:{"Load Time":new Date().getTime()-zs}})}}};Tn=gf([m({tag:"splash",category:"scene"})],Tn);let vf=class extends Tn{onCreated(){let e=document.querySelector("#appbg");e&&(e.style["background-image"]="url('./assets/bgimage.jpg')",e.className+="fadeImage"),super.onCreated()}};var yf=Object.defineProperty,Sf=Object.getOwnPropertyDescriptor,Oe=(t,e,i,s)=>{for(var n=s>1?void 0:s?Sf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&yf(e,i,n),n};let ye=class extends vf{constructor(){super(...arguments),this.assetsLoaded=0,this.loaded=!1,this.shown=!1,this.active=!1,this.continue=!1,this.isDown=!1,this._page0Zhongs=null,this._page1Zhongs=null}onCreated(){super.onCreated(),le.querySelector(".gplogo").hide(),le.querySelector(".loader").hide(),this.label.scale.set(1.5),this.version.scale.set(1.5)}exit(){this.tweenNav&&(this.tweenNav.stop(),this.tweenNav=null)}onProgress(t){this.label.value=Math.min(100,Math.round(t*100))+"%",this.trackPageLoad()}onLoaded(){this.loaded=!0,this.showIntro(),this.showContinueButton()}showIntro(){if(this.shown)return;this.shown=!0,this.active=!0,this.pages=[],this.txtPages=[],this.currPageIdx=0;const t=U().get("intro-logo");this.logo.addChild(t),ne(this.logo,et);const e=U().get("intro-reel");this.reelBg.addChild(e),ne(this.reelBg,et);const i=U().get("intro-content");this.content.addChild(i),ne(this.content,et),this._introContent=i;const s=U().get("intro-text");this.textcontent.addChild(s),ne(this.textcontent,et),i.children.forEach((n,r)=>{if(n){const a=U().get("btn-navigator-"+(r+1));this.pages.push(n),n.visible=r===this.currPageIdx,r>this.currPageIdx&&(n.x=n.bg.width),a&&(a.interactive=a.buttonMode=!0,a.on("click",()=>this.navigatorClickHandler(r)).on("tap",()=>this.navigatorClickHandler(r)),a.enabled=r!==this.currPageIdx,this.btnnavigate.addChild(a))}const o=s.children[r];this.txtPages.push(o),r==0&&(o.visible=!0)}),this.content.interactive=!0,this.content.on("mousedown",n=>this.buttonDownHandler(n)).on("mouseup",n=>this.buttonUpHandler(n)).on("mouseupoutside",n=>this.buttonUpHandler(n)).on("touchstart",n=>this.buttonDownHandler(n)).on("touchend",n=>this.buttonUpHandler(n)).on("touchendoutside",n=>this.buttonUpHandler(n)).on("touchmove",n=>this.dropdownMoveHandler(n)).on("mousemove",n=>this.dropdownMoveHandler(n)),this.active=!0,this.page0Active(),this.startIntro()}showContinueButton(){if(this.shown&&this.loaded&&!this.continue){this.continue=!0,Pe(this.label,et),Pe(this.circle,et);const t=this.widgetService.get("btn-continue");this.btncontinue.addChild(t),ne(this.btncontinue,et,()=>{t.onClickHandler=()=>this.continueClickHandler(),d.on("continueClickHandler",()=>this.continueClickHandler())})}}startIntro(t=!0){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.navigatePage(this.currPageIdx+1)},3200)}continueClickHandler(){this.continue&&(this.continue=!1,d.off("continueClickHandler"),this.active=this.btncontinue.interactive=this.btncontinue.interactiveChildren=!1,this.timeout&&clearTimeout(this.timeout),this.timeoutReel&&clearTimeout(this.timeoutReel),Y("button","default"),ve(300).then(()=>this.closeScene()),w.map(xn).toValue(!0))}buttonDownHandler(t){this.active&&(this.isDown=!0,this.touchDownX=t.data.getLocalPosition(this,t.data.global).x)}buttonUpHandler(t){if(!this.isDown||(this.isDown=!1,!this.active))return;this.timeout&&(clearTimeout(this.timeout),this.timeout=0),this.active=!1,this.content.interactive=!1;const e=this.currPageIdx,i=t.data.getLocalPosition(this,t.data.global).x-this.touchDownX;if(i>0){const s={x:this.currPage.x};this.tweenNav=new TWEEN.Tween(s).to({x:i>100?this.currPage.bg.width:0},300).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(()=>{this.currPage.x=s.x,this.prevPage.x=this.currPage.x-this.currPage.bg.width}).onComplete(()=>{this.tweenNav.stop(),this.tweenNav=null,i>100&&this.setPageIndex(this.currPageIdx>0?this.currPageIdx-1:this.pages.length-1),this.startIntro(this.currPageIdx!==e),this.active=!0,this.content.interactive=!0}),this.tweenNav.start()}else{const s={x:this.currPage.x};this.tweenNav=new TWEEN.Tween(s).to({x:i<-100?-this.currPage.bg.width:0},300).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(()=>{this.currPage.x=s.x,this.nextPage.x=this.currPage.x+this.currPage.bg.width}).onComplete(()=>{this.tweenNav.stop(),this.tweenNav=null,i<-100&&this.setPageIndex(this.currPageIdx===this.pages.length-1?0:this.currPageIdx+1),this.startIntro(this.currPageIdx!==e),this.active=!0,this.content.interactive=!0}),this.tweenNav.start()}}dropdownMoveHandler(t){if(this.isDown){this.timeout&&(clearTimeout(this.timeout),this.timeout=0);const e=t.data.getLocalPosition(this,t.data.global).x-this.touchDownX;this.currPage.x=e,e>0?(this.nextPage.visible=!1,this.prevPage.visible=!0,this.prevPage.x=this.currPage.x-this.currPage.width):(this.prevPage.visible=!1,this.nextPage.visible=!0,this.nextPage.x=this.currPage.x+this.currPage.width)}}btnPrevHandler(){this.navigatePage(this.currPageIdx-1)}btnNextHandler(){this.navigatePage(this.currPageIdx+1)}navigatorClickHandler(t){this.getButtonNavigator(t).enabled&&this.navigatePage(t)}getButtonNavigator(t){return this.btnnavigate.getChildAt(t)}setPageIndex(t){if(this.currPageIdx!==t){this[`page${this.currPageIdx}Dactive`]();for(let e=0;e<this.pages.length;e++)this.pages[e].visible=!1,this.getButtonNavigator(e).enabled=!0;this.pages[this.currPageIdx],this.txtPages[this.currPageIdx].visible=!1,this.currPageIdx=t,this.pages[t].activate(),this.currPage.visible=!0,this.currTextPage.visible=!0,this.getButtonNavigator(t).enabled=!1,this[`page${t}Active`]()}}navigatePage(t){if(!this.active)return;this.timeout&&(clearTimeout(this.timeout),this.timeout=0),this.active=!1,this.content.interactive=!1;const e=this.currPageIdx;let i=t,s=i>e?1:-1;i>=this.pages.length?(i=0,s=1):i<0&&(i=this.pages.length-1,s=-1),this.getButtonNavigator(e).enabled=!0,this.getButtonNavigator(i).enabled=!1,this.pages[i].visible=!0;const n={x:s*this.pages[i].bg.width};this.tweenNav=new TWEEN.Tween(n).to({x:0},600).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(()=>{this.pages[i].x=n.x,this.pages[e].x=this.pages[i].x-this.pages[i].bg.width*s}).onComplete(()=>{this.tweenNav.stop(),this.tweenNav=null,this.setPageIndex(i),this.startIntro(),this.active=!0,this.content.interactive=!0}),this.tweenNav.start()}getPageComponents(t){const e=this._introContent[`page${t}`].content;if(!this[`_page${t}Zhongs`]){const i=[],s=[];for(const n of e.children)for(const r of n.children)r.id=="Zhong"?i.push(r):r.id=="FSZhong"&&s.push(r);this[`_page${t}Zhongs`]=[i,s],this._introContent[`page${t}`].content.column5&&this._introContent[`page${t}`].content.column5.wild.setSkin(`Wild_${mt(!0)}`)}return this[`_page${t}Zhongs`]}page0Active(){const[t,e]=this.getPageComponents(0);for(const i of t)T(i,"TileTrigger",!0,()=>{});for(const i of e)T(i,"TileTrigger",!0,()=>{})}page0Dactive(){const[t,e]=this.getPageComponents(0);for(const i of t)i.setAnimation(0,"TileTrigger",!1),i.resetTrackTime(),i.animated=!1;for(const i of e)i.setAnimation(0,"TileTrigger",!1),i.resetTrackTime(),i.animated=!1}page1Active(){const[t,e]=this.getPageComponents(1);for(const i of t)T(i,"Tile FlipMerged",!1,()=>{});for(const i of e)T(i,"Tile FlipMerged",!1,()=>{this._introContent.page1.content.column5.visible=!0})}page1Dactive(){const[t,e]=this.getPageComponents(1);for(const i of t)i.setAnimation(0,"Tile FlipMerged",!1),i.resetTrackTime(),i.animated=!1;for(const i of e)i.setAnimation(0,"Tile FlipMerged",!1),i.resetTrackTime(),i.animated=!1;this._introContent.page1.content.column5.visible=!1}page2Active(){this._introContent.page2.content}page2Dactive(){this._introContent.page2.content}closeScene(){console.warn=this.consoleWarn,this.next=c(this.layout,"next",null);const t=y.get("soundService");t.backgroundMusic&&t.stopBgm(),this.next&&this.transit()}get currTextPage(){return this.txtPages[this.currPageIdx]}get currPage(){return this.pages[this.currPageIdx]}get nextPage(){return this.pages[this.currPageIdx===this.pages.length-1?0:this.currPageIdx+1]}get prevPage(){return this.pages[this.currPageIdx>0?this.currPageIdx-1:this.pages.length-1]}};Oe([Fe("widgetService")],ye.prototype,"widgetService",2);Oe([S("btncontinue")],ye.prototype,"btncontinue",2);Oe([S("btnnavigate")],ye.prototype,"btnnavigate",2);Oe([S("content")],ye.prototype,"content",2);Oe([S("text")],ye.prototype,"text",2);Oe([S("frame")],ye.prototype,"frame",2);Oe([S("panelbg")],ye.prototype,"panelbg",2);Oe([S("logo")],ye.prototype,"logo",2);Oe([S("reelBg")],ye.prototype,"reelBg",2);Oe([S("textcontent")],ye.prototype,"textcontent",2);ye=Oe([m({tag:"splash",category:"scene"})],ye);const wf="events:reel:stop",xf="events:symbol:hit";class To{constructor(e,i,s,n,r,o=!0,a=-1){this.symbol=e,this.fromY=i,this.toY=s,this.acc=n,this.bounceFactor=r,this.stopped=o,this.reelIdx=a,this.reels=w.get("reels"),this.speed=0,this.bounce=0,this.stopping=!0,this.timer=null,this.emitReelIdx=-1}play(e=0,i=!0){this.stopping=i;let s=new Promise((n,r)=>{this.resolve=n});return e?this.timer=setTimeout(()=>{B.add(this),this.timer=null},e):B.add(this),s}stop(){this.stopped=!0}cancel(){this.timer&&clearTimeout(this.timer),this.reels.removeSymbol(this.symbol),B.remove(this)}advanceTime(e){let i=this.symbol;return this.speed+=this.acc,i.y+=this.speed,i.y>=this.toY&&(this.bounce===0&&(this.emitReelIdx>=0&&ee.emit(wf,this.emitReelIdx),ee.emit(xf,i,this.reelIdx)),this.bounce++,i.y=this.toY,this.stopping?this.bounce===10?(B.remove(this),this.resolve()):this.speed*=-this.bounceFactor:this.stopped?(this.reels.removeSymbol(this.symbol),B.remove(this),this.resolve()):(this.speed=0,i.y=this.fromY)),!0}}const Bo="events:reel:stopspin2";let If=class{constructor(){this.stopSequence=[[0],[1],[2],[3],[4]],this.spinTime=[0,0,0,0,0],this.stopSequenceIdx=0,this.symbolDropTimeGap=200,this.reelDropTimeGap=100,this.reelAdjustment=0,this.acceleration=1.5,this.bounceFactor=.25}play(){this.reels.removeWinningSymbol()}stop(){d.emit(Bo),this.animators=[];let e=Promise.resolve();for(let i=0;i<this.numCols;i++){let s=i*this.reelDropTimeGap;this.reels.addSymbolsAtColTopPos(i,this.reels.addSymbols[i]);for(let n=this.numRows-1;n>=0;n--){let r=this.reels.symbols[i][n];if(this.reels.symbolDisplacements[i][n]>0){r.y=r.y+this.reelAdjustment;let a=new To(r,r.y,this.reels.getReelY(n),this.acceleration,this.bounceFactor,!0,i);e=a.play(s),s+=this.symbolDropTimeGap,this.animators.push(a),n===0&&(a.emitReelIdx=i)}}}return e}get numCols(){return I().NUM_OF_COLUMN}get numRows(){return I().NUM_OF_ROW}update(){}cancel(){if(this.animators)for(let e=0;e<this.animators.length;e++)this.animators[e].cancel()}};class Pf extends If{stop(){d.emit(Bo),this.animators=[];let e;const i=n=>7,s=this.reels;for(let n=0;n<this.numCols;n++){let r=n*this.reelDropTimeGap;this.reels.addSymbolsAtColTopPos(n,this.reels.addSymbols[n]);for(let o=i()-1;o>=0;o--){const a=this.reels.symbols[n][o];if(a.col=n,a.row=o,this.reels.symbolDisplacements[n][o]>0){a.y=a.y+this.reelAdjustment;const u=new To(a,a.y,s.getReelY(o,n),this.acceleration,this.bounceFactor,!0,n);e=u.play(r),r+=this.symbolDropTimeGap,this.animators.push(u),o===0&&(u.emitReelIdx=n)}}}return this.reels.sortSymbols(),e}}var _f=Object.defineProperty,Cf=Object.getOwnPropertyDescriptor,Tf=(t,e,i,s)=>{for(var n=s>1?void 0:s?Cf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&_f(e,i,n),n};let os=class extends C{constructor(){super(),this.isSpinning=!1,this.symbols=[],this.symbolService=y.get("symbolService"),w.map("reels").toValue(this);for(let t=0;t<xe();t++)this.symbols.push([]);this.initSymbolContainer(),this.animator=w.get("reelsAnimator"),this.animator.reels=this,w.map("winLineSetupSymbols").toValue(this.winLineSymbolSetup)}get scene(){return this.parent}initSymbolContainer(){this.symbolContainer=new Ve,this.addChild(this.symbolContainer)}winLineSymbolSetup(t,e){}getNumRows(t){return 7}spin(){this.isSpinning||(this.isSpinning=!0,this.animator.play(),this.winPanel.close(),this.initMask())}spinReel(t){}display(t){t?this.symbolIndexes=t:t=this.symbolIndexes;const e=t.length;for(let i=e-1;i>=0;i--)this.displayCol(i)}displayCol(t){this.clearColSymbols(t);const e=this.symbolIndexes[t];for(let i=0;i<this.getNumRows(t);i++){const s=this.symbolService.get(e[i]);s.idle(),this.setColRow(s,t,i),this.symbols[t][i]=s,this.addSymbol(s,t)}}layoutSymbols(){}reelStoped(t){for(const e of this.symbolContainer.children)e.col==t&&e.idle()}sortSymbols(){const t=this.symbolContainer.children;t.sort((e,i)=>e.index==xt||e.index==Xe?-1:i.index==xt||i.index==Xe?1:e.col==i.col?i.row-e.row:e.col-i.col);for(let e=0;e<t.length;e++){const i=t[e];i.parent.setChildIndex(i,0)}}addSymbol(t,e){this.symbolContainer.addChild(t),t.pivot.y=this.getSymbolPivotY(e)}addSymbolAt(t,e,i){const s=Number(e),n=s===10||s===9,r=this.symbolContainer.children.length-1;this.symbolContainer.addChildAt(t,n?r:Math.min({0:27,1:21,2:14,3:7,4:0}[i],r)),t.pivot.y=this.getSymbolPivotY(i)}adjustCol(t){for(let e=0;e<this.getNumRows(t);e++){const i=this.symbols[t][e];i.idle(),this.setColRow(i,t,e)}}clearColSymbols(t){this.symbols[t].forEach(e=>{this.removeSymbol(e)}),this.symbols[t]=[]}clearSymbols(){for(let t=0;t<xe();t++)this.clearColSymbols(t)}stop(t,e=!1,i,s){this.symbolIndexes=t,this.winLines=i,this.stopHandler=s,this.stopTimeout=setTimeout(()=>{e?this.stopImmediately():this.animator.stop().then(()=>this.layoutSymbols()).then(()=>this.animationStopped()).catch(n=>{Ke(n.code?n.code:ys)})},this.stopTime)}deactivate(){super.deactivate(),this.winPanel.close()}addSpinSymbols(t){for(let e=t;e<xe();e++)this.addSymbolsAtColTop(e,this.pickMany(1,e),i=>{i.spin(),i.col=e})}addStopSymbols(t){return this.addSymbolsAtColTop(t,this.symbolIndexes[t],i=>i.idle()),-this.symbols[t][0].y}addSymbolsAtColTop(t,e,i){if(e)for(let s=e.length-1;s>=0;s--){const n=this.symbols[t][0],r=n?n.y:0,o=this.symbolService.get(e[s]);o.x=n?n.x:this.getReelX(t),o.y=r-Ie(),i(o),this.addSymbolAt(o,e[s],t),this.symbols[t].unshift(o)}}addSymbolsAtColsTop(t,e,i){if(e)for(let s=0;s<t.length;s++)this.addSymbolsAtColTop(t[s],e[s],i)}addSymbolsAtTop(t,e,i=0){const s=[];for(let n=i;n<xe();n++)s.push(n);this.addSymbolsAtColsTop(s,t,e)}setColRow(t,e,i){const s=this.getRegisterPoint(e,i);t.col=e,t.row=i,t.position.set(s.x,s.y)}pickMany(t,e){const i=[];for(let s=0;s<t;s++)if(e==2&&this.scene.isFreeSpin)for(let n=0;n<t;n++)i.push(nt(20,11));else for(let n=0;n<t;n++)i.push(nt(20));return i}removeOutsideSymbols(){for(let t=0;t<xe();t++){const e=this.symbols[t].length;for(let i=e-1;i>=0;i--){const s=this.symbols[t][i];s.y>Ie()*(this.getNumRows(t)+1)&&(this.removeSymbol(s),this.symbols[t].splice(i,1))}}}removeSymbolByPos(t,e){const i=this.symbols[t][e];this.removeSymbol(i),this.symbols[t].splice(e,1)}removeSymbol(t){t.attachedSymbol&&t.attachedFollow&&(t.attachedSymbol.parent&&t.attachedSymbol.parent.removeChild(t.attachedSymbol),this.symbolService.free(t.attachedSymbol)),t.parent&&t.parent.removeChild(t),this.symbolService.free(t)}initMask(){this.maskSprite&&(this.removeChild(this.maskSprite),this.maskSprite=void 0),this.setMask()}setMask(){this.maskSprite||(this.maskSprite=Gt(480,570),this.addChild(this.maskSprite),this.maskSprite.y=-10),this.mask=this.maskSprite,this.maskSprite.visible=!0}removeMask(){this.mask=void 0,this.maskSprite.visible=!1}stopImmediately(){clearTimeout(this.stopTimeout),this.display(),this.animator.cancel(),this.animationStopped()}animationStopped(){this.isSpinning=!1,this.removeMask(),this.stopHandler?this.stopHandler({symbols:this.symbolIndexes,winlines:this.winLines}).then(()=>this.showWinLines()):this.showWinLines(),d.emit(Co)}showWinLines(t,e=!1){t=t===void 0?this.winLines:t}getReelX(t){return t*(Bt()+Xt())}getReelY(t,e){return t*(Ie()+Ks())}getSymbolPivotY(t){const e=Ie()+Ks();return t%4==0?e/2:e}getRegisterPoint(t,e){return{x:this.getReelX(t),y:this.getReelY(e,t)}}getSymbol(t,e){return this.symbols[t][e]}getSymbolPos(t,e){return[{x:t,y:e}]}setSpinningTime(t,e,i=!0){this.animator.setSpinningTime(t,e,i)}hasSymbolInReel(t,e){const i=this.symbolIndexes[t];for(let s=0;s<i.length;s++)if(i[s]===e)return!0;return!1}get winPanel(){return this._winPanel||(this._winPanel=N.current.getComponentByTag("winPanel")),this._winPanel}set reelPadding(t){Xt(t);for(let e=0;e<this.symbols.length;e++)for(let i=0;i<this.symbols[e].length;i++){const s=this.getRegisterPoint(e,i);this.symbols[e][i].x=s.x}}static create(t,e){return Eo(os,t,e)}};os=Tf([m({tag:"reels"})],os);function Eo(t,e,i){const s=new t;return s.stopTime=l(e,"stopTime",1e3),k(s,e,i),An(s,e,"reelPadding",l,0),Xt(l(e,"reelPadding")),s}var Bf=Object.defineProperty,Ef=Object.getOwnPropertyDescriptor,Of=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ef(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Bf(e,i,n),n};let as=class extends os{constructor(){super(...arguments),this.collapsing=!1,this.maskSpin=null,this.maskIdle=null,this.numRows=t=>7}initReels(){this.initMask()}spin(){this.isSpinning||(this.isSpinning=!0,this.setMask(),this.collapsing?(this.animator=w.get("reelsCollapsingAnimator"),this.animator.reels=this):(this.animator=w.get("reelsAnimator"),this.animator.reels=this),this.animator.play(),this.winPanel.close())}animationStopped(){super.animationStopped(),this.setMask()}getSymbolMapping(){const t=[...Array(xe())].map((e,i)=>[...Array(this.numRows(i))].map(()=>1));for(let e=0;e<this.winLines.length;e++){const i=this.winLines[e].positions;for(let s=0;s<i.length;s++){const n=Np.includes(this.symbolIndexes[i[s][0]][i[s][1]])?2:0;t[i[s][0]][i[s][1]]=n}}this.symbolMapping=t,this.symbolDisplacements=[];for(let e=0;e<xe();e++){const i=[];let s=0;for(let r=this.numRows(e)-1;r>=0;r--)t[e][r]===0?s+=Ie():i.unshift(s);const n=this.numRows(e)-i.length;for(let r=0;r<n;r++)i.unshift(s);this.symbolDisplacements.push(i)}}addSymbolsAtColTopPos(t,e,i=0){const s=this.symbols[t][0];if(s){const n=s.y;s.y=i,this.addSymbolsAtColTop(t,e,r=>r.idle()),s.y=n}else this.addSymbolsAtColTop(t,e,n=>n.idle())}removeWinningSymbol(){for(let t=0;t<xe();t++)for(let e=this.numRows(t)-1;e>=0;e--)this.symbolMapping[t][e]===0&&this.removeSymbolByPos(t,e)}setMask(){if(!this.maskIdle&&!this.maskSpin){super.setMask();return}this.isSpinning?this.setMaskSpin():this.setMaskIdle()}setMaskSpin(){this._removeMask(),this.maskSpin&&this.addMask(this.maskSpin)}setMaskIdle(){this.winLines&&this.winLines.length||(this._removeMask(),this.maskIdle&&this.addMask(this.maskIdle))}addMask(t){this.maskSprite||(this.maskSprite=t,this.addChild(this.maskSprite),this.mask=this.maskSprite,this.maskSprite.visible=!0)}_removeMask(){this.maskSprite&&(this.removeChild(this.maskSprite),this.maskSprite=void 0),this.mask=void 0}static create(t,e){const i=Eo(as,t,e);return K(t,(s,n)=>{if(s.nodeName==="mask"){const r=i.getReelX(xe())+l(s,"x")*-2,o=Wn()*Ie()+l(s,"y")*-2;c(s,"render")==="canvas"&&X.type===PIXI.RENDERER_TYPE.CANVAS?c(s,"mode")==="spin"?i.maskSpin=ri(s,r,o):c(s,"mode")==="idle"&&(i.maskIdle=ri(s,r,o)):c(s,"render")==="webgl"&&X.type===PIXI.RENDERER_TYPE.WEBGL&&(c(s,"spin")&&(c(s,"spin")==="default"?i.maskSpin=ri(s,r,o):i.maskSpin=_r(s,"spin")),c(s,"idle")&&(c(s,"idle")==="default"?i.maskIdle=ri(s,r,o):i.maskIdle=_r(s,"idle")))}}),i.initReels(),i}};as=Of([m({tag:"reels"})],as);function ri(t,e,i){const s=Me(e+l(t,"x-offset",0),i+l(t,"y-offset",0),l(t,"radius",0));return s.position.set(l(t,"x"),l(t,"y")),s}function _r(t,e){const i=new PIXI.Sprite(R.resolve(c(t,e)));return i.position.set(l(t,"x"),l(t,"y")),i.scale.set(l(t,"scale",1)),i}class Lf extends of{advanceTime(e){if(this.enabled){try{const i=this.spinAnimator.getSpeed(),s=this.stopAnimator?this.stopAnimator.getSpeed():0;let n=0;for(let r=this.numCols-1;r>=0;r--){const o=this.states[r],a=this.reels.symbols[r];o!==tt.Stopped&&a.forEach(h=>{h.y+=o===tt.Spin?i:s,h.updateAttached()}),o===tt.Spin&&(n=r)}if(this.reels.symbols[n][0].y>0&&this.states[n]===tt.Spin&&this.reels.addSpinSymbols(n),this.reels.removeOutsideSymbols(),this.stopAnimator&&this.stopAnimator.stopped){const r=[];for(let o=0;o<this.numCols;o++)this.states[o]===tt.Stopping&&(this.states[o]=tt.Stopped,this.reels.adjustCol(o),r.push(o));d.emit(Qn,r),this.allStopped?(this.cancel(),this.resolve()):this.readyToStop()}this.update&&this.update()}catch{this.reject&&this.reject({code:ys,message:""})}return!0}}}var Af=Object.defineProperty,Df=Object.getOwnPropertyDescriptor,Nf=(t,e,i,s)=>{for(var n=s>1?void 0:s?Df(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Af(e,i,n),n};let ls=class extends C{constructor(){super(...arguments),this.items=[]}addItem(t){const e=this.items.shift();this.items.push(e),this.addChild(e),e.x=this.size.width/2-e.width/2+this.size.width*t,e.y=this.size.height/2-e.height/2}removeItem(){var t;(t=this.children[0])==null||t.removeFromParent()}init(){this.items=[...this.components],this.removeChildren(),this.addItem(0)}showIn(){this.addItem(1);const t=this.children[0].x,e=this.children[1].x;new TWEEN.Tween({k:0}).to({k:1},3e3).onUpdate(i=>{this.children[0].x=t-i.k*this.size.width,this.children[1].x=e-i.k*this.size.width}).onComplete(this.removeItem.bind(this)).start()}run(){ve(5e3).then(()=>{this.showIn(),this.run()})}static create(t,e){const i=me(ls,t,e);return i.size=Or(t,"range"),i.init(),i.run(),i}};ls=Nf([m({tag:"adBar"})],ls);var Rf=Object.defineProperty,Mf=Object.getOwnPropertyDescriptor,Ff=(t,e,i,s)=>{for(var n=s>1?void 0:s?Mf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Rf(e,i,n),n};let hs=class extends C{constructor(){super(...arguments),this.mode="normal",this.activeIndex=-1,this.getMultiplierLayers=()=>{const t=this.normal,e=this.freeSpin,i=this.superGold;return{normal:t,freeSpin:e,superGold:i}}}init(){this.updateMultiplierLayer()}updateMultiplierLayer(t="normal"){this.mode=t;const e=this.getMultiplierLayers();e.normal.visible=t==="normal",e.freeSpin.visible=t==="freeSpin",e.superGold.visible=t==="superGold"}increaseMultiplier(){this.activeIndex<3&&this._setMultiplierIndex(this.activeIndex+1)}_setMultiplierIndex(t){if(t!=this.activeIndex){const e=this.activeIndex,i=this[this.mode][`${e}spine`];T(i,"Deactivate",!1);const s=this[this.mode][`${t}spine`];T(s,"Activate",!1),this.activeIndex=t;const n=this.mode=="normal"?yr:this.mode=="freeSpin"?Sr:wr;t>0&&Y(`scale${n[t]}`,"default")}}setMultiplierIndex(t,e=this.mode){const s=Math.max(0,{normal:yr,freeSpin:Sr,superGold:wr}[e].indexOf(t));this._setMultiplierIndex(Math.min(s,3))}resetMultiplierIndex(){if(this.activeIndex==0)return;this.activeIndex=0;const t=this.getMultiplierLayers();for(let n=0;n<4;n++){const r=t.normal[`${n}spine`];r.currentAction!=="Deactivate"&&T(r,"Deactivate",!1);const o=t.freeSpin[`${n}spine`];o.currentAction!=="Deactivate"&&T(o,"Deactivate",!1);const a=t.superGold[`${n}spine`];o.currentAction!=="Deactivate"&&T(a,"Deactivate",!1)}const e=t.normal["0spine"];T(e,"Activate",!1);const i=t.freeSpin["0spine"];T(i,"Activate",!1);const s=t.superGold["0spine"];T(s,"Activate",!1)}static create(t,e){return Wf(hs,t,e)}};hs=Ff([m({tag:"mahjongMulti"})],hs);function Wf(t,e,i){const s=new t;return ue(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var Hf=Object.defineProperty,kf=Object.getOwnPropertyDescriptor,Uf=(t,e,i,s)=>{for(var n=s>1?void 0:s?kf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Hf(e,i,n),n};let us=class extends C{constructor(){super(...arguments),this.getUI=()=>({spine:this.container.spine})}oncreate(){const t=U().get("mainInfobar"),e=this.container.spine.getSlotContainerByName("InfoBar");e.removeChildren(),e.addChild(t)}changeToNormalUI(){const t=this.getUI();t.spine.x=0,T(t.spine,"idleNorm",!0),rs(),wo()}changeToFSUIAsync(){return xo(),Io(),new Promise(t=>{const e=this.getUI();T(e.spine,"NormToFS",!1,()=>{t(!0),T(e.spine,"idleFS",!0)})})}init(){this.changeToNormalUI()}static create(t,e){const i=$f(us,t,e);return i.oncreate(),i}};us=Uf([m({tag:"mainUI"})],us);function $f(t,e,i){const s=new t;return ue(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var Vf=Object.defineProperty,jf=Object.getOwnPropertyDescriptor,Gf=(t,e,i,s)=>{for(var n=s>1?void 0:s?jf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Vf(e,i,n),n};let cs=class extends C{showTotalWin(t){this.container.visible=!0;const e=_().isTurbo;this.container.spine.timeScale=e?2:1;const i=this.container.spine.getSlotContainerByName("TotalAmountSlot"),s=U().get("totalWinLabel");i&&s&&(i.removeChildren(),T(this.container.spine,"TotalAmount_Intro",!1,()=>{i.addChild(s),s.duration=300,s.value=`${t}`}),re(1500).then(()=>{s.setValueDirectly(`${t}`),this.hideTotalWin()}))}hideTotalWin(){T(this.container.spine,"TotalAmount_Outro",!1,()=>{this.container.visible=!1})}static create(t,e){return Xf(cs,t,e)}};cs=Gf([m({tag:"totalWinPanel"})],cs);function Xf(t,e,i){const s=new t;return ue(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var Yf=Object.defineProperty,zf=Object.getOwnPropertyDescriptor,qf=(t,e,i,s)=>{for(var n=s>1?void 0:s?zf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Yf(e,i,n),n};let ps=class extends C{constructor(){super(...arguments),this.bigwinActive=!1,this.totalWinActive=!1,this.youWonActive=!1,this.getBigWin=()=>{const t=this.bigwin,e=t.spine;return{container:t,spine:e}},this.getYouWon=()=>{const t=this.youwon,e=t.spine;return{container:t,spine:e}},this.getTotalWin=()=>{const t=this.totalwin,e=t.spine;return{container:t,spine:e}}}get scene(){return this.parent.parent}get bgp(){return this.scene.bgp}get animation(){return this.scene.animation}showBigWin(t){return new Promise(e=>{if(this.bigwinActive)e(!0);else{Cn(),this.bigwinActive=!0;const i=this.getBigWin();i.container.visible=!0;const s=i.spine.getSlotContainerByName("BW_Txt_Amount");this.bigWinLabel=U().get("bigWinPanelLabel"),s.removeChildren(),i.spine.setSkin(mt(!0)),this.bgp.visible=!0,ne(this.bgp,500,()=>{this.animation.playBigWinEffect()},.5),T(i.spine,"BigWin_Intro",!1,()=>{s.addChild(this.bigWinLabel),T(i.spine,"BigWin_Idle",!0),this.bigWinLabel.value=`${t}`,e(!0)}),re(500).then(()=>{T(this.bigwinIcon,"FlyOut_Normal",!0,()=>{})})}})}showTotalWin(t){return Y(Vp,"default"),new Promise(e=>{if(this.totalWinActive)e(!0);else{Cn(),this.totalWinActive=!0;const i=this.getTotalWin();i.container.visible=!0,i.spine.setSkin(mt(!0));const s=i.spine.getSlotContainerByName("TW_Txt_WinningAmount");this.totalWinLabel=U().get("totalWinPanelLabel"),s.removeChildren(),this.bgp.visible=!0,ne(this.bgp,500,()=>{this.animation.playFreeWinEffect()},.5),T(i.spine,"TotalWin_Intro",!1,()=>{s.addChild(this.totalWinLabel),T(i.spine,"TotalWin_Idle",!0),this.totalWinLabel.value=`${t}`,e(!0)}),re(500).then(()=>{T(this.bigwinIcon,"FlyOut_Normal",!0,()=>{})})}})}showYouWon(t){return new Promise(e=>{if(this.youWonActive)e(!0);else{this.youWonActive=!0;const i=this.getYouWon();i.container.visible=!0;const s=i.spine.getSlotContainerByName("YW_Number"),n=i.spine.getSlotContainerByName("Click"),r=U().get("youWonPanelLabel"),o=U().get("youwonClickTip");s.removeChildren(),n.removeChildren(),n.addChild(o),i.spine.setSkin(mt(!0)),this.bgp.visible=!0,ne(this.bgp,500,()=>{this.animation.playGetFreeEffect()},.5),T(i.spine,"YouWon_Intro",!1,()=>{s.addChild(r),T(i.spine,"YouWon_Idle",!0),r.value=`${t}`})}})}hideBigWin(t){return new Promise(e=>{this.bigwinActive?(this.bigwinActive=!1,this.bigWinLabel.setValueDirectly(`${t}`),ve(1e3).then(()=>{const i=this.getBigWin();Pe(this.bgp,500,()=>{this.animation.stopBigWinEffect(),this.bgp.visible=!1},.5,0),T(i.spine,"BigWin_Outro",!1,()=>{Po(),e(!0),i.container.visible=!1,i.spine.animated=!1}),re(300).then(()=>{this.bigwinIcon.animated=!1,this.bigwinIcon.visible=!1})})):e(!0)})}hideTotalWin(t){return new Promise(e=>{this.totalWinActive?(this.totalWinLabel.setValueDirectly(`${t}`),this.totalWinActive=!1,ve(1e3).then(()=>{const i=this.getTotalWin();Pe(this.bgp,500,()=>{this.animation.stopFreeWinEffect(),this.bgp.visible=!1},.5,0),T(i.spine,"TotalWin_Outro",!1,()=>{e(!0),i.container.visible=!1,i.spine.animated=!1}),re(300).then(()=>{this.bigwinIcon.animated=!1,this.bigwinIcon.visible=!1})})):e(!0)})}hideYouWon(){return new Promise(t=>{this.youWonActive?(this.youWonActive=!1,ve(1e3).then(()=>{const e=this.getYouWon();Pe(this.bgp,500,()=>{this.animation.stopGetFreeEffect(),this.bgp.visible=!1},.5,0),T(e.spine,"YouWon_Outro",!1,()=>{t(!0),e.container.visible=!1,e.spine.animated=!1})})):t(!0)})}static create(t,e){return Kf(ps,t,e)}};ps=qf([m({tag:"youWonPanel"})],ps);function Kf(t,e,i){const s=new t;return ue(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}bs([Ci,qe,jn,Ve,Bi,as,mn,Li,qt,Fi,Oi,Ei,zt,gt,_i,Di,Kt,Mi,Jt,Ti,_t,ye,fn,Ri,Ni,yt,M]);bs([Xi,Gn,rt,Vi,z,Ui,Qi,Xn,Hi,ki,Wi,St,Yi,hs,Je,cs,ps,us,ls]);Mr([Xr,uc]);w.map("idleState").toType(_s);w.map("spinState").toType(Ad);w.map("context").toSingleton(hc);y.register("winLineService",new xi);const Jf=new Lf({maxSpeed:60,startSpeed:0,stopSpeed:-15,acceleration:4,deceleration:10}),ti=new Pf;ti.acceleration=10;ti.bounceFactor=.22;ti.symbolDropTimeGap=20;ti.reelDropTimeGap=60;w.map("reelsAnimator").toValue(Jf);w.map("reelsCollapsingAnimator").toValue(ti);const Zf=y.get("tweenService"),Qf=116,em=116;Zf.register("symbol-anim",(t,e)=>{const i=t.x,s=t.y,n=.7,r=(n-1)/2,o={scale:1,x:i,y:s},a=new TWEEN.Tween(o).to({scale:n,x:i-r*Qf,y:s-r*em},600).easing(TWEEN.Easing.Elastic.In).onUpdate(u=>{t.scale.set(o.scale,o.scale),t.x=o.x,t.y=o.y}),h=new TWEEN.Tween(o).to({scale:1,x:i,y:s},600).easing(TWEEN.Easing.Elastic.Out).onUpdate(u=>{t.scale.set(o.scale,o.scale),t.x=o.x,t.y=o.y});return a.chain(h.chain(a)),a});Xh();
