function re(t){return t!=null}function $(t){return t==null}function Ir(t){return typeof t=="string"}function _o(t){return typeof t=="function"}function Co(t){return _o(t)}function Pr(t){return Array.isArray(t)}function To(t){return Object.keys(t).length===0&&t.constructor===Object}function Bo(...t){let e={};for(let i=0;i<t.length;i++){let s=t[i];if(s!=null)for(let n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}var At=(t=>(t[t.PERCENT=0]="PERCENT",t[t.PIXEL=1]="PIXEL",t))(At||{});function z(t,e){if(!t)return;let s=t.childNodes.length;for(let n=0;n<s;n++){let r=t.childNodes[n];r.nodeType===Node.ELEMENT_NODE&&e(r,n)}}function Eo(t,e){let i=t.childNodes;for(let s=0;s<i.length;s++){let n=t.childNodes[s];if(n.nodeType===Node.ELEMENT_NODE&&ee(n)===e)return n}}function Lo(t,e){if(!t)return;let s=t.childNodes.length;for(let n=s-1;n>=0;n--){let r=t.childNodes[n];r.nodeType===Node.ELEMENT_NODE&&e(r,n)}}function kt(t,e){return re(t.attributes[e])}function Te(t,e,i){t&&t.attributes[e]&&i&&(t.attributes[e].value=i)}function ae(t,e,i=void 0){return t&&t.attributes[e]?t.attributes[e].value:i}function ee(t,e=""){return ae(t,"id",e)}function _n(t,e=""){return ae(t,"name",e)}function l(t,e,i=0){return+ae(t,e,i)}function Zn(t,e){let i=ae(t,e,"");return _r(i)}function _r(t){return t=t.replace(" ",""),t?t.indexOf("%")>-1?{value:Number(t.substr(0,t.length-1))/100,unit:0}:t.indexOf("px")>-1?{value:+t.substr(0,t.length-2),unit:1}:{value:+t,unit:1}:{value:0}}function Oo(t,e){let i=c(t,e,"0").split(","),s=[{value:0},{value:0}];for(let n=0;n<i.length;n++)s[n]=_r(i[n]);return s}function c(t,e,i=""){return ae(t,e,i)}function I(t,e,i=!1){return c(t,e,i?"true":"false").toLowerCase()==="true"}function fe(t,e=""){return re(t)?t.textContent:e}function Ao(t){return t.attributes.length===0&&t.childElementCount===0}function Be(t,e,i,s){let n=c(t,e),r;if(n)r=n.split(",");else return[];i=re(i)?i:r.length;let o=new Array(i);for(let a=0;a<i;a++)o[a]=s?r[a]:parseFloat(r[a]);return o}function Do(t,e,i){return Be(t,e,i,!0)}function Cr(t,e,i=[0,0]){let s=c(t,e,"0").split(","),n=i;for(let r=0;r<s.length;r++)n[r]=parseFloat(s[r]);return n}function No(t,e){let i=c(t,e,"0").split(",");return{x:parseFloat(i[0]),y:parseFloat(i[1])}}function Ro(t,e){let i=Be(t,e,2);return{width:i[0],height:i[1]}}function Mo(t,e){let i=Be(t,e),s=[];for(let n=0;n<i.length;n++)n%2==0&&s.push({width:i[n],height:i[n+1]});return s}function Cn(t){return{align:c(t,"align","left"),breakWords:I(t,"breakWords",!1),fontFamily:c(t,"fontFamily"),fontSize:l(t,"fontSize"),fontStyle:c(t,"fontStyle","normal"),fontVariant:c(t,"fontVariant","normal"),fontWeight:c(t,"fontWeight","normal"),fill:kt(t,"fills")?Do(t,"fills"):l(t,"fill",16777215),fillGradientType:l(t,"fillGradientType",0),fillGradientStops:Be(t,"fillGradientStops"),stroke:l(t,"stroke",0),strokeThickness:l(t,"strokeThickness",0),wordWrap:I(t,"wordWrap",!1),wordWrapWidth:l(t,"wordWrapWidth",100),dropShadow:I(t,"dropShadow",!1),dropShadowColor:c(t,"dropShadowColor","#000000"),dropShadowBlur:l(t,"dropShadowBlur",0),dropShadowAngle:l(t,"dropShadowAngle",Math.PI/6),dropShadowDistance:l(t,"dropShadowDistance",5),padding:l(t,"padding",0),textBaseline:c(t,"textBaseline","alphabetic"),miterLimit:l(t,"miterLimit",10),lineJoin:c(t,"lineJoin","miter"),letterSpacing:l(t,"letterSpacing",0),lineHeight:l(t,"lineHeight",0)}}let Wo=(()=>{if(DOMParser){let t=new DOMParser;return e=>t.parseFromString(e,"text/xml").documentElement}else if(typeof ActiveXObject<"u")return t=>{let e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return t=>{}})();class Fo{constructor(){this.ie=!1,this.ieVersion=0,this.android=!1,this.chrome=!1,this.windowsPhone=!1,this.checkOS(),this.checkBrowser()}checkOS(){let e=navigator.userAgent;/Android/.test(e)&&(this.android=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(this.android=!1,this.windowsPhone=!0)}checkBrowser(){let e=navigator.userAgent;/Chrome\/(\d+)/.test(e)&&!this.windowsPhone?this.chrome=!0:/MSIE (\d+\.\d+);/.test(e)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(this.ie=!0,this.ieVersion=parseInt(RegExp.$3,10))}get isUCBrowser(){return navigator.userAgent.toLowerCase().indexOf("ucbrowser")>-1}get isQQBrowser(){return navigator.userAgent.toLowerCase().indexOf("qqbrowser")>-1}get isXiaoMiBrowser(){return navigator.userAgent.toLowerCase().indexOf("xiaomi")>-1}get desktop(){return is.desktop()}get mobile(){return is.mobile()}get tablet(){return is.tablet()}}class Ho{constructor(){this.mappings={}}map(e,i){let s=new jo(e,i);return this.mappings[e]=s,s}unmap(e){this.mappings[e]=void 0}get(e,...i){let s=this.mappings[e];if(!$(s))return s.get(i)}resolve(){console.warn("Injector.resolve() is not implement yet")}}class ko{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class Uo{constructor(e){this.type=e}get(e){return Tr(this.type,e)}destroy(){this.type=void 0}}class $o{constructor(e){this.type=e}get(e){return $(this.instance)&&(this.instance=Tr(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class Vo{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class jo{constructor(e,i){this.name=e,this.type=i}get(e){return $(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new ko(e)}toType(e){this.destroy(),this.provider=new Uo(e)}toSingleton(e){this.destroy(),this.provider=new $o(e)}asSingleton(){if(this.destroy(),$(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new Vo(e)}destroy(){re(this.provider)&&this.provider.destroy()}}function Tr(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}let Go=Object.prototype.hasOwnProperty,ie=typeof Object.create!="function"?"~":!1;class Qn{constructor(e,i,s=!1){this.fn=e,this.context=i,this.once=s}}class Br{constructor(){this.off=this.removeListener}eventNames(){let e=this._events,i=[],s;if(!e)return i;for(s in e)Go.call(e,s)&&i.push(ie?s.slice(1):s);return i}listeners(e,i=!1){let s=ie?ie+e:e,n=this._events&&this._events[s];if(i)return!!n;if(!n)return[];if(n.fn)return[n.fn];let r=n.length,o=new Array(r);for(let a=0;a<r;a++)o[a]=n[a].fn;return o}emit(e,...i){let s=ie?ie+e:e;if(!this._events||!this._events[s])return!1;let n=this._events[s],r=i.length,o;if(typeof n.fn=="function"){switch(n.once&&this.removeListener(e,n.fn,void 0,!0),r){case 0:return n.fn.call(n.context),!0;case 1:return n.fn.call(n.context,i[0]),!0;case 2:return n.fn.call(n.context,i[0],i[1]),!0;case 3:return n.fn.call(n.context,i[0],i[1],i[2]),!0;case 4:return n.fn.call(n.context,i[0],i[1],i[2],i[3]),!0;case 5:return n.fn.call(n.context,i[0],i[1],i[2],i[3],i[4]),!0}n.fn.apply(n.context,i)}else{let a=n.length;for(o=0;o<a;o++)switch(n[o].once&&this.removeListener(e,n[o].fn,void 0,!0),r){case 0:n[o].fn.call(n[o].context);break;case 1:n[o].fn.call(n[o].context,i[0]);break;case 2:n[o].fn.call(n[o].context,i[0],i[1]);break;default:n[o].fn.apply(n[o].context,i)}}return!0}on(e,i,s){let n=new Qn(i,s||this),r=ie?ie+e:e;return this._events||(this._events=ie?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):this._events[r]=n,this}once(e,i,s){let n=new Qn(i,s||this,!0),r=ie?ie+e:e;return this._events||(this._events=ie?{}:Object.create(null)),this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):this._events[r]=n,this}removeListener(e,i,s,n){let r=ie?ie+e:e;if(!this._events||!this._events[r])return this;let o=this._events[r],a=[];if(i)if(o.fn)(o.fn!==i||n&&!o.once||s&&o.context!==s)&&a.push(o);else for(let h=0,u=o.length;h<u;h++)(o[h].fn!==i||n&&!o[h].once||s&&o[h].context!==s)&&a.push(o[h]);return a.length?this._events[r]=a.length===1?a[0]:a:delete this._events[r],this}removeAllListeners(e){return this._events?(e?delete this._events[ie?ie+e:e]:this._events=ie?{}:Object.create(null),this):this}}class Er extends Br{on(e,i,s){return this.off(e),super.on(e,i,s)}}class Ce{constructor(e,i,s=!0){this.id=e,this.src=i,this.global=s}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){}destroy(e){this.data&&this.data.texture.destroy(e)}static getVersionSrc(e){let i=w.get("context");return this.checkSrcFormat(i.applyTimeVersion(i.resolve(ae(e,"src"))))}static checkSrcFormat(e){const i=e.match(/\[(?:.+)\]/);if(i){const s=i[0].replace("[","").replace("]","").split(",");for(let n of s){const r=n==="avif",o=n==="webp";if(r&&fi.avif||o&&fi.webp||!r&&!o)return e.replace(`${i[0]}`,n)}}return e}static create(e){return new Ce(ee(e),this.getVersionSrc(e),I(e,"global",!0))}}function He(t,e){let i=t.toString();return new Array(e-i.length+1).join("0")+i}class Xo{static fromCharCode(e){return String.fromCharCode(e)}static charCodeAt(e,i){return e.charCodeAt(i)}static split(e,i){return e.split(i)}static equals(e,i){return e===i}static stripLeft(e,i){if(e&&e.length){let s=0;for(let n=0;n<e.length&&!(i.indexOf(e[n])<0);n++)s++;e=e.substring(s)}return e}static stripRight(e,i){if(e&&e.length){let s=e.length;for(let n=e.length-1;n>=0&&!(i.indexOf(e[n])<0);n--)s--;e=e.substring(0,s)}return e}static replace(e,i,s){return e.replace(i,s)}static replaceAll(e,i,s){return e.replace(i,s)}static slice(e,i=0,s=null){return e.slice(i,s===null?void 0:s)}static replaceAllMapped(e,i,s){return e.replace(i,function(...n){return n.splice(-2,2),s(n)})}static contains(e,i){return e.indexOf(i)!==-1}static compare(e,i){return e<i?-1:e>i?1:0}}function Yo(t,e="{{",i="}}"){let s=[],n=0,r=0;for(;n=t.indexOf(e,r),n!==-1;)if(r=t.indexOf(i,n),n>-1&&r>-1)s.push(t.substr(n+2,r-n-2));else break;return s}function it(t){let e=t.split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function de(t){return new Decimal(t).toFixed(2,Decimal.ROUND_FLOOR)}function zo(t,e){return e?it(de(t)):t}function Jt(t,e){if(!e)return t+" ";switch(t){case"USD":return"$";case"CNY":case"RMB":case"JPY":return"¥";case"KRW":return"₩";case"MYR":return"RM";case"IDR":return"Rp";case"THB":return"฿";case"VND":return"₫";case"EUR":return"€";default:return t+" "}}function Tn(t,e){return e?Jt(t,!0):""}class us extends Ce{constructor(e,i,s,n){super(e,e,n),this.id=e,this.src=i,this.options=s}addTo(e){e.add({src:this.src,alias:this.id})}loaded(e){const i={};for(let n=0;n<this.options.frame;n++)i[`${this.id}_${He(n,4)}`]={frame:{x:n%this.options.width*this.options.size[0],y:Math.floor(n/this.options.width)*this.options.size[1],w:this.options.size[0],h:this.options.size[1]}};const s=e.get(this.id);this.sheet=new PIXI.Spritesheet({texture:s,data:{frames:i,meta:{scale:1}}}),this.sheet.parse()}static create(e){let i={size:Cr(e,"size"),frame:l(e,"frame"),width:l(e,"width",0)};return new us(ee(e),this.getVersionSrc(e),i,I(e,"global",!0))}}class Nt extends Ce{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.type=s}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){return new Nt(ee(e),this.getVersionSrc(e),e.tagName,I(e,"global",!0))}}class Bn extends Ce{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.type=s}static create(e){return new Bn(ee(e),this.getVersionSrc(e),e.tagName,I(e,"global",!0))}}function er(t,e){let i=w.get("context"),s=ae(t,e,void 0);return s==null?s:i.applyTimeVersion(i.resolve(ae(t,e)))}class En extends Ce{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.options=s}addTo(e){e.add({src:this.src,alias:this.id})}static create(e){var i=er(e,"atlas"),s=ae(e,"rawAtlas",void 0);let n={spineAtlasFile:i,rawAtlasData:s};return new En(ee(e),this.checkSrcFormat(er(e,"json")),n,I(e,"global",!0))}}class cs extends Ce{constructor(e,i,s){super(e,i,s),this.id=e,this.src=i}get rawAtlas(){return this.data}addTo(e){}static create(e){return new cs(ee(e),this.getVersionSrc(e),I(e,"global",!0))}}class pi extends Ce{constructor(e,i,s,n){super(e,i,n),this.id=e,this.src=i,this.type=s}get frag(){return this.data}get vert(){return this.data}static create(e){return new pi(ee(e),this.getVersionSrc(e),e.tagName,I(e,"global",!0))}}async function qo(t,e,i){const s=PIXI.TextFormat.test(t)?PIXI.TextFormat.parse(t):PIXI.XMLStringFormat.parse(t),{src:n}=e,{page:r}=s,o=[];for(let u=0;u<r.length;++u){const p=r[u].file,g=n.split("?")[0].split("/");g.pop(),g.push(p);let m=g.join("/");m=PIXI.copySearchParams(m,n),o.push(m)}const a=await i.load(o),h=o.map(u=>a[u]);return PIXI.BitmapFont.install(s,h,!0)}function Ko(){const t=PIXI.loadBitmapFont;t.parse=qo,PIXI.extensions.add(PIXI.loadBitmapFont)}class Jo extends Br{constructor(){super(),this.ids=[],this.sheetResource={},this.assets=PIXI.Assets,Ko()}get progress(){return this._progress}onProgress(e){this._progress=e,this.emit("progress",e)}onLoaded(e){e.forEach(i=>{var s;(s=this.sheetResource[i])==null||s.loaded(this.assets)}),this.emit("complete",!1)}add(e,i=!1){e.addTo(this.assets),e instanceof cs||(this.ids.push(e.id),e instanceof us&&(this.sheetResource[e.id]=e))}load(){this.assets.load([...this.ids],this.onProgress.bind(this)).then(this.onLoaded.bind(this,[...this.ids])),this.ids=[]}json(e){return this.assets.get(e)}frag(e){return this.assets.get(e)}vert(e){return this.assets.get(e)}resolveImage(e){return this.assets.get(e)??PIXI.Texture.EMPTY}resolveTextureAtlas(e){const i=e[1],s=this.assets.get(i);if(e.length==2)return s.textures;{const n=e[2].split("|");return n.length==1?s.textures[n[0]]:n.map(r=>s.textures[r])}}resolveAtlasTextures(e){const i=e[1],s=this.assets.get(i);let n=[];const r=Object.keys(s.textures);if(e.length==2)n=Object.keys(s.textures);else for(let o of r)o.startsWith(e[1])&&n.push(o);return n=n.sort((o,a)=>o.localeCompare(a)),n.map(o=>s.textures[o])}resolveSpriteSheet(e){const i=this.sheetResource[e];return Object.values(i.sheet.textures)}resource(e){return this.assets.get(e)}text(e){return this.resource(e)}resolve(e){let i=PIXI.Texture.EMPTY;if(!e||e.length===0)return i;let s=e.split("/");switch(s[0]){case"@img":return this.resolveImage(s[1]);case"@atlas":return this.resolveTextureAtlas(s);case"@atlasTextures":return this.resolveAtlasTextures(s);case"@sheet":return this.resolveSpriteSheet(s[1]);case"@json":return this.json(s[1]);case"@spine":return this.resource(s[1]);case"@frag":return this.frag(s[1]);case"@vert":return this.vert(s[1]);case"@res":return this.resource(s[1]);case"@text":return this.text(s[1]);default:return i}}downloadApi(){return this.assets.add({src:"../_commons/api.json",alias:"api"}),this.assets.load("api")}get api(){return this.json("api")}getApiBy(e,i){return this.api[e]||i}}let Zo={atlas:Ce,img:Ce,audio:Bn,res:Ce,sheet:us,spine:En,rawAtlas:cs,text:Nt,json:Nt,xml:Nt,frag:pi,vert:pi};function Qo(t){let e=Zo[t.nodeName];if(e)return e.create(t);throw`not found the resource by ${t.nodeName}`}function je(t,e){let i=t.indexOf(e);i>=0&&t.splice(i,1)}function ea(t,e,i){let s=[],n=[];i=i||(r=>r);for(let r=0,o=0;r<e.length;r++)n.push(i(e[r])),o++,o===t&&(s.push(n),o=0,n=[]);return s}function Lr(t,e){let i=[];return t.forEach((s,n,r)=>{let o=e(s);i.push(o)}),i}function ta(t){if(t&&t.length>0)return t[0]}function Os(t){if(t)return t[t.length-1]}function ia(t,e){var i=0;if(t&&(i=t.length),i>0){for(var s=0;s<i;s++)if(e(t[s]))return t[s]}}function sa(t){return new Date(t)}function Or(){return new Date}function Ut(){return Or().getTime()}function tr(t,e){let i=Or(),s=i.getUTCHours()+t;s>23&&(s=s-24);let n=i.getUTCMinutes(),r=i.getSeconds(),o=He(s,2)+":"+He(n,2);return e?o+" (+"+t+")":o+":"+He(r,2)+" (GMT+"+t+")"}var U=(t=>(t[t.Identify=0]="Identify",t[t.PageView=1]="PageView",t[t.ScreenView=2]="ScreenView",t[t.Event=3]="Event",t[t.Request=4]="Request",t[t.Response=5]="Response",t[t.Transaction=6]="Transaction",t[t.Exception=7]="Exception",t[t.Timing=8]="Timing",t[t.Metric=9]="Metric",t[t.StartScreen=10]="StartScreen",t[t.StopScreen=11]="StopScreen",t))(U||{});let Us;function Ar(t){Us=t}class na{constructor(){this.listeners=[]}initialize(){if(this.userAgent=window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"",re(Us))for(let e of Us){let i=new e;i.initialize(),this.addListener(i)}this.handleGlobalError()}handleGlobalError(){window.onerror=(e,i,s,n,r)=>{this.exception({name:"GlobalError",description:e,fatal:!1,error:r,extraInfo:{filename:i,lineno:s,colno:n}})}}addListener(e){this.listeners.push(e)}removeListener(e){je(this.listeners,e)}identify(e){this.track(U.Identify,e)}screen(e){$(e)&&(e={name:D.current.id}),this.track(U.ScreenView,e)}startScreen(e){this.track(U.StartScreen,e)}stopScreen(e){this.track(U.StopScreen,e)}metric(e){this.track(U.Metric,e)}event(e){this.track(U.Event,e)}exception(e){this.track(U.Exception,e)}request(e){this.track(U.Request,e)}response(e){this.track(U.Response,e)}pageView(e){this.track(U.PageView,e)}track(e,i){let s=S,n={time:Ut(),type:e,userID:s.TRACKER_USER_ID,data:i};for(let r of this.listeners)r.track.call(r,n)}}const q=new na;function ne(t,e,i,s=1,n=0){return t.alpha=n,$t(t,{alpha:n},{alpha:s},e,i)}function Pe(t,e,i,s=1,n=0){return t.alpha=s,$t(t,{alpha:s},{alpha:n},e,i)}function ra(t,e,i,s,n,r=TWEEN.Easing.Linear.None,o=0,a=!1){let h=e;return new TWEEN.Tween(h).to(i,s).easing(r).repeat(o).yoyo(a).onUpdate(()=>{for(let p in e)p==="scale"?t.scale.x=t.scale.y=h[p]:t[p]=h[p]}).onComplete(()=>{n&&(n.length?n(t):n())})}function $t(t,e,i,s,n,r=TWEEN.Easing.Linear.None){let o=ra(t,e,i,s,n,r);return o.start(),o}function Vt(t,e,i=0,s=1){let n=new PIXI.Graphics;return n.beginFill(i),n.drawRect(0,0,t,e),n.endFill(),n.alpha=s,n}function oa(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawPolygon(t),i}function Dr(t,e,i=0,s=1){let n=new PIXI.Graphics;return n.lineStyle(s,i),n.drawRect(0,0,t,e),n}function $s(t,e=0){let i=new PIXI.Graphics;return i.beginFill(e),i.drawCircle(0,0,t),i.endFill(),i}function Re(t,e,i=0,s=0){let n=new PIXI.Graphics;return n.beginFill(s),n.drawRoundedRect(0,0,t,e,i),n.endFill(),n}const di="REGISTER_METADATA_KEY",aa="component",la="service",ha="scene";function f(t){return e=>(t.category=t.category||"component",e.prototype[di]=t,e)}function ir(t){if(di in t.prototype){let e=t.prototype[di];switch(e.category){case aa:w.map(`component:${e.tag}`).toFactory(()=>t);break;case la:let i=v.get(e.tag);i&&console.warn(`${e.tag}: ${i.constructor.name} is replaced by ${t.name}.`),v.register(e.tag,new t);break;case ha:w.map(`scene:${e.tag}`).toType(t);break}}else throw"Invaildate component, missing metadata of "+t}function ps(t){if(Pr(t))for(let e of t)ir(e);else ir(t)}class ua{constructor(){this.views=[]}add(e){this.pane&&this.views.push(e)}remove(e){if(this.pane){let i=this.views.indexOf(e);i>=0&&this.views.splice(i,1),this.refresh()}}refresh(){for(let e of this.pane.children)this.pane.remove(e);for(let e of this.views)e.showBoundingBox(),e.createItemControllers(e)}addRefreshButton(){this.pane.addButton({title:"refresh"}).on("click",()=>{this.refresh()})}}class ca{createItemControllers(e){De.pane.addBinding(e,"x"),De.pane.addBinding(e,"y"),De.pane.addBinding(e,"width"),De.pane.addBinding(e,"height"),De.pane.addBinding(e,"rotation"),De.pane.addBinding(e,"scale"),De.pane.addBinding(e,"visible"),De.pane.addBinding(e,"alpha")}}function pa(...t){return e=>e}var da=Object.defineProperty,fa=Object.getOwnPropertyDescriptor,ma=(t,e,i,s)=>{for(var n=s>1?void 0:s?fa(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&da(e,i,n),n};function sr(t){return t instanceof _||t instanceof ds}class ds{getComponentByID(e){}}let _=class extends PIXI.Container{constructor(){super(...arguments),this.components=[],this.fadeInTime=-1,this.fadeOutTime=-1,this.editAble=!1}addToEdit(){this.editAble&&De.add(this)}removeFromEdit(){this.editAble&&De.remove(this)}addChild(...t){if(t=t[0],t instanceof PIXI.DisplayObject&&super.addChild(t),sr(t))return t instanceof _&&(t.fadeIn(),t.addToEdit()),this.components.push(t),t}fadeIn(t){t===void 0&&(t=this.fadeInTime),t>0&&(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=ne(this,t))}fadeOut(t,e=!0){t===void 0&&(t=this.fadeOutTime),t>0?(this.fadeTween&&this.fadeTween.stop(),this.fadeTween=Pe(this,t,e?()=>{this.parent&&this.parent.removeChild(this)}:void 0)):e&&this.parent&&this.parent.removeChild(this)}removeChild(...t){return t=t[0],t instanceof PIXI.DisplayObject&&super.removeChild(t),sr(t)&&(je(this.components,t),t.deactivate()),t}removeChildren(t,e){return this.removeAllComponents(),super.removeChildren(t,e)}removeAllComponents(){this.deactivate(),this.components=[]}activate(){this.fadeIn(),this.components.forEach(t=>t.activate())}deactivate(){this.removeFromEdit(),this.fadeTween&&this.fadeTween.stop(),this.components.forEach(t=>t.deactivate())}getComponentByID(t){for(let e=0;e<this.components.length;e++){let i=this.components[e];if(i.id===t)return i;let s=i.getComponentByID(t);if(s)return s}}getComponentByTag(t){for(let e of this.components){let i=e.constructor.prototype[di];if(i&&i.tag===t)return e}}showBoundingBox(){re(this.boundingBox)&&(this.boundingBox.destroy(),this.removeChild(this.boundingBox));let t=this.getBounding();this.boundingBox=Dr(t.width,t.height,0,5),this.addChild(this.boundingBox)}getBounding(){return this.getBounds()}bringToTop(t){this.setChildIndex(t,this.children.length-1)}applyLayout(t){if(t)for(let e in t){let i=t[e];e==="scale"?this.scale.set(i[0],i[1]):e==="pivot"?this.pivot.set(i[0],i[1]):e==="activate"?i?this.activate():this.deactivate():this[e]=i}}onOrientationChange(t){this.layoutInfo&&this.applyLayout(this.layoutInfo[t])}};_=ma([pa(ca)],_);var W=(t=>(t[t.LANDSCAPE=0]="LANDSCAPE",t[t.PORTRAIT=1]="PORTRAIT",t))(W||{});function Nr(t){let e=c(t,"render");return!(e==="webgl"&&K.type!==PIXI.RENDERER_TYPE.WEBGL||e==="canvas"&&K.type===PIXI.RENDERER_TYPE.WEBGL)}function ba(t){let e=c(t,"brand",null);return e===null||e==="all"&&!S.BRAND||e.toLowerCase()===String(S.BRAND).toLowerCase()}function $e(t,e){if(!t||!Nr(t))return null;let i=t.nodeName,s=w.get(`component:${i}`);if(s){let n=s.create(t,e);return n instanceof _&&I(t,"boundingBox")&&n.showBoundingBox(),n}else console.warn(`can't find component by tag name "${i}"`);return null}function he(t,e,i=!0){if(!e.parent)throw new Error("call builder.createChildren must pass parent.");(i?Lo:z)(t,(n,r)=>{let o=$e(n,e);o&&e.parent.addChild(o)})}function k(t,e,i){i.scene;let s=i.parent,n=ee(e,null);t.id=n,n&&s&&(s[n]=t),t instanceof _&&(t.name=e.tagName+($(n)?"":`#${n}`),ga(t,e,i))}function ga(t,e,i){let s=[{},{},{}],n=i.scene,r=i.parent,o=!1,a=2;for(let h=0;h<e.attributes.length;h++){let u=e.attributes[h].name,p=u,g=a;if(u.indexOf("p-")===0?(g=W.PORTRAIT,p=u.substr(2),o=!0):u.indexOf("l-")===0&&(g=W.LANDSCAPE,p=u.substr(2),o=!0),p==="x"){let m=Zn(e,u);s[g].x=m.unit===At.PERCENT?r.width*m.value:m.value}else if(p==="y"){let m=Zn(e,u);s[g].y=m.unit===At.PERCENT?r.height*m.value:m.value}else if(p==="alpha")s[g].alpha=l(e,u);else if(p==="pivot"){let[m,A]=Oo(e,u),L=t.getLocalBounds();s[g].pivot=[m.unit===At.PERCENT?m.value*L.width:m.value,A.unit===At.PERCENT?A.value*L.height:A.value]}else if(p==="scale")if(ae(e,u).indexOf(",")!==-1)s[g].scale=Cr(e,u,[1,1]);else{let m=l(e,u);s[g].scale=[m,m]}else p==="rotation"?s[g].rotation=l(e,u)/180*Math.PI:p==="visible"?s[g].visible=I(e,u,!0):p==="activate"&&(s[g].activate=I(e,u))}e.hasAttribute("interactive")&&(t.interactive=I(e,"interactive")),e.hasAttribute("interactiveChildren")&&(t.interactiveChildren=I(e,"interactiveChildren")),e.hasAttribute("visible")&&(t.visible=I(e,"visible",!0)),t.fadeInTime=l(e,"fadein",-1),t.fadeOutTime=l(e,"fadeout",-1),t.editAble=I(e,"editAble",!1);for(let h=1;h<10;h++)e.hasAttribute("argument"+h)&&(t["argument"+h]=c(e,"argument"+h));o&&(n.multiLayoutComponents.push(t),t.layoutInfo=s),t.applyLayout(s[a])}function Ln(t,e,i,s,n){let r=e.hasAttribute("p-"+i),o=e.hasAttribute("l-"+i);!r&&!o||(r&&(t.layoutInfo[W.PORTRAIT][i]=s(e,"p-"+i,n)),o&&(t.layoutInfo[W.LANDSCAPE][i]=s(e,"l-"+i,n)))}function va(t,e,i,s,n){let r=i.scene,o=c(e,s,void 0);if(o&&r[o]){let a=c(e,"parameter",void 0),h=r[o];t[n]=()=>{h.call(r,t,a)}}}function Ke(t,e,i){for(var s=0;s<e.attributes.length;s++){var n=e.attributes[s];n&&n.name.match(/on[A-Z]\w+/)&&va(t,e,i,n.name,n.name+"Handler")}}function ke(t,e){let i=e[t+"Handler"];return i?(i(),!0):!1}function On(t){let e=t.hitArea;if(e){let i=Dr(e.width,e.height,16711680,2);t.addChild(i)}}const Vs="__guitarist_bindings__";class ya{constructor(e,i){this.viewID=e,this.propertyKey=i}apply(e){let i=D.current;e[this.propertyKey]=i.getComponentByID(this.viewID)}}class Sa{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=w.get(this.key)}}class wa{constructor(e,i){this.key=e,this.propertyKey=i}apply(e){e[this.propertyKey]=v.get(this.key)}}function An(t){return(e,i)=>{let s=e[Vs]||[];s.push(t(e,i)),e[Vs]=s}}function y(t){return An((e,i)=>new ya(t,i))}function _t(t){return An((e,i)=>new Sa(t,i))}function Me(t){return An((e,i)=>new wa(t,i))}function nr(t){(t[Vs]||[]).forEach(i=>i.apply(t))}function xa(t){let e=t?t.split(","):null;return(e?e.shift():null)=="fadein"?Ia(parseFloat(e.shift())||800):s=>{D.replace(s)}}function Ia(t){return e=>{let i=D.current;i&&(i.interactive=!1,i.interactiveChildren=!1);let s=D.resolve(e);s.alpha=0,D.add(s),ne(s,t,()=>{i&&(i.exit(),D.remove(i))})}}class Pa{}class Zt extends _{constructor(e){super(),this.layout=e,this.multiLayoutComponents=[],this.id=ee(e),this.name="scene#"+this.id,this.transitions=c(e,"transitions",null)}loadResources(){let e=R,i=this.layout.querySelector("scene resources");i?(e.retryTimes=l(i,"retry",2),z(i,(s,n)=>{if(Nr(s)&&ba(s)){let r=Qo(s);e.add(r)}}),e.on("progress",s=>{this.onProgress(s)}),e.once("complete",()=>{e.removeAllListeners(),this.onLoaded()}),e.load()):this.onLoaded()}create(e){let i=this.layout.querySelector("scene view");i&&he(i,{scene:this,parent:this}),nr(this);let s=v.get("orientationService");s.mode==="both"&&this.onOrientationChange(s.getOrientation()),this.onCreated(e)}enter(e){q.screen({name:this.id}),this.layout&&(this.loadResources(),this.create(e))}focus(){}blur(){}exit(){this.removeChildren()}setState(e){e.scene=this,this.state&&this.state.exit(),nr(e),this.state=e,this.state.enter()}get isPortraitLayout(){let e=v.get("orientationService");return e.mode==="both"&&e.getOrientation()===W.PORTRAIT}onProgress(e){}onLoaded(){this.next=c(this.layout,"next",null),this.next&&this.transit()}transit(){xa(this.transitions)(this.next)}onCreated(e){}onOrientationChange(e){for(let i=0;i<this.multiLayoutComponents.length;i++)this.multiLayoutComponents[i].onOrientationChange(e)}onSceneResize(){}}class _a{constructor(){this.overlayContainer=new PIXI.Container,this.sceneContainer=new PIXI.Container,this.scenesRegistry={},this.scenes=[]}register(e){this.scenesRegistry[ee(e)]=e}push(e,i=!0,s){this._current&&(this._current.blur(),this._current.visible=!i),this.add(this.resolve(e),s)}pop(){if(this._current&&(this._current.exit(),this.sceneContainer.removeChild(this._current),this.scenes.pop()),this.scenes.length>0){let e=this.scenes[this.scenes.length-1];e.visible=!0,e.focus(),this._current=e}}remove(e){this.sceneContainer.removeChild(e),this.scenes.splice(this.scenes.indexOf(e),1)}replace(e,i){this._current&&(this._current.exit(),this.remove(this._current)),this.add(this.resolve(e),i)}resolve(e){if(Ir(e)){let i=e,s=this.scenesRegistry[i],n=w.get(`scene:${i}`,s);return n||(n=new Zt(s)),n}else return e}addOverlay(e){this.overlayContainer.addChild(e)}removeOverlay(e){this.overlayContainer.removeChild(e)}get current(){return this._current}add(e,i){this.scenes.push(e),this.sceneContainer.addChild(e),this._current=e,this._current.enter(i)}}class ue{configure(e){}startup(){}shutdown(){}}class Ca{constructor(){this.services={}}get(e){return this.services[e]}register(e,i){let s;return Co(i)?s=new i:s=i,this.services[e]=s,s}has(e){return re(this.services[e])}startup(){for(let e in this.services)this.services[e].startup()}shutdown(){for(let e in this.services)this.services[e].shutdown()}}class Ta{constructor(){this.count=0}push(e,i=!1){if(!(!i&&this.has(e))){var s={value:e,next:void 0};if(this.count++,!this.head)this.head=s;else{let n=this.head;for(;n.next;)n=n.next;n.next=s}}}forEach(e){let i=this.head;for(;i;)e(i.value),i=i.next}has(e){let i=this.head;for(;i;){if(i.value===e)return!0;i=i.next}return!1}clear(){this.head=void 0,this.count=0}remove(e){let i=this.head;for(var s=i;i;){if(i.value===e){this.count--,s.next=i.next,i===this.head&&(this.head=i.next);return}s=i,i=i.next}}}class Ba{constructor(){this.list=new Ta}advanceTime(e){return this.list.forEach(i=>{i.advanceTime(e)}),!0}add(e){this.list.push(e)}remove(e){this.list.remove(e)}contains(e){return this.list.has(e)}clear(){this.list.clear()}}const De=new ua,w=new Ho,D=new _a,R=new Jo,v=new Ca,Q=new Er,d=new Er,B=new Ba,T=new Fo;let E,K,se,S,js,Gs,fi={avif:!1,webp:!1};function Ea(){return Promise.all([PIXI.detectAvif.test(),PIXI.detectWebp.test()]).then(([t,e])=>{fi.avif=t,fi.webp=e})}function La(t){let e={width:t.width,height:t.height,view:t.canvas,backgroundColor:t.backgroundColor,autoResize:!0,antialias:!0,resolution:t.resolution};const i=PIXI.autoDetectRenderer(e);return $(t.canvas)&&document.body.appendChild(i.view),i}function Oa(t){return Gs=t,T.platform=t.config.name,js=t.launchTime,q.initialize(),S=w.get("context"),Promise.all([S.initialize(),Ea()])}function Aa(t,e){E=e,S.ID=ee(t);let i=c(t,"enter");E.minWidth=l(t,"minWidth",0),E.minHeight=l(t,"minHeight",0),E.width=l(t,"width",800),E.height=l(t,"height",600),E.resolution=l(t,"resolution",1),E.backgroundColor=l(t,"backgroundColor",0),K=La(E);for(let n=0;n<t.attributes.length;n++){let r=t.attributes[n].name;S[r]===void 0&&(S[r]=t.attributes[n].value)}const s=R.api;for(let n in s)S[n]=s[n];S.getHudLanguage(),S.printEngineVersion(),Gs.opid=(S.OPERATOR||"").toUpperCase(),Gs.gameid=S.ID,Na(),se=new PIXI.Container,se.name="world",se.addChild(D.sceneContainer),se.addChild(D.overlayContainer),se.pivot.set(E.width/2,E.height/2),z(t.querySelector("scenes"),(n,r)=>{D.register(n)}),z(t.querySelector("services"),(n,r)=>{let o=v.get(n.nodeName);o||console.log("service "+n.nodeName+" not found"),o.configure(n)}),v.startup(),D.replace(i),PIXI.Ticker.shared.maxFPS=l(t,"maxFPS",59.99),PIXI.Ticker.shared.minFPS=l(t,"minFPS",55),PIXI.Ticker.shared.add(Da),PIXI.Ticker.shared.autoStart=!0}function Da(t){PIXI.Ticker.shared.elapsedMS,B.advanceTime(t),K.render(se)}function Na(){if(navigator.userAgent.indexOf("Android")>-1&&!(navigator.userAgent.indexOf("Chrome")>-1)){let e=K.plugins.interaction;window.document.removeEventListener("mousemove",e.onMouseMove,!0),e.interactionDOMElement.removeEventListener("mousedown",e.onMouseDown,!0),e.interactionDOMElement.removeEventListener("mouseout",e.onMouseOut,!0)}}function Ra(t){let e="",i=0;for(let s in t)t.hasOwnProperty(s)&&(i++&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]))}let ti;function Ma(){if(ti===void 0)try{ti=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{ti=!1}return ti}let rr=[];class Rr{constructor(e=!1){this.isXDR=!1,e&&Ma()==!1?(this.client=new XDomainRequest,this.client.status=200,this.client.statusText="XDomainRequest does not support statusText",this.client.onprogress=()=>{},this.client.setRequestHeader=()=>{},this.isXDR=!0,rr.push(this.client)):this.client=new XMLHttpRequest}get(e,i){return this.client.open("GET",e),i&&(this.client.responseType="json"),this.send()}post(e,i,s){return i&&this.client.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s&&(this.client.responseType="json"),this.client.open("POST",e),this.send(i)}afterDone(){this.isXDR&&je(rr,this.client)}send(e){return new Promise((i,s)=>{setTimeout(()=>{e?this.client.send(Ra(e)):this.client.send()},0),this.client.onload=()=>{this.afterDone(),this.client.status>=200&&this.client.status<300?i(this.client):s(new Error(this.client.statusText))},this.client.ontimeout=()=>{this.afterDone(),s(new Error("Request timeout"))},this.client.onerror=n=>{this.afterDone(),s(new Error(n.toString()))}})}}function Dn(t,e){return new Rr(!0).get(t)}function Nn(t){let e=t||"",i=e.split("."),s=i.length;return s>1?`${i[s-2]}.${i[s-1]}`:e}function Wa(t){return T.ie&&T.ieVersion<10?Wo(t.responseText):t.responseXML.documentElement}function Fa(t){t.bootstrap=()=>{let e=t.config;R.downloadApi().then(()=>{Oa(t).then(()=>{let i=S.resolve(e.layout+"/{{LANGUAGE}}.min.xml");i=S.applyTimeVersion(i),new Rr().get("layout/"+i).then(s=>{let n=Wa(s);Aa(n,{canvas:document.querySelector("#stage")})}).catch(s=>{q.exception({name:s.name,description:s.message,fatal:!0,extraInfo:s})})}).catch(i=>{alert(i)})})}}const Mr="events:errorpopup:open",Rn="events:errorpopup:close",fs=11;let Rt=document.getElementById("errorDialog"),ii=document.getElementsByClassName("close")[0],As=document.getElementById("historyContainer"),or=document.getElementsByClassName("closeHistory")[0],Bt,lt,Ds,Ns,Rs,ar=0,lr=0,Mn=!1;function Ie(t){if(lt===void 0||t!=null){let e=v.get("symbolService");t!=null?lt=e.multiSize[t].height:lt=e.size.height,lt==null&&(lt=e.multiSize[0].height)}return lt}function Ct(){if(Bt===void 0){let t=v.get("symbolService");Bt=t.size.width,Bt==null&&t.multiSize!=null&&(Bt=t.multiSize[0].width)}return Bt}function jt(t){return t===void 0?ar:(ar=t,t)}function Xs(t){return t===void 0?lr:(lr=t,t)}function P(){return Ds===void 0&&(Ds=w.get("user")),Ds}function x(){return Ns===void 0&&(Ns=w.get("context")),Ns}function xe(){return x().NUM_OF_COLUMN}function Wn(){return x().NUM_OF_ROW}function Ha(t){P().symbols=t}function ka(){return P().symbols}function pt(t,e,i=!1,s){return j(t,e,i,!0,s)}function j(t,e,i=!1,s=!1,n){return v.get("soundService").play(t,e,i,s,n)}function bt(t){if(!t)return;v.get("soundService").stop(t.soundId)}function Xe(t="button"){j(t,"default",!0)}function Ua(){return v.get("netService")}function H(){return v.get("widgetService")}function ms(t){return Rs===void 0&&(Rs=v.get("textService")),Rs.translate(t)}function F(t){return ms("{{"+t+"}}")}function $a(){if(!Mn&&As){const e=()=>{As.style.display="block";let s=document.getElementById("historyFrame"),n=()=>{or.removeEventListener("click",n,!1),As.style.display="none",s.src=""};s.src=x().historyUrl,or.addEventListener("click",n,!1)},i=()=>{Gt("Network Error",0,!0)};var t=new Image;t.onload=e,t.onerror=i,console.log(x().historyUrlDomain+"x.png?d="+escape(Date())),t.src=x().historyUrlDomain+"x.png?d="+escape(Date())}}function Gt(t,e,i){if(!Mn)if(Rt){Rt.style.display="block";let s=document.getElementById("errormessage"),n=document.getElementById("errorcode");if(s.innerHTML=t,n.innerHTML=He(e,3),i||Xa(e)){Ga();let r=()=>{Ya({code:e})};ii.style.display!=="none"&&(ii.style.display="none",s.parentElement.appendChild(za(F("ok"),r)))}else{let r=()=>{switch(ii.removeEventListener("click",r,!1),Rt.style.display="none",e){case 0:case 5:case 7:case 14:Ys();break;case 20:case 21:case 24:Ys(!0);break;case 27:qa()}d.emit(Rn,{code:e})};ii.addEventListener("click",r,!1),d.emit(Mr,{code:e})}}else alert(t)}function Va(t,e){if(Rt&&Rt.style.display==="block"){let i=document.getElementById("errormessage");i.innerHTML=t}else Gt(t,e)}function Wr(){let t=S.collapsingBonusID;return t||""}function bs(){return S.isProgressiveJackpot==="true"}function ja(){let t=S.jackpotInterval;return t?+t:3e4}function Ga(){let t=v.get("keyboardService");t&&t.shutdown(),P().stopAutoSpin(),D.current.id==="main"&&(D.current.exit(),D.replace("main"))}function Xa(t){return parseInt(t)!==10&&parseInt(t)!==29&&!x().loginUrl&&(!x().LOBBY_URL||x().HIDE_LOBBY==="1")}function Ya(t){t&&(d.emit(Rn,t),window.open("","_self"),self.close(),Va(F("closegame"),t.code),Mn=!0)}function za(t,e){let i=document.createElement("div"),s=document.createElement("span");return s.innerHTML=t,s.className="button",i.className="buttons",i.appendChild(s),s.addEventListener("click",()=>{i.parentElement&&i.parentElement.removeChild(i),e&&e()},!1),i}function qa(){window.close(),setTimeout(()=>Ys(!0),50)}function Ys(t=!1){x().loginUrl&&x().loginUrl!==""&&!t?window.open(x().loginUrl,"_self"):x().HIDE_LOBBY==="0"&&x().LOBBY_URL&&x().LOBBY_URL!==""&&window.open(x().realLobbyUrl,"_self")}function ze(t="0",e){t===""&&(t="0"),Gt(ms(`{{err_${He(t,3)}}}`),t,e)}function hr(t){let e=R.json("gamefolder");return e&&e[t]?e[t]:t}function Fr(t,e){if(kt(t,"frsum")){let n=l(t,"frsum");P().froundSum=n}return kt(t,"expired")&&(P().froundExpired=c(t,"expired")==="1"),e}function Hr(t){if(t.tagName==="error")return{success:!1,data:{code:l(t,"code"),message:fe(t)}};{let e=t.querySelector("bonus"),i=t.querySelector("wheels"),s=Be(i,"rows"),n=t.querySelector("bonusposition"),r=s.length&&S.bonusAsWinlinesRow!=="true";return{success:!0,data:Fr(t,{win:new Decimal(fe(t.querySelector("win"))),balance:new Decimal(fe(t.querySelector("balance"))),multiplier:l(t,"multiplier",1),wheels:Za(i,s),winLines:ur(t.querySelector("winposition")),bonusPosition:r?Ja(n,s):ur(n),bonusID:ee(e,void 0),bonusKey:fe(e,void 0),bonus:e,data:t,fround:Ka(t)})}}}function Ka(t){let e=t.querySelector("fround");if(e)return{round:l(e,"round"),finished:c(e,"isfinished")==="1"}}function ur(t){let e=[];return z(t,(i,s)=>{let n=[],r=Lr(fe(i).split(","),o=>parseInt(o)-1);for(let o=0;o<r.length;o++)r[o]>=0&&n.push([o,r[o]]);e.push({index:l(i,"line"),win:l(i,"win"),multiplier:l(i,"mul"),positions:n,type:c(i,"type")})}),e}function Ja(t,e){let i=[];return z(t,(s,n)=>{let r=[],o=Lr(fe(s).split(","),h=>parseInt(h)),a=[];for(let h=0;h<e.length;h++){a=o.splice(0,e[h]);for(let u=0;u<a.length;u++)a[u]>0&&r.push([h,u])}i.push({index:l(s,"line"),win:l(s,"win"),multiplier:l(s,"mul"),positions:r,type:c(s,"type")})}),i}function Za(t,e=[]){let i=Be(t,"val");if(e.length!==xe())return ea(3,i,parseInt);let s=[];for(let n=0;n<e.length;n++)s.push(i.splice(0,e[n]));return s}const Qa="1";class el{constructor(){this.restoreBonus=!1,this.bonusBet=!1,this.autoSpinValues=[100,75,50,25,10],this.autoSpin=10,this._betValueIndex=0,this._multiplierIndex=0,this.maxBetRevertIndex=0,this.isTurbo=!1,this.accountName="Funplay",this.displayName="Funplay",this.funplay=!0,this.currency="RMB",this.balance=new Decimal(0),this.winAmount=new Decimal(0),this.bet={lines:0,credits:0,amount:0,multiplier:1}}setDefaultBet(){let e=S.defaultBet;if(e=e?JSON.parse(e):{},!e||e[this.currency]===void 0)this.betValueIndex=0;else{let i=this.betValues.indexOf(e[this.currency]);this.betValueIndex=Math.max(0,i)}}setMaxBet(){this.betValueIndex=this.betValues.length-1}get isMaxBet(){return this.displayedBetIndex===this.betValues.length-1}set multiplierIndex(e){this._multiplierIndex=e,this.bet.multiplier=this.multiplierValues[e]}get multiplierIndex(){return this._multiplierIndex}set betValueIndex(e){this._betValueIndex=e,this.bet.amount=this.betValues[e]}get betValueIndex(){return this._betValueIndex}set betValue(e){this.betValueIndex=Math.max(0,this.betValues.indexOf(e))}get betValue(){return this.bet.amount}get froundBet(){if(this.fround)return this.fround.bet!==void 0?this.fround.bet:l(this.fround,"bet",0)}get froundMul(){if(this.fround){if(this.fround.multiplier!==void 0){let e=this.fround.multiplier;return this.multiplierValues.indexOf(e)<0&&(e=this.multiplierValues[0]),e}return l(this.fround,"mul",1)}else return}get froundTotalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.froundBet)).times(this.froundMul)}get froundBetIndex(){return Math.max(this.betValues.indexOf(this.froundBet))}get froundMultiplierIndex(){return Math.max(this.multiplierValues.indexOf(this.froundMul),0)}get totalBet(){return new Decimal(this.linesCredits).times(new Decimal(this.bet.amount)).times(this.bonusBet?2:1).times(this.bet.multiplier).times(this.bet.betLevel?this.bet.betLevel:1)}get displayedMultiplier(){return this.froundOn?this.froundMul:this.bet.multiplier}get displayedBetAmount(){return this.froundOn?this.froundBet:this.bet.amount}get displayedTotalBet(){return this.froundOn?this.froundTotalBet:this.totalBet}get linesCredits(){return this.bet.credits>0?this.bet.credits:this.bet.lines}get displayedBetIndex(){return this.froundOn?this.froundBetIndex:this.betValueIndex}get displayedMultiplierIndex(){return this.froundOn?this.froundMultiplierIndex:this._multiplierIndex}get isDoubleUp(){return this.bonus&&this.bonus.id===Qa}checkAutoSpinConditions(){if(!this.autoSpinSettings||!this.autoSpinSettings.inAutoSpins)return!1;let e=new Decimal(0),i=this.balance.minus(this.autoSpinSettings.startBalance);i.lt(0)&&(e=i.dividedBy(this.totalBet).abs());let s=this.bonus!==void 0&&this.bonus!==null&&this.bonus.id!==Wr();return this.autoSpin===0||this.autoSpinSettings.stopAtFeature&&s||this.autoSpinSettings.stopAtWin>0&&this.winAmount.gt(this.autoSpinSettings.stopAtWin)||this.autoSpinSettings.stopAtBalance>0&&i.gte(this.autoSpinSettings.stopAtBalance)||this.autoSpinSettings.stopAtTotalBet>0&&e.gte(this.autoSpinSettings.stopAtTotalBet)||this.autoSpinSettings.stopAtCustom>0&&i.lte(-this.autoSpinSettings.stopAtCustom)?(this.stopAutoSpin(),!1):!0}stopAutoSpin(){this.isAutoSpinOn&&(this.autoSpinSettings.inAutoSpins=!1)}get isAutoSpinOn(){return this.autoSpinSettings&&this.autoSpinSettings.inAutoSpins}}var tl=Object.defineProperty,il=Object.getOwnPropertyDescriptor,sl=(t,e,i,s)=>{for(var n=s>1?void 0:s?il(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&tl(e,i,n),n};const nl="events:reel:slow",rl="events:reel:normal";let mi=class{constructor(){this.acceleration=2,this.deceleration=2,this.stopacceleration=2,this.minSpeed=10,this.maxSpeed=60,this.duration=300,this._frameToStop=0,this.numberRandomize=1}advanceTime(e){if(this.enabled){try{this.getSpeed(),this.move(this.currentSpeed),this.addAndRemoveSymbols(),this._state==2&&Math.abs(this.currentSpeed-this.stopSpeed)<.01&&(this.stopSpeed=this.currentStopSpeed,this.displayReel(),this.cancel(),this.resolve())}catch{this.reject&&this.reject({code:fs,message:""})}return!0}}displayReel(){this.reel.display()}getSpeed(){if(this._state===3)this.currentSpeed=this.minSpeed;else if(this._state===4)d.emit(rl,this.reel),this.currentSpeed+=this.currentAcc,this._state=0;else if(this._state===0)this.currentSpeed+=this.currentAcc;else if(this._state===1)this.stopDistance-=this.currentSpeed,this.readyToStop();else if(this._state===2)this.currentSpeed-=this.currentAcc;else return 0;return this.currentSpeed=Math.min(this.currentSpeed,this.maxSpeed),this.currentSpeed}play(e){this.enabled=!0,this._state=0,this.reel=e,this.currentSpeed=this.startSpeed,this.currentAcc=this.acceleration,B.add(this),this.reel.options.restrictedSymbols&&this.reel.options.slowRestriction&&(this.slowRestrictedSymbols=this.reel.options.restrictedSymbols.split(","))}stop(e){if(this.slowStopping=!1,!this.enabled)return Promise.resolve();if(this._state===3)this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0;else if(this.slowRestrictedSymbols){for(let i=0;i<this.slowRestrictedSymbols.length;i++)if(e.indexOf(Number(this.slowRestrictedSymbols[i]))>=0){this.stopSpeed=this.stopSpeed*this.deceleration,this.slowStopping=!0,this.reel.options.slowSound&&pt(this.reel.options.slowSound,"default",!0);break}}return this.reel.addSymbolsAtTop(e,i=>i.idle()),this.stopDistance=this.getStopDistance(),this.readyToStop(),new Promise((i,s)=>{this.resolve=i,this.reject=s})}getStopDistance(){return-this.reel.topSymbol.y+this.reel.getTopSymbolY()}readyToStop(){this._frameToStop=0,this._state=1;var e=this.distanceToStop();this.stopDistance<=e&&(this.currentSpeed=this.speedToStop(),this._state=2)}cancel(){this.enabled=!1,B.remove(this)}move(e){this.reel.symbolContainer.children.forEach(i=>{i.y+=e})}addAndRemoveSymbols(){let e=this.reel.viewport;if(this.reel.topSymbol.y>=e.y){let s=this.reel.pickMany(this.numberRandomize);if(this.slowRestrictedSymbols){if(this._state===0&&this.slowRestrictedSymbols.indexOf(s[0].toString())>=0)this._state=3,this.currentSpeed=this.minSpeed,d.emit(nl,this.reel),this.reel.options.slowSound&&pt(this.reel.options.slowSound,"default",!0);else if(this._state===3){let n=!1;for(let r=0;r<this.slowRestrictedSymbols.length;r++){let o=this.reel.symbolContainer.getSymbolIndex(Number(this.slowRestrictedSymbols[r]));o>=0&&this.reel.symbolContainer.get(o).y>=e.y+Wn()*Ie()&&(n=!0)}n&&(this._state=4)}}this.reel.addSymbolsAtTop(s,n=>n.spin())}this.reel.removeOutsideSymbols()}speedToStop(){for(var e=this.stopDistance,i=this.stopSpeed,s=0,n=0;s<=e;)s+=i,i+=this.slowStopping?this.deceleration:this.stopacceleration,n++;let r=(e-n*this.stopSpeed)*2/(n*(n-1));return this.currentAcc=r,this.stopSpeed+n*r}distanceToStop(){for(var e=this.maxSpeed,i=0;e>=this.stopSpeed;)e-=this.slowStopping?this.deceleration:this.stopacceleration,i+=e;return i}static create(e){let i=new mi;return i.maxSpeed=l(e,"max",60),i.minSpeed=l(e,"min",10),i.startSpeed=l(e,"startSpeed",0),i.stopSpeed=l(e,"stopSpeed",0),i.acceleration=l(e,"acceleration",2),i.deceleration=l(e,"deceleration",2),i.stopacceleration=l(e,"stopacceleration",i.acceleration),i.duration=l(e,"duration",300),i.numberRandomize=l(e,"numberRandomize",1),i.currentStopSpeed=i.stopSpeed,i}};mi=sl([f({tag:"animator:inback"})],mi);function bi(t){let e=Object.create(null);return t=t.trim().replace(/^(\?|#|&)/,""),t&&t.split("&").forEach(i=>{let s=i.replace(/\+/g," ").split("="),n=s.shift(),r=s.length>0?s.join("="):void 0;n=decodeURIComponent(n),r=r===void 0?null:decodeURIComponent(r),e[n]===void 0?e[n]=r:Array.isArray(e[n])?e[n].push(r):e[n]=[e[n],r]}),e}function kr(t){let e="",i=0;for(let s in t)t[s]&&(i++&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function ol(t){return t===void 0&&(t=gs()),`${location.protocol}//${location.host}${location.pathname}?`+kr(t)}function gs(){return bi(location.search)}function al(t,e){let i=gs();return i[t]=e,ol(i)}function ll(t,e){let i=gs();return i[t]?i[t]:e}class cr{constructor(e){e===void 0&&(e=location.toString());let i=e.indexOf("?"),s=i>0?e.substr(i+1):"";this.front=i>0?e.substr(0,i):e,this.queryString=bi(s)}get search(){let e=kr(this.queryString);return e?"?"+e:""}set search(e){this.queryString=bi(e)}toString(){let e=this.search;return this.front+e}getParameter(e,i){return this.queryString[e]?this.queryString[e]:i}setParameter(e,i){return this.queryString[e]=i,this}}function Ms(t,e=!1){let i=document.cookie?document.cookie.split(";"):[],s=/(%[0-9A-Z]{2})+/g,n;for(let r of i){let o=r.split("="),a=o.slice(1).join("=");a.charAt(0)==='"'&&(a=a.slice(1,-1));try{let h=o[0].replace(s,decodeURIComponent);if(e&&(h=h.replace(/ +/,"")),a=a.replace(s,decodeURIComponent),this.json)try{a=JSON.parse(a)}catch{}if(t===h){n=a;break}t||(n[h]=a)}catch{}}return n}const we=class we{};we.English="en",we.Chinese="cs",we.Vietnamese="vn",we.Thai="th",we.Khmer="kh",we.Indonesian="id",we.Korean="kr",we.Japanese="jp",we.Turkish="tr",we.Portuguese="pt";let N=we;class hl{constructor(){this.LANGUAGE=N.English,this.HUDLANG=N.English}initialize(){return new Promise((e,i)=>{this.LANGUAGE=this.tryGetParameter("lang",N.English),this.DOMAIN=Nn(location.hostname),e()})}getHudLanguage(){return this.hudLang&&(this.HUDLANG=this.hudLang.indexOf(this.LANGUAGE)>-1?this.LANGUAGE:N.English),this.HUDLANG}tryGetParameter(e,i){return $(this.queryString)&&(this.queryString=gs()),this.queryString[e]?this.queryString[e]:i}resolve(e,i){let s=Bo(this,i);for(let n in s)s[n]&&Ir(s[n])&&(e=e.replace(`{{${n}}}`,s[n]));return e}printEngineVersion(){this.engineVersion&&console.log("Guitarist "+this.engineVersion)}applyTimeVersion(e){return e+"?v="+(this.publishTime||Date.now().toString())}}class Ur extends hl{constructor(){super(...arguments),this.HELP_URL=null}initialize(){if(this.configureLanguage(),this.configureFunplay(),this.configureToken(),this.configureDomain(),this.BRAND=this.tryGetParameter("brand"),this.OPERATOR=this.tryGetParameter("op"),this.AUTHENTICATED=this.tryGetParameter("auth","0"),this.HIDE_LOBBY=this.tryGetParameter("hidelobby","0"),this.HIDE_FULLSCREEN=this.tryGetParameter("hidefullscreen"),this.CHEAT=this.tryGetParameter("cheat"),this.CURRENCY_SYMBOL=this.tryGetParameter("currencySymbol","0")==="1",this.AUTHENTICATED==="1"){let e=P();e.accountName=e.displayName=this.tryGetParameter("username")}return this.loadUrlsConfig(this.tryGetParameter("config")).then(e=>{this.LOGIN_URL=e.loginURL,this.HOME_URL=e.homeURL,this.FUNDS_URL=e.fundsURL,this.LOBBY_URL=e.lobbyURL,this.LIVECHAT_URL=e.livechatURL,this.HIDE_LOBBY=e.hidelobby,e.currencySymbol&&(this.CURRENCY_SYMBOL=!0)}).then(()=>this.verify())}initActitvityTimer(){this.activeTimeout=0,this.inactiveTimeout=0;let e=R.json("configcommons");e&&(e.activeTimeout&&(this.activeTimeout=e.activeTimeout,this.startActivityTimer()),e.inactiveTimeout&&(this.inactiveTimeout=e.inactiveTimeout,this.startInactivityTimer()))}startInactivityTimer(){this.inactiveTimer=this.startTimer(this.inactiveTimer,this.inactiveTimeout,()=>this.inactivityTimesUp())}startActivityTimer(){this.activeTimer=this.startTimer(this.activeTimer,this.activeTimeout,()=>this.activityTimesUp()),this.sessionTimestamp=Ut(),this.sessionUserBalance=P().balance}startTimer(e,i,s){return i>0&&(this.clearTimer(e),e=setTimeout(()=>s(),i*6e4)),e}clearTimer(e){e&&clearTimeout(e)}activityTimesUp(){if(D.current.checkExtendActivityTimesUp){this.isActivityTimesUp=!0;return}this.isActivityTimesUp=!1;let e=P(),i=F("err_998"),s=sa(Ut()-this.sessionTimestamp),n=He(s.getUTCHours(),2)+":"+He(s.getUTCMinutes(),2)+":"+He(s.getUTCSeconds(),2),r=e.balance.minus(this.sessionUserBalance),o=r.lt(0)?F("youvelost"):F("youvewon");o+=e.currency+" "+it(de(r.abs())),i=i.replace("%time%",n).replace("%winlose%",o),Gt(i,"998",!0)}inactivityTimesUp(){let e=F("err_999").replace("%s%",this.inactiveTimeout);Gt(e,"999",!0)}configureLanguage(){let e=this.tryGetParameter("lang",N.English)||Ms("lang");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e=N.English;break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e=N.Chinese;break;case e.indexOf("th")>=0:e=N.Thai;break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e=N.Vietnamese;break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e=N.Korean;break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e=N.Khmer;break;case e.indexOf("id")>=0:e=N.Indonesian;break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e=N.Japanese;break;case e.indexOf("tr")>=0:e=N.Turkish;break;case e.indexOf("pt")>=0:case e.indexOf("br")>=0:e=N.Portuguese;break;default:e=N.English}this.LANGUAGE=e}configureFunplay(){this.ANONYMOUS=this.FUNPLAY=this.tryGetParameter("fun","1")==="1"}configureToken(){this.TOKEN=this.tryGetParameter("token")||this.tryGetParameter("s")||Ms("g")||Ms("s")}configureDomain(){this.DOMAIN_FULL=location.hostname,this.DOMAIN=Nn(this.DOMAIN_FULL),this.URL_DOMAIN=this.DOMAIN,this.DOMAIN==="cloudfront.net"&&(this.DOMAIN="gpiops.com"),this.DOMAIN=this.tryGetParameter("domainlink",this.DOMAIN)}loadUrlsConfig(e){let i={loginURL:this.tryGetParameter("loginURL"),homeURL:this.tryGetParameter("homeURL"),fundsURL:this.tryGetParameter("fundsURL")||this.tryGetParameter("FundURL"),lobbyURL:this.tryGetParameter("lobbyURL"),livechatURL:this.tryGetParameter("livechatURL"),hidelobby:this.tryGetParameter("hidelobby","0"),currencySymbol:this.tryGetParameter("currencySymbol","0")==="1"};return $(e)?new Promise((s,n)=>{s(i)}):Dn(e).then(s=>{let n;try{n=JSON.parse(s.responseText)}catch{return console.warn("error in parse config.json"),i}return{loginURL:this.applyDomain(n.loginURL),homeURL:this.applyDomain(n.homeURL),fundsURL:this.applyDomain(n.fundsURL),lobbyURL:this.applyDomain(n.lobbyURL),livechatURL:this.applyDomain(n.livechatURL),hidelobby:n.hidelobby?String(n.hidelobby):"0",currencySymbol:n.currencySymbol}}).catch(s=>(console.warn("error in get config.json"),i))}applyDomain(e){if(e)return e.replace("[%%DOMAINLINK%%]",this.DOMAIN).replace("[%%URLDOMAIN%%]",this.URL_DOMAIN).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL)}verify(){return new Promise((e,i)=>{$(this.OPERATOR)&&i("The operator parameter is missing!"),!this.FUNPLAY&&$(this.TOKEN)?window.location.href=this.loginUrl:e()})}getDefaultLoginURL(){if(this.OPERATOR==="w88"&&this.defaultLoginURL)return this.defaultLoginURL}get loginUrl(){let e=this.applyDomain(this.LOGIN_URL||this.getDefaultLoginURL());return e?`${e}?url=`+encodeURIComponent(al("fun","0")):this.realLobbyUrl}get hasLobbyUrl(){return this.LOBBY_URL||this.defaultLobbyUrl}get realLobbyUrl(){if(this._realLobbyUrl===void 0){if(this.HIDE_LOBBY==="1")return this._realLobbyUrl="",this._realLobbyUrl;let e=this.applyDomain(this.LOBBY_URL||"//"+this.defaultLobbyUrl),i=new cr(e);i.search||(i.search=location.search),!this.FUNPLAY&&!$(this.USER_ID)&&(ll("s")?i.setParameter("s",this.USER_ID):i.setParameter("token",this.USER_ID)),this._realLobbyUrl=i.toString()}return this._realLobbyUrl}get realPlayUrl(){let e=new cr;return e.setParameter("fun","0"),this.TOKEN?e.toString():this.loginUrl}get livechatUrl(){let e=P();return this.LIVECHAT_URL?this.applyDomain(this.LIVECHAT_URL).replace("[%%MEMBERID%%]",this.FUNPLAY?"0":e.accountName).replace("[%%DOMAINFULL%%]",this.DOMAIN_FULL).replace("[%%LANG%%]",this.LANGUAGE):""}get homeURL(){return this.applyDomain(this.HOME_URL||"//"+this.homeUrl)}get helpUrl(){if(this.HELP_URL===null){this.HELP_URL="";let e=R.json("configcommons");if(e&&e.help){let i=e.help.url,s=e.help.games[this.ID];i&&s&&(this.HELP_URL=i.replace("[%%GAME%%]",s))}this.HELP_URL=this.HELP_URL.replace("[%%LANG%%]",this.LANGUAGE)}return this.applyDomain(this.HELP_URL)}get langFullName(){return ia(["en-us","id-id","ja-jp","km-kh","ko-kr","pt-br","th-th","tr-tr","vi-vn","zh-cn"],e=>e.indexOf(this.LANGUAGE)!==-1||this.LANGUAGE==="cs"&&e==="zh-cn")}get historyUrlDomain(){let e=R.json("configcommons");return this.applyDomain(e.historyUrl)}get historyUrl(){let e=this.historyVersion?`&ver=${this.historyVersion}`:"";return this.historyUrlDomain+"?key="+this.TOKEN+"&lang="+this.langFullName+e+"&gID="+this.gID}get hasFeatures(){return!(this.features&&this.features==="false")}get miniFooter(){return this.tryGetParameter("p")==="mini"&&this.tryGetParameter("footer")==="1"}get isWinWays(){return this.winWays&&this.winWays!==""}get isMultiplierDefaultLastIndex(){return this.multiplierDefaultIndex&&this.multiplierDefaultIndex==="last"}get multiplierAsCreditBet(){return this.creditBet==="true"}get isVibrationActivated(){return this.vibrationActivated==="true"}get mockFroundToggle(){return this.tryGetParameter("mfr")==="1"&&this.FUNPLAY&&P().demo==="1"}checkActivityTimesUp(){this.isActivityTimesUp&&this.activityTimesUp()}}let ul=class extends Ur{constructor(){super(),this.NUM_OF_ROW=3,this.NUM_OF_COLUMN=5,this.PAYLINES=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,1,2,1,0],[2,1,0,1,2],[0,0,1,0,0],[2,2,1,2,2],[1,2,2,2,1],[1,0,0,0,1],[1,0,1,0,1],[1,2,1,2,1],[0,1,0,1,0],[2,1,2,1,2],[1,1,0,1,1],[1,1,2,1,1],[0,1,1,1,0],[2,1,1,1,2],[0,1,2,2,2],[2,1,0,0,0],[0,2,0,2,0],[2,0,2,0,2],[0,2,2,2,0],[2,0,0,0,2],[0,0,2,0,0],[2,2,0,2,2],[0,2,1,0,2],[2,0,1,2,0],[0,0,1,2,2],[2,2,1,0,0],[1,0,2,0,1],[1,2,0,2,1],[1,1,1,1,0],[1,1,1,1,2],[0,0,0,0,1],[2,2,2,2,1],[0,1,2,1,2],[2,1,0,1,0],[2,2,2,2,0],[0,0,0,0,2],[0,1,2,1,1],[2,1,0,1,1],[0,0,1,2,1],[2,2,1,0,1],[1,2,2,2,0],[1,0,0,0,2],[0,1,1,1,2],[2,1,1,1,0],[1,1,0,1,0],[1,1,2,1,2],[0,0,0,1,2]]}};function cl(t,e,i){return t<e?e:t>i?i:t}var pl=Object.defineProperty,dl=Object.getOwnPropertyDescriptor,fl=(t,e,i,s)=>{for(var n=s>1?void 0:s?dl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&pl(e,i,n),n};let gi=class extends ds{constructor(t){super(),this.options=t}activate(){this.deactivate();let t=v.get("soundService");this.playback=this.options.bgm?t.playBgm(this.options.name):t.play(this.options.name,this.options.channel,!1,this.options.softBgm),re(this.playback)&&t.setVolume(this.options.volume,this.playback.soundId)}deactivate(){!this.options.bgm&&re(this.playback)&&(v.get("soundService").stop(this.playback.soundId),this.playback=void 0)}static create(t,e){let i=I(t,"auto"),s=new gi({name:_n(t),volume:cl(l(t,"volume",1),0,1),channel:c(t,"channel","default"),bgm:I(t,"bgm",!1),softBgm:I(t,"softbgm",!1)});return i&&s.activate(),s}};gi=fl([f({tag:"sound"})],gi);function ve(t,e,i){let s=new t;return Fn(s,e,i)}function Fn(t,e,i){return he(e,{scene:i.scene,parent:t,context:i.context}),k(t,e,i),t}var ml=Object.defineProperty,bl=Object.getOwnPropertyDescriptor,gl=(t,e,i,s)=>{for(var n=s>1?void 0:s?bl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ml(e,i,n),n};let zs=class extends _{static create(t,e){let s=v.get("widgetService").get(ae(t,"name"));return Fn(s,t,e)}};zs=gl([f({tag:"widget"})],zs);class $r{constructor(){this.log=!1}initialize(){bi(location.search).log==="1"&&(this.log=!0)}track(e){if(this.log)switch(e.type){case U.Request:vl(e.data);break;case U.Response:yl(e.data);break;case U.Exception:Sl(e.data)}}}function vl(t){console.log(t.method,t.url)}function yl(t){console.log(t.data)}function Sl(t){console.log("Error: ",t.description,`
`,t.extraInfo)}var wl=Object.defineProperty,xl=Object.getOwnPropertyDescriptor,Il=(t,e,i,s)=>{for(var n=s>1?void 0:s?xl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&wl(e,i,n),n};let vi=class extends _{constructor(){super(...arguments),this.ccy=""}show(t,e,i){this.label.value=this.ccy+t.toFixed(2),e&&(this.x=e.x+(Ct()-this.width)/2,this.y=e.y+Ie()/4),i.addChild(this),this.visible=t>0&&e!==void 0}clear(){}static create(t,e){let i=ve(vi,t,e);return i.ccy=Tn(P().currency,x().CURRENCY_SYMBOL),i}};vi=Il([f({tag:"multiplier"})],vi);var Pl=Object.defineProperty,_l=Object.getOwnPropertyDescriptor,Cl=(t,e,i,s)=>{for(var n=s>1?void 0:s?_l(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Pl(e,i,n),n};let Ve=class extends _{static create(t,e){return ve(Ve,t,e)}};Ve=Cl([f({tag:"layer"})],Ve);var Tl=Object.defineProperty,Bl=Object.getOwnPropertyDescriptor,El=(t,e,i,s)=>{for(var n=s>1?void 0:s?Bl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Tl(e,i,n),n};const Ll={linear:TWEEN.Interpolation.Linear,curve:TWEEN.Interpolation.CatmullRom};function Ol(t){return{color:l(t,"color",0),colorRight:l(t,"colorRight",0),width:l(t,"width",1),border:l(t,"border",0),borderColor:l(t,"borderColor",0),borderColorRight:l(t,"borderColorRight",-1),borderBlur:l(t,"borderBlur",0),blur:l(t,"blur",0),blendMode:c(t,"blendMode"),portion:l(t,"portion",1.5),emitFrequency:l(t,"emitFrequency",1),emitSpeed:l(t,"emitSpeed",0),emitEndTime:l(t,"emitEndTime",0),emitOnTop:I(t,"emitOnTop",!1),direction:c(t,"direction","left"),lineOffsets:l(t,"lineOffsets",0),showAllLines:I(t,"showAllLines",!1),singleLine:I(t,"singleLine",!1),fade:l(t,"fade",0),alpha:l(t,"alpha",1),threshold:l(t,"threshold",1),segments:l(t,"segments",5),outline:l(t,"outline",1),outlineColor:l(t,"outlineColor",0),outlineBlur:l(t,"outlineBlur",1),glowColor:l(t,"glowColor",0),glowWidth:l(t,"glowWidth",1),glowBlur:l(t,"glowBlur",1),glowAlpha:l(t,"glowAlpha",1),interpolationFunc:Ll[c(t,"lineType","linear")]}}function Al(t){return{x:l(t,"x",0),y:l(t,"y",0),width:l(t,"width",xe()*(Ct()+jt())),height:l(t,"height",Wn()*Ie()),radius:l(t,"radius",0),color:l(t,"color",0),alpha:l(t,"alpha",.7)}}const ht=class ht extends _{constructor(e){super(),this.lines=[],this.symbolAnimGap=0,this.animTimers=[],this.numWinningCols=0,this.symbolService=v.get("symbolService"),this.options=e,this.btmContent=new Ve,this.addChild(this.btmContent),this.drawLines(),this.content=new Ve,this.addChild(this.content),this.initSymbolPrefabs(),this.hideLines()}initSymbolPrefabs(){this.symbolsPrefabs=[];for(let e=0;e<x().NUM_OF_COLUMN;e++){let i=[];for(let s=0;s<x().NUM_OF_ROW;s++)i.push(void 0);this.symbolsPrefabs.push(i)}}drawLines(){}showLines(e,i=!1,s=!0){this.hideLines(),this.hideSymbols(),this.symbols=[],this.animTimers=[];let n;for(let o of e)this.winningLine=o,this.showLine(o.index-1),n=o.animation,this.setupSymbols(o);this.options.fade&&ne(this.lineContent,this.options.fade);let r=w.get(ht.WINLINE_SYMBOLS_ADJUSTMENT);r&&r(this),s&&this.showSymbols(n,i)}redrawLines(){let e=this.getChildIndex(this.lineContent);this.removeChild(this.lineContent),this.lineContent.removeChildren(),this.lines=[],this.createJoins(),this.drawLines(),this.hideLines(),this.addChildAt(this.lineContent,e)}winlinesLoop(){}createJoins(){}showLine(e){let i=this.lines[e];i&&(i.visible=!0,i.activate())}setupSymbols(e){let i=w.get("winLineSetupSymbols");if(i){i(this,e);return}for(let s=0;s<e.positions.length;s++){let[n,r]=e.positions[s],o=this.symbolsPrefabs[n][r];if(o===void 0){let a=this.reels.getRegisterPoint(n,r);o=this.reels.getSymbol(n,r).clone(),o.col=n,o.row=r,o.x=a.x,o.y=a.y;let h=this.reels.getSymbolPos(n,r);for(let u of h)this.symbolsPrefabs[u.x][u.y]=o}this.symbols.indexOf(o)===-1&&this.symbols.push(o)}}showSymbols(e,i=!1){let s=r=>{r.reference.visible=!1,r.animate(e,i);let o=w.get("winLineSymbolStrategy");o?o({view:r.content})?this.content.addChild(r):this.btmContent.addChild(r):this.content.addChild(r),r.activate()},n=this.getSymbolAnimTimers();this.symbols.forEach(r=>{if(this.symbolAnimGap>0){let o=this.symbolAnimGap*n.indexOf(r.col);o>0?this.animTimers.push(setTimeout(()=>s(r),o)):s(r)}else s(r)})}getSymbolAnimTimers(){let e=[];if(this.symbolAnimGap>0){for(let i=0;i<this.symbols.length;i++){let s=this.symbols[i].col;e.indexOf(s)===-1&&e.push(s)}e.sort()}return this.numWinningCols=e.length,e}getRightMostSymbol(){let e=0,i;for(let s=0;s<this.symbols.length;s++)e<this.symbols[s].col&&(i=this.symbols[s]);return i}removeContent(){for(let e=0;e<this.animTimers.length;e++)clearTimeout(this.animTimers[e]);this.content.removeChildren(),this.btmContent.removeChildren()}hideLines(){for(let e of this.lines)e.visible=!1,e.deactivate()}hideSymbols(){this.symbols&&this.symbols.forEach(e=>e.reference.visible=!0),this.removeContent()}clear(){let e=[];for(let i=0;i<x().NUM_OF_COLUMN;i++)for(let s=0;s<x().NUM_OF_ROW;s++){let n=this.symbolsPrefabs[i][s];n&&e.indexOf(n)===-1&&(e.push(n),n.reference.visible=!0,this.symbolService.free(n))}this.initSymbolPrefabs(),this.removeContent(),this.hideLines(),this.symbols=void 0}resetSymbolPrefabs(){this.initSymbolPrefabs()}};ht.WINLINE_SHOW_ALL="all",ht.WINLINE_SHOW_ALL_ONCE="allonly",ht.WINLINE_SYMBOLS_ADJUSTMENT="winLineSymbolsAdjustment";let We=ht,V=class extends _{constructor(t){super(),this.options=t;let e=t.querySelector("multiplier");this.showMask=I(t,"mask");let i=w.get("multiplier");e&&(this.multiplier=i?i(e,{}):vi.create(e,{})),this.animationTimer=l(t,"timer",-1),this.mode=c(t,"mode"),this.animatedAll=I(t,"animatedAll",!0),this.animationAllTimer=l(t,"animationAllTimer",-1),this.showMask&&(this.maskOptions=Al(t.querySelector("mask"))),this.isWinningLine=!1}show(t,e=!1){this.forceEnd=!1,this.clear(),this.winlineSound=!1,this.winLines=t,this.silent=e,this.currentWinlineLoop=0,this.addChild(this.paylines),this.hasWinLines?(this.emit(V.EVENT_WIN_PANEL_SHOW),this.addMask(),this.displayNextLine(),this.emit(V.EVENT_START)):(this.silent||this.emit(V.EVENT_LOOP),this.paylines.winlinesLoop())}close(){this.isWinningLine&&this.emit(V.EVENT_WIN_PANEL_CLOSE),this.isWinningLine=!1,this.clear()}addMask(){if(this.showMask&&this.maskSprite===void 0){let t=Re(this.maskOptions.width,this.maskOptions.height,this.maskOptions.radius,this.maskOptions.color);t.position.set(this.maskOptions.x,this.maskOptions.y),t.alpha=this.maskOptions.alpha,this.addChildAt(t,0)}else this.showMask&&this.maskSprite&&(this.addChildAt(this.maskSprite,0),this.maskSprite.visible=!0)}clear(){this.maskSprite&&(this.maskSprite.visible=!1),this.multiplier&&this.multiplier.clear(),this.currentLineIndex=this.mode===We.WINLINE_SHOW_ALL?-2:-1,this.paylines.clear(),this.clearTimer(),this.removeChildren()}get hasWinLines(){return this.winLines&&this.winLines.length>0}get currentWinLine(){return this.winLines[this.currentLineIndex]}displayNextLine(){if(this.currentLineIndex++,this.currentLineIndex===this.winLines.length||this.mode===We.WINLINE_SHOW_ALL&&this.currentLineIndex===0||this.mode===We.WINLINE_SHOW_ALL_ONCE&&this.currentLineIndex>0){if(this.currentLineIndex=0,this.winlineSound=!1,this.silent||this.emit(V.EVENT_LOOP),this.paylines.winlinesLoop(),this.forceEnd){this.close(),this.emit(V.EVENT_END);return}if(this.winlinesLoop>0){if(this.currentWinlineLoop++,this.currentWinlineLoop>=this.winlinesLoop){this.forceEnd=!0,this.close(),this.emit(V.EVENT_END);return}this.winlineSound=this.symbolSoundLoop>0&&this.currentWinlineLoop>=this.symbolSoundLoop}}let t=this.currentLineIndex===-1||this.mode===We.WINLINE_SHOW_ALL_ONCE,e=t?this.winLines:[this.currentWinLine],i=!0;t&&(i=this.animatedAll),e.length===1&&e[0].index===0&&(i=!0),this.paylines.showLines(e,this.winlineSound,i),this.isWinningLine=!0,this.emit(V.EVENT_WINLINE,e);let s=this.updateMultiplier(t);this.animationTimer>0?(this.clearTimer(),this.startTimer(t||e.length===1&&e[0].index===0)):s.content.once("animationComplete",()=>this.displayNextLine())}updateMultiplier(t=!1){if(t)return this.paylines.symbols[0];let e=this.currentWinLine,i=v.get("multiplierService"),s=i?i.getSymbol(this.paylines.symbols):this.paylines.symbols[0];return this.multiplier&&this.multiplier.show(e.win,s,this),s}getWinLineHighestSymbol(t,e=-1){let i=-1;for(let s=0;s<t.positions.length;s++){let[n,r]=t.positions[s],o=Number(this.paylines.reels.getSymbol(n,r).index);i<o&&o!=e&&(i=o)}return i===-1?e:i}clearTimer(){clearTimeout(this.timer)}startTimer(t){let e=this.animationTimer+(this.paylines.numWinningCols-1)*this.paylines.symbolAnimGap;t&&this.animationAllTimer>=0&&(e=this.animationAllTimer),this.timer=setTimeout(()=>{this.displayNextLine()},e)}static create(t,e){let i=Dl(V,t,e);return z(t,(s,n)=>{s.nodeName==="mask"&&(c(s,"render")==="canvas"&&K.type===PIXI.RENDERER_TYPE.CANVAS?(i.maskSprite=Re(i.maskOptions.width,i.maskOptions.height,i.maskOptions.radius,i.maskOptions.color),i.maskSprite.position.set(i.maskOptions.x,i.maskOptions.y),i.maskSprite.alpha=i.maskOptions.alpha):c(s,"render")==="webgl"&&K.type===PIXI.RENDERER_TYPE.WEBGL&&(i.maskSprite=new PIXI.Sprite(R.resolve(c(s,"src"))),i.maskSprite.position.set(l(s,"x"),l(s,"y")),i.maskSprite.scale.set(l(s,"scale",1)),i.maskSprite.alpha=i.maskOptions.alpha))}),i}};V.EVENT_LOOP="loop";V.EVENT_WIN_PANEL_SHOW="show";V.EVENT_WIN_PANEL_CLOSE="stopped";V.EVENT_WINLINE="winline";V.EVENT_START="start";V.EVENT_END="end";V=El([f({tag:"winPanel"})],V);function Dl(t,e,i){let s=v.get("winLineService"),n=D.current.getComponentByTag("reels");n||(n=D.current.getComponentByID("reels"));let r=new t(e);return r.paylines=s.generate(n.reels),r.paylines.reels=n,r.paylines.symbolAnimGap=l(e,"symbolAnimGap",0),r.winlinesLoop=l(e,"winlinesLoop",5),r.symbolSoundLoop=l(e,"symbolSoundLoop",2),r.x=n.x,r.y=n.y,k(r,e,i),r}var Nl=Object.defineProperty,Rl=Object.getOwnPropertyDescriptor,Ml=(t,e,i,s)=>{for(var n=s>1?void 0:s?Rl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Nl(e,i,n),n};let Xt=class extends _{constructor(t,e,i,s,n,r,o=-1,a=-1){super(),this.content=new PIXI.Graphics,this.content.beginFill(i),n&&o<0&&a<0&&this.content.lineStyle(n,r),s?this.content.drawRoundedRect(0,0,t,e,s):this.content.drawRect(0,0,t,e),this.drawShadow(n,o,t,e),this.drawShadow(n,a,t,e,t,e),K.type!==PIXI.RENDERER_TYPE.WEBGL&&this.content.generateCanvasTexture?(this.canvasContent=new PIXI.Sprite(this.content.generateCanvasTexture(1,1)),this.addChild(this.canvasContent)):this.addChild(this.content)}set tint(t){t<0||(this.canvasContent?this.canvasContent.tint=t:this.content.tint=t)}drawShadow(t,e,i,s,n=0,r=0){e<0||(this.content.lineStyle(t,e),this.content.moveTo(n,r),this.content.lineTo(i,0),this.content.moveTo(n,r),this.content.lineTo(0,s))}static create(t,e){Te(t,"color",S.resolve(c(t,"color"))),Te(t,"innerShadow",S.resolve(c(t,"innerShadow")));let i=new Xt(l(t,"width",0),l(t,"height",0),l(t,"color",0),l(t,"radius",0),l(t,"border",0),l(t,"bcolor",0),l(t,"innerShadow",-1),l(t,"dropShadow",-1));return i.tint=l(t,"tint",-1),k(i,t,e),he(t,{scene:e.scene,parent:i,context:e.context}),i}};Xt=Ml([f({tag:"rectangle"})],Xt);var Wl=Object.defineProperty,Fl=Object.getOwnPropertyDescriptor,Hl=(t,e,i,s)=>{for(var n=s>1?void 0:s?Fl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Wl(e,i,n),n};let gt=class extends _{constructor(t,e,i,s){super(),this.content=new PIXI.Graphics,this.content.beginFill(e),i&&this.content.lineStyle(i,s),this.content.drawPolygon(t),this.addChild(this.content)}static create(t,e){let i=new gt(Be(t,"path"),l(t,"color",0),l(t,"border",0),l(t,"bcolor",0));return k(i,t,e),he(t,{scene:e.scene,parent:i,context:e.context}),i}};gt=Hl([f({tag:"polygon"})],gt);var kl=Object.defineProperty,Ul=Object.getOwnPropertyDescriptor,$l=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ul(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&kl(e,i,n),n};let qs=class extends ue{configure(t){this.options=t}translate(t){this.dict===void 0&&this.initDict();let e=Yo(t);for(let i=0;i<e.length;i++){let s=e[i];t=t.replace(`{{${s}}}`,this.dict[s])}return t}initDict(){if(this.dict!==void 0)return;let t=c(this.options,"resource").split(",");for(let e=0;e<t.length;e++)if(this.dict===void 0)this.dict=R.json(t[e]);else{let i=R.json(t[e]);for(let s in i)this.dict[s]=i[s]}}};qs=$l([f({tag:"textService",category:"service"})],qs);var Vl=Object.defineProperty,jl=Object.getOwnPropertyDescriptor,Gl=(t,e,i,s)=>{for(var n=s>1?void 0:s?jl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Vl(e,i,n),n};let Ks=class extends ue{configure(t){this.options=t}getSymbol(t){if(t.length===0)return;let e=c(this.options,"mode","last");if(e==="last")return Os(t);if(e==="middle"){let i=t.length,s=Math.floor(i/2);return i%2==0&&Os(t).col==xe()-1&&(s-=1),t[s]}else return e==="third"?t.length>2?t[2]:Os(t):t[0]}};Ks=Gl([f({tag:"multiplierService",category:"service"})],Ks);var Xl=Object.defineProperty,Yl=Object.getOwnPropertyDescriptor,zl=(t,e,i,s)=>{for(var n=s>1?void 0:s?Yl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Xl(e,i,n),n};let Js=class extends ue{constructor(){super(...arguments),this.adjustment={size:0,x:0,y:0}}configure(t){this.options=t,this.adjustment.x=l(t,"x",0),this.adjustment.y=l(t,"y",0),this.adjustment.size=l(t,"size",0)}};Js=zl([f({tag:"fontService",category:"service"})],Js);var ql=Object.defineProperty,Kl=Object.getOwnPropertyDescriptor,Jl=(t,e,i,s)=>{for(var n=s>1?void 0:s?Kl(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ql(e,i,n),n};let Zs=class extends ue{startup(){if(S){let t=S.LANGUAGE;[N.English,N.Japanese,N.Chinese].indexOf(t)===-1&&(t=N.English);let e=`assets/icons/icon192.${t}.jpg`;this.addLink("apple-touch-icon",e),this.addLink("apple-touch-startup-image",e)}}setTitle(){document.title=ms("{{gametitle}}")}addLink(t,e){var i=document.createElement("link");i.rel=t,i.href=e,document.head.appendChild(i)}};Zs=Jl([f({tag:"i18nService",category:"service"})],Zs);var Zl=Object.defineProperty,Ql=Object.getOwnPropertyDescriptor,Vr=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ql(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Zl(e,i,n),n};let yi=class extends ds{constructor(t){super(),this.tween=t}activate(){this.active!==!0&&(this.tween.start(),this.active=!0)}deactivate(){this.active!==!1&&(this.tween.stop(),this.active=!1)}static create(t,e){let i=_n(t),s=v.get("tweenService");if(s&&e.parent instanceof PIXI.DisplayObject){let n=new yi(s.create(i,e.parent,t));return I(t,"auto")&&n.activate(),n}}};yi=Vr([f({tag:"tween"})],yi);let Qs=class extends ue{constructor(){super(...arguments),this.tweens={}}register(t,e){this.tweens[t]=e}create(t,e,i){return this.tweens[t](e,i)}startup(){PIXI.Ticker.shared.add(this.update)}shutdown(){PIXI.Ticker.shared.remove(this.update)}update(){TWEEN.update()}};Qs=Vr([f({tag:"tweenService",category:"service"})],Qs);var eh=Object.defineProperty,th=Object.getOwnPropertyDescriptor,ih=(t,e,i,s)=>{for(var n=s>1?void 0:s?th(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&eh(e,i,n),n};let Si=class extends ue{configure(t){this.options=t}generate(){return sh(this.options,nh)}};Si=ih([f({tag:"winLineService",category:"service"})],Si);function sh(t,e){w.get("reels");let i=Ct(),s=Ie(),r=x().PAYLINES,o=r.length,a=Ol(t),h=[];for(let u=0;u<o;u++){let p=r[u],g=p.length,m=[];for(let A=0;A<g;A++){let L=p[A],G={x:jr(A)+i/2,y:Gr(L)+s/2};m.push(G)}m.length>=2&&(m.unshift({x:m[0].x-i/2,y:m[0].y}),m.push({x:m[m.length-1].x+i/2,y:m[m.length-1].y})),h.push(m)}return a.joints=h,new e(a)}class nh extends We{constructor(e){super(e),e.emitOnTop&&this.addChild(this.lineContent)}drawLines(){this.lineContent=new Ve,this.addChild(this.lineContent);for(let e of this.options.joints){let i=this.drawLine(e);this.lines.push(i),this.lineContent.addChild(i)}}drawLine(e){let i=new Ve;if(this.options.border>0){let n=this.joinLines(e,2*this.options.border+this.options.width,this.options.borderColor);if(i.addChild(n),this.options.borderBlur)if(K.type===PIXI.RENDERER_TYPE.WEBGL){let r=new PIXI.filters.BlurFilter;r.blur=this.options.borderBlur,n.filters=[r]}else n.alpha=this.options.borderBlur/80}let s=this.joinLines(e,this.options.width,this.options.color);return i.addChild(s),i}createJoins(){w.get("reels");let e=Ct(),i=Ie(),n=x().PAYLINES,r=n.length,o=[];for(let a=0;a<r;a++){let h=n[a],u=[];for(let p=0;p<h.length;p++){let g=h[p],m={x:jr(p)+e/2,y:Gr(g)+i/2};u.push(m)}u.length>=2&&(u.unshift({x:u[0].x-e/2,y:u[0].y}),u.push({x:u[u.length-1].x+e/2,y:u[u.length-1].y})),o.push(u)}this.options.joints=o}joinLines(e,i,s){let n=new PIXI.Graphics,r=e.length;if(n.lineStyle(i,s),K.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.blur>0){let o=new PIXI.filters.BlurFilter;o.blur=this.options.blur,n.filters=[o]}this.options.blendMode&&(this.options.blendMode==="screen"?n.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(n.blendMode=PIXI.BLEND_MODES.ADD)),this.options.alpha!==void 0&&this.options.alpha!==null&&(n.alpha=this.options.alpha);for(let o=0;o<r;o++){let a=e[o];o===0?n.moveTo(a.x,a.y):n.lineTo(a.x,a.y)}return n}}function jr(t){return t*(Ct()+jt())}function Gr(t){return t*(Ie()+Xs())}let ri=["VisibilityState","visibilitychange","Hidden"],Mt,Hn=[],kn=[];function rh(){if(!Mt){let t=["webkit","ms","o","moz","khtml"];for(let e of t)if(e+ri[2]in document)return Mt=e,Mt}}function Un(t){return Mt==null?ri[t].substring(0,1).toLowerCase()+ri[t].substring(1):Mt+ri[t]}function oh(t){return document[Un(t)]}function Xr(t){let e=t?Hn:kn,i=e.length;for(;i--;)e[i]()}function Ws(){Xr(!0)}function Fs(){Xr(!1)}function ah(){try{if(lh())document.addEventListener(Un(1),()=>{oh(2)?Fs():Ws()},!0);else if(document.addEventListener)window.addEventListener("focus",Ws,!0),window.addEventListener("blur",Fs,!0);else{let t=document.attachEvent;t&&(t("onfocusin",Ws),t("onfocusout",Fs))}}catch(t){console.error(t)}}function lh(){return Un(2)in document}function hh(t){Hn.push(t)}function uh(t){kn.push(t)}function ch(){Hn=[],kn=[]}function ph(){rh(),ah()}class dh{constructor(e=1,i="stage"){this.imageUrl="assets/swipeup.png",this.enabled=!0,this.uc=!1,this.dolfin=!1,this.chromeIOS=!1,this.iphone=!1,this.qq=!1,this.ios=!1,this.ipad=!1,this.safari=!1,this.vivonative=!1,this.initHeight=-1,this.canvasName=i,this.resolution=e;let s=window.navigator.userAgent;this.canvas=document.getElementById(i),this.ios=s.toLowerCase().indexOf("mac")>-1,this.ipad=s.toLowerCase().indexOf("ipad")>-1,this.skipper=s.toLowerCase().indexOf("qqbrowser")>-1||s.toLowerCase().indexOf("sony")&&s.toLowerCase().indexOf("ucbrowser")>-1,this.uc=s.toLowerCase().indexOf("ucbrowser")>-1,this.qq=this.isQQ(s),this.chromeIOS=s.toLowerCase().indexOf("crios")>-1,this.iphone=s.toLowerCase().indexOf("iphone")>-1,this.vivonative=s.toLowerCase().indexOf("vivobrowser")>-1;let n=/Chrome\/([0-9.]+)/.exec(s),r=null;n&&(r=/Chrome\/([0-9.]+)/.exec(s)[1]),this.dolfin=s.toLowerCase().indexOf("dolfin")>-1||r&&Number(r.split(".")[0])<34}isQQ(e){let i=e.toLowerCase().match(/chrom(e|ium)\/([0-9]+)\./);i=i?parseInt(i[2],10):!1;let s=e.match(/Mobile\/\w{5,}\sQQ\/(\d+[\.\d]+)/),n=window.innerWidth<780;return!!((i<45||s)&&n)}get isLandscape(){return window.innerHeight<=window.innerWidth}get isFullScreen(){let e=10;if(this.isLandscape||(e=8,this.skipper&&(e=4)),"standalone"in window.navigator&&window.navigator.standalone)return this.enabled=!1,!0;let i=Math.abs(this.canvas.width/this.resolution-window.innerWidth)<window.innerWidth/e,s=document.webkitCurrentFullScreenElement&&typeof document.webkitCurrentFullScreenElement<"u"||document.fullscreenElement!==null&&document.fullscreenElement!==void 0||document.mozFullScreenElement!==null&&document.mozFullScreenElement!==void 0||document.webkitFullscreenElement!==null&&document.webkitFullscreenElement!==void 0||document.msFullscreenElement!==null&&document.msFullscreenElement!==void 0;return i&&s}setFullscreen(){this.enabled&&(this.uc||this.dolfin||this.qq||this.vivonative||this.isFullScreen||(this.applyFullscreenAPI(),this.ios||window.scrollTo(0,1)))}addOverlay(){if(!window.addEventListener)return;let e=document.getElementById("swipeLayer");if(e){e.style.width!==this.canvas.style.width&&(e.style.width=this.canvas.style.width,e.style.marginLeft=this.canvas.style.marginLeft);return}let i=window.innerHeight*(this.chromeIOS?1:2),s=`<div id="swipeLayer" style="position: fixed; left:${this.canvas.style.marginLeft}; top:0; width:${this.canvas.style.width}; min-height:${i}px; height:${i}px; display:block; ">
</div>`;var n=document.createElement("div");if(n.innerHTML=s,e=n.firstChild,this.addEventListeners(e),this.canvas.parentElement.insertBefore(e,this.canvas),this.chromeIOS||document.getElementById("swipeBackground"))return;let r=`<div id="swipeBackground" style="position: relative; z-index:-1; left:0; top:0; width:${window.innerWidth}px; min-height:${i}px; height:${i}px; display:block; ">
</div>`;n=document.createElement("div"),n.innerHTML=r;let o=n.firstChild;this.addEventListeners(o),window.document.body.insertBefore(o,window.document.body.lastChild)}addEventListeners(e){e.addEventListener("touchstart",()=>{this.enabled=!1,this.removeOverlay()}),e.addEventListener("touchend",()=>{this.enabled=!0,window.scrollTo(0,1)}),e.addEventListener("touchcancel",()=>{this.enabled=!0,window.scrollTo(0,1)})}removeOverlay(){let e=document.getElementById("swipeLayer");e&&(e.parentElement.removeChild(e),this.chromeIOS||window.scrollTo(0,1))}applyFullscreenAPI(){if(this.isFullScreen)return;let e=window.document.documentElement,i=document.requestFullscreen||e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen||e.requestFullScreen||e.webkitCurrentRequestFullScreen;i&&i.call(e)}update(){!this.enabled||!this.ios||this.uc||this.qq||this.canvas.height==screen.width-20||this.canvas.width===window.innerWidth&&this.canvas.height===window.innerHeight||(this.isLandscape?this.addOverlay():this.removeOverlay())}}var fh=Object.defineProperty,mh=Object.getOwnPropertyDescriptor,bh=(t,e,i,s)=>{for(var n=s>1?void 0:s?mh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&fh(e,i,n),n};const en="notify:visibility.visible",tn="notify:visibility.hidden";let sn=class extends ue{configure(t){}startup(){ph(),hh(()=>{Q.emit(en)}),uh(()=>{Q.emit(tn)}),T.mobile&&(this.fullscreenAPI=new dh(E.resolution),this.fullscreenAPI.enabled=!1,B.add(this))}set fullScreenEnabled(t){this.fullscreenAPI&&(this.fullscreenAPI.enabled=t)}setDeviceFullscreen(){this.fullscreenAPI&&this.fullscreenAPI.setFullscreen()}shutdown(){B.remove(this),ch()}advanceTime(t){return this.fullscreenAPI.update(),!0}};sn=bh([f({tag:"deviceService",category:"service"})],sn);var gh=Object.defineProperty,vh=Object.getOwnPropertyDescriptor,yh=(t,e,i,s)=>{for(var n=s>1?void 0:s?vh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&gh(e,i,n),n};class Sh{constructor(){this.channels={}}lengthOfChannels(){return Object.keys(this.channels).length}lengthOfChannel(e){return $(this.channels[e])?0:Object.keys(this.channels[e]).length}exist(e,i){let s=this.channels[e];return re(s)&&re(s[i])}getPlaybackBySoundId(e){for(let i in this.channels){let s=this.channels[i];for(let n in s){let r=s[n];if(r.soundId===e)return r}}}add(e,i,s,n){let r=this.channels[e];$(r)&&(r={},this.channels[e]=r);let o={channelId:e,name:i,soundId:s,volume:1,softBgm:n};return r[i]=o,o}removeBySoundId(e){return this.removeBy(i=>i.soundId===e)}removeByName(e){return this.removeBy(i=>i.name===e)}removeBy(e){for(let i in this.channels){let s=this.channels[i];for(let n in s){let r=s[n];if(e(r))return delete s[n],To(s)&&delete this.channels[i],r}}}}let nn=class extends ue{constructor(){super(...arguments),this.howlers={},this._muted=!1,this._volume=1,this.audios={},this.scope="sounds",this.commonScope="commonsounds"}configure(t){let e=c(t,"resource");e!==this.commonScope&&(this.defaultScope=e,this.scope=this.defaultScope),this.softBgmValue=l(t,"softBgm",.3),this.channelManager=new Sh}get backgroundMusic(){return this.bgm}startup(){v.has("deviceService")||v.register("deviceService",sn).startup(),Q.on(en,()=>{this.ready&&!this.muted&&Howler.volume(this._volume)}),Q.on(tn,()=>{this.ready&&Howler.volume(0)})}shutdown(){Q.off(en),Q.off(tn)}get ready(){return re(this.howlers[this.scope])}get soundPlayer(){try{if(!this.ready){let t=R.json(this.scope);re(t)&&(t.onend=e=>{this.resetBgm(e),this.channelManager.removeBySoundId(e)},this.howlers[this.scope]=new Howl(t))}return this.howlers[this.scope]}catch{return null}}play(t,e="default",i=!1,s=!1,n){if(T.isUCBrowser)return!this._muted&&t==="spin"&&this.playAudio(t),null;if(!i&&!this.soundPlayer&&this.channelManager.exist(e,t)||!this.soundPlayer)return null;if(i){let o=this.channelManager.removeByName(t);o&&this.stop(o.soundId)}s&&this.softBgm();let r=this.soundPlayer.play(t);return n&&this.soundPlayer.once("end",n,r),this.channelManager.add(e,t,r,s)}playAudio(t){this.audios[t]?(this.audios[t].ended||(this.audios[t].currentTime=0),this.audios[t].play()):this.loadAudio(t).play()}loadAudio(t){let e=document.createElement("audio");return e.setAttribute("src","./assets/"+t+".m4a"),e.load(),e.addEventListener("canplaythrough",()=>{this.audios[t]=e}),e}soundURLS(t){let e=t.substr(0,t.length-3),i=[],s=["m4a","ogg","ac3","mp3"];for(let n=0;n<s.length;n++)i.push(e+s[n]);return i}stopBgm(){this.bgm&&this.stop(this.bgm.soundId),this.bgm=void 0}playBgm(t,e=!1){if(!(!e&&this.bgm&&this.bgm.name===t))return this.stopBgm(),this.bgm=this.play(t,"bgm",!0),this.bgm}softBgm(){this.bgm&&this.setVolume(this.softBgmValue*this.bgm.volume,this.bgm.soundId,!0)}fade(t,e,i,s,n){this.soundPlayer.fade(t,e,i,s),n&&this.soundPlayer.once("fade",()=>{n()})}resetBgm(t){if(this.bgm&&this.bgm.soundId!==t){let e=this.channelManager.getPlaybackBySoundId(t);e&&e.softBgm&&this.setVolume(this.bgm.volume,this.bgm.soundId,!0)}}resume(){for(let t in this.channelManager.channels){let e=this.channelManager.channels[t];for(let i in e)this.soundPlayer.play(e[i].soundId)}}pause(t){return this.resetBgm(t),this.soundPlayer.pause(t),this}stop(t){if(t)return this.resetBgm(t),this.channelManager.removeBySoundId(t),this.soundPlayer.stop(t),this}switchScope(t){return this.setVolume(0),this.scope=this.defaultScope,t?(this.scope=this.commonScope,this.soundPlayer?(this.setVolume(1),!0):(this.scope=this.defaultScope,!1)):(this.setVolume(1),!0)}setVolume(t,e,i=!1){if(!i){let s=this.channelManager.getPlaybackBySoundId(e);s&&(s.volume=t)}return this.soundPlayer.volume(t*this.volume,e),this}getVolume(){return this.soundPlayer.volume()}set volume(t){this._volume=t,this._muted||Howler.volume(t)}get volume(){return this._volume}get muted(){return this._muted}set muted(t){this._muted=t,t?Howler.volume(0):Howler.volume(this._volume)}};nn=yh([f({tag:"soundService",category:"service"})],nn);function st(t,e=0){return Math.floor(Math.random()*(t-e))+e}class wh{constructor(e,i){this.capability=e,this.factory=i,this.pool=[],this.metrics={totalAlloc:0,totalFree:0}}allocate(...e){let i;return this.pool.length===0?(i=this.factory.apply(this.factory,e),this.metrics.totalAlloc++):(i=this.pool.pop(),this.metrics.totalFree--),i}free(e){this.capability<=this.pool.length?(this.destroy(e),e=void 0):this.pool.indexOf(e)===-1&&this.pool.push(e),this.metrics.totalFree++}destroy(e){let i=e;i.dispose&&i.dispose()}collect(e){this.pool.forEach(s=>{this.destroy(s)}),this.pool=[];let i=this.metrics.totalAlloc-this.metrics.totalFree;this.clearMetrics(i)}find(e){let i=this.pool.length;for(var s=0;s<i;s++){let n=this.pool[s];if(e(n))return n}}clearMetrics(e){this.metrics.totalAlloc=e||0,this.metrics.totalFree=0}}const pr="idle",xh="spin",Ih="animate",Ph="events:symbol:state";let dr=class Yr extends _{constructor(e,i,s){super(),this.index=e,this.prefab=i,this.masking=s,this.attachedFollow=!1,this.row=-1,this.col=-1,this.frame=new PIXI.Container,this.views={}}idle(){this.setState(pr)}spin(){this.setState(xh)}animate(e=Ih,i=!0){this.setState(e,i)}set onAnimationComplete(e){this.content.onComplete=e}deactivate(){super.deactivate(),this.deactivateViews()}clone(){let i=v.get("symbolService").get(this.index);return i.reference=this,i.col=this.col,i.row=this.row,i}free(){this.attachedSymbol=void 0,this.attachedFollow=!1,this.reference=void 0,this.deactivate(),this.views={}}attach(e,i=!1){this.attachedSymbol=e,this.attachedFollow=i,this.updateAttached()}updateAttached(){this.attachedSymbol&&this.attachedFollow&&(this.attachedSymbol.x=this.x,this.attachedSymbol.y=this.y)}checkCurrentState(e){return this.state===e}deactivateViews(){for(let e in this.views)e&&this.views[e].deactivate()}resetStateViews(){for(let e in this.views)this.views[e]=void 0}setState(e,i=!1){this.hasState(e)||(e=pr),this.deactivate(),this.removeChildren();let s=this.views[e];if(i){if(s=$e(this.getPrefab(e),{}),s.components)for(let n=0;n<s.components.length;n++)s.components[n].options&&s.components[n].options.volume&&(s.components.splice(n,1),j("winline","default",!0))}else s||(s=$e(this.getPrefab(e),{}));return this.content=s,this.addChild(this.content),this.activate(),this.views[e]=s,Q.emit(Ph,this),this.masking&&(this.addChild(this.masking),this.content.mask=this.masking),this.addChild(this.frame),this.state=e,this.content}hasState(e){return this.prefab&&this.prefab.definitions&&this.prefab.definitions[e]!==void 0}getPrefab(e){return this.prefab?this.prefab.definitions[e]:null}static create(e,i,s){let n=null;s&&(n=Re(s.width,s.height,s.radius),n.position.set(s.x,s.y));let r=new Yr(e,i,n);return r.name=`symbol#${e}`,r}};var _h=Object.defineProperty,Ch=Object.getOwnPropertyDescriptor,Th=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ch(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&_h(e,i,n),n};let rn=class extends ue{configure(t){if(this.total=l(t,"total"),t.childElementCount<this.total&&$(t.querySelector("#default")))throw new Error("the number of symbol prefabs must equals the total of symbols or there is a prefab named 'default'.");this.size=Ro(t,"size"),this.multiSize=Mo(t,"multiSize");let e=No(t,"anchor");this.poolsOn=I(t,"pool"),this.anchor={x:this.size.width*e.x,y:this.size.height*e.y},this.symbolPrefabs={},this.symbolMasking={},z(t,(i,s)=>{let n=ee(i),r={definitions:{}};z(i,(o,a)=>{r.definitions[_n(o)]=o.firstElementChild}),this.symbolPrefabs[n]=r,I(i,"mask",!1)&&(this.symbolMasking[n]={x:l(i,"x",0),y:l(i,"y",0),width:l(i,"width",this.size.width),height:l(i,"height",this.size.width),radius:l(i,"radius",0)})}),this.pools={}}pickMany(t){let e=[];for(let i=0;i<t;i++)e.push(st(this.total));return e}pickOne(){return this.get(st(this.total))}get(t){let e=this.symbolPrefabs[t.toString()];return $(e)&&(e=this.symbolPrefabs.default),this.poolsOn?this.getObjectPool(t).allocate(t,e,this.symbolMasking[t.toString()]):dr.create(t,e,this.symbolMasking[t.toString()])}free(t){t.free(),this.poolsOn&&this.getObjectPool(t.index).free(t)}hasSymbol(t){return!$(this.symbolPrefabs[t.toString()])}getObjectPool(t){let e=t.toString(),i=this.pools[e];return $(i)&&(this.pools[e]=i=new wh(5,dr.create)),i}};rn=Th([f({tag:"symbolService",category:"service"})],rn);var Bh=Object.defineProperty,Eh=Object.getOwnPropertyDescriptor,Lh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Eh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Bh(e,i,n),n};let on=class extends ue{configure(t){this.options=t}create(){return w.get(`component:animator:${c(this.options,"type")}`).create(this.options)}};on=Lh([f({tag:"reelAnimatorService",category:"service"})],on);var Oh=Object.defineProperty,Ah=Object.getOwnPropertyDescriptor,Dh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ah(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Oh(e,i,n),n};let an=class extends ue{constructor(){super(...arguments),this.cache={}}configure(t){this.options=t}get(t,e={}){let i=Eo(this.options,t);if(re(i)){let s=c(i,"mode","new");if(s==="new")return this.create(i,e);if(s==="singleton")return this.takeFromCache(i,e)}}dispose(){for(let t in this.cache)this.cache[t].deactivate();this.cache={}}create(t,e){let i=$e(t,e);return k(i,t,e),i}takeFromCache(t,e){let i=ee(t);return this.cache[i]||(this.cache[i]=this.create(t,e)),this.cache[i]}};an=Dh([f({tag:"widgetService",category:"service"})],an);var Nh=Object.defineProperty,Rh=Object.getOwnPropertyDescriptor,Mh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Rh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Nh(e,i,n),n};let wi=class extends ue{constructor(){super(...arguments),this.started=!1,this.strictMode=!1,this.strictLandscapeWeb=!1}getOrientation(){return this.strictLandscapeWeb&&!T.mobile&&!T.tablet||window.innerHeight<=window.innerWidth?W.LANDSCAPE:W.PORTRAIT}get isPortrait(){return this.getOrientation()===W.PORTRAIT}get isLandscape(){return this.getOrientation()===W.LANDSCAPE}configure(t){}startup(){this.mode=S.orientation||"landscape",this.started=!0,this.strictMode=S.strictMode&&S.strictMode==="true",this.strictLandscapeWeb=S.strictLandscapeWeb&&S.strictLandscapeWeb==="true"}};wi=Mh([f({tag:"orientationService",category:"service"})],wi);var Wh=Object.defineProperty,Fh=Object.getOwnPropertyDescriptor,Hh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Fh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Wh(e,i,n),n};const xi="events:resize",ln="events:web_resize";let hn=class extends ue{constructor(){super(...arguments),this.prevOrientation=0}configure(t){}startup(){v.has("orientationService")||v.register("orientationService",wi).startup(),this.orientationService=v.get("orientationService"),this.orientationService.started||this.orientationService.startup(),this.resizeAndOrientaionChecker=setInterval(()=>{this.checkResize(),this.checkSecondaryOrientation()},30),this.checkResize()}checkResize(){let t=window.innerWidth,e=window.innerHeight;(this.windowHeight!==e||this.windowWidth!==t)&&(this.windowHeight=e,this.windowWidth=t,this.layout(),Q.emit(xi),Q.emit(ln))}checkSecondaryOrientation(){this.windowOrientation!==window.orientation&&(this.windowOrientation=window.orientation,this.layout())}shutdown(){clearInterval(this.resizeAndOrientaionChecker)}layout(){let t=E,e=t.minWidth,i=t.minHeight,s=t.width,n=t.height,r=1,o=0,a=this.orientationService.getOrientation();if(Hs(!1),this.isBothEnaled&&a===W.PORTRAIT&&!this.orientationService.strictLandscapeWeb||this.isPortraitOnlyEnabled&&this.isNotMobile&&a===W.LANDSCAPE||this.isBothEnaled&&a===W.PORTRAIT&&this.orientationService.strictLandscapeWeb&&this.isMobileOrTablet?(s=t.height,n=t.width,e=t.minHeight,i=t.minWidth):this.isPortraitOnlyEnabled&&this.isMobileOrTablet&&a===W.LANDSCAPE?Hs(!0):T.mobile&&(this.orientationService.mode==="portrait"&&a===W.LANDSCAPE||this.orientationService.mode==="landscape"&&a===W.PORTRAIT)&&(this.orientationService.strictMode?this.orientationService.mode==="portrait"&&Hs(!0):(o=Math.PI/2,s=t.height,n=t.width,e=t.minHeight,i=t.minWidth)),e>0&&i>0&&this.isMobileOrTablet){let A=Math.min(window.innerWidth/e,window.innerHeight/n),L=Math.min(window.innerWidth/(a===W.PORTRAIT?e:s),window.innerHeight/i);r=Math.max(A,L)}else r=Math.min(window.innerWidth/(e>0?e:s),window.innerHeight/n);let h=Math.ceil(s*r),u=Math.ceil(n*r);se.scale.set(r),se.rotation=o,this.isBothEnaled?(se.position.set(0,0),se.pivot.set(0,0)):se.position.set(h/2,u/2),K.resize(h,u);let p=(window.innerWidth-h)/2,g=(window.innerHeight-u)/2,m=t.canvas;m.style.marginLeft=p+"px",m.style.marginTop=g+"px",m.style.width=h+"px",m.style.height=u+"px",this.offsetX=p/r,this.offsetY=g/r,D.current&&(this.prevOrientation!=a&&this.isBothEnaled&&D.current.onOrientationChange(a),D.current.onSceneResize()),this.prevOrientation=a,this.scrollTop()}scrollTop(){let t=T;t.mobile&&(t.android&&!t.chrome?window.scrollTo(0,1):window.scrollTo(0,0))}get isBothEnaled(){return this.orientationService.mode==="both"||this.orientationService.mode==="portrait-only"}get isPortraitOnlyEnabled(){return this.orientationService.mode==="portrait-only"}get isNotMobile(){return!T.mobile&&!T.tablet}get isMobileOrTablet(){return T.mobile||T.tablet}get deviceViewportOffset(){let t=window.innerWidth,e=window.innerHeight,i=E.width,s=E.height,n=se.scale.x,r=new PIXI.Point;return this.isMobileOrTablet&&this.orientationService.getOrientation()===W.PORTRAIT&&(i=E.height,s=E.width),t<i*n&&(r.x=Math.floor((i*n-t)*(.5/n))),e<s*n&&(r.y=Math.floor((s*n-e)*(.5/n))),r}};hn=Hh([f({tag:"layoutService",category:"service"})],hn);function Hs(t){let e=document.getElementById("portraitonly");if(!e)return;let i=document.getElementById("portraitonlytext");if(i){let s="Please use portrait mode for the best experience.";try{F("portraitonly")&&(s=F("portraitonly"))}catch{}$(s)&&(s="Please use portrait mode for the best experience."),i.textContent=s}kh(!t),e.style.visibility=t?"visible":"hidden"}function kh(t){let e=document.getElementById("wrapper");e&&(e.style.visibility=t?"visible":"hidden")}ps([mi,gi,yi,V,zs,Xt,gt]);ps([rn,on,an,hn,wi,Si,nn,qs,Ks,Js,Zs,Qs]);w.map("context").toSingleton(ul);w.map("user",el).asSingleton();w.map("normalSpinParser").toValue(Hr);Ar([$r]);function Uh(){Fa(slotapp)}function $n(t,e,i){let s=new t({value:c(e,"value"),style:Cn(e),bitmap:I(e,"bitmap",!1),align:c(e,"align","left"),case:c(e,"case"),comma:I(e,"comma",!0),verticalAlign:c(e,"verticalAlign"),decimalPlace:l(e,"decimalPlace",2),duration:l(e,"duration",500),prefix:c(e,"prefix",""),suffix:c(e,"suffix",""),wordWrap:I(e,"wordWrap",!1),wordWrapWidth:l(e,"wordWrapWidth",0),letterSpacing:l(e,"letterSpacing",0),lineHeight:l(e,"lineHeight",0),lineJoin:c(e,"lineJoin","miter"),animZoom:I(e,"animZoom",!1),animScale:l(e,"animScale",1.2),durationMultiplierByValue:l(e,"durationMultiplierByValue")});return k(s,e,i),he(e,{scene:i.scene,parent:s,context:i.context}),Ln(s,e,"align",c,"left"),s}var $h=Object.defineProperty,Vh=Object.getOwnPropertyDescriptor,jh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Vh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&$h(e,i,n),n};let vt=class extends _{constructor(t){super(),this.hasComma=!0,this.options=t,this.initText(),this.update()}initText(){let t=this.options.style;this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:t.fontSize,fontName:t.fontFamily}),this.text.tint=t.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,t),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text)}set value(t){this.text.text=t,this.update()}set align(t){this.options.align=t,this.update()}set tint(t){this.text.tint=t}set fill(t){this.options.bitmap||(this.text.style.fill=t)}get value(){return this.text.text}get anchorX(){if(this.options.align==="left")return 0;if(this.options.align==="center")return .5;if(this.options.align==="right")return 1}get anchorY(){if(!this.options.verticalAlign)return-1;if(this.options.verticalAlign==="top")return 0;if(this.options.verticalAlign==="middle")return .5;if(this.options.verticalAlign==="bottom")return 1}update(){this.updateLetterCase(),this.updateComma(),this.updateAnchorX(),this.updateAnchorY()}updateLetterCase(){this.options.case==="upper"?this.text.text=this.text.text.toUpperCase():this.options.case==="lower"&&(this.text.text=this.text.text.toLowerCase())}updateComma(){this.hasComma&&(this.text.text=it(this.text.text))}updateAnchorX(){this.text.x=-this.text.width*this.anchorX}updateAnchorY(){this.options.verticalAlign&&(this.text.y=-this.text.height*this.anchorY)}static create(t,e){return Te(t,"fill",S.resolve(c(t,"fill"))),$n(vt,t,e)}};vt=jh([f({tag:"label"})],vt);var Gh=Object.defineProperty,Xh=Object.getOwnPropertyDescriptor,Yh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Xh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Gh(e,i,n),n};let Ii=class extends vt{constructor(t){super(t),this._value=new Decimal(0),this._tweeningDisplayValue=0,this.prefix="",this.suffix="",this.lastValue="",this.currentValue="a",this.ON_UPDATE_START="OnUpdateStart",this.ON_UPDATING_BY_ZOOM="OnUpdatingByZoom",this.ON_UPDATE_COMPLETE="OnUpdateComplete",this._value=new Decimal(t.value),this.prefix=t.prefix,this.suffix=t.suffix,this.update()}set value(t){let e;if(e=new Decimal(t),e.equals(this._value))return;this.removeTween(),e.toNumber()-this._value.toNumber();let i=this.options.duration,s={value:this._value.toNumber()};this.tween=new TWEEN.Tween(s).onStart(()=>{this.emit(this.ON_UPDATE_START)}).to({value:e.toNumber()},i).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.update(s.value)}).onComplete(()=>{this.emit(this.ON_UPDATE_COMPLETE)}),this._value=e,this.tween.start()}set duration(t){this.options.duration=t}get value(){return this._value.toString()}get tweeningDisplayValue(){return this._tweeningDisplayValue}update(t){let e=t||this._value||0;this._tweeningDisplayValue=e instanceof Decimal?e.toNumber():e,this.text.text=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.updateLetterCase(),this.updateComma(),this.updatePrefixSuffix(),this.currentValue=this._tweeningDisplayValue.toFixed(this.options.decimalPlace),this.lastValue!=this.currentValue&&(this.lastValue=this.currentValue,this.options.animZoom==!0&&(this.onAnimZoom(),this.emit(this.ON_UPDATING_BY_ZOOM)),this.updateAnchorX())}resetScale(){this.text.scale.set(1)}onAnimZoom(){this.text.position;let t={scale:this.options.animScale},e=new TWEEN.Tween(t).onStart(()=>{this.text.scale.set(t.scale)}).to({scale:1},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.text.scale.set(t.scale)}).onComplete(()=>{this.resetScale(),this.updateAnchorX(),e.stop(),e=null});e.start()}updatePrefixSuffix(){this.text.text=this.prefix+this.text.text+this.suffix}setValueDirectly(t){this._value=new Decimal(t),this.removeTween(),this.update()}reset(){this.setValueDirectly("0")}removeTween(){this.tween&&this.tween.stop()}deactivate(){this.removeTween()}static create(t,e){return $n(Ii,t,e)}};Ii=Yh([f({tag:"animatedLabel"})],Ii);var zh=Object.defineProperty,qh=Object.getOwnPropertyDescriptor,Kh=(t,e,i,s)=>{for(var n=s>1?void 0:s?qh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&zh(e,i,n),n};let Pi=class extends _{constructor(){super(...arguments),this.timeInterval=200,this.timeFade=500,this.frames=[]}init(){this.currFrameIndex=0,this.tick=0,this.stop(0),this.activate()}stop(t){this.started=!1,B.remove(this);for(let e=0;e<this.frames.length;e++)this.addChild(this.frames[e]),this.frames[e].alpha=0;this.frames[t].alpha=1}playSpecificFrame(t){this.currFrameIndex!=t&&(Pe(this.frames[this.currFrameIndex],500),this.currFrameIndex=t,ne(this.frames[this.currFrameIndex],500))}chooseRandomNextFrame(){let t=this.frames.length;if(t>1){let e=this.currFrameIndex,i=st(t);for(;e==i;)i=st(t);return i}return 0}nextFrame(){let t=this.currFrameIndex;Pe(this.frames[t],this.timeFade,()=>{this.frames[t].deactivate()}),this.next==="random"?this.currFrameIndex=this.chooseRandomNextFrame():this.currFrameIndex=(this.currFrameIndex+1)%this.frames.length,ne(this.frames[this.currFrameIndex],this.timeFade,()=>{this.frames[this.currFrameIndex].activate()})}advanceTime(t){return this.tick++,this.tick%this.timeInterval===0&&this.nextFrame(),!0}activate(){super.activate(),!this.started&&(this.started=!0,this.currFrameIndex=0,B.add(this))}deactivate(){super.deactivate(),this.started=!1,B.remove(this)}pause(){B.remove(this)}resume(){B.add(this)}static create(t,e){let i=new Pi;return k(i,t,e),z(t,(s,n)=>{i.frames.push($e(s,{scene:e.scene,parent:i,context:e.context}))}),i.init(),i.timeInterval=l(t,"interval",200),i.timeFade=l(t,"interval",500),i.next=c(t,"next","sequential"),i}};Pi=Kh([f({tag:"callout"})],Pi);var Jh=Object.defineProperty,Zh=Object.getOwnPropertyDescriptor,Qh=(t,e,i,s)=>{for(var n=s>1?void 0:s?Zh(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Jh(e,i,n),n};let Ye=class extends _{constructor(e){super(),this._sprite=new PIXI.Sprite(e),this.addChild(this._sprite)}set resource(e){if(e instanceof PIXI.Texture)this._sprite.texture=e;else{let i=R.resolve(e);this._sprite.texture=i}}set tint(e){e>=0&&(this._sprite.tint=e)}get tint(){return this._sprite.tint}set blendMode(e){e==="screen"?this._sprite.blendMode=PIXI.BLEND_MODES.SCREEN:e==="add"?this._sprite.blendMode=PIXI.BLEND_MODES.ADD:this._sprite.blendMode=PIXI.BLEND_MODES.NORMAL}get sprite(){return this._sprite}static create(e,i){Te(e,"tint",S.resolve(c(e,"tint")));let s=w.get("context"),r=R.resolve(s.resolve(c(e,"res"),i.context)),o=new Ye(r);return o.tint=l(e,"tint",-1),o.blendMode=c(e,"blendMode",""),k(o,e,i),he(e,{scene:i.scene,parent:o,context:i.context}),o}static instantiate(e){let s=R.resolve(e);return new Ye(s)}};Ye=Qh([f({tag:"img"})],Ye);var eu=Object.defineProperty,tu=Object.getOwnPropertyDescriptor,iu=(t,e,i,s)=>{for(var n=s>1?void 0:s?tu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&eu(e,i,n),n};const su={rectangle:0,polygon:1,image:2};let _i=class extends ds{constructor(t,e,i){switch(super(),this.target=t,e){case 2:K.type===PIXI.RENDERER_TYPE.WEBGL?this.content=new PIXI.Sprite(R.resolve(i.res)):this.content=Vt(i.width,i.height);break;case 0:this.content=Vt(i.width,i.height);break;case 1:this.content=oa(i.path);break}this.content.x=i.x,this.content.y=i.y,this.target.addChild(this.content),this.target.mask=this.content}activate(){this.active!==!0&&(this.target.mask!=this.content&&(this.target.mask=this.content),this.active=!0)}deactivate(){this.active!==!1&&(this.target.mask!=null&&(this.target.mask=null),this.active=!1)}static create(t,e){let i=su[c(t,"type","rectangle")],s={width:l(t,"width",0),height:l(t,"height",0),x:l(t,"x",0),y:l(t,"y",0),path:Be(t,"path"),res:c(t,"res",null)};if(e.parent instanceof PIXI.Container)return new _i(e.parent,i,s)}};_i=iu([f({tag:"mask"})],_i);function rt(t,e=0,i=new ru){return new Promise(s=>{i.timer=setTimeout(()=>{i.value||(t(),s())},e)})}function nu(t){return new Promise(e=>{setTimeout(e,t)})}function be(t){let e=0;return new Promise(i=>{const s={advanceTime:n=>(e+=n*PIXI.Ticker.shared.elapsedMS,e>=t&&(B.remove(s),i()),!0)};B.add(s)})}function oe(t){let e=0;return new Promise(i=>{const s={advanceTime:n=>(e+=16.66666666667,e>=t&&(B.remove(s),i()),!0)};B.add(s)})}class ru{constructor(e=!1){this.value=e}cancel(){this.value=!0,clearTimeout(this.timer)}}var ou=Object.defineProperty,au=Object.getOwnPropertyDescriptor,lu=(t,e,i,s)=>{for(var n=s>1?void 0:s?au(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ou(e,i,n),n};let Ci=class extends _{constructor(t,e){super(),this.options=e,this.animator=new PIXI.AnimatedSprite(t),this.animator.loop=!1,this.currentFrame=0,this.setHueAndBlendMode(),this.addChild(this.animator)}play(t=-1){if(t!==0)return this.loop=t,new Promise((e,i)=>{this.animator.onComplete=this.makeCompleteHandler(e),this.animator.gotoAndPlay(this.currentFrame)})}get speed(){return this.animator.animationSpeed}set speed(t){this.animator.animationSpeed=t}set tint(t){this.animator.tint=t}makeCompleteHandler(t){return()=>{this.loop===1?(t(),this.onComplete()):this.loop===-1?this.playLoop():this.loop>1&&(this.loop--,this.playLoop())}}playLoop(){this.options.loopDelay>0?nu(this.options.loopDelay).then(()=>this.animator.gotoAndPlay(0)):this.animator.gotoAndPlay(0)}playOnce(){return this.play(1)}activate(){super.activate(),this.options.continuous||(this.currentFrame=0),this.play(this.options.loop)}deactivate(){super.deactivate(),this.animator.stop(),this.options.continuous&&(this.currentFrame=this.animator.currentFrame)}onComplete(){this.emit("animationComplete"),this.options.removeOnComplete&&this.parent&&this.parent.removeChild(this)}setHueAndBlendMode(){if(K.type===PIXI.RENDERER_TYPE.WEBGL&&this.options.hue!==0){let t=new PIXI.ColorMatrixFilter;t.hue(this.options.hue,!1),this.setBlendMode(t),this.animator.filters=[t]}else this.setBlendMode(this.animator)}setBlendMode(t){this.options.blendMode&&(this.options.blendMode==="screen"?t.blendMode=PIXI.BLEND_MODES.SCREEN:this.options.blendMode==="add"&&(t.blendMode=PIXI.BLEND_MODES.ADD))}static create(t,e){let i=w.get("context"),n=R.resolve(i.resolve(c(t,"res"),e.context));if(Te(t,"tint",S.resolve(c(t,"tint"))),I(t,"reverse",!1)&&n&&n.length){let u=n.slice(0);u.reverse(),n=u.slice(l(t,"reverseStart",0))}let r=l(t,"loop",1),o=new Ci(n,{loop:r,loopDelay:l(t,"loopDelay",0),hue:l(t,"hue",0),blendMode:c(t,"blendMode",null),continuous:I(t,"continuous",!1),removeOnComplete:I(t,"removeOnComplete",!1)});o.speed=l(t,"speed",1),o.currentFrame=l(t,"startFrame",0);let a=l(t,"tint",-1);return a>=0&&(o.tint=a),he(t,{scene:e.scene,parent:o,context:e.context}),k(o,t,e),I(t,"play",!0)&&o.play(r),o}};Ci=lu([f({tag:"movieClip"})],Ci);var hu=Object.defineProperty,uu=Object.getOwnPropertyDescriptor,cu=(t,e,i,s)=>{for(var n=s>1?void 0:s?uu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&hu(e,i,n),n};let Ti=class extends _{constructor(){super(),this._enabled=!0,this.interactive=!0,this.cursor="pointer",this.on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}set enabled(t){this._enabled=t,this.cursor=t?"pointer":null}get enabled(){return this._enabled}buttonClickedHandler(){this.enabled&&ke("onClick",this)}static create(t,e){let i=ve(Ti,t,e);return Ke(i,t,e),i}};Ti=cu([f({tag:"selection"})],Ti);function Vn(t,e,i){let s=new t;k(s,e,i),z(e,(r,o)=>{let a=$e(r,{scene:i.scene,parent:s,context:i.context});a instanceof _&&(a.name=ee(r),a.visible=!1,s.frames.push(a))});let n=c(e,"goto")||0;return s.goto(n),s}var pu=Object.defineProperty,du=Object.getOwnPropertyDescriptor,fu=(t,e,i,s)=>{for(var n=s>1?void 0:s?du(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&pu(e,i,n),n};let yt=class extends _{constructor(){super(...arguments),this.frames=[]}goto(t){if(this.removeChildren(),typeof t=="number"?this.currFrameIndex=t<this.frames.length?t:0:this.currFrameIndex=this.indexOfFrame(t),this.currFrameIndex>=0){let e=this.frames[this.currFrameIndex];return e.visible=!0,this.addChild(e),!0}else return!1}get current(){return this.frames[this.currFrameIndex]}get numSlides(){return this.frames.length}next(){let t=this.currFrameIndex;t++,t>-1&&(t>=this.numSlides&&(t=0),this.goto(t))}prev(){let t=this.currFrameIndex;t--,t<0&&(t=this.numSlides-1),this.goto(t)}indexOfFrame(t){for(let e=0;e<this.frames.length;e++)if(this.frames[e].name===t)return e;return-1}static create(t,e){return Vn(yt,t,e)}};yt=fu([f({tag:"slide"})],yt);function zr(t,e,i){let s=ve(t,e,i);return Ke(s,e,i),s.selected=ae(e,"selected")==="true",s.command=c(e,"command"),s.sound=c(e,"sound","button"),s}var Ue=(t=>(t[t.Mouse=0]="Mouse",t[t.Keyboard=1]="Keyboard",t[t.None=2]="None",t))(Ue||{}),mu=Object.defineProperty,bu=Object.getOwnPropertyDescriptor,gu=(t,e,i,s)=>{for(var n=s>1?void 0:s?bu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&mu(e,i,n),n};let Yt=class extends _{constructor(){super(),this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpOutsideHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpOutsideHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonUpHandler(t){}buttonDownHandler(t){}buttonClickedHandler(){this.selected=!this._selected,Xe(this.sound),!ke("onClick",this)&&this.command&&d.emit(this.command,{source:Ue.Mouse,context:this})}buttonUpOutsideHandler(){}set selected(t){this._selected=t,t?(this.down&&(this.down.visible=!0),this.up&&(this.up.visible=!1)):(this.down&&(this.down.visible=!1),this.up&&(this.up.visible=!0))}get selected(){return this._selected}get currentButton(){return this.down&&this.down.visible?this.down:this.up&&this.up.visible?this.up:null}static create(t,e){return zr(Yt,t,e)}};Yt=gu([f({tag:"toggleButton"})],Yt);var vu=Object.defineProperty,yu=Object.getOwnPropertyDescriptor,Su=(t,e,i,s)=>{for(var n=s>1?void 0:s?yu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&vu(e,i,n),n};let Bi=class extends _{constructor(){super(...arguments),this.buttons=[],this.slides=[]}init(t,e){for(let i=1;i<=t;i++){let s=this.getComponentByID("btn"+i);s.index=i-1,s.onClickHandler=()=>this.select(s.index),this.buttons.push(s),this.slides.push(this.getComponentByID("slide"+i))}this._enabled=!0}select(t){this._enabled&&(this.selectedIndex=t,!ke("onClick",this)&&this.command&&d.emit(this.command,{source:Ue.Mouse,context:this}))}get selectedIndex(){return this._selectedIndex}set selectedIndex(t){if(this._selectedIndex!==t){this._selectedIndex=t;for(let e=0;e<this.slides.length;e++)this.slides[e].goto(e===t?1:0)}}get enabled(){return this.enabled}set enabled(t){this._enabled=t;let e=this.buttons.length;for(let i=0;i<e;i++)this.buttons[i].enabled=t}static create(t,e){let i=ve(Bi,t,e);return i.init(l(t,"numButtons"),l(t,"disabledTint",0)),i.selectedIndex=l(t,"selected"),i.command=c(t,"command"),Ke(i,t,e),i}};Bi=Su([f({tag:"toggleGroup"})],Bi);var wu=Object.defineProperty,xu=Object.getOwnPropertyDescriptor,Iu=(t,e,i,s)=>{for(var n=s>1?void 0:s?xu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&wu(e,i,n),n};let un=class extends ue{constructor(){super(...arguments),this.keybindings=[],this.keys=[]}keyDownHandler(t){if(this._enabled&&t&&t.key){let e=t.key.toLowerCase();if(this.keys.indexOf(e)===-1){this.keys.push(e);let i=this.getKeybinding();i&&i.emitOnKeyPressed&&d.emit(i.command,{source:Ue.Keyboard,key:e})}}}keyUpHandler(t){if(t&&t.key){let e=t.key.toLowerCase(),i=this.keys.indexOf(e),s=this.getKeybinding();s&&!s.emitOnKeyPressed&&d.emit(s.command,{source:Ue.Keyboard,key:e}),i>-1&&this.keys.splice(i,1)}}getKeybinding(){for(let t of this.keybindings){if(t.scene!==D.current.id)continue;let e=!0;for(let i of t.keys)if(this.keys.indexOf(i)===-1){e=!1;break}if(e)return t}}configure(t){this.options=t,z(t,(e,i)=>{let s=c(e,"when"),n=s.indexOf("."),r="";n!==-1&&(r=s.substr(n+1),s=s.substr(0,n)),this.keybindings.push({keys:c(e,"key").split("+"),command:c(e,"command"),when:r,scene:s,emitOnKeyPressed:I(e,"emitOnKeyPressed")})})}set enabled(t){this._enabled=t}startup(){this._enabled=!0,window.addEventListener("keydown",t=>this.keyDownHandler(t)),window.addEventListener("keyup",t=>this.keyUpHandler(t))}shutdown(){this._enabled=!1,window.removeEventListener("keydown",this.keyDownHandler),window.removeEventListener("keyup",this.keyUpHandler),this.keybindings=[]}};un=Iu([f({tag:"keyboardService",category:"service"})],un);var Pu=Object.defineProperty,_u=Object.getOwnPropertyDescriptor,Cu=(t,e,i,s)=>{for(var n=s>1?void 0:s?_u(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Pu(e,i,n),n};let Ei=class extends _{play(t=-1){this.animator.play(t)}playOnce(){this.animator.playOnce()}static create(t,e){let i=new Ei;return k(i,t,e),he(t,{scene:e.scene,parent:i,context:e.context}),i.animator=i.getComponentByID("animator"),i.animator.on("animationComplete",()=>i.emit("animationComplete")),i}};Ei=Cu([f({tag:"animation"})],Ei);var Tu=Object.defineProperty,Bu=Object.getOwnPropertyDescriptor,Eu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Bu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Tu(e,i,n),n};const Lu="events:winbox";let Li=class extends _{constructor(){super(...arguments),this.autohide=!0,this.accumulative=!1}init(){this.totalBet||(this.totalBet=this.getComponentByID("totalBet")),this.balance||(this.balance=this.getComponentByID("balance")),this.time||(this.time=this.getComponentByID("time")),(this.usertime||this.time)&&(this.usertime&&(this.usertime.hasComma=!1),this.time&&(this.time.hasComma=!1),B.add(this)),this.username&&P().displayName&&(this.username.hasComma=!1,this.username.value=P().displayName),x().miniFooter&&(this.balance.visible=this.iconBal.visible=!1,this.win.visible=this.iconWin.visible=!0,this.labelBalWin.value=F("win"));let e="";T.platform!=="mini"&&(e=Jt(P().currency,x().CURRENCY_SYMBOL)),this.winBoxLabel.prefix=Tn(P().currency,x().CURRENCY_SYMBOL),this.winBoxLabel.updatePrefixSuffix(),this.totalBet.prefix=this.win.prefix=this.balance.prefix=e,this.totalBet.updatePrefixSuffix(),this.win.updatePrefixSuffix(),this.balance.updatePrefixSuffix()}updateTotalBet(e){this.totalBet&&(this.totalBet.value=de(e))}animateBalance(e){this.balance.value=de(e)}updateBalance(e){this.balance.setValueDirectly(de(e))}updateWinAmount(e){this.win.value=de(e)}directUpdateWinAmount(e){this.win.setValueDirectly(de(e))}get winBoxLabel(){return this._winBoxLabel===void 0&&(this._winBoxLabel=this.getComponentByID("winBoxLabel")),this._winBoxLabel}showBox(e){if(this.winBox)return Q.emit(Lu,e),this.winBoxSound=pt("winmeter","default",!0),new Promise((i,s)=>{this.winBox.visible=!0,this.accumulative||this.winBoxLabel.reset(),this.winBoxLabel.value=this.accumulative?this.winBoxLabel._value.plus(e).toString():e.toString(),this.activate(),clearTimeout(this.showTimer),this.showTimer=setTimeout(()=>{this.autohide&&this.hideBox(),i()},this.winBoxLabel.options.duration+1e3)})}hideBox(){this.winBox&&(clearTimeout(this.showTimer),bt(this.winBoxSound),this.winBox.visible=!1,this.winBoxSound=null,this.winBoxLabel.deactivate())}resetWinAmount(){this.win.reset(),this.hideBox()}advanceTime(e){return this.usertime?this.usertime.value=tr(8):this.time&&(this.time.value=tr(8,!0)),!this.winBox.visible&&this.winBoxSound&&bt(this.winBoxSound),!0}deactivate(){this.hideBox(),(this.usertime||this.time)&&B.remove(this)}static create(e,i){let s=ve(Li,e,i);return s.init(),s}};Li=Eu([f({tag:"footerBar"})],Li);var Ou=Object.defineProperty,Au=Object.getOwnPropertyDescriptor,Du=(t,e,i,s)=>{for(var n=s>1?void 0:s?Au(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Ou(e,i,n),n};let Oi=class extends Li{init(){super.init(),this.totalBet.prefix=this.win.prefix=this.balance.prefix="",this.totalBet.updatePrefixSuffix(),this.win.updatePrefixSuffix(),this.balance.updatePrefixSuffix()}static create(t,e){let i=ve(Oi,t,e);return i.init(),i}};Oi=Du([f({tag:"footerBar"})],Oi);var Nu=Object.defineProperty,Ru=Object.getOwnPropertyDescriptor,Mu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ru(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Nu(e,i,n),n};const fr=0;let cn=class extends ue{constructor(){super(...arguments),this.fround=!1,this.json=!0}configure(t){this.appContext=x();let e=R.getApiBy("apiName")||"";this.service=(R.getApiBy("service")??"https://rslotservice.w88api.com/onlinecasino/")+e+"/"}startup(){this.player=P(),this.refreshTicket()}refreshTicket(){this.ticket=Ut().toString()}send(t,e=!1){return this.refreshTicket(),t+="&ts="+this.ticket,q.request({id:this.ticket,url:t,method:"GET"}),e==!1&&this.appContext.startInactivityTimer(),new Promise((i,s)=>{Dn(t).then(n=>n.responseText).then(n=>{let r=JSON.parse(n);r?(q.response({requestID:this.ticket,data:r}),r.isError?s({code:r.error,message:""}):i(r)):s({code:fr,message:"Unexpected Error"})}).catch(n=>{s({code:fr,message:"Unexpected Error"})})})}signIn(){if($(this.appContext.OPERATOR))return new Promise((t,e)=>e({code:77,message:""}));if(this.isWebGLOnlyNotSupported)return new Promise((t,e)=>e({code:997,message:""}));if(this.appContext.FUNPLAY){let t=this.service+"User/GetFunPlayKey?op="+encodeURIComponent(this.appContext.OPERATOR);return this.send(t)}else{if(this.appContext.AUTHENTICATED==="1")return Promise.resolve({value:{sessionKey:this.appContext.TOKEN,memberName:this.player.accountName}});let t=this.service+"User/Authenticate?op="+encodeURIComponent(this.appContext.OPERATOR)+"&token="+encodeURIComponent(this.appContext.TOKEN);return this.send(t)}}getBalance(){let t=this.service+"User/GetBalance?token="+this.player.sessionKey+"&game="+this.appContext.ID+"&platform="+T.platform;return this.send(t)}getBets(){let t=this.service+"Game/GetBets/?game="+this.appContext.ID+"&key="+this.player.sessionKey;return this.send(t)}spin(t,e){let i=this.player.cheat||this.appContext.CHEAT,s=t.amount,n=t.multiplier;this.fround&&(s=this.player.froundBet,n=this.player.froundMul);let r=this.service+"Game/"+(this.fround?"FreeRound":"Spin")+"?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+s+(this.appContext.multiplierAsCreditBet?"&creditBet=":"&multiplier=")+n+(this.player.bonusBet?"&sidebet=1":"")+"&platform="+T.platform+(i?"&cheat="+i:"");return e&&e.forEach((o,a)=>{r+=`&${o.key}=${o.value}`}),this.player.cheat=void 0,this.send(r)}bonus(t,e){let i=this.player.cheat||this.appContext.CHEAT,s=this.service+"Game/BonusGame?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bonus="+t.key+"&param="+t.index+"&platform="+T.platform+(i?"&cheat="+i:"");return this.send(s)}jackpot(){if(!bs())return new Promise((e,i)=>i({code:33,message:""}));let t=this.service+"Jackpot/GetAvailableJackpot?game="+this.appContext.ID+"&token="+this.player.sessionKey+"&platform="+T.platform;return this.send(t,!0)}claimFround(){let t=this.service+"Game/ClaimDailyFreeSpin?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&bet="+this.player.froundBet+"&multiplier="+this.player.froundMul+"&platform="+T.platform;return this.send(t)}custom(t,e){let i=this.service+"Game/"+t+"/?game="+this.appContext.ID+"&key="+this.player.sessionKey+"&platform="+T.platform;return e&&e.forEach((s,n)=>{i+=`&${s.key}=${s.value}`}),this.send(i)}get isWebGLOnlyNotSupported(){return S.webGLOnly&&S.webGLOnly==="true"&&K.type!==PIXI.RENDERER_TYPE.WEBGL}};cn=Mu([f({tag:"netService",category:"service"})],cn);var Wu=Object.defineProperty,Fu=Object.getOwnPropertyDescriptor,Hu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Fu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Wu(e,i,n),n};let Ai=class extends _{constructor(t,e){super(),this.content=$s(t,e),this.addChild(this.content)}static create(t,e){Te(t,"color",S.resolve(c(t,"color")));let i=new Ai(l(t,"radius",10),l(t,"color",0));return k(i,t,e),i}};Ai=Hu([f({tag:"circle"})],Ai);var ku=Object.defineProperty,Uu=Object.getOwnPropertyDescriptor,$u=(t,e,i,s)=>{for(var n=s>1?void 0:s?Uu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ku(e,i,n),n};const Vu="events:afterTrackTime";let Di=class extends _{constructor(t,e,i,s){super(),this.trackTimeIndex=0,this.animation=new PIXI.spine.Spine(t),this.animation.skeleton.setToSetupPose(),this.animation.update(0),this.animation.autoUpdate=!1,e&&(this.actionName=e,this.loop=i,this.trackIndex=0,this.animation.state.setAnimation(this.trackIndex,e,i)),s&&(this.eventListener={event:(n,r)=>{this.emit(r.data.name,this)}},this.animation.state.addListener(this.eventListener)),this.addChild(this.animation)}setAnimation(t,e,i,...s){return this.actionName=e,this.loop=i,this.trackIndex=t,this.trackTimeIndex=0,this.afterTrackTime=s,this.animation.state.setAnimation(t,e,i)}addAnimation(t,e,i){this.animation.state.addAnimation(t,e,i,0)}setSkin(t){this.animation.skeleton.setSkinByName(t)}advanceTime(t){return this.animation.update(.01666666666667),this.afterTrackTime&&this.trackTimeIndex<this.afterTrackTime.length?this.animation.state.tracks[this.trackIndex].trackTime>=this.afterTrackTime[this.trackTimeIndex]&&(this.trackTimeIndex++,this.emit(Vu,this)):(this.trackTimeIndex=0,this.afterTrackTime=null),!0}isCurrentAction(t){return this.actionName===t}hasAnimation(t){return this.animation.state.hasAnimation(t)}set tint(t){this.animation.tint=t,this.additionalAssets&&this.additionalAssets.forEach((e,i)=>{e.tint=t})}get animated(){return this._animated}set animated(t){t!==this._animated&&(this._animated=t,t?B.add(this):B.remove(this))}get currentAction(){return this.actionName}addCompleteListener(t){let e={complete:i=>t(i.trackIndex,i.loopsCount())};return this.animation.state.addListener(e),e}removeCompleteListener(t){this.animation.state.removeListener(t)}removeSpineEventListener(){this.eventListener&&this.animation.state.removeListener(this.eventListener)}removeAllCompleteListener(){this.animation.state.clearListeners()}setVisibleAnimated(t){this.visible=this.animated=t}set timeScale(t){this.animation.state.timeScale=t}set continuous(t){this._continuous=t}getSlotContainerByName(t){return this.animation.slotContainers[this.animation.skeleton.findSlotIndex(t)]}getAdditionalAssets(){return this.additionalAssets}addWidgetToSlotContainer(t,e,i,s){let n=this.getWidgetByName(e),r=this.getSlotContainerByName(t);if(n&&r){if(i&&r.removeChildren(),s){let o=n.scale.y;n.scale.set(n.scale.x,-o)}r.addChild(n),this.additionalAssets||(this.additionalAssets=[]),this.additionalAssets.push(n)}}activate(){super.activate(),this.trackIndex!==void 0&&this.actionName!=null&&!this._continuous&&(this.animation.skeleton.setToSetupPose(),this.animation.state.clearTrack(this.trackIndex),this.setAnimation(this.trackIndex,this.actionName,this.loop)),this.animated&&B.add(this)}deactivate(){B.remove(this),super.deactivate()}getWidgetByName(t){return v.get("widgetService").get(t)}resetTrackTime(){this.setTrackTime(0),this.animation.update(0)}endTrackTime(){this.setTrackTime(this.animation.state.tracks[this.trackIndex].trackEnd)}setTrackTime(t){this.animation.state.tracks[this.trackIndex].trackTime=t}static create(t,e){if(K.type!==PIXI.RENDERER_TYPE.WEBGL)return null;let i=w.get("context"),s=R,n=i.resolve(c(t,"res"),e.context),r=l(t,"speed",1),o=s.resolve(n),a=new Di(o.spineData,c(t,"action"),I(t,"loop",!0),I(t,"event",!1)),h=c(t,"skin"),u=l(t,"trackTime",0);return h&&a.setSkin(h),u&&a.setTrackTime(u),k(a,t,e),a.animation.state.timeScale=r,a.tint=l(t,"tint",16777215),a.animated=I(t,"auto"),a.continuous=I(t,"continuous",!1),z(t,(p,g)=>{p.nodeName==="slot"&&a.addWidgetToSlotContainer(c(p,"name"),c(p,"widget"),I(t,"clearFirst",!1))}),a.animated||a.animation.update(0),a}};Di=$u([f({tag:"spineAnimation"})],Di);var ju=Object.defineProperty,Gu=Object.getOwnPropertyDescriptor,Xu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Gu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ju(e,i,n),n};let Ni=class extends _{constructor(){super(...arguments),this.cheatKeys={}}initCommand(){for(let t=0;t<10;t++)this.cheatKeys[t.toString()]&&(d.off("cheat"+t),d.on("cheat"+t,e=>{this.highlight(e.key),P().cheat=e.key}));d.off("cheatToggle"),d.on("cheatToggle",t=>{this.toggleVisibility()})}init(t){this.removeChildren();let e=Vt(E.width,21,0);e.y=-1,e.alpha=.7,this.addChild(e);let i=this.cheatStr.split(","),s=[];s.push(this.createText("press")),s.push(this.createText("0:Hide Bar"));for(let n of i){let r=n.split(":")[0];this.cheatKeys[r]=n.split(":")[1],s.push(this.createText(n,t==r))}s.push(this.createText('then press "SPIN"')),this.texts=s,this.arrange()}highlight(t){this.init(t)}arrange(){let t=E.width,e=0;for(let n of this.texts)e+=n.width;let i=(t-e)/(this.texts.length+1),s=i;for(let n=0;n<this.texts.length;n++)this.texts[n].x=s,s+=i+this.texts[n].width}toggleVisibility(){P().demo!="1"||!T.desktop?this.visible=!1:this.visible=!this.visible}createText(t,e){let i=new PIXI.Text(t,{fontFamily:"Arial",fontSize:"16px",fill:e?15982143:16777215});return i.y=1,this.addChild(i),i}static create(t,e){let i=ve(Ni,t,e);return i.cheatStr=c(t,"keys"),i.init(),i.initCommand(),i}};Ni=Xu([f({tag:"cheatBar"})],Ni);var Yu=Object.defineProperty,zu=Object.getOwnPropertyDescriptor,qu=(t,e,i,s)=>{for(var n=s>1?void 0:s?zu(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Yu(e,i,n),n};let Ri=class extends Yt{constructor(){super(),this.activated=!0}set enabled(t){t?(this.activated=!0,this.cursor="pointer",this.alpha=1,B.add(this)):(this.activated=!1,this.cursor=null,this.alpha=.6,B.remove(this))}set countVisible(t){this.froundCircle&&(this.froundCircle=t)}buttonClickedHandler(){this.activated&&super.buttonClickedHandler()}advanceTime(t){return this.shine.rotation+=.03,this.shine2.rotation+=.03,!0}static create(t,e){v.get("tweenService").register("box-anim",(r,o)=>{let a=r.y,h={y:a},u=new TWEEN.Tween(h).to({y:a-12},300).easing(TWEEN.Easing.Quartic.Out).onUpdate(g=>{r.y=h.y}),p=new TWEEN.Tween(h).to({y:a},700).easing(TWEEN.Easing.Elastic.Out).delay(200).onUpdate(g=>{r.y=h.y});return u.chain(p),p.chain(u),u});let s=zr(Ri,t,e),n=s.getComponentByID("froundCount");return s.shine=s.getComponentByID("shine"),s.shine2=s.getComponentByID("shine2"),B.add(s),n&&n.parent&&(s.froundCircle=n.parent),s}};Ri=qu([f({tag:"froundToggle"})],Ri);var Ku=Object.defineProperty,Ju=Object.getOwnPropertyDescriptor,Zu=(t,e,i,s)=>{for(var n=s>1?void 0:s?Ju(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Ku(e,i,n),n};let zt=class extends vt{static create(t,e){Te(t,"fill",S.resolve(c(t,"fill")));let i=$n(zt,t,e);return i.value=S.resolve(c(t,"value")),i}initText(){let t=v.get("fontService"),e=t?Math.round(t.adjustment.size*this.options.style.fontSize):0,i=t?t.adjustment.x:0,s=t?t.adjustment.y:0;this.options.style.fontSize+=e;let n=this.options.style;this.isDefaultFont?(n.fontFamily="Arial",this.text=new PIXI.Text(this.options.value,n),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)):this.options.bitmap?(this.text=new PIXI.BitmapText(this.options.value,{fontSize:n.fontSize,fontName:n.fontFamily}),this.text.tint=n.fill,this.options.wordWrap&&(this.text.maxWidth=this.options.wordWrapWidth)):(this.text=new PIXI.Text(this.options.value,n),this.options.wordWrap&&(this.text.style.wordWrap=!0,this.text.style.wordWrapWidth=this.options.wordWrapWidth),this.options.lineHeight&&(this.text.style.lineHeight=this.options.lineHeight)),this.addChild(this.text),this.text.x+=Math.round(this.options.style.fontSize*i),this.text.y+=Math.round(this.options.style.fontSize*s)}get isDefaultFont(){return S.LANGUAGE===N.Khmer||S.LANGUAGE===N.Turkish||S.LANGUAGE===N.Portuguese}};zt=Zu([f({tag:"langLabel"})],zt);Object.defineProperty(zt.prototype,"value",{get:function(){return this.text.text},set:function(t){this.text.text=ms(t),this.update()}});function Wt(t,e=""){window.open(t,e).focus()}function oi(t){window.location.href=t}var Qu=Object.defineProperty,ec=Object.getOwnPropertyDescriptor,qr=(t,e,i,s)=>{for(var n=s>1?void 0:s?ec(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Qu(e,i,n),n};let tc=CryptoJS.enc.Base64.parse("/JDHFYxE2XsN37cvDKU8ohyozWXqtVB3F8L7SsXcUnQ="),ic=CryptoJS.enc.Base64.parse("9GENvpwMQdaVELFDRVhaPw==");function sc(t){return CryptoJS.AES.encrypt(t,tc,{keySize:16,iv:ic,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7})+""}let qt=class extends _{constructor(){super(),this._enabled=!0,this.canShow=!1,this.menuVisibilty=!1,this.visible=!1,this.netService=v.get("netService"),!(R.json("configcommons").tourexc.indexOf(x().OPERATOR)>=0)&&(d.on("menutoggle",i=>{this.canShow!==!1&&(this.menuVisibilty=i.visible,this.isPortraitLayout||(this.visible=!i.visible))}),this.addListener("added",this.onAdded),this.player=P())}get isPortraitLayout(){let t=v.get("orientationService");return t.mode==="both"&&t.getOrientation()===W.PORTRAIT}onOrientationChange(t){super.onOrientationChange(t),t===W.LANDSCAPE&&this.menuVisibilty===!0?this.visible=!1:this.canShow===!0&&(this.visible=!0)}onAdded(){if(this.player.tournament)this.setLink(this.player.tournament);else{let t=this.netService.service+"common/ti?ii="+encodeURIComponent(x().OPERATOR)+"&g="+encodeURIComponent(x().ID);t=this.urlTransformer(t),this.netService.json&&(t=this.netService.service+"tournament/getinfo?op="+encodeURIComponent(x().OPERATOR)+"&game="+encodeURIComponent(x().ID)),Dn(t,this.netService.json).then(e=>{let i=JSON.parse(e.responseText);this.player.tournament=i,this.setLink(i)}).catch(e=>{e&&e.code&&Promise.reject({code:e.code,message:e.toString()})})}}setLink(t){if(this.btTournament.off("click",()=>this.openLink()),this.btTournament.off("tap",()=>this.openLink()),t&&(t.code===200&&t.data||t.isError===!1&&t.value)){let e=T.mobile?.6:.7;this.btTournament.on("click",()=>this.openLink()),this.btTournament.on("tap",()=>this.openLink()),this.cursor="pointer",this.visible=!0,this.canShow=!0,this.enabled=this._enabled,$t(this,{scale:0},{scale:e},400,()=>{},TWEEN.Easing.Back.Out);return}this.canShow=!1,this.visible=!1}openLink(){if(!this.btTournament.enabled)return;let t=this.netService.json?this.player.tournament.value:this.player.tournament.data;Wt("/tournament/"+t.type+"?op="+x().OPERATOR+"&id="+t.id+"&lang="+x().LANGUAGE+"&token="+this.player.sessionKey)}set enabled(t){this._enabled=t,this.btTournament.enabled=t}urlTransformer(t){if(Xo.contains(t,"?")){let e=t.split("?"),i=e[0].split("/"),s=i.pop()+"?"+e[1];t=i.join("/")+"/"+S.apiName+"?key="+this.player.sessionKey+"&compress="+sc(s+"&timeStamp="+Ut())}return t}static create(t,e){return ve(qt,t,e)}};qr([y("btTournament")],qt.prototype,"btTournament",2);qt=qr([f({tag:"tournament"})],qt);class nc extends Ur{constructor(){super(),this.NUM_OF_ROW=5,this.NUM_OF_COLUMN=5,this.PAYLINES=[[1,1,1,1,1],[0,0,0,0,0],[2,2,2,2,2],[0,0,1,1,1],[2,2,1,1,1],[0,0,2,2,2],[2,2,0,0,0],[1,1,0,1,2],[1,1,2,1,0],[0,1,0,0,0],[2,1,2,2,2],[1,0,0,0,1],[1,2,2,2,1],[1,0,1,0,0],[1,2,1,2,2],[0,1,1,2,2],[2,1,1,0,0],[1,0,2,1,1],[1,2,0,1,1],[0,1,2,2,2],[2,1,0,0,0],[0,2,0,1,2],[2,0,2,1,0],[0,2,1,0,1],[2,0,1,2,1],[0,2,2,0,0],[2,0,0,2,2],[1,1,1,0,0],[1,1,1,2,2],[0,2,2,2,2]]}}let si;class rc{initialize(){}track(e){if(appInsights)switch(e.type){case U.Request:e.data;break;case U.Response:e.data;break;case U.Exception:oc(e.data);break;case U.Event:ac(e.data);break;case U.ScreenView:lc(e.data);break;case U.StartScreen:Kr(e.data);break;case U.StopScreen:Jr(e.data);break;case U.Metric:hc(e.data);break;case U.PageView:uc(e.data);break}}}function oc(t){appInsights.trackException(t.error)}function ac(t){appInsights.trackEvent(t.name,t.properties,t.measurements)}function lc(t){si&&Jr({stopScreen:si}),si=t.name,Kr({startScreen:si})}function Kr(t){appInsights.startTrackPage(t.startScreen)}function Jr(t){appInsights.stopTrackPage(t.stopScreen)}function hc(t){appInsights.trackMetric(t.name,t.value)}function uc(t){appInsights.trackPageView(t.title,null,{"Page View URL Referrer":document.referrer})}var cc=Object.defineProperty,pc=Object.getOwnPropertyDescriptor,dc=(t,e,i,s)=>{for(var n=s>1?void 0:s?pc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&cc(e,i,n),n};let Mi=class extends _{constructor(e){super(),this.options=e,this._enabled=!0,this.upTexture=e.up,this.downTexture=e.down,this.disabledTexture=e.disabled,this.sprite=new PIXI.Sprite(this.upTexture),this.addChild(this.sprite),this.interactive=!0,this.command=e.command,this.cursor="pointer",this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}buttonDownHandler(e){this._enabled&&(this.downTexture&&(this.sprite.texture=this.downTexture),this.sprite.x=this.options.dx,this.sprite.y=this.options.dy,ke("onDown",this))}buttonUpHandler(){this._enabled&&(this.sprite.texture=this.upTexture,this.sprite.x=0,this.sprite.y=0,ke("onUp",this))}buttonClickedHandler(){this._enabled&&(Xe(this.options.sound),!ke("onClick",this)&&this.command&&d.emit(this.command,{source:Ue.Mouse,context:this}),this.activate())}set enabled(e){this._enabled=e,this.cursor="pointer",this._enabled?this.sprite.texture=this.upTexture:this.sprite.texture=this.disabledTexture?this.disabledTexture:this.upTexture}get enabled(){return this._enabled}static create(e,i){let s=R,n=s.resolve(c(e,"up")),r;kt(e,"down")&&(r=s.resolve(c(e,"down")));let o;kt(e,"disabled")&&(o=s.resolve(c(e,"disabled")));let a=new Mi({up:n,down:r,disabled:o,command:c(e,"command"),sound:c(e,"sound","button"),dx:l(e,"dx"),dy:l(e,"dy")});return Ke(a,e,i),I(e,"debug")&&On(a),he(e,{scene:i.scene,parent:a,context:i.context}),k(a,e,i),a}};Mi=dc([f({tag:"button"})],Mi);var fc=Object.defineProperty,mc=Object.getOwnPropertyDescriptor,bc=(t,e,i,s)=>{for(var n=s>1?void 0:s?mc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&fc(e,i,n),n};const ut=class ut{};ut.disable="disable",ut.up="up",ut.down="down",ut.over="over";let Ne=ut,St=class extends yt{constructor(){super(),this._enabled=!0,this._down=!1,this._over=!1,this._holdEnabled=!1,this._tick=0,this.interactive=!0,this.cursor="pointer",this.initialScale=this.scale.clone(),this.on("mousedown",this.buttonDownHandler).on("touchstart",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("touchend",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("click",this.buttonClickedHandler).on("tap",this.buttonClickedHandler)}enableOver(){this.on("mouseover",this.buttonOverHandler).on("mouseout",this.buttonOutHandler)}set clickable(t){if(t.content&&t.content.geometry.graphicsData&&t.content.geometry.graphicsData.length){let e=t.content.geometry.graphicsData[0].shape;e&&(t instanceof gt?this.hitArea=new PIXI.Polygon(e.points):this.hitArea=new PIXI.Circle(t.x,t.y,e.radius))}}set holdEnabled(t){this._holdEnabled=t,t&&B.add(this)}goto(t){return super.goto(t)||super.goto(Ne.up),!0}buttonDownHandler(t){this._enabled&&(this._down=!0,this._downTime=this._tick,this.goto(Ne.down),this.animateButton(!0))}buttonOverHandler(t){this._enabled&&(this._over=!0,this.goto(Ne.over),this.onmouseover&&d.emit(this.onmouseover,{source:Ue.Mouse,context:this}))}buttonOutHandler(){this._enabled&&(this._over=!1,this._down=!1,this._down||this.goto(Ne.up))}buttonUpHandler(){this._enabled&&(this._down=!1,this.goto(this._over?Ne.over:Ne.up),this.animateButton(!1))}buttonClickedHandler(){this._enabled&&(Xe(this.sound),this.command&&d.emit(this.command,{source:Ue.Mouse,context:this}),this.activate())}animateButton(t){this.animate!=!1&&(t?this.scale.set(this.initialScale.x*1.1):this.scale.set(this.initialScale.x))}set enabled(t){this._enabled=t,this.cursor="pointer",this._enabled?this.goto(Ne.up):(this._down=!1,this.goto(Ne.disable))}get enabled(){return this._enabled}advanceTime(t){if(this._tick++,this._down&&this._enabled&&this._tick-this._downTime>30){this._tick%2===0&&d.emit(this.command,{source:Ue.Mouse,context:this});return}return!0}deactivate(){super.deactivate(),B.remove(this)}activate(){super.activate(),this._holdEnabled&&B.add(this)}static create(t,e){return Zr(St,t,e)}};St=bc([f({tag:"buttonSlide"})],St);function Zr(t,e,i){let s=Vn(t,e,i),n=s.indexOfFrame("hit");return s.command=c(e,"command"),s.sound=c(e,"sound","button"),s.onmouseover=()=>{},s.animate=I(e,"animate",!1),s.over&&s.enableOver(),n>=0&&(s.clickable=s.frames.splice(n,1)[0],s.hit=void 0),Ke(s,e,i),s.holdEnabled=I(e,"holdEnabled"),s}var gc=Object.defineProperty,vc=Object.getOwnPropertyDescriptor,yc=(t,e,i,s)=>{for(var n=s>1?void 0:s?vc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&gc(e,i,n),n};const pn="events:comboSelectionUp",Qr="events:comboSelectedIndexChanged";let Wi=class extends _{constructor(t){super(),this.selectedIndex=0,this.isDown=!1,this.texts=[],this.ymovecount=0,this.options=t,this.spriteBG=new PIXI.Sprite(this.options.spriteBG),this.drawDropdown(),this.dropdown.on("mousedown",this.dropdownDownHandler,this).on("touchstart",this.dropdownDownHandler,this).on("mouseup",this.dropdownUpHandler,this).on("touchend",this.dropdownUpHandler,this).on("mouseupoutside",this.dropdownUpOutsideHandler,this).on("touchendoutside",this.dropdownUpOutsideHandler,this).on("touchmove",this.dropdownMoveHandler,this).on("mousemove",this.dropdownMoveHandler,this),this.options.mouseWheelEnabled&&this.addMouseWheelEvent()}addMouseWheelEvent(){if(document.addEventListener)document.addEventListener("mousewheel",t=>this.dropdownWheelHandler(t),!0),document.addEventListener("DOMMouseScroll",t=>this.dropdownWheelHandler(t),!0);else{let t=document.attachEvent;t&&t("onmousewheel",e=>this.dropdownWheelHandler(e))}}drawDropdown(){this.dropdownHeight=this.options.itemHeight*this.options.numItemsShown,this.dropdown=new PIXI.Container,this.dropdown.width=this.options.dropdownWidth,this.dropdown.height=this.dropdownHeight,this.dropdown.y-=Math.floor(this.dropdown.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdown),this.dropdown.cursor="pointer",this.dropdown.interactive=!0,this.dropdown.visible=!0,this.dropdown.x=1,this.dropdownMask=Re(this.options.dropdownWidth,this.dropdownHeight,0,16711680),this.dropdownMask.y-=Math.floor(this.dropdownMask.height/2)-Math.floor(this.options.itemHeight/2),this.addChild(this.dropdownMask),this.dropdown.mask=this.dropdownMask}setValues(t,e=!1,i=0,s=""){if(this.items&&this.items.length>0)return;this.items=t,this.itemsContainer=new PIXI.Container;let n=Re(this.options.dropdownWidth,this.options.itemHeight*t.length,0,this.options.dropdownColor);n.interactive=!0,n.y-=this.options.itemHeight/2,n.alpha=0,this.itemsContainer.addChild(n),this.baseY=0,this.dropdown.addChild(this.itemsContainer);for(let r=0;r<t.length;r++){let o=new PIXI.Text(zo(t[r],e),this.options.style);o.style.fill=this.options.itemsTextColor,o.pivot.x=.5*o.width,o.pivot.y=.5*o.height,o.x=this.options.dropdownWidth/2,o.y=this.options.itemHeight*r,this.itemsContainer.addChild(o),this.texts.push(o)}this.select(i,!0)}dropdownWheelHandler(t){if(!this.dropdown||!this.visible)return;let e=t||window.event,i=e.clientX,s=e.clientY;var n;e.target&&(n=e.target.getBoundingClientRect()),n&&(i-=n.left,s-=n.top);let r=this.dropdownMask.getGlobalPosition(),o=new PIXI.Point(this.options.dropdownWidth*se.scale.x,this.dropdownHeight*se.scale.y);if(i>=r.x&&i<=r.x+o.x&&s>=r.y&&s<=r.y+o.y){let a=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),h=this.itemsContainer.y-this.options.mouseWheelGap;a>0&&(h=this.itemsContainer.y+this.options.mouseWheelGap),this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(h,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}this.snapItemInMiddle()}dropdownMoveHandler(t){if(this.isDown){let e=this.touchDownItemsY+t.data.getLocalPosition(this,t.data.global).y-this.touchDownY;this.itemsContainer.y=Math.min(this.options.itemHeight-30,Math.max(e,(this.options.numItemsShown-this.items.length+1)*this.options.itemHeight-this.options.itemHeight*this.options.numItemsShown))}}dropdownDownHandler(t){this.isDown=!0,this.touchDownY=t.data.getLocalPosition(this,t.data.global).y,this.touchDownItemsY=this.itemsContainer.y,this.clearItemsScale()}dropdownUpHandler(t){if(this.isDown=!1,this.options.selectItemOnClick){let e=t.data.getLocalPosition(this,t.data.global).y,i=e-this.touchDownY;if(Math.abs(i)<=5){let s=Math.floor((e-this.itemsContainer.y)/this.options.itemHeight);this.selectedIndex!==s&&this.emit(pn,s),this.select(s,!1,!1,!0);return}}this.snapItemInMiddle(!0)}dropdownUpOutsideHandler(){this.isDown=!1,this.snapItemInMiddle()}snapItemInMiddle(t){let e=Math.ceil((this.baseY-this.itemsContainer.y)/this.options.itemHeight);$t(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-e*this.options.itemHeight},100,TWEEN.Easing.Quadratic.Out),this.select(e,!1,!1,t)}select(t,e,i,s){if(this.clearItemsScale(),this.selectedIndex!==t||e){let n=this.texts[this.selectedIndex];n.style.fill=this.options.itemsTextColor,n=this.texts[t],n.style.fill=this.options.selectedItemTextColor,$t(this.itemsContainer,{y:this.itemsContainer.y},{y:this.baseY-t*this.options.itemHeight},Math.abs(t-this.selectedIndex)*30,null,TWEEN.Easing.Quadratic.Out),this.selectedIndex=t,i||this.emit(Qr,t)}else s&&!i&&this.emit(pn,t);this.setTextsScale(this.texts[this.selectedIndex],1),this.setItemsScale()}setItemsScale(){if(this.options.scaleTopBottomItems>0){let t=1,e=this.selectedIndex-this.options.scaleTopBottomItems;this.texts[this.selectedIndex].scale.set(t,t);for(let i=e+1;i>=e&&i>=0;i--)t=1-(this.selectedIndex-i)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[i],t);e=this.selectedIndex+this.options.scaleTopBottomItems;for(let i=e-1;i<=e&&i<this.texts.length;i++)t=1-(i-this.selectedIndex)*this.options.scaleTopBottomValue,this.setTextsScale(this.texts[i],t)}}clearItemsScale(){if(this.options.scaleTopBottomItems>0){let t=1-this.options.scaleTopBottomValue*this.options.scaleTopBottomItems;this.texts.forEach((e,i)=>{this.setTextsScale(e,t)})}}setTextsScale(t,e){t.scale.set(e,e),t.alpha=e}static create(t,e){let i=R,s=i.resolve(c(t,"spriteBG")),n=i.resolve(c(t,"dropdown")),r=ae(t,"selected")==="true",o=Number(S.resolve(c(t,"itemsTextColor","0xFFFFFF"))),a=Number(S.resolve(c(t,"selectedItemTextColor","0xFFFFFF"))),h=new Wi({spriteBG:s,numItemsShown:l(t,"numItemsShown",5),dropdown:n,selected:r,highlightColor:l(t,"highlightColor",5592405),dropdownColor:l(t,"dropdownColor",11184810),dropdownWidth:l(t,"dropdownWidth",150),itemHeight:l(t,"itemHeight",30),itemsTextColor:o,selectedItemTextColor:a,scaleTopBottomItems:l(t,"scaleTopBottomItems",0),scaleTopBottomValue:l(t,"scaleTopBottomValue",.1),mouseWheelGap:l(t,"mouseWheelGap",30),mouseWheelEnabled:I(t,"mouseWheelEnabled",!1),selectItemOnClick:I(t,"selectItemOnClick",!1),style:Cn(t)});return Ke(h,t,e),I(t,"debug")&&On(h),k(h,t,e),h}};Wi=yc([f({tag:"carousel"})],Wi);var Sc=Object.defineProperty,wc=Object.getOwnPropertyDescriptor,xc=(t,e,i,s)=>{for(var n=s>1?void 0:s?wc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Sc(e,i,n),n};const dn="events:comboSelectedIndexChanged";let Fi=class extends _{constructor(t){super(),this.selectedIndex=0,this.isDown=!1,this.texts=[],this.options=t,this.top=new PIXI.Sprite(this.options.top),this.dropdownWidth=this.top.width-3,this.drawDropdown(),this.addChild(this.top),this.top.interactive=!0,this.top.on("mousedown",this.topDownHandler,this).on("mouseup",this.topUpHandler,this).on("mouseupoutside",this.topUpOutsideHandler,this).on("touchstart",this.topDownHandler,this).on("touchend",this.topUpHandler,this).on("touchendoutside",this.topUpOutsideHandler,this),this.dropdown.on("mousedown",this.dropdownDownHandler,this).on("mouseup",this.dropdownUpHandler,this).on("mouseupoutside",this.dropdownUpOutsideHandler,this).on("touchstart",this.dropdownDownHandler,this).on("touchend",this.dropdownUpHandler,this).on("touchendoutside",this.dropdownUpOutsideHandler,this).on("touchmove",this.dropdownMoveHandler,this).on("mousemove",this.dropdownMoveHandler,this)}drawDropdown(){this.dropdown=Re(this.dropdownWidth,this.top.height*(this.options.numItemsShown+1),20,this.options.dropdownColor),this.addChild(this.dropdown),this.dropdown.interactive=!0,this.dropdown.visible=!1,this.dropdown.x=1;let t=Re(this.dropdownWidth,this.top.height*(this.options.numItemsShown+1),20);this.dropdown.addChild(t),this.dropdown.mask=t}setValues(t,e=!1,i=0,s=""){if(!(this.items&&this.items.length>0)){this.items=t,this.itemsContainer=new PIXI.Container,this.itemsContainer.y=this.top.height,this.dropdown.addChild(this.itemsContainer);for(let n=0;n<t.length;n++){let r=new PIXI.Text(t[n].toString(),this.options.style);r.style.fill=this.options.itemsTextColor,r.pivot.x=.5*r.width,r.pivot.y=.5*r.height,r.x=this.dropdownWidth/2,r.y=this.top.height*(n+.5),this.itemsContainer.addChild(r),this.texts.push(r)}this.label=new PIXI.Text("",this.options.style),this.label.style.fill=this.options.itemsTextColor,this.label.x=this.top.width/2,this.label.y=this.top.height/2,this.label.pivot.y=.5*this.label.height,this.addChild(this.label),this.select(i)}}dropdownMoveHandler(t){if(this.isDown){let e=this.touchDownItemsY+t.data.getLocalPosition(this,t.data.global).y-this.touchDownY;this.itemsContainer.y=Math.min(this.top.height,Math.max(e,(this.options.numItemsShown-this.items.length+1)*this.top.height))}}topDownHandler(t){}dropdownDownHandler(t){this.isDown=!0,this.touchDownY=t.data.getLocalPosition(this,t.data.global).y,this.touchDownItemsY=this.itemsContainer.y}topUpHandler(){this.dropdown.visible=!this.dropdown.visible}dropdownUpHandler(t){this.isDown=!1;let e=t.data.getLocalPosition(this,t.data.global).y,i=e-this.touchDownY;if(Math.abs(i)<=5){let s=Math.floor((e-this.itemsContainer.y)/this.top.height);this.select(s),this.dropdown.visible=!1,ke("onClick",this)}}topUpOutsideHandler(){}dropdownUpOutsideHandler(){this.isDown=!1}select(t){this.hightlight||(this.hightlight=new PIXI.Graphics,this.hightlight.beginFill(this.options.highlightColor),this.hightlight.drawRect(0,0,this.dropdownWidth,this.top.height),this.itemsContainer.addChildAt(this.hightlight,0)),this.hightlight.y=this.top.height*t,this.selectedIndex!==t&&this.emit(dn,t),this.selectedIndex=t,this.label.text=this.texts[t].text,this.label.pivot.x=.5*this.label.width}static create(t,e){let i=R,s=i.resolve(c(t,"top")),n=i.resolve(c(t,"dropdown")),r=ae(t,"selected")==="true",o=new Fi({top:s,numItemsShown:l(t,"numItemsShown",5),dropdown:n,selected:r,highlightColor:l(t,"highlightColor",5592405),dropdownColor:l(t,"dropdownColor",11184810),itemsTextColor:l(t,"itemsTextColor",16777215),style:Cn(t)});return Ke(o,t,e),I(t,"debug")&&On(o),k(o,t,e),o}};Fi=xc([f({tag:"comboBox"})],Fi);var Ic=Object.defineProperty,Pc=Object.getOwnPropertyDescriptor,_c=(t,e,i,s)=>{for(var n=s>1?void 0:s?Pc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Ic(e,i,n),n};let Hi=class extends _{constructor(t){super(),this.isDown=!1,this._enabled=!0,this.options=t,this.drawBar(),this.button=$s(this.options.buttonSize,16777215),this.touchButton=$s(this.options.touchRadius,16711680),this.touchButton.alpha=0,this.addChild(this.button),this.addChild(this.touchButton),this.touchButton.interactive=!0,this.touchButton.on("mousedown",this.downHandler,this).on("mouseup",this.upHandler,this).on("mouseupoutside",this.upHandler,this).on("touchstart",this.downHandler,this).on("touchend",this.upHandler,this).on("touchendoutside",this.upHandler,this).on("touchmove",this.moveHandler,this).on("mousemove",this.moveHandler,this),this.setValues()}drawBar(){this.bgBar&&this.removeChild(this.bgBar),this.highlightBar&&this.removeChild(this.highlightBar),this.highlightBarMask&&this.removeChild(this.highlightBarMask),this.bgBar=Re(this.options.barLength,this.options.barHeight,1,this.options.bgColor),this.highlightBar=Re(this.options.barLength,this.options.barHeight,1,this.options.highlightColor),this.highlightBarMask=Vt(this.options.barLength,this.options.barHeight+4),this.highlightBarMask.y=-2,this.highlightBar.mask=this.highlightBarMask,this.addChild(this.bgBar),this.addChild(this.highlightBar),this.addChild(this.highlightBarMask),this.bgBar.y=this.highlightBar.y=this.highlightBarMask.y=-this.options.barHeight/2}select(t,e=!1){if(this.value!==t){this.value=t;let i=Math.min(this.barUnitLength*t,this.options.barLength);this.button.x=this.touchButton.x=i,this.highlightBarMask.x=i-this.options.barLength,e||ke("onChange",this)}}updateBarUnitLength(){this.barUnitLength=this.options.barLength/(this.items.length-1)}update(){this.items&&this.updateBarUnitLength();let t=this.value,e=Math.min(this.barUnitLength*t,this.options.barLength);this.button.x=this.touchButton.x=e,this.highlightBarMask.x=e-this.options.barLength}set enabled(t){this._enabled=t,this.isDown=!1,this.button.tint=this._enabled?16777215:this.options.disabledColor}get enabled(){return this._enabled}setValues(t){if(this.options.itemType=="number"){this.items=[];let e=this.options.minValue;for(;e<=this.options.maxValue;)this.items.push(e),e+=this.options.unit}else this.items=t;this.items&&(this.updateBarUnitLength(),this.select(0,!0))}downHandler(t){this._enabled&&(this.isDown=!0,this.touchDownX=t.data.getLocalPosition(this,t.data.global).x,this.touchDownItemsX=this.touchButton.x)}moveHandler(t){if(this._enabled&&this.isDown){let e=this.touchDownItemsX+t.data.getLocalPosition(this,t.data.global).x-this.touchDownX,i=Math.max(Math.min(e,this.options.barLength-2),2);this.select(Math.round(i/this.barUnitLength))}}get selectedItem(){return this.items[this.value]}set barLength(t){this.options.barLength=t,this.drawBar(),this.addChild(this.button),this.addChild(this.touchButton),this.update()}upHandler(t){this.isDown=!1,this.enabled&&ke("onSelect",this)}static create(t,e){let i=new Hi({highlightColor:l(t,"highlightColor",15982143),bgColor:l(t,"bgColor",3355443),barLength:l(t,"barLength",385),barHeight:l(t,"barHeight",6),unit:l(t,"unit",1),minValue:l(t,"min",1),maxValue:l(t,"max",100),itemType:c(t,"type","number"),buttonSize:l(t,"btnSize",10),touchRadius:l(t,"touchRadius",20),disabledColor:l(t,"disabledColor",3355443)});return Ke(i,t,e),k(i,t,e),he(t,{scene:e.scene,parent:i,context:e.context}),Ln(i,t,"barLength",l,385),i}};Hi=_c([f({tag:"trackBar"})],Hi);var Cc=Object.defineProperty,Tc=Object.getOwnPropertyDescriptor,Bc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Tc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Cc(e,i,n),n};const fn="events:betChanged",Ec="events:betLevelChanged";let ki=class extends _{constructor(){super(...arguments),this.MIN_WIDTH=1024,this.MAX_WIDTH=1170}init(t,e){this.visible=!1,this.isDesktop=T.desktop,this.initBetMethods(),this.initCurrency(),this.initCommand(),this.initSettings(),this.initCloseClickable()}open(){return this.visible?!1:(this.initSettings(),this.openClose(!1,()=>{this.closing=!1}),this.visible=!0,!0)}close(t){!this.visible||this.closing||(this.closing=!0,t&&(Xe(),this.panel.betSelection.select(this.player.betValueIndex),this.panel.betLevelSelection&&this.panel.betLevelSelection.select(this.player.multiplierIndex)),this.openClose(!0,()=>{this.closing=!1,this.visible=!1}))}openClose(t,e){let i={scale:0,y:this.height},s={scale:1,y:0},n=TWEEN.Easing.Exponential.Out;t&&(i={scale:1,y:0},s={scale:0,y:this.height},n=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(s,100).easing(n).onUpdate(()=>{this.panel.scale.y=i.scale,this.panel.y=i.y}).onComplete(()=>{e&&e()}).start()}start(){}setMaxBet(){this.panel.betSelection.selectedIndex!==this.player.betValues.length-1?(this.player.maxBetRevertIndex=this.panel.betSelection.selectedIndex,this.panel.betSelection.select(this.player.betValues.length-1),this.panel.maxbetSelected&&(this.panel.maxbetSelected.visible=!0)):(this.panel.betSelection.select(this.player.maxBetRevertIndex),this.panel.maxbetSelected&&(this.panel.maxbetSelected.visible=!1))}confirmBet(){let t=this.panel.betSelection.selectedIndex;if(this.panel.betLevelSelection){let e=this.panel.betLevelSelection.selectedIndex;e!==this.player.multiplierValues.indexOf(this.player.bet.multiplier)&&(this.player.multiplierIndex=e,this.player.bet.multiplier=this.player.multiplierValues[e],t===this.player.betValueIndex&&this.emit(fn,t),this.emit(Ec,e))}t!==this.player.betValueIndex&&this.emit(fn,t),this.close()}initSettings(){x();let t=Tn(this.player.currency,x().CURRENCY_SYMBOL);this.panel.betSelection.setValues(this.player.betValues,!0,this.player.betValueIndex,t),this.panel.betSelection.on(dn,e=>this.betChangedHandler(e)),this.betChangedHandler(this.player.betValueIndex,!0),this.panel.betLevelSelection&&(this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.panel.betLevelSelection.setValues(this.player.multiplierValues,!1,this.player.multiplierIndex),this.panel.betLevelSelection.on(dn,e=>this.betLevelChangedHandler(e)),this.betLevelChangedHandler(this.player.multiplierIndex,!0))}betChangedHandler(t,e){e||Xe();let i=this.player.bet.multiplier;this.panel.betLevelSelection&&(i=this.player.multiplierValues[this.panel.betLevelSelection.selectedIndex]),this.panel.totalBet.value=it(de(new Decimal(this.player.linesCredits).times(new Decimal(this.player.betValues[t])).times(this.player.bonusBet?2:1).times(i))),this.panel.maxbetSelected&&(this.panel.maxbetSelected.visible=t===this.player.betValues.length-1)}betLevelChangedHandler(t,e){e||Xe(),this.panel.totalBet.value=it(de(new Decimal(this.player.linesCredits).times(new Decimal(this.player.betValues[this.panel.betSelection.selectedIndex])).times(this.player.bonusBet?2:1).times(this.player.multiplierValues[t])))}betSelectionOpen(){}updateBetLevelSelection(){this.panel.betLevelSelection&&(this.panel.betLevelSelection.select(this.player.multiplierIndex,!1,!0),this.panel.totalBet.value=it(de(new Decimal(this.player.linesCredits).times(new Decimal(this.player.betValues[this.panel.betSelection.selectedIndex])).times(this.player.bonusBet?2:1).times(this.player.multiplierValues[this.player.multiplierIndex]))))}initCommand(){d.on("onConfirmBet",()=>this.confirmBet()),d.on("onMaxBet",()=>this.setMaxBet()),this.panel.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this))}initBetMethods(){x().isWinWays&&this.panel.payways&&(this.panel.paylines.visible=this.panel.labelbet.linebet.visible=!1,this.panel.payways.visible=this.panel.labelbet.betamount.visible=!0)}initCurrency(){this.panel.labelbet.currency.value=this.panel.labelbet.currency.value.replace("{{CCY}}",this.player.currency),this.panel.labeltotalbet.currency.value=this.panel.labeltotalbet.currency.value.replace("{{CCY}}",this.player.currency),this.panel.labelbet.currency.x=this.panel.labelbet.linebet.width;let t=this.panel.labeltotalbet.currency.width*.5;this.panel.labeltotalbet.currency.x=this.panel.labeltotalbet.totalbet.width-t,this.panel.labeltotalbet.totalbet.x=-t,this.panel.labelbet.betamount&&this.panel.labelbet.betamount.visible&&(this.panel.labelbet.currency.x=this.panel.labelbet.betamount.width)}get player(){return P()}static create(t,e){let i=ve(ki,t,e);return i.init({x:0}),i}};ki=Bc([f({tag:"betPanel"})],ki);var Lc=Object.defineProperty,Oc=Object.getOwnPropertyDescriptor,Ac=(t,e,i,s)=>{for(var n=s>1?void 0:s?Oc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Lc(e,i,n),n};const eo="events:betChanged",mn="events:betVisibility";let Ui=class extends _{init(){this.visible=this.selection.visible=!1,this.selection.on(pn,t=>this.close()),this.selection.on(Qr,t=>this.betChangedHandler(t))}select(t){this.values&&this.values.length&&this.selection.select(t,!1,!0)}setValues(t,e){this.values=t,this.selection.setValues(t,!0,e)}open(){return this.visible?!1:(this.openClose(!1,()=>{this.addCloseHandler()}),this.visible=this.selection.visible=!0,this.emit(mn,this.visible),!0)}close(){this.visible&&(this.removeCloseHandler(),this.openClose(!0,()=>{this.visible=this.selection.visible=!1,this.emit(mn,this.visible)}))}betChangedHandler(t){this.emit(eo,t)}openClose(t,e){let i={scale:0},s={scale:1},n=TWEEN.Easing.Exponential.Out;t&&(i={scale:1},s={scale:0},n=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(s,100).easing(n).onUpdate(()=>{this.scale.y=i.scale}).onComplete(()=>{e&&e()}).start()}addCloseHandler(){this.btnClose.enabled=!0,this.btnClose.on("mouseup",this.close,this).on("touchend",this.close,this),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!0,this.parent.clickable.on("mousedown",this.close,this).on("touchstart",this.close,this))}removeCloseHandler(){this.btnClose.enabled=!1,this.btnClose.off("mouseup").off("touchend"),this.parent&&this.parent.clickable&&(this.parent.clickable.interactive=!1,this.parent.clickable.off("mousedown").off("touchstart"))}static create(t,e){let i=ve(Ui,t,e);return i.init(),i}};Ui=Ac([f({tag:"betSelection"})],Ui);var Dc=Object.defineProperty,Nc=Object.getOwnPropertyDescriptor,Rc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Nc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Dc(e,i,n),n};let M=class extends _{constructor(){super(),this.clearMessage()}showMessage(t,e,i){if(!(!this.txt||e!==void 0&&e===0))if(t!==void 0){let s=F(t);if(s&&s!=="undefined"){let n="";e&&(n=Jt(P().currency,x().CURRENCY_SYMBOL)+de(e)),this.fade&&this.fade.stop(),this.txt.value=s.replace("%number%",i?i.toString():"").replace("%win%",n).replace("%npl%",i>1?"s":"").replace("%ppl%",i===1?"s":""),this.visible?this.alpha=1:this.fade=ne(this,200),this.visible=!0}else this.clearMessage()}else this.clearMessage()}clearMessage(){!this.txt||!this.visible||(this.fade&&this.fade.stop(),this.fade=Pe(this,200,()=>{this.txt.value="",this.visible=!1}))}static create(t,e){return ve(M,t,e)}};M.SPIN="msg_spin";M.NO_WIN="msg_nowin";M.LINE_WIN="msg_linewin";M.SCATTER_WIN="msg_scatterwin";M.WILD_WIN="msg_wildwin";M.FEATURE_WIN="msg_featurewin";M.BONUS_WIN="msg_bonuswin";M.WAYS_WIN="msg_wayswin";M.LINES_WIN="msg_lineswin";M.BONUS="msg_bonus";M.FREESPIN="msg_freespin";M.RESPIN="msg_respin";M.RESPINS="msg_respins";M=Rc([f({tag:"hudMessage"})],M);var Mc=Object.defineProperty,Wc=Object.getOwnPropertyDescriptor,Fc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Wc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Mc(e,i,n),n};let $i=class extends _{constructor(e){super(),this.pages=[],this.indicators=[],this.options=e}initIndicators(){let e=this.options.numPages;if(!(e<2)){this.indicators=[];for(let i=0;i<e;i++){let s=this.getIndicators(),n=this.getIndicators(!0);s.y=n.y=E.height-this.y-70+this.options.indicatorY,s.x=n.x=(E.width-this.options.indicatorGap*(e-1)-s.width)/2+i*this.options.indicatorGap,this.setIndicatorHandler(n,i),this.addChild(s),this.addChild(n),this.indicators.push({on:s,off:n})}this.updatedHitArea(E.width)}}setIndicatorHandler(e,i){e.interactive=e.buttonMode=!0,e.on("mouseup",s=>this.gotoPage(i)).on("touchend",s=>this.gotoPage(i))}updatedHitArea(e){if(!this.indicators||!this.indicators.length)return;let i=this.indicators[0].off,s=this.options.indicatorGap;this.hitArea=new PIXI.Rectangle(this.x,this.y,e-this.x,i.y-this.options.indicatorY),i.hitArea=new PIXI.Rectangle(-s/10,-s/2,i.width+s/5,i.height+s)}initPages(e,i){let s=this.options.numPages;this.pages=[];for(let n=0;n<s;n++){let r=Ye.instantiate("@img/info"+(n+1));this.addChild(r),this.pages.push(r)}}initListeners(){this.options.numPages>1&&(this.interactive=!0,this.on("mousedown",this.buttonDownHandler).on("mouseup",this.buttonUpHandler).on("mouseupoutside",this.buttonUpHandler).on("touchstart",this.buttonDownHandler).on("touchend",this.buttonUpHandler).on("touchendoutside",this.buttonUpHandler).on("touchmove",this.dropdownMoveHandler).on("mousemove",this.dropdownMoveHandler))}getIndicators(e=!1){let i;return this.options.indicatorBase?i=Ye.instantiate(this.options.indicatorBase):i=Ye.instantiate(e?this.options.indicatorOff:this.options.indicatorOn),e&&this.options.indicatorOffTint>-1&&(i.tint=this.options.indicatorOffTint),!e&&this.options.indicatorOnTint>-1&&(i.tint=this.options.indicatorOnTint),i}get currentPage(){return this.pages[this._currentPageIndex]}get currentPageIndex(){return this._currentPageIndex}setPageIndex(e,i=!1){if(this.options.numPages<2||this._currentPageIndex===e&&!i)return;for(let n=0;n<this.pages.length;n++)this.pages[n].visible=!1,this.indicators[n].on.visible=!1,this.indicators[n].off.visible=!0;let s=this.pages[this._currentPageIndex];s&&s.deactivate(),this._currentPageIndex=e,this.pages[e].activate(),this.currentPage.visible=!0,this.indicators[e].on.visible=!0,this.indicators[e].off.visible=!1}gotoPage(e){this.interactive=!1,this.isDown=!1;let i={x:this.currentPage.x},s=-1,n=this.currentPage.width;e>this.currentPageIndex&&(n*=s,s=1),this.pages[e].x=this.currentPage.width*-s,this.pages[e].visible=!0,new TWEEN.Tween(i).to({x:n},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=i.x,this.pages[e].x=this.currentPage.x+this.currentPage.width*s}).onComplete(()=>{this.interactive=!0,this.currentPage.deactivate(),this.setPageIndex(e),this.track()}).start()}buttonDownHandler(e){this.isDown=!0,this.touchDownX=e.data.getLocalPosition(this,e.data.global).x}buttonUpHandler(e){if(!this.isDown)return;this.isDown=!1;let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;if(this.interactive=!1,i>0){let s={x:this.currentPage.x};new TWEEN.Tween(s).to({x:i>100?this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=s.x,this.prevPage.x=this.currentPage.x-this.currentPage.width}).onComplete(()=>{this.interactive=!0,i>100&&(this.setPageIndex(this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1),this.track())}).start()}else{let s={x:this.currentPage.x};new TWEEN.Tween(s).to({x:i<-100?-this.currentPage.width:0},100).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{this.currentPage.x=s.x,this.nextPage.x=this.currentPage.x+this.currentPage.width}).onComplete(()=>{this.interactive=!0,i<-100&&(this.setPageIndex(this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1),this.track())}).start()}}track(){q.screen({name:"info"+this.currentPageIndex})}get nextPage(){return this.pages[this._currentPageIndex===this.pages.length-1?0:this._currentPageIndex+1]}get prevPage(){return this.pages[this._currentPageIndex>0?this._currentPageIndex-1:this.pages.length-1]}dropdownMoveHandler(e){if(this.isDown){let i=e.data.getLocalPosition(this,e.data.global).x-this.touchDownX;this.currentPage.x=i,i>0?(this.nextPage.visible=!1,this.prevPage.visible=!0,this.prevPage.x=this.currentPage.x-this.currentPage.width):(this.prevPage.visible=!1,this.nextPage.visible=!0,this.nextPage.x=this.currentPage.x+this.currentPage.width)}}static create(e,i){return vs($i,e,i)}};$i=Fc([f({tag:"infoPanel"})],$i);function vs(t,e,i){Te(e,"indicatorOnTint",S.resolve(c(e,"indicatorOnTint"))),Te(e,"indicatorOffTint",S.resolve(c(e,"indicatorOffTint")));let s=new t({numPages:parseInt(S.resolve(c(e,"pages"))),indicatorBase:c(e,"indicatorBase"),indicatorOn:c(e,"indicatorOn"),indicatorOff:c(e,"indicatorOff"),indicatorOnTint:l(e,"indicatorOnTint",-1),indicatorOffTint:l(e,"indicatorOffTint",-1),indicatorOffsetYL:l(e,"indicatorOffsetYL",50),indicatorOffsetYP:l(e,"indicatorOffsetYP",180),indicatorGap:l(e,"indicatorGap",80),indicatorY:l(e,"indicatorY",0)});return k(s,e,i),s.initPages(e,i),s.initIndicators(),s.initListeners(),s.setPageIndex(0),s}var Hc=Object.defineProperty,kc=Object.getOwnPropertyDescriptor,Uc=(t,e,i,s)=>{for(var n=s>1?void 0:s?kc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Hc(e,i,n),n};let Vi=class extends $i{initPages(e,i){this.pages=[],z(e,(s,n)=>{let r=$e(s,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}static create(e,i){return vs(Vi,e,i)}};Vi=Uc([f({tag:"infoPanel"})],Vi);var $c=Object.defineProperty,Vc=Object.getOwnPropertyDescriptor,jc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Vc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&$c(e,i,n),n};let ji=class extends Vi{initIndicators(){let e=this.options.numPages;if(!(e<2)){for(let i=0;i<e;i++){let s=this.getIndicators(),n=this.getIndicators(!0);this.addChild(s),this.addChild(n),this.indicators.push({on:s,off:n})}this.setIndicatorsPoistion(!0)}}setIndicatorsPoistion(e=!1){let i=this.options.numPages;if(i<2)return;let s=v.get("orientationService").getOrientation();for(let n=0;n<i;n++){let r=this.indicators[n].on,o=this.indicators[n].off,a,h;s===W.LANDSCAPE?(a=E.height-this.y-this.options.indicatorOffsetYL+this.options.indicatorY,h=(E.width-this.options.indicatorGap*(i-1)-r.width)/2+n*this.options.indicatorGap):(a=E.width-this.y-this.options.indicatorOffsetYP+this.options.indicatorY,h=(E.height-this.options.indicatorGap*(i-1)-r.width)/2+n*this.options.indicatorGap),r.y=o.y=a,r.x=o.x=h,e&&this.setIndicatorHandler(o,n)}this.updatedHitArea(s===W.LANDSCAPE?E.width:E.height)}initPages(e,i){this.pages=[],z(e,(s,n)=>{let r=$e(s,{scene:i.scene,parent:this,context:i.context});this.addChild(r),this.pages.push(r)})}refreshCurrentPage(){this.setPageIndex(this.currentPageIndex,!0)}onOrientationChange(e){super.onOrientationChange(e),this.setIndicatorsPoistion(),this.refreshCurrentPage()}static create(e,i){return vs(ji,e,i)}};ji=jc([f({tag:"infoPanel"})],ji);var Gc=Object.defineProperty,Xc=Object.getOwnPropertyDescriptor,Yc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Xc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Gc(e,i,n),n};let Gi=class extends ji{setIndicatorsPoistion(t=!1){let e=this.options.numPages;if(e<2)return;let i=v.get("orientationService").getOrientation();for(let s=0;s<e;s++){let n=this.indicators[s].on,r=this.indicators[s].off,o,a;i===W.LANDSCAPE?(o=E.minHeight-this.options.indicatorOffsetYL,a=(E.minWidth-this.options.indicatorGap*(e-1)-n.width)/2+s*this.options.indicatorGap):(o=E.minWidth-this.options.indicatorOffsetYP,a=(E.minHeight-this.options.indicatorGap*(e-1)-n.width)/2+s*this.options.indicatorGap),n.y=r.y=o,n.x=r.x=a,t&&this.setIndicatorHandler(r,s)}this.updatedHitArea(i===W.LANDSCAPE?E.width:E.height)}setIndicatorHandler(t,e){super.setIndicatorHandler(t,e),t.hitArea=new PIXI.Rectangle(-2,-2,t.width+4,t.height+6)}updatedHitArea(t){if(!this.indicators||!this.indicators.length)return;let e=this.indicators[0].off;this.hitArea=new PIXI.Rectangle(-this.x,0,t,e.y+e.height+6)}initPages(t,e){let i=Be(t,"jackpotPagesNo");if(i.length>0&&!bs()){let n=1;this.pages=[],z(t,(r,o)=>{if(i.indexOf(n++)<0){let a=$e(r,{scene:e.scene,parent:this,context:e.context});this.addChild(a),this.pages.push(a)}}),this.options.numPages=this.pages.length;return}super.initPages(t,e)}static create(t,e){return vs(Gi,t,e)}};Gi=Yc([f({tag:"infoPanel"})],Gi);let to=!0,Et;function zc(){if(Et!==void 0)return Et;Et=!1;try{(T.mobile||T.tablet)&&"userActivation"in navigator&&navigator.userActivation.hasBeenActive&&"vibrate"in navigator&&(Et=!0)}catch{}return Et}function qc(){return to}function Kc(t){to=t}var Jc=Object.defineProperty,Zc=Object.getOwnPropertyDescriptor,Qc=(t,e,i,s)=>{for(var n=s>1?void 0:s?Zc(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Jc(e,i,n),n};let nt=class extends _{constructor(t){super(),this.options=t}init(t){this.context=t,this.visible=!1,this.initCloseClickable(),this.arrangeButtons(),this.checkSounds(),this.checkVibration()}show(){}arrangeButtons(){this.setLandscapeButtons(),this.setPortraitButtons()}checkSounds(){let t=v.get("soundService");this.panel.landscape.sound.selected=this.panel.portrait.sound.selected=t.muted}checkVibration(){this.panel.landscape.vibration&&this.panel.portrait.vibration&&(this.panel.landscape.vibration.selected=this.panel.portrait.vibration.selected=qc())}setLandscapeButtons(){let t=this.panel.landscape;if(t.panelbglong&&t.panelbgshort){this.setDynamicLayout("landscape");return}let e=4,i=this.getButtonsOrder(t),s=Math.floor(this.options.l_center-this.options.l_gap*i.buttons.length/2+this.options.l_gap/2);for(var n=0;n<i.buttons.length;n++)i.buttons[n].visible=!0,i.buttons[n].x=s+this.options.l_gap*n,i.labels[n].visible=!0,i.labels[n].x=i.buttons[n].x-e,i.labels[n].y=i.buttons[n].y+i.buttons[n].height-Math.floor(i.labels[n].height/2)}setPortraitButtons(){this.setDynamicLayout("portrait")}setDynamicLayout(t){let e=4,i=t.charAt(0)+"_",s=this.panel[t],n=this.getButtonsOrder(s);s.panelbgshort.visible=!1,s.panelbglong.visible=!1;let r=[],o=0;for(var a=0;a<n.buttons.length;a++)a%this.options[i+"itemPerRow"]===0&&(r[o]=[]),r[o].push({button:n.buttons[a],label:n.labels[a]}),(a+1)%this.options[i+"itemPerRow"]===0&&o++;if(r.length==2)s.panelbgshort.visible=!1,s.panelbglong.visible=!0,r.reverse();else{let p=s.panelbglong.height-s.panelbgshort.height;s.panelbgshort.visible=!0,s.panelbglong.visible=!1,s.logo.y+=p,s.close.y+=p}for(var h=0;h<r.length;h++){let p=Math.floor(this.options[i+"center"]-this.options[i+"gap"]*r[h].length/2+this.options[i+"gap"]/2);for(var u=0;u<r[h].length;u++)r[h][u].button.visible=!0,r[h][u].label.visible=!0,r[h][u].button.x=p+this.options[i+"gap"]*u,r[h][u].label.x=r[h][u].button.x-e,r[h][u].button.y=this.options[i+"row"][h],r[h][u].label.y=this.options[i+"row"][h]+r[h][u].button.height-Math.floor(r[h][u].label.height/2)}}getButtonsOrder(t){let e=[t.info,t.sound],i=[t.lblInfo,t.lblSound];return this.lobbyVisible&&(e.push(t.lobby),i.push(t.lblLobby)),t.settings&&(e.push(t.settings),i.push(t.lblSettings)),this.historyVisible&&(e.push(t.history),i.push(t.lblHistory)),this.homeVisible&&(e.push(t.home),i.push(t.lblHome)),this.vibrationVisible&&(t.vibration&&e.push(t.vibration),t.lblVibration&&i.push(t.lblVibration)),this.liveChatVisible&&(e.push(t.livechat),i.push(t.lblLiveChat)),this.helpVisible&&(e.push(t.help),i.push(t.lblHelp)),{buttons:e,labels:i}}hide(){this.close(),this.visible=!1}toggleAll(t){this.bonusbet&&(this.bonusbet.visible=t),this.fround&&(this.fround.visible=this.froundVisible&&t),this.help&&(this.help.visible=this.helpVisible&&t)}open(){return this.visible?!1:(this.closing=!1,this.openClose(),this.visible=!0,!0)}close(t){!this.visible||this.closing||(this.closing=!0,this.openClose(!0,()=>{this.closing=!1,this.visible=!1,this.emit(nt.MENU_CLOSED)}))}openClose(t,e){let i={scale:0,y:this.height},s={scale:1,y:0},n=TWEEN.Easing.Exponential.Out;t&&(i={scale:1,y:0},s={scale:0,y:this.height},n=TWEEN.Easing.Exponential.In),new TWEEN.Tween(i).to(s,100).easing(n).onUpdate(()=>{this.panel.scale.y=i.scale,this.panel.y=i.y}).onComplete(()=>{e&&e()}).start()}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.panel.landscape.close&&this.panel.landscape.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this),this.panel.portrait.close&&this.panel.portrait.close.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)}get froundVisible(){return P().fround}get lobbyVisible(){return this.context.realLobbyUrl&&this.context.HIDE_LOBBY==="0"}get liveChatVisible(){return this.context.livechatUrl}get historyVisible(){return!this.context.FUNPLAY}get homeVisible(){return this.context.HOME_URL}get vibrationVisible(){return this.context&&this.context.isVibrationActivated&&zc()}get helpVisible(){return this.context.helpUrl}get buttonCloseLandscape(){return this.panel.landscape.close}get buttonClosePortrait(){return this.panel.portrait.close}static create(t,e){let i=Be(t,"p-row");i.length===0&&(i=[350,235]);let s=new nt({l_center:l(t,"l-center",480),p_center:l(t,"p-center",270),l_gap:l(t,"l-gap",125),p_gap:l(t,"p-gap",125),l_itemPerRow:l(t,"l-itemPerRow",4),p_itemPerRow:l(t,"p-itemPerRow",4),l_row:Be(t,"l-row"),p_row:i});return Fn(s,t,e)}onOrientationChange(t){super.onOrientationChange(t),this.checkSounds(),this.checkVibration()}};nt.MENU_CLOSED="events:menu_closed";nt=Qc([f({tag:"menu"})],nt);var ep=Object.defineProperty,tp=Object.getOwnPropertyDescriptor,ip=(t,e,i,s)=>{for(var n=s>1?void 0:s?tp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ep(e,i,n),n};let Xi=class extends St{static create(t,e){return sp(Xi,t,e)}};Xi=ip([f({tag:"button"})],Xi);function sp(t,e,i){return Zr(t,e,i)}var np=Object.defineProperty,rp=Object.getOwnPropertyDescriptor,op=(t,e,i,s)=>{for(var n=s>1?void 0:s?rp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&np(e,i,n),n};let Yi=class extends yt{constructor(){super(...arguments),this._enabled=!1}init(e){this.options=e,this.options.spinHintIndex=this.indexOfFrame("spinHint")}hide(){this.enabled=!1}show(e){e!==void 0&&(this._state=e),this.goto(this._state),this.enabled=!0}goto(e){let i=super.goto(e);return this._hintIndex=this.getHintIndex(e),this._hintIndex>=0&&(this.frames[this._hintIndex].visible=!0,this.addChild(this.frames[this._hintIndex])),i}getHintIndex(e){return this.indexOfFrame(e+"Hint")}set state(e){this.goto(e),this._state=e}get state(){return this._state}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.current&&(this.current instanceof Xi||this.current instanceof St)&&(this.current.enabled=e),this._hintIndex>=0&&(this.frames[this._hintIndex].tint=e?this.options.spinHintTint:this.options.spinHintDisabledTint)}update(){this._state=="spin"&&this._hintIndex>=0&&(this.frames[this._hintIndex].rotation+=this._enabled?this.options.spinHintRotation:this.options.spinningRotation)}resetSpinRotation(){this._hintIndex>=0&&(this.frames[this._hintIndex].rotation=0)}static create(e,i){return io(Yi,e,i)}};Yi=op([f({tag:"spinButton"})],Yi);function io(t,e,i){let s=Vn(t,e,i),n={spinHintIndex:-1,spinHintRotation:0,spinningRotation:0,spinHintTint:16777215,spinHintDisabledTint:16777215};return z(e,(r,o)=>{ee(r)==="spinHint"&&(Te(r,"tint",S.resolve(c(r,"spinHintTint"))),Te(r,"spinHintDisabledTint",S.resolve(c(r,"spinHintDisabledTint"))),n.spinHintRotation=l(r,"spinHintRotation",.006),n.spinningRotation=l(r,"spinningRotation",.25),n.spinHintTint=l(r,"tint",16777215),n.spinHintDisabledTint=l(r,"spinHintDisabledTint",16777215))}),s.init(n),s}var ap=Object.defineProperty,lp=Object.getOwnPropertyDescriptor,hp=(t,e,i,s)=>{for(var n=s>1?void 0:s?lp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ap(e,i,n),n};let zi=class extends Yi{static create(t,e){return up(zi,t,e)}};zi=hp([f({tag:"spinButton"})],zi);function up(t,e,i){return io(t,e,i)}var cp=Object.defineProperty,pp=Object.getOwnPropertyDescriptor,so=(t,e,i,s)=>{for(var n=s>1?void 0:s?pp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&cp(e,i,n),n};let qi=class extends Zt{onCreated(){this.initCommand(),this.playSound()}initCommand(){d.on("infoPage",()=>{this.backClickHandler()})}backClickHandler(){D.replace("main")}playSound(t=!0){t?this.soundService.switchScope(!0)&&(this.bgmInfo=this.soundService.play("bgm-info","info")):(this.bgmInfo&&this.soundService.stop(this.bgmInfo.soundId),this.soundService.switchScope(),this.bgmInfo=null)}exit(){d.off("infoPage"),this.playSound(!1),super.exit()}};so([Me("soundService")],qi.prototype,"soundService",2);qi=so([f({tag:"infoPage",category:"scene"})],qi);const ct=class ct{constructor(){ct.canvas||(ct.canvas=document.getElementById("stage"))}createDiv(e){var i=document.createElement("div");return i.innerHTML=e,i}createPlaceholder(e){var i=document.createElement("div");return i.style.height=e,i}static getBase(){return this.base||(this.base=document.createElement("div"),this.base.style=this.canvas.style,this.canvas.parentElement.insertBefore(this.base,this.canvas)),this.base}render(){}static getFont(){let e=S.LANGUAGE;return this.font[e]||this.font[N.English]}show(){this.content&&(this.content.style.display="block")}hide(){this.content&&(this.content.style.display="none")}static querySelector(e){let i=new ct;return i.content=document.querySelector(e),i}};ct.font={en:"DIN",cs:"Microsoft YaHei",jp:"Kozuka Mincho Pro",kh:"Khmer OS Battambang",kr:"Nokora",pt:"Arial",th:"Tahoma",tr:"Arial",vn:"Tahoma"};let pe=ct;function dt(t){let e=document.getElementById(t);e&&e.parentElement&&e.parentElement.removeChild(e)}const Ft=class Ft extends _{constructor(){super(...arguments),this.MIN_WIDTH=1024,this.MAX_WIDTH=1170,this.stopTotalBetLimits=[5,10,20,50,-1]}init(e,i){this.visible=!1,dt("autospinCustomBox"),dt("autospinWinexceedsBox"),dt("autospinBalanceincreassesBox"),this.textInputOption=e,this.isDesktop=T.desktop,this.initCommand(),this.initSettings()}open(){return!1}close(e){}start(){this.player.autoSpinSettings&&(this.player.autoSpinSettings.inAutoSpins=!0,this.player.autoSpinSettings.startBalance=this.player.balance,this.track())}resetStopLimitBtn(){this.currentSettings.stopAtTotalBet!==0?(this.currentSettings.selectedLimit=this.currentSettings.stopAtTotalBet,this.currentSettings.stopAtTotalBet=0):(this.currentSettings.selectedLimit=-1,this.currentSettings.stopAtTotalBet=-1),this.enableStopLimitBtn()}enableNumSpinBtn(){this.enableSelectionBtn("numSpins",this.player.autoSpin,!0)}enableStopLimitBtn(){this.customInput&&(this.customInput.style.border=this.textInputOption.border),this.enableSelectionBtn("stopLimits",this.currentSettings.stopAtTotalBet)}enableSelectionBtn(e,i,s){}onNumSpinsHandler(e){let i=this.player.autoSpinValues.indexOf(parseInt(e.id));parseInt(e.id)===-1&&(this.player.autoSpin=parseInt(e.id)),i>=0&&(this.player.autoSpin=this.player.autoSpinValues[i]),this.currentSettings.autoSpin=this.player.autoSpin,this.enableNumSpinBtn()}onStopLimitHandler(e){let i=this.stopTotalBetLimits.indexOf(parseInt(e.id));i>=0?(this.currentSettings.stopAtTotalBet=this.stopTotalBetLimits[i],this.customInput&&(this.customInput.value="")):(this.currentSettings.stopAtTotalBet=0,this.customInput&&(this.customInput.value="")),this.enableStopLimitBtn(),this.currentSettings.selectedLimit=0,this.customInput&&this.customInput.blur()}onFeaturesHandler(e){this.currentSettings.stopAtFeature=e.selected,this.onBlurInputs()}renderInputs(){this.advanced.visible&&(this.customInput=this.setTextInput(this.customInput,"autospinCustomBox",this.currentSettings.stopAtCustom),this.winexceedsInput=this.setTextInput(this.winexceedsInput,"autospinWinexceedsBox",this.currentSettings.stopAtWin),this.balanceincreassesInput=this.setTextInput(this.balanceincreassesInput,"autospinBalanceincreassesBox",this.currentSettings.stopAtBalance),this.validateAllInputs())}setTextInput(e,i,s=0){if(!this.advanced.visible)return this.clearTextInputs(),e;let n=pe.canvas,r=parseFloat(n.style.marginLeft),o=parseFloat(n.style.marginTop),a=this.advanced[i].width-3,h=this.advanced[i].height-5,u=Math.min(se.scale.x,se.scale.y);this.isDesktop&&E.width<this.MIN_WIDTH&&E.canvas.width>this.MIN_WIDTH&&(r=0,o=0,E.canvas.width>this.MAX_WIDTH&&(u=this.MAX_WIDTH/E.width));let p=parseFloat(this.textInputOption.textIndent)*u,g=a*u-p*2,m=h*u,A=u*this.textInputOption.fontSize,L=r+(this.parent.x+this.x+this.advanced.x-this.advanced.pivot.x+this.advanced[i].x)*u,G=o+(this.parent.y+this.y+this.advanced.y-this.advanced.pivot.y+this.advanced[i].y)*u;return e?e.style.visibility="hidden":(e=document.createElement("input"),e.type=this.textInputOption.type,e.min=this.textInputOption.min,e.max=this.textInputOption.max,e.contentEditable=this.textInputOption.contentEditable,e.style.fontFamily=this.textInputOption.fontFamily,e.style.textAlign=this.textInputOption.textAlign,e.style.color=this.textInputOption.color,e.style.position=this.textInputOption.position,e.style.background=this.textInputOption.background,e.style.border=this.textInputOption.border,e.style.outline=this.textInputOption.outline,e.id=i,s>0&&(e.value=s.toString()),n.parentElement.insertBefore(e,n),e.addEventListener("focus",Le=>this.onFocusInput(Le),!0),e.addEventListener("keypress",Le=>this.validateInputs(Le),!0),e.addEventListener("keyup",Le=>this.checkInputs(Le),!0)),e.style.fontSize=`${A}px`,e.style.width=`${g}px`,e.style.height=`${m}px`,e.style.marginTop=`${G}px`,e.style.marginLeft=`${L}px`,e.style.paddingLeft=e.style.paddingRight=`${p}px`,e.style.visibility="visible",e}clearTextInputs(){this.customInput&&(this.customInput.value&&parseFloat(this.customInput.value)>0?this.currentSettings.stopAtCustom=parseFloat(this.customInput.value):this.currentSettings.stopAtCustom=0,this.clearTextInput(this.customInput)),this.winexceedsInput&&(parseFloat(this.winexceedsInput.value)>=0?this.currentSettings.stopAtWin=parseFloat(this.winexceedsInput.value):this.currentSettings.stopAtWin=0,this.clearTextInput(this.winexceedsInput)),this.balanceincreassesInput&&(parseFloat(this.balanceincreassesInput.value)>=0?this.currentSettings.stopAtBalance=parseFloat(this.balanceincreassesInput.value):this.currentSettings.stopAtBalance=0,this.clearTextInput(this.balanceincreassesInput)),this.customInput=this.winexceedsInput=this.balanceincreassesInput=null}clearTextInput(e){e.removeEventListener("focus",i=>this.onFocusInput(i),!0),e.removeEventListener("keypress",i=>this.validateInputs(i),!0),e.removeEventListener("keyup",i=>this.checkInputs(i),!0),pe.canvas.parentElement.removeChild(e)}validateInputs(e){if(e.target){if(["backspace","delete"].indexOf(e.key.toLowerCase())>=0)return;var i=/[0-9]|\./;(!i.test(e.key)||e.key==="."&&e.target.value.indexOf(".")>=0||e.target.value.length>=this.textInputOption.max.length)&&(e.returnValue=!1,e.preventDefault&&e.preventDefault()),e.target.value.length===0&&["0","."].indexOf(e.key)>=0&&(e.returnValue=!1,e.preventDefault&&e.preventDefault(),e.target.value="0.")}}checkInputs(e){e.target&&(parseFloat(e.target.value)===0&&e.target.value.indexOf("0.")<0?e.target.value="":e.target.value.indexOf(".")<0&&!isNaN(parseFloat(e.target.value))?e.target.value=parseFloat(e.target.value):e.target.value.indexOf(".")===0&&(e.target.value="0"+e.target.value))}validateDecimal(e){e&&(e.value.indexOf(".")>=0&&(e.value=de(e.value)),e.style.border=this.textInputOption.border)}onFocusInput(e){this.validateAllInputs(),e.target&&e.target.id&&(e.target.id==="autospinCustomBox"?(this.resetStopLimitBtn(),this.customCurrency&&(this.customCurrency.visible=!0)):(e.target.id==="autospinWinexceedsBox"?this.winexceedsCurrency&&(this.winexceedsCurrency.visible=!0):this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=!0),this.resetStopLimitValue())),e.target.style.border=this.textInputOption.borderFocus}onBlurInputs(e=!0){this.validateAllInputs(!0),this.resetStopLimitValue()}validateAllInputs(e){this.customInput&&(this.validateDecimal(this.customInput),e&&this.customInput.blur(),this.customCurrency&&(this.customCurrency.visible=this.customInput.value!=="")),this.winexceedsInput&&(this.validateDecimal(this.winexceedsInput),e&&this.winexceedsInput.blur(),this.winexceedsCurrency&&(this.winexceedsCurrency.visible=this.winexceedsInput.value!=="")),this.balanceincreassesInput&&(this.validateDecimal(this.balanceincreassesInput),e&&this.balanceincreassesInput.blur(),this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=this.balanceincreassesInput.value!==""))}resetStopLimitValue(){this.customInput&&(this.stopTotalBetLimits.indexOf(this.currentSettings.selectedLimit)>=0&&(!this.customInput.value||parseFloat(this.customInput.value)<=0)&&(this.customInput.value="",this.currentSettings.stopAtTotalBet=this.currentSettings.selectedLimit,this.currentSettings.selectedLimit=0),this.enableStopLimitBtn())}initSettings(){this.player.autoSpinSettings||(this.player.autoSpinSettings={stopAtCustom:0,stopAtWin:0,stopAtBalance:0,stopAtFeature:!1,autoSpin:this.player.autoSpinValues[this.player.autoSpinValues.length-1],stopAtTotalBet:this.stopTotalBetLimits[this.stopTotalBetLimits.length-1],inAutoSpins:!1,selectedLimit:0,startBalance:this.player.balance}),this.currentSettings=Object.create(this.player.autoSpinSettings),this.currentSettings.inAutoSpins||(this.player.autoSpin=this.currentSettings.autoSpin),this.enableNumSpinBtn(),this.customCurrency&&this.winexceedsCurrency&&this.balanceincreassesCurrency&&(this.customCurrency.value=this.winexceedsCurrency.value=this.balanceincreassesCurrency.value=Jt(this.player.currency,x().CURRENCY_SYMBOL),this.customCurrency.visible=this.winexceedsCurrency.visible=this.balanceincreassesCurrency.visible=!1)}initCommand(){d.on("onNumSpins",e=>this.onNumSpinsHandler(e.context))}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.advanced.autospinCustomBox&&(this.advanced.autospinCustomBox.interactive=!0),this.advanced.autospinWinexceedsBox&&(this.advanced.autospinWinexceedsBox.interactive=!0),this.advanced.autospinBalanceincreassesBox&&(this.advanced.autospinBalanceincreassesBox.interactive=!0),this.advanced.panelBG.interactive=!0,this.advanced.panelBG.on("mouseup",()=>this.onBlurInputs(),this).on("touchend",()=>this.onBlurInputs(),this)}get customCurrency(){return this.advanced.customCurrency}get winexceedsCurrency(){return this.advanced.winexceedsCurrency}get balanceincreassesCurrency(){return this.advanced.balanceincreassesCurrency}get player(){return P()}track(){let e=this.player.currency+" ";q.event({name:"autoSpin",properties:{"Auto Spin":this.currentSettings.autoSpin<0?"Unlimited":this.currentSettings.autoSpin,"Stop Auto - Loss Limit":this.currentSettings.stopAtCustom>0?e+this.currentSettings.stopAtCustom:this.currentSettings.stopAtTotalBet>0?"x"+this.currentSettings.stopAtTotalBet:"No Limit","Stop Auto - Single Win Exceeds":e+this.currentSettings.stopAtWin,"Stop Auto - Balance Increased By":e+this.currentSettings.stopAtBalance,"Stop Auto - Bonus Features Won":this.currentSettings.stopAtFeature},measurements:{}})}static createAutoSpin(e,i,s){let n=ve(e,i,s);return n.init({type:c(i,"type","text"),min:c(i,"min","0"),max:c(i,"max","9999999999"),contentEditable:c(i,"contentEditable","true"),fontFamily:c(i,"fontFamily","Din, Arial"),fontSize:l(i,"fontSize",16),textAlign:c(i,"textAlign","left"),textIndent:c(i,"textIndent","0"),color:c(i,"color","0x0"),position:c(i,"position","absolute"),background:c(i,"background","transparent"),border:c(i,"border","none"),borderFocus:c(i,"borderFocus","none"),outline:c(i,"outline","none")},c(i,"view",Ft.BASIC_VIEW)),n}};Ft.BASIC_VIEW="basic",Ft.ADVANCED_VIEW="advanced";let wt=Ft;var dp=Object.defineProperty,fp=Object.getOwnPropertyDescriptor,mp=(t,e,i,s)=>{for(var n=s>1?void 0:s?fp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&dp(e,i,n),n};let _e=class extends wt{init(e,i){this.view=i,super.init(e),this.initCloseClickable(),this.isDesktop?Q.on(xi,this.renderInputs,this):(Q.on(xi,this.setKeyboardPosition,this),this.customLabel&&(this.customLabel.hasComma=!1),this.winexceedsLabel&&(this.winexceedsLabel.hasComma=!1),this.balanceincreassesLabel&&(this.balanceincreassesLabel.hasComma=!1))}initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.advanced.customBox&&(this.advanced.customBox.interactive=!0),this.advanced.winexceedsBox&&(this.advanced.winexceedsBox.interactive=!0),this.advanced.balanceincreassesBox&&(this.advanced.balanceincreassesBox.interactive=!0),this.advanced["panelBG-l"].interactive=!0,this.advanced["panelBG-l"].on("mouseup",()=>this.onBlurInputs(),this).on("touchend",()=>this.onBlurInputs(),this);let e=this.advanced["panelBG-p"];e&&(e.interactive=!0,e.on("mouseup",()=>this.onBlurInputs(),this).on("touchend",()=>this.onBlurInputs(),this))}open(){return this.visible?!1:(this.visible=!0,this.initSettings(),this.openClose(this.basic,!1,()=>{this.closing=!1}),this.visible=!0,this.view===_e.BASIC_VIEW||this.renderInputs(),!0)}close(e){if(!this.visible)return;this.closing=!0,this.clearTextInputs(),this.onBlurInputs(!1);let i=this.basic;this.advanced.visible&&(i=this.advanced),e?(Xe(),this.currentSettings=Object.create(this.player.autoSpinSettings)):this.player.autoSpinSettings=Object.create(this.currentSettings),this.openClose(i,!0,()=>{this.closing=!1,this.visible=!1,this.basic.visible=!0,this.advanced.visible=!1,this.basic.scale.set(1,1),this.advanced.scale.set(1,1)})}renderInputs(){if(this.isDesktop){if(!this.advanced.visible)return;this.customInput=this.setTextInput(this.customInput,"customBox",this.currentSettings.stopAtCustom),this.winexceedsInput=this.setTextInput(this.winexceedsInput,"winexceedsBox",this.currentSettings.stopAtWin),this.balanceincreassesInput=this.setTextInput(this.balanceincreassesInput,"balanceincreassesBox",this.currentSettings.stopAtBalance),this.validateAllInputs();return}this.customLabel&&(this.customLabel.value="",this.currentSettings.stopAtCustom>0&&(this.customLabel.value=this.currentSettings.stopAtCustom.toString())),this.winexceedsLabel&&(this.winexceedsLabel.value="",this.currentSettings.stopAtWin>0&&(this.winexceedsLabel.value=this.currentSettings.stopAtWin.toString())),this.balanceincreassesLabel&&(this.balanceincreassesLabel.value="",this.currentSettings.stopAtBalance>0&&(this.balanceincreassesLabel.value=this.currentSettings.stopAtBalance.toString())),this.validateAllLabelInputs()}clearTextInputs(){if(this.isDesktop){super.clearTextInputs();return}this.customLabel&&(this.customLabel.value&&parseFloat(this.customLabel.value)>0?this.currentSettings.stopAtCustom=parseFloat(this.customLabel.value):this.currentSettings.stopAtCustom=0,this.customLabel.value=""),this.winexceedsLabel&&(parseFloat(this.winexceedsLabel.value)>=0?this.currentSettings.stopAtWin=parseFloat(this.winexceedsLabel.value):this.currentSettings.stopAtWin=0,this.winexceedsLabel.value=""),this.balanceincreassesLabel&&(parseFloat(this.balanceincreassesLabel.value)>=0?this.currentSettings.stopAtBalance=parseFloat(this.balanceincreassesLabel.value):this.currentSettings.stopAtBalance=0,this.balanceincreassesLabel.value)}onStopLimitHandler(e){if(this.isDesktop){super.onStopLimitHandler(e);return}let i=this.stopTotalBetLimits.indexOf(parseInt(e.id));i>=0&&(this.currentSettings.stopAtTotalBet=this.stopTotalBetLimits[i],this.customLabel&&(this.customLabel.value="")),this.enableStopLimitBtn(),this.currentSettings.selectedLimit=0,this.view===_e.ADVANCED_VIEW&&this.onBlurInputs()}enableSelectionBtn(e,i,s){let n,r;r=this.advanced[e],n=this.basic[e],n&&n.children.forEach((o,a)=>{o.enabled=parseInt(o.id)!==i}),r&&r.children.forEach((o,a)=>{o.enabled=parseInt(o.id)!==i})}onNumSpinsHandler(e){super.onNumSpinsHandler(e),this.view===_e.BASIC_VIEW||this.onBlurInputs()}checkLabelInputs(e,i){if(e){var s=/[0-9]|\./;if(!(!s.test(i)||i==="."&&e.value.indexOf(".")>=0||e.value.length>=this.textInputOption.max.length)){if(e.value===" "&&["0","."].indexOf(i)>=0){e.value="0.";return}e.value+=i,parseFloat(e.value)===0&&e.value.indexOf("0.")<0?e.value="":e.value.indexOf(".")<0&&!isNaN(parseFloat(e.value))?e.value=parseFloat(e.value).toString():e.value.indexOf(".")===0&&(e.value="0"+e.value)}}}validateLabelDecimal(e){e&&e.value.indexOf(".")>=0&&(e.value=de(e.value))}onFocusLabel(e){this.validateAllLabelInputs(),e.target.id==="customBox"?(this.currentLabel!==this.customLabel&&(this.customLabel.value===""||this.customLabel.value===" ")&&this.resetStopLimitBtn(),this.customCurrency&&(this.customCurrency.visible=!0),this.currentLabel=this.customLabel):(e.target.id==="winexceedsBox"?(this.currentLabel=this.winexceedsLabel,this.winexceedsCurrency&&(this.winexceedsCurrency.visible=!0)):(this.currentLabel=this.balanceincreassesLabel,this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=!0)),this.resetStopLimitValue()),this.currentBox=e.target,this.keyboard&&(this.keyboard.visible||(this.keyboard.visible=!0,ne(this.keyboard,200))),this.setKeyboardPosition()}onBlurInputs(e=!0){if(this.isDesktop){super.onBlurInputs();return}this.keyboard&&this.keyboard.visible&&Pe(this.keyboard,200,()=>{this.keyboard.visible=!1}),this.validateAllLabelInputs(),this.currentLabel=null,e&&this.resetStopLimitValue()}validateAllLabelInputs(){this.customLabel&&(this.validateLabelDecimal(this.customLabel),this.customCurrency&&(this.customCurrency.visible=this.customLabel.value!==""&&this.customLabel.value!==" ")),this.winexceedsLabel&&(this.validateLabelDecimal(this.winexceedsLabel),this.winexceedsCurrency&&(this.winexceedsCurrency.visible=this.winexceedsLabel.value!==""&&this.winexceedsLabel.value!==" ")),this.balanceincreassesLabel&&(this.validateLabelDecimal(this.balanceincreassesLabel),this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=this.balanceincreassesLabel.value!==""&&this.balanceincreassesLabel.value!==" "))}resetStopLimitValue(){if(this.isDesktop){super.resetStopLimitValue();return}this.stopTotalBetLimits.indexOf(this.currentSettings.selectedLimit)>=0&&this.customLabel&&(!this.customLabel.value||isNaN(parseFloat(this.customLabel.value))||parseFloat(this.customLabel.value)<=0)&&(this.customLabel.value="",this.currentSettings.stopAtTotalBet=this.currentSettings.selectedLimit,this.currentSettings.selectedLimit=0),this.enableStopLimitBtn()}initSettings(){super.initSettings()}initCommand(){super.initCommand(),d.on("onStopLimit",e=>this.onStopLimitHandler(e.context)),d.on("onStartAutoSpin",()=>this.startAutoSpin()),this.isDesktop||(d.on("onKeyboard",e=>this.onKeyboard(e.context)),this.advanced.customBox&&this.advanced.customBox.on("mouseup",e=>this.onFocusLabel(e),this).on("touchend",e=>this.onFocusLabel(e),this),this.advanced.winexceedsBox&&this.advanced.winexceedsBox.on("mouseup",e=>this.onFocusLabel(e),this).on("touchend",e=>this.onFocusLabel(e),this),this.advanced.balanceincreassesBox&&this.advanced.balanceincreassesBox.on("mouseup",e=>this.onFocusLabel(e),this).on("touchend",e=>this.onFocusLabel(e),this)),d.on("expand",()=>this.moreOptions(!0)),d.on("collapse",()=>this.moreOptions())}moreOptions(e=!1){this.expandCollapse(e,()=>{e||(this.showOptions=e),this.advanced.scale.y=1,this.renderInputs()}),e?this.showOptions=e:this.clearTextInputs()}set showOptions(e){this.basic.visible=!e,this.advanced.visible=e}expandCollapse(e,i){let s={scale:1},n={scale:this.basic.height/this.advanced.height},r=TWEEN.Easing.Exponential.In;e?(this.view=_e.ADVANCED_VIEW,s=n,n={scale:1},r=TWEEN.Easing.Exponential.Out):this.view=_e.BASIC_VIEW,this.view===_e.ADVANCED_VIEW&&(this.enableStopLimitBtn(),x().hasFeatures?(this.advanced.byFeatures.selected=this.currentSettings.stopAtFeature,d.on("onFeatures",a=>this.onFeaturesHandler(a.context))):this.advanced.labelFeatures.visible=this.advanced.byFeatures.visible=!1),new TWEEN.Tween(s).to(n,100).easing(r).onUpdate(()=>{this.advanced.scale.y=s.scale}).onComplete(()=>{i()}).start(),this.keyboard&&this.keyboard.visible&&Pe(this.keyboard,200,()=>{this.keyboard.visible=!1})}startAutoSpin(){this.view===_e.ADVANCED_VIEW&&this.onBlurInputs(),this.close(),this.start(),d.emit("startautospin")}onKeyboard(e){this.currentLabel&&(e.id==="X"?this.currentLabel.value="":this.checkLabelInputs(this.currentLabel,e.id))}setKeyboardPosition(){if(this.currentBox&&this.keyboard&&this.keyboard.visible){let e=v.get("orientationService");e&&e.getOrientation()===W.PORTRAIT&&this.advanced["panelBG-p"]?this.keyboard.position.set(this.advanced["panelBG-p"].width-this.keyboard.width-10,this.currentBox.y-this.keyboard.height+this.advanced.y-this.advanced["panelBG-p"].height-15):this.keyboard.position.set(this.currentBox.x,this.currentBox.y-this.keyboard.height-5)}}openClose(e,i,s){let n={scale:0},r={scale:1},o=TWEEN.Easing.Exponential.Out;i&&(n={scale:1},r={scale:0},o=TWEEN.Easing.Exponential.In),new TWEEN.Tween(n).to(r,100).easing(o).onUpdate(()=>{e.scale.y=n.scale}).onComplete(()=>{s&&s()}).start()}get customLabel(){return this.advanced.customLabel}get winexceedsLabel(){return this.advanced.winexceedsLabel}get balanceincreassesLabel(){return this.advanced.balanceincreassesLabel}static create(e,i){return wt.createAutoSpin(_e,e,i)}};_e=mp([f({tag:"autoSpin"})],_e);var bp=Object.defineProperty,gp=Object.getOwnPropertyDescriptor,vp=(t,e,i,s)=>{for(var n=s>1?void 0:s?gp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&bp(e,i,n),n};let Ki=class extends _e{init(e,i){this.view=i,this.visible=!1,dt("customBox"),dt("winexceedsBox"),dt("balanceincreassesBox"),this.textInputOption=e,this.isDesktop=T.desktop,this.initCommand(),this.initSettings(),this.initCloseClickable(),this.isDesktop?Q.on(ln,this.renderInputs,this):(Q.on(ln,this.setKeyboardPosition,this),this.customLabel&&(this.customLabel.hasComma=!1),this.winexceedsLabel&&(this.winexceedsLabel.hasComma=!1),this.balanceincreassesLabel&&(this.balanceincreassesLabel.hasComma=!1))}renderInputs(){if(this.isDesktop){if(!this.advanced.visible)return;this.customInput=this.setTextInput(this.customInput,"customBox",this.currentSettings.stopAtCustom),this.winexceedsInput=this.setTextInput(this.winexceedsInput,"winexceedsBox",this.currentSettings.stopAtWin),this.balanceincreassesInput=this.setTextInput(this.balanceincreassesInput,"balanceincreassesBox",this.currentSettings.stopAtBalance),this.validateAllInputs();return}super.renderInputs()}onFocusInput(e){this.validateAllInputs(),e.target&&e.target.id&&(e.target.id==="customBox"?(this.resetStopLimitBtn(),this.customCurrency&&(this.customCurrency.visible=!0)):(e.target.id==="winexceedsBox"?this.winexceedsCurrency&&(this.winexceedsCurrency.visible=!0):this.balanceincreassesCurrency&&(this.balanceincreassesCurrency.visible=!0),this.resetStopLimitValue())),e.target.style.border=this.textInputOption.borderFocus}setKeyboardPosition(){if(this.currentBox&&this.keyboard&&this.keyboard.visible){let e=this.advanced.x+this.currentBox.x+this.currentBox.width-this.keyboard.width,i=this.advanced.y-E.height+this.currentBox.y-this.currentBox.height-this.keyboard.height;this.keyboard.position.set(e,i)}}static create(e,i){return wt.createAutoSpin(Ki,e,i)}};Ki=vp([f({tag:"autoSpin"})],Ki);var yp=Object.defineProperty,Sp=Object.getOwnPropertyDescriptor,wp=(t,e,i,s)=>{for(var n=s>1?void 0:s?Sp(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&yp(e,i,n),n};let Ji=class extends Ki{initCloseClickable(){this.clickable&&(this.clickable.interactive=!0,this.clickable.on("mouseup",()=>this.close(!0),this).on("touchend",()=>this.close(!0),this)),this.advanced.customBox&&(this.advanced.customBox.interactive=!0),this.advanced.winexceedsBox&&(this.advanced.winexceedsBox.interactive=!0),this.advanced.balanceincreassesBox&&(this.advanced.balanceincreassesBox.interactive=!0)}static create(t,e){return wt.createAutoSpin(Ji,t,e)}};Ji=wp([f({tag:"autoSpin"})],Ji);const Ze=500,xp=[.11,.1,.09,.08,0],mr=[0,6,17,26,38],Ip=[2,5,10,19,8.2],Pp=[20,40,80,200,0],_p=2,bn=5,Cp=990,br=[1,2,3,5],gr=[2,4,6,10],vr=[10,20,30,50],yr=1,no=100,gn=500,Tp="Wild_Drop",Bp="Scatter_Drop",Kt=10,et=9,Ep=[11,12,13,14,15,16,17,18,19],Lp="bgm-main",Op="bgm-free",Ap="sym_stop",Dp="slotfire_scatter",Np="win_scatter1",Rp="win_scatter2",Mp="win_scatter3",Wp="freespin_in",Fp="free_spin_win",Hp="winmeter",vn="fromLoading";function Sr(){const t=[];for(let e=1;e<=20;e++)t.push(Zi("coin_"+e));return t}function ks(){return[Zi("star_0005"),Zi("star_0010")]}function Zi(t,e="spritesAtlas/"){return R.resolve("@atlas/"+e+t+".png")}const kp={alpha:{start:1,end:1},scale:{start:1,end:3,minimumScaleMultiplier:1},color:{start:"#e6e6e6",end:"#ffffff"},speed:{start:900,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:2400},maxSpeed:0,startRotation:{min:230,max:310},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:1.2,max:1.2},blendMode:"normal",frequency:.08,emitterLifetime:-1,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:0,h:0}},Up={alpha:{start:1,end:1},scale:{start:1,end:.5,minimumScaleMultiplier:.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:50,end:60,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:0},noRotation:!1,rotationSpeed:{min:-15,max:30},lifetime:{min:2,max:5},blendMode:"screen",frequency:.01,emitterLifetime:10,maxParticles:200,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:200,minR:0}},$p={alpha:{start:1,end:1},scale:{start:1,end:.2,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:600,startRotation:{min:0,max:-180},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:1},blendMode:"normal",frequency:.005,emitterLifetime:-1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-200,y:-150,w:400,h:300}},Vp={alpha:{start:1,end:.8},scale:{start:1,end:1.5,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:300},maxSpeed:600,startRotation:{min:30,max:-180},noRotation:!1,rotationSpeed:{min:-180,max:540},lifetime:{min:5,max:5},blendMode:"normal",frequency:.005,emitterLifetime:.5,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-140,y:-5,w:280,h:10}},jp={alpha:{start:1,end:1},scale:{start:1,end:.2,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:600,startRotation:{min:0,max:-180},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:1},blendMode:"normal",frequency:.005,emitterLifetime:2,maxParticles:60,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-400,y:-150,w:800,h:300}},Gp={alpha:{start:1,end:.8},scale:{start:.8,end:1,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:300},maxSpeed:600,startRotation:{min:30,max:-180},noRotation:!1,rotationSpeed:{min:0,max:180},lifetime:{min:5,max:5},blendMode:"normal",frequency:.005,emitterLifetime:.5,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-140,y:-5,w:280,h:10}},Xp={bonus:{id:0,count:0},collapsingMultiplier:1,collapsingRemoves:{},collapsingAdds:{},isCollapse:!0,isFirstCollapse:!1,collapsingSpinCount:0,totalWin:0,cumulativeWin:0,spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},isBonus:!0,isBuyFreeSpin:!1,wheel:{height:5,reels:[[6,1,5,4],[0,0,1,2,0],[4,0,5,3,12],[0,6,2,16,7],[6,1,2,7]],type:0,parSheetClsId:0,fallDownAmount:[0,0,0,0,0],fallDownIndexes:[-1,-1,-1,-1,-1],width:5,rows:[4,5,5,5,4],mode:0},winElement:{credit:0,jackpot:0,value:20},numOfScatter:0,numOfFreeSpin:0,credit:0,winPositions:[{line:1,multiplier:.05,rowPositions:[2,3,5,0,0],symbol:1,count:3,win:20,bet:0}],currentFreeSpinStep:0,currentFreeSpinCounter:0,isFreeSpin:!1,isSuperFreeSpin:!1,multiplier:1,hasBonus:!0,type:"s",balance:{conversion:1,credit:9620,value:9620},bet:400,uniqueID:"y/ETRa35SZPKRrpsSAi3ryW8n+aqvRy/GHN8XhStrUo=",win:20,isFreeGame:!1,frsumm:0},Yp=0,zp=!1,qp="None",Kp={value:Xp,error:Yp,isError:zp,errorCode:qp},Jp={spinResult:{bonus:{id:0,count:0},collapsingMultiplier:1,collapsingRemoves:{0:[1],1:[2],2:[],3:[],4:[]},collapsingAdds:{0:[3],1:[0],2:[],3:[],4:[]},isCollapse:!1,isFirstCollapse:!1,collapsingSpinCount:1,totalWin:0,cumulativeWin:0,spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},isBonus:!1,isBuyFreeSpin:!1,wheel:{height:5,reels:[[3,6,5,4],[0,0,0,2,0],[4,0,5,3,10],[0,6,2,16,7],[6,1,2,7]],type:0,parSheetClsId:0,fallDownAmount:[0,0,0,0,0],fallDownIndexes:[-1,-1,-1,-1,-1],width:5,rows:[4,5,5,5,4],mode:0},winElement:{credit:0,jackpot:0,value:0},numOfScatter:0,numOfFreeSpin:0,credit:0,winPositions:[],currentFreeSpinStep:0,currentFreeSpinCounter:0,isFreeSpin:!1,isSuperFreeSpin:!1,multiplier:2,hasBonus:!1,type:"s",bet:0,win:0,isFreeGame:!1,frsumm:0},xmlType:2,isCompleted:!0,step:0,bonus:{spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},gameResult:{bonus:{id:0,count:0},collapsingMultiplier:1,collapsingRemoves:{0:[1],1:[2],2:[],3:[],4:[]},collapsingAdds:{0:[3],1:[0],2:[],3:[],4:[]},isCollapse:!1,isFirstCollapse:!1,collapsingSpinCount:1,totalWin:0,cumulativeWin:0,spinBet:{currencyId:78,gameSettingGroupId:1,isAutoSpin:!1,lineBet:20,lines:0,credits:20,multiplier:1,totalBet:400,funPlayDemoKey:0,reel:0,platformType:3,userGameKey:{gameId:164,isFunPlay:!0,level:0,userId:-1023404015,isBonusAccount:!1,isFreeGame:!1,campaignId:0,frExpired:!0,frWinLose:0,gameMode:0}},isBonus:!1,isBuyFreeSpin:!1,wheel:{height:5,reels:[[3,6,5,4],[0,0,0,2,0],[4,0,5,3,10],[0,6,2,16,7],[6,1,2,7]],type:0,parSheetClsId:0,fallDownAmount:[0,0,0,0,0],fallDownIndexes:[-1,-1,-1,-1,-1],width:5,rows:[4,5,5,5,4],mode:0},winElement:{credit:0,jackpot:0,value:0},numOfScatter:0,numOfFreeSpin:0,credit:0,winPositions:[],currentFreeSpinStep:0,currentFreeSpinCounter:0,isFreeSpin:!1,isSuperFreeSpin:!1,multiplier:2,hasBonus:!1,type:"s",bet:0,win:0,isFreeGame:!1,frsumm:0},guid:"c54a6006-4f20-4189-86e3-c0ace13e3081",id:1,isCompleted:!1,isOptional:!1,isStarted:!0,maxRound:0,maxStepPerCurrentRound:0,version:2},type:"cs",balance:{conversion:1,credit:9620,value:9620},bet:0,uniqueID:"vJ6PmJ7Ooj454j8Smw3mZbLmpA88qktbJIEq8Rv7/tY=",win:0,isFreeGame:!1,frsumm:0},Zp=0,Qp=!1,ed="None",td={value:Jp,error:Zp,isError:Qp,errorCode:ed},ro={base_events:Kp,bonus_events:td},id=.001;class sd{constructor(e,i,s,n=id,r=30){this.parent=e,this.speed=n;const o=new PIXI.Container,a=[{textures:i,framerate:r,loop:!0}];this.emitter=new PIXI.particles.Emitter(o,PIXI.particles.upgradeConfig(s,a)),this.emitter.emit=!1,e.addChild(o),B.add(this)}show(e=0){this.emitter&&(e>0&&(this.emitter.maxParticles=Pp[e-1],this.emitter.frequency=xp[e-1]),this.elapsed=Date.now(),this.emitter.emit=!0)}stop(){this.emitter.emit=!1}destroy(){B.remove(this),this.emitter.destroy(),this.emitter.cleanup(),this.emitter=null,this.parent.removeChildren()}advanceTime(e){if(!this.emitter)return!0;const i=Date.now();return this.emitter.update((i-this.elapsed)*this.speed),this.elapsed=i,!0}}function Lt(t){t.visible||(t.visible=!0,ne(t,500))}function Ot(t){t.visible&&Pe(t,500,()=>{t.visible=!1})}function C(t,e,i=!1,s,n=0){if(s){const r=t.addCompleteListener((o,a)=>{t.removeCompleteListener(r),s&&s()})}t.setAnimation(n,e,i),t.setVisibleAnimated(!0)}function nd(t){j(Wp,"default");const e=P().isTurbo;t.content.spine.timeScale=e?2:1,t.content.spine.setAnimation(0,"Scatter_Trigger",!0),t.content.spine.animated=!0,oe(e?1e3:2e3).then(()=>{t.content.spine.setAnimation(0,"Scatter_Trigger",!1),t.content.spine.animated=!1})}function rd(t,e,i){const s=P().isTurbo,n=s?2:1;i.anime.timeScale=n,i.wild.timeScale=n;const r=Number(t),o=r>10;r!=10?(i.anime.setAnimation(0,"Tile FlipMerged",!1),i.anime.animated=!0):(i.anime.setSkin(`Wild_${mt(!0)}`),C(i.anime,"Wild_Trigger",!1,()=>{C(i.anime,"wildCollapse",!1,()=>{i.anime.setVisibleAnimated(!1)})})),oe(s?1e3:2e3).then(()=>{i.anime.animated=!1,o&&(e.idle(),e.parent.addChildAt(e,e.parent.children.length-1),e.content.spine.setSkin(`Wild_${mt(!0)}`),e.content.spine.setAnimation(0,"Wild_Idle",!0),e.content.spine.animated=!0,e.content.spine.tint=16777215,e.index=10)}),o?oe(s?500:1e3).then(()=>{j("sfx_sym_wild_transform","default"),i.wild.setAnimation(0,"Wild_Trigger",!1),i.wild.animated=!0,i.wild.visible=!0}):i.wild.visible=!1}class od{constructor(e){this.scene=e,this.animated=!0,this.coin_active=!1,this.activeArr=[],this.elapsed=Date.now(),this.coinsEmitter=new sd(e.wineffectbox,Sr(),kp,.0012);const i=new PIXI.Container,s=new PIXI.Container,n=new PIXI.Container;this.getFreeEmitter=new PIXI.particles.Emitter(s,PIXI.particles.upgradeConfig($p,ks())),this.bigWinEmitter=new PIXI.particles.Emitter(i,PIXI.particles.upgradeConfig(Up,ks())),this.freeWinEmitter_yuanbao=new PIXI.particles.Emitter(n,PIXI.particles.upgradeConfig(Vp,Zi("yuanbao"))),this.freeWinEmitter_coin=new PIXI.particles.Emitter(n,PIXI.particles.upgradeConfig(Gp,Sr())),this.freeWinEmitter_s=new PIXI.particles.Emitter(n,PIXI.particles.upgradeConfig(jp,ks())),e.bigWinEffectbox.addChild(i),e.getFreeEffectbox.addChild(s),e.freeWinEffectbox.addChild(n),B.add(this)}playGetFreeEffect(){this.activeArr.push(this.getFreeEmitter),this.getFreeEmitter.playOnce()}stopGetFreeEffect(){je(this.activeArr,this.getFreeEmitter),this.getFreeEmitter.cleanup()}playBigWinEffect(){this.activeArr.push(this.bigWinEmitter),this.bigWinEmitter.playOnce()}stopBigWinEffect(){je(this.activeArr,this.bigWinEmitter),this.bigWinEmitter.cleanup()}playFreeWinEffect(){this.activeArr.push(this.freeWinEmitter_yuanbao),this.activeArr.push(this.freeWinEmitter_coin),this.activeArr.push(this.freeWinEmitter_s),this.freeWinEmitter_yuanbao.playOnce(),this.freeWinEmitter_coin.playOnce(),this.freeWinEmitter_s.playOnce()}stopFreeWinEffect(){je(this.activeArr,this.freeWinEmitter_yuanbao),je(this.activeArr,this.freeWinEmitter_coin),je(this.activeArr,this.freeWinEmitter_s),this.freeWinEmitter_yuanbao.cleanup(),this.freeWinEmitter_coin.cleanup(),this.freeWinEmitter_s.cleanup()}playSmallWinEffect(e){!this.coin_active||!this.coinsEmitter||this.coinsEmitter.show(e)}playWinEffect(e){this.coin_active||(this.coin_active=!0,this.playSmallWinEffect(e))}removeWinEffect(){return this.coin_active=!1,this.coinsEmitter&&this.coinsEmitter.stop(),Promise.resolve()}advanceTime(e){const i=Date.now(),s=i-this.elapsed;for(const n of this.activeArr)n.update(s/1e3);return this.elapsed=i,!0}exit(){}}const ad="__text",ld="text";function oo(t,e=!0){let i={};return $(t)||(Ao(t)?i=fe(t):(ud(i,t.attributes),e&&t.childElementCount>0?z(t,(s,n)=>{let r=oo(s);if($(i[s.nodeName]))i[s.nodeName]=r;else{let o=i[s.nodeName];Pr(o)?o.push(r):o=[o,r],i[s.nodeName]=o}}):hd(i,t))),i}function hd(t,e){let i=fe(e).trim();re(i)&&i.length>0&&(t[ad]=i,t[ld]=()=>i)}function ud(t,e){let i=e.length;for(let s=0;s<i;s++){let n=e[s];t[n.name]=n.value}}function ao(t,e){for(let i in t)e[i]===void 0?e[i]=t[i]:e[i].constructor.name=="Object"&&t[i].constructor.name=="Object"?ao(t[i],e[i]):e[i]=t[i];return e}var lo=(t=>(t[t.Unspecified_error=0]="Unspecified_error",t[t.Incorrect_lines_number=1]="Incorrect_lines_number",t[t.Incorrect_bet=2]="Incorrect_bet",t[t.Incorrect_multiplier=3]="Incorrect_multiplier",t[t.Bonus_Not_Exist=4]="Bonus_Not_Exist",t[t.Wrong_parameters=5]="Wrong_parameters",t[t.Wrong_bonus_step=6]="Wrong_bonus_step",t[t.Can_not_connect=7]="Can_not_connect",t[t.Missing_Room_for_this_user=8]="Missing_Room_for_this_user",t[t.Missing_group_for_this_user=9]="Missing_group_for_this_user",t[t.Insufficient_balance=10]="Insufficient_balance",t[t.Spin_error=11]="Spin_error",t[t.Missing_Currency_Setting=12]="Missing_Currency_Setting",t[t.Nonexistent_hand=13]="Nonexistent_hand",t[t.Wrong_Step=14]="Wrong_Step",t[t.Incorrect_Round=15]="Incorrect_Round",t[t.Unfinised_bonus_game=16]="Unfinised_bonus_game",t[t.Can_not_connect_Server=17]="Can_not_connect_Server",t[t.Login_exist=18]="Login_exist",t[t.Nonexistent_user_data=19]="Nonexistent_user_data",t[t.Game_Maintenance=20]="Game_Maintenance",t[t.System_Maintenance=21]="System_Maintenance",t[t.Non_Existing_Currency=22]="Non_Existing_Currency",t[t.Open_Bonus=23]="Open_Bonus",t[t.Multiple_logins=24]="Multiple_logins",t))(lo||{});function ho(t){let e=l(t,"counter"),i=Hr(t.querySelector("spin"));if(i.success){let s=i.data;return{success:!0,data:Fr(t,{type:ae(t,"type","fs"),mp:l(t,"mp",1),counter:e,win:parseFloat(fe(t.querySelector("win"))),balance:parseFloat(fe(t.querySelector("balance"))),finished:e===0,wheels:s.wheels,winLines:s.winLines,bonusID:s.bonusID,bonusKey:s.bonusKey,bonusPosition:s.bonusPosition,sum:l(t.querySelector("data"),"summ"),fsum:l(t.querySelector("data"),"fsumm"),fssum:l(t.querySelector("data"),"fssumm"),bsum:l(t.querySelector("data"),"bsumm"),addFSCount:l(t.querySelector("bonus"),"addFSCount",0),featureItems:cd(t.querySelector("feature")),data:t})}}else return{success:!1,data:{code:lo.Unspecified_error}}}function cd(t){if(!t)return[];let e=t.querySelectorAll("item");if(!e)return[];let i=[];for(let s=0;s<e.length;s++){let n=e[s],r=oo(n,!1);r.value=parseFloat(fe(n.childNodes[0])),i.push(r)}return i}function yn(t){let e=[];return t&&t.forEach((i,s)=>{e.push(pd(i))}),e}function pd(t){let e=[];return t.rowPositions&&t.rowPositions.forEach((i,s)=>{i>0&&e.push([s,i-1])}),{index:t.line,win:t.win,multiplier:t.multiplier,wildMultiplier:t.wildMultiplier||0,positions:e,symbol:t.symbol,type:t.type}}function dd(t){if(t.value.bonus){let e,i;if(t.value.bonus.gameResult.spinResult?e=t.value.bonus.gameResult.spinResult:t.value.bonus.gameResult&&(e=t.value.bonus.gameResult),e)return i=t.value.bonus,{id:String(i.id)||void 0,key:i.guid||void 0,count:i.counter||0,step:i.currentStep||void 0,wheels:e.wheel?e.wheel.reels:[],mode:e.mode||0,position:yn(e.winPositions),bonusPosition:yn(e.bonusPositions),data:{win:new Decimal(t.value.bonus.gameResult.win||0),balance:new Decimal(t.value.bonus.gameResult.balance&&t.value.bonus.gameResult.balance.value?t.value.bonus.gameResult.balance.value:0)},rsp:i}}return null}class uo{constructor(e,i){this.timer=setTimeout(e,i)}cancel(){this.timer!=null&&clearTimeout(this.timer)}}const fd="parseJson";var md=Object.defineProperty,bd=Object.getOwnPropertyDescriptor,ce=(t,e,i,s)=>{for(var n=s>1?void 0:s?bd(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&md(e,i,n),n};class jn extends Pa{clickSpinHandler(){}autoSpinHandler(){}clickJackpotHandler(){}exit(){}enter(){}showPanel(e,i,s){let n=H().get(e,{});return this.scene.addChild(n),setTimeout(()=>{s&&s(),n.fadeOut()},i),n}showPopupPanel(e,i,s,n=1e3){let r=H().get(e);return this.scene.addChild(r),r.showAndRemove(i,s,n)}}class ys extends jn{get currentResponse(){return this._currentResponse}clickSpinHandler(){this.scene.playSpinSound(),this.scene.numWinLoop=0,this.scene.resetWinAmount(),this.scene.btnSpin.hide(),this.scene.reels.spin(),this.scene.showHudMessage(M.SPIN),this.getSpinServie().then(e=>{this.spinServiceHandler(e),this.froundHandler(e)}).catch(e=>{this.resetStateOnError(),e.code?e.code===29?(this.scene.showFrounEnd(),this.scene.setState(w.get("idleState"))):ze(e.code):ze(e.error?e.error:"0",!0),this.scene.onErrorHandler()})}getSpinServie(){}spinServiceHandler(e,i=fd){let s=w.get(i,e);this._currentResponse=s,this.player.balance=s.balance,this.player.winAmount=s.winAmount,this.player.winLines=s.winLines,this.player.symbols=s.wheels,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(s.wheels,!1,s.winLines,n=>this.getReelsStopPromise(n)),this.scene.setState(w.get("spinState")),this.scene.checkFround(s.fround),bs()&&this.scene.initializeJackpotHandler()}froundHandler(e){if(this.netService.json&&e.value){let i=e.value.freeGameInfo;e.value.spinResult&&(i=e.value.spinResult.freeGameInfo,e.value.spinResult.frsumm&&(this.player.froundSum=e.value.spinResult.frsumm)),e.value.frsumm&&(this.player.froundSum=e.value.frsumm),i&&(this.player.froundExpired=i.isExpired,this.scene.checkFround(i),i.frsumm&&(this.player.froundSum=i.frsumm))}}bonusHandler(e){}clickJackpotHandler(){this.getProgressiveJackpot().then(e=>this.jackpotHandler(e)).catch(e=>{console.log("Jackpots Retrieving Failed",e.code)})}getProgressiveJackpot(){}jackpotHandler(e){e.value&&e.value.pool&&(this.player.progressiveJackpot=e.value.pool)}getReelsStopPromise(e){return this.scene.animateFooterBar(),this.scene.btnSpin.hide(),this.expandWild(e).then(()=>this.onReelsStop()).then(()=>this.updateState()).then(()=>this.showWinAmount())}expandWild(e){let i=w.get("expandWildPanel");return i?i.show(e):Promise.resolve()}showWinAmount(){return this.scene.showWinBoxLogic()?this.scene.footerBar.showBox(this.player.winAmount):Promise.resolve()}onReelsStop(){}updateState(){}trackSpinEvent(){let e={"Spin mode":this.scene.isFreeSpin?"Freespin":this.scene.isAutoSpin?"Autospin":"Normal",Muted:this.scene.soundService.muted?"True":"False",Orientation:this.scene.isPortraitLayout?"Portrait":"Landscape","Game mode":this.scene.context.FUNPLAY?"Fun":"Real",Platform:T.platform,Currency:this.player.currency,Fround:this.player.froundOn?"True":"False","Bonus bet":this.player.bonusBet?"True":"False","Bonus ID":this.bonusID||"-1"};this.scene.btnTurbo&&(e.Turbo=this.scene.player.isTurbo?"True":"False"),q.event({name:"spin",properties:e,measurements:{}})}resetStateOnError(){this.scene.player.bonus=void 0,this.scene.player.winAmount=new Decimal(0),this.scene.player.winLines=[],this.scene.reels.isSpinning=!1,this.scene.reels.stopImmediately(),this.scene.reels.display(),this.scene.reels.winPanel.forceEnd=!0,this.scene.reels.winPanel.close(),this.scene.footerBar.hideBox(),this.scene.isFreeSpin=!1,this.scene.setState(w.get("idleState"))}}ce([_t("user")],ys.prototype,"player",2);ce([Me("netService")],ys.prototype,"netService",2);class gd extends ys{constructor(){super(...arguments),this.counter=-1}enter(){this.scene.context.checkActivityTimesUp(),this.player.winAmount.greaterThan(0)?this.scene.btnSpin.show("skip"):this.scene.btnSpin.hide(),this.scene.isFreeSpin=!0}getSpinServie(){let e=P().bonus;return e?this.netService.bonus({key:e.key,step:e.step++,index:0},ho):Promise.reject({code:0})}bonusHandler(e){this.netService.json?e.value&&e.value.bonus&&(this.counter=re(e.value.counter)?e.value.counter:e.value.bonus.counter,this.winAmount=e.value.bonus.cumulativeWin,this.addFSCount=e.value.spinResult&&e.value.spinResult.bonus?e.value.spinResult.bonus.count:0):(this.counter=e.counter,this.winAmount=e.sum,this.addFSCount=e.addFSCount)}onReelsStop(){if(this.scene.showHudMessage(),this.addFSCount>0)return this.showFreeSpinPanel()}updateState(){if(this.counter===0)return this.showWinPanel().then(()=>{P().bonus=void 0,this.scene.isFreeSpin=!1,this.scene.setState(w.get("idleState"))});this.scene.setState(w.get("freeSpin"))}showWinPanel(){return Promise.resolve()}showFreeSpinPanel(){}}class vd extends jn{enter(){this.scene.btnSpin.show("bonus"),this.scene.isAutoSpin=!1}clickSpinHandler(){P().bonus.step=1,this.scene.setState(w.get("freeSpin")),this.scene.state.clickSpinHandler()}}class yd extends jn{enter(){this.showStopBtnTimer=new uo(()=>this.scene.btnSpin.show("stop"),500)}exit(){this.showStopBtnTimer&&this.showStopBtnTimer.cancel()}clickSpinHandler(){q.event({name:"skip",properties:{},measurements:{}}),this.scene.btnSpin.hide(),this.scene.reels.stopImmediately()}}class Sd extends ys{enter(){this.scene.initFround(),this.scene.context.checkActivityTimesUp(),this.scene.player.checkAutoSpinConditions(),this.scene.btnSpin.show(this.scene.autoSpinLogic()?"skip":"spin")}clickSpinHandler(){if(!this.scene.checkBalance()){ze("10"),this.scene.noBalanceHandler();return}this.spinSuccess()}spinSuccess(){if(!this.scene.isSpinFree){let e=this.player.balance.minus(this.player.totalBet);this.scene.updateBalanceAmount(e)}this.scene.showHudMessage(M.SPIN),super.clickSpinHandler()}getSpinServie(){return this.netService.spin(this.player.bet)}getProgressiveJackpot(){return this.netService.jackpot()}autoSpinHandler(){this.scene.isAutoSpin=!0,this.clickSpinHandler()}bonusHandler(e){let i,s,n;this.netService.json?e.value&&e.value.hasBonus&&e.value.bonus&&(i=String(e.value.bonus.id),s=e.value.bonus.value,n=yn(e.value.bonusPositions)):(i=e.bonusID,s=e.bonusKey,n=e.bonusPosition),i?i==="1"&&this.scene.isAutoSpin?(this.player.bonus=void 0,i=void 0):(this.player.bonus={key:s,id:i,position:n,count:0},i!="1"&&(this.scene.isAutoSpin=!1)):this.player.bonus=void 0,this.bonusID=i,this.scene.checkAuto()}onReelsStop(){let e=this.getHudMessage();this.scene.showHudMessage(e),super.onReelsStop(),this.scene.updateAuto()}getHudMessage(){return this.bonusID&&this.bonusID!==Wr()?M.BONUS:this.player.winAmount.gt(0)||this.scene.isAutoSpin?void 0:M.NO_WIN}updateState(){this.scene.setState(w.get("idleState"))}}let J=class extends Zt{constructor(){super(...arguments),this._isAutoSpin=!1,this.numWinLoop=0,this.froundRestore=!1}onCreated(t){this.isFreeSpin=!1,this.isReSpin=!1,this.reels.display(ka());for(let e=1;e<4;e++)this.footerBar["currency"+e]&&(this.footerBar["currency"+e].value=P().currency);this.updateFooterBar(),this.reels.winPanel.on(V.EVENT_LOOP,this.onWinLoopComplete,this),this.reels.winPanel.on(V.EVENT_WIN_PANEL_CLOSE,this.onWinPanelClose,this),this.reels.winPanel.on(V.EVENT_WINLINE,e=>this.onWinLine(e)),this.initCommand(),J.initialised||(J.initialised=!0,this.init()),this.setState(w.get("idleState")),this.resumeAutoSpin(),bs()&&this.initializeJackpotHandler()}init(){}initCommand(){d.on("spin",()=>this.clickSpinHandler()),d.on("autospin",()=>this.autoSpinHandler()),d.on("history",()=>this.clickHistoryHandler()),d.on("sound",()=>this.clickSoundHandler(this.getComponentByID("sound"))),d.on("vibration",()=>this.clickVibrationHandler(this.getComponentByID("vibration"))),d.on(Mr,t=>this.onErrorPopUpOpen(t)),d.on(Rn,t=>this.onErrorPopUpClose(t))}resumeAutoSpin(){this.isAutoSpin&&(this.updateAutoSpinCount(),this.clickSpinHandler())}initializeJackpotHandler(){clearTimeout(this.progressiveJackpotTimer),this.state.clickJackpotHandler(),this.progressiveJackpotTimer=setTimeout(()=>{this.initializeJackpotHandler()},ja())}onWinLoopComplete(){this.numWinLoop++,this.autoSpinLogic()&&(this.reels.winPanel.hasWinLines?(this.reels.winPanel.forceEnd=this.checkBalance(),this.state.clickSpinHandler()):(this.btnSpin.hide(),this.autoSpinTimer=setTimeout(()=>this.state.clickSpinHandler(),600)))}onWinLine(t){if(t.length===0)return;let e=this.getWinLineMessageDetails(t);e&&this.showHudMessage(e.message,e.win,e.count)}onWinPanelClose(){this.reels.isSpinning||this.showHudMessage()}autoSpinLogic(){return this.player.bonus===void 0&&this.isAutoSpin||this.isFreeSpin}animateFooterBar(t){this.updateWinAmount(t),this.updateTotalBet(),this.animateBalanceAmount()}updateFooterBar(t){this.updateWinAmount(t),this.updateTotalBet(),this.updateBalanceAmount()}animateBalanceAmount(t){this.footerBar.animateBalance(t||this.player.balance)}updateBalanceAmount(t){this.footerBar.updateBalance(t||this.player.balance)}updateTotalBet(){this.footerBar.updateTotalBet(this.player.displayedTotalBet)}updateWinAmount(t){t?this.footerBar.directUpdateWinAmount(this.player.winAmount||new Decimal(0)):this.footerBar.updateWinAmount(this.player.winAmount||new Decimal(0))}resetWinAmount(){this.footerBar.resetWinAmount()}playSpinSound(){j("spin","default",!0)}clickSpinHandler(t){!this.btnSpin.visible||!this.btnSpin.enabled||(clearTimeout(this.autoSpinTimer),clearTimeout(this.progressiveJackpotTimer),T.desktop||this.deviceService.setDeviceFullscreen(),this.state.clickSpinHandler())}autoSpinHandler(){!this.btnSpin.visible||!this.btnSpin.enabled||(T.desktop||this.deviceService.setDeviceFullscreen(),clearTimeout(this.autoSpinTimer),this.state.autoSpinHandler())}holdSpinHandler(t){}clickSettingsHandler(t){D.replace("settings")}clickInfoHandler(){D.replace("info")}clickSoundHandler(t){this.soundService.muted=t.selected,q.event({name:"mute sound",properties:{Action:this.soundService.muted?"Off":"On"},measurements:{}})}clickVibrationHandler(t){Kc(t.selected),q.event({name:"vibration",properties:{Action:t.selected?"On":"Off"},measurements:{}})}clickExitHandler(){oi(this.context.realLobbyUrl)}clickHomeHandler(){oi(this.context.HOME_URL)}clickFundHandler(){Wt(this.context.FUNDS_URL)}clickHistoryHandler(){$a()}clickRealPlayHandler(){oi(this.context.realPlayUrl)}clickHelpHandler(){Wt(this.context.helpUrl)}clickLiveChatHandler(){Wt(this.context.livechatUrl,"LiveChat")}checkBalance(){return this.isSpinFree?!0:this.player.balance.greaterThanOrEqualTo(this.player.totalBet)}noBalanceHandler(){this.onErrorHandler(),this.btnSpin.show("spin"),this.isAutoSpin=!1}onErrorPopUpOpen(t){this.player.winAmount=new Decimal(0),this.reels.winLines=[],this.isFreeSpin=!1,this.isReSpin=!1,this.onErrorHandler(),this.autoSpinTimer&&clearTimeout(this.autoSpinTimer),this.progressiveJackpotTimer&&clearTimeout(this.progressiveJackpotTimer),this.reels.isSpinning&&(this.reels.isSpinning=!1,this.reels.stopImmediately()),this.reels.winPanel.forceEnd=!0,this.reels.winPanel.close(),this.footerBar.hideBox()}onErrorPopUpClose(t){this.onErrorHandler()}onErrorHandler(){}get isAutoSpin(){return this.player.autoSpinSettings&&(this._isAutoSpin=this.player.isAutoSpinOn),this._isAutoSpin}set isAutoSpin(t){this.player.autoSpinSettings&&(t=this.player.isAutoSpinOn),!t&&this.autoSpinTimer&&clearTimeout(this.autoSpinTimer),this._isAutoSpin=t}showHudMessage(t,e,i){this.hudMessage&&this.hudMessage.showMessage(t,e,i)}showFrounEnd(){}initFround(){}checkFround(t){t&&(this.player.froundCount=t.round)}checkAuto(){}updateAuto(){}updateAutoCount(t){this.player.autoSpin=t,this.updateAutoSpinCount()}updateAutoSpinCount(){this.autoSpinCount&&(this.player.autoSpin<0?this.autoSpinInfinity?(this.autoSpinCount.value="",this.autoSpinInfinity.visible=!0):this.autoSpinCount.value="∞":(this.autoSpinCount.value=this.player.autoSpin.toString(),this.autoSpinInfinity&&(this.autoSpinInfinity.visible=!1)))}showWinBoxLogic(){return this.player.winAmount.greaterThanOrEqualTo(this.player.totalBet)}trackDoubleup(){q.event({name:"double up",properties:{},measurements:{}})}get isSpinFree(){return this.player.froundOn}getWinLineMessageDetails(t){let e,i,s=x().isWinWays;return t.length>1&&this.reels.winPanel&&[We.WINLINE_SHOW_ALL,We.WINLINE_SHOW_ALL_ONCE].indexOf(this.reels.winPanel.mode)>=0?(e=s?M.WAYS_WIN:M.LINES_WIN,i=this.getWinDetails(t)):Number(t[0].win)>0&&(Number(t[0].index)===0?(e=M.SCATTER_WIN,i={count:1,win:t[0].win}):s?(e=M.WAYS_WIN,i=this.getWinDetails(this.player.winLines,t[0])):(e=M.LINE_WIN,i={count:t[0].index,win:t[0].win})),i?{message:e,count:i.count,win:i.win}:null}getWinDetails(t,e){let i=0,s=0;return t.forEach((n,r)=>{(e&&Number(n.symbol)===Number(e.symbol)||!e&&Number(n.index)>0)&&(i++,s+=Number(n.win))}),{count:i,win:s}}exit(){d.off("spin"),d.off("autospin"),d.off("history"),d.off("sound"),d.off("vibration"),clearTimeout(this.autoSpinTimer),clearTimeout(this.progressiveJackpotTimer),this.isFreeSpin=!1,this.isAutoSpin=!1,Ha(this.reels.symbolIndexes),this.soundService.stopBgm(),this.footerBar&&this.footerBar.deactivate(),super.exit()}suspendActivityTimesUp(){this.player.stopAutoSpin(),this.autoSpinTimer&&clearTimeout(this.autoSpinTimer)}get checkExtendActivityTimesUp(){return this.suspendActivityTimesUp(),this.reels.isSpinning}};J.initialised=!1;ce([Me("deviceService")],J.prototype,"deviceService",2);ce([Me("netService")],J.prototype,"netService",2);ce([Me("soundService")],J.prototype,"soundService",2);ce([_t("context")],J.prototype,"context",2);ce([y("autoSpinDisplay")],J.prototype,"autoSpinDisplay",2);ce([y("autoSpinCount")],J.prototype,"autoSpinCount",2);ce([y("autoSpinInfinity")],J.prototype,"autoSpinInfinity",2);ce([y("reels")],J.prototype,"reels",2);ce([_t("user")],J.prototype,"player",2);ce([y("btnSpin")],J.prototype,"btnSpin",2);ce([y("hudMessage")],J.prototype,"hudMessage",2);ce([y("tournament")],J.prototype,"tournament",2);J=ce([f({tag:"main",category:"scene"})],J);const Se={ONGOING:"ongoing",UPCOMING:"upcoming",CLAIMED:"claimed",UNCLAIMED:"unclaimed",STANDARD:"standard"},Ht=class Ht extends pe{constructor(){super(),this.width=786,this.height=513,this.bgWidth=717,this.bgHeight=409,this.visible=!1,this.callbacks={},this.curItemIdx=-1,this.selectedItemIdx=-1,this.itemsListIdx=-1,this.itemWidth=0,this.claimEnabled=!1,this.isDailyFR=!1,this.isTouchDown=!1,this.numItemMax={landscape:5,portrait:3},this.itemSize={w:119,h:129,ch:85,hh:114,th:29},this.buttonSize={w:242,h:68},this.arrowSize={w:22,h:38},this.flagIconSize={w:26,h:26},this.orientation="landscape",this.onItemsBoxDown=e=>{e.preventDefault(),!this.tweenNavItems&&(this.isTouchDown=!0,this.touchDownX=this.getClientX(e))},this.onItemsBoxUp=e=>{e.preventDefault(),this.isTouchDown&&(this.isTouchDown=!1,this.adjustMovedItems())},this.onItemsBoxOut=e=>{e.preventDefault(),this.isTouchDown&&(this.isTouchDown=!1,this.adjustMovedItems())},this.onItemsBoxMove=e=>{e.preventDefault(),this.isTouchDown&&(this.curMovedItemX=this.curItemMLeft+this.getClientX(e)-this.touchDownX,this.itemsList.style.marginLeft=this.getPixel(this.curMovedItemX))},Q.on(xi,this.render,this),this.parseFround(),this.froundInfo&&(this.parseTemplate(),this.isDailyFR||(this.itemsFround=[{day:0,count:this.froundInfo.NoFreeSpin,state:Se.STANDARD}]))}parseTemplate(){let e=R.json("frtemplate");!this.template.IsDefault&&this.template.PopUpMessage&&ao(this.template.PopUpMessage,e.PopUpMessage),this.popupTemplate=e.PopUpMessage,this.popupTemplate.IconBorderColor||(this.popupTemplate.IconBorderColor="#F4D03A"),this.popupTemplate.GraphicButtonTextColor||(this.popupTemplate.GraphicButtonTextColor=this.popupTemplate.ButtonTextColor),this.popupTemplate.ItemTitleColor||(this.popupTemplate.ItemTitleColor=this.popupTemplate.GameNameColor),this.popupTemplate.ItemContentColor||(this.popupTemplate.ItemContentColor=this.popupTemplate.NoSpinColor)}showStart(){if(Ht.hasShown)this.visible=!1;else{let e=v.get("keyboardService");e&&(e.enabled=!1),this.visible=!0,this.name="start",this.render(),Ht.hasShown=!0}}showEnd(){let e=v.get("keyboardService");e&&(e.enabled=!1),this.visible=!0,this.selectedItemIdx=-1,this.name="end",this.render()}render(){if(!this.visible||!this.froundInfo)return;this.clear(),this.createBgLayer();let e=this.createPopup();this.content.appendChild(e),this.name==="end"?this.createEndContent(e):this.createStartContent(e),pe.canvas.parentElement.insertBefore(this.content,pe.canvas)}createBgLayer(){this.content=document.createElement("div"),this.content.style.cssText=pe.canvas.style.cssText,this.content.style.backgroundColor="rgba(0,0,0,0.6)",this.content.style.position="absolute",this.content.style.margin="0px",this.content.style.color="#ffc600",this.content.style.textAlign="center",this.content.style.width="100%",this.content.style.height="100%",this.content.style.cursor="unset",this.content.className="noselect",this.content.style.fontFamily=pe.getFont()}createPopup(){let e=R.json("frconfig"),i=this.popupTemplate.LandscapeBackgroundUrl,s=window.innerWidth,n=window.innerHeight,r=960,o=540;this.bgWidth=717,this.bgHeight=409,this.orientation="landscape",e&&(e.num_item_limits&&(this.numItemMax=e.num_item_max),e.item_size&&(this.itemSize=e.item_size),e.button_size&&(this.buttonSize=e.button_size),e.arrow_size&&(this.arrowSize=e.arrow_size),e.flag_icon_size&&(this.flagIconSize=e.flag_icon_size),e.fr_landscape_panel_size&&(this.bgWidth=e.fr_landscape_panel_size.w,this.bgHeight=e.fr_landscape_panel_size.h)),s<n&&(i=this.popupTemplate.PortraitBackgroundUrl,r=540,o=960,this.bgWidth=468,this.bgHeight=605,this.orientation="portrait",e&&e.fr_portriat_panel_size&&(this.bgWidth=e.fr_portriat_panel_size.w,this.bgHeight=e.fr_portriat_panel_size.h));let h=Math.min(s/r,n/o)*r,u=this.bgWidth/r*h,p=u/this.bgWidth*this.bgHeight,g=(n-p)/2,m=(s-u)/2;this.scale=u/this.bgWidth;let A=document.createElement("div");return A.style.cssText=`background-image:url(${i}); background-size: 100% 100%;
margin:${g}px ${m}px;
width:${u}px; height:${p}px;
position: relative;`,A}createTitle(e){let i=this.createAbsolute(12);return i.innerHTML=e,i.style.fontWeight="bold",i.style.fontSize=this.getPixel(23),i.style.lineHeight=this.getPixel(35),i.style.color=this.popupTemplate.TitleColor,i}createIcon(e,i="100%"){let s=this.createAbsolute(e,i);return s.style.padding="0 2%",s.innerHTML=`<img src="${this.iconUrl}" style="height:${this.getPixel(88)};width:${this.getPixel(88)};
${this.getRoundBorderCss(2,this.popupTemplate.IconBorderColor,5)}">`,s}createEndContent(e){let i=72,s=105,n=152,r=200,o=196;this.orientation==="portrait"&&(i=120,s=155,n=240,r=355,o=365),this.createItems(e,r);let a=P().froundSum;P().froundCount=0;let h=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_btn");h.onclick=()=>this.remove();let u=this.createRelative(o);u.appendChild(h);let p=document.createElement("div");p.style.position="relative",p.style.top=this.getPixel(o);let g=this.createPara(15,n);g.style.color=this.popupTemplate.ContentColor,g.style.lineHeight=this.getPixel(18);let m=this.isDailyFR&&this.curItemIdx<this.totaltems-1?"next":"more";g.appendChild(this.createSpan(F("fr_claimed"),{display:"block"})),g.appendChild(this.createSpan(F(`fr_logoff_${m}`),{display:"block"}));let A="fr_thank";if(a){let L=this.createPara(30,i);L.innerHTML=`${F("youwin")}`,L.style.color=this.popupTemplate.WinSummaryColor,L.style.fontWeight="bolder";let G=this.createPara(30,s);G.innerHTML=`${P().currency} ${it(a.toFixed(2))}`,G.style.color=this.popupTemplate.WinSummaryColor,G.style.fontWeight="bolder",e.appendChild(L),e.appendChild(G),A="fr_congrats"}else{let L=this.createPara(25,i);L.innerHTML=`${F("fr_nowin_title")}`,L.style.color=this.popupTemplate.WinSummaryColor,L.style.fontWeight="bolder";let G=this.createPara(16,s);G.innerHTML=F("fr_nowin_text"),G.style.color=this.popupTemplate.WinSummaryColor,G.style.fontWeight="bold",e.appendChild(L),e.appendChild(G)}e.appendChild(this.createTitle(F(A))),e.appendChild(g),e.appendChild(p),e.appendChild(u)}createStartContent(e){let i=R.json("frconfig"),s=0,n=64,r=161,o=200,a=196,h=1,u="38%",p="34%",g="58%",m="left";this.orientation==="portrait"&&(s=145,n=70,r=170,o=355,a=365,h=.85,u=null,p=g="96%",m="center"),this.createItems(e,o);let A=this.froundInfo,L=this.translate(this.froundInfo.Title);L||(L=this.isDailyFR?F("fr_daily"):F("fr_title"));let G=this.createTitle(L),Le=this.createIcon(n,p),Je=this.createRelative(a),Tt=document.createElement("div");Tt.style.position="relative",Tt.style.top=this.getPixel(a);let Ts=this.createParaT(F(A.Gameid),r,p),Oe=this.createPara(15,65+s,g);Oe.style.verticalAlign="middle",Oe.style.textAlign=m,Oe.style.lineHeight=this.getPixel(90),Oe.style.height=this.getPixel(128);let at=this.createSpan("",{lineHeight:"normal",display:"inline-block",verticalAlign:"middle"}),Bs=this.createSpan(this.translate(A.MessageContent).replace(/\r\n/gi,"<br>"),{display:"block",color:this.popupTemplate.ContentColor,lineHeight:this.getPixel(17),maxHeight:this.getPixel(69),overflow:"hidden"}),Es=this.createSpan(F("fr_date").replace("%DATE%",A.ExpirationDate),{display:"block",color:this.popupTemplate.ExpiryDateColor,lineHeight:this.getPixel(18)});if(at.appendChild(Bs),at.appendChild(Es),this.isDailyFR&&this.curItemIdx>=0&&this.gameID.toLowerCase()===x().ID.toLowerCase()){this.claimEnabled=!0;let Ae=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_active");Ae.onclick=()=>this.claimFround(),Je.appendChild(Ae)}else{let Ae=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_ok",h),Ls=this.createButton("button",this.buttonSize.w,this.buttonSize.h,"fr_cancel",h);Ae.onclick=()=>this.emit("confirm"),Ls.onclick=()=>this.emit("cancel"),Je.appendChild(Ae),Je.appendChild(Ls)}if(i&&i.fr_url_tnc){let Ae=this.createSpan(F("fr_tnc"),{display:"block",color:this.popupTemplate.TNCColor,lineHeight:this.getPixel(18),cursor:"pointer"});Ae.onclick=Ls=>{Wt(i.fr_url_tnc.replace("[%%URLDOMAIN%%]",Nn(location.hostname)),"Free Rounds T&C")},at.appendChild(Ae)}u&&(Oe.style.left=u),Oe.appendChild(at),e.appendChild(G),e.appendChild(Le),e.appendChild(Ts),e.appendChild(Oe),e.appendChild(Tt),e.appendChild(Je)}get iconUrl(){let e=S.LANGUAGE;return`../${this.gameID}/assets/icons/icon192.${[N.Chinese,N.Japanese].indexOf(e)>-1?e:"en"}.jpg`}getRoundBorderCss(e,i,s){return`border:${this.getPixel(e)} solid ${i};border-radius:${this.getPixel(s)}`}getPixel(e){return this.scale*e+"px"}get gameID(){return this.froundInfo.Gameid}createButton(e,i,s,n="",r=1){let o=document.createElement("div");return o.style.cssText=`background-image: url(../_commons/freeround/img/${e}.png);
background-size: 100% 100%; float: left; cursor: pointer; margin: auto ${this.getPixel(10*r)};
width: ${this.getPixel(i*r)}; height: ${this.getPixel(s*r)}; line-height: ${this.getPixel(s*r)};
font-weight: bolder; font-size: ${this.getPixel(s*.3*r)}; color: ${this.popupTemplate.GraphicButtonTextColor}`,n&&(o.innerHTML=F(n)),o}clear(){this.content&&pe.canvas.parentElement.removeChild(this.content)}remove(){let e=v.get("keyboardService");e&&(e.enabled=!0),this.visible=!1,this.clear(),this.content=void 0}parseFround(){let e=P().fround;if(v.get("netService").json){this.parseFroundJson(e);return}let i=fe(e.querySelector("message"));i&&(this.froundInfo=JSON.parse(i));let s=fe(e.querySelector("template"));s&&(this.template=JSON.parse(s));let n=fe(e.querySelector("rounds"));if(n){let r=JSON.parse(n);r&&r.length&&(this.isDailyFR=!0,this.itemsFround=r)}}parseFroundJson(e){if(e.rounds&&e.rounds.length&&(this.isDailyFR=!0,this.itemsFround=e.rounds),e.popUpMessageContent){let i={};for(let s in e.popUpMessageContent)i[this.capitalizeKey(s)]=e.popUpMessageContent[s];this.froundInfo=i}if(e.template){let i={};for(let s in e.template){let n={};if(typeof e.template[s]=="object")for(let r in e.template[s])n[this.capitalizeKey(r)]=e.template[s][r];else n=e.template[s];i[this.capitalizeKey(s)]=n}this.template=i}}capitalizeKey(e){return e.charAt(0).toUpperCase()+e.slice(1)}translate(e){let i;return x().LANGUAGE===N.Chinese?i=e.CH:i=e[x().LANGUAGE.toUpperCase()],i||(i=e.EN),i}createAbsolute(e,i="100%"){let s=document.createElement("div");return s.style.width=i,s.style.position="absolute",s.style.top=this.getPixel(e),s}createRelative(e){let i=document.createElement("div");return i.style.position="relative",i.style.display="inline-block",i.style.top=this.getPixel(e),i}createSpan(e,i){let s=document.createElement("span");s.innerHTML=e;for(let n in i)s.style[n]=i[n];return s}createPara(e,i,s="96%"){let n=document.createElement("div");return n.style.fontSize=this.getPixel(e),n.style.color="white",n.style.top=this.getPixel(i),n.style.width=s,n.style.lineHeight="1.2",n.style.padding="0 2%",n.style.position="absolute",n}createParaT(e,i,s="96%"){let n=this.createPara(15,i,s);return n.innerHTML=`${e}`,n.style.height=this.getPixel(34),n.style.color=this.popupTemplate.GameNameColor,n.style.lineHeight="1",n.style.fontWeight="bold",n.style.overflow="hidden",n}createItem(e){let i=this.itemsFround[e],s=document.createElement("li"),n="dailybox-expired",r=14,o=24,a=this.popupTemplate.DisabledTextColor,h=this.popupTemplate.DisabledTextColor,u=this.itemSize.ch,p=this.flagIconSize.h*.5;i.state===Se.UPCOMING&&(n="dailybox-upcoming"),e===this.curItemIdx&&(n="dailybox-ongoing",r=18,o=35,a=this.popupTemplate.ItemTitleColor,h=this.popupTemplate.ItemContentColor,u=this.itemSize.hh,p=(this.itemSize.h-u)*.5);let g="",m=(this.itemSize.h-u)*.5,A=u-this.itemSize.th-4;if(i.state===Se.STANDARD&&(n="standardbox",A=u-4),i.day>0&&(g=`<div style="color:${a};font-size:${this.getPixel(r)};line-height:${this.getPixel(this.itemSize.th)};display:block;">${F("fr_day").replace("%NUM%",`${i.day}`)}</div>`),s.innerHTML=`<div style="margin-top:${this.getPixel(m)};width:${this.getPixel(this.itemSize.w)};height:${this.getPixel(u)};line-height:normal;font-weight:bold">
${g}
<div style="height:${this.getPixel(A)};line-height:${this.getPixel(A)};display:block;">
<span style="color:${h};font-size:${this.getPixel(r)};line-height:${this.getPixel(r+1)};padding:0 ${this.getPixel(8)};display:inline-block;vertical-align:middle;">
<span style="font-weight:bolder;font-size:${this.getPixel(o)};line-height:${this.getPixel(o)};display:block;">${i.count}</span>
${F("fr_fsw").replace("%NUM%","")}
</span>
</div>
</div>`,[Se.ONGOING,Se.UPCOMING].indexOf(i.state)<0&&(P().froundCount===0||e!==this.curItemIdx)){let L=document.createElement("img");L.src=`../_commons/freeround/img/item${i.state===Se.UNCLAIMED?"cross":"check"}.png`,L.style.cssText=`width:${this.getPixel(this.flagIconSize.w)};height:${this.getPixel(this.flagIconSize.h)};top:-${this.getPixel(p+u)};float:right;position:relative;`,s.appendChild(L)}return s.style.cssText=`background-image: url(../_commons/freeround/img/${n}.png);
background-size: 100% 100%; float: left; text-align: center;
width: ${this.getPixel(this.itemSize.w)}; height: ${this.getPixel(this.itemSize.h)};
line-height: ${this.getPixel(this.itemSize.h)}; margin: 0 ${this.getPixel(3)};`,s}createItems(e,i){if(this.itemsFround){this.curItemMLeft=0,this.totaltems=this.itemsFround.length,this.itemWidth=this.itemSize.w+6;let s=0,n=this.itemWidth*Math.min(this.totaltems,this.numItemMax[this.orientation]);this.itemsList=document.createElement("ul");for(let o=0;o<this.totaltems;o++)[Se.ONGOING,Se.STANDARD].indexOf(this.itemsFround[o].state)>=0?this.curItemIdx=o:[Se.CLAIMED,Se.UNCLAIMED].indexOf(this.itemsFround[o].state)>=0&&(o<this.totaltems-1&&this.itemsFround[o+1].state===Se.UPCOMING||o===this.totaltems-1)&&(this.curItemIdx=o),this.itemsList.appendChild(this.createItem(o)),s+=this.itemWidth+6;if(this.curItemIdx<0)return;this.itemsBox&&this.removeItemsListEvents();let r=this.createRelative(i);if(this.itemsBox=document.createElement("div"),this.itemsBox.style.cssText=`width: ${this.getPixel(n)}; height: ${this.getPixel(this.itemSize.h)}; float: left; overflow: hidden;`,this.itemsList.style.cssText=`list-style-type: none; margin: 0; padding: 0; width: ${this.getPixel(s)};`,this.btnNext=this.btnPrev=void 0,this.totaltems>this.numItemMax[this.orientation]){let o=this.getPixel((this.itemSize.h-this.arrowSize.h)*.5);this.btnPrev=this.createButton("itemPrev",this.arrowSize.w,this.arrowSize.h),this.btnNext=this.createButton("itemNext",this.arrowSize.w,this.arrowSize.h),this.btnPrev.onclick=()=>this.itemPrev(),this.btnNext.onclick=()=>this.itemNext(),this.btnPrev.style.margin=`${o} ${this.getPixel(4)} 0 ${this.getPixel(16)}`,this.btnNext.style.margin=`${o} ${this.getPixel(16)} 0 ${this.getPixel(4)}`,this.btnPrev.style.marginTop=this.btnNext.style.marginTop=this.getPixel(o),this.selectedItemIdx<0&&(this.selectedItemIdx=this.curItemIdx),this.itemsListIdx=this.selectedItemIdx-Math.floor(this.numItemMax[this.orientation]*.5),this.adjustItem(!1),this.addItemsListEvents()}this.itemsBox.appendChild(this.itemsList),this.btnPrev&&r.appendChild(this.btnPrev),r.appendChild(this.itemsBox),this.btnNext&&r.appendChild(this.btnNext),e.appendChild(r)}}itemPrev(){this.btnPrev.style.opacity=="1"&&(this.checkNavIdx(),this.itemsListIdx--,this.selectedItemIdx--,this.adjustItem())}itemNext(){this.btnNext.style.opacity=="1"&&(this.checkNavIdx(),this.itemsListIdx++,this.selectedItemIdx++,this.adjustItem())}checkNavIdx(){let e=Math.floor(this.numItemMax[this.orientation]*.5),i=this.totaltems-Math.ceil(this.numItemMax[this.orientation]*.5);this.selectedItemIdx<e?this.selectedItemIdx=e:this.selectedItemIdx>i&&(this.selectedItemIdx=i)}adjustItem(e=!0){this.btnPrev.style.opacity="1",this.btnNext.style.opacity="1",this.btnPrev.style.cursor="pointer",this.btnNext.style.cursor="pointer",this.itemsListIdx<=0?(this.itemsListIdx=0,this.btnPrev.style.opacity="0.2",this.btnPrev.style.cursor="unset"):this.itemsListIdx>=this.totaltems-this.numItemMax[this.orientation]&&(this.itemsListIdx=this.totaltems-this.numItemMax[this.orientation],this.btnNext.style.opacity="0.2",this.btnNext.style.cursor="unset");let i=-1*this.itemsListIdx*this.itemWidth;if(this.tweenNavItems&&this.tweenNavItems.stop(),!e){this.curItemMLeft=this.curMovedItemX=i,this.itemsList.style.marginLeft=this.getPixel(this.curItemMLeft);return}let s={val:this.curItemMLeft};this.itemsList.style.marginLeft=this.getPixel(this.curItemMLeft),this.tweenNavItems=new TWEEN.Tween(s).to({val:i},400).easing(TWEEN.Easing.Quadratic.In).onUpdate(()=>{this.curItemMLeft=this.curMovedItemX=s.val,this.itemsList.style.marginLeft=this.getPixel(this.curItemMLeft)}).onComplete(()=>{this.tweenNavItems=null}),this.tweenNavItems.start()}claimFround(){if(this.claimEnabled){if(this.claimEnabled=!1,this.itemsFround[this.curItemIdx].state!==Se.ONGOING){this.emit("confirm");return}Ua().claimFround().then(e=>{this.updateClaimedFround(e),this.emit("confirm")}).catch(e=>{e.code?ze(e.code):ze(e.error?e.error:"0"),this.emit("claimErr")})}}updateClaimedFround(e){let i=P();if(i.fround){if(v.get("netService").json){let s=e.value.freeGameInfo;s&&(s.round!==void 0&&(i.froundCount=s.round),s.rounds!==void 0&&(i.fround.rounds=s.rounds))}else{let s=e.querySelector("dailyFreeSpin");s&&(i.fround=s,i.froundCount=l(s,"round",i.froundCount))}this.parseFround()}}adjustMovedItems(){let e=this.itemsListIdx,i=this.curMovedItemX/this.itemWidth;i>0?i=0:i=i*-1,i>e?this.itemsListIdx=Math.ceil(i):i<e&&(this.itemsListIdx=Math.floor(i)),this.selectedItemIdx+=this.itemsListIdx-e,this.curItemMLeft=this.curMovedItemX,this.checkNavIdx(),this.adjustItem()}addListEventListeners(e,i,s){this.itemsBox.addEventListener(e,s),this.itemsBox.addEventListener(i,s)}removeListEventListeners(e,i,s){this.itemsBox.removeEventListener(e,s),this.itemsBox.removeEventListener(i,s)}addItemsListEvents(){this.addListEventListeners("mousedown","touchstart",this.onItemsBoxDown),this.addListEventListeners("mouseup","touchend",this.onItemsBoxUp),this.addListEventListeners("mouseleave","touchcancel",this.onItemsBoxOut),this.addListEventListeners("mousemove","touchmove",this.onItemsBoxMove)}removeItemsListEvents(){this.removeListEventListeners("mousedown","touchstart",this.onItemsBoxDown),this.removeListEventListeners("mouseup","touchend",this.onItemsBoxUp),this.removeListEventListeners("mouseleave","touchcancel",this.onItemsBoxOut),this.removeListEventListeners("mousemove","touchmove",this.onItemsBoxMove)}getClientX(e){return e.clientX!=null?e.clientX:e.touches&&e.touches[0]?e.touches[0].clientX:0}on(e,i,s,...n){this.callbacks[e]={context:s,callback:i,args:n}}emit(e){let i=this.callbacks[e];i&&i.callback.apply(i.context,i.args)}off(e){this.callbacks[e]=void 0}};Ht.hasShown=!1;let Qi=Ht;var wd=Object.defineProperty,xd=Object.getOwnPropertyDescriptor,te=(t,e,i,s)=>{for(var n=s>1?void 0:s?xd(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&wd(e,i,n),n};let Id=class extends yd{clickSpinHandler(){this.scene.isAutoSpin=!1,super.clickSpinHandler()}},Sn=class extends Sd{enter(){super.enter(),this.scene.player.checkAutoSpinConditions(),this.scene.isAutoSpin?this.scene.enabledBtnAutoSpin():(this.scene.resetAutoSpin(),this.scene.showButtons())}spinSuccess(){this.scene.resetCheatBar(),this.scene.menu.hide(),this.scene.hideButtons(),d.emit("menutoggle",{visible:this.scene.menu.visibility}),super.spinSuccess()}},Pd=class extends gd{enter(){super.enter(),this.scene.menu.hide()}clickSpinHandler(){super.clickSpinHandler(),this.scene.resetCheatBar()}},co=class extends vd{enter(){super.enter(),this.scene.menu.hide()}},O=class extends J{constructor(){super(...arguments),this.tick=0}onCreated(e){this.menu.init(this.context),this.cheatBar&&(this.cheatBar.visible=this.player.demo==="1"&&T.desktop),B.add(this),this.menu.sound&&(this.menu.sound.selected=this.soundService.muted),this.menu.bonusbet&&(this.menu.bonusbet.selected=this.player.bonusBet),this.froundToggle&&(this.froundToggle.selected=this.player.froundOn,this.froundToggle.visible=this.player.fround&&!0||this.context.mockFroundToggle),this.menu.on(nt.MENU_CLOSED,()=>this.menuClosedHandler()),this.betPanel&&this.betPanel.on(fn,i=>this.betChangedHandler(i)),super.onCreated(e),this.autoSpinDisplay&&(this.autoSpinDisplay.visible=this.isAutoSpin)}betChangedHandler(e){this.player.betValueIndex=e,this.updateFooterBar()}onErrorPopUpClose(e){super.onErrorPopUpClose(e),this.btnSpin.show("spin"),this.menu.show(),this.showButtons()}onErrorHandler(){super.onErrorHandler(),this.stopAutoHandler()}initCommand(){super.initCommand(),d.on("livechat",()=>this.clickLiveChatHandler()),d.on("help",()=>this.clickHelpHandler()),d.on("lobby",()=>this.clickExitHandler()),d.on("home",()=>this.clickHomeHandler()),d.on("startautospin",()=>this.startAutoSpinHandler()),d.on("bonusbet",()=>this.bonusBetHandler()),d.on("menu",()=>{this.menu.visible?this.menu.close(!0):this.btnMenu.enabled&&this.clickMenuHandler()}),d.on("paytable",()=>{D.replace("settings","paytable")}),d.on("settings",()=>{D.replace("settings")}),d.on("infoPage",()=>{D.replace("infoPage")})}clickSpinHandler(e){super.clickSpinHandler(e),this.closeAutoSpinBetSettings()}clickMenuHandler(){this.menu.open(),this.hideButtons()}menuClosedHandler(){this.showButtons()}clickAutospin(){this.autoSpinOptions&&this.autoSpinOptions.open()}clickSettings(){this.betPanel&&this.betPanel.open()}clickAdvancedAutoSpinHandler(){D.replace("settings","autospin")}stopAutoHandler(){this.player.stopAutoSpin(),this.resetAutoSpin(),this.state instanceof Sn&&(this.btnSpin.state==="skip"||this.btnSpin.state==="stop")&&!this.reels.isSpinning&&(this.btnSpin.show("spin"),this.menu.show(),this.showButtons())}autoSpinHandler(){}startAutoSpinHandler(){this.autoSpinDisplay&&(this.updateAutoCount(this.player.autoSpin),this.autoSpinDisplay.visible=!0,this.btnAutoSpin.visible=!1),super.autoSpinHandler()}closeAutoSpinBetSettings(){this.autoSpinOptions&&this.autoSpinOptions.close(),this.betPanel&&this.betPanel.close(!0)}hideButtons(){this.btnMenu.enabled=!1,this.btnAutoSpin.enabled=!1,this.btnAutoSpin.up.tint=8947848,this.btnAutoSpin["text-l"]&&(this.btnAutoSpin["text-l"].tint=8947848),this.btnAutoSpin["text-p"]&&(this.btnAutoSpin["text-p"].tint=8947848),this.fund.visible=!!this.fundVisible,this.fund.enabled=!1,this.realPlay.visible=!!this.realPlayVisible,this.realPlay.enabled=!1,this.tournament&&(this.tournament.enabled=!1),this.btnBetSettings&&(this.btnBetSettings.enabled=!1,this.btnBetSettings.up.tint=8947848,this.btnBetSettings.text.tint=8947848),this.froundToggle&&(this.froundToggle.enabled=!1)}showButtons(){this.btnMenu.enabled=!0,this.btnAutoSpin.enabled=!0;let e=Number(S["mainScene.hudPanelButton.tint"]);this.btnBetSettings&&(this.player.froundOn?(this.btnBetSettings.enabled=!1,this.btnBetSettings.up.tint=8947848,this.btnBetSettings.text.tint=8947848):(this.btnBetSettings.enabled=!0,this.btnBetSettings.up.tint=e,this.btnBetSettings.text.tint=e)),this.btnAutoSpin.up.tint=e,this.btnAutoSpin["text-l"]&&(this.btnAutoSpin["text-l"].tint=e),this.btnAutoSpin["text-p"]&&(this.btnAutoSpin["text-p"].tint=e),this.fund.visible=this.fund.enabled=!!this.fundVisible,this.realPlay.visible=this.realPlay.enabled=!!this.realPlayVisible,this.tournament&&(this.tournament.enabled=!0),this.btnBetSettings&&(this.btnBetSettings.enabled=!0,this.btnBetSettings.up.tint=e,this.btnBetSettings.text.tint=e),this.froundToggle&&(this.froundToggle.enabled=!0)}get fundVisible(){return!this.context.FUNPLAY&&this.context.FUNDS_URL}get realPlayVisible(){return this.context.FUNPLAY&&this.context.LOGIN_URL}resetCheatBar(){this.cheatBar&&this.cheatBar.visible&&this.cheatBar.init()}bonusBetHandler(){if(this.menu.bonusbet.selected){pt("bonusbeton");let e=H().get("bonusbetNote");this.addChild(e),setTimeout(()=>e.fadeOut(),2e3)}else pt("bonusbetoff");this.player.bonusBet=this.menu.bonusbet.selected,this.updateTotalBet()}showBonusBetLoading(e){this.isAutoSpin=!1;let i=H().get(e);this.addChild(i),pt("bonusbettrigger"),setTimeout(()=>i.fadeOut(),2e3),setTimeout(()=>D.replace("bonusbet"),2500)}exit(){d.off("bonusbet"),d.off("betsettings"),d.off("menu"),d.off("paytable"),d.off("settings"),d.off("infoPage"),B.remove(this),super.exit()}advanceTime(e){return this.tick++,this.bonusbetEffect&&(this.bonusbetEffect.visible=this.menu.bonusbet.visible&&this.menu.bonusbet.selected,this.bonusbetEffect.scale.set(.6+.02*Math.sin(this.tick*.1))),this.btnBonusEffect&&(this.btnBonusEffect.visible=this.btnSpin.visible&&this.btnSpin.enabled&&this.btnSpin.state==="bonus",this.btnBonusEffect.visible&&(this.btnBonusEffect.position.set(this.btnSpin.position.x,this.btnSpin.position.y),this.btnBonusEffect.rotation+=.07)),this.btnEffectStopAuto&&this.autoSpinDisplay&&this.autoSpinDisplay.visible&&this.autoSpinDisplay.alpha===1&&(this.btnEffectStopAuto.rotation+=.08),this.btnSpin.update(),!0}showFrounEnd(){this.player.fround&&(O.fround.showEnd(),this.isAutoSpin=!1,this.autoSpinOptions&&(this.player.stopAutoSpin(),this.resetAutoSpin()),this.froundToggle&&(this.froundToggle.visible=!1),this.player.froundOn=!1,v.get("netService").fround=!1,this.player.fround=void 0,this.player.froundExpired=!1,this.updateTotalBet())}showFrounStart(){O.fround.showStart(),O.fround.on("claimErr",()=>{q.event({name:"fround dialog",properties:{Action:"ClaimError"},measurements:{}}),O.fround.remove(),this.player.froundOn=!1,this.player.fround=void 0,this.froundToggle&&(this.froundToggle.selected=!1,this.froundToggle.visible=!1)},O.fround),O.fround.on("cancel",()=>{q.event({name:"fround dialog",properties:{Action:"Cancel"},measurements:{}}),O.fround.remove()},O.fround),O.fround.on("confirm",()=>{q.event({name:"fround dialog",properties:{Action:"Confirm"},measurements:{}}),this.froundToggle&&(this.froundToggle.selected=!0),O.fround.remove(),this.clickFroundHandler()},this)}initFround(){this.player.fround&&(this.player.bonus==null||this.froundRestore?(O.fround||(O.fround=new Qi,this.player.froundCount),this.player.froundCount>0&&!this.player.froundExpired?this.showFrounStart():Qi.hasShown||this.froundRestore?this.showFrounEnd():(this.player.froundOn=!1,this.player.fround=void 0,this.froundToggle&&(this.froundToggle.selected=!1,this.froundToggle.visible=!1))):this.player.bonus!=null&&(this.player.froundCount==0||this.player.froundExpired)&&(this.froundRestore=!0)),this.player.froundCount!=null&&(this.froundCount.value=this.player.froundCount.toString())}clickFroundHandler(){if(!this.context.mockFroundToggle)if(this.context.ID===O.fround.gameID){q.event({name:"fround box",properties:{Action:this.froundToggle.selected?"On":"Off"},measurements:{}}),this.player.froundOn=this.froundToggle.selected;let e=v.get("netService");e.fround=this.froundToggle.selected,this.updateTotalBet()}else{let e=hr(this.context.ID),i=hr(O.fround.gameID);if(e){q.event({name:"fround box",properties:{Action:i},measurements:{}});let s=e.charAt(0).toUpperCase()+e.substr(1);oi(location.toString().replace(e,i).replace(s,i))}}}checkFround(e){e&&(this.froundCount.value=e.round,this.player.froundCount=e.round)}checkAuto(){this.isAutoSpin&&this.player.isAutoSpinOn&&(this.isFreeSpin||this.updateAutoCount(this.player.autoSpin-1),this.player.checkAutoSpinConditions())}updateAuto(){this.isAutoSpin?this.enabledBtnAutoSpin():this.resetAutoSpin()}updateTotalBet(){super.updateTotalBet();let e=Number(S["mainScene.hudPanelButton.tint"]);if(this.btnBetSettings)if(this.player.froundOn)this.btnBetSettings.enabled=!1,this.btnBetSettings.up.tint=8947848,this.btnBetSettings.text.tint=8947848;else{let i=this.state instanceof Sn&&this.btnSpin.state==="spin"&&this.btnSpin.enabled;i||(e=8947848),this.btnBetSettings.enabled=i,this.btnBetSettings.up.tint=e,this.btnBetSettings.text.tint=e}}enabledBtnAutoSpin(){this.autoSpinDisplay&&(this.autoSpinDisplay.alpha=1,this.btnStopAuto.enabled=!0,this.player.bonus!==void 0&&this.player.bonus!==null&&(this.autoSpinDisplay.alpha=.5,this.btnStopAuto.enabled=!1))}resetAutoSpin(){this.autoSpinDisplay&&(clearTimeout(this.autoSpinTimer),this.autoSpinDisplay.visible=!1,this.btnAutoSpin.visible=!0)}};te([_t("user")],O.prototype,"player",2);te([y("menu")],O.prototype,"menu",2);te([y("btnMenu")],O.prototype,"btnMenu",2);te([y("btnAutoSpin")],O.prototype,"btnAutoSpin",2);te([y("btnBetSettings")],O.prototype,"btnBetSettings",2);te([y("realPlay")],O.prototype,"realPlay",2);te([y("fund")],O.prototype,"fund",2);te([y("cheatBar")],O.prototype,"cheatBar",2);te([y("bonusbetEffect")],O.prototype,"bonusbetEffect",2);te([y("btnBonusEffect")],O.prototype,"btnBonusEffect",2);te([y("btnEffectStopAuto")],O.prototype,"btnEffectStopAuto",2);te([y("btnStopAuto")],O.prototype,"btnStopAuto",2);te([y("fround")],O.prototype,"froundToggle",2);te([y("froundCount")],O.prototype,"froundCount",2);te([y("autoSpinOptions")],O.prototype,"autoSpinOptions",2);te([y("betSettings")],O.prototype,"betPanel",2);O=te([f({tag:"main",category:"scene"})],O);var _d=Object.defineProperty,Cd=Object.getOwnPropertyDescriptor,ye=(t,e,i,s)=>{for(var n=s>1?void 0:s?Cd(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&_d(e,i,n),n};class Gn extends Sn{spinSuccess(){this.scene.btnSpin.state!=="bonus"&&this.scene.playBtnSpinEffect(),super.spinSuccess()}}class po extends Pd{clickSpinHandler(){this.scene.playBtnSpinEffect(),super.clickSpinHandler()}}let le=class extends O{constructor(){super(...arguments),this.iconExpandableDisabled=.4}enter(t){this.initHightlightGlow(),super.enter(t)}onCreated(t){super.onCreated(t),this.betSelection&&this.initBetSelection(),this.initFooterLabels(),this.initComponentPositions(),this.updateBetAmount(),this.onSceneResize(),this.updateFastSpin()}initCommand(){super.initCommand(),d.on("betSelection",()=>this.clickBetSelectionHandler()),d.on("autospin",()=>this.clickAutospin()),d.on("stopauto",()=>this.stopAutoHandler()),d.on("turbo",()=>this.clickTurboHandler()),d.on("realplay",()=>this.clickRealPlayHandler()),d.on("fundtransfer",()=>this.clickFundHandler())}initFooterLabels(){this.betAmount=this.footerBar.getComponentByID("betAmount");let t=this.footerBar.getComponentByID("balanceTitle"),e=this.footerBar.getComponentByID("totalTitle"),i=this.footerBar.getComponentByID("betamountTitle"),s=Jt(P().currency,x().CURRENCY_SYMBOL).replace(" ","");t&&(t.value+="("+s+")"),e&&(e.value+="("+s+")"),i&&(i.value+="("+s+")")}initComponentPositions(){this.buttonsPanelsY=this.footerBar.panels.y,this.menuBtnCloseLX=this.menu.buttonCloseLandscape.x,this.menuBtnClosePX=this.menu.buttonClosePortrait.x}playBtnSpinEffect(){this.btnSpinEffect&&(this.btnSpinEffect.visible=!0,this.btnSpinEffect.activate(),this.btnSpinEffect.playOnce().then(()=>{this.btnSpinEffect.deactivate(),this.btnSpinEffect.visible=!1}))}clickSpinHandler(t){super.clickSpinHandler(t),this.betSelection.close()}startAutoSpinHandler(){super.startAutoSpinHandler(),this.btnStopAuto.activate()}clickTurboHandler(){!this.btnTurbo.enabled&&!this.btnStopturbo.enabled||(this.player.isTurbo=!this.player.isTurbo,this.betSelection.close(),this.btnTurbo.visible=!this.player.isTurbo,this.btnStopturbo.visible=this.player.isTurbo,this.player.isTurbo&&this.btnStopturbo.activate(),this.updateFastSpin())}initBetSelection(){this.betLevelsSelection&&(this.betLevelsSelection.selectedIndex=this.player.multiplierIndex),this.betSelection.setValues(this.player.betValues.concat(),this.player.betValueIndex),this.betSelection.on(eo,t=>this.betChangedHandler(t)),this.betSelection.on(mn,t=>this.betSelectionVisibilityHandler(t)),this.updateTotalBet()}onBetLevelSelect(){this.betLevelsSelection&&(Xe(),this.player.multiplierIndex=this.betLevelsSelection.selectedIndex,this.betLevelsSelection.activate(),this.updateBetAmount(),this.updateFooterBar())}clickBetSelectionHandler(){this.betSelection&&(this.betSelection.visible?this.betSelection.close():this.betSelection.open()&&this.betSelectionOpen())}betChangedHandler(t){super.betChangedHandler(t),this.updateBetAmount()}betSelectionVisibilityHandler(t){this.iconBetExpandable.scale.y=t?-1:1}betSelectionOpen(){}updateBetAmount(){this.betAmount&&(this.betAmount.value=de(this.player.displayedBetAmount))}updateTotalBet(){super.updateTotalBet(),this.updateBetSelection()}updateBetSelection(){if(this.betLevelsSelection&&(this.betLevelsSelection.selectedIndex=this.player.displayedMultiplierIndex),this.betSelection.select(this.player.displayedBetIndex),this.updateBetAmount(),this.player.froundOn)this.betLevelsEnabled(!1),this.btnBetSelection.enabled=!1,this.iconBetExpandable.alpha=this.iconExpandableDisabled;else{let t=this.state instanceof Gn&&this.btnSpin.state==="spin"&&this.btnSpin.enabled;this.betLevelsEnabled(t),this.btnBetSelection.enabled=t,this.iconBetExpandable.alpha=t?1:this.iconExpandableDisabled}}betLevelsEnabled(t){this.betLevelsSelection&&(this.betLevelsSelection.enabled=t,t?this.betLevelsSelection.activate():this.betLevelsSelection.deactivate())}updateFastSpin(){}hideButtons(){super.hideButtons(),this.btnTurbo.enabled=!1,this.btnStopturbo.enabled=!1,this.btnBetSelection.enabled=!1,this.iconBetExpandable.alpha=this.iconExpandableDisabled,this.betLevelsEnabled(!1)}showButtons(){super.showButtons(),this.btnTurbo.enabled=!0,this.btnStopturbo.enabled=!0,this.player.froundOn?(this.btnBetSelection.enabled=!1,this.iconBetExpandable.alpha=this.iconExpandableDisabled,this.betLevelsEnabled(!1)):(this.btnBetSelection.enabled=!0,this.iconBetExpandable.alpha=1,this.betLevelsEnabled(!0)),this.player.isTurbo?(this.btnTurbo.visible=!1,this.btnStopturbo.visible=!0,this.btnStopturbo.activate()):(this.btnTurbo.visible=!0,this.btnStopturbo.visible=!1),this.isAutoSpin&&this.btnStopAuto.activate()}enabledBtnAutoSpin(){this.autoSpinDisplay&&(this.btnStopAuto.enabled=!0,this.player.bonus!==void 0&&this.player.bonus!==null&&(this.btnStopAuto.enabled=!1)),this.btnStopAuto.activate()}initHightlightGlow(){v.get("tweenService").register("btn-highlight-glow",(e,i)=>{let s={alpha:0};e.alpha=s.alpha;let n=new TWEEN.Tween(s).to({alpha:1},500).easing(TWEEN.Easing.Quartic.In).onUpdate(o=>{e.alpha=s.alpha}),r=new TWEEN.Tween(s).to({alpha:0},1e3).easing(TWEEN.Easing.Quartic.Out).onUpdate(o=>{e.alpha=s.alpha});return n.chain(r.chain(n)),n})}checkDeviceResize(t){this.autoSpinOptions.y=this.menu.y=-t.y,this.footerBar.panels.y=this.selectionPanel.y=Math.max(0,this.buttonsPanelsY-t.y),this.setComponentsPositions(t),console.log("checkDeviceResize",t),this.orientationService.isPortrait?this.betButtons.y=this.settingButtons.y=Math.max(0,this.buttonsPanelsY-t.y)*.5:(this.betButtons.y=0,this.settingButtons.y=Math.max(0,this.buttonsPanelsY-t.y))}setComponentsPositions(t){this.menu.buttonCloseLandscape.x=this.menuBtnCloseLX-t.x,this.menu.buttonClosePortrait.x=this.menuBtnClosePX-t.x,this.footerBar.timebox.position.set(-t.x,t.y)}onSceneResize(){let t=this.layoutService.deviceViewportOffset;T.desktop?this.setComponentsPositions(t):this.checkDeviceResize(t)}onErrorPopUpOpen(t){super.onErrorPopUpOpen(t),this.btnSpin.hide(),this.menu.hide(),this.hideButtons()}onErrorPopUpClose(t){this.showButtons(),super.onErrorPopUpClose(t)}advanceTime(t){return super.advanceTime(t)}exit(){super.exit(),d.off("betSelection"),d.off("turbo"),d.off("stopauto"),d.off("realplay"),d.off("fundtransfer")}};ye([Me("layoutService")],le.prototype,"layoutService",2);ye([Me("orientationService")],le.prototype,"orientationService",2);ye([y("btnTurbo")],le.prototype,"btnTurbo",2);ye([y("btnStopturbo")],le.prototype,"btnStopturbo",2);ye([y("betLevelsSelection")],le.prototype,"betLevelsSelection",2);ye([y("betSelection")],le.prototype,"betSelection",2);ye([y("btnBetSelection")],le.prototype,"btnBetSelection",2);ye([y("iconBetExpandable")],le.prototype,"iconBetExpandable",2);ye([y("selectionPanel")],le.prototype,"selectionPanel",2);ye([y("betButtons")],le.prototype,"betButtons",2);ye([y("settingButtons")],le.prototype,"settingButtons",2);ye([y("btnSpinEffect")],le.prototype,"btnSpinEffect",2);le=ye([f({tag:"main",category:"scene"})],le);class Td extends Id{enter(){ot("SPIN");const e=this.scene.reels.collapsing?300:500;this.showBtnTimer=new uo(()=>{this.scene.reels.isSpinning&&this.scene.btnSpin.show("stop")},this.scene.player.isTurbo?e*.4:e)}exit(){this.showBtnTimer&&this.showBtnTimer.cancel(),super.exit()}}class Ss extends Gn{enter(){super.enter(),this.scene.isBonus=!1,this.scene.isFreeSpin=!1,ot("IDLE"),this.scene.reels.collapsing=!1,this.scene.forceStop=!1,this.scene.deactivated?(this.scene.btnSpin.hide(),this.scene.menu.hide(),this.scene.hideButtons()):this.scene.btnSpin.show("spin"),this.scene.mahjongMultiplier.updateMultiplierLayer("normal"),this.scene.resetData(),this.scene.hideFsPanel(),this.scene.showMainBg(),this.scene.showSpin(),this.scene.showBuyBonusBtn(),this.scene.isAutoSpin&&this.scene.setAutoSpin(()=>{this.clickSpinHandler()})}clickSpinHandler(){Bd("real"),this.scene.resultResponse=null,this.scene.btnSpin.state!=="bonus"&&(this.scene.btnSpin.state="spin"),this.scene.clearAutoSpin(),super.clickSpinHandler()}spinSuccess(){qn(),super.spinSuccess()}spinServiceHandler(e){Qt(e.value.wheel.reels),this.scene.resultResponse=e;const i=this.scene.resultResponse.value;let s,n,r,o;i&&(s=i.balance.value,n=i.win,r=It(i.winPositions),o=i.wheel.reels),this.player.balance=new Decimal(s),this.player.winAmount=new Decimal(n),this.player.winLines=r,this.player.symbols=o,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(o,!1,r,a=>this.getReelsStopPromise(a)),this.scene.setState(w.get("spinState"))}getReelsStopPromise(e){return Is(this)}onReelsStop(){return this.scene.updateAuto(),rt(()=>{},200)}updateState(){Hd({state:this})}}class xt extends Gn{enter(){ot("COLLAPSING"),this.scene.isBonus=!0;const e=this.scene.reels;e.collapsing=!0,e.getSymbolMapping(),this.scene.menu.hide(),this.scene.hideButtons(),this.clickSpinHandler()}getReelsStopPromise(e){return Is(this)}clickSpinHandler(){$d(this.scene.reels,this.scene.resultResponse),this.scene.resultResponse=null,wn()==="real"&&(this.scene.onReelCollapse(),this.spinSuccess()),wn()==="test"&&(this.scene.onReelCollapse(),be(500).then(()=>{this.spinServiceHandler(Ld.bonus_events),this.froundHandler(Ed.base_events)}))}getSpinServie(){return this.netService.bonus({key:"0",step:0,index:0},ho)}spinServiceHandler(e,i){Vd().then(()=>{this.scene.resultResponse=e;const s=this.scene.resultResponse.value;Qt(s.spinResult.wheel.reels);const n=this.scene.reels;let r,o,a,h,u;s&&(r=s.balance.value,s.win,s.spinResult&&(a=s.spinResult.cumulativeWin,o=s.spinResult.collapsingAdds,h=It(s.spinResult.winPositions),u=s.spinResult.wheel.reels)),n.addSymbols=o,this.player.balance=new Decimal(r),this.player.winAmount=new Decimal(a),this.player.winLines=h,this.player.symbols=u,e.value.hasBonus||(e.value.hasBonus=e.value.bonus&&!e.value.bonus.isCompleted),this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(u,!1,h,p=>this.getReelsStopPromise(p)),this.scene.setState(w.get("spinState"))})}onReelsStop(){return this.scene.updateAuto(),Ps()}updateState(){const e=this.scene.reels;e.collapsing=!1,e.addSymbols=[],kd({state:this})}}class Xn extends co{enter(){super.enter(),this.scene.hideButtons(),ot("PREFS"),this.scene.isBonus=!0,this.scene.btnSpin.hide();const e=this.scene.resultResponse.value.bonus.numOfFreeSpin||this.scene.resultResponse.value.numOfFreeSpin;this.scene.youWonPanel.showYouWon(e),this.scene.updateFsPanel(e,e),oe(1e3).then(()=>{this.scene.btnSpin.show("bonus")})}clickSpinHandler(){this.scene.hideBuyBonusBtn(),this.scene.btnSpin.hide(),this.scene.youWonPanel.hideYouWon().then(()=>{this.scene.mainUI.changeToFSUIAsync().then(()=>{this.scene.updateCorner("freeSpin")}),this.scene.mahjongMultiplier.updateMultiplierLayer("freeSpin"),this.scene.btnSpin.show(),this.scene.setState(new ws)})}}class ws extends po{enter(){super.enter(),this.scene.hideButtons(),ot("FS"),this.scene.showFsPanel(),this.scene.showFreeBg(),this.scene.isFreeSpin=!0,this.scene.hideSpin(),this.autoClickTimer=setTimeout(()=>{this.clickSpinHandler()},300)}clickSpinHandler(){clearTimeout(this.autoClickTimer),qn(),super.clickSpinHandler()}getSpinServie(){const e=P().bonus;return this.netService.bonus({key:e.key,step:e.step++,index:0})}spinServiceHandler(e,i){Qt(e.value.spinResult.wheel.reels,!0),this.scene.resultResponse=e;const s=this.scene.resultResponse.value;let n,r,o,a,h;this.netService.json&&s&&(n=s.balance.value,r=s.win,o=It(s.spinResult.winPositions),a=s.spinResult.wheel.reels),this.player.balance=new Decimal(n),this.player.winAmount=new Decimal(r),this.player.winLines=o,this.player.symbols=a,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(a,!1,o,u=>this.getReelsStopPromise(u)),this.scene.setState(w.get("spinState")),this.scene.checkFround(h),this.scene.updateFsPanel(e.value.bonus.numOfFreeSpin,e.value.bonus.counter)}updateState(){return fo({state:this}).then(()=>{})}getReelsStopPromise(e){return Is(this)}onReelsStop(){return Ps(),this.scene.updateAuto(),this.scene.onReelsStop(),rt(()=>{},200)}}class Yn extends co{enter(){super.enter(),this.scene.hideButtons(),ot("PRESUPERGOLD"),this.scene.isSuperGold=!0,this.scene.btnSpin.hide();const e=this.scene.resultResponse.value.bonus.numOfFreeSpin||this.scene.resultResponse.value.numOfFreeSpin;this.scene.youWonPanel.showYouWon(e),oe(1e3).then(()=>{this.scene.btnSpin.show("bonus")})}clickSpinHandler(){this.scene.hideBuyBonusBtn(),this.scene.btnSpin.hide(),this.scene.youWonPanel.hideYouWon().then(()=>{this.scene.mainUI.changeToFSUIAsync().then(()=>{this.scene.updateCorner("superGold")}),this.scene.mahjongMultiplier.updateMultiplierLayer("superGold"),this.scene.btnSpin.show(),this.scene.setState(new xs)})}}class xs extends po{enter(){super.enter(),this.scene.hideButtons(),ot("SUPERGOLD"),this.scene.showSFsPanel(),this.scene.showFreeBg(),this.scene.hideSpin(),this.scene.isFreeSpin=!0,this.autoClickTimer=setTimeout(()=>{this.clickSpinHandler()},300)}clickSpinHandler(){clearTimeout(this.autoClickTimer),qn(),super.clickSpinHandler()}getSpinServie(){const e=P().bonus;return this.netService.bonus({key:e.key,step:e.step++,index:0})}spinServiceHandler(e,i){Qt(e.value.spinResult.wheel.reels,!0),this.scene.resultResponse=e;const s=this.scene.resultResponse.value;let n,r,o,a,h;this.netService.json&&s&&(n=s.balance.value,r=s.win,o=It(s.spinResult.winPositions),a=s.spinResult.wheel.reels),this.player.balance=new Decimal(n),this.player.winAmount=new Decimal(r),this.player.winLines=o,this.player.symbols=a,this.bonusHandler(e),this.trackSpinEvent(),this.scene.reels.stop(a,!1,o,u=>this.getReelsStopPromise(u)),this.scene.setState(w.get("spinState")),this.scene.checkFround(h),this.scene.updateFsPanel(e.value.bonus.numOfFreeSpin,e.value.bonus.counter)}updateState(){return fo({state:this})}getReelsStopPromise(e){return Is(this)}onReelsStop(){return Ps(),this.scene.updateAuto(),this.scene.onReelsStop(),rt(()=>{},200)}}let b,Ge=null,zn=0,ai,Dt,li,Fe=0,ft=null;const ot=t=>{if(!b)return;b.gameState=t;const e=t==="IDLE"&&!b.isAutoSpin&&!b.isFreeSpin;b.buyBonusBtn.spine.tint=e?16777215:8421504,b.buyBonusBtn.enabled=e,b.buyBonusBtn.spine.resetTrackTime()},wn=()=>b.gameType,Bd=t=>{b&&(b.gameType=t)},Ed=JSON.parse(JSON.stringify(ro)),Ld=JSON.parse(JSON.stringify(ro)),Od=()=>b.gameState==="IDLE"&&!b.isAutoSpin&&!b.isFreeSpin;function Ad(t){t&&(b=t)}function Is(t,e){return Ps(),t.onReelsStop().then(()=>Dd()).then(()=>Md()).then(()=>Wd()).then(()=>t.updateState()).then(()=>t.scene.animateFooterBar(!0))}function Dd(){return b.player.bonus&&b.player.bonus.id!==void 0&&!b.isFreeSpin?b.showHudMessage(""):b.player.winAmount.lte(0)&&!b.isAutoSpin&&!b.isFreeSpin?b.showHudMessage(M.NO_WIN):b.showHudMessage(),Promise.resolve()}function Qt(t,e=!1){for(let i=0;i<t.length;i++){const s=t[i];(i==0||i==4)&&s.push(st(20))}}function es(t){const i=b.reels.symbols;i.forEach(s=>{s.forEach(n=>{i.forEach(r=>{r.forEach(o=>{const a=Math.floor(255-100*Math.sin(Math.PI*t));if(o.content&&o.content.spine)try{o.content.spine.tint=`#${a.toString(16)}${a.toString(16)}${a.toString(16)}`,o.content.spine.animation.update(0)}catch{}})})})})}function Nd(){b.reels.symbols.forEach(i=>{i.forEach(s=>{s.idle()})})}function Rd(){Dt=new TWEEN.Tween({k:0}).easing(t=>t<.25?t*2:t>.75?(1-t)/2:.5).to({k:1},P().isTurbo?1e3:2e3).onUpdate(t=>{es(t.k)}).onComplete(()=>{es(1)}).start()}function Md(){const t=b.player.winLines;let e=!1;return t.length===0?Promise.resolve():(b.btnSpin.hide(),new Promise((i,s)=>{Rd(),b.totalWinPanel.showTotalWin(b.resultResponse.value.win);const r=b.reels.symbols,o=[];if(r)for(let a=0;a<t.length;a++){const u=t[a].positions;for(let p=0;p<u.length;p++){const g=u[p],m=r[g[0]][g[1]];m&&o.indexOf(m)===-1&&o.push(m)}}o.sort((a,h)=>a.index==Kt?1:h.index==Kt?-1:a.col-h.col==0?a.row-h.row:h.col-a.col);for(let a=0;a<o.length;a++){const h=o[a];h.parent.setChildIndex(h,h.parent.children.length-1),h.animate();const u=h.index;rd(u,h,h.content),oe(P().isTurbo?1e3:2e3).then(()=>{Dt&&(Dt.end().stop(),TWEEN.remove(Dt),Dt=null),i(),Nd()}),h.index>10&&(e=!0)}j(e?"lp_win":"hp_win","default"),oe(P().isTurbo?600:1200).then(()=>{j("collapse","default")})}))}function ts(){return new Promise(t=>{be(500).then(()=>{const e=b.resultResponse.value,s=(e.wheel||e.spinResult.wheel).reels,n=e.numOfScatter||e.spinResult.numOfScatter,r=[];for(let o=0;o<s.length;o++){const a=s[o];for(let h=0;h<a.length;h++)a[h]==et&&n>r.length&&r.push(b.reels.symbols[o][h])}r.sort((o,a)=>o.col-a.col==0?o.row-a.row:a.col-o.col);for(let o=0;o<r.length;o++){const a=r[o];a.parent.setChildIndex(a,a.parent.children.length-1),nd(a)}oe(P().isTurbo?666:2e3).then(t)})})}function Wd(){return b.resultResponse.value.win==0?new Promise(e=>{Ge=()=>{b.mahjongMultiplier.setMultiplierIndex(0),es(1),e()},Gd();const i=new Decimal(b.resultResponse.value.cumulativeWin);i.gt(0)?(es(.5),b.btnSpin.hide(),Fe>=bn?(b.youWonPanel.showBigWin(i.toNumber()),Jd(),oe(8e3).then(()=>{b.youWonPanel.hideBigWin(i.toNumber()).then(()=>{Zd(),Ge(),Ge=null,b.btnSpin.show("spin")})})):be(200).then(()=>{jd(),Ud(i)})):(b.footerBar.winBox.visible=!1,Ge(),Ge=null)}):Promise.resolve()}function Fd(){b.btnSpin.hide(),ft&&ft.stop(),ai&&(bt(ai),ai=null);const t=b.player.winAmount;b.winLevelLabel&&b.winLevelLabel.visible&&(b.winLevelLabel.value=t.toFixed(2)),b.footerBar.winBoxLabel.update(t),b.footerBar.directUpdateWinAmount(t),ft=null,bo()}function Hd({state:t,restoreData:e}){return rt(()=>{if(wn()==="test"){t.scene.setState(new xt);return}const i=t.scene.resultResponse,s=i.value;(()=>{if(s.hasBonus)if(s.isCollapse){t.scene.setState(new xt);return}else{const r=i.value.numOfFreeSpin;if(s.isSuperFreeSpin){t.scene.toBonus=!0,ts().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new Yn),t.scene.updateFsPanel(r,r)});return}else{t.scene.toBonus=!0,ts().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new Xn),t.scene.updateFsPanel(r,r)});return}}else t.scene.setState(new Ss)})()})}function fo({state:t}){return rt(()=>{const i=t.scene.resultResponse.value,s=new Decimal(i.spinResult.win);if(i.isCompleted)mo(t);else if(s.gt(0)){t.scene.setState(new xt);return}else t.scene.isSuperGold?t.scene.setState(new xs):t.scene.setState(new ws)})}function mo(t){const e=t.scene.resultResponse.value;function i(){t.scene.mainUI.changeToNormalUI(),t.scene.setState(new Ss),t.scene.updateCorner("normal"),b.isBonus=!1}e.bonus.totalWin>0?(b.youWonPanel.showTotalWin(e.bonus.totalWin),b.btnSpin.hide(),b.isBonus=!1,oe(4e3).then(()=>{b.youWonPanel.hideTotalWin(e.bonus.totalWin).then(()=>{b.isSuperGold=!1,b.isFreeSpin=!1,i()})})):i()}function kd({state:t,restoreData:e}){return rt(()=>{const s=t.scene.resultResponse.value,n=new Decimal(s.spinResult.win);if(s.isCompleted)s.bonus&&s.bonus.isFreeSpin?mo(t):t.scene.setState(new Ss);else if(n.gt(0))t.scene.setState(new xt);else if(s.spinResult.isFreeSpin){const r=s.spinResult.currentFreeSpinStep;s.spinResult.isSuperFreeSpin?r==1?(t.scene.isSuperGold=!0,ts().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new Yn)})):t.scene.setState(new xs):r==1?(t.scene.toBonus=!0,ts().then(()=>t.scene.goToPreBonus()).then(()=>{t.scene.setState(new Xn)})):t.scene.setState(new ws)}})}function Ud(t){const e={value:0};ft=new TWEEN.Tween(e).to({value:t.toNumber()},zn).easing(TWEEN.Easing.Linear.None).onUpdate(()=>{b.winLevelLabel&&b.winLevelLabel.visible&&(b.winLevelLabel.value=e.value.toFixed(2)),b.footerBar.directUpdateWinAmount(new Decimal(e.value)),b.footerBar.winBoxLabel.update(e.value)}).onComplete(()=>{bo()}).start(),Fe>_p&&Fe<=bn&&be(1e3).then(()=>{b.btnSpin.show("skip")}),Fe<=bn&&(b.footerBar.winBox.visible=!0,ai=j(Hp+Fe,"default",!0))}const wr={};function $d(t,e){function i(h,u){return`${h}_${u}`}function s(h,u){let p=wr[`r${h}_${u}`];if(!p){p=[];for(let g=0;g<10;g++)p.push([Math.random()*2-1,Math.random()*2-1]);p=[[0,0],...p,[0,0]],wr[`${i(h,u)}`]=p}return p}function n(h,u,p,g,m){const A=u*m.length,L=Math.min(Math.floor(A),m.length-1),G=m[L][0],Le=m[L][1],Je=Math.min(Math.ceil(A),m.length-1),Tt=m[Je][0],Ts=m[Je][1],Oe=A-L,at=G+(Tt-G)*Oe,Bs=Le+(Ts-Le)*Oe,Es=-3*at,Ae=3*Bs;h.content.x=p+Es,h.content.y=g+Ae}const r={},o={};for(let h=0;h<t.symbols.length;h++){const u=t.symbols[h];for(let p=0;p<u.length;p++){const g=i(h,p);if(!r[g]){const m=u[p];o[`${i(h,p)}`]={position:[m.content.x,m.content.y],symbol:m,range:s(h,p)}}}}function a(h){for(let u=0;u<t.symbols.length;u++){t.symbols[u];for(let p=0;p<6;p++){const g=o[`${i(u,p)}`];g&&n(g.symbol,h,g.position[0],g.position[1],g.range)}}}li=new TWEEN.Tween({k:0}).to({k:1},300).onUpdate(h=>{a(h.k||1)}).repeat(Number.POSITIVE_INFINITY).start()}function Vd(){return new Promise(t=>{t(),be(P().isTurbo?300:800).then(()=>{li.end().stop(),TWEEN.remove(li),li=null,t()})})}function jd(){b.animation.playWinEffect(Fe)}function bo(){zn=0,ft=null,be(500).then(()=>{b.animation.removeWinEffect().then(()=>{b.footerBar.winBox.visible=!1,b.btnSpin.show("spin"),Ge&&Ge(),Ge=null})})}function Gd(){const t=b.resultResponse.value.cumulativeWin;Fe=0;const e=new Decimal(t);if(e.gt(0)){const i=b.player.totalBet.toNumber();for(let s=mr.length-1;s>=0;s--)if(e.gte(i*mr[s])){Fe=s+1;break}zn=Cp*Ip[Fe-1]}}function Ps(){return zd(),rt(()=>{},200)}function It(t){const e=[];return t&&t.forEach((i,s)=>{e.push(Xd(i))}),e}function Xd(t){const e=[];for(let i=0;i<t.rowPositions.length;i++){const s=t.rowPositions[i]-1;s>=0&&e.push([i,s])}return{index:t.line,win:t.win,multiplier:t.multiplier,wildMultiplier:t.wildMultiplier||0,positions:e,symbol:t.symbol,type:t.type}}function mt(t=!1){const e=x().LANGUAGE;let i="en";return e===N.Chinese&&(i="cn"),t?i.toUpperCase():i.toLocaleLowerCase()}function _s(t,e,i,s=500,n=0,r){const o=v.get("soundService");if(i&&i.volume===e)return o.setVolume(e,i.soundId),null;const a={volume:t},h=i?i.soundId:void 0,u=new TWEEN.Tween(a).to({volume:e},s).onUpdate(()=>{o.setVolume(a.volume,h)}).onComplete(()=>{i&&(i.volume=a.volume),r&&r()}).delay(n);return u.start(),u}let X,me,tt,hi,ui,ci;function Yd(){if(T.isUCBrowser)return;const t=v.get("soundService");if(t.stopBgm(),t.volume=0,X&&me){ss(!0),be(300).then(()=>{t.volume=1,t.setVolume(1,X.soundId),X.volume=1});return}me=j(Op,"default",!0),X=j(Lp,"default",!0),ss(!0),be(200).then(()=>{t.volume=1,t.setVolume(1,X.soundId),X.volume=1})}function go(t=500){if(!X||T.isUCBrowser)return;const e=v.get("soundService");X.volume===0?(e.setVolume(0,X.soundId),X.volume=0,_s(0,1,X,t)):(e.setVolume(1,X.soundId),X.volume=1)}function vo(t,e=500){if(!X||T.isUCBrowser)return;const i=v.get("soundService");X.volume===1?(i.setVolume(1,X.soundId),X.volume=1,_s(1,0,X,e)):(i.setVolume(0,X.soundId),X.volume=0)}function yo(){if(!me||T.isUCBrowser)return;const t=v.get("soundService");tt&&tt.stop(),t.setVolume(0,me.soundId),me.volume=0,_s(0,.8,me),tt=null}function ss(t,e=500,i=0){if(!me||T.isUCBrowser)return;const s=v.get("soundService");tt&&(tt.stop(),s.setVolume(0,me.soundId),me.volume=0),t?(s.setVolume(0,me.soundId),me.volume=0,tt=null):me.volume===.8&&(tt=_s(.8,0,me,e,i))}function xn(){b.isFreeSpin?yo():go()}function In(){b.isFreeSpin?ss():vo()}function qn(){T.isUCBrowser||(hi=j("reelspinningbgm","default",!0))}function zd(){hi&&(bt(hi),hi=null)}function qd(){T.isUCBrowser||(ui=j(Dp,"default"),In())}function Kd(){ui&&(bt(ui),ui=null,xn())}function Jd(){T.isUCBrowser||(ci=j("bigwin_level_body","default",!0,!1,()=>{j("bigwin_level_outro","default",!0)}))}function Zd(){ci&&(bt(ci),ci=null)}const Kn="events:reel:stop",So="events:reel:readystop",wo="events:reel:allstop";var Qe=(t=>(t[t.Spin=0]="Spin",t[t.ReadyToStop=1]="ReadyToStop",t[t.Stopping=2]="Stopping",t[t.Stopped=3]="Stopped",t))(Qe||{});let Qd=class{constructor(e){this.states=[],this.stopSequence=[[0],[1],[2],[3],[4]],this.spinTime=[0,0,0,0,0],this.stopSequenceIdx=0,this.spinAnimator=new Jn(e)}advanceTime(e){if(this.enabled){try{let i=this.spinAnimator.getSpeed(),s=this.stopAnimator?this.stopAnimator.getSpeed():0,n=0;for(let r=this.numCols-1;r>=0;r--){let o=this.states[r],a=this.reels.symbols[r];o!==3&&a.forEach(h=>{h.y+=o===0?i:s,h.updateAttached()}),o===0&&(n=r)}if(this.reels.symbols[n][0].y>0&&this.reels.addSpinSymbols(n),this.reels.removeOutsideSymbols(),this.stopAnimator&&this.stopAnimator.stopped){let r=[];for(let o=0;o<this.numCols;o++)this.states[o]===2&&(this.states[o]=3,this.reels.adjustCol(o),r.push(o));d.emit(Kn,r),this.allStopped?(this.cancel(),this.resolve()):this.readyToStop()}this.update&&this.update()}catch{this.reject&&this.reject({code:fs,message:""})}return!0}}get allStopped(){for(let e=0;e<this.numCols;e++)if(this.states[e]!==3)return!1;return!0}emptyArr(){let e=[];for(let i=0;i<this.numCols;i++)e.push(void 0);return e}play(){this.enabled=!0;for(let e=0;e<this.numCols;e++)this.states[e]=0;this.spinAnimator.init(),this.stopAnimator=void 0,B.add(this)}stop(){if(!this.enabled)return Promise.resolve();let e=new Promise((i,s)=>{this.resolve=i,this.reject=s});return this.readyToStop(),e}allNotEmpty(e){for(let i=0;i<this.numCols;i++)if(!e[i])return!1;return!0}readyToStop(){this.stopAnimator=void 0;let e=this.stopSequence[this.stopSequenceIdx],i=()=>{d.emit(So,e),this.stopSequenceIdx++;let s;for(let n=e.length-1;n>=0;n--){let r=e[n];this.states[r]=2,s=this.reels.addStopSymbols(r)}this.stopAnimator=this.spinAnimator.clone(),this.stopAnimator.stop(s)};this.spinTime[this.stopSequenceIdx]?(this.spinTimer=setTimeout(i,this.spinTime[this.stopSequenceIdx]),this.setSpinTimeOnce&&(this.setSpinTimeOnce=!1,this.spinTime[this.stopSequenceIdx]=this.tempSpinTime)):i()}setSpinningTime(e,i,s=!0){this.tempSpinTime=this.spinTime[e],this.spinTime[e]=i,this.setSpinTimeOnce=s}get numCols(){return x().NUM_OF_COLUMN}cancel(){clearTimeout(this.spinTimer),this.init(),this.enabled=!1,B.remove(this)}init(){this.stopSequenceIdx=0}};class Jn{constructor(e){this.state=0,this.acceleration=2,this.deceleration=2,this.maxSpeed=30,this.startSpeed=0,this.stopSpeed=0,this.maxSpeed=e.maxSpeed,this.startSpeed=e.startSpeed,this.stopSpeed=e.stopSpeed,this.acceleration=e.acceleration,this.deceleration=e.deceleration||this.acceleration,this.options=e}init(){this.state=0,this.currentSpeed=this.startSpeed,this.currentAcc=this.acceleration}stop(e){return this.stopDistance=e,this.readyToStop(),new Promise((i,s)=>{this.resolve=i})}get stopped(){return this.state===3}clone(){let e=new Jn(this.options);return e.state=this.state,e.currentAcc=this.currentAcc,this.currentSpeed<=0?e.currentSpeed=this.maxSpeed:e.currentSpeed=this.currentSpeed,e}getSpeed(){if(this.state===0)this.currentSpeed+=this.currentAcc;else if(this.state===1)this.stopFrames--,this.stopDistance-=this.currentSpeed,this.readyToStop();else if(this.state===2)this.currentSpeed-=this.currentAcc,Math.abs(this.currentSpeed-this.stopSpeed)<this.currentAcc&&(this.state=3,this.resolve());else return 0;return this.currentSpeed=Math.min(this.currentSpeed,this.maxSpeed),this.currentSpeed}readyToStop(){this.state=1,this.stopFrames=0;let e=this.distanceToStop;this.stopDistance<=e&&(this.currentSpeed=this.speedToStop(),this.state=2)}speedToStop(){for(var e=this.stopDistance,i=this.stopSpeed,s=0,n=0;s<=e;)s+=i,i+=this.deceleration,n++;let r=(e-n*this.stopSpeed)*2/(n*(n-1));return this.currentAcc=r,this.stopSpeed+n*r}get distanceToStop(){if(!this._distanceToStop){var e=this.maxSpeed;for(this._distanceToStop=0;e>=this.stopSpeed;)e-=this.deceleration,this._distanceToStop+=e}return this._distanceToStop}}var ef=Object.defineProperty,tf=Object.getOwnPropertyDescriptor,sf=(t,e,i,s)=>{for(var n=s>1?void 0:s?tf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&ef(e,i,n),n};let qe=class extends _{constructor(){super(...arguments),this.mode="sfs"}get scene(){return this.parent.parent}onCreate(){this.container.bannerBuyInButton.box.cursor=this.container.bannerFSClick.box.cursor=this.container.bannerSFSClick.box.cursor=this.container.close.box.cursor="pointer";const t=this.container.spine.getSlotContainerByName("BuyBonusText"),e=H().get("bonusBuyTitle");t.removeChildren(),t.addChild(e);const i=H().get("buyBonusCloseBtn"),s=H().get("bannerBuyInButton");t.addChild(i),t.addChild(s),this.buyBonusLabel=s;const n=this.container.bannerFS.getSlotContainerByName("BannerText3"),r=H().get("bonusMaxRandomCount");n.removeChildren(),n.addChild(r);const o=this.container.bannerSFS.getSlotContainerByName("BannerText3"),a=H().get("bonusMaxRandomCount");o.removeChildren(),o.addChild(a);const h=this.container.bannerFS.getSlotContainerByName("BannerText2"),u=H().get("bonusMaxUp10");h.removeChildren(),h.addChild(u);const p=this.container.bannerSFS.getSlotContainerByName("BannerText2"),g=H().get("bonusMaxUp50");p.removeChildren(),p.addChild(g);const m=this.container.bannerFS.getSlotContainerByName("BannerText1"),A=H().get("bonusBuyFsT");m.removeChildren(),m.addChild(A);const L=this.container.bannerSFS.getSlotContainerByName("BannerText1"),G=H().get("bonusBuySFsT");L.removeChildren(),L.addChild(G)}openBuyBonus(){this.container.bannerBuyInButton.enabled=!1,this.container.visible=!0,this.scene.btnSpin.hide(),this.scene.hideButtons(),C(this.container.spine,"BuyBonus_Intro",!1,()=>{C(this.container.spine,"BuyBonus_Still",!0,()=>{}),this.enableButtons(!0)}),this.container.bannerFS.visible=!0,C(this.container.bannerFS,"Banner_Intro",!1,()=>{C(this.container.bannerFS,this.mode=="fs"?"Banner_IdleSelected":"Banner_IdleDefault",!0),this.container.bannerBuyInButton.enabled=!0}),this.container.bannerSFS.visible=!0,C(this.container.bannerSFS,"Banner_Intro",!1,()=>{C(this.container.bannerSFS,this.mode=="sfs"?"Banner_IdleSelected":"Banner_IdleDefault",!0),this.container.bannerBuyInButton.enabled=!0}),this.updateBuyInAmount()}updateBuyInAmount(){const t=P().totalBet.mul(this.mode=="fs"?no:gn).toNumber();this.buyBonusLabel.label.value=`${P().currency} ${t}`}enableButtons(t){this.container.bannerFSClick.enabled=t,this.container.bannerSFSClick.enabled=t,this.container.bannerBuyInButton.enabled=t,this.container.close.enabled=t}onClose(t){this.enableButtons(!1),C(this.container.spine,"BuyBonus_Outro",!1,()=>{this.enableButtons(!0),this.scene.btnSpin.show(),this.scene.showButtons(),this.container.visible=!1,t&&t()})}onBuyInBonusConfirmed(){j("sfx_button_bonus_purchase","default",!1,!0),this.onClose(()=>{this.emit(qe.EVENTS_BUY_BONUS_CONFIRMED,this.mode)})}onSelectedFs(){this.mode="fs",this.updateBuyInAmount(),C(this.container.bannerFS,"Banner_IdleSelected",!0),C(this.container.bannerSFS,"Banner_IdleDefault",!0),this.container.setChildIndex(this.container.bannerFS,3)}onSelectedSFs(){this.mode="sfs",this.updateBuyInAmount(),C(this.container.bannerSFS,"Banner_IdleSelected",!0),C(this.container.bannerFS,"Banner_IdleDefault",!0),this.container.setChildIndex(this.container.bannerSFS,3)}static create(t,e){const i=nf(qe,t,e);return i.onCreate(),i}};qe.EVENTS_BUY_BONUS_CONFIRMED="events:buybonus:confirmed";qe.EVENTS_BUY_BONUS_CLOSED="events:buybonus:closed";qe=sf([f({tag:"buyBonus"})],qe);function nf(t,e,i){const s=new t;return he(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var rf=Object.defineProperty,of=Object.getOwnPropertyDescriptor,Z=(t,e,i,s)=>{for(var n=s>1?void 0:s?of(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&rf(e,i,n),n};let Y=class extends le{constructor(){super(...arguments),this.deactivated=!1,this.isBonus=!1,this.isSuperGold=!1,this.forceStop=!1,this.toBonus=!1,this.gameState="IDLE",this.gameType="real"}enter(){const t=v.get("soundService");t&&(t.volume=0),super.enter()}onCreated(){super.onCreated(),this.reels.sortSymbols(),this.deactivated=!1,this.animation=new od(this),Ad(this),Yd(),this.buyBonus&&this.buyBonus.on(qe.EVENTS_BUY_BONUS_CONFIRMED,t=>{t==="fs"&&this.setCreditBet(no),t==="sfs"&&this.setCreditBet(gn),this.state.clickSpinHandler(),this.setCreditBet()}),d.on(So,t=>this.addSlotFire(t)),d.on(Kn,t=>this.removeSlotfire(t)),d.on(wo,t=>this.allReelsStop()),w.get(vn)&&(this.initTo(),w.map(vn).toValue(!1)),d.on("pressQ",()=>this.totalWinPanel.showTotalWin(1e3)),d.on("pressW",()=>this.youWonPanel.showBigWin(1e3)),d.on("pressE",()=>this.youWonPanel.showTotalWin(1e3)),d.on("pressR",()=>this.youWonPanel.showYouWon(10)),d.on("pressT",()=>this.youWonPanel.hideBigWin(1e3)),d.on("pressY",()=>this.youWonPanel.hideTotalWin(1e3)),this.animationBuyBonusBtn()}initTo(){const t=w.get("gameState");let e,i=yr,s="normal",n=!1;const r=t.bonus&&t.bonus.gameResult?t.bonus.gameResult.winPositions?t.bonus.gameResult.winPositions:t.bonus.gameResult.spinResult.winPositions:[];t.bonus&&(t.bonus.id==1?(this.reels.winLines=It(r),e=new xt):t.bonus.id==2&&(this.hideBuyBonusBtn(),this.showFreeBg(),i=t.bonus.spinResult.credit,n=t.bonus.numOfFreeSpin>t.bonus.counter,n&&this.hideSpin(),i==gn?(e=n?new xs:new Yn,s="superGold",n&&this.showSFsPanel()):(e=n?new ws:new Xn,s="freeSpin",n&&this.showFsPanel()),this.isFreeSpin=!0,r.length>0&&(this.reels.winLines=It(r),e=new xt),this.updateFsPanel(t.bonus.numOfFreeSpin,t.bonus.counter))),s=="normal"?(this.mahjongMultiplier.init(),this.mainUI.init(),this.updateCorner(s)):n&&(this.mahjongMultiplier.updateMultiplierLayer(s),this.mainUI.changeToFSUIAsync().then(()=>{this.updateCorner(s)}),this.isSuperGold=s=="superGold",this.toBonus=s=="freeSpin"),t.bonus&&this.mahjongMultiplier.setMultiplierIndex(t.bonus.gameResult.multiplier,s),this.resultResponse={value:t},e&&this.setState(e)}addSlotFire(t){}removeSlotfire(t){for(const e of t){const i=this.resultResponse.value;if(!this.player.isTurbo){let s=0;const n=i.wheel?i.wheel:i.spinResult.wheel;for(let r=0;r<=e;r++)for(let o=1;o<n.reels[r].length-(r==0||r==4?2:1);o++)n.reels[r][o]==et&&s++;e>=2&&(this.slotFire[`p${e}`].spine.visible=!1,this.slotFire[`p${e}`].spine.animated=!1),s>=2&&e>=1&&e<4&&(this.slotFire[`p${e+1}`].spine.visible=!0,this.slotFire[`p${e+1}`].spine.animated=!0,this.reels.setSpinningTime(e+1,4e3),qd())}this.reels.reelStoped(e),this.playSymbolDropAnim(e)}j(Ap,"default")}playSymbolDropAnim(t){const e=this.resultResponse.value,i=e.wheel?e.wheel:e.spinResult.wheel;let s=0;const n=i.reels[t].indexOf(et)>-1;for(let a=0;a<=t;a++){const h=i.reels[a];for(let u=0;u<h.length;u++)h[u]==et&&s++}const o=this.reels.symbols[t];if(t<4||t==4&&e.numOfScatter<3)for(const a of o){const h=Number(a.index);let u,p;if(h==Kt?(u=Tp,p="Wild_Idle"):h==et&&(u=Bp,p="Scatter_Idle"),u&&a.row>=0){const g=a.content.spine;let m;s==1&&(m=Np),s==2&&(m=Rp),s>2&&(m=Mp),m&&n&&j(m,"default"),C(g,u,!1,()=>{a.idle(),g.setAnimation(0,p,!0),g.animation.update(0)})}}}checkAuto(){this.isAutoSpin&&this.player.isAutoSpinOn&&(!this.isFreeSpin&&!this.isBonus&&this.updateAutoCount(this.player.autoSpin-1),this.player.checkAutoSpinConditions())}allReelsStop(){for(const t of[2,3,4])this.slotFire[`p${t}`].spine.visible=!1,this.slotFire[`p${t}`].spine.animated=!1;this.reels.sortSymbols(),Kd(),this.btnSpin.hide()}setCreditBet(t=yr){this.player.bet.multiplier=t}onBetLevelSelect(){this.updateBetAmount(),this.updateFooterBar()}showButtons(){super.showButtons()}hideButtons(){super.hideButtons()}restore(){}onClickBuyBonus(){Od()&&(C(this.buyBonusBtn.spine,"Trigger",!1,()=>{}),oe(700).then(()=>{this.animationBuyBonusBtn(),this.buyBonus.openBuyBonus()}))}onReelCollapse(){this.mahjongMultiplier.increaseMultiplier()}resetData(){this.mahjongMultiplier.resetMultiplierIndex()}clickSpinHandler(t){if(this.btnSpin.enabled){if(ft&&this.btnSpin.state==="skip"){Fd();return}this.forceStop=this.btnSpin.state==="stop",super.clickSpinHandler(t)}}clickAutospin(){this.isBonus||super.clickAutospin()}clickBetSelectionHandler(){this.isBonus||super.clickBetSelectionHandler()}clickTurboHandler(){this.isBonus||(super.clickTurboHandler(),this.updateFastSpin())}updateFastSpin(){let t;const e=this.reels,i=w.get("reelsAnimator");this.player.isTurbo?(t={maxSpeed:60,startSpeed:0,stopSpeed:-15,acceleration:8,deceleration:10,stopSequence:[[0,1,2,3,4]]},e.stopTime=0,e.winPanel.animationTimer=500):(t={maxSpeed:60,startSpeed:0,stopSpeed:-15,acceleration:4,deceleration:10,stopSequence:[[0],[1],[2],[3],[4]]},e.stopTime=600,e.winPanel.animationTimer=2e3),i.spinAnimator.options=t,i.spinAnimator.maxSpeed=t.maxSpeed,i.spinAnimator.startSpeed=t.startSpeed,i.spinAnimator.stopSpeed=t.stopSpeed,i.spinAnimator.acceleration=t.acceleration,i.stopSequence=t.stopSequence}onErrorPopUpOpen(t){this.deactivated=!0,super.onErrorPopUpOpen(t)}onErrorPopUpClose(t){this.deactivated=!1,super.onErrorPopUpClose(t)}onWinLoopComplete(){}goToPreBonus(){return new Promise((t,e)=>{this.btnSpin.show("skip"),t(!0)})}onReelsStop(){}onWinLine(t){super.onWinLine(t),this.autoSpinLogic()&&this.btnSpin.show("skip")}onWinPanelClose(){super.onWinPanelClose()}onClose(){this.buyBonus.onClose()}onBuyInBonusConfirmed(){this.buyBonus.onBuyInBonusConfirmed()}onSelectedFs(){this.buyBonus.onSelectedFs()}onSelectedSFs(){this.buyBonus.onSelectedSFs()}autoSpinLogic(){return this.isAutoSpin||this.isBonus}setAutoSpin(t){this.autoSpinTimer=setTimeout(()=>{t()},P().isTurbo?300:600)}clearAutoSpin(){clearTimeout(this.autoSpinTimer)}stopAutoHandler(){this.player.stopAutoSpin(),this.resetAutoSpin(),this.clearAutoSpin(),this.reels.isSpinning||this.showButtons()}getWinLineMessageDetails(t){return null}onOrientationChange(t){super.onOrientationChange(t)}advanceTime(t){return super.advanceTime(t)}checkDeviceResize(t){super.checkDeviceResize(t)}setComponentsPositions(t){let e=t.x,i=t.y,s=t.x;T.desktop?(e=Math.min(100,t.x),s=Math.min(100,t.x)):i=Math.min(100,t.y),this.menu.buttonClosePortrait.x=this.menuBtnClosePX-s,this.footerBar.timebox.position.set(-e,-i),this.menu.y=Math.max(-100,this.menu.y)}updateCorner(t){this.cornerN.visible=t=="normal",this.cornerFs.visible=t=="freeSpin",this.cornerSFs.visible=t=="superGold"}showMainBg(){Lt(this.mainBg),Ot(this.freeBg)}showFreeBg(){Lt(this.freeBg),Ot(this.mainBg)}showFsPanel(){Lt(this.fspanel)}showSFsPanel(){Lt(this.sfspanel)}updateFsPanel(t,e){this.fspanel.label.value=this.sfspanel.label.value=`${e} / ${t}`}hideFsPanel(){Ot(this.fspanel),Ot(this.sfspanel)}showBuyBonusBtn(){Lt(this.buyBonusBtn)}hideBuyBonusBtn(){Ot(this.buyBonusBtn)}showSpin(){this.btnMenu.visible=!0,this.btnSpin.visible=!0,this.player.isTurbo||(this.btnTurbo.visible=!0),this.player.isTurbo&&(this.btnStopturbo.visible=!0),this.btnAutoSpin.visible=!0}hideSpin(){this.btnMenu.visible=!1,this.btnSpin.visible=!1,this.btnTurbo.visible=!1,this.btnStopturbo.visible=!1,this.btnAutoSpin.visible=!1,this.autoSpinDisplay.visible=!1}playBtnSpinEffect(){this.isFreeSpin||super.playBtnSpinEffect()}resetAutoSpin(){this.autoSpinDisplay&&(clearTimeout(this.autoSpinTimer),this.autoSpinDisplay.visible=!1,this.isFreeSpin||(this.btnAutoSpin.visible=!0))}animationBuyBonusBtn(){C(this.buyBonusBtn.spine,"Idle",!0,()=>{})}exit(){this.animation&&this.animation.exit(),super.exit()}};Z([Me("widgetService")],Y.prototype,"widgetService",2);Z([y("mahjongMulti")],Y.prototype,"mahjongMultiplier",2);Z([y("totalWinPanel")],Y.prototype,"totalWinPanel",2);Z([y("youWonPanel")],Y.prototype,"youWonPanel",2);Z([y("buyBonus")],Y.prototype,"buyBonus",2);Z([y("mainUI")],Y.prototype,"mainUI",2);Z([y("cornerSFs")],Y.prototype,"cornerSFs",2);Z([y("cornerFs")],Y.prototype,"cornerFs",2);Z([y("cornerN")],Y.prototype,"cornerN",2);Z([y("slotFire")],Y.prototype,"slotFire",2);Z([y("fspanel")],Y.prototype,"fspanel",2);Z([y("sfspanel")],Y.prototype,"sfspanel",2);Z([y("bigWinEffectbox")],Y.prototype,"bigWinEffectbox",2);Z([y("getFreeEffectbox")],Y.prototype,"getFreeEffectbox",2);Z([y("freeWinEffectbox")],Y.prototype,"freeWinEffectbox",2);Z([y("bgp")],Y.prototype,"bgp",2);Z([y("buyBonusBtn")],Y.prototype,"buyBonusBtn",2);Y=Z([f({tag:"main",category:"scene"})],Y);var af=Object.defineProperty,lf=Object.getOwnPropertyDescriptor,Cs=(t,e,i,s)=>{for(var n=s>1?void 0:s?lf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&af(e,i,n),n};let Pt=class extends Zt{enter(){super.enter(),pe.querySelector(".gplogo").hide(),pe.querySelector(".loader").hide(),this.version&&(this.version.value="v"+S.engineVersion)}onCreated(){B.add(this),this.player.bet.lines=parseInt(S.numBetLines),S.creditsBetLines&&(this.player.bet.credits=parseInt(S.creditsBetLines)),this.netService.signIn().then(t=>{this.netService.json?t.value&&(t.value.sessionKey?(this.context.USER_ID=this.player.sessionKey=t.value.sessionKey,t.value.memberName&&(this.player.accountName=this.player.displayName=t.value.memberName)):this.context.USER_ID=this.player.sessionKey=t.value):(this.context.USER_ID=this.player.sessionKey=t.token,t.name&&(this.player.accountName=this.player.displayName=t.name))}).then(()=>Promise.all([this.netService.getBalance().then(t=>{if(this.netService.json?t.value&&(this.player.balance=new Decimal(t.value.amount),t.value.currency!==void 0&&(this.player.currency=t.value.currency)):(this.player.balance=t.balance,this.player.currency=t.currency,t.userid!==void 0&&(this.player.accountName=t.userid)),this.context.ANONYMOUS)this.context.TRACKER_USER_ID=this.context.USER_ID;else{this.context.TRACKER_USER_ID=this.player.accountName;const e=window.appInsights;e&&e.setAuthenticatedUserContext(this.context.TRACKER_USER_ID)}}),this.netService.getBets().then(t=>{if(this.netService.json){if(t.value){if(w.map("gameState").toValue(t.value),this.player.symbols=t.value.wheel.reels,this.player.betValues=t.value.coins,t.value.extraGameSettings&&this.context.multiplierAsCreditBet){const e=t.value.extraGameSettings.creditBet;this.player.multiplierValues=e||t.value.multipliers}else this.player.multiplierValues=t.value.multipliers;if(this.player.bet.amount=t.value.coins[0],this.player.setDefaultBet(),this.player.betValue=t.value.bet||t.value.coins[0],this.player.demo=t.value.funPlayDemo?"1":"0",this.player.getBet=t.value,this.player.bonus=dd(t),this.player.bonus&&(this.player.restoreBonus=!0,this.player.bonus.wheels&&(this.player.symbols=this.player.bonus.wheels)),Qt(this.player.symbols),t.value.multiplier?this.player.multiplierValues.indexOf(this.player.bet.multiplier)>=0&&(this.player.multiplierIndex=this.player.multiplierValues.indexOf(this.player.bet.multiplier)):this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"){let e=t.value.freeGameInfo;t.value.dailyFreeGameInfo&&(e=t.value.dailyFreeGameInfo),e&&(this.player.fround=e,this.player.froundCount=e.round)}}this.extraGetBetsSetting(t)}else w.map("gameState").toValue(t),this.player.symbols=t.wheels,this.player.betValues=t.betValues,this.player.multiplierValues=t.multiplier,this.player.bet.amount=ta(t.betValues),this.player.setDefaultBet(),this.player.betValue=t.bet,this.player.demo=t.demo,this.player.getBet=t.data,this.player.multiplierIndex=0,this.context.isMultiplierDefaultLastIndex&&(this.player.multiplierIndex=this.player.multiplierValues.length-1),this.player.bet.multiplier=this.player.multiplierValues[this.player.multiplierIndex],this.context.fround==="1"&&(this.player.fround=t.fround,this.player.froundCount=t.froundCount),t.bonus&&(this.player.bonus=t.bonus,this.player.restoreBonus=!0)}),this.netService.jackpot().then(t=>{t.value&&t.value.pool?this.player.progressiveJackpot=t.value.pool:this.context.isProgressiveJackpot="false"}).catch(t=>{this.context.isProgressiveJackpot="false"})])).then(()=>D.replace("splash")).catch(t=>{t.code?ze(t.code,!0):ze(t.error?t.error:"0",!0)})}extraGetBetsSetting(t){}exit(){super.exit(),B.remove(this)}advanceTime(t){return this.circle.rotation+=.2,!0}};Cs([_t("context")],Pt.prototype,"context",2);Cs([Me("netService")],Pt.prototype,"netService",2);Cs([_t("user")],Pt.prototype,"player",2);Pt=Cs([f({tag:"login",category:"scene"})],Pt);var hf=Object.defineProperty,uf=Object.getOwnPropertyDescriptor,cf=(t,e,i,s)=>{for(var n=s>1?void 0:s?uf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&hf(e,i,n),n};let Pn=class extends Zt{constructor(){super(...arguments),this.progressCompleted=!1}onCreated(){v.get("deviceService").fullScreenEnabled=!0;let e=v.get("i18nService");e&&e.setTitle(),B.add(this),this.version&&(this.version.value="v"+S.engineVersion)}exit(){super.exit(),x().initActitvityTimer(),B.remove(this)}advanceTime(e){return this.circle.rotation+=.2,!0}onProgress(e){this.label.value=Math.min(100,Math.round(e*100))+"%",this.trackPageLoad()}trackPageLoad(){if(js&&!this.progressCompleted&&Math.round(R.progress)>=100){this.progressCompleted=!0;let e=x();q.event({name:"load",properties:{"Game mode":e.FUNPLAY?"Fun":"Real",Platform:T.platform,Renderer:K.type===PIXI.RENDERER_TYPE.WEBGL?"webgl":"canvas",Currency:P().currency,"User ID":e.TRACKER_USER_ID},measurements:{"Load Time":new Date().getTime()-js}})}}};Pn=cf([f({tag:"splash",category:"scene"})],Pn);let pf=class extends Pn{onCreated(){let e=document.querySelector("#appbg");e&&(e.style["background-image"]="url('./assets/bgimage.jpg')",e.className+="fadeImage"),super.onCreated()}};var df=Object.defineProperty,ff=Object.getOwnPropertyDescriptor,Ee=(t,e,i,s)=>{for(var n=s>1?void 0:s?ff(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&df(e,i,n),n};let ge=class extends pf{constructor(){super(...arguments),this.assetsLoaded=0,this.loaded=!1,this.shown=!1,this.active=!1,this.continue=!1,this.isDown=!1,this._page0Zhongs=null,this._page1Zhongs=null}onCreated(){super.onCreated(),pe.querySelector(".gplogo").hide(),pe.querySelector(".loader").hide()}exit(){this.tweenNav&&(this.tweenNav.stop(),this.tweenNav=null)}onProgress(t){this.label.value=Math.min(100,Math.round(t*100))+"%",this.trackPageLoad()}onLoaded(){this.loaded=!0,this.showIntro(),this.showContinueButton()}showIntro(){if(this.shown)return;this.shown=!0,this.active=!0,this.pages=[],this.txtPages=[],this.currPageIdx=0;const t=H().get("intro-logo");this.logo.addChild(t),ne(this.logo,Ze);const e=H().get("intro-reel");this.reelBg.addChild(e),ne(this.reelBg,Ze);const i=H().get("intro-content");this.content.addChild(i),ne(this.content,Ze),this._introContent=i;const s=H().get("intro-text");this.textcontent.addChild(s),ne(this.textcontent,Ze),i.children.forEach((n,r)=>{if(n){const a=H().get("btn-navigator-"+(r+1));this.pages.push(n),n.visible=r===this.currPageIdx,r>this.currPageIdx&&(n.x=n.bg.width),a&&(a.interactive=a.buttonMode=!0,a.on("click",()=>this.navigatorClickHandler(r)).on("tap",()=>this.navigatorClickHandler(r)),a.enabled=r!==this.currPageIdx,this.btnnavigate.addChild(a))}const o=s.children[r];this.txtPages.push(o),r==0&&(o.visible=!0)}),this.content.interactive=!0,this.content.on("mousedown",n=>this.buttonDownHandler(n)).on("mouseup",n=>this.buttonUpHandler(n)).on("mouseupoutside",n=>this.buttonUpHandler(n)).on("touchstart",n=>this.buttonDownHandler(n)).on("touchend",n=>this.buttonUpHandler(n)).on("touchendoutside",n=>this.buttonUpHandler(n)).on("touchmove",n=>this.dropdownMoveHandler(n)).on("mousemove",n=>this.dropdownMoveHandler(n)),this.active=!0,this.page0Active()}showContinueButton(){if(this.shown&&this.loaded&&!this.continue){this.continue=!0,Pe(this.label,Ze),Pe(this.circle,Ze);const t=this.widgetService.get("btn-continue");t&&t.clickable&&(this.btncontinue.addChild(t),ne(this.btncontinue,Ze,()=>{t.clickable.interactive=t.clickable.buttonMode=!0,t.clickable.on("click",()=>this.continueClickHandler()).on("tap",()=>this.continueClickHandler()),d.on("continueClickHandler",()=>this.continueClickHandler())}))}}startIntro(t=!0){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.navigatePage(this.currPageIdx+1)},3200)}continueClickHandler(){this.continue&&(this.continue=!1,d.off("continueClickHandler"),this.active=this.btncontinue.interactive=this.btncontinue.interactiveChildren=!1,this.timeout&&clearTimeout(this.timeout),this.timeoutReel&&clearTimeout(this.timeoutReel),j("button","default"),be(300).then(()=>this.closeScene()),w.map(vn).toValue(!0))}buttonDownHandler(t){this.active&&(this.isDown=!0,this.touchDownX=t.data.getLocalPosition(this,t.data.global).x)}buttonUpHandler(t){if(!this.isDown||(this.isDown=!1,!this.active))return;this.timeout&&(clearTimeout(this.timeout),this.timeout=0),this.active=!1,this.content.interactive=!1;const e=this.currPageIdx,i=t.data.getLocalPosition(this,t.data.global).x-this.touchDownX;if(i>0){const s={x:this.currPage.x};this.tweenNav=new TWEEN.Tween(s).to({x:i>100?this.currPage.bg.width:0},300).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(()=>{this.currPage.x=s.x,this.prevPage.x=this.currPage.x-this.currPage.bg.width}).onComplete(()=>{this.tweenNav.stop(),this.tweenNav=null,i>100&&this.setPageIndex(this.currPageIdx>0?this.currPageIdx-1:this.pages.length-1),this.startIntro(this.currPageIdx!==e),this.active=!0,this.content.interactive=!0}),this.tweenNav.start()}else{const s={x:this.currPage.x};this.tweenNav=new TWEEN.Tween(s).to({x:i<-100?-this.currPage.bg.width:0},300).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(()=>{this.currPage.x=s.x,this.nextPage.x=this.currPage.x+this.currPage.bg.width}).onComplete(()=>{this.tweenNav.stop(),this.tweenNav=null,i<-100&&this.setPageIndex(this.currPageIdx===this.pages.length-1?0:this.currPageIdx+1),this.startIntro(this.currPageIdx!==e),this.active=!0,this.content.interactive=!0}),this.tweenNav.start()}}dropdownMoveHandler(t){if(this.isDown){this.timeout&&(clearTimeout(this.timeout),this.timeout=0);const e=t.data.getLocalPosition(this,t.data.global).x-this.touchDownX;this.currPage.x=e,e>0?(this.nextPage.visible=!1,this.prevPage.visible=!0,this.prevPage.x=this.currPage.x-this.currPage.width):(this.prevPage.visible=!1,this.nextPage.visible=!0,this.nextPage.x=this.currPage.x+this.currPage.width)}}btnPrevHandler(){this.navigatePage(this.currPageIdx-1)}btnNextHandler(){this.navigatePage(this.currPageIdx+1)}navigatorClickHandler(t){this.getButtonNavigator(t).enabled&&this.navigatePage(t)}getButtonNavigator(t){return this.btnnavigate.getChildAt(t)}setPageIndex(t){if(this.currPageIdx!==t){this[`page${this.currPageIdx}Dactive`]();for(let e=0;e<this.pages.length;e++)this.pages[e].visible=!1,this.getButtonNavigator(e).enabled=!0;this.pages[this.currPageIdx],this.txtPages[this.currPageIdx].visible=!1,this.currPageIdx=t,this.pages[t].activate(),this.currPage.visible=!0,this.currTextPage.visible=!0,this.getButtonNavigator(t).enabled=!1,this[`page${t}Active`]()}}navigatePage(t){if(!this.active)return;this.timeout&&(clearTimeout(this.timeout),this.timeout=0),this.active=!1,this.content.interactive=!1;const e=this.currPageIdx;let i=t,s=i>e?1:-1;i>=this.pages.length?(i=0,s=1):i<0&&(i=this.pages.length-1,s=-1),this.getButtonNavigator(e).enabled=!0,this.getButtonNavigator(i).enabled=!1,this.pages[i].visible=!0;const n={x:s*this.pages[i].bg.width};this.tweenNav=new TWEEN.Tween(n).to({x:0},600).easing(TWEEN.Easing.Quadratic.InOut).onUpdate(()=>{this.pages[i].x=n.x,this.pages[e].x=this.pages[i].x-this.pages[i].bg.width*s}).onComplete(()=>{this.tweenNav.stop(),this.tweenNav=null,this.setPageIndex(i),this.startIntro(),this.active=!0,this.content.interactive=!0}),this.tweenNav.start()}getPageComponents(t){const e=this._introContent[`page${t}`].content;if(!this[`_page${t}Zhongs`]){const i=[],s=[];for(const n of e.children)for(const r of n.children)r.id=="Zhong"?i.push(r):r.id=="FSZhong"&&s.push(r);this[`_page${t}Zhongs`]=[i,s],this._introContent[`page${t}`].content.column5&&this._introContent[`page${t}`].content.column5.wild.setSkin(`Wild_${mt(!0)}`)}return this[`_page${t}Zhongs`]}page0Active(){const[t,e]=this.getPageComponents(0);for(const i of t)C(i,"TileTrigger",!0,()=>{});for(const i of e)C(i,"TileTrigger",!0,()=>{})}page0Dactive(){const[t,e]=this.getPageComponents(0);for(const i of t)i.setAnimation(0,"TileTrigger",!1),i.resetTrackTime(),i.animated=!1;for(const i of e)i.setAnimation(0,"TileTrigger",!1),i.resetTrackTime(),i.animated=!1}page1Active(){const[t,e]=this.getPageComponents(1);for(const i of t)C(i,"Tile FlipMerged",!1,()=>{});for(const i of e)C(i,"Tile FlipMerged",!1,()=>{this._introContent.page1.content.column5.visible=!0})}page1Dactive(){const[t,e]=this.getPageComponents(1);for(const i of t)i.setAnimation(0,"Tile FlipMerged",!1),i.resetTrackTime(),i.animated=!1;for(const i of e)i.setAnimation(0,"Tile FlipMerged",!1),i.resetTrackTime(),i.animated=!1;this._introContent.page1.content.column5.visible=!1}page2Active(){this._introContent.page2.content}page2Dactive(){this._introContent.page2.content}closeScene(){console.warn=this.consoleWarn,this.next=c(this.layout,"next",null);const t=v.get("soundService");t.backgroundMusic&&t.stopBgm(),this.next&&this.transit()}get currTextPage(){return this.txtPages[this.currPageIdx]}get currPage(){return this.pages[this.currPageIdx]}get nextPage(){return this.pages[this.currPageIdx===this.pages.length-1?0:this.currPageIdx+1]}get prevPage(){return this.pages[this.currPageIdx>0?this.currPageIdx-1:this.pages.length-1]}};Ee([Me("widgetService")],ge.prototype,"widgetService",2);Ee([y("btncontinue")],ge.prototype,"btncontinue",2);Ee([y("btnnavigate")],ge.prototype,"btnnavigate",2);Ee([y("content")],ge.prototype,"content",2);Ee([y("text")],ge.prototype,"text",2);Ee([y("frame")],ge.prototype,"frame",2);Ee([y("panelbg")],ge.prototype,"panelbg",2);Ee([y("logo")],ge.prototype,"logo",2);Ee([y("reelBg")],ge.prototype,"reelBg",2);Ee([y("textcontent")],ge.prototype,"textcontent",2);ge=Ee([f({tag:"splash",category:"scene"})],ge);const mf="events:reel:stop",bf="events:symbol:hit";class xo{constructor(e,i,s,n,r,o=!0,a=-1){this.symbol=e,this.fromY=i,this.toY=s,this.acc=n,this.bounceFactor=r,this.stopped=o,this.reelIdx=a,this.reels=w.get("reels"),this.speed=0,this.bounce=0,this.stopping=!0,this.timer=null,this.emitReelIdx=-1}play(e=0,i=!0){this.stopping=i;let s=new Promise((n,r)=>{this.resolve=n});return e?this.timer=setTimeout(()=>{B.add(this),this.timer=null},e):B.add(this),s}stop(){this.stopped=!0}cancel(){this.timer&&clearTimeout(this.timer),this.reels.removeSymbol(this.symbol),B.remove(this)}advanceTime(e){let i=this.symbol;return this.speed+=this.acc,i.y+=this.speed,i.y>=this.toY&&(this.bounce===0&&(this.emitReelIdx>=0&&Q.emit(mf,this.emitReelIdx),Q.emit(bf,i,this.reelIdx)),this.bounce++,i.y=this.toY,this.stopping?this.bounce===10?(B.remove(this),this.resolve()):this.speed*=-this.bounceFactor:this.stopped?(this.reels.removeSymbol(this.symbol),B.remove(this),this.resolve()):(this.speed=0,i.y=this.fromY)),!0}}const Io="events:reel:stopspin2";let gf=class{constructor(){this.stopSequence=[[0],[1],[2],[3],[4]],this.spinTime=[0,0,0,0,0],this.stopSequenceIdx=0,this.symbolDropTimeGap=200,this.reelDropTimeGap=100,this.reelAdjustment=0,this.acceleration=1.5,this.bounceFactor=.25}play(){this.reels.removeWinningSymbol()}stop(){d.emit(Io),this.animators=[];let e=Promise.resolve();for(let i=0;i<this.numCols;i++){let s=i*this.reelDropTimeGap;this.reels.addSymbolsAtColTopPos(i,this.reels.addSymbols[i]);for(let n=this.numRows-1;n>=0;n--){let r=this.reels.symbols[i][n];if(this.reels.symbolDisplacements[i][n]>0){r.y=r.y+this.reelAdjustment;let a=new xo(r,r.y,this.reels.getReelY(n),this.acceleration,this.bounceFactor,!0,i);e=a.play(s),s+=this.symbolDropTimeGap,this.animators.push(a),n===0&&(a.emitReelIdx=i)}}}return e}get numCols(){return x().NUM_OF_COLUMN}get numRows(){return x().NUM_OF_ROW}update(){}cancel(){if(this.animators)for(let e=0;e<this.animators.length;e++)this.animators[e].cancel()}};class vf extends gf{stop(){d.emit(Io),this.animators=[];let e;const i=n=>7,s=this.reels;for(let n=0;n<this.numCols;n++){let r=n*this.reelDropTimeGap;this.reels.addSymbolsAtColTopPos(n,this.reels.addSymbols[n]);for(let o=i()-1;o>=0;o--){const a=this.reels.symbols[n][o];if(a.col=n,a.row=o,this.reels.symbolDisplacements[n][o]>0){a.y=a.y+this.reelAdjustment;const u=new xo(a,a.y,s.getReelY(o,n),this.acceleration,this.bounceFactor,!0,n);e=u.play(r),r+=this.symbolDropTimeGap,this.animators.push(u),o===0&&(u.emitReelIdx=n)}}}return this.reels.sortSymbols(),e}}var yf=Object.defineProperty,Sf=Object.getOwnPropertyDescriptor,wf=(t,e,i,s)=>{for(var n=s>1?void 0:s?Sf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&yf(e,i,n),n};let ns=class extends _{constructor(){super(),this.isSpinning=!1,this.symbols=[],this.symbolService=v.get("symbolService"),w.map("reels").toValue(this);for(let t=0;t<xe();t++)this.symbols.push([]);this.initSymbolContainer(),this.animator=w.get("reelsAnimator"),this.animator.reels=this,w.map("winLineSetupSymbols").toValue(this.winLineSymbolSetup)}initSymbolContainer(){this.symbolContainer=new Ve,this.addChild(this.symbolContainer)}winLineSymbolSetup(t,e){}getNumRows(t){return 7}spin(){this.isSpinning||(this.isSpinning=!0,this.animator.play(),this.winPanel.close(),this.initMask())}spinReel(t){}display(t){t?this.symbolIndexes=t:t=this.symbolIndexes;const e=t.length;for(let i=e-1;i>=0;i--)this.displayCol(i)}displayCol(t){this.clearColSymbols(t);const e=this.symbolIndexes[t];for(let i=0;i<this.getNumRows(t);i++){const s=this.symbolService.get(e[i]);s.idle(),this.setColRow(s,t,i),this.symbols[t][i]=s,this.addSymbol(s,t)}}layoutSymbols(){}reelStoped(t){for(const e of this.symbolContainer.children)e.col==t&&e.idle()}sortSymbols(){const t=this.symbolContainer.children;t.sort((e,i)=>e.index==Kt||e.index==et?-1:i.index==Kt||i.index==et?1:e.col==i.col?i.row-e.row:e.col-i.col);for(let e=0;e<t.length;e++){const i=t[e];i.parent.setChildIndex(i,0)}}addSymbol(t,e){this.symbolContainer.addChild(t),t.pivot.y=this.getSymbolPivotY(e)}addSymbolAt(t,e,i){const s=Number(e),n=s===10||s===9,r=this.symbolContainer.children.length-1;this.symbolContainer.addChildAt(t,n?r:Math.min({0:27,1:21,2:14,3:7,4:0}[i],r)),t.pivot.y=this.getSymbolPivotY(i)}adjustCol(t){for(let e=0;e<this.getNumRows(t);e++){const i=this.symbols[t][e];i.idle(),this.setColRow(i,t,e)}}clearColSymbols(t){this.symbols[t].forEach(e=>{this.removeSymbol(e)}),this.symbols[t]=[]}clearSymbols(){for(let t=0;t<xe();t++)this.clearColSymbols(t)}stop(t,e=!1,i,s){this.symbolIndexes=t,this.winLines=i,this.stopHandler=s,this.stopTimeout=setTimeout(()=>{e?this.stopImmediately():this.animator.stop().then(()=>this.layoutSymbols()).then(()=>this.animationStopped()).catch(n=>{ze(n.code?n.code:fs)})},this.stopTime)}deactivate(){super.deactivate(),this.winPanel.close()}addSpinSymbols(t){for(let e=t;e<xe();e++)this.addSymbolsAtColTop(e,this.pickMany(1,e),i=>{i.spin(),i.col=e})}addStopSymbols(t){return this.addSymbolsAtColTop(t,this.symbolIndexes[t],i=>i.idle()),-this.symbols[t][0].y}addSymbolsAtColTop(t,e,i){if(e)for(let s=e.length-1;s>=0;s--){const n=this.symbols[t][0],r=n?n.y:0,o=this.symbolService.get(e[s]);o.x=n?n.x:this.getReelX(t),o.y=r-Ie(),i(o),this.addSymbolAt(o,e[s],t),this.symbols[t].unshift(o)}}addSymbolsAtColsTop(t,e,i){if(e)for(let s=0;s<t.length;s++)this.addSymbolsAtColTop(t[s],e[s],i)}addSymbolsAtTop(t,e,i=0){const s=[];for(let n=i;n<xe();n++)s.push(n);this.addSymbolsAtColsTop(s,t,e)}setColRow(t,e,i){const s=this.getRegisterPoint(e,i);t.col=e,t.row=i,t.position.set(s.x,s.y)}pickMany(t,e){const i=[];for(let s=0;s<t;s++){const n=this.parent;if(e==2&&n.isFreeSpin)for(let r=0;r<t;r++)i.push(st(20,11));else for(let r=0;r<t;r++)i.push(st(20))}return i}removeOutsideSymbols(){for(let t=0;t<xe();t++){const e=this.symbols[t].length;for(let i=e-1;i>=0;i--){const s=this.symbols[t][i];s.y>Ie()*(this.getNumRows(t)+1)&&(this.removeSymbol(s),this.symbols[t].splice(i,1))}}}removeSymbolByPos(t,e){const i=this.symbols[t][e];this.removeSymbol(i),this.symbols[t].splice(e,1)}removeSymbol(t){t.attachedSymbol&&t.attachedFollow&&(t.attachedSymbol.parent&&t.attachedSymbol.parent.removeChild(t.attachedSymbol),this.symbolService.free(t.attachedSymbol)),t.parent&&t.parent.removeChild(t),this.symbolService.free(t)}initMask(){this.maskSprite&&(this.removeChild(this.maskSprite),this.maskSprite=void 0),this.setMask()}setMask(){this.maskSprite||(this.maskSprite=Vt(480,570),this.addChild(this.maskSprite),this.maskSprite.y=-10),this.mask=this.maskSprite,this.maskSprite.visible=!0}removeMask(){this.mask=void 0,this.maskSprite.visible=!1}stopImmediately(){clearTimeout(this.stopTimeout),this.display(),this.animator.cancel(),this.animationStopped()}animationStopped(){this.isSpinning=!1,this.removeMask(),this.stopHandler?this.stopHandler({symbols:this.symbolIndexes,winlines:this.winLines}).then(()=>this.showWinLines()):this.showWinLines(),d.emit(wo)}showWinLines(t,e=!1){t=t===void 0?this.winLines:t}getReelX(t){return t*(Ct()+jt())}getReelY(t,e){return t*(Ie()+Xs())}getSymbolPivotY(t){const e=Ie()+Xs();return t%4==0?e/2:e}getRegisterPoint(t,e){return{x:this.getReelX(t),y:this.getReelY(e,t)}}getSymbol(t,e){return this.symbols[t][e]}getSymbolPos(t,e){return[{x:t,y:e}]}setSpinningTime(t,e,i=!0){this.animator.setSpinningTime(t,e,i)}hasSymbolInReel(t,e){const i=this.symbolIndexes[t];for(let s=0;s<i.length;s++)if(i[s]===e)return!0;return!1}get winPanel(){return this._winPanel||(this._winPanel=D.current.getComponentByTag("winPanel")),this._winPanel}set reelPadding(t){jt(t);for(let e=0;e<this.symbols.length;e++)for(let i=0;i<this.symbols[e].length;i++){const s=this.getRegisterPoint(e,i);this.symbols[e][i].x=s.x}}static create(t,e){return Po(ns,t,e)}};ns=wf([f({tag:"reels"})],ns);function Po(t,e,i){const s=new t;return s.stopTime=l(e,"stopTime",1e3),k(s,e,i),Ln(s,e,"reelPadding",l,0),jt(l(e,"reelPadding")),s}var xf=Object.defineProperty,If=Object.getOwnPropertyDescriptor,Pf=(t,e,i,s)=>{for(var n=s>1?void 0:s?If(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&xf(e,i,n),n};let rs=class extends ns{constructor(){super(...arguments),this.collapsing=!1,this.maskSpin=null,this.maskIdle=null,this.numRows=t=>7}initReels(){this.initMask()}spin(){this.isSpinning||(this.isSpinning=!0,this.setMask(),this.collapsing?(this.animator=w.get("reelsCollapsingAnimator"),this.animator.reels=this):(this.animator=w.get("reelsAnimator"),this.animator.reels=this),this.animator.play(),this.winPanel.close())}animationStopped(){super.animationStopped(),this.setMask()}getSymbolMapping(){const t=[...Array(xe())].map((e,i)=>[...Array(this.numRows(i))].map(()=>1));for(let e=0;e<this.winLines.length;e++){const i=this.winLines[e].positions;for(let s=0;s<i.length;s++){const n=Ep.includes(this.symbolIndexes[i[s][0]][i[s][1]])?2:0;t[i[s][0]][i[s][1]]=n}}this.symbolMapping=t,this.symbolDisplacements=[];for(let e=0;e<xe();e++){const i=[];let s=0;for(let r=this.numRows(e)-1;r>=0;r--)t[e][r]===0?s+=Ie():i.unshift(s);const n=this.numRows(e)-i.length;for(let r=0;r<n;r++)i.unshift(s);this.symbolDisplacements.push(i)}}addSymbolsAtColTopPos(t,e,i=0){const s=this.symbols[t][0];if(s){const n=s.y;s.y=i,this.addSymbolsAtColTop(t,e,r=>r.idle()),s.y=n}else this.addSymbolsAtColTop(t,e,n=>n.idle())}removeWinningSymbol(){for(let t=0;t<xe();t++)for(let e=this.numRows(t)-1;e>=0;e--)this.symbolMapping[t][e]===0&&this.removeSymbolByPos(t,e)}setMask(){if(!this.maskIdle&&!this.maskSpin){super.setMask();return}this.isSpinning?this.setMaskSpin():this.setMaskIdle()}setMaskSpin(){this._removeMask(),this.maskSpin&&this.addMask(this.maskSpin)}setMaskIdle(){this.winLines&&this.winLines.length||(this._removeMask(),this.maskIdle&&this.addMask(this.maskIdle))}addMask(t){this.maskSprite||(this.maskSprite=t,this.addChild(this.maskSprite),this.mask=this.maskSprite,this.maskSprite.visible=!0)}_removeMask(){this.maskSprite&&(this.removeChild(this.maskSprite),this.maskSprite=void 0),this.mask=void 0}static create(t,e){const i=Po(rs,t,e);return z(t,(s,n)=>{if(s.nodeName==="mask"){const r=i.getReelX(xe())+l(s,"x")*-2,o=Wn()*Ie()+l(s,"y")*-2;c(s,"render")==="canvas"&&K.type===PIXI.RENDERER_TYPE.CANVAS?c(s,"mode")==="spin"?i.maskSpin=ni(s,r,o):c(s,"mode")==="idle"&&(i.maskIdle=ni(s,r,o)):c(s,"render")==="webgl"&&K.type===PIXI.RENDERER_TYPE.WEBGL&&(c(s,"spin")&&(c(s,"spin")==="default"?i.maskSpin=ni(s,r,o):i.maskSpin=xr(s,"spin")),c(s,"idle")&&(c(s,"idle")==="default"?i.maskIdle=ni(s,r,o):i.maskIdle=xr(s,"idle")))}}),i.initReels(),i}};rs=Pf([f({tag:"reels"})],rs);function ni(t,e,i){const s=Re(e+l(t,"x-offset",0),i+l(t,"y-offset",0),l(t,"radius",0));return s.position.set(l(t,"x"),l(t,"y")),s}function xr(t,e){const i=new PIXI.Sprite(R.resolve(c(t,e)));return i.position.set(l(t,"x"),l(t,"y")),i.scale.set(l(t,"scale",1)),i}class _f extends Qd{advanceTime(e){if(this.enabled){try{const i=this.spinAnimator.getSpeed(),s=this.stopAnimator?this.stopAnimator.getSpeed():0;let n=0;for(let r=this.numCols-1;r>=0;r--){const o=this.states[r],a=this.reels.symbols[r];o!==Qe.Stopped&&a.forEach(h=>{h.y+=o===Qe.Spin?i:s,h.updateAttached()}),o===Qe.Spin&&(n=r)}if(this.reels.symbols[n][0].y>0&&this.states[n]===Qe.Spin&&this.reels.addSpinSymbols(n),this.reels.removeOutsideSymbols(),this.stopAnimator&&this.stopAnimator.stopped){const r=[];for(let o=0;o<this.numCols;o++)this.states[o]===Qe.Stopping&&(this.states[o]=Qe.Stopped,this.reels.adjustCol(o),r.push(o));d.emit(Kn,r),this.allStopped?(this.cancel(),this.resolve()):this.readyToStop()}this.update&&this.update()}catch{this.reject&&this.reject({code:fs,message:""})}return!0}}}var Cf=Object.defineProperty,Tf=Object.getOwnPropertyDescriptor,Bf=(t,e,i,s)=>{for(var n=s>1?void 0:s?Tf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Cf(e,i,n),n};let os=class extends _{constructor(){super(...arguments),this.mode="normal",this.activeIndex=-1,this.getMultiplierLayers=()=>{const t=this.normal,e=this.freeSpin,i=this.superGold;return{normal:t,freeSpin:e,superGold:i}}}init(){this.updateMultiplierLayer()}updateMultiplierLayer(t="normal"){this.mode=t;const e=this.getMultiplierLayers();e.normal.visible=t==="normal",e.freeSpin.visible=t==="freeSpin",e.superGold.visible=t==="superGold"}increaseMultiplier(){this.activeIndex<3&&this._setMultiplierIndex(this.activeIndex+1)}_setMultiplierIndex(t){if(t!=this.activeIndex){const e=this.activeIndex,i=this[this.mode][`${e}spine`];C(i,"Deactivate",!1);const s=this[this.mode][`${t}spine`];C(s,"Activate",!1),this.activeIndex=t,this.mode=="normal"||this.mode=="freeSpin",t>0&&j(`multiplier${t+1}`,"default")}}setMultiplierIndex(t,e=this.mode){const s=Math.max(0,{normal:br,freeSpin:gr,superGold:vr}[e].indexOf(t));this._setMultiplierIndex(Math.min(s,3))}resetMultiplierIndex(){if(this.activeIndex==0)return;this.activeIndex=0;const t=this.getMultiplierLayers();for(let n=0;n<4;n++){const r=t.normal[`${n}spine`];r.currentAction!=="Deactivate"&&C(r,"Deactivate",!1);const o=t.freeSpin[`${n}spine`];o.currentAction!=="Deactivate"&&C(o,"Deactivate",!1);const a=t.superGold[`${n}spine`];o.currentAction!=="Deactivate"&&C(a,"Deactivate",!1)}const e=t.normal["0spine"];C(e,"Activate",!1);const i=t.freeSpin["0spine"];C(i,"Activate",!1);const s=t.superGold["0spine"];C(s,"Activate",!1)}static create(t,e){return Ef(os,t,e)}};os=Bf([f({tag:"mahjongMulti"})],os);function Ef(t,e,i){const s=new t;return he(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var Lf=Object.defineProperty,Of=Object.getOwnPropertyDescriptor,Af=(t,e,i,s)=>{for(var n=s>1?void 0:s?Of(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Lf(e,i,n),n};let as=class extends _{constructor(){super(...arguments),this.getUI=()=>({spine:this.container.spine})}oncreate(){const t=H().get("mainInfobar"),e=this.container.spine.getSlotContainerByName("InfoBar");e.removeChildren(),e.addChild(t)}changeToNormalUI(){const t=this.getUI();t.spine.x=0,C(t.spine,"idleNorm",!0),ss(),go()}changeToFSUIAsync(){return vo(),yo(),new Promise(t=>{const e=this.getUI();C(e.spine,"NormToFS",!1,()=>{t(!0),C(e.spine,"idleFS",!0)})})}init(){this.changeToNormalUI()}static create(t,e){const i=Df(as,t,e);return i.oncreate(),i}};as=Af([f({tag:"mainUI"})],as);function Df(t,e,i){const s=new t;return he(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var Nf=Object.defineProperty,Rf=Object.getOwnPropertyDescriptor,Mf=(t,e,i,s)=>{for(var n=s>1?void 0:s?Rf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Nf(e,i,n),n};let ls=class extends _{constructor(){super(...arguments),this.isActive=!1,this.getTotalWin=()=>{const t=this.container,e=t.spine;return{container:t,spine:e}}}showTotalWin(t){if(this.isActive)return;this.isActive=!0;const e=this.getTotalWin();e.container.visible=!0;const i=e.spine.getSlotContainerByName("TotalAmountSlot"),s=H().get("totalWinLabel");i&&s&&(i.removeChildren(),C(e.spine,"TotalAmount_Intro",!1,()=>{i.addChild(s),s.duration=300,s.value=`${t}`}),be(1500).then(()=>{s.setValueDirectly(`${t}`),this.hideTotalWin()}))}hideTotalWin(){return new Promise(t=>{const e=this.getTotalWin();C(e.spine,"TotalAmount_Outro",!1,()=>{t(!0),e.container.visible=!0,this.isActive=!1})})}static create(t,e){return Wf(ls,t,e)}};ls=Mf([f({tag:"totalWinPanel"})],ls);function Wf(t,e,i){const s=new t;return he(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}var Ff=Object.defineProperty,Hf=Object.getOwnPropertyDescriptor,kf=(t,e,i,s)=>{for(var n=s>1?void 0:s?Hf(e,i):e,r=t.length-1,o;r>=0;r--)(o=t[r])&&(n=(s?o(e,i,n):o(n))||n);return s&&n&&Ff(e,i,n),n};let hs=class extends _{constructor(){super(...arguments),this.bigwinActive=!1,this.totalWinActive=!1,this.youWonActive=!1,this.getBigWin=()=>{const t=this.bigwin,e=t.spine;return{container:t,spine:e}},this.getYouWon=()=>{const t=this.youwon,e=t.spine;return{container:t,spine:e}},this.getTotalWin=()=>{const t=this.totalwin,e=t.spine;return{container:t,spine:e}}}get scene(){return this.parent.parent}get bgp(){return this.scene.bgp}get animation(){return this.scene.animation}showBigWin(t){return new Promise(e=>{if(this.bigwinActive)e(!0);else{In(),this.bigwinActive=!0;const i=this.getBigWin();i.container.visible=!0;const s=i.spine.getSlotContainerByName("BW_Txt_Amount");this.bigWinLabel=H().get("bigWinPanelLabel"),s.removeChildren(),i.spine.setSkin(mt(!0)),this.bgp.visible=!0,ne(this.bgp,500,()=>{this.animation.playBigWinEffect()},.5),C(i.spine,"BigWin_Intro",!1,()=>{s.addChild(this.bigWinLabel),C(i.spine,"BigWin_Idle",!0),this.bigWinLabel.value=`${t}`,e(!0)}),oe(500).then(()=>{C(this.bigwinIcon,"FlyOut_Normal",!0,()=>{})})}})}showTotalWin(t){return j(Fp,"default"),new Promise(e=>{if(this.totalWinActive)e(!0);else{In(),this.totalWinActive=!0;const i=this.getTotalWin();i.container.visible=!0,i.spine.setSkin(mt(!0));const s=i.spine.getSlotContainerByName("TW_Txt_WinningAmount");this.totalWinLabel=H().get("totalWinPanelLabel"),s.removeChildren(),this.bgp.visible=!0,ne(this.bgp,500,()=>{this.animation.playFreeWinEffect()},.5),C(i.spine,"TotalWin_Intro",!1,()=>{s.addChild(this.totalWinLabel),C(i.spine,"TotalWin_Idle",!0),this.totalWinLabel.value=`${t}`,e(!0)}),oe(500).then(()=>{C(this.bigwinIcon,"FlyOut_Normal",!0,()=>{})})}})}showYouWon(t){return new Promise(e=>{if(this.youWonActive)e(!0);else{this.youWonActive=!0;const i=this.getYouWon();i.container.visible=!0;const s=i.spine.getSlotContainerByName("YW_Number"),n=i.spine.getSlotContainerByName("Click"),r=H().get("youWonPanelLabel"),o=H().get("youwonClickTip");s.removeChildren(),n.removeChildren(),n.addChild(o),i.spine.setSkin(mt(!0)),this.bgp.visible=!0,ne(this.bgp,500,()=>{this.animation.playGetFreeEffect()},.5),C(i.spine,"YouWon_Intro",!1,()=>{s.addChild(r),C(i.spine,"YouWon_Idle",!0),r.value=`${t}`})}})}hideBigWin(t){return new Promise(e=>{this.bigwinActive?(this.bigwinActive=!1,this.bigWinLabel.setValueDirectly(`${t}`),be(1e3).then(()=>{const i=this.getBigWin();Pe(this.bgp,500,()=>{this.animation.stopBigWinEffect(),this.bgp.visible=!1},.5,0),C(i.spine,"BigWin_Outro",!1,()=>{xn(),e(!0),i.container.visible=!1,i.spine.animated=!1}),oe(300).then(()=>{this.bigwinIcon.animated=!1,this.bigwinIcon.visible=!1})})):e(!0)})}hideTotalWin(t){return new Promise(e=>{this.totalWinActive?(this.totalWinLabel.setValueDirectly(`${t}`),this.totalWinActive=!1,be(1e3).then(()=>{const i=this.getTotalWin();Pe(this.bgp,500,()=>{this.animation.stopFreeWinEffect(),this.bgp.visible=!1},.5,0),C(i.spine,"TotalWin_Outro",!1,()=>{xn(),e(!0),i.container.visible=!1,i.spine.animated=!1}),oe(300).then(()=>{this.bigwinIcon.animated=!1,this.bigwinIcon.visible=!1})})):e(!0)})}hideYouWon(){return new Promise(t=>{this.youWonActive?(this.youWonActive=!1,be(1e3).then(()=>{const e=this.getYouWon();Pe(this.bgp,500,()=>{this.animation.stopGetFreeEffect(),this.bgp.visible=!1},.5,0),C(e.spine,"YouWon_Outro",!1,()=>{t(!0),e.container.visible=!1,e.spine.animated=!1})})):t(!0)})}static create(t,e){return Uf(hs,t,e)}};hs=kf([f({tag:"youWonPanel"})],hs);function Uf(t,e,i){const s=new t;return he(e,{scene:i.scene,parent:s,context:i.context}),k(s,e,i),s}ps([Pi,Ye,vt,Ve,Ci,rs,cn,Ei,Yt,Ri,Bi,Ti,Xt,gt,Ii,Oi,zt,Ni,qt,_i,Pt,ge,un,Di,Ai,yt,M]);ps([zi,Gi,nt,Ui,Y,ki,Ji,Wi,Fi,Hi,Mi,St,qi,os,qe,ls,hs,as]);Ar([$r,rc]);w.map("idleState").toType(Ss);w.map("spinState").toType(Td);w.map("context").toSingleton(nc);v.register("winLineService",new Si);const $f=new _f({maxSpeed:60,startSpeed:0,stopSpeed:-15,acceleration:4,deceleration:10}),ei=new vf;ei.acceleration=10;ei.bounceFactor=.22;ei.symbolDropTimeGap=20;ei.reelDropTimeGap=60;w.map("reelsAnimator").toValue($f);w.map("reelsCollapsingAnimator").toValue(ei);const Vf=v.get("tweenService"),jf=116,Gf=116;Vf.register("symbol-anim",(t,e)=>{const i=t.x,s=t.y,n=.7,r=(n-1)/2,o={scale:1,x:i,y:s},a=new TWEEN.Tween(o).to({scale:n,x:i-r*jf,y:s-r*Gf},600).easing(TWEEN.Easing.Elastic.In).onUpdate(u=>{t.scale.set(o.scale,o.scale),t.x=o.x,t.y=o.y}),h=new TWEEN.Tween(o).to({scale:1,x:i,y:s},600).easing(TWEEN.Easing.Elastic.Out).onUpdate(u=>{t.scale.set(o.scale,o.scale),t.x=o.x,t.y=o.y});return a.chain(h.chain(a)),a});Uh();
