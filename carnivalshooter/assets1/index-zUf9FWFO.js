var XN=Object.defineProperty;var HN=(r,e,t)=>e in r?XN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var $N=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var C=(r,e,t)=>HN(r,typeof e!="symbol"?e+"":e,t);var WV=$N((eq,Zg)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var ao=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ud(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function yA(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var xA={exports:{}},vg={},_A={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cd=Symbol.for("react.element"),zN=Symbol.for("react.portal"),YN=Symbol.for("react.fragment"),GN=Symbol.for("react.strict_mode"),WN=Symbol.for("react.profiler"),VN=Symbol.for("react.provider"),qN=Symbol.for("react.context"),KN=Symbol.for("react.forward_ref"),QN=Symbol.for("react.suspense"),ZN=Symbol.for("react.memo"),JN=Symbol.for("react.lazy"),TT=Symbol.iterator;function eF(r){return r===null||typeof r!="object"?null:(r=TT&&r[TT]||r["@@iterator"],typeof r=="function"?r:null)}var wA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bA=Object.assign,SA={};function yc(r,e,t){this.props=r,this.context=e,this.refs=SA,this.updater=t||wA}yc.prototype.isReactComponent={};yc.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};yc.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function TA(){}TA.prototype=yc.prototype;function P_(r,e,t){this.props=r,this.context=e,this.refs=SA,this.updater=t||wA}var A_=P_.prototype=new TA;A_.constructor=P_;bA(A_,yc.prototype);A_.isPureReactComponent=!0;var ET=Array.isArray,EA=Object.prototype.hasOwnProperty,k_={current:null},CA={key:!0,ref:!0,__self:!0,__source:!0};function PA(r,e,t){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)EA.call(e,n)&&!CA.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(r&&r.defaultProps)for(n in a=r.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:cd,type:r,key:s,ref:o,props:i,_owner:k_.current}}function tF(r,e){return{$$typeof:cd,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function I_(r){return typeof r=="object"&&r!==null&&r.$$typeof===cd}function rF(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var CT=/\/+/g;function Ev(r,e){return typeof r=="object"&&r!==null&&r.key!=null?rF(""+r.key):e.toString(36)}function Ip(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case cd:case zN:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+Ev(o,0):n,ET(i)?(t="",r!=null&&(t=r.replace(CT,"$&/")+"/"),Ip(i,e,t,"",function(u){return u})):i!=null&&(I_(i)&&(i=tF(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(CT,"$&/")+"/")+r)),e.push(i)),1;if(o=0,n=n===""?".":n+":",ET(r))for(var a=0;a<r.length;a++){s=r[a];var l=n+Ev(s,a);o+=Ip(s,e,t,l,i)}else if(l=eF(r),typeof l=="function")for(r=l.call(r),a=0;!(s=r.next()).done;)s=s.value,l=n+Ev(s,a++),o+=Ip(s,e,t,l,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Af(r,e,t){if(r==null)return r;var n=[],i=0;return Ip(r,n,"","",function(s){return e.call(t,s,i++)}),n}function nF(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var ln={current:null},Mp={transition:null},iF={ReactCurrentDispatcher:ln,ReactCurrentBatchConfig:Mp,ReactCurrentOwner:k_};function AA(){throw Error("act(...) is not supported in production builds of React.")}Ke.Children={map:Af,forEach:function(r,e,t){Af(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return Af(r,function(){e++}),e},toArray:function(r){return Af(r,function(e){return e})||[]},only:function(r){if(!I_(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};Ke.Component=yc;Ke.Fragment=YN;Ke.Profiler=WN;Ke.PureComponent=P_;Ke.StrictMode=GN;Ke.Suspense=QN;Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iF;Ke.act=AA;Ke.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=bA({},r.props),i=r.key,s=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=k_.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(l in e)EA.call(e,l)&&!CA.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:cd,type:r.type,key:i,ref:s,props:n,_owner:o}};Ke.createContext=function(r){return r={$$typeof:qN,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:VN,_context:r},r.Consumer=r};Ke.createElement=PA;Ke.createFactory=function(r){var e=PA.bind(null,r);return e.type=r,e};Ke.createRef=function(){return{current:null}};Ke.forwardRef=function(r){return{$$typeof:KN,render:r}};Ke.isValidElement=I_;Ke.lazy=function(r){return{$$typeof:JN,_payload:{_status:-1,_result:r},_init:nF}};Ke.memo=function(r,e){return{$$typeof:ZN,type:r,compare:e===void 0?null:e}};Ke.startTransition=function(r){var e=Mp.transition;Mp.transition={};try{r()}finally{Mp.transition=e}};Ke.unstable_act=AA;Ke.useCallback=function(r,e){return ln.current.useCallback(r,e)};Ke.useContext=function(r){return ln.current.useContext(r)};Ke.useDebugValue=function(){};Ke.useDeferredValue=function(r){return ln.current.useDeferredValue(r)};Ke.useEffect=function(r,e){return ln.current.useEffect(r,e)};Ke.useId=function(){return ln.current.useId()};Ke.useImperativeHandle=function(r,e,t){return ln.current.useImperativeHandle(r,e,t)};Ke.useInsertionEffect=function(r,e){return ln.current.useInsertionEffect(r,e)};Ke.useLayoutEffect=function(r,e){return ln.current.useLayoutEffect(r,e)};Ke.useMemo=function(r,e){return ln.current.useMemo(r,e)};Ke.useReducer=function(r,e,t){return ln.current.useReducer(r,e,t)};Ke.useRef=function(r){return ln.current.useRef(r)};Ke.useState=function(r){return ln.current.useState(r)};Ke.useSyncExternalStore=function(r,e,t){return ln.current.useSyncExternalStore(r,e,t)};Ke.useTransition=function(){return ln.current.useTransition()};Ke.version="18.3.1";_A.exports=Ke;var N=_A.exports;const po=ud(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF=N,oF=Symbol.for("react.element"),aF=Symbol.for("react.fragment"),lF=Object.prototype.hasOwnProperty,uF=sF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cF={key:!0,ref:!0,__self:!0,__source:!0};function kA(r,e,t){var n,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)lF.call(e,n)&&!cF.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:oF,type:r,key:s,ref:o,props:i,_owner:uF.current}}vg.Fragment=aF;vg.jsx=kA;vg.jsxs=kA;xA.exports=vg;var T=xA.exports;function Gr(r){return r!=null}function Qu(r){return r==null}function IA(r){return typeof r=="string"}function PT(r){return Array.isArray(r)}function hF(r){return Object.keys(r).length===0&&r.constructor===Object}function dF(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];if(n!=null)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}const cg=class cg{constructor(){C(this,"mappings");this.mappings={}}static get Obj(){return this._Obj||(this._Obj=new cg),this._Obj}map(e,t){const n=new yF(e,t);return this.mappings[e]=n,n}unmap(e){this.mappings[e]=void 0}get(e,...t){const n=this.mappings[e];if(!Qu(n))return n.get(t)}resolve(){console.warn("Injector.resolve() is not implement yet")}};C(cg,"_Obj");let s1=cg;class fF{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class pF{constructor(e){this.type=e}get(e){return MA(this.type,e)}destroy(){this.type=void 0}}class mF{constructor(e){this.func=e}get(...e){return this.func(...e)}destroy(){this.func=void 0}}class gF{constructor(e){C(this,"instance");this.type=e}get(e){return Qu(this.instance)&&(this.instance=MA(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class vF{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class yF{constructor(e,t){C(this,"provider");this.name=e,this.type=t}get(e){return Qu(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new fF(e)}toType(e){this.destroy(),this.provider=new pF(e)}toSingleton(e){this.destroy(),this.provider=new gF(e)}asSingleton(){if(this.destroy(),Qu(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new vF(e)}toFunction(e){this.destroy(),this.provider=new mF(e)}destroy(){Gr(this.provider)&&this.provider.destroy()}}function MA(r,e){switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}const Tl=s1.Obj;function zc(r){return Tl.get(`action_fc:${r}`)}function M_(r,e){Tl.map(`action_init:${r}`).toValue(e)}function lu(r){return Tl.get(`action_init:${r}`)}const RA="apiService";function xF(r){return Tl.map(RA).toSingleton(r)}function yg(){return Tl.get(RA)}function hd(r,e){return Tl.map(`parser:${r}`).toValue(e)}function Vs(r){return Tl.get(`parser:${r}`)}function _F(r){const e={};for(const t in r){const n=r[t];e[t]=n.map((i,s)=>[s,i])}return e}function wF(r){const e={};for(const t in r){const n=r[t],i=n.length,s=[];for(let l=0;l<i;l++){const u=n[l];s.push([l+.5,u+.5])}const o=n[0];s.unshift([0,o+.5]);const a=n[i-1];s.push([i,a+.5]),e[t]=s}return e}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var uu=9e15,Pa=1e9,o1="0123456789abcdef",sm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",om="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",a1={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-uu,maxE:uu,crypto:!1},OA,co,Ue=!0,xg="[DecimalError] ",wa=xg+"Invalid argument: ",NA=xg+"Precision limit exceeded",FA=xg+"crypto unavailable",BA="[object Decimal]",Kr=Math.floor,hr=Math.pow,bF=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,SF=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,TF=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,LA=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ui=1e7,Fe=7,EF=9007199254740991,CF=sm.length-1,l1=om.length-1,oe={toStringTag:BA};oe.absoluteValue=oe.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Me(r)};oe.ceil=function(){return Me(new this.constructor(this),this.e+1,2)};oe.clampedTo=oe.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(wa+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};oe.comparedTo=oe.cmp=function(r){var e,t,n,i,s=this,o=s.d,a=(r=new s.constructor(r)).d,l=s.s,u=r.s;if(!o||!a)return!l||!u?NaN:l!==u?l:o===a?0:!o^l<0?1:-1;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==r.e)return s.e>r.e^l<0?1:-1;for(n=o.length,i=a.length,e=0,t=n<i?n:i;e<t;++e)if(o[e]!==a[e])return o[e]>a[e]^l<0?1:-1;return n===i?0:n>i^l<0?1:-1};oe.cosine=oe.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Fe,n.rounding=1,t=PF(n,HA(n,t)),n.precision=r,n.rounding=e,Me(co==2||co==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};oe.cubeRoot=oe.cbrt=function(){var r,e,t,n,i,s,o,a,l,u,h=this,c=h.constructor;if(!h.isFinite()||h.isZero())return new c(h);for(Ue=!1,s=h.s*hr(h.s*h,1/3),!s||Math.abs(s)==1/0?(t=Fr(h.d),r=h.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=hr(t,1/3),r=Kr((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new c(t),n.s=h.s):n=new c(s.toString()),o=(r=c.precision)+3;;)if(a=n,l=a.times(a).times(a),u=l.plus(h),n=yt(u.plus(h).times(a),u.plus(l),o+2,1),Fr(a.d).slice(0,o)===(t=Fr(n.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(Me(a,r+1,0),a.times(a).times(a).eq(h))){n=a;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Me(n,r+1,1),e=!n.times(n).times(n).eq(h));break}return Ue=!0,Me(n,r,c.rounding,e)};oe.decimalPlaces=oe.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-Kr(this.e/Fe))*Fe,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};oe.dividedBy=oe.div=function(r){return yt(this,new this.constructor(r))};oe.dividedToIntegerBy=oe.divToInt=function(r){var e=this,t=e.constructor;return Me(yt(e,new t(r),0,1,1),t.precision,t.rounding)};oe.equals=oe.eq=function(r){return this.cmp(r)===0};oe.floor=function(){return Me(new this.constructor(this),this.e+1,3)};oe.greaterThan=oe.gt=function(r){return this.cmp(r)>0};oe.greaterThanOrEqualTo=oe.gte=function(r){var e=this.cmp(r);return e==1||e===0};oe.hyperbolicCosine=oe.cosh=function(){var r,e,t,n,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;t=o.precision,n=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/wg(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=Zu(o,1,s.times(e),new o(1),!0);for(var l,u=r,h=new o(8);u--;)l=s.times(s),s=a.minus(l.times(h.minus(l.times(h))));return Me(s,o.precision=t,o.rounding=n,!0)};oe.hyperbolicSine=oe.sinh=function(){var r,e,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=Zu(s,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/wg(5,r)),i=Zu(s,2,i,i,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);r--;)o=i.times(i),i=i.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=e,s.rounding=t,Me(i,e,t,!0)};oe.hyperbolicTangent=oe.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,yt(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};oe.inverseCosine=oe.acos=function(){var r,e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,s=t.rounding;return n!==-1?n===0?e.isNeg()?Ri(t,i,s):new t(0):new t(NaN):e.isZero()?Ri(t,i+4,s).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),r=Ri(t,i+4,s).times(.5),t.precision=i,t.rounding=s,r.minus(e))};oe.inverseHyperbolicCosine=oe.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,Ue=!1,t=t.times(t).minus(1).sqrt().plus(t),Ue=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};oe.inverseHyperbolicSine=oe.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,Ue=!1,t=t.times(t).plus(1).sqrt().plus(t),Ue=!0,n.precision=r,n.rounding=e,t.ln())};oe.inverseHyperbolicTangent=oe.atanh=function(){var r,e,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?Me(new s(i),r,e,!0):(s.precision=t=n-i.e,i=yt(i.plus(1),new s(1).minus(i),t+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};oe.inverseSine=oe.asin=function(){var r,e,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=Ri(s,t+4,n).times(.5),r.s=i.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};oe.inverseTangent=oe.atan=function(){var r,e,t,n,i,s,o,a,l,u=this,h=u.constructor,c=h.precision,d=h.rounding;if(u.isFinite()){if(u.isZero())return new h(u);if(u.abs().eq(1)&&c+4<=l1)return o=Ri(h,c+4,d).times(.25),o.s=u.s,o}else{if(!u.s)return new h(NaN);if(c+4<=l1)return o=Ri(h,c+4,d).times(.5),o.s=u.s,o}for(h.precision=a=c+10,h.rounding=1,t=Math.min(28,a/Fe+2|0),r=t;r;--r)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Ue=!1,e=Math.ceil(a/Fe),n=1,l=u.times(u),o=new h(u),i=u;r!==-1;)if(i=i.times(l),s=o.minus(i.div(n+=2)),i=i.times(l),o=s.plus(i.div(n+=2)),o.d[e]!==void 0)for(r=e;o.d[r]===s.d[r]&&r--;);return t&&(o=o.times(2<<t-1)),Ue=!0,Me(o,h.precision=c,h.rounding=d,!0)};oe.isFinite=function(){return!!this.d};oe.isInteger=oe.isInt=function(){return!!this.d&&Kr(this.e/Fe)>this.d.length-2};oe.isNaN=function(){return!this.s};oe.isNegative=oe.isNeg=function(){return this.s<0};oe.isPositive=oe.isPos=function(){return this.s>0};oe.isZero=function(){return!!this.d&&this.d[0]===0};oe.lessThan=oe.lt=function(r){return this.cmp(r)<0};oe.lessThanOrEqualTo=oe.lte=function(r){return this.cmp(r)<1};oe.logarithm=oe.log=function(r){var e,t,n,i,s,o,a,l,u=this,h=u.constructor,c=h.precision,d=h.rounding,f=5;if(r==null)r=new h(10),e=!0;else{if(r=new h(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new h(NaN);e=r.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new h(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(Ue=!1,a=c+f,o=na(u,a),n=e?am(h,a+10):na(r,a),l=yt(o,n,a,1),Fh(l.d,i=c,d))do if(a+=10,o=na(u,a),n=e?am(h,a+10):na(r,a),l=yt(o,n,a,1),!s){+Fr(l.d).slice(i+1,i+15)+1==1e14&&(l=Me(l,c+1,0));break}while(Fh(l.d,i+=10,d));return Ue=!0,Me(l,c,d)};oe.minus=oe.sub=function(r){var e,t,n,i,s,o,a,l,u,h,c,d,f=this,g=f.constructor;if(r=new g(r),!f.d||!r.d)return!f.s||!r.s?r=new g(NaN):f.d?r.s=-r.s:r=new g(r.d||f.s!==r.s?f:NaN),r;if(f.s!=r.s)return r.s=-r.s,f.plus(r);if(u=f.d,d=r.d,a=g.precision,l=g.rounding,!u[0]||!d[0]){if(d[0])r.s=-r.s;else if(u[0])r=new g(f);else return new g(l===3?-0:0);return Ue?Me(r,a,l):r}if(t=Kr(r.e/Fe),h=Kr(f.e/Fe),u=u.slice(),s=h-t,s){for(c=s<0,c?(e=u,s=-s,o=d.length):(e=d,t=h,o=u.length),n=Math.max(Math.ceil(a/Fe),o)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=u.length,o=d.length,c=n<o,c&&(o=n),n=0;n<o;n++)if(u[n]!=d[n]){c=u[n]<d[n];break}s=0}for(c&&(e=u,u=d,d=e,r.s=-r.s),o=u.length,n=d.length-o;n>0;--n)u[o++]=0;for(n=d.length;n>s;){if(u[--n]<d[n]){for(i=n;i&&u[--i]===0;)u[i]=Ui-1;--u[i],u[n]+=Ui}u[n]-=d[n]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(r.d=u,r.e=_g(u,t),Ue?Me(r,a,l):r):new g(l===3?-0:0)};oe.modulo=oe.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Me(new n(t),n.precision,n.rounding):(Ue=!1,n.modulo==9?(e=yt(t,r.abs(),0,3,1),e.s*=r.s):e=yt(t,r,0,n.modulo,1),e=e.times(r),Ue=!0,t.minus(e))};oe.naturalExponential=oe.exp=function(){return u1(this)};oe.naturalLogarithm=oe.ln=function(){return na(this)};oe.negated=oe.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Me(r)};oe.plus=oe.add=function(r){var e,t,n,i,s,o,a,l,u,h,c=this,d=c.constructor;if(r=new d(r),!c.d||!r.d)return!c.s||!r.s?r=new d(NaN):c.d||(r=new d(r.d||c.s===r.s?c:NaN)),r;if(c.s!=r.s)return r.s=-r.s,c.minus(r);if(u=c.d,h=r.d,a=d.precision,l=d.rounding,!u[0]||!h[0])return h[0]||(r=new d(c)),Ue?Me(r,a,l):r;if(s=Kr(c.e/Fe),n=Kr(r.e/Fe),u=u.slice(),i=s-n,i){for(i<0?(t=u,i=-i,o=h.length):(t=h,n=s,o=u.length),s=Math.ceil(a/Fe),o=s>o?s+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=u.length,i=h.length,o-i<0&&(i=o,t=h,h=u,u=t),e=0;i;)e=(u[--i]=u[i]+h[i]+e)/Ui|0,u[i]%=Ui;for(e&&(u.unshift(e),++n),o=u.length;u[--o]==0;)u.pop();return r.d=u,r.e=_g(u,n),Ue?Me(r,a,l):r};oe.precision=oe.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(wa+r);return t.d?(e=DA(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};oe.round=function(){var r=this,e=r.constructor;return Me(new e(r),r.e+1,e.rounding)};oe.sine=oe.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Fe,n.rounding=1,t=kF(n,HA(n,t)),n.precision=r,n.rounding=e,Me(co>2?t.neg():t,r,e,!0)):new n(NaN)};oe.squareRoot=oe.sqrt=function(){var r,e,t,n,i,s,o=this,a=o.d,l=o.e,u=o.s,h=o.constructor;if(u!==1||!a||!a[0])return new h(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(Ue=!1,u=Math.sqrt(+o),u==0||u==1/0?(e=Fr(a),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=Kr((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),n=new h(e)):n=new h(u.toString()),t=(l=h.precision)+3;;)if(s=n,n=s.plus(yt(o,s,t+2,1)).times(.5),Fr(s.d).slice(0,t)===(e=Fr(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Me(s,l+1,0),s.times(s).eq(o))){n=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Me(n,l+1,1),r=!n.times(n).eq(o));break}return Ue=!0,Me(n,l,h.rounding,r)};oe.tangent=oe.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=yt(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Me(co==2||co==4?t.neg():t,r,e,!0)):new n(NaN)};oe.times=oe.mul=function(r){var e,t,n,i,s,o,a,l,u,h=this,c=h.constructor,d=h.d,f=(r=new c(r)).d;if(r.s*=h.s,!d||!d[0]||!f||!f[0])return new c(!r.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?r.s/0:r.s*0);for(t=Kr(h.e/Fe)+Kr(r.e/Fe),l=d.length,u=f.length,l<u&&(s=d,d=f,f=s,o=l,l=u,u=o),s=[],o=l+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(e=0,i=l+n;i>n;)a=s[i]+f[n]*d[i-n-1]+e,s[i--]=a%Ui|0,e=a/Ui|0;s[i]=(s[i]+e)%Ui|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),r.d=s,r.e=_g(s,t),Ue?Me(r,c.precision,c.rounding):r};oe.toBinary=function(r,e){return R_(this,2,r,e)};oe.toDecimalPlaces=oe.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(En(r,0,Pa),e===void 0?e=n.rounding:En(e,0,8),Me(t,r+t.e+1,e))};oe.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Fs(n,!0):(En(r,0,Pa),e===void 0?e=i.rounding:En(e,0,8),n=Me(new i(n),r+1,e),t=Fs(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};oe.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?t=Fs(i):(En(r,0,Pa),e===void 0?e=s.rounding:En(e,0,8),n=Me(new s(i),r+i.e+1,e),t=Fs(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};oe.toFraction=function(r){var e,t,n,i,s,o,a,l,u,h,c,d,f=this,g=f.d,v=f.constructor;if(!g)return new v(f);if(u=t=new v(1),n=l=new v(0),e=new v(n),s=e.e=DA(g)-f.e-1,o=s%Fe,e.d[0]=hr(10,o<0?Fe+o:o),r==null)r=s>0?e:u;else{if(a=new v(r),!a.isInt()||a.lt(u))throw Error(wa+a);r=a.gt(e)?s>0?e:u:a}for(Ue=!1,a=new v(Fr(g)),h=v.precision,v.precision=s=g.length*Fe*2;c=yt(a,e,0,1,1),i=t.plus(c.times(n)),i.cmp(r)!=1;)t=n,n=i,i=u,u=l.plus(c.times(i)),l=i,i=e,e=a.minus(c.times(i)),a=i;return i=yt(r.minus(t),n,0,1,1),l=l.plus(i.times(u)),t=t.plus(i.times(n)),l.s=u.s=f.s,d=yt(u,n,s,1).minus(f).abs().cmp(yt(l,t,s,1).minus(f).abs())<1?[u,n]:[l,t],v.precision=h,Ue=!0,d};oe.toHexadecimal=oe.toHex=function(r,e){return R_(this,16,r,e)};oe.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:En(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(Ue=!1,t=yt(t,r,0,e,1).times(r),Ue=!0,Me(t)):(r.s=t.s,t=r),t};oe.toNumber=function(){return+this};oe.toOctal=function(r,e){return R_(this,8,r,e)};oe.toPower=oe.pow=function(r){var e,t,n,i,s,o,a=this,l=a.constructor,u=+(r=new l(r));if(!a.d||!r.d||!a.d[0]||!r.d[0])return new l(hr(+a,u));if(a=new l(a),a.eq(1))return a;if(n=l.precision,s=l.rounding,r.eq(1))return Me(a,n,s);if(e=Kr(r.e/Fe),e>=r.d.length-1&&(t=u<0?-u:u)<=EF)return i=UA(l,a,t,n),r.s<0?new l(1).div(i):Me(i,n,s);if(o=a.s,o<0){if(e<r.d.length-1)return new l(NaN);if(r.d[e]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return t=hr(+a,u),e=t==0||!isFinite(t)?Kr(u*(Math.log("0."+Fr(a.d))/Math.LN10+a.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(Ue=!1,l.rounding=a.s=1,t=Math.min(12,(e+"").length),i=u1(r.times(na(a,n+t)),n),i.d&&(i=Me(i,n+5,1),Fh(i.d,n,s)&&(e=n+10,i=Me(u1(r.times(na(a,e+t)),e),e+5,1),+Fr(i.d).slice(n+1,n+15)+1==1e14&&(i=Me(i,n+1,0)))),i.s=o,Ue=!0,l.rounding=s,Me(i,n,s))};oe.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Fs(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(En(r,1,Pa),e===void 0?e=i.rounding:En(e,0,8),n=Me(new i(n),r,e),t=Fs(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};oe.toSignificantDigits=oe.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(En(r,1,Pa),e===void 0?e=n.rounding:En(e,0,8)),Me(new n(t),r,e)};oe.toString=function(){var r=this,e=r.constructor,t=Fs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};oe.truncated=oe.trunc=function(){return Me(new this.constructor(this),this.e+1,1)};oe.valueOf=oe.toJSON=function(){var r=this,e=r.constructor,t=Fs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Fr(r){var e,t,n,i=r.length-1,s="",o=r[0];if(i>0){for(s+=o,e=1;e<i;e++)n=r[e]+"",t=Fe-n.length,t&&(s+=Wo(t)),s+=n;o=r[e],n=o+"",t=Fe-n.length,t&&(s+=Wo(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function En(r,e,t){if(r!==~~r||r<e||r>t)throw Error(wa+r)}function Fh(r,e,t,n){var i,s,o,a;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=Fe,i=0):(i=Math.ceil((e+1)/Fe),e%=Fe),s=hr(10,Fe-e),a=r[i]%s|0,n==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):o=(t<4&&a+1==s||t>3&&a+1==s/2)&&(r[i+1]/s/100|0)==hr(10,e-2)-1||(a==s/2||a==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(n||t<4)&&a==9999||!n&&t>3&&a==4999):o=((n||t<4)&&a+1==s||!n&&t>3&&a+1==s/2)&&(r[i+1]/s/1e3|0)==hr(10,e-3)-1,o}function Rp(r,e,t){for(var n,i=[0],s,o=0,a=r.length;o<a;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=o1.indexOf(r.charAt(o++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function PF(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/wg(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=Zu(r,1,e.times(i),new r(1));for(var s=t;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return r.precision-=t,e}var yt=function(){function r(n,i,s){var o,a=0,l=n.length;for(n=n.slice();l--;)o=n[l]*i+a,n[l]=o%s|0,a=o/s|0;return a&&n.unshift(a),n}function e(n,i,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(n[a]!=i[a]){l=n[a]>i[a]?1:-1;break}return l}function t(n,i,s,o){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*o+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o,a,l){var u,h,c,d,f,g,v,x,y,b,_,S,I,A,k,M,O,L,D,j,F=n.constructor,B=n.s==i.s?1:-1,X=n.d,V=i.d;if(!X||!X[0]||!V||!V[0])return new F(!n.s||!i.s||(X?V&&X[0]==V[0]:!V)?NaN:X&&X[0]==0||!V?B*0:B/0);for(l?(f=1,h=n.e-i.e):(l=Ui,f=Fe,h=Kr(n.e/f)-Kr(i.e/f)),D=V.length,O=X.length,y=new F(B),b=y.d=[],c=0;V[c]==(X[c]||0);c++);if(V[c]>(X[c]||0)&&h--,s==null?(A=s=F.precision,o=F.rounding):a?A=s+(n.e-i.e)+1:A=s,A<0)b.push(1),g=!0;else{if(A=A/f+2|0,c=0,D==1){for(d=0,V=V[0],A++;(c<O||d)&&A--;c++)k=d*l+(X[c]||0),b[c]=k/V|0,d=k%V|0;g=d||c<O}else{for(d=l/(V[0]+1)|0,d>1&&(V=r(V,d,l),X=r(X,d,l),D=V.length,O=X.length),M=D,_=X.slice(0,D),S=_.length;S<D;)_[S++]=0;j=V.slice(),j.unshift(0),L=V[0],V[1]>=l/2&&++L;do d=0,u=e(V,_,D,S),u<0?(I=_[0],D!=S&&(I=I*l+(_[1]||0)),d=I/L|0,d>1?(d>=l&&(d=l-1),v=r(V,d,l),x=v.length,S=_.length,u=e(v,_,x,S),u==1&&(d--,t(v,D<x?j:V,x,l))):(d==0&&(u=d=1),v=V.slice()),x=v.length,x<S&&v.unshift(0),t(_,v,S,l),u==-1&&(S=_.length,u=e(V,_,D,S),u<1&&(d++,t(_,D<S?j:V,S,l))),S=_.length):u===0&&(d++,_=[0]),b[c++]=d,u&&_[0]?_[S++]=X[M]||0:(_=[X[M]],S=1);while((M++<O||_[0]!==void 0)&&A--);g=_[0]!==void 0}b[0]||b.shift()}if(f==1)y.e=h,OA=g;else{for(c=1,d=b[0];d>=10;d/=10)c++;y.e=c+h*f-1,Me(y,a?s+y.e+1:s,o,g)}return y}}();function Me(r,e,t,n){var i,s,o,a,l,u,h,c,d,f=r.constructor;e:if(e!=null){if(c=r.d,!c)return r;for(i=1,a=c[0];a>=10;a/=10)i++;if(s=e-i,s<0)s+=Fe,o=e,h=c[d=0],l=h/hr(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Fe),a=c.length,d>=a)if(n){for(;a++<=d;)c.push(0);h=l=0,i=1,s%=Fe,o=s-Fe+1}else break e;else{for(h=a=c[d],i=1;a>=10;a/=10)i++;s%=Fe,o=s-Fe+i,l=o<0?0:h/hr(10,i-o-1)%10|0}if(n=n||e<0||c[d+1]!==void 0||(o<0?h:h%hr(10,i-o-1)),u=t<4?(l||n)&&(t==0||t==(r.s<0?3:2)):l>5||l==5&&(t==4||n||t==6&&(s>0?o>0?h/hr(10,i-o):0:c[d-1])%10&1||t==(r.s<0?8:7)),e<1||!c[0])return c.length=0,u?(e-=r.e+1,c[0]=hr(10,(Fe-e%Fe)%Fe),r.e=-e||0):c[0]=r.e=0,r;if(s==0?(c.length=d,a=1,d--):(c.length=d+1,a=hr(10,Fe-s),c[d]=o>0?(h/hr(10,i-o)%hr(10,o)|0)*a:0),u)for(;;)if(d==0){for(s=1,o=c[0];o>=10;o/=10)s++;for(o=c[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(r.e++,c[0]==Ui&&(c[0]=1));break}else{if(c[d]+=a,c[d]!=Ui)break;c[d--]=0,a=1}for(s=c.length;c[--s]===0;)c.pop()}return Ue&&(r.e>f.maxE?(r.d=null,r.e=NaN):r.e<f.minE&&(r.e=0,r.d=[0])),r}function Fs(r,e,t){if(!r.isFinite())return XA(r);var n,i=r.e,s=Fr(r.d),o=s.length;return e?(t&&(n=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+Wo(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+Wo(-i-1)+s,t&&(n=t-o)>0&&(s+=Wo(n))):i>=o?(s+=Wo(i+1-o),t&&(n=t-i-1)>0&&(s=s+"."+Wo(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-o)>0&&(i+1===o&&(s+="."),s+=Wo(n))),s}function _g(r,e){var t=r[0];for(e*=Fe;t>=10;t/=10)e++;return e}function am(r,e,t){if(e>CF)throw Ue=!0,t&&(r.precision=t),Error(NA);return Me(new r(sm),e,1,!0)}function Ri(r,e,t){if(e>l1)throw Error(NA);return Me(new r(om),e,t,!0)}function DA(r){var e=r.length-1,t=e*Fe+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Wo(r){for(var e="";r--;)e+="0";return e}function UA(r,e,t,n){var i,s=new r(1),o=Math.ceil(n/Fe+4);for(Ue=!1;;){if(t%2&&(s=s.times(e),kT(s.d,o)&&(i=!0)),t=Kr(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),kT(e.d,o)}return Ue=!0,s}function AT(r){return r.d[r.d.length-1]&1}function jA(r,e,t){for(var n,i=new r(e[0]),s=0;++s<e.length;)if(n=new r(e[s]),n.s)i[t](n)&&(i=n);else{i=n;break}return i}function u1(r,e){var t,n,i,s,o,a,l,u=0,h=0,c=0,d=r.constructor,f=d.rounding,g=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(Ue=!1,l=g):l=e,a=new d(.03125);r.e>-2;)r=r.times(a),c+=5;for(n=Math.log(hr(2,c))/Math.LN10*2+5|0,l+=n,t=s=o=new d(1),d.precision=l;;){if(s=Me(s.times(r),l,1),t=t.times(++h),a=o.plus(yt(s,t,l,1)),Fr(a.d).slice(0,l)===Fr(o.d).slice(0,l)){for(i=c;i--;)o=Me(o.times(o),l,1);if(e==null)if(u<3&&Fh(o.d,l-n,f,u))d.precision=l+=10,t=s=a=new d(1),h=0,u++;else return Me(o,d.precision=g,f,Ue=!0);else return d.precision=g,o}o=a}}function na(r,e){var t,n,i,s,o,a,l,u,h,c,d,f=1,g=10,v=r,x=v.d,y=v.constructor,b=y.rounding,_=y.precision;if(v.s<0||!x||!x[0]||!v.e&&x[0]==1&&x.length==1)return new y(x&&!x[0]?-1/0:v.s!=1?NaN:x?0:v);if(e==null?(Ue=!1,h=_):h=e,y.precision=h+=g,t=Fr(x),n=t.charAt(0),Math.abs(s=v.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)v=v.times(r),t=Fr(v.d),n=t.charAt(0),f++;s=v.e,n>1?(v=new y("0."+t),s++):v=new y(n+"."+t.slice(1))}else return u=am(y,h+2,_).times(s+""),v=na(new y(n+"."+t.slice(1)),h-g).plus(u),y.precision=_,e==null?Me(v,_,b,Ue=!0):v;for(c=v,l=o=v=yt(v.minus(1),v.plus(1),h,1),d=Me(v.times(v),h,1),i=3;;){if(o=Me(o.times(d),h,1),u=l.plus(yt(o,new y(i),h,1)),Fr(u.d).slice(0,h)===Fr(l.d).slice(0,h))if(l=l.times(2),s!==0&&(l=l.plus(am(y,h+2,_).times(s+""))),l=yt(l,new y(f),h,1),e==null)if(Fh(l.d,h-g,b,a))y.precision=h+=g,u=o=v=yt(c.minus(1),c.plus(1),h,1),d=Me(v.times(v),h,1),i=a=1;else return Me(l,y.precision=_,b,Ue=!0);else return y.precision=_,l;l=u,i+=2}}function XA(r){return String(r.s*r.s/0)}function c1(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%Fe,t<0&&(n+=Fe),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Fe;n<i;)r.d.push(+e.slice(n,n+=Fe));e=e.slice(n),n=Fe-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),Ue&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function AF(r,e){var t,n,i,s,o,a,l,u,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),LA.test(e))return c1(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(SF.test(e))t=16,e=e.toLowerCase();else if(bF.test(e))t=2;else if(TF.test(e))t=8;else throw Error(wa+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,n=r.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,i=UA(n,new n(t),s,s*2)),u=Rp(e,t,Ui),h=u.length-1,s=h;u[s]===0;--s)u.pop();return s<0?new n(r.s*0):(r.e=_g(u,h),r.d=u,Ue=!1,o&&(r=yt(r,i,a*4)),l&&(r=r.times(Math.abs(l)<54?hr(2,l):nt.pow(2,l))),Ue=!0,r)}function kF(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:Zu(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/wg(5,t)),e=Zu(r,2,e,e);for(var i,s=new r(5),o=new r(16),a=new r(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}function Zu(r,e,t,n,i){var s,o,a,l,u=r.precision,h=Math.ceil(u/Fe);for(Ue=!1,l=t.times(t),a=new r(n);;){if(o=yt(a.times(l),new r(e++*e++),u,1),a=i?n.plus(o):n.minus(o),n=yt(o.times(l),new r(e++*e++),u,1),o=a.plus(n),o.d[h]!==void 0){for(s=h;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=n,n=o,o=s}return Ue=!0,o.d.length=h+1,o}function wg(r,e){for(var t=r;--e;)t*=r;return t}function HA(r,e){var t,n=e.s<0,i=Ri(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return co=n?4:1,e;if(t=e.divToInt(i),t.isZero())co=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return co=AT(t)?n?2:3:n?4:1,e;co=AT(t)?n?1:4:n?3:2}return e.minus(i).abs()}function R_(r,e,t,n){var i,s,o,a,l,u,h,c,d,f=r.constructor,g=t!==void 0;if(g?(En(t,1,Pa),n===void 0?n=f.rounding:En(n,0,8)):(t=f.precision,n=f.rounding),!r.isFinite())h=XA(r);else{for(h=Fs(r),o=h.indexOf("."),g?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(h=h.replace(".",""),d=new f(1),d.e=h.length-o,d.d=Rp(Fs(d),10,i),d.e=d.d.length),c=Rp(h,10,i),s=l=c.length;c[--l]==0;)c.pop();if(!c[0])h=g?"0p+0":"0";else{if(o<0?s--:(r=new f(r),r.d=c,r.e=s,r=yt(r,d,t,n,0,i),c=r.d,s=r.e,u=OA),o=c[t],a=i/2,u=u||c[t+1]!==void 0,u=n<4?(o!==void 0||u)&&(n===0||n===(r.s<0?3:2)):o>a||o===a&&(n===4||u||n===6&&c[t-1]&1||n===(r.s<0?8:7)),c.length=t,u)for(;++c[--t]>i-1;)c[t]=0,t||(++s,c.unshift(1));for(l=c.length;!c[l-1];--l);for(o=0,h="";o<l;o++)h+=o1.charAt(c[o]);if(g){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)h+="0";for(c=Rp(h,i,e),l=c.length;!c[l-1];--l);for(o=1,h="1.";o<l;o++)h+=o1.charAt(c[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)h="0"+h;h="0."+h}else if(++s>l)for(s-=l;s--;)h+="0";else s<l&&(h=h.slice(0,s)+"."+h.slice(s))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return r.s<0?"-"+h:h}function kT(r,e){if(r.length>e)return r.length=e,!0}function IF(r){return new this(r).abs()}function MF(r){return new this(r).acos()}function RF(r){return new this(r).acosh()}function OF(r,e){return new this(r).plus(e)}function NF(r){return new this(r).asin()}function FF(r){return new this(r).asinh()}function BF(r){return new this(r).atan()}function LF(r){return new this(r).atanh()}function DF(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Ri(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Ri(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Ri(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(yt(r,e,s,1)),e=Ri(this,s,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(yt(r,e,s,1)),t}function UF(r){return new this(r).cbrt()}function jF(r){return Me(r=new this(r),r.e+1,2)}function XF(r,e,t){return new this(r).clamp(e,t)}function HF(r){if(!r||typeof r!="object")throw Error(xg+"Object expected");var e,t,n,i=r.defaults===!0,s=["precision",1,Pa,"rounding",0,8,"toExpNeg",-uu,0,"toExpPos",0,uu,"maxE",0,uu,"minE",-uu,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=a1[t]),(n=r[t])!==void 0)if(Kr(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(wa+t+": "+n);if(t="crypto",i&&(this[t]=a1[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(FA);else this[t]=!1;else throw Error(wa+t+": "+n);return this}function $F(r){return new this(r).cos()}function zF(r){return new this(r).cosh()}function $A(r){var e,t,n;function i(s){var o,a,l,u=this;if(!(u instanceof i))return new i(s);if(u.constructor=i,IT(s)){u.s=s.s,Ue?!s.d||s.e>i.maxE?(u.e=NaN,u.d=null):s.e<i.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Ue?o>i.maxE?(u.e=NaN,u.d=null):o<i.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[s]):(u.e=o,u.d=[s]);return}else if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return c1(u,s.toString())}else if(l!=="string")throw Error(wa+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(a===43&&(s=s.slice(1)),u.s=1),LA.test(s)?c1(u,s):AF(u,s)}if(i.prototype=oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=HF,i.clone=$A,i.isDecimal=IT,i.abs=IF,i.acos=MF,i.acosh=RF,i.add=OF,i.asin=NF,i.asinh=FF,i.atan=BF,i.atanh=LF,i.atan2=DF,i.cbrt=UF,i.ceil=jF,i.clamp=XF,i.cos=$F,i.cosh=zF,i.div=YF,i.exp=GF,i.floor=WF,i.hypot=VF,i.ln=qF,i.log=KF,i.log10=ZF,i.log2=QF,i.max=JF,i.min=eB,i.mod=tB,i.mul=rB,i.pow=nB,i.random=iB,i.round=sB,i.sign=oB,i.sin=aB,i.sinh=lB,i.sqrt=uB,i.sub=cB,i.sum=hB,i.tan=dB,i.tanh=fB,i.trunc=pB,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function YF(r,e){return new this(r).div(e)}function GF(r){return new this(r).exp()}function WF(r){return Me(r=new this(r),r.e+1,3)}function VF(){var r,e,t=new this(0);for(Ue=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Ue=!0,new this(1/0);t=e}return Ue=!0,t.sqrt()}function IT(r){return r instanceof nt||r&&r.toStringTag===BA||!1}function qF(r){return new this(r).ln()}function KF(r,e){return new this(r).log(e)}function QF(r){return new this(r).log(2)}function ZF(r){return new this(r).log(10)}function JF(){return jA(this,arguments,"lt")}function eB(){return jA(this,arguments,"gt")}function tB(r,e){return new this(r).mod(e)}function rB(r,e){return new this(r).mul(e)}function nB(r,e){return new this(r).pow(e)}function iB(r){var e,t,n,i,s=0,o=new this(1),a=[];if(r===void 0?r=this.precision:En(r,1,Pa),n=Math.ceil(r/Fe),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=n/4}else throw Error(FA);else for(;s<n;)a[s++]=Math.random()*1e7|0;for(n=a[--s],r%=Fe,n&&r&&(i=hr(10,Fe-r),a[s]=(n/i|0)*i);a[s]===0;s--)a.pop();if(s<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=Fe)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<Fe&&(t-=Fe-n)}return o.e=t,o.d=a,o}function sB(r){return Me(r=new this(r),r.e+1,this.rounding)}function oB(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function aB(r){return new this(r).sin()}function lB(r){return new this(r).sinh()}function uB(r){return new this(r).sqrt()}function cB(r,e){return new this(r).sub(e)}function hB(){var r=0,e=arguments,t=new this(e[r]);for(Ue=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return Ue=!0,Me(t,this.precision,this.rounding)}function dB(r){return new this(r).tan()}function fB(r){return new this(r).tanh()}function pB(r){return Me(r=new this(r),r.e+1,1)}oe[Symbol.for("nodejs.util.inspect.custom")]=oe.toString;oe[Symbol.toStringTag]="Decimal";var nt=oe.constructor=$A(a1);sm=new nt(sm);om=new nt(om);const mB="geisha",gB=1721126946931,vB={title:mB,assetVersion:gB},Cv={0:[1,1,1,1,1],1:[0,0,0,0,0],2:[2,2,2,2,2],3:[0,0,1,1,1],4:[2,2,1,1,1],5:[0,0,2,2,2],6:[2,2,0,0,0],7:[1,1,0,1,2],8:[1,1,2,1,0],9:[0,1,0,0,0],10:[2,1,2,2,2],11:[1,0,0,0,1],12:[1,2,2,2,1],13:[1,0,1,0,0],14:[1,2,1,2,2],15:[0,1,1,2,2],16:[2,1,1,0,0],17:[1,0,2,1,1],18:[1,2,0,1,1],19:[0,1,2,2,2],20:[2,1,0,0,0],21:[0,2,0,1,2],22:[2,0,2,1,0],23:[0,2,1,0,1],24:[2,0,1,2,1],25:[0,2,2,0,0],26:[2,0,0,2,2],27:[1,1,1,0,0],28:[1,1,1,2,2],29:[0,2,2,2,2]},yB={row:3,column:5,paylineMapV2:Cv,paylineMap:_F(Cv),paylinePathMap:wF(Cv),symbolSize:[144.5,140],symbolFrame:[144.5,140]};M_("table",yB);const xB={id:3,version:"1.0.0",layoutMap:{l:{safeArea:[35,200,1170,810],displayArea:[0,100,1170,1020]},p:{safeArea:[315,120,540,960],displayArea:[0,0,1170,1170]}}};M_("gameconfig",Object.assign(xB,vB));const _B={spin:{betLevel:new nt(30)}};M_("spin",_B);const xt=N.createContext({});var wB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},bB=window.device,fe={},h1=[];window.device=fe;var Bh=window.document.documentElement,SB=window.navigator.userAgent.toLowerCase(),MT=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","pov_tv","hbbtv","ce-html"];fe.macos=function(){return er("mac")};fe.ios=function(){return fe.iphone()||fe.ipod()||fe.ipad()};fe.iphone=function(){return!fe.windows()&&er("iphone")};fe.ipod=function(){return er("ipod")};fe.ipad=function(){var r=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;return er("ipad")||r};fe.android=function(){return!fe.windows()&&er("android")};fe.androidPhone=function(){return fe.android()&&er("mobile")};fe.androidTablet=function(){return fe.android()&&!er("mobile")};fe.blackberry=function(){return er("blackberry")||er("bb10")};fe.blackberryPhone=function(){return fe.blackberry()&&!er("tablet")};fe.blackberryTablet=function(){return fe.blackberry()&&er("tablet")};fe.windows=function(){return er("windows")};fe.windowsPhone=function(){return fe.windows()&&er("phone")};fe.windowsTablet=function(){return fe.windows()&&er("touch")&&!fe.windowsPhone()};fe.fxos=function(){return(er("(mobile")||er("(tablet"))&&er(" rv:")};fe.fxosPhone=function(){return fe.fxos()&&er("mobile")};fe.fxosTablet=function(){return fe.fxos()&&er("tablet")};fe.meego=function(){return er("meego")};fe.cordova=function(){return window.cordova&&location.protocol==="file:"};fe.nodeWebkit=function(){return wB(window.process)==="object"};fe.mobile=function(){return fe.androidPhone()||fe.iphone()||fe.ipod()||fe.windowsPhone()||fe.blackberryPhone()||fe.fxosPhone()||fe.meego()};fe.tablet=function(){return fe.ipad()||fe.androidTablet()||fe.blackberryTablet()||fe.windowsTablet()||fe.fxosTablet()};fe.desktop=function(){return!fe.tablet()&&!fe.mobile()};fe.television=function(){for(var r=0;r<MT.length;){if(er(MT[r]))return!0;r++}return!1};fe.portrait=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?O_(screen.orientation.type,"portrait"):fe.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?Math.abs(window.orientation)!==90:window.innerHeight/window.innerWidth>1};fe.landscape=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?O_(screen.orientation.type,"landscape"):fe.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?Math.abs(window.orientation)===90:window.innerHeight/window.innerWidth<1};fe.noConflict=function(){return window.device=bB,this};function O_(r,e){return r.indexOf(e)!==-1}function er(r){return O_(SB,r)}function zA(r){return Bh.className.match(new RegExp(r,"i"))}function rr(r){var e=null;zA(r)||(e=Bh.className.replace(/^\s+|\s+$/g,""),Bh.className=e+" "+r)}function RT(r){zA(r)&&(Bh.className=Bh.className.replace(" "+r,""))}fe.ios()?fe.ipad()?rr("ios ipad tablet"):fe.iphone()?rr("ios iphone mobile"):fe.ipod()&&rr("ios ipod mobile"):fe.macos()?rr("macos desktop"):fe.android()?fe.androidTablet()?rr("android tablet"):rr("android mobile"):fe.blackberry()?fe.blackberryTablet()?rr("blackberry tablet"):rr("blackberry mobile"):fe.windows()?fe.windowsTablet()?rr("windows tablet"):fe.windowsPhone()?rr("windows mobile"):rr("windows desktop"):fe.fxos()?fe.fxosTablet()?rr("fxos tablet"):rr("fxos mobile"):fe.meego()?rr("meego mobile"):fe.nodeWebkit()?rr("node-webkit"):fe.television()?rr("television"):fe.desktop()&&rr("desktop");fe.cordova()&&rr("cordova");function Op(){fe.landscape()?(RT("portrait"),rr("landscape"),OT("landscape")):(RT("landscape"),rr("portrait"),OT("portrait")),YA()}function OT(r){for(var e=0;e<h1.length;e++)h1[e](r)}fe.onChangeOrientation=function(r){typeof r=="function"&&h1.push(r)};var Np="resize";Object.prototype.hasOwnProperty.call(window,"onorientationchange")&&(Np="orientationchange");window.addEventListener?window.addEventListener(Np,Op,!1):window.attachEvent?window.attachEvent(Np,Op):window[Np]=Op;Op();function N_(r){for(var e=0;e<r.length;e++)if(fe[r[e]]())return r[e];return"unknown"}fe.type=N_(["mobile","tablet","desktop"]);fe.os=N_(["ios","iphone","ipad","ipod","android","blackberry","macos","windows","fxos","meego","television"]);function YA(){fe.orientation=N_(["portrait","landscape"])}YA();var F_={exports:{}},Ru=typeof Reflect=="object"?Reflect:null,NT=Ru&&typeof Ru.apply=="function"?Ru.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Fp;Ru&&typeof Ru.ownKeys=="function"?Fp=Ru.ownKeys:Object.getOwnPropertySymbols?Fp=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Fp=function(e){return Object.getOwnPropertyNames(e)};function TB(r){console&&console.warn&&console.warn(r)}var GA=Number.isNaN||function(e){return e!==e};function gt(){gt.init.call(this)}F_.exports=gt;F_.exports.once=AB;gt.EventEmitter=gt;gt.prototype._events=void 0;gt.prototype._eventsCount=0;gt.prototype._maxListeners=void 0;var FT=10;function bg(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(gt,"defaultMaxListeners",{enumerable:!0,get:function(){return FT},set:function(r){if(typeof r!="number"||r<0||GA(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");FT=r}});gt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};gt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||GA(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function WA(r){return r._maxListeners===void 0?gt.defaultMaxListeners:r._maxListeners}gt.prototype.getMaxListeners=function(){return WA(this)};gt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")NT(l,this,t);else for(var u=l.length,h=ZA(l,u),n=0;n<u;++n)NT(h[n],this,t);return!0};function VA(r,e,t,n){var i,s,o;if(bg(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),o=s[e]),o===void 0)o=s[e]=t,++r._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),i=WA(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=o.length,TB(a)}return r}gt.prototype.addListener=function(e,t){return VA(this,e,t,!1)};gt.prototype.on=gt.prototype.addListener;gt.prototype.prependListener=function(e,t){return VA(this,e,t,!0)};function EB(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qA(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=EB.bind(n);return i.listener=t,n.wrapFn=i,i}gt.prototype.once=function(e,t){return bg(t),this.on(e,qA(this,e,t)),this};gt.prototype.prependOnceListener=function(e,t){return bg(t),this.prependListener(e,qA(this,e,t)),this};gt.prototype.removeListener=function(e,t){var n,i,s,o,a;if(bg(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():CB(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};gt.prototype.off=gt.prototype.removeListener;gt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function KA(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?PB(i):ZA(i,i.length)}gt.prototype.listeners=function(e){return KA(this,e,!0)};gt.prototype.rawListeners=function(e){return KA(this,e,!1)};gt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):QA.call(r,e)};gt.prototype.listenerCount=QA;function QA(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}gt.prototype.eventNames=function(){return this._eventsCount>0?Fp(this._events):[]};function ZA(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function CB(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function PB(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function AB(r,e){return new Promise(function(t,n){function i(o){r.removeListener(e,s),n(o)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}JA(r,e,s,{once:!0}),e!=="error"&&kB(r,i,{once:!0})})}function kB(r,e,t){typeof r.on=="function"&&JA(r,"error",e,t)}function JA(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var IB=F_.exports,El=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(El||{}),e2=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(e2||{}),d1=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(d1||{}),Ie=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Ie||{}),Oi=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Oi||{}),de=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(de||{}),Ou=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(Ou||{}),Se=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Se||{}),_e=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(_e||{}),Ni=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Ni||{}),ci=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(ci||{}),di=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(di||{}),Vr=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Vr||{}),Ts=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Ts||{}),B_=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(B_||{}),oi=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(oi||{}),cr=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(cr||{}),nr=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(nr||{}),Ms=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Ms||{});const MB={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},xe={ADAPTER:MB,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Pv=/iPhone/i,BT=/iPod/i,LT=/iPad/i,DT=/\biOS-universal(?:.+)Mac\b/i,Av=/\bAndroid(?:.+)Mobile\b/i,UT=/Android/i,Wl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,kf=/Silk/i,qs=/Windows Phone/i,jT=/\bWindows(?:.+)ARM\b/i,XT=/BlackBerry/i,HT=/BB10/i,$T=/Opera Mini/i,zT=/\b(CriOS|Chrome)(?:.+)Mobile/i,YT=/Mobile(?:.+)Firefox\b/i,GT=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function RB(r){return function(e){return e.test(r)}}function WT(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=RB(t),s={apple:{phone:i(Pv)&&!i(qs),ipod:i(BT),tablet:!i(Pv)&&(i(LT)||GT(e))&&!i(qs),universal:i(DT),device:(i(Pv)||i(BT)||i(LT)||i(DT)||GT(e))&&!i(qs)},amazon:{phone:i(Wl),tablet:!i(Wl)&&i(kf),device:i(Wl)||i(kf)},android:{phone:!i(qs)&&i(Wl)||!i(qs)&&i(Av),tablet:!i(qs)&&!i(Wl)&&!i(Av)&&(i(kf)||i(UT)),device:!i(qs)&&(i(Wl)||i(kf)||i(Av)||i(UT))||i(/\bokhttp\b/i)},windows:{phone:i(qs),tablet:i(jT),device:i(qs)||i(jT)},other:{blackberry:i(XT),blackberry10:i(HT),opera:i($T),firefox:i(YT),chrome:i(zT),device:i(XT)||i(HT)||i($T)||i(YT)||i(zT)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const OB=WT.default??WT,ai=OB(globalThis.navigator);xe.RETINA_PREFIX=/@([0-9\.]+)x/;xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var t2={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new i(h,c||l,d),g=t?t+u:u;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],f]:l._events[g].push(f):(l._events[g]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)e.call(h,c)&&u.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=t?t+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,g=new Array(f);d<f;d++)g[d]=c[d].fn;return g},a.prototype.listenerCount=function(u){var h=t?t+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,d,f,g){var v=t?t+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,b,_;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,c),!0;case 4:return x.fn.call(x.context,h,c,d),!0;case 5:return x.fn.call(x.context,h,c,d,f),!0;case 6:return x.fn.call(x.context,h,c,d,f,g),!0}for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];x.fn.apply(x.context,b)}else{var S=x.length,I;for(_=0;_<S;_++)switch(x[_].once&&this.removeListener(u,x[_].fn,void 0,!0),y){case 1:x[_].fn.call(x[_].context);break;case 2:x[_].fn.call(x[_].context,h);break;case 3:x[_].fn.call(x[_].context,h,c);break;case 4:x[_].fn.call(x[_].context,h,c,d);break;default:if(!b)for(I=1,b=new Array(y-1);I<y;I++)b[I-1]=arguments[I];x[_].fn.apply(x[_].context,b)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,d){var f=t?t+u:u;if(!this._events[f])return this;if(!h)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===h&&(!d||g.once)&&(!c||g.context===c)&&o(this,f);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==h||d&&!g[v].once||c&&g[v].context!==c)&&x.push(g[v]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=t?t+u:u,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(t2);var NB=t2.exports;const dd=ud(NB);var L_={exports:{}};L_.exports=Sg;L_.exports.default=Sg;function Sg(r,e,t){t=t||2;var n=e&&e.length,i=n?e[0]*t:r.length,s=r2(r,0,i,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,d,f;if(n&&(s=UB(r,e,s,t)),r.length>80*t){a=u=r[0],l=h=r[1];for(var g=t;g<i;g+=t)c=r[g],d=r[g+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return Lh(s,o,t,a,l,f,0),o}function r2(r,e,t,n,i){var s,o;if(i===m1(r,e,t,n)>0)for(s=e;s<t;s+=n)o=VT(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=VT(s,r[s],r[s+1],o);return o&&Tg(o,o.next)&&(Uh(o),o=o.next),o}function pl(r,e){if(!r)return r;e||(e=r);var t=r,n;do if(n=!1,!t.steiner&&(Tg(t,t.next)||jt(t.prev,t,t.next)===0)){if(Uh(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Lh(r,e,t,n,i,s,o){if(r){!o&&s&&zB(r,n,i,s);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,s?BB(r,n,i,s):FB(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),Uh(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=LB(pl(r),e,t),Lh(r,e,t,n,i,s,2)):o===2&&DB(r,e,t,n,i,s):Lh(pl(r),e,t,n,i,s,1);break}}}}function FB(r){var e=r.prev,t=r,n=r.next;if(jt(e,t,n)>=0)return!1;for(var i=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,h=i<s?i<o?i:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,g=n.next;g!==e;){if(g.x>=h&&g.x<=d&&g.y>=c&&g.y<=f&&cu(i,a,s,l,o,u,g.x,g.y)&&jt(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function BB(r,e,t,n){var i=r.prev,s=r,o=r.next;if(jt(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,h=i.y,c=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,g=h<c?h<d?h:d:c<d?c:d,v=a>l?a>u?a:u:l>u?l:u,x=h>c?h>d?h:d:c>d?c:d,y=f1(f,g,e,t,n),b=f1(v,x,e,t,n),_=r.prevZ,S=r.nextZ;_&&_.z>=y&&S&&S.z<=b;){if(_.x>=f&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&cu(a,h,l,c,u,d,_.x,_.y)&&jt(_.prev,_,_.next)>=0||(_=_.prevZ,S.x>=f&&S.x<=v&&S.y>=g&&S.y<=x&&S!==i&&S!==o&&cu(a,h,l,c,u,d,S.x,S.y)&&jt(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;_&&_.z>=y;){if(_.x>=f&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&cu(a,h,l,c,u,d,_.x,_.y)&&jt(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;S&&S.z<=b;){if(S.x>=f&&S.x<=v&&S.y>=g&&S.y<=x&&S!==i&&S!==o&&cu(a,h,l,c,u,d,S.x,S.y)&&jt(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function LB(r,e,t){var n=r;do{var i=n.prev,s=n.next.next;!Tg(i,s)&&n2(i,n,n.next,s)&&Dh(i,s)&&Dh(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Uh(n),Uh(n.next),n=r=s),n=n.next}while(n!==r);return pl(n)}function DB(r,e,t,n,i,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&WB(o,a)){var l=i2(o,a);o=pl(o,o.next),l=pl(l,l.next),Lh(o,e,t,n,i,s,0),Lh(l,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function UB(r,e,t,n){var i=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:r.length,u=r2(r,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(GB(u));for(i.sort(jB),s=0;s<i.length;s++)t=XB(i[s],t);return t}function jB(r,e){return r.x-e.x}function XB(r,e){var t=HB(r,e);if(!t)return e;var n=i2(t,r);return pl(n,n.next),pl(t,t.next)}function HB(r,e){var t=e,n=r.x,i=r.y,s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===n))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,d;t=o;do n>=t.x&&t.x>=u&&n!==t.x&&cu(i<h?n:s,i,u,h,i<h?s:n,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(n-t.x),Dh(t,r)&&(d<c||d===c&&(t.x>o.x||t.x===o.x&&$B(o,t)))&&(o=t,c=d)),t=t.next;while(t!==l);return o}function $B(r,e){return jt(r.prev,r,e.prev)<0&&jt(e.next,r,r.next)<0}function zB(r,e,t,n){var i=r;do i.z===0&&(i.z=f1(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,YB(i)}function YB(r){var e,t,n,i,s,o,a,l,u=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,u*=2}while(o>1);return r}function f1(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function GB(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function cu(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function WB(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!VB(r,e)&&(Dh(r,e)&&Dh(e,r)&&qB(r,e)&&(jt(r.prev,r,e.prev)||jt(r,e.prev,e))||Tg(r,e)&&jt(r.prev,r,r.next)>0&&jt(e.prev,e,e.next)>0)}function jt(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Tg(r,e){return r.x===e.x&&r.y===e.y}function n2(r,e,t,n){var i=Mf(jt(r,e,t)),s=Mf(jt(r,e,n)),o=Mf(jt(t,n,r)),a=Mf(jt(t,n,e));return!!(i!==s&&o!==a||i===0&&If(r,t,e)||s===0&&If(r,n,e)||o===0&&If(t,r,n)||a===0&&If(t,e,n))}function If(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function Mf(r){return r>0?1:r<0?-1:0}function VB(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&n2(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Dh(r,e){return jt(r.prev,r,r.next)<0?jt(r,e,r.next)>=0&&jt(r,r.prev,e)>=0:jt(r,e,r.prev)<0||jt(r,r.next,e)<0}function qB(r,e){var t=r,n=!1,i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function i2(r,e){var t=new p1(r.i,r.x,r.y),n=new p1(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function VT(r,e,t,n){var i=new p1(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Uh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function p1(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Sg.deviation=function(r,e,t,n){var i=e&&e.length,s=i?e[0]*t:r.length,o=Math.abs(m1(r,0,s,t));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,h=a<l-1?e[a+1]*t:r.length;o-=Math.abs(m1(r,u,h,t))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,f=n[a+1]*t,g=n[a+2]*t;c+=Math.abs((r[d]-r[g])*(r[f+1]-r[d+1])-(r[d]-r[f])*(r[g+1]-r[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function m1(r,e,t,n){for(var i=0,s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}Sg.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,i=0;i<r.length;i++){for(var s=0;s<r[i].length;s++)for(var o=0;o<e;o++)t.vertices.push(r[i][s][o]);i>0&&(n+=r[i-1].length,t.holes.push(n))}return t};var KB=L_.exports;const QB=ud(KB);var lm={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */lm.exports;(function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof ao=="object"&&ao;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,l=36,u=1,h=26,c=38,d=700,f=72,g=128,v="-",x=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=l-u,I=Math.floor,A=String.fromCharCode,k;function M($){throw new RangeError(_[$])}function O($,W){for(var Z=$.length,se=[];Z--;)se[Z]=W($[Z]);return se}function L($,W){var Z=$.split("@"),se="";Z.length>1&&(se=Z[0]+"@",$=Z[1]),$=$.replace(b,".");var ae=$.split("."),ye=O(ae,W).join(".");return se+ye}function D($){for(var W=[],Z=0,se=$.length,ae,ye;Z<se;)ae=$.charCodeAt(Z++),ae>=55296&&ae<=56319&&Z<se?(ye=$.charCodeAt(Z++),(ye&64512)==56320?W.push(((ae&1023)<<10)+(ye&1023)+65536):(W.push(ae),Z--)):W.push(ae);return W}function j($){return O($,function(W){var Z="";return W>65535&&(W-=65536,Z+=A(W>>>10&1023|55296),W=56320|W&1023),Z+=A(W),Z}).join("")}function F($){return $-48<10?$-22:$-65<26?$-65:$-97<26?$-97:l}function B($,W){return $+22+75*($<26)-((W!=0)<<5)}function X($,W,Z){var se=0;for($=Z?I($/d):$>>1,$+=I($/W);$>S*h>>1;se+=l)$=I($/S);return I(se+(S+1)*$/($+c))}function V($){var W=[],Z=$.length,se,ae=0,ye=g,Oe=f,Be,ze,Ve,$e,Le,ct,Je,Pr,Dr;for(Be=$.lastIndexOf(v),Be<0&&(Be=0),ze=0;ze<Be;++ze)$.charCodeAt(ze)>=128&&M("not-basic"),W.push($.charCodeAt(ze));for(Ve=Be>0?Be+1:0;Ve<Z;){for($e=ae,Le=1,ct=l;Ve>=Z&&M("invalid-input"),Je=F($.charCodeAt(Ve++)),(Je>=l||Je>I((a-ae)/Le))&&M("overflow"),ae+=Je*Le,Pr=ct<=Oe?u:ct>=Oe+h?h:ct-Oe,!(Je<Pr);ct+=l)Dr=l-Pr,Le>I(a/Dr)&&M("overflow"),Le*=Dr;se=W.length+1,Oe=X(ae-$e,se,$e==0),I(ae/se)>a-ye&&M("overflow"),ye+=I(ae/se),ae%=se,W.splice(ae++,0,ye)}return j(W)}function Q($){var W,Z,se,ae,ye,Oe,Be,ze,Ve,$e,Le,ct=[],Je,Pr,Dr,rs;for($=D($),Je=$.length,W=g,Z=0,ye=f,Oe=0;Oe<Je;++Oe)Le=$[Oe],Le<128&&ct.push(A(Le));for(se=ae=ct.length,ae&&ct.push(v);se<Je;){for(Be=a,Oe=0;Oe<Je;++Oe)Le=$[Oe],Le>=W&&Le<Be&&(Be=Le);for(Pr=se+1,Be-W>I((a-Z)/Pr)&&M("overflow"),Z+=(Be-W)*Pr,W=Be,Oe=0;Oe<Je;++Oe)if(Le=$[Oe],Le<W&&++Z>a&&M("overflow"),Le==W){for(ze=Z,Ve=l;$e=Ve<=ye?u:Ve>=ye+h?h:Ve-ye,!(ze<$e);Ve+=l)rs=ze-$e,Dr=l-$e,ct.push(A(B($e+rs%Dr,0))),ze=I(rs/Dr);ct.push(A(B(ze,0))),ye=X(Z,Pr,se==ae),Z=0,++se}++Z,++W}return ct.join("")}function H($){return L($,function(W){return x.test(W)?V(W.slice(4).toLowerCase()):W})}function G($){return L($,function(W){return y.test(W)?"xn--"+Q(W):W})}if(o={version:"1.4.1",ucs2:{decode:D,encode:j},decode:V,encode:Q,toASCII:G,toUnicode:H},n&&i)if(r.exports==n)i.exports=o;else for(k in o)o.hasOwnProperty(k)&&(n[k]=o[k]);else t.punycode=o})(ao)})(lm,lm.exports);var ZB=lm.exports,JB=Error,eL=EvalError,tL=RangeError,rL=ReferenceError,s2=SyntaxError,fd=TypeError,nL=URIError,iL=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0},qT=typeof Symbol<"u"&&Symbol,sL=iL,oL=function(){return typeof qT!="function"||typeof Symbol!="function"||typeof qT("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:sL()},kv={__proto__:null,foo:{}},aL=Object,lL=function(){return{__proto__:kv}.foo===kv.foo&&!(kv instanceof aL)},uL="Function.prototype.bind called on incompatible ",cL=Object.prototype.toString,hL=Math.max,dL="[object Function]",KT=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<t.length;s+=1)n[s+e.length]=t[s];return n},fL=function(e,t){for(var n=[],i=t||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},pL=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},mL=function(e){var t=this;if(typeof t!="function"||cL.apply(t)!==dL)throw new TypeError(uL+t);for(var n=fL(arguments,1),i,s=function(){if(this instanceof i){var h=t.apply(this,KT(n,arguments));return Object(h)===h?h:this}return t.apply(e,KT(n,arguments))},o=hL(0,t.length-n.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+pL(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var u=function(){};u.prototype=t.prototype,i.prototype=new u,u.prototype=null}return i},gL=mL,D_=Function.prototype.bind||gL,vL=Function.prototype.call,yL=Object.prototype.hasOwnProperty,xL=D_,_L=xL.call(vL,yL),Qe,wL=JB,bL=eL,SL=tL,TL=rL,Ju=s2,Nu=fd,EL=nL,o2=Function,Iv=function(r){try{return o2('"use strict"; return ('+r+").constructor;")()}catch{}},sl=Object.getOwnPropertyDescriptor;if(sl)try{sl({},"")}catch{sl=null}var Mv=function(){throw new Nu},CL=sl?function(){try{return arguments.callee,Mv}catch{try{return sl(arguments,"callee").get}catch{return Mv}}}():Mv,Vl=oL(),PL=lL(),br=Object.getPrototypeOf||(PL?function(r){return r.__proto__}:null),tu={},AL=typeof Uint8Array>"u"||!br?Qe:br(Uint8Array),ol={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Qe:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Qe:ArrayBuffer,"%ArrayIteratorPrototype%":Vl&&br?br([][Symbol.iterator]()):Qe,"%AsyncFromSyncIteratorPrototype%":Qe,"%AsyncFunction%":tu,"%AsyncGenerator%":tu,"%AsyncGeneratorFunction%":tu,"%AsyncIteratorPrototype%":tu,"%Atomics%":typeof Atomics>"u"?Qe:Atomics,"%BigInt%":typeof BigInt>"u"?Qe:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Qe:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Qe:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Qe:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":wL,"%eval%":eval,"%EvalError%":bL,"%Float32Array%":typeof Float32Array>"u"?Qe:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Qe:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Qe:FinalizationRegistry,"%Function%":o2,"%GeneratorFunction%":tu,"%Int8Array%":typeof Int8Array>"u"?Qe:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Qe:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Qe:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Vl&&br?br(br([][Symbol.iterator]())):Qe,"%JSON%":typeof JSON=="object"?JSON:Qe,"%Map%":typeof Map>"u"?Qe:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Vl||!br?Qe:br(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Qe:Promise,"%Proxy%":typeof Proxy>"u"?Qe:Proxy,"%RangeError%":SL,"%ReferenceError%":TL,"%Reflect%":typeof Reflect>"u"?Qe:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Qe:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Vl||!br?Qe:br(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Qe:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Vl&&br?br(""[Symbol.iterator]()):Qe,"%Symbol%":Vl?Symbol:Qe,"%SyntaxError%":Ju,"%ThrowTypeError%":CL,"%TypedArray%":AL,"%TypeError%":Nu,"%Uint8Array%":typeof Uint8Array>"u"?Qe:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Qe:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Qe:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Qe:Uint32Array,"%URIError%":EL,"%WeakMap%":typeof WeakMap>"u"?Qe:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Qe:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Qe:WeakSet};if(br)try{null.error}catch(r){var kL=br(br(r));ol["%Error.prototype%"]=kL}var IL=function r(e){var t;if(e==="%AsyncFunction%")t=Iv("async function () {}");else if(e==="%GeneratorFunction%")t=Iv("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Iv("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&br&&(t=br(i.prototype))}return ol[e]=t,t},QT={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},pd=D_,um=_L,ML=pd.call(Function.call,Array.prototype.concat),RL=pd.call(Function.apply,Array.prototype.splice),ZT=pd.call(Function.call,String.prototype.replace),cm=pd.call(Function.call,String.prototype.slice),OL=pd.call(Function.call,RegExp.prototype.exec),NL=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,FL=/\\(\\)?/g,BL=function(e){var t=cm(e,0,1),n=cm(e,-1);if(t==="%"&&n!=="%")throw new Ju("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Ju("invalid intrinsic syntax, expected opening `%`");var i=[];return ZT(e,NL,function(s,o,a,l){i[i.length]=a?ZT(l,FL,"$1"):o||s}),i},LL=function(e,t){var n=e,i;if(um(QT,n)&&(i=QT[n],n="%"+i[0]+"%"),um(ol,n)){var s=ol[n];if(s===tu&&(s=IL(n)),typeof s>"u"&&!t)throw new Nu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Ju("intrinsic "+e+" does not exist!")},xc=function(e,t){if(typeof e!="string"||e.length===0)throw new Nu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Nu('"allowMissing" argument must be a boolean');if(OL(/^%?[^%]*%?$/,e)===null)throw new Ju("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=BL(e),i=n.length>0?n[0]:"",s=LL("%"+i+"%",t),o=s.name,a=s.value,l=!1,u=s.alias;u&&(i=u[0],RL(n,ML([0,1],u)));for(var h=1,c=!0;h<n.length;h+=1){var d=n[h],f=cm(d,0,1),g=cm(d,-1);if((f==='"'||f==="'"||f==="`"||g==='"'||g==="'"||g==="`")&&f!==g)throw new Ju("property names with quotes must have matching quotes");if((d==="constructor"||!c)&&(l=!0),i+="."+d,o="%"+i+"%",um(ol,o))a=ol[o];else if(a!=null){if(!(d in a)){if(!t)throw new Nu("base intrinsic for "+e+" exists, but the property is not available.");return}if(sl&&h+1>=n.length){var v=sl(a,d);c=!!v,c&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[d]}else c=um(a,d),a=a[d];c&&!l&&(ol[o]=a)}}return a},a2={exports:{}},Rv,JT;function U_(){if(JT)return Rv;JT=1;var r=xc,e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Rv=e,Rv}var DL=xc,Bp=DL("%Object.getOwnPropertyDescriptor%",!0);if(Bp)try{Bp([],"length")}catch{Bp=null}var l2=Bp,eE=U_(),UL=s2,ql=fd,tE=l2,jL=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new ql("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new ql("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new ql("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new ql("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new ql("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new ql("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!tE&&tE(e,t);if(eE)eE(e,t,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[t]=n;else throw new UL("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},g1=U_(),u2=function(){return!!g1};u2.hasArrayLengthDefineBug=function(){if(!g1)return null;try{return g1([],"length",{value:1}).length!==1}catch{return!0}};var XL=u2,HL=xc,rE=jL,$L=XL(),nE=l2,iE=fd,zL=HL("%Math.floor%"),YL=function(e,t){if(typeof e!="function")throw new iE("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||zL(t)!==t)throw new iE("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&nE){var o=nE(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&($L?rE(e,"length",t,!0,!0):rE(e,"length",t)),e};(function(r){var e=D_,t=xc,n=YL,i=fd,s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),l=U_(),u=t("%Math.max%");r.exports=function(d){if(typeof d!="function")throw new i("a function is required");var f=a(e,o,arguments);return n(f,1+u(0,d.length-(arguments.length-1)),!0)};var h=function(){return a(e,s,arguments)};l?l(r.exports,"apply",{value:h}):r.exports.apply=h})(a2);var GL=a2.exports,c2=xc,h2=GL,WL=h2(c2("String.prototype.indexOf")),VL=function(e,t){var n=c2(e,!!t);return typeof n=="function"&&WL(e,".prototype.")>-1?h2(n):n};const qL={},KL=Object.freeze(Object.defineProperty({__proto__:null,default:qL},Symbol.toStringTag,{value:"Module"})),QL=yA(KL);var j_=typeof Map=="function"&&Map.prototype,Ov=Object.getOwnPropertyDescriptor&&j_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,hm=j_&&Ov&&typeof Ov.get=="function"?Ov.get:null,sE=j_&&Map.prototype.forEach,X_=typeof Set=="function"&&Set.prototype,Nv=Object.getOwnPropertyDescriptor&&X_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,dm=X_&&Nv&&typeof Nv.get=="function"?Nv.get:null,oE=X_&&Set.prototype.forEach,ZL=typeof WeakMap=="function"&&WeakMap.prototype,yh=ZL?WeakMap.prototype.has:null,JL=typeof WeakSet=="function"&&WeakSet.prototype,xh=JL?WeakSet.prototype.has:null,eD=typeof WeakRef=="function"&&WeakRef.prototype,aE=eD?WeakRef.prototype.deref:null,tD=Boolean.prototype.valueOf,rD=Object.prototype.toString,nD=Function.prototype.toString,iD=String.prototype.match,H_=String.prototype.slice,ia=String.prototype.replace,sD=String.prototype.toUpperCase,lE=String.prototype.toLowerCase,d2=RegExp.prototype.test,uE=Array.prototype.concat,Es=Array.prototype.join,oD=Array.prototype.slice,cE=Math.floor,v1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Fv=Object.getOwnPropertySymbols,y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ec=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Qr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ec||!0)?Symbol.toStringTag:null,f2=Object.prototype.propertyIsEnumerable,hE=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function dE(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||d2.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-cE(-r):cE(r);if(n!==r){var i=String(n),s=H_.call(e,i.length+1);return ia.call(i,t,"$&_")+"."+ia.call(ia.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ia.call(e,t,"$&_")}var x1=QL,fE=x1.custom,pE=m2(fE)?fE:null,aD=function r(e,t,n,i){var s=t||{};if(Vo(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Vo(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Vo(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Vo(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Vo(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return v2(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?dE(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?dE(e,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return _1(e)?"[Array]":"[Object]";var c=ED(s,n);if(typeof i>"u")i=[];else if(g2(i,e)>=0)return"[Circular]";function d(F,B,X){if(B&&(i=oD.call(i),i.push(B)),X){var V={depth:s.depth};return Vo(s,"quoteStyle")&&(V.quoteStyle=s.quoteStyle),r(F,V,n+1,i)}return r(F,s,n+1,i)}if(typeof e=="function"&&!mE(e)){var f=gD(e),g=Rf(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(g.length>0?" { "+Es.call(g,", ")+" }":"")}if(m2(e)){var v=ec?ia.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):y1.call(e);return typeof e=="object"&&!ec?Yc(v):v}if(bD(e)){for(var x="<"+lE.call(String(e.nodeName)),y=e.attributes||[],b=0;b<y.length;b++)x+=" "+y[b].name+"="+p2(lD(y[b].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+lE.call(String(e.nodeName))+">",x}if(_1(e)){if(e.length===0)return"[]";var _=Rf(e,d);return c&&!TD(_)?"["+w1(_,c)+"]":"[ "+Es.call(_,", ")+" ]"}if(cD(e)){var S=Rf(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!f2.call(e,"cause")?"{ ["+String(e)+"] "+Es.call(uE.call("[cause]: "+d(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Es.call(S,", ")+" }"}if(typeof e=="object"&&o){if(pE&&typeof e[pE]=="function"&&x1)return x1(e,{depth:h-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(vD(e)){var I=[];return sE&&sE.call(e,function(F,B){I.push(d(B,e,!0)+" => "+d(F,e))}),gE("Map",hm.call(e),I,c)}if(_D(e)){var A=[];return oE&&oE.call(e,function(F){A.push(d(F,e))}),gE("Set",dm.call(e),A,c)}if(yD(e))return Bv("WeakMap");if(wD(e))return Bv("WeakSet");if(xD(e))return Bv("WeakRef");if(dD(e))return Yc(d(Number(e)));if(pD(e))return Yc(d(v1.call(e)));if(fD(e))return Yc(tD.call(e));if(hD(e))return Yc(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===ao)return"{ [object globalThis] }";if(!uD(e)&&!mE(e)){var k=Rf(e,d),M=hE?hE(e)===Object.prototype:e instanceof Object||e.constructor===Object,O=e instanceof Object?"":"null prototype",L=!M&&Qr&&Object(e)===e&&Qr in e?H_.call(Aa(e),8,-1):O?"Object":"",D=M||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",j=D+(L||O?"["+Es.call(uE.call([],L||[],O||[]),": ")+"] ":"");return k.length===0?j+"{}":c?j+"{"+w1(k,c)+"}":j+"{ "+Es.call(k,", ")+" }"}return String(e)};function p2(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function lD(r){return ia.call(String(r),/"/g,"&quot;")}function _1(r){return Aa(r)==="[object Array]"&&(!Qr||!(typeof r=="object"&&Qr in r))}function uD(r){return Aa(r)==="[object Date]"&&(!Qr||!(typeof r=="object"&&Qr in r))}function mE(r){return Aa(r)==="[object RegExp]"&&(!Qr||!(typeof r=="object"&&Qr in r))}function cD(r){return Aa(r)==="[object Error]"&&(!Qr||!(typeof r=="object"&&Qr in r))}function hD(r){return Aa(r)==="[object String]"&&(!Qr||!(typeof r=="object"&&Qr in r))}function dD(r){return Aa(r)==="[object Number]"&&(!Qr||!(typeof r=="object"&&Qr in r))}function fD(r){return Aa(r)==="[object Boolean]"&&(!Qr||!(typeof r=="object"&&Qr in r))}function m2(r){if(ec)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!y1)return!1;try{return y1.call(r),!0}catch{}return!1}function pD(r){if(!r||typeof r!="object"||!v1)return!1;try{return v1.call(r),!0}catch{}return!1}var mD=Object.prototype.hasOwnProperty||function(r){return r in this};function Vo(r,e){return mD.call(r,e)}function Aa(r){return rD.call(r)}function gD(r){if(r.name)return r.name;var e=iD.call(nD.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function g2(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function vD(r){if(!hm||!r||typeof r!="object")return!1;try{hm.call(r);try{dm.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function yD(r){if(!yh||!r||typeof r!="object")return!1;try{yh.call(r,yh);try{xh.call(r,xh)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function xD(r){if(!aE||!r||typeof r!="object")return!1;try{return aE.call(r),!0}catch{}return!1}function _D(r){if(!dm||!r||typeof r!="object")return!1;try{dm.call(r);try{hm.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function wD(r){if(!xh||!r||typeof r!="object")return!1;try{xh.call(r,xh);try{yh.call(r,yh)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function bD(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function v2(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return v2(H_.call(r,0,e.maxStringLength),e)+n}var i=ia.call(ia.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,SD);return p2(i,"single",e)}function SD(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+sD.call(e.toString(16))}function Yc(r){return"Object("+r+")"}function Bv(r){return r+" { ? }"}function gE(r,e,t,n){var i=n?w1(t,n):Es.call(t,", ");return r+" ("+e+") {"+i+"}"}function TD(r){for(var e=0;e<r.length;e++)if(g2(r[e],`
`)>=0)return!1;return!0}function ED(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=Es.call(Array(r.indent+1)," ");else return null;return{base:t,prev:Es.call(Array(e+1),t)}}function w1(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+Es.call(r,","+t)+`
`+e.prev}function Rf(r,e){var t=_1(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=Vo(r,i)?e(r[i],r):""}var s=typeof Fv=="function"?Fv(r):[],o;if(ec){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in r)Vo(r,l)&&(t&&String(Number(l))===l&&l<r.length||ec&&o["$"+l]instanceof Symbol||(d2.call(/[^\w$]/,l)?n.push(e(l,r)+": "+e(r[l],r)):n.push(l+": "+e(r[l],r))));if(typeof Fv=="function")for(var u=0;u<s.length;u++)f2.call(r,s[u])&&n.push("["+e(s[u])+"]: "+e(r[s[u]],r));return n}var y2=xc,_c=VL,CD=aD,PD=fd,Of=y2("%WeakMap%",!0),Nf=y2("%Map%",!0),AD=_c("WeakMap.prototype.get",!0),kD=_c("WeakMap.prototype.set",!0),ID=_c("WeakMap.prototype.has",!0),MD=_c("Map.prototype.get",!0),RD=_c("Map.prototype.set",!0),OD=_c("Map.prototype.has",!0),$_=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},ND=function(r,e){var t=$_(r,e);return t&&t.value},FD=function(r,e,t){var n=$_(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},BD=function(r,e){return!!$_(r,e)},LD=function(){var e,t,n,i={assert:function(s){if(!i.has(s))throw new PD("Side channel does not contain "+CD(s))},get:function(s){if(Of&&s&&(typeof s=="object"||typeof s=="function")){if(e)return AD(e,s)}else if(Nf){if(t)return MD(t,s)}else if(n)return ND(n,s)},has:function(s){if(Of&&s&&(typeof s=="object"||typeof s=="function")){if(e)return ID(e,s)}else if(Nf){if(t)return OD(t,s)}else if(n)return BD(n,s);return!1},set:function(s,o){Of&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Of),kD(e,s,o)):Nf?(t||(t=new Nf),RD(t,s,o)):(n||(n={key:{},next:null}),FD(n,s,o))}};return i},DD=String.prototype.replace,UD=/%20/g,Lv={RFC1738:"RFC1738",RFC3986:"RFC3986"},z_={default:Lv.RFC3986,formatters:{RFC1738:function(r){return DD.call(r,UD,"+")},RFC3986:function(r){return String(r)}},RFC1738:Lv.RFC1738,RFC3986:Lv.RFC3986},jD=z_,Dv=Object.prototype.hasOwnProperty,Ja=Array.isArray,fs=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),XD=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Ja(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);t.obj[t.prop]=i}}},x2=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},HD=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(Ja(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Dv.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return Ja(e)&&!Ja(t)&&(i=x2(e,n)),Ja(e)&&Ja(t)?(t.forEach(function(s,o){if(Dv.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=r(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return Dv.call(s,o)?s[o]=r(s[o],a,n):s[o]=a,s},i)},$D=function(e,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},e)},zD=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},YD=function(e,t,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var u=o.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===jD.RFC1738&&(u===40||u===41)){a+=o.charAt(l);continue}if(u<128){a=a+fs[u];continue}if(u<2048){a=a+(fs[192|u>>6]+fs[128|u&63]);continue}if(u<55296||u>=57344){a=a+(fs[224|u>>12]+fs[128|u>>6&63]+fs[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|o.charCodeAt(l)&1023),a+=fs[240|u>>18]+fs[128|u>>12&63]+fs[128|u>>6&63]+fs[128|u&63]}return a},GD=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var s=t[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(t.push({obj:o,prop:u}),n.push(h))}return XD(t),e},WD=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},VD=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},qD=function(e,t){return[].concat(e,t)},KD=function(e,t){if(Ja(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)},_2={arrayToObject:x2,assign:$D,combine:qD,compact:GD,decode:zD,encode:YD,isBuffer:VD,isRegExp:WD,maybeMap:KD,merge:HD},w2=LD,Lp=_2,_h=z_,QD=Object.prototype.hasOwnProperty,b2={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Ss=Array.isArray,ZD=Array.prototype.push,S2=function(r,e){ZD.apply(r,Ss(e)?e:[e])},JD=Date.prototype.toISOString,vE=_h.default,ur={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Lp.encode,encodeValuesOnly:!1,format:vE,formatter:_h.formatters[vE],indices:!1,serializeDate:function(e){return JD.call(e)},skipNulls:!1,strictNullHandling:!1},e5=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Uv={},t5=function r(e,t,n,i,s,o,a,l,u,h,c,d,f,g,v,x,y,b){for(var _=e,S=b,I=0,A=!1;(S=S.get(Uv))!==void 0&&!A;){var k=S.get(e);if(I+=1,typeof k<"u"){if(k===I)throw new RangeError("Cyclic object value");A=!0}typeof S.get(Uv)>"u"&&(I=0)}if(typeof h=="function"?_=h(t,_):_ instanceof Date?_=f(_):n==="comma"&&Ss(_)&&(_=Lp.maybeMap(_,function($){return $ instanceof Date?f($):$})),_===null){if(o)return u&&!x?u(t,ur.encoder,y,"key",g):t;_=""}if(e5(_)||Lp.isBuffer(_)){if(u){var M=x?t:u(t,ur.encoder,y,"key",g);return[v(M)+"="+v(u(_,ur.encoder,y,"value",g))]}return[v(t)+"="+v(String(_))]}var O=[];if(typeof _>"u")return O;var L;if(n==="comma"&&Ss(_))x&&u&&(_=Lp.maybeMap(_,u)),L=[{value:_.length>0?_.join(",")||null:void 0}];else if(Ss(h))L=h;else{var D=Object.keys(_);L=c?D.sort(c):D}var j=l?t.replace(/\./g,"%2E"):t,F=i&&Ss(_)&&_.length===1?j+"[]":j;if(s&&Ss(_)&&_.length===0)return F+"[]";for(var B=0;B<L.length;++B){var X=L[B],V=typeof X=="object"&&typeof X.value<"u"?X.value:_[X];if(!(a&&V===null)){var Q=d&&l?X.replace(/\./g,"%2E"):X,H=Ss(_)?typeof n=="function"?n(F,Q):F:F+(d?"."+Q:"["+Q+"]");b.set(e,I);var G=w2();G.set(Uv,b),S2(O,r(V,H,n,i,s,o,a,l,n==="comma"&&x&&Ss(_)?null:u,h,c,d,f,g,v,x,y,G))}}return O},r5=function(e){if(!e)return ur;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||ur.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=_h.default;if(typeof e.format<"u"){if(!QD.call(_h.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=_h.formatters[n],s=ur.filter;(typeof e.filter=="function"||Ss(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in b2?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=ur.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:ur.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:ur.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:ur.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ur.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?ur.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:ur.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:ur.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:ur.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:ur.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:ur.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:ur.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ur.strictNullHandling}},n5=function(r,e){var t=r,n=r5(e),i,s;typeof n.filter=="function"?(s=n.filter,t=s("",t)):Ss(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof t!="object"||t===null)return"";var a=b2[n.arrayFormat],l=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);for(var u=w2(),h=0;h<i.length;++h){var c=i[h];n.skipNulls&&t[c]===null||S2(o,t5(t[c],c,a,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var d=o.join(n.delimiter),f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""},tc=_2,b1=Object.prototype.hasOwnProperty,i5=Array.isArray,Qt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:tc.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s5=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},T2=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},o5="utf8=%26%2310003%3B",a5="utf8=%E2%9C%93",l5=function(e,t){var n={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,s),a=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===a5?u="utf-8":o[l]===o5&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],c=h.indexOf("]="),d=c===-1?h.indexOf("="):c+1,f,g;d===-1?(f=t.decoder(h,Qt.decoder,u,"key"),g=t.strictNullHandling?null:""):(f=t.decoder(h.slice(0,d),Qt.decoder,u,"key"),g=tc.maybeMap(T2(h.slice(d+1),t),function(x){return t.decoder(x,Qt.decoder,u,"value")})),g&&t.interpretNumericEntities&&u==="iso-8859-1"&&(g=s5(g)),h.indexOf("[]=")>-1&&(g=i5(g)?[g]:g);var v=b1.call(n,f);v&&t.duplicates==="combine"?n[f]=tc.combine(n[f],g):(!v||t.duplicates==="last")&&(n[f]=g)}return n},u5=function(r,e,t,n){for(var i=n?e:T2(e,t),s=r.length-1;s>=0;--s){var o,a=r[s];if(a==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=t.decodeDotInKeys?l.replace(/%2E/g,"."):l,h=parseInt(u,10);!t.parseArrays&&u===""?o={0:i}:!isNaN(h)&&a!==u&&String(h)===u&&h>=0&&t.parseArrays&&h<=t.arrayLimit?(o=[],o[h]=i):u!=="__proto__"&&(o[u]=i)}i=o}return i},c5=function(e,t,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!n.plainObjects&&b1.call(Object.prototype,u)&&!n.allowPrototypes)return;h.push(u)}for(var c=0;n.depth>0&&(l=a.exec(s))!==null&&c<n.depth;){if(c+=1,!n.plainObjects&&b1.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(l[1])}return l&&h.push("["+s.slice(l.index)+"]"),u5(h,t,n,i)}},h5=function(e){if(!e)return Qt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Qt.charset:e.charset,n=typeof e.duplicates>"u"?Qt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Qt.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Qt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Qt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Qt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Qt.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Qt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Qt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Qt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Qt.decoder,delimiter:typeof e.delimiter=="string"||tc.isRegExp(e.delimiter)?e.delimiter:Qt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Qt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Qt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Qt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Qt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Qt.strictNullHandling}},d5=function(r,e){var t=h5(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?l5(r,t):r,i=t.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=c5(a,n[a],t,typeof r=="string");i=tc.merge(i,l,t)}return t.allowSparse===!0?i:tc.compact(i)},f5=n5,p5=d5,m5=z_,g5={formats:m5,parse:p5,stringify:f5},v5=ZB;function mo(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var y5=/^([a-z0-9.+-]+:)/i,x5=/:[0-9]*$/,_5=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,w5=["<",">",'"',"`"," ","\r",`
`,"	"],b5=["{","}","|","\\","^","`"].concat(w5),S1=["'"].concat(b5),yE=["%","/","?",";","#"].concat(S1),xE=["/","?","#"],S5=255,_E=/^[+a-z0-9A-Z_-]{0,63}$/,T5=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,E5={javascript:!0,"javascript:":!0},T1={javascript:!0,"javascript:":!0},Fu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E1=g5;function C5(r,e,t){if(r&&typeof r=="object"&&r instanceof mo)return r;var n=new mo;return n.parse(r,e,t),n}mo.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",s=r.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(i);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var l=_5.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=E1.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=y5.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&T1[u])&&(a=a.substr(2),this.slashes=!0)}if(!T1[u]&&(c||u&&!Fu[u])){for(var d=-1,f=0;f<xE.length;f++){var g=a.indexOf(xE[f]);g!==-1&&(d===-1||g<d)&&(d=g)}var v,x;d===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",d),x!==-1&&(v=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(v)),d=-1;for(var f=0;f<yE.length;f++){var g=a.indexOf(yE[f]);g!==-1&&(d===-1||g<d)&&(d=g)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var b=this.hostname.split(/\./),f=0,_=b.length;f<_;f++){var S=b[f];if(S&&!S.match(_E)){for(var I="",A=0,k=S.length;A<k;A++)S.charCodeAt(A)>127?I+="x":I+=S[A];if(!I.match(_E)){var M=b.slice(0,f),O=b.slice(f+1),L=S.match(T5);L&&(M.push(L[1]),O.unshift(L[2])),O.length&&(a="/"+O.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>S5?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=v5.toASCII(this.hostname));var D=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+D,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!E5[h])for(var f=0,_=S1.length;f<_;f++){var F=S1[f];if(a.indexOf(F)!==-1){var B=encodeURIComponent(F);B===F&&(B=escape(F)),a=a.split(F).join(B)}}var X=a.indexOf("#");X!==-1&&(this.hash=a.substr(X),a=a.slice(0,X));var V=a.indexOf("?");if(V!==-1?(this.search=a.substr(V),this.query=a.substr(V+1),e&&(this.query=E1.parse(this.query)),a=a.slice(0,V)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Fu[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",Q=this.search||"";this.path=D+Q}return this.href=this.format(),this};mo.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=E1.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Fu[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+t+o+n};mo.prototype.resolve=function(r){return this.resolveObject(C5(r,!1,!0)).format()};mo.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new mo;e.parse(r,!1,!0),r=e}for(var t=new mo,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(t[l]=r[l])}return Fu[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Fu[r.protocol]){for(var u=Object.keys(r),h=0;h<u.length;h++){var c=u[h];t[c]=r[c]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!T1[r.protocol]){for(var _=(r.pathname||"").split("/");_.length&&!(r.host=_.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),t.pathname=_.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var g=t.pathname&&t.pathname.charAt(0)==="/",v=r.host||r.pathname&&r.pathname.charAt(0)==="/",x=v||g||t.host&&r.pathname,y=x,b=t.pathname&&t.pathname.split("/")||[],_=r.pathname&&r.pathname.split("/")||[],S=t.protocol&&!Fu[t.protocol];if(S&&(t.hostname="",t.port=null,t.host&&(b[0]===""?b[0]=t.host:b.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host=null),x=x&&(_[0]===""||b[0]==="")),v)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,b=_;else if(_.length)b||(b=[]),b.pop(),b=b.concat(_),t.search=r.search,t.query=r.query;else if(r.search!=null){if(S){t.host=b.shift(),t.hostname=t.host;var I=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;I&&(t.auth=I.shift(),t.hostname=I.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!b.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var A=b.slice(-1)[0],k=(t.host||r.host||b.length>1)&&(A==="."||A==="..")||A==="",M=0,O=b.length;O>=0;O--)A=b[O],A==="."?b.splice(O,1):A===".."?(b.splice(O,1),M++):M&&(b.splice(O,1),M--);if(!x&&!y)for(;M--;M)b.unshift("..");x&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),k&&b.join("/").substr(-1)!=="/"&&b.push("");var L=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(S){t.hostname=L?"":b.length?b.shift():"",t.host=t.hostname;var I=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;I&&(t.auth=I.shift(),t.hostname=I.shift(),t.host=t.hostname)}return x=x||t.host&&b.length,x&&!L&&b.unshift(""),b.length>0?t.pathname=b.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};mo.prototype.parseHost=function(){var r=this.host,e=x5.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};const wE={};function qe(r,e,t=3){if(wE[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),wE[e]=!0}function bi(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Gc(r){return r.split("?")[0].split("#")[0]}function P5(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A5(r,e,t){return r.replace(new RegExp(P5(e),"g"),t)}function k5(r,e){let t="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+=`/${r.slice(i+1,a)}`:t=r.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const Vt={toPosix(r){return A5(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){bi(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(bi(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const n=Gc(this.toPosix(e??xe.ADAPTER.getBaseUrl())),i=Gc(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?Vt.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(bi(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const n=r.endsWith("/");return r=k5(r,!1),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return bi(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];if(bi(n),n.length>0)if(e===void 0)e=n;else{const i=r[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(bi(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let n=-1,i=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?t?"/":this.isUrl(o)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname(r){bi(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){bi(r),e&&bi(e),r=Gc(this.toPosix(r));let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const l=r.charCodeAt(s);if(l===47){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){bi(r),r=Gc(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){bi(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Gc(this.toPosix(r));let t=r.charCodeAt(0);const n=this.isAbsolute(r);let i;e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,u=r.length-1,h=0;for(;u>=i;--u){if(t=r.charCodeAt(u),t===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),t===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(o,s),e.base=r.slice(o,a)),e.ext=r.slice(s,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let jv;async function I5(){return jv??(jv=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return Vr.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return Vr.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,i),r.deleteFramebuffer(n),r.deleteTexture(t),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?Vr.PMA:Vr.UNPACK})()),jv}let Xv;function E2(){return typeof Xv>"u"&&(Xv=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!xe.ADAPTER.getWebGLRenderingContext())return!1;const t=xe.ADAPTER.createCanvas();let n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Xv}var M5={grad:.9,turn:360,rad:360/(2*Math.PI)},Ks=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},Sr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},li=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},C2=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},bE=function(r){return{r:li(r.r,0,255),g:li(r.g,0,255),b:li(r.b,0,255),a:li(r.a)}},Hv=function(r){return{r:Sr(r.r),g:Sr(r.g),b:Sr(r.b),a:Sr(r.a,3)}},R5=/^#([0-9a-f]{3,8})$/i,Ff=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},P2=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},A2=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),l=n*(1-(1-e+s)*t),u=s%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u],a:i}},SE=function(r){return{h:C2(r.h),s:li(r.s,0,100),l:li(r.l,0,100),a:li(r.a)}},TE=function(r){return{h:Sr(r.h),s:Sr(r.s),l:Sr(r.l),a:Sr(r.a,3)}},EE=function(r){return A2((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},wh=function(r){return{h:(e=P2(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},O5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,N5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,F5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,B5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,C1={string:[[function(r){var e=R5.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?Sr(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?Sr(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=F5.exec(r)||B5.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:bE({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=O5.exec(r)||N5.exec(r);if(!e)return null;var t,n,i=SE({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(M5[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return EE(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return Ks(e)&&Ks(t)&&Ks(n)?bE({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!Ks(e)||!Ks(t)||!Ks(n))return null;var o=SE({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return EE(o)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!Ks(e)||!Ks(t)||!Ks(n))return null;var o=function(a){return{h:C2(a.h),s:li(a.s,0,100),v:li(a.v,0,100),a:li(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return A2(o)},"hsv"]]},CE=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},L5=function(r){return typeof r=="string"?CE(r.trim(),C1.string):typeof r=="object"&&r!==null?CE(r,C1.object):[null,void 0]},$v=function(r,e){var t=wh(r);return{h:t.h,s:li(t.s+100*e,0,100),l:t.l,a:t.a}},zv=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},PE=function(r,e){var t=wh(r);return{h:t.h,s:t.s,l:li(t.l+100*e,0,100),a:t.a}},P1=function(){function r(e){this.parsed=L5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return Sr(zv(this.rgba),2)},r.prototype.isDark=function(){return zv(this.rgba)<.5},r.prototype.isLight=function(){return zv(this.rgba)>=.5},r.prototype.toHex=function(){return e=Hv(this.rgba),t=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Ff(Sr(255*s)):"","#"+Ff(t)+Ff(n)+Ff(i)+o;var e,t,n,i,s,o},r.prototype.toRgb=function(){return Hv(this.rgba)},r.prototype.toRgbString=function(){return e=Hv(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return TE(wh(this.rgba))},r.prototype.toHslString=function(){return e=TE(wh(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=P2(this.rgba),{h:Sr(e.h),s:Sr(e.s),v:Sr(e.v),a:Sr(e.a,3)};var e},r.prototype.invert=function(){return ms({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),ms($v(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),ms($v(this.rgba,-e))},r.prototype.grayscale=function(){return ms($v(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),ms(PE(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),ms(PE(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?ms({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Sr(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=wh(this.rgba);return typeof e=="number"?ms({h:e,s:t.s,l:t.l,a:t.a}):Sr(t.h)},r.prototype.isEqual=function(e){return this.toHex()===ms(e).toHex()},r}(),ms=function(r){return r instanceof P1?r:new P1(r)},AE=[],D5=function(r){r.forEach(function(e){AE.indexOf(e)<0&&(e(P1,C1),AE.push(e))})};function U5(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=n[this.toHex()];if(u)return u;if(o!=null&&o.closest){var h=this.toRgb(),c=1/0,d="black";if(!s.length)for(var f in t)s[f]=new r(t[f]).toRgb();for(var g in t){var v=(a=h,l=s[g],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<c&&(c=v,d=g)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new r(l).toRgb():null},"name"])}D5([U5]);const ru=class Dp{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Dp)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,i,s]=Dp.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,n,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,n,i,s]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let t,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,s=255]=e,t/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Dp.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=ms(e);o.isValid()&&({r:t,g:n,b:i,a:s}=o.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),n)}),e)}};ru.shared=new ru,ru.temp=new ru,ru.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ut=ru;function j5(r){return qe("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ut.shared.setValue(r).toHex()}function X5(r){return qe("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ut.shared.setValue(r).toNumber()}function H5(){const r=[],e=[];for(let n=0;n<32;n++)r[n]=n,e[n]=n;r[Ie.NORMAL_NPM]=Ie.NORMAL,r[Ie.ADD_NPM]=Ie.ADD,r[Ie.SCREEN_NPM]=Ie.SCREEN,e[Ie.NORMAL]=Ie.NORMAL_NPM,e[Ie.ADD]=Ie.ADD_NPM,e[Ie.SCREEN]=Ie.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const k2=H5();function I2(r,e){return k2[e?1:0][r]}function $5(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function M2(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function fm(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function kE(r){return!(r&r-1)&&!!r}function IE(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Bu(r,e,t){const n=r.length;let i;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}function sa(r){return r===0?0:r<0?-1:1}let z5=0;function ml(){return++z5}const A1=class{constructor(r,e,t,n){this.left=r,this.top=e,this.right=t,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};A1.EMPTY=new A1(0,0,0,0);let ME=A1;const RE={},gs=Object.create(null),Ho=Object.create(null);class Y5{constructor(e,t,n){this._canvas=xe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||xe.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function OE(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function NE(r,e,t,n,i){const s=4*e;for(let o=n,a=n*s+4*t;o<=i;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function G5(r){const{width:e,height:t}=r,n=r.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,l=t-1;for(;o<t&&OE(i,e,o);)++o;if(o===t)return ME.EMPTY;for(;OE(i,e,l);)--l;for(;NE(i,e,s,o,l);)++s;for(;NE(i,e,a,o,l);)--a;return++a,++l,new ME(s,o,a,l)}function W5(r){const e=G5(r),{width:t,height:n}=e;let i=null;if(!e.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,t,n)}return{width:t,height:n,data:i}}function V5(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function xo(r,e=1){var n;const t=(n=xe.RETINA_PREFIX)==null?void 0:n.exec(r);return t?parseFloat(t[1]):e}var ge=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(ge||{});const k1=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},FE=(r,e)=>k1(r).priority??e,Te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(k1).forEach(e=>{e.type.forEach(t=>{var n,i;return(i=(n=this._removeHandlers)[t])==null?void 0:i.call(n,e)})}),this},add(...r){return r.map(k1).forEach(e=>{e.type.forEach(t=>{var s,o;const n=this._addHandlers,i=this._queue;n[t]?(s=n[t])==null||s.call(n,e):(i[t]=i[t]||[],(o=i[t])==null||o.push(e))})}),this},handle(r,e,t){var o;const n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;const s=this._queue;return s[r]&&((o=s[r])==null||o.forEach(a=>e(a)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>FE(s,t)-FE(i,t)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class I1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const q5=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function K5(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function Q5(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=q5.replace(/%forloop%/gi,K5(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const Yv=0,Gv=1,Wv=2,Vv=3,qv=4,Kv=5;class Xs{constructor(){this.data=0,this.blendMode=Ie.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Yv)}set blend(e){!!(this.data&1<<Yv)!==e&&(this.data^=1<<Yv)}get offsets(){return!!(this.data&1<<Gv)}set offsets(e){!!(this.data&1<<Gv)!==e&&(this.data^=1<<Gv)}get culling(){return!!(this.data&1<<Wv)}set culling(e){!!(this.data&1<<Wv)!==e&&(this.data^=1<<Wv)}get depthTest(){return!!(this.data&1<<Vv)}set depthTest(e){!!(this.data&1<<Vv)!==e&&(this.data^=1<<Vv)}get depthMask(){return!!(this.data&1<<Kv)}set depthMask(e){!!(this.data&1<<Kv)!==e&&(this.data^=1<<Kv)}get clockwiseFrontFace(){return!!(this.data&1<<qv)}set clockwiseFrontFace(e){!!(this.data&1<<qv)!==e&&(this.data^=1<<qv)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ie.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Xs;return e.depthTest=!1,e.blend=!0,e}}Xs.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const M1=[];function R2(r,e){if(!r)return null;let t="";if(typeof r=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(let n=M1.length-1;n>=0;--n){const i=M1[n];if(i.test&&i.test(r,t))return new i(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class ji{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][u](e,t,n,i,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(ji.prototype,{dispatch:{value:ji.prototype.emit},run:{value:ji.prototype.emit}});class jh{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new ji("setRealSize"),this.onUpdate=new ji("update"),this.onError=new ji("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Eg extends jh{constructor(e,t){const{width:n,height:i}=t||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Vr.UNPACK);const s=t.realWidth,o=t.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(t.target,0,0,0,s,o,t.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(t.target,0,n.internalFormat,s,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const Z5={scaleMode:Ni.NEAREST,alphaMode:Vr.NPM},R1=class nu extends dd{constructor(e=null,t=null){super(),t=Object.assign({},nu.defaultOptions,t);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:u,format:h,type:c,target:d,resolution:f,resourceOptions:g}=t;e&&!(e instanceof jh)&&(e=R2(e,g),e.internal=!0),this.resolution=f||xe.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=u,this._scaleMode=o,this.format=h,this.type=c,this.target=d,this.alphaMode=n,this.uid=ml(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=kE(this.realWidth)&&kE(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Ho[this.cacheId],delete gs[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),nu.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,n=xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${ml()}`}s=e._pixiId}let o=Ho[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new nu(e,t),o.cacheId=s,nu.addToCache(o,s)),o}static fromBuffer(e,t,n,i){e=e||new Float32Array(t*n*4);const s=new Eg(e,{width:t,height:n,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=de.RGBA,a=Se.FLOAT):e instanceof Int32Array?(o=de.RGBA_INTEGER,a=Se.INT):e instanceof Uint32Array?(o=de.RGBA_INTEGER,a=Se.UNSIGNED_INT):e instanceof Int16Array?(o=de.RGBA_INTEGER,a=Se.SHORT):e instanceof Uint16Array?(o=de.RGBA_INTEGER,a=Se.UNSIGNED_SHORT):e instanceof Int8Array?(o=de.RGBA,a=Se.BYTE):(o=de.RGBA,a=Se.UNSIGNED_BYTE),s.internal=!0,new nu(s,Object.assign({},Z5,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Ho[t]&&Ho[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Ho[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Ho[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Ho[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Ho[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};R1.defaultOptions={mipmap:di.POW2,anisotropicLevel:0,scaleMode:Ni.LINEAR,wrapMode:ci.CLAMP,alphaMode:Vr.UNPACK,target:Ou.TEXTURE_2D,format:de.RGBA,type:Se.UNSIGNED_BYTE},R1._globalBatch=0;let De=R1;class O1{constructor(){this.texArray=null,this.blend=0,this.type=Oi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let J5=0;class bt{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=J5++,this.disposeRunner=new ji("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Ms.ELEMENT_ARRAY_BUFFER:Ms.ARRAY_BUFFER}get index(){return this.type===Ms.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new bt(e)}}class pm{constructor(e,t=0,n=!1,i=Se.FLOAT,s,o,a,l=1){this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,n,i,s){return new pm(e,t,n,i,s)}}const e4={Float32Array,Uint32Array,Int32Array,Uint8Array};function t4(r,e){let t=0,n=0;const i={};for(let l=0;l<r.length;l++)n+=e[l],t+=r[l].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=e[l],h=r[l],c=M2(h);i[c]||(i[c]=new e4[c](s)),o=i[c];for(let d=0;d<h.length;d++){const f=(d/u|0)*n+a,g=d%u;o[f+g]=h[d]}a+=u}return new Float32Array(s)}const BE={5126:4,5123:2,5121:1};let r4=0;const n4={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Bs{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=r4++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ji("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,i=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof bt||(t instanceof Array&&(t=new Float32Array(t)),t=new bt(t));const u=e.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],t,n,i,s);return this}let h=this.buffers.indexOf(t);return h===-1&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new pm(h,n,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof bt||(e instanceof Array&&(e=new Uint16Array(e)),e=new bt(e)),e.type=Ms.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],n=new bt;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*BE[s.type]/4),s.buffer=0}for(n.data=t4(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Bs;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new bt(this.buffers[t].data.slice(0));for(const t in this.attributes){const n=this.attributes[t];e.attributes[t]=new pm(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ms.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new Bs,n=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new n4[M2(o.buffers[a].data)](i[a]),t.buffers[a]=new bt(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Ms.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(l+=d.size*BE[d.type]/4)}for(let c=0;c<e.length;c++){const d=e[c].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+u]+=a;a+=e[c].buffers[h].data.length/l,u+=d.length}}return t}}class O2 extends Bs{constructor(e=!1){super(),this._buffer=new bt(null,e,!1),this._indexBuffer=new bt(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Se.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Se.FLOAT).addAttribute("aColor",this._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Se.FLOAT).addIndex(this._indexBuffer)}}const mm=Math.PI*2,i4=180/Math.PI,s4=Math.PI/180;var Nr=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Nr||{});class He{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new He(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}He.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Bf=[new He,new He,new He,new He];let Ye=class N1{constructor(e=0,t=0,n=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=Nr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new N1(0,0,0,0)}clone(){return new N1(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const O=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>O}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Bf[0].set(e.left,e.top),l=Bf[1].set(e.left,e.bottom),u=Bf[2].set(e.right,e.top),h=Bf[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(t.a*t.d-t.b*t.c);if(c===0||(t.apply(a,a),t.apply(l,l),t.apply(u,u),t.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=n||Math.min(a.x,l.x,u.x,h.x)>=i||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),g=d*n+f*s,v=d*i+f*s,x=d*n+f*o,y=d*i+f*o;if(Math.max(g,v,x,y)<=d*a.x+f*a.y||Math.min(g,v,x,y)>=d*h.x+f*h.y)return!1;const b=c*(a.y-u.y),_=c*(u.x-a.x),S=b*n+_*s,I=b*i+_*s,A=b*n+_*o,k=b*i+_*o;return!(Math.max(S,I,A,k)<=b*a.x+_*a.y||Math.min(S,I,A,k)>=b*h.x+_*h.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this}};Ye.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Cg{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=Nr.CIRC}clone(){return new Cg(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n}getBounds(){return new Ye(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Cg.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Pg{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.width=n,this.height=i,this.type=Nr.ELIP}clone(){return new Pg(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new Ye(this.x-this.width,this.y-this.height,this.width,this.height)}}Pg.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let bh=class N2{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let i=0,s=t.length;i<s;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.type=Nr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new N2(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>t!=h>t&&e<(u-a)*((t-l)/(h-l))+a&&(n=!n)}return n}};bh.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class Ag{constructor(e=0,t=0,n=0,i=0,s=20){this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=Nr.RREC}clone(){return new Ag(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=t-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=t-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}Ag.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Tt{constructor(e=1,t=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,s,o){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new He;const n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new He;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){const t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,t,n,i,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(n,t),u=Math.abs(a+l);return u<1e-5||Math.abs(mm-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-t*n;return this.a=i/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Tt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new Tt}static get TEMP_MATRIX(){return new Tt}}Tt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ga=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Wa=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Va=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],qa=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],F1=[],F2=[],Lf=Math.sign;function o4(){for(let r=0;r<16;r++){const e=[];F1.push(e);for(let t=0;t<16;t++){const n=Lf(Ga[r]*Ga[t]+Va[r]*Wa[t]),i=Lf(Wa[r]*Ga[t]+qa[r]*Wa[t]),s=Lf(Ga[r]*Va[t]+Va[r]*qa[t]),o=Lf(Wa[r]*Va[t]+qa[r]*qa[t]);for(let a=0;a<16;a++)if(Ga[a]===n&&Wa[a]===i&&Va[a]===s&&qa[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){const e=new Tt;e.set(Ga[r],Wa[r],Va[r],qa[r],0,0),F2.push(e)}}o4();const Lt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Ga[r],uY:r=>Wa[r],vX:r=>Va[r],vY:r=>qa[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>F1[r][e],sub:(r,e)=>F1[r][Lt.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Lt.S:Lt.N:Math.abs(e)*2<=Math.abs(r)?r>0?Lt.E:Lt.W:e>0?r>0?Lt.SE:Lt.SW:r>0?Lt.NE:Lt.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{const i=F2[Lt.inv(e)];i.tx=t,i.ty=n,r.append(i)}};class As{constructor(e,t,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new As(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}As.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const B1=class{constructor(){this.worldTransform=new Tt,this.localTransform=new Tt,this.position=new As(this.onChange,this,0,0),this.scale=new As(this.onChange,this,1,1),this.pivot=new As(this.onChange,this,0,0),this.skew=new As(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};B1.IDENTITY=new B1;let kg=B1;kg.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var a4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,l4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function LE(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function Qv(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function B2(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Qv(2*e);case"bvec3":return Qv(3*e);case"bvec4":return Qv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Lu=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],u4={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},c4={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function h4(r,e){var n;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in r.uniforms){const s=e[i];if(!s){((n=r.uniforms[i])==null?void 0:n.group)===!0&&(r.uniforms[i].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=r.uniforms[i];let a=!1;for(let l=0;l<Lu.length;l++)if(Lu[l].test(s,o)){t.push(Lu[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?u4:c4)[s.type].replace("location",`ud["${i}"].location`);t.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const L2={};let Kl=L2;function d4(){if(Kl===L2||Kl!=null&&Kl.isContextLost()){const r=xe.ADAPTER.createCanvas();let e;xe.PREFER_ENV>=El.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Kl=e}return Kl}let Df;function f4(){if(!Df){Df=oi.MEDIUM;const r=d4();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(Df=e.precision?oi.HIGH:oi.MEDIUM)}}return Df}function DE(r,e){const t=r.getShaderSource(e).split(`
`).map((u,h)=>`${h}: ${u}`),n=r.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function p4(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||DE(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||DE(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const m4={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function D2(r){return m4[r]}let Uf=null;const UE={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function U2(r,e){if(!Uf){const t=Object.keys(UE);Uf={};for(let n=0;n<t.length;++n){const i=t[n];Uf[r[i]]=UE[i]}}return Uf[e]}function jE(r,e,t){if(r.substring(0,9)!=="precision"){let n=e;return e===oi.HIGH&&t!==oi.HIGH&&(n=oi.MEDIUM),`precision ${n} float;
${r}`}else if(t!==oi.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let Wc;function g4(){if(typeof Wc=="boolean")return Wc;try{Wc=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Wc=!1}return Wc}let v4=0;const jf={},L1=class iu{constructor(e,t,n="pixi-shader",i={}){this.extra={},this.id=v4++,this.vertexSrc=e||iu.defaultVertexSrc,this.fragmentSrc=t||iu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),jf[n]?(jf[n]++,n+=`-${jf[n]}`):jf[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=jE(this.vertexSrc,iu.defaultVertexPrecision,oi.HIGH),this.fragmentSrc=jE(this.fragmentSrc,iu.defaultFragmentPrecision,f4())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return l4}static get defaultFragmentSrc(){return a4}static from(e,t,n){const i=e+t;let s=RE[i];return s||(RE[i]=s=new iu(e,t,n)),s}};L1.defaultVertexPrecision=oi.HIGH,L1.defaultFragmentPrecision=ai.apple.device?oi.HIGH:oi.MEDIUM;let ks=L1,y4=0;class Xi{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=y4++,this.static=!!t,this.ubo=!!n,e instanceof bt?(this.buffer=e,this.buffer.type=Ms.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new bt(new Float32Array(1)),this.buffer.type=Ms.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(!this.ubo)this.uniforms[e]=new Xi(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,n){return new Xi(e,t,n)}static uboFrom(e,t){return new Xi(e,t??!0,!0)}}class Hi{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Xi?this.uniformGroup=t:this.uniformGroup=new Xi(t):this.uniformGroup=new Xi({}),this.disposeRunner=new ji("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const n in t.uniforms){const i=t.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){const i=ks.from(e,t);return new Hi(i,n)}}class j2{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=Xi.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new ks(this.vertexSrc,i)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tt,default:this.defaultGroupCache[e]};return new Hi(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class D1{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function x4(){return!ai.apple.device}function _4(r){let e=!0;const t=xe.ADAPTER.getNavigator();if(ai.tablet||ai.phone){if(ai.apple.device){const n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(ai.android.device){const n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?r:4}class Ig{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var w4=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,b4=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const sh=class Ci extends Ig{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=O2,this.vertexSize=6,this.state=Xs.for2d(),this.size=Ci.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??_4(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??x4(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return qe("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return b4}static get defaultFragmentTemplate(){return w4}setShaderGenerator({vertex:e=Ci.defaultVertexSrc,fragment:t=Ci.defaultFragmentTemplate}={}){this.shaderGenerator=new j2(e,t)}contextChange(){const e=this.renderer.gl;xe.PREFER_ENV===El.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ci.defaultMaxTextures),this.maxTextures=Q5(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Ci,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new O1);for(;t.length<i;)t.push(new D1);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,n=Ci._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++De._globalBatch,l=0,u=n[0],h=0;i.copyBoundTextures(s,t);for(let c=0;c<this._bufferSize;++c){const d=e[c];e[c]=null,d._batchEnabled!==a&&(u.count>=t&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,h,c),h=c,u=n[++l],++a),d._batchEnabled=a,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,s,a,t),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(let c=0;c<s.length;c++)s[c]=null;De._globalBatch=a}buildDrawCalls(e,t,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Ci._drawCallPool;let u=this._dcIndex,h=this._aIndex,c=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(let f=t;f<n;++f){const g=i[f],v=g._texture.baseTexture,x=k2[v.alphaMode?1:0][g.blendMode];i[f]=null,t<f&&d.blend!==x&&(d.size=c-d.start,t=f,d=l[++u],d.texArray=e,d.start=c),this.packInterleavedGeometry(g,s,o,h,c),h+=g.vertexData.length/2*a,c+=g.indices.length,d.blend=x}t<n&&(d.size=c-d.start,++u),this._dcIndex=u,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:n}=this;Ci.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:n}=this.renderer,i=Ci._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:u,start:h,blend:c}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=c,n.set(this.state),t.drawElements(l,u,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ci.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=fm(Math.ceil(e/8)),n=IE(t),i=t*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new I1(i*this.vertexSize*4)),s}getIndexBuffer(e){const t=fm(Math.ceil(e/12)),n=IE(t),i=t*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,n,i,s){const{uint32View:o,float32View:a}=t,l=i/this.vertexSize,u=e.uvs,h=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),g=ut.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let v=0;v<c.length;v+=2)a[i++]=c[v],a[i++]=c[v+1],a[i++]=u[v],a[i++]=u[v+1],o[i++]=g,a[i++]=d;for(let v=0;v<h.length;v++)n[s++]=l+h[v]}};sh.defaultBatchSize=4096,sh.extension={name:"batch",type:ge.RendererPlugin},sh._drawCallPool=[],sh._textureArrayPool=[];let qo=sh;Te.add(qo);var S4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,T4=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const U1=class oh extends Hi{constructor(e,t,n){const i=ks.from(e||oh.defaultVertexSrc,t||oh.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=oh.defaultResolution,this.multisample=oh.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Xs}apply(e,t,n,i,s){e.applyFilter(this,t,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return T4}static get defaultFragmentSrc(){return S4}};U1.defaultResolution=1,U1.defaultMultisample=nr.NONE;let sn=U1;class gm{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ut(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:n,backgroundAlpha:i}=e,s=n??t;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}gm.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},gm.extension={type:[ge.RendererSystem,ge.CanvasRendererSystem],name:"background"};Te.add(gm);class X2{constructor(e){this.renderer=e,this.emptyRenderer=new Ig(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:n}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,n,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<i&&t[c]===h){o[u]=c;continue}for(;l<i;){const d=t[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,t[l]=h;break}}}destroy(){this.renderer=null}}X2.extension={type:ge.RendererSystem,name:"batch"};Te.add(X2);let XE=0;class vm{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=XE++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=XE++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(xe.PREFER_ENV>=El.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}vm.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},vm.extension={type:ge.RendererSystem,name:"context"};Te.add(vm);class j1{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ji("disposeFramebuffer"),this.multisample=nr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new De(null,{scaleMode:Ni.NEAREST,resolution:1,mipmap:di.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new De(null,{scaleMode:Ni.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:di.OFF,format:de.DEPTH_COMPONENT,type:Se.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class H2 extends De{constructor(e={}){if(typeof e=="number"){const t=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:t,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=nr.NONE),super(null,e),this.mipmap=di.OFF,this.valid=!0,this._clear=new ut([0,0,0,0]),this.framebuffer=new j1(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class _o extends jh{constructor(e){const t=e,n=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,i=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){n===void 0&&!t.startsWith("data:")?e.crossOrigin=V5(t):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,t,n,i){const s=e.gl,o=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Vr.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(t.target,0,n.internalFormat,t.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}}class $2 extends _o{constructor(e,t){if(t=t||{},typeof e=="string"){const n=new Image;_o.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??xe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vr.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class Y_{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){const i=t.width,s=t.height;if(n){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,u=e.y/s+a;n=Lt.add(n,Lt.NW),this.x0=l+o*Lt.uX(n),this.y0=u+a*Lt.uY(n),n=Lt.add(n,2),this.x1=l+o*Lt.uX(n),this.y1=u+a*Lt.uY(n),n=Lt.add(n,2),this.x2=l+o*Lt.uX(n),this.y2=u+a*Lt.uY(n),n=Lt.add(n,2),this.x3=l+o*Lt.uX(n),this.y3=u+a*Lt.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Y_.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const HE=new Y_;function Xf(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}let Re=class wt extends dd{constructor(e,t,n,i,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Ye(0,0,1,1)),e instanceof wt&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=HE,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new He(o.x,o.y):new He(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&gs[t.url]&&wt.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,wt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new wt(this.baseTexture,!this.noFrame&&e,t,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===HE&&(this._uvs=new Y_),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof De){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${ml()}`,De.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${ml()}`}s=e._pixiId}let o=gs[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof De)?(t.resolution||(t.resolution=xo(e)),o=new wt(new De(e,t)),o.baseTexture.cacheId=s,De.addToCache(o.baseTexture,s),wt.addToCache(o,s)):!o&&e instanceof De&&(o=new wt(e),wt.addToCache(o,s)),o}static fromURL(e,t){const n=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),i=wt.from(e,Object.assign({resourceOptions:n},t),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,n,i){return new wt(De.fromBuffer(e,t,n,i))}static fromLoader(e,t,n,i){const s=new De(e,Object.assign({scaleMode:De.defaultOptions.scaleMode,resolution:xo(t)},i)),{resource:o}=s;o instanceof $2&&(o.url=t);const a=new wt(s);return n||(n=t),De.addToCache(a.baseTexture,n),wt.addToCache(a,n),n!==t&&(De.addToCache(a.baseTexture,t),wt.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),gs[t]&&gs[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),gs[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=gs[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete gs[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)gs[e.textureCacheIds[t]]===e&&delete gs[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:n,width:i,height:s}=e,o=t+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,h=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return wt._EMPTY||(wt._EMPTY=new wt(new De),Xf(wt._EMPTY),Xf(wt._EMPTY.baseTexture)),wt._EMPTY}static get WHITE(){if(!wt._WHITE){const e=xe.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),wt._WHITE=new wt(De.from(e)),Xf(wt._WHITE),Xf(wt._WHITE.baseTexture)}return wt._WHITE}};class Cl extends Re{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Cl(new H2(e))}}class z2{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,n=nr.NONE){const i=new H2(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Cl(i)}getOptimalTexture(e,t,n=1,i=nr.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),t=Math.max(Math.ceil(t*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=fm(e),t=fm(t),s=((e&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,t,n){const i=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||nr.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}z2.SCREEN_KEY=-1;class E4 extends Bs{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Y2 extends Bs{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new bt(this.vertices),this.uvBuffer=new bt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+t.width/e.width,this.uvs[3]=i,this.uvs[4]=n+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=n,this.uvs[7]=i+t.height/e.height,n=t.x,i=t.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=n+t.width,this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class C4{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=nr.NONE,this.sourceFrame=new Ye,this.destinationFrame=new Ye,this.bindingSourceFrame=new Ye,this.bindingDestinationFrame=new Ye,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Hf=[new He,new He,new He,new He],Zv=new Tt;class G2{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new z2,this.statePool=[],this.quad=new E4,this.quadUv=new Y2,this.tempRect=new Ye,this.activeState={},this.globalUniforms=new Xi({outputFrame:new Ye,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new C4,o=n.renderTexture;let a,l;if(o.current){const x=o.current;a=x.resolution,l=x.multisample}else a=n.resolution,l=n.multisample;let u=t[0].resolution||a,h=t[0].multisample??l,c=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let x=1;x<t.length;x++){const y=t[x];u=Math.min(u,y.resolution||a),h=Math.min(h,y.multisample??l),c=this.useMaxPadding?Math.max(c,y.padding):c+y.padding,d=d&&y.autoFit,f=f||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=u,s.multisample=h,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const g=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Zv.copyFrom(n.projection.transform).invert(),g),d?(s.sourceFrame.fit(g),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(g)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,u,h),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,v),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;const i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const u=i.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,l.renderTexture,Ts.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,t.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&t.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,t.resolution),h.filterFrame=u.filterFrame),n[c].apply(this,u,h,Ts.CLEAR,t);const d=u;u=h,h=d}n[c].apply(this,u,l.renderTexture,Ts.BLEND,t),c>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Ts.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(t===Ts.CLEAR||t===Ts.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Oi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Oi.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=t._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=t.worldTransform.copyTo(Tt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,i=nr.NONE){return this.texturePool.getOptimalTexture(e,t,n,i)}getFilterTexture(e,t,n){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||nr.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const n=Hf[0],i=Hf[1],s=Hf[2],o=Hf[3];n.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),l=Math.min(n.y,i.y,s.y,o.y),u=Math.max(n.x,i.x,s.x,o.x),h=Math.max(n.y,i.y,s.y,o.y);t.x=a,t.y=l,t.width=u-a,t.height=h-l}roundFrame(e,t,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?Zv.copyFrom(s):Zv.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}G2.extension={type:ge.RendererSystem,name:"filter"};Te.add(G2);class P4{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=nr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const A4=new Ye;class W2{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new j1(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ye,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;xe.PREFER_ENV===El.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>n,a=t.height>>n,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,i){const s=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=n,s.height=i,this.gl.viewport(e,t,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,i,s=d1.COLOR|d1.DEPTH){const{gl:o}=this;o.clearColor(e,t,n,i),o.clear(s)}initFramebuffer(e){const{gl:t}=this,n=new P4(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){t.bindRenderbuffer(t.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,u=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,u=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,u,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,u,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let n=nr.NONE;if(e<=1||t===null)return n;for(let i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return n===1&&(n=nr.NONE),n}blit(e,t,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=i.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new j1(i.width,i.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=A4,t.width=i.width,t.height=i.height),n||(n=t);const u=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,l,n,i):s.renderbufferStorage(s.RENDERBUFFER,l,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ye}destroy(){this.renderer=null}}W2.extension={type:ge.RendererSystem,name:"framebuffer"};Te.add(W2);const Jv={5126:4,5123:2,5121:1};class V2{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;xe.PREFER_ENV===El.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>n.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];t.update(i)}}checkCompatibility(e,t){const n=e.attributes,i=t.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const n=e.attributes,i=t.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,t,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=e.buffers,d=e.attributes,f={},g={};for(const v in c)f[v]=0,g[v]=0;for(const v in d)!d[v].size&&a.attributeData[v]?d[v].size=a.attributeData[v].size:d[v].size||console.warn(`PIXI Geometry attribute '${v}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[v].buffer]+=d[v].size*Jv[d[v].type];for(const v in d){const x=d[v],y=x.size;x.stride===void 0&&(f[x.buffer]===y*Jv[x.type]?x.stride=0:x.stride=f[x.buffer]),x.start===void 0&&(x.start=g[x.buffer],g[x.buffer]+=y*Jv[x.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(let v=0;v<c.length;v++){const x=c[v];o.bind(x),n&&x._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=h,u[l]=h,i.bindVertexArray(null),o.unbind(Ms.ARRAY_BUFFER),h}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&o.dispose(s[l],t))}if(!t){for(const l in n)if(l[0]==="g"){const u=n[l];this._activeVao===u&&this.unbind(),i.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],d=c._glBuffers[i];if(t.attributeData[u]){l!==d&&(s.bind(c),l=d);const f=t.attributeData[u].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(n||0)*a,i||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,t||o.getSize(),i||1):s.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}V2.extension={type:ge.RendererSystem,name:"geometry"};Te.add(V2);const $E=new Tt;class Mg{constructor(e,t){this._texture=e,this.mapCoord=new Tt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];t[i]=s*n.a+o*n.c+n.tx,t[i+1]=s*n.b+o*n.d+n.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=t.orig,s=t.trim;s&&($E.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append($E));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/o.width,a[1]=(t._frame.y+l+u)/o.height,a[2]=(t._frame.x+t._frame.width-l+u)/o.width,a[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var k4=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,I4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class M4 extends sn{constructor(e,t,n){let i=null;typeof e!="string"&&t===void 0&&n===void 0&&(i=e,e=void 0,t=void 0,n=void 0),super(e||I4,t||k4,n),this.maskSprite=i,this.maskMatrix=new Tt}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Mg(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,i))}}class R4{constructor(e=null){this.type=cr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=sn.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=cr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class q2{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){const s=this.maskDataPool.pop()||new R4;s.pooled=!0,s.maskObject=t,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==cr.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case cr.SCISSOR:this.renderer.scissor.push(n);break;case cr.STENCIL:this.renderer.stencil.push(n);break;case cr.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case cr.COLOR:this.pushColorMask(n);break}n.type===cr.SPRITE&&this.maskStack.push(n)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case cr.SCISSOR:this.renderer.scissor.pop(t);break;case cr.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case cr.SPRITE:this.popSpriteMask(t);break;case cr.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===cr.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=cr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=cr.SCISSOR:e.type=cr.STENCIL:e.type=cr.COLOR}pushSpriteMask(e){const{maskObject:t}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new M4])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;const s=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}q2.extension={type:ge.RendererSystem,name:"mask"};Te.add(q2);class K2{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const zE=new Tt,YE=[],Q2=class Up extends K2{constructor(e){super(e),this.glConst=xe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,YE.pop()??new Ye);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Up.isMatrixRotated(t.worldTransform)||Up.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,t,n,i,s){Up.isMatrixRotated(s)||(s=s?zE.copyFrom(s):zE.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&YE.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};Q2.extension={type:ge.RendererSystem,name:"scissor"};let O4=Q2;Te.add(O4);class Z2 extends K2{constructor(e){super(e),this.glConst=xe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Z2.extension={type:ge.RendererSystem,name:"stencil"};Te.add(Z2);class J2{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return qe("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return qe("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return qe("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}J2.extension={type:[ge.RendererSystem,ge.CanvasRendererSystem],name:"_plugin"};Te.add(J2);class ek{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Tt,this.transform=null}update(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}ek.extension={type:ge.RendererSystem,name:"projection"};Te.add(ek);const N4=new kg,GE=new Ye;class tk{constructor(e){this.renderer=e,this._tempMatrix=new Tt}generateTexture(e,t){const{region:n,...i}=t||{},s=(n==null?void 0:n.copyTo(GE))||e.getLocalBounds(GE,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=Cl.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=N4,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}tk.extension={type:[ge.RendererSystem,ge.CanvasRendererSystem],name:"textureGenerator"};Te.add(tk);const Ha=new Ye,Vc=new Ye;class rk{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ye,this.destinationFrame=new Ye,this.viewportFrame=new Ye}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(Ha.width=e.frame.width,Ha.height=e.frame.height,t=Ha),n||(Vc.x=e.frame.x,Vc.y=e.frame.y,Vc.width=t.width,Vc.height=t.height,n=Vc),o=s.framebuffer):(a=i.resolution,t||(Ha.width=i._view.screen.width,Ha.height=i._view.screen.height,t=Ha),n||(n=Ha,n.width=t.width,n.height=t.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=ut.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:h,height:c}=this.viewportFrame;l=Math.round(l),u=Math.round(u),h=Math.round(h),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,h,c)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}rk.extension={type:ge.RendererSystem,name:"renderTexture"};Te.add(rk);class F4{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function B4(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(r,i);if(s.name.startsWith("gl_"))continue;const o=U2(e,s.type),a={type:o,name:s.name,size:D2(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}return t}function L4(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(r,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=U2(e,s.type);t[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:B2(l,s.size)}}return t}function D4(r,e){var a;const t=LE(r,r.VERTEX_SHADER,e.vertexSrc),n=LE(r,r.FRAGMENT_SHADER,e.fragmentSrc),i=r.createProgram();r.attachShader(i,t),r.attachShader(i,n);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||p4(r,i,t,n),e.attributeData=B4(i,r),e.uniformData=L4(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,h)=>u>h?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,r.bindAttribLocation(i,u,l[u]);r.linkProgram(i)}r.deleteShader(t),r.deleteShader(n);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:r.getUniformLocation(i,l),value:B2(u.type,u.size)}}return new F4(i,o)}function U4(r,e,t,n,i){t.buffer.update(i)}const j4={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},nk={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function X4(r){const e=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=nk[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,n%t!==0&&n<16){const a=n%t%16;n+=a,i+=a}n+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,n=t):(o.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function H4(r,e){const t=[];for(const n in r)e[n]&&t.push(e[n]);return t.sort((n,i)=>n.index-i.index),t}function $4(r,e){if(!r.autoManage)return{size:0,syncFunc:U4};const t=H4(r.uniforms,e),{uboElements:n,size:i}=X4(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=r.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<Lu.length;c++){const d=Lu[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Lu[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=D2(a.data.type),d=Math.max(nk[a.data.type]/16,1),f=c/d,g=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const c=j4[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let z4=0;const $f={textureCount:0,uboCount:0};class ik{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=z4++}systemCheck(){if(!g4())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||($f.textureCount=0,$f.uboCount=0,this.syncUniformGroup(e.uniformGroup,$f)),i}setUniforms(e){const t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=h4(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,$f,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=$4(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,n=e.program,i=D4(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ik.extension={type:ge.RendererSystem,name:"shader"};Te.add(ik);class ym{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.2 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}ym.defaultOptions={hello:!1},ym.extension={type:[ge.RendererSystem,ge.CanvasRendererSystem],name:"startup"};Te.add(ym);function Y4(r,e=[]){return e[Ie.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.ADD]=[r.ONE,r.ONE],e[Ie.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.NONE]=[0,0],e[Ie.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[Ie.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ie.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[Ie.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[Ie.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Ie.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[Ie.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[Ie.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[Ie.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[Ie.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Ie.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const G4=0,W4=1,V4=2,q4=3,K4=4,Q4=5,sk=class X1{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ie.NONE,this._blendEq=!1,this.map=[],this.map[G4]=this.setBlend,this.map[W4]=this.setOffset,this.map[V4]=this.setCullFace,this.map[q4]=this.setDepthTest,this.map[K4]=this.setFrontFace,this.map[Q4]=this.setDepthMask,this.checks=[],this.defaultState=new Xs,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=Y4(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(X1.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(X1.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};sk.extension={type:ge.RendererSystem,name:"state"};let Z4=sk;Te.add(Z4);class J4 extends dd{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(i=>e.systems[i]),n=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new ji(t)})}addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,t){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const ah=class jp{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=jp.defaultMaxIdle,this.checkCountMax=jp.defaultCheckCountMax,this.mode=jp.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==B_.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let n=!1;for(let i=0;i<t.length;i++){const s=t[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){const t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};ah.defaultMode=B_.AUTO,ah.defaultMaxIdle=60*60,ah.defaultCheckCountMax=60*10,ah.extension={type:ge.RendererSystem,name:"textureGC"};let Ka=ah;Te.add(Ka);class ey{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Se.UNSIGNED_BYTE,this.internalFormat=de.RGBA,this.samplerType=0}}function e8(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:_e.FLOAT,[r.RGBA]:_e.FLOAT,[r.ALPHA]:_e.FLOAT,[r.LUMINANCE]:_e.FLOAT,[r.LUMINANCE_ALPHA]:_e.FLOAT,[r.R8]:_e.FLOAT,[r.R8_SNORM]:_e.FLOAT,[r.RG8]:_e.FLOAT,[r.RG8_SNORM]:_e.FLOAT,[r.RGB8]:_e.FLOAT,[r.RGB8_SNORM]:_e.FLOAT,[r.RGB565]:_e.FLOAT,[r.RGBA4]:_e.FLOAT,[r.RGB5_A1]:_e.FLOAT,[r.RGBA8]:_e.FLOAT,[r.RGBA8_SNORM]:_e.FLOAT,[r.RGB10_A2]:_e.FLOAT,[r.RGB10_A2UI]:_e.FLOAT,[r.SRGB8]:_e.FLOAT,[r.SRGB8_ALPHA8]:_e.FLOAT,[r.R16F]:_e.FLOAT,[r.RG16F]:_e.FLOAT,[r.RGB16F]:_e.FLOAT,[r.RGBA16F]:_e.FLOAT,[r.R32F]:_e.FLOAT,[r.RG32F]:_e.FLOAT,[r.RGB32F]:_e.FLOAT,[r.RGBA32F]:_e.FLOAT,[r.R11F_G11F_B10F]:_e.FLOAT,[r.RGB9_E5]:_e.FLOAT,[r.R8I]:_e.INT,[r.R8UI]:_e.UINT,[r.R16I]:_e.INT,[r.R16UI]:_e.UINT,[r.R32I]:_e.INT,[r.R32UI]:_e.UINT,[r.RG8I]:_e.INT,[r.RG8UI]:_e.UINT,[r.RG16I]:_e.INT,[r.RG16UI]:_e.UINT,[r.RG32I]:_e.INT,[r.RG32UI]:_e.UINT,[r.RGB8I]:_e.INT,[r.RGB8UI]:_e.UINT,[r.RGB16I]:_e.INT,[r.RGB16UI]:_e.UINT,[r.RGB32I]:_e.INT,[r.RGB32UI]:_e.UINT,[r.RGBA8I]:_e.INT,[r.RGBA8UI]:_e.UINT,[r.RGBA16I]:_e.INT,[r.RGBA16UI]:_e.UINT,[r.RGBA32I]:_e.INT,[r.RGBA32UI]:_e.UINT,[r.DEPTH_COMPONENT16]:_e.FLOAT,[r.DEPTH_COMPONENT24]:_e.FLOAT,[r.DEPTH_COMPONENT32F]:_e.FLOAT,[r.DEPTH_STENCIL]:_e.FLOAT,[r.DEPTH24_STENCIL8]:_e.FLOAT,[r.DEPTH32F_STENCIL8]:_e.FLOAT}:e={[r.RGB]:_e.FLOAT,[r.RGBA]:_e.FLOAT,[r.ALPHA]:_e.FLOAT,[r.LUMINANCE]:_e.FLOAT,[r.LUMINANCE_ALPHA]:_e.FLOAT,[r.DEPTH_STENCIL]:_e.FLOAT},e}function t8(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[Se.UNSIGNED_BYTE]:{[de.RGBA]:r.RGBA8,[de.RGB]:r.RGB8,[de.RG]:r.RG8,[de.RED]:r.R8,[de.RGBA_INTEGER]:r.RGBA8UI,[de.RGB_INTEGER]:r.RGB8UI,[de.RG_INTEGER]:r.RG8UI,[de.RED_INTEGER]:r.R8UI,[de.ALPHA]:r.ALPHA,[de.LUMINANCE]:r.LUMINANCE,[de.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Se.BYTE]:{[de.RGBA]:r.RGBA8_SNORM,[de.RGB]:r.RGB8_SNORM,[de.RG]:r.RG8_SNORM,[de.RED]:r.R8_SNORM,[de.RGBA_INTEGER]:r.RGBA8I,[de.RGB_INTEGER]:r.RGB8I,[de.RG_INTEGER]:r.RG8I,[de.RED_INTEGER]:r.R8I},[Se.UNSIGNED_SHORT]:{[de.RGBA_INTEGER]:r.RGBA16UI,[de.RGB_INTEGER]:r.RGB16UI,[de.RG_INTEGER]:r.RG16UI,[de.RED_INTEGER]:r.R16UI,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[Se.SHORT]:{[de.RGBA_INTEGER]:r.RGBA16I,[de.RGB_INTEGER]:r.RGB16I,[de.RG_INTEGER]:r.RG16I,[de.RED_INTEGER]:r.R16I},[Se.UNSIGNED_INT]:{[de.RGBA_INTEGER]:r.RGBA32UI,[de.RGB_INTEGER]:r.RGB32UI,[de.RG_INTEGER]:r.RG32UI,[de.RED_INTEGER]:r.R32UI,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[Se.INT]:{[de.RGBA_INTEGER]:r.RGBA32I,[de.RGB_INTEGER]:r.RGB32I,[de.RG_INTEGER]:r.RG32I,[de.RED_INTEGER]:r.R32I},[Se.FLOAT]:{[de.RGBA]:r.RGBA32F,[de.RGB]:r.RGB32F,[de.RG]:r.RG32F,[de.RED]:r.R32F,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[Se.HALF_FLOAT]:{[de.RGBA]:r.RGBA16F,[de.RGB]:r.RGB16F,[de.RG]:r.RG16F,[de.RED]:r.R16F},[Se.UNSIGNED_SHORT_5_6_5]:{[de.RGB]:r.RGB565},[Se.UNSIGNED_SHORT_4_4_4_4]:{[de.RGBA]:r.RGBA4},[Se.UNSIGNED_SHORT_5_5_5_1]:{[de.RGBA]:r.RGB5_A1},[Se.UNSIGNED_INT_2_10_10_10_REV]:{[de.RGBA]:r.RGB10_A2,[de.RGBA_INTEGER]:r.RGB10_A2UI},[Se.UNSIGNED_INT_10F_11F_11F_REV]:{[de.RGB]:r.R11F_G11F_B10F},[Se.UNSIGNED_INT_5_9_9_9_REV]:{[de.RGB]:r.RGB9_E5},[Se.UNSIGNED_INT_24_8]:{[de.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[Se.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[de.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[Se.UNSIGNED_BYTE]:{[de.RGBA]:r.RGBA,[de.RGB]:r.RGB,[de.ALPHA]:r.ALPHA,[de.LUMINANCE]:r.LUMINANCE,[de.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Se.UNSIGNED_SHORT_5_6_5]:{[de.RGB]:r.RGB},[Se.UNSIGNED_SHORT_4_4_4_4]:{[de.RGBA]:r.RGBA},[Se.UNSIGNED_SHORT_5_5_5_1]:{[de.RGBA]:r.RGBA}},e}class ok{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new De,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=t8(e),this.samplerTypes=e8(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new ey(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new ey(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[i].samplerType!==_e.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new ey(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var n;t.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??_e.FLOAT,this.webGLVersion===2&&e.type===Se.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var i;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const n=this.renderer;if(this.initTextureType(e,t),(i=e.resource)==null?void 0:i.upload(n,e,t))t.samplerType!==_e.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=n.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const i=this.managedTextures.indexOf(e);i!==-1&&Bu(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===di.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=ci.CLAMP:t.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const n=this.gl;if(t.mipmap&&e.mipmap!==di.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Ni.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Ni.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Ni.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Ni.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}ok.extension={type:ge.RendererSystem,name:"texture"};Te.add(ok);class ak{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:n,renderer:i}=this;t&&i.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:n,CONTEXT_UID:i}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[i]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(a,t))}n&&(t||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}ak.extension={type:ge.RendererSystem,name:"transformFeedback"};Te.add(ak);class xm{constructor(e){this.renderer=e}init(e){this.screen=new Ye(0,0,e.width,e.height),this.element=e.view||xe.ADAPTER.createCanvas(),this.resolution=e.resolution||xe.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}xm.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},xm.extension={type:[ge.RendererSystem,ge.CanvasRendererSystem],name:"_view"};Te.add(xm);xe.PREFER_ENV=El.WEBGL2;xe.STRICT_TEXTURE_CACHE=!1;xe.RENDER_OPTIONS={...vm.defaultOptions,...gm.defaultOptions,...xm.defaultOptions,...ym.defaultOptions};Object.defineProperties(xe,{WRAP_MODE:{get(){return De.defaultOptions.wrapMode},set(r){qe("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),De.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return De.defaultOptions.scaleMode},set(r){qe("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),De.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return De.defaultOptions.mipmap},set(r){qe("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),De.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return De.defaultOptions.anisotropicLevel},set(r){qe("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),De.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return qe("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),sn.defaultResolution},set(r){sn.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return qe("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),sn.defaultMultisample},set(r){sn.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return qo.defaultMaxTextures},set(r){qe("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),qo.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return qo.defaultBatchSize},set(r){qe("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),qo.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return qo.canUploadSameBuffer},set(r){qe("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),qo.canUploadSameBuffer=r}},GC_MODE:{get(){return Ka.defaultMode},set(r){qe("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ka.defaultMode=r}},GC_MAX_IDLE:{get(){return Ka.defaultMaxIdle},set(r){qe("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ka.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Ka.defaultCheckCountMax},set(r){qe("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ka.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return ks.defaultVertexPrecision},set(r){qe("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ks.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return ks.defaultFragmentPrecision},set(r){qe("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ks.defaultFragmentPrecision=r}}});var ba=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(ba||{});class ty{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const lk=class Mn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ty(null,null,1/0),this.deltaMS=1/Mn.targetFPMS,this.elapsedMS=1/Mn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=ba.NORMAL){return this._addListener(new ty(e,t,n))}addOnce(e,t,n=ba.NORMAL){return this._addListener(new ty(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Mn.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,Mn.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Mn._shared){const e=Mn._shared=new Mn;e.autoStart=!0,e._protected=!0}return Mn._shared}static get system(){if(!Mn._system){const e=Mn._system=new Mn;e.autoStart=!0,e._protected=!0}return Mn._system}};lk.targetFPMS=.06;let Xt=lk;Object.defineProperties(xe,{TARGET_FPMS:{get(){return Xt.targetFPMS},set(r){qe("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Xt.targetFPMS=r}}});class uk{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,ba.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Xt.shared:new Xt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}uk.extension=ge.Application;Te.add(uk);const ck=[];Te.handleByList(ge.Renderer,ck);function r8(r){for(const e of ck)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var n8=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,i8=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const s8=n8,hk=i8;class dk{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=nr.HIGH?this.multisample=nr.HIGH:t>=nr.MEDIUM?this.multisample=nr.MEDIUM:t>=nr.LOW?this.multisample=nr.LOW:this.multisample=nr.NONE}destroy(){}}dk.extension={type:ge.RendererSystem,name:"_multisample"};Te.add(dk);class o8{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class fk{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,n*256,256)}update(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new o8(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}fk.extension={type:ge.RendererSystem,name:"buffer"};Te.add(fk);class pk{constructor(e){this.renderer=e}render(e,t){const n=this.renderer;let i,s,o,a;if(t&&(i=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(t.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}pk.extension={type:ge.RendererSystem,name:"objectRenderer"};Te.add(pk);const Xp=class H1 extends J4{constructor(e){super(),this.type=e2.WEBGL,e=Object.assign({},xe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Xi({projectionMatrix:new Tt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:H1.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(qe("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=H1.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:E2()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return qe("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return qe("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return qe("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return qe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){qe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return qe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){qe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return qe("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Xp.extension={type:ge.Renderer,priority:1},Xp.__plugins={},Xp.__systems={};let G_=Xp;Te.handleByMap(ge.RendererPlugin,G_.__plugins);Te.handleByMap(ge.RendererSystem,G_.__systems);Te.add(G_);class mk extends jh{constructor(e,t){const{width:n,height:i}=t||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new De;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof jh?this.addResourceAt(e[n],n):this.addResourceAt(R2(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:n}=this.items[0];return this.resize(t,n),this.update(),Promise.resolve(this)}),this._load}}class a8 extends mk{constructor(e,t){const{width:n,height:i}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Ou.TEXTURE_2D_ARRAY}upload(e,t,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(let l=0;l<i;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,n.type,u.resource.source))}return!0}}class l8 extends _o{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const gk=class lh extends mk{constructor(e,t){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==lh.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<lh.SIDES;a++)this.items[a].target=Ou.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Ou.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Ou.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,n){const i=this.itemDirtyIds;for(let s=0;s<lh.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,t.realWidth,t.realHeight,0,t.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===lh.SIDES}};gk.SIDES=6;let u8=gk;class hu extends _o{constructor(e,t){t=t||{};let n,i,s;typeof e=="string"?(n=hu.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const n=await xe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Vr.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}}),this._load)}upload(e,t,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return hu._EMPTY=hu._EMPTY??xe.ADAPTER.createCanvas(0,0),hu._EMPTY}}const $1=class Hp extends _o{constructor(e,t){t=t||{},super(xe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Hp.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;_o.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*t,s=this._overrideHeight||this._overrideWidth/t*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${ml()}`,o.getContext("2d").drawImage(e,0,0,t,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const t=Hp.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Hp.SVG_XML.test(e)}};$1.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,$1.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let z1=$1;class c8 extends _o{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const Y1=class G1 extends _o{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");t.autoLoad!==!1&&n.setAttribute("preload","auto"),t.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),t.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),t.loop===!0&&n.setAttribute("loop",""),t.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];_o.crossOrigin(n,i,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),h=u.slice(u.lastIndexOf(".")+1);l=l||G1.MIME_TYPES[h]||`video/${h}`}o.src=a,l&&(o.type=l),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Xt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Xt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Xt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Xt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||G1.TYPES.includes(t)}};Y1.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Y1.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let vk=Y1;M1.push(hu,$2,l8,vk,c8,z1,Eg,u8,a8);class _m{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ye.EMPTY:(e=e||new Ye(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:n,b:i,c:s,d:o,tx:a,ty:l}=e,u=n*t.x+s*t.y+a,h=i*t.x+o*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,t,n,i,s){this.addFrameMatrix(e.worldTransform,t,n,i,s)}addFrameMatrix(e,t,n,i,s){const o=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,c=e.ty;let d=this.minX,f=this.minY,g=this.maxX,v=this.maxY,x=o*t+l*n+h,y=a*t+u*n+c;d=x<d?x:d,f=y<f?y:f,g=x>g?x:g,v=y>v?y:v,x=o*i+l*n+h,y=a*i+u*n+c,d=x<d?x:d,f=y<f?y:f,g=x>g?x:g,v=y>v?y:v,x=o*t+l*s+h,y=a*t+u*s+c,d=x<d?x:d,f=y<f?y:f,g=x>g?x:g,v=y>v?y:v,x=o*i+l*s+h,y=a*i+u*s+c,d=x<d?x:d,f=y<f?y:f,g=x>g?x:g,v=y>v?y:v,this.minX=d,this.minY=f,this.maxX=g,this.maxY=v}addVertexData(e,t,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<n;l+=2){const u=e[l],h=e[l+1];i=u<i?u:i,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)}addVerticesMatrix(e,t,n,i,s=0,o=s){const a=e.a,l=e.b,u=e.c,h=e.d,c=e.tx,d=e.ty;let f=this.minX,g=this.minY,v=this.maxX,x=this.maxY;for(let y=n;y<i;y+=2){const b=t[y],_=t[y+1],S=a*b+u*_+c,I=h*_+l*b+d;f=Math.min(f,S-s),v=Math.max(v,S+s),g=Math.min(g,I-o),x=Math.max(x,I+o)}this.minX=f,this.minY=g,this.maxX=v,this.maxY=x}addBounds(e){const t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,i,s,o){e-=s,t-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}}class Ft extends dd{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new kg,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new _m,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const i=t[n];Object.defineProperty(Ft.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Ye),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._localBounds||(this._localBounds=new _m);const t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,i){return t&&(e=t.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,n=1,i=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new h8),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*i4}set angle(e){this.transform.rotation=e*s4}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class h8 extends Ft{constructor(){super(...arguments),this.sortDirty=null}}Ft.prototype.displayObjectUpdateTransform=Ft.prototype.updateTransform;const d8=new Tt;function f8(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const yk=class W1 extends Ft{constructor(){super(),this.children=[],this.sortableChildren=W1.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const n=this.getChildIndex(e),i=this.getChildIndex(t);this.children[n]=t,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Bu(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,Bu(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Bu(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const n=e,i=t,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){const i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(f8),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const n=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==W1.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=d8.copyFrom(i),i.prepend(s)):i=s),n&&t.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<t.length;l++)t[l].enabled&&this._enabledFilters.push(t[l])}const i=t&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==cr.NONE));if(i&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};yk.defaultSortableChildren=!1;let Zr=yk;Zr.prototype.containerUpdateTransform=Zr.prototype.updateTransform;Object.defineProperties(xe,{SORTABLE_CHILDREN:{get(){return Zr.defaultSortableChildren},set(r){qe("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Zr.defaultSortableChildren=r}}});const qc=new He,p8=new Uint16Array([0,1,2,0,2,3]);class es extends Zr{constructor(e){super(),this._anchor=new As(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ut(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Ie.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Re.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=p8,this.pluginName="batch",this.isSprite=!0,this._roundPixels=xe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sa(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sa(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this.vertexData,h=e.trim,c=e.orig,d=this._anchor;let f=0,g=0,v=0,x=0;if(h?(g=h.x-d._x*c.width,f=g+h.width,x=h.y-d._y*c.height,v=x+h.height):(g=-d._x*c.width,f=g+c.width,x=-d._y*c.height,v=x+c.height),u[0]=n*g+s*x+a,u[1]=o*x+i*g+l,u[2]=n*f+s*x+a,u[3]=o*x+i*f+l,u[4]=n*f+s*v+a,u[5]=o*v+i*f+l,u[6]=n*g+s*v+a,u[7]=o*v+i*g+l,this._roundPixels){const y=xe.RESOLUTION;for(let b=0;b<u.length;++b)u[b]=Math.round(u[b]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,d=-i._x*n.width,f=d+n.width,g=-i._y*n.height,v=g+n.height;if(t[0]=o*d+l*g+h,t[1]=u*g+a*d+c,t[2]=o*f+l*g+h,t[3]=u*g+a*f+c,t[4]=o*f+l*v+h,t[5]=u*v+a*f+c,t[6]=o*d+l*v+h,t[7]=u*v+a*d+c,this._roundPixels){const x=xe.RESOLUTION;for(let y=0;y<t.length;++y)t[y]=Math.round(t[y]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new _m),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,qc);const t=this._texture.orig.width,n=this._texture.orig.height,i=-t*this.anchor.x;let s=0;return qc.x>=i&&qc.x<i+t&&(s=-n*this.anchor.y,qc.y>=s&&qc.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const n=e instanceof Re?e:Re.from(e,t);return new es(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=sa(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=sa(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Re.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const xk=new Tt;Ft.prototype._cacheAsBitmap=!1;Ft.prototype._cacheData=null;Ft.prototype._cacheAsBitmapResolution=null;Ft.prototype._cacheAsBitmapMultisample=null;class m8{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ft.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new m8),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Ft.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Ft.prototype._initCachedDisplayObject=function(r){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new Ye,!0);if((f=this.filters)!=null&&f.length){const g=this.filters[0].padding;t.pad(g)}const n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const i=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=Cl.create({width:t.width,height:t.height,resolution:n,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${ml()}`;this._cacheData.textureCacheId=u,De.addToCache(l.baseTexture,u),Re.addToCache(l,u);const h=this.transform.localTransform.copyTo(xk).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new es(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(t.x/t.width),c.anchor.y=-(t.y/t.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Ft.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Ft.prototype._initCachedDisplayObjectCanvas=function(r){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(new Ye,!0),t=this.alpha;this.alpha=1;const n=r.canvasContext.activeContext,i=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=Cl.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${ml()}`;this._cacheData.textureCacheId=a,De.addToCache(o.baseTexture,a),Re.addToCache(o,a);const l=xk;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=n,r._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new es(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ft.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ft.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ft.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,De.removeFromCache(this._cacheData.textureCacheId),Re.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ft.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Ft.prototype.name=null;Zr.prototype.getChildByName=function(r,e){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,n=this.children.length;t<n;t++){const i=this.children[t];if(!i.getChildByName)continue;const s=i.getChildByName(r,!0);if(s)return s}return null};Ft.prototype.getGlobalPosition=function(r=new He,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var g8=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class v8 extends sn{constructor(e=1){super(s8,g8,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const y8={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},x8=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function _8(r){const e=y8[r],t=e.length;let n=x8,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}const w8=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function b8(r,e){const t=Math.ceil(r/2);let n=w8,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}class V1 extends sn{constructor(e,t=8,n=4,i=sn.defaultResolution,s=5){const o=b8(s,e),a=_8(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Ts.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,Ts.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class S8 extends sn{constructor(e=8,t=4,n=sn.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new V1(!0,e,t,n,i),this.blurYFilter=new V1(!1,e,t,n,i),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Ts.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,i):this.blurXFilter.apply(e,t,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var T8=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class q1 extends sn{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(hk,T8,e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){const[n,i,s]=ut.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,u=o*(1-n)-a*i,h=o*(1-n)+a*i,c=o*(1-n)+a*i,d=n+o*(1-n),f=o*(1-n)-a*i,g=o*(1-n)-a*i,v=o*(1-n)+a*i,x=n+o*(1-n),y=[l,u,h,0,0,c,d,f,0,0,g,v,x,0,0,0,0,0,1,0];this._loadMatrix(y,t)}contrast(e,t){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,n,i,s){e=e||.2,t=t||.15,n=n||16770432,i=i||3375104;const o=ut.shared,[a,l,u]=o.setValue(n).toArray(),[h,c,d]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,h,c,d,t,0,a-h,l-c,u-d,0,0];this._loadMatrix(f,s)}night(e,t){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}q1.prototype.grayscale=q1.prototype.greyscale;var E8=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,C8=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class P8 extends sn{constructor(e,t){const n=new Tt;e.renderable=!1,super(C8,E8,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,t==null&&(t=20),this.scale=new He(t,t)}apply(e,t,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var A8=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,k8=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class I8 extends sn{constructor(){super(k8,A8)}}var M8=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class R8 extends sn{constructor(e=.5,t=Math.random()){super(hk,M8,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const WE={AlphaFilter:v8,BlurFilter:S8,BlurFilterPass:V1,ColorMatrixFilter:q1,DisplacementFilter:P8,FXAAFilter:I8,NoiseFilter:R8};Object.entries(WE).forEach(([r,e])=>{Object.defineProperty(WE,r,{get(){return qe("7.1.0",`filters.${r} has moved to ${r}`),e}})});class O8{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Xt.system.add(this.tickerUpdate,this,ba.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Xt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const ea=new O8;class md{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=md.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new He,this.page=new He,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class wm extends md{constructor(){super(...arguments),this.client=new He,this.movement=new He,this.offset=new He,this.global=new He,this.screen=new He}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,s,o,a,l,u,h,c,d,f,g,v){throw new Error("Method not implemented.")}}class Pi extends wm{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Du extends wm{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Du.DOM_DELTA_PIXEL=0,Du.DOM_DELTA_LINE=1,Du.DOM_DELTA_PAGE=2;const N8=2048,F8=new He,ry=new He;class B8{constructor(e){this.dispatch=new dd,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){ea.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,F8.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let n=0;n<N8&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ea.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const d=h[c],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,i,s,o||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const g=e.isInteractive();(f.length>0||g)&&(g&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(t),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,n)&&i(e,n)?u?[e]:[]:null}hitTestRecursive(e,t,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(ea.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const h=l[u],c=this.hitTestRecursive(h,this._isInteractive(t)?t:h.eventMode,n,i,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const d=e.isInteractive();return(c.length>0||d)&&c.push(e),c}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var n;if(e.hitArea&&(e.worldTransform.applyInverse(t,ry),!e.hitArea.contains(ry.x,ry.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var s,o;t=t??e.type;const n=`on${t}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var l,u;if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==t.target){const h=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,h,s);if(this.dispatchEvent(c,"pointerout"),n&&this.dispatchEvent(c,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}if(s!==t.target){const h=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(t,h);this.dispatchEvent(c,"pointerover"),n&&this.dispatchEvent(c,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const f=this.clonePointerEvent(t,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=t.target)==null?void 0:u.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=i.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Du)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const i=this.allocateEvent(Pi);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(Du);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(Pi);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Pi&&t instanceof Pi&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof wm&&t instanceof wm&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const L8=1,D8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},K1=class Q1{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new B8(null),ea.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Pi(null),this.rootWheelEvent=new Du(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Q1.defaultEventFeatures},{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,Q1._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){const s=t[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ea.pointerMoved();const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,ea.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ea.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ea.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=L8),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=D8[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};K1.extension={name:"events",type:[ge.RendererSystem,ge.CanvasRendererSystem]},K1.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Z1=K1;Te.add(Z1);function VE(r){return r==="dynamic"||r==="static"}const U8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??VE(Z1.defaultEventMode)},set interactive(r){qe("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Z1.defaultEventMode},set eventMode(r){this._internalInteractive=VE(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;r=n?`${r}capture`:r;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(r,a,o)}),s?l.once(r,a,o):l.on(r,a,o)},removeEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof md))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ft.mixin(U8);const j8={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ft.mixin(j8);const X8=9,zf=100,H8=0,$8=0,qE=2,KE=1,z8=-1e3,Y8=-1e3,G8=2;class _k{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ai.tablet||ai.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${zf}px`,t.style.height=`${zf}px`,t.style.position="absolute",t.style.top=`${H8}px`,t.style.left=`${$8}px`,t.style.zIndex=qE.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${KE}px`,e.style.height=`${KE}px`,e.style.position="absolute",e.style.top=`${z8}px`,e.style.left=`${Y8}px`,e.style.zIndex=G8.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){const e=performance.now();if(ai.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=i/o*l,h=s/a*l;let c=this.div;c.style.left=`${t}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Bu(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let g=f.hitArea;const v=f.worldTransform;f.hitArea?(c.style.left=`${(v.tx+g.x*v.a)*u}px`,c.style.top=`${(v.ty+g.y*v.d)*h}px`,c.style.width=`${g.width*v.a*u}px`,c.style.height=`${g.height*v.d*h}px`):(g=f.getBounds(),this.capHitArea(g),c.style.left=`${g.x*u}px`,c.style.top=`${g.y*h}px`,c.style.width=`${g.width*u}px`,c.style.height=`${g.height*h}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${zf}px`,t.style.height=`${zf}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=qE.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new md(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===X8&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}_k.extension={name:"accessibility",type:[ge.RendererPlugin,ge.CanvasRendererPlugin]};Te.add(_k);const wk=class J1{constructor(e){this.stage=new Zr,e=Object.assign({forceCanvas:!1},e),this.renderer=r8(e),J1._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const n=J1._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};wk._plugins=[];let Rg=wk;Te.handleByList(ge.Application,Rg._plugins);class bk{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}bk.extension=ge.Application;Te.add(bk);const QE={loader:ge.LoadParser,resolver:ge.ResolveParser,cache:ge.CacheParser,detection:ge.DetectionParser};Te.handle(ge.Asset,r=>{const e=r.ref;Object.entries(QE).filter(([t])=>!!e[t]).forEach(([t,n])=>Te.add(Object.assign(e[t],{extension:e[t].extension??n})))},r=>{const e=r.ref;Object.keys(QE).filter(t=>!!e[t]).forEach(t=>Te.remove(e[t]))});class W8{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function wc(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function Dn(r,e){const t=r.split("?")[0],n=Vt.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const Mi=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r),ex=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function Sk(r,e,t,n,i){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?Sk(r.replace(n[t],a),e,t+1,n,i):i.push(r.replace(n[t],a))}}function V8(r){const e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){const i=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),Sk(r,i,0,t,n)}else n.push(r);return n}const bm=r=>!Array.isArray(r);class q8{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=Mi(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){i=l.getCacheableAssets(n,t);break}}i||(i={},n.forEach(a=>{i[a]=t}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof Re){const a=t;n.forEach(l=>{a.baseTexture!==Re.EMPTY.baseTexture&&De.addToCache(a.baseTexture,l),Re.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(n=>{this._cache.delete(n)}),t.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const el=new q8;class K8{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,e,t,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,t,this),n.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,i,t,this))&&(i=await u.parse(i,t,this)||i,n.parser=u)}return i})(),n}async load(e,t){this._parsersValidated||this._validateParsers();let n=0;const i={},s=bm(e),o=Mi(e,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const h=Vt.toAbsolute(u.src);if(!i[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),i[u.src]=await this.promiseCache[h].promise,t&&t(++n/a)}catch(c){throw delete this.promiseCache[h],delete i[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const t=Mi(e,n=>({alias:[n],src:n})).map(async n=>{var o,a;const i=Vt.toAbsolute(n.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,n,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var zn=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(zn||{});const Q8=".json",Z8="application/json",J8={extension:{type:ge.LoadParser,priority:zn.Low},name:"loadJson",test(r){return wc(r,Z8)||Dn(r,Q8)},async load(r){return await(await xe.ADAPTER.fetch(r)).json()}};Te.add(J8);const e6=".txt",t6="text/plain",r6={name:"loadTxt",extension:{type:ge.LoadParser,priority:zn.Low},test(r){return wc(r,t6)||Dn(r,e6)},async load(r){return await(await xe.ADAPTER.fetch(r)).text()}};Te.add(r6);const n6=["normal","bold","100","200","300","400","500","600","700","800","900"],i6=[".ttf",".otf",".woff",".woff2"],s6=["font/ttf","font/otf","font/woff","font/woff2"],o6=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function a6(r){const e=Vt.extname(r),t=Vt.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=t.length>0;for(const s of t)if(!s.match(o6)){n=!1;break}let i=t.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const l6=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function u6(r){return l6.test(r)?r:encodeURI(r)}const c6={extension:{type:ge.LoadParser,priority:zn.Low},name:"loadWebFont",test(r){return wc(r,s6)||Dn(r,i6)},async load(r,e){var n,i,s;const t=xe.ADAPTER.getFontFaceSet();if(t){const o=[],a=((n=e.data)==null?void 0:n.family)??a6(r),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(h=>n6.includes(h)))??["normal"],u=e.data??{};for(let h=0;h<l.length;h++){const c=l[h],d=new FontFace(a,`url(${u6(r)})`,{...u,weight:c});await d.load(),t.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>xe.ADAPTER.getFontFaceSet().delete(e))}};Te.add(c6);const h6=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Uu=null,tx=class{constructor(){Uu||(Uu=URL.createObjectURL(new Blob([h6],{type:"application/javascript"}))),this.worker=new Worker(Uu)}};tx.revokeObjectURL=function(){Uu&&(URL.revokeObjectURL(Uu),Uu=null)};const d6=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let ju=null;class Tk{constructor(){ju||(ju=URL.createObjectURL(new Blob([d6],{type:"application/javascript"}))),this.worker=new Worker(ju)}}Tk.revokeObjectURL=function(){ju&&(URL.revokeObjectURL(ju),ju=null)};let ZE=0,ny;class f6{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new tx;t.addEventListener("message",n=>{t.terminate(),tx.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){ny===void 0&&(ny=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<ny&&(this._createdWorkers++,e=new Tk().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),n=t.id;this.resolveHash[ZE]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:ZE++,id:n})}}const JE=new f6;function gd(r,e,t){r.resource.internal=!0;const n=new Re(r),i=()=>{delete e.promiseCache[t],el.has(t)&&el.remove(t)};return n.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const p6=[".jpeg",".jpg",".png",".webp",".avif"],m6=["image/jpeg","image/png","image/webp","image/avif"];async function g6(r){const e=await xe.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Og={name:"loadTextures",extension:{type:ge.LoadParser,priority:zn.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return wc(r,m6)||Dn(r,p6)},async load(r,e,t){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await JE.isImageBitmapSupported()?i=await JE.loadImageBitmap(r):i=await g6(r):i=await new Promise((l,u)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=r,h.complete?l(h):(h.onload=()=>l(h),h.onerror=c=>u(c))});const s={...e.data};s.resolution??(s.resolution=xo(r)),n&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new De(i,s);return o.resource.src=r,gd(o,t,r)},unload(r){r.destroy(!0)}};Te.add(Og);const v6=".svg",y6="image/svg+xml",x6={extension:{type:ge.LoadParser,priority:zn.High},name:"loadSVG",test(r){return wc(r,y6)||Dn(r,v6)},async testParse(r){return z1.test(r)},async parse(r,e,t){var s;const n=new z1(r,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await n.load();const i=new De(n,{resolution:xo(r),...e==null?void 0:e.data});return i.resource.src=e.src,gd(i,t,e.src)},async load(r,e){return(await xe.ADAPTER.fetch(r)).text()},unload:Og.unload};Te.add(x6);const _6=[".mp4",".m4v",".webm",".ogv"],w6=["video/mp4","video/webm","video/ogg"],b6={name:"loadVideo",extension:{type:ge.LoadParser,priority:zn.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return wc(r,w6)||Dn(r,_6)},async load(r,e,t){var o;let n;const i=await(await xe.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new vk(s,a);await l.load();const u=new De(l,{alphaMode:await I5(),resolution:xo(r),...e==null?void 0:e.data});u.resource.src=r,n=gd(u,t,r),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return n},unload(r){r.destroy(!0)}};Te.add(b6);class S6{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,name:n,src:i,srcs:s}=e;return Mi(t||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];Array.isArray(t)?t.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);n.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(e,u));n.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(t).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:s,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:s,src:t[i]});else{const o=t[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[e]=n}add(e,t,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(qe("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Mi(o).forEach(l=>{const{src:u,srcs:h}=l;let{data:c,format:d,loadParser:f}=l;const g=Mi(u||h).map(y=>typeof y=="string"?V8(y):Array.isArray(y)?y:[y]),v=this.getAlias(l);Array.isArray(v)?v.forEach(a):a(v);const x=[];g.forEach(y=>{y.forEach(b=>{let _={};if(typeof b!="object"){_.src=b;for(let S=0;S<this._parsers.length;S++){const I=this._parsers[S];if(I.test(b)){_=I.parse(b);break}}}else c=b.data??c,d=b.format??d,f=b.loadParser??f,_={..._,...b};if(!v)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:v,data:c,format:d,loadParser:f}),x.push(_)})}),v.forEach(y=>{this._assetMap[y]=x})})}resolveBundle(e){const t=bm(e);e=Mi(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(i,l)]=u}n[i]=a}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const i in t)n[i]=t[i].src;return n}return t.src}resolve(e){const t=bm(e);e=Mi(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:n,data:i,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=Vt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??Vt.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class T6{constructor(){this._detections=[],this._initialized=!1,this.resolver=new S6,this.loader=new K8,this.cache=el,this._backgroundLoader=new W8(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,n,i,s){this.resolver.add(e,t,n,i,s)}async load(e,t){this._initialized||await this.init();const n=bm(e),i=Mi(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,t);return n?o[i[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const u=()=>{t==null||t(++a/l)},h=o.map(c=>{const d=i[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[c]=f})});return await Promise.all(h),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return el.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=el.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,t);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[i[l]]=u,el.set(h,u)}),o}async unload(e){this._initialized||await this.init();const t=Mi(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=Mi(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(n=>{el.remove(n.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((n,i)=>t.indexOf(n)===i),t}get detections(){return this._detections}get preferWorkers(){return Og.config.preferWorkers}set preferWorkers(e){qe("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}}const on=new T6;Te.handleByList(ge.LoadParser,on.loader.parsers).handleByList(ge.ResolveParser,on.resolver.parsers).handleByList(ge.CacheParser,on.cache.parsers).handleByList(ge.DetectionParser,on.detections);const E6={extension:ge.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof Re),getCacheableAssets:(r,e)=>{const t={};return r.forEach(n=>{e.forEach((i,s)=>{t[n+(s===0?"":s+1)]=i})}),t}};Te.add(E6);async function Ek(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const Ck={extension:{type:ge.DetectionParser,priority:1},test:async()=>Ek("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};Te.add(Ck);const Pk={extension:{type:ge.DetectionParser,priority:0},test:async()=>Ek("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};Te.add(Pk);const eC=["png","jpg","jpeg"],C6={extension:{type:ge.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...eC],remove:async r=>r.filter(e=>!eC.includes(e))};Te.add(C6);const P6="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function W_(r){return P6?!1:document.createElement("video").canPlayType(r)!==""}const A6={extension:{type:ge.DetectionParser,priority:0},test:async()=>W_("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};Te.add(A6);const k6={extension:{type:ge.DetectionParser,priority:0},test:async()=>W_("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};Te.add(k6);const I6={extension:{type:ge.DetectionParser,priority:0},test:async()=>W_("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};Te.add(I6);const M6={extension:ge.ResolveParser,test:Og.test,parse:r=>{var e;return{resolution:parseFloat(((e=xe.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:Vt.extname(r).slice(1),src:r}}};Te.add(M6);var Ir=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(Ir||{});const Sm={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let vs,su;function tC(){su={bptc:vs.getExtension("EXT_texture_compression_bptc"),astc:vs.getExtension("WEBGL_compressed_texture_astc"),etc:vs.getExtension("WEBGL_compressed_texture_etc"),s3tc:vs.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:vs.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:vs.getExtension("WEBGL_compressed_texture_pvrtc")||vs.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:vs.getExtension("WEBGL_compressed_texture_etc1"),atc:vs.getExtension("WEBGL_compressed_texture_atc")}}const R6={extension:{type:ge.DetectionParser,priority:2},test:async()=>{const r=xe.ADAPTER.createCanvas().getContext("webgl");return r?(vs=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{su||tC();const e=[];for(const t in su)su[t]&&e.push(t);return[...e,...r]},remove:async r=>(su||tC(),r.filter(e=>!(e in su)))};Te.add(R6);class O6 extends Eg{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,t),this.origin=n,this.buffer=i?new I1(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new I1(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class al extends O6{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=al._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||al._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:h}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,u,0,h)}return!0}onBlobLoaded(){this._levelBuffers=al._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,n,i,s,o,a){const l=new Array(n);let u=e.byteOffset,h=o,c=a,d=h+i-1&~(i-1),f=c+s-1&~(s-1),g=d*f*Sm[t];for(let v=0;v<n;v++)l[v]={levelID:v,levelWidth:n>1?h:d,levelHeight:n>1?c:f,levelBuffer:new Uint8Array(e.buffer,u,g)},u+=g,h=h>>1||1,c=c>>1||1,d=h+i-1&~(i-1),f=c+s-1&~(s-1),g=d*f*Sm[t];return l}}const iy=4,Yf=124,N6=32,rC=20,F6=542327876,Gf={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},B6={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Wf={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},L6=1,D6=2,U6=4,j6=64,X6=512,H6=131072,$6=827611204,z6=861165636,Y6=894720068,G6=808540228,W6=4,V6={[$6]:Ir.COMPRESSED_RGBA_S3TC_DXT1_EXT,[z6]:Ir.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Y6]:Ir.COMPRESSED_RGBA_S3TC_DXT5_EXT},q6={70:Ir.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Ir.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Ir.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Ir.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Ir.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Ir.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Ir.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Ir.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Ir.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Ir.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Ir.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Ir.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Ir.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function K6(r){const e=new Uint32Array(r);if(e[0]!==F6)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,Yf/Uint32Array.BYTES_PER_ELEMENT),n=t[Gf.HEIGHT],i=t[Gf.WIDTH],s=t[Gf.MIPMAP_COUNT],o=new Uint32Array(r,Gf.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,N6/Uint32Array.BYTES_PER_ELEMENT),a=o[L6];if(a&U6){const l=o[B6.FOURCC];if(l!==G6){const b=V6[l],_=iy+Yf,S=new Uint8Array(r,_);return[new al(S,{format:b,width:i,height:n,levels:s})]}const u=iy+Yf,h=new Uint32Array(e.buffer,u,rC/Uint32Array.BYTES_PER_ELEMENT),c=h[Wf.DXGI_FORMAT],d=h[Wf.RESOURCE_DIMENSION],f=h[Wf.MISC_FLAG],g=h[Wf.ARRAY_SIZE],v=q6[c];if(v===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(f===W6)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,y=iy+Yf+rC;if(g===1)x.push(new Uint8Array(r,y));else{const b=Sm[v];let _=0,S=i,I=n;for(let k=0;k<s;k++){const M=Math.max(1,S+3&-4),O=Math.max(1,I+3&-4),L=M*O*b;_+=L,S=S>>>1,I=I>>>1}let A=y;for(let k=0;k<g;k++)x.push(new Uint8Array(r,A,_)),A+=_}return x.map(b=>new al(b,{format:v,width:i,height:n,levels:s}))}throw a&j6?new Error("DDSParser does not support uncompressed texture data."):a&X6?new Error("DDSParser does not supported YUV uncompressed texture data."):a&H6?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&D6?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const nC=[171,75,84,88,32,49,49,187,13,10,26,10],Q6=67305985,Si={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},rx=64,iC={[Se.UNSIGNED_BYTE]:1,[Se.UNSIGNED_SHORT]:2,[Se.INT]:4,[Se.UNSIGNED_INT]:4,[Se.FLOAT]:4,[Se.HALF_FLOAT]:8},Z6={[de.RGBA]:4,[de.RGB]:3,[de.RG]:2,[de.RED]:1,[de.LUMINANCE]:1,[de.LUMINANCE_ALPHA]:2,[de.ALPHA]:1},J6={[Se.UNSIGNED_SHORT_4_4_4_4]:2,[Se.UNSIGNED_SHORT_5_5_5_1]:2,[Se.UNSIGNED_SHORT_5_6_5]:2};function eU(r,e,t=!1){const n=new DataView(e);if(!tU(r,n))return null;const i=n.getUint32(Si.ENDIANNESS,!0)===Q6,s=n.getUint32(Si.GL_TYPE,i),o=n.getUint32(Si.GL_FORMAT,i),a=n.getUint32(Si.GL_INTERNAL_FORMAT,i),l=n.getUint32(Si.PIXEL_WIDTH,i),u=n.getUint32(Si.PIXEL_HEIGHT,i)||1,h=n.getUint32(Si.PIXEL_DEPTH,i)||1,c=n.getUint32(Si.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(Si.NUMBER_OF_FACES,i),f=n.getUint32(Si.NUMBER_OF_MIPMAP_LEVELS,i),g=n.getUint32(Si.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const v=4,x=4,y=l+3&-4,b=u+3&-4,_=new Array(c);let S=l*u;s===0&&(S=y*b);let I;if(s!==0?iC[s]?I=iC[s]*Z6[o]:I=J6[s]:I=Sm[a],I===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const A=t?nU(n,g,i):null;let k=S*I,M=l,O=u,L=y,D=b,j=rx+g;for(let F=0;F<f;F++){const B=n.getUint32(j,i);let X=j+4;for(let V=0;V<c;V++){let Q=_[V];Q||(Q=_[V]=new Array(f)),Q[F]={levelID:F,levelWidth:f>1||s!==0?M:L,levelHeight:f>1||s!==0?O:D,levelBuffer:new Uint8Array(e,X,k)},X+=k}j+=B+4,j=j%4!==0?j+4-j%4:j,M=M>>1||1,O=O>>1||1,L=M+v-1&~(v-1),D=O+x-1&~(x-1),k=L*D*I}return s!==0?{uncompressed:_.map(F=>{let B=F[0].levelBuffer,X=!1;return s===Se.FLOAT?B=new Float32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4):s===Se.UNSIGNED_INT?(X=!0,B=new Uint32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4)):s===Se.INT&&(X=!0,B=new Int32Array(F[0].levelBuffer.buffer,F[0].levelBuffer.byteOffset,F[0].levelBuffer.byteLength/4)),{resource:new Eg(B,{width:F[0].levelWidth,height:F[0].levelHeight}),type:s,format:X?rU(o):o}}),kvData:A}:{compressed:_.map(F=>new al(null,{format:a,width:l,height:u,levels:f,levelBuffers:F})),kvData:A}}function tU(r,e){for(let t=0;t<nC.length;t++)if(e.getUint8(t)!==nC[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function rU(r){switch(r){case de.RGBA:return de.RGBA_INTEGER;case de.RGB:return de.RGB_INTEGER;case de.RG:return de.RG_INTEGER;case de.RED:return de.RED_INTEGER;default:return r}}function nU(r,e,t){const n=new Map;let i=0;for(;i<e;){const s=r.getUint32(rx+i,t),o=rx+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),h=new DataView(r.buffer,o+l+1,s-l-1);n.set(u,h),i+=4+s+a}return n}const iU={extension:{type:ge.LoadParser,priority:zn.High},name:"loadDDS",test(r){return Dn(r,".dds")},async load(r,e,t){const n=await(await xe.ADAPTER.fetch(r)).arrayBuffer(),i=K6(n).map(s=>{const o=new De(s,{mipmap:di.OFF,alphaMode:Vr.NO_PREMULTIPLIED_ALPHA,resolution:xo(r),...e.data});return gd(o,t,r)});return i.length===1?i[0]:i},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Te.add(iU);const sU={extension:{type:ge.LoadParser,priority:zn.High},name:"loadKTX",test(r){return Dn(r,".ktx")},async load(r,e,t){const n=await(await xe.ADAPTER.fetch(r)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=eU(r,n),a=i??s,l={mipmap:di.OFF,alphaMode:Vr.NO_PREMULTIPLIED_ALPHA,resolution:xo(r),...e.data},u=a.map(h=>{a===s&&Object.assign(l,{type:h.type,format:h.format});const c=h.resource??h,d=new De(c,l);return d.ktxKeyValueData=o,gd(d,t,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Te.add(sU);const oU=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],aU={extension:ge.ResolveParser,test:r=>{const e=Vt.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var n,i;const e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const s=e.pop();if(oU.includes(s))return{resolution:parseFloat(((n=xe.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:s,src:r}}return{resolution:parseFloat(((i=xe.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:t,src:r}}};Te.add(aU);const Vf=new Ye,lU=4,Ak=class uh{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,n,i){const s=new Image;return s.src=await this.base64(e,t,n,i),s}async base64(e,t,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},t,n)});if(s.toDataURL!==void 0)return s.toDataURL(t,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:n});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&uh._flipY(n,i,s),a&&uh._unpremultiplyAlpha(n);const l=new Y5(i,s,1),u=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return l.context.putImageData(u,0,0),l.canvas}pixels(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&uh._flipY(n,i,s),a&&uh._unpremultiplyAlpha(n),n}_rawPixels(e,t){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof Cl?a=e:(a=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),l=!0,t&&(Vf.width=t.width,Vf.height=t.height,t=Vf)));const u=n.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===de.RGBA,!l){n.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[n.CONTEXT_UID];f.blitFramebuffer&&n.framebuffer.bind(f.blitFramebuffer)}}else i=n.resolution,t||(t=Vf,t.width=n.width/i,t.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const h=Math.max(Math.round(t.width*i),1),c=Math.max(Math.round(t.height*i),1),d=new Uint8Array(lU*h*c);return u.readPixels(Math.round(t.x*i),Math.round(t.y*i),h,c,u.RGBA,u.UNSIGNED_BYTE,d),l&&(a==null||a.destroy(!0)),{pixels:d,width:h,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,n){const i=t<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,u=(n-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,u,u+i),e.set(o,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let n=0;n<t;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};Ak.extension={name:"extract",type:ge.RendererSystem};let uU=Ak;Te.add(uU);const Tm={build(r){const e=r.points;let t,n,i,s,o,a;if(r.type===Nr.CIRC){const g=r.shape;t=g.x,n=g.y,o=a=g.radius,i=s=0}else if(r.type===Nr.ELIP){const g=r.shape;t=g.x,n=g.y,o=g.width,a=g.height,i=s=0}else{const g=r.shape,v=g.width/2,x=g.height/2;t=g.x+v,n=g.y+x,o=a=Math.max(0,Math.min(g.radius,Math.min(v,x))),i=v-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(i?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s;return}let h=0,c=l*4+(i?2:0)+2,d=c,f=u;{const g=i+o,v=s,x=t+g,y=t-g,b=n+v;if(e[h++]=x,e[h++]=b,e[--c]=b,e[--c]=y,s){const _=n-v;e[d++]=y,e[d++]=_,e[--f]=_,e[--f]=x}}for(let g=1;g<l;g++){const v=Math.PI/2*(g/l),x=i+Math.cos(v)*o,y=s+Math.sin(v)*a,b=t+x,_=t-x,S=n+y,I=n-y;e[h++]=b,e[h++]=S,e[--c]=S,e[--c]=_,e[d++]=_,e[d++]=I,e[--f]=I,e[--f]=b}{const g=i,v=s+a,x=t+g,y=t-g,b=n+v,_=n-v;e[h++]=x,e[h++]=b,e[--f]=_,e[--f]=x,i&&(e[h++]=y,e[h++]=b,e[--f]=_,e[--f]=y)}},triangulate(r,e){const t=r.points,n=e.points,i=e.indices;if(t.length===0)return;let s=n.length/2;const o=s;let a,l;if(r.type!==Nr.RREC){const h=r.shape;a=h.x,l=h.y}else{const h=r.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=r.matrix;n.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),s++,n.push(t[0],t[1]);for(let h=2;h<t.length;h+=2)n.push(t[h],t[h+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function sC(r,e=!1){const t=r.length;if(t<6)return;let n=0;for(let i=0,s=r[t-2],o=r[t-1];i<t;i+=2){const a=r[i],l=r[i+1];n+=(a-s)*(l+o),s=a,o=l}if(!e&&n>0||e&&n<=0){const i=t/2;for(let s=i+i%2;s<t;s+=2){const o=t-s-2,a=t-s-1,l=s,u=s+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const kk={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const n=r.holes,i=e.points,s=e.indices;if(t.length>=6){sC(t,!1);const o=[];for(let u=0;u<n.length;u++){const h=n[u];sC(h.points,!0),o.push(t.length/2),t=t.concat(h.points)}const a=QB(t,o,2);if(!a)return;const l=i.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<t.length;u++)i.push(t[u])}}},cU={build(r){const e=r.shape,t=e.x,n=e.y,i=e.width,s=e.height,o=r.points;o.length=0,i>=0&&s>=0&&o.push(t,n,t+i,n,t+i,n+s,t,n+s)},triangulate(r,e){const t=r.points,n=e.points;if(t.length===0)return;const i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},hU={build(r){Tm.build(r)},triangulate(r,e){Tm.triangulate(r,e)}};var ni=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(ni||{}),oa=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(oa||{});const rc={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class oC{static curveTo(e,t,n,i,s,o){const a=o[o.length-2],l=o[o.length-1]-t,u=a-e,h=i-t,c=n-e,d=Math.abs(l*c-u*h);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const f=l*l+u*u,g=h*h+c*c,v=l*h+u*c,x=s*Math.sqrt(f)/d,y=s*Math.sqrt(g)/d,b=x*v/f,_=y*v/g,S=x*c+y*u,I=x*h+y*l,A=u*(y+b),k=l*(y+b),M=c*(x+_),O=h*(x+_),L=Math.atan2(k-I,A-S),D=Math.atan2(O-I,M-S);return{cx:S+e,cy:I+t,radius:s,startAngle:L,endAngle:D,anticlockwise:u*h>c*l}}static arc(e,t,n,i,s,o,a,l,u){const h=a-o,c=rc._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/mm)*40),d=h/(c*2),f=d*2,g=Math.cos(d),v=Math.sin(d),x=c-1,y=x%1/x;for(let b=0;b<=x;++b){const _=b+y*b,S=d+o+f*_,I=Math.cos(S),A=-Math.sin(S);u.push((g*I+v*A)*s+n,(g*-A+v*I)*s+i)}}}class dU{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class V_{static curveLength(e,t,n,i,s,o,a,l){let u=0,h=0,c=0,d=0,f=0,g=0,v=0,x=0,y=0,b=0,_=0,S=e,I=t;for(let A=1;A<=10;++A)h=A/10,c=h*h,d=c*h,f=1-h,g=f*f,v=g*f,x=v*e+3*g*h*n+3*f*c*s+d*a,y=v*t+3*g*h*i+3*f*c*o+d*l,b=S-x,_=I-y,S=x,I=y,u+=Math.sqrt(b*b+_*_);return u}static curveTo(e,t,n,i,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=rc._segmentsCount(V_.curveLength(l,u,e,t,n,i,s,o));let c=0,d=0,f=0,g=0,v=0;a.push(l,u);for(let x=1,y=0;x<=h;++x)y=x/h,c=1-y,d=c*c,f=d*c,g=y*y,v=g*y,a.push(f*l+3*d*y*e+3*c*g*n+v*s,f*u+3*d*y*t+3*c*g*i+v*o)}}function aC(r,e,t,n,i,s,o,a){const l=r-t*i,u=e-n*i,h=r+t*s,c=e+n*s;let d,f;o?(d=n,f=-t):(d=-n,f=t);const g=l+d,v=u+f,x=h+d,y=c+f;return a.push(g,v,x,y),2}function $a(r,e,t,n,i,s,o,a){const l=t-r,u=n-e;let h=Math.atan2(l,u),c=Math.atan2(i-r,s-e);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const f=c-h,g=Math.abs(f),v=Math.sqrt(l*l+u*u),x=(15*g*Math.sqrt(v)/Math.PI>>0)+1,y=f/x;if(d+=y,a){o.push(r,e,t,n);for(let b=1,_=d;b<x;b++,_+=y)o.push(r,e,r+Math.sin(_)*v,e+Math.cos(_)*v);o.push(r,e,i,s)}else{o.push(t,n,r,e);for(let b=1,_=d;b<x;b++,_+=y)o.push(r+Math.sin(_)*v,e+Math.cos(_)*v,r,e);o.push(i,s,r,e)}return x*2}function fU(r,e){const t=r.shape;let n=r.points||t.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=r.lineStyle,o=new He(n[0],n[1]),a=new He(n[n.length-2],n[n.length-1]),l=t.type!==Nr.POLY||t.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const Q=(o.x+a.x)*.5,H=(a.y+o.y)*.5;n.unshift(Q,H),n.push(Q,H)}const h=e.points,c=n.length/2;let d=n.length;const f=h.length/2,g=s.width/2,v=g*g,x=s.miterLimit*s.miterLimit;let y=n[0],b=n[1],_=n[2],S=n[3],I=0,A=0,k=-(b-S),M=y-_,O=0,L=0,D=Math.sqrt(k*k+M*M);k/=D,M/=D,k*=g,M*=g;const j=s.alignment,F=(1-j)*2,B=j*2;l||(s.cap===oa.ROUND?d+=$a(y-k*(F-B)*.5,b-M*(F-B)*.5,y-k*F,b-M*F,y+k*B,b+M*B,h,!0)+2:s.cap===oa.SQUARE&&(d+=aC(y,b,k,M,F,B,!0,h))),h.push(y-k*F,b-M*F,y+k*B,b+M*B);for(let Q=1;Q<c-1;++Q){y=n[(Q-1)*2],b=n[(Q-1)*2+1],_=n[Q*2],S=n[Q*2+1],I=n[(Q+1)*2],A=n[(Q+1)*2+1],k=-(b-S),M=y-_,D=Math.sqrt(k*k+M*M),k/=D,M/=D,k*=g,M*=g,O=-(S-A),L=_-I,D=Math.sqrt(O*O+L*L),O/=D,L/=D,O*=g,L*=g;const H=_-y,G=b-S,$=_-I,W=A-S,Z=H*$+G*W,se=G*$-W*H,ae=se<0;if(Math.abs(se)<.001*Math.abs(Z)){h.push(_-k*F,S-M*F,_+k*B,S+M*B),Z>=0&&(s.join===ni.ROUND?d+=$a(_,S,_-k*F,S-M*F,_-O*F,S-L*F,h,!1)+4:d+=2,h.push(_-O*B,S-L*B,_+O*F,S+L*F));continue}const ye=(-k+y)*(-M+S)-(-k+_)*(-M+b),Oe=(-O+I)*(-L+S)-(-O+_)*(-L+A),Be=(H*Oe-$*ye)/se,ze=(W*ye-G*Oe)/se,Ve=(Be-_)*(Be-_)+(ze-S)*(ze-S),$e=_+(Be-_)*F,Le=S+(ze-S)*F,ct=_-(Be-_)*B,Je=S-(ze-S)*B,Pr=Math.min(H*H+G*G,$*$+W*W),Dr=ae?F:B,rs=Pr+Dr*Dr*v,Ml=Ve<=rs;let gi=s.join;if(gi===ni.MITER&&Ve/v>x&&(gi=ni.BEVEL),Ml)switch(gi){case ni.MITER:{h.push($e,Le,ct,Je);break}case ni.BEVEL:{ae?h.push($e,Le,_+k*B,S+M*B,$e,Le,_+O*B,S+L*B):h.push(_-k*F,S-M*F,ct,Je,_-O*F,S-L*F,ct,Je),d+=2;break}case ni.ROUND:{ae?(h.push($e,Le,_+k*B,S+M*B),d+=$a(_,S,_+k*B,S+M*B,_+O*B,S+L*B,h,!0)+4,h.push($e,Le,_+O*B,S+L*B)):(h.push(_-k*F,S-M*F,ct,Je),d+=$a(_,S,_-k*F,S-M*F,_-O*F,S-L*F,h,!1)+4,h.push(_-O*F,S-L*F,ct,Je));break}}else{switch(h.push(_-k*F,S-M*F,_+k*B,S+M*B),gi){case ni.MITER:{ae?h.push(ct,Je,ct,Je):h.push($e,Le,$e,Le),d+=2;break}case ni.ROUND:{ae?d+=$a(_,S,_+k*B,S+M*B,_+O*B,S+L*B,h,!0)+2:d+=$a(_,S,_-k*F,S-M*F,_-O*F,S-L*F,h,!1)+2;break}}h.push(_-O*F,S-L*F,_+O*B,S+L*B),d+=2}}y=n[(c-2)*2],b=n[(c-2)*2+1],_=n[(c-1)*2],S=n[(c-1)*2+1],k=-(b-S),M=y-_,D=Math.sqrt(k*k+M*M),k/=D,M/=D,k*=g,M*=g,h.push(_-k*F,S-M*F,_+k*B,S+M*B),l||(s.cap===oa.ROUND?d+=$a(_-k*(F-B)*.5,S-M*(F-B)*.5,_-k*F,S-M*F,_+k*B,S+M*B,h,!1)+2:s.cap===oa.SQUARE&&(d+=aC(_,S,k,M,F,B,!1,h)));const X=e.indices,V=rc.epsilon*rc.epsilon;for(let Q=f;Q<d+f-2;++Q)y=h[Q*2],b=h[Q*2+1],_=h[(Q+1)*2],S=h[(Q+1)*2+1],I=h[(Q+2)*2],A=h[(Q+2)*2+1],!(Math.abs(y*(S-A)+_*(A-b)+I*(b-S))<V)&&X.push(Q,Q+1,Q+2)}function pU(r,e){let t=0;const n=r.shape,i=r.points||n.points,s=n.type!==Nr.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,u=o.length/2;let h=u;for(o.push(i[0],i[1]),t=1;t<l;t++)o.push(i[t*2],i[t*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function lC(r,e){r.lineStyle.native?pU(r,e):fU(r,e)}class q_{static curveLength(e,t,n,i,s,o){const a=e-2*n+s,l=t-2*i+o,u=2*n-2*e,h=2*i-2*t,c=4*(a*a+l*l),d=4*(a*u+l*h),f=u*u+h*h,g=2*Math.sqrt(c+d+f),v=Math.sqrt(c),x=2*c*v,y=2*Math.sqrt(f),b=d/v;return(x*g+v*d*(g-y)+(4*f*c-d*d)*Math.log((2*v+b+g)/(b+y)))/(4*x)}static curveTo(e,t,n,i,s){const o=s[s.length-2],a=s[s.length-1],l=rc._segmentsCount(q_.curveLength(o,a,e,t,n,i));let u=0,h=0;for(let c=1;c<=l;++c){const d=c/l;u=o+(e-o)*d,h=a+(t-a)*d,s.push(u+(e+(n-e)*d-u)*d,h+(t+(i-t)*d-h)*d)}}}const sy={[Nr.POLY]:kk,[Nr.CIRC]:Tm,[Nr.ELIP]:Tm,[Nr.RECT]:cU,[Nr.RREC]:hU},uC=[],qf=[];class Em{constructor(e,t=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new Em(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Ql=new He,Ik=class Mk extends O2{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new _m,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),qf.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),uC.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,i=null){const s=new Em(e,t,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const n=new Em(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let n=0;n<t.length;++n){const i=t[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Ql):Ql.copyFrom(e),i.shape.contains(Ql.x,Ql.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Ql.x,Ql.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;const u=t[l],h=u.fillStyle,c=u.lineStyle;sy[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(h.visible||c.visible)&&this.processHoles(u.holes);for(let d=0;d<2;d++){const f=d===0?h:c;if(!f.visible)continue;const g=f.texture.baseTexture,v=this.indices.length,x=this.points.length/2;g.wrapMode=ci.REPEAT,d===0?this.processFill(u):this.processLine(u);const y=this.points.length/2-x;y!==0&&(n&&!this._compareStyles(i,f)&&(n.end(v,x),n=null),n||(n=uC.pop()||new dU,n.begin(f,v,x),this.batches.push(n),i=f),this.addUvs(this.points,e,f.texture,x,y,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,n=e.length;t<n;t++){const i=e[t];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<Mk.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++De._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),qf.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,n=this.textureIds;let i=qf.pop();i||(i=new O1,i.texArray=new D1),i.texArray.count=0,i.start=0,i.size=0,i.type=Oi.TRIANGLES;let s=0,o=null,a=0,l=!1,u=Oi.TRIANGLES,h=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const d=this.batches[c],f=8,g=d.style,v=g.texture.baseTexture;l!==!!g.native&&(l=!!g.native,u=l?Oi.LINES:Oi.TRIANGLES,o=null,s=f,e++),o!==v&&(o=v,v._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=qf.pop(),i||(i=new O1,i.texArray=new D1),this.drawCalls.push(i)),i.start=h,i.size=0,i.texArray.count=0,i.type=u),v.touched=1,v._batchEnabled=e,v._batchLocation=s,v.wrapMode=ci.REPEAT,i.texArray.elements[i.texArray.count++]=v,s++)),i.size+=d.size,h+=d.size,a=v._batchLocation,this.addColors(t,g.color,g.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}De._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let u=0;u<e.length/2;u++)o[l++]=e[u*2],o[l++]=e[u*2+1],o[l++]=t[u*2],o[l++]=t[u*2+1],a[l++]=n[u],o[l++]=i[u];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?kk.triangulate(e,this):sy[e.type].triangulate(e,this)}processLine(e){lC(e,this);for(let t=0;t<e.holes.length;t++)lC(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const n=e[t];sy[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=t.a*i+t.c*s+t.tx,e[n*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,n,i,s=0){const o=ut.shared.setValue(t).toLittleEndianNumber(),a=ut.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,t,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=t}addUvs(e,t,n,i,s,o=null){let a=0;const l=t.length,u=n.frame;for(;a<s;){let c=e[(i+a)*2],d=e[(i+a)*2+1];if(o){const f=o.a*c+o.c*d+o.tx;d=o.b*c+o.d*d+o.ty,c=f}a++,t.push(c/u.width,d/u.height)}const h=n.baseTexture;(u.width<h.width||u.height<h.height)&&this.adjustUvs(t,n,l,s)}adjustUvs(e,t,n,i){const s=t.baseTexture,o=1e-6,a=n+i*2,l=t.frame,u=l.width/s.width,h=l.height/s.height;let c=l.x/l.width,d=l.y/l.height,f=Math.floor(e[n]+o),g=Math.floor(e[n+1]+o);for(let v=n+2;v<a;v+=2)f=Math.min(f,Math.floor(e[v]+o)),g=Math.min(g,Math.floor(e[v+1]+o));c-=f,d-=g;for(let v=n;v<a;v+=2)e[v]=(e[v]+c)*u,e[v+1]=(e[v+1]+d)*h}};Ik.BATCHABLE_SIZE=100;let mU=Ik;class Ng{constructor(){this.color=16777215,this.alpha=1,this.texture=Re.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Ng;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Re.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class K_ extends Ng{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=oa.BUTT,this.join=ni.MITER,this.miterLimit=10}clone(){const e=new K_;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=oa.BUTT,this.join=ni.MITER,this.miterLimit=10}}const oy={},nx=class $p extends Zr{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ng,this._lineStyle=new K_,this._matrix=null,this._holeMode=!1,this.state=Xs.for2d(),this._geometry=e||new mU,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ut(16777215),this.blendMode=Ie.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new $p(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:Re.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:oa.BUTT,join:ni.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new bh,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new bh,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),q_.curveTo(e,t,n,i,s),this}bezierCurveTo(e,t,n,i,s,o){return this._initCurve(),V_.curveTo(e,t,n,i,s,o,this.currentPath.points),this}arcTo(e,t,n,i,s){this._initCurve(e,t);const o=this.currentPath.points,a=oC.curveTo(e,t,n,i,s,o);if(a){const{cx:l,cy:u,radius:h,startAngle:c,endAngle:d,anticlockwise:f}=a;this.arc(l,u,h,c,d,f)}return this}arc(e,t,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=mm:o&&i<=s&&(i+=mm),s-i===0)return this;const a=e+Math.cos(i)*n,l=t+Math.sin(i)*n,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);c<u&&d<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return oC.arc(a,l,e,t,n,i,s,o,h),this}beginFill(e=0,t){return this.beginTextureFill({texture:Re.WHITE,color:e,alpha:t})}normalizeColor(e){const t=ut.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:Re.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,i){return this.drawShape(new Ye(e,t,n,i))}drawRoundedRect(e,t,n,i,s){return this.drawShape(new Ag(e,t,n,i,s))}drawCircle(e,t,n){return this.drawShape(new Cg(e,t,n))}drawEllipse(e,t,n,i){return this.drawShape(new Pg(e,t,n,i))}drawPolygon(...e){let t,n=!0;const i=e[0];i.points?(n=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new bh(t);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Nr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:t,indices:u,uvs:l,_batchRGB:ut.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const t=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=t.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,ut.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:n,type:i,size:s,start:o}=t,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let t=this.shader;const n=this.pluginName;if(!t){if(!oy[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Tt,default:Xi.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;oy[n]=new Hi(a,o)}t=oy[n]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,$p._TEMP_POINT),this._geometry.containsPoint($p._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=ut.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this._geometry.points,h=this.vertexData;let c=0;for(let d=0;d<u.length;d+=2){const f=u[d],g=u[d+1];h[c++]=n*f+s*g+a,h[c++]=o*g+i*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};nx.curves=rc,nx._TEMP_POINT=new He;let Xu=nx;class gU{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const ay=new He,cC=new bh,Rk=class Ok extends Zr{constructor(e,t,n,i=Oi.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||Xs.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=xe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Oi.TRIANGLES&&t.length<Ok.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,h=i.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=t[d*2],g=t[d*2+1];c[d*2]=s*f+a*g+u,c[d*2+1]=o*f+l*g+h}if(this._roundPixels){const d=xe.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new gU(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ay);const t=this.geometry.getBuffer("aVertexPosition").data,n=cC.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,u=i[a+1]*2,h=i[a+2]*2;if(n[0]=t[l],n[1]=t[l+1],n[2]=t[u],n[3]=t[u+1],n[4]=t[h],n[5]=t[h+1],cC.contains(ay.x,ay.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Rk.BATCHABLE_SIZE=100;let gl=Rk;class vd extends Bs{constructor(e,t,n){super();const i=new bt(e),s=new bt(t,!0),o=new bt(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Se.FLOAT).addAttribute("aTextureCoord",s,2,!1,Se.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var vU=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,yU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class nc extends Hi{constructor(e,t){const n={uSampler:e,alpha:1,uTextureMatrix:Tt.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(n,t.uniforms),super(t.program||ks.from(yU,vU),n),this._colorDirty=!1,this.uvMatrix=new Mg(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new ut(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;ut.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class xU extends vd{constructor(e=100,t=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,l=this.height/o;for(let h=0;h<e;h++){const c=h%this.segWidth,d=h/this.segWidth|0;t.push(c*a,d*l),n.push(c/s,d/o)}const u=s*o;for(let h=0;h<u;h++){const c=h%s,d=h/s|0,f=d*this.segWidth+c,g=d*this.segWidth+c+1,v=(d+1)*this.segWidth+c,x=(d+1)*this.segWidth+c+1;i.push(f,g,v,g,x,v)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class _U extends vd{constructor(e=200,t,n=0){super(new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6)),this.points=t,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,l=e[0];const u=this._width*this.textureScale,h=e.length;for(let d=0;d<h;d++){const f=d*4;if(this.textureScale>0){const g=l.x-e[d].x,v=l.y-e[d].y,x=Math.sqrt(g*g+v*v);l=e[d],a+=x/u}else a=d/(h-1);s[f]=a,s[f+1]=0,s[f+2]=a,s[f+3]=1}let c=0;for(let d=0;d<h-1;d++){const f=d*2;o[c++]=f,o[c++]=f+1,o[c++]=f+2,o[c++]=f+2,o[c++]=f+1,o[c++]=f+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],n,i=0,s=0;const o=this.buffers[0].data,a=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let u=0;u<a;u++){const h=e[u],c=u*4;u<e.length-1?n=e[u+1]:n=h,s=-(n.x-t.x),i=n.y-t.y;const d=Math.sqrt(i*i+s*s);d<1e-6?(i=0,s=0):(i/=d,s/=d,i*=l,s*=l),o[c]=h.x+i,o[c+1]=h.y+s,o[c+2]=h.x-i,o[c+3]=h.y-s,t=h}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class wU extends gl{constructor(e,t,n){const i=new xU(e.width,e.height,t,n),s=new nc(Re.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:n}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const Kf=10;class bU extends wU{constructor(e,t,n,i,s){var o,a,l,u;super(Re.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??((o=e.defaultBorders)==null?void 0:o.left)??Kf,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??Kf,this._topHeight=n??((l=e.defaultBorders)==null?void 0:l.top)??Kf,this._bottomHeight=s??((u=e.defaultBorders)==null?void 0:u.bottom)??Kf,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(t,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class SU extends gl{constructor(e=Re.EMPTY,t,n,i,s){const o=new vd(t,n,i);o.getBuffer("aVertexPosition").static=!1;const a=new nc(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class TU extends gl{constructor(e,t,n=0){const i=new _U(e.height,t,n),s=new nc(e);n>0&&(e.baseTexture.wrapMode=ci.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}}class EU extends Zr{constructor(e=1500,t,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Ie.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new ut(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class hC{constructor(e,t,n){this.geometry=new Bs,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Se.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new bt($5(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new bt(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new bt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Se.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Se.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,t,n,s.type===Se.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,t,n,s.type===Se.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var CU=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,PU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Nk extends Ig{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Tt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Se.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Hi.from(PU,CU,{}),this.state=Xs.for2d()}render(e){const t=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=I2(e.blendMode,u),s.state.set(this.state);const h=s.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=ut.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,g=0;f<o;f+=i,g+=1){let v=o-f;v>i&&(v=i),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[g];x.uploadDynamic(t,f,v);const y=e._bufferUpdateIDs[g]||0;d=d||x._updateID<y,d&&(x._updateID=e._updateID,x.uploadStatic(t,f,v)),s.geometry.bind(x.geometry),h.drawElements(h.TRIANGLES,v*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)t.push(new hC(this.properties,s,i));return t}_generateOneMoreBuffer(e){const t=e._batchSize,n=e._properties;return new hC(this.properties,n,t)}uploadVertices(e,t,n,i,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<n;++c){const d=e[t+c],f=d._texture,g=d.scale.x,v=d.scale.y,x=f.trim,y=f.orig;x?(l=x.x-d.anchor.x*y.width,a=l+x.width,h=x.y-d.anchor.y*y.height,u=h+x.height):(a=y.width*(1-d.anchor.x),l=y.width*-d.anchor.x,u=y.height*(1-d.anchor.y),h=y.height*-d.anchor.y),i[o]=l*g,i[o+1]=h*v,i[o+s]=a*g,i[o+s+1]=h*v,i[o+s*2]=a*g,i[o+s*2+1]=u*v,i[o+s*3]=l*g,i[o+s*3+1]=u*v,o+=s*4}}uploadPosition(e,t,n,i,s,o){for(let a=0;a<n;a++){const l=e[t+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,t,n,i,s,o){for(let a=0;a<n;a++){const l=e[t+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,t,n,i,s,o){for(let a=0;a<n;++a){const l=e[t+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,n,i,s,o){for(let a=0;a<n;++a){const l=e[t+a],u=ut.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Nk.extension={name:"particle",type:ge.RendererPlugin};Te.add(Nk);var Fg=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Fg||{});const Qf={willReadFrequently:!0},ys=class ke{static get experimentalLetterSpacingSupported(){let e=ke._experimentalLetterSpacingSupported;if(e!==void 0){const t=xe.ADAPTER.getCanvasRenderingContext2D().prototype;e=ke._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,s,o,a,l,u){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,t,n,i=ke._canvas){n=n??t.wordWrap;const s=t.toFontString(),o=ke.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=i.getContext("2d",Qf);a.font=s;const l=(n?ke.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let g=0;g<l.length;g++){const v=ke._measureText(l[g],t.letterSpacing,a);u[g]=v,h=Math.max(h,v)}let c=h+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const d=t.lineHeight||o.fontSize+t.strokeThickness;let f=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new ke(e,t,c,f,l,u,d+t.leading,h,o)}static _measureText(e,t,n){let i=!1;ke.experimentalLetterSpacingSupported&&(ke.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=t:s+=(ke.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,n=ke._canvas){const i=n.getContext("2d",Qf);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:h}=t,c=ke.collapseSpaces(h),d=ke.collapseNewlines(h);let f=!c;const g=t.wordWrapWidth+u,v=ke.tokenize(e);for(let x=0;x<v.length;x++){let y=v[x];if(ke.isNewline(y)){if(!d){a+=ke.addLine(o),f=!c,o="",s=0;continue}y=" "}if(c){const _=ke.isBreakingSpace(y),S=ke.isBreakingSpace(o[o.length-1]);if(_&&S)continue}const b=ke.getFromCache(y,u,l,i);if(b>g)if(o!==""&&(a+=ke.addLine(o),o="",s=0),ke.canBreakWords(y,t.breakWords)){const _=ke.wordWrapSplit(y);for(let S=0;S<_.length;S++){let I=_[S],A=I,k=1;for(;_[S+k];){const O=_[S+k];if(!ke.canBreakChars(A,O,y,S,t.breakWords))I+=O;else break;A=O,k++}S+=k-1;const M=ke.getFromCache(I,u,l,i);M+s>g&&(a+=ke.addLine(o),f=!1,o="",s=0),o+=I,s+=M}}else{o.length>0&&(a+=ke.addLine(o),o="",s=0);const _=x===v.length-1;a+=ke.addLine(y,!_),f=!1,o="",s=0}else b+s>g&&(f=!1,a+=ke.addLine(o),o="",s=0),(o.length>0||!ke.isBreakingSpace(y)||f)&&(o+=y,s+=b)}return a+=ke.addLine(o,!1),a}static addLine(e,t=!0){return e=ke.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,n,i){let s=n[e];return typeof s!="number"&&(s=ke._measureText(e,t,i)+t,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!ke.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ke._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ke._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(ke.isBreakingSpace(s,o)||ke.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,s){return!0}static wordWrapSplit(e){return ke.graphemeSegmenter(e)}static measureFont(e){if(ke._fonts[e])return ke._fonts[e];const t={ascent:0,descent:0,fontSize:0},n=ke._canvas,i=ke._context;i.font=e;const s=ke.METRICS_STRING+ke.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(ke.BASELINE_SYMBOL).width);const l=Math.ceil(ke.HEIGHT_MULTIPLIER*a);if(a=a*ke.BASELINE_MULTIPLIER|0,o===0||l===0)return ke._fonts[e]=t,t;n.width=o,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const u=i.getImageData(0,0,o,l).data,h=u.length,c=o*4;let d=0,f=0,g=!1;for(d=0;d<a;++d){for(let v=0;v<c;v+=4)if(u[f+v]!==255){g=!0;break}if(!g)f+=c;else break}for(t.ascent=a-d,f=h-c,g=!1,d=l;d>a;--d){for(let v=0;v<c;v+=4)if(u[f+v]!==255){g=!0;break}if(!g)f-=c;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,ke._fonts[e]=t,t}static clearMetrics(e=""){e?delete ke._fonts[e]:ke._fonts={}}static get _canvas(){var e;if(!ke.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",Qf))!=null&&e.measureText)return ke.__canvas=n,n;t=xe.ADAPTER.createCanvas()}catch{t=xe.ADAPTER.createCanvas()}t.width=t.height=10,ke.__canvas=t}return ke.__canvas}static get _context(){return ke.__context||(ke.__context=ke._canvas.getContext("2d",Qf)),ke.__context}};ys.METRICS_STRING="|ÉqÅ",ys.BASELINE_SYMBOL="M",ys.BASELINE_MULTIPLIER=1.4,ys.HEIGHT_MULTIPLIER=2,ys.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),ys.experimentalLetterSpacing=!1,ys._fonts={},ys._newlines=[10,13],ys._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Ko=ys;const AU=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Fk=class ch{constructor(e){this.styleID=0,this.reset(),uy(this,e,e)}clone(){const e={};return uy(e,this,ch.defaultStyle),new ch(e)}reset(){uy(this,ch.defaultStyle,ch.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=ly(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=ly(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){kU(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=ly(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!AU.includes(i)&&(i=`"${i}"`),t[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};Fk.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Fg.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Ls=Fk;function ly(r){const e=ut.shared,t=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function kU(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function uy(r,e,t){for(const n in t)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}const IU={texture:!0,children:!1,baseTexture:!0},Bk=class ix extends es{constructor(e,t,n){let i=!1;n||(n=xe.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=Re.from(n);s.orig=new Ye,s.trim=new Ye,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=ix.defaultResolution??xe.RESOLUTION,this._autoResolution=ix.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Ko.experimentalLetterSpacing}static set experimentalLetterSpacing(e){qe("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Ko.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=Ko.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,u=i.lineWidths,h=i.maxLineWidth,c=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;let d,f;const g=t.dropShadow?2:1;for(let v=0;v<g;++v){const x=t.dropShadow&&v===0,y=x?Math.ceil(Math.max(1,o)+t.padding*2):0,b=y*this._resolution;if(x){n.fillStyle="black",n.strokeStyle="black";const S=t.dropShadowColor,I=t.dropShadowBlur*this._resolution,A=t.dropShadowDistance*this._resolution;n.shadowColor=ut.shared.setValue(S).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=I,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*A,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*A+b}else n.fillStyle=this._generateFillStyle(t,a,i),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let _=(l-c.fontSize)/2;l-c.fontSize<0&&(_=0);for(let S=0;S<a.length;S++)d=t.strokeThickness/2,f=t.strokeThickness/2+S*l+c.ascent+_,t.align==="right"?d+=h-u[S]:t.align==="center"&&(d+=(h-u[S])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[S],d+t.padding,f+t.padding-y,!0),t.fill&&this.drawLetterSpacing(a[S],d+t.padding,f+t.padding-y)}this.updateTexture()}drawLetterSpacing(e,t,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(Ko.experimentalLetterSpacingSupported&&(Ko.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);return}let a=t;const l=Ko.graphemeSegmenter(e);let u=this.context.measureText(e).width,h=0;for(let c=0;c<l.length;++c){const d=l[c];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let g=c+1;g<l.length;++g)f+=l[g];h=this.context.measureText(f).width,a+=u-h+s,u=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=W5(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,n=this._style,i=n.trim?0:n.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,h=i.slice(),c=e.fillGradientStops.slice();if(!c.length){const d=h.length+1;for(let f=1;f<d;++f)c.push(f/d)}if(h.unshift(i[0]),c.unshift(0),h.push(i[i.length-1]),c.push(1),e.fillGradientType===Fg.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,u+a);const d=n.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){const g=n.lineHeight*(f-1)+d,v=n.lineHeight*f;let x=v;f>0&&g>v&&(x=(v+g)/2);const y=v+d,b=n.lineHeight*(f+1);let _=y;f+1<t.length&&b<y&&(_=(y+b)/2);const S=(_-x)/u;for(let I=0;I<h.length;I++){let A=0;typeof c[I]=="number"?A=c[I]:A=I/h.length;let k=Math.min(1,Math.max(0,x/u+A*S));k=Number(k.toFixed(5)),s.addColorStop(k,h[I])}}}else{s=this.context.createLinearGradient(a,u/2,l+a,u/2);const d=h.length+1;let f=1;for(let g=0;g<h.length;g++){let v;typeof c[g]=="number"?v=c[g]:v=f/d,s.addColorStop(v,h[g]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},IU,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=sa(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=sa(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Ls?this._style=e:this._style=new Ls(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};Bk.defaultAutoResolution=!0;let Q_=Bk;class MU{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function RU(r,e){var n;let t=!1;if((n=r==null?void 0:r._textures)!=null&&n.length){for(let i=0;i<r._textures.length;i++)if(r._textures[i]instanceof Re){const s=r._textures[i].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function OU(r,e){if(r.baseTexture instanceof De){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function NU(r,e){if(r._texture&&r._texture instanceof Re){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function FU(r,e){return e instanceof Q_?(e.updateText(!0),!0):!1}function BU(r,e){if(e instanceof Ls){const t=e.toFontString();return Ko.measureFont(t),!0}return!1}function LU(r,e){if(r instanceof Q_){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function DU(r,e){return r instanceof Ls?(e.includes(r)||e.push(r),!0):!1}const Lk=class Dk{constructor(e){this.limiter=new MU(Dk.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(LU),this.registerFindHook(DU),this.registerFindHook(RU),this.registerFindHook(OU),this.registerFindHook(NU),this.registerUploadHook(FU),this.registerUploadHook(BU)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Xt.system.addOnce(this.tick,this,ba.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Xt.system.addOnce(this.tick,this,ba.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Zr)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Xt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Lk.uploadsPerFrame=4;let sx=Lk;Object.defineProperties(xe,{UPLOADS_PER_FRAME:{get(){return sx.uploadsPerFrame},set(r){qe("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),sx.uploadsPerFrame=r}}});function Uk(r,e){return e instanceof De?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function UU(r,e){if(!(e instanceof Xu))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:n}=t;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&Uk(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function jU(r,e){return r instanceof Xu?(e.push(r),!0):!1}class jk extends sx{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(jU),this.registerUploadHook(Uk),this.registerUploadHook(UU)}}jk.extension={name:"prepare",type:ge.RendererSystem};Te.add(jk);class Xh extends es{constructor(e,t=!0){super(e[0]instanceof Re?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Xt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Xt.shared.add(this.update,this,ba.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=t/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let n=0;n<e.length;++n)t.push(Re.from(e[n]));return new Xh(t)}static fromImages(e){const t=[];for(let n=0;n<e.length;++n)t.push(Re.from(e[n]));return new Xh(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof Re)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Xt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Xt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Kc=new He;class Z_ extends es{constructor(e,t=100,n=100){super(e),this.tileTransform=new kg,this._width=t,this._height=n,this.uvMatrix=this.texture.uvMatrix||new Mg(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ye),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Kc);const t=this._width,n=this._height,i=-t*this.anchor._x;if(Kc.x>=i&&Kc.x<i+t){const s=-n*this.anchor._y;if(Kc.y>=s&&Kc.y<s+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const n=e instanceof Re?e:Re.from(e,t);return new Z_(n,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var XU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,HU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,$U=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,dC=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,zU=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Zf=new Tt;class Xk extends Ig{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Y2,this.state=Xs.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Hi.from(dC,zU,t),this.shader=e.context.webGLVersion>1?Hi.from(HU,XU,t):Hi.from(dC,$U,t)}render(e){const t=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,h=e.tileTransform.localTransform,c=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==ci.CLAMP:l.wrapMode===ci.CLAMP&&(l.wrapMode=ci.REPEAT));const f=d?this.simpleShader:this.shader,g=a.width,v=a.height,x=e._width,y=e._height;Zf.set(h.a*g/x,h.b*g/y,h.c*v/x,h.d*v/y,h.tx/x,h.ty/y),Zf.invert(),d?Zf.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=Zf.toArray(!0),f.uniforms.uColor=ut.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(n),this.state.blendMode=I2(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Xk.extension={name:"tilingSprite",type:ge.RendererPlugin};Te.add(Xk);const Hk=class hh{constructor(e,t,n){this.linkedSheets=[],(e instanceof De||e instanceof Re)&&(e={texture:e,data:t,resolutionFilename:n});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof Re?i:null,this.baseTexture=i instanceof De?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let n=xo(e,null);return n===null&&(n=typeof t=="number"?t:parseFloat(t??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=hh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=hh.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const u=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new Ye(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s.rotated?a=new Ye(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Ye(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Ye(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Re(this.baseTexture,a,h,l,s.rotated?2:0,s.anchor,s.borders),Re.addToCache(this.textures[i],this.cachePrefix+i.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*hh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*hh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Hk.BATCH_SIZE=1e3;let fC=Hk;const YU=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function $k(r,e,t){const n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!t){const i=Vt.dirname(r[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(n,$k([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return n}const GU={extension:ge.Asset,cache:{test:r=>r instanceof fC,getCacheableAssets:(r,e)=>$k(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),n=e.pop();return t==="json"&&YU.includes(n)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=xe.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:ge.LoadParser,priority:zn.Normal},async testParse(r,e){return Vt.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var h,c;const{texture:n,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Vt.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(n&&n.baseTexture)a=n;else{const d=ex(o+(i??r.meta.image),e.src);a=(await t.load([d]))[d]}const l=new fC({texture:a.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:s});await l.parse();const u=(h=r==null?void 0:r.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(u)){const d=[];for(const g of u){if(typeof g!="string")continue;let v=o+g;(c=e.data)!=null&&c.ignoreMultiPack||(v=ex(v,e.src),d.push(t.load({src:v,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(d);l.linkedSheets=f,f.forEach(g=>{g.linkedSheets=[l].concat(l.linkedSheets.filter(v=>v!==g))})}return l},unload(r){r.destroy(!0)}}};Te.add(GU);class Cm{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class zp{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),g=isNaN(f)?d:f;l[c]=g}n[o].push(l)}const i=new Cm;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class ox{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Cm,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<n.length;u++)t.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)t.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)t.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}}class ax{static test(e){return typeof e=="string"&&e.includes("<font>")?ox.test(xe.ADAPTER.parseXML(e)):!1}static parse(e){return ox.parse(xe.ADAPTER.parseXML(e))}}const cy=[zp,ox,ax];function WU(r){for(let e=0;e<cy.length;e++)if(cy[e].test(r))return cy[e];return null}function VU(r,e,t,n,i,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,h=r.width/n-l-u*2,c=r.height/n-l-u*2,d=o.slice(),f=t.fillGradientStops.slice();if(!f.length){const g=d.length+1;for(let v=1;v<g;++v)f.push(v/g)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),t.fillGradientType===Fg.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,u,h/2,c+u);let g=0;const v=(s.fontProperties.fontSize+t.strokeThickness)/c;for(let x=0;x<i.length;x++){const y=s.lineHeight*x;for(let b=0;b<d.length;b++){let _=0;typeof f[b]=="number"?_=f[b]:_=b/d.length;const S=y/c+_*v;let I=Math.max(g,S);I=Math.min(I,1),a.addColorStop(I,d[b]),g=I}}}else{a=e.createLinearGradient(u,c/2,h+u,c/2);const g=d.length+1;let v=1;for(let x=0;x<d.length;x++){let y;typeof f[x]=="number"?y=f[x]:y=v/g,a.addColorStop(y,d[x]),v++}}return a}function qU(r,e,t,n,i,s,o){const a=t.text,l=t.fontProperties;e.translate(n,i),e.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=VU(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=ut.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,h+t.lineHeight-l.descent),o.fill&&e.fillText(a,u,h+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Yp(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function zk(r){return Array.from?Array.from(r):r.split("")}function KU(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...zk(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const zo=class xs{constructor(e,t,n){var h;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=xo(o.file),u={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=u;for(let c=0;c<e.page.length;c++){const{id:d,file:f}=e.page[c];u[d]=t instanceof Array?t[c]:t[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[d].baseTexture.alphaMode=Vr.NO_PREMULTIPLIED_ALPHA,u[d].baseTexture.mipmap=di.OFF)}for(let c=0;c<e.char.length;c++){const{id:d,page:f}=e.char[c];let{x:g,y:v,width:x,height:y,xoffset:b,yoffset:_,xadvance:S}=e.char[c];g/=l,v/=l,x/=l,y/=l,b/=l,_/=l,S/=l;const I=new Ye(g+u[f].frame.x/l,v+u[f].frame.y/l,x,y);this.chars[d]={xOffset:b,yOffset:_,xAdvance:S,kerning:{},texture:new Re(u[f].baseTexture,I),page:f}}for(let c=0;c<e.kerning.length;c++){let{first:d,second:f,amount:g}=e.kerning[c];d/=l,f/=l,g/=l,this.chars[f]&&(this.chars[f].kerning[d]=g)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((h=a==null?void 0:a.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,n){let i;if(e instanceof Cm)i=e;else{const o=WU(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof Re&&(t=[t]);const s=new xs(i,t,n);return xs.available[s.font]=s,s}static uninstall(e){const t=xs.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete xs.available[e]}static from(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},xs.defaultOptions,n),h=KU(i),c=t instanceof Ls?t:new Ls(t),d=a,f=new Cm;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};let g=0,v=0,x,y,b,_=0;const S=[];for(let A=0;A<h.length;A++){x||(x=xe.ADAPTER.createCanvas(),x.width=a,x.height=l,y=x.getContext("2d"),b=new De(x,{resolution:o,...u}),S.push(new Re(b)),f.page.push({id:S.length-1,file:""}));const k=h[A],M=Ko.measureText(k,c,!1,x),O=M.width,L=Math.ceil(M.height),D=Math.ceil((c.fontStyle==="italic"?2:1)*O);if(v>=l-L*o){if(v===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${k}')`);--A,x=null,y=null,b=null,v=0,g=0,_=0;continue}if(_=Math.max(L+M.fontProperties.descent,_),D*o+g>=d){if(g===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${k}')`);--A,v+=_*o,v=Math.ceil(v),g=0,_=0;continue}qU(x,y,M,g,v,o,c);const j=Yp(M.text);f.char.push({id:j,page:S.length-1,x:g/o,y:v/o,width:D,height:L,xoffset:0,yoffset:0,xadvance:O-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),g+=(D+2*s)*o,g=Math.ceil(g)}if(!(n!=null&&n.skipKerning))for(let A=0,k=h.length;A<k;A++){const M=h[A];for(let O=0;O<k;O++){const L=h[O],D=y.measureText(M).width,j=y.measureText(L).width,F=y.measureText(M+L).width-(D+j);F&&f.kerning.push({first:Yp(M),second:Yp(L),amount:F})}}const I=new xs(f,S,!0);return xs.available[e]!==void 0&&xs.uninstall(e),xs.available[e]=I,I}};zo.ALPHA=[["a","z"],["A","Z"]," "],zo.NUMERIC=[["0","9"]],zo.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],zo.ASCII=[[" ","~"]],zo.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:zo.ALPHANUMERIC},zo.available={};let Yo=zo;var QU=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,ZU=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pC=[],mC=[],gC=[],Yk=class Gk extends Zr{constructor(e,t={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},Gk.styleDefaults,t);if(!Yo.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new ut(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new As(()=>{this.dirty=!0},this,0,0),this._roundPixels=xe.ROUND_PIXELS,this.dirty=!0,this._resolution=xe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var D;const e=Yo.available[this._fontName],t=this.fontSize,n=t/e.size,i=new He,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=zk(l),h=this._maxWidth*e.size/t,c=e.distanceFieldType==="none"?pC:mC;let d=null,f=0,g=0,v=0,x=-1,y=0,b=0,_=0,S=0;for(let j=0;j<u.length;j++){const F=u[j],B=Yp(F);if(/(?:\s)/.test(F)&&(x=j,y=f,S++),F==="\r"||F===`
`){o.push(f),a.push(-1),g=Math.max(g,f),++v,++b,i.x=0,i.y+=e.lineHeight,d=null,S=0;continue}const X=e.chars[B];if(!X)continue;d&&X.kerning[d]&&(i.x+=X.kerning[d]);const V=gC.pop()||{texture:Re.EMPTY,line:0,charCode:0,prevSpaces:0,position:new He};V.texture=X.texture,V.line=v,V.charCode=B,V.position.x=Math.round(i.x+X.xOffset+this._letterSpacing/2),V.position.y=Math.round(i.y+X.yOffset),V.prevSpaces=S,s.push(V),f=V.position.x+Math.max(X.xAdvance-X.xOffset,X.texture.orig.width),i.x+=X.xAdvance+this._letterSpacing,_=Math.max(_,X.yOffset+X.texture.height),d=B,x!==-1&&h>0&&i.x>h&&(++b,Bu(s,1+x-b,1+j-x),j=x,x=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,y),v++,i.x=0,i.y+=e.lineHeight,d=null,S=0)}const I=u[u.length-1];I!=="\r"&&I!==`
`&&(/(?:\s)/.test(I)&&(f=y),o.push(f),g=Math.max(g,f),a.push(-1));const A=[];for(let j=0;j<=v;j++){let F=0;this._align==="right"?F=g-o[j]:this._align==="center"?F=(g-o[j])/2:this._align==="justify"&&(F=a[j]<0?0:(g-o[j])/a[j]),A.push(F)}const k=s.length,M={},O=[],L=this._activePagesMeshData;c.push(...L);for(let j=0;j<k;j++){const F=s[j].texture,B=F.baseTexture.uid;if(!M[B]){let X=c.pop();if(!X){const Q=new vd;let H,G;e.distanceFieldType==="none"?(H=new nc(Re.EMPTY),G=Ie.NORMAL):(H=new nc(Re.EMPTY,{program:ks.from(ZU,QU),uniforms:{uFWidth:0}}),G=Ie.NORMAL_NPM);const $=new gl(Q,H);$.blendMode=G,X={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:$,vertices:null,uvs:null,indices:null}}X.index=0,X.indexCount=0,X.vertexCount=0,X.uvsCount=0,X.total=0;const{_textureCache:V}=this;V[B]=V[B]||new Re(F.baseTexture),X.mesh.texture=V[B],X.mesh.tint=this._tintColor.value,O.push(X),M[B]=X}M[B].total++}for(let j=0;j<L.length;j++)O.includes(L[j])||this.removeChild(L[j].mesh);for(let j=0;j<O.length;j++)O[j].mesh.parent!==this&&this.addChild(O[j].mesh);this._activePagesMeshData=O;for(const j in M){const F=M[j],B=F.total;if(!(((D=F.indices)==null?void 0:D.length)>6*B)||F.vertices.length<gl.BATCHABLE_SIZE*2)F.vertices=new Float32Array(4*2*B),F.uvs=new Float32Array(4*2*B),F.indices=new Uint16Array(6*B);else{const X=F.total,V=F.vertices;for(let Q=X*4*2;Q<V.length;Q++)V[Q]=0}F.mesh.size=6*B}for(let j=0;j<k;j++){const F=s[j];let B=F.position.x+A[F.line]*(this._align==="justify"?F.prevSpaces:1);this._roundPixels&&(B=Math.round(B));const X=B*n,V=F.position.y*n,Q=F.texture,H=M[Q.baseTexture.uid],G=Q.frame,$=Q._uvs,W=H.index++;H.indices[W*6+0]=0+W*4,H.indices[W*6+1]=1+W*4,H.indices[W*6+2]=2+W*4,H.indices[W*6+3]=0+W*4,H.indices[W*6+4]=2+W*4,H.indices[W*6+5]=3+W*4,H.vertices[W*8+0]=X,H.vertices[W*8+1]=V,H.vertices[W*8+2]=X+G.width*n,H.vertices[W*8+3]=V,H.vertices[W*8+4]=X+G.width*n,H.vertices[W*8+5]=V+G.height*n,H.vertices[W*8+6]=X,H.vertices[W*8+7]=V+G.height*n,H.uvs[W*8+0]=$.x0,H.uvs[W*8+1]=$.y0,H.uvs[W*8+2]=$.x1,H.uvs[W*8+3]=$.y1,H.uvs[W*8+4]=$.x2,H.uvs[W*8+5]=$.y2,H.uvs[W*8+6]=$.x3,H.uvs[W*8+7]=$.y3}this._textWidth=g*n,this._textHeight=(i.y+e.lineHeight)*n;for(const j in M){const F=M[j];if(this.anchor.x!==0||this.anchor.y!==0){let Q=0;const H=this._textWidth*this.anchor.x,G=this._textHeight*this.anchor.y;for(let $=0;$<F.total;$++)F.vertices[Q++]-=H,F.vertices[Q++]-=G,F.vertices[Q++]-=H,F.vertices[Q++]-=G,F.vertices[Q++]-=H,F.vertices[Q++]-=G,F.vertices[Q++]-=H,F.vertices[Q++]-=G}this._maxLineHeight=_*n;const B=F.mesh.geometry.getBuffer("aVertexPosition"),X=F.mesh.geometry.getBuffer("aTextureCoord"),V=F.mesh.geometry.getIndex();B.data=F.vertices,X.data=F.uvs,V.data=F.indices,B.update(),X.update(),V.update()}for(let j=0;j<s.length;j++)gC.push(s[j]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:n,size:i}=Yo.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+l*l),c=(Math.abs(u)+Math.abs(h))/2,d=this.fontSize/i,f=e._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=c*t*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Yo.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Yo.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Yo.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=Yo.available[this._fontName].distanceFieldType==="none"?pC:mC;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=Re.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};Yk.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let JU=Yk;const ej=[".xml",".fnt"],tj={extension:{type:ge.LoadParser,priority:zn.Normal},name:"loadBitmapFont",test(r){return ej.includes(Vt.extname(r).toLowerCase())},async testParse(r){return zp.test(r)||ax.test(r)},async parse(r,e,t){const n=zp.test(r)?zp.parse(r):ax.parse(r),{src:i}=e,{page:s}=n,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=Vt.join(Vt.dirname(i),h);c=ex(c,i),o.push(c)}const a=await t.load(o),l=o.map(u=>a[u]);return Yo.install(n,l,!0)},async load(r,e){return(await xe.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};Te.add(tj);const lx=class ou extends Ls{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new ou(Object.keys(ou.defaultOptions).reduce((t,n)=>({...t,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete ou.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:n}=ou;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return xe.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Vt.basename(e,Vt.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(n=>!this._overrides.includes(n));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(n=>this._overrides.includes(n));t.length>0&&(this._overrides=this._overrides.filter(n=>!t.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=X5(e)),typeof e=="number"?j5(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,ou.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=xe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};lx.availableFonts={},lx.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let hy=lx;const Jf=class au extends es{constructor(e="",t={}){super(Re.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=Re.from(n,{scaleMode:xe.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new Ye,i.trim=new Ye,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),u=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=au.defaultMaxWidth,this.maxHeight=au.defaultMaxHeight,this._domElement=u,this._styleElement=h,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(h),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=au.defaultAutoResolution,this._resolution=au.defaultResolution??xe.RESOLUTION,this.text=e,this.style=t}measureText(e){var h,c;const{text:t,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(i)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:l+n.padding*2,height:u+n.padding*2}}async updateText(e=!0){const{style:t,_image:n,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await t.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/i,t.trim.height=t._frame.height=n.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},au.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=t,(i=this._svgRoot)==null||i.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=sa(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=sa(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof hy?(this.ownsStyle=!1,this._style=e):e instanceof Ls?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=hy.from(e)):(this.ownsStyle=!0,this._style=new hy(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Jf.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Jf.defaultMaxWidth=2024,Jf.defaultMaxHeight=2024,Jf.defaultAutoResolution=!0;function rj(r){const e=Object.create(null);return r=r.trim().replace(/^(\?|#|&)/,""),r&&r.split("&").forEach(t=>{const n=t.replace(/\+/g," ").split("=");let i=n.shift(),s=n.length>0?n.join("="):void 0;i=decodeURIComponent(i),s=s===void 0?null:decodeURIComponent(s),e[i]===void 0?e[i]=s:Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]}),e}function nj(r){let e="",t=0;for(const n in r)r[n]&&(t++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e}function ij(r){return r===void 0&&(r=J_()),`${window.location.protocol}//${window.location.host}${window.location.pathname}?`+nj(r)}function J_(){return rj(window.location.search)}function sj(r,e){const t=J_();return t[r]=e,ij(t)}function Rn(r,e){const t=J_();return t[r]?t[r]:e}var vt=(r=>(r.English="en",r.Chinese="cs",r.Vietnamese="vn",r.Thai="th",r.Khmer="kh",r.Indonesian="id",r.Korean="kr",r.Japanese="jp",r.Turkish="tr",r.Portuguese="pt",r.IndianHindi="hi",r))(vt||{});class oj{constructor(){C(this,"urlOptions");C(this,"tableOptions");C(this,"configOptions");this.urlOptions=this.getUrlConfig(),this.tableOptions=lu("table")||{},this.configOptions=lu("gameconfig")||{}}configureLanguage(){let e=Rn("lang","en");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e="en";break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e="cs";break;case e.indexOf("th")>=0:e="th";break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e="vn";break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e="kr";break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e="kh";break;case e.indexOf("id")>=0:e="id";break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e="jp";break;case e.indexOf("hi")>=0:e="hi";break;case e.indexOf("tr")>=0:e="tr";break;case e.indexOf("pt")>=0:e="pt";break;default:e="en"}return e}getUrlConfig(){const e={operator:Rn("op",""),funPLay:Rn("fun","0")=="1",showLog:Rn("log","0")=="1",loginUrl:Rn("loginUrl",""),lobbyUrl:Rn("lobbyUrl",""),fundsUrl:Rn("fundsUrl",""),livechatUrl:Rn("livechatUrl",""),token:Rn("token")||Rn("s"),lang:this.configureLanguage(),platform:Rn("p")||(ai.any?"mobile":"web")};return!e.token&&!e.loginUrl&&(e.funPLay=!0),e}getLoginUrl(){return this.urlOptions.loginUrl?`${this.urlOptions.loginUrl}?url=${encodeURIComponent(sj("fun","0"))}`:this.getLobbyUrl()}getLobbyUrl(){return this.urlOptions.lobbyUrl||""}}var $i=Object.freeze({Linear:Object.freeze({None:function(r){return r},In:function(r){return r},Out:function(r){return r},InOut:function(r){return r}}),Quadratic:Object.freeze({In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}}),Cubic:Object.freeze({In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}}),Quartic:Object.freeze({In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}}),Quintic:Object.freeze({In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}}),Sinusoidal:Object.freeze({In:function(r){return 1-Math.sin((1-r)*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.sin(Math.PI*(.5-r)))}}),Exponential:Object.freeze({In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}}),Circular:Object.freeze({In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}}),Elastic:Object.freeze({In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(r){var e=1.70158;return r===1?1:r*r*((e+1)*r-e)},Out:function(r){var e=1.70158;return r===0?0:--r*r*((e+1)*r+e)+1},InOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)}}),Bounce:Object.freeze({In:function(r){return 1-$i.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?$i.Bounce.In(r*2)*.5:$i.Bounce.Out(r*2-1)*.5+.5}}),generatePow:function(r){return r===void 0&&(r=4),r=r<Number.EPSILON?Number.EPSILON:r,r=r>1e4?1e4:r,{In:function(e){return Math.pow(e,r)},Out:function(e){return 1-Math.pow(1-e,r)},InOut:function(e){return e<.5?Math.pow(e*2,r)/2:(1-Math.pow(2-e*2,r))/2+.5}}}}),dh=function(){return performance.now()},Wk=function(){function r(){this._tweens={},this._tweensAddedDuringUpdate={}}return r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},r.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},r.prototype.update=function(e,t){e===void 0&&(e=dh()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var s=this._tweens[n[i]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},r}(),du={Linear:function(r,e){var t=r.length-1,n=t*e,i=Math.floor(n),s=du.Utils.Linear;return e<0?s(r[0],r[1],n):e>1?s(r[t],r[t-1],t-n):s(r[i],r[i+1>t?t:i+1],n-i)},Bezier:function(r,e){for(var t=0,n=r.length-1,i=Math.pow,s=du.Utils.Bernstein,o=0;o<=n;o++)t+=i(1-e,n-o)*i(e,o)*r[o]*s(n,o);return t},CatmullRom:function(r,e){var t=r.length-1,n=t*e,i=Math.floor(n),s=du.Utils.CatmullRom;return r[0]===r[t]?(e<0&&(i=Math.floor(n=t*(1+e))),s(r[(i-1+t)%t],r[i],r[(i+1)%t],r[(i+2)%t],n-i)):e<0?r[0]-(s(r[0],r[0],r[1],r[1],-n)-r[0]):e>1?r[t]-(s(r[t],r[t],r[t-1],r[t-1],n-t)-r[t]):s(r[i?i-1:0],r[i],r[t<i+1?t:i+1],r[t<i+2?t:i+2],n-i)},Utils:{Linear:function(r,e,t){return(e-r)*t+r},Bernstein:function(r,e){var t=du.Utils.Factorial;return t(r)/t(e)/t(r-e)},Factorial:function(){var r=[1];return function(e){var t=1;if(r[e])return r[e];for(var n=e;n>1;n--)t*=n;return r[e]=t,t}}(),CatmullRom:function(r,e,t,n,i){var s=(t-r)*.5,o=(n-e)*.5,a=i*i,l=i*a;return(2*e-2*t+s+o)*l+(-3*e+3*t-2*s-o)*a+s*i+e}}},aj=function(){function r(){}return r.nextId=function(){return r._nextId++},r._nextId=0,r}(),ux=new Wk,ew=function(){function r(e,t){t===void 0&&(t=ux),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=$i.Linear.None,this._interpolationFunction=du.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=aj.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return r.prototype.getId=function(){return this._id},r.prototype.isPlaying=function(){return this._isPlaying},r.prototype.isPaused=function(){return this._isPaused},r.prototype.getDuration=function(){return this._duration},r.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},r.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},r.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},r.prototype.start=function(e,t){if(e===void 0&&(e=dh()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},r.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},r.prototype._setupProperties=function(e,t,n,i,s){for(var o in n){var a=e[o],l=Array.isArray(a),u=l?"array":typeof a,h=!l&&Array.isArray(n[o]);if(!(u==="undefined"||u==="function")){if(h){var c=n[o];if(c.length===0)continue;for(var d=[a],f=0,g=c.length;f<g;f+=1){var v=this._handleRelativeValue(a,c[f]);if(isNaN(v)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(v)}h&&(n[o]=d)}if((u==="object"||l)&&a&&!h){t[o]=l?[]:{};var x=a;for(var y in x)t[o][y]=x[y];i[o]=l?[]:{};var c=n[o];if(!this._isDynamic){var b={};for(var y in c)b[y]=c[y];n[o]=c=b}this._setupProperties(x,t[o],c,i[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),h?i[o]=n[o].slice().reverse():i[o]=t[o]||0}}},r.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},r.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},r.prototype.pause=function(e){return e===void 0&&(e=dh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},r.prototype.resume=function(e){return e===void 0&&(e=dh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},r.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},r.prototype.group=function(e){return e===void 0&&(e=ux),this._group=e,this},r.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},r.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},r.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},r.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},r.prototype.easing=function(e){return e===void 0&&(e=$i.Linear.None),this._easingFunction=e,this},r.prototype.interpolation=function(e){return e===void 0&&(e=du.Linear),this._interpolationFunction=e,this},r.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},r.prototype.onStart=function(e){return this._onStartCallback=e,this},r.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},r.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},r.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},r.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},r.prototype.onStop=function(e){return this._onStopCallback=e,this},r.prototype.update=function(e,t){var n;if(e===void 0&&(e=dh()),t===void 0&&(t=!0),this._isPaused)return!0;var i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,o=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),a=this._duration+this._repeat*o,l=this._calculateElapsedPortion(s,o,a),u=this._easingFunction(l),h=this._calculateCompletionStatus(s,o);if(h==="repeat"&&this._processRepetition(s,o),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),h==="about-to-repeat"&&this._processRepetition(s,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,l),h==="repeat"||h==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(h==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var c=0,d=this._chainedTweens.length;c<d;c++)this._chainedTweens[c].start(this._startTime+this._duration,!1)}return h!=="completed"},r.prototype._calculateElapsedPortion=function(e,t,n){if(this._duration===0||e>n)return 1;var i=e%t,s=Math.min(i/this._duration,1);return s===0&&e!==0&&e%this._duration===0?1:s},r.prototype._calculateCompletionStatus=function(e,t){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},r.prototype._processRepetition=function(e,t){var n=Math.min(Math.trunc((e-this._duration)/t)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=n);for(var i in this._valuesStartRepeat){var s=this._valuesEnd[i];!this._yoyo&&typeof s=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(s)),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=t*n},r.prototype._updateProperties=function(e,t,n,i){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,a=n[s],l=Array.isArray(e[s]),u=Array.isArray(a),h=!l&&u;h?e[s]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(e[s],o,a,i):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*i))}},r.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},r.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},r}(),Ds=ux;Ds.getAll.bind(Ds);Ds.removeAll.bind(Ds);Ds.add.bind(Ds);var Vk=Ds.remove.bind(Ds),lj=Ds.update.bind(Ds);class uj extends oj{constructor(){super();C(this,"_time",0);C(this,"_turboTime",0);C(this,"turboTicker",new Xt);C(this,"turboTweenGroup",new Wk);this.turboTicker.autoStart=!1}deltaTime(t){this._time+=t}deltaTurboTime(t){this._turboTime+=t}getTime(t){return t?this._turboTime:this._time}}class cj extends uj{constructor(){super(...arguments);C(this,"eventEmitter",new IB.EventEmitter)}get notice(){return this.eventEmitter}}class hj extends cj{constructor(){super(...arguments);C(this,"_viewport");C(this,"_orientation")}get viewport(){return this._viewport}get orientation(){return this._orientation}updateViewport(t,n,i,s){this._viewport=[t,n,i,s]}updateOrientation(){this._orientation=this.getOrientationType()}get isLandscapeOnly(){const t=this.configOptions.layoutMap;return t.l&&!t.p}get isPortraitOnly(){const t=this.configOptions.layoutMap;return t.p&&!t.l}getOrientationType(){const t=this.configOptions.layoutMap;return t.p&&t.l?document.documentElement.clientHeight/document.documentElement.clientWidth>1/.767?"p":"l":t.p?"p":"l"}get layoutOptions(){return this.configOptions.layoutMap[this._orientation]}}class dj extends hj{constructor(){super(...arguments);C(this,"_isSupportAvif",!1);C(this,"_isSupportWebp",!1)}get isSupportWebp(){return this._isSupportWebp}get isSupportAvif(){return this._isSupportAvif}setSupportImagesFormat(t,n){this._isSupportAvif=n,this._isSupportWebp=t}filterImageFormat(t){return this.isSupportAvif||t.splice(t.indexOf("avif"),1),this.isSupportWebp||t.splice(t.indexOf("webp"),1),t[0]}}class fj extends dj{constructor(){super();C(this,"isTablet");C(this,"isMobile");this.isMobile=fe.mobile(),this.isTablet=fe.tablet()}}class pj extends fj{constructor(){super(...arguments);C(this,"_serverTimeMillisecond",0);C(this,"_timer")}setServerTime(t){this._serverTimeMillisecond=t*1e3,this._timer=new Date}getServerTimeMillisecond(){return this._serverTimeMillisecond}getServerTimeMillisecondNow(){const n=new Date().getTime()-this._timer.getTime();return this._serverTimeMillisecond+n}}const hg=class hg extends pj{static get Obj(){return this._Obj||(this._Obj=new hg),this._Obj}};C(hg,"_Obj");let Ee=hg;const mj="action_sign_in",qk="action_get_player_info",Kk="action_balance_change",Qk="action_sound_open",gj="action_volume_changed",Zk="action_menu_open",Jk="action_paytable_open",vj="action_betpanel_open",yj="action_auto_panel_open",eI="action_orientation_changed",xj="action_force_update",tI="action_history_list_open",rI="action_history_detail_open",nI="action_error_detail",iI="action_spin",sI="action_loaded",oI="action_loaded_error",aI="action_spin_stopping",lI="action_spin_stop",uI="action_set_bet_amount",cI="action_set_bet_level",hI="action_set_auto_spin_detail",_j="action_do_auto_spin",dI="action_stop_auto_spin",fI="action_set_spin_speed",pI="action_linebets_loaded",wj="action_scene_push",bj="action_scene_pop",mI="action_scene_replace",Sj="action_scene_to_root",gI="action_assets_loading",Tj=(r={},e)=>{switch(e.type){case Qk:return{...r,soundOn:e.value};case gj:return{...r};case Zk:return{...r,menuOn:e.value};case Jk:return{...r,payTableOn:e.value};case vj:return{...r,betPanelOn:e.value};case yj:return{...r,autoSpinPanelOn:e.value};case eI:return{...r,orientation:e.value};case xj:return{...r,forceUpdate:!r.forceUpdate};case tI:return{...r,historyListOn:e.value};case rI:return{...r,historyDetail:{...e.value}};case nI:return{...r,error:{...e.value}};default:return r}},Ej={setting:{volume:.5,menuOn:!1,payTableOn:!1,betPanelOn:!1,autoSpinPanelOn:!1,orientation:"l",forceUpdate:!1,historyListOn:!1,historyDetail:{on:!1,data:null,index:0},error:{code:0,show:!1,allowClose:!0}}};function vI(r){return{type:Qk,value:r}}function yI(r){return{type:Zk,value:r}}function xI(r){return{type:Jk,value:r}}function Cj(r){return{type:eI,value:r}}function _I(r){return{type:tI,value:r}}function wI(r,e=[],t=0){return{type:rI,value:{on:r,data:e,index:t}}}function nn(r,e=!1,t=!0){return{type:nI,value:{code:r,show:e,allowClose:t}}}const dy="authorization",Pj="https://dev-crescendo-real.gpistudios.com",Aj="https://dev-crescendo-slot-api.gpistudios.com";class kj{constructor(){C(this,"context",Ee.Obj);C(this,"authorization",sessionStorage.getItem(dy));C(this,"canReAuth",!!this.authorization);C(this,"_dispatch")}get domain(){return this.context.urlOptions.funPLay?Aj:Pj}setDispatch(e){this._dispatch=e}authAndCanReTry(){this.authorization="",sessionStorage.setItem(dy,"");const e=this.canReAuth;return this.canReAuth=!1,e}request(e,t="GET",n="json",i=null){const s=this.authorization?{Authorization:`${this.authorization}`}:{};return navigator.onLine==!1?(this._dispatch(nn("000")),Promise.reject()):new Promise((o,a)=>{const l=new AbortController,u=setTimeout(()=>{clearTimeout(u),l.abort(),this._dispatch(nn("001"))},15e3);fetch(e,{method:t,headers:s,signal:l.signal}).then(h=>{clearTimeout(u),h.status==200?h[n]().then(d=>{if(i){const f=new i(d);f.code&&this._dispatch(nn(f.code)),o(f)}else o(d)}).catch(()=>{this._dispatch(nn("000")),a()}):(this._dispatch(nn(h.status)),o({code:h.status}))}).catch(h=>{clearTimeout(u),h.name!="AbortError"&&this._dispatch(nn("000")),a()})})}auth(){const{operator:e,token:t}=this.context.urlOptions,n=t||Math.random().toFixed(8),i=`${this.domain}/auth/${e}/${n}`;return!t&&this.authorization?Promise.resolve(this.authorization):this.request(i,"GET","text").then(s=>{IA(s)&&(s=`Bearer ${s}`,this.authorization=s,sessionStorage.setItem(dy,s))})}player(){const e=Vs("player"),t=`${this.domain}/s/player`;return this.request(t,"GET","json",e)}meta(){const e=Vs("meta"),t=this.context.configOptions.id,n=`${this.domain}/s/meta/${t}`;return this.request(n,"GET","json",e)}spin(e){const t=Vs("spin"),n=this.context.configOptions.id,i=`${this.domain}/s/spin/${n}?lineBet=${e}`;return this.request(i,"GET","json",t)}spin2(e,t){const n=Vs("spin"),i=this.context.configOptions.id,s=`${this.domain}/s/spin/${i}?lineBet=${e}&level=${t}`;return this.request(s,"GET","json",n)}load(){const e=Vs("load"),t=this.context.configOptions.id,n=`${this.domain}/s/load/${t}`;return this.request(n,"GET","json",e)}start(e){const t=Vs("start"),n=this.context.configOptions.id,i=`${this.domain}/s/start/${n}/${e}`;return this.request(i,"GET","json",t)}continue(){const e=Vs("continue"),t=this.context.configOptions.id,n=`${this.domain}/s/cont/${t}`;return this.request(n,"GET","json",e)}history(e,t,n,i,s){const o=Vs("history"),a=this.context.configOptions.id,l=`${this.domain}/s/list/${a}/${e}/${t}/${n}/${i}/${s}`;return this.request(l,"GET","json",o)}lineBets(){const e=Vs("lineBets"),t=this.context.configOptions.id,n=`${this.domain}/s/lineBets/${t}`;return this.request(n,"GET","json",e)}}function Ij(){const{dispatch:r}=N.useContext(xt);return N.useEffect(()=>{yg().setDispatch(r)},[]),T.jsx(T.Fragment,{})}function ll(r,e){const t=r.toString();return new Array(e-t.length+1).join("0")+t}function Mj(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Rj(r){return r%4==0&&r%100!=0||r%400==0}function Oj(r){return r==vt.Chinese?"MMdd hh:mm:ss":"dd/MM hh:mm:ss"}function bI(r,e,t,n=vt.English){r instanceof Date||(r=new Date(r));const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],o=r.getUTCFullYear(),a=r.getUTCMonth(),l=r.getUTCDate(),u=r.getUTCHours();let h=o,c=a,d=l,f=u+e;if(f>=24){f-=24,d++;const y=Rj(h)?29:28;d>[31,y,31,30,31,30,31,31,30,31,30,31][c]&&(d=1,c++,c==12&&(c=0,h++))}c=(n==vt.Chinese?s:i)[c],d=ll(d,2)+(n==vt.Chinese?"日":"");const v=ll(r.getMinutes(),2),x=ll(r.getSeconds(),2);return t.replace("dd",d).replace("MM",c).replace("yyyy",`${h}`).replace("hh",f).replace("mm",v).replace("ss",x)}function Nj(r,e,t){const n=new Date(t);let i=n.getUTCHours()+r;i>=24&&(i=i-24);const s=n.getUTCMinutes(),o=n.getSeconds(),a=ll(i,2)+":"+ll(s,2);return e?a+" (+"+r+")":a+":"+ll(o,2)+" (GMT+"+r+")"}function SI(r,e){return r*=1e3,bI(new Date(r),8,Oj(e),e)}class Fj{constructor(e){C(this,"list",[]);const t=Ee.Obj.urlOptions.lang;this.list=e||[],this.list.forEach(n=>{n.createdOnFormat=SI(n.createdOn,t)})}}class yd{constructor(e){C(this,"data");C(this,"code");C(this,"message");this.data=e;const t=e.result||e;t.code&&(this.code=t.code,this.message=t.message)}static Init(e,t){return new yd({code:e,message:t})}}let Bj=class extends yd{constructor(t){super(t);C(this,"gameId");C(this,"currency");C(this,"lineBets");this.gameId=t.gameId,this.currency=t.currency,this.lineBets=t.lineBets}};class Lj extends Bj{}const Gp=new nt(0);new nt(1);new nt(-1);function Dj(r){const e=r.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function xn(r=new nt(0),e=2,t=0){return r instanceof nt||(r=new nt(r)),Dj(r.toFixed(e,nt.ROUND_FLOOR))}const Uj={Random:(r,e=0)=>Math.floor(Math.random()*(r-e))+e},cx={defaultUp:(r,e,t)=>1/2*e*t*t+r*t,up:(r,e,t,n)=>{if(t=t/1e3,n=n/1e3,t==0)return 0;const i=(e-r)/t;return r*n+i*n*n/2},down:(r,e,t,n)=>{if(t=t/1e3,n=n/1e3,t==0)return 0;const i=(r-e)/t;return r*n-i*n*n/2}};function pr(r,e){const t=[];for(let n=0;n<r;n++)t.push(e(n));return t}function xd(r){return r[r.length-1]}function TI(r){return r[Uj.Random(r.length)]}class jj extends yd{constructor(t){super(t);C(this,"isFromLoad",!1);C(this,"credit");C(this,"cost");C(this,"payout");C(this,"balance");C(this,"createdOn");!this.code&&(this.createdOn=t.createdOn,this.credit=new nt(t.credit||0),this.cost=new nt(t.cost||0),this.payout=new nt(t.payout||0),this.balance=new nt(t.balance||0))}}const tw=8,Xj=9,Hj=7,$j=17,zj=14,Yj=15,Gj=16;class rw extends jj{constructor(t){super(t);C(this,"ss");C(this,"mg");C(this,"lm");C(this,"gm");C(this,"lineBet");C(this,"lw");C(this,"bs");C(this,"gw");C(this,"fs");C(this,"lastFs");C(this,"isFs");C(this,"totalMultiplier");C(this,"winlines");C(this,"bonuslines");C(this,"gemslines");C(this,"totalLines");C(this,"wildPositions");if(this.code)return;const n=Ee.Obj.tableOptions,i=t.result;this.ss=i.ss??[[],[],[],[],[]],this.mg=i.mg,this.lm=new nt(i.lm||0),this.gm=new nt(i.gm||0),this.lineBet=new nt(i.lineBet||0),this.lw=i.lw||[],this.bs=i.bs||[],this.gw=i.gw||[],this.fs=i.fs||0,this.lastFs=i.lastFs||0,this.totalMultiplier=this.lm.add(this.gm);const s=[];if(i.lw)for(const u of i.lw){const h=u[0];s.push({multiplier:new nt(u[3]),s:u[1],lineId:h,positions:pr(u[2],c=>[c,n.paylineMapV2[h][c]]),win:this.credit.mul(u[3])})}this.winlines=s;const o=[];i.bs&&o.push({multiplier:new nt(0),s:tw,lineId:void 0,positions:i.bs,win:Gp}),this.bonuslines=o;const a=[];if(i.gw)for(const u of i.gw)a.push({multiplier:new nt(u[2]),s:u[0],lineId:void 0,positions:u[1],win:this.credit.mul(u[2]*30)});this.gemslines=a,this.totalLines=[...s,...o,...a];const l=[];this.ss.forEach((u,h)=>{u.forEach((c,d)=>{c===9&&l.push(`${h}_${d}`)})}),this.wildPositions=l,this.isFs=!i.mg}get exist5OfAKind(){return this.totalLines.findIndex(t=>t.positions.length==5)>=0}get existFreeSpin(){return this.bs.length>0}get existWin(){return this.winlines.length>0||this.bonuslines.length>0||this.gemslines.length>0}getWinType(t){const n=t.div(this.credit.mul(30));return n.greaterThanOrEqualTo(38)?"big":n.greaterThanOrEqualTo(26)?"high":n.greaterThanOrEqualTo(17)?"medium":n.greaterThanOrEqualTo(6)?"normal":"small"}isWildPosition(t,n){return this.wildPositions.indexOf(`${t}_${n}`)!=-1}}class Wj extends rw{constructor(){super(...arguments);C(this,"isFromLoad",!0)}}class Vj extends yd{constructor(t){super(t);C(this,"name");C(this,"test");C(this,"currency");C(this,"balance");C(this,"st");!this.code&&(this.name=t.name,this.test=t.test,this.currency=t.currency,this.balance=new nt(t.balance),this.st=t.st)}}xF(kj);hd("spin",rw);hd("load",Wj);hd("player",Vj);hd("lineBets",Lj);hd("history",Fj);var EI={exports:{}};(function(r){(function(){function e(v,x){document.addEventListener?v.addEventListener("scroll",x,!1):v.attachEvent("scroll",x)}function t(v){document.body?v():document.addEventListener?document.addEventListener("DOMContentLoaded",function x(){document.removeEventListener("DOMContentLoaded",x),v()}):document.attachEvent("onreadystatechange",function x(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",x),v())})}function n(v){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(v)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(v,x){v.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+x+";"}function s(v){var x=v.g.offsetWidth,y=x+100;return v.j.style.width=y+"px",v.i.scrollLeft=y,v.h.scrollLeft=v.h.scrollWidth+100,v.l!==x?(v.l=x,!0):!1}function o(v,x){function y(){var _=b;s(_)&&_.g.parentNode!==null&&x(_.l)}var b=v;e(v.h,y),e(v.i,y),s(v)}function a(v,x,y){x=x||{},y=y||window,this.family=v,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal",this.context=y}var l=null,u=null,h=null,c=null;function d(v){return u===null&&(f(v)&&/Apple/.test(window.navigator.vendor)?(v=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!v&&603>parseInt(v[1],10)):u=!1),u}function f(v){return c===null&&(c=!!v.document.fonts),c}function g(v,x){var y=v.style,b=v.weight;if(h===null){var _=document.createElement("div");try{_.style.font="condensed 100px sans-serif"}catch{}h=_.style.font!==""}return[y,b,h?v.stretch:"","100px",x].join(" ")}a.prototype.load=function(v,x){var y=this,b=v||"BESbswy",_=0,S=x||3e3,I=new Date().getTime();return new Promise(function(A,k){if(f(y.context)&&!d(y.context)){var M=new Promise(function(L,D){function j(){new Date().getTime()-I>=S?D(Error(""+S+"ms timeout exceeded")):y.context.document.fonts.load(g(y,'"'+y.family+'"'),b).then(function(F){1<=F.length?L():setTimeout(j,25)},D)}j()}),O=new Promise(function(L,D){_=setTimeout(function(){D(Error(""+S+"ms timeout exceeded"))},S)});Promise.race([O,M]).then(function(){clearTimeout(_),A(y)},k)}else t(function(){function L(){var Z;(Z=X!=-1&&V!=-1||X!=-1&&Q!=-1||V!=-1&&Q!=-1)&&((Z=X!=V&&X!=Q&&V!=Q)||(l===null&&(Z=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!Z&&(536>parseInt(Z[1],10)||parseInt(Z[1],10)===536&&11>=parseInt(Z[2],10))),Z=l&&(X==H&&V==H&&Q==H||X==G&&V==G&&Q==G||X==$&&V==$&&Q==$)),Z=!Z),Z&&(W.parentNode!==null&&W.parentNode.removeChild(W),clearTimeout(_),A(y))}function D(){if(new Date().getTime()-I>=S)W.parentNode!==null&&W.parentNode.removeChild(W),k(Error(""+S+"ms timeout exceeded"));else{var Z=y.context.document.hidden;(Z===!0||Z===void 0)&&(X=j.g.offsetWidth,V=F.g.offsetWidth,Q=B.g.offsetWidth,L()),_=setTimeout(D,50)}}var j=new n(b),F=new n(b),B=new n(b),X=-1,V=-1,Q=-1,H=-1,G=-1,$=-1,W=document.createElement("div");W.dir="ltr",i(j,g(y,"sans-serif")),i(F,g(y,"serif")),i(B,g(y,"monospace")),W.appendChild(j.g),W.appendChild(F.g),W.appendChild(B.g),y.context.document.body.appendChild(W),H=j.g.offsetWidth,G=F.g.offsetWidth,$=B.g.offsetWidth,D(),o(j,function(Z){X=Z,L()}),i(j,g(y,'"'+y.family+'",sans-serif')),o(F,function(Z){V=Z,L()}),i(F,g(y,'"'+y.family+'",serif')),o(B,function(Z){Q=Z,L()}),i(B,g(y,'"'+y.family+'",monospace'))})})},r.exports=a})()})(EI);var qj=EI.exports;const Kj=ud(qj);var CI={exports:{}},Yn={},PI={exports:{}},AI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(H,G){var $=H.length;H.push(G);e:for(;0<$;){var W=$-1>>>1,Z=H[W];if(0<i(Z,G))H[W]=G,H[$]=Z,$=W;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var G=H[0],$=H.pop();if($!==G){H[0]=$;e:for(var W=0,Z=H.length,se=Z>>>1;W<se;){var ae=2*(W+1)-1,ye=H[ae],Oe=ae+1,Be=H[Oe];if(0>i(ye,$))Oe<Z&&0>i(Be,ye)?(H[W]=Be,H[Oe]=$,W=Oe):(H[W]=ye,H[ae]=$,W=ae);else if(Oe<Z&&0>i(Be,$))H[W]=Be,H[Oe]=$,W=Oe;else break e}}return G}function i(H,G){var $=H.sortIndex-G.sortIndex;return $!==0?$:H.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,f=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var G=t(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=H)n(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=t(u)}}function S(H){if(v=!1,_(H),!g)if(t(l)!==null)g=!0,V(I);else{var G=t(u);G!==null&&Q(S,G.startTime-H)}}function I(H,G){g=!1,v&&(v=!1,y(M),M=-1),f=!0;var $=d;try{for(_(G),c=t(l);c!==null&&(!(c.expirationTime>G)||H&&!D());){var W=c.callback;if(typeof W=="function"){c.callback=null,d=c.priorityLevel;var Z=W(c.expirationTime<=G);G=r.unstable_now(),typeof Z=="function"?c.callback=Z:c===t(l)&&n(l),_(G)}else n(l);c=t(l)}if(c!==null)var se=!0;else{var ae=t(u);ae!==null&&Q(S,ae.startTime-G),se=!1}return se}finally{c=null,d=$,f=!1}}var A=!1,k=null,M=-1,O=5,L=-1;function D(){return!(r.unstable_now()-L<O)}function j(){if(k!==null){var H=r.unstable_now();L=H;var G=!0;try{G=k(!0,H)}finally{G?F():(A=!1,k=null)}}else A=!1}var F;if(typeof b=="function")F=function(){b(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,X=B.port2;B.port1.onmessage=j,F=function(){X.postMessage(null)}}else F=function(){x(j,0)};function V(H){k=H,A||(A=!0,F())}function Q(H,G){M=x(function(){H(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){g||f||(g=!0,V(I))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(H){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var $=d;d=G;try{return H()}finally{d=$}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var $=d;d=H;try{return G()}finally{d=$}},r.unstable_scheduleCallback=function(H,G,$){var W=r.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?W+$:W):$=W,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=$+Z,H={id:h++,callback:G,priorityLevel:H,startTime:$,expirationTime:Z,sortIndex:-1},$>W?(H.sortIndex=$,e(u,H),t(l)===null&&H===t(u)&&(v?(y(M),M=-1):v=!0,Q(S,$-W))):(H.sortIndex=Z,e(l,H),g||f||(g=!0,V(I))),H},r.unstable_shouldYield=D,r.unstable_wrapCallback=function(H){var G=d;return function(){var $=d;d=G;try{return H.apply(this,arguments)}finally{d=$}}}})(AI);PI.exports=AI;var Qj=PI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zj=N,Hn=Qj;function ue(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kI=new Set,Hh={};function Pl(r,e){ic(r,e),ic(r+"Capture",e)}function ic(r,e){for(Hh[r]=e,r=0;r<e.length;r++)kI.add(e[r])}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hx=Object.prototype.hasOwnProperty,Jj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vC={},yC={};function e7(r){return hx.call(yC,r)?!0:hx.call(vC,r)?!1:Jj.test(r)?yC[r]=!0:(vC[r]=!0,!1)}function t7(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function r7(r,e,t,n){if(e===null||typeof e>"u"||t7(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(r,e,t,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Lr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Lr[r]=new un(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Lr[e]=new un(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Lr[r]=new un(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Lr[r]=new un(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Lr[r]=new un(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Lr[r]=new un(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Lr[r]=new un(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Lr[r]=new un(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Lr[r]=new un(r,5,!1,r.toLowerCase(),null,!1,!1)});var nw=/[\-:]([a-z])/g;function iw(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(nw,iw);Lr[e]=new un(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(nw,iw);Lr[e]=new un(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(nw,iw);Lr[e]=new un(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Lr[r]=new un(r,1,!1,r.toLowerCase(),null,!1,!1)});Lr.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Lr[r]=new un(r,1,!1,r.toLowerCase(),null,!0,!0)});function sw(r,e,t,n){var i=Lr.hasOwnProperty(e)?Lr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(r7(e,t,i,n)&&(t=null),n||i===null?e7(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Ao=Zj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ep=Symbol.for("react.element"),fu=Symbol.for("react.portal"),pu=Symbol.for("react.fragment"),ow=Symbol.for("react.strict_mode"),dx=Symbol.for("react.profiler"),II=Symbol.for("react.provider"),MI=Symbol.for("react.context"),aw=Symbol.for("react.forward_ref"),fx=Symbol.for("react.suspense"),px=Symbol.for("react.suspense_list"),lw=Symbol.for("react.memo"),Qo=Symbol.for("react.lazy"),RI=Symbol.for("react.offscreen"),xC=Symbol.iterator;function Qc(r){return r===null||typeof r!="object"?null:(r=xC&&r[xC]||r["@@iterator"],typeof r=="function"?r:null)}var zt=Object.assign,fy;function fh(r){if(fy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);fy=e&&e[1]||""}return`
`+fy+r}var py=!1;function my(r,e){if(!r||py)return"";py=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(r,[],e)}else{try{e.call()}catch(u){n=u}r.call(e.prototype)}else{try{throw Error()}catch(u){n=u}r()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return r.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",r.displayName)),l}while(1<=o&&0<=a);break}}}finally{py=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?fh(r):""}function n7(r){switch(r.tag){case 5:return fh(r.type);case 16:return fh("Lazy");case 13:return fh("Suspense");case 19:return fh("SuspenseList");case 0:case 2:case 15:return r=my(r.type,!1),r;case 11:return r=my(r.type.render,!1),r;case 1:return r=my(r.type,!0),r;default:return""}}function mx(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case pu:return"Fragment";case fu:return"Portal";case dx:return"Profiler";case ow:return"StrictMode";case fx:return"Suspense";case px:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case MI:return(r.displayName||"Context")+".Consumer";case II:return(r._context.displayName||"Context")+".Provider";case aw:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case lw:return e=r.displayName||null,e!==null?e:mx(r.type)||"Memo";case Qo:e=r._payload,r=r._init;try{return mx(r(e))}catch{}}return null}function i7(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mx(e);case 8:return e===ow?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function OI(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function s7(r){var e=OI(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function tp(r){r._valueTracker||(r._valueTracker=s7(r))}function NI(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=OI(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Pm(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function gx(r,e){var t=e.checked;return zt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function _C(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Sa(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function FI(r,e){e=e.checked,e!=null&&sw(r,"checked",e,!1)}function vx(r,e){FI(r,e);var t=Sa(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?yx(r,e.type,t):e.hasOwnProperty("defaultValue")&&yx(r,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function wC(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function yx(r,e,t){(e!=="number"||Pm(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var ph=Array.isArray;function Hu(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+Sa(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function xx(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ue(91));return zt({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function bC(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ue(92));if(ph(t)){if(1<t.length)throw Error(ue(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:Sa(t)}}function BI(r,e){var t=Sa(e.value),n=Sa(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function SC(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function LI(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _x(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?LI(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var rp,DI=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(rp=rp||document.createElement("div"),rp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=rp.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function $h(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o7=["Webkit","ms","Moz","O"];Object.keys(Sh).forEach(function(r){o7.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Sh[e]=Sh[r]})});function UI(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Sh.hasOwnProperty(r)&&Sh[r]?(""+e).trim():e+"px"}function jI(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=UI(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var a7=zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wx(r,e){if(e){if(a7[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ue(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ue(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ue(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ue(62))}}function bx(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sx=null;function uw(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Tx=null,$u=null,zu=null;function TC(r){if(r=bd(r)){if(typeof Tx!="function")throw Error(ue(280));var e=r.stateNode;e&&(e=jg(e),Tx(r.stateNode,r.type,e))}}function XI(r){$u?zu?zu.push(r):zu=[r]:$u=r}function HI(){if($u){var r=$u,e=zu;if(zu=$u=null,TC(r),e)for(r=0;r<e.length;r++)TC(e[r])}}function $I(r,e){return r(e)}function zI(){}var gy=!1;function YI(r,e,t){if(gy)return r(e,t);gy=!0;try{return $I(r,e,t)}finally{gy=!1,($u!==null||zu!==null)&&(zI(),HI())}}function zh(r,e){var t=r.stateNode;if(t===null)return null;var n=jg(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(ue(231,e,typeof t));return t}var Ex=!1;if(wo)try{var Zc={};Object.defineProperty(Zc,"passive",{get:function(){Ex=!0}}),window.addEventListener("test",Zc,Zc),window.removeEventListener("test",Zc,Zc)}catch{Ex=!1}function l7(r,e,t,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Th=!1,Am=null,km=!1,Cx=null,u7={onError:function(r){Th=!0,Am=r}};function c7(r,e,t,n,i,s,o,a,l){Th=!1,Am=null,l7.apply(u7,arguments)}function h7(r,e,t,n,i,s,o,a,l){if(c7.apply(this,arguments),Th){if(Th){var u=Am;Th=!1,Am=null}else throw Error(ue(198));km||(km=!0,Cx=u)}}function Al(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function GI(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function EC(r){if(Al(r)!==r)throw Error(ue(188))}function d7(r){var e=r.alternate;if(!e){if(e=Al(r),e===null)throw Error(ue(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return EC(i),r;if(s===n)return EC(i),e;s=s.sibling}throw Error(ue(188))}if(t.return!==n.return)t=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,n=s;break}if(a===n){o=!0,n=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,n=i;break}if(a===n){o=!0,n=s,t=i;break}a=a.sibling}if(!o)throw Error(ue(189))}}if(t.alternate!==n)throw Error(ue(190))}if(t.tag!==3)throw Error(ue(188));return t.stateNode.current===t?r:e}function WI(r){return r=d7(r),r!==null?VI(r):null}function VI(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=VI(r);if(e!==null)return e;r=r.sibling}return null}var qI=Hn.unstable_scheduleCallback,CC=Hn.unstable_cancelCallback,f7=Hn.unstable_shouldYield,p7=Hn.unstable_requestPaint,Jt=Hn.unstable_now,m7=Hn.unstable_getCurrentPriorityLevel,cw=Hn.unstable_ImmediatePriority,KI=Hn.unstable_UserBlockingPriority,Im=Hn.unstable_NormalPriority,g7=Hn.unstable_LowPriority,QI=Hn.unstable_IdlePriority,Bg=null,Rs=null;function v7(r){if(Rs&&typeof Rs.onCommitFiberRoot=="function")try{Rs.onCommitFiberRoot(Bg,r,void 0,(r.current.flags&128)===128)}catch{}}var zi=Math.clz32?Math.clz32:_7,y7=Math.log,x7=Math.LN2;function _7(r){return r>>>=0,r===0?32:31-(y7(r)/x7|0)|0}var np=64,ip=4194304;function mh(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Mm(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?n=mh(a):(s&=o,s!==0&&(n=mh(s)))}else o=t&~i,o!==0?n=mh(o):s!==0&&(n=mh(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-zi(e),i=1<<t,n|=r[t],e&=~i;return n}function w7(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function b7(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var o=31-zi(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&n)&&(i[o]=w7(a,e)):l<=e&&(r.expiredLanes|=a),s&=~a}}function Px(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ZI(){var r=np;return np<<=1,!(np&4194240)&&(np=64),r}function vy(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function _d(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-zi(e),r[e]=t}function S7(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-zi(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function hw(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-zi(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var mt=0;function JI(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var eM,dw,tM,rM,nM,Ax=!1,sp=[],ha=null,da=null,fa=null,Yh=new Map,Gh=new Map,ta=[],T7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PC(r,e){switch(r){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Yh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(e.pointerId)}}function Jc(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=bd(e),e!==null&&dw(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function E7(r,e,t,n,i){switch(e){case"focusin":return ha=Jc(ha,r,e,t,n,i),!0;case"dragenter":return da=Jc(da,r,e,t,n,i),!0;case"mouseover":return fa=Jc(fa,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return Yh.set(s,Jc(Yh.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Gh.set(s,Jc(Gh.get(s)||null,r,e,t,n,i)),!0}return!1}function iM(r){var e=tl(r.target);if(e!==null){var t=Al(e);if(t!==null){if(e=t.tag,e===13){if(e=GI(t),e!==null){r.blockedOn=e,nM(r.priority,function(){tM(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Wp(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=kx(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);Sx=n,t.target.dispatchEvent(n),Sx=null}else return e=bd(t),e!==null&&dw(e),r.blockedOn=t,!1;e.shift()}return!0}function AC(r,e,t){Wp(r)&&t.delete(e)}function C7(){Ax=!1,ha!==null&&Wp(ha)&&(ha=null),da!==null&&Wp(da)&&(da=null),fa!==null&&Wp(fa)&&(fa=null),Yh.forEach(AC),Gh.forEach(AC)}function eh(r,e){r.blockedOn===e&&(r.blockedOn=null,Ax||(Ax=!0,Hn.unstable_scheduleCallback(Hn.unstable_NormalPriority,C7)))}function Wh(r){function e(i){return eh(i,r)}if(0<sp.length){eh(sp[0],r);for(var t=1;t<sp.length;t++){var n=sp[t];n.blockedOn===r&&(n.blockedOn=null)}}for(ha!==null&&eh(ha,r),da!==null&&eh(da,r),fa!==null&&eh(fa,r),Yh.forEach(e),Gh.forEach(e),t=0;t<ta.length;t++)n=ta[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<ta.length&&(t=ta[0],t.blockedOn===null);)iM(t),t.blockedOn===null&&ta.shift()}var Yu=Ao.ReactCurrentBatchConfig,Rm=!0;function P7(r,e,t,n){var i=mt,s=Yu.transition;Yu.transition=null;try{mt=1,fw(r,e,t,n)}finally{mt=i,Yu.transition=s}}function A7(r,e,t,n){var i=mt,s=Yu.transition;Yu.transition=null;try{mt=4,fw(r,e,t,n)}finally{mt=i,Yu.transition=s}}function fw(r,e,t,n){if(Rm){var i=kx(r,e,t,n);if(i===null)Py(r,e,n,Om,t),PC(r,n);else if(E7(i,r,e,t,n))n.stopPropagation();else if(PC(r,n),e&4&&-1<T7.indexOf(r)){for(;i!==null;){var s=bd(i);if(s!==null&&eM(s),s=kx(r,e,t,n),s===null&&Py(r,e,n,Om,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else Py(r,e,n,null,t)}}var Om=null;function kx(r,e,t,n){if(Om=null,r=uw(n),r=tl(r),r!==null)if(e=Al(r),e===null)r=null;else if(t=e.tag,t===13){if(r=GI(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Om=r,null}function sM(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m7()){case cw:return 1;case KI:return 4;case Im:case g7:return 16;case QI:return 536870912;default:return 16}default:return 16}}var aa=null,pw=null,Vp=null;function oM(){if(Vp)return Vp;var r,e=pw,t=e.length,n,i="value"in aa?aa.value:aa.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===i[s-n];n++);return Vp=i.slice(r,1<n?1-n:void 0)}function qp(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function op(){return!0}function kC(){return!1}function Gn(r){function e(t,n,i,s,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?op:kC,this.isPropagationStopped=kC,this}return zt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=op)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=op)},persist:function(){},isPersistent:op}),e}var bc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mw=Gn(bc),wd=zt({},bc,{view:0,detail:0}),k7=Gn(wd),yy,xy,th,Lg=zt({},wd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gw,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==th&&(th&&r.type==="mousemove"?(yy=r.screenX-th.screenX,xy=r.screenY-th.screenY):xy=yy=0,th=r),yy)},movementY:function(r){return"movementY"in r?r.movementY:xy}}),IC=Gn(Lg),I7=zt({},Lg,{dataTransfer:0}),M7=Gn(I7),R7=zt({},wd,{relatedTarget:0}),_y=Gn(R7),O7=zt({},bc,{animationName:0,elapsedTime:0,pseudoElement:0}),N7=Gn(O7),F7=zt({},bc,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),B7=Gn(F7),L7=zt({},bc,{data:0}),MC=Gn(L7),D7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},j7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X7(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=j7[r])?!!e[r]:!1}function gw(){return X7}var H7=zt({},wd,{key:function(r){if(r.key){var e=D7[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=qp(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?U7[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gw,charCode:function(r){return r.type==="keypress"?qp(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qp(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),$7=Gn(H7),z7=zt({},Lg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RC=Gn(z7),Y7=zt({},wd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gw}),G7=Gn(Y7),W7=zt({},bc,{propertyName:0,elapsedTime:0,pseudoElement:0}),V7=Gn(W7),q7=zt({},Lg,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),K7=Gn(q7),Q7=[9,13,27,32],vw=wo&&"CompositionEvent"in window,Eh=null;wo&&"documentMode"in document&&(Eh=document.documentMode);var Z7=wo&&"TextEvent"in window&&!Eh,aM=wo&&(!vw||Eh&&8<Eh&&11>=Eh),OC=" ",NC=!1;function lM(r,e){switch(r){case"keyup":return Q7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uM(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var mu=!1;function J7(r,e){switch(r){case"compositionend":return uM(e);case"keypress":return e.which!==32?null:(NC=!0,OC);case"textInput":return r=e.data,r===OC&&NC?null:r;default:return null}}function eX(r,e){if(mu)return r==="compositionend"||!vw&&lM(r,e)?(r=oM(),Vp=pw=aa=null,mu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aM&&e.locale!=="ko"?null:e.data;default:return null}}var tX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FC(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!tX[r.type]:e==="textarea"}function cM(r,e,t,n){XI(n),e=Nm(e,"onChange"),0<e.length&&(t=new mw("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Ch=null,Vh=null;function rX(r){wM(r,0)}function Dg(r){var e=yu(r);if(NI(e))return r}function nX(r,e){if(r==="change")return e}var hM=!1;if(wo){var wy;if(wo){var by="oninput"in document;if(!by){var BC=document.createElement("div");BC.setAttribute("oninput","return;"),by=typeof BC.oninput=="function"}wy=by}else wy=!1;hM=wy&&(!document.documentMode||9<document.documentMode)}function LC(){Ch&&(Ch.detachEvent("onpropertychange",dM),Vh=Ch=null)}function dM(r){if(r.propertyName==="value"&&Dg(Vh)){var e=[];cM(e,Vh,r,uw(r)),YI(rX,e)}}function iX(r,e,t){r==="focusin"?(LC(),Ch=e,Vh=t,Ch.attachEvent("onpropertychange",dM)):r==="focusout"&&LC()}function sX(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Dg(Vh)}function oX(r,e){if(r==="click")return Dg(e)}function aX(r,e){if(r==="input"||r==="change")return Dg(e)}function lX(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Vi=typeof Object.is=="function"?Object.is:lX;function qh(r,e){if(Vi(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!hx.call(e,i)||!Vi(r[i],e[i]))return!1}return!0}function DC(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function UC(r,e){var t=DC(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=DC(t)}}function fM(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?fM(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function pM(){for(var r=window,e=Pm();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Pm(r.document)}return e}function yw(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function uX(r){var e=pM(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&fM(t.ownerDocument.documentElement,t)){if(n!==null&&yw(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=UC(t,s);var o=UC(t,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var cX=wo&&"documentMode"in document&&11>=document.documentMode,gu=null,Ix=null,Ph=null,Mx=!1;function jC(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Mx||gu==null||gu!==Pm(n)||(n=gu,"selectionStart"in n&&yw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ph&&qh(Ph,n)||(Ph=n,n=Nm(Ix,"onSelect"),0<n.length&&(e=new mw("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=gu)))}function ap(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var vu={animationend:ap("Animation","AnimationEnd"),animationiteration:ap("Animation","AnimationIteration"),animationstart:ap("Animation","AnimationStart"),transitionend:ap("Transition","TransitionEnd")},Sy={},mM={};wo&&(mM=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function Ug(r){if(Sy[r])return Sy[r];if(!vu[r])return r;var e=vu[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in mM)return Sy[r]=e[t];return r}var gM=Ug("animationend"),vM=Ug("animationiteration"),yM=Ug("animationstart"),xM=Ug("transitionend"),_M=new Map,XC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ka(r,e){_M.set(r,e),Pl(e,[r])}for(var Ty=0;Ty<XC.length;Ty++){var Ey=XC[Ty],hX=Ey.toLowerCase(),dX=Ey[0].toUpperCase()+Ey.slice(1);ka(hX,"on"+dX)}ka(gM,"onAnimationEnd");ka(vM,"onAnimationIteration");ka(yM,"onAnimationStart");ka("dblclick","onDoubleClick");ka("focusin","onFocus");ka("focusout","onBlur");ka(xM,"onTransitionEnd");ic("onMouseEnter",["mouseout","mouseover"]);ic("onMouseLeave",["mouseout","mouseover"]);ic("onPointerEnter",["pointerout","pointerover"]);ic("onPointerLeave",["pointerout","pointerover"]);Pl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fX=new Set("cancel close invalid load scroll toggle".split(" ").concat(gh));function HC(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,h7(n,e,void 0,r),r.currentTarget=null}function wM(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;HC(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;HC(i,a,u),s=l}}}if(km)throw r=Cx,km=!1,Cx=null,r}function Pt(r,e){var t=e[Bx];t===void 0&&(t=e[Bx]=new Set);var n=r+"__bubble";t.has(n)||(bM(e,r,2,!1),t.add(n))}function Cy(r,e,t){var n=0;e&&(n|=4),bM(t,r,n,e)}var lp="_reactListening"+Math.random().toString(36).slice(2);function Kh(r){if(!r[lp]){r[lp]=!0,kI.forEach(function(t){t!=="selectionchange"&&(fX.has(t)||Cy(t,!1,r),Cy(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[lp]||(e[lp]=!0,Cy("selectionchange",!1,e))}}function bM(r,e,t,n){switch(sM(e)){case 1:var i=P7;break;case 4:i=A7;break;default:i=fw}t=i.bind(null,e,t,r),i=void 0,!Ex||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function Py(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=tl(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}YI(function(){var u=s,h=uw(t),c=[];e:{var d=_M.get(r);if(d!==void 0){var f=mw,g=r;switch(r){case"keypress":if(qp(t)===0)break e;case"keydown":case"keyup":f=$7;break;case"focusin":g="focus",f=_y;break;case"focusout":g="blur",f=_y;break;case"beforeblur":case"afterblur":f=_y;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=IC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=M7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=G7;break;case gM:case vM:case yM:f=N7;break;case xM:f=V7;break;case"scroll":f=k7;break;case"wheel":f=K7;break;case"copy":case"cut":case"paste":f=B7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=RC}var v=(e&4)!==0,x=!v&&r==="scroll",y=v?d!==null?d+"Capture":null:d;v=[];for(var b=u,_;b!==null;){_=b;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,y!==null&&(S=zh(b,y),S!=null&&v.push(Qh(b,S,_)))),x)break;b=b.return}0<v.length&&(d=new f(d,g,null,t,h),c.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",f=r==="mouseout"||r==="pointerout",d&&t!==Sx&&(g=t.relatedTarget||t.fromElement)&&(tl(g)||g[bo]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(g=t.relatedTarget||t.toElement,f=u,g=g?tl(g):null,g!==null&&(x=Al(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(v=IC,S="onMouseLeave",y="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(v=RC,S="onPointerLeave",y="onPointerEnter",b="pointer"),x=f==null?d:yu(f),_=g==null?d:yu(g),d=new v(S,b+"leave",f,t,h),d.target=x,d.relatedTarget=_,S=null,tl(h)===u&&(v=new v(y,b+"enter",g,t,h),v.target=_,v.relatedTarget=x,S=v),x=S,f&&g)t:{for(v=f,y=g,b=0,_=v;_;_=Zl(_))b++;for(_=0,S=y;S;S=Zl(S))_++;for(;0<b-_;)v=Zl(v),b--;for(;0<_-b;)y=Zl(y),_--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=Zl(v),y=Zl(y)}v=null}else v=null;f!==null&&$C(c,d,f,v,!1),g!==null&&x!==null&&$C(c,x,g,v,!0)}}e:{if(d=u?yu(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var I=nX;else if(FC(d))if(hM)I=aX;else{I=sX;var A=iX}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=oX);if(I&&(I=I(r,u))){cM(c,I,t,h);break e}A&&A(r,d,u),r==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&yx(d,"number",d.value)}switch(A=u?yu(u):window,r){case"focusin":(FC(A)||A.contentEditable==="true")&&(gu=A,Ix=u,Ph=null);break;case"focusout":Ph=Ix=gu=null;break;case"mousedown":Mx=!0;break;case"contextmenu":case"mouseup":case"dragend":Mx=!1,jC(c,t,h);break;case"selectionchange":if(cX)break;case"keydown":case"keyup":jC(c,t,h)}var k;if(vw)e:{switch(r){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else mu?lM(r,t)&&(M="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(aM&&t.locale!=="ko"&&(mu||M!=="onCompositionStart"?M==="onCompositionEnd"&&mu&&(k=oM()):(aa=h,pw="value"in aa?aa.value:aa.textContent,mu=!0)),A=Nm(u,M),0<A.length&&(M=new MC(M,r,null,t,h),c.push({event:M,listeners:A}),k?M.data=k:(k=uM(t),k!==null&&(M.data=k)))),(k=Z7?J7(r,t):eX(r,t))&&(u=Nm(u,"onBeforeInput"),0<u.length&&(h=new MC("onBeforeInput","beforeinput",null,t,h),c.push({event:h,listeners:u}),h.data=k))}wM(c,e)})}function Qh(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Nm(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zh(r,t),s!=null&&n.unshift(Qh(r,s,i)),s=zh(r,e),s!=null&&n.push(Qh(r,s,i))),r=r.return}return n}function Zl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function $C(r,e,t,n,i){for(var s=e._reactName,o=[];t!==null&&t!==n;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=zh(t,s),l!=null&&o.unshift(Qh(t,l,a))):i||(l=zh(t,s),l!=null&&o.push(Qh(t,l,a)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var pX=/\r\n?/g,mX=/\u0000|\uFFFD/g;function zC(r){return(typeof r=="string"?r:""+r).replace(pX,`
`).replace(mX,"")}function up(r,e,t){if(e=zC(e),zC(r)!==e&&t)throw Error(ue(425))}function Fm(){}var Rx=null,Ox=null;function Nx(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fx=typeof setTimeout=="function"?setTimeout:void 0,gX=typeof clearTimeout=="function"?clearTimeout:void 0,YC=typeof Promise=="function"?Promise:void 0,vX=typeof queueMicrotask=="function"?queueMicrotask:typeof YC<"u"?function(r){return YC.resolve(null).then(r).catch(yX)}:Fx;function yX(r){setTimeout(function(){throw r})}function Ay(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),Wh(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Wh(e)}function pa(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function GC(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var Sc=Math.random().toString(36).slice(2),Cs="__reactFiber$"+Sc,Zh="__reactProps$"+Sc,bo="__reactContainer$"+Sc,Bx="__reactEvents$"+Sc,xX="__reactListeners$"+Sc,_X="__reactHandles$"+Sc;function tl(r){var e=r[Cs];if(e)return e;for(var t=r.parentNode;t;){if(e=t[bo]||t[Cs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=GC(r);r!==null;){if(t=r[Cs])return t;r=GC(r)}return e}r=t,t=r.parentNode}return null}function bd(r){return r=r[Cs]||r[bo],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function yu(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(ue(33))}function jg(r){return r[Zh]||null}var Lx=[],xu=-1;function Ia(r){return{current:r}}function kt(r){0>xu||(r.current=Lx[xu],Lx[xu]=null,xu--)}function St(r,e){xu++,Lx[xu]=r.current,r.current=e}var Ta={},Jr=Ia(Ta),wn=Ia(!1),vl=Ta;function sc(r,e){var t=r.type.contextTypes;if(!t)return Ta;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function bn(r){return r=r.childContextTypes,r!=null}function Bm(){kt(wn),kt(Jr)}function WC(r,e,t){if(Jr.current!==Ta)throw Error(ue(168));St(Jr,e),St(wn,t)}function SM(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(ue(108,i7(r)||"Unknown",i));return zt({},t,n)}function Lm(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ta,vl=Jr.current,St(Jr,r),St(wn,wn.current),!0}function VC(r,e,t){var n=r.stateNode;if(!n)throw Error(ue(169));t?(r=SM(r,e,vl),n.__reactInternalMemoizedMergedChildContext=r,kt(wn),kt(Jr),St(Jr,r)):kt(wn),St(wn,t)}var ro=null,Xg=!1,ky=!1;function TM(r){ro===null?ro=[r]:ro.push(r)}function wX(r){Xg=!0,TM(r)}function Ma(){if(!ky&&ro!==null){ky=!0;var r=0,e=mt;try{var t=ro;for(mt=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}ro=null,Xg=!1}catch(i){throw ro!==null&&(ro=ro.slice(r+1)),qI(cw,Ma),i}finally{mt=e,ky=!1}}return null}var _u=[],wu=0,Dm=null,Um=0,ii=[],si=0,yl=null,ho=1,fo="";function Qa(r,e){_u[wu++]=Um,_u[wu++]=Dm,Dm=r,Um=e}function EM(r,e,t){ii[si++]=ho,ii[si++]=fo,ii[si++]=yl,yl=r;var n=ho;r=fo;var i=32-zi(n)-1;n&=~(1<<i),t+=1;var s=32-zi(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,ho=1<<32-zi(e)+i|t<<i|n,fo=s+r}else ho=1<<s|t<<i|n,fo=r}function xw(r){r.return!==null&&(Qa(r,1),EM(r,1,0))}function _w(r){for(;r===Dm;)Dm=_u[--wu],_u[wu]=null,Um=_u[--wu],_u[wu]=null;for(;r===yl;)yl=ii[--si],ii[si]=null,fo=ii[--si],ii[si]=null,ho=ii[--si],ii[si]=null}var Un=null,Ln=null,Nt=!1,Ii=null;function CM(r,e){var t=ui(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function qC(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Un=r,Ln=pa(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Un=r,Ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=yl!==null?{id:ho,overflow:fo}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ui(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Un=r,Ln=null,!0):!1;default:return!1}}function Dx(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Ux(r){if(Nt){var e=Ln;if(e){var t=e;if(!qC(r,e)){if(Dx(r))throw Error(ue(418));e=pa(t.nextSibling);var n=Un;e&&qC(r,e)?CM(n,t):(r.flags=r.flags&-4097|2,Nt=!1,Un=r)}}else{if(Dx(r))throw Error(ue(418));r.flags=r.flags&-4097|2,Nt=!1,Un=r}}}function KC(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Un=r}function cp(r){if(r!==Un)return!1;if(!Nt)return KC(r),Nt=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!Nx(r.type,r.memoizedProps)),e&&(e=Ln)){if(Dx(r))throw PM(),Error(ue(418));for(;e;)CM(r,e),e=pa(e.nextSibling)}if(KC(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(ue(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Ln=pa(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Ln=null}}else Ln=Un?pa(r.stateNode.nextSibling):null;return!0}function PM(){for(var r=Ln;r;)r=pa(r.nextSibling)}function oc(){Ln=Un=null,Nt=!1}function ww(r){Ii===null?Ii=[r]:Ii.push(r)}var bX=Ao.ReactCurrentBatchConfig;function rh(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ue(309));var n=t.stateNode}if(!n)throw Error(ue(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof r!="string")throw Error(ue(284));if(!t._owner)throw Error(ue(290,r))}return r}function hp(r,e){throw r=Object.prototype.toString.call(e),Error(ue(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function QC(r){var e=r._init;return e(r._payload)}function AM(r){function e(y,b){if(r){var _=y.deletions;_===null?(y.deletions=[b],y.flags|=16):_.push(b)}}function t(y,b){if(!r)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=ya(y,b),y.index=0,y.sibling=null,y}function s(y,b,_){return y.index=_,r?(_=y.alternate,_!==null?(_=_.index,_<b?(y.flags|=2,b):_):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return r&&y.alternate===null&&(y.flags|=2),y}function a(y,b,_,S){return b===null||b.tag!==6?(b=By(_,y.mode,S),b.return=y,b):(b=i(b,_),b.return=y,b)}function l(y,b,_,S){var I=_.type;return I===pu?h(y,b,_.props.children,S,_.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Qo&&QC(I)===b.type)?(S=i(b,_.props),S.ref=rh(y,b,_),S.return=y,S):(S=rm(_.type,_.key,_.props,null,y.mode,S),S.ref=rh(y,b,_),S.return=y,S)}function u(y,b,_,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Ly(_,y.mode,S),b.return=y,b):(b=i(b,_.children||[]),b.return=y,b)}function h(y,b,_,S,I){return b===null||b.tag!==7?(b=cl(_,y.mode,S,I),b.return=y,b):(b=i(b,_),b.return=y,b)}function c(y,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=By(""+b,y.mode,_),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ep:return _=rm(b.type,b.key,b.props,null,y.mode,_),_.ref=rh(y,null,b),_.return=y,_;case fu:return b=Ly(b,y.mode,_),b.return=y,b;case Qo:var S=b._init;return c(y,S(b._payload),_)}if(ph(b)||Qc(b))return b=cl(b,y.mode,_,null),b.return=y,b;hp(y,b)}return null}function d(y,b,_,S){var I=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:a(y,b,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ep:return _.key===I?l(y,b,_,S):null;case fu:return _.key===I?u(y,b,_,S):null;case Qo:return I=_._init,d(y,b,I(_._payload),S)}if(ph(_)||Qc(_))return I!==null?null:h(y,b,_,S,null);hp(y,_)}return null}function f(y,b,_,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(_)||null,a(b,y,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ep:return y=y.get(S.key===null?_:S.key)||null,l(b,y,S,I);case fu:return y=y.get(S.key===null?_:S.key)||null,u(b,y,S,I);case Qo:var A=S._init;return f(y,b,_,A(S._payload),I)}if(ph(S)||Qc(S))return y=y.get(_)||null,h(b,y,S,I,null);hp(b,S)}return null}function g(y,b,_,S){for(var I=null,A=null,k=b,M=b=0,O=null;k!==null&&M<_.length;M++){k.index>M?(O=k,k=null):O=k.sibling;var L=d(y,k,_[M],S);if(L===null){k===null&&(k=O);break}r&&k&&L.alternate===null&&e(y,k),b=s(L,b,M),A===null?I=L:A.sibling=L,A=L,k=O}if(M===_.length)return t(y,k),Nt&&Qa(y,M),I;if(k===null){for(;M<_.length;M++)k=c(y,_[M],S),k!==null&&(b=s(k,b,M),A===null?I=k:A.sibling=k,A=k);return Nt&&Qa(y,M),I}for(k=n(y,k);M<_.length;M++)O=f(k,y,M,_[M],S),O!==null&&(r&&O.alternate!==null&&k.delete(O.key===null?M:O.key),b=s(O,b,M),A===null?I=O:A.sibling=O,A=O);return r&&k.forEach(function(D){return e(y,D)}),Nt&&Qa(y,M),I}function v(y,b,_,S){var I=Qc(_);if(typeof I!="function")throw Error(ue(150));if(_=I.call(_),_==null)throw Error(ue(151));for(var A=I=null,k=b,M=b=0,O=null,L=_.next();k!==null&&!L.done;M++,L=_.next()){k.index>M?(O=k,k=null):O=k.sibling;var D=d(y,k,L.value,S);if(D===null){k===null&&(k=O);break}r&&k&&D.alternate===null&&e(y,k),b=s(D,b,M),A===null?I=D:A.sibling=D,A=D,k=O}if(L.done)return t(y,k),Nt&&Qa(y,M),I;if(k===null){for(;!L.done;M++,L=_.next())L=c(y,L.value,S),L!==null&&(b=s(L,b,M),A===null?I=L:A.sibling=L,A=L);return Nt&&Qa(y,M),I}for(k=n(y,k);!L.done;M++,L=_.next())L=f(k,y,M,L.value,S),L!==null&&(r&&L.alternate!==null&&k.delete(L.key===null?M:L.key),b=s(L,b,M),A===null?I=L:A.sibling=L,A=L);return r&&k.forEach(function(j){return e(y,j)}),Nt&&Qa(y,M),I}function x(y,b,_,S){if(typeof _=="object"&&_!==null&&_.type===pu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case ep:e:{for(var I=_.key,A=b;A!==null;){if(A.key===I){if(I=_.type,I===pu){if(A.tag===7){t(y,A.sibling),b=i(A,_.props.children),b.return=y,y=b;break e}}else if(A.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Qo&&QC(I)===A.type){t(y,A.sibling),b=i(A,_.props),b.ref=rh(y,A,_),b.return=y,y=b;break e}t(y,A);break}else e(y,A);A=A.sibling}_.type===pu?(b=cl(_.props.children,y.mode,S,_.key),b.return=y,y=b):(S=rm(_.type,_.key,_.props,null,y.mode,S),S.ref=rh(y,b,_),S.return=y,y=S)}return o(y);case fu:e:{for(A=_.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){t(y,b.sibling),b=i(b,_.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=Ly(_,y.mode,S),b.return=y,y=b}return o(y);case Qo:return A=_._init,x(y,b,A(_._payload),S)}if(ph(_))return g(y,b,_,S);if(Qc(_))return v(y,b,_,S);hp(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(t(y,b.sibling),b=i(b,_),b.return=y,y=b):(t(y,b),b=By(_,y.mode,S),b.return=y,y=b),o(y)):t(y,b)}return x}var ac=AM(!0),kM=AM(!1),jm=Ia(null),Xm=null,bu=null,bw=null;function Sw(){bw=bu=Xm=null}function Tw(r){var e=jm.current;kt(jm),r._currentValue=e}function jx(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function Gu(r,e){Xm=r,bw=bu=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(_n=!0),r.firstContext=null)}function fi(r){var e=r._currentValue;if(bw!==r)if(r={context:r,memoizedValue:e,next:null},bu===null){if(Xm===null)throw Error(ue(308));bu=r,Xm.dependencies={lanes:0,firstContext:r}}else bu=bu.next=r;return e}var rl=null;function Ew(r){rl===null?rl=[r]:rl.push(r)}function IM(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,Ew(e)):(t.next=i.next,i.next=t),e.interleaved=t,So(r,n)}function So(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Zo=!1;function Cw(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function MM(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function go(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function ma(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,ot&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,So(r,t)}return i=n.interleaved,i===null?(e.next=e,Ew(n)):(e.next=i.next,i.next=e),n.interleaved=e,So(r,t)}function Kp(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,hw(r,t)}}function ZC(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function Hm(r,e,t,n){var i=r.updateQueue;Zo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=r.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=i.baseState;o=0,h=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=r,v=a;switch(d=e,f=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){c=g.call(f,c,d);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(f,c,d):g,d==null)break e;c=zt({},c,d);break e;case 2:Zo=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=f,l=c):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(h===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);_l|=o,r.lanes=o,r.memoizedState=c}}function JC(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(ue(191,i));i.call(n)}}}var Sd={},Os=Ia(Sd),Jh=Ia(Sd),ed=Ia(Sd);function nl(r){if(r===Sd)throw Error(ue(174));return r}function Pw(r,e){switch(St(ed,e),St(Jh,r),St(Os,Sd),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_x(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=_x(e,r)}kt(Os),St(Os,e)}function lc(){kt(Os),kt(Jh),kt(ed)}function RM(r){nl(ed.current);var e=nl(Os.current),t=_x(e,r.type);e!==t&&(St(Jh,r),St(Os,t))}function Aw(r){Jh.current===r&&(kt(Os),kt(Jh))}var Ut=Ia(0);function $m(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iy=[];function kw(){for(var r=0;r<Iy.length;r++)Iy[r]._workInProgressVersionPrimary=null;Iy.length=0}var Qp=Ao.ReactCurrentDispatcher,My=Ao.ReactCurrentBatchConfig,xl=0,$t=null,dr=null,Tr=null,zm=!1,Ah=!1,td=0,SX=0;function $r(){throw Error(ue(321))}function Iw(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Vi(r[t],e[t]))return!1;return!0}function Mw(r,e,t,n,i,s){if(xl=s,$t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qp.current=r===null||r.memoizedState===null?PX:AX,r=t(n,i),Ah){s=0;do{if(Ah=!1,td=0,25<=s)throw Error(ue(301));s+=1,Tr=dr=null,e.updateQueue=null,Qp.current=kX,r=t(n,i)}while(Ah)}if(Qp.current=Ym,e=dr!==null&&dr.next!==null,xl=0,Tr=dr=$t=null,zm=!1,e)throw Error(ue(300));return r}function Rw(){var r=td!==0;return td=0,r}function _s(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?$t.memoizedState=Tr=r:Tr=Tr.next=r,Tr}function pi(){if(dr===null){var r=$t.alternate;r=r!==null?r.memoizedState:null}else r=dr.next;var e=Tr===null?$t.memoizedState:Tr.next;if(e!==null)Tr=e,dr=r;else{if(r===null)throw Error(ue(310));dr=r,r={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},Tr===null?$t.memoizedState=Tr=r:Tr=Tr.next=r}return Tr}function rd(r,e){return typeof e=="function"?e(r):e}function Ry(r){var e=pi(),t=e.queue;if(t===null)throw Error(ue(311));t.lastRenderedReducer=r;var n=dr,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((xl&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:r(n,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=n):l=l.next=c,$t.lanes|=h,_l|=h}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,Vi(n,e.memoizedState)||(_n=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,$t.lanes|=s,_l|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Oy(r){var e=pi(),t=e.queue;if(t===null)throw Error(ue(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=r(s,o.action),o=o.next;while(o!==i);Vi(s,e.memoizedState)||(_n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function OM(){}function NM(r,e){var t=$t,n=pi(),i=e(),s=!Vi(n.memoizedState,i);if(s&&(n.memoizedState=i,_n=!0),n=n.queue,Ow(LM.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||Tr!==null&&Tr.memoizedState.tag&1){if(t.flags|=2048,nd(9,BM.bind(null,t,n,i,e),void 0,null),Er===null)throw Error(ue(349));xl&30||FM(t,e,i)}return i}function FM(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function BM(r,e,t,n){e.value=t,e.getSnapshot=n,DM(e)&&UM(r)}function LM(r,e,t){return t(function(){DM(e)&&UM(r)})}function DM(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Vi(r,t)}catch{return!0}}function UM(r){var e=So(r,1);e!==null&&Yi(e,r,1,-1)}function eP(r){var e=_s();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rd,lastRenderedState:r},e.queue=r,r=r.dispatch=CX.bind(null,$t,r),[e.memoizedState,r]}function nd(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function jM(){return pi().memoizedState}function Zp(r,e,t,n){var i=_s();$t.flags|=r,i.memoizedState=nd(1|e,t,void 0,n===void 0?null:n)}function Hg(r,e,t,n){var i=pi();n=n===void 0?null:n;var s=void 0;if(dr!==null){var o=dr.memoizedState;if(s=o.destroy,n!==null&&Iw(n,o.deps)){i.memoizedState=nd(e,t,s,n);return}}$t.flags|=r,i.memoizedState=nd(1|e,t,s,n)}function tP(r,e){return Zp(8390656,8,r,e)}function Ow(r,e){return Hg(2048,8,r,e)}function XM(r,e){return Hg(4,2,r,e)}function HM(r,e){return Hg(4,4,r,e)}function $M(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function zM(r,e,t){return t=t!=null?t.concat([r]):null,Hg(4,4,$M.bind(null,e,r),t)}function Nw(){}function YM(r,e){var t=pi();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Iw(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function GM(r,e){var t=pi();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Iw(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function WM(r,e,t){return xl&21?(Vi(t,e)||(t=ZI(),$t.lanes|=t,_l|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,_n=!0),r.memoizedState=t)}function TX(r,e){var t=mt;mt=t!==0&&4>t?t:4,r(!0);var n=My.transition;My.transition={};try{r(!1),e()}finally{mt=t,My.transition=n}}function VM(){return pi().memoizedState}function EX(r,e,t){var n=va(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},qM(r))KM(e,t);else if(t=IM(r,e,t,n),t!==null){var i=an();Yi(t,r,n,i),QM(t,e,n)}}function CX(r,e,t){var n=va(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(qM(r))KM(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Vi(a,o)){var l=e.interleaved;l===null?(i.next=i,Ew(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=IM(r,e,i,n),t!==null&&(i=an(),Yi(t,r,n,i),QM(t,e,n))}}function qM(r){var e=r.alternate;return r===$t||e!==null&&e===$t}function KM(r,e){Ah=zm=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function QM(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,hw(r,t)}}var Ym={readContext:fi,useCallback:$r,useContext:$r,useEffect:$r,useImperativeHandle:$r,useInsertionEffect:$r,useLayoutEffect:$r,useMemo:$r,useReducer:$r,useRef:$r,useState:$r,useDebugValue:$r,useDeferredValue:$r,useTransition:$r,useMutableSource:$r,useSyncExternalStore:$r,useId:$r,unstable_isNewReconciler:!1},PX={readContext:fi,useCallback:function(r,e){return _s().memoizedState=[r,e===void 0?null:e],r},useContext:fi,useEffect:tP,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,Zp(4194308,4,$M.bind(null,e,r),t)},useLayoutEffect:function(r,e){return Zp(4194308,4,r,e)},useInsertionEffect:function(r,e){return Zp(4,2,r,e)},useMemo:function(r,e){var t=_s();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=_s();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=EX.bind(null,$t,r),[n.memoizedState,r]},useRef:function(r){var e=_s();return r={current:r},e.memoizedState=r},useState:eP,useDebugValue:Nw,useDeferredValue:function(r){return _s().memoizedState=r},useTransition:function(){var r=eP(!1),e=r[0];return r=TX.bind(null,r[1]),_s().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=$t,i=_s();if(Nt){if(t===void 0)throw Error(ue(407));t=t()}else{if(t=e(),Er===null)throw Error(ue(349));xl&30||FM(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,tP(LM.bind(null,n,s,r),[r]),n.flags|=2048,nd(9,BM.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=_s(),e=Er.identifierPrefix;if(Nt){var t=fo,n=ho;t=(n&~(1<<32-zi(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=td++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=SX++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},AX={readContext:fi,useCallback:YM,useContext:fi,useEffect:Ow,useImperativeHandle:zM,useInsertionEffect:XM,useLayoutEffect:HM,useMemo:GM,useReducer:Ry,useRef:jM,useState:function(){return Ry(rd)},useDebugValue:Nw,useDeferredValue:function(r){var e=pi();return WM(e,dr.memoizedState,r)},useTransition:function(){var r=Ry(rd)[0],e=pi().memoizedState;return[r,e]},useMutableSource:OM,useSyncExternalStore:NM,useId:VM,unstable_isNewReconciler:!1},kX={readContext:fi,useCallback:YM,useContext:fi,useEffect:Ow,useImperativeHandle:zM,useInsertionEffect:XM,useLayoutEffect:HM,useMemo:GM,useReducer:Oy,useRef:jM,useState:function(){return Oy(rd)},useDebugValue:Nw,useDeferredValue:function(r){var e=pi();return dr===null?e.memoizedState=r:WM(e,dr.memoizedState,r)},useTransition:function(){var r=Oy(rd)[0],e=pi().memoizedState;return[r,e]},useMutableSource:OM,useSyncExternalStore:NM,useId:VM,unstable_isNewReconciler:!1};function Ai(r,e){if(r&&r.defaultProps){e=zt({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function Xx(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:zt({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var $g={isMounted:function(r){return(r=r._reactInternals)?Al(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=an(),i=va(r),s=go(n,i);s.payload=e,t!=null&&(s.callback=t),e=ma(r,s,i),e!==null&&(Yi(e,r,i,n),Kp(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=an(),i=va(r),s=go(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ma(r,s,i),e!==null&&(Yi(e,r,i,n),Kp(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=an(),n=va(r),i=go(t,n);i.tag=2,e!=null&&(i.callback=e),e=ma(r,i,n),e!==null&&(Yi(e,r,n,t),Kp(e,r,n))}};function rP(r,e,t,n,i,s,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!qh(t,n)||!qh(i,s):!0}function ZM(r,e,t){var n=!1,i=Ta,s=e.contextType;return typeof s=="object"&&s!==null?s=fi(s):(i=bn(e)?vl:Jr.current,n=e.contextTypes,s=(n=n!=null)?sc(r,i):Ta),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$g,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function nP(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&$g.enqueueReplaceState(e,e.state,null)}function Hx(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},Cw(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=fi(s):(s=bn(e)?vl:Jr.current,i.context=sc(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xx(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$g.enqueueReplaceState(i,i.state,null),Hm(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function uc(r,e){try{var t="",n=e;do t+=n7(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function Ny(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function $x(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var IX=typeof WeakMap=="function"?WeakMap:Map;function JM(r,e,t){t=go(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Wm||(Wm=!0,Jx=n),$x(r,e)},t}function eR(r,e,t){t=go(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){$x(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){$x(r,e),typeof n!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function iP(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new IX;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=zX.bind(null,r,e,t),e.then(r,r))}function sP(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function oP(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=go(-1,1),e.tag=2,ma(t,e,1))),t.lanes|=1),r)}var MX=Ao.ReactCurrentOwner,_n=!1;function rn(r,e,t,n){e.child=r===null?kM(e,null,t,n):ac(e,r.child,t,n)}function aP(r,e,t,n,i){t=t.render;var s=e.ref;return Gu(e,i),n=Mw(r,e,t,n,s,i),t=Rw(),r!==null&&!_n?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,To(r,e,i)):(Nt&&t&&xw(e),e.flags|=1,rn(r,e,n,i),e.child)}function lP(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!Hw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tR(r,e,s,n,i)):(r=rm(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:qh,t(o,n)&&r.ref===e.ref)return To(r,e,i)}return e.flags|=1,r=ya(s,n),r.ref=e.ref,r.return=e,e.child=r}function tR(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(qh(s,n)&&r.ref===e.ref)if(_n=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(_n=!0);else return e.lanes=r.lanes,To(r,e,i)}return zx(r,e,t,n,i)}function rR(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Tu,Fn),Fn|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,St(Tu,Fn),Fn|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,St(Tu,Fn),Fn|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,St(Tu,Fn),Fn|=n;return rn(r,e,i,t),e.child}function nR(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function zx(r,e,t,n,i){var s=bn(t)?vl:Jr.current;return s=sc(e,s),Gu(e,i),t=Mw(r,e,t,n,s,i),n=Rw(),r!==null&&!_n?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,To(r,e,i)):(Nt&&n&&xw(e),e.flags|=1,rn(r,e,t,i),e.child)}function uP(r,e,t,n,i){if(bn(t)){var s=!0;Lm(e)}else s=!1;if(Gu(e,i),e.stateNode===null)Jp(r,e),ZM(e,t,n),Hx(e,t,n,i),n=!0;else if(r===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=fi(u):(u=bn(t)?vl:Jr.current,u=sc(e,u));var h=t.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&nP(e,o,n,u),Zo=!1;var d=e.memoizedState;o.state=d,Hm(e,n,o,i),l=e.memoizedState,a!==n||d!==l||wn.current||Zo?(typeof h=="function"&&(Xx(e,t,h,n),l=e.memoizedState),(a=Zo||rP(e,t,a,n,d,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,MM(r,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ai(e.type,a),o.props=u,c=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=fi(l):(l=bn(t)?vl:Jr.current,l=sc(e,l));var f=t.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&nP(e,o,n,l),Zo=!1,d=e.memoizedState,o.state=d,Hm(e,n,o,i);var g=e.memoizedState;a!==c||d!==g||wn.current||Zo?(typeof f=="function"&&(Xx(e,t,f,n),g=e.memoizedState),(u=Zo||rP(e,t,u,n,d,g,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return Yx(r,e,t,n,s,i)}function Yx(r,e,t,n,i,s){nR(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&VC(e,t,!1),To(r,e,s);n=e.stateNode,MX.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=ac(e,r.child,null,s),e.child=ac(e,null,a,s)):rn(r,e,a,s),e.memoizedState=n.state,i&&VC(e,t,!0),e.child}function iR(r){var e=r.stateNode;e.pendingContext?WC(r,e.pendingContext,e.pendingContext!==e.context):e.context&&WC(r,e.context,!1),Pw(r,e.containerInfo)}function cP(r,e,t,n,i){return oc(),ww(i),e.flags|=256,rn(r,e,t,n),e.child}var Gx={dehydrated:null,treeContext:null,retryLane:0};function Wx(r){return{baseLanes:r,cachePool:null,transitions:null}}function sR(r,e,t){var n=e.pendingProps,i=Ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),St(Ut,i&1),r===null)return Ux(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gg(o,n,0,null),r=cl(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=Wx(t),e.memoizedState=Gx,r):Fw(e,o));if(i=r.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return RX(r,e,o,n,a,i,t);if(s){s=n.fallback,o=e.mode,i=r.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=ya(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ya(a,s):(s=cl(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=r.child.memoizedState,o=o===null?Wx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=r.childLanes&~t,e.memoizedState=Gx,n}return s=r.child,r=s.sibling,n=ya(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function Fw(r,e){return e=Gg({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function dp(r,e,t,n){return n!==null&&ww(n),ac(e,r.child,null,t),r=Fw(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function RX(r,e,t,n,i,s,o){if(t)return e.flags&256?(e.flags&=-257,n=Ny(Error(ue(422))),dp(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Gg({mode:"visible",children:n.children},i,0,null),s=cl(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ac(e,r.child,null,o),e.child.memoizedState=Wx(o),e.memoizedState=Gx,s);if(!(e.mode&1))return dp(r,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(ue(419)),n=Ny(s,n,void 0),dp(r,e,o,n)}if(a=(o&r.childLanes)!==0,_n||a){if(n=Er,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,So(r,i),Yi(n,r,i,-1))}return Xw(),n=Ny(Error(ue(421))),dp(r,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=YX.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,Ln=pa(i.nextSibling),Un=e,Nt=!0,Ii=null,r!==null&&(ii[si++]=ho,ii[si++]=fo,ii[si++]=yl,ho=r.id,fo=r.overflow,yl=e),e=Fw(e,n.children),e.flags|=4096,e)}function hP(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),jx(r.return,e,t)}function Fy(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function oR(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(rn(r,e,n.children,t),n=Ut.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&hP(r,t,e);else if(r.tag===19)hP(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(St(Ut,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&$m(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),Fy(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&$m(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}Fy(e,!0,t,null,s);break;case"together":Fy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jp(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function To(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),_l|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(ue(153));if(e.child!==null){for(r=e.child,t=ya(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=ya(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function OX(r,e,t){switch(e.tag){case 3:iR(e),oc();break;case 5:RM(e);break;case 1:bn(e.type)&&Lm(e);break;case 4:Pw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;St(jm,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(St(Ut,Ut.current&1),e.flags|=128,null):t&e.child.childLanes?sR(r,e,t):(St(Ut,Ut.current&1),r=To(r,e,t),r!==null?r.sibling:null);St(Ut,Ut.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return oR(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Ut,Ut.current),n)break;return null;case 22:case 23:return e.lanes=0,rR(r,e,t)}return To(r,e,t)}var aR,Vx,lR,uR;aR=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Vx=function(){};lR=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,nl(Os.current);var s=null;switch(t){case"input":i=gx(r,i),n=gx(r,n),s=[];break;case"select":i=zt({},i,{value:void 0}),n=zt({},n,{value:void 0}),s=[];break;case"textarea":i=xx(r,i),n=xx(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Fm)}wx(t,n);var o;t=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Hh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Hh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Pt("scroll",r),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};uR=function(r,e,t,n){t!==n&&(e.flags|=4)};function nh(r,e){if(!Nt)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function zr(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function NX(r,e,t){var n=e.pendingProps;switch(_w(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zr(e),null;case 1:return bn(e.type)&&Bm(),zr(e),null;case 3:return n=e.stateNode,lc(),kt(wn),kt(Jr),kw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(cp(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ii!==null&&(r_(Ii),Ii=null))),Vx(r,e),zr(e),null;case 5:Aw(e);var i=nl(ed.current);if(t=e.type,r!==null&&e.stateNode!=null)lR(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(ue(166));return zr(e),null}if(r=nl(Os.current),cp(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[Cs]=e,n[Zh]=s,r=(e.mode&1)!==0,t){case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":case"embed":Pt("load",n);break;case"video":case"audio":for(i=0;i<gh.length;i++)Pt(gh[i],n);break;case"source":Pt("error",n);break;case"img":case"image":case"link":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"input":_C(n,s),Pt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Pt("invalid",n);break;case"textarea":bC(n,s),Pt("invalid",n)}wx(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&up(n.textContent,a,r),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&up(n.textContent,a,r),i=["children",""+a]):Hh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pt("scroll",n)}switch(t){case"input":tp(n),wC(n,s,!0);break;case"textarea":tp(n),SC(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Fm)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=LI(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[Cs]=e,r[Zh]=n,aR(r,e,!1,!1),e.stateNode=r;e:{switch(o=bx(t,n),t){case"dialog":Pt("cancel",r),Pt("close",r),i=n;break;case"iframe":case"object":case"embed":Pt("load",r),i=n;break;case"video":case"audio":for(i=0;i<gh.length;i++)Pt(gh[i],r);i=n;break;case"source":Pt("error",r),i=n;break;case"img":case"image":case"link":Pt("error",r),Pt("load",r),i=n;break;case"details":Pt("toggle",r),i=n;break;case"input":_C(r,n),i=gx(r,n),Pt("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=zt({},n,{value:void 0}),Pt("invalid",r);break;case"textarea":bC(r,n),i=xx(r,n),Pt("invalid",r);break;default:i=n}wx(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?jI(r,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&DI(r,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&$h(r,l):typeof l=="number"&&$h(r,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Hh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Pt("scroll",r):l!=null&&sw(r,s,l,o))}switch(t){case"input":tp(r),wC(r,n,!1);break;case"textarea":tp(r),SC(r);break;case"option":n.value!=null&&r.setAttribute("value",""+Sa(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Hu(r,!!n.multiple,s,!1):n.defaultValue!=null&&Hu(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Fm)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zr(e),null;case 6:if(r&&e.stateNode!=null)uR(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(ue(166));if(t=nl(ed.current),nl(Os.current),cp(e)){if(n=e.stateNode,t=e.memoizedProps,n[Cs]=e,(s=n.nodeValue!==t)&&(r=Un,r!==null))switch(r.tag){case 3:up(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&up(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Cs]=e,e.stateNode=n}return zr(e),null;case 13:if(kt(Ut),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Nt&&Ln!==null&&e.mode&1&&!(e.flags&128))PM(),oc(),e.flags|=98560,s=!1;else if(s=cp(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(ue(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ue(317));s[Cs]=e}else oc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zr(e),s=!1}else Ii!==null&&(r_(Ii),Ii=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Ut.current&1?mr===0&&(mr=3):Xw())),e.updateQueue!==null&&(e.flags|=4),zr(e),null);case 4:return lc(),Vx(r,e),r===null&&Kh(e.stateNode.containerInfo),zr(e),null;case 10:return Tw(e.type._context),zr(e),null;case 17:return bn(e.type)&&Bm(),zr(e),null;case 19:if(kt(Ut),s=e.memoizedState,s===null)return zr(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)nh(s,!1);else{if(mr!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=$m(r),o!==null){for(e.flags|=128,nh(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return St(Ut,Ut.current&1|2),e.child}r=r.sibling}s.tail!==null&&Jt()>cc&&(e.flags|=128,n=!0,nh(s,!1),e.lanes=4194304)}else{if(!n)if(r=$m(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),nh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Nt)return zr(e),null}else 2*Jt()-s.renderingStartTime>cc&&t!==1073741824&&(e.flags|=128,n=!0,nh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jt(),e.sibling=null,t=Ut.current,St(Ut,n?t&1|2:t&1),e):(zr(e),null);case 22:case 23:return jw(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Fn&1073741824&&(zr(e),e.subtreeFlags&6&&(e.flags|=8192)):zr(e),null;case 24:return null;case 25:return null}throw Error(ue(156,e.tag))}function FX(r,e){switch(_w(e),e.tag){case 1:return bn(e.type)&&Bm(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return lc(),kt(wn),kt(Jr),kw(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return Aw(e),null;case 13:if(kt(Ut),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(ue(340));oc()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return kt(Ut),null;case 4:return lc(),null;case 10:return Tw(e.type._context),null;case 22:case 23:return jw(),null;case 24:return null;default:return null}}var fp=!1,Wr=!1,BX=typeof WeakSet=="function"?WeakSet:Set,be=null;function Su(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Wt(r,e,n)}else t.current=null}function qx(r,e,t){try{t()}catch(n){Wt(r,e,n)}}var dP=!1;function LX(r,e){if(Rx=Rm,r=pM(),yw(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,h=0,c=r,d=null;t:for(;;){for(var f;c!==t||i!==0&&c.nodeType!==3||(a=o+i),c!==s||n!==0&&c.nodeType!==3||(l=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===r)break t;if(d===t&&++u===i&&(a=o),d===s&&++h===n&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Ox={focusedElem:r,selectionRange:t},Rm=!1,be=e;be!==null;)if(e=be,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,be=r;else for(;be!==null;){e=be;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ai(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ue(163))}}catch(S){Wt(e,e.return,S)}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}return g=dP,dP=!1,g}function kh(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&qx(e,t,s)}i=i.next}while(i!==n)}}function zg(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function Kx(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function cR(r){var e=r.alternate;e!==null&&(r.alternate=null,cR(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[Cs],delete e[Zh],delete e[Bx],delete e[xX],delete e[_X])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function hR(r){return r.tag===5||r.tag===3||r.tag===4}function fP(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||hR(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Qx(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Fm));else if(n!==4&&(r=r.child,r!==null))for(Qx(r,e,t),r=r.sibling;r!==null;)Qx(r,e,t),r=r.sibling}function Zx(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(Zx(r,e,t),r=r.sibling;r!==null;)Zx(r,e,t),r=r.sibling}var Mr=null,ki=!1;function $o(r,e,t){for(t=t.child;t!==null;)dR(r,e,t),t=t.sibling}function dR(r,e,t){if(Rs&&typeof Rs.onCommitFiberUnmount=="function")try{Rs.onCommitFiberUnmount(Bg,t)}catch{}switch(t.tag){case 5:Wr||Su(t,e);case 6:var n=Mr,i=ki;Mr=null,$o(r,e,t),Mr=n,ki=i,Mr!==null&&(ki?(r=Mr,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Mr.removeChild(t.stateNode));break;case 18:Mr!==null&&(ki?(r=Mr,t=t.stateNode,r.nodeType===8?Ay(r.parentNode,t):r.nodeType===1&&Ay(r,t),Wh(r)):Ay(Mr,t.stateNode));break;case 4:n=Mr,i=ki,Mr=t.stateNode.containerInfo,ki=!0,$o(r,e,t),Mr=n,ki=i;break;case 0:case 11:case 14:case 15:if(!Wr&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&qx(t,e,o),i=i.next}while(i!==n)}$o(r,e,t);break;case 1:if(!Wr&&(Su(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Wt(t,e,a)}$o(r,e,t);break;case 21:$o(r,e,t);break;case 22:t.mode&1?(Wr=(n=Wr)||t.memoizedState!==null,$o(r,e,t),Wr=n):$o(r,e,t);break;default:$o(r,e,t)}}function pP(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new BX),e.forEach(function(n){var i=GX.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function Ti(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Mr=a.stateNode,ki=!1;break e;case 3:Mr=a.stateNode.containerInfo,ki=!0;break e;case 4:Mr=a.stateNode.containerInfo,ki=!0;break e}a=a.return}if(Mr===null)throw Error(ue(160));dR(s,o,i),Mr=null,ki=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Wt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fR(e,r),e=e.sibling}function fR(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ti(e,r),ps(r),n&4){try{kh(3,r,r.return),zg(3,r)}catch(v){Wt(r,r.return,v)}try{kh(5,r,r.return)}catch(v){Wt(r,r.return,v)}}break;case 1:Ti(e,r),ps(r),n&512&&t!==null&&Su(t,t.return);break;case 5:if(Ti(e,r),ps(r),n&512&&t!==null&&Su(t,t.return),r.flags&32){var i=r.stateNode;try{$h(i,"")}catch(v){Wt(r,r.return,v)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,o=t!==null?t.memoizedProps:s,a=r.type,l=r.updateQueue;if(r.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&FI(i,s),bx(a,o);var u=bx(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?jI(i,c):h==="dangerouslySetInnerHTML"?DI(i,c):h==="children"?$h(i,c):sw(i,h,c,u)}switch(a){case"input":vx(i,s);break;case"textarea":BI(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Hu(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Hu(i,!!s.multiple,s.defaultValue,!0):Hu(i,!!s.multiple,s.multiple?[]:"",!1))}i[Zh]=s}catch(v){Wt(r,r.return,v)}}break;case 6:if(Ti(e,r),ps(r),n&4){if(r.stateNode===null)throw Error(ue(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(v){Wt(r,r.return,v)}}break;case 3:if(Ti(e,r),ps(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Wh(e.containerInfo)}catch(v){Wt(r,r.return,v)}break;case 4:Ti(e,r),ps(r);break;case 13:Ti(e,r),ps(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Dw=Jt())),n&4&&pP(r);break;case 22:if(h=t!==null&&t.memoizedState!==null,r.mode&1?(Wr=(u=Wr)||h,Ti(e,r),Wr=u):Ti(e,r),ps(r),n&8192){if(u=r.memoizedState!==null,(r.stateNode.isHidden=u)&&!h&&r.mode&1)for(be=r,h=r.child;h!==null;){for(c=be=h;be!==null;){switch(d=be,f=d.child,d.tag){case 0:case 11:case 14:case 15:kh(4,d,d.return);break;case 1:Su(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Wt(n,t,v)}}break;case 5:Su(d,d.return);break;case 22:if(d.memoizedState!==null){gP(c);continue}}f!==null?(f.return=d,be=f):gP(c)}h=h.sibling}e:for(h=null,c=r;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UI("display",o))}catch(v){Wt(r,r.return,v)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){Wt(r,r.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===r)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break e;for(;c.sibling===null;){if(c.return===null||c.return===r)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Ti(e,r),ps(r),n&4&&pP(r);break;case 21:break;default:Ti(e,r),ps(r)}}function ps(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(hR(t)){var n=t;break e}t=t.return}throw Error(ue(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&($h(i,""),n.flags&=-33);var s=fP(r);Zx(r,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=fP(r);Qx(r,a,o);break;default:throw Error(ue(161))}}catch(l){Wt(r,r.return,l)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function DX(r,e,t){be=r,pR(r)}function pR(r,e,t){for(var n=(r.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||fp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Wr;a=fp;var u=Wr;if(fp=o,(Wr=l)&&!u)for(be=i;be!==null;)o=be,l=o.child,o.tag===22&&o.memoizedState!==null?vP(i):l!==null?(l.return=o,be=l):vP(i);for(;s!==null;)be=s,pR(s),s=s.sibling;be=i,fp=a,Wr=u}mP(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):mP(r)}}function mP(r){for(;be!==null;){var e=be;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wr||zg(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Wr)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ai(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&JC(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}JC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Wh(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ue(163))}Wr||e.flags&512&&Kx(e)}catch(d){Wt(e,e.return,d)}}if(e===r){be=null;break}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}}function gP(r){for(;be!==null;){var e=be;if(e===r){be=null;break}var t=e.sibling;if(t!==null){t.return=e.return,be=t;break}be=e.return}}function vP(r){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{zg(4,e)}catch(l){Wt(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Wt(e,i,l)}}var s=e.return;try{Kx(e)}catch(l){Wt(e,s,l)}break;case 5:var o=e.return;try{Kx(e)}catch(l){Wt(e,o,l)}}}catch(l){Wt(e,e.return,l)}if(e===r){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var UX=Math.ceil,Gm=Ao.ReactCurrentDispatcher,Bw=Ao.ReactCurrentOwner,hi=Ao.ReactCurrentBatchConfig,ot=0,Er=null,sr=null,Br=0,Fn=0,Tu=Ia(0),mr=0,id=null,_l=0,Yg=0,Lw=0,Ih=null,vn=null,Dw=0,cc=1/0,Zs=null,Wm=!1,Jx=null,ga=null,pp=!1,la=null,Vm=0,Mh=0,e_=null,em=-1,tm=0;function an(){return ot&6?Jt():em!==-1?em:em=Jt()}function va(r){return r.mode&1?ot&2&&Br!==0?Br&-Br:bX.transition!==null?(tm===0&&(tm=ZI()),tm):(r=mt,r!==0||(r=window.event,r=r===void 0?16:sM(r.type)),r):1}function Yi(r,e,t,n){if(50<Mh)throw Mh=0,e_=null,Error(ue(185));_d(r,t,n),(!(ot&2)||r!==Er)&&(r===Er&&(!(ot&2)&&(Yg|=t),mr===4&&ra(r,Br)),Sn(r,n),t===1&&ot===0&&!(e.mode&1)&&(cc=Jt()+500,Xg&&Ma()))}function Sn(r,e){var t=r.callbackNode;b7(r,e);var n=Mm(r,r===Er?Br:0);if(n===0)t!==null&&CC(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&CC(t),e===1)r.tag===0?wX(yP.bind(null,r)):TM(yP.bind(null,r)),vX(function(){!(ot&6)&&Ma()}),t=null;else{switch(JI(n)){case 1:t=cw;break;case 4:t=KI;break;case 16:t=Im;break;case 536870912:t=QI;break;default:t=Im}t=bR(t,mR.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function mR(r,e){if(em=-1,tm=0,ot&6)throw Error(ue(327));var t=r.callbackNode;if(Wu()&&r.callbackNode!==t)return null;var n=Mm(r,r===Er?Br:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=qm(r,n);else{e=n;var i=ot;ot|=2;var s=vR();(Er!==r||Br!==e)&&(Zs=null,cc=Jt()+500,ul(r,e));do try{HX();break}catch(a){gR(r,a)}while(!0);Sw(),Gm.current=s,ot=i,sr!==null?e=0:(Er=null,Br=0,e=mr)}if(e!==0){if(e===2&&(i=Px(r),i!==0&&(n=i,e=t_(r,i))),e===1)throw t=id,ul(r,0),ra(r,n),Sn(r,Jt()),t;if(e===6)ra(r,n);else{if(i=r.current.alternate,!(n&30)&&!jX(i)&&(e=qm(r,n),e===2&&(s=Px(r),s!==0&&(n=s,e=t_(r,s))),e===1))throw t=id,ul(r,0),ra(r,n),Sn(r,Jt()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(ue(345));case 2:Za(r,vn,Zs);break;case 3:if(ra(r,n),(n&130023424)===n&&(e=Dw+500-Jt(),10<e)){if(Mm(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){an(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=Fx(Za.bind(null,r,vn,Zs),e);break}Za(r,vn,Zs);break;case 4:if(ra(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var o=31-zi(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Jt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*UX(n/1960))-n,10<n){r.timeoutHandle=Fx(Za.bind(null,r,vn,Zs),n);break}Za(r,vn,Zs);break;case 5:Za(r,vn,Zs);break;default:throw Error(ue(329))}}}return Sn(r,Jt()),r.callbackNode===t?mR.bind(null,r):null}function t_(r,e){var t=Ih;return r.current.memoizedState.isDehydrated&&(ul(r,e).flags|=256),r=qm(r,e),r!==2&&(e=vn,vn=t,e!==null&&r_(e)),r}function r_(r){vn===null?vn=r:vn.push.apply(vn,r)}function jX(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!Vi(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ra(r,e){for(e&=~Lw,e&=~Yg,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-zi(e),n=1<<t;r[t]=-1,e&=~n}}function yP(r){if(ot&6)throw Error(ue(327));Wu();var e=Mm(r,0);if(!(e&1))return Sn(r,Jt()),null;var t=qm(r,e);if(r.tag!==0&&t===2){var n=Px(r);n!==0&&(e=n,t=t_(r,n))}if(t===1)throw t=id,ul(r,0),ra(r,e),Sn(r,Jt()),t;if(t===6)throw Error(ue(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Za(r,vn,Zs),Sn(r,Jt()),null}function Uw(r,e){var t=ot;ot|=1;try{return r(e)}finally{ot=t,ot===0&&(cc=Jt()+500,Xg&&Ma())}}function wl(r){la!==null&&la.tag===0&&!(ot&6)&&Wu();var e=ot;ot|=1;var t=hi.transition,n=mt;try{if(hi.transition=null,mt=1,r)return r()}finally{mt=n,hi.transition=t,ot=e,!(ot&6)&&Ma()}}function jw(){Fn=Tu.current,kt(Tu)}function ul(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,gX(t)),sr!==null)for(t=sr.return;t!==null;){var n=t;switch(_w(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bm();break;case 3:lc(),kt(wn),kt(Jr),kw();break;case 5:Aw(n);break;case 4:lc();break;case 13:kt(Ut);break;case 19:kt(Ut);break;case 10:Tw(n.type._context);break;case 22:case 23:jw()}t=t.return}if(Er=r,sr=r=ya(r.current,null),Br=Fn=e,mr=0,id=null,Lw=Yg=_l=0,vn=Ih=null,rl!==null){for(e=0;e<rl.length;e++)if(t=rl[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}t.pending=n}rl=null}return r}function gR(r,e){do{var t=sr;try{if(Sw(),Qp.current=Ym,zm){for(var n=$t.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}zm=!1}if(xl=0,Tr=dr=$t=null,Ah=!1,td=0,Bw.current=null,t===null||t.return===null){mr=1,id=e,sr=null;break}e:{var s=r,o=t.return,a=t,l=e;if(e=Br,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=sP(o);if(f!==null){f.flags&=-257,oP(f,o,a,s,e),f.mode&1&&iP(s,u,e),e=f,l=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){iP(s,u,e),Xw();break e}l=Error(ue(426))}}else if(Nt&&a.mode&1){var x=sP(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),oP(x,o,a,s,e),ww(uc(l,a));break e}}s=l=uc(l,a),mr!==4&&(mr=2),Ih===null?Ih=[s]:Ih.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=JM(s,l,e);ZC(s,y);break e;case 1:a=l;var b=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ga===null||!ga.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=eR(s,a,e);ZC(s,S);break e}}s=s.return}while(s!==null)}xR(t)}catch(I){e=I,sr===t&&t!==null&&(sr=t=t.return);continue}break}while(!0)}function vR(){var r=Gm.current;return Gm.current=Ym,r===null?Ym:r}function Xw(){(mr===0||mr===3||mr===2)&&(mr=4),Er===null||!(_l&268435455)&&!(Yg&268435455)||ra(Er,Br)}function qm(r,e){var t=ot;ot|=2;var n=vR();(Er!==r||Br!==e)&&(Zs=null,ul(r,e));do try{XX();break}catch(i){gR(r,i)}while(!0);if(Sw(),ot=t,Gm.current=n,sr!==null)throw Error(ue(261));return Er=null,Br=0,mr}function XX(){for(;sr!==null;)yR(sr)}function HX(){for(;sr!==null&&!f7();)yR(sr)}function yR(r){var e=wR(r.alternate,r,Fn);r.memoizedProps=r.pendingProps,e===null?xR(r):sr=e,Bw.current=null}function xR(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=FX(t,e),t!==null){t.flags&=32767,sr=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{mr=6,sr=null;return}}else if(t=NX(t,e,Fn),t!==null){sr=t;return}if(e=e.sibling,e!==null){sr=e;return}sr=e=r}while(e!==null);mr===0&&(mr=5)}function Za(r,e,t){var n=mt,i=hi.transition;try{hi.transition=null,mt=1,$X(r,e,t,n)}finally{hi.transition=i,mt=n}return null}function $X(r,e,t,n){do Wu();while(la!==null);if(ot&6)throw Error(ue(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(ue(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(S7(r,s),r===Er&&(sr=Er=null,Br=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||pp||(pp=!0,bR(Im,function(){return Wu(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=hi.transition,hi.transition=null;var o=mt;mt=1;var a=ot;ot|=4,Bw.current=null,LX(r,t),fR(t,r),uX(Ox),Rm=!!Rx,Ox=Rx=null,r.current=t,DX(t),p7(),ot=a,mt=o,hi.transition=s}else r.current=t;if(pp&&(pp=!1,la=r,Vm=i),s=r.pendingLanes,s===0&&(ga=null),v7(t.stateNode),Sn(r,Jt()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(Wm)throw Wm=!1,r=Jx,Jx=null,r;return Vm&1&&r.tag!==0&&Wu(),s=r.pendingLanes,s&1?r===e_?Mh++:(Mh=0,e_=r):Mh=0,Ma(),null}function Wu(){if(la!==null){var r=JI(Vm),e=hi.transition,t=mt;try{if(hi.transition=null,mt=16>r?16:r,la===null)var n=!1;else{if(r=la,la=null,Vm=0,ot&6)throw Error(ue(331));var i=ot;for(ot|=4,be=r.current;be!==null;){var s=be,o=s.child;if(be.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(be=u;be!==null;){var h=be;switch(h.tag){case 0:case 11:case 15:kh(8,h,s)}var c=h.child;if(c!==null)c.return=h,be=c;else for(;be!==null;){h=be;var d=h.sibling,f=h.return;if(cR(h),h===u){be=null;break}if(d!==null){d.return=f,be=d;break}be=f}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}be=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kh(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,be=y;break e}be=s.return}}var b=r.current;for(be=b;be!==null;){o=be;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,be=_;else e:for(o=b;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zg(9,a)}}catch(I){Wt(a,a.return,I)}if(a===o){be=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,be=S;break e}be=a.return}}if(ot=i,Ma(),Rs&&typeof Rs.onPostCommitFiberRoot=="function")try{Rs.onPostCommitFiberRoot(Bg,r)}catch{}n=!0}return n}finally{mt=t,hi.transition=e}}return!1}function xP(r,e,t){e=uc(t,e),e=JM(r,e,1),r=ma(r,e,1),e=an(),r!==null&&(_d(r,1,e),Sn(r,e))}function Wt(r,e,t){if(r.tag===3)xP(r,r,t);else for(;e!==null;){if(e.tag===3){xP(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ga===null||!ga.has(n))){r=uc(t,r),r=eR(e,r,1),e=ma(e,r,1),r=an(),e!==null&&(_d(e,1,r),Sn(e,r));break}}e=e.return}}function zX(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=an(),r.pingedLanes|=r.suspendedLanes&t,Er===r&&(Br&t)===t&&(mr===4||mr===3&&(Br&130023424)===Br&&500>Jt()-Dw?ul(r,0):Lw|=t),Sn(r,e)}function _R(r,e){e===0&&(r.mode&1?(e=ip,ip<<=1,!(ip&130023424)&&(ip=4194304)):e=1);var t=an();r=So(r,e),r!==null&&(_d(r,e,t),Sn(r,t))}function YX(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),_R(r,t)}function GX(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(ue(314))}n!==null&&n.delete(e),_R(r,t)}var wR;wR=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||wn.current)_n=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return _n=!1,OX(r,e,t);_n=!!(r.flags&131072)}else _n=!1,Nt&&e.flags&1048576&&EM(e,Um,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Jp(r,e),r=e.pendingProps;var i=sc(e,Jr.current);Gu(e,t),i=Mw(null,e,n,r,i,t);var s=Rw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bn(n)?(s=!0,Lm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cw(e),i.updater=$g,e.stateNode=i,i._reactInternals=e,Hx(e,n,r,t),e=Yx(null,e,n,!0,s,t)):(e.tag=0,Nt&&s&&xw(e),rn(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Jp(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=VX(n),r=Ai(n,r),i){case 0:e=zx(null,e,n,r,t);break e;case 1:e=uP(null,e,n,r,t);break e;case 11:e=aP(null,e,n,r,t);break e;case 14:e=lP(null,e,n,Ai(n.type,r),t);break e}throw Error(ue(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),zx(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),uP(r,e,n,i,t);case 3:e:{if(iR(e),r===null)throw Error(ue(387));n=e.pendingProps,s=e.memoizedState,i=s.element,MM(r,e),Hm(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=uc(Error(ue(423)),e),e=cP(r,e,n,t,i);break e}else if(n!==i){i=uc(Error(ue(424)),e),e=cP(r,e,n,t,i);break e}else for(Ln=pa(e.stateNode.containerInfo.firstChild),Un=e,Nt=!0,Ii=null,t=kM(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(oc(),n===i){e=To(r,e,t);break e}rn(r,e,n,t)}e=e.child}return e;case 5:return RM(e),r===null&&Ux(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,o=i.children,Nx(n,i)?o=null:s!==null&&Nx(n,s)&&(e.flags|=32),nR(r,e),rn(r,e,o,t),e.child;case 6:return r===null&&Ux(e),null;case 13:return sR(r,e,t);case 4:return Pw(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=ac(e,null,n,t):rn(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),aP(r,e,n,i,t);case 7:return rn(r,e,e.pendingProps,t),e.child;case 8:return rn(r,e,e.pendingProps.children,t),e.child;case 12:return rn(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,St(jm,n._currentValue),n._currentValue=o,s!==null)if(Vi(s.value,o)){if(s.children===i.children&&!wn.current){e=To(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=go(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),jx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ue(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),jx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rn(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Gu(e,t),i=fi(i),n=n(i),e.flags|=1,rn(r,e,n,t),e.child;case 14:return n=e.type,i=Ai(n,e.pendingProps),i=Ai(n.type,i),lP(r,e,n,i,t);case 15:return tR(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),Jp(r,e),e.tag=1,bn(n)?(r=!0,Lm(e)):r=!1,Gu(e,t),ZM(e,n,i),Hx(e,n,i,t),Yx(null,e,n,!0,r,t);case 19:return oR(r,e,t);case 22:return rR(r,e,t)}throw Error(ue(156,e.tag))};function bR(r,e){return qI(r,e)}function WX(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(r,e,t,n){return new WX(r,e,t,n)}function Hw(r){return r=r.prototype,!(!r||!r.isReactComponent)}function VX(r){if(typeof r=="function")return Hw(r)?1:0;if(r!=null){if(r=r.$$typeof,r===aw)return 11;if(r===lw)return 14}return 2}function ya(r,e){var t=r.alternate;return t===null?(t=ui(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function rm(r,e,t,n,i,s){var o=2;if(n=r,typeof r=="function")Hw(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case pu:return cl(t.children,i,s,e);case ow:o=8,i|=8;break;case dx:return r=ui(12,t,e,i|2),r.elementType=dx,r.lanes=s,r;case fx:return r=ui(13,t,e,i),r.elementType=fx,r.lanes=s,r;case px:return r=ui(19,t,e,i),r.elementType=px,r.lanes=s,r;case RI:return Gg(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case II:o=10;break e;case MI:o=9;break e;case aw:o=11;break e;case lw:o=14;break e;case Qo:o=16,n=null;break e}throw Error(ue(130,r==null?r:typeof r,""))}return e=ui(o,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function cl(r,e,t,n){return r=ui(7,r,n,e),r.lanes=t,r}function Gg(r,e,t,n){return r=ui(22,r,n,e),r.elementType=RI,r.lanes=t,r.stateNode={isHidden:!1},r}function By(r,e,t){return r=ui(6,r,null,e),r.lanes=t,r}function Ly(r,e,t){return e=ui(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function qX(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vy(0),this.expirationTimes=vy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vy(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $w(r,e,t,n,i,s,o,a,l){return r=new qX(r,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ui(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cw(s),r}function KX(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fu,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function SR(r){if(!r)return Ta;r=r._reactInternals;e:{if(Al(r)!==r||r.tag!==1)throw Error(ue(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ue(171))}if(r.tag===1){var t=r.type;if(bn(t))return SM(r,t,e)}return e}function TR(r,e,t,n,i,s,o,a,l){return r=$w(t,n,!0,r,i,s,o,a,l),r.context=SR(null),t=r.current,n=an(),i=va(t),s=go(n,i),s.callback=e??null,ma(t,s,i),r.current.lanes=i,_d(r,i,n),Sn(r,n),r}function Wg(r,e,t,n){var i=e.current,s=an(),o=va(i);return t=SR(t),e.context===null?e.context=t:e.pendingContext=t,e=go(s,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=ma(i,e,o),r!==null&&(Yi(r,i,o,s),Kp(r,i,o)),o}function Km(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function _P(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function zw(r,e){_P(r,e),(r=r.alternate)&&_P(r,e)}function QX(){return null}var ER=typeof reportError=="function"?reportError:function(r){console.error(r)};function Yw(r){this._internalRoot=r}Vg.prototype.render=Yw.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(ue(409));Wg(r,e,null,null)};Vg.prototype.unmount=Yw.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;wl(function(){Wg(null,r,null,null)}),e[bo]=null}};function Vg(r){this._internalRoot=r}Vg.prototype.unstable_scheduleHydration=function(r){if(r){var e=rM();r={blockedOn:null,target:r,priority:e};for(var t=0;t<ta.length&&e!==0&&e<ta[t].priority;t++);ta.splice(t,0,r),t===0&&iM(r)}};function Gw(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function qg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function wP(){}function ZX(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Km(o);s.call(u)}}var o=TR(e,n,r,0,null,!1,!1,"",wP);return r._reactRootContainer=o,r[bo]=o.current,Kh(r.nodeType===8?r.parentNode:r),wl(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Km(l);a.call(u)}}var l=$w(r,0,!1,null,null,!1,!1,"",wP);return r._reactRootContainer=l,r[bo]=l.current,Kh(r.nodeType===8?r.parentNode:r),wl(function(){Wg(e,l,t,n)}),l}function Kg(r,e,t,n,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Km(o);a.call(l)}}Wg(e,o,r,i)}else o=ZX(t,e,r,i,n);return Km(o)}eM=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=mh(e.pendingLanes);t!==0&&(hw(e,t|1),Sn(e,Jt()),!(ot&6)&&(cc=Jt()+500,Ma()))}break;case 13:wl(function(){var n=So(r,1);if(n!==null){var i=an();Yi(n,r,1,i)}}),zw(r,1)}};dw=function(r){if(r.tag===13){var e=So(r,134217728);if(e!==null){var t=an();Yi(e,r,134217728,t)}zw(r,134217728)}};tM=function(r){if(r.tag===13){var e=va(r),t=So(r,e);if(t!==null){var n=an();Yi(t,r,e,n)}zw(r,e)}};rM=function(){return mt};nM=function(r,e){var t=mt;try{return mt=r,e()}finally{mt=t}};Tx=function(r,e,t){switch(e){case"input":if(vx(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=jg(n);if(!i)throw Error(ue(90));NI(n),vx(n,i)}}}break;case"textarea":BI(r,t);break;case"select":e=t.value,e!=null&&Hu(r,!!t.multiple,e,!1)}};$I=Uw;zI=wl;var JX={usingClientEntryPoint:!1,Events:[bd,yu,jg,XI,HI,Uw]},ih={findFiberByHostInstance:tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eH={bundleType:ih.bundleType,version:ih.version,rendererPackageName:ih.rendererPackageName,rendererConfig:ih.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=WI(r),r===null?null:r.stateNode},findFiberByHostInstance:ih.findFiberByHostInstance||QX,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mp.isDisabled&&mp.supportsFiber)try{Bg=mp.inject(eH),Rs=mp}catch{}}Yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JX;Yn.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Gw(e))throw Error(ue(200));return KX(r,e,null,t)};Yn.createRoot=function(r,e){if(!Gw(r))throw Error(ue(299));var t=!1,n="",i=ER;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$w(r,1,!1,null,null,t,!1,n,i),r[bo]=e.current,Kh(r.nodeType===8?r.parentNode:r),new Yw(e)};Yn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(ue(188)):(r=Object.keys(r).join(","),Error(ue(268,r)));return r=WI(e),r=r===null?null:r.stateNode,r};Yn.flushSync=function(r){return wl(r)};Yn.hydrate=function(r,e,t){if(!qg(e))throw Error(ue(200));return Kg(null,r,e,!0,t)};Yn.hydrateRoot=function(r,e,t){if(!Gw(r))throw Error(ue(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",o=ER;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=TR(e,null,r,1,t??null,i,!1,s,o),r[bo]=e.current,Kh(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Vg(e)};Yn.render=function(r,e,t){if(!qg(e))throw Error(ue(200));return Kg(null,r,e,!1,t)};Yn.unmountComponentAtNode=function(r){if(!qg(r))throw Error(ue(40));return r._reactRootContainer?(wl(function(){Kg(null,null,r,!1,function(){r._reactRootContainer=null,r[bo]=null})}),!0):!1};Yn.unstable_batchedUpdates=Uw;Yn.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!qg(t))throw Error(ue(200));if(r==null||r._reactInternals===void 0)throw Error(ue(38));return Kg(r,e,t,!1,n)};Yn.version="18.3.1-next-f1338f8080-20240426";function CR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CR)}catch(r){console.error(r)}}CR(),CI.exports=Yn;var tH=CI.exports,Ww,bP=tH;Ww=bP.createRoot,bP.hydrateRoot;function PR(...r){const e={};for(const t of r)for(const n of t)e[n.id]=n;return Object.values(e)}const AR="game_Bg_L",gr="message",kR="lang_components";function rH(r){return[{id:gr,src:`text/${r}.json`},{id:kR,src:`compress/lang/${r}@2x.[avif,webp,png].json`}]}function nH(r,...e){return PR(rH(r),...e)}const IR="sounds",Qg="components",MR="uncomponents",nm="preload_component";function iH(r){return[{id:IR,src:"sound/sounds.json"},{id:Qg,src:"compress/components-_default@2x.[avif,webp,png].json"}]}function sH(r,...e){return PR(iH(),...e)}function oH(r,e){return`./assets/${r}${e?`?v=${e}`:""}`}function aH(r,e){const t=r.match(/\[(.+)\]/);if(t){const n=t[1].split(",");r=r.replace(t[0],Ee.Obj.filterImageFormat(n))}return oH(r,e)}function RR(r,e,t){const n=[];function i(s,o,a={}){on.add({src:aH(o,e),alias:s,...a})}for(const s of r)switch(n.push(s.id),s.type){default:i(s.id,s.src,s.options)}return on.load(n,t)}function lH(r){return on.get(r)}function Vw(r,e){const t=on.get(r);let n=t.textures[e];if(!n){for(const i of t.linkedSheets)if(n=i.textures[e],n)break}return n}function uH(r,e){const n=on.get(r).data.animations[e],i=[];for(const s of n)i.push(Vw(r,s));return i}function cH(r){return on.get(r)}function Cr(r,e){return(on.get(r)||{})[e]||e}function hH(r){const[e,t]=N.useState("");return N.useEffect(()=>{if(!e){const n=setInterval(()=>{const i="disablel",s=Cr(gr,i);s&&i!=s&&(t(s),clearInterval(n))},1e3)}},[e]),T.jsx("div",{id:"screen-only-tips-p",className:"screen-only-tips-mod p",children:T.jsx("div",{className:"tips",children:e})})}function dH(r){const[e,t]=N.useState("");return N.useEffect(()=>{if(!e){const n=setInterval(()=>{const i="disablep",s=Cr(gr,i);s&&i!=s&&(t(s),clearInterval(n))},1e3)}},[e]),T.jsx("div",{id:"screen-only-tips-l",className:"screen-only-tips-mod p",children:T.jsx("div",{className:"tips",children:e})})}function fH(){return T.jsxs(T.Fragment,{children:[T.jsx(dH,{}),T.jsx(hH,{})]})}function pH({children:r}){return T.jsx("div",{id:"App",className:"app-mod",children:r})}function mH(){if(E2())return Promise.resolve();{const r={cs:`游戏加载失败。
您的浏览器不支持或已禁用WebGL。
请关闭浏览器限制并重新加载游戏。`,kh:`ដំនើការចូលក្នុងហ្គេមត្រូវបរាជ័យ។
កម្មវិធីអ៊ីនធឺណេតរបស់អ្នកមិនទ្រទ្រង់លើការប្រើប្រាស់ ឬបានបិត WebGL។
សូមចូលទៅកាន់ហ្គេមម្តងទៀតដោយបើក WebGL។`,id:`Loadin game gagal.
Browser Anda tidak mendukung atau telah menonaktifkan WebGL. 
Load ulang game di browser dengan WebGL diaktifkan.`,kr:`게임 로딩에 실패했습니다.
브라우저가 WebGL을 지원하지 않거나 비활성화했습니다.
WebGL이 활성화된 브라우저에서 게임을 새로고침하세요.`,th:`โหลดเกมไม่สำเร็จ
เบราว์เซอร์ของคุณไม่รองรับ WebGLหรือถูกปิดใช้งาน,
โปรดเปิดใช้งานบนเบราว์เซอร์ของคุณ และโหลดเกมใหม่`,vn:`Tải trò chơi không thành công.
Trình duyệt của bạn không hỗ trợ hoặc đã tắt WebGL. 
Vui lòng tải lại trò chơi trong trình duyệt có bật WebGL.`,tr:"Oyun yükleme başarısız oldu Tarayıcınız WebGL'yi desteklemiyor veya devre dışı bırakmış.Lütfen oyunu WebGL'nin etkin olduğu tarayıcılarda yeniden yükleyin.",pt:"O carregamento do jogo falhou. Seu navegador não suporta ou desabilitou o WebGL. Por favor, recarregue o jogo em navegadores com o WebGL ativado."}[Ee.Obj.urlOptions.lang]??`Game loading failed. 
Your browser does not support or has disabled the WebGL. 
Please reload game in browsers with WebGL enabled.`;return Ww(document.body).render(T.jsx("div",{className:"webgl-not-support",children:T.jsx("div",{className:"text",children:r})})),Promise.reject("webgl not support")}}function gH(r=[]){return new Promise((e,t)=>{if(r.length===0)e();else{const n=[];for(const i of r){const s=new Kj(i);n.push(s.load(null,3e5))}Promise.all(n).then(()=>{e()})}})}function vH(){return Promise.all([Ck.test(),Pk.test()]).then(([r,e])=>{Ee.Obj.setSupportImagesFormat(e,r);const t=document.getElementById("blur-bg");t.className=t.className+" "+Ee.Obj.filterImageFormat(["avif","webp","jpg"])})}function yH(r,e=[]){const t=Ee.Obj,{operator:n,token:i,loginUrl:s,funPLay:o}=t.urlOptions;n?!o&&!i&&s?window.open(t.getLoginUrl(),"_self"):mH().then(gH.bind(null,e)).then(vH).then(()=>{Ww(document.getElementById("root")).render(T.jsxs(T.Fragment,{children:[T.jsx(pH,{children:r}),T.jsx(fH,{})]}))}).catch(a=>{console.error(a)}):alert("The operator parameter is missing!")}function OR(r,e){function t(n){if(n&&n.props){const i={},s=n.props;for(const o in s)o.startsWith(e)&&(i[o.slice(2)]=s[o]);return n.props.children&&(i.children=OR(n.props.children,e)),N.cloneElement(n,i)}return n}return Array.isArray(r)?N.Children.map(r,n=>t(n)):t(r)}var Zg={exports:{}},NR={exports:{}},xH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_H=xH,wH=_H;function FR(){}function BR(){}BR.resetWarningCache=FR;var bH=function(){function r(n,i,s,o,a,l){if(l!==wH){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:BR,resetWarningCache:FR};return t.PropTypes=t,t};NR.exports=bH();var SH=NR.exports;const At=ud(SH);function jn(r){return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jn(r)}function LR(r){var e=function(t,n){if(jn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,n||"default");if(jn(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}(r,"string");return jn(e)==="symbol"?e:String(e)}function Zt(r,e,t){return(e=LR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Dy(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Eo(r){return function(e){if(Array.isArray(e))return Dy(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return Dy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dy(e,t):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qt(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i]}var TH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EH(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var CH=function(r){return r==null};function vh(r){var e=[];if(r===void 0)return e;if(typeof r=="string")e=r.split(",");else if(typeof r=="number")e=[r];else if(Array.isArray(r))e=Eo(r);else{if(r===null||jn(r)!=="object")return e;e=[r&&(r==null?void 0:r.x)||0,r&&(r==null?void 0:r.y)||0]}return e.filter(function(t){return!CH(t)&&!isNaN(t)}).map(Number)}function SP(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Uy(r){return r instanceof He||r instanceof As}var Qm=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function jy(r,e,t){if(Uy(r[e])&&Uy(t))r[e].copyFrom(t);else if(Uy(r[e])){var n=vh(t);qt(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(t),jn(t)),r[e].set(n.shift(),n.shift())}else r[e]=t}var Jl,DR=function(r){var e,t=r;if(!Array.isArray(t)){if(e=r,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");t=Object.keys(r)}var n={};return t.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},UR=function(r){return function(){return!r.apply(void 0,arguments)}},n_="children",PH=(Zt(Jl={},n_,!0),Zt(Jl,"parent",!0),Zt(Jl,"worldAlpha",!0),Zt(Jl,"worldTransform",!0),Zt(Jl,"worldVisible",!0),Jl),i_={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Us=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var l,u;a==null||(l=a.__reactpixi)===null||l===void 0||(u=l.root)===null||u===void 0||u.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(t.hasOwnProperty(a))return qt(l.typeofs.some(function(u){return jn(t[a])===u})||l.instanceofs.some(function(u){return t[a]instanceof u}),"".concat(r," ").concat(a," prop is invalid")),t[a]};if(t.texture)return qt(t.texture instanceof Re,"".concat(r," texture needs to be typeof `Texture`")),t.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,Re]});qt(!!s,"".concat(r," could not get texture from props"));var o=Re.from(s);return o.__reactpixi={root:e},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},AH=UR(DR([].concat(Eo(Object.keys(PH)),Eo(Qm))));function js(r,e,t){var n=!1;if(qt(Ft.prototype.isPrototypeOf(r),"instance needs to be typeof `DisplayObject`, got `%s`",jn(r)),!t.ignoreEvents)for(var i=typeof r.removeListener=="function",s=typeof r.on=="function",o=0;o<Qm.length;o++){var a=Qm[o];e[a]!==t[a]&&(n=!0,typeof e[a]=="function"&&i&&r.removeListener(a,e[a]),typeof t[a]=="function"&&s&&r.on(a,t[a]))}var l=Object.keys(t||{});if(t.overwriteProps){for(var u=0;u<l.length;u++){var h=l[u];e[h]!==t[h]&&(n=!0,jy(r,h,t[h]))}return n}for(var c=l.filter(AH),d=0;d<c.length;d++){var f=c[d],g=t[f];t[f]!==e[f]&&(n=!0),g!==void 0?jy(r,f,g):f in i_?(console.warn("setting default value: ".concat(f,", from: ").concat(r[f]," to: ").concat(g," for"),r),n=!0,jy(r,f,i_[f])):console.warn("ignoring prop: ".concat(f,", from ").concat(r[f]," to ").concat(g," for"),r)}return n}var kH=function(r,e){var t=e.text,n=e.style;return new JU(t,n)},IH=function(){return new Zr};function Ra(r,e){if(r==null)return{};var t,n,i=function(o,a){if(o==null)return{};var l,u,h={},c=Object.keys(o);for(u=0;u<c.length;u++)l=c[u],a.indexOf(l)>=0||(h[l]=o[l]);return h}(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}var MH=["draw","geometry"],RH=function(r,e){var t=e.geometry;qt(!t||t instanceof Xu,"Graphics geometry needs to be a `Graphics`");var n=t?new Xu(t.geometry):new Xu;return n.applyProps=function(i,s,o){var a=o.draw;o.geometry;var l=js(i,s,Ra(o,MH));return s.draw!==a&&typeof a=="function"&&(l=!0,a.call(n,n)),l},n},OH=["image","texture"],NH=function(r,e){var t=e.leftWidth,n=t===void 0?10:t,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,l=e.bottomHeight,u=l===void 0?10:l,h=Us("NineSlicePlane",r,e),c=new bU(h,n,s,a,u);return c.applyProps=function(d,f,g){var v=g.image,x=g.texture,y=js(d,f,Ra(g,OH));return(v||x)&&(x!==f.texture&&(y=!0),d.texture=Us("NineSlicePlane",r,g)),y},c};function TP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(t),!0).forEach(function(n){Zt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):TP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var FH=function(r,e){var t=e.maxSize,n=t===void 0?1500:t,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,l=gp(gp({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),u=gp(gp({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),h=new EU(n,l,s,a);return h.willUnmount=function(c,d,f){c.destroy(u)},h},BH=["image","texture"],LH=function(r,e){var t=new es(Us("Sprite",r,e));return t.applyProps=function(n,i,s){var o=s.image,a=s.texture,l=js(n,i,Ra(s,BH));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(l=!0),n.texture=Us("Sprite",r,s)),l},t},DH=["textures","isPlaying","initialFrame","images"],UH=function(r,e){var t=e.textures,n=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(u){return u.map(function(h){return qt(h instanceof Re||(h==null?void 0:h.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),h})},l=n?Xh.fromImages(n):new Xh(a(t));return l[s?"gotoAndPlay":"gotoAndStop"](o||0),l.applyProps=function(u,h,c){var d=c.textures,f=c.isPlaying,g=c.initialFrame,v=c.images,x=js(u,h,Ra(c,DH));if(v&&h.images!==v){for(var y=[],b=0;b<v.length;++b)y.push(Re.from(v[b]));u.textures=y,x=!0}if(d&&h.textures!==d&&(u.textures=a(d),x=!0),f!==h.isPlaying||g!==h.initialFrame){var _=typeof g=="number"?g:l.currentFrame||0;l[f?"gotoAndPlay":"gotoAndStop"](_),x=!0}return x},l},jH=function(r,e){var t=e.text,n=t===void 0?"":t,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new Q_(n,s);return o?(a.updateText(),new es(a.texture)):a},XH=["tileScale","tilePosition","image","texture"],HH=function(r,e){var t=e.width,n=t===void 0?100:t,i=e.height,s=i===void 0?100:i,o=Us("TilingSprite",r,e),a=new Z_(o,n,s);return a.applyProps=function(l,u,h){var c=h.tileScale,d=h.tilePosition,f=h.image,g=h.texture,v=js(l,u,Ra(h,XH));if(d){var x,y=vh(d);(x=l.tilePosition).set.apply(x,Eo(y)),v=!SP(vh(u.tilePosition),y)||v}if(c){var b,_=vh(c);(b=l.tileScale).set.apply(b,Eo(_)),v=!SP(vh(u.tileScale),_)||v}return(f||g)&&(g!==u.texture&&(v=!0),l.texture=Us("Sprite",r,h)),v},a},$H=["image","texture"],zH=function(r,e){var t=Us("Mesh",r,e),n=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?Oi.TRIANGLES:o,l=new SU(t,n,i,s,a);return l.applyProps=function(u,h,c){var d=c.image,f=c.texture,g=js(u,h,Ra(c,$H));return(d||f)&&(f!==h.texture&&(g=!0),u.texture=Us("Mesh",r,c)),g},l},YH=["image","texture"],GH=function(r,e){var t=Us("SimpleRope",r,e),n=e.points,i=new TU(t,n);return i.applyProps=function(s,o,a){var l=a.image,u=a.texture,h=Ra(a,YH);qt(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<Point>");var c=js(s,o,h);return(l||u)&&(u!==o.texture&&(c=!0),s.texture=Us("SimpleRope",r,a)),c},i},WH=Object.freeze({__proto__:null,BitmapText:kH,Container:IH,Graphics:RH,NineSlicePlane:NH,ParticleContainer:FH,Sprite:LH,Text:jH,TilingSprite:HH,SimpleMesh:zH,SimpleRope:GH,AnimatedSprite:UH});function EP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function CP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?EP(Object(t),!0).forEach(function(n){Zt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):EP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Cn={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},VH=Object.keys(Cn).reduce(function(r,e){return CP(CP({},r),{},Zt({},e,WH[e]))},{}),jR={};function qH(r,e){return qt(!!r,"Expect type to be defined, got `%s`",r),qt(!Cn[r],"Component `%s` could not be created, already exists in default components.",r),jR[r]=e,r}var PP,AP,kP,IP,s_={},o_={},KH={get exports(){return o_},set exports(r){o_=r}},MP={};function QH(){return AP||(AP=1,KH.exports=(PP||(PP=1,function(r){function e(H,G){var $=H.length;H.push(G);e:for(;0<$;){var W=$-1>>>1,Z=H[W];if(!(0<i(Z,G)))break e;H[W]=G,H[$]=Z,$=W}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var G=H[0],$=H.pop();if($!==G){H[0]=$;e:for(var W=0,Z=H.length,se=Z>>>1;W<se;){var ae=2*(W+1)-1,ye=H[ae],Oe=ae+1,Be=H[Oe];if(0>i(ye,$))Oe<Z&&0>i(Be,ye)?(H[W]=Be,H[Oe]=$,W=Oe):(H[W]=ye,H[ae]=$,W=ae);else{if(!(Oe<Z&&0>i(Be,$)))break e;H[W]=Be,H[Oe]=$,W=Oe}}}return G}function i(H,G){var $=H.sortIndex-G.sortIndex;return $!==0?$:H.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,f=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function _(H){for(var G=t(u);G!==null;){if(G.callback===null)n(u);else{if(!(G.startTime<=H))break;n(u),G.sortIndex=G.expirationTime,e(l,G)}G=t(u)}}function S(H){if(v=!1,_(H),!g)if(t(l)!==null)g=!0,V(I);else{var G=t(u);G!==null&&Q(S,G.startTime-H)}}function I(H,G){g=!1,v&&(v=!1,y(O),O=-1),f=!0;var $=d;try{for(_(G),c=t(l);c!==null&&(!(c.expirationTime>G)||H&&!j());){var W=c.callback;if(typeof W=="function"){c.callback=null,d=c.priorityLevel;var Z=W(c.expirationTime<=G);G=r.unstable_now(),typeof Z=="function"?c.callback=Z:c===t(l)&&n(l),_(G)}else n(l);c=t(l)}if(c!==null)var se=!0;else{var ae=t(u);ae!==null&&Q(S,ae.startTime-G),se=!1}return se}finally{c=null,d=$,f=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,k=!1,M=null,O=-1,L=5,D=-1;function j(){return!(r.unstable_now()-D<L)}function F(){if(M!==null){var H=r.unstable_now();D=H;var G=!0;try{G=M(!0,H)}finally{G?A():(k=!1,M=null)}}else k=!1}if(typeof b=="function")A=function(){b(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,X=B.port2;B.port1.onmessage=F,A=function(){X.postMessage(null)}}else A=function(){x(F,0)};function V(H){M=H,k||(k=!0,A())}function Q(H,G){O=x(function(){H(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){g||f||(g=!0,V(I))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(l)},r.unstable_next=function(H){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var $=d;d=G;try{return H()}finally{d=$}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var $=d;d=H;try{return G()}finally{d=$}},r.unstable_scheduleCallback=function(H,G,$){var W=r.unstable_now();switch($=typeof $=="object"&&$!==null&&typeof($=$.delay)=="number"&&0<$?W+$:W,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return H={id:h++,callback:G,priorityLevel:H,startTime:$,expirationTime:Z=$+Z,sortIndex:-1},$>W?(H.sortIndex=$,e(u,H),t(l)===null&&H===t(u)&&(v?(y(O),O=-1):v=!0,Q(S,$-W))):(H.sortIndex=Z,e(l,H),g||f||(g=!0,V(I))),H},r.unstable_shouldYield=j,r.unstable_wrapCallback=function(H){var G=d;return function(){var $=d;d=G;try{return H.apply(this,arguments)}finally{d=$}}}}(MP)),MP)),o_}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ZH(){return IP||(IP=1,kP=function(r){var e={},t=po,n=QH(),i=Object.assign;function s(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),l=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),S=Symbol.iterator;function I(p){return p===null||typeof p!="object"?null:typeof(p=S&&p[S]||p["@@iterator"])=="function"?p:null}function A(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case u:return"Fragment";case l:return"Portal";case c:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case x:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case f:return(p.displayName||"Context")+".Consumer";case d:return(p._context.displayName||"Context")+".Provider";case g:var m=p.render;return(p=p.displayName)||(p=(p=m.displayName||m.name||"")!==""?"ForwardRef("+p+")":"ForwardRef"),p;case y:return(m=p.displayName||null)!==null?m:A(p.type)||"Memo";case b:m=p._payload,p=p._init;try{return A(p(m))}catch{}}return null}function k(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=(p=m.render).displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(m);case 8:return m===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function M(p){var m=p,w=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do 4098&(m=p).flags&&(w=m.return),p=m.return;while(p)}return m.tag===3?w:null}function O(p){if(M(p)!==p)throw Error(s(188))}function L(p){var m=p.alternate;if(!m){if((m=M(p))===null)throw Error(s(188));return m!==p?null:p}for(var w=p,E=m;;){var P=w.return;if(P===null)break;var R=P.alternate;if(R===null){if((E=P.return)!==null){w=E;continue}break}if(P.child===R.child){for(R=P.child;R;){if(R===w)return O(P),p;if(R===E)return O(P),m;R=R.sibling}throw Error(s(188))}if(w.return!==E.return)w=P,E=R;else{for(var U=!1,z=P.child;z;){if(z===w){U=!0,w=P,E=R;break}if(z===E){U=!0,E=P,w=R;break}z=z.sibling}if(!U){for(z=R.child;z;){if(z===w){U=!0,w=R,E=P;break}if(z===E){U=!0,E=R,w=P;break}z=z.sibling}if(!U)throw Error(s(189))}}if(w.alternate!==E)throw Error(s(190))}if(w.tag!==3)throw Error(s(188));return w.stateNode.current===w?p:m}function D(p){return(p=L(p))!==null?j(p):null}function j(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=j(p);if(m!==null)return m;p=p.sibling}return null}function F(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var m=F(p);if(m!==null)return m}p=p.sibling}return null}var B,X=Array.isArray,V=r.getPublicInstance,Q=r.getRootHostContext,H=r.getChildHostContext,G=r.prepareForCommit,$=r.resetAfterCommit,W=r.createInstance,Z=r.appendInitialChild,se=r.finalizeInitialChildren,ae=r.prepareUpdate,ye=r.shouldSetTextContent,Oe=r.createTextInstance,Be=r.scheduleTimeout,ze=r.cancelTimeout,Ve=r.noTimeout,$e=r.isPrimaryRenderer,Le=r.supportsMutation,ct=r.supportsPersistence,Je=r.supportsHydration,Pr=r.getInstanceFromNode,Dr=r.preparePortalMount,rs=r.getCurrentEventPriority,Ml=r.detachDeletedInstance,gi=r.supportsMicrotasks,Tc=r.scheduleMicrotask,ko=r.supportsTestSelectors,Io=r.findFiberRoot,Bd=r.getBoundingRect,Ld=r.getTextContent,Wn=r.isHiddenSubtree,S3=r.matchAccessibilityRole,T3=r.setFocusIfFocusable,E3=r.setupIntersectionObserver,C3=r.appendChild,P3=r.appendChildToContainer,A3=r.commitTextUpdate,k3=r.commitMount,I3=r.commitUpdate,M3=r.insertBefore,R3=r.insertInContainerBefore,O3=r.removeChild,N3=r.removeChildFromContainer,Nb=r.resetTextContent,F3=r.hideInstance,B3=r.hideTextInstance,L3=r.unhideInstance,D3=r.unhideTextInstance,U3=r.clearContainer,j3=r.cloneInstance,Fb=r.createContainerChildSet,Bb=r.appendChildToContainerChildSet,X3=r.finalizeContainerChildren,h0=r.replaceContainerChildren,Lb=r.cloneHiddenInstance,Db=r.cloneHiddenTextInstance,H3=r.canHydrateInstance,$3=r.canHydrateTextInstance,z3=r.canHydrateSuspenseInstance,Ub=r.isSuspenseInstancePending,d0=r.isSuspenseInstanceFallback,Y3=r.getSuspenseInstanceFallbackErrorDetails,G3=r.registerSuspenseInstanceRetry,Dd=r.getNextHydratableSibling,W3=r.getFirstHydratableChild,V3=r.getFirstHydratableChildWithinContainer,q3=r.getFirstHydratableChildWithinSuspenseInstance,K3=r.hydrateInstance,Q3=r.hydrateTextInstance,Z3=r.hydrateSuspenseInstance,J3=r.getNextHydratableInstanceAfterSuspenseInstance,eN=r.commitHydratedContainer,tN=r.commitHydratedSuspenseInstance,rN=r.clearSuspenseBoundary,nN=r.clearSuspenseBoundaryFromContainer,iN=r.shouldDeleteUnhydratedTailInstances,sN=r.didNotMatchHydratedContainerTextInstance,oN=r.didNotMatchHydratedTextInstance;function Ec(p){if(B===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);B=m&&m[1]||""}return`
`+B+p}var f0=!1;function p0(p,m){if(!p||f0)return"";f0=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ee){var E=ee}Reflect.construct(p,[],m)}else{try{m.call()}catch(ee){E=ee}p.call(m.prototype)}else{try{throw Error()}catch(ee){E=ee}p()}}catch(ee){if(ee&&E&&typeof ee.stack=="string"){for(var P=ee.stack.split(`
`),R=E.stack.split(`
`),U=P.length-1,z=R.length-1;1<=U&&0<=z&&P[U]!==R[z];)z--;for(;1<=U&&0<=z;U--,z--)if(P[U]!==R[z]){if(U!==1||z!==1)do if(U--,0>--z||P[U]!==R[z]){var K=`
`+P[U].replace(" at new "," at ");return p.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",p.displayName)),K}while(1<=U&&0<=z);break}}}finally{f0=!1,Error.prepareStackTrace=w}return(p=p?p.displayName||p.name:"")?Ec(p):""}var aN=Object.prototype.hasOwnProperty,m0=[],Rl=-1;function Mo(p){return{current:p}}function Mt(p){0>Rl||(p.current=m0[Rl],m0[Rl]=null,Rl--)}function _t(p,m){Rl++,m0[Rl]=p.current,p.current=m}var Ro={},Ur=Mo(Ro),cn=Mo(!1),Oa=Ro;function Ol(p,m){var w=p.type.contextTypes;if(!w)return Ro;var E=p.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===m)return E.__reactInternalMemoizedMaskedChildContext;var P,R={};for(P in w)R[P]=m[P];return E&&((p=p.stateNode).__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=R),R}function Pn(p){return(p=p.childContextTypes)!=null}function g0(){Mt(cn),Mt(Ur)}function jb(p,m,w){if(Ur.current!==Ro)throw Error(s(168));_t(Ur,m),_t(cn,w)}function Xb(p,m,w){var E=p.stateNode;if(m=m.childContextTypes,typeof E.getChildContext!="function")return w;for(var P in E=E.getChildContext())if(!(P in m))throw Error(s(108,k(p)||"Unknown",P));return i({},w,E)}function Ud(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Ro,Oa=Ur.current,_t(Ur,p),_t(cn,cn.current),!0}function Hb(p,m,w){var E=p.stateNode;if(!E)throw Error(s(169));w?(p=Xb(p,m,Oa),E.__reactInternalMemoizedMergedChildContext=p,Mt(cn),Mt(Ur),_t(Ur,p)):Mt(cn),_t(cn,w)}var vi=Math.clz32?Math.clz32:function(p){return(p>>>=0)===0?32:31-(lN(p)/uN|0)|0},lN=Math.log,uN=Math.LN2,v0=64,y0=4194304;function Cc(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&p;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&p;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function jd(p,m){var w=p.pendingLanes;if(w===0)return 0;var E=0,P=p.suspendedLanes,R=p.pingedLanes,U=268435455&w;if(U!==0){var z=U&~P;z!==0?E=Cc(z):(R&=U)!==0&&(E=Cc(R))}else(U=w&~P)!==0?E=Cc(U):R!==0&&(E=Cc(R));if(E===0)return 0;if(m!==0&&m!==E&&!(m&P)&&((P=E&-E)>=(R=m&-m)||P===16&&4194240&R))return m;if(4&E&&(E|=16&w),(m=p.entangledLanes)!==0)for(p=p.entanglements,m&=E;0<m;)P=1<<(w=31-vi(m)),E|=p[w],m&=~P;return E}function cN(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;default:return-1}}function x0(p){return(p=-1073741825&p.pendingLanes)!==0?p:1073741824&p?1073741824:0}function $b(){var p=v0;return!(4194240&(v0<<=1))&&(v0=64),p}function _0(p){for(var m=[],w=0;31>w;w++)m.push(p);return m}function Pc(p,m,w){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),(p=p.eventTimes)[m=31-vi(m)]=w}function w0(p,m){var w=p.entangledLanes|=m;for(p=p.entanglements;w;){var E=31-vi(w),P=1<<E;P&m|p[E]&m&&(p[E]|=m),w&=~P}}var at=0;function zb(p){return 1<(p&=-p)?4<p?268435455&p?16:536870912:4:1}var b0=n.unstable_scheduleCallback,Yb=n.unstable_cancelCallback,hN=n.unstable_shouldYield,dN=n.unstable_requestPaint,vr=n.unstable_now,S0=n.unstable_ImmediatePriority,fN=n.unstable_UserBlockingPriority,Gb=n.unstable_NormalPriority,pN=n.unstable_IdlePriority,Xd=null,ns=null,yi=typeof Object.is=="function"?Object.is:function(p,m){return p===m&&(p!==0||1/p==1/m)||p!=p&&m!=m},zs=null,Hd=!1,T0=!1;function Wb(p){zs===null?zs=[p]:zs.push(p)}function is(){if(!T0&&zs!==null){T0=!0;var p=0,m=at;try{var w=zs;for(at=1;p<w.length;p++){var E=w[p];do E=E(!0);while(E!==null)}zs=null,Hd=!1}catch(P){throw zs!==null&&(zs=zs.slice(p+1)),b0(S0,is),P}finally{at=m,T0=!1}}return null}var Nl=[],Fl=0,$d=null,zd=0,Vn=[],qn=0,Na=null,ss=1,Ys="";function Fa(p,m){Nl[Fl++]=zd,Nl[Fl++]=$d,$d=p,zd=m}function Vb(p,m,w){Vn[qn++]=ss,Vn[qn++]=Ys,Vn[qn++]=Na,Na=p;var E=ss;p=Ys;var P=32-vi(E)-1;E&=~(1<<P),w+=1;var R=32-vi(m)+P;if(30<R){var U=P-P%5;R=(E&(1<<U)-1).toString(32),E>>=U,P-=U,ss=1<<32-vi(m)+P|w<<P|E,Ys=R+p}else ss=1<<R|w<<P|E,Ys=p}function E0(p){p.return!==null&&(Fa(p,1),Vb(p,1,0))}function C0(p){for(;p===$d;)$d=Nl[--Fl],Nl[Fl]=null,zd=Nl[--Fl],Nl[Fl]=null;for(;p===Na;)Na=Vn[--qn],Vn[qn]=null,Ys=Vn[--qn],Vn[qn]=null,ss=Vn[--qn],Vn[qn]=null}var An=null,Kn=null,Rt=!1,Ac=!1,xi=null;function qb(p,m){var w=ti(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=p,(m=p.deletions)===null?(p.deletions=[w],p.flags|=16):m.push(w)}function Kb(p,m){switch(p.tag){case 5:return(m=H3(m,p.type,p.pendingProps))!==null&&(p.stateNode=m,An=p,Kn=W3(m),!0);case 6:return(m=$3(m,p.pendingProps))!==null&&(p.stateNode=m,An=p,Kn=null,!0);case 13:if((m=z3(m))!==null){var w=Na!==null?{id:ss,overflow:Ys}:null;return p.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},(w=ti(18,null,null,0)).stateNode=m,w.return=p,p.child=w,An=p,Kn=null,!0}return!1;default:return!1}}function P0(p){return(1&p.mode)!=0&&(128&p.flags)==0}function A0(p){if(Rt){var m=Kn;if(m){var w=m;if(!Kb(p,m)){if(P0(p))throw Error(s(418));m=Dd(w);var E=An;m&&Kb(p,m)?qb(E,w):(p.flags=-4097&p.flags|2,Rt=!1,An=p)}}else{if(P0(p))throw Error(s(418));p.flags=-4097&p.flags|2,Rt=!1,An=p}}}function Qb(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;An=p}function Yd(p){if(!Je||p!==An)return!1;if(!Rt)return Qb(p),Rt=!0,!1;if(p.tag!==3&&(p.tag!==5||iN(p.type)&&!ye(p.type,p.memoizedProps))){var m=Kn;if(m){if(P0(p))throw Zb(),Error(s(418));for(;m;)qb(p,m),m=Dd(m)}}if(Qb(p),p.tag===13){if(!Je)throw Error(s(316));if(!(p=(p=p.memoizedState)!==null?p.dehydrated:null))throw Error(s(317));Kn=J3(p)}else Kn=An?Dd(p.stateNode):null;return!0}function Zb(){for(var p=Kn;p;)p=Dd(p)}function Bl(){Je&&(Kn=An=null,Ac=Rt=!1)}function k0(p){xi===null?xi=[p]:xi.push(p)}var mN=o.ReactCurrentBatchConfig;function Gd(p,m){if(yi(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var w=Object.keys(p),E=Object.keys(m);if(w.length!==E.length)return!1;for(E=0;E<w.length;E++){var P=w[E];if(!aN.call(m,P)||!yi(p[P],m[P]))return!1}return!0}function gN(p){switch(p.tag){case 5:return Ec(p.type);case 16:return Ec("Lazy");case 13:return Ec("Suspense");case 19:return Ec("SuspenseList");case 0:case 2:case 15:return p=p0(p.type,!1);case 11:return p=p0(p.type.render,!1);case 1:return p=p0(p.type,!0);default:return""}}function _i(p,m){if(p&&p.defaultProps){for(var w in m=i({},m),p=p.defaultProps)m[w]===void 0&&(m[w]=p[w]);return m}return m}var Wd=Mo(null),Vd=null,Ll=null,I0=null;function M0(){I0=Ll=Vd=null}function Jb(p,m,w){$e?(_t(Wd,m._currentValue),m._currentValue=w):(_t(Wd,m._currentValue2),m._currentValue2=w)}function R0(p){var m=Wd.current;Mt(Wd),$e?p._currentValue=m:p._currentValue2=m}function O0(p,m,w){for(;p!==null;){var E=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),p===w)break;p=p.return}}function Dl(p,m){Vd=p,I0=Ll=null,(p=p.dependencies)!==null&&p.firstContext!==null&&(p.lanes&m&&(hn=!0),p.firstContext=null)}function Qn(p){var m=$e?p._currentValue:p._currentValue2;if(I0!==p)if(p={context:p,memoizedValue:m,next:null},Ll===null){if(Vd===null)throw Error(s(308));Ll=p,Vd.dependencies={lanes:0,firstContext:p}}else Ll=Ll.next=p;return m}var Ba=null;function N0(p){Ba===null?Ba=[p]:Ba.push(p)}function eS(p,m,w,E){var P=m.interleaved;return P===null?(w.next=w,N0(m)):(w.next=P.next,P.next=w),m.interleaved=w,os(p,E)}function os(p,m){p.lanes|=m;var w=p.alternate;for(w!==null&&(w.lanes|=m),w=p,p=p.return;p!==null;)p.childLanes|=m,(w=p.alternate)!==null&&(w.childLanes|=m),w=p,p=p.return;return w.tag===3?w.stateNode:null}var Oo=!1;function F0(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tS(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Gs(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function No(p,m,w){var E=p.updateQueue;if(E===null)return null;if(E=E.shared,(2&et)!=0){var P=E.pending;return P===null?m.next=m:(m.next=P.next,P.next=m),E.pending=m,os(p,w)}return(P=E.interleaved)===null?(m.next=m,N0(E)):(m.next=P.next,P.next=m),E.interleaved=m,os(p,w)}function qd(p,m,w){if((m=m.updateQueue)!==null&&(m=m.shared,(4194240&w)!=0)){var E=m.lanes;w|=E&=p.pendingLanes,m.lanes=w,w0(p,w)}}function rS(p,m){var w=p.updateQueue,E=p.alternate;if(E!==null&&w===(E=E.updateQueue)){var P=null,R=null;if((w=w.firstBaseUpdate)!==null){do{var U={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};R===null?P=R=U:R=R.next=U,w=w.next}while(w!==null);R===null?P=R=m:R=R.next=m}else P=R=m;return w={baseState:E.baseState,firstBaseUpdate:P,lastBaseUpdate:R,shared:E.shared,effects:E.effects},void(p.updateQueue=w)}(p=w.lastBaseUpdate)===null?w.firstBaseUpdate=m:p.next=m,w.lastBaseUpdate=m}function Kd(p,m,w,E){var P=p.updateQueue;Oo=!1;var R=P.firstBaseUpdate,U=P.lastBaseUpdate,z=P.shared.pending;if(z!==null){P.shared.pending=null;var K=z,ee=K.next;K.next=null,U===null?R=ee:U.next=ee,U=K;var ne=p.alternate;ne!==null&&(z=(ne=ne.updateQueue).lastBaseUpdate)!==U&&(z===null?ne.firstBaseUpdate=ee:z.next=ee,ne.lastBaseUpdate=K)}if(R!==null){var ve=P.baseState;for(U=0,ne=ee=K=null,z=R;;){var te=z.lane,he=z.eventTime;if((E&te)===te){ne!==null&&(ne=ne.next={eventTime:he,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var Ce=p,We=z;switch(te=m,he=w,We.tag){case 1:if(typeof(Ce=We.payload)=="function"){ve=Ce.call(he,ve,te);break e}ve=Ce;break e;case 3:Ce.flags=-65537&Ce.flags|128;case 0:if((te=typeof(Ce=We.payload)=="function"?Ce.call(he,ve,te):Ce)==null)break e;ve=i({},ve,te);break e;case 2:Oo=!0}}z.callback!==null&&z.lane!==0&&(p.flags|=64,(te=P.effects)===null?P.effects=[z]:te.push(z))}else he={eventTime:he,lane:te,tag:z.tag,payload:z.payload,callback:z.callback,next:null},ne===null?(ee=ne=he,K=ve):ne=ne.next=he,U|=te;if((z=z.next)===null){if((z=P.shared.pending)===null)break;z=(te=z).next,te.next=null,P.lastBaseUpdate=te,P.shared.pending=null}}if(ne===null&&(K=ve),P.baseState=K,P.firstBaseUpdate=ee,P.lastBaseUpdate=ne,(m=P.shared.interleaved)!==null){P=m;do U|=P.lane,P=P.next;while(P!==m)}else R===null&&(P.shared.lanes=0);Da|=U,p.lanes=U,p.memoizedState=ve}}function nS(p,m,w){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var E=p[m],P=E.callback;if(P!==null){if(E.callback=null,E=w,typeof P!="function")throw Error(s(191,P));P.call(E)}}}var iS=new t.Component().refs;function B0(p,m,w,E){w=(w=w(E,m=p.memoizedState))==null?m:i({},m,w),p.memoizedState=w,p.lanes===0&&(p.updateQueue.baseState=w)}var Qd={isMounted:function(p){return!!(p=p._reactInternals)&&M(p)===p},enqueueSetState:function(p,m,w){p=p._reactInternals;var E=Hr(),P=Do(p),R=Gs(E,P);R.payload=m,w!=null&&(R.callback=w),(m=No(p,R,P))!==null&&(ei(m,p,P,E),qd(m,p,P))},enqueueReplaceState:function(p,m,w){p=p._reactInternals;var E=Hr(),P=Do(p),R=Gs(E,P);R.tag=1,R.payload=m,w!=null&&(R.callback=w),(m=No(p,R,P))!==null&&(ei(m,p,P,E),qd(m,p,P))},enqueueForceUpdate:function(p,m){p=p._reactInternals;var w=Hr(),E=Do(p),P=Gs(w,E);P.tag=2,m!=null&&(P.callback=m),(m=No(p,P,E))!==null&&(ei(m,p,E,w),qd(m,p,E))}};function sS(p,m,w,E,P,R,U){return typeof(p=p.stateNode).shouldComponentUpdate=="function"?p.shouldComponentUpdate(E,R,U):!m.prototype||!m.prototype.isPureReactComponent||!Gd(w,E)||!Gd(P,R)}function oS(p,m,w){var E=!1,P=Ro,R=m.contextType;return typeof R=="object"&&R!==null?R=Qn(R):(P=Pn(m)?Oa:Ur.current,R=(E=(E=m.contextTypes)!=null)?Ol(p,P):Ro),m=new m(w,R),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Qd,p.stateNode=m,m._reactInternals=p,E&&((p=p.stateNode).__reactInternalMemoizedUnmaskedChildContext=P,p.__reactInternalMemoizedMaskedChildContext=R),m}function aS(p,m,w,E){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,E),m.state!==p&&Qd.enqueueReplaceState(m,m.state,null)}function L0(p,m,w,E){var P=p.stateNode;P.props=w,P.state=p.memoizedState,P.refs=iS,F0(p);var R=m.contextType;typeof R=="object"&&R!==null?P.context=Qn(R):(R=Pn(m)?Oa:Ur.current,P.context=Ol(p,R)),P.state=p.memoizedState,typeof(R=m.getDerivedStateFromProps)=="function"&&(B0(p,m,R,w),P.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(m=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),m!==P.state&&Qd.enqueueReplaceState(P,P.state,null),Kd(p,w,P,E),P.state=p.memoizedState),typeof P.componentDidMount=="function"&&(p.flags|=4194308)}function kc(p,m,w){if((p=w.ref)!==null&&typeof p!="function"&&typeof p!="object"){if(w._owner){if(w=w._owner){if(w.tag!==1)throw Error(s(309));var E=w.stateNode}if(!E)throw Error(s(147,p));var P=E,R=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===R?m.ref:(m=function(U){var z=P.refs;z===iS&&(z=P.refs={}),U===null?delete z[R]:z[R]=U},m._stringRef=R,m)}if(typeof p!="string")throw Error(s(284));if(!w._owner)throw Error(s(290,p))}return p}function Zd(p,m){throw p=Object.prototype.toString.call(m),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function lS(p){return(0,p._init)(p._payload)}function uS(p){function m(ie,q){if(p){var J=ie.deletions;J===null?(ie.deletions=[q],ie.flags|=16):J.push(q)}}function w(ie,q){if(!p)return null;for(;q!==null;)m(ie,q),q=q.sibling;return null}function E(ie,q){for(ie=new Map;q!==null;)q.key!==null?ie.set(q.key,q):ie.set(q.index,q),q=q.sibling;return ie}function P(ie,q){return(ie=jo(ie,q)).index=0,ie.sibling=null,ie}function R(ie,q,J){return ie.index=J,p?(J=ie.alternate)!==null?(J=J.index)<q?(ie.flags|=2,q):J:(ie.flags|=2,q):(ie.flags|=1048576,q)}function U(ie){return p&&ie.alternate===null&&(ie.flags|=2),ie}function z(ie,q,J,le){return q===null||q.tag!==6?((q=Sv(J,ie.mode,le)).return=ie,q):((q=P(q,J)).return=ie,q)}function K(ie,q,J,le){var Ne=J.type;return Ne===u?ne(ie,q,J.props.children,le,J.key):q!==null&&(q.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===b&&lS(Ne)===q.type)?((le=P(q,J.props)).ref=kc(ie,q,J),le.return=ie,le):((le=Ef(J.type,J.key,J.props,null,ie.mode,le)).ref=kc(ie,q,J),le.return=ie,le)}function ee(ie,q,J,le){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?((q=Tv(J,ie.mode,le)).return=ie,q):((q=P(q,J.children||[])).return=ie,q)}function ne(ie,q,J,le,Ne){return q===null||q.tag!==7?((q=Xa(J,ie.mode,le,Ne)).return=ie,q):((q=P(q,J)).return=ie,q)}function ve(ie,q,J){if(typeof q=="string"&&q!==""||typeof q=="number")return(q=Sv(""+q,ie.mode,J)).return=ie,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case a:return(J=Ef(q.type,q.key,q.props,null,ie.mode,J)).ref=kc(ie,null,q),J.return=ie,J;case l:return(q=Tv(q,ie.mode,J)).return=ie,q;case b:return ve(ie,(0,q._init)(q._payload),J)}if(X(q)||I(q))return(q=Xa(q,ie.mode,J,null)).return=ie,q;Zd(ie,q)}return null}function te(ie,q,J,le){var Ne=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Ne!==null?null:z(ie,q,""+J,le);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case a:return J.key===Ne?K(ie,q,J,le):null;case l:return J.key===Ne?ee(ie,q,J,le):null;case b:return te(ie,q,(Ne=J._init)(J._payload),le)}if(X(J)||I(J))return Ne!==null?null:ne(ie,q,J,le,null);Zd(ie,J)}return null}function he(ie,q,J,le,Ne){if(typeof le=="string"&&le!==""||typeof le=="number")return z(q,ie=ie.get(J)||null,""+le,Ne);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case a:return K(q,ie=ie.get(le.key===null?J:le.key)||null,le,Ne);case l:return ee(q,ie=ie.get(le.key===null?J:le.key)||null,le,Ne);case b:return he(ie,q,J,(0,le._init)(le._payload),Ne)}if(X(le)||I(le))return ne(q,ie=ie.get(J)||null,le,Ne,null);Zd(q,le)}return null}function Ce(ie,q,J,le){for(var Ne=null,dt=null,Ae=q,lt=q=0,kr=null;Ae!==null&&lt<J.length;lt++){Ae.index>lt?(kr=Ae,Ae=null):kr=Ae.sibling;var ft=te(ie,Ae,J[lt],le);if(ft===null){Ae===null&&(Ae=kr);break}p&&Ae&&ft.alternate===null&&m(ie,Ae),q=R(ft,q,lt),dt===null?Ne=ft:dt.sibling=ft,dt=ft,Ae=kr}if(lt===J.length)return w(ie,Ae),Rt&&Fa(ie,lt),Ne;if(Ae===null){for(;lt<J.length;lt++)(Ae=ve(ie,J[lt],le))!==null&&(q=R(Ae,q,lt),dt===null?Ne=Ae:dt.sibling=Ae,dt=Ae);return Rt&&Fa(ie,lt),Ne}for(Ae=E(ie,Ae);lt<J.length;lt++)(kr=he(Ae,ie,lt,J[lt],le))!==null&&(p&&kr.alternate!==null&&Ae.delete(kr.key===null?lt:kr.key),q=R(kr,q,lt),dt===null?Ne=kr:dt.sibling=kr,dt=kr);return p&&Ae.forEach(function(Xo){return m(ie,Xo)}),Rt&&Fa(ie,lt),Ne}function We(ie,q,J,le){var Ne=I(J);if(typeof Ne!="function")throw Error(s(150));if((J=Ne.call(J))==null)throw Error(s(151));for(var dt=Ne=null,Ae=q,lt=q=0,kr=null,ft=J.next();Ae!==null&&!ft.done;lt++,ft=J.next()){Ae.index>lt?(kr=Ae,Ae=null):kr=Ae.sibling;var Xo=te(ie,Ae,ft.value,le);if(Xo===null){Ae===null&&(Ae=kr);break}p&&Ae&&Xo.alternate===null&&m(ie,Ae),q=R(Xo,q,lt),dt===null?Ne=Xo:dt.sibling=Xo,dt=Xo,Ae=kr}if(ft.done)return w(ie,Ae),Rt&&Fa(ie,lt),Ne;if(Ae===null){for(;!ft.done;lt++,ft=J.next())(ft=ve(ie,ft.value,le))!==null&&(q=R(ft,q,lt),dt===null?Ne=ft:dt.sibling=ft,dt=ft);return Rt&&Fa(ie,lt),Ne}for(Ae=E(ie,Ae);!ft.done;lt++,ft=J.next())(ft=he(Ae,ie,lt,ft.value,le))!==null&&(p&&ft.alternate!==null&&Ae.delete(ft.key===null?lt:ft.key),q=R(ft,q,lt),dt===null?Ne=ft:dt.sibling=ft,dt=ft);return p&&Ae.forEach(function(jN){return m(ie,jN)}),Rt&&Fa(ie,lt),Ne}return function ie(q,J,le,Ne){if(typeof le=="object"&&le!==null&&le.type===u&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case a:e:{for(var dt=le.key,Ae=J;Ae!==null;){if(Ae.key===dt){if((dt=le.type)===u){if(Ae.tag===7){w(q,Ae.sibling),(J=P(Ae,le.props.children)).return=q,q=J;break e}}else if(Ae.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===b&&lS(dt)===Ae.type){w(q,Ae.sibling),(J=P(Ae,le.props)).ref=kc(q,Ae,le),J.return=q,q=J;break e}w(q,Ae);break}m(q,Ae),Ae=Ae.sibling}le.type===u?((J=Xa(le.props.children,q.mode,Ne,le.key)).return=q,q=J):((Ne=Ef(le.type,le.key,le.props,null,q.mode,Ne)).ref=kc(q,J,le),Ne.return=q,q=Ne)}return U(q);case l:e:{for(Ae=le.key;J!==null;){if(J.key===Ae){if(J.tag===4&&J.stateNode.containerInfo===le.containerInfo&&J.stateNode.implementation===le.implementation){w(q,J.sibling),(J=P(J,le.children||[])).return=q,q=J;break e}w(q,J);break}m(q,J),J=J.sibling}(J=Tv(le,q.mode,Ne)).return=q,q=J}return U(q);case b:return ie(q,J,(Ae=le._init)(le._payload),Ne)}if(X(le))return Ce(q,J,le,Ne);if(I(le))return We(q,J,le,Ne);Zd(q,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,J!==null&&J.tag===6?(w(q,J.sibling),(J=P(J,le)).return=q,q=J):(w(q,J),(J=Sv(le,q.mode,Ne)).return=q,q=J),U(q)):w(q,J)}}var Ul=uS(!0),cS=uS(!1),Ic={},Zn=Mo(Ic),Mc=Mo(Ic),jl=Mo(Ic);function as(p){if(p===Ic)throw Error(s(174));return p}function D0(p,m){_t(jl,m),_t(Mc,p),_t(Zn,Ic),p=Q(m),Mt(Zn),_t(Zn,p)}function Xl(){Mt(Zn),Mt(Mc),Mt(jl)}function hS(p){var m=as(jl.current),w=as(Zn.current);w!==(m=H(w,p.type,m))&&(_t(Mc,p),_t(Zn,m))}function U0(p){Mc.current===p&&(Mt(Zn),Mt(Mc))}var Yt=Mo(0);function Jd(p){for(var m=p;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&((w=w.dehydrated)===null||Ub(w)||d0(w)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(128&m.flags)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var j0=[];function X0(){for(var p=0;p<j0.length;p++){var m=j0[p];$e?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}j0.length=0}var ef=o.ReactCurrentDispatcher,H0=o.ReactCurrentBatchConfig,La=0,Bt=null,yr=null,xr=null,tf=!1,Rc=!1,Oc=0,vN=0;function jr(){throw Error(s(321))}function $0(p,m){if(m===null)return!1;for(var w=0;w<m.length&&w<p.length;w++)if(!yi(p[w],m[w]))return!1;return!0}function z0(p,m,w,E,P,R){if(La=R,Bt=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ef.current=p===null||p.memoizedState===null?wN:bN,p=w(E,P),Rc){R=0;do{if(Rc=!1,Oc=0,25<=R)throw Error(s(301));R+=1,xr=yr=null,m.updateQueue=null,ef.current=SN,p=w(E,P)}while(Rc)}if(ef.current=sf,m=yr!==null&&yr.next!==null,La=0,xr=yr=Bt=null,tf=!1,m)throw Error(s(300));return p}function Y0(){var p=Oc!==0;return Oc=0,p}function ls(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xr===null?Bt.memoizedState=xr=p:xr=xr.next=p,xr}function Jn(){if(yr===null){var p=Bt.alternate;p=p!==null?p.memoizedState:null}else p=yr.next;var m=xr===null?Bt.memoizedState:xr.next;if(m!==null)xr=m,yr=p;else{if(p===null)throw Error(s(310));p={memoizedState:(yr=p).memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},xr===null?Bt.memoizedState=xr=p:xr=xr.next=p}return xr}function Nc(p,m){return typeof m=="function"?m(p):m}function G0(p){var m=Jn(),w=m.queue;if(w===null)throw Error(s(311));w.lastRenderedReducer=p;var E=yr,P=E.baseQueue,R=w.pending;if(R!==null){if(P!==null){var U=P.next;P.next=R.next,R.next=U}E.baseQueue=P=R,w.pending=null}if(P!==null){R=P.next,E=E.baseState;var z=U=null,K=null,ee=R;do{var ne=ee.lane;if((La&ne)===ne)K!==null&&(K=K.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),E=ee.hasEagerState?ee.eagerState:p(E,ee.action);else{var ve={lane:ne,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};K===null?(z=K=ve,U=E):K=K.next=ve,Bt.lanes|=ne,Da|=ne}ee=ee.next}while(ee!==null&&ee!==R);K===null?U=E:K.next=z,yi(E,m.memoizedState)||(hn=!0),m.memoizedState=E,m.baseState=U,m.baseQueue=K,w.lastRenderedState=E}if((p=w.interleaved)!==null){P=p;do R=P.lane,Bt.lanes|=R,Da|=R,P=P.next;while(P!==p)}else P===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function W0(p){var m=Jn(),w=m.queue;if(w===null)throw Error(s(311));w.lastRenderedReducer=p;var E=w.dispatch,P=w.pending,R=m.memoizedState;if(P!==null){w.pending=null;var U=P=P.next;do R=p(R,U.action),U=U.next;while(U!==P);yi(R,m.memoizedState)||(hn=!0),m.memoizedState=R,m.baseQueue===null&&(m.baseState=R),w.lastRenderedState=R}return[R,E]}function dS(){}function fS(p,m){var w=Bt,E=Jn(),P=m(),R=!yi(E.memoizedState,P);if(R&&(E.memoizedState=P,hn=!0),E=E.queue,V0(gS.bind(null,w,E,p),[p]),E.getSnapshot!==m||R||xr!==null&&1&xr.memoizedState.tag){if(w.flags|=2048,Fc(9,mS.bind(null,w,E,P,m),void 0,null),_r===null)throw Error(s(349));30&La||pS(w,m,P)}return P}function pS(p,m,w){p.flags|=16384,p={getSnapshot:m,value:w},(m=Bt.updateQueue)===null?(m={lastEffect:null,stores:null},Bt.updateQueue=m,m.stores=[p]):(w=m.stores)===null?m.stores=[p]:w.push(p)}function mS(p,m,w,E){m.value=w,m.getSnapshot=E,vS(m)&&yS(p)}function gS(p,m,w){return w(function(){vS(m)&&yS(p)})}function vS(p){var m=p.getSnapshot;p=p.value;try{var w=m();return!yi(p,w)}catch{return!0}}function yS(p){var m=os(p,1);m!==null&&ei(m,p,1,-1)}function xS(p){var m=ls();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nc,lastRenderedState:p},m.queue=p,p=p.dispatch=_N.bind(null,Bt,p),[m.memoizedState,p]}function Fc(p,m,w,E){return p={tag:p,create:m,destroy:w,deps:E,next:null},(m=Bt.updateQueue)===null?(m={lastEffect:null,stores:null},Bt.updateQueue=m,m.lastEffect=p.next=p):(w=m.lastEffect)===null?m.lastEffect=p.next=p:(E=w.next,w.next=p,p.next=E,m.lastEffect=p),p}function _S(){return Jn().memoizedState}function rf(p,m,w,E){var P=ls();Bt.flags|=p,P.memoizedState=Fc(1|m,w,void 0,E===void 0?null:E)}function nf(p,m,w,E){var P=Jn();E=E===void 0?null:E;var R=void 0;if(yr!==null){var U=yr.memoizedState;if(R=U.destroy,E!==null&&$0(E,U.deps))return void(P.memoizedState=Fc(m,w,R,E))}Bt.flags|=p,P.memoizedState=Fc(1|m,w,R,E)}function wS(p,m){return rf(8390656,8,p,m)}function V0(p,m){return nf(2048,8,p,m)}function bS(p,m){return nf(4,2,p,m)}function SS(p,m){return nf(4,4,p,m)}function TS(p,m){return typeof m=="function"?(p=p(),m(p),function(){m(null)}):m!=null?(p=p(),m.current=p,function(){m.current=null}):void 0}function ES(p,m,w){return w=w!=null?w.concat([p]):null,nf(4,4,TS.bind(null,m,p),w)}function q0(){}function CS(p,m){var w=Jn();m=m===void 0?null:m;var E=w.memoizedState;return E!==null&&m!==null&&$0(m,E[1])?E[0]:(w.memoizedState=[p,m],p)}function PS(p,m){var w=Jn();m=m===void 0?null:m;var E=w.memoizedState;return E!==null&&m!==null&&$0(m,E[1])?E[0]:(p=p(),w.memoizedState=[p,m],p)}function AS(p,m,w){return 21&La?(yi(w,m)||(w=$b(),Bt.lanes|=w,Da|=w,p.baseState=!0),m):(p.baseState&&(p.baseState=!1,hn=!0),p.memoizedState=w)}function yN(p,m){var w=at;at=w!==0&&4>w?w:4,p(!0);var E=H0.transition;H0.transition={};try{p(!1),m()}finally{at=w,H0.transition=E}}function kS(){return Jn().memoizedState}function xN(p,m,w){var E=Do(p);w={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null},IS(p)?MS(m,w):(w=eS(p,m,w,E))!==null&&(ei(w,p,E,Hr()),RS(w,m,E))}function _N(p,m,w){var E=Do(p),P={lane:E,action:w,hasEagerState:!1,eagerState:null,next:null};if(IS(p))MS(m,P);else{var R=p.alternate;if(p.lanes===0&&(R===null||R.lanes===0)&&(R=m.lastRenderedReducer)!==null)try{var U=m.lastRenderedState,z=R(U,w);if(P.hasEagerState=!0,P.eagerState=z,yi(z,U)){var K=m.interleaved;return K===null?(P.next=P,N0(m)):(P.next=K.next,K.next=P),void(m.interleaved=P)}}catch{}(w=eS(p,m,P,E))!==null&&(ei(w,p,E,P=Hr()),RS(w,m,E))}}function IS(p){var m=p.alternate;return p===Bt||m!==null&&m===Bt}function MS(p,m){Rc=tf=!0;var w=p.pending;w===null?m.next=m:(m.next=w.next,w.next=m),p.pending=m}function RS(p,m,w){if(4194240&w){var E=m.lanes;w|=E&=p.pendingLanes,m.lanes=w,w0(p,w)}}var sf={readContext:Qn,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},wN={readContext:Qn,useCallback:function(p,m){return ls().memoizedState=[p,m===void 0?null:m],p},useContext:Qn,useEffect:wS,useImperativeHandle:function(p,m,w){return w=w!=null?w.concat([p]):null,rf(4194308,4,TS.bind(null,m,p),w)},useLayoutEffect:function(p,m){return rf(4194308,4,p,m)},useInsertionEffect:function(p,m){return rf(4,2,p,m)},useMemo:function(p,m){var w=ls();return m=m===void 0?null:m,p=p(),w.memoizedState=[p,m],p},useReducer:function(p,m,w){var E=ls();return m=w!==void 0?w(m):m,E.memoizedState=E.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},E.queue=p,p=p.dispatch=xN.bind(null,Bt,p),[E.memoizedState,p]},useRef:function(p){return p={current:p},ls().memoizedState=p},useState:xS,useDebugValue:q0,useDeferredValue:function(p){return ls().memoizedState=p},useTransition:function(){var p=xS(!1),m=p[0];return p=yN.bind(null,p[1]),ls().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,w){var E=Bt,P=ls();if(Rt){if(w===void 0)throw Error(s(407));w=w()}else{if(w=m(),_r===null)throw Error(s(349));30&La||pS(E,m,w)}P.memoizedState=w;var R={value:w,getSnapshot:m};return P.queue=R,wS(gS.bind(null,E,R,p),[p]),E.flags|=2048,Fc(9,mS.bind(null,E,R,w,m),void 0,null),w},useId:function(){var p=ls(),m=_r.identifierPrefix;if(Rt){var w=Ys;m=":"+m+"R"+(w=(ss&~(1<<32-vi(ss)-1)).toString(32)+w),0<(w=Oc++)&&(m+="H"+w.toString(32)),m+=":"}else m=":"+m+"r"+(w=vN++).toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},bN={readContext:Qn,useCallback:CS,useContext:Qn,useEffect:V0,useImperativeHandle:ES,useInsertionEffect:bS,useLayoutEffect:SS,useMemo:PS,useReducer:G0,useRef:_S,useState:function(){return G0(Nc)},useDebugValue:q0,useDeferredValue:function(p){return AS(Jn(),yr.memoizedState,p)},useTransition:function(){return[G0(Nc)[0],Jn().memoizedState]},useMutableSource:dS,useSyncExternalStore:fS,useId:kS,unstable_isNewReconciler:!1},SN={readContext:Qn,useCallback:CS,useContext:Qn,useEffect:V0,useImperativeHandle:ES,useInsertionEffect:bS,useLayoutEffect:SS,useMemo:PS,useReducer:W0,useRef:_S,useState:function(){return W0(Nc)},useDebugValue:q0,useDeferredValue:function(p){var m=Jn();return yr===null?m.memoizedState=p:AS(m,yr.memoizedState,p)},useTransition:function(){return[W0(Nc)[0],Jn().memoizedState]},useMutableSource:dS,useSyncExternalStore:fS,useId:kS,unstable_isNewReconciler:!1};function Hl(p,m){try{var w="",E=m;do w+=gN(E),E=E.return;while(E);var P=w}catch(R){P=`
Error generating stack: `+R.message+`
`+R.stack}return{value:p,source:m,stack:P,digest:null}}function K0(p,m,w){return{value:p,source:null,stack:w??null,digest:m??null}}function Q0(p,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var TN=typeof WeakMap=="function"?WeakMap:Map;function OS(p,m,w){(w=Gs(-1,w)).tag=3,w.payload={element:null};var E=m.value;return w.callback=function(){xf||(xf=!0,gv=E),Q0(0,m)},w}function NS(p,m,w){(w=Gs(-1,w)).tag=3;var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var P=m.value;w.payload=function(){return E(P)},w.callback=function(){Q0(0,m)}}var R=p.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(w.callback=function(){Q0(0,m),typeof E!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var U=m.stack;this.componentDidCatch(m.value,{componentStack:U!==null?U:""})}),w}function FS(p,m,w){var E=p.pingCache;if(E===null){E=p.pingCache=new TN;var P=new Set;E.set(m,P)}else(P=E.get(m))===void 0&&(P=new Set,E.set(m,P));P.has(w)||(P.add(w),p=ON.bind(null,p,m,w),m.then(p,p))}function BS(p){do{var m;if((m=p.tag===13)&&(m=(m=p.memoizedState)===null||m.dehydrated!==null),m)return p;p=p.return}while(p!==null);return null}function LS(p,m,w,E,P){return 1&p.mode?(p.flags|=65536,p.lanes=P,p):(p===m?p.flags|=65536:(p.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:((m=Gs(-1,1)).tag=2,No(w,m,1))),w.lanes|=1),p)}var EN=o.ReactCurrentOwner,hn=!1;function dn(p,m,w,E){m.child=p===null?cS(m,null,w,E):Ul(m,p.child,w,E)}function DS(p,m,w,E,P){w=w.render;var R=m.ref;return Dl(m,P),E=z0(p,m,w,E,R,P),w=Y0(),p===null||hn?(Rt&&w&&E0(m),m.flags|=1,dn(p,m,E,P),m.child):(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~P,Ws(p,m,P))}function US(p,m,w,E,P){if(p===null){var R=w.type;return typeof R!="function"||bv(R)||R.defaultProps!==void 0||w.compare!==null||w.defaultProps!==void 0?((p=Ef(w.type,null,E,m,m.mode,P)).ref=m.ref,p.return=m,m.child=p):(m.tag=15,m.type=R,jS(p,m,R,E,P))}if(R=p.child,(p.lanes&P)==0){var U=R.memoizedProps;if((w=(w=w.compare)!==null?w:Gd)(U,E)&&p.ref===m.ref)return Ws(p,m,P)}return m.flags|=1,(p=jo(R,E)).ref=m.ref,p.return=m,m.child=p}function jS(p,m,w,E,P){if(p!==null){var R=p.memoizedProps;if(Gd(R,E)&&p.ref===m.ref){if(hn=!1,m.pendingProps=E=R,(p.lanes&P)==0)return m.lanes=p.lanes,Ws(p,m,P);131072&p.flags&&(hn=!0)}}return Z0(p,m,w,E,P)}function XS(p,m,w){var E=m.pendingProps,P=E.children,R=p!==null?p.memoizedState:null;if(E.mode==="hidden")if(!(1&m.mode))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(zl,kn),kn|=w;else{if(!(1073741824&w))return p=R!==null?R.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null,transitions:null},m.updateQueue=null,_t(zl,kn),kn|=p,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=R!==null?R.baseLanes:w,_t(zl,kn),kn|=E}else R!==null?(E=R.baseLanes|w,m.memoizedState=null):E=w,_t(zl,kn),kn|=E;return dn(p,m,P,w),m.child}function HS(p,m){var w=m.ref;(p===null&&w!==null||p!==null&&p.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function Z0(p,m,w,E,P){var R=Pn(w)?Oa:Ur.current;return R=Ol(m,R),Dl(m,P),w=z0(p,m,w,E,R,P),E=Y0(),p===null||hn?(Rt&&E&&E0(m),m.flags|=1,dn(p,m,w,P),m.child):(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~P,Ws(p,m,P))}function $S(p,m,w,E,P){if(Pn(w)){var R=!0;Ud(m)}else R=!1;if(Dl(m,P),m.stateNode===null)uf(p,m),oS(m,w,E),L0(m,w,E,P),E=!0;else if(p===null){var U=m.stateNode,z=m.memoizedProps;U.props=z;var K=U.context,ee=w.contextType;typeof ee=="object"&&ee!==null?ee=Qn(ee):ee=Ol(m,ee=Pn(w)?Oa:Ur.current);var ne=w.getDerivedStateFromProps,ve=typeof ne=="function"||typeof U.getSnapshotBeforeUpdate=="function";ve||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(z!==E||K!==ee)&&aS(m,U,E,ee),Oo=!1;var te=m.memoizedState;U.state=te,Kd(m,E,U,P),K=m.memoizedState,z!==E||te!==K||cn.current||Oo?(typeof ne=="function"&&(B0(m,w,ne,E),K=m.memoizedState),(z=Oo||sS(m,w,z,E,te,K,ee))?(ve||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(m.flags|=4194308)):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=K),U.props=E,U.state=K,U.context=ee,E=z):(typeof U.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{U=m.stateNode,tS(p,m),z=m.memoizedProps,ee=m.type===m.elementType?z:_i(m.type,z),U.props=ee,ve=m.pendingProps,te=U.context,typeof(K=w.contextType)=="object"&&K!==null?K=Qn(K):K=Ol(m,K=Pn(w)?Oa:Ur.current);var he=w.getDerivedStateFromProps;(ne=typeof he=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(z!==ve||te!==K)&&aS(m,U,E,K),Oo=!1,te=m.memoizedState,U.state=te,Kd(m,E,U,P);var Ce=m.memoizedState;z!==ve||te!==Ce||cn.current||Oo?(typeof he=="function"&&(B0(m,w,he,E),Ce=m.memoizedState),(ee=Oo||sS(m,w,ee,E,te,Ce,K)||!1)?(ne||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(E,Ce,K),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(E,Ce,K)),typeof U.componentDidUpdate=="function"&&(m.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof U.componentDidUpdate!="function"||z===p.memoizedProps&&te===p.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||z===p.memoizedProps&&te===p.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=Ce),U.props=E,U.state=Ce,U.context=K,E=ee):(typeof U.componentDidUpdate!="function"||z===p.memoizedProps&&te===p.memoizedState||(m.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||z===p.memoizedProps&&te===p.memoizedState||(m.flags|=1024),E=!1)}return J0(p,m,w,E,R,P)}function J0(p,m,w,E,P,R){HS(p,m);var U=(128&m.flags)!=0;if(!E&&!U)return P&&Hb(m,w,!1),Ws(p,m,R);E=m.stateNode,EN.current=m;var z=U&&typeof w.getDerivedStateFromError!="function"?null:E.render();return m.flags|=1,p!==null&&U?(m.child=Ul(m,p.child,null,R),m.child=Ul(m,null,z,R)):dn(p,m,z,R),m.memoizedState=E.state,P&&Hb(m,w,!0),m.child}function zS(p){var m=p.stateNode;m.pendingContext?jb(0,m.pendingContext,m.pendingContext!==m.context):m.context&&jb(0,m.context,!1),D0(p,m.containerInfo)}function YS(p,m,w,E,P){return Bl(),k0(P),m.flags|=256,dn(p,m,w,E),m.child}var Bc,Lc,of,af,ev={dehydrated:null,treeContext:null,retryLane:0};function tv(p){return{baseLanes:p,cachePool:null,transitions:null}}function GS(p,m,w){var E,P=m.pendingProps,R=Yt.current,U=!1,z=(128&m.flags)!=0;if((E=z)||(E=(p===null||p.memoizedState!==null)&&(2&R)!=0),E?(U=!0,m.flags&=-129):p!==null&&p.memoizedState===null||(R|=1),_t(Yt,1&R),p===null)return A0(m),(p=m.memoizedState)!==null&&(p=p.dehydrated)!==null?(1&m.mode?d0(p)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(z=P.children,p=P.fallback,U?(P=m.mode,U=m.child,z={mode:"hidden",children:z},!(1&P)&&U!==null?(U.childLanes=0,U.pendingProps=z):U=Cf(z,P,0,null),p=Xa(p,P,w,null),U.return=m,p.return=m,U.sibling=p,m.child=U,m.child.memoizedState=tv(w),m.memoizedState=ev,p):rv(m,z));if((R=p.memoizedState)!==null&&(E=R.dehydrated)!==null)return function(ee,ne,ve,te,he,Ce,We){if(ve)return 256&ne.flags?(ne.flags&=-257,lf(ee,ne,We,te=K0(Error(s(422))))):ne.memoizedState!==null?(ne.child=ee.child,ne.flags|=128,null):(Ce=te.fallback,he=ne.mode,te=Cf({mode:"visible",children:te.children},he,0,null),(Ce=Xa(Ce,he,We,null)).flags|=2,te.return=ne,Ce.return=ne,te.sibling=Ce,ne.child=te,1&ne.mode&&Ul(ne,ee.child,null,We),ne.child.memoizedState=tv(We),ne.memoizedState=ev,Ce);if(!(1&ne.mode))return lf(ee,ne,We,null);if(d0(he))return te=Y3(he).digest,Ce=Error(s(419)),te=K0(Ce,te,void 0),lf(ee,ne,We,te);if(ve=(We&ee.childLanes)!=0,hn||ve){if((te=_r)!==null){switch(We&-We){case 4:he=2;break;case 16:he=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:he=32;break;case 536870912:he=268435456;break;default:he=0}(he=he&(te.suspendedLanes|We)?0:he)!==0&&he!==Ce.retryLane&&(Ce.retryLane=he,os(ee,he),ei(te,ee,he,-1))}return wv(),lf(ee,ne,We,te=K0(Error(s(421))))}return Ub(he)?(ne.flags|=128,ne.child=ee.child,ne=NN.bind(null,ee),G3(he,ne),null):(ee=Ce.treeContext,Je&&(Kn=q3(he),An=ne,Rt=!0,xi=null,Ac=!1,ee!==null&&(Vn[qn++]=ss,Vn[qn++]=Ys,Vn[qn++]=Na,ss=ee.id,Ys=ee.overflow,Na=ne)),ne=rv(ne,te.children),ne.flags|=4096,ne)}(p,m,z,P,E,R,w);if(U){U=P.fallback,z=m.mode,E=(R=p.child).sibling;var K={mode:"hidden",children:P.children};return!(1&z)&&m.child!==R?((P=m.child).childLanes=0,P.pendingProps=K,m.deletions=null):(P=jo(R,K)).subtreeFlags=14680064&R.subtreeFlags,E!==null?U=jo(E,U):(U=Xa(U,z,w,null)).flags|=2,U.return=m,P.return=m,P.sibling=U,m.child=P,P=U,U=m.child,z=(z=p.child.memoizedState)===null?tv(w):{baseLanes:z.baseLanes|w,cachePool:null,transitions:z.transitions},U.memoizedState=z,U.childLanes=p.childLanes&~w,m.memoizedState=ev,P}return p=(U=p.child).sibling,P=jo(U,{mode:"visible",children:P.children}),!(1&m.mode)&&(P.lanes=w),P.return=m,P.sibling=null,p!==null&&((w=m.deletions)===null?(m.deletions=[p],m.flags|=16):w.push(p)),m.child=P,m.memoizedState=null,P}function rv(p,m){return(m=Cf({mode:"visible",children:m},p.mode,0,null)).return=p,p.child=m}function lf(p,m,w,E){return E!==null&&k0(E),Ul(m,p.child,null,w),(p=rv(m,m.pendingProps.children)).flags|=2,m.memoizedState=null,p}function WS(p,m,w){p.lanes|=m;var E=p.alternate;E!==null&&(E.lanes|=m),O0(p.return,m,w)}function nv(p,m,w,E,P){var R=p.memoizedState;R===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:w,tailMode:P}:(R.isBackwards=m,R.rendering=null,R.renderingStartTime=0,R.last=E,R.tail=w,R.tailMode=P)}function VS(p,m,w){var E=m.pendingProps,P=E.revealOrder,R=E.tail;if(dn(p,m,E.children,w),(2&(E=Yt.current))!=0)E=1&E|2,m.flags|=128;else{if(p!==null&&128&p.flags)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&WS(p,w,m);else if(p.tag===19)WS(p,w,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}E&=1}if(_t(Yt,E),(1&m.mode)==0)m.memoizedState=null;else switch(P){case"forwards":for(w=m.child,P=null;w!==null;)(p=w.alternate)!==null&&Jd(p)===null&&(P=w),w=w.sibling;(w=P)===null?(P=m.child,m.child=null):(P=w.sibling,w.sibling=null),nv(m,!1,P,w,R);break;case"backwards":for(w=null,P=m.child,m.child=null;P!==null;){if((p=P.alternate)!==null&&Jd(p)===null){m.child=P;break}p=P.sibling,P.sibling=w,w=P,P=p}nv(m,!0,w,null,R);break;case"together":nv(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function uf(p,m){!(1&m.mode)&&p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2)}function Ws(p,m,w){if(p!==null&&(m.dependencies=p.dependencies),Da|=m.lanes,(w&m.childLanes)==0)return null;if(p!==null&&m.child!==p.child)throw Error(s(153));if(m.child!==null){for(w=jo(p=m.child,p.pendingProps),m.child=w,w.return=m;p.sibling!==null;)p=p.sibling,(w=w.sibling=jo(p,p.pendingProps)).return=m;w.sibling=null}return m.child}function us(p){p.flags|=4}function qS(p,m){if(p!==null&&p.child===m.child)return!0;if(16&m.flags)return!1;for(p=m.child;p!==null;){if(12854&p.flags||12854&p.subtreeFlags)return!1;p=p.sibling}return!0}if(Le)Bc=function(p,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)Z(p,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Lc=function(){},of=function(p,m,w,E,P){if((p=p.memoizedProps)!==E){var R=m.stateNode,U=as(Zn.current);w=ae(R,w,p,E,P,U),(m.updateQueue=w)&&us(m)}},af=function(p,m,w,E){w!==E&&us(m)};else if(ct){Bc=function(p,m,w,E){for(var P=m.child;P!==null;){if(P.tag===5){var R=P.stateNode;w&&E&&(R=Lb(R,P.type,P.memoizedProps,P)),Z(p,R)}else if(P.tag===6)R=P.stateNode,w&&E&&(R=Db(R,P.memoizedProps,P)),Z(p,R);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)(R=P.child)!==null&&(R.return=P),Bc(p,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===m)break;for(;P.sibling===null;){if(P.return===null||P.return===m)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var KS=function(p,m,w,E){for(var P=m.child;P!==null;){if(P.tag===5){var R=P.stateNode;w&&E&&(R=Lb(R,P.type,P.memoizedProps,P)),Bb(p,R)}else if(P.tag===6)R=P.stateNode,w&&E&&(R=Db(R,P.memoizedProps,P)),Bb(p,R);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)(R=P.child)!==null&&(R.return=P),KS(p,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===m)break;for(;P.sibling===null;){if(P.return===null||P.return===m)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Lc=function(p,m){var w=m.stateNode;if(!qS(p,m)){p=w.containerInfo;var E=Fb(p);KS(E,m,!1,!1),w.pendingChildren=E,us(m),X3(p,E)}},of=function(p,m,w,E,P){var R=p.stateNode,U=p.memoizedProps;if((p=qS(p,m))&&U===E)m.stateNode=R;else{var z=m.stateNode,K=as(Zn.current),ee=null;U!==E&&(ee=ae(z,w,U,E,P,K)),p&&ee===null?m.stateNode=R:(R=j3(R,ee,w,U,E,m,p,z),se(R,w,E,P,K)&&us(m),m.stateNode=R,p?us(m):Bc(R,m,!1,!1))}},af=function(p,m,w,E){w!==E?(p=as(jl.current),w=as(Zn.current),m.stateNode=Oe(E,p,w,m),us(m)):m.stateNode=p.stateNode}}else Lc=function(){},of=function(){},af=function(){};function Dc(p,m){if(!Rt)switch(p.tailMode){case"hidden":m=p.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?p.tail=null:w.sibling=null;break;case"collapsed":w=p.tail;for(var E=null;w!==null;)w.alternate!==null&&(E=w),w=w.sibling;E===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:E.sibling=null}}function en(p){var m=p.alternate!==null&&p.alternate.child===p.child,w=0,E=0;if(m)for(var P=p.child;P!==null;)w|=P.lanes|P.childLanes,E|=14680064&P.subtreeFlags,E|=14680064&P.flags,P.return=p,P=P.sibling;else for(P=p.child;P!==null;)w|=P.lanes|P.childLanes,E|=P.subtreeFlags,E|=P.flags,P.return=p,P=P.sibling;return p.subtreeFlags|=E,p.childLanes=w,m}function CN(p,m,w){var E=m.pendingProps;switch(C0(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(m),null;case 1:case 17:return Pn(m.type)&&g0(),en(m),null;case 3:return w=m.stateNode,Xl(),Mt(cn),Mt(Ur),X0(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),p!==null&&p.child!==null||(Yd(m)?us(m):p===null||p.memoizedState.isDehydrated&&!(256&m.flags)||(m.flags|=1024,xi!==null&&(xv(xi),xi=null))),Lc(p,m),en(m),null;case 5:U0(m),w=as(jl.current);var P=m.type;if(p!==null&&m.stateNode!=null)of(p,m,P,E,w),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!E){if(m.stateNode===null)throw Error(s(166));return en(m),null}if(p=as(Zn.current),Yd(m)){if(!Je)throw Error(s(175));p=K3(m.stateNode,m.type,m.memoizedProps,w,p,m,!Ac),m.updateQueue=p,p!==null&&us(m)}else{var R=W(P,E,w,p,m);Bc(R,m,!1,!1),m.stateNode=R,se(R,P,E,w,p)&&us(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return en(m),null;case 6:if(p&&m.stateNode!=null)af(p,m,p.memoizedProps,E);else{if(typeof E!="string"&&m.stateNode===null)throw Error(s(166));if(p=as(jl.current),w=as(Zn.current),Yd(m)){if(!Je)throw Error(s(176));if(p=m.stateNode,w=m.memoizedProps,(E=Q3(p,w,m,!Ac))&&(P=An)!==null)switch(P.tag){case 3:sN(P.stateNode.containerInfo,p,w,(1&P.mode)!=0);break;case 5:oN(P.type,P.memoizedProps,P.stateNode,p,w,(1&P.mode)!=0)}E&&us(m)}else m.stateNode=Oe(E,p,w,m)}return en(m),null;case 13:if(Mt(Yt),E=m.memoizedState,p===null||p.memoizedState!==null&&p.memoizedState.dehydrated!==null){if(Rt&&Kn!==null&&1&m.mode&&!(128&m.flags))Zb(),Bl(),m.flags|=98560,P=!1;else if(P=Yd(m),E!==null&&E.dehydrated!==null){if(p===null){if(!P)throw Error(s(318));if(!Je)throw Error(s(344));if(!(P=(P=m.memoizedState)!==null?P.dehydrated:null))throw Error(s(317));Z3(P,m)}else Bl(),!(128&m.flags)&&(m.memoizedState=null),m.flags|=4;en(m),P=!1}else xi!==null&&(xv(xi),xi=null),P=!0;if(!P)return 65536&m.flags?m:null}return 128&m.flags?(m.lanes=w,m):((w=E!==null)!=(p!==null&&p.memoizedState!==null)&&w&&(m.child.flags|=8192,1&m.mode&&(p===null||1&Yt.current?or===0&&(or=3):wv())),m.updateQueue!==null&&(m.flags|=4),en(m),null);case 4:return Xl(),Lc(p,m),p===null&&Dr(m.stateNode.containerInfo),en(m),null;case 10:return R0(m.type._context),en(m),null;case 19:if(Mt(Yt),(P=m.memoizedState)===null)return en(m),null;if(E=(128&m.flags)!=0,(R=P.rendering)===null)if(E)Dc(P,!1);else{if(or!==0||p!==null&&128&p.flags)for(p=m.child;p!==null;){if((R=Jd(p))!==null){for(m.flags|=128,Dc(P,!1),(p=R.updateQueue)!==null&&(m.updateQueue=p,m.flags|=4),m.subtreeFlags=0,p=w,w=m.child;w!==null;)P=p,(E=w).flags&=14680066,(R=E.alternate)===null?(E.childLanes=0,E.lanes=P,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=R.childLanes,E.lanes=R.lanes,E.child=R.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=R.memoizedProps,E.memoizedState=R.memoizedState,E.updateQueue=R.updateQueue,E.type=R.type,P=R.dependencies,E.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),w=w.sibling;return _t(Yt,1&Yt.current|2),m.child}p=p.sibling}P.tail!==null&&vr()>mv&&(m.flags|=128,E=!0,Dc(P,!1),m.lanes=4194304)}else{if(!E)if((p=Jd(R))!==null){if(m.flags|=128,E=!0,(p=p.updateQueue)!==null&&(m.updateQueue=p,m.flags|=4),Dc(P,!0),P.tail===null&&P.tailMode==="hidden"&&!R.alternate&&!Rt)return en(m),null}else 2*vr()-P.renderingStartTime>mv&&w!==1073741824&&(m.flags|=128,E=!0,Dc(P,!1),m.lanes=4194304);P.isBackwards?(R.sibling=m.child,m.child=R):((p=P.last)!==null?p.sibling=R:m.child=R,P.last=R)}return P.tail!==null?(m=P.tail,P.rendering=m,P.tail=m.sibling,P.renderingStartTime=vr(),m.sibling=null,p=Yt.current,_t(Yt,E?1&p|2:1&p),m):(en(m),null);case 22:case 23:return _v(),w=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==w&&(m.flags|=8192),w&&1&m.mode?1073741824&kn&&(en(m),Le&&6&m.subtreeFlags&&(m.flags|=8192)):en(m),null;case 24:case 25:return null}throw Error(s(156,m.tag))}function PN(p,m){switch(C0(m),m.tag){case 1:return Pn(m.type)&&g0(),65536&(p=m.flags)?(m.flags=-65537&p|128,m):null;case 3:return Xl(),Mt(cn),Mt(Ur),X0(),65536&(p=m.flags)&&!(128&p)?(m.flags=-65537&p|128,m):null;case 5:return U0(m),null;case 13:if(Mt(Yt),(p=m.memoizedState)!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(s(340));Bl()}return 65536&(p=m.flags)?(m.flags=-65537&p|128,m):null;case 19:return Mt(Yt),null;case 4:return Xl(),null;case 10:return R0(m.type._context),null;case 22:case 23:return _v(),null;default:return null}}var cf=!1,Xr=!1,AN=typeof WeakSet=="function"?WeakSet:Set,we=null;function $l(p,m){var w=p.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(E){Ot(p,m,E)}else w.current=null}function QS(p,m,w){try{w()}catch(E){Ot(p,m,E)}}var ZS=!1;function Uc(p,m,w){var E=m.updateQueue;if((E=E!==null?E.lastEffect:null)!==null){var P=E=E.next;do{if((P.tag&p)===p){var R=P.destroy;P.destroy=void 0,R!==void 0&&QS(m,w,R)}P=P.next}while(P!==E)}}function hf(p,m){if((m=(m=m.updateQueue)!==null?m.lastEffect:null)!==null){var w=m=m.next;do{if((w.tag&p)===p){var E=w.create;w.destroy=E()}w=w.next}while(w!==m)}}function iv(p){var m=p.ref;if(m!==null){var w=p.stateNode;p.tag===5?p=V(w):p=w,typeof m=="function"?m(p):m.current=p}}function JS(p){var m=p.alternate;m!==null&&(p.alternate=null,JS(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode)!==null&&Ml(m),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function eT(p){return p.tag===5||p.tag===3||p.tag===4}function tT(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||eT(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(2&p.flags||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(2&p.flags))return p.stateNode}}function sv(p,m,w){var E=p.tag;if(E===5||E===6)p=p.stateNode,m?R3(w,p,m):P3(w,p);else if(E!==4&&(p=p.child)!==null)for(sv(p,m,w),p=p.sibling;p!==null;)sv(p,m,w),p=p.sibling}function ov(p,m,w){var E=p.tag;if(E===5||E===6)p=p.stateNode,m?M3(w,p,m):C3(w,p);else if(E!==4&&(p=p.child)!==null)for(ov(p,m,w),p=p.sibling;p!==null;)ov(p,m,w),p=p.sibling}var tn=null,cs=!1;function hs(p,m,w){for(w=w.child;w!==null;)av(p,m,w),w=w.sibling}function av(p,m,w){if(ns&&typeof ns.onCommitFiberUnmount=="function")try{ns.onCommitFiberUnmount(Xd,w)}catch{}switch(w.tag){case 5:Xr||$l(w,m);case 6:if(Le){var E=tn,P=cs;tn=null,hs(p,m,w),cs=P,(tn=E)!==null&&(cs?N3(tn,w.stateNode):O3(tn,w.stateNode))}else hs(p,m,w);break;case 18:Le&&tn!==null&&(cs?nN(tn,w.stateNode):rN(tn,w.stateNode));break;case 4:Le?(E=tn,P=cs,tn=w.stateNode.containerInfo,cs=!0,hs(p,m,w),tn=E,cs=P):(ct&&(E=w.stateNode.containerInfo,P=Fb(E),h0(E,P)),hs(p,m,w));break;case 0:case 11:case 14:case 15:if(!Xr&&(E=w.updateQueue)!==null&&(E=E.lastEffect)!==null){P=E=E.next;do{var R=P,U=R.destroy;R=R.tag,U!==void 0&&(2&R||4&R)&&QS(w,m,U),P=P.next}while(P!==E)}hs(p,m,w);break;case 1:if(!Xr&&($l(w,m),typeof(E=w.stateNode).componentWillUnmount=="function"))try{E.props=w.memoizedProps,E.state=w.memoizedState,E.componentWillUnmount()}catch(z){Ot(w,m,z)}hs(p,m,w);break;case 21:hs(p,m,w);break;case 22:1&w.mode?(Xr=(E=Xr)||w.memoizedState!==null,hs(p,m,w),Xr=E):hs(p,m,w);break;default:hs(p,m,w)}}function rT(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var w=p.stateNode;w===null&&(w=p.stateNode=new AN),m.forEach(function(E){var P=FN.bind(null,p,E);w.has(E)||(w.add(E),E.then(P,P))})}}function wi(p,m){var w=m.deletions;if(w!==null)for(var E=0;E<w.length;E++){var P=w[E];try{var R=p,U=m;if(Le){var z=U;e:for(;z!==null;){switch(z.tag){case 5:tn=z.stateNode,cs=!1;break e;case 3:case 4:tn=z.stateNode.containerInfo,cs=!0;break e}z=z.return}if(tn===null)throw Error(s(160));av(R,U,P),tn=null,cs=!1}else av(R,U,P);var K=P.alternate;K!==null&&(K.return=null),P.return=null}catch(ee){Ot(P,m,ee)}}if(12854&m.subtreeFlags)for(m=m.child;m!==null;)nT(m,p),m=m.sibling}function nT(p,m){var w=p.alternate,E=p.flags;switch(p.tag){case 0:case 11:case 14:case 15:if(wi(m,p),ds(p),4&E){try{Uc(3,p,p.return),hf(3,p)}catch(te){Ot(p,p.return,te)}try{Uc(5,p,p.return)}catch(te){Ot(p,p.return,te)}}break;case 1:wi(m,p),ds(p),512&E&&w!==null&&$l(w,w.return);break;case 5:if(wi(m,p),ds(p),512&E&&w!==null&&$l(w,w.return),Le){if(32&p.flags){var P=p.stateNode;try{Nb(P)}catch(te){Ot(p,p.return,te)}}if(4&E&&(P=p.stateNode)!=null){var R=p.memoizedProps;if(w=w!==null?w.memoizedProps:R,E=p.type,m=p.updateQueue,p.updateQueue=null,m!==null)try{I3(P,m,E,w,R,p)}catch(te){Ot(p,p.return,te)}}}break;case 6:if(wi(m,p),ds(p),4&E&&Le){if(p.stateNode===null)throw Error(s(162));P=p.stateNode,R=p.memoizedProps,w=w!==null?w.memoizedProps:R;try{A3(P,w,R)}catch(te){Ot(p,p.return,te)}}break;case 3:if(wi(m,p),ds(p),4&E){if(Le&&Je&&w!==null&&w.memoizedState.isDehydrated)try{eN(m.containerInfo)}catch(te){Ot(p,p.return,te)}if(ct){P=m.containerInfo,R=m.pendingChildren;try{h0(P,R)}catch(te){Ot(p,p.return,te)}}}break;case 4:if(wi(m,p),ds(p),4&E&&ct){P=(R=p.stateNode).containerInfo,R=R.pendingChildren;try{h0(P,R)}catch(te){Ot(p,p.return,te)}}break;case 13:wi(m,p),ds(p),8192&(P=p.child).flags&&(R=P.memoizedState!==null,P.stateNode.isHidden=R,!R||P.alternate!==null&&P.alternate.memoizedState!==null||(pv=vr())),4&E&&rT(p);break;case 22:var U=w!==null&&w.memoizedState!==null;if(1&p.mode?(Xr=(w=Xr)||U,wi(m,p),Xr=w):wi(m,p),ds(p),8192&E){if(w=p.memoizedState!==null,(p.stateNode.isHidden=w)&&!U&&(1&p.mode)!=0)for(we=p,E=p.child;E!==null;){for(m=we=E;we!==null;){var z=(U=we).child;switch(U.tag){case 0:case 11:case 14:case 15:Uc(4,U,U.return);break;case 1:$l(U,U.return);var K=U.stateNode;if(typeof K.componentWillUnmount=="function"){var ee=U,ne=U.return;try{var ve=ee;K.props=ve.memoizedProps,K.state=ve.memoizedState,K.componentWillUnmount()}catch(te){Ot(ee,ne,te)}}break;case 5:$l(U,U.return);break;case 22:if(U.memoizedState!==null){oT(m);continue}}z!==null?(z.return=U,we=z):oT(m)}E=E.sibling}if(Le){e:if(E=null,Le)for(m=p;;){if(m.tag===5){if(E===null){E=m;try{P=m.stateNode,w?F3(P):L3(m.stateNode,m.memoizedProps)}catch(te){Ot(p,p.return,te)}}}else if(m.tag===6){if(E===null)try{R=m.stateNode,w?B3(R):D3(R,m.memoizedProps)}catch(te){Ot(p,p.return,te)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===p)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break e;for(;m.sibling===null;){if(m.return===null||m.return===p)break e;E===m&&(E=null),m=m.return}E===m&&(E=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:wi(m,p),ds(p),4&E&&rT(p);break;case 21:break;default:wi(m,p),ds(p)}}function ds(p){var m=p.flags;if(2&m){try{if(Le){e:{for(var w=p.return;w!==null;){if(eT(w)){var E=w;break e}w=w.return}throw Error(s(160))}switch(E.tag){case 5:var P=E.stateNode;32&E.flags&&(Nb(P),E.flags&=-33),ov(p,tT(p),P);break;case 3:case 4:var R=E.stateNode.containerInfo;sv(p,tT(p),R);break;default:throw Error(s(161))}}}catch(U){Ot(p,p.return,U)}p.flags&=-3}4096&m&&(p.flags&=-4097)}function kN(p,m,w){we=p,iT(p)}function iT(p,m,w){for(var E=(1&p.mode)!=0;we!==null;){var P=we,R=P.child;if(P.tag===22&&E){var U=P.memoizedState!==null||cf;if(!U){var z=P.alternate,K=z!==null&&z.memoizedState!==null||Xr;z=cf;var ee=Xr;if(cf=U,(Xr=K)&&!ee)for(we=P;we!==null;)K=(U=we).child,U.tag===22&&U.memoizedState!==null?aT(P):K!==null?(K.return=U,we=K):aT(P);for(;R!==null;)we=R,iT(R),R=R.sibling;we=P,cf=z,Xr=ee}sT(p)}else 8772&P.subtreeFlags&&R!==null?(R.return=P,we=R):sT(p)}}function sT(p){for(;we!==null;){var m=we;if(8772&m.flags){var w=m.alternate;try{if(8772&m.flags)switch(m.tag){case 0:case 11:case 15:Xr||hf(5,m);break;case 1:var E=m.stateNode;if(4&m.flags&&!Xr)if(w===null)E.componentDidMount();else{var P=m.elementType===m.type?w.memoizedProps:_i(m.type,w.memoizedProps);E.componentDidUpdate(P,w.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var R=m.updateQueue;R!==null&&nS(m,R,E);break;case 3:var U=m.updateQueue;if(U!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=V(m.child.stateNode);break;case 1:w=m.child.stateNode}nS(m,U,w)}break;case 5:var z=m.stateNode;w===null&&4&m.flags&&k3(z,m.type,m.memoizedProps,m);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Je&&m.memoizedState===null){var K=m.alternate;if(K!==null){var ee=K.memoizedState;if(ee!==null){var ne=ee.dehydrated;ne!==null&&tN(ne)}}}break;default:throw Error(s(163))}Xr||512&m.flags&&iv(m)}catch(ve){Ot(m,m.return,ve)}}if(m===p){we=null;break}if((w=m.sibling)!==null){w.return=m.return,we=w;break}we=m.return}}function oT(p){for(;we!==null;){var m=we;if(m===p){we=null;break}var w=m.sibling;if(w!==null){w.return=m.return,we=w;break}we=m.return}}function aT(p){for(;we!==null;){var m=we;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{hf(4,m)}catch(K){Ot(m,w,K)}break;case 1:var E=m.stateNode;if(typeof E.componentDidMount=="function"){var P=m.return;try{E.componentDidMount()}catch(K){Ot(m,P,K)}}var R=m.return;try{iv(m)}catch(K){Ot(m,R,K)}break;case 5:var U=m.return;try{iv(m)}catch(K){Ot(m,U,K)}}}catch(K){Ot(m,m.return,K)}if(m===p){we=null;break}var z=m.sibling;if(z!==null){z.return=m.return,we=z;break}we=m.return}}var df=0,ff=1,pf=2,mf=3,gf=4;if(typeof Symbol=="function"&&Symbol.for){var jc=Symbol.for;df=jc("selector.component"),ff=jc("selector.has_pseudo_class"),pf=jc("selector.role"),mf=jc("selector.test_id"),gf=jc("selector.text")}function lv(p){var m=Pr(p);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(s(364));return m}if((p=Io(p))===null)throw Error(s(362));return p.stateNode.current}function uv(p,m){switch(m.$$typeof){case df:if(p.type===m.value)return!0;break;case ff:e:{m=m.value,p=[p,0];for(var w=0;w<p.length;){var E=p[w++],P=p[w++],R=m[P];if(E.tag!==5||!Wn(E)){for(;R!=null&&uv(E,R);)R=m[++P];if(P===m.length){m=!0;break e}for(E=E.child;E!==null;)p.push(E,P),E=E.sibling}}m=!1}return m;case pf:if(p.tag===5&&S3(p.stateNode,m.value))return!0;break;case gf:if((p.tag===5||p.tag===6)&&(p=Ld(p))!==null&&0<=p.indexOf(m.value))return!0;break;case mf:if(p.tag===5&&typeof(p=p.memoizedProps["data-testname"])=="string"&&p.toLowerCase()===m.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function cv(p){switch(p.$$typeof){case df:return"<"+(A(p.value)||"Unknown")+">";case ff:return":has("+(cv(p)||"")+")";case pf:return'[role="'+p.value+'"]';case gf:return'"'+p.value+'"';case mf:return'[data-testname="'+p.value+'"]';default:throw Error(s(365))}}function lT(p,m){var w=[];p=[p,0];for(var E=0;E<p.length;){var P=p[E++],R=p[E++],U=m[R];if(P.tag!==5||!Wn(P)){for(;U!=null&&uv(P,U);)U=m[++R];if(R===m.length)w.push(P);else for(P=P.child;P!==null;)p.push(P,R),P=P.sibling}}return w}function hv(p,m){if(!ko)throw Error(s(363));p=lT(p=lv(p),m),m=[],p=Array.from(p);for(var w=0;w<p.length;){var E=p[w++];if(E.tag===5)Wn(E)||m.push(E.stateNode);else for(E=E.child;E!==null;)p.push(E),E=E.sibling}return m}var IN=Math.ceil,vf=o.ReactCurrentDispatcher,dv=o.ReactCurrentOwner,Kt=o.ReactCurrentBatchConfig,et=0,_r=null,tr=null,Ar=0,kn=0,zl=Mo(0),or=0,Xc=null,Da=0,yf=0,fv=0,Hc=null,In=null,pv=0,mv=1/0,Fo=null;function Yl(){mv=vr()+500}var uT,xf=!1,gv=null,Bo=null,_f=!1,Lo=null,wf=0,$c=0,vv=null,bf=-1,Sf=0;function Hr(){return 6&et?vr():bf!==-1?bf:bf=vr()}function Do(p){return 1&p.mode?2&et&&Ar!==0?Ar&-Ar:mN.transition!==null?(Sf===0&&(Sf=$b()),Sf):(p=at)!==0?p:rs():1}function ei(p,m,w,E){if(50<$c)throw $c=0,vv=null,Error(s(185));Pc(p,w,E),2&et&&p===_r||(p===_r&&(!(2&et)&&(yf|=w),or===4&&Uo(p,Ar)),fn(p,E),w===1&&et===0&&!(1&m.mode)&&(Yl(),Hd&&is()))}function fn(p,m){var w=p.callbackNode;(function(P,R){for(var U=P.suspendedLanes,z=P.pingedLanes,K=P.expirationTimes,ee=P.pendingLanes;0<ee;){var ne=31-vi(ee),ve=1<<ne,te=K[ne];te===-1?ve&U&&!(ve&z)||(K[ne]=cN(ve,R)):te<=R&&(P.expiredLanes|=ve),ee&=~ve}})(p,m);var E=jd(p,p===_r?Ar:0);if(E===0)w!==null&&Yb(w),p.callbackNode=null,p.callbackPriority=0;else if(m=E&-E,p.callbackPriority!==m){if(w!=null&&Yb(w),m===1)p.tag===0?function(P){Hd=!0,Wb(P)}(hT.bind(null,p)):Wb(hT.bind(null,p)),gi?Tc(function(){!(6&et)&&is()}):b0(S0,is),w=null;else{switch(zb(E)){case 1:w=S0;break;case 4:w=fN;break;case 16:default:w=Gb;break;case 536870912:w=pN}w=xT(w,cT.bind(null,p))}p.callbackPriority=m,p.callbackNode=w}}function cT(p,m){if(bf=-1,Sf=0,(6&et)!=0)throw Error(s(327));var w=p.callbackNode;if(ja()&&p.callbackNode!==w)return null;var E=jd(p,p===_r?Ar:0);if(E===0)return null;if(30&E||E&p.expiredLanes||m)m=Tf(p,E);else{m=E;var P=et;et|=2;var R=pT();for(_r===p&&Ar===m||(Fo=null,Yl(),Ua(p,m));;)try{RN();break}catch(z){fT(p,z)}M0(),vf.current=R,et=P,tr!==null?m=0:(_r=null,Ar=0,m=or)}if(m!==0){if(m===2&&(P=x0(p))!==0&&(E=P,m=yv(p,P)),m===1)throw w=Xc,Ua(p,0),Uo(p,E),fn(p,vr()),w;if(m===6)Uo(p,E);else{if(P=p.current.alternate,(30&E)==0&&!function(z){for(var K=z;;){if(16384&K.flags){var ee=K.updateQueue;if(ee!==null&&(ee=ee.stores)!==null)for(var ne=0;ne<ee.length;ne++){var ve=ee[ne],te=ve.getSnapshot;ve=ve.value;try{if(!yi(te(),ve))return!1}catch{return!1}}}if(ee=K.child,16384&K.subtreeFlags&&ee!==null)ee.return=K,K=ee;else{if(K===z)break;for(;K.sibling===null;){if(K.return===null||K.return===z)return!0;K=K.return}K.sibling.return=K.return,K=K.sibling}}return!0}(P)&&((m=Tf(p,E))===2&&(R=x0(p))!==0&&(E=R,m=yv(p,R)),m===1))throw w=Xc,Ua(p,0),Uo(p,E),fn(p,vr()),w;switch(p.finishedWork=P,p.finishedLanes=E,m){case 0:case 1:throw Error(s(345));case 2:case 5:Gl(p,In,Fo);break;case 3:if(Uo(p,E),(130023424&E)===E&&10<(m=pv+500-vr())){if(jd(p,0)!==0)break;if(((P=p.suspendedLanes)&E)!==E){Hr(),p.pingedLanes|=p.suspendedLanes&P;break}p.timeoutHandle=Be(Gl.bind(null,p,In,Fo),m);break}Gl(p,In,Fo);break;case 4:if(Uo(p,E),(4194240&E)===E)break;for(m=p.eventTimes,P=-1;0<E;){var U=31-vi(E);R=1<<U,(U=m[U])>P&&(P=U),E&=~R}if(E=P,10<(E=(120>(E=vr()-E)?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*IN(E/1960))-E)){p.timeoutHandle=Be(Gl.bind(null,p,In,Fo),E);break}Gl(p,In,Fo);break;default:throw Error(s(329))}}}return fn(p,vr()),p.callbackNode===w?cT.bind(null,p):null}function yv(p,m){var w=Hc;return p.current.memoizedState.isDehydrated&&(Ua(p,m).flags|=256),(p=Tf(p,m))!==2&&(m=In,In=w,m!==null&&xv(m)),p}function xv(p){In===null?In=p:In.push.apply(In,p)}function Uo(p,m){for(m&=~fv,m&=~yf,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var w=31-vi(m),E=1<<w;p[w]=-1,m&=~E}}function hT(p){if(6&et)throw Error(s(327));ja();var m=jd(p,0);if(!(1&m))return fn(p,vr()),null;var w=Tf(p,m);if(p.tag!==0&&w===2){var E=x0(p);E!==0&&(m=E,w=yv(p,E))}if(w===1)throw w=Xc,Ua(p,0),Uo(p,m),fn(p,vr()),w;if(w===6)throw Error(s(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,Gl(p,In,Fo),fn(p,vr()),null}function dT(p){Lo!==null&&Lo.tag===0&&!(6&et)&&ja();var m=et;et|=1;var w=Kt.transition,E=at;try{if(Kt.transition=null,at=1,p)return p()}finally{at=E,Kt.transition=w,!(6&(et=m))&&is()}}function _v(){kn=zl.current,Mt(zl)}function Ua(p,m){p.finishedWork=null,p.finishedLanes=0;var w=p.timeoutHandle;if(w!==Ve&&(p.timeoutHandle=Ve,ze(w)),tr!==null)for(w=tr.return;w!==null;){var E=w;switch(C0(E),E.tag){case 1:(E=E.type.childContextTypes)!=null&&g0();break;case 3:Xl(),Mt(cn),Mt(Ur),X0();break;case 5:U0(E);break;case 4:Xl();break;case 13:case 19:Mt(Yt);break;case 10:R0(E.type._context);break;case 22:case 23:_v()}w=w.return}if(_r=p,tr=p=jo(p.current,null),Ar=kn=m,or=0,Xc=null,fv=yf=Da=0,In=Hc=null,Ba!==null){for(m=0;m<Ba.length;m++)if((E=(w=Ba[m]).interleaved)!==null){w.interleaved=null;var P=E.next,R=w.pending;if(R!==null){var U=R.next;R.next=P,E.next=U}w.pending=E}Ba=null}return p}function fT(p,m){for(;;){var w=tr;try{if(M0(),ef.current=sf,tf){for(var E=Bt.memoizedState;E!==null;){var P=E.queue;P!==null&&(P.pending=null),E=E.next}tf=!1}if(La=0,xr=yr=Bt=null,Rc=!1,Oc=0,dv.current=null,w===null||w.return===null){or=1,Xc=m,tr=null;break}e:{var R=p,U=w.return,z=w,K=m;if(m=Ar,z.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ee=K,ne=z,ve=ne.tag;if(!(1&ne.mode)&&(ve===0||ve===11||ve===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var he=BS(U);if(he!==null){he.flags&=-257,LS(he,U,z,0,m),1&he.mode&&FS(R,ee,m),K=ee;var Ce=(m=he).updateQueue;if(Ce===null){var We=new Set;We.add(K),m.updateQueue=We}else Ce.add(K);break e}if(!(1&m)){FS(R,ee,m),wv();break e}K=Error(s(426))}else if(Rt&&1&z.mode){var ie=BS(U);if(ie!==null){!(65536&ie.flags)&&(ie.flags|=256),LS(ie,U,z,0,m),k0(Hl(K,z));break e}}R=K=Hl(K,z),or!==4&&(or=2),Hc===null?Hc=[R]:Hc.push(R),R=U;do{switch(R.tag){case 3:R.flags|=65536,m&=-m,R.lanes|=m,rS(R,OS(0,K,m));break e;case 1:z=K;var q=R.type,J=R.stateNode;if(!(128&R.flags)&&(typeof q.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Bo===null||!Bo.has(J)))){R.flags|=65536,m&=-m,R.lanes|=m,rS(R,NS(R,z,m));break e}}R=R.return}while(R!==null)}gT(w)}catch(le){m=le,tr===w&&w!==null&&(tr=w=w.return);continue}break}}function pT(){var p=vf.current;return vf.current=sf,p===null?sf:p}function wv(){or!==0&&or!==3&&or!==2||(or=4),_r===null||!(268435455&Da)&&!(268435455&yf)||Uo(_r,Ar)}function Tf(p,m){var w=et;et|=2;var E=pT();for(_r===p&&Ar===m||(Fo=null,Ua(p,m));;)try{MN();break}catch(P){fT(p,P)}if(M0(),et=w,vf.current=E,tr!==null)throw Error(s(261));return _r=null,Ar=0,or}function MN(){for(;tr!==null;)mT(tr)}function RN(){for(;tr!==null&&!hN();)mT(tr)}function mT(p){var m=uT(p.alternate,p,kn);p.memoizedProps=p.pendingProps,m===null?gT(p):tr=m,dv.current=null}function gT(p){var m=p;do{var w=m.alternate;if(p=m.return,(32768&m.flags)==0){if((w=CN(w,m,kn))!==null)return void(tr=w)}else{if((w=PN(w,m))!==null)return w.flags&=32767,void(tr=w);if(p===null)return or=6,void(tr=null);p.flags|=32768,p.subtreeFlags=0,p.deletions=null}if((m=m.sibling)!==null)return void(tr=m);tr=m=p}while(m!==null);or===0&&(or=5)}function Gl(p,m,w){var E=at,P=Kt.transition;try{Kt.transition=null,at=1,function(R,U,z,K){do ja();while(Lo!==null);if(6&et)throw Error(s(327));z=R.finishedWork;var ee=R.finishedLanes;if(z===null)return null;if(R.finishedWork=null,R.finishedLanes=0,z===R.current)throw Error(s(177));R.callbackNode=null,R.callbackPriority=0;var ne=z.lanes|z.childLanes;if(function(he,Ce){var We=he.pendingLanes&~Ce;he.pendingLanes=Ce,he.suspendedLanes=0,he.pingedLanes=0,he.expiredLanes&=Ce,he.mutableReadLanes&=Ce,he.entangledLanes&=Ce,Ce=he.entanglements;var ie=he.eventTimes;for(he=he.expirationTimes;0<We;){var q=31-vi(We),J=1<<q;Ce[q]=0,ie[q]=-1,he[q]=-1,We&=~J}}(R,ne),R===_r&&(tr=_r=null,Ar=0),!(2064&z.subtreeFlags)&&!(2064&z.flags)||_f||(_f=!0,xT(Gb,function(){return ja(),null})),ne=(15990&z.flags)!=0,(15990&z.subtreeFlags)!=0||ne){ne=Kt.transition,Kt.transition=null;var ve=at;at=1;var te=et;et|=4,dv.current=null,function(he,Ce){for(G(he.containerInfo),we=Ce;we!==null;)if(Ce=(he=we).child,(1028&he.subtreeFlags)!=0&&Ce!==null)Ce.return=he,we=Ce;else for(;we!==null;){he=we;try{var We=he.alternate;if(1024&he.flags)switch(he.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(We!==null){var ie=We.memoizedProps,q=We.memoizedState,J=he.stateNode,le=J.getSnapshotBeforeUpdate(he.elementType===he.type?ie:_i(he.type,ie),q);J.__reactInternalSnapshotBeforeUpdate=le}break;case 3:Le&&U3(he.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Ne){Ot(he,he.return,Ne)}if((Ce=he.sibling)!==null){Ce.return=he.return,we=Ce;break}we=he.return}We=ZS,ZS=!1}(R,z),nT(z,R),$(R.containerInfo),R.current=z,kN(z),dN(),et=te,at=ve,Kt.transition=ne}else R.current=z;if(_f&&(_f=!1,Lo=R,wf=ee),ne=R.pendingLanes,ne===0&&(Bo=null),function(he){if(ns&&typeof ns.onCommitFiberRoot=="function")try{ns.onCommitFiberRoot(Xd,he,void 0,(128&he.current.flags)==128)}catch{}}(z.stateNode),fn(R,vr()),U!==null)for(K=R.onRecoverableError,z=0;z<U.length;z++)ee=U[z],K(ee.value,{componentStack:ee.stack,digest:ee.digest});if(xf)throw xf=!1,R=gv,gv=null,R;1&wf&&R.tag!==0&&ja(),ne=R.pendingLanes,1&ne?R===vv?$c++:($c=0,vv=R):$c=0,is()}(p,m,w,E)}finally{Kt.transition=P,at=E}return null}function ja(){if(Lo!==null){var p=zb(wf),m=Kt.transition,w=at;try{if(Kt.transition=null,at=16>p?16:p,Lo===null)var E=!1;else{if(p=Lo,Lo=null,wf=0,(6&et)!=0)throw Error(s(331));var P=et;for(et|=4,we=p.current;we!==null;){var R=we,U=R.child;if(16&we.flags){var z=R.deletions;if(z!==null){for(var K=0;K<z.length;K++){var ee=z[K];for(we=ee;we!==null;){var ne=we;switch(ne.tag){case 0:case 11:case 15:Uc(8,ne,R)}var ve=ne.child;if(ve!==null)ve.return=ne,we=ve;else for(;we!==null;){var te=(ne=we).sibling,he=ne.return;if(JS(ne),ne===ee){we=null;break}if(te!==null){te.return=he,we=te;break}we=he}}}var Ce=R.alternate;if(Ce!==null){var We=Ce.child;if(We!==null){Ce.child=null;do{var ie=We.sibling;We.sibling=null,We=ie}while(We!==null)}}we=R}}if(2064&R.subtreeFlags&&U!==null)U.return=R,we=U;else e:for(;we!==null;){if(2048&(R=we).flags)switch(R.tag){case 0:case 11:case 15:Uc(9,R,R.return)}var q=R.sibling;if(q!==null){q.return=R.return,we=q;break e}we=R.return}}var J=p.current;for(we=J;we!==null;){var le=(U=we).child;if(2064&U.subtreeFlags&&le!==null)le.return=U,we=le;else e:for(U=J;we!==null;){if(2048&(z=we).flags)try{switch(z.tag){case 0:case 11:case 15:hf(9,z)}}catch(dt){Ot(z,z.return,dt)}if(z===U){we=null;break e}var Ne=z.sibling;if(Ne!==null){Ne.return=z.return,we=Ne;break e}we=z.return}}if(et=P,is(),ns&&typeof ns.onPostCommitFiberRoot=="function")try{ns.onPostCommitFiberRoot(Xd,p)}catch{}E=!0}return E}finally{at=w,Kt.transition=m}}return!1}function vT(p,m,w){p=No(p,m=OS(0,m=Hl(w,m),1),1),m=Hr(),p!==null&&(Pc(p,1,m),fn(p,m))}function Ot(p,m,w){if(p.tag===3)vT(p,p,w);else for(;m!==null;){if(m.tag===3){vT(m,p,w);break}if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Bo===null||!Bo.has(E))){m=No(m,p=NS(m,p=Hl(w,p),1),1),p=Hr(),m!==null&&(Pc(m,1,p),fn(m,p));break}}m=m.return}}function ON(p,m,w){var E=p.pingCache;E!==null&&E.delete(m),m=Hr(),p.pingedLanes|=p.suspendedLanes&w,_r===p&&(Ar&w)===w&&(or===4||or===3&&(130023424&Ar)===Ar&&500>vr()-pv?Ua(p,0):fv|=w),fn(p,m)}function yT(p,m){m===0&&(1&p.mode?(m=y0,!(130023424&(y0<<=1))&&(y0=4194304)):m=1);var w=Hr();(p=os(p,m))!==null&&(Pc(p,m,w),fn(p,w))}function NN(p){var m=p.memoizedState,w=0;m!==null&&(w=m.retryLane),yT(p,w)}function FN(p,m){var w=0;switch(p.tag){case 13:var E=p.stateNode,P=p.memoizedState;P!==null&&(w=P.retryLane);break;case 19:E=p.stateNode;break;default:throw Error(s(314))}E!==null&&E.delete(m),yT(p,w)}function xT(p,m){return b0(p,m)}function BN(p,m,w,E){this.tag=p,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(p,m,w,E){return new BN(p,m,w,E)}function bv(p){return!(!(p=p.prototype)||!p.isReactComponent)}function jo(p,m){var w=p.alternate;return w===null?((w=ti(p.tag,m,p.key,p.mode)).elementType=p.elementType,w.type=p.type,w.stateNode=p.stateNode,w.alternate=p,p.alternate=w):(w.pendingProps=m,w.type=p.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=14680064&p.flags,w.childLanes=p.childLanes,w.lanes=p.lanes,w.child=p.child,w.memoizedProps=p.memoizedProps,w.memoizedState=p.memoizedState,w.updateQueue=p.updateQueue,m=p.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=p.sibling,w.index=p.index,w.ref=p.ref,w}function Ef(p,m,w,E,P,R){var U=2;if(E=p,typeof p=="function")bv(p)&&(U=1);else if(typeof p=="string")U=5;else e:switch(p){case u:return Xa(w.children,P,R,m);case h:U=8,P|=8;break;case c:return(p=ti(12,w,m,2|P)).elementType=c,p.lanes=R,p;case v:return(p=ti(13,w,m,P)).elementType=v,p.lanes=R,p;case x:return(p=ti(19,w,m,P)).elementType=x,p.lanes=R,p;case _:return Cf(w,P,R,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case d:U=10;break e;case f:U=9;break e;case g:U=11;break e;case y:U=14;break e;case b:U=16,E=null;break e}throw Error(s(130,p==null?p:typeof p,""))}return(m=ti(U,w,m,P)).elementType=p,m.type=E,m.lanes=R,m}function Xa(p,m,w,E){return(p=ti(7,p,E,m)).lanes=w,p}function Cf(p,m,w,E){return(p=ti(22,p,E,m)).elementType=_,p.lanes=w,p.stateNode={isHidden:!1},p}function Sv(p,m,w){return(p=ti(6,p,null,m)).lanes=w,p}function Tv(p,m,w){return(m=ti(4,p.children!==null?p.children:[],p.key,m)).lanes=w,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function LN(p,m,w,E,P){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ve,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_0(0),this.expirationTimes=_0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_0(0),this.identifierPrefix=E,this.onRecoverableError=P,Je&&(this.mutableSourceEagerHydrationData=null)}function _T(p,m,w,E,P,R,U,z,K){return p=new LN(p,m,w,z,K),m===1?(m=1,R===!0&&(m|=8)):m=0,R=ti(3,null,null,m),p.current=R,R.stateNode=p,R.memoizedState={element:E,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},F0(R),p}function wT(p){if(!p)return Ro;e:{if(M(p=p._reactInternals)!==p||p.tag!==1)throw Error(s(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Pn(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(s(171))}if(p.tag===1){var w=p.type;if(Pn(w))return Xb(p,w,m)}return m}function bT(p){var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return(p=D(m))===null?null:p.stateNode}function ST(p,m){if((p=p.memoizedState)!==null&&p.dehydrated!==null){var w=p.retryLane;p.retryLane=w!==0&&w<m?w:m}}function Pf(p,m){ST(p,m),(p=p.alternate)&&ST(p,m)}function DN(p){return(p=D(p))===null?null:p.stateNode}function UN(){return null}return uT=function(p,m,w){if(p!==null)if(p.memoizedProps!==m.pendingProps||cn.current)hn=!0;else{if(!(p.lanes&w)&&!(128&m.flags))return hn=!1,function(ve,te,he){switch(te.tag){case 3:zS(te),Bl();break;case 5:hS(te);break;case 1:Pn(te.type)&&Ud(te);break;case 4:D0(te,te.stateNode.containerInfo);break;case 10:Jb(0,te.type._context,te.memoizedProps.value);break;case 13:var Ce=te.memoizedState;if(Ce!==null)return Ce.dehydrated!==null?(_t(Yt,1&Yt.current),te.flags|=128,null):he&te.child.childLanes?GS(ve,te,he):(_t(Yt,1&Yt.current),(ve=Ws(ve,te,he))!==null?ve.sibling:null);_t(Yt,1&Yt.current);break;case 19:if(Ce=(he&te.childLanes)!=0,(128&ve.flags)!=0){if(Ce)return VS(ve,te,he);te.flags|=128}var We=te.memoizedState;if(We!==null&&(We.rendering=null,We.tail=null,We.lastEffect=null),_t(Yt,Yt.current),Ce)break;return null;case 22:case 23:return te.lanes=0,XS(ve,te,he)}return Ws(ve,te,he)}(p,m,w);hn=(131072&p.flags)!=0}else hn=!1,Rt&&1048576&m.flags&&Vb(m,zd,m.index);switch(m.lanes=0,m.tag){case 2:var E=m.type;uf(p,m),p=m.pendingProps;var P=Ol(m,Ur.current);Dl(m,w),P=z0(null,m,E,p,P,w);var R=Y0();return m.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Pn(E)?(R=!0,Ud(m)):R=!1,m.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,F0(m),P.updater=Qd,m.stateNode=P,P._reactInternals=m,L0(m,E,p,w),m=J0(null,m,E,!0,R,w)):(m.tag=0,Rt&&R&&E0(m),dn(null,m,P,w),m=m.child),m;case 16:E=m.elementType;e:{switch(uf(p,m),p=m.pendingProps,E=(P=E._init)(E._payload),m.type=E,P=m.tag=function(ve){if(typeof ve=="function")return bv(ve)?1:0;if(ve!=null){if((ve=ve.$$typeof)===g)return 11;if(ve===y)return 14}return 2}(E),p=_i(E,p),P){case 0:m=Z0(null,m,E,p,w);break e;case 1:m=$S(null,m,E,p,w);break e;case 11:m=DS(null,m,E,p,w);break e;case 14:m=US(null,m,E,_i(E.type,p),w);break e}throw Error(s(306,E,""))}return m;case 0:return E=m.type,P=m.pendingProps,Z0(p,m,E,P=m.elementType===E?P:_i(E,P),w);case 1:return E=m.type,P=m.pendingProps,$S(p,m,E,P=m.elementType===E?P:_i(E,P),w);case 3:e:{if(zS(m),p===null)throw Error(s(387));E=m.pendingProps,P=(R=m.memoizedState).element,tS(p,m),Kd(m,E,null,w);var U=m.memoizedState;if(E=U.element,Je&&R.isDehydrated){if(R={element:E,isDehydrated:!1,cache:U.cache,pendingSuspenseBoundaries:U.pendingSuspenseBoundaries,transitions:U.transitions},m.updateQueue.baseState=R,m.memoizedState=R,256&m.flags){m=YS(p,m,E,w,P=Hl(Error(s(423)),m));break e}if(E!==P){m=YS(p,m,E,w,P=Hl(Error(s(424)),m));break e}for(Je&&(Kn=V3(m.stateNode.containerInfo),An=m,Rt=!0,xi=null,Ac=!1),w=cS(m,null,E,w),m.child=w;w;)w.flags=-3&w.flags|4096,w=w.sibling}else{if(Bl(),E===P){m=Ws(p,m,w);break e}dn(p,m,E,w)}m=m.child}return m;case 5:return hS(m),p===null&&A0(m),E=m.type,P=m.pendingProps,R=p!==null?p.memoizedProps:null,U=P.children,ye(E,P)?U=null:R!==null&&ye(E,R)&&(m.flags|=32),HS(p,m),dn(p,m,U,w),m.child;case 6:return p===null&&A0(m),null;case 13:return GS(p,m,w);case 4:return D0(m,m.stateNode.containerInfo),E=m.pendingProps,p===null?m.child=Ul(m,null,E,w):dn(p,m,E,w),m.child;case 11:return E=m.type,P=m.pendingProps,DS(p,m,E,P=m.elementType===E?P:_i(E,P),w);case 7:return dn(p,m,m.pendingProps,w),m.child;case 8:case 12:return dn(p,m,m.pendingProps.children,w),m.child;case 10:e:{if(E=m.type._context,P=m.pendingProps,R=m.memoizedProps,Jb(0,E,U=P.value),R!==null)if(yi(R.value,U)){if(R.children===P.children&&!cn.current){m=Ws(p,m,w);break e}}else for((R=m.child)!==null&&(R.return=m);R!==null;){var z=R.dependencies;if(z!==null){U=R.child;for(var K=z.firstContext;K!==null;){if(K.context===E){if(R.tag===1){(K=Gs(-1,w&-w)).tag=2;var ee=R.updateQueue;if(ee!==null){var ne=(ee=ee.shared).pending;ne===null?K.next=K:(K.next=ne.next,ne.next=K),ee.pending=K}}R.lanes|=w,(K=R.alternate)!==null&&(K.lanes|=w),O0(R.return,w,m),z.lanes|=w;break}K=K.next}}else if(R.tag===10)U=R.type===m.type?null:R.child;else if(R.tag===18){if((U=R.return)===null)throw Error(s(341));U.lanes|=w,(z=U.alternate)!==null&&(z.lanes|=w),O0(U,w,m),U=R.sibling}else U=R.child;if(U!==null)U.return=R;else for(U=R;U!==null;){if(U===m){U=null;break}if((R=U.sibling)!==null){R.return=U.return,U=R;break}U=U.return}R=U}dn(p,m,P.children,w),m=m.child}return m;case 9:return P=m.type,E=m.pendingProps.children,Dl(m,w),E=E(P=Qn(P)),m.flags|=1,dn(p,m,E,w),m.child;case 14:return P=_i(E=m.type,m.pendingProps),US(p,m,E,P=_i(E.type,P),w);case 15:return jS(p,m,m.type,m.pendingProps,w);case 17:return E=m.type,P=m.pendingProps,P=m.elementType===E?P:_i(E,P),uf(p,m),m.tag=1,Pn(E)?(p=!0,Ud(m)):p=!1,Dl(m,w),oS(m,E,P),L0(m,E,P,w),J0(null,m,E,!0,p,w);case 19:return VS(p,m,w);case 22:return XS(p,m,w)}throw Error(s(156,m.tag))},e.attemptContinuousHydration=function(p){if(p.tag===13){var m=os(p,134217728);m!==null&&ei(m,p,134217728,Hr()),Pf(p,134217728)}},e.attemptDiscreteHydration=function(p){if(p.tag===13){var m=os(p,1);m!==null&&ei(m,p,1,Hr()),Pf(p,1)}},e.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var m=Do(p),w=os(p,m);w!==null&&ei(w,p,m,Hr()),Pf(p,m)}},e.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var w=Cc(m.pendingLanes);w!==0&&(w0(m,1|w),fn(m,vr()),!(6&et)&&(Yl(),is()))}break;case 13:dT(function(){var E=os(p,1);if(E!==null){var P=Hr();ei(E,p,1,P)}}),Pf(p,1)}},e.batchedUpdates=function(p,m){var w=et;et|=1;try{return p(m)}finally{(et=w)===0&&(Yl(),Hd&&is())}},e.createComponentSelector=function(p){return{$$typeof:df,value:p}},e.createContainer=function(p,m,w,E,P,R,U){return _T(p,m,!1,null,0,E,0,R,U)},e.createHasPseudoClassSelector=function(p){return{$$typeof:ff,value:p}},e.createHydrationContainer=function(p,m,w,E,P,R,U,z,K){return(p=_T(w,E,!0,p,0,R,0,z,K)).context=wT(null),w=p.current,(R=Gs(E=Hr(),P=Do(w))).callback=m??null,No(w,R,P),p.current.lanes=P,Pc(p,P,E),fn(p,E),p},e.createPortal=function(p,m,w){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:p,containerInfo:m,implementation:w}},e.createRoleSelector=function(p){return{$$typeof:pf,value:p}},e.createTestNameSelector=function(p){return{$$typeof:mf,value:p}},e.createTextSelector=function(p){return{$$typeof:gf,value:p}},e.deferredUpdates=function(p){var m=at,w=Kt.transition;try{return Kt.transition=null,at=16,p()}finally{at=m,Kt.transition=w}},e.discreteUpdates=function(p,m,w,E,P){var R=at,U=Kt.transition;try{return Kt.transition=null,at=1,p(m,w,E,P)}finally{at=R,Kt.transition=U,et===0&&Yl()}},e.findAllNodes=hv,e.findBoundingRects=function(p,m){if(!ko)throw Error(s(363));m=hv(p,m),p=[];for(var w=0;w<m.length;w++)p.push(Bd(m[w]));for(m=p.length-1;0<m;m--)for(var E=(w=p[m]).x,P=E+w.width,R=w.y,U=R+w.height,z=m-1;0<=z;z--)if(m!==z){var K=p[z],ee=K.x,ne=ee+K.width,ve=K.y,te=ve+K.height;if(E>=ee&&R>=ve&&P<=ne&&U<=te){p.splice(m,1);break}if(!(E!==ee||w.width!==K.width||te<R||ve>U)){ve>R&&(K.height+=ve-R,K.y=R),te<U&&(K.height=U-ve),p.splice(m,1);break}if(!(R!==ve||w.height!==K.height||ne<E||ee>P)){ee>E&&(K.width+=ee-E,K.x=E),ne<P&&(K.width=P-ee),p.splice(m,1);break}}return p},e.findHostInstance=bT,e.findHostInstanceWithNoPortals=function(p){return(p=(p=L(p))!==null?F(p):null)===null?null:p.stateNode},e.findHostInstanceWithWarning=function(p){return bT(p)},e.flushControlled=function(p){var m=et;et|=1;var w=Kt.transition,E=at;try{Kt.transition=null,at=1,p()}finally{at=E,Kt.transition=w,(et=m)===0&&(Yl(),is())}},e.flushPassiveEffects=ja,e.flushSync=dT,e.focusWithin=function(p,m){if(!ko)throw Error(s(363));for(m=lT(p=lv(p),m),m=Array.from(m),p=0;p<m.length;){var w=m[p++];if(!Wn(w)){if(w.tag===5&&T3(w.stateNode))return!0;for(w=w.child;w!==null;)m.push(w),w=w.sibling}}return!1},e.getCurrentUpdatePriority=function(){return at},e.getFindAllNodesFailureDescription=function(p,m){if(!ko)throw Error(s(363));var w=0,E=[];p=[lv(p),0];for(var P=0;P<p.length;){var R=p[P++],U=p[P++],z=m[U];if((R.tag!==5||!Wn(R))&&(uv(R,z)&&(E.push(cv(z)),++U>w&&(w=U)),U<m.length))for(R=R.child;R!==null;)p.push(R,U),R=R.sibling}if(w<m.length){for(p=[];w<m.length;w++)p.push(cv(m[w]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+p.join(" > ")}return null},e.getPublicRootInstance=function(p){return(p=p.current).child?p.child.tag===5?V(p.child.stateNode):p.child.stateNode:null},e.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:DN,findFiberByHostInstance:p.findFiberByHostInstance||UN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)p=!0;else{try{Xd=m.inject(p),ns=m}catch{}p=!!m.checkDCE}}return p},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(p,m,w,E){if(!ko)throw Error(s(363));p=hv(p,m);var P=E3(p,w,E).disconnect;return{disconnect:function(){P()}}},e.registerMutableSourceForHydration=function(p,m){var w=m._getVersion;w=w(m._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[m,w]:p.mutableSourceEagerHydrationData.push(m,w)},e.runWithPriority=function(p,m){var w=at;try{return at=p,m()}finally{at=w}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(p,m,w,E){var P=m.current,R=Hr(),U=Do(P);return w=wT(w),m.context===null?m.context=w:m.pendingContext=w,(m=Gs(R,U)).payload={element:p},(E=E===void 0?null:E)!==null&&(m.callback=E),(p=No(P,m,U))!==null&&(ei(p,P,U,R),qd(p,P,U)),U},e}),kP}({get exports(){return s_},set exports(r){s_=r}}).exports=ZH();var JH=EH(s_),XR={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},a_={},vp={get exports(){return a_},set exports(r){a_=r}};(function(){var r,e,t,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?vp.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(vp.exports=function(){return(r()-i)/1e6},e=process.hrtime,n=(r=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(vp.exports=function(){return Date.now()-t},t=Date.now()):(vp.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(TH);var RP,Eu={},za={};({get exports(){return Eu},set exports(r){Eu=r}}).exports=(RP||(RP=1,za.ConcurrentRoot=1,za.ContinuousEventPriority=4,za.DefaultEventPriority=16,za.DiscreteEventPriority=1,za.IdleEventPriority=536870912,za.LegacyRoot=0),za);var e$={};function Xy(r,e){r.addChild&&(r.addChild(e),typeof e.didMount=="function"&&e.didMount(e,r))}function HR(r,e){var t,n,i;(t=r.willUnmount)===null||t===void 0||t.call(r,r,e),((n=r.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=r.children)!==null&&i!==void 0&&i.length&&Eo(r.children).forEach(function(s){HR(s,r)})}function OP(r,e){var t;HR(e,r),r.removeChild(e);var n=(t=e.config)!==null&&t!==void 0?t:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,a=o===void 0||o,l=n.destroyTexture,u=l!==void 0&&l,h=n.destroyBaseTexture,c=h!==void 0&&h;s&&e.destroy({children:a,texture:u,baseTexture:c})}function NP(r,e,t){var n,i;qt(e!==t,"Cannot insert node before itself"),r.children.indexOf(e)!==-1&&r.removeChild(e);var s=r.getChildIndex(t);r.addChildAt(e,s),(n=r.__reactpixi)===null||n===void 0||(i=n.root)===null||i===void 0||i.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var FP=null,Fi=JH({getRootHostContext:function(){return e$},getChildHostContext:function(r){return r},getChildHostContextForEventComponent:function(r){return r},getPublicInstance:function(r){return r},getCurrentEventPriority:function(){return function(){var r,e;if(typeof window>"u")return Eu.DefaultEventPriority;switch((r=window)===null||r===void 0||(e=r.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Eu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Eu.ContinuousEventPriority;default:return Eu.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(r){var e,t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=VH[r];if(typeof s=="function"&&(e=s(i,n)),!e){var o=jR[r];o&&((e=o.create(n,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((t=e)===null||t===void 0?void 0:t.applyProps)=="function"?e.applyProps:js)(e,{},n)),e},hideInstance:function(r){r.visible=!1},unhideInstance:function(r,e){var t=e==null||!e.hasOwnProperty("visible")||e.visible;r.visible=t},finalizeInitialChildren:function(r,e,t){return!1},prepareUpdate:function(r,e,t,n,i,s){return FP=function(o,a,l,u){var h=null;for(var c in l)!u.hasOwnProperty(c)&&l.hasOwnProperty(c)&&l[c]!==null&&(c===n_||(h||(h=[]),h.push(c,null)));for(var d in u){var f=u[d],g=l!==null?l[d]:void 0;!u.hasOwnProperty(d)||f===g||f===null&&g===null||d===n_||(h||(h=[]),h.push(d,f))}return h}(0,0,t,n)},shouldSetTextContent:function(r,e){return!1},shouldDeprioritizeSubtree:function(r,e){var t=e.alpha===void 0||e.alpha>0,n=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(t&&n&&i)},createTextInstance:function(r,e,t){qt(!1,'Error trying to add text node "'.concat(r,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(r,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:a_,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Xy.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Xy.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Xy.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=OP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=OP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:NP,insertInContainerBefore:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=NP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(r,e,t,n,i){var s,o,a=r&&r.applyProps;typeof a!="function"&&(a=js),(a(r,n,i)||FP)&&((s=r.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(r,e,t,n,i){},commitTextUpdate:function(r,e,t){},resetTextContent:function(r){},clearContainer:function(r){},getFundamentalComponentInstance:function(r){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(r){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},getInstanceFromNode:function(r){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(r){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(r){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(r){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(r){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(r){}}),t$=XR.dependencies["react-dom"].replace(/[^0-9.]/g,""),r$=XR.name;Fi.injectIntoDevTools({bundleType:0,version:t$,rendererPackageName:r$,findHostInstanceByFiber:Fi.findHostInstance});var xa=new Map;function $R(r){if(qt(Zr.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`."),xa.has(r)){var e=xa.get(r).pixiFiberContainer;Fi.updateContainer(null,e,void 0,function(){xa.delete(r)})}}function zR(r){qt(Zr.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`.");var e=xa.get(r);if(qt(!e,"createRoot should only be called once"),!e){var t=Fi.createContainer(r);e={pixiFiberContainer:t,reactRoot:{render:function(n){return Fi.updateContainer(n,t,void 0),Fi.getPublicRootInstance(t)},unmount:function(){$R(r),xa.delete(r)}}},xa.set(r,e)}return e.reactRoot}function n$(r,e,t){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),t!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),xa.has(e)?n=xa.get(e).reactRoot:n=zR(e),n.render(r)}function i$(r){$R(r)}function sd(){return sd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},sd.apply(this,arguments)}function s$(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function o$(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,LR(n.key),n)}}function Qs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Zm(r,e){return Zm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Zm(r,e)}function a$(r,e){if(e&&(jn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qs(r)}function Jm(r){return Jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jm(r)}var Jg=po.createContext(null),YR=Jg.Provider,GR=Jg.Consumer,l$=function(r){var e=po.forwardRef(function(t,n){return po.createElement(GR,null,function(i){return po.createElement(r,sd({},t,{ref:n,app:i}))})});return e.displayName="withPIXIApp(".concat(r.displayName||r.name,")"),e};function u$(r){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,n=Jm(r);if(e){var i=Jm(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return a$(this,t)}}function BP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function yp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(t),!0).forEach(function(n){Zt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):BP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var LP=function(){},WR={width:At.number,height:At.number,onMount:At.func,onUnmount:At.func,raf:At.bool,renderOnComponentChange:At.bool,children:At.node,options:At.shape({autoStart:At.bool,width:At.number,height:At.number,useContextAlpha:At.bool,backgroundAlpha:At.number,autoDensity:At.bool,antialias:At.bool,preserveDrawingBuffer:At.bool,resolution:At.number,forceCanvas:At.bool,backgroundColor:At.number,clearBeforeRender:At.bool,powerPreference:At.string,sharedTicker:At.bool,sharedLoader:At.bool,resizeTo:function(r,e){var t=r[e];t&&qt(t===window||t instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(jn(t),", expect `window` or an `HTMLElement`."))},view:function(r,e,t){var n=r[e];n&&qt(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(jn(n),", supplied to ").concat(t,", expected `<canvas> Element`"))}})},c$={width:800,height:600,onMount:LP,onUnmount:LP,raf:!0,renderOnComponentChange:!0},l_=function(r){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Zm(s,o)})(i,po.Component);var e,t,n=u$(i);function i(){var s;s$(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return Zt(Qs(s=n.call.apply(n,[this].concat(a))),"_canvas",null),Zt(Qs(s),"_mediaQuery",null),Zt(Qs(s),"_ticker",null),Zt(Qs(s),"_needsUpdate",!0),Zt(Qs(s),"app",null),Zt(Qs(s),"updateSize",function(){var u=s.props,h=u.width,c=u.height,d=u.options;d!=null&&d.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(h,c)}),Zt(Qs(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),Zt(Qs(s),"renderStage",function(){var u=s.props,h=u.renderOnComponentChange;!u.raf&&h&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(t=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,l=s.height,u=s.options,h=s.raf,c=s.renderOnComponentChange;this.app=new Rg(yp(yp({width:a,height:l,view:this._canvas},u),{},{autoDensity:(u==null?void 0:u.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[h?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Fi.createContainer(this.app.stage),Fi.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),u!=null&&u.autoDensity&&window.matchMedia&&(u==null?void 0:u.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),c&&!h&&(this._ticker=new Xt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var l,u=this.props,h=u.width,c=u.height,d=u.raf,f=u.renderOnComponentChange,g=u.options;(g==null?void 0:g.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(g==null?void 0:g.resolution)&&(this.app.renderer.resolution=g.resolution,this.resetInteractionManager()),s.height===c&&s.width===h&&((l=s.options)===null||l===void 0?void 0:l.resolution)===(g==null?void 0:g.resolution)||this.updateSize(),s.raf!==d&&this.app.ticker[d?"start":"stop"](),Fi.updateContainer(this.getChildren(),this.mountNode,this),s.width===h&&s.height===c&&s.raf===d&&s.renderOnComponentChange===f&&s.options===g||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return po.createElement(YR,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Fi.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,l=this.props.options;return l&&l.view?(qt(l.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):po.createElement("canvas",sd({},(s=this.props,o=[].concat(Eo(Object.keys(WR)),Eo(Object.keys(i_))),Object.keys(s).filter(function(u){return!o.includes(u)}).reduce(function(u,h){return yp(yp({},u),{},Zt({},h,s[h]))},{})),{ref:function(u){return a._canvas=u}}))}}])&&o$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}();l_.propTypes=WR,l_.defaultProps=c$;var h$=l_;function VR(){var r=N.useContext(Jg);return qt(r instanceof Rg,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),r}function d$(r){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=VR();qt(typeof r=="function","`useTick` needs a callback function."),qt(t instanceof Rg,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var n=N.useRef(null);N.useEffect(function(){n.current=r},[r]),N.useEffect(function(){if(e){var i=function(s){return n.current.apply(t.ticker,[s,t.ticker])};return t.ticker.add(i),function(){t.ticker&&t.ticker.remove(i)}}},[e])}function f$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function u_(r,e,t){return u_=f$()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(n,o));return s&&Zm(a,s.prototype),a},u_.apply(null,arguments)}var p$=["children","apply"];function DP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function xp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(t),!0).forEach(function(n){Zt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):DP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var m$=function(r,e){qt(jn(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var t=Object.keys(e),n=function(i){var s=i.children,o=i.apply,a=Ra(i,p$),l=N.useRef(N.useMemo(function(){return t.map(function(c){var d,f=(a==null||(d=a[c])===null||d===void 0?void 0:d.construct)||[];return u_(e[c],Eo(f))})},[t])),u=N.useMemo(function(){return t.reduce(function(c,d,f){return xp(xp({},c),{},Zt({},d,l.current[f]))},{})},[t]),h=N.useMemo(function(){return Object.keys(a).filter(UR(DR(t))).reduce(function(c,d){return xp(xp({},c),{},Zt({},d,a[d]))},{})},[a,t]);return t.forEach(function(c,d){return Object.assign(l.current[d],a[c])}),o&&function(){for(var c=arguments.length,d=new Array(c),f=0;f<c;f++)d[f]=arguments[f];return d.every(function(g){return typeof g=="function"})}(o)&&o.call(r,u),po.createElement(r,sd({},h,{filters:l.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:At.node,apply:At.func},n},g$=Cn.BitmapText,v$=Cn.Container,y$=Cn.Graphics,x$=Cn.NineSlicePlane,_$=Cn.ParticleContainer,w$=Cn.Sprite,b$=Cn.AnimatedSprite,S$=Cn.Text,T$=Cn.TilingSprite,E$=Cn.SimpleMesh,C$=Cn.SimpleRope;const P$=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:b$,AppConsumer:GR,AppContext:Jg,AppProvider:YR,BitmapText:g$,Container:v$,Graphics:y$,NineSlicePlane:x$,ParticleContainer:_$,PixiComponent:qH,PixiFiber:Fi,SimpleMesh:E$,SimpleRope:C$,Sprite:w$,Stage:h$,TYPES:Cn,Text:S$,TilingSprite:T$,applyDefaultProps:js,createRoot:zR,eventHandlers:Qm,render:n$,unmountComponentAtNode:i$,useApp:VR,useTick:d$,withFilters:m$,withPixiApp:l$},Symbol.toStringTag,{value:"Module"})),A$=yA(P$);Zg.exports=A$;var Et=Zg.exports;function qR(r,e=!0){const t=it(Ee.Obj),n=N.useRef(null);N.useEffect(()=>{n.current=r},[r]),N.useEffect(()=>{if(e){const i=s=>n.current.apply(t.turboTicker,[s,t.turboTicker]);return t.turboTicker.add(i),()=>{t.turboTicker&&t.turboTicker.remove(i)}}},[e])}function kl(r,e,t){Et.useTick(r,e&&!t),qR(r,e&&t)}function c_(r,e,t=[]){const{current:n}=N.useRef({fn:r,timer:null});return N.useEffect(function(){n.fn=r},[r]),N.useCallback(function(...s){n.timer||(n.timer=setTimeout(()=>{clearTimeout(n.timer),delete n.timer},e),n.fn(...s))},t)}function k$(r,e,t=[]){const{current:n}=N.useRef({fn:r,timer:null});return N.useEffect(function(){n.fn=r},[r]),N.useCallback(function(...s){n.timer&&clearTimeout(n.timer),n.timer=setTimeout(()=>{n.fn(...s)},e)},t)}function I$(r,e=[]){const{state:t}=N.useContext(xt),n=t.setting.orientation;return OR(r,`${n}-`)}function it(r){return N.useMemo(()=>r,[])}function KR(r,e,t,n,i=[]){const{current:s}=N.useRef({timer:null}),[o,a]=N.useState(!1);N.useEffect(()=>{n&&(s.timer=0,a(!0))},i),N.useEffect(()=>{a(n),s.timer=0},[n]),kl((l,u)=>{s.timer+=l,s.timer>t&&(e(),a(!1))},o,r)}function Co(r,e,t,n=[]){KR(!1,r,e,t,n)}function hc(r,e,t,n=[]){KR(!0,r,e,t,n)}function QR(r,e,t,n,i=[]){const{current:s}=N.useRef({time:null});N.useEffect(()=>{n&&(s.time=0)},i),N.useEffect(()=>{n&&(s.time=0)},[n]),kl((o,a)=>{s.time+=o,s.time>=e&&(s.time=0,t())},n,r)}function il(r,e,t,n=[]){QR(!1,r,e,t,n)}function eg(r,e,t,n=[]){QR(!0,r,e,t,n)}function Td(){return N.useContext(xt)}const pe=N.forwardRef(({hitFrame:r,children:e,...t},n)=>{const i=N.useMemo(()=>r?new Ye(...r):null,[]);return T.jsx(Et.Container,{hitArea:i,...t,ref:n,children:e})}),mi=({children:r})=>I$(r);function M$({children:r}){const e=N.useMemo(()=>{let i=!1;return i=Rn("debug","0")==="1",i},[]);N.useEffect(()=>{e||(window.oncontextmenu=function(i){i.preventDefault()})},[]);const t=N.useMemo(()=>[...N.Children.toArray(r),T.jsx(R$,{})],[]),n=e?N.Children.map(t,i=>N.cloneElement(i,{debug:e})):[];return T.jsxs(pe,{visible:e,children:[...n]})}function R$(){const{state:r}=Td(),{spinModel:e}=r.spin;return N.useEffect(()=>{e&&console.log("spin",e.data)},[e]),T.jsx(T.Fragment,{})}const O$=({frame:r=[0,0,100,100],color:e,radius:t,...n},i)=>{const s=N.useCallback(o=>{o.clear(),o.beginFill(e),t?o.drawRoundedRect(...r,t):o.drawRect(...r),o.endFill()},[...r,e,t]);return T.jsx(Et.Graphics,{ref:i,draw:s,...n})},Bi=N.forwardRef(O$),qi=N.forwardRef(({style:r,maxScaleLength:e,...t},n)=>{const i=N.useRef(),s=N.useMemo(()=>r instanceof Ls?r:new Ls(r),[]);return N.useEffect(()=>{if(e&&i.current){const o=setTimeout(()=>{const a=i.current.width,l=i.current.scale.x,u=e/a*l,h=l>0?1:-1,c=i.current.scale.y>0?1:-1;u<1?i.current.scale.set(u*h,u*c):i.current.scale.x!=1&&i.current.scale.set(1*h,1*c),clearTimeout(o)},1)}},[t.text,e]),N.useImperativeHandle(n,()=>i.current,[i]),T.jsx(Et.Text,{ref:i,...t,style:s})}),N$=N.forwardRef(({maxScaleLength:r,...e},t)=>{const n=N.useRef();return N.useEffect(()=>{if(r&&n.current){const i=setTimeout(()=>{const s=n.current.width,o=n.current.scale.x,a=r/s*o,l=o>0?1:-1,u=n.current.scale.y>0?1:-1;a<1?n.current.scale.set(a*l,a*u):n.current.scale.x!=1&&n.current.scale.set(1*l,1*u),clearTimeout(i)},1)}},[e.text,r]),N.useImperativeHandle(t,()=>n.current,[n]),T.jsx(Et.BitmapText,{ref:n,...e})}),_a=N.forwardRef(({text:r,...e},t)=>{const n=N.useMemo(()=>Cr(gr,r),[r]);return T.jsx(qi,{ref:t,text:n,...e})});function F$({debug:r,...e}){const[t,n]=N.useState(60);return Et.useTick(i=>{n(Math.round(1/(i/1e3)))},r),T.jsx(mi,{children:T.jsxs(pe,{...e,children:[T.jsx(Bi,{frame:[0,0,70,25]}),T.jsx(qi,{text:`${t} FPS`,style:{align:"center",fill:"#FF0000",fontSize:20}})]})})}function h_(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Hy=function(){return Math.random().toString(36).substring(7).split("").join(".")},UP={INIT:"@@redux/INIT"+Hy(),REPLACE:"@@redux/REPLACE"+Hy(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Hy()}};function B$(r){Object.keys(r).forEach(function(e){var t=r[e],n=t(void 0,{type:UP.INIT});if(typeof n>"u")throw new Error(h_(12));if(typeof t(void 0,{type:UP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(h_(13))})}function L$(r){for(var e=Object.keys(r),t={},n=0;n<e.length;n++){var i=e[n];typeof r[i]=="function"&&(t[i]=r[i])}var s=Object.keys(t),o;try{B$(t)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var h=!1,c={},d=0;d<s.length;d++){var f=s[d],g=t[f],v=l[f],x=g(v,u);if(typeof x>"u")throw u&&u.type,new Error(h_(14));c[f]=x,h=h||x!==v}return h=h||s.length!==Object.keys(l).length,h?c:l}}const D$=(r={},e)=>{const t=[].concat(r.scenes);switch(e.type){case wj:return t.push(e.value),{...r,scenes:t};case bj:return t.pop(),{...r,scenes:t};case mI:return t.pop(),t.push(e.value),{...r,scenes:t};case Sj:return{...r};case gI:return{...r,assetsLoadingProgress:e.value};default:return r}},U$={sceneManager:{scenes:["preload"],assetsLoadingProgress:0}};function qw(r){return{type:mI,value:r}}function d_(r){return{type:gI,value:r}}const f_="∞",j$=(r={},e)=>{switch(e.type){case iI:let t=r.status;return r.status=="idle"?t="spin":r.status=="stopping"&&(t="idle"),{...r,status:t};case sI:return{...r,spinModel:e.value};case oI:return{...r,loadErrorModel:e.value};case aI:return{...r,status:"stopping",spinModel:e.value};case lI:return{...r,status:"idle"};case uI:return{...r,betAmount:e.value};case cI:return{...r,betLevel:e.value};case hI:return{...r,autoSpinCount:e.value.autoSpinCount,stopAutoSpinLimit:e.value.stopAutoSpinLimit};case _j:{let n=r.autoSpinCount;return n!=f_&&--n,{...r,status:"spin",autoSpinCount:n}}case dI:return{...r,autoSpinCount:0};case fI:return{...r,speedModel:e.value};case pI:return{...r,lineBetsModel:e.value};default:return r}},X$={spin:{status:"idle",autoSpinCount:0,lineBetsModel:null,speedModel:"normal",stopAutoSpinLimit:{totalBetTimes:new nt(0),signleWin:new nt(0),balanceTo:new nt(0)}}};function jP(){return{type:iI}}function H$(r){return{type:sI,value:r}}function $$(r){return{type:oI,value:r}}function z$(r){return{type:aI,value:r}}function Kw(){return{type:lI}}function no(r){return{type:uI,value:new nt(r)}}function XP(r){return{type:cI,value:new nt(r)}}function Y$(r,e,t,n){return{type:hI,value:{autoSpinCount:r,stopAutoSpinLimit:{totalBetTimes:e==f_?f_:new nt(e),signleWin:new nt(t),balanceTo:new nt(n)}}}}function HP(){return{type:dI}}function G$(r){return{type:fI,value:r}}function W$(r){return{type:pI,value:r}}const V$=(r={},e)=>{switch(e.type){case mj:return{};case qk:const t=e.value;return{...r,loggingIn:!0,memberName:t.name,isTestAccount:t.test,balance:t.balance,currency:t.currency};case Kk:return{...r,balance:e.value.balance};default:return r}},q$={user:{loggingIn:!1,memberName:"w88",currency:"RMB",isTestAccount:!0,balance:new nt(0)}};function K$(r){return{type:qk,value:r}}function $y(r){return{type:Kk,value:{balance:new nt(r)}}}function Q$(){const r=zc("user")||V$,e=zc("setting")||Tj,t=zc("spin")||j$,n=zc("scene")||D$,i=zc("reducers");return L$({user:r,setting:e,spin:t,sceneManager:n,...i})}function _p(r,e={},t){const n=Object.assign(r[t],e[t]||{});return r[t]=n,r}function Z$(){const r=_p(q$,lu("user"),"user"),e=_p(Ej,lu("setting"),"setting"),t=_p(X$,lu("spin"),"spin"),n=_p(U$,lu("scene"),"sceneManager");return dF(r,e,t,n)}function J$(){const{state:r}=N.useContext(xt),{scenes:e}=r.sceneManager,t=e[e.length-1]=="preload";return T.jsx("div",{className:`page-mod ${t?"db":"dn"}`,children:T.jsx("div",{className:"scene-preload-mod",children:T.jsxs("div",{className:"loading-animation-default-mod",children:[T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{})]})})})}var ZR=(r=>(r[r.NotEnoughBalance=1e3]="NotEnoughBalance",r[r.UserNotFound=1001]="UserNotFound",r[r.ErrorReadGameState=1002]="ErrorReadGameState",r[r.InvalidCredit=1003]="InvalidCredit",r[r.ConcurrentSpin=1004]="ConcurrentSpin",r[r.NoGameState=1005]="NoGameState",r[r.InvalidGameState=1006]="InvalidGameState",r[r.ExpiredState=1007]="ExpiredState",r[r.InternalFailure=1008]="InternalFailure",r[r.ExternalFailure=1009]="ExternalFailure",r))(ZR||{});const ez=()=>{const{state:r,dispatch:e}=N.useContext(xt),{code:t}=r.setting.error;return N.useEffect(()=>{t&&(t==="000"||t==="001"?e(nn(t,!0,!1)):t==1e3?e(nn(t,!0,!0)):t==1005?e(nn("",!1,!0)):e(nn(t,!0,!1)))},[t]),T.jsx(T.Fragment,{})};function tz(){const r=document.getElementById("context");r.style.setProperty("opacity","1"),r.className="context-fadein";const e=document.getElementById("logo");document.body.removeChild(e)}const rz=()=>{const{state:r}=N.useContext(xt),{scenes:e}=r.sceneManager,t=e[e.length-1]=="load";return N.useMemo(()=>{t&&tz()},[t]),T.jsx(T.Fragment,{})};var p_={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var c=this||t;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||t;if(c=parseFloat(c),d.ctx||h(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,t.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var g=d._howls[f]._getSoundIds(),v=0;v<g.length;v++){var x=d._howls[f]._soundById(g[v]);x&&x._node&&(x._node.volume=x._volume*c)}return d}return d._volume},mute:function(c){var d=this||t;d.ctx||h(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,t.ctx.currentTime);for(var f=0;f<d._howls.length;f++)if(!d._howls[f]._webAudio)for(var g=d._howls[f]._getSoundIds(),v=0;v<g.length;v++){var x=d._howls[f]._soundById(g[v]);x&&x._node&&(x._node.muted=c?!0:x._muted)}return d},stop:function(){for(var c=this||t,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||t,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,h()),c},codecs:function(c){return(this||t)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||t;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var f=d.canPlayType("audio/mpeg;").replace(/^no$/,""),g=c._navigator?c._navigator.userAgent:"",v=g.match(/OPR\/(\d+)/g),x=v&&parseInt(v[0].split("/")[1],10)<33,y=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,b=g.match(/Version\/(.*?) /),_=y&&b&&parseInt(b[1],10)<15;return c._codecs={mp3:!!(!x&&(f||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!f,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||t;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(f){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,c._releaseHtml5Audio(g)}catch{c.noAudio=!0;break}for(var v=0;v<c._howls.length;v++)if(!c._howls[v]._webAudio)for(var x=c._howls[v]._getSoundIds(),y=0;y<x.length;y++){var b=c._howls[v]._soundById(x[y]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}c._autoResume();var _=c.ctx.createBufferSource();_.buffer=c._scratchBuffer,_.connect(c.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),_.onended=function(){_.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var S=0;S<c._howls.length;S++)c._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||t;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||t;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var f=0;f<c._howls[d]._sounds.length;f++)if(!c._howls[d]._sounds[f]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var g=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(g,g)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!t.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var t=new e,n=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};n.prototype={init:function(c){var d=this;return t.ctx||h(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(t.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var f=0;f<c._src.length;f++){var g,v;if(c._format&&c._format[f])g=c._format[f];else{if(v=c._src[f],typeof v!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(v),g||(g=/\.([^.]+)$/.exec(v.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&t.codecs(g)){d=c._src[f];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new i(c),c._webAudio&&o(c),c},play:function(c,d){var f=this,g=null;if(typeof c=="number")g=c,c=null;else{if(typeof c=="string"&&f._state==="loaded"&&!f._sprite[c])return null;if(typeof c>"u"&&(c="__default",!f._playLock)){for(var v=0,x=0;x<f._sounds.length;x++)f._sounds[x]._paused&&!f._sounds[x]._ended&&(v++,g=f._sounds[x]._id);v===1?c=null:g=null}}var y=g?f._soundById(g):f._inactiveSound();if(!y)return null;if(g&&!c&&(c=y._sprite||"__default"),f._state!=="loaded"){y._sprite=c,y._ended=!1;var b=y._id;return f._queue.push({event:"play",action:function(){f.play(b)}}),b}if(g&&!y._paused)return d||f._loadQueue("play"),y._id;f._webAudio&&t._autoResume();var _=Math.max(0,y._seek>0?y._seek:f._sprite[c][0]/1e3),S=Math.max(0,(f._sprite[c][0]+f._sprite[c][1])/1e3-_),I=S*1e3/Math.abs(y._rate),A=f._sprite[c][0]/1e3,k=(f._sprite[c][0]+f._sprite[c][1])/1e3;y._sprite=c,y._ended=!1;var M=function(){y._paused=!1,y._seek=_,y._start=A,y._stop=k,y._loop=!!(y._loop||f._sprite[c][2])};if(_>=k){f._ended(y);return}var O=y._node;if(f._webAudio){var L=function(){f._playLock=!1,M(),f._refreshBuffer(y);var B=y._muted||f._muted?0:y._volume;O.gain.setValueAtTime(B,t.ctx.currentTime),y._playStart=t.ctx.currentTime,typeof O.bufferSource.start>"u"?y._loop?O.bufferSource.noteGrainOn(0,_,86400):O.bufferSource.noteGrainOn(0,_,S):y._loop?O.bufferSource.start(0,_,86400):O.bufferSource.start(0,_,S),I!==1/0&&(f._endTimers[y._id]=setTimeout(f._ended.bind(f,y),I)),d||setTimeout(function(){f._emit("play",y._id),f._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?L():(f._playLock=!0,f.once("resume",L),f._clearTimer(y._id))}else{var D=function(){O.currentTime=_,O.muted=y._muted||f._muted||t._muted||O.muted,O.volume=y._volume*t.volume(),O.playbackRate=y._rate;try{var B=O.play();if(B&&typeof Promise<"u"&&(B instanceof Promise||typeof B.then=="function")?(f._playLock=!0,M(),B.then(function(){f._playLock=!1,O._unlocked=!0,d?f._loadQueue():f._emit("play",y._id)}).catch(function(){f._playLock=!1,f._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),y._ended=!0,y._paused=!0})):d||(f._playLock=!1,M(),f._emit("play",y._id)),O.playbackRate=y._rate,O.paused){f._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||y._loop?f._endTimers[y._id]=setTimeout(f._ended.bind(f,y),I):(f._endTimers[y._id]=function(){f._ended(y),O.removeEventListener("ended",f._endTimers[y._id],!1)},O.addEventListener("ended",f._endTimers[y._id],!1))}catch(X){f._emit("playerror",y._id,X)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=f._src,O.load());var j=window&&window.ejecta||!O.readyState&&t._navigator.isCocoonJS;if(O.readyState>=3||j)D();else{f._playLock=!0,f._state="loading";var F=function(){f._state="loaded",D(),O.removeEventListener(t._canPlayEvent,F,!1)};O.addEventListener(t._canPlayEvent,F,!1),f._clearTimer(y._id)}}return y._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var f=d._getSoundIds(c),g=0;g<f.length;g++){d._clearTimer(f[g]);var v=d._soundById(f[g]);if(v&&!v._paused&&(v._seek=d.seek(f[g]),v._rateSeek=0,v._paused=!0,d._stopFade(f[g]),v._node))if(d._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||d._emit("pause",v?v._id:null)}return d},stop:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"stop",action:function(){f.stop(c)}}),f;for(var g=f._getSoundIds(c),v=0;v<g.length;v++){f._clearTimer(g[v]);var x=f._soundById(g[v]);x&&(x._seek=x._start||0,x._rateSeek=0,x._paused=!0,x._ended=!0,f._stopFade(g[v]),x._node&&(f._webAudio?x._node.bufferSource&&(typeof x._node.bufferSource.stop>"u"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),f._cleanBuffer(x._node)):(!isNaN(x._node.duration)||x._node.duration===1/0)&&(x._node.currentTime=x._start||0,x._node.pause(),x._node.duration===1/0&&f._clearSound(x._node))),d||f._emit("stop",x._id))}return f},mute:function(c,d){var f=this;if(f._state!=="loaded"||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(c,d)}}),f;if(typeof d>"u")if(typeof c=="boolean")f._muted=c;else return f._muted;for(var g=f._getSoundIds(d),v=0;v<g.length;v++){var x=f._soundById(g[v]);x&&(x._muted=c,x._interval&&f._stopFade(x._id),f._webAudio&&x._node?x._node.gain.setValueAtTime(c?0:x._volume,t.ctx.currentTime):x._node&&(x._node.muted=t._muted?!0:c),f._emit("mute",x._id))}return f},volume:function(){var c=this,d=arguments,f,g;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var v=c._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):f=parseFloat(d[0])}else d.length>=2&&(f=parseFloat(d[0]),g=parseInt(d[1],10));var y;if(typeof f<"u"&&f>=0&&f<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof g>"u"&&(c._volume=f),g=c._getSoundIds(g);for(var b=0;b<g.length;b++)y=c._soundById(g[b]),y&&(y._volume=f,d[2]||c._stopFade(g[b]),c._webAudio&&y._node&&!y._muted?y._node.gain.setValueAtTime(f,t.ctx.currentTime):y._node&&!y._muted&&(y._node.volume=f*t.volume()),c._emit("volume",y._id))}else return y=g?c._soundById(g):c._sounds[0],y?y._volume:0;return c},fade:function(c,d,f,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(c,d,f,g)}}),v;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),f=parseFloat(f),v.volume(c,g);for(var x=v._getSoundIds(g),y=0;y<x.length;y++){var b=v._soundById(x[y]);if(b){if(g||v._stopFade(x[y]),v._webAudio&&!b._muted){var _=t.ctx.currentTime,S=_+f/1e3;b._volume=c,b._node.gain.setValueAtTime(c,_),b._node.gain.linearRampToValueAtTime(d,S)}v._startFadeInterval(b,c,d,f,x[y],typeof g>"u")}}return v},_startFadeInterval:function(c,d,f,g,v,x){var y=this,b=d,_=f-d,S=Math.abs(_/.01),I=Math.max(4,S>0?g/S:g),A=Date.now();c._fadeTo=f,c._interval=setInterval(function(){var k=(Date.now()-A)/g;A=Date.now(),b+=_*k,b=Math.round(b*100)/100,_<0?b=Math.max(f,b):b=Math.min(f,b),y._webAudio?c._volume=b:y.volume(b,c._id,!0),x&&(y._volume=b),(f<d&&b<=f||f>d&&b>=f)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,y.volume(f,c._id),y._emit("fade",c._id))},I)},_stopFade:function(c){var d=this,f=d._soundById(c);return f&&f._interval&&(d._webAudio&&f._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(f._interval),f._interval=null,d.volume(f._fadeTo,c),f._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,f,g,v;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")f=d[0],c._loop=f;else return v=c._soundById(parseInt(d[0],10)),v?v._loop:!1;else d.length===2&&(f=d[0],g=parseInt(d[1],10));for(var x=c._getSoundIds(g),y=0;y<x.length;y++)v=c._soundById(x[y]),v&&(v._loop=f,c._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=f,f&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,c.playing(x[y])&&(c.pause(x[y],!0),c.play(x[y],!0)))));return c},rate:function(){var c=this,d=arguments,f,g;if(d.length===0)g=c._sounds[0]._id;else if(d.length===1){var v=c._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):f=parseFloat(d[0])}else d.length===2&&(f=parseFloat(d[0]),g=parseInt(d[1],10));var y;if(typeof f=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof g>"u"&&(c._rate=f),g=c._getSoundIds(g);for(var b=0;b<g.length;b++)if(y=c._soundById(g[b]),y){c.playing(g[b])&&(y._rateSeek=c.seek(g[b]),y._playStart=c._webAudio?t.ctx.currentTime:y._playStart),y._rate=f,c._webAudio&&y._node&&y._node.bufferSource?y._node.bufferSource.playbackRate.setValueAtTime(f,t.ctx.currentTime):y._node&&(y._node.playbackRate=f);var _=c.seek(g[b]),S=(c._sprite[y._sprite][0]+c._sprite[y._sprite][1])/1e3-_,I=S*1e3/Math.abs(y._rate);(c._endTimers[g[b]]||!y._paused)&&(c._clearTimer(g[b]),c._endTimers[g[b]]=setTimeout(c._ended.bind(c,y),I)),c._emit("rate",y._id)}}else return y=c._soundById(g),y?y._rate:c._rate;return c},seek:function(){var c=this,d=arguments,f,g;if(d.length===0)c._sounds.length&&(g=c._sounds[0]._id);else if(d.length===1){var v=c._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):c._sounds.length&&(g=c._sounds[0]._id,f=parseFloat(d[0]))}else d.length===2&&(f=parseFloat(d[0]),g=parseInt(d[1],10));if(typeof g>"u")return 0;if(typeof f=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var y=c._soundById(g);if(y)if(typeof f=="number"&&f>=0){var b=c.playing(g);b&&c.pause(g,!0),y._seek=f,y._ended=!1,c._clearTimer(g),!c._webAudio&&y._node&&!isNaN(y._node.duration)&&(y._node.currentTime=f);var _=function(){b&&c.play(g,!0),c._emit("seek",g)};if(b&&!c._webAudio){var S=function(){c._playLock?setTimeout(S,0):_()};setTimeout(S,0)}else _()}else if(c._webAudio){var I=c.playing(g)?t.ctx.currentTime-y._playStart:0,A=y._rateSeek?y._rateSeek-y._seek:0;return y._seek+(A+I*Math.abs(y._rate))}else return y._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var f=d._soundById(c);return f?!f._paused:!1}for(var g=0;g<d._sounds.length;g++)if(!d._sounds[g]._paused)return!0;return!1},duration:function(c){var d=this,f=d._duration,g=d._soundById(c);return g&&(f=d._sprite[g._sprite][1]/1e3),f},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,f=0;f<d.length;f++)d[f]._paused||c.stop(d[f]._id),c._webAudio||(c._clearSound(d[f]._node),d[f]._node.removeEventListener("error",d[f]._errorFn,!1),d[f]._node.removeEventListener(t._canPlayEvent,d[f]._loadFn,!1),d[f]._node.removeEventListener("ended",d[f]._endFn,!1),t._releaseHtml5Audio(d[f]._node)),delete d[f]._node,c._clearTimer(d[f]._id);var g=t._howls.indexOf(c);g>=0&&t._howls.splice(g,1);var v=!0;for(f=0;f<t._howls.length;f++)if(t._howls[f]._src===c._src||c._src.indexOf(t._howls[f]._src)>=0){v=!1;break}return s&&v&&delete s[c._src],t.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,f,g){var v=this,x=v["_on"+c];return typeof d=="function"&&x.push(g?{id:f,fn:d,once:g}:{id:f,fn:d}),v},off:function(c,d,f){var g=this,v=g["_on"+c],x=0;if(typeof d=="number"&&(f=d,d=null),d||f)for(x=0;x<v.length;x++){var y=f===v[x].id;if(d===v[x].fn&&y||!d&&y){v.splice(x,1);break}}else if(c)g["_on"+c]=[];else{var b=Object.keys(g);for(x=0;x<b.length;x++)b[x].indexOf("_on")===0&&Array.isArray(g[b[x]])&&(g[b[x]]=[])}return g},once:function(c,d,f){var g=this;return g.on(c,d,f,1),g},_emit:function(c,d,f){for(var g=this,v=g["_on"+c],x=v.length-1;x>=0;x--)(!v[x].id||v[x].id===d||c==="load")&&(setTimeout((function(y){y.call(this,d,f)}).bind(g,v[x].fn),0),v[x].once&&g.off(c,v[x].fn,v[x].id));return g._loadQueue(c),g},_loadQueue:function(c){var d=this;if(d._queue.length>0){var f=d._queue[0];f.event===c&&(d._queue.shift(),d._loadQueue()),c||f.action()}return d},_ended:function(c){var d=this,f=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var g=!!(c._loop||d._sprite[f][2]);if(d._emit("end",c._id),!d._webAudio&&g&&d.stop(c._id,!0).play(c._id),d._webAudio&&g){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=t.ctx.currentTime;var v=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),v)}return d._webAudio&&!g&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),t._autoSuspend()),!d._webAudio&&!g&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var f=d._soundById(c);f&&f._node&&f._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,f=0;f<d._sounds.length;f++)if(c===d._sounds[f]._id)return d._sounds[f];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new i(c)},_drain:function(){var c=this,d=c._pool,f=0,g=0;if(!(c._sounds.length<d)){for(g=0;g<c._sounds.length;g++)c._sounds[g]._ended&&f++;for(g=c._sounds.length-1;g>=0;g--){if(f<=d)return;c._sounds[g]._ended&&(c._webAudio&&c._sounds[g]._node&&c._sounds[g]._node.disconnect(0),c._sounds.splice(g,1),f--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var f=[],g=0;g<d._sounds.length;g++)f.push(d._sounds[g]._id);return f}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=t.ctx.createBufferSource(),c._node.bufferSource.buffer=s[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,t.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,f=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return d;if(t._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),f))try{c.bufferSource.buffer=t._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(c){this._parent=c,this.init()};i.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,f=t._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),c._node.gain.setValueAtTime(f,t.ctx.currentTime),c._node.paused=!0,c._node.connect(t.masterGain)):t.noAudio||(c._node=t._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(t._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=f*t.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(t._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var s={},o=function(c){var d=c._src;if(s[d]){c._duration=s[d].duration,u(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var f=atob(d.split(",")[1]),g=new Uint8Array(f.length),v=0;v<f.length;++v)g[v]=f.charCodeAt(v);l(g.buffer,c)}else{var x=new XMLHttpRequest;x.open(c._xhr.method,d,!0),x.withCredentials=c._xhr.withCredentials,x.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(y){x.setRequestHeader(y,c._xhr.headers[y])}),x.onload=function(){var y=(x.status+"")[0];if(y!=="0"&&y!=="2"&&y!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+x.status+".");return}l(x.response,c)},x.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete s[d],c.load())},a(x)}},a=function(c){try{c.send()}catch{c.onerror()}},l=function(c,d){var f=function(){d._emit("loaderror",null,"Decoding audio data failed.")},g=function(v){v&&d._sounds.length>0?(s[d._src]=v,u(d,v)):f()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(c).then(g).catch(f):t.ctx.decodeAudioData(c,g,f)},u=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},h=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=d?parseInt(d[1],10):null;if(c&&f&&f<9){var g=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!g&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=n,typeof ao<"u"?(ao.HowlerGlobal=e,ao.Howler=t,ao.Howl=n,ao.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,i,s,o,a){var l=this;if(!l.ctx||!l.ctx.listener)return l;var u=l._orientation;if(n=typeof n!="number"?u[1]:n,i=typeof i!="number"?u[2]:i,s=typeof s!="number"?u[3]:s,o=typeof o!="number"?u[4]:o,a=typeof a!="number"?u[5]:a,typeof t=="number")l._orientation=[t,n,i,s,o,a],typeof l.ctx.listener.forwardX<"u"?(l.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),l.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),l.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),l.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),l.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),l.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):l.ctx.listener.setOrientation(t,n,i,s,o,a);else return u;return l},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var l=i._soundById(o[a]);if(l)if(typeof t=="number")l._stereo=t,l._pos=[t,0,0],l._node&&(l._pannerAttr.panningModel="equalpower",(!l._panner||!l._panner.pan)&&e(l,s),s==="spatial"?typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):l._panner.setPosition(t,0,0):l._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",l._id);else return l._stereo}return i},Howl.prototype.pos=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,i,s)}}),o;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")o._pos=[t,n,i];else return o._pos;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var u=o._soundById(a[l]);if(u)if(typeof t=="number")u._pos=[t,n,i],u._node&&((!u._panner||u._panner.pan)&&e(u,"spatial"),typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setPosition(t,n,i)),o._emit("pos",u._id);else return u._pos}return o},Howl.prototype.orientation=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,i,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof t=="number")o._orientation=[t,n,i];else return o._orientation;for(var a=o._getSoundIds(s),l=0;l<a.length;l++){var u=o._soundById(a[l]);if(u)if(typeof t=="number")u._orientation=[t,n,i],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),typeof u._panner.orientationX<"u"?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,i)),o._emit("orientation",u._id);else return u._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,s,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var a=t._getSoundIds(s),l=0;l<a.length;l++)if(o=t._soundById(a[l]),o){var u=o._pannerAttr;u={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:u.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:u.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:u.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:u.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:u.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:u.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:u.panningModel};var h=o._panner;h||(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"),h=o._panner),h.coneInnerAngle=u.coneInnerAngle,h.coneOuterAngle=u.coneOuterAngle,h.coneOuterGain=u.coneOuterGain,h.distanceModel=u.distanceModel,h.maxDistance=u.maxDistance,h.refDistance=u.refDistance,h.rolloffFactor=u.rolloffFactor,h.panningModel=u.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(p_);const nz="IChannelClick";class iz{constructor(){C(this,"channels",{})}exist(e,t){const n=this.channels[e];return Gr(e)&&Gr(n[t])}add(e,t,n,i=1,s=!1,o){let a=this.channels[e];Qu(a)&&(a={},this.channels[e]=a),Gr(a[t])&&console.warn(`sound "${t}" is existing in channel "${e}"`);const l={channelId:e,name:t,soundId:n,volume:i,softBgm:s,onComplete:o};return a[t]=l,l}getPlaybackBy(e){for(const t in this.channels){const n=this.channels[t];for(const i in n)if(e(n[i]))return n[i]}}getPlaybackBySoundId(e){return this.getPlaybackBy(t=>t.soundId==e)}getPlaybackBySoundName(e){return this.getPlaybackBy(t=>t.name==e)}removeBy(e){for(const t in this.channels){const n=this.channels[t];for(const i in n){const s=n[i];e(s)&&(delete n[i],hF(n)&&delete this.channels[t])}}}removeBySoundId(e){return this.removeBy(t=>t.soundId==e)}removeBySoundName(e){return this.removeBy(t=>t.name==e)}getSoundIds(e){const t=[],n=this.channels[e];for(const i in n)t.push(n[i].soundId);return t}}const Nh=class Nh{constructor(){C(this,"howlers",{});C(this,"_muted",!1);C(this,"_volume",1);C(this,"bgm");C(this,"channelManager");C(this,"_pause");this.channelManager=new iz}static get Obj(){return this._Obj||(this._Obj=new Nh),this._Obj}static clickSound(e="click"){Nh.Obj.play(nz,e,1,!1,!1)}getSoundIdBySoundName(e){const t=this.channelManager.getPlaybackBySoundName(e);if(t)return t.soundId}getChannelIdBySoundName(e){const t=this.channelManager.getPlaybackBySoundName(e);if(t)return t.channelId}play(e,t,n=1,i=!1,s,o){let a=this.channelManager.getPlaybackBySoundName(t);const l=this.getVolumn(n),u=this.getSoundPlayer(e);if(a&&a.channelId==e)u.stop(a.soundId),u.play(a.soundId),u.volume(l,a.soundId);else{const h=u.play(t);u.volume(l,h),a=this.channelManager.add(e,t,h,n,i,c=>{o&&o(c)})}i&&this.softBgm(!0)}plays(e,t,n=1,i=!1,s){const[o,...a]=t;o?this.play(e,o,n,i,!1,()=>{this.plays(e,a,n,i,s)}):s&&s(o)}playBgm(e,t,n=1,i=.3){const s=this.channelManager.getPlaybackBySoundName(t),o=this.getSoundPlayer(e),a=this.getVolumn(n);if(s&&s.channelId==e)o.playing(s.soundId)||(o.play(s.soundId),o.volume(a,s.soundId));else{this.bgm&&this.stop(this.bgm.channelId,this.bgm.name);const l=o.play(t);o.volume(a,l),this.channelManager.add(e,t,l,n),this.bgm={soundId:l,channelId:e,name:t,soft:i}}}isReady(e){return Gr(this.howlers[e])}getSoundPlayer(e){if(!this.isReady(e)){const t=cH(IR);if(Gr(t)){t.onend=i=>{if(!(this.bgm&&i==this.bgm.soundId)){const s=this.channelManager.getPlaybackBySoundId(i);s&&s.name.indexOf("bgm")==-1&&(s&&(s.softBgm&&this.softBgm(!1),s.onComplete&&s.onComplete(s.name)),this.channelManager.removeBySoundId(i))}};const n=new p_.Howl(t);this.howlers[e]=n}}return this.howlers[e]}pauses(e){if(this._pause!=e){for(const t in this.howlers)if(e)this.howlers[t].pause();else{const n=this.channelManager.getSoundIds(t),i=this.howlers[t];for(const s of n)!i.playing(s)&&i.play(s)}this._pause=e}}pause(e,t){const n=this.getSoundIdBySoundName(t);n&&this.getSoundPlayer(e).pause(n)}stop(e,t){const n=this.getSoundIdBySoundName(t);n&&(this.channelManager.removeBySoundId(n),this.getSoundPlayer(e).stop(n))}stops(e,t){t.forEach(n=>this.stop(e,n))}softBgm(e){if(this.bgm){const t=this.channelManager.getPlaybackBySoundName(this.bgm.name);if(t){const n=this.getVolumn(e?this.bgm.soft:1,t.volume);this.getSoundPlayer(this.bgm.channelId).volume(n,t.soundId)}}}getVolumn(...e){return e.reduce((n,i)=>n*i,this._volume)}setVolumn(e,t,n){this.howlers[e]&&this.howlers[e].volume(n)}get volume(){return this._volume}set volume(e){if(this._volume!=e){this._volume=e;for(const t in this.channelManager.channels){const n=this.channelManager.channels[t],i=this.getSoundPlayer(t);for(const s in n){const o=n[s];i.volume(o.volume*e,o.soundId)}}}}get muted(){return this._muted}set muted(e){this._muted=e,p_.Howler.mute(e)}setRate(e=1){for(const t in this.howlers)this.howlers[t].rate(e)}};C(Nh,"_Obj");let Ki=Nh;const sz=document.querySelector("html"),$n="resize";function oz(r,e=1.5){return 2}const az=()=>{const r=Et.useApp(),{current:e}=N.useRef({clientSize:[0,0],renderFrame:[0,0,0,0]}),{state:t,dispatch:n}=N.useContext(xt),i=Ee.Obj,[s,o]=N.useMemo(()=>[Ee.Obj.isLandscapeOnly,Ee.Obj.isPortraitOnly],[]),a=N.useMemo(()=>document.getElementById("App"),[]),[l,u]=N.useMemo(()=>typeof document.hidden<"u"?["hidden","visibilitychange"]:typeof document.msHidden<"u"?["msHidden","msvisibilitychange"]:typeof document.webkitHidden<"u"?["webkitHidden","webkitvisibilitychange"]:(console.error("visibilitychange events not supported"),["hidden","visibilitychange"]),[]);function h(f){f?(Ki.Obj.pauses(!0),r.ticker.started&&r.ticker.stop(),Ee.Obj.turboTicker.started&&Ee.Obj.turboTicker.stop()):(Ki.Obj.pauses(!1),!r.ticker.started&&r.ticker.start(),!Ee.Obj.turboTicker.started&&Ee.Obj.turboTicker.start())}const c=()=>{Ee.Obj.updateOrientation();const f=i.orientation;let{safeArea:g}=i.layoutOptions;const{displayArea:v}=i.layoutOptions,[x,y,b,_]=v,S=_/b;g=g||[0,0,b,_];const[I,A,k,M]=g,O=M/k,L=document.documentElement.clientWidth,D=document.documentElement.clientHeight,j=D/L;let F,B,X,V;f=="l"?j<=O?(B=D*(_/M),F=B/S,B=Math.min(_,B),F=Math.min(b,F),V=D,X=F):(L<=k?F=L*(b/k):L<=b?F=b:F=L,B=F*S,B=Math.min(_,B),F=Math.min(b,F),V=B,X=L):j>=O?(F=L*(b/k),B=F*S,B=Math.min(_,B),F=Math.min(b,F),X=L,V=B):(D<=M?B=D*(_/M):D<=_?B=_:B=D,F=B/S,B=Math.min(_,B),F=Math.min(b,F),X=F,V=D);const Q=F/b,H=(L-F)/2,G=(D-B)/2,$=Math.round(Math.min(H,0)),W=Math.round(Math.min(G,0)),{clientWidth:Z,clientHeight:se}=document.documentElement;if(e.renderFrame[0]!=$||e.renderFrame[1]!=W||e.renderFrame[2]!=F||e.renderFrame[3]!=B||e.clientSize[0]!=Z||e.clientSize[1]!=se){e.renderFrame=[$,W,F,B],e.clientSize=[Z,se],r.stage.scale.set(Q),r.renderer.resolution=oz(Q,t.setting.maxResolution),r.renderer.resize(F,B);const ae=Math.max(W/Q,y-A)*Q,ye=Math.max($/Q,-(I-x))*Q;r.view.style.top=`${ae}px`,r.view.style.left=`${ye}px`;const Oe=Math.ceil(Math.min(L,X,F)),Be=Math.round(Math.min(D,V,B)),ze=Math.round(Math.max(0,G)),Ve=Math.round(Math.max(0,H));a.style.width=`${Oe}px`,a.style.height=`${Be}px`,a.style.top=`${ze}px`,a.style.left=`${Ve}px`;let $e=0;f=="l"?$e=Math.max(12,20*(document.documentElement.clientWidth-Ve*2)/960):$e=Math.max(12,20*(document.documentElement.clientWidth-Ve*2)/540),sz.style.fontSize=`${$e}px`,t.setting.orientation!=f&&n(Cj(f)),Ee.Obj.updateViewport($/Q,W/Q,Math.round(Oe/Q),Math.round(Be/Q)),i.notice.emit($n)}};function d(){h(!!document[l])}return N.useEffect(()=>(document.addEventListener(u,d),()=>{document.removeEventListener(u,d)}),[]),N.useEffect(()=>{function f(g){const v=Math.abs(Math.sin(g/180*Math.PI))==1;if(s){const x=document.getElementById("screen-only-tips-l");v?(x.style.display="none",h(!1)):(x.style.display="block",h(!0))}else if(o){const x=document.getElementById("screen-only-tips-p");v?(x.style.display="block",h(!0)):(x.style.display="none",h(!1))}}ai.any&&(window.screen.orientation?(window.screen.orientation.addEventListener("change",g=>{const v=g.target.angle;f(v)}),f(window.screen.orientation.angle)):(window.addEventListener("orientationchange",g=>{const v=g.target.screen.orientation.angle;f(v)}),f(window.orientation||0)))},[]),Et.useTick((f,g)=>{(window.scrollX!=0||window.scrollY!=0)&&window.scrollTo(0,0),c()},!0),T.jsx(T.Fragment,{})},lz=()=>{const{state:r}=N.useContext(xt),{soundOn:e,volume:t}=r.setting;return N.useEffect(()=>{Ki.Obj.muted=!e},[e]),N.useEffect(()=>{},[t]),T.jsx(T.Fragment,{})},uz=({children:r,Context:e,render:t})=>T.jsx(e.Consumer,{children:n=>t(T.jsxs(e.Provider,{value:n,children:[T.jsx(Ij,{}),T.jsx(fz,{}),T.jsx(az,{}),T.jsx(lz,{}),T.jsx(rz,{}),T.jsx(ez,{}),r]}))}),cz=Q$(),hz=Z$(),dz=({children:r,antialias:e=!0,...t})=>{const[n,i]=N.useReducer(cz,hz),[s,...o]=N.Children.map(r,a=>a);return T.jsxs(xt.Provider,{value:{state:n,dispatch:i},children:[T.jsx(uz,{Context:xt,render:a=>T.jsx(Et.Stage,{options:{backgroundColor:1118481,backgroundAlpha:0,resolution:1,antialias:e,autoDensity:!0},...t,children:a}),children:s}),T.jsx(J$,{}),T.jsx(xt.Consumer,{children:({state:a})=>a.sceneManager.scenes[0]=="preload"?T.jsx(T.Fragment,{}):o})]})},JR=60,$P=Number((1e3/JR).toFixed(2));function fz(){const r=Et.useApp(),e=Ee.Obj,{state:t}=Td(),{speedModel:n}=t.spin;N.useMemo(()=>{r.ticker.maxFPS=r.ticker.minFPS=JR,r.ticker.speed=$P,e.turboTicker.start()},[]);const i=N.useMemo(()=>n=="fast"?2:1,[n]);return N.useMemo(()=>{e.turboTicker.speed=i*$P},[n]),Et.useTick((s,o)=>{lj(e.getTime(!1)),e.deltaTime(s)},!0),qR((s,o)=>{e.turboTweenGroup.update(e.getTime(!0)),e.deltaTurboTime(s)},!0),T.jsx(T.Fragment,{})}const pz=({children:r})=>{const{state:e}=N.useContext(xt),{scenes:t}=e.sceneManager;return N.useMemo(()=>{const i=[];return N.Children.forEach(r,s=>{t.indexOf(s.props.id)!=-1&&i.push(s)}),i},[t])};function mz({...r}){const e=N.useRef(null),{state:t}=Td(),{scenes:n}=t.sceneManager,[i,s]=N.useState(""),o=Ee.Obj,a=N.useMemo(()=>{let u=!1;return u=Rn("hideServerTime","0")==="1",u},[]),[l]=N.useMemo(()=>[xd(n)=="main"],n);return N.useEffect(()=>{if(e.current){let u=function(){if(o.viewport){const[h,c,d]=o.viewport;e.current.x=-h+d-5,e.current.y=-c+5}};return u(),o.notice.on($n,u),()=>{o.notice.off($n,u)}}},[e]),il(1e3,()=>{s(Nj(8,!1,o.getServerTimeMillisecondNow()))},l),T.jsx(qi,{visible:l&&!a,ref:e,text:`${i}`,anchor:[1,0],style:{fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2},...r})}function gz({...r}){const e=N.useRef(null),{state:t}=Td(),{scenes:n}=t.sceneManager,i=Ee.Obj,[s]=N.useMemo(()=>{const o=xd(n);return[o=="premain"||o=="load"]},n);return N.useEffect(()=>{if(e.current){let o=function(){if(i.viewport){const[a,l,u,h]=i.viewport;e.current.x=-a+u-5,e.current.y=-l+h-5}};return o(),i.notice.on($n,o),()=>{i.notice.off($n,o)}}},[e]),T.jsx(qi,{visible:s,ref:e,text:`v${i.configOptions.version}`,anchor:[1,1],style:{fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2},...r})}function Pe({children:r,tmp:e,replaceMap:t={},tcase:n="default",...i}){const s=N.useMemo(()=>{let o=e?N.Children.map(e,a=>Cr(gr,a)).reduce((a,l)=>a+l,""):Cr(gr,r);for(const a in t)o=o.replace(a,t[a]);return n=="upper"?o=o.toUpperCase():n=="lower"&&(o=o.toLowerCase()),o},[e,r]);return T.jsx("div",{...i,children:s})}const vz=()=>{const r=N.useRef(null),e=N.useRef(null),{state:t,dispatch:n}=N.useContext(xt),{code:i,show:s,allowClose:o}=t.setting.error;function a(){o?n(nn("",!1,!0)):window.location.reload()}const l=N.useMemo(()=>Cr(gr,"err_000"),[]),u=N.useMemo(()=>{const c=`err_${i}`,d=Cr(gr,c);return c==d?l:d},[i]);function h(){if(e.current){const c=r.current.clientHeight,d=e.current.clientHeight;e.current.style.marginTop=`${(c-d)*.4}px`}}return N.useEffect(()=>{const c=Ee.Obj;return c.notice.on($n,h),()=>{c.notice.off($n,h)}},[]),N.useEffect(()=>{s&&h()},[s]),T.jsx("div",{ref:r,className:`page-mod ${s?"db":"dn"}`,children:T.jsxs("div",{ref:e,className:`error-mod ${t.setting.orientation}`,children:[T.jsxs("div",{className:"top",children:[T.jsx("div",{className:"dib info-icon"}),T.jsx("div",{className:"title",children:i})]}),T.jsxs("div",{className:"bottom",children:[T.jsx(Pe,{className:"detail",children:u}),T.jsx(Pe,{className:"ok btn-mod dib",onClick:a,children:o?"ok":"refresh"})]}),T.jsx("div",{className:"close"})]})})},Gi=N.forwardRef(({turbo:r=!1,dep:e=[],children:t,id:n,from:i={},to:s={},playing:o=!1,duration:a,yoyo:l,repeat:u,repeatDelay:h,delay:c=0,easing:d=b=>b,onStart:f,onComplete:g,onRepeat:v,onUpdate:x},y)=>{var A,k;const[b,_]=N.useState(!1),{current:S}=N.useRef({tween:null});function I(){var M;(M=S.tween)==null||M.stop(),S.tween=null}return N.useMemo(()=>{if(I(),o){const M=Ee.Obj;S.tween=new ew({...i}).group(r?M.turboTweenGroup:void 0).to({...s},a).repeat(u).repeatDelay(h).delay(c).yoyo(l).start(M.getTime(r))}},[o,...e]),N.useMemo(()=>{var M;(M=S.tween)==null||M.repeat(u)},[u]),N.useMemo(()=>{var M;(M=S.tween)==null||M.delay(c)},[c]),(A=S.tween)==null||A.easing(d).onStart(f).onUpdate((M,O)=>{x&&x(M,O),_(!b)}).onRepeat(v).onComplete(g),N.useImperativeHandle(y,()=>({get repeated(){return S.tween._initialRepeat-S.tween._repeat},get repeat(){return S.tween._repeat}})),N.useEffect(()=>{},[]),t(S.tween?S.tween._object:i,((k=S.tween)==null?void 0:k.isPlaying())||!1)}),Qw="IchannelDefault",lo=Ki.Obj;function gn(r){const{dep:e=[],channelId:t=Qw,sound:n,sounds:i=[],volum:s=1,playing:o=!0,allowStop:a=!0,softBgm:l,loop:u=!1,onSoundEnd:h}=r;return N.useEffect(()=>{n&&(o?lo.play(t,n,s,l,u,h):a&&lo.stop(t,n))},[n,o,...e]),N.useEffect(()=>{i.length>0&&(o?lo.plays(t,i,s,l,h):a&&lo.stops(t,i))},[i,o,...e]),N.useEffect(()=>{lo.setVolumn(t,n,s)},[s]),T.jsx(T.Fragment,{})}function yz(r){const{dep:e=[],channelId:t="channelBgm",sound:n="bgm",volum:i=1,playing:s=!0,soft:o=.3}=r;return N.useEffect(()=>{if(s)return lo.playBgm(t,n,i,o),()=>{lo.pause(t,n)};lo.pause(t,n)},[n,s,...e]),N.useEffect(()=>{lo.setVolumn(t,n,i)},[i]),T.jsx(T.Fragment,{})}function eO(r,e="click"){function t(n){const i={};return i[e]=n,i}return N.forwardRef(({channelId:n=Qw,sound:i,volum:s=1,softBgm:o,onSoundEnd:a,...l},u)=>{const h=l[e];function c(d){Ki.clickSound(),h&&h(d)}return T.jsx(r,{...l,ref:u,...t(c)})})}function tO({volumn:r=1,playing:e,fadeInTime:t=0,fadeOutTime:n=0,children:i}){const[s,o]=N.useState(!1),[a,l]=N.useState(!1),[u,h]=N.useState(!1);return N.useEffect(()=>{e?(o(!0),h(!0),l(!1)):s&&(h(!1),l(!0))},[e]),Co(()=>{o(!1),l(!1),h(!1)},n,!e&&s),T.jsx(Gi,{dep:[u,a],from:{k:0},to:{k:1},playing:u||a,duration:a?n:t,children:({k:c})=>(c=u?c:1-c,c*=r,N.cloneElement(i,{volum:c,playing:s}))})}const xz=Ki.Obj,Bn=({children:r,onClick:e,channelId:t=Qw,sound:n="click",volum:i=1,playing:s,softBgm:o=!0,soft:a,...l})=>{function u(h){e(h),xz.play(t,n,i,o,!1)}return T.jsx("div",{...l,onClick:e?u:null,children:r})};function rO(r){return({children:e,on:t,style:n,duration:i=250,...s})=>{const[o,a]=N.useState(!1),[l,u]=N.useState(!1);N.useEffect(()=>{t&&a(!0)},[t]);function h(){u(!1),t||a(!1)}function c(){u(!0)}return T.jsxs("div",{className:`page-mod ${o?"db":"dn"}`,style:{overflow:"hidden"},children:[T.jsx(Gi,{dep:[t],from:{k:0},to:{k:100},duration:i,playing:!0,onComplete:h,onStart:c,children:({k:d})=>{const f=t?100-d:d;return T.jsx(Bn,{className:`page-mod ${o?"db":"dn"}`,style:{...r(f),...n},...s,children:e})}}),T.jsx("div",{className:`page-mod ${l?"db":"dn"}`})]})}}const Zw=rO(r=>({top:`${r}%`})),_z=rO(r=>({left:`${r}%`}));function wz({cls:r="menu-mod",style:e,...t}){const{state:n,dispatch:i}=N.useContext(xt),{menuOn:s,soundOn:o}=n.setting,[a,l]=N.useState(!1),{fundsUrl:u,livechatUrl:h,lang:c,funPLay:d}=Ee.Obj.urlOptions;function f(I){a&&i(yI(!1)),I&&I.stopPropagation()}function g(I){a&&(f(),i(xI(!0)))}function v(I){a&&i(vI(!o))}function x(){a&&window.open(u,"_self")}function y(){a&&(f(),i(_I(!0)))}function b(){a&&window.open(u,"fund")}function _(){a&&window.open(h,"LiveChat")}N.useEffect(()=>{s?setTimeout(()=>{l(!0)},300):l(!1)},[s]);const S=it(Ee.Obj.filterImageFormat(["avif","webp","png"]));return T.jsx(Zw,{on:s,onClick:f,duration:300,children:T.jsx("div",{className:`${r}`,style:e,onClick:I=>I.stopPropagation(),children:T.jsxs("div",{className:"list",children:[T.jsxs("div",{className:`cell ${d?"fun-play":""}`,children:[T.jsxs(Bn,{className:"item w-33 btn-mod btn-mod-active",onClick:g,children:[T.jsx("div",{className:`icon-mod icon paytable ${S}`}),T.jsx(Pe,{className:`title ${c}`,children:"paytable"})]}),T.jsxs(Bn,{className:"item w-33 btn-mod btn-mod-active",onClick:v,children:[T.jsx("div",{className:`icon-mod icon ${o?"sound-on":"sound-off"} ${S}`}),T.jsx(Pe,{className:"title",children:"sound"})]}),T.jsxs(Bn,{className:"item w-33 btn-mod btn-mod-active",onClick:x,children:[T.jsx("div",{className:`icon-mod icon lobby ${S}`}),T.jsx(Pe,{className:"title",children:"lobby"})]})]}),T.jsxs("div",{className:`cell ${d?"hidden":"visible"}`,children:[T.jsxs(Bn,{className:"item w-33 btn-mod btn-mod-active",onClick:y,children:[T.jsx("div",{className:`icon-mod icon history ${S}`}),T.jsx(Pe,{className:"title",children:"bethistory"})]}),T.jsxs(Bn,{className:"item w-33 btn-mod btn-mod-active",onClick:b,children:[T.jsx("div",{className:`icon-mod icon transfer ${S}`}),T.jsx(Pe,{className:"title",children:"transfer"})]}),T.jsxs(Bn,{className:"item w-33 btn-mod btn-mod-active",onClick:_,children:[T.jsx("div",{className:`icon-mod icon chat ${S}`}),T.jsx(Pe,{className:"title",children:"customservice"})]})]})]})})})}const bz="ISoundOn_",Sz="IBetAmount_",Tz="IBetLevel_";function Ez({children:r}){const{state:e,dispatch:t}=Td(),{soundOn:n}=e.setting,{betAmount:i,betLevel:s,spinModel:o,lineBetsModel:a,status:l}=e.spin,{scenes:u}=e.sceneManager,[h,c,d]=N.useMemo(()=>{const{id:f}=Ee.Obj.configOptions;return[bz,Sz,Tz].map(g=>g+f)},[]);return N.useEffect(()=>{Gr(n)&&localStorage.setItem(h,n?"1":"0")},[n]),N.useEffect(()=>{if(l=="spin"&&a&&Gr(i)){const f=i.toNumber();localStorage.setItem(c,`${a.lineBets.map(g=>Number(g)).indexOf(f)}`)}},[l]),N.useEffect(()=>{Gr(s)&&localStorage.setItem(d,`${s}`)},[s]),N.useEffect(()=>{if(xd(u)=="premain"){const g=localStorage.getItem(h)!="0",v=Number(localStorage.getItem(c)),x=localStorage.getItem(d);if(t(vI(g)),o){const y=o.lineBet,b=o.credit,_=o.betLevel;y&&!y.isZero()?t(no(y)):b&&!b.isZero()?t(no(b)):a&&(Gr(v)?t(no(a.lineBets[v]||a.lineBets[0])):t(no(a.lineBets[0]))),Gr(_)&&_!=0&&t(XP(_))}else a&&(Gr(v)?t(no(a.lineBets[v]||a.lineBets[0])):t(no(a.lineBets[0]))),Gr(x)&&t(XP(x))}},[u]),T.jsx(T.Fragment,{children:N.Children.map(r,f=>f)})}const Rh=yg(),Cz=({children:r})=>{const{state:e,dispatch:t}=N.useContext(xt),[n,i]=N.useState(!1),{loggingIn:s}=e.user,[o,a]=N.useState(null),{current:l}=N.useRef({httpDoneCount:0}),[u,h]=N.useState(!1);N.useEffect(()=>{n?!s&&!o&&Rh.player().then(d=>{d.code?(d.code==500||d.code==404||d.code==401)&&Rh.authAndCanReTry()&&(t(nn("")),i(!1)):a(d)}):Rh.auth().then(d=>{i(!0)})},[n]),N.useEffect(()=>{N.Children.count(r)==l.httpDoneCount&&o&&!o.code&&(Ee.Obj.setServerTime(o.st),t(K$(o)))},[o,l.httpDoneCount]);function c(){l.httpDoneCount++,h(!u)}return T.jsx(T.Fragment,{children:N.Children.map(r,d=>N.cloneElement(d,{on:n&&!!o&&!o.code,onComplete:c}))})};function Pz({on:r,onComplete:e}){const{dispatch:t}=N.useContext(xt);N.useEffect(()=>{r&&Rh.load().then(n=>{n.code?t($$(n)):t(H$(n)),e(n)})},[r])}function Az({on:r,onComplete:e}){const{dispatch:t}=N.useContext(xt);N.useEffect(()=>{r&&Rh.lineBets().then(n=>{n.code||(t(W$(n)),e(n))})},[r])}function kz(){const{state:r,dispatch:e}=N.useContext(xt),{status:t,betAmount:n}=r.spin;return N.useEffect(()=>{const i=yg();t=="spin"&&i.spin(n.toNumber()).then(s=>{s.code?e(Kw()):e(z$(s))}).catch(()=>{})},[t]),T.jsx(T.Fragment,{})}function Iz({children:r,progress:e,onComplete:t,...n}){const{current:i}=N.useRef({percent:0,oldPercent:0});return N.useMemo(()=>{i.oldPercent=i.percent},[e]),T.jsx(pe,{...n,children:T.jsx(Gi,{dep:[e],from:{k:0},to:{k:1},playing:!0,duration:500,onComplete:()=>{t&&t(e)},children:({k:s})=>{const o=i.oldPercent+(e-i.oldPercent)*s;return i.percent=o,r(o)}})})}const e0=r=>{const{children:e,...t}=r,{l:n,p:i}=Ee.Obj.configOptions.layoutMap,s=N.useMemo(()=>!!(n&&i),[]),[o,a,l,u]=N.useMemo(()=>{if(s)return[-n.displayArea[0],-n.displayArea[1],-i.displayArea[0],-i.displayArea[1]];{const h=n??i;return[-h.displayArea[0],-h.displayArea[1],0,0]}},[]);return T.jsx(pe,{...t,children:s?T.jsx(mi,{children:T.jsx(pe,{"l-x":o,"l-y":a,"p-x":l,"p-y":u,children:e})}):T.jsx(pe,{x:o,y:a,children:e})})},Mz=({assets:r,next:e,...t})=>{const n=Ee.Obj.configOptions.assetVersion,{dispatch:i}=N.useContext(xt),{current:s}=N.useRef({loaded:!1,loggingIn:!1});return N.useEffect(()=>(i(d_(0)),RR(r,n,o=>{i(d_(Math.floor(o*100)))}).then(()=>{s.loaded=!0,i(qw(e))}),()=>{const o=Cr(gr,"gametitle");document.title=o}),[]),T.jsx(e0,{...t})},Rz=({children:r,assets:e,next:t,...n})=>{const i=Ee.Obj.configOptions.assetVersion,{state:s,dispatch:o}=N.useContext(xt),{current:a}=N.useRef({loaded:!1,loggingIn:!1}),{loggingIn:l}=s.user,[u,h]=N.useState(0),[c,d]=N.useState(0);function f(){a.loggingIn&&a.loaded&&t&&o(qw(t))}function g(b){u==100&&(a.loaded=!0,f())}N.useEffect(()=>{l&&(a.loggingIn=!0),f()},[l]);const[v,x]=N.useMemo(()=>[Cr(gr,"loggingin"),Cr(gr,"loading")],[]),y=N.useMemo(()=>u==100?[`${v}.`,`${v}..`,`${v}...`][c]:[`${x}.`,`${x}..`,`${x}...`][c],[c,u]);return N.useEffect(()=>{o(d_(0)),RR(e,i,b=>{h(Math.floor(b*100))})},[]),il(400,()=>{d((c+1)%3)},!0),T.jsx(e0,{...n,children:T.jsx(Iz,{progress:u,onComplete:g,children:b=>r(b,y)})})};function t0({children:r,active:e=!0,...t}){const[n,i]=N.useState(!1),s=N.useRef(null);return N.useEffect(()=>{i(!n)},[]),T.jsxs(pe,{...t,children:[N.cloneElement(r[0],{mask:e?s.current:null}),N.cloneElement(r[1],{ref:s,visible:e})]})}function Jw(r){return N.forwardRef(({res:e=r,name:t,...n},i)=>{const s=N.useMemo(()=>Vw(e,t),[t]);return T.jsx(Et.Sprite,{ref:i,texture:s,...n})})}const ht=Jw(Qg),Go=Jw(MR),Li=Jw(kR),eb=N.forwardRef(({name:r,...e},t)=>{const n=N.useMemo(()=>lH(r),[r]);return T.jsx(Et.Sprite,{ref:t,texture:n,...e})}),tb="preview_Bg_L";function Oz(r){return nH(r,[{id:tb,src:"compress/bg-preview@2x.[avif,webp,jpg]"},{id:nm,src:"compress/preload@2x.[avif,webp,png].json"}])}const nO="spine_all_skel",iO="spine_all_atlas",sO="spine_spin_skel",oO="spine_spin_atlas",Ed="goldFont@1x",Cd="sheet_collapse@";function Nz(r){return sH(r,[{id:AR,src:"compress/bg-game@2x.[avif,webp,jpg]"},{id:iO,src:"compress/atlas/all/@1x/carnivalingamesmall@1x.[avif,webp,png].atlas"},{id:nO,src:"compress/atlas/all/carnivalingamesmall.skel"},{id:Ed,src:"font/goldFont@1x.xml"},{id:Cd,src:"compress/CollapseFx@2x.[avif,webp,png].json"},{id:sO,src:"compress/atlas/autospin/SpinButton.skel"},{id:oO,src:"compress/atlas/autospin/@1x/SpinButton@1x.[avif,webp,png].atlas"},{id:MR,src:"uncompress/components@2x.[avif,webp,png].json"}])}const Fz=({...r})=>{const e=N.useMemo(()=>Nz(Ee.Obj.urlOptions.lang),[]);return T.jsx(Rz,{assets:e,...r,children:(t,n)=>{const i=-450+450*(t/100);return T.jsxs(mi,{children:[T.jsx(eb,{name:tb}),T.jsxs(pe,{"l-x":345,"l-y":820,"p-x":340,"p-y":820,children:[T.jsx(ht,{res:nm,name:"LoadConatiner.png"}),T.jsxs(t0,{x:8,y:5,children:[T.jsx(ht,{res:nm,name:"LoadMeter.png"}),T.jsx(ht,{x:i,res:nm,name:"LoadMetermask.png"})]}),T.jsx(qi,{x:246,y:15,text:`${n}`,anchor:.5,style:{align:"center",fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})]})}})};function Bz({children:r,...e}){return r(e)}const Lz=({dataSource:r,children:e})=>{const{gameStatus:t,nextGameStatus:n}=r.base,[i,s]=N.useMemo(()=>t.startsWith("pause_")?[!0,Number(t.split("_")[1])]:[!1,0],[t]);return Co(()=>{n()},s,i),N.cloneElement(e,{dataSource:r})};var je=(r=>(r.show5OfAKind="show5OfAKind",r.showBigWinAmount="showBigWin",r.showWinAmount="showWin",r.showWinLine="showWinLine",r.collapsing="collapsing",r.showFSCount="showFSCount",r.intoFS="intoFS",r.outFS="outFS",r.showFSResult="showFSResult",r.reSpinStoping="reSpinStoping",r.reSpin="reSpin",r))(je||{});const Dz=({dataSource:r,children:e})=>{const{state:t,dispatch:n}=N.useContext(xt),{status:i,spinModel:s}=t.spin,[o,a]=N.useState(!1),{current:l}=N.useRef({status:"idle",statusOrder:[],inFreeSpin:!1,fsWinAmount:Gp,fsCount:0,winAmount:Gp});function u(f,g=!0){l.status!=f&&(l.status==je.showFSCount?(l.inFreeSpin=!0,l.fsWinAmount=Gp,l.fsCount=s.fs):l.status==je.showFSResult?l.inFreeSpin=!1:f=="spin"&&s&&!s.existWin&&(l.winAmount=new nt(0)),f==je.showWinLine&&(l.fsCount=s.fs),l.status=f,g&&a(!o))}function h(){const f=l.statusOrder.shift();f&&u(f,!0)}function c(){h()}N.useMemo(()=>{let f;if(i=="spin")s&&s.totalLines.length>0?f=je.reSpin:f="spin",l.inFreeSpin&&!s.existWin&&(l.fsCount=Math.max(l.fsCount-1,0));else if(i=="stopping")l.status=="spin"?f="stopping":f=je.reSpinStoping,l.inFreeSpin&&(l.fsWinAmount=l.fsWinAmount.add(s.payout));else if(i=="idle")if(l.status=="stopping"||l.status==je.reSpinStoping){const g=t.spin.spinModel;l.statusOrder=[],l.statusOrder.push("pause_300"),g.existWin?(l.winAmount=l.winAmount.add(g.payout),g.exist5OfAKind&&l.statusOrder.push(je.show5OfAKind),l.statusOrder.push(je.showWinLine,je.collapsing)):(g.getWinType(l.winAmount)=="big"?l.statusOrder.push(je.showBigWinAmount):l.winAmount.gt(0)&&l.statusOrder.push(je.showWinAmount),!l.inFreeSpin&&g.fs>0&&l.statusOrder.push(je.showFSCount,"pause_500"),l.inFreeSpin&&g.fs==0&&l.statusOrder.push(je.showFSResult)),l.statusOrder.push("idle"),f=l.statusOrder.shift()}else f="idle";u(f,!1)},[i]),N.useMemo(()=>{s&&(l.fsCount=s.fs,s.mg==!1?(s.existWin&&(l.status="pause_500",l.statusOrder=[je.collapsing,"idle"]),s.fs==0&&!s.existWin||(l.inFreeSpin=!0)):s.existWin?(l.status="pause_500",l.statusOrder=[je.collapsing,"idle"]):s.fs>0&&(l.status="pause_500",l.statusOrder=[je.showFSCount,"idle"]),l.winAmount=s.lm.mul(s.lineBet))},[]);const d={base:{state:t,dispatch:n,onSkip:c,nextGameStatus:h,gameStatus:l.status},fs:{inFreeSpin:l.inFreeSpin,fsWinAmount:l.fsWinAmount.toNumber(),fsCount:l.fsCount},winAmount:l.winAmount,...r};return N.cloneElement(e,{dataSource:d})},Uz=({dataSource:r,children:e})=>{const{gameStatus:t,state:n,nextGameStatus:i}=r==null?void 0:r.base,{spinModel:s}=n.spin,{current:o}=N.useRef({winlineIndex:0}),[a,l]=N.useState(!1),u=t==je.showWinLine,h=u;function c(I){const A={};for(const k of I)for(const[M,O]of k.positions){let L=A[M];L||(L={},A[M]=L);const D=s.isWildPosition(M,O),j={id:k.lineId,selected:D?9:k.s,x:M,y:O,delay:0};L[O]=j}return A}const d=N.useMemo(()=>{let I={};return h&&(I=c(s.winlines)),I},[h]),f=N.useMemo(()=>{let I={};return h&&(I=c(s.gemslines)),I},[h]),g=N.useMemo(()=>{let I={};return h&&(I=c(s.bonuslines)),I},[h]),v=N.useMemo(()=>{if(h){const I={};let A=0;for(let k=0;k<5;k++)(d[k]||f[k]||g[k])&&(I[k]=A++*200);return I}return{}},[h]);N.useMemo(()=>{u&&(o.winlineIndex=0)},[u]);function x(I,A,k){const M=I[A];return M?M[k]:null}eg(2e3,()=>{o.winlineIndex++,o.winlineIndex==s.totalLines.length?i():l(!a)},u);const y=N.useMemo(()=>{if(u)return s.totalLines[o.winlineIndex]},[u,o.winlineIndex]),b=N.useMemo(()=>u?Gr(y==null?void 0:y.lineId)?[y.lineId]:[]:[],[u,o.winlineIndex]);function _(I,A){if(h){let k;return u?y.positions.findIndex(([M,O])=>M==I&&O==A)>-1&&(k=x(d,I,A)||x(f,I,A)||x(g,I,A)):k=x(d,I,A)||x(f,I,A)||x(g,I,A),k?{...k,delay:v[I]||0}:void 0}}const S={showWinAmount:{lineIds:b,winLine:y,getActiveSymbol:_},...r};return N.cloneElement(e,{dataSource:S})},r0=N.forwardRef(({maxScaleLength:r,...e},t)=>{const n=N.useRef();return N.useEffect(()=>{if(r&&n.current){const i=setTimeout(()=>{const s=n.current.width,o=n.current.scale.x,a=r/s*o,l=o>0?1:-1,u=n.current.scale.y>0?1:-1;a<1?n.current.scale.set(a*l,a*u):n.current.scale.x!=1&&n.current.scale.set(1*l,1*u),clearTimeout(i)},1)}},[e.text]),N.useImperativeHandle(t,()=>n.current,[n]),T.jsx(Et.BitmapText,{ref:n,...e})}),aO=N.forwardRef(({children:r,enable:e=!0,click:t,...n},i)=>{const s=c_(t,300,[]),o={};return o.ontouchend=s||null,o.click=s,T.jsx(pe,{cursor:"pointer",interactive:e,...o,...n,ref:i,children:r})}),jz=1e3;function lO({children:r,enable:e=!0,onpointerup:t,onLongPress:n,...i}){const{isMobile:s,isTablet:o}=Ee.Obj,[a,l]=N.useState(0),[u,h]=N.useState(!1),[c,d]=N.useState(!1);function f(y){h(!0),l(Date.now())}function g(){d(!1),l(0),h(!1)}function v(y){(!n||!c)&&t&&t(y),g()}Et.useTick(()=>{!c&&Date.now()-a>=jz&&(d(!0),n&&n())},a>0&&!c);const x={};return s||o?(x.ontouchstart=f,x.ontouchend=v,x.ontouchcancel=g,x.ontouchendoutside=g):(x.onmousedown=f,x.onmouseup=v,x.onmouseout=g,x.onmouseupoutside=g),T.jsx(pe,{cursor:"pointer",interactive:e,...i,...x,children:T.jsx(pe,{scale:u?.9:1,children:r})})}const Di=eO(aO);eO(lO,"onpointerup");function m_(r,e){r.moveTo(...e[0]);for(let t=1;t<e.length;t++)r.lineTo(...e[t])}const Xz=({path:r,width:e,color:t,border:n,borderColor:i,...s},o)=>{const a=N.useCallback(l=>{l.clear(),n&&(l.lineStyle(n*2+e,i,1),m_(l,r)),l.lineStyle(e,t,1),m_(l,r),l.endFill()},[r,e,t,n,i]);return T.jsx(Et.Graphics,{ref:o,draw:a,...s})},Hz=({res:r,name:e,color:t,width:n,path:i,...s},o)=>{const a=N.useMemo(()=>Vw(r,e),[e]),l=N.useCallback(u=>{u.clear(),u.lineTextureStyle({texture:a,color:t,width:2,alignment:0}),m_(u,i),u.endFill()},[i,n,t]);return T.jsx(Et.Graphics,{ref:o,draw:l,...s})},$z=N.forwardRef(Xz);N.forwardRef(Hz);function zz(r,e){const t={},{color:n,borderColor:i,...s}=e,o=PT(n)?n:[n],a=PT(i)?i:[i],l=o.length,u=a.length;for(const h in r.paylinePathMap){const c=o[Number(h)%l],d=a[Number(h)%u],f=T.jsx($z,{...s,color:c,borderColor:d,path:r.paylinePathMap[h].map(([g,v])=>{let x=g%1,y=g-x;return r.column==y&&(x=1,y=y-1),[y*r.symbolFrame[0]+x*r.symbolSize[0],v*r.symbolFrame[1]]})},`winline_${h}`);t[h]=f}return t}function Yz({lineConfig:r,lineId:e,...t}){const n=N.useMemo(()=>zz(Ee.Obj.tableOptions,r),[]);return T.jsx(pe,{...t,children:N.Children.map(e,i=>n[i])})}/*!
 * @pixi/particle-emitter - v5.0.8
 * Compiled Mon, 28 Nov 2022 04:01:38 UTC
 *
 * @pixi/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class Is{constructor(e,t,n){this.value=e,this.time=t,this.next=null,this.isStepped=!1,n?this.ease=typeof n=="function"?n:hO(n):this.ease=null}static createList(e){if("list"in e){const n=e.list;let i;const{value:s,time:o}=n[0],a=i=new Is(typeof s=="string"?wp(s):s,o,e.ease);if(n.length>2||n.length===2&&n[1].value!==s)for(let l=1;l<n.length;++l){const{value:u,time:h}=n[l];i.next=new Is(typeof u=="string"?wp(u):u,h),i=i.next}return a.isStepped=!!e.isStepped,a}const t=new Is(typeof e.start=="string"?wp(e.start):e.start,0);return e.end!==e.start&&(t.next=new Is(typeof e.end=="string"?wp(e.end):e.end,1)),t}}let od=Re.from;const Ps=Math.PI/180;function vo(r,e){if(!r)return;const t=Math.sin(r),n=Math.cos(r),i=e.x*n-e.y*t,s=e.x*t+e.y*n;e.x=i,e.y=s}function n0(r,e,t){return r<<16|e<<8|t}function uO(r){return Math.sqrt(r.x*r.x+r.y*r.y)}function Gz(r){const e=1/uO(r);r.x*=e,r.y*=e}function cO(r,e){r.x*=e,r.y*=e}function wp(r,e){e||(e={}),r.charAt(0)==="#"?r=r.substr(1):r.indexOf("0x")===0&&(r=r.substr(2));let t;return r.length===8&&(t=r.substr(0,2),r=r.substr(2)),e.r=parseInt(r.substr(0,2),16),e.g=parseInt(r.substr(2,2),16),e.b=parseInt(r.substr(4,2),16),t&&(e.a=parseInt(t,16)),e}function hO(r){const e=r.length,t=1/e;return function(n){const i=e*n|0,s=(n-i*t)*e,o=r[i]||r[e-1];return o.s+s*(2*(1-s)*(o.cp-o.s)+s*(o.e-o.s))}}function Wz(r){return r?(r=r.toUpperCase().replace(/ /g,"_"),Ie[r]||Ie.NORMAL):Ie.NORMAL}class zy extends es{constructor(e){super(),this.prevChild=this.nextChild=null,this.emitter=e,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(e){this.maxLife=e,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}var Ct;(function(r){r[r.Spawn=0]="Spawn",r[r.Normal=2]="Normal",r[r.Late=5]="Late"})(Ct||(Ct={}));const Yy=Xt.shared,Ya=Symbol("Position particle per emitter position");class pt{constructor(e,t){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new He,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new He,this._prevEmitterPos=new He,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=e,t&&this.init(t),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(e){pt.knownBehaviors[e.type]=e}get frequency(){return this._frequency}set frequency(e){typeof e=="number"&&e>0?this._frequency=e:this._frequency=1}get parent(){return this._parent}set parent(e){this.cleanup(),this._parent=e}init(e){if(!e)return;this.cleanup(),this._origConfig=e,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,e.ease?this.customEase=typeof e.ease=="function"?e.ease:hO(e.ease):this.customEase=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.frequency=e.frequency,this.spawnChance=typeof e.spawnChance=="number"&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos.set(0),e.pos?this.spawnPos.copyFrom(e.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=e.emit===void 0?!0:!!e.emit,this.autoUpdate=!!e.autoUpdate;const t=e.behaviors.map(n=>{const i=pt.knownBehaviors[n.type];return i?new i(n.config):(console.error(`Unknown behavior: ${n.type}`),null)}).filter(n=>!!n);t.push(Ya),t.sort((n,i)=>n===Ya?i.order===Ct.Spawn?1:-1:i===Ya?n.order===Ct.Spawn?-1:1:n.order-i.order),this.initBehaviors=t.slice(),this.updateBehaviors=t.filter(n=>n!==Ya&&n.updateParticle),this.recycleBehaviors=t.filter(n=>n!==Ya&&n.recycleParticle)}getBehavior(e){return pt.knownBehaviors[e]&&this.initBehaviors.find(t=>t instanceof pt.knownBehaviors[e])||null}fillPool(e){for(;e>0;--e){const t=new zy(this);t.next=this._poolFirst,this._poolFirst=t}}recycle(e,t=!1){for(let n=0;n<this.recycleBehaviors.length;++n)this.recycleBehaviors[n].recycleParticle(e,!t);e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e===this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,e.parent&&e.parent.removeChild(e),--this.particleCount}rotate(e){if(this.rotation===e)return;const t=e-this.rotation;this.rotation=e,vo(t,this.spawnPos),this._posChanged=!0}updateSpawnPos(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t}updateOwnerPos(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){this._autoUpdate&&!e?Yy.remove(this.update,this):!this._autoUpdate&&e&&Yy.add(this.update,this),this._autoUpdate=!!e}playOnceAndDestroy(e){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=e}playOnce(e){this.emit=!0,this._completeCallback=e}update(e){if(this._autoUpdate&&(e=Yy.elapsedMS*.001),!this._parent)return;for(let o=this._activeParticlesFirst,a;o;o=a)if(a=o.next,o.age+=e,o.age>o.maxLife||o.age<0)this.recycle(o);else{let l=o.age*o.oneOverLife;this.customEase&&(this.customEase.length===4?l=this.customEase(l,0,1,1):l=this.customEase(l)),o.agePercent=l;for(let u=0;u<this.updateBehaviors.length;++u)if(this.updateBehaviors[u].updateParticle(o,e)){this.recycle(o);break}}let t,n;this._prevPosIsValid&&(t=this._prevEmitterPos.x,n=this._prevEmitterPos.y);const i=this.ownerPos.x+this.spawnPos.x,s=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=e<0?0:e;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let o,a;if(this._prevPosIsValid&&this._posChanged){const h=1+this._spawnTimer/e;o=(i-t)*h+t,a=(s-n)*h+n}else o=i,a=s;let l=null,u=null;for(let h=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),c=0;c<h;++c){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let d;if(this.minLifetime===this.maxLifetime?d=this.minLifetime:d=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=d)continue;let f;this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new zy(this),f.init(d),this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f),l?(u.next=f,f.prev=u,u=f):u=l=f,++this.particleCount}if(l){this._activeParticlesLast?(this._activeParticlesLast.next=l,l.prev=this._activeParticlesLast,this._activeParticlesLast=u):(this._activeParticlesFirst=l,this._activeParticlesLast=u);for(let h=0;h<this.initBehaviors.length;++h){const c=this.initBehaviors[h];if(c===Ya)for(let d=l,f;d;d=f){f=d.next,this.rotation!==0&&(vo(this.rotation,d.position),d.rotation+=this.rotation),d.position.x+=o,d.position.y+=a,d.age+=-this._spawnTimer;let g=d.age*d.oneOverLife;this.customEase&&(this.customEase.length===4?g=this.customEase(g,0,1,1):g=this.customEase(g)),d.agePercent=g}else c.initParticles(l)}for(let h=l,c;h;h=c){c=h.next;for(let d=0;d<this.updateBehaviors.length;++d)if(this.updateBehaviors[d].updateParticle(h,-this._spawnTimer)){this.recycle(h);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=i,this._prevEmitterPos.y=s,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const o=this._completeCallback;this._completeCallback=null,o()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const e=this.ownerPos.x+this.spawnPos.x,t=this.ownerPos.y+this.spawnPos.y;let n=null,i=null;for(let s=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),o=0;o<s;++o){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let a;this._poolFirst?(a=this._poolFirst,this._poolFirst=this._poolFirst.next,a.next=null):a=new zy(this);let l;this.minLifetime===this.maxLifetime?l=this.minLifetime:l=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,a.init(l),this.addAtBack?this._parent.addChildAt(a,0):this._parent.addChild(a),n?(i.next=a,a.prev=i,i=a):i=n=a,++this.particleCount}if(n){this._activeParticlesLast?(this._activeParticlesLast.next=n,n.prev=this._activeParticlesLast,this._activeParticlesLast=i):(this._activeParticlesFirst=n,this._activeParticlesLast=i);for(let s=0;s<this.initBehaviors.length;++s){const o=this.initBehaviors[s];if(o===Ya)for(let a=n,l;a;a=l)l=a.next,this.rotation!==0&&(vo(this.rotation,a.position),a.rotation+=this.rotation),a.position.x+=e,a.position.y+=t;else o.initParticles(n)}}}cleanup(){let e,t;for(e=this._activeParticlesFirst;e;e=t)t=e.next,this.recycle(e,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let e;for(let t=this._poolFirst;t;t=e)e=t.next,t.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}pt.knownBehaviors={};class rb{constructor(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h}getRandPos(e){e.x=Math.random()*this.w+this.x,e.y=Math.random()*this.h+this.y}}rb.type="rect";rb.editorConfig=null;class i0{constructor(e){this.x=e.x||0,this.y=e.y||0,this.radius=e.radius,this.innerRadius=e.innerRadius||0,this.rotation=!!e.affectRotation}getRandPos(e){this.innerRadius!==this.radius?e.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:e.x=this.radius,e.y=0;const t=Math.random()*Math.PI*2;this.rotation&&(e.rotation+=t),vo(t,e.position),e.position.x+=this.x,e.position.y+=this.y}}i0.type="torus";i0.editorConfig=null;class nb{constructor(e){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(e)}init(e){if(!e||!e.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(e[0]))for(let t=0;t<e.length;++t){const n=e[t];let i=n[0];for(let s=1;s<n.length;++s){const o=n[s];this.segments.push({p1:i,p2:o,l:0}),i=o}}else{let t=e[0];for(let n=1;n<e.length;++n){const i=e[n];this.segments.push({p1:t,p2:i,l:0}),t=i}}for(let t=0;t<this.segments.length;++t){const{p1:n,p2:i}=this.segments[t],s=Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y));this.segments[t].l=s,this.totalLength+=s,this.countingLengths.push(this.totalLength)}}getRandPos(e){const t=Math.random()*this.totalLength;let n,i;if(this.segments.length===1)n=this.segments[0],i=t;else for(let a=0;a<this.countingLengths.length;++a)if(t<this.countingLengths[a]){n=this.segments[a],i=a===0?t:t-this.countingLengths[a-1];break}i/=n.l||1;const{p1:s,p2:o}=n;e.x=s.x+i*(o.x-s.x),e.y=s.y+i*(o.y-s.y)}}nb.type="polygonalChain";nb.editorConfig=null;class ib{constructor(e){var t;this.order=Ct.Late,this.minStart=e.minStart,this.maxStart=e.maxStart,this.accel=e.accel,this.rotate=!!e.rotate,this.maxSpeed=(t=e.maxSpeed)!==null&&t!==void 0?t:0}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.maxStart-this.minStart)+this.minStart;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new He(n,0),vo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity,i=n.x,s=n.y;if(n.x+=this.accel.x*t,n.y+=this.accel.y*t,this.maxSpeed){const o=uO(n);o>this.maxSpeed&&cO(n,this.maxSpeed/o)}e.x+=(i+n.x)/2*t,e.y+=(s+n.y)/2*t,this.rotate&&(e.rotation=Math.atan2(n.y,n.x))}}ib.type="moveAcceleration";ib.editorConfig=null;function Vz(r){return this.ease&&(r=this.ease(r)),(this.first.next.value-this.first.value)*r+this.first.value}function qz(r){this.ease&&(r=this.ease(r));const e=this.first.value,t=this.first.next.value,n=(t.r-e.r)*r+e.r,i=(t.g-e.g)*r+e.g,s=(t.b-e.b)*r+e.b;return n0(n,i,s)}function Kz(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;return r=(r-e.time)/(t.time-e.time),(t.value-e.value)*r+e.value}function Qz(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;r=(r-e.time)/(t.time-e.time);const n=e.value,i=t.value,s=(i.r-n.r)*r+n.r,o=(i.g-n.g)*r+n.g,a=(i.b-n.b)*r+n.b;return n0(s,o,a)}function Zz(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;return e.value}function Jz(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;const t=e.value;return n0(t.r,t.g,t.b)}class Pd{constructor(e=!1){this.first=null,this.isColor=!!e,this.interpolate=null,this.ease=null}reset(e){this.first=e,e.next&&e.next.time>=1?this.interpolate=this.isColor?qz:Vz:e.isStepped?this.interpolate=this.isColor?Jz:Zz:this.interpolate=this.isColor?Qz:Kz,this.ease=this.first.ease}}class sb{constructor(e){this.order=Ct.Normal,this.list=new Pd(!1),this.list.reset(Is.createList(e.alpha))}initParticles(e){let t=e;for(;t;)t.alpha=this.list.first.value,t=t.next}updateParticle(e){e.alpha=this.list.interpolate(e.agePercent)}}sb.type="alpha";sb.editorConfig=null;class ob{constructor(e){this.order=Ct.Normal,this.value=e.alpha}initParticles(e){let t=e;for(;t;)t.alpha=this.value,t=t.next}}ob.type="alphaStatic";ob.editorConfig=null;function dO(r){const e=[];for(let t=0;t<r.length;++t){let n=r[t];if(typeof n=="string")e.push(od(n));else if(n instanceof Re)e.push(n);else{let i=n.count||1;for(typeof n.texture=="string"?n=od(n.texture):n=n.texture;i>0;--i)e.push(n)}}return e}class ab{constructor(e){this.order=Ct.Normal,this.anims=[];for(let t=0;t<e.anims.length;++t){const n=e.anims[t],i=dO(n.textures),s=n.framerate<0?-1:n.framerate>0?n.framerate:60,o={textures:i,duration:s>0?i.length/s:0,framerate:s,loop:s>0?!!n.loop:!1};this.anims.push(o)}}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.anims.length),i=t.config.anim=this.anims[n];t.texture=i.textures[0],t.config.animElapsed=0,i.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=i.textures.length/t.maxLife):(t.config.animDuration=i.duration,t.config.animFramerate=i.framerate),t=t.next}}updateParticle(e,t){const n=e.config,i=n.anim;n.animElapsed+=t,n.animElapsed>=n.animDuration&&(n.anim.loop?n.animElapsed=n.animElapsed%n.animDuration:n.animElapsed=n.animDuration-1e-6);const s=n.animElapsed*n.animFramerate+1e-7|0;e.texture=i.textures[s]||i.textures[i.textures.length-1]||Re.EMPTY}}ab.type="animatedRandom";ab.editorConfig=null;class lb{constructor(e){this.order=Ct.Normal;const t=e.anim,n=dO(t.textures),i=t.framerate<0?-1:t.framerate>0?t.framerate:60;this.anim={textures:n,duration:i>0?n.length/i:0,framerate:i,loop:i>0?!!t.loop:!1}}initParticles(e){let t=e;const n=this.anim;for(;t;)t.texture=n.textures[0],t.config.animElapsed=0,n.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=n.textures.length/t.maxLife):(t.config.animDuration=n.duration,t.config.animFramerate=n.framerate),t=t.next}updateParticle(e,t){const n=this.anim,i=e.config;i.animElapsed+=t,i.animElapsed>=i.animDuration&&(n.loop?i.animElapsed=i.animElapsed%i.animDuration:i.animElapsed=i.animDuration-1e-6);const s=i.animElapsed*i.animFramerate+1e-7|0;e.texture=n.textures[s]||n.textures[n.textures.length-1]||Re.EMPTY}}lb.type="animatedSingle";lb.editorConfig=null;class ub{constructor(e){this.order=Ct.Normal,this.value=e.blendMode}initParticles(e){let t=e;for(;t;)t.blendMode=Wz(this.value),t=t.next}}ub.type="blendMode";ub.editorConfig=null;class cb{constructor(e){this.order=Ct.Spawn,this.spacing=e.spacing*Ps,this.start=e.start*Ps,this.distance=e.distance}initParticles(e){let t=0,n=e;for(;n;){let i;this.spacing?i=this.start+this.spacing*t:i=Math.random()*Math.PI*2,n.rotation=i,this.distance&&(n.position.x=this.distance,vo(i,n.position)),n=n.next,++t}}}cb.type="spawnBurst";cb.editorConfig=null;class hb{constructor(e){this.order=Ct.Normal,this.list=new Pd(!0),this.list.reset(Is.createList(e.color))}initParticles(e){let t=e;const n=this.list.first.value,i=n0(n.r,n.g,n.b);for(;t;)t.tint=i,t=t.next}updateParticle(e){e.tint=this.list.interpolate(e.agePercent)}}hb.type="color";hb.editorConfig=null;class db{constructor(e){this.order=Ct.Normal;let t=e.color;t.charAt(0)==="#"?t=t.substr(1):t.indexOf("0x")===0&&(t=t.substr(2)),this.value=parseInt(t,16)}initParticles(e){let t=e;for(;t;)t.tint=this.value,t=t.next}}db.type="colorStatic";db.editorConfig=null;class fb{constructor(e){this.order=Ct.Normal,this.index=0,this.textures=e.textures.map(t=>typeof t=="string"?od(t):t)}initParticles(e){let t=e;for(;t;)t.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),t=t.next}}fb.type="textureOrdered";fb.editorConfig=null;const eu=new He,fO=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],e9=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(fO).join("|"),"g");function t9(r){const e=r.match(e9);for(let t=e.length-1;t>=0;--t)fO.indexOf(e[t])>=0&&(e[t]=`Math.${e[t]}`);return r=e.join(""),new Function("x",`return ${r};`)}class pb{constructor(e){var t;if(this.order=Ct.Late,e.path)if(typeof e.path=="function")this.path=e.path;else try{this.path=t9(e.path)}catch{this.path=null}else this.path=n=>n;this.list=new Pd(!1),this.list.reset(Is.createList(e.speed)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){t.config.initRotation=t.rotation,t.config.initPosition?t.config.initPosition.copyFrom(t.position):t.config.initPosition=new He(t.x,t.y),t.config.movement=0;const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult;e.config.movement+=n*t,eu.x=e.config.movement,eu.y=this.path(eu.x),vo(e.config.initRotation,eu),e.position.x=e.config.initPosition.x+eu.x,e.position.y=e.config.initPosition.y+eu.y}}pb.type="movePath";pb.editorConfig=null;class mb{constructor(){this.order=Ct.Spawn}initParticles(e){}}mb.type="spawnPoint";mb.editorConfig=null;class gb{constructor(e){this.order=Ct.Normal,this.textures=e.textures.map(t=>typeof t=="string"?od(t):t)}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.textures.length);t.texture=this.textures[n],t=t.next}}}gb.type="textureRandom";gb.editorConfig=null;class vb{constructor(e){this.order=Ct.Normal,this.minStart=e.minStart*Ps,this.maxStart=e.maxStart*Ps,this.minSpeed=e.minSpeed*Ps,this.maxSpeed=e.maxSpeed*Ps,this.accel=e.accel*Ps}initParticles(e){let t=e;for(;t;)this.minStart===this.maxStart?t.rotation+=this.maxStart:t.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,t.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,t=t.next}updateParticle(e,t){if(this.accel){const n=e.config.rotSpeed;e.config.rotSpeed+=this.accel*t,e.rotation+=(e.config.rotSpeed+n)/2*t}else e.rotation+=e.config.rotSpeed*t}}vb.type="rotation";vb.editorConfig=null;class yb{constructor(e){this.order=Ct.Normal,this.min=e.min*Ps,this.max=e.max*Ps}initParticles(e){let t=e;for(;t;)this.min===this.max?t.rotation+=this.max:t.rotation+=Math.random()*(this.max-this.min)+this.min,t=t.next}}yb.type="rotationStatic";yb.editorConfig=null;class xb{constructor(e){this.order=Ct.Late+1,this.rotation=(e.rotation||0)*Ps}initParticles(e){let t=e;for(;t;)t.rotation=this.rotation,t=t.next}}xb.type="noRotation";xb.editorConfig=null;class _b{constructor(e){var t;this.order=Ct.Normal,this.list=new Pd(!1),this.list.reset(Is.createList(e.scale)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.scaleMult=n,t.scale.x=t.scale.y=this.list.first.value*n,t=t.next}}updateParticle(e){e.scale.x=e.scale.y=this.list.interpolate(e.agePercent)*e.config.scaleMult}}_b.type="scale";_b.editorConfig=null;class wb{constructor(e){this.order=Ct.Normal,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.scale.x=t.scale.y=n,t=t.next}}}wb.type="scaleStatic";wb.editorConfig=null;class Qi{constructor(e){this.order=Ct.Spawn;const t=Qi.shapes[e.type];if(!t)throw new Error(`No shape found with type '${e.type}'`);this.shape=new t(e.data)}static registerShape(e,t){Qi.shapes[t||e.type]=e}initParticles(e){let t=e;for(;t;)this.shape.getRandPos(t),t=t.next}}Qi.type="spawnShape";Qi.editorConfig=null;Qi.shapes={};Qi.registerShape(nb);Qi.registerShape(rb);Qi.registerShape(i0);Qi.registerShape(i0,"circle");class bb{constructor(e){this.order=Ct.Normal,this.texture=typeof e.texture=="string"?od(e.texture):e.texture}initParticles(e){let t=e;for(;t;)t.texture=this.texture,t=t.next}}bb.type="textureSingle";bb.editorConfig=null;class Sb{constructor(e){var t;this.order=Ct.Late,this.list=new Pd(!1),this.list.reset(Is.createList(e.speed)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t.config.velocity?t.config.velocity.set(this.list.first.value*n,0):t.config.velocity=new He(this.list.first.value*n,0),vo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult,i=e.config.velocity;Gz(i),cO(i,n),e.x+=i.x*t,e.y+=i.y*t}}Sb.type="moveSpeed";Sb.editorConfig=null;class Tb{constructor(e){this.order=Ct.Late,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new He(n,0),vo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity;e.x+=n.x*t,e.y+=n.y*t}}Tb.type="moveSpeedStatic";Tb.editorConfig=null;function s0(r,e){var t,n,i,s,o,a,l,u,h,c,d,f,g,v,x,y,b,_,S,I,A;if("behaviors"in r)return r;const k={lifetime:r.lifetime,ease:r.ease,particlesPerWave:r.particlesPerWave,frequency:r.frequency,spawnChance:r.spawnChance,emitterLifetime:r.emitterLifetime,maxParticles:r.maxParticles,addAtBack:r.addAtBack,pos:r.pos,emit:r.emit,autoUpdate:r.autoUpdate,behaviors:[]};if(r.alpha)if("start"in r.alpha)if(r.alpha.start===r.alpha.end)r.alpha.start!==1&&k.behaviors.push({type:"alphaStatic",config:{alpha:r.alpha.start}});else{const M={list:[{time:0,value:r.alpha.start},{time:1,value:r.alpha.end}]};k.behaviors.push({type:"alpha",config:{alpha:M}})}else r.alpha.list.length===1?r.alpha.list[0].value!==1&&k.behaviors.push({type:"alphaStatic",config:{alpha:r.alpha.list[0].value}}):k.behaviors.push({type:"alpha",config:{alpha:r.alpha}});if(r.acceleration&&(r.acceleration.x||r.acceleration.y)){let M,O;"start"in r.speed?(M=r.speed.start*((t=r.speed.minimumSpeedMultiplier)!==null&&t!==void 0?t:1),O=r.speed.start):(M=r.speed.list[0].value*((n=r.minimumSpeedMultiplier)!==null&&n!==void 0?n:1),O=r.speed.list[0].value),k.behaviors.push({type:"moveAcceleration",config:{accel:r.acceleration,minStart:M,maxStart:O,rotate:!r.noRotation,maxSpeed:r.maxSpeed}})}else if(!((i=r.extraData)===null||i===void 0)&&i.path){let M,O;"start"in r.speed?(O=(s=r.speed.minimumSpeedMultiplier)!==null&&s!==void 0?s:1,r.speed.start===r.speed.end?M={list:[{time:0,value:r.speed.start}]}:M={list:[{time:0,value:r.speed.start},{time:1,value:r.speed.end}]}):(M=r.speed,O=(o=r.minimumSpeedMultiplier)!==null&&o!==void 0?o:1),k.behaviors.push({type:"movePath",config:{path:r.extraData.path,speed:M,minMult:O}})}else if(r.speed)if("start"in r.speed)if(r.speed.start===r.speed.end)k.behaviors.push({type:"moveSpeedStatic",config:{min:r.speed.start*((a=r.speed.minimumSpeedMultiplier)!==null&&a!==void 0?a:1),max:r.speed.start}});else{const M={list:[{time:0,value:r.speed.start},{time:1,value:r.speed.end}]};k.behaviors.push({type:"moveSpeed",config:{speed:M,minMult:r.speed.minimumSpeedMultiplier}})}else r.speed.list.length===1?k.behaviors.push({type:"moveSpeedStatic",config:{min:r.speed.list[0].value*((l=r.minimumSpeedMultiplier)!==null&&l!==void 0?l:1),max:r.speed.list[0].value}}):k.behaviors.push({type:"moveSpeed",config:{speed:r.speed,minMult:(u=r.minimumSpeedMultiplier)!==null&&u!==void 0?u:1}});if(r.scale)if("start"in r.scale){const M=(h=r.scale.minimumScaleMultiplier)!==null&&h!==void 0?h:1;if(r.scale.start===r.scale.end)k.behaviors.push({type:"scaleStatic",config:{min:r.scale.start*M,max:r.scale.start}});else{const O={list:[{time:0,value:r.scale.start},{time:1,value:r.scale.end}]};k.behaviors.push({type:"scale",config:{scale:O,minMult:M}})}}else if(r.scale.list.length===1){const M=(c=r.minimumScaleMultiplier)!==null&&c!==void 0?c:1,O=r.scale.list[0].value;k.behaviors.push({type:"scaleStatic",config:{min:O*M,max:O}})}else k.behaviors.push({type:"scale",config:{scale:r.scale,minMult:(d=r.minimumScaleMultiplier)!==null&&d!==void 0?d:1}});if(r.color)if("start"in r.color)if(r.color.start===r.color.end)r.color.start!=="ffffff"&&k.behaviors.push({type:"colorStatic",config:{color:r.color.start}});else{const M={list:[{time:0,value:r.color.start},{time:1,value:r.color.end}]};k.behaviors.push({type:"color",config:{color:M}})}else r.color.list.length===1?r.color.list[0].value!=="ffffff"&&k.behaviors.push({type:"colorStatic",config:{color:r.color.list[0].value}}):k.behaviors.push({type:"color",config:{color:r.color}});if(r.rotationAcceleration||!((f=r.rotationSpeed)===null||f===void 0)&&f.min||!((g=r.rotationSpeed)===null||g===void 0)&&g.max?k.behaviors.push({type:"rotation",config:{accel:r.rotationAcceleration||0,minSpeed:((v=r.rotationSpeed)===null||v===void 0?void 0:v.min)||0,maxSpeed:((x=r.rotationSpeed)===null||x===void 0?void 0:x.max)||0,minStart:((y=r.startRotation)===null||y===void 0?void 0:y.min)||0,maxStart:((b=r.startRotation)===null||b===void 0?void 0:b.max)||0}}):(!((_=r.startRotation)===null||_===void 0)&&_.min||!((S=r.startRotation)===null||S===void 0)&&S.max)&&k.behaviors.push({type:"rotationStatic",config:{min:((I=r.startRotation)===null||I===void 0?void 0:I.min)||0,max:((A=r.startRotation)===null||A===void 0?void 0:A.max)||0}}),r.noRotation&&k.behaviors.push({type:"noRotation",config:{}}),r.blendMode&&r.blendMode!=="normal"&&k.behaviors.push({type:"blendMode",config:{blendMode:r.blendMode}}),Array.isArray(e)&&typeof e[0]!="string"&&"framerate"in e[0]){for(let M=0;M<e.length;++M)e[M].framerate==="matchLife"&&(e[M].framerate=-1);k.behaviors.push({type:"animatedRandom",config:{anims:e}})}else typeof e!="string"&&"framerate"in e?(e.framerate==="matchLife"&&(e.framerate=-1),k.behaviors.push({type:"animatedSingle",config:{anim:e}})):r.orderedArt&&Array.isArray(e)?k.behaviors.push({type:"textureOrdered",config:{textures:e}}):Array.isArray(e)?k.behaviors.push({type:"textureRandom",config:{textures:e}}):k.behaviors.push({type:"textureSingle",config:{texture:e}});if(r.spawnType==="burst")k.behaviors.push({type:"spawnBurst",config:{start:r.angleStart||0,spacing:r.particleSpacing,distance:0}});else if(r.spawnType==="point")k.behaviors.push({type:"spawnPoint",config:{}});else{let M;r.spawnType==="ring"?M={type:"torus",data:{x:r.spawnCircle.x,y:r.spawnCircle.y,radius:r.spawnCircle.r,innerRadius:r.spawnCircle.minR,affectRotation:!0}}:r.spawnType==="circle"?M={type:"torus",data:{x:r.spawnCircle.x,y:r.spawnCircle.y,radius:r.spawnCircle.r,innerRadius:0,affectRotation:!1}}:r.spawnType==="rect"?M={type:"rect",data:r.spawnRect}:r.spawnType==="polygonalChain"&&(M={type:"polygonalChain",data:r.spawnPolygon}),M&&k.behaviors.push({type:"spawnShape",config:M})}return k}pt.registerBehavior(ib);pt.registerBehavior(sb);pt.registerBehavior(ob);pt.registerBehavior(ab);pt.registerBehavior(lb);pt.registerBehavior(ub);pt.registerBehavior(cb);pt.registerBehavior(hb);pt.registerBehavior(db);pt.registerBehavior(fb);pt.registerBehavior(pb);pt.registerBehavior(mb);pt.registerBehavior(gb);pt.registerBehavior(vb);pt.registerBehavior(yb);pt.registerBehavior(xb);pt.registerBehavior(_b);pt.registerBehavior(wb);pt.registerBehavior(Qi);pt.registerBehavior(bb);pt.registerBehavior(Sb);pt.registerBehavior(Tb);function r9(r){return s0({alpha:{start:1,end:.7},scale:{start:.4,end:.8,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:800,minimumSpeedMultiplier:3},acceleration:{x:0,y:700},maxSpeed:0,startRotation:{min:240,max:270},noRotation:!1,rotationSpeed:{min:-50,max:50},lifetime:{min:2,max:3},blendMode:"normal",frequency:.1,emitterLifetime:r,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-25,y:0,w:50,h:0}},{framerate:0,loop:!0,textures:pr(18,e=>`coin_${e+1}.png`)})}function o0(r){return s0({alpha:{start:1,end:.8},scale:{start:.5,end:.9,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:500,minimumSpeedMultiplier:2.5},acceleration:{x:0,y:1e3},maxSpeed:0,startRotation:{min:240,max:290},noRotation:!1,rotationSpeed:{min:-50,max:50},lifetime:{min:1.5,max:2},blendMode:"normal",frequency:.1,emitterLifetime:r,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-25,y:0,w:50,h:0}},{framerate:0,loop:!0,textures:pr(18,e=>`coin_${e+1}.png`)})}const Gt=({turbo:r=!1,playing:e=!1,config:t,...n})=>{const i=N.useRef(),[s,o]=N.useState(null);return kl((a,l)=>{s.update(a/1e3)},e,r),N.useEffect(()=>{!e&&s?s.cleanup():e&&s&&s.playOnce()},[e]),N.useEffect(()=>{const a=new pt(i.current,t);return o(a),()=>{a.destroy()}},[]),T.jsx(Et.ParticleContainer,{ref:i,...n})};function n9({selected:r=0,children:e,duration:t,...n}){const{current:i}=N.useRef({index:r}),[s,o]=N.useState(!1),a=N.useMemo(()=>N.Children.count(e),[]);return il(t,()=>{i.index=(i.index+1)%a,o(!s)},!0),T.jsx(pe,{...n,children:N.Children.map(e,(l,u)=>{let h,c=!1;return u==i.index?(h={from:{alpha:0,visible:1},to:{alpha:1,visible:1},duration:200},c=!0):h={from:{visible:0}},T.jsx(Gi,{dep:[`${u}${r}`],...h,playing:c,children:d=>N.cloneElement(l,d)},`SlideTipTween${u}`)})})}function Ad({children:r,slotName:e}){const[t,n]=r,i=N.useRef(null),s=N.useRef(null);return N.useEffect(()=>{if(i.current&&s.current){const o=i.current.skeleton.findSlot(e);i.current.addSlotObject(o,s.current)}},[i,s]),T.jsxs(pe,{children:[N.cloneElement(t,{ref:i}),T.jsx(pe,{ref:s,children:n})]})}function kd(r){return N.forwardRef(({turbo:e=!1,text:t=new nt(0),tweenOptions:n={},tmp:i="{}",...s},o)=>{const{current:a}=N.useRef({amount:0,id:0}),l=Number(t.toString()),[u,h]=N.useMemo(()=>{const c=a.amount;return a.amount=l,[a.id++,c]},[l]);return T.jsx(Gi,{dep:[u],playing:!0,turbo:e,from:{text:h},to:{text:l},duration:1e3,...n,children:c=>T.jsx(r,{ref:o,...s,text:i.replace("{}",xn(c.text))})})})}const g_=kd(qi);kd(_a);kd(N$);kd(({text:r,...e})=>T.jsx("div",{...e,children:r}));kd(({text:r,cb:e,...t})=>T.jsx("div",{...t,children:e(r)}));function i9({children:r,speed:e}){const[t,n]=N.useState(0);return Et.useTick((i,s)=>{n((i/1e3*(e*360)+t)%360)},!0),r(Math.PI*2*(t/360))}const dg=class dg{constructor(){C(this,"keys",[]);C(this,"keysChangedFCMap",{});window.addEventListener("keydown",this.onKeyDownHandler.bind(this)),window.addEventListener("keyup",this.onKeyUpHandler.bind(this))}static get Obj(){return this._Obj||(this._Obj=new dg),this._Obj}onKeyDownHandler(e){if(e&&e.key){const t=e.key.toLowerCase();this.keys.indexOf(t)==-1&&this.keys.push(t)}}onKeyUpHandler(e){if(e&&e.key){let t=e.key.toLowerCase();const n=this.keys.indexOf(t);if(n>-1){t=Mj(t);const i=`onKey${t==" "?"Space":t}`,s=this.keysChangedFCMap[i];for(const o of s||[])o();this.keys.splice(n,1)}}}setKeysFCMap(e,t){const n=this.keysChangedFCMap[e];n?n.push(t):this.keysChangedFCMap[e]=[t]}removeFc(e,t){const n=this.keysChangedFCMap[e],i=n.indexOf(t);i>-1&&n.splice(i,1)}};C(dg,"_Obj");let v_=dg;function Eb({enable:r=!0,sound:e=!0,...t}){return N.useEffect(()=>{const n=v_.Obj,i=[];if(r){for(const o in t)o.match(/onKey[A-Z]\w+/)&&i.push(o);const s={};for(const o of i){let a=function(){l(),Ki.clickSound()};const l=t[o];n.setKeysFCMap(o,a),s[o]=a}return()=>{for(const o of i)n.removeFc(o,s[o])}}},[t]),T.jsx(T.Fragment,{})}const pO=N.forwardRef(({turbo:r=!1,res:e=Qg,animation:t,isPlaying:n=!1,startFrame:i,...s},o)=>{const a=N.useRef(),l=N.useMemo(()=>{let u=t;IA(t)&&(u=[t]);let h=[];for(let c=0;c<u.length;c++)h=[...h,...uH(e,u[c])];return h},[t]);return N.useEffect(()=>{n&&Gr(i)&&a.current.gotoAndPlay(i)},[n]),N.useImperativeHandle(o,()=>a.current,[a]),kl((u,h)=>{a.current.update(u/h.elapsedMS)},n,r),T.jsx(Et.AnimatedSprite,{ref:a,autoUpdate:!1,textures:l,isPlaying:n,...s})}),mO=N.forwardRef(({dep:r=[],onLoop:e,onRepeatComplete:t,repeat:n,...i},s)=>{const{current:o}=N.useRef({loopTimes:0}),a=i.isPlaying;function l(){o.loopTimes++;const u=o.loopTimes;e&&e(u),n==u&&t&&t()}return N.useEffect(()=>{o.loopTimes=0},[a,...r]),T.jsx(pO,{ref:s,...i,onLoop:l})});function Cb(r,e,t,n,i){return N.forwardRef((s,o)=>T.jsx(r,{ref:o,res:e,animation:t,...i,animationSpeed:n,...s}))}if(typeof window<"u"&&window.PIXI){let r=window.require;window.require=e=>{if(r)return r(e);if(e.startsWith("@pixi/"))return window.PIXI}}class gO{constructor(){C(this,"entries",{});C(this,"size",0)}add(e){let t=this.entries[e];return this.entries[e]=!0,t?!1:(this.size++,!0)}addAll(e){let t=this.size;for(var n=0,i=e.length;n<i;n++)this.add(e[n]);return t!=this.size}contains(e){return this.entries[e]}clear(){this.entries={},this.size=0}}const On=class On{constructor(e=0,t=0,n=0,i=0){C(this,"r");C(this,"g");C(this,"b");C(this,"a");this.r=e,this.g=t,this.b=n,this.a=i}set(e,t,n,i){return this.r=e,this.g=t,this.b=n,this.a=i,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,t,n,i){return this.r+=e,this.g+=t,this.b+=n,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,t){e.r=((t&4278190080)>>>24)/255,e.g=((t&16711680)>>>16)/255,e.b=((t&65280)>>>8)/255,e.a=(t&255)/255}static rgb888ToColor(e,t){e.r=((t&16711680)>>>16)/255,e.g=((t&65280)>>>8)/255,e.b=(t&255)/255}toRgb888(){const e=t=>("0"+(t*255).toString(16)).slice(-2);return+("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e){return new On().setFromString(e)}};C(On,"WHITE",new On(1,1,1,1)),C(On,"RED",new On(1,0,0,1)),C(On,"GREEN",new On(0,1,0,1)),C(On,"BLUE",new On(0,0,1,1)),C(On,"MAGENTA",new On(1,0,1,1));let Xe=On;const ar=class ar{static clamp(e,t,n){return e<t?t:e>n?n:e}static cosDeg(e){return Math.cos(e*ar.degRad)}static sinDeg(e){return Math.sin(e*ar.degRad)}static atan2Deg(e,t){return Math.atan2(e,t)*ar.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let t=Math.pow(Math.abs(e),.3333333333333333);return e<0?-t:t}static randomTriangular(e,t){return ar.randomTriangularWith(e,t,(e+t)*.5)}static randomTriangularWith(e,t,n){let i=Math.random(),s=t-e;return i<=(n-e)/s?e+Math.sqrt(i*s*(n-e)):t-Math.sqrt((1-i)*s*(t-n))}static isPowerOfTwo(e){return e&&(e&e-1)===0}};C(ar,"PI",3.1415927),C(ar,"PI2",ar.PI*2),C(ar,"invPI2",1/ar.PI2),C(ar,"radiansToDegrees",180/ar.PI),C(ar,"radDeg",ar.radiansToDegrees),C(ar,"degreesToRadians",ar.PI/180),C(ar,"degRad",ar.degreesToRadians);let ce=ar;const Jo=class Jo{static arrayCopy(e,t,n,i,s){for(let o=t,a=i;o<t+s;o++,a++)n[a]=e[o]}static arrayFill(e,t,n,i){for(let s=t;s<n;s++)e[s]=i}static setArraySize(e,t,n=0){let i=e.length;if(i==t)return e;if(e.length=t,i<t)for(let s=i;s<t;s++)e[s]=n;return e}static ensureArrayCapacity(e,t,n=0){return e.length>=t?e:Jo.setArraySize(e,t,n)}static newArray(e,t){let n=new Array(e);for(let i=0;i<e;i++)n[i]=t;return n}static newFloatArray(e){if(Jo.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static newShortArray(e){if(Jo.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static toFloatArray(e){return Jo.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return Jo.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,t){}static contains(e,t,n=!0){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}static enumValue(e,t){return e[t[0].toUpperCase()+t.slice(1)]}};C(Jo,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u");let me=Jo;class y_{constructor(e){C(this,"items",new Array);C(this,"instantiator");this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}}class tg{constructor(e=0,t=0){C(this,"x");C(this,"y");this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}length(){let e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}normalize(){let e=this.length();return e!=0&&(this.x/=e,this.y/=e),this}}class vO{constructor(e){C(this,"name");if(!e)throw new Error("name cannot be null.");this.name=e}}const fg=class fg extends vO{constructor(t){super(t);C(this,"id",fg.nextID++);C(this,"bones",null);C(this,"vertices",[]);C(this,"worldVerticesLength",0);C(this,"timelineAttachment",this)}computeWorldVertices(t,n,i,s,o,a){i=o+(i>>1)*a;let l=t.bone.skeleton,u=t.deform,h=this.vertices,c=this.bones;if(!c){u.length>0&&(h=u);let v=t.bone,x=v.worldX,y=v.worldY,b=v.a,_=v.b,S=v.c,I=v.d;for(let A=n,k=o;k<i;A+=2,k+=a){let M=h[A],O=h[A+1];s[k]=M*b+O*_+x,s[k+1]=M*S+O*I+y}return}let d=0,f=0;for(let v=0;v<n;v+=2){let x=c[d];d+=x+1,f+=x}let g=l.bones;if(u.length==0)for(let v=o,x=f*3;v<i;v+=a){let y=0,b=0,_=c[d++];for(_+=d;d<_;d++,x+=3){let S=g[c[d]],I=h[x],A=h[x+1],k=h[x+2];y+=(I*S.a+A*S.b+S.worldX)*k,b+=(I*S.c+A*S.d+S.worldY)*k}s[v]=y,s[v+1]=b}else{let v=u;for(let x=o,y=f*3,b=f<<1;x<i;x+=a){let _=0,S=0,I=c[d++];for(I+=d;d<I;d++,y+=3,b+=2){let A=g[c[d]],k=h[y]+v[b],M=h[y+1]+v[b+1],O=h[y+2];_+=(k*A.a+M*A.b+A.worldX)*O,S+=(k*A.c+M*A.d+A.worldY)*O}s[x]=_,s[x+1]=S}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),me.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=me.newFloatArray(this.vertices.length),me.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}};C(fg,"nextID",0);let Zi=fg;const ku=class ku{constructor(e){C(this,"id",ku.nextID());C(this,"regions");C(this,"start",0);C(this,"digits",0);C(this,"setupIndex",0);this.regions=new Array(e)}copy(){let e=new ku(this.regions.length);return me.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}apply(e,t){let n=e.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);let i=this.regions[n];t.region!=i&&(t.region=i,t.updateRegion())}getPath(e,t){let n=e,i=(this.start+t).toString();for(let s=this.digits-i.length;s>0;s--)n+="0";return n+=i,n}static nextID(){return ku._nextID++}};C(ku,"_nextID",0);let rg=ku;var Rr;(function(r){r[r.hold=0]="hold",r[r.once=1]="once",r[r.loop=2]="loop",r[r.pingpong=3]="pingpong",r[r.onceReverse=4]="onceReverse",r[r.loopReverse=5]="loopReverse",r[r.pingpongReverse=6]="pingpongReverse"})(Rr||(Rr={}));const yO=[Rr.hold,Rr.once,Rr.loop,Rr.pingpong,Rr.onceReverse,Rr.loopReverse,Rr.pingpongReverse];let Pb=class{constructor(e,t,n){C(this,"name");C(this,"timelines",[]);C(this,"timelineIds",new gO);C(this,"duration");if(!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(t),this.duration=n}setTimelines(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var t=0;t<e.length;t++)this.timelineIds.addAll(e[t].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(e,t,n,i,s,o,a,l){if(!e)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,t>0&&(t%=this.duration));let u=this.timelines;for(let h=0,c=u.length;h<c;h++)u[h].apply(e,t,n,s,o,a,l)}};var re;(function(r){r[r.setup=0]="setup",r[r.first=1]="first",r[r.replace=2]="replace",r[r.add=3]="add"})(re||(re={}));var yn;(function(r){r[r.mixIn=0]="mixIn",r[r.mixOut=1]="mixOut"})(yn||(yn={}));const Ge={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class It{constructor(e,t){C(this,"propertyIds");C(this,"frames");this.propertyIds=t,this.frames=me.newFloatArray(e*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,t){let n=e.length;for(let i=1;i<n;i++)if(e[i]>t)return i-1;return n-1}static search(e,t,n){let i=e.length;for(let s=n;s<i;s+=n)if(e[s]>t)return s-n;return i-n}}class Hs extends It{constructor(t,n,i){super(t,i);C(this,"curves");this.curves=me.newFloatArray(t+n*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let n=this.getFrameCount()+t*18;if(this.curves.length>n){let i=me.newFloatArray(n);me.arrayCopy(this.curves,0,i,0,n),this.curves=i}}setBezier(t,n,i,s,o,a,l,u,h,c,d){let f=this.curves,g=this.getFrameCount()+t*18;i==0&&(f[n]=2+g);let v=(s-a*2+u)*.03,x=(o-l*2+h)*.03,y=((a-u)*3-s+c)*.006,b=((l-h)*3-o+d)*.006,_=v*2+y,S=x*2+b,I=(a-s)*.3+v+y*.16666667,A=(l-o)*.3+x+b*.16666667,k=s+I,M=o+A;for(let O=g+18;g<O;g+=2)f[g]=k,f[g+1]=M,I+=_,A+=S,_+=y,S+=b,k+=I,M+=A}getBezierValue(t,n,i,s){let o=this.curves;if(o[s]>t){let h=this.frames[n],c=this.frames[n+i];return c+(t-h)/(o[s]-h)*(o[s+1]-c)}let a=s+18;for(s+=2;s<a;s+=2)if(o[s]>=t){let h=o[s-2],c=o[s-1];return c+(t-h)/(o[s]-h)*(o[s+1]-c)}n+=this.getFrameEntries();let l=o[a-2],u=o[a-1];return u+(t-l)/(this.frames[n]-l)*(this.frames[n+i]-u)}}class ts extends Hs{constructor(e,t,n){super(e,t,[n])}getFrameEntries(){return 2}setFrame(e,t,n){e<<=1,this.frames[e]=t,this.frames[e+1]=n}getCurveValue(e){let t=this.frames,n=t.length-2;for(let s=2;s<=n;s+=2)if(t[s]>e){n=s-2;break}let i=this.curves[n>>1];switch(i){case 0:let s=t[n],o=t[n+1];return o+(e-s)/(t[n+2]-s)*(t[n+2+1]-o);case 1:return t[n+1]}return this.getBezierValue(e,n,1,i-2)}getRelativeValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case re.setup:return s;case re.first:return i+(s-i)*t}return i}let o=this.getCurveValue(e);switch(n){case re.setup:return s+o*t;case re.first:case re.replace:o+=s-i}return i+o*t}getAbsoluteValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case re.setup:return s;case re.first:return i+(s-i)*t}return i}let o=this.getCurveValue(e);return n==re.setup?s+(o-s)*t:i+(o-i)*t}getAbsoluteValue2(e,t,n,i,s,o){if(e<this.frames[0]){switch(n){case re.setup:return s;case re.first:return i+(s-i)*t}return i}return n==re.setup?s+(o-s)*t:i+(o-i)*t}getScaleValue(e,t,n,i,s,o){const a=this.frames;if(e<a[0]){switch(n){case re.setup:return o;case re.first:return s+(o-s)*t}return s}let l=this.getCurveValue(e)*o;if(t==1)return n==re.add?s+l-o:l;if(i==yn.mixOut)switch(n){case re.setup:return o+(Math.abs(l)*ce.signum(o)-o)*t;case re.first:case re.replace:return s+(Math.abs(l)*ce.signum(s)-s)*t}else{let u=0;switch(n){case re.setup:return u=Math.abs(o)*ce.signum(l),u+(l-u)*t;case re.first:case re.replace:return u=Math.abs(s)*ce.signum(l),u+(l-u)*t}}return s+(l-o)*t}}class Ab extends Hs{constructor(e,t,n,i){super(e,t,[n,i])}getFrameEntries(){return 3}setFrame(e,t,n,i){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=i}}class ng extends ts{constructor(t,n,i){super(t,n,Ge.rotate+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];u.active&&(u.rotation=this.getRelativeValue(i,o,a,u.rotation,u.data.rotation))}}class xO extends Ab{constructor(t,n,i){super(t,n,Ge.x+"|"+i,Ge.y+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];if(!u.active)return;let h=this.frames;if(i<h[0]){switch(a){case re.setup:u.x=u.data.x,u.y=u.data.y;return;case re.first:u.x+=(u.data.x-u.x)*o,u.y+=(u.data.y-u.y)*o}return}let c=0,d=0,f=It.search(h,i,3),g=this.curves[f/3];switch(g){case 0:let v=h[f];c=h[f+1],d=h[f+2];let x=(i-v)/(h[f+3]-v);c+=(h[f+3+1]-c)*x,d+=(h[f+3+2]-d)*x;break;case 1:c=h[f+1],d=h[f+2];break;default:c=this.getBezierValue(i,f,1,g-2),d=this.getBezierValue(i,f,2,g+18-2)}switch(a){case re.setup:u.x=u.data.x+c*o,u.y=u.data.y+d*o;break;case re.first:case re.replace:u.x+=(u.data.x+c-u.x)*o,u.y+=(u.data.y+d-u.y)*o;break;case re.add:u.x+=c*o,u.y+=d*o}}}class _O extends ts{constructor(t,n,i){super(t,n,Ge.x+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];u.active&&(u.x=this.getRelativeValue(i,o,a,u.x,u.data.x))}}class wO extends ts{constructor(t,n,i){super(t,n,Ge.y+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];u.active&&(u.y=this.getRelativeValue(i,o,a,u.y,u.data.y))}}class bO extends Ab{constructor(t,n,i){super(t,n,Ge.scaleX+"|"+i,Ge.scaleY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];if(!u.active)return;let h=this.frames;if(i<h[0]){switch(a){case re.setup:u.scaleX=u.data.scaleX,u.scaleY=u.data.scaleY;return;case re.first:u.scaleX+=(u.data.scaleX-u.scaleX)*o,u.scaleY+=(u.data.scaleY-u.scaleY)*o}return}let c,d,f=It.search(h,i,3),g=this.curves[f/3];switch(g){case 0:let v=h[f];c=h[f+1],d=h[f+2];let x=(i-v)/(h[f+3]-v);c+=(h[f+3+1]-c)*x,d+=(h[f+3+2]-d)*x;break;case 1:c=h[f+1],d=h[f+2];break;default:c=this.getBezierValue(i,f,1,g-2),d=this.getBezierValue(i,f,2,g+18-2)}if(c*=u.data.scaleX,d*=u.data.scaleY,o==1)a==re.add?(u.scaleX+=c-u.data.scaleX,u.scaleY+=d-u.data.scaleY):(u.scaleX=c,u.scaleY=d);else{let v=0,x=0;if(l==yn.mixOut)switch(a){case re.setup:v=u.data.scaleX,x=u.data.scaleY,u.scaleX=v+(Math.abs(c)*ce.signum(v)-v)*o,u.scaleY=x+(Math.abs(d)*ce.signum(x)-x)*o;break;case re.first:case re.replace:v=u.scaleX,x=u.scaleY,u.scaleX=v+(Math.abs(c)*ce.signum(v)-v)*o,u.scaleY=x+(Math.abs(d)*ce.signum(x)-x)*o;break;case re.add:u.scaleX+=(c-u.data.scaleX)*o,u.scaleY+=(d-u.data.scaleY)*o}else switch(a){case re.setup:v=Math.abs(u.data.scaleX)*ce.signum(c),x=Math.abs(u.data.scaleY)*ce.signum(d),u.scaleX=v+(c-v)*o,u.scaleY=x+(d-x)*o;break;case re.first:case re.replace:v=Math.abs(u.scaleX)*ce.signum(c),x=Math.abs(u.scaleY)*ce.signum(d),u.scaleX=v+(c-v)*o,u.scaleY=x+(d-x)*o;break;case re.add:u.scaleX+=(c-u.data.scaleX)*o,u.scaleY+=(d-u.data.scaleY)*o}}}}class SO extends ts{constructor(t,n,i){super(t,n,Ge.scaleX+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];u.active&&(u.scaleX=this.getScaleValue(i,o,a,l,u.scaleX,u.data.scaleX))}}class TO extends ts{constructor(t,n,i){super(t,n,Ge.scaleY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];u.active&&(u.scaleY=this.getScaleValue(i,o,a,l,u.scaleY,u.data.scaleY))}}class EO extends Ab{constructor(t,n,i){super(t,n,Ge.shearX+"|"+i,Ge.shearY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];if(!u.active)return;let h=this.frames;if(i<h[0]){switch(a){case re.setup:u.shearX=u.data.shearX,u.shearY=u.data.shearY;return;case re.first:u.shearX+=(u.data.shearX-u.shearX)*o,u.shearY+=(u.data.shearY-u.shearY)*o}return}let c=0,d=0,f=It.search(h,i,3),g=this.curves[f/3];switch(g){case 0:let v=h[f];c=h[f+1],d=h[f+2];let x=(i-v)/(h[f+3]-v);c+=(h[f+3+1]-c)*x,d+=(h[f+3+2]-d)*x;break;case 1:c=h[f+1],d=h[f+2];break;default:c=this.getBezierValue(i,f,1,g-2),d=this.getBezierValue(i,f,2,g+18-2)}switch(a){case re.setup:u.shearX=u.data.shearX+c*o,u.shearY=u.data.shearY+d*o;break;case re.first:case re.replace:u.shearX+=(u.data.shearX+c-u.shearX)*o,u.shearY+=(u.data.shearY+d-u.shearY)*o;break;case re.add:u.shearX+=c*o,u.shearY+=d*o}}}class CO extends ts{constructor(t,n,i){super(t,n,Ge.shearX+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];u.active&&(u.shearX=this.getRelativeValue(i,o,a,u.shearX,u.data.shearX))}}class PO extends ts{constructor(t,n,i){super(t,n,Ge.shearY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];u.active&&(u.shearY=this.getRelativeValue(i,o,a,u.shearY,u.data.shearY))}}class AO extends It{constructor(t,n){super(t,[Ge.inherit+"|"+n]);C(this,"boneIndex",0);this.boneIndex=n}getFrameEntries(){return 2}setFrame(t,n,i){t*=2,this.frames[t]=n,this.frames[t+1]=i}apply(t,n,i,s,o,a,l){let u=t.bones[this.boneIndex];if(!u.active)return;let h=this.frames;if(i<h[0]){(a==re.setup||a==re.first)&&(u.inherit=u.data.inherit);return}u.inherit=this.frames[It.search(h,i,2)+1]}}class kO extends Hs{constructor(t,n,i){super(t,n,[Ge.rgb+"|"+i,Ge.alpha+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,n,i,s,o,a){t*=5,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(!u.bone.active)return;let h=this.frames,c=u.color;if(i<h[0]){let b=u.data.color;switch(a){case re.setup:c.setFromColor(b);return;case re.first:c.add((b.r-c.r)*o,(b.g-c.g)*o,(b.b-c.b)*o,(b.a-c.a)*o)}return}let d=0,f=0,g=0,v=0,x=It.search(h,i,5),y=this.curves[x/5];switch(y){case 0:let b=h[x];d=h[x+1],f=h[x+2],g=h[x+3],v=h[x+4];let _=(i-b)/(h[x+5]-b);d+=(h[x+5+1]-d)*_,f+=(h[x+5+2]-f)*_,g+=(h[x+5+3]-g)*_,v+=(h[x+5+4]-v)*_;break;case 1:d=h[x+1],f=h[x+2],g=h[x+3],v=h[x+4];break;default:d=this.getBezierValue(i,x,1,y-2),f=this.getBezierValue(i,x,2,y+18-2),g=this.getBezierValue(i,x,3,y+18*2-2),v=this.getBezierValue(i,x,4,y+18*3-2)}o==1?c.set(d,f,g,v):(a==re.setup&&c.setFromColor(u.data.color),c.add((d-c.r)*o,(f-c.g)*o,(g-c.b)*o,(v-c.a)*o))}}class IO extends Hs{constructor(t,n,i){super(t,n,[Ge.rgb+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,n,i,s,o){t<<=2,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(!u.bone.active)return;let h=this.frames,c=u.color;if(i<h[0]){let y=u.data.color;switch(a){case re.setup:c.r=y.r,c.g=y.g,c.b=y.b;return;case re.first:c.r+=(y.r-c.r)*o,c.g+=(y.g-c.g)*o,c.b+=(y.b-c.b)*o}return}let d=0,f=0,g=0,v=It.search(h,i,4),x=this.curves[v>>2];switch(x){case 0:let y=h[v];d=h[v+1],f=h[v+2],g=h[v+3];let b=(i-y)/(h[v+4]-y);d+=(h[v+4+1]-d)*b,f+=(h[v+4+2]-f)*b,g+=(h[v+4+3]-g)*b;break;case 1:d=h[v+1],f=h[v+2],g=h[v+3];break;default:d=this.getBezierValue(i,v,1,x-2),f=this.getBezierValue(i,v,2,x+18-2),g=this.getBezierValue(i,v,3,x+18*2-2)}if(o==1)c.r=d,c.g=f,c.b=g;else{if(a==re.setup){let y=u.data.color;c.r=y.r,c.g=y.g,c.b=y.b}c.r+=(d-c.r)*o,c.g+=(f-c.g)*o,c.b+=(g-c.b)*o}}}class MO extends ts{constructor(t,n,i){super(t,n,Ge.alpha+"|"+i);C(this,"slotIndex",0);this.slotIndex=i}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(!u.bone.active)return;let h=u.color;if(i<this.frames[0]){let d=u.data.color;switch(a){case re.setup:h.a=d.a;return;case re.first:h.a+=(d.a-h.a)*o}return}let c=this.getCurveValue(i);o==1?h.a=c:(a==re.setup&&(h.a=u.data.color.a),h.a+=(c-h.a)*o)}}class RO extends Hs{constructor(t,n,i){super(t,n,[Ge.rgb+"|"+i,Ge.alpha+"|"+i,Ge.rgb2+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,n,i,s,o,a,l,u,h){t<<=3,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a,this.frames[t+5]=l,this.frames[t+6]=u,this.frames[t+7]=h}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(!u.bone.active)return;let h=this.frames,c=u.color,d=u.darkColor;if(i<h[0]){let A=u.data.color,k=u.data.darkColor;switch(a){case re.setup:c.setFromColor(A),d.r=k.r,d.g=k.g,d.b=k.b;return;case re.first:c.add((A.r-c.r)*o,(A.g-c.g)*o,(A.b-c.b)*o,(A.a-c.a)*o),d.r+=(k.r-d.r)*o,d.g+=(k.g-d.g)*o,d.b+=(k.b-d.b)*o}return}let f=0,g=0,v=0,x=0,y=0,b=0,_=0,S=It.search(h,i,8),I=this.curves[S>>3];switch(I){case 0:let A=h[S];f=h[S+1],g=h[S+2],v=h[S+3],x=h[S+4],y=h[S+5],b=h[S+6],_=h[S+7];let k=(i-A)/(h[S+8]-A);f+=(h[S+8+1]-f)*k,g+=(h[S+8+2]-g)*k,v+=(h[S+8+3]-v)*k,x+=(h[S+8+4]-x)*k,y+=(h[S+8+5]-y)*k,b+=(h[S+8+6]-b)*k,_+=(h[S+8+7]-_)*k;break;case 1:f=h[S+1],g=h[S+2],v=h[S+3],x=h[S+4],y=h[S+5],b=h[S+6],_=h[S+7];break;default:f=this.getBezierValue(i,S,1,I-2),g=this.getBezierValue(i,S,2,I+18-2),v=this.getBezierValue(i,S,3,I+18*2-2),x=this.getBezierValue(i,S,4,I+18*3-2),y=this.getBezierValue(i,S,5,I+18*4-2),b=this.getBezierValue(i,S,6,I+18*5-2),_=this.getBezierValue(i,S,7,I+18*6-2)}if(o==1)c.set(f,g,v,x),d.r=y,d.g=b,d.b=_;else{if(a==re.setup){c.setFromColor(u.data.color);let A=u.data.darkColor;d.r=A.r,d.g=A.g,d.b=A.b}c.add((f-c.r)*o,(g-c.g)*o,(v-c.b)*o,(x-c.a)*o),d.r+=(y-d.r)*o,d.g+=(b-d.g)*o,d.b+=(_-d.b)*o}}}class OO extends Hs{constructor(t,n,i){super(t,n,[Ge.rgb+"|"+i,Ge.rgb2+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,n,i,s,o,a,l,u){t*=7,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a,this.frames[t+5]=l,this.frames[t+6]=u}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(!u.bone.active)return;let h=this.frames,c=u.color,d=u.darkColor;if(i<h[0]){let I=u.data.color,A=u.data.darkColor;switch(a){case re.setup:c.r=I.r,c.g=I.g,c.b=I.b,d.r=A.r,d.g=A.g,d.b=A.b;return;case re.first:c.r+=(I.r-c.r)*o,c.g+=(I.g-c.g)*o,c.b+=(I.b-c.b)*o,d.r+=(A.r-d.r)*o,d.g+=(A.g-d.g)*o,d.b+=(A.b-d.b)*o}return}let f=0,g=0,v=0,x=0,y=0,b=0,_=It.search(h,i,7),S=this.curves[_/7];switch(S){case 0:let I=h[_];f=h[_+1],g=h[_+2],v=h[_+3],x=h[_+4],y=h[_+5],b=h[_+6];let A=(i-I)/(h[_+7]-I);f+=(h[_+7+1]-f)*A,g+=(h[_+7+2]-g)*A,v+=(h[_+7+3]-v)*A,x+=(h[_+7+4]-x)*A,y+=(h[_+7+5]-y)*A,b+=(h[_+7+6]-b)*A;break;case 1:f=h[_+1],g=h[_+2],v=h[_+3],x=h[_+4],y=h[_+5],b=h[_+6];break;default:f=this.getBezierValue(i,_,1,S-2),g=this.getBezierValue(i,_,2,S+18-2),v=this.getBezierValue(i,_,3,S+18*2-2),x=this.getBezierValue(i,_,4,S+18*3-2),y=this.getBezierValue(i,_,5,S+18*4-2),b=this.getBezierValue(i,_,6,S+18*5-2)}if(o==1)c.r=f,c.g=g,c.b=v,d.r=x,d.g=y,d.b=b;else{if(a==re.setup){let I=u.data.color,A=u.data.darkColor;c.r=I.r,c.g=I.g,c.b=I.b,d.r=A.r,d.g=A.g,d.b=A.b}c.r+=(f-c.r)*o,c.g+=(g-c.g)*o,c.b+=(v-c.b)*o,d.r+=(x-d.r)*o,d.g+=(y-d.g)*o,d.b+=(b-d.b)*o}}}class Cu extends It{constructor(t,n){super(t,[Ge.attachment+"|"+n]);C(this,"slotIndex",0);C(this,"attachmentNames");this.slotIndex=n,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.attachmentNames[t]=i}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(u.bone.active){if(l==yn.mixOut){a==re.setup&&this.setAttachment(t,u,u.data.attachmentName);return}if(i<this.frames[0]){(a==re.setup||a==re.first)&&this.setAttachment(t,u,u.data.attachmentName);return}this.setAttachment(t,u,this.attachmentNames[It.search1(this.frames,i)])}}setAttachment(t,n,i){n.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}class NO extends Hs{constructor(t,n,i,s){super(t,n,[Ge.deform+"|"+i+"|"+s.id]);C(this,"slotIndex",0);C(this,"attachment");C(this,"vertices");this.slotIndex=i,this.attachment=s,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.vertices[t]=i}setBezier(t,n,i,s,o,a,l,u,h,c,d){let f=this.curves,g=this.getFrameCount()+t*18;i==0&&(f[n]=2+g);let v=(s-a*2+u)*.03,x=h*.03-l*.06,y=((a-u)*3-s+c)*.006,b=(l-h+.33333333)*.018,_=v*2+y,S=x*2+b,I=(a-s)*.3+v+y*.16666667,A=l*.3+x+b*.16666667,k=s+I,M=A;for(let O=g+18;g<O;g+=2)f[g]=k,f[g+1]=M,I+=_,A+=S,_+=y,S+=b,k+=I,M+=A}getCurvePercent(t,n){let i=this.curves,s=i[n];switch(s){case 0:let u=this.frames[n];return(t-u)/(this.frames[n+this.getFrameEntries()]-u);case 1:return 0}if(s-=2,i[s]>t){let u=this.frames[n];return i[s+1]*(t-u)/(i[s]-u)}let o=s+18;for(s+=2;s<o;s+=2)if(i[s]>=t){let u=i[s-2],h=i[s-1];return h+(t-u)/(i[s]-u)*(i[s+1]-h)}let a=i[o-2],l=i[o-1];return l+(1-l)*(t-a)/(this.frames[n+this.getFrameEntries()]-a)}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(!u.bone.active)return;let h=u.getAttachment();if(!h||!(h instanceof Zi)||h.timelineAttachment!=this.attachment)return;let c=u.deform;c.length==0&&(a=re.setup);let d=this.vertices,f=d[0].length,g=this.frames;if(i<g[0]){switch(a){case re.setup:c.length=0;return;case re.first:if(o==1){c.length=0;return}c.length=f;let S=h;if(S.bones){o=1-o;for(var v=0;v<f;v++)c[v]*=o}else{let I=S.vertices;for(var v=0;v<f;v++)c[v]+=(I[v]-c[v])*o}}return}if(c.length=f,i>=g[g.length-1]){let S=d[g.length-1];if(o==1)if(a==re.add){let I=h;if(I.bones)for(let A=0;A<f;A++)c[A]+=S[A];else{let A=I.vertices;for(let k=0;k<f;k++)c[k]+=S[k]-A[k]}}else me.arrayCopy(S,0,c,0,f);else switch(a){case re.setup:{let A=h;if(A.bones)for(let k=0;k<f;k++)c[k]=S[k]*o;else{let k=A.vertices;for(let M=0;M<f;M++){let O=k[M];c[M]=O+(S[M]-O)*o}}break}case re.first:case re.replace:for(let A=0;A<f;A++)c[A]+=(S[A]-c[A])*o;break;case re.add:let I=h;if(I.bones)for(let A=0;A<f;A++)c[A]+=S[A]*o;else{let A=I.vertices;for(let k=0;k<f;k++)c[k]+=(S[k]-A[k])*o}}return}let x=It.search1(g,i),y=this.getCurvePercent(i,x),b=d[x],_=d[x+1];if(o==1)if(a==re.add){let S=h;if(S.bones)for(let I=0;I<f;I++){let A=b[I];c[I]+=A+(_[I]-A)*y}else{let I=S.vertices;for(let A=0;A<f;A++){let k=b[A];c[A]+=k+(_[A]-k)*y-I[A]}}}else for(let S=0;S<f;S++){let I=b[S];c[S]=I+(_[S]-I)*y}else switch(a){case re.setup:{let I=h;if(I.bones)for(let A=0;A<f;A++){let k=b[A];c[A]=(k+(_[A]-k)*y)*o}else{let A=I.vertices;for(let k=0;k<f;k++){let M=b[k],O=A[k];c[k]=O+(M+(_[k]-M)*y-O)*o}}break}case re.first:case re.replace:for(let I=0;I<f;I++){let A=b[I];c[I]+=(A+(_[I]-A)*y-c[I])*o}break;case re.add:let S=h;if(S.bones)for(let I=0;I<f;I++){let A=b[I];c[I]+=(A+(_[I]-A)*y)*o}else{let I=S.vertices;for(let A=0;A<f;A++){let k=b[A];c[A]+=(k+(_[A]-k)*y-I[A])*o}}}}}const pg=class pg extends It{constructor(t){super(t,pg.propertyIds);C(this,"events");this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n){this.frames[t]=n.time,this.events[t]=n}apply(t,n,i,s,o,a,l){if(!s)return;let u=this.frames,h=this.frames.length;if(n>i)this.apply(t,n,Number.MAX_VALUE,s,o,a,l),n=-1;else if(n>=u[h-1])return;if(i<u[0])return;let c=0;if(n<u[0])c=0;else{c=It.search1(u,n)+1;let d=u[c];for(;c>0&&u[c-1]==d;)c--}for(;c<h&&i>=u[c];c++)s.push(this.events[c])}};C(pg,"propertyIds",[""+Ge.event]);let ad=pg;const mg=class mg extends It{constructor(t){super(t,mg.propertyIds);C(this,"drawOrders");this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.drawOrders[t]=i}apply(t,n,i,s,o,a,l){if(l==yn.mixOut){a==re.setup&&me.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(i<this.frames[0]){(a==re.setup||a==re.first)&&me.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let u=It.search1(this.frames,i),h=this.drawOrders[u];if(!h)me.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{let c=t.drawOrder,d=t.slots;for(let f=0,g=h.length;f<g;f++)c[f]=d[h[f]]}}};C(mg,"propertyIds",[""+Ge.drawOrder]);let hl=mg;class FO extends Hs{constructor(t,n,i){super(t,n,[Ge.ikConstraint+"|"+i]);C(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 6}setFrame(t,n,i,s,o,a,l){t*=6,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a?1:0,this.frames[t+5]=l?1:0}apply(t,n,i,s,o,a,l){let u=t.ikConstraints[this.constraintIndex];if(!u.active)return;let h=this.frames;if(i<h[0]){switch(a){case re.setup:u.mix=u.data.mix,u.softness=u.data.softness,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch;return;case re.first:u.mix+=(u.data.mix-u.mix)*o,u.softness+=(u.data.softness-u.softness)*o,u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch}return}let c=0,d=0,f=It.search(h,i,6),g=this.curves[f/6];switch(g){case 0:let v=h[f];c=h[f+1],d=h[f+2];let x=(i-v)/(h[f+6]-v);c+=(h[f+6+1]-c)*x,d+=(h[f+6+2]-d)*x;break;case 1:c=h[f+1],d=h[f+2];break;default:c=this.getBezierValue(i,f,1,g-2),d=this.getBezierValue(i,f,2,g+18-2)}a==re.setup?(u.mix=u.data.mix+(c-u.data.mix)*o,u.softness=u.data.softness+(d-u.data.softness)*o,l==yn.mixOut?(u.bendDirection=u.data.bendDirection,u.compress=u.data.compress,u.stretch=u.data.stretch):(u.bendDirection=h[f+3],u.compress=h[f+4]!=0,u.stretch=h[f+5]!=0)):(u.mix+=(c-u.mix)*o,u.softness+=(d-u.softness)*o,l==yn.mixIn&&(u.bendDirection=h[f+3],u.compress=h[f+4]!=0,u.stretch=h[f+5]!=0))}}class BO extends Hs{constructor(t,n,i){super(t,n,[Ge.transformConstraint+"|"+i]);C(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 7}setFrame(t,n,i,s,o,a,l,u){let h=this.frames;t*=7,h[t]=n,h[t+1]=i,h[t+2]=s,h[t+3]=o,h[t+4]=a,h[t+5]=l,h[t+6]=u}apply(t,n,i,s,o,a,l){let u=t.transformConstraints[this.constraintIndex];if(!u.active)return;let h=this.frames;if(i<h[0]){let _=u.data;switch(a){case re.setup:u.mixRotate=_.mixRotate,u.mixX=_.mixX,u.mixY=_.mixY,u.mixScaleX=_.mixScaleX,u.mixScaleY=_.mixScaleY,u.mixShearY=_.mixShearY;return;case re.first:u.mixRotate+=(_.mixRotate-u.mixRotate)*o,u.mixX+=(_.mixX-u.mixX)*o,u.mixY+=(_.mixY-u.mixY)*o,u.mixScaleX+=(_.mixScaleX-u.mixScaleX)*o,u.mixScaleY+=(_.mixScaleY-u.mixScaleY)*o,u.mixShearY+=(_.mixShearY-u.mixShearY)*o}return}let c,d,f,g,v,x,y=It.search(h,i,7),b=this.curves[y/7];switch(b){case 0:let _=h[y];c=h[y+1],d=h[y+2],f=h[y+3],g=h[y+4],v=h[y+5],x=h[y+6];let S=(i-_)/(h[y+7]-_);c+=(h[y+7+1]-c)*S,d+=(h[y+7+2]-d)*S,f+=(h[y+7+3]-f)*S,g+=(h[y+7+4]-g)*S,v+=(h[y+7+5]-v)*S,x+=(h[y+7+6]-x)*S;break;case 1:c=h[y+1],d=h[y+2],f=h[y+3],g=h[y+4],v=h[y+5],x=h[y+6];break;default:c=this.getBezierValue(i,y,1,b-2),d=this.getBezierValue(i,y,2,b+18-2),f=this.getBezierValue(i,y,3,b+18*2-2),g=this.getBezierValue(i,y,4,b+18*3-2),v=this.getBezierValue(i,y,5,b+18*4-2),x=this.getBezierValue(i,y,6,b+18*5-2)}if(a==re.setup){let _=u.data;u.mixRotate=_.mixRotate+(c-_.mixRotate)*o,u.mixX=_.mixX+(d-_.mixX)*o,u.mixY=_.mixY+(f-_.mixY)*o,u.mixScaleX=_.mixScaleX+(g-_.mixScaleX)*o,u.mixScaleY=_.mixScaleY+(v-_.mixScaleY)*o,u.mixShearY=_.mixShearY+(x-_.mixShearY)*o}else u.mixRotate+=(c-u.mixRotate)*o,u.mixX+=(d-u.mixX)*o,u.mixY+=(f-u.mixY)*o,u.mixScaleX+=(g-u.mixScaleX)*o,u.mixScaleY+=(v-u.mixScaleY)*o,u.mixShearY+=(x-u.mixShearY)*o}}class LO extends ts{constructor(t,n,i){super(t,n,Ge.pathConstraintPosition+"|"+i);C(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,l){let u=t.pathConstraints[this.constraintIndex];u.active&&(u.position=this.getAbsoluteValue(i,o,a,u.position,u.data.position))}}class DO extends ts{constructor(t,n,i){super(t,n,Ge.pathConstraintSpacing+"|"+i);C(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,l){let u=t.pathConstraints[this.constraintIndex];u.active&&(u.spacing=this.getAbsoluteValue(i,o,a,u.spacing,u.data.spacing))}}class UO extends Hs{constructor(t,n,i){super(t,n,[Ge.pathConstraintMix+"|"+i]);C(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 4}setFrame(t,n,i,s,o){let a=this.frames;t<<=2,a[t]=n,a[t+1]=i,a[t+2]=s,a[t+3]=o}apply(t,n,i,s,o,a,l){let u=t.pathConstraints[this.constraintIndex];if(!u.active)return;let h=this.frames;if(i<h[0]){switch(a){case re.setup:u.mixRotate=u.data.mixRotate,u.mixX=u.data.mixX,u.mixY=u.data.mixY;return;case re.first:u.mixRotate+=(u.data.mixRotate-u.mixRotate)*o,u.mixX+=(u.data.mixX-u.mixX)*o,u.mixY+=(u.data.mixY-u.mixY)*o}return}let c,d,f,g=It.search(h,i,4),v=this.curves[g>>2];switch(v){case 0:let x=h[g];c=h[g+1],d=h[g+2],f=h[g+3];let y=(i-x)/(h[g+4]-x);c+=(h[g+4+1]-c)*y,d+=(h[g+4+2]-d)*y,f+=(h[g+4+3]-f)*y;break;case 1:c=h[g+1],d=h[g+2],f=h[g+3];break;default:c=this.getBezierValue(i,g,1,v-2),d=this.getBezierValue(i,g,2,v+18-2),f=this.getBezierValue(i,g,3,v+18*2-2)}if(a==re.setup){let x=u.data;u.mixRotate=x.mixRotate+(c-x.mixRotate)*o,u.mixX=x.mixX+(d-x.mixX)*o,u.mixY=x.mixY+(f-x.mixY)*o}else u.mixRotate+=(c-u.mixRotate)*o,u.mixX+=(d-u.mixX)*o,u.mixY+=(f-u.mixY)*o}}class Il extends ts{constructor(t,n,i,s){super(t,n,s+"|"+i);C(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,l){let u;if(this.constraintIndex==-1){const h=i>=this.frames[0]?this.getCurveValue(i):0;for(const c of t.physicsConstraints)c.active&&this.global(c.data)&&this.set(c,this.getAbsoluteValue2(i,o,a,this.get(c),this.setup(c),h))}else u=t.physicsConstraints[this.constraintIndex],u.active&&this.set(u,this.getAbsoluteValue(i,o,a,this.get(u),this.setup(u)))}}class jO extends Il{constructor(e,t,n){super(e,t,n,Ge.physicsConstraintInertia)}setup(e){return e.data.inertia}get(e){return e.inertia}set(e,t){e.inertia=t}global(e){return e.inertiaGlobal}}class XO extends Il{constructor(e,t,n){super(e,t,n,Ge.physicsConstraintStrength)}setup(e){return e.data.strength}get(e){return e.strength}set(e,t){e.strength=t}global(e){return e.strengthGlobal}}class HO extends Il{constructor(e,t,n){super(e,t,n,Ge.physicsConstraintDamping)}setup(e){return e.data.damping}get(e){return e.damping}set(e,t){e.damping=t}global(e){return e.dampingGlobal}}class $O extends Il{constructor(e,t,n){super(e,t,n,Ge.physicsConstraintMass)}setup(e){return 1/e.data.massInverse}get(e){return 1/e.massInverse}set(e,t){e.massInverse=1/t}global(e){return e.massGlobal}}class zO extends Il{constructor(e,t,n){super(e,t,n,Ge.physicsConstraintWind)}setup(e){return e.data.wind}get(e){return e.wind}set(e,t){e.wind=t}global(e){return e.windGlobal}}class YO extends Il{constructor(e,t,n){super(e,t,n,Ge.physicsConstraintGravity)}setup(e){return e.data.gravity}get(e){return e.gravity}set(e,t){e.gravity=t}global(e){return e.gravityGlobal}}class GO extends Il{constructor(e,t,n){super(e,t,n,Ge.physicsConstraintMix)}setup(e){return e.data.mix}get(e){return e.mix}set(e,t){e.mix=t}global(e){return e.mixGlobal}}const gg=class gg extends It{constructor(t,n){super(t,gg.propertyIds);C(this,"constraintIndex");this.constraintIndex=n}getFrameCount(){return this.frames.length}setFrame(t,n){this.frames[t]=n}apply(t,n,i,s,o,a,l){let u;if(this.constraintIndex!=-1&&(u=t.physicsConstraints[this.constraintIndex],!u.active))return;const h=this.frames;if(n>i)this.apply(t,n,Number.MAX_VALUE,[],o,a,l),n=-1;else if(n>=h[h.length-1])return;if(!(i<h[0])&&(n<h[0]||i>=h[It.search1(h,n)+1]))if(u!=null)u.reset();else for(const c of t.physicsConstraints)c.active&&c.reset()}};C(gg,"propertyIds",[Ge.physicsConstraintReset.toString()]);let ig=gg;const ri=class ri extends It{constructor(t,n,i){super(t,[Ge.sequence+"|"+n+"|"+i.sequence.id]);C(this,"slotIndex");C(this,"attachment");this.slotIndex=n,this.attachment=i}getFrameEntries(){return ri.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,n,i,s,o){let a=this.frames;t*=ri.ENTRIES,a[t]=n,a[t+ri.MODE]=i|s<<4,a[t+ri.DELAY]=o}apply(t,n,i,s,o,a,l){let u=t.slots[this.slotIndex];if(!u.bone.active)return;let h=u.attachment,c=this.attachment;if(h!=c&&(!(h instanceof Zi)||h.timelineAttachment!=c))return;let d=this.frames;if(i<d[0]){(a==re.setup||a==re.first)&&(u.sequenceIndex=-1);return}let f=It.search(d,i,ri.ENTRIES),g=d[f],v=d[f+ri.MODE],x=d[f+ri.DELAY];if(!this.attachment.sequence)return;let y=v>>4,b=this.attachment.sequence.regions.length,_=yO[v&15];if(_!=Rr.hold)switch(y+=(i-g)/x+1e-5|0,_){case Rr.once:y=Math.min(b-1,y);break;case Rr.loop:y%=b;break;case Rr.pingpong:{let S=(b<<1)-2;y=S==0?0:y%S,y>=b&&(y=S-y);break}case Rr.onceReverse:y=Math.max(b-1-y,0);break;case Rr.loopReverse:y=b-1-y%b;break;case Rr.pingpongReverse:{let S=(b<<1)-2;y=S==0?0:(y+b-1)%S,y>=b&&(y=S-y)}}u.sequenceIndex=y}};C(ri,"ENTRIES",3),C(ri,"MODE",1),C(ri,"DELAY",2);let sg=ri;const Iu=class Iu{constructor(e){C(this,"data");C(this,"tracks",new Array);C(this,"timeScale",1);C(this,"unkeyedState",0);C(this,"events",new Array);C(this,"listeners",new Array);C(this,"queue",new o9(this));C(this,"propertyIDs",new gO);C(this,"animationsChanged",!1);C(this,"trackEntryPool",new y_(()=>new s9));this.data=e}static emptyAnimation(){return Iu._emptyAnimation}update(e){e*=this.timeScale;let t=this.tracks;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let o=e*s.timeScale;if(s.delay>0){if(s.delay-=o,s.delay>0)continue;o=-s.delay,s.delay=0}let a=s.next;if(a){let l=s.trackLast-a.delay;if(l>=0){for(a.delay=0,a.trackTime+=s.timeScale==0?0:(l/s.timeScale+e)*a.timeScale,s.trackTime+=o,this.setCurrent(n,a,!0);a.mixingFrom;)a.mixTime+=e,a=a.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){t[n]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,e)){let l=s.mixingFrom;for(s.mixingFrom=null,l&&(l.mixingTo=null);l;)this.queue.end(l),l=l.mixingFrom}s.trackTime+=o}this.queue.drain()}updateMixingFrom(e,t){let n=e.mixingFrom;if(!n)return!0;let i=this.updateMixingFrom(n,t);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=t*n.timeScale,e.mixTime+=t,!1)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let t=this.events,n=this.tracks,i=!1;for(let d=0,f=n.length;d<f;d++){let g=n[d];if(!g||g.delay>0)continue;i=!0;let v=d==0?re.first:g.mixBlend,x=g.alpha;g.mixingFrom?x*=this.applyMixingFrom(g,e,v):g.trackTime>=g.trackEnd&&!g.next&&(x=0);let y=x>=g.alphaAttachmentThreshold,b=g.animationLast,_=g.getAnimationTime(),S=_,I=t;g.reverse&&(S=g.animation.duration-S,I=null);let A=g.animation.timelines,k=A.length;if(d==0&&x==1||v==re.add){d==0&&(y=!0);for(let M=0;M<k;M++){var s=A[M];s instanceof Cu?this.applyAttachmentTimeline(s,e,S,v,y):s.apply(e,b,S,I,x,v,yn.mixIn)}}else{let M=g.timelineMode,O=g.shortestRotation,L=!O&&g.timelinesRotation.length!=k<<1;L&&(g.timelinesRotation.length=k<<1);for(let D=0;D<k;D++){let j=A[D],F=M[D]==Gy?v:re.setup;!O&&j instanceof ng?this.applyRotateTimeline(j,e,S,x,F,g.timelinesRotation,D<<1,L):j instanceof Cu?this.applyAttachmentTimeline(j,e,S,v,y):j.apply(e,b,S,I,x,F,yn.mixIn)}}this.queueEvents(g,_),t.length=0,g.nextAnimationLast=_,g.nextTrackLast=g.trackTime}for(var o=this.unkeyedState+GP,a=e.slots,l=0,u=e.slots.length;l<u;l++){var h=a[l];if(h.attachmentState==o){var c=h.data.attachmentName;h.setAttachment(c?e.getAttachment(h.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(e,t,n){let i=e.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,t,n);let s=0;e.mixDuration==0?(s=1,n==re.first&&(n=re.setup)):(s=e.mixTime/e.mixDuration,s>1&&(s=1),n!=re.first&&(n=i.mixBlend));let o=s<i.mixAttachmentThreshold,a=s<i.mixDrawOrderThreshold,l=i.animation.timelines,u=l.length,h=i.alpha*e.interruptAlpha,c=h*(1-s),d=i.animationLast,f=i.getAnimationTime(),g=f,v=null;if(i.reverse?g=i.animation.duration-g:s<i.eventThreshold&&(v=this.events),n==re.add)for(let x=0;x<u;x++)l[x].apply(t,d,g,v,c,n,yn.mixOut);else{let x=i.timelineMode,y=i.timelineHoldMix,b=i.shortestRotation,_=!b&&i.timelinesRotation.length!=u<<1;_&&(i.timelinesRotation.length=u<<1),i.totalAlpha=0;for(let S=0;S<u;S++){let I=l[S],A=yn.mixOut,k,M=0;switch(x[S]){case Gy:if(!a&&I instanceof hl)continue;k=n,M=c;break;case zP:k=re.setup,M=c;break;case YP:k=n,M=h;break;case Wy:k=re.setup,M=h;break;default:k=re.setup;let O=y[S];M=h*Math.max(0,1-O.mixTime/O.mixDuration);break}i.totalAlpha+=M,!b&&I instanceof ng?this.applyRotateTimeline(I,t,g,M,k,i.timelinesRotation,S<<1,_):I instanceof Cu?this.applyAttachmentTimeline(I,t,g,k,o&&M>=i.alphaAttachmentThreshold):(a&&I instanceof hl&&k==re.setup&&(A=yn.mixIn),I.apply(t,d,g,v,M,k,A))}}return e.mixDuration>0&&this.queueEvents(i,f),this.events.length=0,i.nextAnimationLast=f,i.nextTrackLast=i.trackTime,s}applyAttachmentTimeline(e,t,n,i,s){var o=t.slots[e.slotIndex];o.bone.active&&(n<e.frames[0]?(i==re.setup||i==re.first)&&this.setAttachment(t,o,o.data.attachmentName,s):this.setAttachment(t,o,e.attachmentNames[It.search1(e.frames,n)],s),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+GP))}setAttachment(e,t,n,i){t.setAttachment(n?e.getAttachment(t.data.index,n):null),i&&(t.attachmentState=this.unkeyedState+l9)}applyRotateTimeline(e,t,n,i,s,o,a,l){if(l&&(o[a]=0),i==1){e.apply(t,0,n,null,1,s,yn.mixIn);return}let u=t.bones[e.boneIndex];if(!u.active)return;let h=e.frames,c=0,d=0;if(n<h[0])switch(s){case re.setup:u.rotation=u.data.rotation;default:return;case re.first:c=u.rotation,d=u.data.rotation}else c=s==re.setup?u.data.rotation:u.rotation,d=u.data.rotation+e.getCurveValue(n);let f=0,g=d-c;if(g-=Math.ceil(g/360-.5)*360,g==0)f=o[a];else{let v=0,x=0;l?(v=0,x=g):(v=o[a],x=o[a+1]);let y=v-v%360;f=g+y;let b=g>=0,_=v>=0;Math.abs(x)<=90&&ce.signum(x)!=ce.signum(g)&&(Math.abs(v-y)>180?(f+=360*ce.signum(v),_=b):y!=0?f-=360*ce.signum(v):_=b),_!=b&&(f+=360*ce.signum(v)),o[a]=f}o[a+1]=g,u.rotation=c+f*i}queueEvents(e,t){let n=e.animationStart,i=e.animationEnd,s=i-n,o=e.trackLast%s,a=this.events,l=0,u=a.length;for(;l<u;l++){let c=a[l];if(c.time<o)break;c.time>i||this.queue.event(e,c)}let h=!1;if(e.loop)if(s==0)h=!0;else{const c=Math.floor(e.trackTime/s);h=c>0&&c>Math.floor(e.trackLast/s)}else h=t>=i&&e.animationLast<i;for(h&&this.queue.complete(e);l<u;l++){let c=a[l];c.time<n||this.queue.event(e,c)}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,n=this.tracks.length;t<n;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()}clearTrack(e){if(e>=this.tracks.length)return;let t=this.tracks[e];if(!t)return;this.queue.end(t),this.clearNext(t);let n=t;for(;;){let i=n.mixingFrom;if(!i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(e,t,n){let i=this.expandToIndex(e);this.tracks[e]=t,t.previous=null,i&&(n&&this.queue.interrupt(i),t.mixingFrom=i,i.mixingTo=t,t.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(t.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(t)}setAnimation(e,t,n=!1){let i=this.data.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,i,n)}setAnimationWith(e,t,n=!1){if(!t)throw new Error("animation cannot be null.");let i=!0,s=this.expandToIndex(e);s&&(s.nextTrackLast==-1?(this.tracks[e]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.clearNext(s),s=s.mixingFrom,i=!1):this.clearNext(s));let o=this.trackEntry(e,t,n,s);return this.setCurrent(e,o,i),this.queue.drain(),o}addAnimation(e,t,n=!1,i=0){let s=this.data.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,s,n,i)}addAnimationWith(e,t,n=!1,i=0){if(!t)throw new Error("animation cannot be null.");let s=this.expandToIndex(e);if(s)for(;s.next;)s=s.next;let o=this.trackEntry(e,t,n,s);return s?(s.next=o,o.previous=s,i<=0&&(i+=s.getTrackComplete()-o.mixDuration)):(this.setCurrent(e,o,!0),this.queue.drain()),o.delay=i,o}setEmptyAnimation(e,t=0){let n=this.setAnimationWith(e,Iu.emptyAnimation(),!1);return n.mixDuration=t,n.trackEnd=t,n}addEmptyAnimation(e,t=0,n=0){let i=this.addAnimationWith(e,Iu.emptyAnimation(),!1,n);return n<=0&&(i.delay+=i.mixDuration-t),i.mixDuration=t,i.trackEnd=t,i}setEmptyAnimations(e=0){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let n=0,i=this.tracks.length;n<i;n++){let s=this.tracks[n];s&&this.setEmptyAnimation(s.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(me.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,t,n,i){let s=this.trackEntryPool.obtain();return s.reset(),s.trackIndex=e,s.animation=t,s.loop=n,s.holdPrevious=!1,s.reverse=!1,s.shortestRotation=!1,s.eventThreshold=0,s.alphaAttachmentThreshold=0,s.mixAttachmentThreshold=0,s.mixDrawOrderThreshold=0,s.animationStart=0,s.animationEnd=t.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.mixTime=0,s.mixDuration=i?this.data.getMix(i.animation,t):0,s.interruptAlpha=1,s.totalAlpha=0,s.mixBlend=re.replace,s}clearNext(e){let t=e.next;for(;t;)this.queue.dispose(t),t=t.next;e.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let t=0,n=e.length;t<n;t++){let i=e[t];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do(!i.mixingTo||i.mixBlend!=re.add)&&this.computeHold(i),i=i.mixingTo;while(i)}}}computeHold(e){let t=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,s=e.timelineMode;s.length=i;let o=e.timelineHoldMix;o.length=0;let a=this.propertyIDs;if(t&&t.holdPrevious){for(let l=0;l<i;l++)s[l]=a.addAll(n[l].getPropertyIds())?Wy:YP;return}e:for(let l=0;l<i;l++){let u=n[l],h=u.getPropertyIds();if(!a.addAll(h))s[l]=Gy;else if(!t||u instanceof Cu||u instanceof hl||u instanceof ad||!t.animation.hasTimeline(h))s[l]=zP;else{for(let c=t.mixingTo;c;c=c.mixingTo)if(!c.animation.hasTimeline(h)){if(e.mixDuration>0){s[l]=a9,o[l]=c;continue e}break}s[l]=Wy}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};C(Iu,"_emptyAnimation",new Pb("<empty>",[],0));let x_=Iu;class s9{constructor(){C(this,"animation",null);C(this,"previous",null);C(this,"next",null);C(this,"mixingFrom",null);C(this,"mixingTo",null);C(this,"listener",null);C(this,"trackIndex",0);C(this,"loop",!1);C(this,"holdPrevious",!1);C(this,"reverse",!1);C(this,"shortestRotation",!1);C(this,"eventThreshold",0);C(this,"mixAttachmentThreshold",0);C(this,"alphaAttachmentThreshold",0);C(this,"mixDrawOrderThreshold",0);C(this,"animationStart",0);C(this,"animationEnd",0);C(this,"animationLast",0);C(this,"nextAnimationLast",0);C(this,"delay",0);C(this,"trackTime",0);C(this,"trackLast",0);C(this,"nextTrackLast",0);C(this,"trackEnd",0);C(this,"timeScale",0);C(this,"alpha",0);C(this,"mixTime",0);C(this,"_mixDuration",0);C(this,"interruptAlpha",0);C(this,"totalAlpha",0);C(this,"mixBlend",re.replace);C(this,"timelineMode",new Array);C(this,"timelineHoldMix",new Array);C(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(e){this._mixDuration=e}setMixDurationWithDelay(e,t){this._mixDuration=e,this.previous!=null&&t<=0&&(t+=this.previous.getTrackComplete()-e),this.delay=t}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(e){this.animationLast=e,this.nextAnimationLast=e}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}}class o9{constructor(e){C(this,"objects",[]);C(this,"drainDisabled",!1);C(this,"animState");this.animState=e}start(e){this.objects.push(pn.start),this.objects.push(e),this.animState.animationsChanged=!0}interrupt(e){this.objects.push(pn.interrupt),this.objects.push(e)}end(e){this.objects.push(pn.end),this.objects.push(e),this.animState.animationsChanged=!0}dispose(e){this.objects.push(pn.dispose),this.objects.push(e)}complete(e){this.objects.push(pn.complete),this.objects.push(e)}event(e,t){this.objects.push(pn.event),this.objects.push(e),this.objects.push(t)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let e=this.objects,t=this.animState.listeners;for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];switch(i){case pn.start:s.listener&&s.listener.start&&s.listener.start(s);for(let a=0;a<t.length;a++){let l=t[a];l.start&&l.start(s)}break;case pn.interrupt:s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(let a=0;a<t.length;a++){let l=t[a];l.interrupt&&l.interrupt(s)}break;case pn.end:s.listener&&s.listener.end&&s.listener.end(s);for(let a=0;a<t.length;a++){let l=t[a];l.end&&l.end(s)}case pn.dispose:s.listener&&s.listener.dispose&&s.listener.dispose(s);for(let a=0;a<t.length;a++){let l=t[a];l.dispose&&l.dispose(s)}this.animState.trackEntryPool.free(s);break;case pn.complete:s.listener&&s.listener.complete&&s.listener.complete(s);for(let a=0;a<t.length;a++){let l=t[a];l.complete&&l.complete(s)}break;case pn.event:let o=e[n+++2];s.listener&&s.listener.event&&s.listener.event(s,o);for(let a=0;a<t.length;a++){let l=t[a];l.event&&l.event(s,o)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var pn;(function(r){r[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event"})(pn||(pn={}));const Gy=0,zP=1,YP=2,Wy=3,a9=4,GP=1,l9=2;class u9{constructor(e){C(this,"skeletonData");C(this,"animationToMixTime",{});C(this,"defaultMix",0);if(!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}setMix(e,t,n){let i=this.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);this.setMixWith(i,s,n)}setMixWith(e,t,n){if(!e)throw new Error("from cannot be null.");if(!t)throw new Error("to cannot be null.");let i=e.name+"."+t.name;this.animationToMixTime[i]=n}getMix(e,t){let n=e.name+"."+t.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i}}class kb extends Zi{constructor(t){super(t);C(this,"color",new Xe(1,1,1,1))}copy(){let t=new kb(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Id extends Zi{constructor(t){super(t);C(this,"endSlot",null);C(this,"color",new Xe(.2275,.2275,.8078,1))}copy(){let t=new Id(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class c9{constructor(e){C(this,"_image");this._image=e}getImage(){return this._image}}var wr;(function(r){r[r.Nearest=9728]="Nearest",r[r.Linear=9729]="Linear",r[r.MipMap=9987]="MipMap",r[r.MipMapNearestNearest=9984]="MipMapNearestNearest",r[r.MipMapLinearNearest=9985]="MipMapLinearNearest",r[r.MipMapNearestLinear=9986]="MipMapNearestLinear",r[r.MipMapLinearLinear=9987]="MipMapLinearLinear"})(wr||(wr={}));var yo;(function(r){r[r.MirroredRepeat=33648]="MirroredRepeat",r[r.ClampToEdge=33071]="ClampToEdge",r[r.Repeat=10497]="Repeat"})(yo||(yo={}));class h9{constructor(){C(this,"texture");C(this,"u",0);C(this,"v",0);C(this,"u2",0);C(this,"v2",0);C(this,"width",0);C(this,"height",0);C(this,"degrees",0);C(this,"offsetX",0);C(this,"offsetY",0);C(this,"originalWidth",0);C(this,"originalHeight",0)}}class d9{constructor(e){C(this,"pages",new Array);C(this,"regions",new Array);let t=new f9(e),n=new Array(4),i={};i.size=h=>{h.width=parseInt(n[1]),h.height=parseInt(n[2])},i.format=()=>{},i.filter=h=>{h.minFilter=me.enumValue(wr,n[1]),h.magFilter=me.enumValue(wr,n[2])},i.repeat=h=>{n[1].indexOf("x")!=-1&&(h.uWrap=yo.Repeat),n[1].indexOf("y")!=-1&&(h.vWrap=yo.Repeat)},i.pma=h=>{h.pma=n[1]=="true"};var s={};s.xy=h=>{h.x=parseInt(n[1]),h.y=parseInt(n[2])},s.size=h=>{h.width=parseInt(n[1]),h.height=parseInt(n[2])},s.bounds=h=>{h.x=parseInt(n[1]),h.y=parseInt(n[2]),h.width=parseInt(n[3]),h.height=parseInt(n[4])},s.offset=h=>{h.offsetX=parseInt(n[1]),h.offsetY=parseInt(n[2])},s.orig=h=>{h.originalWidth=parseInt(n[1]),h.originalHeight=parseInt(n[2])},s.offsets=h=>{h.offsetX=parseInt(n[1]),h.offsetY=parseInt(n[2]),h.originalWidth=parseInt(n[3]),h.originalHeight=parseInt(n[4])},s.rotate=h=>{let c=n[1];c=="true"?h.degrees=90:c!="false"&&(h.degrees=parseInt(c))},s.index=h=>{h.index=parseInt(n[1])};let o=t.readLine();for(;o&&o.trim().length==0;)o=t.readLine();for(;!(!o||o.trim().length==0||t.readEntry(n,o)==0);)o=t.readLine();let a=null,l=null,u=null;for(;o!==null;)if(o.trim().length==0)a=null,o=t.readLine();else if(a){let h=new WO(a,o);for(;;){let c=t.readEntry(n,o=t.readLine());if(c==0)break;let d=s[n[0]];if(d)d(h);else{l||(l=[]),u||(u=[]),l.push(n[0]);let f=[];for(let g=0;g<c;g++)f.push(parseInt(n[g+1]));u.push(f)}}h.originalWidth==0&&h.originalHeight==0&&(h.originalWidth=h.width,h.originalHeight=h.height),l&&l.length>0&&u&&u.length>0&&(h.names=l,h.values=u,l=null,u=null),h.u=h.x/a.width,h.v=h.y/a.height,h.degrees==90?(h.u2=(h.x+h.height)/a.width,h.v2=(h.y+h.width)/a.height):(h.u2=(h.x+h.width)/a.width,h.v2=(h.y+h.height)/a.height),this.regions.push(h)}else{for(a=new p9(o.trim());t.readEntry(n,o=t.readLine())!=0;){let h=i[n[0]];h&&h(a)}this.pages.push(a)}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(e,t=""){for(let n of this.pages)n.setTexture(e.get(t+n.name))}dispose(){var e;for(let t=0;t<this.pages.length;t++)(e=this.pages[t].texture)==null||e.dispose()}}class f9{constructor(e){C(this,"lines");C(this,"index",0);this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,t){if(!t||(t=t.trim(),t.length==0))return 0;let n=t.indexOf(":");if(n==-1)return 0;e[0]=t.substr(0,n).trim();for(let i=1,s=n+1;;i++){let o=t.indexOf(",",s);if(o==-1)return e[i]=t.substr(s).trim(),i;if(e[i]=t.substr(s,o-s).trim(),s=o+1,i==4)return 4}}}class p9{constructor(e){C(this,"name");C(this,"minFilter",wr.Nearest);C(this,"magFilter",wr.Nearest);C(this,"uWrap",yo.ClampToEdge);C(this,"vWrap",yo.ClampToEdge);C(this,"texture",null);C(this,"width",0);C(this,"height",0);C(this,"pma",!1);C(this,"regions",new Array);this.name=e}setTexture(e){this.texture=e,e.setFilters(this.minFilter,this.magFilter),e.setWraps(this.uWrap,this.vWrap);for(let t of this.regions)t.texture=e}}class WO extends h9{constructor(t,n){super();C(this,"page");C(this,"name");C(this,"x",0);C(this,"y",0);C(this,"offsetX",0);C(this,"offsetY",0);C(this,"originalWidth",0);C(this,"originalHeight",0);C(this,"index",0);C(this,"degrees",0);C(this,"names",null);C(this,"values",null);this.page=t,this.name=n,t.regions.push(this)}}class bl extends Zi{constructor(t,n){super(t);C(this,"region",null);C(this,"path");C(this,"regionUVs",[]);C(this,"uvs",[]);C(this,"triangles",[]);C(this,"color",new Xe(1,1,1,1));C(this,"width",0);C(this,"height",0);C(this,"hullLength",0);C(this,"edges",[]);C(this,"parentMesh",null);C(this,"sequence",null);C(this,"tempColor",new Xe(0,0,0,0));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=me.newFloatArray(t.length));let n=this.uvs,i=this.uvs.length,s=this.region.u,o=this.region.v,a=0,l=0;if(this.region instanceof WO){let u=this.region,h=u.page,c=h.width,d=h.height;switch(u.degrees){case 90:s-=(u.originalHeight-u.offsetY-u.height)/c,o-=(u.originalWidth-u.offsetX-u.width)/d,a=u.originalHeight/c,l=u.originalWidth/d;for(let f=0;f<i;f+=2)n[f]=s+t[f+1]*a,n[f+1]=o+(1-t[f])*l;return;case 180:s-=(u.originalWidth-u.offsetX-u.width)/c,o-=u.offsetY/d,a=u.originalWidth/c,l=u.originalHeight/d;for(let f=0;f<i;f+=2)n[f]=s+(1-t[f])*a,n[f+1]=o+(1-t[f+1])*l;return;case 270:s-=u.offsetY/c,o-=u.offsetX/d,a=u.originalHeight/c,l=u.originalWidth/d;for(let f=0;f<i;f+=2)n[f]=s+(1-t[f+1])*a,n[f+1]=o+t[f]*l;return}s-=u.offsetX/c,o-=(u.originalHeight-u.offsetY-u.height)/d,a=u.originalWidth/c,l=u.originalHeight/d}else this.region?(a=this.region.u2-s,l=this.region.v2-o):(s=o=0,a=l=1);for(let u=0;u<i;u+=2)n[u]=s+t[u]*a,n[u+1]=o+t[u+1]*l}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new bl(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),me.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),me.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),me.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),me.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,n,i,s,o,a){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,n,i,s,o,a)}newLinkedMesh(){let t=new bl(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.region!=null&&t.updateRegion(),t}}class dc extends Zi{constructor(t){super(t);C(this,"lengths",[]);C(this,"closed",!1);C(this,"constantSpeed",!1);C(this,"color",new Xe(1,1,1,1))}copy(){let t=new dc(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),me.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Ib extends Zi{constructor(t){super(t);C(this,"x",0);C(this,"y",0);C(this,"rotation",0);C(this,"color",new Xe(.38,.94,0,1))}computeWorldPosition(t,n){return n.x=this.x*t.a+this.y*t.b+t.worldX,n.y=this.x*t.c+this.y*t.d+t.worldY,n}computeWorldRotation(t){const n=this.rotation*ce.degRad,i=Math.cos(n),s=Math.sin(n),o=i*t.a+s*t.b,a=i*t.c+s*t.d;return ce.atan2Deg(a,o)}copy(){let t=new Ib(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}const tt=class tt extends vO{constructor(t,n){super(t);C(this,"x",0);C(this,"y",0);C(this,"scaleX",1);C(this,"scaleY",1);C(this,"rotation",0);C(this,"width",0);C(this,"height",0);C(this,"color",new Xe(1,1,1,1));C(this,"path");C(this,"region",null);C(this,"sequence",null);C(this,"offset",me.newFloatArray(8));C(this,"uvs",me.newFloatArray(8));C(this,"tempColor",new Xe(1,1,1,1));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,n=this.uvs;if(t==null){n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=1,n[5]=1,n[6]=1,n[7]=0;return}let i=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,o=-this.width/2*this.scaleX+this.region.offsetX*i,a=-this.height/2*this.scaleY+this.region.offsetY*s,l=o+this.region.width*i,u=a+this.region.height*s,h=this.rotation*ce.degRad,c=Math.cos(h),d=Math.sin(h),f=this.x,g=this.y,v=o*c+f,x=o*d,y=a*c+g,b=a*d,_=l*c+f,S=l*d,I=u*c+g,A=u*d,k=this.offset;k[0]=v-b,k[1]=y+x,k[2]=v-A,k[3]=I+x,k[4]=_-A,k[5]=I+S,k[6]=_-b,k[7]=y+S,t.degrees==90?(n[0]=t.u2,n[1]=t.v2,n[2]=t.u,n[3]=t.v2,n[4]=t.u,n[5]=t.v,n[6]=t.u2,n[7]=t.v):(n[0]=t.u,n[1]=t.v2,n[2]=t.u,n[3]=t.v,n[4]=t.u2,n[5]=t.v,n[6]=t.u2,n[7]=t.v2)}computeWorldVertices(t,n,i,s){this.sequence!=null&&this.sequence.apply(t,this);let o=t.bone,a=this.offset,l=o.worldX,u=o.worldY,h=o.a,c=o.b,d=o.c,f=o.d,g=0,v=0;g=a[0],v=a[1],n[i]=g*h+v*c+l,n[i+1]=g*d+v*f+u,i+=s,g=a[2],v=a[3],n[i]=g*h+v*c+l,n[i+1]=g*d+v*f+u,i+=s,g=a[4],v=a[5],n[i]=g*h+v*c+l,n[i+1]=g*d+v*f+u,i+=s,g=a[6],v=a[7],n[i]=g*h+v*c+l,n[i+1]=g*d+v*f+u}copy(){let t=new tt(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,me.arrayCopy(this.uvs,0,t.uvs,0,8),me.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=this.sequence!=null?this.sequence.copy():null,t}};C(tt,"X1",0),C(tt,"Y1",1),C(tt,"C1R",2),C(tt,"C1G",3),C(tt,"C1B",4),C(tt,"C1A",5),C(tt,"U1",6),C(tt,"V1",7),C(tt,"X2",8),C(tt,"Y2",9),C(tt,"C2R",10),C(tt,"C2G",11),C(tt,"C2B",12),C(tt,"C2A",13),C(tt,"U2",14),C(tt,"V2",15),C(tt,"X3",16),C(tt,"Y3",17),C(tt,"C3R",18),C(tt,"C3G",19),C(tt,"C3B",20),C(tt,"C3A",21),C(tt,"U3",22),C(tt,"V3",23),C(tt,"X4",24),C(tt,"Y4",25),C(tt,"C4R",26),C(tt,"C4G",27),C(tt,"C4B",28),C(tt,"C4A",29),C(tt,"U4",30),C(tt,"V4",31);let ld=tt;class m9{constructor(e){C(this,"atlas");this.atlas=e}loadSequence(e,t,n){let i=n.regions;for(let s=0,o=i.length;s<o;s++){let a=n.getPath(t,s),l=this.atlas.findRegion(a);if(l==null)throw new Error("Region not found in atlas: "+a+" (sequence: "+e+")");i[s]=l}}newRegionAttachment(e,t,n,i){let s=new ld(t,n);if(i!=null)this.loadSequence(t,n,i);else{let o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (region attachment: "+t+")");s.region=o}return s}newMeshAttachment(e,t,n,i){let s=new bl(t,n);if(i!=null)this.loadSequence(t,n,i);else{let o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+t+")");s.region=o}return s}newBoundingBoxAttachment(e,t){return new kb(t)}newPathAttachment(e,t){return new dc(t)}newPointAttachment(e,t){return new Ib(t)}newClippingAttachment(e,t){return new Id(t)}}class VO{constructor(e,t,n){C(this,"index",0);C(this,"name");C(this,"parent",null);C(this,"length",0);C(this,"x",0);C(this,"y",0);C(this,"rotation",0);C(this,"scaleX",1);C(this,"scaleY",1);C(this,"shearX",0);C(this,"shearY",0);C(this,"inherit",Dt.Normal);C(this,"skinRequired",!1);C(this,"color",new Xe);C(this,"icon");C(this,"visible",!1);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=n}}var Dt;(function(r){r[r.Normal=0]="Normal",r[r.OnlyTranslation=1]="OnlyTranslation",r[r.NoRotationOrReflection=2]="NoRotationOrReflection",r[r.NoScale=3]="NoScale",r[r.NoScaleOrReflection=4]="NoScaleOrReflection"})(Dt||(Dt={}));class WP{constructor(e,t,n){C(this,"data");C(this,"skeleton");C(this,"parent",null);C(this,"children",new Array);C(this,"x",0);C(this,"y",0);C(this,"rotation",0);C(this,"scaleX",0);C(this,"scaleY",0);C(this,"shearX",0);C(this,"shearY",0);C(this,"ax",0);C(this,"ay",0);C(this,"arotation",0);C(this,"ascaleX",0);C(this,"ascaleY",0);C(this,"ashearX",0);C(this,"ashearY",0);C(this,"a",0);C(this,"b",0);C(this,"c",0);C(this,"d",0);C(this,"worldY",0);C(this,"worldX",0);C(this,"inherit",Dt.Normal);C(this,"sorted",!1);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=n,this.setToSetupPose()}isActive(){return this.active}update(e){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,t,n,i,s,o,a){this.ax=e,this.ay=t,this.arotation=n,this.ascaleX=i,this.ascaleY=s,this.ashearX=o,this.ashearY=a;let l=this.parent;if(!l){let f=this.skeleton;const g=f.scaleX,v=f.scaleY,x=(n+o)*ce.degRad,y=(n+90+a)*ce.degRad;this.a=Math.cos(x)*i*g,this.b=Math.cos(y)*s*g,this.c=Math.sin(x)*i*v,this.d=Math.sin(y)*s*v,this.worldX=e*g+f.x,this.worldY=t*v+f.y;return}let u=l.a,h=l.b,c=l.c,d=l.d;switch(this.worldX=u*e+h*t+l.worldX,this.worldY=c*e+d*t+l.worldY,this.inherit){case Dt.Normal:{const f=(n+o)*ce.degRad,g=(n+90+a)*ce.degRad,v=Math.cos(f)*i,x=Math.cos(g)*s,y=Math.sin(f)*i,b=Math.sin(g)*s;this.a=u*v+h*y,this.b=u*x+h*b,this.c=c*v+d*y,this.d=c*x+d*b;return}case Dt.OnlyTranslation:{const f=(n+o)*ce.degRad,g=(n+90+a)*ce.degRad;this.a=Math.cos(f)*i,this.b=Math.cos(g)*s,this.c=Math.sin(f)*i,this.d=Math.sin(g)*s;break}case Dt.NoRotationOrReflection:{let f=u*u+c*c,g=0;f>1e-4?(f=Math.abs(u*d-h*c)/f,u/=this.skeleton.scaleX,c/=this.skeleton.scaleY,h=c*f,d=u*f,g=Math.atan2(c,u)*ce.radDeg):(u=0,c=0,g=90-Math.atan2(d,h)*ce.radDeg);const v=(n+o-g)*ce.degRad,x=(n+a-g+90)*ce.degRad,y=Math.cos(v)*i,b=Math.cos(x)*s,_=Math.sin(v)*i,S=Math.sin(x)*s;this.a=u*y-h*_,this.b=u*b-h*S,this.c=c*y+d*_,this.d=c*b+d*S;break}case Dt.NoScale:case Dt.NoScaleOrReflection:{n*=ce.degRad;const f=Math.cos(n),g=Math.sin(n);let v=(u*f+h*g)/this.skeleton.scaleX,x=(c*f+d*g)/this.skeleton.scaleY,y=Math.sqrt(v*v+x*x);y>1e-5&&(y=1/y),v*=y,x*=y,y=Math.sqrt(v*v+x*x),this.inherit==Dt.NoScale&&u*d-h*c<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(y=-y),n=Math.PI/2+Math.atan2(x,v);const b=Math.cos(n)*y,_=Math.sin(n)*y;o*=ce.degRad,a=(90+a)*ce.degRad;const S=Math.cos(o)*i,I=Math.cos(a)*s,A=Math.sin(o)*i,k=Math.sin(a)*s;this.a=v*S+b*A,this.b=v*I+b*k,this.c=x*S+_*A,this.d=x*I+_*k;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY,this.inherit=e.inherit}updateAppliedTransform(){let e=this.parent;if(!e){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*ce.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*ce.radDeg;return}let t=e.a,n=e.b,i=e.c,s=e.d,o=1/(t*s-n*i),a=s*o,l=n*o,u=i*o,h=t*o,c=this.worldX-e.worldX,d=this.worldY-e.worldY;this.ax=c*a-d*l,this.ay=d*h-c*u;let f,g,v,x;if(this.inherit==Dt.OnlyTranslation)f=this.a,g=this.b,v=this.c,x=this.d;else{switch(this.inherit){case Dt.NoRotationOrReflection:{let I=Math.abs(t*s-n*i)/(t*t+i*i),A=t/this.skeleton.scaleX;n=-(i/this.skeleton.scaleY)*I*this.skeleton.scaleX,s=A*I*this.skeleton.scaleY,o=1/(t*s-n*i),a=s*o,l=n*o;break}case Dt.NoScale:case Dt.NoScaleOrReflection:let y=ce.cosDeg(this.rotation),b=ce.sinDeg(this.rotation);t=(t*y+n*b)/this.skeleton.scaleX,i=(i*y+s*b)/this.skeleton.scaleY;let _=Math.sqrt(t*t+i*i);_>1e-5&&(_=1/_),t*=_,i*=_,_=Math.sqrt(t*t+i*i),this.inherit==Dt.NoScale&&o<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let S=ce.PI/2+Math.atan2(i,t);n=Math.cos(S)*_,s=Math.sin(S)*_,o=1/(t*s-n*i),a=s*o,l=n*o,u=i*o,h=t*o}f=a*this.a-l*this.c,g=a*this.b-l*this.d,v=h*this.c-u*this.a,x=h*this.d-u*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(f*f+v*v),this.ascaleX>1e-4){let y=f*x-g*v;this.ascaleY=y/this.ascaleX,this.ashearY=-Math.atan2(f*g+v*x,y)*ce.radDeg,this.arotation=Math.atan2(v,f)*ce.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(g*g+x*x),this.ashearY=0,this.arotation=90-Math.atan2(x,g)*ce.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*ce.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*ce.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(e){let t=1/(this.a*this.d-this.b*this.c),n=e.x-this.worldX,i=e.y-this.worldY;return e.x=n*this.d*t-i*this.b*t,e.y=i*this.a*t-n*this.c*t,e}localToWorld(e){let t=e.x,n=e.y;return e.x=t*this.a+n*this.b+this.worldX,e.y=t*this.c+n*this.d+this.worldY,e}worldToParent(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.worldToLocal(e)}parentToWorld(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.localToWorld(e)}worldToLocalRotation(e){let t=ce.sinDeg(e),n=ce.cosDeg(e);return Math.atan2(this.a*t-this.c*n,this.d*n-this.b*t)*ce.radDeg+this.rotation-this.shearX}localToWorldRotation(e){e-=this.rotation-this.shearX;let t=ce.sinDeg(e),n=ce.cosDeg(e);return Math.atan2(n*this.c+t*this.d,n*this.a+t*this.b)*ce.radDeg}rotateWorld(e){e*=ce.degRad;const t=Math.sin(e),n=Math.cos(e),i=this.a,s=this.b;this.a=n*i-t*this.c,this.b=n*s-t*this.d,this.c=t*i+n*this.c,this.d=t*s+n*this.d}}class a0{constructor(e,t,n){C(this,"name");C(this,"order");C(this,"skinRequired");this.name=e,this.order=t,this.skinRequired=n}}let qO=class{constructor(e,t){C(this,"data");C(this,"intValue",0);C(this,"floatValue",0);C(this,"stringValue",null);C(this,"time",0);C(this,"volume",0);C(this,"balance",0);if(!t)throw new Error("data cannot be null.");this.time=e,this.data=t}};class KO{constructor(e){C(this,"name");C(this,"intValue",0);C(this,"floatValue",0);C(this,"stringValue",null);C(this,"audioPath",null);C(this,"volume",0);C(this,"balance",0);this.name=e}}class g9{constructor(e,t){C(this,"data");C(this,"bones");C(this,"target");C(this,"bendDirection",0);C(this,"compress",!1);C(this,"stretch",!1);C(this,"mix",1);C(this,"softness",0);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0;i<e.bones.length;i++){let s=t.findBone(e.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${e.bones[i].name}`);this.bones.push(s)}let n=t.findBone(e.target.name);if(!n)throw new Error(`Couldn't find bone ${e.target.name}`);this.target=n,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}update(e){if(this.mix==0)return;let t=this.target,n=this.bones;switch(n.length){case 1:this.apply1(n[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(n[0],n[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(e,t,n,i,s,o,a){let l=e.parent;if(!l)throw new Error("IK bone must have parent.");let u=l.a,h=l.b,c=l.c,d=l.d,f=-e.ashearX-e.arotation,g=0,v=0;switch(e.inherit){case Dt.OnlyTranslation:g=(t-e.worldX)*ce.signum(e.skeleton.scaleX),v=(n-e.worldY)*ce.signum(e.skeleton.scaleY);break;case Dt.NoRotationOrReflection:let b=Math.abs(u*d-h*c)/Math.max(1e-4,u*u+c*c),_=u/e.skeleton.scaleX,S=c/e.skeleton.scaleY;h=-S*b*e.skeleton.scaleX,d=_*b*e.skeleton.scaleY,f+=Math.atan2(S,_)*ce.radDeg;default:let I=t-l.worldX,A=n-l.worldY,k=u*d-h*c;Math.abs(k)<=1e-4?(g=0,v=0):(g=(I*d-A*h)/k-e.ax,v=(A*u-I*c)/k-e.ay)}f+=Math.atan2(v,g)*ce.radDeg,e.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);let x=e.ascaleX,y=e.ascaleY;if(i||s){switch(e.inherit){case Dt.NoScale:case Dt.NoScaleOrReflection:g=t-e.worldX,v=n-e.worldY}const b=e.data.length*x;if(b>1e-4){const _=g*g+v*v;if(i&&_<b*b||s&&_>b*b){const S=(Math.sqrt(_)/b-1)*a+1;x*=S,o&&(y*=S)}}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+f*a,x,y,e.ashearX,e.ashearY)}apply2(e,t,n,i,s,o,a,l,u){if(e.inherit!=Dt.Normal||t.inherit!=Dt.Normal)return;let h=e.ax,c=e.ay,d=e.ascaleX,f=e.ascaleY,g=d,v=f,x=t.ascaleX,y=0,b=0,_=0;d<0?(d=-d,y=180,_=-1):(y=0,_=1),f<0&&(f=-f,_=-_),x<0?(x=-x,b=180):b=0;let S=t.ax,I=0,A=0,k=0,M=e.a,O=e.b,L=e.c,D=e.d,j=Math.abs(d-f)<=1e-4;!j||o?(I=0,A=M*S+e.worldX,k=L*S+e.worldY):(I=t.ay,A=M*S+O*I+e.worldX,k=L*S+D*I+e.worldY);let F=e.parent;if(!F)throw new Error("IK parent must itself have a parent.");M=F.a,O=F.b,L=F.c,D=F.d;let B=M*D-O*L,X=A-F.worldX,V=k-F.worldY;B=Math.abs(B)<=1e-4?0:1/B;let Q=(X*D-V*O)*B-h,H=(V*M-X*L)*B-c,G=Math.sqrt(Q*Q+H*H),$=t.data.length*x,W,Z;if(G<1e-4){this.apply1(e,n,i,!1,o,!1,u),t.updateWorldTransformWith(S,I,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);return}X=n-F.worldX,V=i-F.worldY;let se=(X*D-V*O)*B-h,ae=(V*M-X*L)*B-c,ye=se*se+ae*ae;if(l!=0){l*=d*(x+1)*.5;let ze=Math.sqrt(ye),Ve=ze-G-$*d+l;if(Ve>0){let $e=Math.min(1,Ve/(l*2))-1;$e=(Ve-l*(1-$e*$e))/ze,se-=$e*se,ae-=$e*ae,ye=se*se+ae*ae}}e:if(j){$*=d;let ze=(ye-G*G-$*$)/(2*G*$);ze<-1?(ze=-1,Z=Math.PI*s):ze>1?(ze=1,Z=0,o&&(M=(Math.sqrt(ye)/(G+$)-1)*u+1,g*=M,a&&(v*=M))):Z=Math.acos(ze)*s,M=G+$*ze,O=$*Math.sin(Z),W=Math.atan2(ae*M-se*O,se*M+ae*O)}else{M=d*$,O=f*$;let ze=M*M,Ve=O*O,$e=Math.atan2(ae,se);L=Ve*G*G+ze*ye-ze*Ve;let Le=-2*Ve*G,ct=Ve-ze;if(D=Le*Le-4*ct*L,D>=0){let Io=Math.sqrt(D);Le<0&&(Io=-Io),Io=-(Le+Io)*.5;let Bd=Io/ct,Ld=L/Io,Wn=Math.abs(Bd)<Math.abs(Ld)?Bd:Ld;if(Wn*Wn<=ye){V=Math.sqrt(ye-Wn*Wn)*s,W=$e-Math.atan2(V,Wn),Z=Math.atan2(V/f,(Wn-G)/d);break e}}let Je=ce.PI,Pr=G-M,Dr=Pr*Pr,rs=0,Ml=0,gi=G+M,Tc=gi*gi,ko=0;L=-M*G/(ze-Ve),L>=-1&&L<=1&&(L=Math.acos(L),X=M*Math.cos(L)+G,V=O*Math.sin(L),D=X*X+V*V,D<Dr&&(Je=L,Dr=D,Pr=X,rs=V),D>Tc&&(Ml=L,Tc=D,gi=X,ko=V)),ye<=(Dr+Tc)*.5?(W=$e-Math.atan2(rs*s,Pr),Z=Je*s):(W=$e-Math.atan2(ko*s,gi),Z=Ml*s)}let Oe=Math.atan2(I,S)*_,Be=e.arotation;W=(W-Oe)*ce.radDeg+y-Be,W>180?W-=360:W<-180&&(W+=360),e.updateWorldTransformWith(h,c,Be+W*u,g,v,0,0),Be=t.arotation,Z=((Z+Oe)*ce.radDeg-t.ashearX)*_+b-Be,Z>180?Z-=360:Z<-180&&(Z+=360),t.updateWorldTransformWith(S,I,Be+Z*u,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}}class QO extends a0{constructor(t){super(t,0,!1);C(this,"bones",new Array);C(this,"_target",null);C(this,"bendDirection",0);C(this,"compress",!1);C(this,"stretch",!1);C(this,"uniform",!1);C(this,"mix",0);C(this,"softness",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class ZO extends a0{constructor(t){super(t,0,!1);C(this,"bones",new Array);C(this,"_target",null);C(this,"positionMode",Ns.Fixed);C(this,"spacingMode",fr.Fixed);C(this,"rotateMode",dl.Chain);C(this,"offsetRotation",0);C(this,"position",0);C(this,"spacing",0);C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var Ns;(function(r){r[r.Fixed=0]="Fixed",r[r.Percent=1]="Percent"})(Ns||(Ns={}));var fr;(function(r){r[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",r[r.Proportional=3]="Proportional"})(fr||(fr={}));var dl;(function(r){r[r.Tangent=0]="Tangent",r[r.Chain=1]="Chain",r[r.ChainScale=2]="ChainScale"})(dl||(dl={}));const Nn=class Nn{constructor(e,t){C(this,"data");C(this,"bones");C(this,"target");C(this,"position",0);C(this,"spacing",0);C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0);C(this,"spaces",new Array);C(this,"positions",new Array);C(this,"world",new Array);C(this,"curves",new Array);C(this,"lengths",new Array);C(this,"segments",new Array);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0,s=e.bones.length;i<s;i++){let o=t.findBone(e.bones[i].name);if(!o)throw new Error(`Couldn't find bone ${e.bones[i].name}.`);this.bones.push(o)}let n=t.findSlot(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=n,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}update(e){let t=this.target.getAttachment();if(!(t instanceof dc))return;let n=this.mixRotate,i=this.mixX,s=this.mixY;if(n==0&&i==0&&s==0)return;let o=this.data,a=o.rotateMode==dl.Tangent,l=o.rotateMode==dl.ChainScale,u=this.bones,h=u.length,c=a?h:h+1,d=me.setArraySize(this.spaces,c),f=l?this.lengths=me.setArraySize(this.lengths,h):[],g=this.spacing;switch(o.spacingMode){case fr.Percent:if(l)for(let A=0,k=c-1;A<k;A++){let M=u[A],O=M.data.length,L=O*M.a,D=O*M.c;f[A]=Math.sqrt(L*L+D*D)}me.arrayFill(d,1,c,g);break;case fr.Proportional:let S=0;for(let A=0,k=c-1;A<k;){let M=u[A],O=M.data.length;if(O<Nn.epsilon)l&&(f[A]=0),d[++A]=g;else{let L=O*M.a,D=O*M.c,j=Math.sqrt(L*L+D*D);l&&(f[A]=j),d[++A]=j,S+=j}}if(S>0){S=c/S*g;for(let A=1;A<c;A++)d[A]*=S}break;default:let I=o.spacingMode==fr.Length;for(let A=0,k=c-1;A<k;){let M=u[A],O=M.data.length;if(O<Nn.epsilon)l&&(f[A]=0),d[++A]=g;else{let L=O*M.a,D=O*M.c,j=Math.sqrt(L*L+D*D);l&&(f[A]=j),d[++A]=(I?O+g:g)*j/O}}}let v=this.computeWorldPositions(t,c,a),x=v[0],y=v[1],b=o.offsetRotation,_=!1;if(b==0)_=o.rotateMode==dl.Chain;else{_=!1;let S=this.target.bone;b*=S.a*S.d-S.b*S.c>0?ce.degRad:-ce.degRad}for(let S=0,I=3;S<h;S++,I+=3){let A=u[S];A.worldX+=(x-A.worldX)*i,A.worldY+=(y-A.worldY)*s;let k=v[I],M=v[I+1],O=k-x,L=M-y;if(l){let D=f[S];if(D!=0){let j=(Math.sqrt(O*O+L*L)/D-1)*n+1;A.a*=j,A.c*=j}}if(x=k,y=M,n>0){let D=A.a,j=A.b,F=A.c,B=A.d,X=0,V=0,Q=0;if(a?X=v[I-1]:d[S+1]==0?X=v[I+2]:X=Math.atan2(L,O),X-=Math.atan2(F,D),_){V=Math.cos(X),Q=Math.sin(X);let H=A.data.length;x+=(H*(V*D-Q*F)-O)*n,y+=(H*(Q*D+V*F)-L)*n}else X+=b;X>ce.PI?X-=ce.PI2:X<-ce.PI&&(X+=ce.PI2),X*=n,V=Math.cos(X),Q=Math.sin(X),A.a=V*D-Q*F,A.b=V*j-Q*B,A.c=Q*D+V*F,A.d=Q*j+V*B}A.updateAppliedTransform()}}computeWorldPositions(e,t,n){let i=this.target,s=this.position,o=this.spaces,a=me.setArraySize(this.positions,t*3+2),l=this.world,u=e.closed,h=e.worldVerticesLength,c=h/6,d=Nn.NONE;if(!e.constantSpeed){let H=e.lengths;c-=u?1:2;let G=H[c];this.data.positionMode==Ns.Percent&&(s*=G);let $;switch(this.data.spacingMode){case fr.Percent:$=G;break;case fr.Proportional:$=G/t;break;default:$=1}l=me.setArraySize(this.world,8);for(let W=0,Z=0,se=0;W<t;W++,Z+=3){let ae=o[W]*$;s+=ae;let ye=s;if(u)ye%=G,ye<0&&(ye+=G),se=0;else if(ye<0){d!=Nn.BEFORE&&(d=Nn.BEFORE,e.computeWorldVertices(i,2,4,l,0,2)),this.addBeforePosition(ye,l,0,a,Z);continue}else if(ye>G){d!=Nn.AFTER&&(d=Nn.AFTER,e.computeWorldVertices(i,h-6,4,l,0,2)),this.addAfterPosition(ye-G,l,0,a,Z);continue}for(;;se++){let Oe=H[se];if(!(ye>Oe)){if(se==0)ye/=Oe;else{let Be=H[se-1];ye=(ye-Be)/(Oe-Be)}break}}se!=d&&(d=se,u&&se==c?(e.computeWorldVertices(i,h-4,4,l,0,2),e.computeWorldVertices(i,0,4,l,4,2)):e.computeWorldVertices(i,se*6+2,8,l,0,2)),this.addCurvePosition(ye,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],a,Z,n||W>0&&ae==0)}return a}u?(h+=2,l=me.setArraySize(this.world,h),e.computeWorldVertices(i,2,h-4,l,0,2),e.computeWorldVertices(i,0,2,l,h-4,2),l[h-2]=l[0],l[h-1]=l[1]):(c--,h-=4,l=me.setArraySize(this.world,h),e.computeWorldVertices(i,2,h,l,0,2));let f=me.setArraySize(this.curves,c),g=0,v=l[0],x=l[1],y=0,b=0,_=0,S=0,I=0,A=0,k=0,M=0,O=0,L=0,D=0,j=0,F=0,B=0;for(let H=0,G=2;H<c;H++,G+=6)y=l[G],b=l[G+1],_=l[G+2],S=l[G+3],I=l[G+4],A=l[G+5],k=(v-y*2+_)*.1875,M=(x-b*2+S)*.1875,O=((y-_)*3-v+I)*.09375,L=((b-S)*3-x+A)*.09375,D=k*2+O,j=M*2+L,F=(y-v)*.75+k+O*.16666667,B=(b-x)*.75+M+L*.16666667,g+=Math.sqrt(F*F+B*B),F+=D,B+=j,D+=O,j+=L,g+=Math.sqrt(F*F+B*B),F+=D,B+=j,g+=Math.sqrt(F*F+B*B),F+=D+O,B+=j+L,g+=Math.sqrt(F*F+B*B),f[H]=g,v=I,x=A;this.data.positionMode==Ns.Percent&&(s*=g);let X;switch(this.data.spacingMode){case fr.Percent:X=g;break;case fr.Proportional:X=g/t;break;default:X=1}let V=this.segments,Q=0;for(let H=0,G=0,$=0,W=0;H<t;H++,G+=3){let Z=o[H]*X;s+=Z;let se=s;if(u)se%=g,se<0&&(se+=g),$=0;else if(se<0){this.addBeforePosition(se,l,0,a,G);continue}else if(se>g){this.addAfterPosition(se-g,l,h-4,a,G);continue}for(;;$++){let ae=f[$];if(!(se>ae)){if($==0)se/=ae;else{let ye=f[$-1];se=(se-ye)/(ae-ye)}break}}if($!=d){d=$;let ae=$*6;for(v=l[ae],x=l[ae+1],y=l[ae+2],b=l[ae+3],_=l[ae+4],S=l[ae+5],I=l[ae+6],A=l[ae+7],k=(v-y*2+_)*.03,M=(x-b*2+S)*.03,O=((y-_)*3-v+I)*.006,L=((b-S)*3-x+A)*.006,D=k*2+O,j=M*2+L,F=(y-v)*.3+k+O*.16666667,B=(b-x)*.3+M+L*.16666667,Q=Math.sqrt(F*F+B*B),V[0]=Q,ae=1;ae<8;ae++)F+=D,B+=j,D+=O,j+=L,Q+=Math.sqrt(F*F+B*B),V[ae]=Q;F+=D,B+=j,Q+=Math.sqrt(F*F+B*B),V[8]=Q,F+=D+O,B+=j+L,Q+=Math.sqrt(F*F+B*B),V[9]=Q,W=0}for(se*=Q;;W++){let ae=V[W];if(!(se>ae)){if(W==0)se/=ae;else{let ye=V[W-1];se=W+(se-ye)/(ae-ye)}break}}this.addCurvePosition(se*.1,v,x,y,b,_,S,I,A,a,G,n||H>0&&Z==0)}return a}addBeforePosition(e,t,n,i,s){let o=t[n],a=t[n+1],l=t[n+2]-o,u=t[n+3]-a,h=Math.atan2(u,l);i[s]=o+e*Math.cos(h),i[s+1]=a+e*Math.sin(h),i[s+2]=h}addAfterPosition(e,t,n,i,s){let o=t[n+2],a=t[n+3],l=o-t[n],u=a-t[n+1],h=Math.atan2(u,l);i[s]=o+e*Math.cos(h),i[s+1]=a+e*Math.sin(h),i[s+2]=h}addCurvePosition(e,t,n,i,s,o,a,l,u,h,c,d){if(e==0||isNaN(e)){h[c]=t,h[c+1]=n,h[c+2]=Math.atan2(s-n,i-t);return}let f=e*e,g=f*e,v=1-e,x=v*v,y=x*v,b=v*e,_=b*3,S=v*_,I=_*e,A=t*y+i*S+o*I+l*g,k=n*y+s*S+a*I+u*g;h[c]=A,h[c+1]=k,d&&(e<.001?h[c+2]=Math.atan2(s-n,i-t):h[c+2]=Math.atan2(k-(n*x+s*b*2+a*f),A-(t*x+i*b*2+o*f)))}};C(Nn,"NONE",-1),C(Nn,"BEFORE",-2),C(Nn,"AFTER",-3),C(Nn,"epsilon",1e-5);let __=Nn;class v9{constructor(e,t){C(this,"data");C(this,"_bone",null);C(this,"inertia",0);C(this,"strength",0);C(this,"damping",0);C(this,"massInverse",0);C(this,"wind",0);C(this,"gravity",0);C(this,"mix",0);C(this,"_reset",!0);C(this,"ux",0);C(this,"uy",0);C(this,"cx",0);C(this,"cy",0);C(this,"tx",0);C(this,"ty",0);C(this,"xOffset",0);C(this,"xVelocity",0);C(this,"yOffset",0);C(this,"yVelocity",0);C(this,"rotateOffset",0);C(this,"rotateVelocity",0);C(this,"scaleOffset",0);C(this,"scaleVelocity",0);C(this,"active",!1);C(this,"skeleton");C(this,"remaining",0);C(this,"lastTime",0);this.data=e,this.skeleton=t,this.bone=t.bones[e.bone.index],this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}set bone(e){this._bone=e}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const e=this.data;this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}isActive(){return this.active}update(e){const t=this.mix;if(t==0)return;const n=this.data.x>0,i=this.data.y>0,s=this.data.rotate>0||this.data.shearX>0,o=this.data.scaleX>0,a=this.bone,l=a.data.length;switch(e){case uo.none:return;case uo.reset:this.reset();case uo.update:const u=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=u,this.lastTime=this.skeleton.time;const h=a.worldX,c=a.worldY;if(this._reset)this._reset=!1,this.ux=h,this.uy=c;else{let d=this.remaining,f=this.inertia,g=this.data.limit*u,v=this.data.step,x=this.skeleton.data.referenceScale,y=-1;if(n||i){if(n){const b=(this.ux-h)*f;this.xOffset+=b>g?g:b<-g?-g:b,this.ux=h}if(i){const b=(this.uy-c)*f;this.yOffset+=b>g?g:b<-g?-g:b,this.uy=c}if(d>=v){y=Math.pow(this.damping,60*v);const b=this.massInverse*v,_=this.strength,S=this.wind*x,I=(fc.yDown?-this.gravity:this.gravity)*x;do n&&(this.xVelocity+=(S-this.xOffset*_)*b,this.xOffset+=this.xVelocity*v,this.xVelocity*=y),i&&(this.yVelocity-=(I+this.yOffset*_)*b,this.yOffset+=this.yVelocity*v,this.yVelocity*=y),d-=v;while(d>=v)}n&&(a.worldX+=this.xOffset*t*this.data.x),i&&(a.worldY+=this.yOffset*t*this.data.y)}if(s||o){let b=Math.atan2(a.c,a.a),_=0,S=0,I=0,A=this.cx-a.worldX,k=this.cy-a.worldY;if(A>g?A=g:A<-g&&(A=-g),k>g?k=g:k<-g&&(k=-g),s){I=(this.data.rotate+this.data.shearX)*t;let M=Math.atan2(k+this.ty,A+this.tx)-b-this.rotateOffset*I;this.rotateOffset+=(M-Math.ceil(M*ce.invPI2-.5)*ce.PI2)*f,M=this.rotateOffset*I+b,_=Math.cos(M),S=Math.sin(M),o&&(M=l*a.getWorldScaleX(),M>0&&(this.scaleOffset+=(A*_+k*S)*f/M))}else{_=Math.cos(b),S=Math.sin(b);const M=l*a.getWorldScaleX();M>0&&(this.scaleOffset+=(A*_+k*S)*f/M)}if(d=this.remaining,d>=v){y==-1&&(y=Math.pow(this.damping,60*v));const M=this.massInverse*v,O=this.strength,L=this.wind,D=fc.yDown?-this.gravity:this.gravity,j=l/x;for(;;)if(d-=v,o&&(this.scaleVelocity+=(L*_-D*S-this.scaleOffset*O)*M,this.scaleOffset+=this.scaleVelocity*v,this.scaleVelocity*=y),s){if(this.rotateVelocity-=((L*S+D*_)*j+this.rotateOffset*O)*M,this.rotateOffset+=this.rotateVelocity*v,this.rotateVelocity*=y,d<v)break;const F=this.rotateOffset*I+b;_=Math.cos(F),S=Math.sin(F)}else if(d<v)break}}this.remaining=d}this.cx=a.worldX,this.cy=a.worldY;break;case uo.pose:n&&(a.worldX+=this.xOffset*t*this.data.x),i&&(a.worldY+=this.yOffset*t*this.data.y)}if(s){let u=this.rotateOffset*t,h=0,c=0,d=0;if(this.data.shearX>0){let f=0;this.data.rotate>0&&(f=u*this.data.rotate,h=Math.sin(f),c=Math.cos(f),d=a.b,a.b=c*d-h*a.d,a.d=h*d+c*a.d),f+=u*this.data.shearX,h=Math.sin(f),c=Math.cos(f),d=a.a,a.a=c*d-h*a.c,a.c=h*d+c*a.c}else u*=this.data.rotate,h=Math.sin(u),c=Math.cos(u),d=a.a,a.a=c*d-h*a.c,a.c=h*d+c*a.c,d=a.b,a.b=c*d-h*a.d,a.d=h*d+c*a.d}if(o){const u=1+this.scaleOffset*t*this.data.scaleX;a.a*=u,a.c*=u}e!=uo.pose&&(this.tx=l*a.a,this.ty=l*a.c),a.updateAppliedTransform()}translate(e,t){this.ux-=e,this.uy-=t,this.cx-=e,this.cy-=t}rotate(e,t,n){const i=n*ce.degRad,s=Math.cos(i),o=Math.sin(i),a=this.cx-e,l=this.cy-t;this.translate(a*s-l*o-a,a*o+l*s-l)}}class y9{constructor(e,t){C(this,"data");C(this,"bone");C(this,"color");C(this,"darkColor",null);C(this,"attachment",null);C(this,"attachmentState",0);C(this,"sequenceIndex",-1);C(this,"deform",new Array);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("bone cannot be null.");this.data=e,this.bone=t,this.color=new Xe,this.darkColor=e.darkColor?new Xe:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(e){this.attachment!=e&&((!(e instanceof Zi)||!(this.attachment instanceof Zi)||e.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=e,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class x9{constructor(e,t){C(this,"data");C(this,"bones");C(this,"target");C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0);C(this,"mixScaleX",0);C(this,"mixScaleY",0);C(this,"mixShearY",0);C(this,"temp",new tg);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0;i<e.bones.length;i++){let s=t.findBone(e.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${e.bones[i].name}.`);this.bones.push(s)}let n=t.findBone(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}.`);this.target=n,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}update(e){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=t!=0||n!=0,l=this.target,u=l.a,h=l.b,c=l.c,d=l.d,f=u*d-h*c>0?ce.degRad:-ce.degRad,g=this.data.offsetRotation*f,v=this.data.offsetShearY*f,x=this.bones;for(let y=0,b=x.length;y<b;y++){let _=x[y];if(e!=0){let S=_.a,I=_.b,A=_.c,k=_.d,M=Math.atan2(c,u)-Math.atan2(A,S)+g;M>ce.PI?M-=ce.PI2:M<-ce.PI&&(M+=ce.PI2),M*=e;let O=Math.cos(M),L=Math.sin(M);_.a=O*S-L*A,_.b=O*I-L*k,_.c=L*S+O*A,_.d=L*I+O*k}if(a){let S=this.temp;l.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(S.x-_.worldX)*t,_.worldY+=(S.y-_.worldY)*n}if(i!=0){let S=Math.sqrt(_.a*_.a+_.c*_.c);S!=0&&(S=(S+(Math.sqrt(u*u+c*c)-S+this.data.offsetScaleX)*i)/S),_.a*=S,_.c*=S}if(s!=0){let S=Math.sqrt(_.b*_.b+_.d*_.d);S!=0&&(S=(S+(Math.sqrt(h*h+d*d)-S+this.data.offsetScaleY)*s)/S),_.b*=S,_.d*=S}if(o>0){let S=_.b,I=_.d,A=Math.atan2(I,S),k=Math.atan2(d,h)-Math.atan2(c,u)-(A-Math.atan2(_.c,_.a));k>ce.PI?k-=ce.PI2:k<-ce.PI&&(k+=ce.PI2),k=A+(k+v)*o;let M=Math.sqrt(S*S+I*I);_.b=Math.cos(k)*M,_.d=Math.sin(k)*M}_.updateAppliedTransform()}}applyRelativeWorld(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=t!=0||n!=0,l=this.target,u=l.a,h=l.b,c=l.c,d=l.d,f=u*d-h*c>0?ce.degRad:-ce.degRad,g=this.data.offsetRotation*f,v=this.data.offsetShearY*f,x=this.bones;for(let y=0,b=x.length;y<b;y++){let _=x[y];if(e!=0){let S=_.a,I=_.b,A=_.c,k=_.d,M=Math.atan2(c,u)+g;M>ce.PI?M-=ce.PI2:M<-ce.PI&&(M+=ce.PI2),M*=e;let O=Math.cos(M),L=Math.sin(M);_.a=O*S-L*A,_.b=O*I-L*k,_.c=L*S+O*A,_.d=L*I+O*k}if(a){let S=this.temp;l.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=S.x*t,_.worldY+=S.y*n}if(i!=0){let S=(Math.sqrt(u*u+c*c)-1+this.data.offsetScaleX)*i+1;_.a*=S,_.c*=S}if(s!=0){let S=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleY)*s+1;_.b*=S,_.d*=S}if(o>0){let S=Math.atan2(d,h)-Math.atan2(c,u);S>ce.PI?S-=ce.PI2:S<-ce.PI&&(S+=ce.PI2);let I=_.b,A=_.d;S=Math.atan2(A,I)+(S-ce.PI/2+v)*o;let k=Math.sqrt(I*I+A*A);_.b=Math.cos(S)*k,_.d=Math.sin(S)*k}_.updateAppliedTransform()}}applyAbsoluteLocal(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=this.target,l=this.bones;for(let u=0,h=l.length;u<h;u++){let c=l[u],d=c.arotation;e!=0&&(d+=(a.arotation-d+this.data.offsetRotation)*e);let f=c.ax,g=c.ay;f+=(a.ax-f+this.data.offsetX)*t,g+=(a.ay-g+this.data.offsetY)*n;let v=c.ascaleX,x=c.ascaleY;i!=0&&v!=0&&(v=(v+(a.ascaleX-v+this.data.offsetScaleX)*i)/v),s!=0&&x!=0&&(x=(x+(a.ascaleY-x+this.data.offsetScaleY)*s)/x);let y=c.ashearY;o!=0&&(y+=(a.ashearY-y+this.data.offsetShearY)*o),c.updateWorldTransformWith(f,g,d,v,x,c.ashearX,y)}}applyRelativeLocal(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=this.target,l=this.bones;for(let u=0,h=l.length;u<h;u++){let c=l[u],d=c.arotation+(a.arotation+this.data.offsetRotation)*e,f=c.ax+(a.ax+this.data.offsetX)*t,g=c.ay+(a.ay+this.data.offsetY)*n,v=c.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*i+1),x=c.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*s+1),y=c.ashearY+(a.ashearY+this.data.offsetShearY)*o;c.updateWorldTransformWith(f,g,d,v,x,c.ashearX,y)}}}const Mu=class Mu{constructor(e){C(this,"data");C(this,"bones");C(this,"slots");C(this,"drawOrder");C(this,"ikConstraints");C(this,"transformConstraints");C(this,"pathConstraints");C(this,"physicsConstraints");C(this,"_updateCache",new Array);C(this,"skin",null);C(this,"color");C(this,"scaleX",1);C(this,"_scaleY",1);C(this,"x",0);C(this,"y",0);C(this,"time",0);if(!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let t=0;t<e.bones.length;t++){let n=e.bones[t],i;if(!n.parent)i=new WP(n,this,null);else{let s=this.bones[n.parent.index];i=new WP(n,this,s),s.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<e.slots.length;t++){let n=e.slots[t],i=this.bones[n.boneData.index],s=new y9(n,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(let t=0;t<e.ikConstraints.length;t++){let n=e.ikConstraints[t];this.ikConstraints.push(new g9(n,this))}this.transformConstraints=new Array;for(let t=0;t<e.transformConstraints.length;t++){let n=e.transformConstraints[t];this.transformConstraints.push(new x9(n,this))}this.pathConstraints=new Array;for(let t=0;t<e.pathConstraints.length;t++){let n=e.pathConstraints[t];this.pathConstraints.push(new __(n,this))}this.physicsConstraints=new Array;for(let t=0;t<e.physicsConstraints.length;t++){let n=e.physicsConstraints[t];this.physicsConstraints.push(new v9(n,this))}this.color=new Xe(1,1,1,1),this.updateCache()}get scaleY(){return Mu.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e}updateCache(){let e=this._updateCache;e.length=0;let t=this.bones;for(let d=0,f=t.length;d<f;d++){let g=t[d];g.sorted=g.data.skinRequired,g.active=!g.sorted}if(this.skin){let d=this.skin.bones;for(let f=0,g=this.skin.bones.length;f<g;f++){let v=this.bones[d[f].index];do v.sorted=!1,v.active=!0,v=v.parent;while(v)}}let n=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,o=this.physicsConstraints,a=n.length,l=i.length,u=s.length,h=this.physicsConstraints.length,c=a+l+u+h;e:for(let d=0;d<c;d++){for(let f=0;f<a;f++){let g=n[f];if(g.data.order==d){this.sortIkConstraint(g);continue e}}for(let f=0;f<l;f++){let g=i[f];if(g.data.order==d){this.sortTransformConstraint(g);continue e}}for(let f=0;f<u;f++){let g=s[f];if(g.data.order==d){this.sortPathConstraint(g);continue e}}for(let f=0;f<h;f++){const g=o[f];if(g.data.order==d){this.sortPhysicsConstraint(g);continue e}}}for(let d=0,f=t.length;d<f;d++)this.sortBone(t[d])}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&me.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target;this.sortBone(t);let n=e.bones,i=n[0];if(this.sortBone(i),n.length==1)this._updateCache.push(e),this.sortReset(i.children);else{let s=n[n.length-1];this.sortBone(s),this._updateCache.push(e),this.sortReset(i.children),s.sorted=!0}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&me.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target,n=t.data.index,i=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(let l=0,u=this.data.skins.length;l<u;l++)this.sortPathConstraintAttachment(this.data.skins[l],n,i);let s=t.getAttachment();s instanceof dc&&this.sortPathConstraintAttachmentWith(s,i);let o=e.bones,a=o.length;for(let l=0;l<a;l++)this.sortBone(o[l]);this._updateCache.push(e);for(let l=0;l<a;l++)this.sortReset(o[l].children);for(let l=0;l<a;l++)o[l].sorted=!0}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&me.contains(this.skin.constraints,e.data,!0)),!e.active)return;this.sortBone(e.target);let t=e.bones,n=t.length;if(e.data.local)for(let i=0;i<n;i++){let s=t[i];this.sortBone(s.parent),this.sortBone(s)}else for(let i=0;i<n;i++)this.sortBone(t[i]);this._updateCache.push(e);for(let i=0;i<n;i++)this.sortReset(t[i].children);for(let i=0;i<n;i++)t[i].sorted=!0}sortPathConstraintAttachment(e,t,n){let i=e.attachments[t];if(i)for(let s in i)this.sortPathConstraintAttachmentWith(i[s],n)}sortPathConstraintAttachmentWith(e,t){if(!(e instanceof dc))return;let n=e.bones;if(!n)this.sortBone(t);else{let i=this.bones;for(let s=0,o=n.length;s<o;){let a=n[s++];for(a+=s;s<a;)this.sortBone(i[n[s++]])}}}sortPhysicsConstraint(e){const t=e.bone;e.active=t.active&&(!e.data.skinRequired||this.skin!=null&&me.contains(this.skin.constraints,e.data,!0)),e.active&&(this.sortBone(t),this._updateCache.push(e),this.sortReset(t.children),t.sorted=!0)}sortBone(e){if(!e||e.sorted)return;let t=e.parent;t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}sortReset(e){for(let t=0,n=e.length;t<n;t++){let i=e[t];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(e){if(e==null)throw new Error("physics is undefined");let t=this.bones;for(let i=0,s=t.length;i<s;i++){let o=t[i];o.ax=o.x,o.ay=o.y,o.arotation=o.rotation,o.ascaleX=o.scaleX,o.ascaleY=o.scaleY,o.ashearX=o.shearX,o.ashearY=o.shearY}let n=this._updateCache;for(let i=0,s=n.length;i<s;i++)n[i].update(e)}updateWorldTransformWith(e,t){let n=this.getRootBone();if(!n)throw new Error("Root bone must not be null.");let i=t.a,s=t.b,o=t.c,a=t.d;n.worldX=i*this.x+s*this.y+t.worldX,n.worldY=o*this.x+a*this.y+t.worldY;const l=(n.rotation+n.shearX)*ce.degRad,u=(n.rotation+90+n.shearY)*ce.degRad,h=Math.cos(l)*n.scaleX,c=Math.cos(u)*n.scaleY,d=Math.sin(l)*n.scaleX,f=Math.sin(u)*n.scaleY;n.a=(i*h+s*d)*this.scaleX,n.b=(i*c+s*f)*this.scaleX,n.c=(o*h+a*d)*this.scaleY,n.d=(o*c+a*f)*this.scaleY;let g=this._updateCache;for(let v=0,x=g.length;v<x;v++){let y=g[v];y!=n&&y.update(e)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const e of this.bones)e.setToSetupPose();for(const e of this.ikConstraints)e.setToSetupPose();for(const e of this.transformConstraints)e.setToSetupPose();for(const e of this.pathConstraints)e.setToSetupPose();for(const e of this.physicsConstraints)e.setToSetupPose()}setSlotsToSetupPose(){let e=this.slots;me.arrayCopy(e,0,this.drawOrder,0,e.length);for(let t=0,n=e.length;t<n;t++)e[t].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.data.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.data.name==e)return s}return null}setSkinByName(e){let t=this.data.findSkin(e);if(!t)throw new Error("Skin not found: "+e);this.setSkin(t)}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else{let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n],o=s.data.attachmentName;if(o){let a=e.getAttachment(n,o);a&&s.setAttachment(a)}}}this.skin=e,this.updateCache()}}getAttachmentByName(e,t){let n=this.data.findSlot(e);if(!n)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(n.index,t)}getAttachment(e,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){let n=this.skin.getAttachment(e,t);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null}setAttachment(e,t){if(!e)throw new Error("slotName cannot be null.");let n=this.slots;for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.data.name==e){let a=null;if(t&&(a=this.getAttachment(i,t),!a))throw new Error("Attachment not found: "+t+", for slot: "+e);o.setAttachment(a);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(t=>t.data.name==e)??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(t=>t.data.name==e)??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(t=>t.data.name==e)??null}findPhysicsConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(t=>t.data.name==e)??null}getBoundsRect(){let e=new tg,t=new tg;return this.getBounds(e,t),{x:e.x,y:e.y,width:t.x,height:t.y}}getBounds(e,t,n=new Array(2),i=null){if(!e)throw new Error("offset cannot be null.");if(!t)throw new Error("size cannot be null.");let s=this.drawOrder,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;for(let h=0,c=s.length;h<c;h++){let d=s[h];if(!d.bone.active)continue;let f=0,g=null,v=null,x=d.getAttachment();if(x instanceof ld)f=8,g=me.setArraySize(n,f,0),x.computeWorldVertices(d,g,0,2),v=Mu.quadTriangles;else if(x instanceof bl){let y=x;f=y.worldVerticesLength,g=me.setArraySize(n,f,0),y.computeWorldVertices(d,0,f,g,0,2),v=y.triangles}else if(x instanceof Id&&i!=null){i.clipStart(d,x);continue}if(g&&v){i!=null&&i.isClipping()&&(i.clipTriangles(g,v,v.length),g=i.clippedVertices,f=i.clippedVertices.length);for(let y=0,b=g.length;y<b;y+=2){let _=g[y],S=g[y+1];o=Math.min(o,_),a=Math.min(a,S),l=Math.max(l,_),u=Math.max(u,S)}}i!=null&&i.clipEndWithSlot(d)}i!=null&&i.clipEnd(),e.set(o,a),t.set(l-o,u-a)}update(e){this.time+=e}physicsTranslate(e,t){const n=this.physicsConstraints;for(let i=0,s=n.length;i<s;i++)n[i].translate(e,t)}physicsRotate(e,t,n){const i=this.physicsConstraints;for(let s=0,o=i.length;s<o;s++)i[s].rotate(e,t,n)}};C(Mu,"quadTriangles",[0,1,2,2,3,0]),C(Mu,"yDown",!1);let fc=Mu;var uo;(function(r){r[r.none=0]="none",r[r.reset=1]="reset",r[r.update=2]="update",r[r.pose=3]="pose"})(uo||(uo={}));class JO extends a0{constructor(t){super(t,0,!1);C(this,"_bone",null);C(this,"x",0);C(this,"y",0);C(this,"rotate",0);C(this,"scaleX",0);C(this,"shearX",0);C(this,"limit",0);C(this,"step",0);C(this,"inertia",0);C(this,"strength",0);C(this,"damping",0);C(this,"massInverse",0);C(this,"wind",0);C(this,"gravity",0);C(this,"mix",0);C(this,"inertiaGlobal",!1);C(this,"strengthGlobal",!1);C(this,"dampingGlobal",!1);C(this,"massGlobal",!1);C(this,"windGlobal",!1);C(this,"gravityGlobal",!1);C(this,"mixGlobal",!1)}set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}}class e3{constructor(){C(this,"name",null);C(this,"bones",new Array);C(this,"slots",new Array);C(this,"skins",new Array);C(this,"defaultSkin",null);C(this,"events",new Array);C(this,"animations",new Array);C(this,"ikConstraints",new Array);C(this,"transformConstraints",new Array);C(this,"pathConstraints",new Array);C(this,"physicsConstraints",new Array);C(this,"x",0);C(this,"y",0);C(this,"width",0);C(this,"height",0);C(this,"referenceScale",100);C(this,"version",null);C(this,"hash",null);C(this,"fps",0);C(this,"imagesPath",null);C(this,"audioPath",null)}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findSkin(e){if(!e)throw new Error("skinName cannot be null.");let t=this.skins;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findEvent(e){if(!e)throw new Error("eventDataName cannot be null.");let t=this.events;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findAnimation(e){if(!e)throw new Error("animationName cannot be null.");let t=this.animations;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.ikConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.transformConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.pathConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findPhysicsConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.physicsConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}}class VP{constructor(e=0,t,n){C(this,"slotIndex");C(this,"name");C(this,"attachment");this.slotIndex=e,this.name=t,this.attachment=n}}class w_{constructor(e){C(this,"name");C(this,"attachments",new Array);C(this,"bones",Array());C(this,"constraints",new Array);C(this,"color",new Xe(.99607843,.61960787,.30980393,1));if(!e)throw new Error("name cannot be null.");this.name=e}setAttachment(e,t,n){if(!n)throw new Error("attachment cannot be null.");let i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][t]=n}addSkin(e){for(let i=0;i<e.bones.length;i++){let s=e.bones[i],o=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){o=!0;break}o||this.bones.push(s)}for(let i=0;i<e.constraints.length;i++){let s=e.constraints[i],o=!1;for(let a=0;a<this.constraints.length;a++)if(this.constraints[a]==s){o=!0;break}o||this.constraints.push(s)}let t=e.getAttachments();for(let i=0;i<t.length;i++){var n=t[i];this.setAttachment(n.slotIndex,n.name,n.attachment)}}copySkin(e){for(let i=0;i<e.bones.length;i++){let s=e.bones[i],o=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){o=!0;break}o||this.bones.push(s)}for(let i=0;i<e.constraints.length;i++){let s=e.constraints[i],o=!1;for(let a=0;a<this.constraints.length;a++)if(this.constraints[a]==s){o=!0;break}o||this.constraints.push(s)}let t=e.getAttachments();for(let i=0;i<t.length;i++){var n=t[i];n.attachment&&(n.attachment instanceof bl?(n.attachment=n.attachment.newLinkedMesh(),this.setAttachment(n.slotIndex,n.name,n.attachment)):(n.attachment=n.attachment.copy(),this.setAttachment(n.slotIndex,n.name,n.attachment)))}}getAttachment(e,t){let n=this.attachments[e];return n?n[t]:null}removeAttachment(e,t){let n=this.attachments[e];n&&delete n[t]}getAttachments(){let e=new Array;for(var t=0;t<this.attachments.length;t++){let n=this.attachments[t];if(n)for(let i in n){let s=n[i];s&&e.push(new VP(t,i,s))}}return e}getAttachmentsForSlot(e,t){let n=this.attachments[e];if(n)for(let i in n){let s=n[i];s&&t.push(new VP(e,i,s))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,t){let n=0;for(let i=0;i<e.slots.length;i++){let s=e.slots[i],o=s.getAttachment();if(o&&n<t.attachments.length){let a=t.attachments[n];for(let l in a){let u=a[l];if(o==u){let h=this.getAttachment(n,l);h&&s.setAttachment(h);break}}}n++}}}class t3{constructor(e,t,n){C(this,"index",0);C(this,"name");C(this,"boneData");C(this,"color",new Xe(1,1,1,1));C(this,"darkColor",null);C(this,"attachmentName",null);C(this,"blendMode",ua.Normal);C(this,"visible",!0);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=e,this.name=t,this.boneData=n}}var ua;(function(r){r[r.Normal=0]="Normal",r[r.Additive=1]="Additive",r[r.Multiply=2]="Multiply",r[r.Screen=3]="Screen"})(ua||(ua={}));class r3 extends a0{constructor(t){super(t,0,!1);C(this,"bones",new Array);C(this,"_target",null);C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0);C(this,"mixScaleX",0);C(this,"mixScaleY",0);C(this,"mixShearY",0);C(this,"offsetRotation",0);C(this,"offsetX",0);C(this,"offsetY",0);C(this,"offsetScaleX",0);C(this,"offsetScaleY",0);C(this,"offsetShearY",0);C(this,"relative",!1);C(this,"local",!1)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class _9{constructor(e){C(this,"scale",1);C(this,"attachmentLoader");C(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,n=new e3;n.name="";let i=new w9(e),s=i.readInt32(),o=i.readInt32();n.hash=o==0&&s==0?null:o.toString(16)+s.toString(16),n.version=i.readString(),n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat(),n.referenceScale=i.readFloat()*t;let a=i.readBoolean();a&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());let l=0;l=i.readInt(!0);for(let h=0;h<l;h++){let c=i.readString();if(!c)throw new Error("String in string table must not be null.");i.strings.push(c)}l=i.readInt(!0);for(let h=0;h<l;h++){let c=i.readString();if(!c)throw new Error("Bone name must not be null.");let d=h==0?null:n.bones[i.readInt(!0)],f=new VO(h,c,d);f.rotation=i.readFloat(),f.x=i.readFloat()*t,f.y=i.readFloat()*t,f.scaleX=i.readFloat(),f.scaleY=i.readFloat(),f.shearX=i.readFloat(),f.shearY=i.readFloat(),f.length=i.readFloat()*t,f.inherit=i.readByte(),f.skinRequired=i.readBoolean(),a&&(Xe.rgba8888ToColor(f.color,i.readInt32()),f.icon=i.readString()??void 0,f.visible=i.readBoolean()),n.bones.push(f)}l=i.readInt(!0);for(let h=0;h<l;h++){let c=i.readString();if(!c)throw new Error("Slot name must not be null.");let d=n.bones[i.readInt(!0)],f=new t3(h,c,d);Xe.rgba8888ToColor(f.color,i.readInt32());let g=i.readInt32();g!=-1&&Xe.rgb888ToColor(f.darkColor=new Xe,g),f.attachmentName=i.readStringRef(),f.blendMode=i.readInt(!0),a&&(f.visible=i.readBoolean()),n.slots.push(f)}l=i.readInt(!0);for(let h=0,c;h<l;h++){let d=i.readString();if(!d)throw new Error("IK constraint data name must not be null.");let f=new QO(d);f.order=i.readInt(!0),c=i.readInt(!0);for(let v=0;v<c;v++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)];let g=i.readByte();f.skinRequired=(g&1)!=0,f.bendDirection=g&2?1:-1,f.compress=(g&4)!=0,f.stretch=(g&8)!=0,f.uniform=(g&16)!=0,g&32&&(f.mix=g&64?i.readFloat():1),g&128&&(f.softness=i.readFloat()*t),n.ikConstraints.push(f)}l=i.readInt(!0);for(let h=0,c;h<l;h++){let d=i.readString();if(!d)throw new Error("Transform constraint data name must not be null.");let f=new r3(d);f.order=i.readInt(!0),c=i.readInt(!0);for(let v=0;v<c;v++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.bones[i.readInt(!0)];let g=i.readByte();f.skinRequired=(g&1)!=0,f.local=(g&2)!=0,f.relative=(g&4)!=0,g&8&&(f.offsetRotation=i.readFloat()),g&16&&(f.offsetX=i.readFloat()*t),g&32&&(f.offsetY=i.readFloat()*t),g&64&&(f.offsetScaleX=i.readFloat()),g&128&&(f.offsetScaleY=i.readFloat()),g=i.readByte(),g&1&&(f.offsetShearY=i.readFloat()),g&2&&(f.mixRotate=i.readFloat()),g&4&&(f.mixX=i.readFloat()),g&8&&(f.mixY=i.readFloat()),g&16&&(f.mixScaleX=i.readFloat()),g&32&&(f.mixScaleY=i.readFloat()),g&64&&(f.mixShearY=i.readFloat()),n.transformConstraints.push(f)}l=i.readInt(!0);for(let h=0,c;h<l;h++){let d=i.readString();if(!d)throw new Error("Path constraint data name must not be null.");let f=new ZO(d);f.order=i.readInt(!0),f.skinRequired=i.readBoolean(),c=i.readInt(!0);for(let v=0;v<c;v++)f.bones.push(n.bones[i.readInt(!0)]);f.target=n.slots[i.readInt(!0)];const g=i.readByte();f.positionMode=g&1,f.spacingMode=g>>1&3,f.rotateMode=g>>3&3,g&128&&(f.offsetRotation=i.readFloat()),f.position=i.readFloat(),f.positionMode==Ns.Fixed&&(f.position*=t),f.spacing=i.readFloat(),(f.spacingMode==fr.Length||f.spacingMode==fr.Fixed)&&(f.spacing*=t),f.mixRotate=i.readFloat(),f.mixX=i.readFloat(),f.mixY=i.readFloat(),n.pathConstraints.push(f)}l=i.readInt(!0);for(let h=0,c;h<l;h++){const d=i.readString();if(!d)throw new Error("Physics constraint data name must not be null.");const f=new JO(d);f.order=i.readInt(!0),f.bone=n.bones[i.readInt(!0)];let g=i.readByte();f.skinRequired=(g&1)!=0,g&2&&(f.x=i.readFloat()),g&4&&(f.y=i.readFloat()),g&8&&(f.rotate=i.readFloat()),g&16&&(f.scaleX=i.readFloat()),g&32&&(f.shearX=i.readFloat()),f.limit=(g&64?i.readFloat():5e3)*t,f.step=1/i.readUnsignedByte(),f.inertia=i.readFloat(),f.strength=i.readFloat(),f.damping=i.readFloat(),f.massInverse=g&128?i.readFloat():1,f.wind=i.readFloat(),f.gravity=i.readFloat(),g=i.readByte(),g&1&&(f.inertiaGlobal=!0),g&2&&(f.strengthGlobal=!0),g&4&&(f.dampingGlobal=!0),g&8&&(f.massGlobal=!0),g&16&&(f.windGlobal=!0),g&32&&(f.gravityGlobal=!0),g&64&&(f.mixGlobal=!0),f.mix=g&128?i.readFloat():1,n.physicsConstraints.push(f)}let u=this.readSkin(i,n,!0,a);u&&(n.defaultSkin=u,n.skins.push(u));{let h=n.skins.length;for(me.setArraySize(n.skins,l=h+i.readInt(!0));h<l;h++){let c=this.readSkin(i,n,!1,a);if(!c)throw new Error("readSkin() should not have returned null.");n.skins[h]=c}}l=this.linkedMeshes.length;for(let h=0;h<l;h++){let c=this.linkedMeshes[h];const d=n.skins[c.skinIndex];if(!c.parent)throw new Error("Linked mesh parent must not be null");let f=d.getAttachment(c.slotIndex,c.parent);if(!f)throw new Error(`Parent mesh not found: ${c.parent}`);c.mesh.timelineAttachment=c.inheritTimeline?f:c.mesh,c.mesh.setParentMesh(f),c.mesh.region!=null&&c.mesh.updateRegion()}this.linkedMeshes.length=0,l=i.readInt(!0);for(let h=0;h<l;h++){let c=i.readString();if(!c)throw new Error("Event data name must not be null");let d=new KO(c);d.intValue=i.readInt(!1),d.floatValue=i.readFloat(),d.stringValue=i.readString(),d.audioPath=i.readString(),d.audioPath&&(d.volume=i.readFloat(),d.balance=i.readFloat()),n.events.push(d)}l=i.readInt(!0);for(let h=0;h<l;h++){let c=i.readString();if(!c)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(i,c,n))}return n}readSkin(e,t,n,i){let s=null,o=0;if(n){if(o=e.readInt(!0),o==0)return null;s=new w_("default")}else{let a=e.readString();if(!a)throw new Error("Skin name must not be null.");s=new w_(a),i&&Xe.rgba8888ToColor(s.color,e.readInt32()),s.bones.length=e.readInt(!0);for(let l=0,u=s.bones.length;l<u;l++)s.bones[l]=t.bones[e.readInt(!0)];for(let l=0,u=e.readInt(!0);l<u;l++)s.constraints.push(t.ikConstraints[e.readInt(!0)]);for(let l=0,u=e.readInt(!0);l<u;l++)s.constraints.push(t.transformConstraints[e.readInt(!0)]);for(let l=0,u=e.readInt(!0);l<u;l++)s.constraints.push(t.pathConstraints[e.readInt(!0)]);for(let l=0,u=e.readInt(!0);l<u;l++)s.constraints.push(t.physicsConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(let a=0;a<o;a++){let l=e.readInt(!0);for(let u=0,h=e.readInt(!0);u<h;u++){let c=e.readStringRef();if(!c)throw new Error("Attachment name must not be null");let d=this.readAttachment(e,t,s,l,c,i);d&&s.setAttachment(l,c,d)}}return s}readAttachment(e,t,n,i,s,o){let a=this.scale,l=e.readByte();const u=l&8?e.readStringRef():s;if(!u)throw new Error("Attachment name must not be null");switch(l&7){case Js.Region:{let h=l&16?e.readStringRef():null;const c=l&32?e.readInt32():4294967295,d=l&64?this.readSequence(e):null;let f=l&128?e.readFloat():0,g=e.readFloat(),v=e.readFloat(),x=e.readFloat(),y=e.readFloat(),b=e.readFloat(),_=e.readFloat();h||(h=u);let S=this.attachmentLoader.newRegionAttachment(n,u,h,d);return S?(S.path=h,S.x=g*a,S.y=v*a,S.scaleX=x,S.scaleY=y,S.rotation=f,S.width=b*a,S.height=_*a,Xe.rgba8888ToColor(S.color,c),S.sequence=d,d==null&&S.updateRegion(),S):null}case Js.BoundingBox:{let h=this.readVertices(e,(l&16)!=0),c=o?e.readInt32():0,d=this.attachmentLoader.newBoundingBoxAttachment(n,u);return d?(d.worldVerticesLength=h.length,d.vertices=h.vertices,d.bones=h.bones,o&&Xe.rgba8888ToColor(d.color,c),d):null}case Js.Mesh:{let h=l&16?e.readStringRef():u;const c=l&32?e.readInt32():4294967295,d=l&64?this.readSequence(e):null,f=e.readInt(!0),g=this.readVertices(e,(l&128)!=0),v=this.readFloatArray(e,g.length,1),x=this.readShortArray(e,(g.length-f-2)*3);let y=[],b=0,_=0;o&&(y=this.readShortArray(e,e.readInt(!0)),b=e.readFloat(),_=e.readFloat()),h||(h=u);let S=this.attachmentLoader.newMeshAttachment(n,u,h,d);return S?(S.path=h,Xe.rgba8888ToColor(S.color,c),S.bones=g.bones,S.vertices=g.vertices,S.worldVerticesLength=g.length,S.triangles=x,S.regionUVs=v,d==null&&S.updateRegion(),S.hullLength=f<<1,S.sequence=d,o&&(S.edges=y,S.width=b*a,S.height=_*a),S):null}case Js.LinkedMesh:{const h=l&16?e.readStringRef():u;if(h==null)throw new Error("Path of linked mesh must not be null");const c=l&32?e.readInt32():4294967295,d=l&64?this.readSequence(e):null,f=(l&128)!=0,g=e.readInt(!0),v=e.readStringRef();let x=0,y=0;o&&(x=e.readFloat(),y=e.readFloat());let b=this.attachmentLoader.newMeshAttachment(n,u,h,d);return b?(b.path=h,Xe.rgba8888ToColor(b.color,c),b.sequence=d,o&&(b.width=x*a,b.height=y*a),this.linkedMeshes.push(new b9(b,g,i,v,f)),b):null}case Js.Path:{const h=(l&16)!=0,c=(l&32)!=0,d=this.readVertices(e,(l&64)!=0),f=me.newArray(d.length/6,0);for(let x=0,y=f.length;x<y;x++)f[x]=e.readFloat()*a;const g=o?e.readInt32():0,v=this.attachmentLoader.newPathAttachment(n,u);return v?(v.closed=h,v.constantSpeed=c,v.worldVerticesLength=d.length,v.vertices=d.vertices,v.bones=d.bones,v.lengths=f,o&&Xe.rgba8888ToColor(v.color,g),v):null}case Js.Point:{const h=e.readFloat(),c=e.readFloat(),d=e.readFloat(),f=o?e.readInt32():0,g=this.attachmentLoader.newPointAttachment(n,u);return g?(g.x=c*a,g.y=d*a,g.rotation=h,o&&Xe.rgba8888ToColor(g.color,f),g):null}case Js.Clipping:{const h=e.readInt(!0),c=this.readVertices(e,(l&16)!=0);let d=o?e.readInt32():0,f=this.attachmentLoader.newClippingAttachment(n,u);return f?(f.endSlot=t.slots[h],f.worldVerticesLength=c.length,f.vertices=c.vertices,f.bones=c.bones,o&&Xe.rgba8888ToColor(f.color,d),f):null}}return null}readSequence(e){let t=new rg(e.readInt(!0));return t.start=e.readInt(!0),t.digits=e.readInt(!0),t.setupIndex=e.readInt(!0),t}readVertices(e,t){const n=this.scale,i=e.readInt(!0),s=new S9;if(s.length=i<<1,!t)return s.vertices=this.readFloatArray(e,s.length,n),s;let o=new Array,a=new Array;for(let l=0;l<i;l++){let u=e.readInt(!0);a.push(u);for(let h=0;h<u;h++)a.push(e.readInt(!0)),o.push(e.readFloat()*n),o.push(e.readFloat()*n),o.push(e.readFloat())}return s.vertices=me.toFloatArray(o),s.bones=a,s}readFloatArray(e,t,n){let i=new Array(t);if(n==1)for(let s=0;s<t;s++)i[s]=e.readFloat();else for(let s=0;s<t;s++)i[s]=e.readFloat()*n;return i}readShortArray(e,t){let n=new Array(t);for(let i=0;i<t;i++)n[i]=e.readInt(!0);return n}readAnimation(e,t,n){e.readInt(!0);let i=new Array,s=this.scale;for(let u=0,h=e.readInt(!0);u<h;u++){let c=e.readInt(!0);for(let d=0,f=e.readInt(!0);d<f;d++){let g=e.readByte(),v=e.readInt(!0),x=v-1;switch(g){case F9:{let y=new Cu(v,c);for(let b=0;b<v;b++)y.setFrame(b,e.readFloat(),e.readStringRef());i.push(y);break}case B9:{let y=e.readInt(!0),b=new kO(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255;for(let M=0,O=0;b.setFrame(M,_,S,I,A,k),M!=x;M++){let L=e.readFloat(),D=e.readUnsignedByte()/255,j=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255,B=e.readUnsignedByte()/255;switch(e.readByte()){case ws:b.setStepped(M);break;case bs:Ze(e,b,O++,M,0,_,L,S,D,1),Ze(e,b,O++,M,1,_,L,I,j,1),Ze(e,b,O++,M,2,_,L,A,F,1),Ze(e,b,O++,M,3,_,L,k,B,1)}_=L,S=D,I=j,A=F,k=B}i.push(b);break}case L9:{let y=e.readInt(!0),b=new IO(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255;for(let k=0,M=0;b.setFrame(k,_,S,I,A),k!=x;k++){let O=e.readFloat(),L=e.readUnsignedByte()/255,D=e.readUnsignedByte()/255,j=e.readUnsignedByte()/255;switch(e.readByte()){case ws:b.setStepped(k);break;case bs:Ze(e,b,M++,k,0,_,O,S,L,1),Ze(e,b,M++,k,1,_,O,I,D,1),Ze(e,b,M++,k,2,_,O,A,j,1)}_=O,S=L,I=D,A=j}i.push(b);break}case D9:{let y=e.readInt(!0),b=new RO(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,L=e.readUnsignedByte()/255;for(let D=0,j=0;b.setFrame(D,_,S,I,A,k,M,O,L),D!=x;D++){let F=e.readFloat(),B=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255,V=e.readUnsignedByte()/255,Q=e.readUnsignedByte()/255,H=e.readUnsignedByte()/255,G=e.readUnsignedByte()/255,$=e.readUnsignedByte()/255;switch(e.readByte()){case ws:b.setStepped(D);break;case bs:Ze(e,b,j++,D,0,_,F,S,B,1),Ze(e,b,j++,D,1,_,F,I,X,1),Ze(e,b,j++,D,2,_,F,A,V,1),Ze(e,b,j++,D,3,_,F,k,Q,1),Ze(e,b,j++,D,4,_,F,M,H,1),Ze(e,b,j++,D,5,_,F,O,G,1),Ze(e,b,j++,D,6,_,F,L,$,1)}_=F,S=B,I=X,A=V,k=Q,M=H,O=G,L=$}i.push(b);break}case U9:{let y=e.readInt(!0),b=new OO(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255;for(let L=0,D=0;b.setFrame(L,_,S,I,A,k,M,O),L!=x;L++){let j=e.readFloat(),F=e.readUnsignedByte()/255,B=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255,V=e.readUnsignedByte()/255,Q=e.readUnsignedByte()/255,H=e.readUnsignedByte()/255;switch(e.readByte()){case ws:b.setStepped(L);break;case bs:Ze(e,b,D++,L,0,_,j,S,F,1),Ze(e,b,D++,L,1,_,j,I,B,1),Ze(e,b,D++,L,2,_,j,A,X,1),Ze(e,b,D++,L,3,_,j,k,V,1),Ze(e,b,D++,L,4,_,j,M,Q,1),Ze(e,b,D++,L,5,_,j,O,H,1)}_=j,S=F,I=B,A=X,k=V,M=Q,O=H}i.push(b);break}case j9:{let y=new MO(v,e.readInt(!0),c),b=e.readFloat(),_=e.readUnsignedByte()/255;for(let S=0,I=0;y.setFrame(S,b,_),S!=x;S++){let A=e.readFloat(),k=e.readUnsignedByte()/255;switch(e.readByte()){case ws:y.setStepped(S);break;case bs:Ze(e,y,I++,S,0,b,A,_,k,1)}b=A,_=k}i.push(y)}}}}for(let u=0,h=e.readInt(!0);u<h;u++){let c=e.readInt(!0);for(let d=0,f=e.readInt(!0);d<f;d++){let g=e.readByte(),v=e.readInt(!0);if(g==N9){let y=new AO(v,c);for(let b=0;b<v;b++)y.setFrame(b,e.readFloat(),e.readByte());i.push(y);continue}let x=e.readInt(!0);switch(g){case T9:i.push(Yr(e,new ng(v,x,c),1));break;case E9:i.push(Vy(e,new xO(v,x,c),s));break;case C9:i.push(Yr(e,new _O(v,x,c),s));break;case P9:i.push(Yr(e,new wO(v,x,c),s));break;case A9:i.push(Vy(e,new bO(v,x,c),1));break;case k9:i.push(Yr(e,new SO(v,x,c),1));break;case I9:i.push(Yr(e,new TO(v,x,c),1));break;case M9:i.push(Vy(e,new EO(v,x,c),1));break;case R9:i.push(Yr(e,new CO(v,x,c),1));break;case O9:i.push(Yr(e,new PO(v,x,c),1))}}}for(let u=0,h=e.readInt(!0);u<h;u++){let c=e.readInt(!0),d=e.readInt(!0),f=d-1,g=new FO(d,e.readInt(!0),c),v=e.readByte(),x=e.readFloat(),y=v&1?v&2?e.readFloat():1:0,b=v&4?e.readFloat()*s:0;for(let _=0,S=0;g.setFrame(_,x,y,b,v&8?1:-1,(v&16)!=0,(v&32)!=0),_!=f;_++){v=e.readByte();const I=e.readFloat(),A=v&1?v&2?e.readFloat():1:0,k=v&4?e.readFloat()*s:0;v&64?g.setStepped(_):v&128&&(Ze(e,g,S++,_,0,x,I,y,A,1),Ze(e,g,S++,_,1,x,I,b,k,s)),x=I,y=A,b=k}i.push(g)}for(let u=0,h=e.readInt(!0);u<h;u++){let c=e.readInt(!0),d=e.readInt(!0),f=d-1,g=new BO(d,e.readInt(!0),c),v=e.readFloat(),x=e.readFloat(),y=e.readFloat(),b=e.readFloat(),_=e.readFloat(),S=e.readFloat(),I=e.readFloat();for(let A=0,k=0;g.setFrame(A,v,x,y,b,_,S,I),A!=f;A++){let M=e.readFloat(),O=e.readFloat(),L=e.readFloat(),D=e.readFloat(),j=e.readFloat(),F=e.readFloat(),B=e.readFloat();switch(e.readByte()){case ws:g.setStepped(A);break;case bs:Ze(e,g,k++,A,0,v,M,x,O,1),Ze(e,g,k++,A,1,v,M,y,L,1),Ze(e,g,k++,A,2,v,M,b,D,1),Ze(e,g,k++,A,3,v,M,_,j,1),Ze(e,g,k++,A,4,v,M,S,F,1),Ze(e,g,k++,A,5,v,M,I,B,1)}v=M,x=O,y=L,b=D,_=j,S=F,I=B}i.push(g)}for(let u=0,h=e.readInt(!0);u<h;u++){let c=e.readInt(!0),d=n.pathConstraints[c];for(let f=0,g=e.readInt(!0);f<g;f++){const v=e.readByte(),x=e.readInt(!0),y=e.readInt(!0);switch(v){case $9:i.push(Yr(e,new LO(x,y,c),d.positionMode==Ns.Fixed?s:1));break;case z9:i.push(Yr(e,new DO(x,y,c),d.spacingMode==fr.Length||d.spacingMode==fr.Fixed?s:1));break;case Y9:let b=new UO(x,y,c),_=e.readFloat(),S=e.readFloat(),I=e.readFloat(),A=e.readFloat();for(let k=0,M=0,O=b.getFrameCount()-1;b.setFrame(k,_,S,I,A),k!=O;k++){let L=e.readFloat(),D=e.readFloat(),j=e.readFloat(),F=e.readFloat();switch(e.readByte()){case ws:b.setStepped(k);break;case bs:Ze(e,b,M++,k,0,_,L,S,D,1),Ze(e,b,M++,k,1,_,L,I,j,1),Ze(e,b,M++,k,2,_,L,A,F,1)}_=L,S=D,I=j,A=F}i.push(b)}}}for(let u=0,h=e.readInt(!0);u<h;u++){const c=e.readInt(!0)-1;for(let d=0,f=e.readInt(!0);d<f;d++){const g=e.readByte(),v=e.readInt(!0);if(g==J9){const y=new ig(v,c);for(let b=0;b<v;b++)y.setFrame(b,e.readFloat());i.push(y);continue}const x=e.readInt(!0);switch(g){case G9:i.push(Yr(e,new jO(v,x,c),1));break;case W9:i.push(Yr(e,new XO(v,x,c),1));break;case V9:i.push(Yr(e,new HO(v,x,c),1));break;case q9:i.push(Yr(e,new $O(v,x,c),1));break;case K9:i.push(Yr(e,new zO(v,x,c),1));break;case Q9:i.push(Yr(e,new YO(v,x,c),1));break;case Z9:i.push(Yr(e,new GO(v,x,c),1))}}}for(let u=0,h=e.readInt(!0);u<h;u++){let c=n.skins[e.readInt(!0)];for(let d=0,f=e.readInt(!0);d<f;d++){let g=e.readInt(!0);for(let v=0,x=e.readInt(!0);v<x;v++){let y=e.readStringRef();if(!y)throw new Error("attachmentName must not be null.");let b=c.getAttachment(g,y),_=e.readByte(),S=e.readInt(!0),I=S-1;switch(_){case X9:{let A=b,k=A.bones,M=A.vertices,O=k?M.length/3*2:M.length,L=e.readInt(!0),D=new NO(S,L,g,A),j=e.readFloat();for(let F=0,B=0;;F++){let X,V=e.readInt(!0);if(V==0)X=k?me.newFloatArray(O):M;else{X=me.newFloatArray(O);let H=e.readInt(!0);if(V+=H,s==1)for(let G=H;G<V;G++)X[G]=e.readFloat();else for(let G=H;G<V;G++)X[G]=e.readFloat()*s;if(!k)for(let G=0,$=X.length;G<$;G++)X[G]+=M[G]}if(D.setFrame(F,j,X),F==I)break;let Q=e.readFloat();switch(e.readByte()){case ws:D.setStepped(F);break;case bs:Ze(e,D,B++,F,0,j,Q,0,1,1)}j=Q}i.push(D);break}case H9:{let A=new sg(S,g,b);for(let k=0;k<S;k++){let M=e.readFloat(),O=e.readInt32();A.setFrame(k,M,yO[O&15],O>>4,e.readFloat())}i.push(A);break}}}}}let o=e.readInt(!0);if(o>0){let u=new hl(o),h=n.slots.length;for(let c=0;c<o;c++){let d=e.readFloat(),f=e.readInt(!0),g=me.newArray(h,0);for(let b=h-1;b>=0;b--)g[b]=-1;let v=me.newArray(h-f,0),x=0,y=0;for(let b=0;b<f;b++){let _=e.readInt(!0);for(;x!=_;)v[y++]=x++;g[x+e.readInt(!0)]=x++}for(;x<h;)v[y++]=x++;for(let b=h-1;b>=0;b--)g[b]==-1&&(g[b]=v[--y]);u.setFrame(c,d,g)}i.push(u)}let a=e.readInt(!0);if(a>0){let u=new ad(a);for(let h=0;h<a;h++){let c=e.readFloat(),d=n.events[e.readInt(!0)],f=new qO(c,d);f.intValue=e.readInt(!1),f.floatValue=e.readFloat(),f.stringValue=e.readString(),f.stringValue==null&&(f.stringValue=d.stringValue),f.data.audioPath&&(f.volume=e.readFloat(),f.balance=e.readFloat()),u.setFrame(h,f)}i.push(u)}let l=0;for(let u=0,h=i.length;u<h;u++)l=Math.max(l,i[u].getDuration());return new Pb(t,i,l)}}class w9{constructor(e,t=new Array,n=0,i=new DataView(e instanceof ArrayBuffer?e:e.buffer)){C(this,"strings");C(this,"index");C(this,"buffer");this.strings=t,this.index=n,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){let e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let t=this.readByte(),n=t&127;return t&128&&(t=this.readByte(),n|=(t&127)<<7,t&128&&(t=this.readByte(),n|=(t&127)<<14,t&128&&(t=this.readByte(),n|=(t&127)<<21,t&128&&(t=this.readByte(),n|=(t&127)<<28)))),e?n:n>>>1^-(n&1)}readStringRef(){let e=this.readInt(!0);return e==0?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let t="";for(let n=0;n<e;){let i=this.readUnsignedByte();switch(i>>4){case 12:case 13:t+=String.fromCharCode((i&31)<<6|this.readByte()&63),n+=2;break;case 14:t+=String.fromCharCode((i&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:t+=String.fromCharCode(i),n++}}return t}readFloat(){let e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return this.readByte()!=0}}let b9=class{constructor(e,t,n,i,s){C(this,"parent");C(this,"skinIndex");C(this,"slotIndex");C(this,"mesh");C(this,"inheritTimeline");this.mesh=e,this.skinIndex=t,this.slotIndex=n,this.parent=i,this.inheritTimeline=s}};class S9{constructor(e=null,t=null,n=0){C(this,"bones");C(this,"vertices");C(this,"length");this.bones=e,this.vertices=t,this.length=n}}var Js;(function(r){r[r.Region=0]="Region",r[r.BoundingBox=1]="BoundingBox",r[r.Mesh=2]="Mesh",r[r.LinkedMesh=3]="LinkedMesh",r[r.Path=4]="Path",r[r.Point=5]="Point",r[r.Clipping=6]="Clipping"})(Js||(Js={}));function Yr(r,e,t){let n=r.readFloat(),i=r.readFloat()*t;for(let s=0,o=0,a=e.getFrameCount()-1;e.setFrame(s,n,i),s!=a;s++){let l=r.readFloat(),u=r.readFloat()*t;switch(r.readByte()){case ws:e.setStepped(s);break;case bs:Ze(r,e,o++,s,0,n,l,i,u,t)}n=l,i=u}return e}function Vy(r,e,t){let n=r.readFloat(),i=r.readFloat()*t,s=r.readFloat()*t;for(let o=0,a=0,l=e.getFrameCount()-1;e.setFrame(o,n,i,s),o!=l;o++){let u=r.readFloat(),h=r.readFloat()*t,c=r.readFloat()*t;switch(r.readByte()){case ws:e.setStepped(o);break;case bs:Ze(r,e,a++,o,0,n,u,i,h,t),Ze(r,e,a++,o,1,n,u,s,c,t)}n=u,i=h,s=c}return e}function Ze(r,e,t,n,i,s,o,a,l,u){e.setBezier(t,n,i,s,a,r.readFloat(),r.readFloat()*u,r.readFloat(),r.readFloat()*u,o,l)}const T9=0,E9=1,C9=2,P9=3,A9=4,k9=5,I9=6,M9=7,R9=8,O9=9,N9=10,F9=0,B9=1,L9=2,D9=3,U9=4,j9=5,X9=0,H9=1,$9=0,z9=1,Y9=2,G9=0,W9=1,V9=2,q9=4,K9=5,Q9=6,Z9=7,J9=8,ws=1,bs=2;class mn{constructor(){C(this,"convexPolygons",new Array);C(this,"convexPolygonsIndices",new Array);C(this,"indicesArray",new Array);C(this,"isConcaveArray",new Array);C(this,"triangles",new Array);C(this,"polygonPool",new y_(()=>new Array));C(this,"polygonIndicesPool",new y_(()=>new Array))}triangulate(e){let t=e,n=e.length>>1,i=this.indicesArray;i.length=0;for(let a=0;a<n;a++)i[a]=a;let s=this.isConcaveArray;s.length=0;for(let a=0,l=n;a<l;++a)s[a]=mn.isConcave(a,n,t,i);let o=this.triangles;for(o.length=0;n>3;){let a=n-1,l=0,u=1;for(;;){e:if(!s[l]){let d=i[a]<<1,f=i[l]<<1,g=i[u]<<1,v=t[d],x=t[d+1],y=t[f],b=t[f+1],_=t[g],S=t[g+1];for(let I=(u+1)%n;I!=a;I=(I+1)%n){if(!s[I])continue;let A=i[I]<<1,k=t[A],M=t[A+1];if(mn.positiveArea(_,S,v,x,k,M)&&mn.positiveArea(v,x,y,b,k,M)&&mn.positiveArea(y,b,_,S,k,M))break e}break}if(u==0){do{if(!s[l])break;l--}while(l>0);break}a=l,l=u,u=(u+1)%n}o.push(i[(n+l-1)%n]),o.push(i[l]),o.push(i[(l+1)%n]),i.splice(l,1),s.splice(l,1),n--;let h=(n+l-1)%n,c=l==n?0:l;s[h]=mn.isConcave(h,n,t,i),s[c]=mn.isConcave(c,n,t,i)}return n==3&&(o.push(i[2]),o.push(i[0]),o.push(i[1])),o}decompose(e,t){let n=e,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;let s=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(s),s.length=0;let o=this.polygonIndicesPool.obtain();o.length=0;let a=this.polygonPool.obtain();a.length=0;let l=-1,u=0;for(let h=0,c=t.length;h<c;h+=3){let d=t[h]<<1,f=t[h+1]<<1,g=t[h+2]<<1,v=n[d],x=n[d+1],y=n[f],b=n[f+1],_=n[g],S=n[g+1],I=!1;if(l==d){let A=a.length-4,k=mn.winding(a[A],a[A+1],a[A+2],a[A+3],_,S),M=mn.winding(_,S,a[0],a[1],a[2],a[3]);k==u&&M==u&&(a.push(_),a.push(S),o.push(g),I=!0)}I||(a.length>0?(i.push(a),s.push(o)):(this.polygonPool.free(a),this.polygonIndicesPool.free(o)),a=this.polygonPool.obtain(),a.length=0,a.push(v),a.push(x),a.push(y),a.push(b),a.push(_),a.push(S),o=this.polygonIndicesPool.obtain(),o.length=0,o.push(d),o.push(f),o.push(g),u=mn.winding(v,x,y,b,_,S),l=d)}a.length>0&&(i.push(a),s.push(o));for(let h=0,c=i.length;h<c;h++){if(o=s[h],o.length==0)continue;let d=o[0],f=o[o.length-1];a=i[h];let g=a.length-4,v=a[g],x=a[g+1],y=a[g+2],b=a[g+3],_=a[0],S=a[1],I=a[2],A=a[3],k=mn.winding(v,x,y,b,_,S);for(let M=0;M<c;M++){if(M==h)continue;let O=s[M];if(O.length!=3)continue;let L=O[0],D=O[1],j=O[2],F=i[M],B=F[F.length-2],X=F[F.length-1];if(L!=d||D!=f)continue;let V=mn.winding(v,x,y,b,B,X),Q=mn.winding(B,X,_,S,I,A);V==k&&Q==k&&(F.length=0,O.length=0,a.push(B),a.push(X),o.push(j),v=y,x=b,y=B,b=X,M=0)}}for(let h=i.length-1;h>=0;h--)a=i[h],a.length==0&&(i.splice(h,1),this.polygonPool.free(a),o=s[h],s.splice(h,1),this.polygonIndicesPool.free(o));return i}static isConcave(e,t,n,i){let s=i[(t+e-1)%t]<<1,o=i[e]<<1,a=i[(e+1)%t]<<1;return!this.positiveArea(n[s],n[s+1],n[o],n[o+1],n[a],n[a+1])}static positiveArea(e,t,n,i,s,o){return e*(o-i)+n*(t-o)+s*(i-t)>=0}static winding(e,t,n,i,s,o){let a=n-e,l=i-t;return s*l-o*a+a*t-e*l>=0?1:-1}}class og{constructor(){C(this,"triangulator",new mn);C(this,"clippingPolygon",new Array);C(this,"clipOutput",new Array);C(this,"clippedVertices",new Array);C(this,"clippedUVs",new Array);C(this,"clippedTriangles",new Array);C(this,"scratch",new Array);C(this,"clipAttachment",null);C(this,"clippingPolygons",null)}clipStart(e,t){if(this.clipAttachment)return 0;this.clipAttachment=t;let n=t.worldVerticesLength,i=me.setArraySize(this.clippingPolygon,n);t.computeWorldVertices(e,0,n,i,0,2);let s=this.clippingPolygon;og.makeClockwise(s);let o=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s));for(let a=0,l=o.length;a<l;a++){let u=o[a];og.makeClockwise(u),u.push(u[0]),u.push(u[1])}return o.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(e,t,n,i,s,o,a){i&&s&&o&&typeof a=="boolean"?this.clipTrianglesRender(e,t,n,i,s,o,a):this.clipTrianglesNoRender(e,t,n)}clipTrianglesNoRender(e,t,n){let i=this.clipOutput,s=this.clippedVertices,o=this.clippedTriangles,a=this.clippingPolygons,l=a.length,u=0;s.length=0,o.length=0;for(let h=0;h<n;h+=3){let c=t[h]<<1,d=e[c],f=e[c+1];c=t[h+1]<<1;let g=e[c],v=e[c+1];c=t[h+2]<<1;let x=e[c],y=e[c+1];for(let b=0;b<l;b++){let _=s.length;if(this.clip(d,f,g,v,x,y,a[b],i)){let S=i.length;if(S==0)continue;let I=S>>1,A=this.clipOutput,k=me.setArraySize(s,_+I*2);for(let O=0;O<S;O+=2,_+=2){let L=A[O],D=A[O+1];k[_]=L,k[_+1]=D}_=o.length;let M=me.setArraySize(o,_+3*(I-2));I--;for(let O=1;O<I;O++,_+=3)M[_]=u,M[_+1]=u+O,M[_+2]=u+O+1;u+=I+1}else{let S=me.setArraySize(s,_+6);S[_]=d,S[_+1]=f,S[_+2]=g,S[_+3]=v,S[_+4]=x,S[_+5]=y,_=o.length;let I=me.setArraySize(o,_+3);I[_]=u,I[_+1]=u+1,I[_+2]=u+2,u+=3;break}}}}clipTrianglesRender(e,t,n,i,s,o,a){let l=this.clipOutput,u=this.clippedVertices,h=this.clippedTriangles,c=this.clippingPolygons,d=c.length,f=a?12:8,g=0;u.length=0,h.length=0;for(let v=0;v<n;v+=3){let x=t[v]<<1,y=e[x],b=e[x+1],_=i[x],S=i[x+1];x=t[v+1]<<1;let I=e[x],A=e[x+1],k=i[x],M=i[x+1];x=t[v+2]<<1;let O=e[x],L=e[x+1],D=i[x],j=i[x+1];for(let F=0;F<d;F++){let B=u.length;if(this.clip(y,b,I,A,O,L,c[F],l)){let X=l.length;if(X==0)continue;let V=A-L,Q=O-I,H=y-O,G=L-b,$=1/(V*H+Q*(b-L)),W=X>>1,Z=this.clipOutput,se=me.setArraySize(u,B+W*f);for(let ye=0;ye<X;ye+=2,B+=f){let Oe=Z[ye],Be=Z[ye+1];se[B]=Oe,se[B+1]=Be,se[B+2]=s.r,se[B+3]=s.g,se[B+4]=s.b,se[B+5]=s.a;let ze=Oe-O,Ve=Be-L,$e=(V*ze+Q*Ve)*$,Le=(G*ze+H*Ve)*$,ct=1-$e-Le;se[B+6]=_*$e+k*Le+D*ct,se[B+7]=S*$e+M*Le+j*ct,a&&(se[B+8]=o.r,se[B+9]=o.g,se[B+10]=o.b,se[B+11]=o.a)}B=h.length;let ae=me.setArraySize(h,B+3*(W-2));W--;for(let ye=1;ye<W;ye++,B+=3)ae[B]=g,ae[B+1]=g+ye,ae[B+2]=g+ye+1;g+=W+1}else{let X=me.setArraySize(u,B+3*f);X[B]=y,X[B+1]=b,X[B+2]=s.r,X[B+3]=s.g,X[B+4]=s.b,X[B+5]=s.a,a?(X[B+6]=_,X[B+7]=S,X[B+8]=o.r,X[B+9]=o.g,X[B+10]=o.b,X[B+11]=o.a,X[B+12]=I,X[B+13]=A,X[B+14]=s.r,X[B+15]=s.g,X[B+16]=s.b,X[B+17]=s.a,X[B+18]=k,X[B+19]=M,X[B+20]=o.r,X[B+21]=o.g,X[B+22]=o.b,X[B+23]=o.a,X[B+24]=O,X[B+25]=L,X[B+26]=s.r,X[B+27]=s.g,X[B+28]=s.b,X[B+29]=s.a,X[B+30]=D,X[B+31]=j,X[B+32]=o.r,X[B+33]=o.g,X[B+34]=o.b,X[B+35]=o.a):(X[B+6]=_,X[B+7]=S,X[B+8]=I,X[B+9]=A,X[B+10]=s.r,X[B+11]=s.g,X[B+12]=s.b,X[B+13]=s.a,X[B+14]=k,X[B+15]=M,X[B+16]=O,X[B+17]=L,X[B+18]=s.r,X[B+19]=s.g,X[B+20]=s.b,X[B+21]=s.a,X[B+22]=D,X[B+23]=j),B=h.length;let V=me.setArraySize(h,B+3);V[B]=g,V[B+1]=g+1,V[B+2]=g+2,g+=3;break}}}}clipTrianglesUnpacked(e,t,n,i){let s=this.clipOutput,o=this.clippedVertices,a=this.clippedUVs,l=this.clippedTriangles,u=this.clippingPolygons,h=u.length,c=0;o.length=0,a.length=0,l.length=0;for(let d=0;d<n;d+=3){let f=t[d]<<1,g=e[f],v=e[f+1],x=i[f],y=i[f+1];f=t[d+1]<<1;let b=e[f],_=e[f+1],S=i[f],I=i[f+1];f=t[d+2]<<1;let A=e[f],k=e[f+1],M=i[f],O=i[f+1];for(let L=0;L<h;L++){let D=o.length;if(this.clip(g,v,b,_,A,k,u[L],s)){let j=s.length;if(j==0)continue;let F=_-k,B=A-b,X=g-A,V=k-v,Q=1/(F*X+B*(v-k)),H=j>>1,G=this.clipOutput,$=me.setArraySize(o,D+H*2),W=me.setArraySize(a,D+H*2);for(let se=0;se<j;se+=2,D+=2){let ae=G[se],ye=G[se+1];$[D]=ae,$[D+1]=ye;let Oe=ae-A,Be=ye-k,ze=(F*Oe+B*Be)*Q,Ve=(V*Oe+X*Be)*Q,$e=1-ze-Ve;W[D]=x*ze+S*Ve+M*$e,W[D+1]=y*ze+I*Ve+O*$e}D=l.length;let Z=me.setArraySize(l,D+3*(H-2));H--;for(let se=1;se<H;se++,D+=3)Z[D]=c,Z[D+1]=c+se,Z[D+2]=c+se+1;c+=H+1}else{let j=me.setArraySize(o,D+6);j[D]=g,j[D+1]=v,j[D+2]=b,j[D+3]=_,j[D+4]=A,j[D+5]=k;let F=me.setArraySize(a,D+3*2);F[D]=x,F[D+1]=y,F[D+2]=S,F[D+3]=I,F[D+4]=M,F[D+5]=O,D=l.length;let B=me.setArraySize(l,D+3);B[D]=c,B[D+1]=c+1,B[D+2]=c+2,c+=3;break}}}}clip(e,t,n,i,s,o,a,l){let u=l,h=!1,c;a.length%4>=2?(c=l,l=this.scratch):c=this.scratch,c.length=0,c.push(e),c.push(t),c.push(n),c.push(i),c.push(s),c.push(o),c.push(e),c.push(t),l.length=0;let d=a.length-4,f=a;for(let g=0;;g+=2){let v=f[g],x=f[g+1],y=v-f[g+2],b=x-f[g+3],_=l.length,S=c;for(let A=0,k=c.length-2;A<k;){let M=S[A],O=S[A+1];A+=2;let L=S[A],D=S[A+1],j=b*(v-L)>y*(x-D),F=b*(v-M)-y*(x-O);if(F>0){if(j){l.push(L),l.push(D);continue}let B=L-M,X=D-O,V=F/(B*b-X*y);if(V>=0&&V<=1)l.push(M+B*V),l.push(O+X*V);else{l.push(L),l.push(D);continue}}else if(j){let B=L-M,X=D-O,V=F/(B*b-X*y);if(V>=0&&V<=1)l.push(M+B*V),l.push(O+X*V),l.push(L),l.push(D);else{l.push(L),l.push(D);continue}}h=!0}if(_==l.length)return u.length=0,!0;if(l.push(l[0]),l.push(l[1]),g==d)break;let I=l;l=c,l.length=0,c=I}if(u!=l){u.length=0;for(let g=0,v=l.length-2;g<v;g++)u[g]=l[g]}else u.length=u.length-2;return h}static makeClockwise(e){let t=e,n=e.length,i=t[n-2]*t[1]-t[0]*t[n-1],s=0,o=0,a=0,l=0;for(let u=0,h=n-3;u<h;u+=2)s=t[u],o=t[u+1],a=t[u+2],l=t[u+3],i+=s*l-a*o;if(!(i<0))for(let u=0,h=n-2,c=n>>1;u<c;u+=2){let d=t[u],f=t[u+1],g=h-u;t[u]=t[g],t[u+1]=t[g+1],t[g]=d,t[g+1]=f}}}class eY{constructor(e){C(this,"attachmentLoader");C(this,"scale",1);C(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,n=new e3,i=typeof e=="string"?JSON.parse(e):e,s=i.skeleton;if(s&&(n.hash=s.hash,n.version=s.spine,n.x=s.x,n.y=s.y,n.width=s.width,n.height=s.height,n.referenceScale=Y(s,"referenceScale",100)*t,n.fps=s.fps,n.imagesPath=s.images??null,n.audioPath=s.audio??null),i.bones)for(let o=0;o<i.bones.length;o++){let a=i.bones[o],l=null,u=Y(a,"parent",null);u&&(l=n.findBone(u));let h=new VO(n.bones.length,a.name,l);h.length=Y(a,"length",0)*t,h.x=Y(a,"x",0)*t,h.y=Y(a,"y",0)*t,h.rotation=Y(a,"rotation",0),h.scaleX=Y(a,"scaleX",1),h.scaleY=Y(a,"scaleY",1),h.shearX=Y(a,"shearX",0),h.shearY=Y(a,"shearY",0),h.inherit=me.enumValue(Dt,Y(a,"inherit","Normal")),h.skinRequired=Y(a,"skin",!1);let c=Y(a,"color",null);c&&h.color.setFromString(c),n.bones.push(h)}if(i.slots)for(let o=0;o<i.slots.length;o++){let a=i.slots[o],l=a.name,u=n.findBone(a.bone);if(!u)throw new Error(`Couldn't find bone ${a.bone} for slot ${l}`);let h=new t3(n.slots.length,l,u),c=Y(a,"color",null);c&&h.color.setFromString(c);let d=Y(a,"dark",null);d&&(h.darkColor=Xe.fromString(d)),h.attachmentName=Y(a,"attachment",null),h.blendMode=me.enumValue(ua,Y(a,"blend","normal")),h.visible=Y(a,"visible",!0),n.slots.push(h)}if(i.ik)for(let o=0;o<i.ik.length;o++){let a=i.ik[o],l=new QO(a.name);l.order=Y(a,"order",0),l.skinRequired=Y(a,"skin",!1);for(let h=0;h<a.bones.length;h++){let c=n.findBone(a.bones[h]);if(!c)throw new Error(`Couldn't find bone ${a.bones[h]} for IK constraint ${a.name}.`);l.bones.push(c)}let u=n.findBone(a.target);if(!u)throw new Error(`Couldn't find target bone ${a.target} for IK constraint ${a.name}.`);l.target=u,l.mix=Y(a,"mix",1),l.softness=Y(a,"softness",0)*t,l.bendDirection=Y(a,"bendPositive",!0)?1:-1,l.compress=Y(a,"compress",!1),l.stretch=Y(a,"stretch",!1),l.uniform=Y(a,"uniform",!1),n.ikConstraints.push(l)}if(i.transform)for(let o=0;o<i.transform.length;o++){let a=i.transform[o],l=new r3(a.name);l.order=Y(a,"order",0),l.skinRequired=Y(a,"skin",!1);for(let c=0;c<a.bones.length;c++){let d=a.bones[c],f=n.findBone(d);if(!f)throw new Error(`Couldn't find bone ${d} for transform constraint ${a.name}.`);l.bones.push(f)}let u=a.target,h=n.findBone(u);if(!h)throw new Error(`Couldn't find target bone ${u} for transform constraint ${a.name}.`);l.target=h,l.local=Y(a,"local",!1),l.relative=Y(a,"relative",!1),l.offsetRotation=Y(a,"rotation",0),l.offsetX=Y(a,"x",0)*t,l.offsetY=Y(a,"y",0)*t,l.offsetScaleX=Y(a,"scaleX",0),l.offsetScaleY=Y(a,"scaleY",0),l.offsetShearY=Y(a,"shearY",0),l.mixRotate=Y(a,"mixRotate",1),l.mixX=Y(a,"mixX",1),l.mixY=Y(a,"mixY",l.mixX),l.mixScaleX=Y(a,"mixScaleX",1),l.mixScaleY=Y(a,"mixScaleY",l.mixScaleX),l.mixShearY=Y(a,"mixShearY",1),n.transformConstraints.push(l)}if(i.path)for(let o=0;o<i.path.length;o++){let a=i.path[o],l=new ZO(a.name);l.order=Y(a,"order",0),l.skinRequired=Y(a,"skin",!1);for(let c=0;c<a.bones.length;c++){let d=a.bones[c],f=n.findBone(d);if(!f)throw new Error(`Couldn't find bone ${d} for path constraint ${a.name}.`);l.bones.push(f)}let u=a.target,h=n.findSlot(u);if(!h)throw new Error(`Couldn't find target slot ${u} for path constraint ${a.name}.`);l.target=h,l.positionMode=me.enumValue(Ns,Y(a,"positionMode","Percent")),l.spacingMode=me.enumValue(fr,Y(a,"spacingMode","Length")),l.rotateMode=me.enumValue(dl,Y(a,"rotateMode","Tangent")),l.offsetRotation=Y(a,"rotation",0),l.position=Y(a,"position",0),l.positionMode==Ns.Fixed&&(l.position*=t),l.spacing=Y(a,"spacing",0),(l.spacingMode==fr.Length||l.spacingMode==fr.Fixed)&&(l.spacing*=t),l.mixRotate=Y(a,"mixRotate",1),l.mixX=Y(a,"mixX",1),l.mixY=Y(a,"mixY",l.mixX),n.pathConstraints.push(l)}if(i.physics)for(let o=0;o<i.physics.length;o++){const a=i.physics[o],l=new JO(a.name);l.order=Y(a,"order",0),l.skinRequired=Y(a,"skin",!1);const u=a.bone,h=n.findBone(u);if(h==null)throw new Error("Physics bone not found: "+u);l.bone=h,l.x=Y(a,"x",0),l.y=Y(a,"y",0),l.rotate=Y(a,"rotate",0),l.scaleX=Y(a,"scaleX",0),l.shearX=Y(a,"shearX",0),l.limit=Y(a,"limit",5e3)*t,l.step=1/Y(a,"fps",60),l.inertia=Y(a,"inertia",1),l.strength=Y(a,"strength",100),l.damping=Y(a,"damping",1),l.massInverse=1/Y(a,"mass",1),l.wind=Y(a,"wind",0),l.gravity=Y(a,"gravity",0),l.mix=Y(a,"mix",1),l.inertiaGlobal=Y(a,"inertiaGlobal",!1),l.strengthGlobal=Y(a,"strengthGlobal",!1),l.dampingGlobal=Y(a,"dampingGlobal",!1),l.massGlobal=Y(a,"massGlobal",!1),l.windGlobal=Y(a,"windGlobal",!1),l.gravityGlobal=Y(a,"gravityGlobal",!1),l.mixGlobal=Y(a,"mixGlobal",!1),n.physicsConstraints.push(l)}if(i.skins)for(let o=0;o<i.skins.length;o++){let a=i.skins[o],l=new w_(a.name);if(a.bones)for(let u=0;u<a.bones.length;u++){let h=a.bones[u],c=n.findBone(h);if(!c)throw new Error(`Couldn't find bone ${h} for skin ${a.name}.`);l.bones.push(c)}if(a.ik)for(let u=0;u<a.ik.length;u++){let h=a.ik[u],c=n.findIkConstraint(h);if(!c)throw new Error(`Couldn't find IK constraint ${h} for skin ${a.name}.`);l.constraints.push(c)}if(a.transform)for(let u=0;u<a.transform.length;u++){let h=a.transform[u],c=n.findTransformConstraint(h);if(!c)throw new Error(`Couldn't find transform constraint ${h} for skin ${a.name}.`);l.constraints.push(c)}if(a.path)for(let u=0;u<a.path.length;u++){let h=a.path[u],c=n.findPathConstraint(h);if(!c)throw new Error(`Couldn't find path constraint ${h} for skin ${a.name}.`);l.constraints.push(c)}if(a.physics)for(let u=0;u<a.physics.length;u++){let h=a.physics[u],c=n.findPhysicsConstraint(h);if(!c)throw new Error(`Couldn't find physics constraint ${h} for skin ${a.name}.`);l.constraints.push(c)}for(let u in a.attachments){let h=n.findSlot(u);if(!h)throw new Error(`Couldn't find slot ${u} for skin ${a.name}.`);let c=a.attachments[u];for(let d in c){let f=this.readAttachment(c[d],l,h.index,d,n);f&&l.setAttachment(h.index,d,f)}}n.skins.push(l),l.name=="default"&&(n.defaultSkin=l)}for(let o=0,a=this.linkedMeshes.length;o<a;o++){let l=this.linkedMeshes[o],u=l.skin?n.findSkin(l.skin):n.defaultSkin;if(!u)throw new Error(`Skin not found: ${l.skin}`);let h=u.getAttachment(l.slotIndex,l.parent);if(!h)throw new Error(`Parent mesh not found: ${l.parent}`);l.mesh.timelineAttachment=l.inheritTimeline?h:l.mesh,l.mesh.setParentMesh(h),l.mesh.region!=null&&l.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(let o in i.events){let a=i.events[o],l=new KO(o);l.intValue=Y(a,"int",0),l.floatValue=Y(a,"float",0),l.stringValue=Y(a,"string",""),l.audioPath=Y(a,"audio",null),l.audioPath&&(l.volume=Y(a,"volume",1),l.balance=Y(a,"balance",0)),n.events.push(l)}if(i.animations)for(let o in i.animations){let a=i.animations[o];this.readAnimation(a,o,n)}return n}readAttachment(e,t,n,i,s){let o=this.scale;switch(i=Y(e,"name",i),Y(e,"type","region")){case"region":{let a=Y(e,"path",i),l=this.readSequence(Y(e,"sequence",null)),u=this.attachmentLoader.newRegionAttachment(t,i,a,l);if(!u)return null;u.path=a,u.x=Y(e,"x",0)*o,u.y=Y(e,"y",0)*o,u.scaleX=Y(e,"scaleX",1),u.scaleY=Y(e,"scaleY",1),u.rotation=Y(e,"rotation",0),u.width=e.width*o,u.height=e.height*o,u.sequence=l;let h=Y(e,"color",null);return h&&u.color.setFromString(h),u.region!=null&&u.updateRegion(),u}case"boundingbox":{let a=this.attachmentLoader.newBoundingBoxAttachment(t,i);if(!a)return null;this.readVertices(e,a,e.vertexCount<<1);let l=Y(e,"color",null);return l&&a.color.setFromString(l),a}case"mesh":case"linkedmesh":{let a=Y(e,"path",i),l=this.readSequence(Y(e,"sequence",null)),u=this.attachmentLoader.newMeshAttachment(t,i,a,l);if(!u)return null;u.path=a;let h=Y(e,"color",null);h&&u.color.setFromString(h),u.width=Y(e,"width",0)*o,u.height=Y(e,"height",0)*o,u.sequence=l;let c=Y(e,"parent",null);if(c)return this.linkedMeshes.push(new tY(u,Y(e,"skin",null),n,c,Y(e,"timelines",!0))),u;let d=e.uvs;return this.readVertices(e,u,d.length),u.triangles=e.triangles,u.regionUVs=d,u.region!=null&&u.updateRegion(),u.edges=Y(e,"edges",null),u.hullLength=Y(e,"hull",0)*2,u}case"path":{let a=this.attachmentLoader.newPathAttachment(t,i);if(!a)return null;a.closed=Y(e,"closed",!1),a.constantSpeed=Y(e,"constantSpeed",!0);let l=e.vertexCount;this.readVertices(e,a,l<<1);let u=me.newArray(l/3,0);for(let c=0;c<e.lengths.length;c++)u[c]=e.lengths[c]*o;a.lengths=u;let h=Y(e,"color",null);return h&&a.color.setFromString(h),a}case"point":{let a=this.attachmentLoader.newPointAttachment(t,i);if(!a)return null;a.x=Y(e,"x",0)*o,a.y=Y(e,"y",0)*o,a.rotation=Y(e,"rotation",0);let l=Y(e,"color",null);return l&&a.color.setFromString(l),a}case"clipping":{let a=this.attachmentLoader.newClippingAttachment(t,i);if(!a)return null;let l=Y(e,"end",null);l&&(a.endSlot=s.findSlot(l));let u=e.vertexCount;this.readVertices(e,a,u<<1);let h=Y(e,"color",null);return h&&a.color.setFromString(h),a}}return null}readSequence(e){if(e==null)return null;let t=new rg(Y(e,"count",0));return t.start=Y(e,"start",1),t.digits=Y(e,"digits",0),t.setupIndex=Y(e,"setup",0),t}readVertices(e,t,n){let i=this.scale;t.worldVerticesLength=n;let s=e.vertices;if(n==s.length){let l=me.toFloatArray(s);if(i!=1)for(let u=0,h=s.length;u<h;u++)l[u]*=i;t.vertices=l;return}let o=new Array,a=new Array;for(let l=0,u=s.length;l<u;){let h=s[l++];a.push(h);for(let c=l+h*4;l<c;l+=4)a.push(s[l]),o.push(s[l+1]*i),o.push(s[l+2]*i),o.push(s[l+3])}t.bones=a,t.vertices=me.toFloatArray(o)}readAnimation(e,t,n){let i=this.scale,s=new Array;if(e.slots)for(let a in e.slots){let l=e.slots[a],u=n.findSlot(a);if(!u)throw new Error("Slot not found: "+a);let h=u.index;for(let c in l){let d=l[c];if(!d)continue;let f=d.length;if(c=="attachment"){let g=new Cu(f,h);for(let v=0;v<f;v++){let x=d[v];g.setFrame(v,Y(x,"time",0),Y(x,"name",null))}s.push(g)}else if(c=="rgba"){let g=new kO(f,f<<2,h),v=d[0],x=Y(v,"time",0),y=Xe.fromString(v.color);for(let b=0,_=0;;b++){g.setFrame(b,x,y.r,y.g,y.b,y.a);let S=d[b+1];if(!S){g.shrink(_);break}let I=Y(S,"time",0),A=Xe.fromString(S.color),k=v.curve;k&&(_=rt(k,g,_,b,0,x,I,y.r,A.r,1),_=rt(k,g,_,b,1,x,I,y.g,A.g,1),_=rt(k,g,_,b,2,x,I,y.b,A.b,1),_=rt(k,g,_,b,3,x,I,y.a,A.a,1)),x=I,y=A,v=S}s.push(g)}else if(c=="rgb"){let g=new IO(f,f*3,h),v=d[0],x=Y(v,"time",0),y=Xe.fromString(v.color);for(let b=0,_=0;;b++){g.setFrame(b,x,y.r,y.g,y.b);let S=d[b+1];if(!S){g.shrink(_);break}let I=Y(S,"time",0),A=Xe.fromString(S.color),k=v.curve;k&&(_=rt(k,g,_,b,0,x,I,y.r,A.r,1),_=rt(k,g,_,b,1,x,I,y.g,A.g,1),_=rt(k,g,_,b,2,x,I,y.b,A.b,1)),x=I,y=A,v=S}s.push(g)}else if(c=="alpha")s.push(Ei(d,new MO(f,f,h),0,1));else if(c=="rgba2"){let g=new RO(f,f*7,h),v=d[0],x=Y(v,"time",0),y=Xe.fromString(v.light),b=Xe.fromString(v.dark);for(let _=0,S=0;;_++){g.setFrame(_,x,y.r,y.g,y.b,y.a,b.r,b.g,b.b);let I=d[_+1];if(!I){g.shrink(S);break}let A=Y(I,"time",0),k=Xe.fromString(I.light),M=Xe.fromString(I.dark),O=v.curve;O&&(S=rt(O,g,S,_,0,x,A,y.r,k.r,1),S=rt(O,g,S,_,1,x,A,y.g,k.g,1),S=rt(O,g,S,_,2,x,A,y.b,k.b,1),S=rt(O,g,S,_,3,x,A,y.a,k.a,1),S=rt(O,g,S,_,4,x,A,b.r,M.r,1),S=rt(O,g,S,_,5,x,A,b.g,M.g,1),S=rt(O,g,S,_,6,x,A,b.b,M.b,1)),x=A,y=k,b=M,v=I}s.push(g)}else if(c=="rgb2"){let g=new OO(f,f*6,h),v=d[0],x=Y(v,"time",0),y=Xe.fromString(v.light),b=Xe.fromString(v.dark);for(let _=0,S=0;;_++){g.setFrame(_,x,y.r,y.g,y.b,b.r,b.g,b.b);let I=d[_+1];if(!I){g.shrink(S);break}let A=Y(I,"time",0),k=Xe.fromString(I.light),M=Xe.fromString(I.dark),O=v.curve;O&&(S=rt(O,g,S,_,0,x,A,y.r,k.r,1),S=rt(O,g,S,_,1,x,A,y.g,k.g,1),S=rt(O,g,S,_,2,x,A,y.b,k.b,1),S=rt(O,g,S,_,3,x,A,b.r,M.r,1),S=rt(O,g,S,_,4,x,A,b.g,M.g,1),S=rt(O,g,S,_,5,x,A,b.b,M.b,1)),x=A,y=k,b=M,v=I}s.push(g)}}}if(e.bones)for(let a in e.bones){let l=e.bones[a],u=n.findBone(a);if(!u)throw new Error("Bone not found: "+a);let h=u.index;for(let c in l){let d=l[c],f=d.length;if(f!=0){if(c==="rotate")s.push(Ei(d,new ng(f,f,h),0,1));else if(c==="translate"){let g=new xO(f,f<<1,h);s.push(qy(d,g,"x","y",0,i))}else if(c==="translatex"){let g=new _O(f,f,h);s.push(Ei(d,g,0,i))}else if(c==="translatey"){let g=new wO(f,f,h);s.push(Ei(d,g,0,i))}else if(c==="scale"){let g=new bO(f,f<<1,h);s.push(qy(d,g,"x","y",1,1))}else if(c==="scalex"){let g=new SO(f,f,h);s.push(Ei(d,g,1,1))}else if(c==="scaley"){let g=new TO(f,f,h);s.push(Ei(d,g,1,1))}else if(c==="shear"){let g=new EO(f,f<<1,h);s.push(qy(d,g,"x","y",0,1))}else if(c==="shearx"){let g=new CO(f,f,h);s.push(Ei(d,g,0,1))}else if(c==="sheary"){let g=new PO(f,f,h);s.push(Ei(d,g,0,1))}else if(c==="inherit"){let g=new AO(f,u.index);for(let v=0;v<d.length;v++){let x=d[v];g.setFrame(v,Y(x,"time",0),me.enumValue(Dt,Y(x,"inherit","Normal")))}s.push(g)}}}}if(e.ik)for(let a in e.ik){let l=e.ik[a],u=l[0];if(!u)continue;let h=n.findIkConstraint(a);if(!h)throw new Error("IK Constraint not found: "+a);let c=n.ikConstraints.indexOf(h),d=new FO(l.length,l.length<<1,c),f=Y(u,"time",0),g=Y(u,"mix",1),v=Y(u,"softness",0)*i;for(let x=0,y=0;;x++){d.setFrame(x,f,g,v,Y(u,"bendPositive",!0)?1:-1,Y(u,"compress",!1),Y(u,"stretch",!1));let b=l[x+1];if(!b){d.shrink(y);break}let _=Y(b,"time",0),S=Y(b,"mix",1),I=Y(b,"softness",0)*i,A=u.curve;A&&(y=rt(A,d,y,x,0,f,_,g,S,1),y=rt(A,d,y,x,1,f,_,v,I,i)),f=_,g=S,v=I,u=b}s.push(d)}if(e.transform)for(let a in e.transform){let l=e.transform[a],u=l[0];if(!u)continue;let h=n.findTransformConstraint(a);if(!h)throw new Error("Transform constraint not found: "+a);let c=n.transformConstraints.indexOf(h),d=new BO(l.length,l.length*6,c),f=Y(u,"time",0),g=Y(u,"mixRotate",1),v=Y(u,"mixX",1),x=Y(u,"mixY",v),y=Y(u,"mixScaleX",1),b=Y(u,"mixScaleY",y),_=Y(u,"mixShearY",1);for(let S=0,I=0;;S++){d.setFrame(S,f,g,v,x,y,b,_);let A=l[S+1];if(!A){d.shrink(I);break}let k=Y(A,"time",0),M=Y(A,"mixRotate",1),O=Y(A,"mixX",1),L=Y(A,"mixY",O),D=Y(A,"mixScaleX",1),j=Y(A,"mixScaleY",D),F=Y(A,"mixShearY",1),B=u.curve;B&&(I=rt(B,d,I,S,0,f,k,g,M,1),I=rt(B,d,I,S,1,f,k,v,O,1),I=rt(B,d,I,S,2,f,k,x,L,1),I=rt(B,d,I,S,3,f,k,y,D,1),I=rt(B,d,I,S,4,f,k,b,j,1),I=rt(B,d,I,S,5,f,k,_,F,1)),f=k,g=M,v=O,x=L,y=D,b=j,y=D,u=A}s.push(d)}if(e.path)for(let a in e.path){let l=e.path[a],u=n.findPathConstraint(a);if(!u)throw new Error("Path constraint not found: "+a);let h=n.pathConstraints.indexOf(u);for(let c in l){let d=l[c],f=d[0];if(!f)continue;let g=d.length;if(c==="position"){let v=new LO(g,g,h);s.push(Ei(d,v,0,u.positionMode==Ns.Fixed?i:1))}else if(c==="spacing"){let v=new DO(g,g,h);s.push(Ei(d,v,0,u.spacingMode==fr.Length||u.spacingMode==fr.Fixed?i:1))}else if(c==="mix"){let v=new UO(g,g*3,h),x=Y(f,"time",0),y=Y(f,"mixRotate",1),b=Y(f,"mixX",1),_=Y(f,"mixY",b);for(let S=0,I=0;;S++){v.setFrame(S,x,y,b,_);let A=d[S+1];if(!A){v.shrink(I);break}let k=Y(A,"time",0),M=Y(A,"mixRotate",1),O=Y(A,"mixX",1),L=Y(A,"mixY",O),D=f.curve;D&&(I=rt(D,v,I,S,0,x,k,y,M,1),I=rt(D,v,I,S,1,x,k,b,O,1),I=rt(D,v,I,S,2,x,k,_,L,1)),x=k,y=M,b=O,_=L,f=A}s.push(v)}}}if(e.physics)for(let a in e.physics){let l=e.physics[a],u=-1;if(a.length>0){let h=n.findPhysicsConstraint(a);if(!h)throw new Error("Physics constraint not found: "+a);u=n.physicsConstraints.indexOf(h)}for(let h in l){let c=l[h],d=c[0];if(!d)continue;let f=c.length;if(h=="reset"){const v=new ig(f,u);for(let x=0;d!=null;d=c[x+1],x++)v.setFrame(x,Y(d,"time",0));s.push(v);continue}let g;if(h=="inertia")g=new jO(f,f,u);else if(h=="strength")g=new XO(f,f,u);else if(h=="damping")g=new HO(f,f,u);else if(h=="mass")g=new $O(f,f,u);else if(h=="wind")g=new zO(f,f,u);else if(h=="gravity")g=new YO(f,f,u);else if(h=="mix")g=new GO(f,f,u);else continue;s.push(Ei(c,g,0,1))}}if(e.attachments)for(let a in e.attachments){let l=e.attachments[a],u=n.findSkin(a);if(!u)throw new Error("Skin not found: "+a);for(let h in l){let c=l[h],d=n.findSlot(h);if(!d)throw new Error("Slot not found: "+h);let f=d.index;for(let g in c){let v=c[g],x=u.getAttachment(f,g);for(let y in v){let b=v[y],_=b[0];if(_){if(y=="deform"){let S=x.bones,I=x.vertices,A=S?I.length/3*2:I.length,k=new NO(b.length,b.length,f,x),M=Y(_,"time",0);for(let O=0,L=0;;O++){let D,j=Y(_,"vertices",null);if(!j)D=S?me.newFloatArray(A):I;else{D=me.newFloatArray(A);let V=Y(_,"offset",0);if(me.arrayCopy(j,0,D,V,j.length),i!=1)for(let Q=V,H=Q+j.length;Q<H;Q++)D[Q]*=i;if(!S)for(let Q=0;Q<A;Q++)D[Q]+=I[Q]}k.setFrame(O,M,D);let F=b[O+1];if(!F){k.shrink(L);break}let B=Y(F,"time",0),X=_.curve;X&&(L=rt(X,k,L,O,0,M,B,0,1,1)),M=B,_=F}s.push(k)}else if(y=="sequence"){let S=new sg(b.length,f,x),I=0;for(let A=0;A<b.length;A++){let k=Y(_,"delay",I),M=Y(_,"time",0),O=Rr[Y(_,"mode","hold")],L=Y(_,"index",0);S.setFrame(A,M,O,L,k),I=k,_=b[A+1]}s.push(S)}}}}}}if(e.drawOrder){let a=new hl(e.drawOrder.length),l=n.slots.length,u=0;for(let h=0;h<e.drawOrder.length;h++,u++){let c=e.drawOrder[h],d=null,f=Y(c,"offsets",null);if(f){d=me.newArray(l,-1);let g=me.newArray(l-f.length,0),v=0,x=0;for(let y=0;y<f.length;y++){let b=f[y],_=n.findSlot(b.slot);if(!_)throw new Error("Slot not found: "+_);let S=_.index;for(;v!=S;)g[x++]=v++;d[v+b.offset]=v++}for(;v<l;)g[x++]=v++;for(let y=l-1;y>=0;y--)d[y]==-1&&(d[y]=g[--x])}a.setFrame(u,Y(c,"time",0),d)}s.push(a)}if(e.events){let a=new ad(e.events.length),l=0;for(let u=0;u<e.events.length;u++,l++){let h=e.events[u],c=n.findEvent(h.name);if(!c)throw new Error("Event not found: "+h.name);let d=new qO(me.toSinglePrecision(Y(h,"time",0)),c);d.intValue=Y(h,"int",c.intValue),d.floatValue=Y(h,"float",c.floatValue),d.stringValue=Y(h,"string",c.stringValue),d.data.audioPath&&(d.volume=Y(h,"volume",1),d.balance=Y(h,"balance",0)),a.setFrame(l,d)}s.push(a)}let o=0;for(let a=0,l=s.length;a<l;a++)o=Math.max(o,s[a].getDuration());n.animations.push(new Pb(t,s,o))}}class tY{constructor(e,t,n,i,s){C(this,"parent");C(this,"skin");C(this,"slotIndex");C(this,"mesh");C(this,"inheritTimeline");this.mesh=e,this.skin=t,this.slotIndex=n,this.parent=i,this.inheritTimeline=s}}function Ei(r,e,t,n){let i=r[0],s=Y(i,"time",0),o=Y(i,"value",t)*n,a=0;for(let l=0;;l++){e.setFrame(l,s,o);let u=r[l+1];if(!u)return e.shrink(a),e;let h=Y(u,"time",0),c=Y(u,"value",t)*n;i.curve&&(a=rt(i.curve,e,a,l,0,s,h,o,c,n)),s=h,o=c,i=u}}function qy(r,e,t,n,i,s){let o=r[0],a=Y(o,"time",0),l=Y(o,t,i)*s,u=Y(o,n,i)*s,h=0;for(let c=0;;c++){e.setFrame(c,a,l,u);let d=r[c+1];if(!d)return e.shrink(h),e;let f=Y(d,"time",0),g=Y(d,t,i)*s,v=Y(d,n,i)*s,x=o.curve;x&&(h=rt(x,e,h,c,0,a,f,l,g,s),h=rt(x,e,h,c,1,a,f,u,v,s)),a=f,l=g,u=v,o=d}}function rt(r,e,t,n,i,s,o,a,l,u){if(r=="stepped")return e.setStepped(n),t;let h=i<<2,c=r[h],d=r[h+1]*u,f=r[h+2],g=r[h+3]*u;return e.setBezier(t,n,i,s,a,c,d,f,g,o,l),t+1}function Y(r,e,t){return r[e]!==void 0?r[e]:t}typeof Math.fround>"u"&&(Math.fround=function(r){return function(e){return r[0]=e,r[0]}}(new Float32Array(1)));const eo=class eo extends c9{constructor(t){super(t.resource.source);C(this,"texture");this.texture=Re.from(t)}static from(t){return eo.textureMap.has(t)?eo.textureMap.get(t):new eo(t)}setFilters(t,n){this.texture.baseTexture.scaleMode=eo.toPixiTextureFilter(t),this.texture.baseTexture.mipmap=eo.toPixiMipMap(t)}setWraps(t,n){this.texture.baseTexture.wrapMode=eo.toPixiTextureWrap(t)}dispose(){this.texture.destroy()}static toPixiTextureFilter(t){switch(t){case wr.Nearest:case wr.MipMapNearestLinear:case wr.MipMapNearestNearest:return Ni.NEAREST;case wr.Linear:case wr.MipMapLinearLinear:case wr.MipMapLinearNearest:return Ni.LINEAR;default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiMipMap(t){switch(t){case wr.Nearest:case wr.Linear:return di.OFF;case wr.MipMapNearestLinear:case wr.MipMapNearestNearest:case wr.MipMapLinearLinear:case wr.MipMapLinearNearest:return di.ON;default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiTextureWrap(t){switch(t){case yo.ClampToEdge:return ci.CLAMP;case yo.MirroredRepeat:return ci.MIRRORED_REPEAT;case yo.Repeat:return ci.REPEAT;default:throw new Error(`Unknown texture wrap: ${String(t)}`)}}static toPixiBlending(t){switch(t){case ua.Normal:return Ie.NORMAL;case ua.Additive:return Ie.ADD;case ua.Multiply:return Ie.MULTIPLY;case ua.Screen:return Ie.SCREEN;default:throw new Error(`Unknown blendMode: ${String(t)}`)}}};C(eo,"textureMap",new Map);let pc=eo;const to=class to extends gl{constructor(){const t=new vd;t.getBuffer("aVertexPosition").static=!1,t.getBuffer("aTextureCoord").static=!1;const n=new nc(Re.EMPTY);super(t,n);C(this,"name","");C(this,"warnedTwoTint",!1)}updateFromSpineData(t,n,i,s,o,a,l,u){var y,b;this.texture=t.texture;const h=o/(u?12:8)*2,c=this.geometry.getBuffer("aTextureCoord");((y=c.data)==null?void 0:y.length)!==h&&(c.data=new Float32Array(h));const d=this.geometry.getBuffer("aVertexPosition");((b=d.data)==null?void 0:b.length)!==h&&(d.data=new Float32Array(h));let f=0,g=c.data,v=d.data;for(let _=0;_<o;_+=u?12:8){let S=_;v[f]=s[S++],v[f+1]=s[S++],S+=4,g[f]=s[S++],g[f+1]=s[S++],f+=2}u&&!this.warnedTwoTint&&(console.warn("DarkTint is not enabled by default. To enable use a DarkSlotMesh factory while creating the Spine object."),this.warnedTwoTint=!0),to.auxColor[0]=s[2],to.auxColor[1]=s[3],to.auxColor[2]=s[4],to.auxColor[3]=s[5],this.tint=to.auxColor,this.alpha=to.auxColor[3],this.blendMode=pc.toPixiBlending(n);const x=this.geometry.indexBuffer;if(x.data.length!==a.length)x.data=new Uint32Array(a);else{const _=x.data;for(let S=0;S<l;S++)_[S]=a[S]}this.name=i,c.update(),d.update(),x.update()}};C(to,"auxColor",[0,0,0,0]);let b_=to;class rY extends Bs{constructor(e=!1){super();const t=new bt(void 0),n=new bt(void 0,!0),i=new bt(void 0,!0,!0);this.addAttribute("aVertexPosition",t,2,!1,Se.FLOAT),this.addAttribute("aTextureCoord",n,2,!1,Se.FLOAT),this.addIndex(i)}}const nY=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,iY=`
varying vec2 vTextureCoord;
uniform vec4 uColor;
uniform vec4 uDarkColor;

uniform sampler2D uSampler;

void main(void)
{
	vec4 texColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor.a = texColor.a * uColor.a;
    gl_FragColor.rgb = ((texColor.a - 1.0) * uDarkColor.a + 1.0 - texColor.rgb) * uDarkColor.rgb + texColor.rgb * uColor.rgb;
}
`;class sY extends Hi{constructor(t){const n={uSampler:t??Re.EMPTY,alpha:1,uTextureMatrix:Tt.IDENTITY,uColor:new Float32Array([1,1,1,1]),uDarkColor:new Float32Array([0,0,0,0])},i={tint:16777215,darkTint:0,alpha:1,pluginName:"darkTintBatch"};super(ks.from(nY,iY),n);C(this,"uvMatrix");C(this,"batchable");C(this,"pluginName");C(this,"_tintRGB");C(this,"_darkTintRGB");C(this,"_colorDirty");C(this,"_alpha");C(this,"_tintColor");C(this,"_darkTintColor");this._colorDirty=!1,this.uvMatrix=new Mg(n.uSampler),this.batchable=!0,this.pluginName=i.pluginName,this._tintColor=new ut(i.tint),this._darkTintColor=new ut(i.darkTint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._darkTintRGB=this._darkTintColor.toLittleEndianNumber(),this._alpha=i.alpha,this._colorDirty=!0}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}set darkTint(t){t!==this.darkTint&&(this._darkTintColor.setValue(t),this._darkTintRGB=this._darkTintColor.toLittleEndianNumber(),this._colorDirty=!0)}get darkTint(){return this._darkTintColor.value}get tintValue(){return this._tintColor.toNumber()}get darkTintValue(){return this._darkTintColor.toNumber()}update(){this._colorDirty&&(this._colorDirty=!1,ut.shared.setValue(this._tintColor).premultiply(this._alpha,!0).toArray(this.uniforms.uColor),ut.shared.setValue(this._darkTintColor).premultiply(this._alpha,!0).premultiply(1,!1).toArray(this.uniforms.uDarkColor)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class oY extends gl{constructor(t){super(new rY,new sY(t),void 0,void 0);C(this,"_darkTintRGB",0)}get darkTint(){return"darkTint"in this.shader?this.shader.darkTint:null}set darkTint(t){this.shader.darkTint=t}get darkTintValue(){return this.shader.darkTintValue}_renderToBatch(t){const n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._darkTintRGB=i._darkTintRGB,this._texture=i.texture;const s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}}const lr=class lr extends oY{constructor(){super();C(this,"name","")}updateFromSpineData(t,n,i,s,o,a,l,u){var y,b;this.texture=t.texture;const h=o/(u?12:8)*2,c=this.geometry.getBuffer("aTextureCoord");((y=c.data)==null?void 0:y.length)!==h&&(c.data=new Float32Array(h));const d=this.geometry.getBuffer("aVertexPosition");((b=d.data)==null?void 0:b.length)!==h&&(d.data=new Float32Array(h));let f=0,g=c.data,v=d.data;for(let _=0;_<o;_+=u?12:8){let S=_;v[f]=s[S++],v[f+1]=s[S++],S+=4,g[f]=s[S++],g[f+1]=s[S++],f+=2}u?(lr.auxColor[0]=s[8],lr.auxColor[1]=s[9],lr.auxColor[2]=s[10],lr.auxColor[3]=s[11],this.darkTint=lr.auxColor,lr.auxColor[0]=s[2],lr.auxColor[1]=s[3],lr.auxColor[2]=s[4],lr.auxColor[3]=s[5],this.tint=lr.auxColor):(lr.auxColor[0]=s[2],lr.auxColor[1]=s[3],lr.auxColor[2]=s[4],lr.auxColor[3]=s[5],this.tint=lr.auxColor),this.blendMode=pc.toPixiBlending(n),this.alpha=lr.auxColor[3];const x=this.geometry.indexBuffer;if(x.data.length!==a.length)x.data=new Uint32Array(a);else{const _=x.data;for(let S=0;S<l;S++)_[S]=a[S]}this.name=i,c.update(),d.update(),x.update()}};C(lr,"auxColor",[0,0,0,0]);let S_=lr;var st;let aY=(st=class extends Zr{constructor(t,n){super();C(this,"skeleton");C(this,"state");C(this,"_debug");C(this,"slotMeshFactory",()=>new b_);C(this,"beforeUpdateWorldTransforms",()=>{});C(this,"afterUpdateWorldTransforms",()=>{});C(this,"autoUpdateWarned",!1);C(this,"_autoUpdate",!0);C(this,"meshesCache",new Map);C(this,"lightColor",new Xe);C(this,"darkColor",new Xe);C(this,"slotsObject",new Map);C(this,"verticesCache",me.newFloatArray(1024));C(this,"clippingSlotToPixiMasks",{});this.skeleton=new fc(t);const i=new u9(t);this.state=new x_(i),this.autoUpdate=(n==null?void 0:n.autoUpdate)??!0,this.initializeMeshFactory(n),this.skeleton.setToSetupPose(),this.skeleton.updateWorldTransform(uo.update)}get debug(){return this._debug}set debug(t){this._debug&&this._debug.unregisterSpine(this),t&&t.registerSpine(this),this._debug=t}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t?(Xt.shared.add(this.internalUpdate,this),this.autoUpdateWarned=!1):Xt.shared.remove(this.internalUpdate,this),this._autoUpdate=t}initializeMeshFactory(t){if(t!=null&&t.slotMeshFactory)this.slotMeshFactory=t==null?void 0:t.slotMeshFactory;else for(let n=0;n<this.skeleton.slots.length;n++)if(this.skeleton.slots[n].data.darkColor){this.slotMeshFactory=(t==null?void 0:t.slotMeshFactory)??(()=>new S_);break}}update(t){this.autoUpdate&&!this.autoUpdateWarned&&(console.warn("You are calling update on a Spine instance that has autoUpdate set to true. This is probably not what you want."),this.autoUpdateWarned=!0),this.internalUpdate(0,t)}internalUpdate(t,n){const i=n??Xt.shared.deltaMS/1e3;this.state.update(i),this.state.apply(this.skeleton),this.beforeUpdateWorldTransforms(this),this.skeleton.update(i),this.skeleton.updateWorldTransform(uo.update),this.afterUpdateWorldTransforms(this)}updateTransform(){var t;this.renderMeshes(),this.sortChildren(),(t=this.debug)==null||t.renderDebug(this),super.updateTransform()}destroy(t){this.autoUpdate&&(this.autoUpdate=!1);for(const[,n]of this.meshesCache)n==null||n.destroy();this.state.clearListeners(),this.debug=void 0,this.meshesCache.clear(),this.slotsObject.clear();for(let n in this.clippingSlotToPixiMasks)this.clippingSlotToPixiMasks[n].destroy(),delete this.clippingSlotToPixiMasks[n];super.destroy(t)}resetMeshes(){for(const[,t]of this.meshesCache)t.zIndex=-1,t.visible=!1}getMeshForSlot(t){if(this.meshesCache.has(t)){let n=this.meshesCache.get(t);return n.visible=!0,n}else{let n=this.slotMeshFactory();return this.addChild(n),this.meshesCache.set(t,n),n}}getSlotFromRef(t){let n;if(typeof t=="number"?n=this.skeleton.slots[t]:typeof t=="string"?n=this.skeleton.findSlot(t):n=t,!n)throw new Error(`No slot found with the given slot reference: ${t}`);return n}addSlotObject(t,n){let i=this.getSlotFromRef(t),s=this.slotsObject.get(i);if(s!==n){for(const[o,a]of this.slotsObject)if(o!==i&&a===n){this.removeSlotObject(o,n);break}s&&this.removeChild(s),this.slotsObject.set(i,n),this.addChild(n)}}getSlotObject(t){return this.slotsObject.get(this.getSlotFromRef(t))}removeSlotObject(t,n){let i=this.getSlotFromRef(t),s=this.slotsObject.get(i);s&&(n&&n!==s||(this.removeChild(s),this.slotsObject.delete(i)))}pixiMaskCleanup(t){let n=this.clippingSlotToPixiMasks[t.data.name];n&&(delete this.clippingSlotToPixiMasks[t.data.name],n.destroy())}updatePixiObject(t,n,i){t.setTransform(n.bone.worldX,n.bone.worldY,n.bone.getWorldScaleX(),n.bone.getWorldScaleX(),n.bone.getWorldRotationX()*ce.degRad),t.zIndex=i+1,t.alpha=this.skeleton.color.a*n.color.a}updateAndSetPixiMask(t,n){if(st.clipper.isClipping()&&t){let i=this.clippingSlotToPixiMasks[t.slot.data.name];if(i||(i=new Xu,this.clippingSlotToPixiMasks[t.slot.data.name]=i,this.addChild(i)),!t.computed){t.computed=!0;const s=t.slot.attachment,o=Array.from(s.vertices);s.computeWorldVertices(t.slot,0,s.worldVerticesLength,o,0,2),i.clear().lineStyle(0).beginFill(0).drawPolygon(o)}n.mask=i}else n.mask&&(n.mask=null)}renderMeshes(){var o,a;this.resetMeshes();let t=null,n=null,i=null;const s=this.skeleton.drawOrder;for(let l=0,u=s.length,h=0;l<u;l++){const c=s[l];let d=this.slotsObject.get(c),f=l+h;d&&(this.updatePixiObject(d,c,f+1),h++,this.updateAndSetPixiMask(i,d));const g=c.darkColor!=null,v=st.clipper.isClipping()?2:g?st.DARK_VERTEX_SIZE:st.VERTEX_SIZE;if(!c.bone.active){st.clipper.clipEndWithSlot(c),this.pixiMaskCleanup(c);continue}const x=c.getAttachment();let y,b,_=0;if(x instanceof ld){const S=x;y=S.color,_=v*4,S.computeWorldVertices(c,this.verticesCache,0,v),t=st.QUAD_TRIANGLES,n=S.uvs,b=(o=S.region)==null?void 0:o.texture}else if(x instanceof bl){const S=x;y=S.color,_=(S.worldVerticesLength>>1)*v,_>this.verticesCache.length&&(this.verticesCache=me.newFloatArray(_)),S.computeWorldVertices(c,0,S.worldVerticesLength,this.verticesCache,0,v),t=S.triangles,n=S.uvs,b=(a=S.region)==null?void 0:a.texture}else if(x instanceof Id){st.clipper.clipStart(c,x),i={slot:c,computed:!1};continue}else{st.clipper.clipEndWithSlot(c),this.pixiMaskCleanup(c);continue}if(b!=null){const I=c.bone.skeleton.color,A=c.color,k=I.a*A.a*y.a;this.lightColor.set(I.r*A.r*y.r,I.g*A.g*y.g,I.b*A.b*y.b,k),c.darkColor!=null?this.darkColor.set(c.darkColor.r,c.darkColor.g,c.darkColor.b,1):this.darkColor.set(0,0,0,1);let M,O,L,D;if(st.clipper.isClipping())st.clipper.clipTriangles(this.verticesCache,t,t.length,n,this.lightColor,this.darkColor,g),M=st.clipper.clippedVertices,O=M.length,L=st.clipper.clippedTriangles,D=L.length;else{const F=this.verticesCache;for(let B=2,X=0,V=_;B<V;B+=v,X+=2){let Q=B;F[Q++]=this.lightColor.r,F[Q++]=this.lightColor.g,F[Q++]=this.lightColor.b,F[Q++]=this.lightColor.a,F[Q++]=n[X],F[Q++]=n[X+1],g&&(F[Q++]=this.darkColor.r,F[Q++]=this.darkColor.g,F[Q++]=this.darkColor.b,F[Q++]=this.darkColor.a)}M=this.verticesCache,O=_,L=t,D=t.length}if(O==0||D==0){st.clipper.clipEndWithSlot(c);continue}const j=this.getMeshForSlot(c);j.zIndex=f,j.updateFromSpineData(b,c.data.blendMode,c.data.name,M,O,L,D,g)}st.clipper.clipEndWithSlot(c),this.pixiMaskCleanup(c)}st.clipper.clipEnd()}setBonePosition(t,n){const i=t;if(typeof t=="string"&&(t=this.skeleton.findBone(t)),!t)throw Error(`Cannot set bone position, bone ${String(i)} not found`);if(st.vectorAux.set(n.x,n.y),t.parent){const s=t.parent.worldToLocal(st.vectorAux);t.x=s.x,t.y=s.y}else t.x=st.vectorAux.x,t.y=st.vectorAux.y}getBonePosition(t,n){const i=t;return typeof t=="string"&&(t=this.skeleton.findBone(t)),t?(n||(n={x:0,y:0}),n.x=t.worldX,n.y=t.worldY,n):(console.error(`Cannot get bone position! Bone ${String(i)} not found`),n)}skeletonToPixiWorldCoordinates(t){this.worldTransform.apply(t,t)}pixiWorldCoordinatesToSkeleton(t){this.worldTransform.applyInverse(t,t)}pixiWorldCoordinatesToBone(t,n){this.pixiWorldCoordinatesToSkeleton(t),n.parent?n.parent.worldToLocal(t):n.worldToLocal(t)}static from(t,n,i){const s=`${t}-${n}-${(i==null?void 0:i.scale)??1}`;let o=st.skeletonCache[s];if(o)return new st(o,i);const a=on.get(t),l=on.get(n),u=new m9(l);let h=a instanceof Uint8Array?new _9(u):new eY(u);return h.scale=(i==null?void 0:i.scale)??1,o=h.readSkeletonData(a),st.skeletonCache[s]=o,new this(o,i)}get tint(){return this.skeleton.color.toRgb888()}set tint(t){Xe.rgb888ToColor(this.skeleton.color,t)}},C(st,"vectorAux",new tg),C(st,"clipper",new og),C(st,"QUAD_TRIANGLES",[0,1,2,2,3,0]),C(st,"VERTEX_SIZE",8),C(st,"DARK_VERTEX_SIZE",12),C(st,"skeletonCache",Object.create(null)),st);fc.yDown=!0;const lY={extension:ge.Asset,loader:{extension:{type:ge.LoadParser,priority:zn.Normal,name:"spineTextureAtlasLoader"},test(r){return Dn(r,".atlas")},async load(r){return await(await xe.ADAPTER.fetch(r)).text()},testParse(r,e){const t=Dn(e.src,".atlas"),n=typeof r=="string";return Promise.resolve(t&&n)},unload(r){r.dispose()},async parse(r,e,t){var l;const n=e.data||{};let i=Vt.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");const s=new d9(r);if(n.images instanceof De||typeof n.images=="string"){const u=n.images;n.images={},n.images[s.pages[0].name]=u}const o=[];let a=!0;for(const u of t.parsers)if(u.name=="loadTextures"){a=(l=u.config)==null?void 0:l.preferCreateImageBitmap;break}on.setPreferences({preferCreateImageBitmap:!1});for(const u of s.pages){const h=u.name,c=n!=null&&n.images?n.images[h]:void 0;if(c instanceof De)u.setTexture(pc.from(c));else{const f={src:c??Vt.normalize([...i.split(Vt.sep),h].join(Vt.sep)),data:{...n.imageMetadata,alphaMode:u.pma?Vr.PMA:Vr.UNPACK}},g=t.load(f).then(v=>{u.setTexture(pc.from(v.baseTexture))});o.push(g)}}return await Promise.all(o),on.setPreferences({preferCreateImageBitmap:a}),s}}};Te.add(lY);function uY(r){return r.hasOwnProperty("bones")}function cY(r){return r instanceof Uint8Array}const hY={extension:ge.Asset,loader:{extension:{type:ge.LoadParser,priority:zn.Normal},test(r){return Dn(r,".skel")},async load(r){const e=await xe.ADAPTER.fetch(r);return new Uint8Array(await e.arrayBuffer())},testParse(r,e){const t=Dn(e.src,".json")&&uY(r),n=Dn(e.src,".skel")&&cY(r);return Promise.resolve(t||n)}}};Te.add(hY);class dY extends Bs{constructor(t=!1){super();C(this,"_buffer");C(this,"_indexBuffer");this._buffer=new bt(void 0,t,!1),this._indexBuffer=new bt(void 0,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Se.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Se.FLOAT).addAttribute("aColor",this._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aDarkColor",this._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Se.FLOAT).addIndex(this._indexBuffer)}}const fY=`
precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute vec4 aDarkColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec4 vDarkColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
    vDarkColor = aDarkColor * tint;

}
`,pY=`
varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec4 vDarkColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%


    gl_FragColor.a = color.a * vColor.a;
    gl_FragColor.rgb = ((color.a - 1.0) * vDarkColor.a + 1.0 - color.rgb) * vDarkColor.rgb + color.rgb * vColor.rgb;
}
`;class n3 extends qo{constructor(e){super(e),this.shaderGenerator=new j2(fY,pY),this.geometryClass=dY,this.vertexSize=7}packInterleavedGeometry(e,t,n,i,s){const{uint32View:o,float32View:a}=t,l=i/this.vertexSize,u=e.uvs,h=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),g=ut.shared.setValue(e._tintRGB).toPremultiplied(f,!0),v=ut.shared.setValue(e._darkTintRGB).premultiply(f,!0).toPremultiplied(1,!1);for(let x=0;x<c.length;x+=2)a[i++]=c[x],a[i++]=c[x+1],a[i++]=u[x],a[i++]=u[x+1],o[i++]=g,o[i++]=v,a[i++]=d;for(let x=0;x<h.length;x++)n[s++]=l+h[x]}}C(n3,"extension",{name:"darkTintBatch",type:ge.RendererPlugin});Te.add(n3);const mY=Et.PixiComponent("Spine",{create:({atlas:r,skel:e})=>aY.from(e,r,{autoUpdate:!1}),didMount:(r,e)=>{},willUnmount:(r,e)=>{r.state.clearListeners()},applyProps:(r,e,t)=>{const{onComplete:n,event:i,...s}=t;Et.applyDefaultProps(r,e,s),r.state.clearListeners(),r.state.addListener({complete:n,event:i})},config:{destroy:!0,destroyChildren:!0}}),i3=N.forwardRef((r,e)=>{const{children:t,atlas:n,skel:i,tint:s=16777215,onComplete:o,event:a,playing:l=!1,action:u,actions:h,skin:c,timeScale:d=1,toFrameOneWhenStop:f,turbo:g=!1,...v}=r,x=N.useRef(),{current:y}=N.useRef({updateTime:0});return kl((b,_)=>{y.updateTime+=b/1e3,y.updateTime>.03&&(x.current&&x.current.update(y.updateTime),y.updateTime=0)},l,g),N.useEffect(()=>{u&&(x.current.state.setAnimation(...u),c&&x.current.skeleton.setSkinByName(c),x.current.update(0))},[u]),N.useEffect(()=>{x.current.update(0)},[s]),N.useEffect(()=>{if(h){const b=h[0];b&&(x.current.state.setAnimation(...b),x.current.update(0));for(let _=1;_<h.length;_++)x.current.state.addAnimation(...h[_],0)}},[l,h]),N.useEffect(()=>{!l&&f&&u&&(x.current.state.setAnimation(...u),x.current.update(0))},[l]),N.useEffect(()=>{c&&(x.current.skeleton.setSkinByName(c),x.current.skeleton.setSlotsToSetupPose(),x.current.update(0))},[c]),N.useEffect(()=>{x.current.state.timeScale=d},[d]),N.useImperativeHandle(e,()=>x.current,[x]),T.jsx(pe,{...v,children:T.jsx(mY,{ref:x,skel:i,atlas:n,tint:s,onComplete:o,event:a})})}),gY=N.forwardRef(({onLoop:r,onRepeatComplete:e,repeat:t,...n},i)=>{const{current:s}=N.useRef({loopTimes:0}),o=n.playing;function a(l){n.onComplete&&n.onComplete(l),s.loopTimes++;const u=s.loopTimes;t==u&&e&&e(),r&&r(u)}return N.useEffect(()=>{s.loopTimes=0},[n.action,n.actions,o,n.id]),T.jsx(i3,{ref:i,...n,onComplete:a})});function s3(r,e,t,n){return N.forwardRef((i,s)=>T.jsx(r,{ref:s,atlas:t,skel:e,...n,...i}))}const o3=Cb(mO,Cd,"CollapseFx",.33),a3=Cb(mO,Cd,"Cg",.33);Cb(pO,Qg,"fire",.33);const Ea=s3(gY,nO,iO,{skin:Ee.Obj.urlOptions.lang==vt.Chinese?"CH":"EN"}),l3=s3(i3,sO,oO);function vY(){return TI([[[5,7,6],[1,8,4],[0,6,5],[0,5,6],[2,6,0]],[[7,3,6],[2,9,5],[3,5,0],[2,5,1],[5,2,1]],[[5,2,8],[7,1,0],[3,5,0],[4,3,1],[6,4,3]],[[7,3,6],[3,4,3],[7,4,1],[1,4,2],[3,0,7]],[[2,4,0],[1,0,6],[6,2,4],[4,5,0],[3,0,7]],[[2,3,4],[8,0,7],[1,4,3],[2,0,5],[7,5,3]],[[5,2,8],[3,1,6],[8,0,6],[1,7,2],[5,2,6]],[[3,7,2],[6,5,1],[2,6,2],[1,7,2],[3,2,5]],[[1,3,4],[2,6,5],[1,7,4],[7,4,2],[4,6,3]],[[8,6,0],[0,1,6],[7,1,8],[2,0,6],[3,1,4]]])}function yY(){return s0({alpha:{start:1,end:.1},scale:{start:2,end:3,minimumScaleMultiplier:1.2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:600,startRotation:{min:-60,max:30},noRotation:!1,rotationSpeed:{min:0,max:1},lifetime:{min:1,max:1},blendMode:"screen",frequency:.7,emitterLifetime:-1,maxParticles:2,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-600,y:-450,w:1200,h:200}},{framerate:8,loop:!1,textures:pr(15,r=>`fire_${r}.png`)})}function Mb(r){return(e=-1)=>s0({alpha:{start:.7,end:1},scale:{start:.5,end:.8,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:400,end:500,minimumSpeedMultiplier:2.5},acceleration:{x:0,y:800},maxSpeed:0,startRotation:{min:250,max:290},noRotation:!1,rotationSpeed:{min:-100,max:100},lifetime:{min:2,max:4},blendMode:"normal",frequency:.1,emitterLifetime:e,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-50,y:0,w:100,h:0}},{framerate:8,loop:!1,textures:pr(15,t=>`confetti0${r}_00${ll(t+1,2)}.png`)})}const Md=Mb(2),Rd=Mb(3),Od=Mb(4),xY=({tint:r,inSpin:e,inFs:t,selected:n,...i})=>{const{visible:s,...o}=i;let a=n+(t?10:0);a==18?a=8:a==19&&(a=9);const l=s&&(e||a<8||a>9),u=s&&!e&&a==9,h=s&&!e&&a==8,c=it(Ee.Obj.urlOptions.lang==vt.Chinese?"cn":""),d=N.useMemo(()=>[8,9,14,15,16].indexOf(a)>-1?a+c:a,[a]);return T.jsxs(pe,{x:87,y:87,...o,children:[T.jsx(Go,{visible:l,name:`${d}.png`,anchor:.5,tint:r}),T.jsx(Ea,{turbo:!0,scale:.5,visible:u,playing:u,action:it([0,"WILD_IDLE",!0]),tint:r}),T.jsx(Ea,{turbo:!0,scale:.5,visible:h,playing:h,action:it([0,"BOUNS_IDLE",!0]),tint:r})]})},_Y=({lineId:r,delay:e,inFs:t,selected:n,active:i,playing:s,...o})=>{const[a,l]=N.useState(!1),[u,h]=N.useState(!1);let c=n+(t?10:0);c==18?c=8:c==19&&(c=9);const d=N.useMemo(()=>[[[0,"LP_CLUB_WIN",!0]],[[0,"LP_DIMOND_WIN",!0]],[[0,"LP_HEART_WIN",!0]],[[0,"LP_SPADE_WIN",!0]],[[0,"LP_RABBIT_WIN",!0]],[[0,"LP_MONKEY_WIN",!0]],[[0,"LP_KANGAROO_WIN",!0]],[[0,"Char A_WIN",!0]],[[0,"BOUNS_WIN",!0]],[[0,"WILD_WIN",!0]],[[0,"HP_DOG_WIN",!0]],[[0,"HP_PENGUIN_WIN",!0]],[[0,"HP_BEAR_WIN",!0]],[[0,"HP_LION_WIN",!0]],[[0,"SCATTER_DUCK_A_WIN",!0]],[[0,"SCATTER_DUCK_B_WIN",!0]],[[0,"SCATTER_DUCK_C_WIN",!0]],[[0,"CHAR_B_WIN",!0]]][c],[c]);hc(()=>{l(!0)},e,s&&!a&&!u),N.useEffect(()=>{s||(h(!1),l(!1))},[s]),N.useEffect(()=>{h(!1),l(!1)},[r]);function f(g){h(!0),l(!1)}return T.jsx(pe,{...o,visible:s,children:T.jsx(Ea,{turbo:!0,x:88,y:88,playing:a,scale:.5,actions:d,timeScale:1,toFrameOneWhenStop:!0,repeat:1,onLoop:f})})},wY=({tint:r,inFs:e,inSpin:t,collasping:n,collasped:i,selected:s,...o})=>{const[a,l]=N.useState(!1),[u,h]=N.useState(!1),[c,d]=N.useState(!1);return N.useEffect(()=>{n?l(!0):(l(!1),h(!1))},[n]),N.useEffect(()=>{i||d(!1)},[i]),hc(()=>{h(!0)},1e3,n),hc(()=>{d(!0)},300,u),T.jsxs(pe,{...o,visible:o.visible&&!i,children:[T.jsx(xY,{selected:s,visible:!c,inFs:e,inSpin:t,tint:r}),T.jsxs(pe,{x:85,y:85,children:[T.jsx(o3,{turbo:!0,isPlaying:a,visible:a,repeat:1,onRepeatComplete:l.bind(null,!1),anchor:.5,startFrame:0}),T.jsx(a3,{turbo:!0,isPlaying:u,visible:u,repeat:1,onRepeatComplete:h.bind(null,!1),anchor:.5,startFrame:0})]})]})},bY=yY(),SY=o0(2),TY=o0(3),EY=o0(4),CY=o0(8),PY=Md(2),AY=Md(3),kY=Md(4),IY=Md(7),MY=Od(2),RY=Od(3),OY=Od(4),NY=Od(7),FY=Rd(2),BY=Rd(3),LY=Rd(4),DY=Rd(7),qP=r9(7),UY=Md(7),jY=Od(7),XY=Rd(7);function HY({dataSource:r}){const{gameStatus:e,nextGameStatus:t}=r.base,{fsWinAmount:n}=r.fs,i=e==je.showFSResult;function s(a){a.animation.name=="YOU_WIN_TOTAL_OUT"&&t()}const o=N.useMemo(()=>i?xn(n):"",[i]);return T.jsx(mi,{children:T.jsxs(pe,{visible:i,children:[T.jsx(Bi,{frame:[0,0,1170,1170],alpha:.32,interactive:!0}),T.jsxs(Ad,{slotName:"freespin xx",children:[T.jsx(Ea,{x:585,"l-y":585,"p-y":485,onComplete:s,playing:i,"l-scale":.5,"p-scale":.4,actions:it([[0,"YOU_WIN_TOTAL_ENTER",!1],[0,"YOU_WIN_TOTAL_IDLE",!1],[0,"YOU_WIN_TOTAL_OUT",!1]]),toFrameOneWhenStop:!0}),T.jsx(r0,{scale:[1,1],anchor:.5,text:o,maxScaleLength:1700,style:{fontName:Ed,fontSize:130,align:"center"}})]})]})})}function $Y({dataSource:r}){const{gameStatus:e,state:t}=r.base,n=e==je.showFSCount,{spinModel:i}=t.spin;function s(o){}return T.jsx(mi,{children:T.jsxs(pe,{visible:n,children:[T.jsx(Bi,{frame:[0,0,1170,1170],alpha:.32,interactive:!0}),T.jsxs(Ad,{slotName:"freespin xx",children:[T.jsx(Ea,{x:585,"l-y":555,"p-y":485,onComplete:s,playing:n,"l-scale":.45,"p-scale":.4,actions:it([[0,"YOU_WIN_FS_ENTER",!1],[0,"YOU_WIN_FS_IDLE",!0]]),toFrameOneWhenStop:!0}),T.jsx(r0,{scale:[1,1],anchor:.5,text:`${(i==null?void 0:i.fs)||0}`,maxScaleLength:1700,style:{fontName:Ed,fontSize:150,align:"center"}})]}),T.jsx(_a,{"l-x":585,"l-y":860,"p-x":585,"p-y":771,visible:e==je.showFSCount,anchor:.5,text:"pstostart",style:{fill:"#fff109",fontFamily:it(Ee.Obj.urlOptions.lang),fontWeight:"bolder",fontSize:40,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})})}function zY({dataSource:r}){const{gameStatus:e,nextGameStatus:t}=r.base,n=e==je.showBigWinAmount;function i(a){a.animation.name=="BIG_WIN_OUT"&&t()}const s=r.winAmount.toNumber()||0,o=N.useMemo(()=>xn(s),[s]);return T.jsx(mi,{children:T.jsxs(pe,{visible:n,children:[T.jsx(Bi,{frame:[0,0,1170,1170],alpha:.32,interactive:!0}),T.jsxs(Et.Container,{children:[T.jsx(Gt,{turbo:!0,x:470,y:505,scale:1,playing:n,config:qP}),T.jsx(Gt,{turbo:!0,x:700,y:505,scale:[-1,1],playing:n,config:qP}),T.jsx(Gt,{turbo:!0,x:585,y:650,scale:1,playing:n,config:UY}),T.jsx(Gt,{turbo:!0,x:585,y:650,scale:1,playing:n,config:jY}),T.jsx(Gt,{turbo:!0,x:585,y:650,scale:1,playing:n,config:XY})]}),T.jsxs(Ad,{slotName:"88800",children:[T.jsx(Ea,{turbo:!0,x:585,"l-y":565,"p-y":485,onComplete:i,playing:n,"l-scale":.55,"p-scale":.4,actions:it([[0,"BIG_WIN_ENTER",!1],[0,"BIG_WIN_IDLE",!1],[0,"BIG_WIN_IDLE",!1],[0,"BIG_WIN_IDLE",!1],[0,"BIG_WIN_IDLE",!1],[0,"BIG_WIN_OUT",!1]]),toFrameOneWhenStop:!0}),T.jsx(pe,{children:T.jsx(r0,{scale:[1,1],anchor:.5,text:o,maxScaleLength:1700,style:{fontName:Ed,fontSize:130,align:"center"}})})]})]})})}function YY({dataSource:r,...e}){const{lineIds:t}=r.showWinAmount;return T.jsx(pe,{...e,children:T.jsx(Yz,{x:0,y:0,lineId:t,lineConfig:{width:5,color:[16248133,16767673,16774638,15132410,8900346,65535,9419919,8190976,15657130,15654274,16119260,15761536,16761035,14524637,16775930,16770244,15657407,15657407,12701133,2003199]}})})}function GY({dataSource:r,...e}){const{inFreeSpin:t}=r.fs,{getActiveSymbol:n,winLine:i}=r.showWinAmount,s=N.useMemo(()=>i?i.lineId:void 0,[i]);return T.jsx(pe,{...e,children:pr(5,o=>T.jsx(pe,{children:pr(3,a=>{const l=n(o,a),u=!!l,h=(l==null?void 0:l.delay)||0,c=(l==null?void 0:l.selected)||0;return T.jsx(pe,{children:T.jsx(_Y,{lineId:s,playing:u,inFs:t,selected:c,active:!1,x:145*o,y:140*a,delay:h})},`wly${a}`)})},`wlx${o}`))})}function WY({dataSource:r,...e}){const{gameStatus:t,state:n}=r.base,{inFreeSpin:i}=r.fs,{autoSpinCount:s,spinModel:o}=n.spin,a=s=="∞"||s>0,l=t=="spin"||t=="stopping",u=t=="idle"&&!a&&(o==null?void 0:o.existWin)!=!0&&!i;return T.jsxs(pe,{...e,children:[T.jsxs(n9,{selected:0,duration:3e3,visible:u,children:[T.jsx(Li,{anchor:.5,name:"Hold for autospin.png"}),T.jsx(Li,{anchor:.5,name:"Place your bets.png"})]}),T.jsx(Li,{anchor:.5,y:-2,name:"Good luck.png",visible:l})]})}function VY({dataSource:r,...e}){var b;const{gameStatus:t,state:n}=r.base,{currency:i}=n.user,{winLine:s}=r.showWinAmount;let o=t==je.showWinAmount;const a=o?r.winAmount.toNumber():0;o=o&&a>0;const l=(b=n.spin.spinModel)==null?void 0:b.getWinType(r.winAmount),u=N.useMemo(()=>o?l=="high"?4500:l=="medium"?3500:l=="normal"?2500:1500:0,[o]),[h,c,d,f]=N.useMemo(()=>o?[l=="small",l=="normal",l=="medium",l=="high"]:[!1,!1,!1,!1],[o]),g=it(Cr(gr,"win")),[v,x,y]=N.useMemo(()=>s?s.win.gt(0)?[s.win,!0,!1]:[0,!1,!0]:[0,!1,!1],[s]);return T.jsxs(pe,{...e,children:[T.jsx(g_,{visible:o,anchor:.5,tweenOptions:{duration:u,playing:o,turbo:!0},text:a,style:{fill:"#fff109",fontFamily:it(Ee.Obj.urlOptions.lang),fontWeight:"bolder",fontSize:40,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),T.jsx(qi,{visible:x,anchor:.5,text:`${g} ${i} ${xn(v)}`,style:{fill:"#fff109",fontFamily:it(Ee.Obj.urlOptions.lang),fontWeight:"bolder",fontSize:40,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),T.jsx(_a,{visible:y,anchor:.5,text:"msg_freespin",style:{fill:"#fff109",fontFamily:it(Ee.Obj.urlOptions.lang),fontWeight:"bolder",fontSize:40,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),T.jsxs(pe,{y:-30,children:[T.jsx(Gt,{turbo:!0,playing:h,config:SY}),T.jsx(Gt,{turbo:!0,playing:c,config:TY}),T.jsx(Gt,{turbo:!0,playing:d,config:EY}),T.jsx(Gt,{turbo:!0,playing:f,config:CY}),T.jsx(Gt,{turbo:!0,playing:h,config:PY}),T.jsx(Gt,{turbo:!0,playing:c,config:AY}),T.jsx(Gt,{turbo:!0,playing:d,config:kY}),T.jsx(Gt,{turbo:!0,playing:f,config:IY}),T.jsx(Gt,{turbo:!0,playing:h,config:MY}),T.jsx(Gt,{turbo:!0,playing:c,config:RY}),T.jsx(Gt,{turbo:!0,playing:d,config:OY}),T.jsx(Gt,{turbo:!0,playing:f,config:NY}),T.jsx(Gt,{turbo:!0,playing:h,config:FY}),T.jsx(Gt,{turbo:!0,playing:c,config:BY}),T.jsx(Gt,{turbo:!0,playing:d,config:LY}),T.jsx(Gt,{turbo:!0,playing:f,config:DY})]})]})}function qY({dataSource:r,...e}){const{inFreeSpin:t,fsCount:n}=r.fs,i=N.useMemo(()=>{const o=Ee.Obj.urlOptions.lang;return o==vt.Chinese||o==vt.Korean?60:o==vt.Khmer?120:o==vt.Turkish||o==vt.Indonesian?130:100},[]),s=N.useMemo(()=>Ee.Obj.urlOptions.lang==vt.Vietnamese?-60:0,[]);return T.jsx(pe,{...e,visible:t,children:T.jsxs(pe,{y:s,children:[T.jsx(Li,{name:"Freespin_Panel.png",scale:1}),T.jsx(r0,{anchor:.5,x:69,y:90,text:`${n}`,maxScaleLength:1700,style:{fontName:Ed,fontSize:40,align:"center"}}),T.jsx(_a,{anchor:[.5,0],x:72,y:125,text:"freespin",maxScaleLength:130,style:{fill:"#fff109",fontFamily:it(Ee.Obj.urlOptions.lang),fontWeight:"500",fontSize:25,wordWrap:!0,wordWrapWidth:i,align:"center",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2,breakWords:!0}})]})})}function KY({dataSource:r,...e}){const{inFreeSpin:t}=r.fs;return T.jsx(pe,{visible:t,...e,children:T.jsx(Gt,{x:470,y:555,scale:1,playing:t,config:bY})})}function QY({dataSource:r,...e}){const{inFreeSpin:t}=r.fs;return T.jsxs(pe,{children:[T.jsx(eb,{name:AR}),T.jsx(Gi,{dep:[t],from:{k:0},to:{k:1},playing:!0,duration:1e3,children:({k:n})=>(n=t?n:1-n,T.jsx(Bi,{frame:[0,0,1170,1170],alpha:.5*n}))})]})}function ZY({dataSource:r}){const e=N.useRef(null),[t,n]=N.useState(!1),{gameStatus:i,nextGameStatus:s}=r.base,o=i==je.showFSCount,a=o;N.useEffect(()=>{if(e.current){const u=Ee.Obj,h=()=>{if(u.orientation=="l")e.current.position.set(1063,783);else{const c=u.viewport[1],d=u.viewport[3],f=u.layoutOptions.displayArea[1],g=d-c+f-190;e.current.position.set(585,g)}};return h(),u.notice.on($n,h),()=>{u.notice.off($n,h)}}},[e]),Co(()=>{n(!0)},2e3,a&&!t),N.useEffect(()=>{a||n(!1)},[a]);const l=t?16777215:8947848;return T.jsxs(mi,{children:[T.jsx(Eb,{onKeySpace:s,onKeyEnter:s,enable:t}),T.jsxs(Di,{ref:e,visible:t,click:s,"l-scale":1,"p-scale":.975,children:[T.jsx(l3,{tint:l,scale:.5,action:it([0,"Idle",!1]),playing:!1,timeScale:1}),T.jsx(ht,{tint:l,x:4,y:7,anchor:.5,name:"play.png",visible:o})]})]})}function JY({dataSource:r,...e}){const{state:t,gameStatus:n}=r.base,{inFreeSpin:i}=r.fs,{spinModel:s}=t.spin,{winLine:o}=r.showWinAmount,a=n=="stopping"||n==je.reSpinStoping,{current:l}=N.useRef({playing:!1});N.useMemo(()=>{l.playing=!1},[a]),N.useMemo(()=>{((s==null?void 0:s.lastFs)||0)>0&&i&&(o==null?void 0:o.s)==tw&&(l.playing=!0)},[o]);const u=N.useMemo(()=>Cr(gr,"exfr_fsw"),[]),h=N.useMemo(()=>u.replace("{%NUM%}",`${s==null?void 0:s.lastFs}`),[l.playing]);return T.jsx(mi,{children:T.jsx(pe,{visible:l.playing,children:T.jsxs(Ad,{slotName:"freespin xx",children:[T.jsx(Ea,{turbo:!0,x:585,"l-y":625,"p-y":485,playing:l.playing,"l-scale":.5,"p-scale":.4,actions:it([[0,"EXTRASPIN_ENTER",!1],[0,"EXTRASPIN_IDLE",!1],[0,"EXTRASPIN_OUT",!1]]),toFrameOneWhenStop:!0}),T.jsx(qi,{anchor:[.5,.5],scale:[1,1],text:h,style:{fill:"#fff109",fontFamily:it(Ee.Obj.urlOptions.lang),fontWeight:"500",fontSize:70,align:"center",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})})})}function eG({dataSource:r}){const{gameStatus:e,nextGameStatus:t}=r.base,n=e==je.show5OfAKind;return T.jsxs(mi,{children:[T.jsx(Ea,{turbo:!0,x:585,"l-y":625,"p-y":525,playing:n,visible:n,"l-scale":.5,"p-scale":.33,repeat:0,action:it([0,"5ofakind",!1]),toFrameOneWhenStop:!0,onComplete:t}),T.jsx(gn,{sound:"5ofkindwin",playing:n,softBgm:!0})]})}function tG({...r}){const{turbo:e=!0,on:t,cellCount:n,collaspedRows:i=[],result:s=[],children:o,onEnd:a,easing:l=$i.Linear.None}=r,[u,h]=N.useState(!1),{current:c}=N.useRef({fallTime:0}),d=i.length,f=N.useMemo(()=>{const v=[];c.fallTime=0;let x=n-1;for(let y=d;y>0;y--){const b=-y+d;v.push({from:-y,to:b,selected:s[b]})}for(let y=n-1;y>=0;y--)i.indexOf(y)==-1&&(v.push({from:y,to:x,selected:s[x]}),x--);return v},[t,s]);kl((v,x)=>{c.fallTime+=v,h(!u)},t,e);const g=N.useMemo(()=>{const v=[],x=cx.defaultUp(0,.2,c.fallTime/200);return f.forEach((y,b)=>{const{from:_,to:S,selected:I}=y,A=S-_,k=Math.min(x,A),M=A==0?0:l(k/A)*A,O=_+M;v.push({k:O,selected:I})}),x>=d&&d>0&&a(),v.sort((y,b)=>y.k-b.k),v},[u,s]);return o(g)}function rG({...r}){const{state:e}=N.useContext(xt),{startSpeed:t=0,speed:n=24,accTime:i,decTime:s,accEasing:o=$i.Linear.None,decEasing:a=$i.Linear.None}=r,{turbo:l=!0,children:u,inColumn:h,cellCount:c,symbols:d,result:f,playing:g,stop:v,onEnd:x}=r,{current:y}=N.useRef({spinTime:0,stopingTime:0,resultK:0,ssMap:{}}),[b,_]=N.useState(!1),S=2*c;function I(j){return cx.up(t,n,i,j)}function A(j){return cx.down(n,0,s,j)}function k(j,F){const B=j+F;let X=y.ssMap[B];return Qu(X)&&(v&&y.resultK==j?X=f[F]:X=TI(d),y.ssMap[B]=X),X}const M=I(i),O=A(s);N.useMemo(()=>{y.spinTime=0,g?(y.stopingTime=0,y.resultK=0):(y.ssMap={},f.forEach((j,F)=>{y.ssMap[F]=j}))},[g]),N.useMemo(()=>{e.spin.status=="idle"&&(y.ssMap={},f.forEach((j,F)=>{y.ssMap[F]=j}),_(!b))},[e.spin.status]),N.useMemo(()=>{if(v){const j=M+Math.max(0,y.spinTime-i)/1e3*n;let F=Math.ceil(j+Math.max(c,O));F=Math.ceil(F/S)*S,y.resultK=F,y.stopingTime=i+(F-O-M)/n*1e3}},[v]),kl((j,F)=>{y.spinTime+=j,_(!b),v&&y.spinTime>=y.stopingTime+s&&x(h)},g,l);const L=N.useMemo(()=>{let j;const F=y.spinTime;if(F<=i)j=I(o(F/i)*i);else if(!v||F<=y.stopingTime)j=M+(F-i)/1e3*n;else if(F>=y.stopingTime+s)j=y.resultK;else{const B=F-y.stopingTime;j=M+(y.stopingTime-i)/1e3*n+A(a(B/s)*s)}return j},[y.spinTime,g]),D=N.useMemo(()=>{let j=L%S;j>=c&&(j=-c+(j-c));const F=Math.floor((L+c)/S)*S;return pr(c,X=>({k:j+X,selected:k(F,X)}))},[b,L,g]);return u(D)}const nG=({dataSource:r,children:e})=>{const{gameStatus:t,state:n,nextGameStatus:i}=r==null?void 0:r.base,s=t==je.collapsing,[o,a]=N.useState(!1),{current:l}=N.useRef({willCollaspingPositions:[],currentCollaspingPositions:[],currentCollaspedPositions:[]});N.useMemo(()=>{if(s){const d=n.spin.spinModel;for(const f of d.totalLines)for(const g of f.positions){const v=`${g[0]},${g[1]}`;l.willCollaspingPositions.indexOf(v)&&l.willCollaspingPositions.push(v)}l.willCollaspingPositions.sort((f,g)=>Number(g)-Number(f))}else l.willCollaspingPositions=[],l.currentCollaspingPositions=[]},[s]);const u=l.willCollaspingPositions.length>0;N.useMemo(()=>{t==je.reSpinStoping&&(l.currentCollaspedPositions=[])},[t]),eg(100,()=>{const d=l.willCollaspingPositions.shift();l.currentCollaspingPositions.push(d),a(!o)},s&&u),hc(()=>{l.currentCollaspedPositions=[...l.currentCollaspingPositions],i()},1400,s&&!u);function h(d){const f=`${d[0]},${d[1]}`;return l.currentCollaspingPositions.indexOf(f)>=0}function c(d){const f=`${d[0]},${d[1]}`;return l.currentCollaspedPositions.indexOf(f)>=0}return e({isCollasping:h,isCollasped:c})};function iG({children:r,dataSource:e}){const{gameStatus:t,dispatch:n,state:i}=e.base,{spinModel:s}=i.spin,{current:o}=N.useRef({startSpinIndex:0,stopSpinIndex:-1,stopedColumn:[],stopping:!1}),[a,l]=N.useState(!1),u=t=="stopping",h=t=="spin"||u,c=s?s.ss:vY(),d=N.useMemo(()=>pr(5,f=>({playing:h&&f<=o.startSpinIndex&&o.stopedColumn.indexOf(f)<0,stop:u&&f<=o.stopSpinIndex,result:c[f],onEnd:g=>{o.stopedColumn.indexOf(g)<0&&(o.stopedColumn.push(g),o.stopedColumn.length==5?n(Kw()):l(!a))}})),[t,o.startSpinIndex,o.stopSpinIndex]);return eg(50,()=>{o.startSpinIndex++,l(!a)},h&&o.startSpinIndex<5),eg(50,()=>{o.stopSpinIndex++,l(!a)},o.stopping&&u&&o.stopSpinIndex<5&&o.startSpinIndex==5),hc(()=>{o.stopping=!0,l(!a)},200,u&&o.stopSpinIndex<5&&o.startSpinIndex==5&&!o.stopping),N.useEffect(()=>{h||(o.stopSpinIndex=-1,o.startSpinIndex=0,o.stopedColumn=[],o.stopping=!1,l(!a))},[h]),r(d)}function sG({dataSource:r,...e}){const{gameStatus:t,dispatch:n,state:i}=r.base,{inFreeSpin:s}=r.fs,{getActiveSymbol:o}=r.showWinAmount,{spinModel:a}=i.spin,{current:l}=N.useRef({collaspedInColumnRows:{}}),u=it(pr(8,v=>v)),h=t=="spin"||t=="stopping",c=t==je.reSpin||t==je.reSpinStoping,d=t==je.showWinLine,f=t==je.collapsing;N.useMemo(()=>{const v={};if(t==je.reSpin){const x=a.totalLines;for(const y of x)for(const[b,_]of y.positions){const S=v[b];S?S.indexOf(_)<0&&S.push(_):v[b]=[_]}l.collaspedInColumnRows=v}else t!=je.reSpinStoping&&(l.collaspedInColumnRows=v)},[t]);function g(v){delete l.collaspedInColumnRows[v],Object.keys(l.collaspedInColumnRows).length==0&&n(Kw())}return T.jsxs(pe,{...e,children:[T.jsx(ht,{x:376,y:215,anchor:.5,name:"Reel.png"}),T.jsxs(t0,{active:h||c,children:[T.jsxs(pe,{children:[T.jsx(nG,{dataSource:r,children:({isCollasping:v,isCollasped:x})=>T.jsx(iG,{dataSource:r,children:y=>pr(5,b=>{const _=y[b];return T.jsx(pe,{x:b*145,children:T.jsx(rG,{..._,inColumn:b,startSpeed:-4,speed:15,accTime:700,decTime:700,decEasing:$i.Bounce.Out,cellCount:3,symbols:u,children:S=>T.jsx(tG,{on:t==je.reSpinStoping,cellCount:3,collaspedRows:l.collaspedInColumnRows[b],result:a==null?void 0:a.ss[b],onEnd:g.bind(null,b),easing:$i.Bounce.Out,children:I=>(c?I:S).map((k,M)=>{const{k:O,...L}=k,D=v([b,M]),j=x([b,M]),F=!!o(b,O),B=!d||!F,X=!f&&!d||F||D||j?16777215:11184810;return T.jsx(wY,{tint:X,inSpin:h,inFs:s,collasping:D,collasped:j,y:140*O,visible:B,...L},`symbol${M}`)})})})},`reel${b}`)})})}),T.jsx(GY,{dataSource:r}),T.jsx(YY,{x:15,y:18,dataSource:r})]}),T.jsx(Bi,{frame:[15,15,730,422]})]})]})}function oG({inFS:r}){const{state:e}=N.useContext(xt),t=xd(e.sceneManager.scenes),n=N.useMemo(()=>{if(t=="main")return r?"fs_bgm":"bgm";if(t=="premain")return"loading_bgm"},[t,r]);return T.jsx(yz,{sound:n,playing:!!n})}function aG({dataSource:r}){const{gameStatus:e,state:t,nextGameStatus:n}=r.base,{inFreeSpin:i}=r.fs,{winLine:s}=r.showWinAmount,{spinModel:o}=t.spin,a=e==je.showWinAmount,l=e==je.collapsing,u=e==je.showFSCount,h=e==je.showFSResult,c=t.spin.status=="spin",d=t.spin.status=="stopping",f=(o==null?void 0:o.existWin)==!0,g=N.useMemo(()=>{var A;const I=(A=t.spin.spinModel)==null?void 0:A.getWinType(r.winAmount);return I=="high"?8e3:I=="medium"?6e3:I=="normal"?4e3:3e3},[a]),[v,x,y,b,_]=N.useMemo(()=>{if(s){const I=s.s,A=I+(i?10:0),k=s.positions.findIndex(([j,F])=>o.ss[j][F]==Xj)>-1,M=!k&&I==tw,O=!k&&(A==zj||A==Yj||A==Gj),L=!k&&(A==$j||A==Hj);return[M,O,k,L,!k&&!M&&!O&&!L]}else return[!1,!1,!1,!1,!1]},[s]),S=N.useMemo(()=>i?["extra_fs","win_symbol"]:["bonus_win","win_symbol"],[i]);return hc(()=>{n()},g+500,a),T.jsxs(T.Fragment,{children:[T.jsx(gn,{sound:"into_fs",playing:u,softBgm:!0}),T.jsx(gn,{sound:"out_fs",playing:h,softBgm:!0}),T.jsx(gn,{dep:[s],channelId:"winnormals",sound:"win_symbol",playing:_}),T.jsx(gn,{dep:[s],sounds:it(["win_boy","win_symbol"]),playing:b}),T.jsx(gn,{dep:[s],sounds:it(["winwithwildfire","win_symbol"]),playing:y}),T.jsx(gn,{dep:[s],sounds:S,playing:v}),T.jsx(gn,{dep:[s],sounds:it(["scatter_win","win_symbol"]),playing:x}),T.jsx(gn,{sound:"spin",playing:c&&!f,allowStop:!1,softBgm:!0}),T.jsx(gn,{channelId:"gunfire",sound:"gunfire",playing:l,allowStop:!0,volum:.7}),T.jsx(lG,{playing:a,duration:g-1e3}),T.jsx(gn,{sound:"reel_spin",playing:(c||d)&&f,allowStop:!1}),T.jsx(tO,{fadeInTime:1e3,playing:e==je.showBigWinAmount,children:T.jsx(gn,{channelId:"bigwin",sounds:it(["win_big"]),allowStop:!0,softBgm:!0})})]})}function lG({playing:r,duration:e}){const[t,n]=N.useState("idle"),[i,s]=N.useState(!1),[o,a]=N.useState(!1),l=t=="idle",u=t=="outro";return N.useEffect(()=>{r?(s(!0),n("idle")):(s(!1),a(!1))},[r]),Co(()=>{a(!0),s(!1)},e,r&&!o),Co(()=>{n("outro")},e-1e3,r&&!o&&l),T.jsxs(T.Fragment,{children:[T.jsx(tO,{fadeInTime:1500,playing:i&&l,children:T.jsx(gn,{channelId:"winmeter",sound:"winmeter_bgm",allowStop:!0,softBgm:!0})}),T.jsx(gn,{channelId:"winmeter",sound:"winmeter_outro",playing:i&&u,allowStop:!0,softBgm:!0})]})}function u3({enable:r=!0,dataSource:e,...t}){const{dispatch:n,gameStatus:i,state:s,onSkip:o}=e.base,{inFreeSpin:a}=e.fs,{betAmount:l,betLevel:u,spinModel:h}=s.spin,{balance:c}=s.user,{code:d}=s.setting.error,[f,g]=N.useState("idle"),v=s.spin.autoSpinCount=="∞"||s.spin.autoSpinCount>0,x=c.greaterThanOrEqualTo(l.mul(u)),y=i=="idle",b=f=="idle",_=f=="fast"||f=="fast1500",S=f=="stop",I=f=="skip",A=i==je.showWinAmount||i==je.showWinLine,{historyListOn:k,historyDetail:{on:M},payTableOn:O,menuOn:L}=s.setting,D=r&&!k&&!M&&!O&&!L,j=(h==null?void 0:h.existWin)==!0;function F(){!(h?h.existWin:!1)&&!x&&!a?(v&&n(HP()),n(nn(ZR.NotEnoughBalance,!0,!0))):d||y&&n(jP())}function B(ae=null,ye=!1){!A&&v&&!ye&&n(HP()),S?(n(jP()),Ki.clickSound()):A?(o(),Ki.clickSound()):y&&F()}function X(){!v&&y&&!j&&!a&&n(Y$("∞","∞",0,0))}N.useEffect(()=>{if(i=="spin"&&!a&&!j){const ae=l.mul(u);n($y(c.sub(ae)))}else if(i=="idle"&&h&&!h.existWin&&!h.isFromLoad){const ae=h==null?void 0:h.balance.toNumber();n($y(ae||c))}else if(i=="stopping"&&h.payout.isZero()&&!c.eq(h.balance)){const ae=h==null?void 0:h.balance.toNumber();n($y(ae||c))}},[i]),N.useEffect(()=>{i=="spin"?g("fast"):y?g("idle"):i!="stopping"&&f!="fast"?g("skip"):i=="stopping"&&f=="fast1500"&&g("stop")},[i]),Co(()=>{i=="stopping"?g("stop"):y?g("idle"):i!="spin"?g("skip"):g("fast1500")},1500,f=="fast"),Co(()=>{B(null,!0)},j?0:500,y&&(v||j||a));const V=_||b&&!v&&!a&&!j,Q=S,H=I&&(i==je.showWinAmount||i==je.showWinLine),G=y&&(v||a)&&!j,$=D&&(y&&!j||Q||H),W=$||v,Z=_||$?16777215:11184810,se=N.useMemo(()=>v?[0,"Auto",!0]:[0,"Idle",!0],[v]);return T.jsxs(pe,{children:[T.jsx(Eb,{onKeySpace:B.bind(null,null,!0),onKeyEnter:B.bind(null,null,!0),enable:$,sound:!1}),T.jsx(pe,{...t,children:T.jsx(lO,{hitFrame:[-75,-65,110,110],onpointerup:B,onLongPress:X,interactive:W,children:T.jsxs(pe,{x:81,y:75,pivot:[98,94],children:[T.jsxs(Ad,{slotName:"Counter",children:[T.jsx(l3,{scale:.5,action:se,playing:!0,timeScale:1,tint:Z}),T.jsx(ht,{anchor:.5,scale:4,y:15,name:"infinite.png",visible:G})]}),T.jsx(i9,{speed:f!="idle"?2:.1,children:ae=>T.jsxs(pe,{y:7,children:[T.jsx(ht,{visible:V,anchor:.5,name:"Spin.png",rotation:ae}),T.jsx(ht,{visible:Q,anchor:.5,name:"stop.png"}),T.jsx(ht,{visible:H,anchor:.5,name:"skip.png"})]})})]})})})]})}const uG=({dataSource:r})=>{const{dispatch:e,gameStatus:t,state:n}=r.base,{inFreeSpin:i}=r.fs,{speedModel:s,spinModel:o}=n.spin,a=n.spin.autoSpinCount=="∞"||n.spin.autoSpinCount>0,l=s=="fast",u=t=="idle",h=u&&(o==null?void 0:o.existWin)!=!0&&!i;function c(){u&&e(G$(l?"normal":"fast"))}return T.jsx(mi,{children:T.jsxs(pe,{"l-x":925,"l-y":-28,"p-x":582,"p-y":-100,"l-scale":1,"p-scale":1,children:[T.jsx(u3,{dataSource:r,"l-x":73,"l-y":-50,"p-x":20,"p-y":0,"l-visible":!1,"p-visible":!0,"l-enable":!1,"p-enable":!0}),T.jsxs(Di,{"l-x":137,"l-y":77,"p-x":200,"p-y":35,click:c,"l-scale":1,"p-scale":.8,interactive:h&&!a,children:[T.jsx(ht,{name:"turbo_disable.png",anchor:.5,visible:l||!h||a}),T.jsx(ht,{name:"turbo_enable.png",anchor:.5,visible:!l&&h&&!a}),T.jsx(Gi,{from:{k:0},to:{k:1},playing:l,duration:2e3,repeat:1e6,children:({k:d})=>T.jsx(ht,{visible:l,alpha:.5+Math.sin(Math.PI*2*d)*.5,name:"turbo_activate.png",anchor:.5,y:-5})})]})]})})},cG=({path:r,color:e,bColor:t,border:n=0,...i},s)=>{const o=N.useCallback(a=>{a.clear(),a.beginFill(e),a.lineStyle(n,t,1),a.moveTo(...r[0]);for(let l=1;l<r.length;l++)a.lineTo(...r[l]);a.lineTo(...r[0]),a.endFill()},[r,e]);return T.jsx(Et.Graphics,{ref:s,draw:o,...i})},KP=N.forwardRef(cG);function hG({children:r,selected:e=0,cellHeight:t,onSelectedChange:n,onScrollStart:i,onScrollEnd:s,selectedColor:o=16691720,...a}){const{isMobile:l,isTablet:u}=Ee.Obj,[h,c]=N.useState(!1),{current:d}=N.useRef({tween:null,startPoint:null,movement:{x:0,y:0},page:e,update:!1}),f=N.Children.count(r),g=Math.floor(f/2);function v(M){return(M+g+f)%f-g}function x(){const M=d.movement.y/t;return(d.page+M+f)%f}function y(M,O=!0,L=d.page){O&&L!=M?(d.tween&&(d.tween.stop(),Vk(d.tween)),d.tween=new ew({page:L}).to({page:M},200).onUpdate(D=>{d.page=D.page,d.update=!0}).onComplete(()=>{const D=Math.round((M+f)%f);n&&n(D),d.page=D,d.update=!0}).start(Ee.Obj.getTime(!1))):d.page=M}function b(M){d.startPoint={x:M.x,y:M.y},i&&i()}function _(M){d.startPoint&&(d.update=!0,d.movement={x:-(M.x-d.startPoint.x),y:-(M.y-d.startPoint.y)})}function S(M){if(d.startPoint){let O=d.movement.y/t;const L=d.page+O;O=Math.round(O+(O>0?.25:-.25));const D=d.page+O;d.startPoint=null,s&&s(),d.movement={x:0,y:0},y(D,!0,L)}}const I=N.useMemo(()=>x(),[d.movement.x,d.movement.y,d.page]);N.useEffect(()=>{d.page!=e&&y(e,!0,d.page)},[e]),Et.useTick(()=>{d.update&&(c(!h),d.update=!1)},!0);function A(M){const O=t,L=Math.abs(M),D=Math.max(0,3-L),j=L<2.5?.4+D*.2:0,F=L<.5?o:16777215;return{y:M*O,scale:j,tint:F}}const k={};return l||u?(k.ontouchstart=b,k.ontouchmove=_,k.ontouchend=S,k.ontouchcancel=S,k.ontouchendoutside=S):(k.onmousedown=b,k.onmousemove=_,k.onmouseup=S,k.onmouseout=S,k.onmouseupoutside=S),T.jsx(pe,{interactive:!0,cursor:"pointer",...k,...a,children:N.Children.map(r,(M,O)=>{const L=v(-I+O);return N.cloneElement(M,A(L))})})}function dG({betAmount:r,on:e,onClose:t,onSelectedChange:n,lineBets:i}){const[s,o]=N.useState(0),{current:a}=N.useRef({inScroll:!1,ebaleClose:!1}),l=Ee.Obj;N.useEffect(()=>{const f=()=>{const g=l.viewport[1],v=l.viewport[3],x=l.layoutOptions.displayArea[1];o(-g+v+x)};return f(),l.notice.on($n,f),()=>{l.notice.off($n,f)}},[]);const u=N.useMemo(()=>i.map(f=>Number(f)).indexOf(r),[r]);function h(){a.inScroll=!0}function c(){a.inScroll=!1}function d(){a.ebaleClose&&!a.inScroll&&t&&t()}return N.useMemo(()=>{e&&(a.ebaleClose=!1)},[e]),Co(()=>{a.ebaleClose=!0},500,e&&!a.ebaleClose),T.jsxs(pe,{children:[T.jsx(Di,{click:d,hitFrame:[0,0,1170,1170],visible:e}),T.jsx(Gi,{dep:[e],from:{k:0},to:{k:1},playing:!0,duration:300,easing:$i.Cubic.In,children:({k:f})=>{const g=(e?-380*f:1e3)+s;return T.jsxs(pe,{y:g,children:[T.jsx(Bi,{frame:[0,0,1170,380],color:1908791,alpha:.9,interactive:!0}),T.jsx(pe,{children:T.jsx(_a,{x:585,y:20,anchor:.5,text:"betamount",style:{fill:"#ffffff",fontFamily:"Verdana",fontWeight:"bold",fontSize:23}})}),T.jsxs(pe,{y:173,children:[T.jsx(Bi,{frame:[0,0,1170,60],alpha:.72}),T.jsx(Bi,{frame:[0,0,1170,1],color:16773385}),T.jsx(Bi,{frame:[0,0,1170,1],color:16773385,y:57}),T.jsx(KP,{x:775,y:15,path:[[0,0],[0,30],[-15,15]],color:16773385}),T.jsx(KP,{x:400,y:15,path:[[0,0],[0,30],[15,15]],color:16773385})]}),T.jsxs(t0,{children:[T.jsx(hG,{hitFrame:[0,-270,1170,500],selected:u,cellHeight:60,y:203,onSelectedChange:n,selectedColor:16773385,onScrollStart:h,onScrollEnd:c,children:i.map((v,x)=>T.jsx(qi,{x:585,y:25,anchor:.5,text:`${v}`,style:{fill:"#ffffff",fontWeight:"500",fontSize:50}},`selecterItem${x}`))}),T.jsx(ht,{name:"selecter_mask.png",scale:[234,2],y:35})]})]})}})]})}function fG({dataSource:r}){const{state:e,dispatch:t,gameStatus:n}=r.base,{inFreeSpin:i}=r.fs,{menuOn:s}=e.setting,{currency:o}=e.user,{betLevel:a,betAmount:l,lineBetsModel:u,spinModel:h}=e.spin,[c,d]=N.useState(!1),{lineBets:f}=e.spin.lineBetsModel,g=N.useRef(null),v=N.useRef(null),x=Ee.Obj,y=ai.any,_=n=="idle"&&(h==null?void 0:h.existWin)!=!0&&!i,S=e.spin.autoSpinCount=="∞"||e.spin.autoSpinCount>0;function I(){const D=f.indexOf(l.toFixed(2))+1;D<f.length&&t(no(f[D]))}function A(){const D=f.indexOf(l.toFixed(2))-1;D>=0&&t(no(f[D]))}function k(){t(yI(!s))}N.useEffect(()=>{if(g.current,v.current){const D=()=>{const j=x.orientation,F=x.viewport[0],B=x.viewport[1],X=x.viewport[3],V=x.layoutOptions.displayArea[0],Q=x.layoutOptions.displayArea[1];g.current.y=X-B+Q,j=="l"||v.current.position.set(-F+50+V,-B+50+Q)};return D(),x.notice.on($n,D),()=>{x.notice.off($n,D)}}},[g]);const M=_&&!S&&l.toNumber()!=Number(u.lineBets[0]),O=_&&!S&&l.toNumber()!=Number(xd(u.lineBets)),L=it(Ee.Obj.urlOptions.lang);return T.jsxs(pe,{children:[T.jsxs(mi,{children:[T.jsxs(pe,{"l-x":585,"p-x":585,"l-pivot":[585,90],"p-pivot":[585,70],ref:g,children:[T.jsx(ht,{name:"UI_Container.png","l-y":-60,"p-y":-150}),T.jsx(ht,{name:"value_bg.png","l-x":0,"p-x":0,"l-y":22,"p-y":10}),T.jsx(Di,{interactive:_&&!S,"l-x":65,"l-y":48,"p-x":370,"p-y":-64,"l-visible":!0,"p-visible":!0,click:k,children:T.jsx(ht,{name:"menu-on.png",anchor:.5,tint:_&&!S?16777215:8947848})}),T.jsxs(pe,{"l-x":280,"l-y":7,"p-x":383,"p-y":-5,children:[T.jsxs(pe,{"l-x":310,"l-y":-15,"p-x":202,"p-y":-15,children:[y?T.jsx(pe,{children:T.jsxs(Di,{x:-3,y:52,interactive:_&&!S,click:d.bind(null,!0),children:[T.jsx(ht,{name:"bet_amount_bg.png",anchor:.5,"l-scale":1,"p-scale":.7,tint:_&&!S?16777215:8947848}),T.jsx(qi,{anchor:.5,y:-2,text:xn(l),maxScaleLength:140,style:{fill:"#fff109",fontFamily:L,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})}):T.jsxs(pe,{children:[T.jsxs(pe,{y:56,children:[T.jsx(Di,{"l-x":-95,"p-x":-75,click:A,interactive:M,children:T.jsx(ht,{name:"bet_minus.png",anchor:.5,tint:M?16777215:8947848})}),T.jsx(Di,{"l-x":95,"p-x":75,click:I,interactive:O,children:T.jsx(ht,{name:"bet_plus.png",anchor:.5,tint:O?16777215:8947848})})]}),T.jsx(pe,{y:52,children:T.jsx(qi,{anchor:.5,y:-2,text:`${xn(l)}`,maxScaleLength:100,style:{fill:"#fff109",fontFamily:L,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]}),T.jsx(_a,{"l-y":y?0:5,"p-y":y?8:10,anchor:.5,text:"betamount",style:{fill:"#fff109",fontFamily:L,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]}),T.jsxs(pe,{x:22,children:[T.jsx(_a,{anchor:.5,text:"balance",style:{fill:"#eeeeee",fontFamily:L,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),T.jsx(pe,{y:37,children:T.jsx(g_,{anchor:.5,tmp:`${o} {}`,"l-maxScaleLength":330,"p-maxScaleLength":165,text:e.user.balance.toNumber(),tweenOptions:{duration:500},style:{fontSize:26,fill:"#eeeeee",fontFamily:L,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]}),T.jsxs(pe,{"l-x":570,"p-x":384,children:[T.jsx(_a,{anchor:.5,text:"totalbet",style:{fill:"#eeeeee",fontFamily:L,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),T.jsx(pe,{y:37,children:T.jsx(g_,{anchor:.5,tmp:`${o} {}`,"p-maxScaleLength":165,"l-maxScaleLength":280,text:a==null?void 0:a.mul(l),style:{fontSize:26,fill:"#eeeeee",fontFamily:L,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]})]}),T.jsx(pe,{children:T.jsx(uG,{dataSource:r})})]}),T.jsx(aO,{ref:v,"l-visible":!1,"p-visible":!1,click:k,children:T.jsx(ht,{name:"menu-on.png",anchor:.5})})]}),T.jsx(dG,{on:c,onClose:d.bind(null,!1),betAmount:l.toNumber(),lineBets:f,onSelectedChange:D=>{f[D]&&t(no(f[D]))}})]})}const pG=({onFreeGame:r,...e})=>T.jsx(Dz,{children:T.jsx(Lz,{children:T.jsx(Uz,{children:T.jsx(Bz,{children:({dataSource:t})=>{const{inFreeSpin:n}=t.fs;return r(n),T.jsxs(e0,{...e,children:[T.jsx(QY,{dataSource:t}),T.jsx(sG,{dataSource:t,"l-x":209,"l-y":370,"p-x":322,"p-y":370,"p-scale":.7,"l-scale":1}),T.jsx(Li,{"l-x":585,"l-y":270,"p-x":585,"p-y":270,anchor:.5,name:"logo.png"}),T.jsx(KY,{dataSource:t}),T.jsx(WY,{dataSource:t,x:585,"l-y":833,"l-scale":1,"p-y":695,"p-scale":.7}),T.jsx(JY,{dataSource:t}),T.jsx(eG,{dataSource:t}),T.jsx(qY,{dataSource:t,"l-x":89,"l-y":327,"l-scale":1,"p-x":327,"p-y":225,"p-scale":.7}),T.jsx(u3,{dataSource:t,x:1080,y:800,"l-visible":!0,"p-visible":!1,"l-enable":!0,"p-enable":!1}),T.jsx(fG,{dataSource:t}),T.jsx(zY,{dataSource:t}),T.jsx($Y,{dataSource:t}),T.jsx(VY,{dataSource:t,"l-x":585,"l-y":830,"p-x":585,"p-y":691,"l-scale":1,"p-scale":.7}),T.jsx(HY,{dataSource:t}),T.jsx(ZY,{dataSource:t}),T.jsx(aG,{dataSource:t})]})}})})})}),mG=({...r})=>{const e=N.useMemo(()=>Oz(Ee.Obj.urlOptions.lang),[]);return T.jsx(Mz,{assets:e,...r})};function gG({children:r,selected:e=0,direction:t="H",size:n,onSelectedChange:i,onScrollStart:s,onScrollEnd:o,...a}){const[l,u]=N.useState(!1),[h,c]=N.useState(!0),{current:d}=N.useRef({tween:null,startPoint:null,movement:{x:0,y:0},page:e,update:!1}),f=N.Children.count(r),g=Math.floor(f/2);function v(k){return(k+g+f)%f-g}function x(){let k;return t=="H"?k=d.movement.x/n[0]:k=d.movement.y/n[1],(d.page+k+f)%f}function y(k,M=!0,O=d.page){M&&O!=k?(d.tween&&(d.tween.stop(),d.tween.end(),Vk(d.tween)),d.tween=new ew({page:O}).to({page:k},200).onStart(()=>{c(!1)}).onUpdate(L=>{d.page=L.page,d.update=!0}).onComplete(()=>{c(!0);const L=(k+f)%f;i&&i(L),d.page=L,d.update=!0}).start(Ee.Obj.getTime(!1))):d.page=k}function b(k){d.startPoint={x:k.x,y:k.y},s&&s()}function _(k){d.startPoint&&(d.update=!0,d.movement={x:-(k.x-d.startPoint.x),y:-(k.y-d.startPoint.y)})}function S(k){if(d.startPoint){let M;t=="H"?M=d.movement.x/n[0]:M=d.movement.y/n[1];const O=d.page+M;M=Math.round(M+(M>0?.25:-.25));const L=d.page+M;d.startPoint=null,o&&o(),d.movement={x:0,y:0},d.page=O,y(L,!0,O)}}const I=N.useMemo(()=>{if(t=="H"){const k=n[0];return M=>({x:M*k})}else{const k=n[1];return M=>({y:M*k})}},[t]),A=N.useMemo(()=>x(),[d.movement.x,d.movement.y,d.page]);return N.useEffect(()=>{d.page!=e&&!d.startPoint&&y(e,!0,d.page)},[e]),Et.useTick(()=>{d.update&&(u(!l),d.update=!1)},!0),T.jsx(pe,{hitFrame:[0,0,...n],interactive:h,cursor:"pointer",onpointerdown:b,onpointermove:_,onpointerupoutside:S,onpointerup:S,onpointerout:S,...a,children:N.Children.map(r,(k,M)=>{const O=v(-A+M);return T.jsx(pe,{...I(O),visible:O>-1&&O<1,children:k})})})}const QP=[[7,2,1],[3,1,4],[1,5,6],[6,5,3],[0,5,1]],ZP=["02","11","20"],vG=["01","20","42","10","31","41"],yG={"00":{offset:1},"01":{offset:1},10:{offset:1}},xG=[{inColumn:0,from:-1,to:0,s:6},{inColumn:1,from:-1,to:0,s:7},{inColumn:2,from:-1,to:0,s:0}];function _G({...r}){const{current:e}=N.useRef({inScroll:!1}),[t,n]=N.useState(0),i=t==0,s=t==1,o=t==3,a=it(Ee.Obj.urlOptions.lang==vt.Chinese?"cn":""),l=it([[10,`16${a}`,11],[`14${a}`,13,17],[`16${a}`,12,13],[13,`14${a}`,17],[12,`14${a}`,`16${a}`]]);il(3e3,()=>{e.inScroll||n(1)},t==0),il(5e3,()=>{e.inScroll||n(2)},t==1),il(5e3,()=>{e.inScroll||n(3)},t==2),il(5e3,()=>{e.inScroll||n(0)},t==3);function u(){n((t+4-1)%4)}function h(){n((t+1)%4)}function c(){e.inScroll=!0}function d(){e.inScroll=!1}return T.jsxs(pe,{...r,children:[T.jsx(ht,{name:"loading_panel.png"}),T.jsxs(t0,{x:40,y:30,children:[T.jsxs(gG,{size:[564,360],selected:t,onSelectedChange:n,onScrollStart:c,onScrollEnd:d,children:[T.jsxs(pe,{children:[QP.map((f,g)=>T.jsx(pe,{x:75*g+132,children:f.map((v,x)=>{const y=i&&ZP.indexOf(`${g}${x}`)!=-1;return T.jsxs(pe,{y:72*x+50,children:[T.jsx(Go,{scale:.5,anchor:.5,name:`${v}.png`}),T.jsx(JP,{playing:y})]},`p1_${x}`)})},`p1${g}`)),T.jsx(Li,{x:280,y:240,anchor:[.5,0],name:"text1.png",scale:1})]}),T.jsxs(pe,{children:[QP.map((f,g)=>T.jsx(pe,{x:75*g+132,children:f.map((v,x)=>{let y=!1;const b=`${g}${x}`,_=s&&ZP.indexOf(b)!=-1;let S=yG[b];S?y=s:S={from:0,to:0};const{offset:I}=S;return T.jsx(Gi,{from:{k:0},to:{k:I},playing:y,delay:1300,duration:I*150,children:({k:A})=>T.jsxs(pe,{y:75*x+50+75*A,children:[T.jsx(Gi,{from:{alpha:1},to:{alpha:0},playing:_,duration:150,delay:700,children:({alpha:k})=>T.jsx(pe,{alpha:k,children:T.jsx(Go,{scale:.5,anchor:.5,name:`${v}.png`})})}),T.jsx(wG,{playing:_})]})},`p1_${x}`)})},`p1${g}`)),xG.map(({inColumn:f,from:g,to:v,s:x},y)=>T.jsx(Gi,{from:{k:g},to:{k:v},playing:s,delay:1300,duration:(v-g)*150,children:({k:b})=>T.jsx(Go,{x:75*f+132,y:75*b+50,scale:.5,anchor:.5,name:`${x}.png`})},`p21${y}`)),T.jsx(Li,{x:280,y:240,anchor:[.5,0],name:"text2.png",scale:1})]}),T.jsxs(pe,{children:[T.jsxs(pe,{x:150,y:150,children:[T.jsx(Go,{scale:.8,anchor:.5,name:`8${a}.png`}),T.jsx(Go,{scale:.8,x:130,anchor:.5,name:`8${a}.png`}),T.jsx(Go,{scale:.8,x:260,anchor:.5,name:`8${a}.png`})]}),T.jsx(Li,{x:280,y:240,anchor:[.5,0],name:"text3.png",scale:1})]}),T.jsxs(pe,{children:[l.map((f,g)=>T.jsx(pe,{x:75*g+132,children:f.map((v,x)=>{const y=o&&vG.indexOf(`${g}${x}`)!=-1;return T.jsxs(pe,{y:72*x+50,children:[T.jsx(Go,{scale:.5,anchor:.5,name:`${v}.png`}),T.jsx(JP,{playing:y})]},`p1_${x}`)})},`p1${g}`)),T.jsx(Li,{x:280,y:240,anchor:[.5,0],name:"text5.png",scale:1})]})]}),T.jsx(Bi,{frame:[0,10,564,300],color:0})]}),T.jsx(pe,{x:237,y:344,children:pr(4,f=>T.jsxs(Di,{x:50*f,click:n.bind(null,f),children:[T.jsx(ht,{visible:t==f,y:0,name:"loading_panel_lit.png"}),T.jsx(ht,{visible:t!=f,name:"loading_panel_unlit.png"})]},`page_tip_${f}`))}),T.jsx(mi,{children:T.jsxs(pe,{y:190,children:[T.jsx(Di,{x:70,click:u,children:T.jsx(ht,{anchor:.5,name:"loading_arrow_left.png"})}),T.jsx(Di,{x:570,click:h,children:T.jsx(ht,{anchor:.5,name:"loading_arrow_right.png"})})]})})]})}function JP({playing:r}){const[e,t]=N.useState(!1);return N.useEffect(()=>{t(!!r)},[r]),T.jsxs(pe,{y:10,children:[T.jsx(o3,{scale:.5,isPlaying:e,visible:e,repeat:1,onRepeatComplete:t.bind(null,!1),anchor:.5,startFrame:0}),T.jsx(ht,{scale:.5,anchor:.5,visible:r&&!e,res:Cd,name:"CollapseFx23.png"})]})}function wG({playing:r}){const[e,t]=N.useState(!1),[n,i]=N.useState(!1);return N.useEffect(()=>{r||(t(!1),i(!1))},[r]),Co(()=>{t(!0)},500,r),T.jsxs(pe,{y:10,children:[T.jsx(ht,{scale:.5,anchor:.5,visible:r&&!e&&!n,res:Cd,name:"CollapseFx23.png"}),T.jsx(a3,{scale:.5,isPlaying:e&&!n,loop:!1,visible:e&&!n,repeat:1,onComplete:i.bind(null,!0),anchor:.5,startFrame:0})]})}const bG=({...r})=>{const{dispatch:e}=N.useContext(xt);function t(){e(qw("main"))}return T.jsx(e0,{...r,children:T.jsxs(pe,{children:[T.jsx(Eb,{onKeySpace:t,onKeyEnter:t,enable:!0}),T.jsx(eb,{name:tb}),T.jsx(ht,{x:250,y:210,"l-visible":!1,"p-visible":!0,name:"char_A.png"}),T.jsx(Li,{"l-x":585,"l-y":340,"p-x":585,"p-y":200,anchor:.5,name:"logo.png"}),T.jsx(_G,{"l-x":265,"l-y":430,"l-scale":1,"p-x":306,"p-y":430,"p-scale":.87}),T.jsx(ht,{x:0,y:390,"l-visible":!0,"p-visible":!1,name:"char_A.png"}),T.jsx(ht,{"l-x":900,"l-y":680,"p-x":675,"p-y":696,name:"char_B.png"}),T.jsxs(Di,{"l-x":466,"l-y":850,"p-x":465,"p-y":920,click:t,children:[T.jsx(ht,{name:"loading_continue.png"}),T.jsx(Li,{x:120,y:38,anchor:.5,name:"continue.png",scale:1.5})]})]})})};/*!
 * better-scroll / slide
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 */function c3(r){console.error("[BScroll warn]: "+r)}var Nd=typeof window<"u",ag=Nd&&navigator.userAgent.toLowerCase();ag&&ag.indexOf("android")>0;(function(){if(typeof ag=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(ag);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var SG=!1;if(Nd){var TG="test-passive";try{var eA={};Object.defineProperty(eA,"passive",{get:function(){SG=!0}}),window.addEventListener(TG,function(){},eA)}catch{}}var Oh=function(r,e){for(var t in e)r[t]=e[t];return r};function Pu(r,e,t){return r<e?e:r>t?t:r}var h3=Nd&&document.createElement("div").style,Vu=function(){if(!Nd)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(h3[n.value]!==void 0)return n.key}return!1}();function io(r){return Vu===!1?r:Vu==="standard"?r==="transitionEnd"?"transitionend":r:Vu+r.charAt(0).toUpperCase()+r.substr(1)}Vu&&Vu!=="standard"&&""+Vu.toLowerCase();var EG=io("transform"),CG=io("transition");Nd&&io("perspective")in h3;io("transitionTimingFunction"),io("transitionDuration"),io("transitionDelay"),io("transformOrigin"),io("transitionEnd"),io("transitionProperty");function PG(r,e){var t=e.firstChild;t?AG(r,t):e.appendChild(r)}function AG(r,e){var t=e.parentNode;t.insertBefore(r,e)}function kG(r,e){r.removeChild(e)}var Ky={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(r){return 1+--r*r*r*r*r}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(r){return 1- --r*r*r*r}}},d3={pageX:0,pageY:0,x:0,y:0},IG={x:0,y:0,width:0,height:0,cx:0,cy:0},MG=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY;this.wrapperWidth=t.wrapperSize,this.wrapperHeight=n.wrapperSize,this.scrollerHeight=n.contentSize,this.scrollerWidth=t.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},r.prototype.getPageStats=function(e,t){return this.pages[e]&&this.pages[e][t]?this.pages[e][t]:IG},r.prototype.getNearestPageIndex=function(e,t){for(var n=0,i=0,s=this.pages.length;n<s-1&&!(e>=this.pages[n][0].cx);n++);for(s=this.pages[n]?this.pages[n].length:0;i<s-1&&!(t>=this.pages[0][i].cy);i++);return{pageX:n,pageY:i}},r.prototype.buildPagesMatrix=function(e,t){var n=[],i=0,s,o,a,l=0,u,h=this.scroll.scroller.scrollBehaviorX.maxScrollPos,c=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(o=Math.round(e/2),a=Math.round(t/2);i>-this.scrollerWidth;){for(n[l]=[],u=0,s=0;s>-this.scrollerHeight;)n[l][u]={x:Math.max(i,h),y:Math.max(s,c),width:e,height:t,cx:i-o,cy:s-a},s-=t,u++;i-=e,l++}return n},r}(),RG=function(){function r(e,t){this.scroll=e,this.slideOptions=t,this.slideX=!1,this.slideY=!1,this.currentPage=Oh({},d3)}return r.prototype.refresh=function(){this.pagesMatrix=new MG(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},r.prototype.getAdjustedCurrentPage=function(){var e=this.currentPage,t=e.pageX,n=e.pageY;t=Math.min(t,this.pagesMatrix.pageLengthOfX-1),n=Math.min(n,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(t=Math.min(t,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(n=Math.min(n,this.pagesMatrix.pageLengthOfY-2));var i=this.pagesMatrix.getPageStats(t,n),s=i.x,o=i.y;return{pageX:t,pageY:n,x:s,y:o}},r.prototype.setCurrentPage=function(e){this.currentPage=e},r.prototype.getInternalPage=function(e,t){e>=this.pagesMatrix.pageLengthOfX?e=this.pagesMatrix.pageLengthOfX-1:e<0&&(e=0),t>=this.pagesMatrix.pageLengthOfY?t=this.pagesMatrix.pageLengthOfY-1:t<0&&(t=0);var n=this.pagesMatrix.getPageStats(e,t),i=n.x,s=n.y;return{pageX:e,pageY:t,x:i,y:s}},r.prototype.getInitialPage=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=this.slideOptions,i=n.startPageXIndex,s=n.startPageYIndex,o=this.loopX?1:0,a=this.loopY?1:0,l=e?o:this.currentPage.pageX,u=e?a:this.currentPage.pageY;t?(l=this.loopX?i+1:i,u=this.loopY?s+1:s):(l=e?o:this.currentPage.pageX,u=e?a:this.currentPage.pageY);var h=this.pagesMatrix.getPageStats(l,u),c=h.x,d=h.y;return{pageX:l,pageY:u,x:c,y:d}},r.prototype.getExposedPage=function(e){var t=Oh({},e);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},r.prototype.getExposedPageByPageIndex=function(e,t){var n={pageX:e,pageY:t};this.loopX&&(n.pageX=e+1),this.loopY&&(n.pageY=t+1);var i=this.pagesMatrix.getPageStats(n.pageX,n.pageY),s=i.x,o=i.y;return{x:s,y:o,pageX:e,pageY:t}},r.prototype.getWillChangedPage=function(e){return e=Oh({},e),this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2),e.x=this.pagesMatrix.getPageStats(e.pageX+1,0).x),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2),e.y=this.pagesMatrix.getPageStats(0,e.pageY+1).y),e},r.prototype.fixedPage=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},r.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},r.prototype.getValidPageIndex=function(e,t){var n=this.pagesMatrix.pageLengthOfX-1,i=this.pagesMatrix.pageLengthOfY-1,s=0,o=0;return this.loopX&&(e+=1,s=s+1,n=n-1),this.loopY&&(t+=1,o=o+1,i=i-1),e=Pu(e,s,n),t=Pu(t,o,i),{pageX:e,pageY:t}},r.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},r.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},r.prototype.getNearestPage=function(e,t){var n=this.pagesMatrix.getNearestPageIndex(e,t),i=n.pageX,s=n.pageY,o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.getPageByDirection=function(e,t,n){var i=e.pageX,s=e.pageY;i===this.currentPage.pageX&&(i=Pu(i+t,0,this.pagesMatrix.pageLengthOfX-1)),s===this.currentPage.pageY&&(s=Pu(s+n,0,this.pagesMatrix.pageLengthOfY-1));var o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.resetLoopPage=function(){if(this.loopX){if(this.currentPage.pageX===0)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(this.currentPage.pageY===0)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},r.prototype.getPageIndexByDirection=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t=e==="negative"?t-1:t+1),this.slideY&&(n=e==="negative"?n-1:n+1),{pageX:t,pageY:n}},r.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&c3("slide does not support two direction at the same time.")},r}(),OG="plugins.slide",NG=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],FG=NG.map(function(r){return{key:r.key,sourceKey:OG+"."+r.name}}),BG=function(r,e){return r.pageX===e.pageX&&r.pageY===e.pageY},LG=function(){function r(e){this.scroll=e,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return r.prototype.satisfyInitialization=function(){return this.scroll.scroller.content.children.length<=0?(c3("slide need at least one slide page to be initialised.please check your DOM layout."),!1):!0},r.prototype.init=function(){this.willChangeToPage=Oh({},d3),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},r.prototype.createPages=function(){this.pages=new RG(this.scroll,this.options)},r.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(FG)},r.prototype.handleOptions=function(){var e=this.scroll.options.slide===!0?{}:this.scroll.options.slide,t={loop:!0,threshold:.1,speed:400,easing:Ky.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0};this.options=Oh(t,e)},r.prototype.handleLoop=function(e){var t=this.options.loop,n=this.scroll.scroller.content,i=n.children.length;t&&(n!==e?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(e),i>1&&this.cloneFirstAndLastSlidePage(n)):i===3&&this.initialised?(this.removeClonedSlidePage(n),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):i>1?(this.initialised&&this.cachedClonedPageDOM.length===0?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(n),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(n)):this.resetLoopChangedStatus())},r.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,n=this.scroll.scroller.hooks,i=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,function(){return!0}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(s){(s.directionX===1||s.directionY===1)&&e.next(),(s.directionX===-1||s.directionY===-1)&&e.prev()})),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(n,n.eventTypes.beforeRefresh,function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()}),this.registerHooks(n,n.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(n,n.eventTypes.scroll,this.scrollHandler),this.registerHooks(n,n.eventTypes.checkClick,this.startPlay),i&&this.registerHooks(n,n.eventTypes.flick,this.flickHandler)},r.prototype.startPlay=function(){var e=this,t=this.options,n=t.interval,i=t.autoplay;i&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout(function(){e.next()},n))},r.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},r.prototype.setSlideInlineStyle=function(){var e=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],t=this.scroll.scroller,n=t.content,i=t.wrapper,s=this.scroll.options;e.forEach(function(o){var a=o.direction,l=o.sizeType,u=o.styleType;if(s[a]){for(var h=i[l],c=n.children,d=c.length,f=0;f<d;f++){var g=c[f];g.style[u]=h+"px"}n.style[u]=h*d+"px"}})},r.prototype.next=function(e,t){var n=this.pages.nextPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.prev=function(e,t){var n=this.pages.prevPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.goToPage=function(e,t,n,i){var s=this.pages.getValidPageIndex(e,t);this.goTo(s.pageX,s.pageY,n,i)},r.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},r.prototype.setCurrentPage=function(e){this.pages.setCurrentPage(e),this.exposedPage=this.pages.getExposedPage(e)},r.prototype.nearestPage=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=i.maxScrollPos,a=i.minScrollPos,l=s.maxScrollPos,u=s.minScrollPos;return this.pages.getNearestPage(Pu(e,o,a),Pu(t,l,u))},r.prototype.satisfyThreshold=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=!0;return Math.abs(e-i.absStartPos)<=this.thresholdX&&Math.abs(t-s.absStartPos)<=this.thresholdY&&(o=!1),o},r.prototype.refreshHandler=function(e){var t=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var n=this.contentChanged=this.prevContent!==e;n&&(this.prevContent=e);var i=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,n||!this.initialised);this.initialised?this.goTo(i.pageX,i.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(s){t.initialised=!0,s.x=i.x,s.y=i.y}),this.startPlay()}},r.prototype.computeThreshold=function(){var e=this.options.threshold;if(e%1===0)this.thresholdX=e,this.thresholdY=e;else{var t=this.pages.getPageStats(),n=t.width,i=t.height;this.thresholdX=Math.round(n*e),this.thresholdY=Math.round(i*e)}},r.prototype.cloneFirstAndLastSlidePage=function(e){var t=e.children,n=t[t.length-1].cloneNode(!0),i=t[0].cloneNode(!0);PG(n,e),e.appendChild(i),this.cachedClonedPageDOM=[n,i]},r.prototype.removeClonedSlidePage=function(e){var t=e&&e.children||[];t.length&&this.cachedClonedPageDOM.forEach(function(n){kG(e,n)}),this.cachedClonedPageDOM=[]},r.prototype.modifyCurrentPage=function(e){var t=this.getCurrentPage(),n=t.pageX,i=t.pageY,s=this.nearestPage(e.x,e.y);if(this.setCurrentPage(s),this.contentChanged)return this.contentChanged=!1,!0;var o=this.getCurrentPage(),a=o.pageX,l=o.pageY;if(this.pageWillChangeTo(s),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&n===0&&i===0)return this.moreToOnePageInLoop=!1,!0;if(n!==a||i!==l){var u=this.pages.getExposedPageByPageIndex(a,l);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,u)}if(this.resetLooping){this.resetLooping=!1;return}var h=this.pages.resetLoopPage();if(h)return this.resetLooping=!0,this.goTo(h.pageX,h.pageY,0),!0},r.prototype.goTo=function(e,t,n,i){var s=this.pages.getInternalPage(e,t),o=i||this.options.easing||Ky.bounce,a=s.x,l=s.y,u=a-this.scroll.scroller.scrollBehaviorX.currentPos,h=l-this.scroll.scroller.scrollBehaviorY.currentPos;if(!u&&!h){this.scroll.scroller.togglePointerEvents(!0);return}n=n===void 0?this.getEaseTime(u,h):n,this.scroll.scroller.scrollTo(a,l,n,o)},r.prototype.flickHandler=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos,s=t.startPos,o=t.direction,a=n.currentPos,l=n.startPos,u=n.direction,h=this.pages.currentPage,c=h.pageX,d=h.pageY,f=this.getEaseTime(i-s,a-l);this.goTo(c+o,d+u,f)},r.prototype.getEaseTime=function(e,t){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},r.prototype.modifyScrollMetaHandler=function(e){var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=t.animater,o=e.newX,a=e.newY,l=this.satisfyThreshold(o,a)||s.forceStopped?this.pages.getPageByDirection(this.nearestPage(o,a),n.direction,i.direction):this.pages.currentPage;e.time=this.getEaseTime(e.newX-l.x,e.newY-l.y),e.newX=l.x,e.newY=l.y,e.easing=this.options.easing||Ky.bounce},r.prototype.scrollHandler=function(e){var t=e.x,n=e.y;if(this.satisfyThreshold(t,n)){var i=this.nearestPage(t,n);this.pageWillChangeTo(i)}},r.prototype.pageWillChangeTo=function(e){var t=this.pages.getWillChangedPage(e);BG(this.willChangeToPage,t)||(this.willChangeToPage=t,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){var e=this.scroll.scroller.content,t=this.options,n=t.loop,i=t.autoplay;n&&this.removeClonedSlidePage(e),i&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],l=s[2];o.eventTypes[a]&&o.off(a,l)}),this.hooksFn.length=0},r.pluginName="slide",r}();/*!
 * better-scroll / better-scroll
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T_=function(r,e){return T_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},T_(r,e)};function l0(r,e){T_(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Ji=function(){return Ji=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ji.apply(this,arguments)};function Qy(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{u(n.next(h))}catch(c){o(c)}}function l(h){try{u(n.throw(h))}catch(c){o(c)}}function u(h){h.done?s(h.value):i(h.value).then(a,l)}u((n=n.apply(r,e||[])).next())})}function Zy(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(h){return l([u,h])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){t.label=u[1];break}if(u[0]===6&&t.label<s[1]){t.label=s[1],s=u;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(u);break}s[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(h){u=[6,h],i=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function lg(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}var DG=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function Wi(r){console.error("[BScroll warn]: "+r)}function tA(r,e){if(!r)throw new Error("[BScroll] "+e)}var $s=typeof window<"u",mc=$s&&navigator.userAgent.toLowerCase(),UG=!!(mc&&/wechatdevtools/.test(mc)),jG=mc&&mc.indexOf("android")>0,XG=function(){if(typeof mc=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(mc);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1}(),f3=!1;if($s){var HG="test-passive";try{var rA={};Object.defineProperty(rA,"passive",{get:function(){f3=!0}}),window.addEventListener(HG,function(){},rA)}catch{}}function Xn(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var qr=function(r,e){for(var t in e)r[t]=e[t];return r};function E_(r){return r==null}function $G(r,e){return Math.sqrt(r*r+e*e)}function ir(r,e,t){return r<e?e:r>t?t:r}function Au(r,e){if(r.findIndex)return r.findIndex(e);var t=-1;return r.some(function(n,i,s){var o=e(n,i,s);if(o)return t=i,o}),t}var Rb=$s&&document.createElement("div").style,qu=function(){if(!$s)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(Rb[n.value]!==void 0)return n.key}return!1}();function so(r){return qu===!1?r:qu==="standard"?r==="transitionEnd"?"transitionend":r:qu+r.charAt(0).toUpperCase()+r.substr(1)}function p3(r){return typeof r=="string"?document.querySelector(r):r}function zG(r,e,t,n){var i=f3?{passive:!1,capture:!!n}:!!n;r.addEventListener(e,t,i)}function YG(r,e,t,n){r.removeEventListener(e,t,{capture:!!n})}function fl(r){r.cancelable&&r.preventDefault()}function nA(r){for(var e=0,t=0;r;)e-=r.offsetLeft,t-=r.offsetTop,r=r.offsetParent;return{left:e,top:t}}function GG(r){var e=r.getBoundingClientRect();return{left:-(e.left+window.pageXOffset),top:-(e.top+window.pageYOffset)}}var WG=qu&&qu!=="standard"?"-"+qu.toLowerCase()+"-":"",VG=so("transform"),m3=so("transition"),qG=$s&&so("perspective")in Rb,iA=$s&&("ontouchstart"in window||UG),KG=$s&&m3 in Rb,Ht={transform:VG,transition:m3,transitionTimingFunction:so("transitionTimingFunction"),transitionDuration:so("transitionDuration"),transitionDelay:so("transitionDelay"),transformOrigin:so("transformOrigin"),transitionEnd:so("transitionEnd"),transitionProperty:so("transitionProperty")},Jy={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function Sl(r){if(r instanceof window.SVGElement){var e=r.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}else return{top:r.offsetTop,left:r.offsetLeft,width:r.offsetWidth,height:r.offsetHeight}}function gc(r,e){for(var t in e)if(e[t].test(r[t]))return!0;return!1}var QG=gc;function ZG(r,e){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.pageX=r.pageX,t.pageY=r.pageY,r.target.dispatchEvent(t)}function g3(r,e){e===void 0&&(e="click");var t;r.type==="mouseup"?t=r:(r.type==="touchend"||r.type==="touchcancel")&&(t=r.changedTouches[0]);var n={};t&&(n.screenX=t.screenX||0,n.screenY=t.screenY||0,n.clientX=t.clientX||0,n.clientY=t.clientY||0);var i,s=!0,o=!0,a=r.ctrlKey,l=r.shiftKey,u=r.altKey,h=r.metaKey,c={ctrlKey:a,shiftKey:l,altKey:u,metaKey:h};if(typeof MouseEvent<"u")try{i=new MouseEvent(e,qr(Ji({bubbles:s,cancelable:o},c),n))}catch{d()}else d();function d(){i=document.createEvent("Event"),i.initEvent(e,s,o),qr(i,n)}i.forwardedTouchEvent=!0,i._constructed=!0,r.target.dispatchEvent(i)}function JG(r){g3(r,"dblclick")}function eW(r,e){var t=e.firstChild;t?tW(r,t):e.appendChild(r)}function tW(r,e){var t=e.parentNode;t.insertBefore(r,e)}function rW(r,e){r.removeChild(e)}function bp(r,e){var t=new RegExp("(^|\\s)"+e+"(\\s|$)");return t.test(r.className)}function nW(r){return Array.prototype.slice.call(r,0)}function iW(r){return{width:r.clientWidth,height:r.clientHeight}}var Or={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(r){return 1+--r*r*r*r*r}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(r){return 1- --r*r*r*r}}},sW=1e3/60,ca=$s&&window;function v3(){}var Ob=function(){return $s?ca.requestAnimationFrame||ca.webkitRequestAnimationFrame||ca.mozRequestAnimationFrame||ca.oRequestAnimationFrame||function(r){return window.setTimeout(r,r.interval||sW)}:v3}(),Ca=function(){return $s?ca.cancelAnimationFrame||ca.webkitCancelAnimationFrame||ca.mozCancelAnimationFrame||ca.oCancelAnimationFrame||function(r){window.clearTimeout(r)}:v3}(),sA=function(r){},e1={enumerable:!0,configurable:!0,get:sA,set:sA},oW=function(r,e){for(var t=e.split("."),n=0;n<t.length-1;n++)if(r=r[t[n]],typeof r!="object"||!r)return;var i=t.pop();return typeof r[i]=="function"?function(){return r[i].apply(r,arguments)}:r[i]},aW=function(r,e,t){for(var n=e.split("."),i,s=0;s<n.length-1;s++)i=n[s],r[i]||(r[i]={}),r=r[i];r[n.pop()]=t};function lW(r,e,t){e1.get=function(){return oW(this,e)},e1.set=function(i){aW(this,e,i)},Object.defineProperty(r,t,e1)}var Po=function(){function r(e){this.events={},this.eventTypes={},this.registerType(e)}return r.prototype.on=function(e,t,n){return n===void 0&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},r.prototype.once=function(e,t,n){var i=this;n===void 0&&(n=this),this.hasType(e);var s=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];i.off(e,s);var l=t.apply(n,o);if(l===!0)return l};return s.fn=t,this.on(e,s),this},r.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},r.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var s=i.length,o=lg(i),a,l=0;l<s;l++){var u=o[l],h=u[0],c=u[1];if(h&&(a=h.apply(c,t),a===!0))return a}},r.prototype.registerType=function(e){var t=this;e.forEach(function(n){t.eventTypes[n]=n})},r.prototype.destroy=function(){this.events={},this.eventTypes={}},r.prototype.hasType=function(e){var t=this.eventTypes,n=t[e]===e;n||Wi('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+(""+Object.keys(t).map(function(i){return JSON.stringify(i)}))+"]")},r}(),Tn=function(){function r(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return r.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},r.prototype.addDOMEvents=function(){this.handleDOMEvents(zG)},r.prototype.removeDOMEvents=function(){this.handleDOMEvents(YG)},r.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach(function(i){e(n,i.name,t,!!i.capture)})},r.prototype.handleEvent=function(e){var t=e.type;this.events.some(function(n){return n.name===t?(n.handler(e),!0):!1})},r}(),uW=function(){function r(){}return r}(),cW=function(r){l0(e,r);function e(){var t=r.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=iA,t.disableTouch=!iA,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}return e.prototype.merge=function(t){if(!t)return this;for(var n in t){if(n==="bounce"){this.bounce=this.resolveBounce(t[n]);continue}this[n]=t[n]}return this},e.prototype.process=function(){return this.translateZ=this.HWCompositing&&qG?" translateZ(1px)":"",this.useTransition=this.useTransition&&KG,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX=this.eventPassthrough==="horizontal"?!1:this.scrollX,this.scrollY=this.eventPassthrough==="vertical"?!1:this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=this.freeScroll?!0:this.scrollX,this.scrollY=this.freeScroll?!0:this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},e.prototype.resolveBounce=function(t){var n={top:!0,right:!0,bottom:!0,left:!0},i={top:!1,right:!1,bottom:!1,left:!1},s;return typeof t=="object"?s=qr(n,t):s=t?n:i,s},e}(uW),hW=function(){function r(e,t){this.wrapper=e,this.options=t,this.hooks=new Po(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return r.prototype.handleDOMEvents=function(){var e=this.options,t=e.bindToWrapper,n=e.disableMouse,i=e.disableTouch,s=e.click,o=this.wrapper,a=t?o:window,l=[],u=[],h=!i,c=!n;s&&l.push({name:"click",handler:this.click.bind(this),capture:!0}),h&&(l.push({name:"touchstart",handler:this.start.bind(this)}),u.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),c&&(l.push({name:"mousedown",handler:this.start.bind(this)}),u.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new Tn(o,l),this.targetEventRegister=new Tn(a,u)},r.prototype.beforeHandler=function(e,t){var n=this.options,i=n.preventDefault,s=n.stopPropagation,o=n.preventDefaultException,a={start:function(){return i&&!gc(e.target,o)},end:function(){return i&&!gc(e.target,o)},move:function(){return i}};a[t]()&&e.preventDefault(),s&&e.stopPropagation()},r.prototype.setInitiated=function(e){e===void 0&&(e=0),this.initiated=e},r.prototype.start=function(e){var t=Jy[e.type];if(!(this.initiated&&this.initiated!==t)){if(this.setInitiated(t),QG(e.target,this.options.tagException)){this.setInitiated();return}if(!(t===2&&e.button!==0)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,e)){this.beforeHandler(e,"start");var n=e.touches?e.touches[0]:e;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,e)}}},r.prototype.move=function(e){if(Jy[e.type]===this.initiated){this.beforeHandler(e,"move");var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,i=t.pageY-this.pointY;if(this.pointX=t.pageX,this.pointY=t.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:i,e})){var s=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,a=this.pointX-s,l=this.pointY-o,u=this.options.autoEndDistance;(a>document.documentElement.clientWidth-u||l>document.documentElement.clientHeight-u||a<u||l<u)&&this.end(e)}}},r.prototype.end=function(e){Jy[e.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(e,"end"),this.hooks.trigger(this.hooks.eventTypes.end,e))},r.prototype.click=function(e){this.hooks.trigger(this.hooks.eventTypes.click,e)},r.prototype.setContent=function(e){e!==this.wrapper&&(this.wrapper=e,this.rebindDOMEvents())},r.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},r.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},r}(),t1={x:["translateX","px"],y:["translateY","px"]},dW=function(){function r(e){this.setContent(e),this.hooks=new Po(["beforeTranslate","translate"])}return r.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null),t=e[Ht.transform].split(")")[0].split(", "),n=+(t[12]||t[4])||0,i=+(t[13]||t[5])||0;return{x:n,y:i}},r.prototype.translate=function(e){var t=[];Object.keys(e).forEach(function(n){if(t1[n]){var i=t1[n][0];if(i){var s=t1[n][1],o=e[n];t.push(i+"("+o+s+")")}}}),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,t,e),this.style[Ht.transform]=t.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,e)},r.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style)},r.prototype.destroy=function(){this.hooks.destroy()},r}(),y3=function(){function r(e,t,n){this.translater=t,this.options=n,this.timer=0,this.hooks=new Po(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(e)}return r.prototype.translate=function(e){this.translater.translate(e)},r.prototype.setPending=function(e){this.pending=e},r.prototype.setForceStopped=function(e){this.forceStopped=e},r.prototype.setCallStop=function(e){this.callStopWhenPending=e},r.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style,this.stop())},r.prototype.clearTimer=function(){this.timer&&(Ca(this.timer),this.timer=0)},r.prototype.destroy=function(){this.hooks.destroy(),Ca(this.timer)},r}(),fW=function(r,e,t,n){var i=function(u,h){var c=u-h,d=c>0?-1:c<0?1:0;return d},s=i(e.x,r.x),o=i(e.y,r.y),a=t.x-n.x,l=t.y-n.y;return s*a<=0&&o*l<=0},pW=function(r){l0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.startProbe=function(t,n){var i=this,s=t,o=function(){var a=i.translater.getComputedPosition();fW(t,n,a,s)&&i.hooks.trigger(i.hooks.eventTypes.move,a),i.pending||(i.callStopWhenPending?i.callStopWhenPending=!1:i.hooks.trigger(i.hooks.eventTypes.end,a)),s=a,i.pending&&(i.timer=Ob(o))};this.callStopWhenPending&&this.setCallStop(!1),Ca(this.timer),o()},e.prototype.transitionTime=function(t){t===void 0&&(t=0),this.style[Ht.transitionDuration]=t+"ms",this.hooks.trigger(this.hooks.eventTypes.time,t)},e.prototype.transitionTimingFunction=function(t){this.style[Ht.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},e.prototype.transitionProperty=function(){this.style[Ht.transitionProperty]=Ht.transform},e.prototype.move=function(t,n,i,s){this.setPending(i>0),this.transitionTimingFunction(s),this.transitionProperty(),this.transitionTime(i),this.translate(n);var o=this.options.probeType===3;i&&o&&this.startProbe(t,n),i||(this._reflow=this.content.offsetHeight,o&&this.hooks.trigger(this.hooks.eventTypes.move,n),this.hooks.trigger(this.hooks.eventTypes.end,n))},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),Ca(this.timer);var n=this.translater.getComputedPosition(),i=n.x,s=n.y;this.transitionTime(),this.translate({x:i,y:s}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:i,y:s})}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(y3),mW=function(r){l0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.move=function(t,n,i,s){if(!i){this.translate(n),this.options.probeType===3&&this.hooks.trigger(this.hooks.eventTypes.move,n),this.hooks.trigger(this.hooks.eventTypes.end,n);return}this.animate(t,n,i,s)},e.prototype.animate=function(t,n,i,s){var o=this,a=Xn(),l=a+i,u=this.options.probeType===3,h=function(){var c=Xn();if(c>=l){o.translate(n),u&&o.hooks.trigger(o.hooks.eventTypes.move,n),o.hooks.trigger(o.hooks.eventTypes.end,n);return}c=(c-a)/i;var d=s(c),f={};Object.keys(n).forEach(function(g){var v=t[g],x=n[g];f[g]=(x-v)*d+v}),o.translate(f),u&&o.hooks.trigger(o.hooks.eventTypes.move,f),o.pending&&(o.timer=Ob(h)),o.pending||(o.callStopWhenPending?o.callStopWhenPending=!1:o.hooks.trigger(o.hooks.eventTypes.end,n))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),Ca(this.timer),h()},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),Ca(this.timer);var n=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,n)}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(y3);function gW(r,e,t){var n=t.useTransition,i={};return Object.defineProperty(i,"probeType",{enumerable:!0,configurable:!1,get:function(){return t.probeType}}),n?new pW(r,e,i):new mW(r,e,i)}var oA=function(){function r(e,t,n){this.wrapper=e,this.options=n,this.hooks=new Po(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(t)}return r.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},r.prototype.move=function(e){return e=this.hasScroll?e:0,this.setMovingDirection(e),this.performDampingAlgorithm(e,this.options.outOfBoundaryDampingFactor)},r.prototype.setMovingDirection=function(e){this.movingDirection=e>0?-1:e<0?1:0},r.prototype.setDirection=function(e){this.direction=e>0?-1:e<0?1:0},r.prototype.performDampingAlgorithm=function(e,t){var n=this.currentPos+e;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?n=this.currentPos+e*t:n=n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},r.prototype.end=function(e){var t={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&e<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var i=this.direction===-1&&this.options.bounces[0]||this.direction===1&&this.options.bounces[1]?this.wrapperSize:0;t=this.hasScroll?this.momentum(this.currentPos,this.startPos,e,this.maxScrollPos,this.minScrollPos,i,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,t);return t},r.prototype.momentum=function(e,t,n,i,s,o,a){a===void 0&&(a=this.options);var l=e-t,u=Math.abs(l)/n,h=a.deceleration,c=a.swipeBounceTime,d=a.swipeTime,f=Math.min(d,u*2/h),g={destination:e+u*u/h*(l<0?-1:1),duration:f,rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,g,l),g.destination<i?(g.destination=o?Math.max(i-o/4,i-o/g.rate*u):i,g.duration=c):g.destination>s&&(g.destination=o?Math.min(s+o/4,s+o/g.rate*u):s,g.duration=c),g.destination=Math.round(g.destination),g},r.prototype.updateDirection=function(){var e=this.currentPos-this.absStartPos;this.setDirection(e)},r.prototype.refresh=function(e){var t=this.options.rect,n=t.size,i=t.position,s=window.getComputedStyle(this.wrapper,null).position==="static",o=Sl(this.wrapper);this.wrapperSize=this.wrapper[n==="width"?"clientWidth":"clientHeight"],this.setContent(e);var a=Sl(this.content);this.contentSize=a[n],this.relativeOffset=a[i],s&&(this.relativeOffset-=o[i]),this.computeBoundary(),this.setDirection(0)},r.prototype.setContent=function(e){e!==this.content&&(this.content=e,this.resetState())},r.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},r.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var e={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};e.maxScrollPos<0&&(e.maxScrollPos-=this.relativeOffset,this.options.specifiedIndexAsContent===0&&(e.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,e),this.minScrollPos=e.minScrollPos,this.maxScrollPos=e.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},r.prototype.updatePosition=function(e){this.currentPos=e},r.prototype.getCurrentPos=function(){return this.currentPos},r.prototype.checkInBoundary=function(){var e=this.adjustPosition(this.currentPos),t=e===this.getCurrentPos();return{position:e,inBoundary:t}},r.prototype.adjustPosition=function(e){return!this.hasScroll&&!this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?e=this.minScrollPos:e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos),e},r.prototype.updateStartPos=function(){this.startPos=this.currentPos},r.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},r.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},r.prototype.getAbsDist=function(e){return this.dist+=e,Math.abs(this.dist)},r.prototype.destroy=function(){this.hooks.destroy()},r}(),Sp,Tp,Ep,Cp,aA=(Sp={},Sp.yes=function(r){return!0},Sp.no=function(r){return fl(r),!1},Sp),vW=(Tp={},Tp.horizontal=(Ep={},Ep.yes="horizontal",Ep.no="vertical",Ep),Tp.vertical=(Cp={},Cp.yes="vertical",Cp.no="horizontal",Cp),Tp),yW=function(){function r(e,t,n){this.directionLockThreshold=e,this.freeScroll=t,this.eventPassthrough=n,this.reset()}return r.prototype.reset=function(){this.directionLocked=""},r.prototype.checkMovingDirection=function(e,t,n){return this.computeDirectionLock(e,t),this.handleEventPassthrough(n)},r.prototype.adjustDelta=function(e,t){return this.directionLocked==="horizontal"?t=0:this.directionLocked==="vertical"&&(e=0),{deltaX:e,deltaY:t}},r.prototype.computeDirectionLock=function(e,t){this.directionLocked===""&&!this.freeScroll&&(e>t+this.directionLockThreshold?this.directionLocked="horizontal":t>=e+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},r.prototype.handleEventPassthrough=function(e){var t=vW[this.directionLocked];if(t){if(this.eventPassthrough===t.yes)return aA.yes(e);if(this.eventPassthrough===t.no)return aA.no(e)}return!1},r}(),xW=function(r,e,t){return t===2?[e,-r]:t===3?[-r,-e]:t===4?[-e,r]:[r,e]},_W=function(){function r(e,t,n,i,s){this.hooks=new Po(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=e,this.scrollBehaviorY=t,this.actionsHandler=n,this.animater=i,this.options=s,this.directionLockAction=new yW(s.directionLockThreshold,s.freeScroll,s.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return r.prototype.bindActionsHandler=function(){var e=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,function(t){return e.enabled?e.handleStart(t):!0}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,function(t){var n=t.deltaX,i=t.deltaY,s=t.e;if(!e.enabled)return!0;var o=xW(n,i,e.options.quadrant),a=o[0],l=o[1],u={deltaX:a,deltaY:l};return e.hooks.trigger(e.hooks.eventTypes.coordinateTransformation,u),e.handleMove(u.deltaX,u.deltaY,s)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,function(t){return e.enabled?e.handleEnd(t):!0}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,function(t){e.enabled&&!t._constructed&&e.handleClick(t)})},r.prototype.handleStart=function(e){var t=Xn();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=t,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,e)},r.prototype.handleMove=function(e,t,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var i=this.scrollBehaviorX.getAbsDist(e),s=this.scrollBehaviorY.getAbsDist(t),o=Xn();if(this.checkMomentum(i,s,o))return!0;if(this.directionLockAction.checkMovingDirection(i,s,n))return this.actionsHandler.setInitiated(),!0;var a=this.directionLockAction.adjustDelta(e,t),l=this.scrollBehaviorX.getCurrentPos(),u=this.scrollBehaviorX.move(a.deltaX),h=this.scrollBehaviorY.getCurrentPos(),c=this.scrollBehaviorY.move(a.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var d=u!==l||c!==h;!this.contentMoved&&!d&&this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&d&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&d&&(this.animater.translate({x:u,y:c}),this.dispatchScroll(o))}}},r.prototype.dispatchScroll=function(e){e-this.startTime>this.options.momentumLimitTime&&(this.startTime=e,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),this.options.probeType===1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},r.prototype.checkMomentum=function(e,t,n){return n-this.endTime>this.options.momentumLimitTime&&t<this.options.momentumLimitDistance&&e<this.options.momentumLimitDistance},r.prototype.handleEnd=function(e){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,e)){var t=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,e,t))return!0;t=this.ensureIntegerPos(t),this.animater.translate(t),this.endTime=Xn();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,t,n)}},r.prototype.ensureIntegerPos=function(e){this.ensuringInteger=!0;var t=e.x,n=e.y,i=this.scrollBehaviorX,s=i.minScrollPos,o=i.maxScrollPos,a=this.scrollBehaviorY,l=a.minScrollPos,u=a.maxScrollPos;return t=t>0?Math.ceil(t):Math.floor(t),n=n>0?Math.ceil(n):Math.floor(n),t=ir(t,o,s),n=ir(n,u,l),{x:t,y:n}},r.prototype.handleClick=function(e){gc(e.target,this.options.preventDefaultException)||(fl(e),e.stopPropagation())},r.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},r.prototype.refresh=function(){this.endTime=0},r.prototype.destroy=function(){this.hooks.destroy()},r}();function wW(r){var e=["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce(function(t,n){return t[n]=r[n],t},{});return e}function lA(r,e,t,n){var i=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce(function(s,o){return s[o]=r[o],s},{});return i.scrollable=!!r[e],i.bounces=t,i.rect=n,i}function C_(r,e,t){t.forEach(function(n){var i,s;typeof n=="string"?i=s=n:(i=n.source,s=n.target),r.on(i,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return e.trigger.apply(e,lg([s],o))})})}function bW(r,e){for(var t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];if(r[s]!==e[s])return!1}return!0}var uA=1,SW=function(){function r(e,t,n){this.wrapper=e,this.content=t,this.resizeTimeout=0,this.hooks=new Po(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var i=this.options.bounce,s=i.left,o=i.right,a=i.top,l=i.bottom;this.scrollBehaviorX=new oA(e,t,lA(n,"scrollX",[s,o],{size:"width",position:"left"})),this.scrollBehaviorY=new oA(e,t,lA(n,"scrollY",[a,l],{size:"height",position:"top"})),this.translater=new dW(this.content),this.animater=gW(this.content,this.translater,this.options),this.actionsHandler=new hW(this.options.bindToTarget?this.content:e,wW(this.options)),this.actions=new _W(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var u=this.resize.bind(this);this.resizeRegister=new Tn(window,[{name:"orientationchange",handler:u},{name:"resize",handler:u}]),this.registerTransitionEnd(),this.init()}return r.prototype.init=function(){var e=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,function(){e.togglePointerEvents(!0)})},r.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new Tn(this.content,[{name:Ht.transitionEnd,handler:this.transitionEnd.bind(this)}])},r.prototype.bindTranslater=function(){var e=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,function(n){e.options.translateZ&&n.push(e.options.translateZ)}),t.on(t.eventTypes.translate,function(n){var i=e.getCurrentPos();if(e.updatePositions(n),e.actions.ensuringInteger===!0){e.actions.ensuringInteger=!1;return}(n.x!==i.x||n.y!==i.y)&&e.togglePointerEvents(!1)})},r.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))}),C_(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},r.prototype.bindActions=function(){var e=this,t=this.actions;C_(t.hooks,this.hooks,[{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:t.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:t.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:t.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:t.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),t.hooks.on(t.hooks.eventTypes.end,function(n,i){if(e.hooks.trigger(e.hooks.eventTypes.touchEnd,i),e.hooks.trigger(e.hooks.eventTypes.end,i)||!t.fingerMoved&&(e.hooks.trigger(e.hooks.eventTypes.scrollCancel),e.checkClick(n)))return!0;if(e.resetPosition(e.options.bounceTime,Or.bounce))return e.animater.setForceStopped(!1),!0}),t.hooks.on(t.hooks.eventTypes.scrollEnd,function(n,i){var s=Math.abs(n.x-e.scrollBehaviorX.startPos),o=Math.abs(n.y-e.scrollBehaviorY.startPos);if(e.checkFlick(i,s,o)){e.animater.setForceStopped(!1),e.hooks.trigger(e.hooks.eventTypes.flick);return}if(e.momentum(n,i)){e.animater.setForceStopped(!1);return}t.contentMoved&&e.hooks.trigger(e.hooks.eventTypes.scrollEnd,n),e.animater.forceStopped&&e.animater.setForceStopped(!1)})},r.prototype.checkFlick=function(e,t,n){var i=1;if(this.hooks.events.flick.length>1&&e<this.options.flickLimitTime&&t<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>i||t>i))return!0},r.prototype.momentum=function(e,t){var n={time:0,easing:Or.swiper,newX:e.x,newY:e.y},i=this.scrollBehaviorX.end(t),s=this.scrollBehaviorY.end(t);if(n.newX=E_(i.destination)?n.newX:i.destination,n.newY=E_(s.destination)?n.newY:s.destination,n.time=Math.max(i.duration,s.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==e.x||n.newY!==e.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=Or.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},r.prototype.checkClick=function(e){var t={preventClick:this.animater.forceStopped};if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!t.preventClick){var n=this.options.dblclick,i=!1;if(n&&this.lastClickTime){var s=n.delay,o=s===void 0?300:s;Xn()-this.lastClickTime<o&&(i=!0,JG(e))}return this.options.tap&&ZG(e,this.options.tap),this.options.click&&!gc(e.target,this.options.preventDefaultException)&&g3(e),this.lastClickTime=i?null:Xn(),!0}return!1},r.prototype.resize=function(){var e=this;this.actions.enabled&&(jG&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){e.hooks.trigger(e.hooks.eventTypes.resize)},this.options.resizePolling))},r.prototype.transitionEnd=function(e){if(!(e.target!==this.content||!this.animater.pending)){var t=this.animater;t.transitionTime(),this.resetPosition(this.options.bounceTime,Or.bounce)||(this.animater.setPending(!1),this.options.probeType!==3&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos()))}},r.prototype.togglePointerEvents=function(e){e===void 0&&(e=!0);for(var t=this.content.children.length?this.content.children:[this.content],n=e?"auto":"none",i=0;i<t.length;i++){var s=t[i];s.isBScrollContainer||(s.style.pointerEvents=n)}},r.prototype.refresh=function(e){var t=this.setContent(e);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(e),this.scrollBehaviorY.refresh(e),t&&(this.translater.setContent(e),this.animater.setContent(e),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(e)),this.actions.refresh(),this.wrapperOffset=nA(this.wrapper)},r.prototype.setContent=function(e){var t=e!==this.content;return t&&(this.content=e),t},r.prototype.scrollBy=function(e,t,n,i){n===void 0&&(n=0);var s=this.getCurrentPos(),o=s.x,a=s.y;i=i||Or.bounce,e+=o,t+=a,this.scrollTo(e,t,n,i)},r.prototype.scrollTo=function(e,t,n,i,s){n===void 0&&(n=0),i===void 0&&(i=Or.bounce),s===void 0&&(s={start:{},end:{}});var o=this.options.useTransition?i.style:i.fn,a=this.getCurrentPos(),l=Ji({x:a.x,y:a.y},s.start),u=Ji({x:e,y:t},s.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,u),!bW(l,u)){var h=Math.abs(u.x-l.x),c=Math.abs(u.y-l.y);h<uA&&c<uA&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(l,u,n,o)}},r.prototype.scrollToElement=function(e,t,n,i,s){var o=p3(e),a=nA(o),l=function(h,c,d){return typeof h=="number"?h:h?Math.round(c/2-d/2):0};n=l(n,o.offsetWidth,this.wrapper.offsetWidth),i=l(i,o.offsetHeight,this.wrapper.offsetHeight);var u=function(h,c,d,f){return h-=c,h=f.adjustPosition(h-d),h};a.left=u(a.left,this.wrapperOffset.left,n,this.scrollBehaviorX),a.top=u(a.top,this.wrapperOffset.top,i,this.scrollBehaviorY),!this.hooks.trigger(this.hooks.eventTypes.scrollToElement,o,a)&&this.scrollTo(a.left,a.top,t,s)},r.prototype.resetPosition=function(e,t){e===void 0&&(e=0),t===void 0&&(t=Or.bounce);var n=this.scrollBehaviorX.checkInBoundary(),i=n.position,s=n.inBoundary,o=this.scrollBehaviorY.checkInBoundary(),a=o.position,l=o.inBoundary;return s&&l?!1:(XG&&this.reflow(),this.scrollTo(i,a,e,t),!0)},r.prototype.reflow=function(){this._reflow=this.content.offsetHeight},r.prototype.updatePositions=function(e){this.scrollBehaviorX.updatePosition(e.x),this.scrollBehaviorY.updatePosition(e.y)},r.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},r.prototype.enable=function(){this.actions.enabled=!0},r.prototype.disable=function(){Ca(this.animater.timer),this.actions.enabled=!1},r.prototype.destroy=function(){var e=this,t=["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"];t.forEach(function(n){return e[n].destroy()})},r}(),u0=function(r){l0(e,r);function e(t,n){var i=r.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,s=p3(t);return s?(i.plugins={},i.options=new cW().merge(n).process(),i.setContent(s).valid&&(i.hooks=new Po(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),i.init(s)),i):(Wi("Can not resolve the wrapper DOM."),i)}return e.use=function(t){var n=t.pluginName,i=e.plugins.some(function(s){return t===s.ctor});return i?e:E_(n)?(Wi("Plugin Class must specify plugin's name in static property by 'pluginName' field."),e):(e.pluginsMap[n]=!0,e.plugins.push({name:n,applyOrder:t.applyOrder,ctor:t}),e)},e.prototype.setContent=function(t){var n=!1,i=!0,s=t.children[this.options.specifiedIndexAsContent];return s?(n=this.content!==s,n&&(this.content=s)):(Wi("The wrapper need at least one child element to be content element to scroll."),i=!1),{valid:i,contentChanged:n}},e.prototype.init=function(t){var n=this;this.wrapper=t,t.isBScrollContainer=!0,this.scroller=new SW(t,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,function(){n.refresh()}),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(DG),this.applyPlugins(),this.refreshWithoutReset(this.content);var i=this.options,s=i.startX,o=i.startY,a={x:s,y:o};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,a)||this.scroller.scrollTo(a.x,a.y)},e.prototype.applyPlugins=function(){var t=this,n=this.options;e.plugins.sort(function(i,s){var o,a=(o={},o.pre=-1,o.post=1,o),l=i.applyOrder?a[i.applyOrder]:0,u=s.applyOrder?a[s.applyOrder]:0;return l-u}).forEach(function(i){var s=i.ctor;n[i.name]&&typeof s=="function"&&(t.plugins[i.name]=new s(t))})},e.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,function(){var t=document.activeElement;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA")&&t.blur()})},e.prototype.eventBubbling=function(){C_(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},e.prototype.refreshWithoutReset=function(t){this.scroller.refresh(t),this.hooks.trigger(this.hooks.eventTypes.refresh,t),this.trigger(this.eventTypes.refresh,t)},e.prototype.proxy=function(t){var n=this;t.forEach(function(i){var s=i.key,o=i.sourceKey;lW(n,o,s)})},e.prototype.refresh=function(){var t=this.setContent(this.wrapper),n=t.contentChanged,i=t.valid;if(i){var s=this.content;this.refreshWithoutReset(s),n&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,s),this.trigger(this.eventTypes.contentChanged,s)),this.scroller.resetPosition()}},e.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},e.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},e.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},e.prototype.eventRegister=function(t){this.registerType(t)},e.plugins=[],e.pluginsMap={},e}(Po);function c0(r,e){var t=new u0(r,e);return t}c0.use=u0.use;c0.plugins=u0.plugins;c0.pluginsMap=u0.pluginsMap;var vc=c0,TW=function(){function r(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},r.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.mouseWheel===!0?{}:this.scroll.options.mouseWheel,t={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=qr(t,e)},r.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.registerEvent=function(){this.eventRegister=new Tn(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},r.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},r.prototype.cleanCache=function(){this.deltaCache=[]},r.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,s=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var o=this.deltaCache.reduce(function(f,g){return{x:f.x+g.x,y:f.y+g.y}},{x:0,y:0});this.cleanCache();var a=this.scroll.scroller,l=a.scrollBehaviorX,u=a.scrollBehaviorY;l.setMovingDirection(-e.directionX),u.setMovingDirection(-e.directionY),l.setDirection(e.x),u.setDirection(e.y);var h=l.performDampingAlgorithm(Math.round(e.x)+o.x,s),c=u.performDampingAlgorithm(Math.round(e.y)+o.x,s);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:h,y:c})){var d=this.getEaseTime();(h!==this.scroll.x||c!==this.scroll.y)&&this.scroll.scrollTo(h,c,d)}i&&(this.wheelMoveTimer=window.setTimeout(function(){t.wheelMoveTimer=0},i))}},r.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)},this.mouseWheelOpt.discreteTime)},r.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=t.invert,s=0,o=0,a=i?-1:1;switch(!0){case"deltaX"in e:e.deltaMode===1?(s=-e.deltaX*n,o=-e.deltaY*n):(s=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:s=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:s=o=e.wheelDelta/120*n;break;case"detail"in e:s=o=-e.detail/3*n;break}s*=a,o*=a,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(s)&&(s=o),o=0),this.scroll.hasHorizontalScroll||(s=0);var l=s>0?-1:s<0?1:0,u=o>0?-1:o<0?1:0;return{x:s,y:o,directionX:l,directionY:u}},r.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,s=t.preventDefaultException;n&&!gc(e.target,s)&&fl(e),i&&e.stopPropagation()},r.prototype.getEaseTime=function(){var e=100,t=this.mouseWheelOpt.easeTime;return t<e&&Wi("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,e)},r.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})},r.pluginName="mouseWheel",r.applyOrder="pre",r}(),EW=function(){function r(e){this.scroll=e,this.stopObserver=!1,this.init()}return r.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},r.prototype.handleMutationObserver=function(){var e=this;if(typeof MutationObserver<"u"){var t=0;this.observer=new MutationObserver(function(n){e.mutationObserverHandler(n,t)}),this.startObserve(this.observer)}else this.checkDOMUpdate()},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.stopObserve(),e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,function(){e.stopObserver&&e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,function(){e.stopObserve()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){e.destroy()})},r.prototype.mutationObserverHandler=function(e,t){var n=this;if(!this.shouldNotRefresh()){for(var i=!1,s=!1,o=0;o<e.length;o++){var a=e[o];if(a.type!=="attributes"){i=!0;break}else if(a.target!==this.scroll.scroller.content){s=!0;break}}i?this.scroll.refresh():s&&(clearTimeout(t),t=window.setTimeout(function(){n.shouldNotRefresh()||n.scroll.refresh()},60))}},r.prototype.startObserve=function(e){var t={attributes:!0,childList:!0,subtree:!0};e.observe(this.scroll.scroller.content,t)},r.prototype.shouldNotRefresh=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos>t.minScrollPos||t.currentPos<t.maxScrollPos||n.currentPos>n.minScrollPos||n.currentPos<n.maxScrollPos;return e.animater.pending||i},r.prototype.checkDOMUpdate=function(){var e=this,t=this.scroll.scroller.content,n=Sl(t),i=n.width,s=n.height,o=function(){if(!e.stopObserver){n=Sl(t);var l=n.width,u=n.height;(i!==l||s!==u)&&e.scroll.refresh(),i=l,s=u,a()}},a=function(){setTimeout(function(){o()},1e3)};a()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},r.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.pluginName="observeDOM",r}(),CW="plugins.pullDownRefresh",PW=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}],AW=PW.map(function(r){return{key:r.key,sourceKey:CW+"."+r.name}}),r1="pullingDown",cA="enterThreshold",hA="leaveThreshold",kW=function(){function r(e){this.scroll=e,this.pulling=0,this.thresholdBoundary=0,this.init()}return r.prototype.setPulling=function(e){this.pulling=e},r.prototype.setThresholdBoundary=function(e){this.thresholdBoundary=e},r.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},r.prototype.handleBScroll=function(){this.scroll.registerType([r1,cA,hA]),this.scroll.proxy(AW)},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={threshold:90,stop:40};this.options=qr(t,e),this.scroll.options.probeType=3},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=n.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.finishPullDown()}),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,function(i){i.maxScrollPos>0&&(i.maxScrollPos=-1),i.minScrollPos=e.currentMinScrollY}),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,function(i){var s=300,o=350;i.discreteTime=s,i.easeTime=o}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(){t.hooks.trigger(t.hooks.eventTypes.end)}))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},r.prototype.watch=function(){var e=this.scroll.scroller;this.watching=!0,this.registerHooks(e.hooks,e.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},r.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},r.prototype.checkLocationOfThresholdBoundary=function(){if(this.pulling===1){var e=this.scroll,t=this.thresholdBoundary!==1&&this.locateInsideThresholdBoundary(),n=this.thresholdBoundary!==2&&!this.locateInsideThresholdBoundary();t&&(this.setThresholdBoundary(1),e.trigger(cA)),n&&(this.setThresholdBoundary(2),e.trigger(hA))}},r.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},r.prototype.unwatch=function(){var e=this.scroll,t=e.scroller;this.watching=!1,t.hooks.off(t.hooks.eventTypes.end,this.checkPullDown),e.off(e.eventTypes.scrollStart,this.resetStateBeforeScrollStart),e.off(e.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&e.off(e.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},r.prototype.checkPullDown=function(){var e=this.options,t=e.threshold,n=e.stop;return this.scroll.y<t?!1:(this.pulling===1&&(this.modifyBehaviorYBoundary(n),this.setPulling(2),this.scroll.trigger(r1)),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,Or.bounce),this.isFetchingStatus())},r.prototype.isFetchingStatus=function(){return this.pulling===2},r.prototype.modifyBehaviorYBoundary=function(e){var t=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=t.minScrollPos,this.currentMinScrollY=e,t.computeBoundary()},r.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var e=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,e.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,Or.bounce)}},r.prototype.openPullDown=function(e){e===void 0&&(e={}),this.handleOptions(e),this.watching||this.watch()},r.prototype.closePullDown=function(){this.unwatch()},r.prototype.autoPullDownRefresh=function(){var e=this.options,t=e.threshold,n=e.stop;this.isFetchingStatus()||!this.watching||(this.modifyBehaviorYBoundary(n),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,t),this.setPulling(2),this.scroll.trigger(r1),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,Or.bounce))},r.pluginName="pullDownRefresh",r}(),IW="plugins.pullUpLoad",MW=[{key:"finishPullUp",name:"finishPullUp"},{key:"openPullUp",name:"openPullUp"},{key:"closePullUp",name:"closePullUp"},{key:"autoPullUpLoad",name:"autoPullUpLoad"}],RW=MW.map(function(r){return{key:r.key,sourceKey:IW+"."+r.name}}),dA="pullingUp",OW=function(){function r(e){this.scroll=e,this.pulling=!1,this.watching=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullUpLoad),this.handleHooks(),this.watch()},r.prototype.handleBScroll=function(){this.scroll.registerType([dA]),this.scroll.proxy(RW)},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={threshold:0};this.options=qr(t,e),this.scroll.options.probeType=3},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller.scrollBehaviorY;this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.finishPullUp()}),this.registerHooks(t.hooks,t.hooks.eventTypes.computeBoundary,function(n){n.maxScrollPos>0&&(n.maxScrollPos=-1)})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.watch=function(){this.watching||(this.watching=!0,this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkPullUp))},r.prototype.unwatch=function(){this.watching=!1,this.scroll.off(this.scroll.eventTypes.scroll,this.checkPullUp)},r.prototype.checkPullUp=function(e){var t=this,n=this.options.threshold;this.scroll.movingDirectionY===1&&e.y<=this.scroll.maxScrollY+n&&(this.pulling=!0,this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){t.pulling=!1}),this.unwatch(),this.scroll.trigger(dA))},r.prototype.finishPullUp=function(){var e=this;this.scroll.scroller.scrollBehaviorY.setMovingDirection(0),this.pulling?this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){e.watch()}):this.watch()},r.prototype.openPullUp=function(e){e===void 0&&(e={}),this.handleOptions(e),this.watch()},r.prototype.closePullUp=function(){this.unwatch()},r.prototype.autoPullUpLoad=function(){var e=this.options.threshold,t=this.scroll.scroller.scrollBehaviorY;if(!(this.pulling||!this.watching)){var n=-1,i=t.maxScrollPos+e+n;this.scroll.scroller.scrollBehaviorY.setMovingDirection(n),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime)}},r.pluginName="pullUpLoad",r}(),NW=function(){function r(e,t){this.indicator=e,this.options=t,this.hooks=new Po(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return r.prototype.registerEvents=function(){var e=this.options,t=e.disableMouse,n=e.disableTouch,i=[],s=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),s.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),s.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new Tn(this.indicator.indicatorEl,i),this.moveEventRegister=new Tn(window,s),this.endEventRegister=new Tn(window,o)},r.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},r.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;fl(e),e.stopPropagation(),this.initiated=!0,this.lastPoint=t[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},r.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t[this.indicator.keysMap.point];fl(e),e.stopPropagation();var i=n-this.lastPoint;this.lastPoint=n,this.hooks.trigger(this.hooks.eventTypes.touchMove,i)}},r.prototype.end=function(e){this.initiated&&(this.initiated=!1,fl(e),e.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},r.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},r}(),FW=function(){function r(e,t){this.scroll=e,this.options=t,this.hooksFn=[],this.wrapper=t.wrapper,this.direction=t.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return r.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},r.prototype.handleHooks=function(){var e=this,t=this.options,n=t.fade,i=t.interactive,s=t.scrollbarTrackClickable,o=this.scroll,a=o.hooks,l=o.scroller.translater.hooks,u=o.scroller.animater.hooks;if(this.registerHooks(a,a.eventTypes.refresh,this.refresh),this.registerHooks(l,l.eventTypes.translate,function(g){var v=e.keysMap.hasScroll;e.scroll[v]&&e.updatePosition(g)}),this.registerHooks(u,u.eventTypes.time,this.transitionTime),this.registerHooks(u,u.eventTypes.timeFunction,this.transitionTimingFunction),n&&(this.registerHooks(o,o.eventTypes.scrollEnd,function(){e.fade()}),this.registerHooks(o,o.eventTypes.scrollStart,function(){e.fade(!0)}),o.eventTypes.mousewheelStart&&o.eventTypes.mousewheelEnd&&(this.registerHooks(o,o.eventTypes.mousewheelStart,function(){e.fade(!0)}),this.registerHooks(o,o.eventTypes.mousewheelMove,function(){e.fade(!0)}),this.registerHooks(o,o.eventTypes.mousewheelEnd,function(){e.fade()}))),i){var h=this.scroll.options,c=h.disableMouse,d=h.disableTouch;this.eventHandler=new NW(this,{disableMouse:c,disableTouch:d});var f=this.eventHandler.hooks;this.registerHooks(f,f.eventTypes.touchStart,this.startHandler),this.registerHooks(f,f.eventTypes.touchMove,this.moveHandler),this.registerHooks(f,f.eventTypes.touchEnd,this.endHandler)}s&&this.bindClick()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.bindClick=function(){var e=this.wrapper;this.clickEventRegister=new Tn(e,[{name:"click",handler:this.handleClick.bind(this)}])},r.prototype.handleClick=function(e){var t=this.calculateclickOffsetPos(e),n=this.scroll,i=n.x,s=n.y;i=this.direction==="horizontal"?t:i,s=this.direction==="vertical"?t:s,this.scroll.scrollTo(i,s,this.options.scrollbarTrackOffsetTime)},r.prototype.calculateclickOffsetPos=function(e){var t=this.keysMap,n=t.point,i=t.domRect,s=this.options.scrollbarTrackOffsetType,o=e[n]-this.wrapperRect[i],a=o<this.currentPos?-1:1,l=0,u=this.currentPos;return s==="step"?l=this.scrollInfo.baseSize*a:(l=0,u=o),this.newPos(u,l,this.scrollInfo)},r.prototype.getKeysMap=function(){return this.direction==="vertical"?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},r.prototype.fade=function(e){var t=this.options,n=t.fadeInTime,i=t.fadeOutTime,s=e?n:i,o=this.wrapper;o.style[Ht.transitionDuration]=s+"ms",o.style.opacity=e?"1":"0"},r.prototype.refresh=function(){var e=this.keysMap.hasScroll,t=this.scroll,n=t.x,i=t.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(t[e])){var s=this.keysMap,o=s.wrapperSize,a=s.scrollerSize,l=s.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[o],t[a],t[l],this.indicatorEl[o]),this.updatePosition({x:n,y:i})}},r.prototype.transitionTime=function(e){e===void 0&&(e=0),this.indicatorEl.style[Ht.transitionDuration]=e+"ms"},r.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[Ht.transitionTimingFunction]=e},r.prototype.canScroll=function(e){return this.wrapper.style.display=e?"block":"none",e},r.prototype.refreshScrollInfo=function(e,t,n,i){var s=Math.max(Math.round(e*e/(t||e||1)),this.options.minSize);this.options.isCustom&&(s=i);var o=e-s,a=o/n;return{baseSize:s,maxScrollPos:o,minScrollPos:0,sizeRatio:a}},r.prototype.updatePosition=function(e){var t=this.caculatePosAndSize(e,this.scrollInfo),n=t.pos,i=t.size;this.refreshStyle(i,n),this.currentPos=n},r.prototype.caculatePosAndSize=function(e,t){var n=this.keysMap.pos,i=t.sizeRatio,s=t.baseSize,o=t.maxScrollPos,a=t.minScrollPos,l=this.options.minSize,u=Math.round(i*e[n]),h;return u<a?(h=Math.max(s+u*3,l),u=a):u>o?(h=Math.max(s-(u-o)*3,l),u=o+s-h):h=s,{pos:u,size:h}},r.prototype.refreshStyle=function(e,t){var n=this.keysMap,i=n.translateProperty,s=n.size,o=this.scroll.options.translateZ;this.indicatorEl.style[s]=e+"px",this.indicatorEl.style[Ht.transform]=i+"("+t+"px)"+o},r.prototype.startHandler=function(){this.moved=!1,this.startTime=Xn(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},r.prototype.moveHandler=function(e){if(!this.moved&&!this.indicatorNotMoved(e)&&(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var t=this.newPos(this.currentPos,e,this.scrollInfo);this.syncBScroll(t)}},r.prototype.endHandler=function(){if(this.moved){var e=this.scroll,t=e.x,n=e.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:n})}},r.prototype.indicatorNotMoved=function(e){var t=this.currentPos,n=this.scrollInfo,i=n.maxScrollPos,s=n.minScrollPos,o=t===s&&e<=0||t===i&&e>=0;return o},r.prototype.syncBScroll=function(e){var t=Xn(),n=this.scroll,i=n.x,s=n.y,o=n.options,a=n.scroller,l=n.maxScrollY,u=n.minScrollY,h=n.maxScrollX,c=n.minScrollX,d=o.probeType,f=o.momentumLimitTime,g={x:i,y:s};this.direction==="vertical"?g.y=ir(e,l,u):g.x=ir(e,h,c),a.translater.translate(g),t-this.startTime>f&&(this.startTime=t,d===1&&a.hooks.trigger(a.hooks.eventTypes.scroll,g)),d>1&&a.hooks.trigger(a.hooks.eventTypes.scroll,g)},r.prototype.newPos=function(e,t,n){var i=n.maxScrollPos,s=n.sizeRatio,o=n.minScrollPos,a=e+t;return a=ir(a,o,i),Math.round(a/s)},r.prototype.destroy=function(){var e=this.options,t=e.interactive,n=e.scrollbarTrackClickable,i=e.isCustom;t&&this.eventHandler.destroy(),n&&this.clickEventRegister.destroy(),i||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],l=s[2];o.off(a,l)}),this.hooksFn.length=0},r}(),BW=function(){function r(e){this.scroll=e,this.handleOptions(),this.createIndicators(),this.handleHooks()}return r.prototype.handleHooks=function(){var e=this,t=this.scroll;t.hooks.on(t.hooks.eventTypes.destroy,function(){for(var n=0,i=e.indicators;n<i.length;n++){var s=i[n];s.destroy()}})},r.prototype.handleOptions=function(){var e=this.scroll.options.scrollbar===!0?{}:this.scroll.options.scrollbar,t={fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300};this.options=qr(t,e)},r.prototype.createIndicators=function(){for(var e,t=this.scroll,n=[],i=["scrollX","scrollY"],s=["horizontal","vertical"],o=this.options.customElements,a=0;a<i.length;a++){var l=i[a];if(t.options[l]){var u=o.shift(),h=s[a],c=!1,d=u||this.createScrollbarElement(h);d!==u?t.wrapper.appendChild(d):c=!0,e=Ji(Ji({wrapper:d,direction:h},this.options),{isCustom:c}),n.push(new FW(t,e))}}this.indicators=n},r.prototype.createScrollbarElement=function(e,t){t===void 0&&(t=this.options.scrollbarTrackClickable);var n=document.createElement("div"),i=document.createElement("div");return n.style.cssText="position:absolute;z-index:9999;overflow:hidden;",i.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",i.className="bscroll-indicator",e==="horizontal"?(n.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",i.style.height="100%",n.className="bscroll-horizontal-scrollbar"):(n.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",i.style.width="100%",n.className="bscroll-vertical-scrollbar"),t||(n.style.cssText+="pointer-events:none;"),n.appendChild(i),n},r.pluginName="scrollbar",r}(),x3={pageX:0,pageY:0,x:0,y:0},LW={x:0,y:0,width:0,height:0,cx:0,cy:0},DW=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY;this.wrapperWidth=t.wrapperSize,this.wrapperHeight=n.wrapperSize,this.scrollerHeight=n.contentSize,this.scrollerWidth=t.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},r.prototype.getPageStats=function(e,t){return this.pages[e]&&this.pages[e][t]?this.pages[e][t]:LW},r.prototype.getNearestPageIndex=function(e,t){for(var n=0,i=0,s=this.pages.length;n<s-1&&!(e>=this.pages[n][0].cx);n++);for(s=this.pages[n]?this.pages[n].length:0;i<s-1&&!(t>=this.pages[0][i].cy);i++);return{pageX:n,pageY:i}},r.prototype.buildPagesMatrix=function(e,t){var n=[],i=0,s,o,a,l=0,u,h=this.scroll.scroller.scrollBehaviorX.maxScrollPos,c=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(o=Math.round(e/2),a=Math.round(t/2);i>-this.scrollerWidth;){for(n[l]=[],u=0,s=0;s>-this.scrollerHeight;)n[l][u]={x:Math.max(i,h),y:Math.max(s,c),width:e,height:t,cx:i-o,cy:s-a},s-=t,u++;i-=e,l++}return n},r}(),UW=function(){function r(e,t){this.scroll=e,this.slideOptions=t,this.slideX=!1,this.slideY=!1,this.currentPage=qr({},x3)}return r.prototype.refresh=function(){this.pagesMatrix=new DW(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},r.prototype.getAdjustedCurrentPage=function(){var e=this.currentPage,t=e.pageX,n=e.pageY;t=Math.min(t,this.pagesMatrix.pageLengthOfX-1),n=Math.min(n,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(t=Math.min(t,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(n=Math.min(n,this.pagesMatrix.pageLengthOfY-2));var i=this.pagesMatrix.getPageStats(t,n),s=i.x,o=i.y;return{pageX:t,pageY:n,x:s,y:o}},r.prototype.setCurrentPage=function(e){this.currentPage=e},r.prototype.getInternalPage=function(e,t){e>=this.pagesMatrix.pageLengthOfX?e=this.pagesMatrix.pageLengthOfX-1:e<0&&(e=0),t>=this.pagesMatrix.pageLengthOfY?t=this.pagesMatrix.pageLengthOfY-1:t<0&&(t=0);var n=this.pagesMatrix.getPageStats(e,t),i=n.x,s=n.y;return{pageX:e,pageY:t,x:i,y:s}},r.prototype.getInitialPage=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=this.slideOptions,i=n.startPageXIndex,s=n.startPageYIndex,o=this.loopX?1:0,a=this.loopY?1:0,l=e?o:this.currentPage.pageX,u=e?a:this.currentPage.pageY;t?(l=this.loopX?i+1:i,u=this.loopY?s+1:s):(l=e?o:this.currentPage.pageX,u=e?a:this.currentPage.pageY);var h=this.pagesMatrix.getPageStats(l,u),c=h.x,d=h.y;return{pageX:l,pageY:u,x:c,y:d}},r.prototype.getExposedPage=function(e){var t=qr({},e);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},r.prototype.getExposedPageByPageIndex=function(e,t){var n={pageX:e,pageY:t};this.loopX&&(n.pageX=e+1),this.loopY&&(n.pageY=t+1);var i=this.pagesMatrix.getPageStats(n.pageX,n.pageY),s=i.x,o=i.y;return{x:s,y:o,pageX:e,pageY:t}},r.prototype.getWillChangedPage=function(e){return e=qr({},e),this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2),e.x=this.pagesMatrix.getPageStats(e.pageX+1,0).x),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2),e.y=this.pagesMatrix.getPageStats(0,e.pageY+1).y),e},r.prototype.fixedPage=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},r.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},r.prototype.getValidPageIndex=function(e,t){var n=this.pagesMatrix.pageLengthOfX-1,i=this.pagesMatrix.pageLengthOfY-1,s=0,o=0;return this.loopX&&(e+=1,s=s+1,n=n-1),this.loopY&&(t+=1,o=o+1,i=i-1),e=ir(e,s,n),t=ir(t,o,i),{pageX:e,pageY:t}},r.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},r.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},r.prototype.getNearestPage=function(e,t){var n=this.pagesMatrix.getNearestPageIndex(e,t),i=n.pageX,s=n.pageY,o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.getPageByDirection=function(e,t,n){var i=e.pageX,s=e.pageY;i===this.currentPage.pageX&&(i=ir(i+t,0,this.pagesMatrix.pageLengthOfX-1)),s===this.currentPage.pageY&&(s=ir(s+n,0,this.pagesMatrix.pageLengthOfY-1));var o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.resetLoopPage=function(){if(this.loopX){if(this.currentPage.pageX===0)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(this.currentPage.pageY===0)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},r.prototype.getPageIndexByDirection=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t=e==="negative"?t-1:t+1),this.slideY&&(n=e==="negative"?n-1:n+1),{pageX:t,pageY:n}},r.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&Wi("slide does not support two direction at the same time.")},r}(),jW="plugins.slide",XW=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],HW=XW.map(function(r){return{key:r.key,sourceKey:jW+"."+r.name}}),$W=function(r,e){return r.pageX===e.pageX&&r.pageY===e.pageY},zW=function(){function r(e){this.scroll=e,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return r.prototype.satisfyInitialization=function(){return this.scroll.scroller.content.children.length<=0?(Wi("slide need at least one slide page to be initialised.please check your DOM layout."),!1):!0},r.prototype.init=function(){this.willChangeToPage=qr({},x3),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},r.prototype.createPages=function(){this.pages=new UW(this.scroll,this.options)},r.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(HW)},r.prototype.handleOptions=function(){var e=this.scroll.options.slide===!0?{}:this.scroll.options.slide,t={loop:!0,threshold:.1,speed:400,easing:Or.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0};this.options=qr(t,e)},r.prototype.handleLoop=function(e){var t=this.options.loop,n=this.scroll.scroller.content,i=n.children.length;t&&(n!==e?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(e),i>1&&this.cloneFirstAndLastSlidePage(n)):i===3&&this.initialised?(this.removeClonedSlidePage(n),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):i>1?(this.initialised&&this.cachedClonedPageDOM.length===0?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(n),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(n)):this.resetLoopChangedStatus())},r.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,n=this.scroll.scroller.hooks,i=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,function(){return!0}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(s){(s.directionX===1||s.directionY===1)&&e.next(),(s.directionX===-1||s.directionY===-1)&&e.prev()})),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(n,n.eventTypes.beforeRefresh,function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()}),this.registerHooks(n,n.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(n,n.eventTypes.scroll,this.scrollHandler),this.registerHooks(n,n.eventTypes.checkClick,this.startPlay),i&&this.registerHooks(n,n.eventTypes.flick,this.flickHandler)},r.prototype.startPlay=function(){var e=this,t=this.options,n=t.interval,i=t.autoplay;i&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout(function(){e.next()},n))},r.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},r.prototype.setSlideInlineStyle=function(){var e=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],t=this.scroll.scroller,n=t.content,i=t.wrapper,s=this.scroll.options;e.forEach(function(o){var a=o.direction,l=o.sizeType,u=o.styleType;if(s[a]){for(var h=i[l],c=n.children,d=c.length,f=0;f<d;f++){var g=c[f];g.style[u]=h+"px"}n.style[u]=h*d+"px"}})},r.prototype.next=function(e,t){var n=this.pages.nextPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.prev=function(e,t){var n=this.pages.prevPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.goToPage=function(e,t,n,i){var s=this.pages.getValidPageIndex(e,t);this.goTo(s.pageX,s.pageY,n,i)},r.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},r.prototype.setCurrentPage=function(e){this.pages.setCurrentPage(e),this.exposedPage=this.pages.getExposedPage(e)},r.prototype.nearestPage=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=i.maxScrollPos,a=i.minScrollPos,l=s.maxScrollPos,u=s.minScrollPos;return this.pages.getNearestPage(ir(e,o,a),ir(t,l,u))},r.prototype.satisfyThreshold=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=!0;return Math.abs(e-i.absStartPos)<=this.thresholdX&&Math.abs(t-s.absStartPos)<=this.thresholdY&&(o=!1),o},r.prototype.refreshHandler=function(e){var t=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var n=this.contentChanged=this.prevContent!==e;n&&(this.prevContent=e);var i=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,n||!this.initialised);this.initialised?this.goTo(i.pageX,i.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(s){t.initialised=!0,s.x=i.x,s.y=i.y}),this.startPlay()}},r.prototype.computeThreshold=function(){var e=this.options.threshold;if(e%1===0)this.thresholdX=e,this.thresholdY=e;else{var t=this.pages.getPageStats(),n=t.width,i=t.height;this.thresholdX=Math.round(n*e),this.thresholdY=Math.round(i*e)}},r.prototype.cloneFirstAndLastSlidePage=function(e){var t=e.children,n=t[t.length-1].cloneNode(!0),i=t[0].cloneNode(!0);eW(n,e),e.appendChild(i),this.cachedClonedPageDOM=[n,i]},r.prototype.removeClonedSlidePage=function(e){var t=e&&e.children||[];t.length&&this.cachedClonedPageDOM.forEach(function(n){rW(e,n)}),this.cachedClonedPageDOM=[]},r.prototype.modifyCurrentPage=function(e){var t=this.getCurrentPage(),n=t.pageX,i=t.pageY,s=this.nearestPage(e.x,e.y);if(this.setCurrentPage(s),this.contentChanged)return this.contentChanged=!1,!0;var o=this.getCurrentPage(),a=o.pageX,l=o.pageY;if(this.pageWillChangeTo(s),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&n===0&&i===0)return this.moreToOnePageInLoop=!1,!0;if(n!==a||i!==l){var u=this.pages.getExposedPageByPageIndex(a,l);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,u)}if(this.resetLooping){this.resetLooping=!1;return}var h=this.pages.resetLoopPage();if(h)return this.resetLooping=!0,this.goTo(h.pageX,h.pageY,0),!0},r.prototype.goTo=function(e,t,n,i){var s=this.pages.getInternalPage(e,t),o=i||this.options.easing||Or.bounce,a=s.x,l=s.y,u=a-this.scroll.scroller.scrollBehaviorX.currentPos,h=l-this.scroll.scroller.scrollBehaviorY.currentPos;if(!u&&!h){this.scroll.scroller.togglePointerEvents(!0);return}n=n===void 0?this.getEaseTime(u,h):n,this.scroll.scroller.scrollTo(a,l,n,o)},r.prototype.flickHandler=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos,s=t.startPos,o=t.direction,a=n.currentPos,l=n.startPos,u=n.direction,h=this.pages.currentPage,c=h.pageX,d=h.pageY,f=this.getEaseTime(i-s,a-l);this.goTo(c+o,d+u,f)},r.prototype.getEaseTime=function(e,t){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},r.prototype.modifyScrollMetaHandler=function(e){var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=t.animater,o=e.newX,a=e.newY,l=this.satisfyThreshold(o,a)||s.forceStopped?this.pages.getPageByDirection(this.nearestPage(o,a),n.direction,i.direction):this.pages.currentPage;e.time=this.getEaseTime(e.newX-l.x,e.newY-l.y),e.newX=l.x,e.newY=l.y,e.easing=this.options.easing||Or.bounce},r.prototype.scrollHandler=function(e){var t=e.x,n=e.y;if(this.satisfyThreshold(t,n)){var i=this.nearestPage(t,n);this.pageWillChangeTo(i)}},r.prototype.pageWillChangeTo=function(e){var t=this.pages.getWillChangedPage(e);$W(this.willChangeToPage,t)||(this.willChangeToPage=t,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){var e=this.scroll.scroller.content,t=this.options,n=t.loop,i=t.autoplay;n&&this.removeClonedSlidePage(e),i&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],l=s[2];o.eventTypes[a]&&o.off(a,l)}),this.hooksFn.length=0},r.pluginName="slide",r}(),YW="plugins.wheel",GW=[{key:"wheelTo",name:"wheelTo"},{key:"getSelectedIndex",name:"getSelectedIndex"},{key:"restorePosition",name:"restorePosition"}],WW=GW.map(function(r){return{key:r.key,sourceKey:YW+"."+r.name}}),fA="wheelIndexChanged",VW={rate:4},qW=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.refreshBoundary(),this.setSelectedIndex(this.options.selectedIndex)},r.prototype.handleBScroll=function(){this.scroll.proxy(WW),this.scroll.registerType([fA])},r.prototype.handleOptions=function(){var e=this.scroll.options.wheel===!0?{}:this.scroll.options.wheel,t={wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item",rotate:25,adjustTime:400,selectedIndex:0,wheelDisabledItemClass:"wheel-disabled-item"};this.options=qr(t,e)},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller,i=n.actionsHandler,s=n.scrollBehaviorX,o=n.scrollBehaviorY,a=n.animater,l=n.content;t.on(t.eventTypes.scrollEnd,function(u){var h=e.findNearestValidWheel(u.y).index;if(n.animater.forceStopped&&!e.isAdjustingPosition)return e.target=e.items[h],!0;e.setSelectedIndex(h),e.isAdjustingPosition&&(e.isAdjustingPosition=!1)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh,function(u){u!==l&&(l=u,e.setSelectedIndex(e.options.selectedIndex,!0)),e.rotateX(e.scroll.y),e.wheelTo(e.selectedIndex,0)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(u){u.x=0,u.y=-(e.selectedIndex*e.itemHeight)}),n.hooks.on(n.hooks.eventTypes.checkClick,function(){var u=nW(e.items).indexOf(e.target);return u===-1||e.wheelTo(u,e.options.adjustTime,Or.swipe),!0}),n.hooks.on(n.hooks.eventTypes.scrollTo,function(u){u.y=e.findNearestValidWheel(u.y).y}),n.hooks.on(n.hooks.eventTypes.minDistanceScroll,function(){var u=n.animater;u.forceStopped===!0&&(u.forceStopped=!1)}),n.hooks.on(n.hooks.eventTypes.scrollToElement,function(u,h){if(bp(u,e.options.wheelItemClass))h.top=e.findNearestValidWheel(h.top).y;else return!0}),i.hooks.on(i.hooks.eventTypes.beforeStart,function(u){e.target=u.target}),s.hooks.on(s.hooks.eventTypes.computeBoundary,function(u){u.maxScrollPos=0,u.minScrollPos=0}),o.hooks.on(o.hooks.eventTypes.computeBoundary,function(u){e.items=e.scroll.scroller.content.children,e.checkWheelAllDisabled(),e.itemHeight=e.items.length>0?o.contentSize/e.items.length:0,u.maxScrollPos=-e.itemHeight*(e.items.length-1),u.minScrollPos=0}),o.hooks.on(o.hooks.eventTypes.momentum,function(u){u.rate=VW.rate,u.destination=e.findNearestValidWheel(u.destination).y}),o.hooks.on(o.hooks.eventTypes.end,function(u){var h=e.findNearestValidWheel(o.currentPos);u.destination=h.y,u.duration=e.options.adjustTime}),a.hooks.on(a.hooks.eventTypes.time,function(u){e.transitionDuration(u)}),a.hooks.on(a.hooks.eventTypes.timeFunction,function(u){e.timeFunction(u)}),a.hooks.on(a.hooks.eventTypes.callStop,function(){var u=e.findNearestValidWheel(e.scroll.y).index;e.isAdjustingPosition=!0,e.wheelTo(u,0)}),a.translater.hooks.on(a.translater.hooks.eventTypes.translate,function(u){e.rotateX(u.y)})},r.prototype.refreshBoundary=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=e.content;t.refresh(i),n.refresh(i)},r.prototype.setSelectedIndex=function(e,t){t===void 0&&(t=!1);var n=this.selectedIndex;this.selectedIndex=e,n!==e&&!t&&this.scroll.trigger(fA,e)},r.prototype.getSelectedIndex=function(){return this.selectedIndex},r.prototype.wheelTo=function(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0);var i=-e*this.itemHeight;this.scroll.scrollTo(0,i,t,n)},r.prototype.restorePosition=function(){var e=this.scroll.pending;if(e){var t=this.getSelectedIndex();this.scroll.scroller.animater.clearTimer(),this.wheelTo(t,0)}},r.prototype.transitionDuration=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[Ht.transitionDuration]=e+"ms"},r.prototype.timeFunction=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[Ht.transitionTimingFunction]=e},r.prototype.rotateX=function(e){for(var t=this.options.rotate,n=t===void 0?25:t,i=0;i<this.items.length;i++){var s=n*(e/this.itemHeight+i),o=s.toFixed(3);this.items[i].style[Ht.transform]="rotateX("+o+"deg)"}},r.prototype.findNearestValidWheel=function(e){e=e>0?0:e<this.scroll.maxScrollY?this.scroll.maxScrollY:e;for(var t=Math.abs(Math.round(-e/this.itemHeight)),n=t,i=this.items,s=this.options.wheelDisabledItemClass;t>=0&&bp(i[t],s);)t--;if(t<0)for(t=n;t<=i.length-1&&bp(i[t],s);)t++;return t===i.length&&(t=n),{index:this.wheelItemsAllDisabled?-1:t,y:-t*this.itemHeight}},r.prototype.checkWheelAllDisabled=function(){var e=this.options.wheelDisabledItemClass,t=this.items;this.wheelItemsAllDisabled=!0;for(var n=0;n<t.length;n++)if(!bp(t[n],e)){this.wheelItemsAllDisabled=!1;break}},r.pluginName="wheel",r}(),KW="plugins.zoom",QW=[{key:"zoomTo",name:"zoomTo"}],ZW=QW.map(function(r){return{key:r.key,sourceKey:KW+"."+r.name}}),Pp=2,Ap=1,JW=function(){function r(e){this.scroll=e,this.scale=Ap,this.prevScale=1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.tryInitialZoomTo(this.zoomOpt)},r.prototype.zoomTo=function(e,t,n,i){var s=this.resolveOrigin(t,n),o=s.originX,a=s.originY,l={x:o,y:a,baseScale:this.scale};this._doZoomTo(e,l,i,!0)},r.prototype.handleBScroll=function(){this.scroll.proxy(ZW),this.scroll.registerType(["beforeZoomStart","zoomStart","zooming","zoomEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.zoom===!0?{}:this.scroll.options.zoom,t={start:1,min:1,max:4,initialOrigin:[0,0],minimalZoomDistance:5,bounceTime:800};this.zoomOpt=qr(t,e)},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller;this.wrapper=this.scroll.scroller.wrapper,this.setTransformOrigin(this.scroll.scroller.content);var i=n.scrollBehaviorX,s=n.scrollBehaviorY;this.hooksFn=[],this.registerHooks(t.hooks,t.hooks.eventTypes.contentChanged,function(o){e.setTransformOrigin(o),e.scale=Ap,e.tryInitialZoomTo(e.zoomOpt)}),this.registerHooks(t.hooks,t.hooks.eventTypes.beforeInitialScrollTo,function(){if(e.zoomOpt.start!==Ap)return!0}),this.registerHooks(i.hooks,i.hooks.eventTypes.beforeComputeBoundary,function(){var o=Sl(e.scroll.scroller.content);i.contentSize=Math.floor(o.width*e.scale)}),this.registerHooks(s.hooks,s.hooks.eventTypes.beforeComputeBoundary,function(){var o=Sl(e.scroll.scroller.content);s.contentSize=Math.floor(o.height*e.scale)}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.start,function(o){var a=o.touches&&o.touches.length||0;e.fingersOperation(a),a===Pp&&e.zoomStart(o)}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeMove,function(o){var a=o.touches&&o.touches.length||0;if(e.fingersOperation(a),a===Pp)return e.zoom(o),!0}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeEnd,function(o){var a=e.fingersOperation();if(a===Pp)return e.zoomEnd(),!0}),this.registerHooks(n.translater.hooks,n.translater.hooks.eventTypes.beforeTranslate,function(o,a){var l=a.scale?a.scale:e.prevScale;e.prevScale=l,o.push("scale("+l+")")}),this.registerHooks(n.hooks,n.hooks.eventTypes.scrollEnd,function(){e.fingersOperation()===Pp&&e.scroll.trigger(e.scroll.eventTypes.zoomEnd,{scale:e.scale})}),this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.setTransformOrigin=function(e){e.style[Ht.transformOrigin]="0 0"},r.prototype.tryInitialZoomTo=function(e){var t=e.start,n=e.initialOrigin,i=this.scroll.scroller,s=i.scrollBehaviorX,o=i.scrollBehaviorY;t!==Ap&&(this.resetBoundaries([s,o]),this.zoomTo(t,n[0],n[1],0))},r.prototype.fingersOperation=function(e){if(typeof e=="number")this.numberOfFingers=e;else return this.numberOfFingers},r.prototype._doZoomTo=function(e,t,n,i){var s=this;n===void 0&&(n=this.zoomOpt.bounceTime),i===void 0&&(i=!1);var o=this.zoomOpt,a=o.min,l=o.max,u=this.scale,h=ir(e,a,l);(function(){if(n===0){s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:h});return}if(n>0){var c,d=Xn(),f=d+n,g=function(){var v=Xn();if(v>=f){s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:h}),Ca(c);return}var x=Or.bounce.fn((v-d)/n),y=x*(h-u)+u;s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:y}),c=Ob(g)};g()}})(),this.fingersOperation(2),this._zoomTo(h,u,t,n,i)},r.prototype._zoomTo=function(e,t,n,i,s){s===void 0&&(s=!1);var o=e/n.baseScale;this.setScale(e);var a=this.scroll.scroller,l=a.scrollBehaviorX,u=a.scrollBehaviorY;this.resetBoundaries([l,u]);var h=this.getNewPos(n.x,o,l,!0,s),c=this.getNewPos(n.y,o,u,!0,s);(l.currentPos!==Math.round(h)||u.currentPos!==Math.round(c)||e!==t)&&a.scrollTo(h,c,i,Or.bounce,{start:{scale:t},end:{scale:e}})},r.prototype.resolveOrigin=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.contentSize},bottom:function(){return s.contentSize},center:function(a){var l=a===0?i.contentSize:s.contentSize;return l/2}};return{originX:typeof e=="number"?e:o[e](0),originY:typeof t=="number"?t:o[t](1)}},r.prototype.zoomStart=function(e){var t=e.touches[0],n=e.touches[1];this.startDistance=this.getFingerDistance(e),this.startScale=this.scale;var i=GG(this.wrapper),s=i.left,o=i.top;this.origin={x:Math.abs(t.pageX+n.pageX)/2+s-this.scroll.x,y:Math.abs(t.pageY+n.pageY)/2+o-this.scroll.y,baseScale:this.startScale},this.scroll.trigger(this.scroll.eventTypes.beforeZoomStart)},r.prototype.zoom=function(e){var t=this.getFingerDistance(e);if(!(!this.zoomed&&Math.abs(t-this.startDistance)<this.zoomOpt.minimalZoomDistance)){var n=this.dampingScale(t/this.startDistance*this.startScale),i=n/this.startScale;this.setScale(n),this.zoomed||(this.zoomed=!0,this.scroll.trigger(this.scroll.eventTypes.zoomStart));var s=this.scroll.scroller,o=s.scrollBehaviorX,a=s.scrollBehaviorY,l=this.getNewPos(this.origin.x,i,o,!1,!1),u=this.getNewPos(this.origin.y,i,a,!1,!1);this.scroll.trigger(this.scroll.eventTypes.zooming,{scale:this.scale}),s.translater.translate({x:l,y:u,scale:n})}},r.prototype.zoomEnd=function(){if(this.zoomed){if(this.shouldRebound()){this._doZoomTo(this.scale,this.origin,this.zoomOpt.bounceTime);return}this.scroll.trigger(this.scroll.eventTypes.zoomEnd,{scale:this.scale})}},r.prototype.getFingerDistance=function(e){var t=e.touches[0],n=e.touches[1],i=Math.abs(t.pageX-n.pageX),s=Math.abs(t.pageY-n.pageY);return $G(i,s)},r.prototype.shouldRebound=function(){var e=this.zoomOpt,t=e.min,n=e.max,i=this.scale;if(i!==ir(i,t,n))return!0;var s=this.scroll.scroller,o=s.scrollBehaviorX,a=s.scrollBehaviorY;this.resetBoundaries([o,a]);var l=o.checkInBoundary().inBoundary,u=o.checkInBoundary().inBoundary;return!(l&&u)},r.prototype.dampingScale=function(e){var t=this.zoomOpt,n=t.min,i=t.max;return e<n?e=.5*n*Math.pow(2,e/n):e>i&&(e=2*i*Math.pow(.5,i/e)),e},r.prototype.setScale=function(e){this.scale=e},r.prototype.resetBoundaries=function(e){e.forEach(function(t){return t.computeBoundary()})},r.prototype.getNewPos=function(e,t,n,i,s){s===void 0&&(s=!1);var o=e-e*t+(s?n.currentPos:n.startPos);return i&&(o=ir(o,n.maxScrollPos,n.minScrollPos)),o>0?Math.floor(o):Math.ceil(o)},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.pluginName="zoom",r}(),eV=function(){function r(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return r.create=function(e){return new r(e)},r.prototype.hasAncestors=function(e){var t=Au(this.ancestors,function(n){var i=n[0];return i===e});return t>-1},r.prototype.hasDescendants=function(e){var t=Au(this.descendants,function(n){var i=n[0];return i===e});return t>-1},r.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort(function(i,s){return i[1]-s[1]})},r.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort(function(i,s){return i[1]-s[1]})},r.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=Au(this.ancestors,function(i){var s=i[0];return s===e});if(n>-1)return t.splice(n,1)}},r.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=Au(this.descendants,function(i){var s=i[0];return s===e});if(n>-1)return t.splice(n,1)}},r.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},r.prototype.setAnalyzed=function(e){e===void 0&&(e=!1),this.analyzed=e},r.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){var n=t[0];n.removeDescendant(e)}),this.descendants.forEach(function(t){var n=t[0];n.removeAncestor(e)}),this.hooksManager.forEach(function(t){var n=t[0],i=t[1],s=t[2];n.off(i,s)}),this.hooksManager=[]},r}(),tV="plugins.nestedScroll",rV=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],nV=rV.map(function(r){return{key:r.key,sourceKey:tV+"."+r.name}}),iV="INTERNAL_NESTED_SCROLL",sV=function(r){r.forEach(function(e){e.pending&&(e.stop(),e.resetPosition())})},pA=function(r){r.forEach(function(e){e.enable()})},kp=function(r,e){r.forEach(function(t){(t.hasHorizontalScroll===e.hasHorizontalScroll||t.hasVerticalScroll===e.hasVerticalScroll)&&t.disable()})},oV=function(r){r.forEach(function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,s=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),s.start(),i.resetStartPos(),s.resetStartPos(),n.startTime=+new Date})},aV=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,s=r.minScrollX,o=r.maxScrollX,a=r.minScrollY,l=r.maxScrollY,u=r.movingDirectionX,h=r.movingDirectionY,c=!1,d=n>=s&&u===-1,f=n<=o&&u===1,g=i>=a&&h===-1,v=i<=l&&h===1;return t?c=g||v:e&&(c=d||f),c},lV=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,s=r.minScrollX,o=r.maxScrollX,a=r.minScrollY,l=r.maxScrollY,u=!1,h=n>s,c=n<o,d=i>a,f=i<l;return t?u=d||f:e&&(u=h||c),u},uV=function(r){r.scroller.reflow(),r.resetPosition(0)},cV=function(r,e){for(var t=0,n=r.parentNode;n&&n!==e;)t++,n=n.parentNode;return t},hV=function(){function r(e){var t=this.handleOptions(e),n=r.instancesMap[t];return n||(n=r.instancesMap[t]=this,n.store=[],n.hooksFn=[]),n.init(e),n}return r.getAllNestedScrolls=function(){var e=r.instancesMap;return Object.keys(e).map(function(t){return e[t]})},r.purgeAllNestedScrolls=function(){var e=r.getAllNestedScrolls();e.forEach(function(t){return t.purgeNestedScroll()})},r.prototype.handleOptions=function(e){var t=e.options.nestedScroll===!0?{}:e.options.nestedScroll,n={groupId:iV};this.options=qr(n,t);var i=typeof this.options.groupId;return i!=="string"&&i!=="number"&&Wi("groupId must be string or number for NestedScroll plugin"),this.options.groupId},r.prototype.init=function(e){e.proxy(nV),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},r.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,function(){t.deleteScroll(e)})},r.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,s=Au(n,function(d){return d.selfScroll===e});if(s>-1){var o=n[s];o.purge(),n.splice(s,1)}var a=Au(i,function(d){var f=d[0];return f===e.hooks});if(a>-1){var l=i[a],u=l[0],h=l[1],c=l[2];u.off(h,c),i.splice(a,1)}},r.prototype.addBScroll=function(e){this.store.push(eV.create(e))},r.prototype.buildBScrollGraph=function(){for(var e=this.store,t,n,i,s,o=this.store.length,a=0;a<o;a++){t=e[a],i=t.selfScroll.wrapper;for(var l=0;l<o;l++)if(n=e[l],s=n.selfScroll.wrapper,t!==n&&i.contains(s)){var u=cV(s,i);t.hasDescendants(n)||t.addDescendant(n,u),n.hasAncestors(t)||n.addAncestor(t,u)}}},r.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,s=function(){var l=t.map(function(h){var c=h[0];return c.selfScroll}),u=n.map(function(h){var c=h[0];return c.selfScroll});sV(lg(l,u)),lV(i)&&uV(i),oV(l),kp(l,i)},o=function(){var l=t.map(function(h){var c=h[0];return c.selfScroll}),u=n.map(function(h){var c=h[0];return c.selfScroll});pA(lg(l,u))};e.registerHooks(i,i.eventTypes.beforeScrollStart,s),e.registerHooks(i,i.eventTypes.touchEnd,o);var a=i.scroller.actions.hooks;e.registerHooks(a,a.eventTypes.detectMovingDirection,function(){var l=t.map(function(f){var g=f[0];return g.selfScroll}),u=l[0],h=l.slice(1),c=i.scroller.actions.contentMoved,d=l.length===0;if(c)kp(l,i);else if(!d&&aV(i))return kp([i],i),u&&pA([u]),kp(h,i),!0}),e.setAnalyzed(!0)}})},r.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort(function(n,i){return n.descendants.length-i.descendants.length});t.forEach(function(n){var i=n.selfScroll;i.scroller.actionsHandler.rebindDOMEvents()})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var n=t[0],i=t[1],s=t[2];n.off(i,s)}),this.hooksFn=[],delete r.instancesMap[e]},r.pluginName="nestedScroll",r.instancesMap={},r}(),mA=10,gA=30,dV=function(){function r(e,t){this.wrapperHeight=e,this.tombstoneHeight=t,this.lastDirection=1,this.lastPos=0}return r.prototype.calculate=function(e,t){var n=e-this.lastPos;this.lastPos=e;var i=this.getDirection(n),s=this.calculateIndex(0,e,t),o=this.calculateIndex(s,e+this.wrapperHeight,t);return i===1?(s-=mA,o+=gA):(s-=gA,o+=mA),s<0&&(s=0),{start:s,end:o}},r.prototype.getDirection=function(e){var t;if(e>0)t=1;else if(e<0)t=0;else return this.lastDirection;return this.lastDirection=t,t},r.prototype.calculateIndex=function(e,t,n){if(t<=0)return e;for(var i=e,s=n[i]&&n[i].pos!==-1?n[i].pos:0,o=s,a=0;i<n.length&&n[i].pos<t;)o=n[i].pos,i++;return i===n.length&&(a=Math.floor((t-o)/this.tombstoneHeight)),i+=a,i},r.prototype.resetState=function(){this.lastDirection=1,this.lastPos=0},r}(),fV=function(){function r(){this.data=null,this.dom=null,this.tombstone=null,this.width=0,this.height=0,this.pos=0}return r}(),pV=function(){function r(e,t,n){this.fetchFn=t,this.onFetchFinish=n,this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=e||[]}return r.prototype.update=function(e){return Qy(this,void 0,void 0,function(){var t;return Zy(this,function(n){return this.hasMore||(e=Math.min(e,this.list.length)),e>this.list.length&&(t=e-this.list.length,this.addEmptyData(t)),[2,this.checkToFetch(e)]})})},r.prototype.add=function(e){for(var t=0;t<e.length;t++)this.list[this.loadedNum]?this.list[this.loadedNum]=Ji(Ji({},this.list[this.loadedNum]),{data:e[t]}):this.list[this.loadedNum]={data:e[t]},this.loadedNum++;return this.list},r.prototype.addEmptyData=function(e){for(var t=0;t<e;t++)this.list.push(new fV);return this.list},r.prototype.fetch=function(e){return Qy(this,void 0,void 0,function(){var t;return Zy(this,function(n){switch(n.label){case 0:return this.fetching?[2,[]]:(this.fetching=!0,[4,this.fetchFn(e)]);case 1:return t=n.sent(),this.fetching=!1,[2,t]}})})},r.prototype.checkToFetch=function(e){return Qy(this,void 0,void 0,function(){var t,n,i;return Zy(this,function(s){switch(s.label){case 0:return this.hasMore?e<=this.loadedNum?[2]:(t=e-this.loadedNum,[4,this.fetch(t)]):[2];case 1:return n=s.sent(),n instanceof Array&&n.length?(this.add(n),i=this.onFetchFinish(this.list,!0),[2,this.checkToFetch(i)]):(typeof n=="boolean"&&n===!1&&(this.hasMore=!1,this.list.splice(this.loadedNum),this.onFetchFinish(this.list,!1)),[2])}})})},r.prototype.getList=function(){return this.list},r.prototype.resetState=function(){this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=[]},r}(),im=function(){function r(e){this.create=e,this.cached=[],this.width=0,this.height=0,this.initialed=!1,this.getSize()}return r.isTombstone=function(e){return e&&e.classList?e.classList.contains("tombstone"):!1},r.prototype.getSize=function(){if(!this.initialed){var e=this.create();e.style.position="absolute",document.body.appendChild(e),e.style.display="",this.height=e.offsetHeight,this.width=e.offsetWidth,document.body.removeChild(e),this.cached.push(e)}},r.prototype.getOne=function(){var e=this.cached.pop();if(e){var t=e.style;return t.display="",t.opacity="1",t[Ht.transform]="",t[Ht.transition]="",e}return this.create()},r.prototype.recycle=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];i.style.display="none",this.cached.push(i)}return this.cached},r.prototype.recycleOne=function(e){return this.cached.push(e),this.cached},r}(),n1=200,mV=function(){function r(e,t,n){this.renderFn=t,this.tombstone=n,this.unusedDom=[],this.timers=[],this.setContent(e)}return r.prototype.update=function(e,t,n){t>=e.length&&(t=e.length-1),n>e.length&&(n=e.length),this.collectUnusedDom(e,t,n),this.createDom(e,t,n),this.cacheHeight(e,t,n);var i=this.positionDom(e,t,n),s=i.startPos,o=i.startDelta,a=i.endPos;return{start:t,startPos:s,startDelta:o,end:n,endPos:a}},r.prototype.collectUnusedDom=function(e,t,n){for(var i=0;i<e.length;i++){if(i===t){i=n-1;continue}if(e[i].dom){var s=e[i].dom;im.isTombstone(s)?(this.tombstone.recycleOne(s),s.style.display="none"):this.unusedDom.push(s),e[i].dom=null}}return e},r.prototype.createDom=function(e,t,n){for(var i=t;i<n;i++){var s=e[i].dom,o=e[i].data;if(s)if(im.isTombstone(s)&&o)e[i].tombstone=s,e[i].dom=null;else continue;s=o?this.renderFn(o,this.unusedDom.pop()):this.tombstone.getOne(),s.style.position="absolute",e[i].dom=s,e[i].pos=-1,this.content.appendChild(s)}},r.prototype.cacheHeight=function(e,t,n){for(var i=t;i<n;i++)e[i].data&&!e[i].height&&(e[i].height=e[i].dom.offsetHeight)},r.prototype.positionDom=function(e,t,n){for(var i=this,s=[],o=this.getStartPos(e,t,n),a=o.start,l=o.delta,u=a,h=t;h<n;h++){var c=e[h].tombstone;if(c){var d=c.style;d[Ht.transition]=WG+"transform "+n1+"ms, opacity "+n1+"ms",d[Ht.transform]="translateY("+u+"px)",d.opacity="0",e[h].tombstone=null,s.push(c)}e[h].dom&&e[h].pos!==u&&(e[h].dom.style[Ht.transform]="translateY("+u+"px)",e[h].pos=u),u+=e[h].height||this.tombstone.height}var f=window.setTimeout(function(){i.tombstone.recycle(s)},n1);return this.timers.push(f),{startPos:a,startDelta:l,endPos:u}},r.prototype.getStartPos=function(e,t,n){if(e[t]&&e[t].pos!==-1)return{start:e[t].pos,delta:0};for(var i=e[0].pos===-1?0:e[0].pos,s=0;s<t;s++)i+=e[s].height||this.tombstone.height;var o=i,a;for(a=t;a<n;a++)if(!im.isTombstone(e[a].dom)&&e[a].pos!==-1){i=e[a].pos;break}var l=a;if(l<n)for(;l>t;)i-=e[l-1].height,l--;var u=o-i;return{start:i,delta:u}},r.prototype.removeTombstone=function(){for(var e=this.content.querySelectorAll(".tombstone"),t=e.length-1;t>=0;t--)this.content.removeChild(e[t])},r.prototype.setContent=function(e){e!==this.content&&(this.content=e)},r.prototype.destroy=function(){this.removeTombstone(),this.timers.forEach(function(e){clearTimeout(e)})},r.prototype.resetState=function(){this.destroy(),this.timers=[],this.unusedDom=[]},r}(),gV=-2e3,vV=function(){function r(e){this.scroll=e,this.start=0,this.end=0,this.init()}return r.prototype.init=function(){var e=this;this.handleOptions();var t=this.options,n=t.fetch,i=t.render,s=t.createTombstone;this.tombstone=new im(s),this.indexCalculator=new dV(this.scroll.scroller.scrollBehaviorY.wrapperSize,this.tombstone.height),this.domManager=new mV(this.scroll.scroller.content,i,this.tombstone),this.dataManager=new pV([],n,this.onFetchFinish.bind(this)),this.scroll.on(this.scroll.eventTypes.destroy,this.destroy,this),this.scroll.on(this.scroll.eventTypes.scroll,this.update,this),this.scroll.on(this.scroll.eventTypes.contentChanged,function(a){e.domManager.setContent(a),e.indexCalculator.resetState(),e.domManager.resetState(),e.dataManager.resetState(),e.update({y:0})});var o=this.scroll.scroller.scrollBehaviorY;o.hooks.on(o.hooks.eventTypes.computeBoundary,this.modifyBoundary,this),this.update({y:0})},r.prototype.modifyBoundary=function(e){e.maxScrollPos=gV},r.prototype.handleOptions=function(){var e=this.scroll.options.infinity;e&&(typeof e.fetch!="function"&&Wi("Infinity plugin need fetch Function to new data."),typeof e.render!="function"&&Wi("Infinity plugin need render Function to render each item."),typeof e.render!="function"&&Wi("Infinity plugin need createTombstone Function to create tombstone."),this.options=e),this.scroll.options.probeType=3},r.prototype.update=function(e){var t=Math.round(-e.y),n=this.indexCalculator.calculate(t,this.dataManager.getList()),i=n.start,s=n.end;this.start=i,this.end=s,this.dataManager.update(s),this.updateDom(this.dataManager.getList())},r.prototype.onFetchFinish=function(e,t){var n=this.updateDom(e).end;return t||(this.domManager.removeTombstone(),this.scroll.scroller.animater.stop(),this.scroll.resetPosition()),n},r.prototype.updateDom=function(e){var t=this.domManager.update(e,this.start,this.end),n=t.end,i=t.startPos,s=t.endPos,o=t.startDelta;return o&&(this.scroll.minScrollY=o),s>this.scroll.maxScrollY&&(this.scroll.maxScrollY=-(s-this.scroll.scroller.scrollBehaviorY.wrapperSize)),{end:n,startPos:i,endPos:s}},r.prototype.destroy=function(){for(var e=this.scroll.scroller,t=e.content,n=e.scrollBehaviorY;t.firstChild;)t.removeChild(t.firstChild);this.domManager.destroy(),this.scroll.off("scroll",this.update),this.scroll.off("destroy",this.destroy),n.hooks.off(n.hooks.eventTypes.computeBoundary)},r.pluginName="infinity",r}(),yV="plugins.movable",xV=[{key:"putAt",name:"putAt"}],_V=xV.map(function(r){return{key:r.key,sourceKey:yV+"."+r.name}}),wV=function(){function r(e){this.scroll=e,this.handleBScroll(),this.handleHooks()}return r.prototype.handleBScroll=function(){this.scroll.proxy(_V)},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=function(o,a){o.maxScrollPos>0&&(o.minScrollPos=a.wrapperSize-a.contentSize,o.maxScrollPos=0)};this.registerHooks(n.hooks,n.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,function(o){s(o,n)}),this.registerHooks(i.hooks,i.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(i.hooks,i.hooks.eventTypes.computeBoundary,function(o){s(o,i)}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){e.destroy()})},r.prototype.putAt=function(e,t,n,i){n===void 0&&(n=this.scroll.options.bounceTime),i===void 0&&(i=Or.bounce);var s=this.resolvePostion(e,t);this.scroll.scrollTo(s.x,s.y,n,i)},r.prototype.resolvePostion=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.minScrollPos},bottom:function(){return s.minScrollPos},center:function(a){var l=a===0?i.minScrollPos:s.minScrollPos;return l/2}};return{x:typeof e=="number"?e:o[e](0),y:typeof t=="number"?t:o[t](1)}},r.prototype.destroy=function(){this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.pluginName="movable",r.applyOrder="pre",r}(),bV=function(r){return r.tagName.toLowerCase()==="img"},SV=function(){function r(e){this.scroll=e,this.refreshTimer=0,this.init()}return r.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={debounceTime:100};this.options=qr(t,e)},r.prototype.bindEventsToWrapper=function(){var e=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new Tn(e,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new Tn(e,[{name:"error",handler:this.load.bind(this),capture:!0}])},r.prototype.load=function(e){var t=this,n=e.target,i=this.options.debounceTime;n&&bV(n)&&(i===0?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(function(){t.scroll.refresh()},this.options.debounceTime)))},r.pluginName="observeImage",r}(),TV=function(r){var e={ratioX:0,ratioY:0};return r&&(typeof r=="number"?e.ratioX=e.ratioY=r:typeof r=="object"&&r&&(e.ratioX=r.x||0,e.ratioY=r.y||0)),e},i1=function(r){fl(r),r.stopPropagation()},EV=function(){function r(e,t){this.scroll=e,this.options=t,this.currentPos={x:0,y:0},this.hooksFn=[],this.handleDOM(),this.handleHooks(),this.handleInteractive()}return r.prototype.handleDOM=function(){var e=this.options,t=e.relationElement,n=e.relationElementHandleElementIndex,i=n===void 0?0:n;this.wrapper=t,this.indicatorEl=this.wrapper.children[i]},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=t.hooks,i=t.scroller.translater.hooks,s=t.scroller.animater.hooks;this.registerHooks(n,n.eventTypes.refresh,this.refresh),this.registerHooks(i,i.eventTypes.translate,function(o){e.updatePosition(o)}),this.registerHooks(s,s.eventTypes.time,this.transitionTime),this.registerHooks(s,s.eventTypes.timeFunction,this.transitionTimingFunction)},r.prototype.transitionTime=function(e){e===void 0&&(e=0),this.indicatorEl.style[Ht.transitionDuration]=e+"ms"},r.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[Ht.transitionTimingFunction]=e},r.prototype.handleInteractive=function(){this.options.interactive!==!1&&this.registerEvents()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.registerEvents=function(){var e=this.scroll.options,t=e.disableMouse,n=e.disableTouch,i=[],s=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),s.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),s.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new Tn(this.indicatorEl,i),this.moveEventRegister=new Tn(window,s),this.endEventRegister=new Tn(window,o)},r.prototype.refresh=function(){var e=this.scroll,t=e.x,n=e.y,i=e.hasHorizontalScroll,s=e.hasVerticalScroll,o=e.maxScrollX,a=e.maxScrollY,l=TV(this.options.ratio),u=l.ratioX,h=l.ratioY,c=iW(this.wrapper),d=c.width,f=c.height,g=Sl(this.indicatorEl),v=g.width,x=g.height;i&&(this.maxScrollX=d-v,this.translateXSign=this.maxScrollX>0?-1:1,this.minScrollX=0,this.ratioX=u||Math.abs(this.maxScrollX/o)),s&&(this.maxScrollY=f-x,this.translateYSign=this.maxScrollY>0?-1:1,this.minScrollY=0,this.ratioY=h||Math.abs(this.maxScrollY/a)),this.updatePosition({x:t,y:n})},r.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;i1(e),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=Xn(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)}},r.prototype.BScrollIsDisabled=function(){return!this.scroll.enabled},r.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t.pageX,i=t.pageY;i1(e);var s=n-this.lastPointX,o=i-this.lastPointY;if(this.lastPointX=n,this.lastPointY=i,!this.moved&&!this.indicatorNotMoved(s,o)&&(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var a=this.getBScrollPosByRatio(this.currentPos,s,o);this.syncBScroll(a)}}},r.prototype.end=function(e){if(this.initiated&&(this.initiated=!1,i1(e),this.moved)){var t=this.scroll,n=t.x,i=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:n,y:i})}},r.prototype.getBScrollPosByRatio=function(e,t,n){var i=e.x,s=e.y,o=this.scroll,a=o.hasHorizontalScroll,l=o.hasVerticalScroll,u=o.minScrollX,h=o.maxScrollX,c=o.minScrollY,d=o.maxScrollY,f=this.scroll,g=f.x,v=f.y;if(a){var x=ir(i+t,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX)),y=Math.round(x/this.ratioX*this.translateXSign);g=ir(y,h,u)}if(l){var b=ir(s+n,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY)),_=Math.round(b/this.ratioY*this.translateYSign);v=ir(_,d,c)}return{x:g,y:v}},r.prototype.indicatorNotMoved=function(e,t){var n=this.currentPos,i=n.x,s=n.y,o=i===this.minScrollX&&e<=0||i===this.maxScrollX&&e>=0,a=s===this.minScrollY&&t<=0||s===this.maxScrollY&&t>=0;return o&&a},r.prototype.syncBScroll=function(e){var t=Xn(),n=this.scroll,i=n.options,s=n.scroller,o=i.probeType,a=i.momentumLimitTime;s.translater.translate(e),t-this.startTime>a&&(this.startTime=t,o===1&&s.hooks.trigger(s.hooks.eventTypes.scroll,e)),o>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,e)},r.prototype.updatePosition=function(e){var t=this.getIndicatorPosByRatio(e);this.applyTransformProperty(t),this.currentPos=Ji({},t)},r.prototype.applyTransformProperty=function(e){var t=this.scroll.options.translateZ,n=["translateX("+e.x+"px)","translateY("+e.y+"px)",""+t];this.indicatorEl.style[Ht.transform]=n.join(" ")},r.prototype.getIndicatorPosByRatio=function(e){var t=e.x,n=e.y,i=this.scroll,s=i.hasHorizontalScroll,o=i.hasVerticalScroll,a=Ji({},this.currentPos);if(s){var l=Math.round(this.ratioX*t*this.translateXSign);a.x=ir(l,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX))}if(o){var u=Math.round(this.ratioY*n*this.translateYSign);a.y=ir(u,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY))}return a},r.prototype.destroy=function(){this.options.interactive!==!1&&(this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r}(),CV=function(){function r(e){this.scroll=e,this.options=[],this.indicators=[],this.handleOptions(),this.handleHooks()}return r.prototype.handleOptions=function(){var e=this.scroll.options.indicators;tA(Array.isArray(e),"'indicators' must be an array.");for(var t=0,n=e;t<n.length;t++){var i=n[t];tA(!!i.relationElement,"'relationElement' must be a HTMLElement."),this.createIndicators(i)}},r.prototype.createIndicators=function(e){this.indicators.push(new EV(this.scroll,e))},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks;t.on(t.eventTypes.destroy,function(){for(var n=0,i=e.indicators;n<i.length;n++){var s=i[n];s.destroy()}e.indicators=[]})},r.pluginName="indicators",r}();vc.use(TW).use(EW).use(kW).use(OW).use(BW).use(zW).use(qW).use(JW).use(hV).use(vV).use(wV).use(SV).use(CV);vc.use(LG);function PV(r,e){return()=>{const{state:t,dispatch:n}=N.useContext(xt),{on:i,data:s,index:o}=t.setting.historyDetail,a=N.useRef(null),{current:l}=N.useRef({detailList:null,call:null}),{currency:u}=t.user,{orientation:h}=t.setting,{tableOptions:c}=Ee.Obj,[d,f]=N.useState(0),g=Array.isArray(s)?s:s?[s]:[];function v(S){n(wI(!1,s,o)),S==null||S.stopPropagation()}N.useEffect(()=>{a.current&&!l.detailList&&s&&(l.detailList=new vc(a.current,{scrollX:!0,scrollY:!1,disableTouch:!0,slide:{threshold:100,loop:!1,autoplay:!1},click:!1,momentum:!1,bounce:!1,probeType:0}),l.detailList.on("slidePageChanged",S=>{l.call?(l.call(),l.call=null):f(S.pageX)}))},[a,s]),N.useEffect(()=>{if(i&&l.detailList){const S=setTimeout(()=>{clearTimeout(S),l.detailList.plugins.slide.setCurrentPage({pageX:o,pageY:0}),l.detailList.refresh()},100)}},[i]);const x=c_(()=>{l.detailList&&l.detailList.plugins.slide.prev()},300),y=c_(()=>{l.detailList&&l.detailList.plugins.slide.next()},300);N.useMemo(()=>{h&&l.detailList&&(l.call=()=>{l.detailList.plugins.slide.setCurrentPage({pageX:d,pageY:0})})},[h]);const b=it(Ee.Obj.filterImageFormat(["avif","webp","png"])),_=g.length;return T.jsx(_z,{on:i,style:{backgroundColor:"#25232d"},children:T.jsxs("div",{className:`base-history-detail-mod ${r}`,children:[T.jsx(Pe,{className:"head-mod",children:"gametitle"}),T.jsx("div",{ref:a,className:"content-scroll-mod hidden-scroolbar",children:T.jsx("div",{className:"slide-content",children:g.map((S,I)=>T.jsx(e,{render:I==d||I==d-1||I==d+1,symbolFormat:b,data:S,currency:u,table:c},`hid_${I}`))})}),T.jsx(Bn,{className:"arrow-icon left  btn-mod btn-mod-active",onClick:v,style:{position:"absolute",left:"1rem",top:"0.8rem",height:"2rem",width:"2rem"}}),T.jsx(Bn,{className:`arrow-btn left-arrow-btn btn-mod btn-mod-active ${d>0?"db":"dn"}`,onClick:x,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:T.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})}),T.jsx(Bn,{className:`arrow-btn right-arrow-btn btn-mod btn-mod-active ${d<_-1&&_>1?"db":"dn"}`,onClick:y,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:T.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})})]})})}}const AV=PV("carnivalshooter-history-detail-mod",kV);function kV({symbolFormat:r,currency:e,data:t,table:n,render:i}){const s=N.useMemo(()=>{if(t)return new rw(t)},[t]),o=(s==null?void 0:s.data.result.ss)||[],a=it(Cr(gr,"collapse").toUpperCase()),l=it(Cr(gr,"fscollapse").toUpperCase()),u=it(Cr(gr,"freespin").toUpperCase()),[h,c]=N.useMemo(()=>t?[t.result.action==2?t.result.mg?a:l:t.result.mg?xn(Number(t.cost)):u,t.result.mg==!1]:["",!1],[s]);return i?T.jsx("div",{className:"content-mod clearfix hidden-scroolbar",children:T.jsxs("div",{className:"content-box",children:[t?T.jsx("div",{className:"content-top",children:T.jsxs("table",{children:[T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:T.jsx(Pe,{tcase:"upper",children:"dateandtime"})}),T.jsxs("th",{children:[T.jsx(Pe,{className:"dib",tcase:"upper",children:"linebet"}),T.jsx("br",{}),"(",e,")"]}),T.jsxs("th",{children:[T.jsx(Pe,{className:"dib",tcase:"upper",children:"totalbet"}),T.jsx("br",{}),"(",e,")"]}),T.jsxs("th",{children:[T.jsx(Pe,{className:"dib",tcase:"upper",children:"totalwin"}),T.jsx("br",{}),"(",e,")"]})]})}),T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:t.createdOnFormat||SI(t.createdOn)}),T.jsx("th",{children:xn(Number(t.credit))}),T.jsx("th",{children:h}),T.jsx("th",{children:xn(Number(t.payout))})]})})]})}):T.jsx(T.Fragment,{}),T.jsx("div",{className:"content-right",children:T.jsx("table",{style:{width:"100%"},children:o.length!=0?pr(3,d=>T.jsx("tbody",{children:T.jsx("tr",{children:pr(5,f=>{let g=o[f][d];return g=g+(c&&g!=8?10:0),T.jsx("th",{children:T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-${g} ${r}`})},`history-s-${f}`)})})},`history-reel${d}`)):T.jsx(T.Fragment,{})})}),T.jsx("div",{className:"content-left",children:T.jsxs("table",{style:{width:"100%"},children:[T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{}),T.jsx("th",{children:T.jsx(Pe,{tcase:"upper",children:"winline"})}),T.jsxs("th",{children:[T.jsx(Pe,{className:"dib",tcase:"upper",children:"win"}),T.jsx("br",{}),"(",e,")"]})]})}),s?s.totalLines.map((d,f)=>{var y;const g=d.positions,v=d.lineId;let x;return v&&(x=n.paylineMap[d.lineId]),T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsxs("th",{children:[f+1,Gr(d.lineId)?`(${d.lineId+1})`:""]}),T.jsx("th",{children:T.jsx("table",{className:"w-100",children:pr(3,b=>T.jsx("tbody",{children:T.jsx("tr",{children:pr(5,_=>{let S,I="",A=-1;return x?A=x.findIndex(([k,M])=>k==_&&M==b):g.findIndex(([M,O])=>M==_&&O==b)>=0&&(S=o[_][b]),A>=0&&(g.findIndex(([M,O])=>M==_&&O==b)>=0?S=o[_][b]:I="symbol-empty"),S=S+(c&&S!=8?10:0),T.jsx("td",{style:{width:"1.5rem",height:"1.5rem",fontSize:0},children:T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-${S} ${I} ${r}`})},`row${_}`)})})},`column${b}`))})}),T.jsx("th",{children:xn((y=d.win)==null?void 0:y.toNumber(),2)})]})},`table${f}`)}):null]})})]})}):T.jsx("div",{className:"content-mod"})}/*!
 * better-scroll / mouse-wheel
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 */function IV(r){console.error("[BScroll warn]: "+r)}var Fd=typeof window<"u",ug=Fd&&navigator.userAgent.toLowerCase();ug&&ug.indexOf("android")>0;(function(){if(typeof ug=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(ug);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var _3=!1;if(Fd){var MV="test-passive";try{var vA={};Object.defineProperty(vA,"passive",{get:function(){_3=!0}}),window.addEventListener(MV,function(){},vA)}catch{}}var RV=function(r,e){for(var t in e)r[t]=e[t];return r},w3=Fd&&document.createElement("div").style,Ku=function(){if(!Fd)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(w3[n.value]!==void 0)return n.key}return!1}();function oo(r){return Ku===!1?r:Ku==="standard"?r==="transitionEnd"?"transitionend":r:Ku+r.charAt(0).toUpperCase()+r.substr(1)}function OV(r,e,t,n){var i=_3?{passive:!1,capture:!!n}:!!n;r.addEventListener(e,t,i)}function NV(r,e,t,n){r.removeEventListener(e,t,{capture:!!n})}function FV(r){r.cancelable&&r.preventDefault()}Ku&&Ku!=="standard"&&""+Ku.toLowerCase();var BV=oo("transform"),LV=oo("transition");Fd&&oo("perspective")in w3;oo("transitionTimingFunction"),oo("transitionDuration"),oo("transitionDelay"),oo("transformOrigin"),oo("transitionEnd"),oo("transitionProperty");function DV(r,e){for(var t in e)if(e[t].test(r[t]))return!0;return!1}var UV=function(){function r(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return r.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},r.prototype.addDOMEvents=function(){this.handleDOMEvents(OV)},r.prototype.removeDOMEvents=function(){this.handleDOMEvents(NV)},r.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach(function(i){e(n,i.name,t,!!i.capture)})},r.prototype.handleEvent=function(e){var t=e.type;this.events.some(function(n){return n.name===t?(n.handler(e),!0):!1})},r}(),jV=function(){function r(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},r.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.mouseWheel===!0?{}:this.scroll.options.mouseWheel,t={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=RV(t,e)},r.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.registerEvent=function(){this.eventRegister=new UV(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},r.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},r.prototype.cleanCache=function(){this.deltaCache=[]},r.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,s=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var o=this.deltaCache.reduce(function(f,g){return{x:f.x+g.x,y:f.y+g.y}},{x:0,y:0});this.cleanCache();var a=this.scroll.scroller,l=a.scrollBehaviorX,u=a.scrollBehaviorY;l.setMovingDirection(-e.directionX),u.setMovingDirection(-e.directionY),l.setDirection(e.x),u.setDirection(e.y);var h=l.performDampingAlgorithm(Math.round(e.x)+o.x,s),c=u.performDampingAlgorithm(Math.round(e.y)+o.x,s);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:h,y:c})){var d=this.getEaseTime();(h!==this.scroll.x||c!==this.scroll.y)&&this.scroll.scrollTo(h,c,d)}i&&(this.wheelMoveTimer=window.setTimeout(function(){t.wheelMoveTimer=0},i))}},r.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)},this.mouseWheelOpt.discreteTime)},r.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=t.invert,s=0,o=0,a=i?-1:1;switch(!0){case"deltaX"in e:e.deltaMode===1?(s=-e.deltaX*n,o=-e.deltaY*n):(s=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:s=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:s=o=e.wheelDelta/120*n;break;case"detail"in e:s=o=-e.detail/3*n;break}s*=a,o*=a,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(s)&&(s=o),o=0),this.scroll.hasHorizontalScroll||(s=0);var l=s>0?-1:s<0?1:0,u=o>0?-1:o<0?1:0;return{x:s,y:o,directionX:l,directionY:u}},r.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,s=t.preventDefaultException;n&&!DV(e.target,s)&&FV(e),i&&e.stopPropagation()},r.prototype.getEaseTime=function(){var e=100,t=this.mouseWheelOpt.easeTime;return t<e&&IV("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,e)},r.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})},r.pluginName="mouseWheel",r.applyOrder="pre",r}();vc.use(jV);function XV({TitleEL:r=b3,ItemEL:e=HV,order:t=1}){const{state:n,dispatch:i}=N.useContext(xt),{historyListOn:s,orientation:o,historyDetail:a}=n.setting,l=N.useRef(null),u=N.useRef(null),[h,c]=N.useState(0),[d,f]=N.useState(!1),{current:g}=N.useRef({selectedDate:h,historyList:null,dateList:null,page:0,size:20,list:[],isNoMoreData:!1,recordMap:{},loading:!1}),v=Ee.Obj.urlOptions.lang;function x(){g.loading=!1,g.historyList.finishPullUp();const M=setTimeout(()=>{g.historyList.refresh(),clearTimeout(M)},200);f(!1)}function y(M){g.recordMap[M]={page:g.page,list:g.list,isNoMoreData:g.isNoMoreData}}function b(){if(g.isNoMoreData||g.loading)g.historyList.finishPullUp();else{f(!0);const M=new Date,O=M.getTime(),L=M.getTimezoneOffset()*60;let D=M.setHours(0,0,0,0)/1e3-g.selectedDate*24*60*60,j=D+24*60*60-1;g.selectedDate==6&&(D-=L),g.selectedDate==0&&(j=Math.floor(O/1e3)-1),g.loading=!0,yg().history(D,j,g.page,g.size,t).then(F=>{F.code?i(nn("")):(g.page++,g.list=g.list.concat(F.list),g.isNoMoreData=F.list<g.size,y(g.selectedDate)),x()}).catch(()=>{x()})}}function _(){!a.on&&i(_I(!1))}function S(M,O){i(wI(!0,g.list,O))}function I(M,O){if(!(O&&O.button==2)&&h!=M&&!g.loading){const L=g.recordMap[M];L?(g.page=L.page,g.isNoMoreData=L.isNoMoreData,g.list=L.list):(g.page=0,g.isNoMoreData=!1,g.list=[]),c(M)}}function A(M){g.historyList.scrollTo(0,0,500)}const k=N.useMemo(()=>{const M=new Date().getTime(),O=v==vt.Chinese?"MMdd":"dd/MM";return pr(7,L=>bI(new Date(M-L*24*60*60*1e3),8,O,v))},[]);return N.useEffect(()=>{if(l.current)return g.historyList=new vc(l.current,{scrollY:!0,pullUpLoad:!0,click:"ontouchstart"in window,mouseWheel:{speed:20,invert:!1,easeTime:300}}),g.historyList.on("pullingUp",b),()=>{g.historyList.destroy()}},[l]),N.useEffect(()=>{if(u.current&&s){const M=setTimeout(()=>{clearTimeout(M),g.dateList=new vc(u.current,{scrollX:!0,click:!1,eventPassthrough:"vertical"}),g.dateList.scrollTo(0,0)},200);return()=>{g.dateList&&g.dateList.destroy()}}},[u,s]),N.useEffect(()=>{s&&(g.selectedDate=h,g.recordMap={},g.page=0,g.isNoMoreData=!1,g.list=[],b())},[s,h]),N.useEffect(()=>{s||c(0)},[s]),T.jsx(Zw,{on:s,style:{backgroundColor:"#1B1B21"},children:T.jsxs("div",{className:"history-list-mod",children:[T.jsx(Pe,{className:"head-mod",children:"gametitle"}),T.jsx("div",{ref:u,className:"date-list hidden-scroolbar",children:T.jsx("ul",{className:"content",children:k.map((M,O)=>T.jsx("li",{className:`item btn-mod btn-mod-active ${O==h?"selected":""} ${v}`,onClick:I.bind(null,O),children:M},`dateItem${O}`))})}),T.jsxs("div",{className:"history-model",children:[T.jsx("div",{ref:l,className:"history-list",children:T.jsxs("ul",{className:"content",children:[g.list.map((M,O)=>T.jsx(e,{item:M,index:O,onHistoryDetail:S,lang:v},`historyItem${O}`)),T.jsx("div",{className:"pullup-tips",children:g.isNoMoreData?T.jsx("div",{className:"before-trigger",children:T.jsx("span",{className:"pullup-txt",children:T.jsx(Pe,{children:"nomorehostory"})})}):d?T.jsx("div",{className:"after-trigger",children:T.jsxs("span",{className:"pullup-txt",children:[T.jsx(Pe,{className:"dib",children:"loading"}),"..."]})}):T.jsx("div",{className:"before-trigger",children:T.jsx("span",{className:"pullup-txt",children:T.jsx(Pe,{children:"pullload"})})})})]})}),T.jsx(r,{currency:n.user.currency,lang:v})]}),T.jsxs("div",{className:"footer",children:[T.jsx(Pe,{style:{lineHeight:"1rem"},className:"item",replaceMap:{"{%day%}":"7"},children:"history1"}),T.jsx(Pe,{style:{lineHeight:"1rem"},className:"item",children:"history2"})]}),T.jsx(Bn,{className:"close-icon btn-mod btn-mod-active",onClick:_,style:{position:"absolute",right:"1rem",top:"0.5rem",height:"2rem",width:"2rem"}}),T.jsx(Bn,{className:`fab icon-mod btn-mod btn-mod-active ${o}`,onClick:A,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:T.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})})]})})}function b3({currency:r}){return T.jsxs("div",{className:"default-history-list-item list history-info history-head",children:[T.jsx(Pe,{className:"item time",tcase:"upper",children:"dateandtime"}),T.jsxs("div",{className:"item bet",children:[T.jsx(Pe,{className:"dib",tcase:"upper",children:"totalbet"}),T.jsx("br",{}),"(",r,")"]}),T.jsxs("div",{className:"item payout",children:[T.jsx(Pe,{className:"dib",tcase:"upper",children:"totalwin"}),T.jsx("br",{}),"(",r,")"]}),T.jsx("div",{className:"item detail",children:T.jsx(Pe,{})}),T.jsx("div",{className:"line-bottom"})]},"historyItemHead")}function HV({item:r,index:e,onHistoryDetail:t}){return T.jsxs("li",{className:`default-history-list-item list history-info btn-mod ${e%2==0?"even-line":""}`,onClick:t.bind(null,r,e),children:[T.jsx("div",{className:"item time",children:r.createdOnFormat}),T.jsx("div",{className:"item bet",children:xn(Number(r.cost))}),T.jsx("div",{className:"item payout",children:xn(Number(r.payout))}),T.jsx("div",{className:"item detail btn-mod",children:T.jsx("svg",{className:"info",style:{fontWeight:"bolder",verticalAlign:"middle"},version:"1.1",viewBox:"0 0 330 330",xmlSpace:"preserve",children:T.jsx("path",{id:"XMLID_222_",d:`M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001
c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213
C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606
C255,161.018,253.42,157.202,250.606,154.389z`})})}),T.jsx("div",{className:"line-bottom"})]})}function $V(){return T.jsx(XV,{order:1,TitleEL:b3,ItemEL:zV})}function zV({item:r,index:e,onHistoryDetail:t}){const n=it(Cr(gr,"collapse").toUpperCase()),i=it(Cr(gr,"fscollapse").toUpperCase()),s=it(Cr(gr,"freespin").toUpperCase()),o=Number(r.cost),a=N.useMemo(()=>r.result.action==2?r.result.mg?n:i:r.result.mg?xn(o):s,[o]);return T.jsxs("li",{className:`default-history-list-item list history-info btn-mod  ${e%2==0?"even-line":""}`,onClick:t.bind(null,r,e),children:[T.jsx("div",{className:"item time",children:r.createdOnFormat}),T.jsx("div",{className:"item bet",children:a}),T.jsx("div",{className:"item payout",children:xn(Number(r.payout))}),T.jsx("div",{className:"item detail btn-mod",children:T.jsx("svg",{className:"info",style:{fontWeight:"bolder",verticalAlign:"middle"},version:"1.1",viewBox:"0 0 330 330",xmlSpace:"preserve",children:T.jsx("path",{id:"XMLID_222_",d:`M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001
c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213
C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606
C255,161.018,253.42,157.202,250.606,154.389z`})})}),T.jsx("div",{className:"line-bottom"})]})}function YV(){const r=N.useRef(null),e=N.useRef(null),t=N.useRef(null),n=N.useRef(null),i=N.useRef(null),{state:s,dispatch:o}=N.useContext(xt),[a,l]=N.useState(0),{payTableOn:u}=s.setting,{orientation:h}=s.setting,c=Ee.Obj.urlOptions.lang,d=it(Ee.Obj.filterImageFormat(["avif","webp","png"])),f=Ee.Obj.urlOptions.lang==vt.Chinese?"cn":"";function g(I){o(xI(!1)),I.stopPropagation()}const v=N.useMemo(()=>[{s:7,detail:[{count:5,odd:800},{count:4,odd:300},{count:3,odd:50}]},{s:6,detail:[{count:5,odd:200},{count:4,odd:60},{count:3,odd:30}]},{s:5,detail:[{count:5,odd:150},{count:4,odd:50},{count:3,odd:25}]},{s:4,detail:[{count:5,odd:125},{count:4,odd:40},{count:3,odd:20}]},{s:3,detail:[{count:5,odd:100},{count:4,odd:35},{count:3,odd:15}]},{s:2,detail:[{count:5,odd:80},{count:4,odd:25},{count:3,odd:10}]},{s:1,detail:[{count:5,odd:80},{count:4,odd:25},{count:3,odd:10}]},{s:0,detail:[{count:5,odd:65},{count:4,odd:20},{count:3,odd:5}]}],[]),x=N.useMemo(()=>[{s:17,detail:[{count:5,odd:800},{count:4,odd:300},{count:3,odd:50}]},{s:13,detail:[{count:5,odd:100},{count:4,odd:35},{count:3,odd:15}]},{s:12,detail:[{count:5,odd:80},{count:4,odd:25},{count:3,odd:10}]},{s:11,detail:[{count:5,odd:80},{count:4,odd:25},{count:3,odd:10}]},{s:10,detail:[{count:5,odd:65},{count:4,odd:20},{count:3,odd:5}]}],[]),y=N.useMemo(()=>[{s:`16${f}`,detail:[{count:5,odd:15},{count:4,odd:8},{count:3,odd:3}]},{s:`15${f}`,detail:[{count:5,odd:8},{count:4,odd:5},{count:3,odd:2}]},{s:`14${f}`,detail:[{count:5,odd:5},{count:4,odd:3},{count:3,odd:1}]}],[]),b=N.useMemo(()=>{const I=[];for(const A in Ee.Obj.tableOptions.paylineMap){const k=Ee.Obj.tableOptions.paylineMap[A],M={};k.forEach((O,L)=>{M[`${O[0]}${O[1]}`]=!0}),I.push(M)}return I},[]),_=k$(()=>{var M,O,L;const I=((M=r.current)==null?void 0:M.scrollTop)||0,A=((O=n.current)==null?void 0:O.offsetTop)||0,k=((L=i.current)==null?void 0:L.offsetTop)||0;I<A-200?l(0):I>k-350?l(2):l(1)},300);function S(I){var k,M,O;let A=0;I==1?A=((k=n.current)==null?void 0:k.offsetTop)||0:I==2&&(A=((M=i.current)==null?void 0:M.offsetTop)||0),(O=r.current)==null||O.scrollTo({top:A,behavior:"smooth"}),l(I)}return N.useEffect(()=>{var I;u&&((I=r.current)==null||I.scrollTo({top:0}))},[u]),T.jsxs(Zw,{on:u,children:[T.jsxs("div",{className:"rule-bg-mod",children:[T.jsx("div",{className:`blur-bg bg ${d}`}),T.jsx("div",{className:"cover blur-filter-mod"})]}),T.jsx("div",{className:`rule-head-mod ${h}`,children:T.jsxs("div",{className:`list ${c}`,children:[T.jsx(Pe,{tcase:"upper",className:`item btn-mod ${a==0?"selected":""}`,onClick:S.bind(null,0),children:"payout"}),T.jsx(Pe,{tcase:"upper",className:`item btn-mod ${a==1?"selected":""}`,onClick:S.bind(null,1),children:"features"}),T.jsx(Pe,{tcase:"upper",className:`item btn-mod ${a==2?"selected":""}`,onClick:S.bind(null,2),children:"gameplay"})]})}),T.jsxs("div",{ref:r,className:"rule-page-mod hidden-scroolbar",onScroll:_,children:[T.jsxs("div",{ref:e,id:"geisha-payout",className:"paytable-mod clearfix",children:[T.jsx(Pe,{className:"title",tcase:"upper",children:"paytable"}),T.jsx("div",{children:v.map((I,A)=>T.jsxs("div",{className:`symbol-mod ${h}`,children:[T.jsx("div",{className:"left",children:T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-${I.s} ${d}`})}),T.jsx("div",{className:"right",children:I.detail.map((k,M)=>T.jsxs("div",{className:"item",children:[T.jsxs("div",{className:"count",children:[k.count,"x"]}),T.jsx("div",{className:"odd",children:k.odd})]},M))})]},"symbol"+A))})]}),T.jsxs("div",{ref:t,id:"geisha-features",className:"payline-mod",children:[T.jsx(Pe,{className:"title",children:"paylines"}),T.jsx("div",{className:"clearfix",children:b.map((I,A)=>T.jsxs("div",{className:`item ${h}`,children:[T.jsx("div",{className:"dib",style:{verticalAlign:"middle",padding:"1rem 1rem 1rem 0",color:"#ffffff"},children:A+1}),T.jsx("div",{className:"payline-table",style:{verticalAlign:"middle"},children:pr(3,k=>T.jsx("div",{className:"s-row",children:pr(5,M=>T.jsx("div",{className:`s-item ${I[`${M}${k}`]==!0?"selected":""}`},`payline-i-${M}`))},`s-${k}`))})]},`line${A}`))}),T.jsxs("div",{className:`description ${h}`,style:{marginTop:"2rem"},children:[T.jsx(Pe,{className:"text",tcase:"upper",replaceMap:{"{%line%}":"30"},children:"9lines"}),T.jsx(Pe,{className:"text",children:"cnfeature1"}),T.jsx(Pe,{className:"text",children:"cnfeature2"}),T.jsx(Pe,{className:"text",children:"cnfeature3"}),T.jsx(Pe,{className:"text",children:"cnfeature4"}),T.jsx(Pe,{className:"text",children:"payFeatures2"})]})]}),T.jsxs("div",{ref:n,className:"wild-scatter-mod",children:[T.jsx(Pe,{className:"title",children:"wild_scatter"}),T.jsxs("div",{children:[T.jsxs("div",{className:`description ${h} ${c==vt.English||c==vt.Japanese?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," appears on reel 2, 3 and 4"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," appears on main game"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," substitute for ALL symbols except ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.IndianHindi?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," रील 2, 3 और 4 पर दिखाई देता है"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," मुख्य गेम पर दिखाई देता है।"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `}),","," ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `}),"को छोड़कर सभी प्रतीकों के लिए स्थानापन्न है"]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Chinese?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `}),"会出现在卷轴 2、3 和 4 上"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `}),"会出现在主游戏中"]}),T.jsxs("div",{className:"text",children:["除了 ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})," 之外，",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `}),"替代所有符号。"]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Indonesian?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," Muncul pada reel 2, 3 dan 4"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," Muncul pada permainan utama"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," pengganti SEMUA simbol kecuali"," ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})," "]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Vietnamese?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:["Biểu tượng ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," xuất hiện trên các cuộn quay 2,3 và 4"]}),T.jsxs("div",{className:"text",children:["Biểu tượng ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," chỉ xuất hiện trong các lượt chơi chính"]}),T.jsxs("div",{className:"text",children:["Biểu tượng ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," thay thế cho tất cả các biểu tượng ngoại trừ ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})," "]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Korean?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," 는 2,3,4 릴에 나타납니다."]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," 는 메인 게임"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," 는"," ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})," 를 제외한 모든 심볼을 대체합니다."]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Khmer?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," លេចចេញនៅលើ Reel ទី2 ទី3 និងទី4"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," លេចចេញនៅលើ់ហ្គេមចំបង"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," បូកជាមួយនិមិត្តសញ្ញាទាំងអស់ លើកលែងតែ ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})," "]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Thai?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:["สัญลักษณ์ ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," ปรากฏที่วงล้อ 2,3 และ 4"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," ปรากฏในเกมหลักแล"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9 ${d} s-wild-scatter `})," แทนที่สัญลักษณ์ทั้งหมด ยกเว้น"," ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Turkish?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," MAKARA 2,3 ve 4'TE GÖRÜNÜYOR"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," ANA OYUNDA"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `}),","," ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})," hariç TÜM sembollerin yerine geçer"]})]}),T.jsxs("div",{className:`description ${h} ${c==vt.Portuguese?"db":"dn"}`,style:{verticalAlign:"middle"},children:[T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," APARECE NO REEL 2,3 and 4"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," APARECE NO JOGO PRINCIPAL"]}),T.jsxs("div",{className:"text",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-9${f} ${d} s-wild-scatter `})," SUBSTITUI TODOS OS SÍMBOLOS EXCETO ",T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d} s-wild-scatter `})]})]})]})]}),T.jsxs("div",{className:"bonus-mod",children:[T.jsx(Pe,{className:"title",tcase:"upper",children:"freespin"}),T.jsxs("div",{className:"ss-list",children:[T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d}`}),T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d}`}),T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-8${f} ${d}`})]}),T.jsxs("div",{className:`description ${h}`,children:[T.jsx(Pe,{className:"text",children:"cnfeature5"}),T.jsx(Pe,{className:"text text-coral",style:{fontSize:"2rem",padding:"2rem 0 2rem 0"},tcase:"upper",children:"cnfeature9"}),T.jsx(Pe,{className:"text",children:"cnfeature6"}),T.jsx(Pe,{className:"text text-coral",style:{fontSize:"1.2rem",padding:"2rem 0 0 0"},children:"cnfeature7"}),T.jsx(Pe,{className:"text",children:"cnfeature8"})]})]}),T.jsxs("div",{id:"geisha-payout",className:"paytable-mod clearfix",children:[T.jsx(Pe,{className:"title",tcase:"upper",children:"fs-paytable"}),T.jsx("div",{children:x.map((I,A)=>T.jsxs("div",{className:`symbol-mod symbol-mod-fs ${h}`,children:[T.jsx("div",{className:"left",children:T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-${I.s} ${d}`})}),T.jsx("div",{className:"right",children:I.detail.map((k,M)=>T.jsxs("div",{className:"item",children:[T.jsxs("div",{className:"count",children:[k.count,"x"]}),T.jsx("div",{className:"odd",children:k.odd})]},M))})]},"symbol"+A))}),T.jsx("div",{className:`description ${h}`,children:T.jsx(Pe,{className:"text",children:"cnfeature10"})}),T.jsx("div",{children:y.map((I,A)=>T.jsxs("div",{className:`symbol-mod symbol-mod-fs2 ${h}`,children:[T.jsx("div",{className:"left",children:T.jsx("div",{className:`icon-mod symbol carnivalshooter-symbol-${I.s} ${d}`})}),T.jsx("div",{className:"right",children:I.detail.map((k,M)=>T.jsxs("div",{className:"item",children:[T.jsxs("div",{className:"count",children:[k.count,"x"]}),T.jsx("div",{className:"odd",children:k.odd})]},M))})]},"symbol"+A))})]}),T.jsxs("div",{ref:i,id:"geisha-gameplay",className:"game-info-mod",children:[T.jsx(Pe,{className:"title",children:"gameplay"}),T.jsx("div",{className:"detail-table",children:T.jsxs("div",{children:[T.jsxs("div",{className:"item",children:[T.jsx(Pe,{children:"reel"}),T.jsx(Pe,{replaceMap:{"{%reel%}":"3 x 5"},children:"3_5reel"})]}),T.jsxs("div",{className:"item",children:[T.jsx(Pe,{children:"fixedlinesNo"}),T.jsx(Pe,{replaceMap:{"{%line%}":"30"},children:"9lines"})]}),T.jsxs("div",{className:"item",children:[T.jsx(Pe,{children:"defaultrtp"}),T.jsx("div",{children:"96.89%"})]})]})}),T.jsxs("div",{className:`description ${h}`,style:{marginTop:"2rem"},children:[T.jsx(Pe,{className:"text text-coral",children:"minmaxbet"}),T.jsx(Pe,{className:"text",children:"gameplay1"}),T.jsxs("div",{className:"clearfix",children:[T.jsxs("div",{className:"text fl",children:[T.jsx(Pe,{style:{fontWeight:"bold"},tmp:["example",":"]})," "]}),T.jsxs("div",{className:"fl",style:{width:"70%",paddingLeft:"0.5rem"},children:[T.jsx(Pe,{className:"text",children:"gameplay2"}),T.jsx(Pe,{className:"text",replaceMap:{"{%line%}":"30","{%amount%}":"1.00"},children:"gameplay3"}),T.jsx(Pe,{className:"text",replaceMap:{"{%amount%}":"30.00"},children:"gameplay4"})]})]})]}),T.jsxs("div",{className:`description ${h}`,children:[T.jsx(Pe,{className:"text text-coral",tmp:["howtoplay"]}),T.jsx("div",{children:T.jsx(Pe,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["1. ","howtoplay1"]})}),T.jsx("div",{children:T.jsx(Pe,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["2. ","howtoplay2"]})}),T.jsx("div",{children:T.jsx(Pe,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["3. ","howtoplay3"]})})]})]})]}),T.jsx(Bn,{className:"close-icon btn-mod",onClick:g,style:{position:"absolute",right:"1rem",top:"1.4rem",height:"2rem",width:"2rem"}})]})}const GV=()=>{const[r,e]=N.useState(!1);return T.jsxs(dz,{id:"game-canvas",className:"game-context-mod",children:[T.jsxs(pe,{children:[T.jsxs(pz,{children:[T.jsx(mG,{id:"preload",next:"load"}),T.jsx(Fz,{id:"load",next:"premain"}),T.jsx(bG,{id:"premain"}),T.jsx(pG,{id:"main",onFreeGame:t=>{e(t)}})]}),T.jsx(M$,{children:T.jsx(F$,{"l-x":300,"l-y":200,"p-x":300,"p-y":200})}),T.jsx(gz,{}),T.jsx(mz,{})]}),T.jsx(wz,{}),T.jsx(YV,{}),T.jsx($V,{}),T.jsx(AV,{}),T.jsx(vz,{}),T.jsx(kz,{}),T.jsxs(Cz,{children:[T.jsx(Pz,{}),T.jsx(Az,{})]}),T.jsx(Ez,{}),T.jsx(oG,{inFS:r})]})};yH(T.jsx(GV,{}),[Ee.Obj.urlOptions.lang])});export default WV();
