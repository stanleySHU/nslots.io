var MB=Object.defineProperty;var RB=(r,e,t)=>e in r?MB(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var OB=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var C=(r,e,t)=>RB(r,typeof e!="symbol"?e+"":e,t);var gV=OB((TV,Vg)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function uA(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var hA={exports:{}},pg={},cA={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd=Symbol.for("react.element"),BB=Symbol.for("react.portal"),LB=Symbol.for("react.fragment"),NB=Symbol.for("react.strict_mode"),FB=Symbol.for("react.profiler"),DB=Symbol.for("react.provider"),UB=Symbol.for("react.context"),jB=Symbol.for("react.forward_ref"),XB=Symbol.for("react.suspense"),HB=Symbol.for("react.memo"),zB=Symbol.for("react.lazy"),fT=Symbol.iterator;function $B(r){return r===null||typeof r!="object"?null:(r=fT&&r[fT]||r["@@iterator"],typeof r=="function"?r:null)}var dA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fA=Object.assign,pA={};function mh(r,e,t){this.props=r,this.context=e,this.refs=pA,this.updater=t||dA}mh.prototype.isReactComponent={};mh.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};mh.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function mA(){}mA.prototype=mh.prototype;function w_(r,e,t){this.props=r,this.context=e,this.refs=pA,this.updater=t||dA}var b_=w_.prototype=new mA;b_.constructor=w_;fA(b_,mh.prototype);b_.isPureReactComponent=!0;var pT=Array.isArray,gA=Object.prototype.hasOwnProperty,S_={current:null},vA={key:!0,ref:!0,__self:!0,__source:!0};function yA(r,e,t){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)gA.call(e,n)&&!vA.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(r&&r.defaultProps)for(n in a=r.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:fd,type:r,key:s,ref:o,props:i,_owner:S_.current}}function YB(r,e){return{$$typeof:fd,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function T_(r){return typeof r=="object"&&r!==null&&r.$$typeof===fd}function GB(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var mT=/\/+/g;function xv(r,e){return typeof r=="object"&&r!==null&&r.key!=null?GB(""+r.key):e.toString(36)}function Ap(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case fd:case BB:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+xv(o,0):n,pT(i)?(t="",r!=null&&(t=r.replace(mT,"$&/")+"/"),Ap(i,e,t,"",function(l){return l})):i!=null&&(T_(i)&&(i=YB(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(mT,"$&/")+"/")+r)),e.push(i)),1;if(o=0,n=n===""?".":n+":",pT(r))for(var a=0;a<r.length;a++){s=r[a];var u=n+xv(s,a);o+=Ap(s,e,t,u,i)}else if(u=$B(r),typeof u=="function")for(r=u.call(r),a=0;!(s=r.next()).done;)s=s.value,u=n+xv(s,a++),o+=Ap(s,e,t,u,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cf(r,e,t){if(r==null)return r;var n=[],i=0;return Ap(r,n,"","",function(s){return e.call(t,s,i++)}),n}function WB(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var rn={current:null},kp={transition:null},VB={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:kp,ReactCurrentOwner:S_};function xA(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Cf,forEach:function(r,e,t){Cf(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return Cf(r,function(){e++}),e},toArray:function(r){return Cf(r,function(e){return e})||[]},only:function(r){if(!T_(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};qe.Component=mh;qe.Fragment=LB;qe.Profiler=FB;qe.PureComponent=w_;qe.StrictMode=NB;qe.Suspense=XB;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VB;qe.act=xA;qe.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=fA({},r.props),i=r.key,s=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=S_.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(u in e)gA.call(e,u)&&!vA.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:fd,type:r.type,key:i,ref:s,props:n,_owner:o}};qe.createContext=function(r){return r={$$typeof:UB,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:DB,_context:r},r.Consumer=r};qe.createElement=yA;qe.createFactory=function(r){var e=yA.bind(null,r);return e.type=r,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(r){return{$$typeof:jB,render:r}};qe.isValidElement=T_;qe.lazy=function(r){return{$$typeof:zB,_payload:{_status:-1,_result:r},_init:WB}};qe.memo=function(r,e){return{$$typeof:HB,type:r,compare:e===void 0?null:e}};qe.startTransition=function(r){var e=kp.transition;kp.transition={};try{r()}finally{kp.transition=e}};qe.unstable_act=xA;qe.useCallback=function(r,e){return rn.current.useCallback(r,e)};qe.useContext=function(r){return rn.current.useContext(r)};qe.useDebugValue=function(){};qe.useDeferredValue=function(r){return rn.current.useDeferredValue(r)};qe.useEffect=function(r,e){return rn.current.useEffect(r,e)};qe.useId=function(){return rn.current.useId()};qe.useImperativeHandle=function(r,e,t){return rn.current.useImperativeHandle(r,e,t)};qe.useInsertionEffect=function(r,e){return rn.current.useInsertionEffect(r,e)};qe.useLayoutEffect=function(r,e){return rn.current.useLayoutEffect(r,e)};qe.useMemo=function(r,e){return rn.current.useMemo(r,e)};qe.useReducer=function(r,e,t){return rn.current.useReducer(r,e,t)};qe.useRef=function(r){return rn.current.useRef(r)};qe.useState=function(r){return rn.current.useState(r)};qe.useSyncExternalStore=function(r,e,t){return rn.current.useSyncExternalStore(r,e,t)};qe.useTransition=function(){return rn.current.useTransition()};qe.version="18.3.1";cA.exports=qe;var L=cA.exports;const ho=dd(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qB=L,KB=Symbol.for("react.element"),QB=Symbol.for("react.fragment"),ZB=Object.prototype.hasOwnProperty,JB=qB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eL={key:!0,ref:!0,__self:!0,__source:!0};function _A(r,e,t){var n,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)ZB.call(e,n)&&!eL.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:KB,type:r,key:s,ref:o,props:i,_owner:JB.current}}pg.Fragment=QB;pg.jsx=_A;pg.jsxs=_A;hA.exports=pg;var E=hA.exports;function Bn(r){return r!=null}function Vu(r){return r==null}function tL(r){return typeof r=="string"}function rL(r){return Object.keys(r).length===0&&r.constructor===Object}function nL(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];if(n!=null)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}const ag=class ag{constructor(){C(this,"mappings");this.mappings={}}static get Obj(){return this._Obj||(this._Obj=new ag),this._Obj}map(e,t){const n=new uL(e,t);return this.mappings[e]=n,n}unmap(e){this.mappings[e]=void 0}get(e,...t){const n=this.mappings[e];if(!Vu(n))return n.get(t)}resolve(){console.warn("Injector.resolve() is not implement yet")}};C(ag,"_Obj");let Jy=ag;class iL{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class sL{constructor(e){this.type=e}get(e){return wA(this.type,e)}destroy(){this.type=void 0}}class oL{constructor(e){this.func=e}get(...e){return this.func(...e)}destroy(){this.func=void 0}}class aL{constructor(e){C(this,"instance");this.type=e}get(e){return Vu(this.instance)&&(this.instance=wA(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class lL{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class uL{constructor(e,t){C(this,"provider");this.name=e,this.type=t}get(e){return Vu(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new iL(e)}toType(e){this.destroy(),this.provider=new sL(e)}toSingleton(e){this.destroy(),this.provider=new aL(e)}asSingleton(){if(this.destroy(),Vu(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new lL(e)}toFunction(e){this.destroy(),this.provider=new oL(e)}destroy(){Bn(this.provider)&&this.provider.destroy()}}function wA(r,e){switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}const xl=Jy.Obj;function $h(r){return xl.get(`action_fc:${r}`)}function E_(r,e){xl.map(`action_init:${r}`).toValue(e)}function iu(r){return xl.get(`action_init:${r}`)}const bA="apiService";function hL(r){return xl.map(bA).toSingleton(r)}function mg(){return xl.get(bA)}function pd(r,e){return xl.map(`parser:${r}`).toValue(e)}function Ys(r){return xl.get(`parser:${r}`)}function cL(r){const e={};for(const t in r){const n=r[t];e[t]=n.map((i,s)=>[s,i])}return e}function dL(r){const e={};for(const t in r){const n=r[t],i=n.length,s=[];for(let u=0;u<i;u++){const l=n[u];s.push([u+.5,l+.5])}const o=n[0];s.unshift([0,o+.5]);const a=n[i-1];s.push([i,a+.5]),e[t]=s}return e}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var su=9e15,ba=1e9,e1="0123456789abcdef",nm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",im="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",t1={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-su,maxE:su,crypto:!1},SA,ao,Ue=!0,gg="[DecimalError] ",va=gg+"Invalid argument: ",TA=gg+"Precision limit exceeded",EA=gg+"crypto unavailable",CA="[object Decimal]",Gr=Math.floor,ur=Math.pow,fL=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,pL=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,mL=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,PA=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ni=1e7,Le=7,gL=9007199254740991,vL=nm.length-1,r1=im.length-1,oe={toStringTag:CA};oe.absoluteValue=oe.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),ke(r)};oe.ceil=function(){return ke(new this.constructor(this),this.e+1,2)};oe.clampedTo=oe.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(va+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};oe.comparedTo=oe.cmp=function(r){var e,t,n,i,s=this,o=s.d,a=(r=new s.constructor(r)).d,u=s.s,l=r.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==r.e)return s.e>r.e^u<0?1:-1;for(n=o.length,i=a.length,e=0,t=n<i?n:i;e<t;++e)if(o[e]!==a[e])return o[e]>a[e]^u<0?1:-1;return n===i?0:n>i^u<0?1:-1};oe.cosine=oe.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Le,n.rounding=1,t=yL(n,RA(n,t)),n.precision=r,n.rounding=e,ke(ao==2||ao==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};oe.cubeRoot=oe.cbrt=function(){var r,e,t,n,i,s,o,a,u,l,c=this,h=c.constructor;if(!c.isFinite()||c.isZero())return new h(c);for(Ue=!1,s=c.s*ur(c.s*c,1/3),!s||Math.abs(s)==1/0?(t=Rr(c.d),r=c.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=ur(t,1/3),r=Gr((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new h(t),n.s=c.s):n=new h(s.toString()),o=(r=h.precision)+3;;)if(a=n,u=a.times(a).times(a),l=u.plus(c),n=mt(l.plus(c).times(a),l.plus(u),o+2,1),Rr(a.d).slice(0,o)===(t=Rr(n.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(ke(a,r+1,0),a.times(a).times(a).eq(c))){n=a;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(ke(n,r+1,1),e=!n.times(n).times(n).eq(c));break}return Ue=!0,ke(n,r,h.rounding,e)};oe.decimalPlaces=oe.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-Gr(this.e/Le))*Le,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};oe.dividedBy=oe.div=function(r){return mt(this,new this.constructor(r))};oe.dividedToIntegerBy=oe.divToInt=function(r){var e=this,t=e.constructor;return ke(mt(e,new t(r),0,1,1),t.precision,t.rounding)};oe.equals=oe.eq=function(r){return this.cmp(r)===0};oe.floor=function(){return ke(new this.constructor(this),this.e+1,3)};oe.greaterThan=oe.gt=function(r){return this.cmp(r)>0};oe.greaterThanOrEqualTo=oe.gte=function(r){var e=this.cmp(r);return e==1||e===0};oe.hyperbolicCosine=oe.cosh=function(){var r,e,t,n,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;t=o.precision,n=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/yg(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=qu(o,1,s.times(e),new o(1),!0);for(var u,l=r,c=new o(8);l--;)u=s.times(s),s=a.minus(u.times(c.minus(u.times(c))));return ke(s,o.precision=t,o.rounding=n,!0)};oe.hyperbolicSine=oe.sinh=function(){var r,e,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=qu(s,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/yg(5,r)),i=qu(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);r--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=e,s.rounding=t,ke(i,e,t,!0)};oe.hyperbolicTangent=oe.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,mt(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};oe.inverseCosine=oe.acos=function(){var r,e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,s=t.rounding;return n!==-1?n===0?e.isNeg()?Ri(t,i,s):new t(0):new t(NaN):e.isZero()?Ri(t,i+4,s).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),r=Ri(t,i+4,s).times(.5),t.precision=i,t.rounding=s,r.minus(e))};oe.inverseHyperbolicCosine=oe.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,Ue=!1,t=t.times(t).minus(1).sqrt().plus(t),Ue=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};oe.inverseHyperbolicSine=oe.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,Ue=!1,t=t.times(t).plus(1).sqrt().plus(t),Ue=!0,n.precision=r,n.rounding=e,t.ln())};oe.inverseHyperbolicTangent=oe.atanh=function(){var r,e,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?ke(new s(i),r,e,!0):(s.precision=t=n-i.e,i=mt(i.plus(1),new s(1).minus(i),t+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};oe.inverseSine=oe.asin=function(){var r,e,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=Ri(s,t+4,n).times(.5),r.s=i.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};oe.inverseTangent=oe.atan=function(){var r,e,t,n,i,s,o,a,u,l=this,c=l.constructor,h=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&h+4<=r1)return o=Ri(c,h+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new c(NaN);if(h+4<=r1)return o=Ri(c,h+4,d).times(.5),o.s=l.s,o}for(c.precision=a=h+10,c.rounding=1,t=Math.min(28,a/Le+2|0),r=t;r;--r)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Ue=!1,e=Math.ceil(a/Le),n=1,u=l.times(l),o=new c(l),i=l;r!==-1;)if(i=i.times(u),s=o.minus(i.div(n+=2)),i=i.times(u),o=s.plus(i.div(n+=2)),o.d[e]!==void 0)for(r=e;o.d[r]===s.d[r]&&r--;);return t&&(o=o.times(2<<t-1)),Ue=!0,ke(o,c.precision=h,c.rounding=d,!0)};oe.isFinite=function(){return!!this.d};oe.isInteger=oe.isInt=function(){return!!this.d&&Gr(this.e/Le)>this.d.length-2};oe.isNaN=function(){return!this.s};oe.isNegative=oe.isNeg=function(){return this.s<0};oe.isPositive=oe.isPos=function(){return this.s>0};oe.isZero=function(){return!!this.d&&this.d[0]===0};oe.lessThan=oe.lt=function(r){return this.cmp(r)<0};oe.lessThanOrEqualTo=oe.lte=function(r){return this.cmp(r)<1};oe.logarithm=oe.log=function(r){var e,t,n,i,s,o,a,u,l=this,c=l.constructor,h=c.precision,d=c.rounding,p=5;if(r==null)r=new c(10),e=!0;else{if(r=new c(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new c(NaN);e=r.eq(10)}if(t=l.d,l.s<0||!t||!t[0]||l.eq(1))return new c(t&&!t[0]?-1/0:l.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(Ue=!1,a=h+p,o=Jo(l,a),n=e?sm(c,a+10):Jo(r,a),u=mt(o,n,a,1),Fc(u.d,i=h,d))do if(a+=10,o=Jo(l,a),n=e?sm(c,a+10):Jo(r,a),u=mt(o,n,a,1),!s){+Rr(u.d).slice(i+1,i+15)+1==1e14&&(u=ke(u,h+1,0));break}while(Fc(u.d,i+=10,d));return Ue=!0,ke(u,h,d)};oe.minus=oe.sub=function(r){var e,t,n,i,s,o,a,u,l,c,h,d,p=this,g=p.constructor;if(r=new g(r),!p.d||!r.d)return!p.s||!r.s?r=new g(NaN):p.d?r.s=-r.s:r=new g(r.d||p.s!==r.s?p:NaN),r;if(p.s!=r.s)return r.s=-r.s,p.plus(r);if(l=p.d,d=r.d,a=g.precision,u=g.rounding,!l[0]||!d[0]){if(d[0])r.s=-r.s;else if(l[0])r=new g(p);else return new g(u===3?-0:0);return Ue?ke(r,a,u):r}if(t=Gr(r.e/Le),c=Gr(p.e/Le),l=l.slice(),s=c-t,s){for(h=s<0,h?(e=l,s=-s,o=d.length):(e=d,t=c,o=l.length),n=Math.max(Math.ceil(a/Le),o)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=l.length,o=d.length,h=n<o,h&&(o=n),n=0;n<o;n++)if(l[n]!=d[n]){h=l[n]<d[n];break}s=0}for(h&&(e=l,l=d,d=e,r.s=-r.s),o=l.length,n=d.length-o;n>0;--n)l[o++]=0;for(n=d.length;n>s;){if(l[--n]<d[n]){for(i=n;i&&l[--i]===0;)l[i]=Ni-1;--l[i],l[n]+=Ni}l[n]-=d[n]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--t;return l[0]?(r.d=l,r.e=vg(l,t),Ue?ke(r,a,u):r):new g(u===3?-0:0)};oe.modulo=oe.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?ke(new n(t),n.precision,n.rounding):(Ue=!1,n.modulo==9?(e=mt(t,r.abs(),0,3,1),e.s*=r.s):e=mt(t,r,0,n.modulo,1),e=e.times(r),Ue=!0,t.minus(e))};oe.naturalExponential=oe.exp=function(){return n1(this)};oe.naturalLogarithm=oe.ln=function(){return Jo(this)};oe.negated=oe.neg=function(){var r=new this.constructor(this);return r.s=-r.s,ke(r)};oe.plus=oe.add=function(r){var e,t,n,i,s,o,a,u,l,c,h=this,d=h.constructor;if(r=new d(r),!h.d||!r.d)return!h.s||!r.s?r=new d(NaN):h.d||(r=new d(r.d||h.s===r.s?h:NaN)),r;if(h.s!=r.s)return r.s=-r.s,h.minus(r);if(l=h.d,c=r.d,a=d.precision,u=d.rounding,!l[0]||!c[0])return c[0]||(r=new d(h)),Ue?ke(r,a,u):r;if(s=Gr(h.e/Le),n=Gr(r.e/Le),l=l.slice(),i=s-n,i){for(i<0?(t=l,i=-i,o=c.length):(t=c,n=s,o=l.length),s=Math.ceil(a/Le),o=s>o?s+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=l.length,i=c.length,o-i<0&&(i=o,t=c,c=l,l=t),e=0;i;)e=(l[--i]=l[i]+c[i]+e)/Ni|0,l[i]%=Ni;for(e&&(l.unshift(e),++n),o=l.length;l[--o]==0;)l.pop();return r.d=l,r.e=vg(l,n),Ue?ke(r,a,u):r};oe.precision=oe.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(va+r);return t.d?(e=AA(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};oe.round=function(){var r=this,e=r.constructor;return ke(new e(r),r.e+1,e.rounding)};oe.sine=oe.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Le,n.rounding=1,t=_L(n,RA(n,t)),n.precision=r,n.rounding=e,ke(ao>2?t.neg():t,r,e,!0)):new n(NaN)};oe.squareRoot=oe.sqrt=function(){var r,e,t,n,i,s,o=this,a=o.d,u=o.e,l=o.s,c=o.constructor;if(l!==1||!a||!a[0])return new c(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(Ue=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=Rr(a),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Gr((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),n=new c(e)):n=new c(l.toString()),t=(u=c.precision)+3;;)if(s=n,n=s.plus(mt(o,s,t+2,1)).times(.5),Rr(s.d).slice(0,t)===(e=Rr(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(ke(s,u+1,0),s.times(s).eq(o))){n=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(ke(n,u+1,1),r=!n.times(n).eq(o));break}return Ue=!0,ke(n,u,c.rounding,r)};oe.tangent=oe.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=mt(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,ke(ao==2||ao==4?t.neg():t,r,e,!0)):new n(NaN)};oe.times=oe.mul=function(r){var e,t,n,i,s,o,a,u,l,c=this,h=c.constructor,d=c.d,p=(r=new h(r)).d;if(r.s*=c.s,!d||!d[0]||!p||!p[0])return new h(!r.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:!d||!p?r.s/0:r.s*0);for(t=Gr(c.e/Le)+Gr(r.e/Le),u=d.length,l=p.length,u<l&&(s=d,d=p,p=s,o=u,u=l,l=o),s=[],o=u+l,n=o;n--;)s.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)a=s[i]+p[n]*d[i-n-1]+e,s[i--]=a%Ni|0,e=a/Ni|0;s[i]=(s[i]+e)%Ni|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),r.d=s,r.e=vg(s,t),Ue?ke(r,h.precision,h.rounding):r};oe.toBinary=function(r,e){return C_(this,2,r,e)};oe.toDecimalPlaces=oe.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(bn(r,0,ba),e===void 0?e=n.rounding:bn(e,0,8),ke(t,r+t.e+1,e))};oe.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Rs(n,!0):(bn(r,0,ba),e===void 0?e=i.rounding:bn(e,0,8),n=ke(new i(n),r+1,e),t=Rs(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};oe.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?t=Rs(i):(bn(r,0,ba),e===void 0?e=s.rounding:bn(e,0,8),n=ke(new s(i),r+i.e+1,e),t=Rs(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};oe.toFraction=function(r){var e,t,n,i,s,o,a,u,l,c,h,d,p=this,g=p.d,v=p.constructor;if(!g)return new v(p);if(l=t=new v(1),n=u=new v(0),e=new v(n),s=e.e=AA(g)-p.e-1,o=s%Le,e.d[0]=ur(10,o<0?Le+o:o),r==null)r=s>0?e:l;else{if(a=new v(r),!a.isInt()||a.lt(l))throw Error(va+a);r=a.gt(e)?s>0?e:l:a}for(Ue=!1,a=new v(Rr(g)),c=v.precision,v.precision=s=g.length*Le*2;h=mt(a,e,0,1,1),i=t.plus(h.times(n)),i.cmp(r)!=1;)t=n,n=i,i=l,l=u.plus(h.times(i)),u=i,i=e,e=a.minus(h.times(i)),a=i;return i=mt(r.minus(t),n,0,1,1),u=u.plus(i.times(l)),t=t.plus(i.times(n)),u.s=l.s=p.s,d=mt(l,n,s,1).minus(p).abs().cmp(mt(u,t,s,1).minus(p).abs())<1?[l,n]:[u,t],v.precision=c,Ue=!0,d};oe.toHexadecimal=oe.toHex=function(r,e){return C_(this,16,r,e)};oe.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:bn(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(Ue=!1,t=mt(t,r,0,e,1).times(r),Ue=!0,ke(t)):(r.s=t.s,t=r),t};oe.toNumber=function(){return+this};oe.toOctal=function(r,e){return C_(this,8,r,e)};oe.toPower=oe.pow=function(r){var e,t,n,i,s,o,a=this,u=a.constructor,l=+(r=new u(r));if(!a.d||!r.d||!a.d[0]||!r.d[0])return new u(ur(+a,l));if(a=new u(a),a.eq(1))return a;if(n=u.precision,s=u.rounding,r.eq(1))return ke(a,n,s);if(e=Gr(r.e/Le),e>=r.d.length-1&&(t=l<0?-l:l)<=gL)return i=kA(u,a,t,n),r.s<0?new u(1).div(i):ke(i,n,s);if(o=a.s,o<0){if(e<r.d.length-1)return new u(NaN);if(r.d[e]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return t=ur(+a,l),e=t==0||!isFinite(t)?Gr(l*(Math.log("0."+Rr(a.d))/Math.LN10+a.e+1)):new u(t+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(Ue=!1,u.rounding=a.s=1,t=Math.min(12,(e+"").length),i=n1(r.times(Jo(a,n+t)),n),i.d&&(i=ke(i,n+5,1),Fc(i.d,n,s)&&(e=n+10,i=ke(n1(r.times(Jo(a,e+t)),e),e+5,1),+Rr(i.d).slice(n+1,n+15)+1==1e14&&(i=ke(i,n+1,0)))),i.s=o,Ue=!0,u.rounding=s,ke(i,n,s))};oe.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Rs(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(bn(r,1,ba),e===void 0?e=i.rounding:bn(e,0,8),n=ke(new i(n),r,e),t=Rs(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};oe.toSignificantDigits=oe.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(bn(r,1,ba),e===void 0?e=n.rounding:bn(e,0,8)),ke(new n(t),r,e)};oe.toString=function(){var r=this,e=r.constructor,t=Rs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};oe.truncated=oe.trunc=function(){return ke(new this.constructor(this),this.e+1,1)};oe.valueOf=oe.toJSON=function(){var r=this,e=r.constructor,t=Rs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Rr(r){var e,t,n,i=r.length-1,s="",o=r[0];if(i>0){for(s+=o,e=1;e<i;e++)n=r[e]+"",t=Le-n.length,t&&(s+=Ho(t)),s+=n;o=r[e],n=o+"",t=Le-n.length,t&&(s+=Ho(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function bn(r,e,t){if(r!==~~r||r<e||r>t)throw Error(va+r)}function Fc(r,e,t,n){var i,s,o,a;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=Le,i=0):(i=Math.ceil((e+1)/Le),e%=Le),s=ur(10,Le-e),a=r[i]%s|0,n==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):o=(t<4&&a+1==s||t>3&&a+1==s/2)&&(r[i+1]/s/100|0)==ur(10,e-2)-1||(a==s/2||a==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(n||t<4)&&a==9999||!n&&t>3&&a==4999):o=((n||t<4)&&a+1==s||!n&&t>3&&a+1==s/2)&&(r[i+1]/s/1e3|0)==ur(10,e-3)-1,o}function Ip(r,e,t){for(var n,i=[0],s,o=0,a=r.length;o<a;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=e1.indexOf(r.charAt(o++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function yL(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/yg(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=qu(r,1,e.times(i),new r(1));for(var s=t;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return r.precision-=t,e}var mt=function(){function r(n,i,s){var o,a=0,u=n.length;for(n=n.slice();u--;)o=n[u]*i+a,n[u]=o%s|0,a=o/s|0;return a&&n.unshift(a),n}function e(n,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(n[a]!=i[a]){u=n[a]>i[a]?1:-1;break}return u}function t(n,i,s,o){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*o+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o,a,u){var l,c,h,d,p,g,v,x,y,b,_,S,I,A,k,M,O,F,U,X,B=n.constructor,N=n.s==i.s?1:-1,j=n.d,W=i.d;if(!j||!j[0]||!W||!W[0])return new B(!n.s||!i.s||(j?W&&j[0]==W[0]:!W)?NaN:j&&j[0]==0||!W?N*0:N/0);for(u?(p=1,c=n.e-i.e):(u=Ni,p=Le,c=Gr(n.e/p)-Gr(i.e/p)),U=W.length,O=j.length,y=new B(N),b=y.d=[],h=0;W[h]==(j[h]||0);h++);if(W[h]>(j[h]||0)&&c--,s==null?(A=s=B.precision,o=B.rounding):a?A=s+(n.e-i.e)+1:A=s,A<0)b.push(1),g=!0;else{if(A=A/p+2|0,h=0,U==1){for(d=0,W=W[0],A++;(h<O||d)&&A--;h++)k=d*u+(j[h]||0),b[h]=k/W|0,d=k%W|0;g=d||h<O}else{for(d=u/(W[0]+1)|0,d>1&&(W=r(W,d,u),j=r(j,d,u),U=W.length,O=j.length),M=U,_=j.slice(0,U),S=_.length;S<U;)_[S++]=0;X=W.slice(),X.unshift(0),F=W[0],W[1]>=u/2&&++F;do d=0,l=e(W,_,U,S),l<0?(I=_[0],U!=S&&(I=I*u+(_[1]||0)),d=I/F|0,d>1?(d>=u&&(d=u-1),v=r(W,d,u),x=v.length,S=_.length,l=e(v,_,x,S),l==1&&(d--,t(v,U<x?X:W,x,u))):(d==0&&(l=d=1),v=W.slice()),x=v.length,x<S&&v.unshift(0),t(_,v,S,u),l==-1&&(S=_.length,l=e(W,_,U,S),l<1&&(d++,t(_,U<S?X:W,S,u))),S=_.length):l===0&&(d++,_=[0]),b[h++]=d,l&&_[0]?_[S++]=j[M]||0:(_=[j[M]],S=1);while((M++<O||_[0]!==void 0)&&A--);g=_[0]!==void 0}b[0]||b.shift()}if(p==1)y.e=c,SA=g;else{for(h=1,d=b[0];d>=10;d/=10)h++;y.e=h+c*p-1,ke(y,a?s+y.e+1:s,o,g)}return y}}();function ke(r,e,t,n){var i,s,o,a,u,l,c,h,d,p=r.constructor;e:if(e!=null){if(h=r.d,!h)return r;for(i=1,a=h[0];a>=10;a/=10)i++;if(s=e-i,s<0)s+=Le,o=e,c=h[d=0],u=c/ur(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Le),a=h.length,d>=a)if(n){for(;a++<=d;)h.push(0);c=u=0,i=1,s%=Le,o=s-Le+1}else break e;else{for(c=a=h[d],i=1;a>=10;a/=10)i++;s%=Le,o=s-Le+i,u=o<0?0:c/ur(10,i-o-1)%10|0}if(n=n||e<0||h[d+1]!==void 0||(o<0?c:c%ur(10,i-o-1)),l=t<4?(u||n)&&(t==0||t==(r.s<0?3:2)):u>5||u==5&&(t==4||n||t==6&&(s>0?o>0?c/ur(10,i-o):0:h[d-1])%10&1||t==(r.s<0?8:7)),e<1||!h[0])return h.length=0,l?(e-=r.e+1,h[0]=ur(10,(Le-e%Le)%Le),r.e=-e||0):h[0]=r.e=0,r;if(s==0?(h.length=d,a=1,d--):(h.length=d+1,a=ur(10,Le-s),h[d]=o>0?(c/ur(10,i-o)%ur(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=h[0];o>=10;o/=10)s++;for(o=h[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(r.e++,h[0]==Ni&&(h[0]=1));break}else{if(h[d]+=a,h[d]!=Ni)break;h[d--]=0,a=1}for(s=h.length;h[--s]===0;)h.pop()}return Ue&&(r.e>p.maxE?(r.d=null,r.e=NaN):r.e<p.minE&&(r.e=0,r.d=[0])),r}function Rs(r,e,t){if(!r.isFinite())return MA(r);var n,i=r.e,s=Rr(r.d),o=s.length;return e?(t&&(n=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ho(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+Ho(-i-1)+s,t&&(n=t-o)>0&&(s+=Ho(n))):i>=o?(s+=Ho(i+1-o),t&&(n=t-i-1)>0&&(s=s+"."+Ho(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-o)>0&&(i+1===o&&(s+="."),s+=Ho(n))),s}function vg(r,e){var t=r[0];for(e*=Le;t>=10;t/=10)e++;return e}function sm(r,e,t){if(e>vL)throw Ue=!0,t&&(r.precision=t),Error(TA);return ke(new r(nm),e,1,!0)}function Ri(r,e,t){if(e>r1)throw Error(TA);return ke(new r(im),e,t,!0)}function AA(r){var e=r.length-1,t=e*Le+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function Ho(r){for(var e="";r--;)e+="0";return e}function kA(r,e,t,n){var i,s=new r(1),o=Math.ceil(n/Le+4);for(Ue=!1;;){if(t%2&&(s=s.times(e),vT(s.d,o)&&(i=!0)),t=Gr(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),vT(e.d,o)}return Ue=!0,s}function gT(r){return r.d[r.d.length-1]&1}function IA(r,e,t){for(var n,i=new r(e[0]),s=0;++s<e.length;)if(n=new r(e[s]),n.s)i[t](n)&&(i=n);else{i=n;break}return i}function n1(r,e){var t,n,i,s,o,a,u,l=0,c=0,h=0,d=r.constructor,p=d.rounding,g=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(Ue=!1,u=g):u=e,a=new d(.03125);r.e>-2;)r=r.times(a),h+=5;for(n=Math.log(ur(2,h))/Math.LN10*2+5|0,u+=n,t=s=o=new d(1),d.precision=u;;){if(s=ke(s.times(r),u,1),t=t.times(++c),a=o.plus(mt(s,t,u,1)),Rr(a.d).slice(0,u)===Rr(o.d).slice(0,u)){for(i=h;i--;)o=ke(o.times(o),u,1);if(e==null)if(l<3&&Fc(o.d,u-n,p,l))d.precision=u+=10,t=s=a=new d(1),c=0,l++;else return ke(o,d.precision=g,p,Ue=!0);else return d.precision=g,o}o=a}}function Jo(r,e){var t,n,i,s,o,a,u,l,c,h,d,p=1,g=10,v=r,x=v.d,y=v.constructor,b=y.rounding,_=y.precision;if(v.s<0||!x||!x[0]||!v.e&&x[0]==1&&x.length==1)return new y(x&&!x[0]?-1/0:v.s!=1?NaN:x?0:v);if(e==null?(Ue=!1,c=_):c=e,y.precision=c+=g,t=Rr(x),n=t.charAt(0),Math.abs(s=v.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)v=v.times(r),t=Rr(v.d),n=t.charAt(0),p++;s=v.e,n>1?(v=new y("0."+t),s++):v=new y(n+"."+t.slice(1))}else return l=sm(y,c+2,_).times(s+""),v=Jo(new y(n+"."+t.slice(1)),c-g).plus(l),y.precision=_,e==null?ke(v,_,b,Ue=!0):v;for(h=v,u=o=v=mt(v.minus(1),v.plus(1),c,1),d=ke(v.times(v),c,1),i=3;;){if(o=ke(o.times(d),c,1),l=u.plus(mt(o,new y(i),c,1)),Rr(l.d).slice(0,c)===Rr(u.d).slice(0,c))if(u=u.times(2),s!==0&&(u=u.plus(sm(y,c+2,_).times(s+""))),u=mt(u,new y(p),c,1),e==null)if(Fc(u.d,c-g,b,a))y.precision=c+=g,l=o=v=mt(h.minus(1),h.plus(1),c,1),d=ke(v.times(v),c,1),i=a=1;else return ke(u,y.precision=_,b,Ue=!0);else return y.precision=_,u;u=l,i+=2}}function MA(r){return String(r.s*r.s/0)}function i1(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%Le,t<0&&(n+=Le),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Le;n<i;)r.d.push(+e.slice(n,n+=Le));e=e.slice(n),n=Le-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),Ue&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function xL(r,e){var t,n,i,s,o,a,u,l,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),PA.test(e))return i1(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(pL.test(e))t=16,e=e.toLowerCase();else if(fL.test(e))t=2;else if(mL.test(e))t=8;else throw Error(va+e);for(s=e.search(/p/i),s>0?(u=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,n=r.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,i=kA(n,new n(t),s,s*2)),l=Ip(e,t,Ni),c=l.length-1,s=c;l[s]===0;--s)l.pop();return s<0?new n(r.s*0):(r.e=vg(l,c),r.d=l,Ue=!1,o&&(r=mt(r,i,a*4)),u&&(r=r.times(Math.abs(u)<54?ur(2,u):rt.pow(2,u))),Ue=!0,r)}function _L(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:qu(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/yg(5,t)),e=qu(r,2,e,e);for(var i,s=new r(5),o=new r(16),a=new r(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}function qu(r,e,t,n,i){var s,o,a,u,l=r.precision,c=Math.ceil(l/Le);for(Ue=!1,u=t.times(t),a=new r(n);;){if(o=mt(a.times(u),new r(e++*e++),l,1),a=i?n.plus(o):n.minus(o),n=mt(o.times(u),new r(e++*e++),l,1),o=a.plus(n),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=n,n=o,o=s}return Ue=!0,o.d.length=c+1,o}function yg(r,e){for(var t=r;--e;)t*=r;return t}function RA(r,e){var t,n=e.s<0,i=Ri(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return ao=n?4:1,e;if(t=e.divToInt(i),t.isZero())ao=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return ao=gT(t)?n?2:3:n?4:1,e;ao=gT(t)?n?1:4:n?3:2}return e.minus(i).abs()}function C_(r,e,t,n){var i,s,o,a,u,l,c,h,d,p=r.constructor,g=t!==void 0;if(g?(bn(t,1,ba),n===void 0?n=p.rounding:bn(n,0,8)):(t=p.precision,n=p.rounding),!r.isFinite())c=MA(r);else{for(c=Rs(r),o=c.indexOf("."),g?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(c=c.replace(".",""),d=new p(1),d.e=c.length-o,d.d=Ip(Rs(d),10,i),d.e=d.d.length),h=Ip(c,10,i),s=u=h.length;h[--u]==0;)h.pop();if(!h[0])c=g?"0p+0":"0";else{if(o<0?s--:(r=new p(r),r.d=h,r.e=s,r=mt(r,d,t,n,0,i),h=r.d,s=r.e,l=SA),o=h[t],a=i/2,l=l||h[t+1]!==void 0,l=n<4?(o!==void 0||l)&&(n===0||n===(r.s<0?3:2)):o>a||o===a&&(n===4||l||n===6&&h[t-1]&1||n===(r.s<0?8:7)),h.length=t,l)for(;++h[--t]>i-1;)h[t]=0,t||(++s,h.unshift(1));for(u=h.length;!h[u-1];--u);for(o=0,c="";o<u;o++)c+=e1.charAt(h[o]);if(g){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)c+="0";for(h=Ip(c,i,e),u=h.length;!h[u-1];--u);for(o=1,c="1.";o<u;o++)c+=e1.charAt(h[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>u)for(s-=u;s--;)c+="0";else s<u&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return r.s<0?"-"+c:c}function vT(r,e){if(r.length>e)return r.length=e,!0}function wL(r){return new this(r).abs()}function bL(r){return new this(r).acos()}function SL(r){return new this(r).acosh()}function TL(r,e){return new this(r).plus(e)}function EL(r){return new this(r).asin()}function CL(r){return new this(r).asinh()}function PL(r){return new this(r).atan()}function AL(r){return new this(r).atanh()}function kL(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Ri(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Ri(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Ri(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(mt(r,e,s,1)),e=Ri(this,s,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(mt(r,e,s,1)),t}function IL(r){return new this(r).cbrt()}function ML(r){return ke(r=new this(r),r.e+1,2)}function RL(r,e,t){return new this(r).clamp(e,t)}function OL(r){if(!r||typeof r!="object")throw Error(gg+"Object expected");var e,t,n,i=r.defaults===!0,s=["precision",1,ba,"rounding",0,8,"toExpNeg",-su,0,"toExpPos",0,su,"maxE",0,su,"minE",-su,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=t1[t]),(n=r[t])!==void 0)if(Gr(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(va+t+": "+n);if(t="crypto",i&&(this[t]=t1[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(EA);else this[t]=!1;else throw Error(va+t+": "+n);return this}function BL(r){return new this(r).cos()}function LL(r){return new this(r).cosh()}function OA(r){var e,t,n;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,yT(s)){l.s=s.s,Ue?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Ue?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return i1(l,s.toString())}else if(u!=="string")throw Error(va+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),PA.test(s)?i1(l,s):xL(l,s)}if(i.prototype=oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=OL,i.clone=OA,i.isDecimal=yT,i.abs=wL,i.acos=bL,i.acosh=SL,i.add=TL,i.asin=EL,i.asinh=CL,i.atan=PL,i.atanh=AL,i.atan2=kL,i.cbrt=IL,i.ceil=ML,i.clamp=RL,i.cos=BL,i.cosh=LL,i.div=NL,i.exp=FL,i.floor=DL,i.hypot=UL,i.ln=jL,i.log=XL,i.log10=zL,i.log2=HL,i.max=$L,i.min=YL,i.mod=GL,i.mul=WL,i.pow=VL,i.random=qL,i.round=KL,i.sign=QL,i.sin=ZL,i.sinh=JL,i.sqrt=eN,i.sub=tN,i.sum=rN,i.tan=nN,i.tanh=iN,i.trunc=sN,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function NL(r,e){return new this(r).div(e)}function FL(r){return new this(r).exp()}function DL(r){return ke(r=new this(r),r.e+1,3)}function UL(){var r,e,t=new this(0);for(Ue=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Ue=!0,new this(1/0);t=e}return Ue=!0,t.sqrt()}function yT(r){return r instanceof rt||r&&r.toStringTag===CA||!1}function jL(r){return new this(r).ln()}function XL(r,e){return new this(r).log(e)}function HL(r){return new this(r).log(2)}function zL(r){return new this(r).log(10)}function $L(){return IA(this,arguments,"lt")}function YL(){return IA(this,arguments,"gt")}function GL(r,e){return new this(r).mod(e)}function WL(r,e){return new this(r).mul(e)}function VL(r,e){return new this(r).pow(e)}function qL(r){var e,t,n,i,s=0,o=new this(1),a=[];if(r===void 0?r=this.precision:bn(r,1,ba),n=Math.ceil(r/Le),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=n/4}else throw Error(EA);else for(;s<n;)a[s++]=Math.random()*1e7|0;for(n=a[--s],r%=Le,n&&r&&(i=ur(10,Le-r),a[s]=(n/i|0)*i);a[s]===0;s--)a.pop();if(s<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=Le)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<Le&&(t-=Le-n)}return o.e=t,o.d=a,o}function KL(r){return ke(r=new this(r),r.e+1,this.rounding)}function QL(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function ZL(r){return new this(r).sin()}function JL(r){return new this(r).sinh()}function eN(r){return new this(r).sqrt()}function tN(r,e){return new this(r).sub(e)}function rN(){var r=0,e=arguments,t=new this(e[r]);for(Ue=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return Ue=!0,ke(t,this.precision,this.rounding)}function nN(r){return new this(r).tan()}function iN(r){return new this(r).tanh()}function sN(r){return ke(r=new this(r),r.e+1,1)}oe[Symbol.for("nodejs.util.inspect.custom")]=oe.toString;oe[Symbol.toStringTag]="Decimal";var rt=oe.constructor=OA(t1);nm=new rt(nm);im=new rt(im);const oN="geisha",aN=1721126919199,lN={title:oN,assetVersion:aN},_v={},uN={row:3,column:5,paylineMapV2:_v,paylineMap:cL(_v),paylinePathMap:dL(_v),symbolSize:[104,102],symbolFrame:[104,102]};E_("table",uN);const hN={id:5,version:"1.0.0",layoutMap:{l:{safeArea:[0,240,1170,770],displayArea:[0,70,1170,1100]},p:{safeArea:[230,0,700,1170],displayArea:[150,0,870,1170]}}};E_("gameconfig",Object.assign(hN,lN));const cN={spin:{betLevel:new rt(10),betAmount:new rt(.01)}};E_("spin",cN);const gt=L.createContext({});var dN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fN=window.device,fe={},s1=[];window.device=fe;var Dc=window.document.documentElement,pN=window.navigator.userAgent.toLowerCase(),xT=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","pov_tv","hbbtv","ce-html"];fe.macos=function(){return Zt("mac")};fe.ios=function(){return fe.iphone()||fe.ipod()||fe.ipad()};fe.iphone=function(){return!fe.windows()&&Zt("iphone")};fe.ipod=function(){return Zt("ipod")};fe.ipad=function(){var r=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;return Zt("ipad")||r};fe.android=function(){return!fe.windows()&&Zt("android")};fe.androidPhone=function(){return fe.android()&&Zt("mobile")};fe.androidTablet=function(){return fe.android()&&!Zt("mobile")};fe.blackberry=function(){return Zt("blackberry")||Zt("bb10")};fe.blackberryPhone=function(){return fe.blackberry()&&!Zt("tablet")};fe.blackberryTablet=function(){return fe.blackberry()&&Zt("tablet")};fe.windows=function(){return Zt("windows")};fe.windowsPhone=function(){return fe.windows()&&Zt("phone")};fe.windowsTablet=function(){return fe.windows()&&Zt("touch")&&!fe.windowsPhone()};fe.fxos=function(){return(Zt("(mobile")||Zt("(tablet"))&&Zt(" rv:")};fe.fxosPhone=function(){return fe.fxos()&&Zt("mobile")};fe.fxosTablet=function(){return fe.fxos()&&Zt("tablet")};fe.meego=function(){return Zt("meego")};fe.cordova=function(){return window.cordova&&location.protocol==="file:"};fe.nodeWebkit=function(){return dN(window.process)==="object"};fe.mobile=function(){return fe.androidPhone()||fe.iphone()||fe.ipod()||fe.windowsPhone()||fe.blackberryPhone()||fe.fxosPhone()||fe.meego()};fe.tablet=function(){return fe.ipad()||fe.androidTablet()||fe.blackberryTablet()||fe.windowsTablet()||fe.fxosTablet()};fe.desktop=function(){return!fe.tablet()&&!fe.mobile()};fe.television=function(){for(var r=0;r<xT.length;){if(Zt(xT[r]))return!0;r++}return!1};fe.portrait=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?P_(screen.orientation.type,"portrait"):fe.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?Math.abs(window.orientation)!==90:window.innerHeight/window.innerWidth>1};fe.landscape=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?P_(screen.orientation.type,"landscape"):fe.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?Math.abs(window.orientation)===90:window.innerHeight/window.innerWidth<1};fe.noConflict=function(){return window.device=fN,this};function P_(r,e){return r.indexOf(e)!==-1}function Zt(r){return P_(pN,r)}function BA(r){return Dc.className.match(new RegExp(r,"i"))}function er(r){var e=null;BA(r)||(e=Dc.className.replace(/^\s+|\s+$/g,""),Dc.className=e+" "+r)}function _T(r){BA(r)&&(Dc.className=Dc.className.replace(" "+r,""))}fe.ios()?fe.ipad()?er("ios ipad tablet"):fe.iphone()?er("ios iphone mobile"):fe.ipod()&&er("ios ipod mobile"):fe.macos()?er("macos desktop"):fe.android()?fe.androidTablet()?er("android tablet"):er("android mobile"):fe.blackberry()?fe.blackberryTablet()?er("blackberry tablet"):er("blackberry mobile"):fe.windows()?fe.windowsTablet()?er("windows tablet"):fe.windowsPhone()?er("windows mobile"):er("windows desktop"):fe.fxos()?fe.fxosTablet()?er("fxos tablet"):er("fxos mobile"):fe.meego()?er("meego mobile"):fe.nodeWebkit()?er("node-webkit"):fe.television()?er("television"):fe.desktop()&&er("desktop");fe.cordova()&&er("cordova");function Mp(){fe.landscape()?(_T("portrait"),er("landscape"),wT("landscape")):(_T("landscape"),er("portrait"),wT("portrait")),LA()}function wT(r){for(var e=0;e<s1.length;e++)s1[e](r)}fe.onChangeOrientation=function(r){typeof r=="function"&&s1.push(r)};var Rp="resize";Object.prototype.hasOwnProperty.call(window,"onorientationchange")&&(Rp="orientationchange");window.addEventListener?window.addEventListener(Rp,Mp,!1):window.attachEvent?window.attachEvent(Rp,Mp):window[Rp]=Mp;Mp();function A_(r){for(var e=0;e<r.length;e++)if(fe[r[e]]())return r[e];return"unknown"}fe.type=A_(["mobile","tablet","desktop"]);fe.os=A_(["ios","iphone","ipad","ipod","android","blackberry","macos","windows","fxos","meego","television"]);function LA(){fe.orientation=A_(["portrait","landscape"])}LA();var k_={exports:{}},Au=typeof Reflect=="object"?Reflect:null,bT=Au&&typeof Au.apply=="function"?Au.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Op;Au&&typeof Au.ownKeys=="function"?Op=Au.ownKeys:Object.getOwnPropertySymbols?Op=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Op=function(e){return Object.getOwnPropertyNames(e)};function mN(r){console&&console.warn&&console.warn(r)}var NA=Number.isNaN||function(e){return e!==e};function pt(){pt.init.call(this)}k_.exports=pt;k_.exports.once=xN;pt.EventEmitter=pt;pt.prototype._events=void 0;pt.prototype._eventsCount=0;pt.prototype._maxListeners=void 0;var ST=10;function xg(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(pt,"defaultMaxListeners",{enumerable:!0,get:function(){return ST},set:function(r){if(typeof r!="number"||r<0||NA(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");ST=r}});pt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};pt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NA(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function FA(r){return r._maxListeners===void 0?pt.defaultMaxListeners:r._maxListeners}pt.prototype.getMaxListeners=function(){return FA(this)};pt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")bT(u,this,t);else for(var l=u.length,c=HA(u,l),n=0;n<l;++n)bT(c[n],this,t);return!0};function DA(r,e,t,n){var i,s,o;if(xg(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),o=s[e]),o===void 0)o=s[e]=t,++r._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),i=FA(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=o.length,mN(a)}return r}pt.prototype.addListener=function(e,t){return DA(this,e,t,!1)};pt.prototype.on=pt.prototype.addListener;pt.prototype.prependListener=function(e,t){return DA(this,e,t,!0)};function gN(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function UA(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=gN.bind(n);return i.listener=t,n.wrapFn=i,i}pt.prototype.once=function(e,t){return xg(t),this.on(e,UA(this,e,t)),this};pt.prototype.prependOnceListener=function(e,t){return xg(t),this.prependListener(e,UA(this,e,t)),this};pt.prototype.removeListener=function(e,t){var n,i,s,o,a;if(xg(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():vN(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};pt.prototype.off=pt.prototype.removeListener;pt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function jA(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?yN(i):HA(i,i.length)}pt.prototype.listeners=function(e){return jA(this,e,!0)};pt.prototype.rawListeners=function(e){return jA(this,e,!1)};pt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):XA.call(r,e)};pt.prototype.listenerCount=XA;function XA(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}pt.prototype.eventNames=function(){return this._eventsCount>0?Op(this._events):[]};function HA(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function vN(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function yN(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function xN(r,e){return new Promise(function(t,n){function i(o){r.removeListener(e,s),n(o)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}zA(r,e,s,{once:!0}),e!=="error"&&_N(r,i,{once:!0})})}function _N(r,e,t){typeof r.on=="function"&&zA(r,"error",e,t)}function zA(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var wN=k_.exports,_l=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(_l||{}),$A=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))($A||{}),o1=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(o1||{}),Ae=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Ae||{}),Oi=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Oi||{}),de=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(de||{}),ku=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(ku||{}),Se=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Se||{}),_e=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(_e||{}),Bi=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Bi||{}),hi=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(hi||{}),di=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(di||{}),$r=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))($r||{}),xs=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(xs||{}),I_=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(I_||{}),si=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(si||{}),lr=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(lr||{}),tr=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(tr||{}),As=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(As||{});const bN={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},xe={ADAPTER:bN,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var wv=/iPhone/i,TT=/iPod/i,ET=/iPad/i,CT=/\biOS-universal(?:.+)Mac\b/i,bv=/\bAndroid(?:.+)Mobile\b/i,PT=/Android/i,Hl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Pf=/Silk/i,Gs=/Windows Phone/i,AT=/\bWindows(?:.+)ARM\b/i,kT=/BlackBerry/i,IT=/BB10/i,MT=/Opera Mini/i,RT=/\b(CriOS|Chrome)(?:.+)Mobile/i,OT=/Mobile(?:.+)Firefox\b/i,BT=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function SN(r){return function(e){return e.test(r)}}function LT(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=SN(t),s={apple:{phone:i(wv)&&!i(Gs),ipod:i(TT),tablet:!i(wv)&&(i(ET)||BT(e))&&!i(Gs),universal:i(CT),device:(i(wv)||i(TT)||i(ET)||i(CT)||BT(e))&&!i(Gs)},amazon:{phone:i(Hl),tablet:!i(Hl)&&i(Pf),device:i(Hl)||i(Pf)},android:{phone:!i(Gs)&&i(Hl)||!i(Gs)&&i(bv),tablet:!i(Gs)&&!i(Hl)&&!i(bv)&&(i(Pf)||i(PT)),device:!i(Gs)&&(i(Hl)||i(Pf)||i(bv)||i(PT))||i(/\bokhttp\b/i)},windows:{phone:i(Gs),tablet:i(AT),device:i(Gs)||i(AT)},other:{blackberry:i(kT),blackberry10:i(IT),opera:i(MT),firefox:i(OT),chrome:i(RT),device:i(kT)||i(IT)||i(MT)||i(OT)||i(RT)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const TN=LT.default??LT,oi=TN(globalThis.navigator);xe.RETINA_PREFIX=/@([0-9\.]+)x/;xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var YA={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function s(u,l,c,h,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new i(c,h||u,d),g=t?t+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],p]:u._events[g].push(p):(u._events[g]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,h;if(this._eventsCount===0)return l;for(h in c=this._events)e.call(c,h)&&l.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=t?t+l:l,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,p=h.length,g=new Array(p);d<p;d++)g[d]=h[d].fn;return g},a.prototype.listenerCount=function(l){var c=t?t+l:l,h=this._events[c];return h?h.fn?1:h.length:0},a.prototype.emit=function(l,c,h,d,p,g){var v=t?t+l:l;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,b,_;if(x.fn){switch(x.once&&this.removeListener(l,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,c),!0;case 3:return x.fn.call(x.context,c,h),!0;case 4:return x.fn.call(x.context,c,h,d),!0;case 5:return x.fn.call(x.context,c,h,d,p),!0;case 6:return x.fn.call(x.context,c,h,d,p,g),!0}for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];x.fn.apply(x.context,b)}else{var S=x.length,I;for(_=0;_<S;_++)switch(x[_].once&&this.removeListener(l,x[_].fn,void 0,!0),y){case 1:x[_].fn.call(x[_].context);break;case 2:x[_].fn.call(x[_].context,c);break;case 3:x[_].fn.call(x[_].context,c,h);break;case 4:x[_].fn.call(x[_].context,c,h,d);break;default:if(!b)for(I=1,b=new Array(y-1);I<y;I++)b[I-1]=arguments[I];x[_].fn.apply(x[_].context,b)}}return!0},a.prototype.on=function(l,c,h){return s(this,l,c,h,!1)},a.prototype.once=function(l,c,h){return s(this,l,c,h,!0)},a.prototype.removeListener=function(l,c,h,d){var p=t?t+l:l;if(!this._events[p])return this;if(!c)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===c&&(!d||g.once)&&(!h||g.context===h)&&o(this,p);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==c||d&&!g[v].once||h&&g[v].context!==h)&&x.push(g[v]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=t?t+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(YA);var EN=YA.exports;const md=dd(EN);var M_={exports:{}};M_.exports=_g;M_.exports.default=_g;function _g(r,e,t){t=t||2;var n=e&&e.length,i=n?e[0]*t:r.length,s=GA(r,0,i,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,u,l,c,h,d,p;if(n&&(s=IN(r,e,s,t)),r.length>80*t){a=l=r[0],u=c=r[1];for(var g=t;g<i;g+=t)h=r[g],d=r[g+1],h<a&&(a=h),d<u&&(u=d),h>l&&(l=h),d>c&&(c=d);p=Math.max(l-a,c-u),p=p!==0?32767/p:0}return Uc(s,o,t,a,u,p,0),o}function GA(r,e,t,n,i){var s,o;if(i===u1(r,e,t,n)>0)for(s=e;s<t;s+=n)o=NT(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=NT(s,r[s],r[s+1],o);return o&&wg(o,o.next)&&(Xc(o),o=o.next),o}function ll(r,e){if(!r)return r;e||(e=r);var t=r,n;do if(n=!1,!t.steiner&&(wg(t,t.next)||Dt(t.prev,t,t.next)===0)){if(Xc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function Uc(r,e,t,n,i,s,o){if(r){!o&&s&&LN(r,n,i,s);for(var a=r,u,l;r.prev!==r.next;){if(u=r.prev,l=r.next,s?PN(r,n,i,s):CN(r)){e.push(u.i/t|0),e.push(r.i/t|0),e.push(l.i/t|0),Xc(r),r=l.next,a=l.next;continue}if(r=l,r===a){o?o===1?(r=AN(ll(r),e,t),Uc(r,e,t,n,i,s,2)):o===2&&kN(r,e,t,n,i,s):Uc(ll(r),e,t,n,i,s,1);break}}}}function CN(r){var e=r.prev,t=r,n=r.next;if(Dt(e,t,n)>=0)return!1;for(var i=e.x,s=t.x,o=n.x,a=e.y,u=t.y,l=n.y,c=i<s?i<o?i:o:s<o?s:o,h=a<u?a<l?a:l:u<l?u:l,d=i>s?i>o?i:o:s>o?s:o,p=a>u?a>l?a:l:u>l?u:l,g=n.next;g!==e;){if(g.x>=c&&g.x<=d&&g.y>=h&&g.y<=p&&ou(i,a,s,u,o,l,g.x,g.y)&&Dt(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function PN(r,e,t,n){var i=r.prev,s=r,o=r.next;if(Dt(i,s,o)>=0)return!1;for(var a=i.x,u=s.x,l=o.x,c=i.y,h=s.y,d=o.y,p=a<u?a<l?a:l:u<l?u:l,g=c<h?c<d?c:d:h<d?h:d,v=a>u?a>l?a:l:u>l?u:l,x=c>h?c>d?c:d:h>d?h:d,y=a1(p,g,e,t,n),b=a1(v,x,e,t,n),_=r.prevZ,S=r.nextZ;_&&_.z>=y&&S&&S.z<=b;){if(_.x>=p&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&ou(a,c,u,h,l,d,_.x,_.y)&&Dt(_.prev,_,_.next)>=0||(_=_.prevZ,S.x>=p&&S.x<=v&&S.y>=g&&S.y<=x&&S!==i&&S!==o&&ou(a,c,u,h,l,d,S.x,S.y)&&Dt(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&ou(a,c,u,h,l,d,_.x,_.y)&&Dt(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;S&&S.z<=b;){if(S.x>=p&&S.x<=v&&S.y>=g&&S.y<=x&&S!==i&&S!==o&&ou(a,c,u,h,l,d,S.x,S.y)&&Dt(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function AN(r,e,t){var n=r;do{var i=n.prev,s=n.next.next;!wg(i,s)&&WA(i,n,n.next,s)&&jc(i,s)&&jc(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Xc(n),Xc(n.next),n=r=s),n=n.next}while(n!==r);return ll(n)}function kN(r,e,t,n,i,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&DN(o,a)){var u=VA(o,a);o=ll(o,o.next),u=ll(u,u.next),Uc(o,e,t,n,i,s,0),Uc(u,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function IN(r,e,t,n){var i=[],s,o,a,u,l;for(s=0,o=e.length;s<o;s++)a=e[s]*n,u=s<o-1?e[s+1]*n:r.length,l=GA(r,a,u,n,!1),l===l.next&&(l.steiner=!0),i.push(FN(l));for(i.sort(MN),s=0;s<i.length;s++)t=RN(i[s],t);return t}function MN(r,e){return r.x-e.x}function RN(r,e){var t=ON(r,e);if(!t)return e;var n=VA(t,r);return ll(n,n.next),ll(t,t.next)}function ON(r,e){var t=e,n=r.x,i=r.y,s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===n))return o}t=t.next}while(t!==e);if(!o)return null;var u=o,l=o.x,c=o.y,h=1/0,d;t=o;do n>=t.x&&t.x>=l&&n!==t.x&&ou(i<c?n:s,i,l,c,i<c?s:n,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(n-t.x),jc(t,r)&&(d<h||d===h&&(t.x>o.x||t.x===o.x&&BN(o,t)))&&(o=t,h=d)),t=t.next;while(t!==u);return o}function BN(r,e){return Dt(r.prev,r,e.prev)<0&&Dt(e.next,r,r.next)<0}function LN(r,e,t,n){var i=r;do i.z===0&&(i.z=a1(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,NN(i)}function NN(r){var e,t,n,i,s,o,a,u,l=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<l&&(a++,n=n.nextZ,!!n);e++);for(u=l;a>0||u>0&&n;)a!==0&&(u===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,l*=2}while(o>1);return r}function a1(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function FN(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function ou(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function DN(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!UN(r,e)&&(jc(r,e)&&jc(e,r)&&jN(r,e)&&(Dt(r.prev,r,e.prev)||Dt(r,e.prev,e))||wg(r,e)&&Dt(r.prev,r,r.next)>0&&Dt(e.prev,e,e.next)>0)}function Dt(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function wg(r,e){return r.x===e.x&&r.y===e.y}function WA(r,e,t,n){var i=kf(Dt(r,e,t)),s=kf(Dt(r,e,n)),o=kf(Dt(t,n,r)),a=kf(Dt(t,n,e));return!!(i!==s&&o!==a||i===0&&Af(r,t,e)||s===0&&Af(r,n,e)||o===0&&Af(t,r,n)||a===0&&Af(t,e,n))}function Af(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function kf(r){return r>0?1:r<0?-1:0}function UN(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&WA(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function jc(r,e){return Dt(r.prev,r,r.next)<0?Dt(r,e,r.next)>=0&&Dt(r,r.prev,e)>=0:Dt(r,e,r.prev)<0||Dt(r,r.next,e)<0}function jN(r,e){var t=r,n=!1,i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function VA(r,e){var t=new l1(r.i,r.x,r.y),n=new l1(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function NT(r,e,t,n){var i=new l1(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Xc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function l1(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}_g.deviation=function(r,e,t,n){var i=e&&e.length,s=i?e[0]*t:r.length,o=Math.abs(u1(r,0,s,t));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*t,c=a<u-1?e[a+1]*t:r.length;o-=Math.abs(u1(r,l,c,t))}var h=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,p=n[a+1]*t,g=n[a+2]*t;h+=Math.abs((r[d]-r[g])*(r[p+1]-r[d+1])-(r[d]-r[p])*(r[g+1]-r[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function u1(r,e,t,n){for(var i=0,s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}_g.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,i=0;i<r.length;i++){for(var s=0;s<r[i].length;s++)for(var o=0;o<e;o++)t.vertices.push(r[i][s][o]);i>0&&(n+=r[i-1].length,t.holes.push(n))}return t};var XN=M_.exports;const HN=dd(XN);var om={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */om.exports;(function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof io=="object"&&io;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,u=36,l=1,c=26,h=38,d=700,p=72,g=128,v="-",x=/^xn--/,y=/[^\x20-\x7E]/,b=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=u-l,I=Math.floor,A=String.fromCharCode,k;function M(z){throw new RangeError(_[z])}function O(z,V){for(var Z=z.length,re=[];Z--;)re[Z]=V(z[Z]);return re}function F(z,V){var Z=z.split("@"),re="";Z.length>1&&(re=Z[0]+"@",z=Z[1]),z=z.replace(b,".");var he=z.split("."),ve=O(he,V).join(".");return re+ve}function U(z){for(var V=[],Z=0,re=z.length,he,ve;Z<re;)he=z.charCodeAt(Z++),he>=55296&&he<=56319&&Z<re?(ve=z.charCodeAt(Z++),(ve&64512)==56320?V.push(((he&1023)<<10)+(ve&1023)+65536):(V.push(he),Z--)):V.push(he);return V}function X(z){return O(z,function(V){var Z="";return V>65535&&(V-=65536,Z+=A(V>>>10&1023|55296),V=56320|V&1023),Z+=A(V),Z}).join("")}function B(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:u}function N(z,V){return z+22+75*(z<26)-((V!=0)<<5)}function j(z,V,Z){var re=0;for(z=Z?I(z/d):z>>1,z+=I(z/V);z>S*c>>1;re+=u)z=I(z/S);return I(re+(S+1)*z/(z+h))}function W(z){var V=[],Z=z.length,re,he=0,ve=g,Me=p,Ne,ze,We,He,Fe,ut,Ze,Sr,Lr;for(Ne=z.lastIndexOf(v),Ne<0&&(Ne=0),ze=0;ze<Ne;++ze)z.charCodeAt(ze)>=128&&M("not-basic"),V.push(z.charCodeAt(ze));for(We=Ne>0?Ne+1:0;We<Z;){for(He=he,Fe=1,ut=u;We>=Z&&M("invalid-input"),Ze=B(z.charCodeAt(We++)),(Ze>=u||Ze>I((a-he)/Fe))&&M("overflow"),he+=Ze*Fe,Sr=ut<=Me?l:ut>=Me+c?c:ut-Me,!(Ze<Sr);ut+=u)Lr=u-Sr,Fe>I(a/Lr)&&M("overflow"),Fe*=Lr;re=V.length+1,Me=j(he-He,re,He==0),I(he/re)>a-ve&&M("overflow"),ve+=I(he/re),he%=re,V.splice(he++,0,ve)}return X(V)}function Q(z){var V,Z,re,he,ve,Me,Ne,ze,We,He,Fe,ut=[],Ze,Sr,Lr,Qi;for(z=U(z),Ze=z.length,V=g,Z=0,ve=p,Me=0;Me<Ze;++Me)Fe=z[Me],Fe<128&&ut.push(A(Fe));for(re=he=ut.length,he&&ut.push(v);re<Ze;){for(Ne=a,Me=0;Me<Ze;++Me)Fe=z[Me],Fe>=V&&Fe<Ne&&(Ne=Fe);for(Sr=re+1,Ne-V>I((a-Z)/Sr)&&M("overflow"),Z+=(Ne-V)*Sr,V=Ne,Me=0;Me<Ze;++Me)if(Fe=z[Me],Fe<V&&++Z>a&&M("overflow"),Fe==V){for(ze=Z,We=u;He=We<=ve?l:We>=ve+c?c:We-ve,!(ze<He);We+=u)Qi=ze-He,Lr=u-He,ut.push(A(N(He+Qi%Lr,0))),ze=I(Qi/Lr);ut.push(A(N(ze,0))),ve=j(Z,Sr,re==he),Z=0,++re}++Z,++V}return ut.join("")}function H(z){return F(z,function(V){return x.test(V)?W(V.slice(4).toLowerCase()):V})}function G(z){return F(z,function(V){return y.test(V)?"xn--"+Q(V):V})}if(o={version:"1.4.1",ucs2:{decode:U,encode:X},decode:W,encode:Q,toASCII:G,toUnicode:H},n&&i)if(r.exports==n)i.exports=o;else for(k in o)o.hasOwnProperty(k)&&(n[k]=o[k]);else t.punycode=o})(io)})(om,om.exports);var zN=om.exports,$N=Error,YN=EvalError,GN=RangeError,WN=ReferenceError,qA=SyntaxError,gd=TypeError,VN=URIError,qN=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0},FT=typeof Symbol<"u"&&Symbol,KN=qN,QN=function(){return typeof FT!="function"||typeof Symbol!="function"||typeof FT("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:KN()},Sv={__proto__:null,foo:{}},ZN=Object,JN=function(){return{__proto__:Sv}.foo===Sv.foo&&!(Sv instanceof ZN)},eF="Function.prototype.bind called on incompatible ",tF=Object.prototype.toString,rF=Math.max,nF="[object Function]",DT=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<t.length;s+=1)n[s+e.length]=t[s];return n},iF=function(e,t){for(var n=[],i=t||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},sF=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},oF=function(e){var t=this;if(typeof t!="function"||tF.apply(t)!==nF)throw new TypeError(eF+t);for(var n=iF(arguments,1),i,s=function(){if(this instanceof i){var c=t.apply(this,DT(n,arguments));return Object(c)===c?c:this}return t.apply(e,DT(n,arguments))},o=rF(0,t.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(i=Function("binder","return function ("+sF(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var l=function(){};l.prototype=t.prototype,i.prototype=new l,l.prototype=null}return i},aF=oF,R_=Function.prototype.bind||aF,lF=Function.prototype.call,uF=Object.prototype.hasOwnProperty,hF=R_,cF=hF.call(lF,uF),Ke,dF=$N,fF=YN,pF=GN,mF=WN,Ku=qA,Iu=gd,gF=VN,KA=Function,Tv=function(r){try{return KA('"use strict"; return ('+r+").constructor;")()}catch{}},el=Object.getOwnPropertyDescriptor;if(el)try{el({},"")}catch{el=null}var Ev=function(){throw new Iu},vF=el?function(){try{return arguments.callee,Ev}catch{try{return el(arguments,"callee").get}catch{return Ev}}}():Ev,zl=QN(),yF=JN(),yr=Object.getPrototypeOf||(yF?function(r){return r.__proto__}:null),Ql={},xF=typeof Uint8Array>"u"||!yr?Ke:yr(Uint8Array),tl={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":zl&&yr?yr([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":Ql,"%AsyncGenerator%":Ql,"%AsyncGeneratorFunction%":Ql,"%AsyncIteratorPrototype%":Ql,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ke:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ke:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":dF,"%eval%":eval,"%EvalError%":fF,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":KA,"%GeneratorFunction%":Ql,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zl&&yr?yr(yr([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!zl||!yr?Ke:yr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":pF,"%ReferenceError%":mF,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!zl||!yr?Ke:yr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zl&&yr?yr(""[Symbol.iterator]()):Ke,"%Symbol%":zl?Symbol:Ke,"%SyntaxError%":Ku,"%ThrowTypeError%":vF,"%TypedArray%":xF,"%TypeError%":Iu,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":gF,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet};if(yr)try{null.error}catch(r){var _F=yr(yr(r));tl["%Error.prototype%"]=_F}var wF=function r(e){var t;if(e==="%AsyncFunction%")t=Tv("async function () {}");else if(e==="%GeneratorFunction%")t=Tv("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Tv("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&yr&&(t=yr(i.prototype))}return tl[e]=t,t},UT={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vd=R_,am=cF,bF=vd.call(Function.call,Array.prototype.concat),SF=vd.call(Function.apply,Array.prototype.splice),jT=vd.call(Function.call,String.prototype.replace),lm=vd.call(Function.call,String.prototype.slice),TF=vd.call(Function.call,RegExp.prototype.exec),EF=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,CF=/\\(\\)?/g,PF=function(e){var t=lm(e,0,1),n=lm(e,-1);if(t==="%"&&n!=="%")throw new Ku("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Ku("invalid intrinsic syntax, expected opening `%`");var i=[];return jT(e,EF,function(s,o,a,u){i[i.length]=a?jT(u,CF,"$1"):o||s}),i},AF=function(e,t){var n=e,i;if(am(UT,n)&&(i=UT[n],n="%"+i[0]+"%"),am(tl,n)){var s=tl[n];if(s===Ql&&(s=wF(n)),typeof s>"u"&&!t)throw new Iu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Ku("intrinsic "+e+" does not exist!")},gh=function(e,t){if(typeof e!="string"||e.length===0)throw new Iu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Iu('"allowMissing" argument must be a boolean');if(TF(/^%?[^%]*%?$/,e)===null)throw new Ku("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=PF(e),i=n.length>0?n[0]:"",s=AF("%"+i+"%",t),o=s.name,a=s.value,u=!1,l=s.alias;l&&(i=l[0],SF(n,bF([0,1],l)));for(var c=1,h=!0;c<n.length;c+=1){var d=n[c],p=lm(d,0,1),g=lm(d,-1);if((p==='"'||p==="'"||p==="`"||g==='"'||g==="'"||g==="`")&&p!==g)throw new Ku("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(u=!0),i+="."+d,o="%"+i+"%",am(tl,o))a=tl[o];else if(a!=null){if(!(d in a)){if(!t)throw new Iu("base intrinsic for "+e+" exists, but the property is not available.");return}if(el&&c+1>=n.length){var v=el(a,d);h=!!v,h&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[d]}else h=am(a,d),a=a[d];h&&!u&&(tl[o]=a)}}return a},QA={exports:{}},Cv,XT;function O_(){if(XT)return Cv;XT=1;var r=gh,e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Cv=e,Cv}var kF=gh,Bp=kF("%Object.getOwnPropertyDescriptor%",!0);if(Bp)try{Bp([],"length")}catch{Bp=null}var ZA=Bp,HT=O_(),IF=qA,$l=gd,zT=ZA,MF=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new $l("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new $l("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $l("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $l("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $l("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $l("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!zT&&zT(e,t);if(HT)HT(e,t,{configurable:o===null&&u?u.configurable:!o,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:s===null&&u?u.writable:!s});else if(a||!i&&!s&&!o)e[t]=n;else throw new IF("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},h1=O_(),JA=function(){return!!h1};JA.hasArrayLengthDefineBug=function(){if(!h1)return null;try{return h1([],"length",{value:1}).length!==1}catch{return!0}};var RF=JA,OF=gh,$T=MF,BF=RF(),YT=ZA,GT=gd,LF=OF("%Math.floor%"),NF=function(e,t){if(typeof e!="function")throw new GT("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||LF(t)!==t)throw new GT("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&YT){var o=YT(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(BF?$T(e,"length",t,!0,!0):$T(e,"length",t)),e};(function(r){var e=R_,t=gh,n=NF,i=gd,s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),u=O_(),l=t("%Math.max%");r.exports=function(d){if(typeof d!="function")throw new i("a function is required");var p=a(e,o,arguments);return n(p,1+l(0,d.length-(arguments.length-1)),!0)};var c=function(){return a(e,s,arguments)};u?u(r.exports,"apply",{value:c}):r.exports.apply=c})(QA);var FF=QA.exports,e2=gh,t2=FF,DF=t2(e2("String.prototype.indexOf")),UF=function(e,t){var n=e2(e,!!t);return typeof n=="function"&&DF(e,".prototype.")>-1?t2(n):n};const jF={},XF=Object.freeze(Object.defineProperty({__proto__:null,default:jF},Symbol.toStringTag,{value:"Module"})),HF=uA(XF);var B_=typeof Map=="function"&&Map.prototype,Pv=Object.getOwnPropertyDescriptor&&B_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,um=B_&&Pv&&typeof Pv.get=="function"?Pv.get:null,WT=B_&&Map.prototype.forEach,L_=typeof Set=="function"&&Set.prototype,Av=Object.getOwnPropertyDescriptor&&L_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,hm=L_&&Av&&typeof Av.get=="function"?Av.get:null,VT=L_&&Set.prototype.forEach,zF=typeof WeakMap=="function"&&WeakMap.prototype,yc=zF?WeakMap.prototype.has:null,$F=typeof WeakSet=="function"&&WeakSet.prototype,xc=$F?WeakSet.prototype.has:null,YF=typeof WeakRef=="function"&&WeakRef.prototype,qT=YF?WeakRef.prototype.deref:null,GF=Boolean.prototype.valueOf,WF=Object.prototype.toString,VF=Function.prototype.toString,qF=String.prototype.match,N_=String.prototype.slice,ea=String.prototype.replace,KF=String.prototype.toUpperCase,KT=String.prototype.toLowerCase,r2=RegExp.prototype.test,QT=Array.prototype.concat,_s=Array.prototype.join,QF=Array.prototype.slice,ZT=Math.floor,c1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,kv=Object.getOwnPropertySymbols,d1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Wr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Qu||!0)?Symbol.toStringTag:null,n2=Object.prototype.propertyIsEnumerable,JT=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function eE(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||r2.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-ZT(-r):ZT(r);if(n!==r){var i=String(n),s=N_.call(e,i.length+1);return ea.call(i,t,"$&_")+"."+ea.call(ea.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ea.call(e,t,"$&_")}var f1=HF,tE=f1.custom,rE=s2(tE)?tE:null,ZF=function r(e,t,n,i){var s=t||{};if(zo(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(zo(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=zo(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(zo(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(zo(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return a2(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?eE(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return a?eE(e,l):l}var c=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return p1(e)?"[Array]":"[Object]";var h=gD(s,n);if(typeof i>"u")i=[];else if(o2(i,e)>=0)return"[Circular]";function d(B,N,j){if(N&&(i=QF.call(i),i.push(N)),j){var W={depth:s.depth};return zo(s,"quoteStyle")&&(W.quoteStyle=s.quoteStyle),r(B,W,n+1,i)}return r(B,s,n+1,i)}if(typeof e=="function"&&!nE(e)){var p=aD(e),g=If(e,d);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(g.length>0?" { "+_s.call(g,", ")+" }":"")}if(s2(e)){var v=Qu?ea.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):d1.call(e);return typeof e=="object"&&!Qu?Yh(v):v}if(fD(e)){for(var x="<"+KT.call(String(e.nodeName)),y=e.attributes||[],b=0;b<y.length;b++)x+=" "+y[b].name+"="+i2(JF(y[b].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+KT.call(String(e.nodeName))+">",x}if(p1(e)){if(e.length===0)return"[]";var _=If(e,d);return h&&!mD(_)?"["+m1(_,h)+"]":"[ "+_s.call(_,", ")+" ]"}if(tD(e)){var S=If(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!n2.call(e,"cause")?"{ ["+String(e)+"] "+_s.call(QT.call("[cause]: "+d(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+_s.call(S,", ")+" }"}if(typeof e=="object"&&o){if(rE&&typeof e[rE]=="function"&&f1)return f1(e,{depth:c-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(lD(e)){var I=[];return WT&&WT.call(e,function(B,N){I.push(d(N,e,!0)+" => "+d(B,e))}),iE("Map",um.call(e),I,h)}if(cD(e)){var A=[];return VT&&VT.call(e,function(B){A.push(d(B,e))}),iE("Set",hm.call(e),A,h)}if(uD(e))return Iv("WeakMap");if(dD(e))return Iv("WeakSet");if(hD(e))return Iv("WeakRef");if(nD(e))return Yh(d(Number(e)));if(sD(e))return Yh(d(c1.call(e)));if(iD(e))return Yh(GF.call(e));if(rD(e))return Yh(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===io)return"{ [object globalThis] }";if(!eD(e)&&!nE(e)){var k=If(e,d),M=JT?JT(e)===Object.prototype:e instanceof Object||e.constructor===Object,O=e instanceof Object?"":"null prototype",F=!M&&Wr&&Object(e)===e&&Wr in e?N_.call(Sa(e),8,-1):O?"Object":"",U=M||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",X=U+(F||O?"["+_s.call(QT.call([],F||[],O||[]),": ")+"] ":"");return k.length===0?X+"{}":h?X+"{"+m1(k,h)+"}":X+"{ "+_s.call(k,", ")+" }"}return String(e)};function i2(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function JF(r){return ea.call(String(r),/"/g,"&quot;")}function p1(r){return Sa(r)==="[object Array]"&&(!Wr||!(typeof r=="object"&&Wr in r))}function eD(r){return Sa(r)==="[object Date]"&&(!Wr||!(typeof r=="object"&&Wr in r))}function nE(r){return Sa(r)==="[object RegExp]"&&(!Wr||!(typeof r=="object"&&Wr in r))}function tD(r){return Sa(r)==="[object Error]"&&(!Wr||!(typeof r=="object"&&Wr in r))}function rD(r){return Sa(r)==="[object String]"&&(!Wr||!(typeof r=="object"&&Wr in r))}function nD(r){return Sa(r)==="[object Number]"&&(!Wr||!(typeof r=="object"&&Wr in r))}function iD(r){return Sa(r)==="[object Boolean]"&&(!Wr||!(typeof r=="object"&&Wr in r))}function s2(r){if(Qu)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!d1)return!1;try{return d1.call(r),!0}catch{}return!1}function sD(r){if(!r||typeof r!="object"||!c1)return!1;try{return c1.call(r),!0}catch{}return!1}var oD=Object.prototype.hasOwnProperty||function(r){return r in this};function zo(r,e){return oD.call(r,e)}function Sa(r){return WF.call(r)}function aD(r){if(r.name)return r.name;var e=qF.call(VF.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function o2(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function lD(r){if(!um||!r||typeof r!="object")return!1;try{um.call(r);try{hm.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function uD(r){if(!yc||!r||typeof r!="object")return!1;try{yc.call(r,yc);try{xc.call(r,xc)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function hD(r){if(!qT||!r||typeof r!="object")return!1;try{return qT.call(r),!0}catch{}return!1}function cD(r){if(!hm||!r||typeof r!="object")return!1;try{hm.call(r);try{um.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function dD(r){if(!xc||!r||typeof r!="object")return!1;try{xc.call(r,xc);try{yc.call(r,yc)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function fD(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function a2(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return a2(N_.call(r,0,e.maxStringLength),e)+n}var i=ea.call(ea.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,pD);return i2(i,"single",e)}function pD(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+KF.call(e.toString(16))}function Yh(r){return"Object("+r+")"}function Iv(r){return r+" { ? }"}function iE(r,e,t,n){var i=n?m1(t,n):_s.call(t,", ");return r+" ("+e+") {"+i+"}"}function mD(r){for(var e=0;e<r.length;e++)if(o2(r[e],`
`)>=0)return!1;return!0}function gD(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=_s.call(Array(r.indent+1)," ");else return null;return{base:t,prev:_s.call(Array(e+1),t)}}function m1(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+_s.call(r,","+t)+`
`+e.prev}function If(r,e){var t=p1(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=zo(r,i)?e(r[i],r):""}var s=typeof kv=="function"?kv(r):[],o;if(Qu){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in r)zo(r,u)&&(t&&String(Number(u))===u&&u<r.length||Qu&&o["$"+u]instanceof Symbol||(r2.call(/[^\w$]/,u)?n.push(e(u,r)+": "+e(r[u],r)):n.push(u+": "+e(r[u],r))));if(typeof kv=="function")for(var l=0;l<s.length;l++)n2.call(r,s[l])&&n.push("["+e(s[l])+"]: "+e(r[s[l]],r));return n}var l2=gh,vh=UF,vD=ZF,yD=gd,Mf=l2("%WeakMap%",!0),Rf=l2("%Map%",!0),xD=vh("WeakMap.prototype.get",!0),_D=vh("WeakMap.prototype.set",!0),wD=vh("WeakMap.prototype.has",!0),bD=vh("Map.prototype.get",!0),SD=vh("Map.prototype.set",!0),TD=vh("Map.prototype.has",!0),F_=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},ED=function(r,e){var t=F_(r,e);return t&&t.value},CD=function(r,e,t){var n=F_(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},PD=function(r,e){return!!F_(r,e)},AD=function(){var e,t,n,i={assert:function(s){if(!i.has(s))throw new yD("Side channel does not contain "+vD(s))},get:function(s){if(Mf&&s&&(typeof s=="object"||typeof s=="function")){if(e)return xD(e,s)}else if(Rf){if(t)return bD(t,s)}else if(n)return ED(n,s)},has:function(s){if(Mf&&s&&(typeof s=="object"||typeof s=="function")){if(e)return wD(e,s)}else if(Rf){if(t)return TD(t,s)}else if(n)return PD(n,s);return!1},set:function(s,o){Mf&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Mf),_D(e,s,o)):Rf?(t||(t=new Rf),SD(t,s,o)):(n||(n={key:{},next:null}),CD(n,s,o))}};return i},kD=String.prototype.replace,ID=/%20/g,Mv={RFC1738:"RFC1738",RFC3986:"RFC3986"},D_={default:Mv.RFC3986,formatters:{RFC1738:function(r){return kD.call(r,ID,"+")},RFC3986:function(r){return String(r)}},RFC1738:Mv.RFC1738,RFC3986:Mv.RFC3986},MD=D_,Rv=Object.prototype.hasOwnProperty,Va=Array.isArray,ls=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),RD=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Va(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);t.obj[t.prop]=i}}},u2=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},OD=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(Va(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Rv.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return Va(e)&&!Va(t)&&(i=u2(e,n)),Va(e)&&Va(t)?(t.forEach(function(s,o){if(Rv.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=r(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return Rv.call(s,o)?s[o]=r(s[o],a,n):s[o]=a,s},i)},BD=function(e,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},e)},LD=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},ND=function(e,t,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(c){return"%26%23"+parseInt(c.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;++u){var l=o.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===MD.RFC1738&&(l===40||l===41)){a+=o.charAt(u);continue}if(l<128){a=a+ls[l];continue}if(l<2048){a=a+(ls[192|l>>6]+ls[128|l&63]);continue}if(l<55296||l>=57344){a=a+(ls[224|l>>12]+ls[128|l>>6&63]+ls[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|o.charCodeAt(u)&1023),a+=ls[240|l>>18]+ls[128|l>>12&63]+ls[128|l>>6&63]+ls[128|l&63]}return a},FD=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var s=t[i],o=s.obj[s.prop],a=Object.keys(o),u=0;u<a.length;++u){var l=a[u],c=o[l];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(t.push({obj:o,prop:l}),n.push(c))}return RD(t),e},DD=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},UD=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},jD=function(e,t){return[].concat(e,t)},XD=function(e,t){if(Va(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)},h2={arrayToObject:u2,assign:BD,combine:jD,compact:FD,decode:LD,encode:ND,isBuffer:UD,isRegExp:DD,maybeMap:XD,merge:OD},c2=AD,Lp=h2,_c=D_,HD=Object.prototype.hasOwnProperty,d2={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ys=Array.isArray,zD=Array.prototype.push,f2=function(r,e){zD.apply(r,ys(e)?e:[e])},$D=Date.prototype.toISOString,sE=_c.default,ar={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Lp.encode,encodeValuesOnly:!1,format:sE,formatter:_c.formatters[sE],indices:!1,serializeDate:function(e){return $D.call(e)},skipNulls:!1,strictNullHandling:!1},YD=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Ov={},GD=function r(e,t,n,i,s,o,a,u,l,c,h,d,p,g,v,x,y,b){for(var _=e,S=b,I=0,A=!1;(S=S.get(Ov))!==void 0&&!A;){var k=S.get(e);if(I+=1,typeof k<"u"){if(k===I)throw new RangeError("Cyclic object value");A=!0}typeof S.get(Ov)>"u"&&(I=0)}if(typeof c=="function"?_=c(t,_):_ instanceof Date?_=p(_):n==="comma"&&ys(_)&&(_=Lp.maybeMap(_,function(z){return z instanceof Date?p(z):z})),_===null){if(o)return l&&!x?l(t,ar.encoder,y,"key",g):t;_=""}if(YD(_)||Lp.isBuffer(_)){if(l){var M=x?t:l(t,ar.encoder,y,"key",g);return[v(M)+"="+v(l(_,ar.encoder,y,"value",g))]}return[v(t)+"="+v(String(_))]}var O=[];if(typeof _>"u")return O;var F;if(n==="comma"&&ys(_))x&&l&&(_=Lp.maybeMap(_,l)),F=[{value:_.length>0?_.join(",")||null:void 0}];else if(ys(c))F=c;else{var U=Object.keys(_);F=h?U.sort(h):U}var X=u?t.replace(/\./g,"%2E"):t,B=i&&ys(_)&&_.length===1?X+"[]":X;if(s&&ys(_)&&_.length===0)return B+"[]";for(var N=0;N<F.length;++N){var j=F[N],W=typeof j=="object"&&typeof j.value<"u"?j.value:_[j];if(!(a&&W===null)){var Q=d&&u?j.replace(/\./g,"%2E"):j,H=ys(_)?typeof n=="function"?n(B,Q):B:B+(d?"."+Q:"["+Q+"]");b.set(e,I);var G=c2();G.set(Ov,b),f2(O,r(W,H,n,i,s,o,a,u,n==="comma"&&x&&ys(_)?null:l,c,h,d,p,g,v,x,y,G))}}return O},WD=function(e){if(!e)return ar;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||ar.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=_c.default;if(typeof e.format<"u"){if(!HD.call(_c.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=_c.formatters[n],s=ar.filter;(typeof e.filter=="function"||ys(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in d2?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=ar.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:ar.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:ar.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:ar.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:ar.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?ar.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:ar.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:ar.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:ar.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:ar.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:ar.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:ar.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:ar.strictNullHandling}},VD=function(r,e){var t=r,n=WD(e),i,s;typeof n.filter=="function"?(s=n.filter,t=s("",t)):ys(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof t!="object"||t===null)return"";var a=d2[n.arrayFormat],u=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);for(var l=c2(),c=0;c<i.length;++c){var h=i[c];n.skipNulls&&t[h]===null||f2(o,GD(t[h],h,a,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var d=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""},Zu=h2,g1=Object.prototype.hasOwnProperty,qD=Array.isArray,qt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Zu.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},KD=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},p2=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},QD="utf8=%26%2310003%3B",ZD="utf8=%E2%9C%93",JD=function(e,t){var n={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,s),a=-1,u,l=t.charset;if(t.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===ZD?l="utf-8":o[u]===QD&&(l="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var c=o[u],h=c.indexOf("]="),d=h===-1?c.indexOf("="):h+1,p,g;d===-1?(p=t.decoder(c,qt.decoder,l,"key"),g=t.strictNullHandling?null:""):(p=t.decoder(c.slice(0,d),qt.decoder,l,"key"),g=Zu.maybeMap(p2(c.slice(d+1),t),function(x){return t.decoder(x,qt.decoder,l,"value")})),g&&t.interpretNumericEntities&&l==="iso-8859-1"&&(g=KD(g)),c.indexOf("[]=")>-1&&(g=qD(g)?[g]:g);var v=g1.call(n,p);v&&t.duplicates==="combine"?n[p]=Zu.combine(n[p],g):(!v||t.duplicates==="last")&&(n[p]=g)}return n},e5=function(r,e,t,n){for(var i=n?e:p2(e,t),s=r.length-1;s>=0;--s){var o,a=r[s];if(a==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=t.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=t.decodeDotInKeys?u.replace(/%2E/g,"."):u,c=parseInt(l,10);!t.parseArrays&&l===""?o={0:i}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(o=[],o[c]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},t5=function(e,t,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(s),l=u?s.slice(0,u.index):s,c=[];if(l){if(!n.plainObjects&&g1.call(Object.prototype,l)&&!n.allowPrototypes)return;c.push(l)}for(var h=0;n.depth>0&&(u=a.exec(s))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&g1.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(u[1])}return u&&c.push("["+s.slice(u.index)+"]"),e5(c,t,n,i)}},r5=function(e){if(!e)return qt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?qt.charset:e.charset,n=typeof e.duplicates>"u"?qt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:qt.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:qt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:qt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:qt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:qt.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:qt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:qt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:qt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:qt.decoder,delimiter:typeof e.delimiter=="string"||Zu.isRegExp(e.delimiter)?e.delimiter:qt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:qt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:qt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:qt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:qt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:qt.strictNullHandling}},n5=function(r,e){var t=r5(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?JD(r,t):r,i=t.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],u=t5(a,n[a],t,typeof r=="string");i=Zu.merge(i,u,t)}return t.allowSparse===!0?i:Zu.compact(i)},i5=VD,s5=n5,o5=D_,a5={formats:o5,parse:s5,stringify:i5},l5=zN;function co(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var u5=/^([a-z0-9.+-]+:)/i,h5=/:[0-9]*$/,c5=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,d5=["<",">",'"',"`"," ","\r",`
`,"	"],f5=["{","}","|","\\","^","`"].concat(d5),v1=["'"].concat(f5),oE=["%","/","?",";","#"].concat(v1),aE=["/","?","#"],p5=255,lE=/^[+a-z0-9A-Z_-]{0,63}$/,m5=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g5={javascript:!0,"javascript:":!0},y1={javascript:!0,"javascript:":!0},Mu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x1=a5;function v5(r,e,t){if(r&&typeof r=="object"&&r instanceof co)return r;var n=new co;return n.parse(r,e,t),n}co.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",s=r.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(i);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var u=c5.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=x1.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=u5.exec(a);if(l){l=l[0];var c=l.toLowerCase();this.protocol=c,a=a.substr(l.length)}if(t||l||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(l&&y1[l])&&(a=a.substr(2),this.slashes=!0)}if(!y1[l]&&(h||l&&!Mu[l])){for(var d=-1,p=0;p<aE.length;p++){var g=a.indexOf(aE[p]);g!==-1&&(d===-1||g<d)&&(d=g)}var v,x;d===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",d),x!==-1&&(v=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(v)),d=-1;for(var p=0;p<oE.length;p++){var g=a.indexOf(oE[p]);g!==-1&&(d===-1||g<d)&&(d=g)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var b=this.hostname.split(/\./),p=0,_=b.length;p<_;p++){var S=b[p];if(S&&!S.match(lE)){for(var I="",A=0,k=S.length;A<k;A++)S.charCodeAt(A)>127?I+="x":I+=S[A];if(!I.match(lE)){var M=b.slice(0,p),O=b.slice(p+1),F=S.match(m5);F&&(M.push(F[1]),O.unshift(F[2])),O.length&&(a="/"+O.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>p5?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=l5.toASCII(this.hostname));var U=this.port?":"+this.port:"",X=this.hostname||"";this.host=X+U,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!g5[c])for(var p=0,_=v1.length;p<_;p++){var B=v1[p];if(a.indexOf(B)!==-1){var N=encodeURIComponent(B);N===B&&(N=escape(B)),a=a.split(B).join(N)}}var j=a.indexOf("#");j!==-1&&(this.hash=a.substr(j),a=a.slice(0,j));var W=a.indexOf("?");if(W!==-1?(this.search=a.substr(W),this.query=a.substr(W+1),e&&(this.query=x1.parse(this.query)),a=a.slice(0,W)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Mu[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",Q=this.search||"";this.path=U+Q}return this.href=this.format(),this};co.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=x1.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Mu[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+t+o+n};co.prototype.resolve=function(r){return this.resolveObject(v5(r,!1,!0)).format()};co.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new co;e.parse(r,!1,!0),r=e}for(var t=new co,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(t[u]=r[u])}return Mu[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Mu[r.protocol]){for(var l=Object.keys(r),c=0;c<l.length;c++){var h=l[c];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!y1[r.protocol]){for(var _=(r.pathname||"").split("/");_.length&&!(r.host=_.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),t.pathname=_.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var d=t.pathname||"",p=t.search||"";t.path=d+p}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var g=t.pathname&&t.pathname.charAt(0)==="/",v=r.host||r.pathname&&r.pathname.charAt(0)==="/",x=v||g||t.host&&r.pathname,y=x,b=t.pathname&&t.pathname.split("/")||[],_=r.pathname&&r.pathname.split("/")||[],S=t.protocol&&!Mu[t.protocol];if(S&&(t.hostname="",t.port=null,t.host&&(b[0]===""?b[0]=t.host:b.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host=null),x=x&&(_[0]===""||b[0]==="")),v)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,b=_;else if(_.length)b||(b=[]),b.pop(),b=b.concat(_),t.search=r.search,t.query=r.query;else if(r.search!=null){if(S){t.host=b.shift(),t.hostname=t.host;var I=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;I&&(t.auth=I.shift(),t.hostname=I.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!b.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var A=b.slice(-1)[0],k=(t.host||r.host||b.length>1)&&(A==="."||A==="..")||A==="",M=0,O=b.length;O>=0;O--)A=b[O],A==="."?b.splice(O,1):A===".."?(b.splice(O,1),M++):M&&(b.splice(O,1),M--);if(!x&&!y)for(;M--;M)b.unshift("..");x&&b[0]!==""&&(!b[0]||b[0].charAt(0)!=="/")&&b.unshift(""),k&&b.join("/").substr(-1)!=="/"&&b.push("");var F=b[0]===""||b[0]&&b[0].charAt(0)==="/";if(S){t.hostname=F?"":b.length?b.shift():"",t.host=t.hostname;var I=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;I&&(t.auth=I.shift(),t.hostname=I.shift(),t.host=t.hostname)}return x=x||t.host&&b.length,x&&!F&&b.unshift(""),b.length>0?t.pathname=b.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};co.prototype.parseHost=function(){var r=this.host,e=h5.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};const uE={};function Ve(r,e,t=3){if(uE[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),uE[e]=!0}function bi(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Gh(r){return r.split("?")[0].split("#")[0]}function y5(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x5(r,e,t){return r.replace(new RegExp(y5(e),"g"),t)}function _5(r,e){let t="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+=`/${r.slice(i+1,a)}`:t=r.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const Gt={toPosix(r){return x5(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){bi(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(bi(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const n=Gh(this.toPosix(e??xe.ADAPTER.getBaseUrl())),i=Gh(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?Gt.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(bi(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const n=r.endsWith("/");return r=_5(r,!1),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return bi(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];if(bi(n),n.length>0)if(e===void 0)e=n;else{const i=r[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(bi(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let n=-1,i=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?t?"/":this.isUrl(o)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname(r){bi(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){bi(r),e&&bi(e),r=Gh(this.toPosix(r));let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const u=r.charCodeAt(s);if(u===47){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(u===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){bi(r),r=Gh(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){bi(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Gh(this.toPosix(r));let t=r.charCodeAt(0);const n=this.isAbsolute(r);let i;e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let s=-1,o=0,a=-1,u=!0,l=r.length-1,c=0;for(;l>=i;--l){if(t=r.charCodeAt(l),t===47){if(!u){o=l+1;break}continue}a===-1&&(u=!1,a=l+1),t===46?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||a===-1||c===0||c===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(o,s),e.base=r.slice(o,a)),e.ext=r.slice(s,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Bv;async function w5(){return Bv??(Bv=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return $r.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return $r.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,i),r.deleteFramebuffer(n),r.deleteTexture(t),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?$r.PMA:$r.UNPACK})()),Bv}let Lv;function m2(){return typeof Lv>"u"&&(Lv=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:xe.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!xe.ADAPTER.getWebGLRenderingContext())return!1;const t=xe.ADAPTER.createCanvas();let n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Lv}var b5={grad:.9,turn:360,rad:360/(2*Math.PI)},Ws=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},xr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},ai=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},g2=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},hE=function(r){return{r:ai(r.r,0,255),g:ai(r.g,0,255),b:ai(r.b,0,255),a:ai(r.a)}},Nv=function(r){return{r:xr(r.r),g:xr(r.g),b:xr(r.b),a:xr(r.a,3)}},S5=/^#([0-9a-f]{3,8})$/i,Of=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},v2=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},y2=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),u=n*(1-(1-e+s)*t),l=s%6;return{r:255*[n,a,o,o,u,n][l],g:255*[u,n,n,a,o,o][l],b:255*[o,o,u,n,n,a][l],a:i}},cE=function(r){return{h:g2(r.h),s:ai(r.s,0,100),l:ai(r.l,0,100),a:ai(r.a)}},dE=function(r){return{h:xr(r.h),s:xr(r.s),l:xr(r.l),a:xr(r.a,3)}},fE=function(r){return y2((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},wc=function(r){return{h:(e=v2(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},T5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,E5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,C5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,P5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_1={string:[[function(r){var e=S5.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?xr(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?xr(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=C5.exec(r)||P5.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:hE({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=T5.exec(r)||E5.exec(r);if(!e)return null;var t,n,i=cE({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(b5[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return fE(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return Ws(e)&&Ws(t)&&Ws(n)?hE({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!Ws(e)||!Ws(t)||!Ws(n))return null;var o=cE({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return fE(o)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!Ws(e)||!Ws(t)||!Ws(n))return null;var o=function(a){return{h:g2(a.h),s:ai(a.s,0,100),v:ai(a.v,0,100),a:ai(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return y2(o)},"hsv"]]},pE=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},A5=function(r){return typeof r=="string"?pE(r.trim(),_1.string):typeof r=="object"&&r!==null?pE(r,_1.object):[null,void 0]},Fv=function(r,e){var t=wc(r);return{h:t.h,s:ai(t.s+100*e,0,100),l:t.l,a:t.a}},Dv=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},mE=function(r,e){var t=wc(r);return{h:t.h,s:t.s,l:ai(t.l+100*e,0,100),a:t.a}},w1=function(){function r(e){this.parsed=A5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return xr(Dv(this.rgba),2)},r.prototype.isDark=function(){return Dv(this.rgba)<.5},r.prototype.isLight=function(){return Dv(this.rgba)>=.5},r.prototype.toHex=function(){return e=Nv(this.rgba),t=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Of(xr(255*s)):"","#"+Of(t)+Of(n)+Of(i)+o;var e,t,n,i,s,o},r.prototype.toRgb=function(){return Nv(this.rgba)},r.prototype.toRgbString=function(){return e=Nv(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return dE(wc(this.rgba))},r.prototype.toHslString=function(){return e=dE(wc(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=v2(this.rgba),{h:xr(e.h),s:xr(e.s),v:xr(e.v),a:xr(e.a,3)};var e},r.prototype.invert=function(){return hs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),hs(Fv(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),hs(Fv(this.rgba,-e))},r.prototype.grayscale=function(){return hs(Fv(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),hs(mE(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),hs(mE(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?hs({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):xr(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=wc(this.rgba);return typeof e=="number"?hs({h:e,s:t.s,l:t.l,a:t.a}):xr(t.h)},r.prototype.isEqual=function(e){return this.toHex()===hs(e).toHex()},r}(),hs=function(r){return r instanceof w1?r:new w1(r)},gE=[],k5=function(r){r.forEach(function(e){gE.indexOf(e)<0&&(e(w1,_1),gE.push(e))})};function I5(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,u,l=n[this.toHex()];if(l)return l;if(o!=null&&o.closest){var c=this.toRgb(),h=1/0,d="black";if(!s.length)for(var p in t)s[p]=new r(t[p]).toRgb();for(var g in t){var v=(a=c,u=s[g],Math.pow(a.r-u.r,2)+Math.pow(a.g-u.g,2)+Math.pow(a.b-u.b,2));v<h&&(h=v,d=g)}return d}},e.string.push([function(o){var a=o.toLowerCase(),u=a==="transparent"?"#0000":t[a];return u?new r(u).toRgb():null},"name"])}k5([I5]);const Zl=class Np{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Np)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,i,s]=Np.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,n,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,n,i,s]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let t,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,s=255]=e,t/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Np.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=hs(e);o.isValid()&&({r:t,g:n,b:i,a:s}=o.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),n)}),e)}};Zl.shared=new Zl,Zl.temp=new Zl,Zl.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let lt=Zl;function M5(r){return Ve("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),lt.shared.setValue(r).toHex()}function R5(r){return Ve("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),lt.shared.setValue(r).toNumber()}function O5(){const r=[],e=[];for(let n=0;n<32;n++)r[n]=n,e[n]=n;r[Ae.NORMAL_NPM]=Ae.NORMAL,r[Ae.ADD_NPM]=Ae.ADD,r[Ae.SCREEN_NPM]=Ae.SCREEN,e[Ae.NORMAL]=Ae.NORMAL_NPM,e[Ae.ADD]=Ae.ADD_NPM,e[Ae.SCREEN]=Ae.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const x2=O5();function _2(r,e){return x2[e?1:0][r]}function B5(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function w2(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function cm(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function vE(r){return!(r&r-1)&&!!r}function yE(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Ru(r,e,t){const n=r.length;let i;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}function ta(r){return r===0?0:r<0?-1:1}let L5=0;function ul(){return++L5}const b1=class{constructor(r,e,t,n){this.left=r,this.top=e,this.right=t,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};b1.EMPTY=new b1(0,0,0,0);let xE=b1;const _E={},cs=Object.create(null),Do=Object.create(null);class N5{constructor(e,t,n){this._canvas=xe.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||xe.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function wE(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function bE(r,e,t,n,i){const s=4*e;for(let o=n,a=n*s+4*t;o<=i;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function F5(r){const{width:e,height:t}=r,n=r.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,u=t-1;for(;o<t&&wE(i,e,o);)++o;if(o===t)return xE.EMPTY;for(;wE(i,e,u);)--u;for(;bE(i,e,s,o,u);)++s;for(;bE(i,e,a,o,u);)--a;return++a,++u,new xE(s,o,a,u)}function D5(r){const e=F5(r),{width:t,height:n}=e;let i=null;if(!e.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,t,n)}return{width:t,height:n,data:i}}function U5(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function go(r,e=1){var n;const t=(n=xe.RETINA_PREFIX)==null?void 0:n.exec(r);return t?parseFloat(t[1]):e}var me=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(me||{});const S1=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},SE=(r,e)=>S1(r).priority??e,Te={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(S1).forEach(e=>{e.type.forEach(t=>{var n,i;return(i=(n=this._removeHandlers)[t])==null?void 0:i.call(n,e)})}),this},add(...r){return r.map(S1).forEach(e=>{e.type.forEach(t=>{var s,o;const n=this._addHandlers,i=this._queue;n[t]?(s=n[t])==null||s.call(n,e):(i[t]=i[t]||[],(o=i[t])==null||o.push(e))})}),this},handle(r,e,t){var o;const n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;const s=this._queue;return s[r]&&((o=s[r])==null||o.forEach(a=>e(a)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>SE(s,t)-SE(i,t)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class T1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const j5=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function X5(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function H5(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=j5.replace(/%forloop%/gi,X5(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const Uv=0,jv=1,Xv=2,Hv=3,zv=4,$v=5;class Ds{constructor(){this.data=0,this.blendMode=Ae.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Uv)}set blend(e){!!(this.data&1<<Uv)!==e&&(this.data^=1<<Uv)}get offsets(){return!!(this.data&1<<jv)}set offsets(e){!!(this.data&1<<jv)!==e&&(this.data^=1<<jv)}get culling(){return!!(this.data&1<<Xv)}set culling(e){!!(this.data&1<<Xv)!==e&&(this.data^=1<<Xv)}get depthTest(){return!!(this.data&1<<Hv)}set depthTest(e){!!(this.data&1<<Hv)!==e&&(this.data^=1<<Hv)}get depthMask(){return!!(this.data&1<<$v)}set depthMask(e){!!(this.data&1<<$v)!==e&&(this.data^=1<<$v)}get clockwiseFrontFace(){return!!(this.data&1<<zv)}set clockwiseFrontFace(e){!!(this.data&1<<zv)!==e&&(this.data^=1<<zv)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ae.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Ds;return e.depthTest=!1,e.blend=!0,e}}Ds.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const E1=[];function b2(r,e){if(!r)return null;let t="";if(typeof r=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(let n=E1.length-1;n>=0;--n){const i=E1[n];if(i.test&&i.test(r,t))return new i(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Fi{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,i,s,o,a,u){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:c}=this;this._aliasCount++;for(let h=0,d=c.length;h<d;h++)c[h][l](e,t,n,i,s,o,a,u);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Fi.prototype,{dispatch:{value:Fi.prototype.emit},run:{value:Fi.prototype.emit}});class Hc{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Fi("setRealSize"),this.onUpdate=new Fi("update"),this.onError=new Fi("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class bg extends Hc{constructor(e,t){const{width:n,height:i}=t||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===$r.UNPACK);const s=t.realWidth,o=t.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(t.target,0,0,0,s,o,t.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(t.target,0,n.internalFormat,s,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const z5={scaleMode:Bi.NEAREST,alphaMode:$r.NPM},C1=class Jl extends md{constructor(e=null,t=null){super(),t=Object.assign({},Jl.defaultOptions,t);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:u,wrapMode:l,format:c,type:h,target:d,resolution:p,resourceOptions:g}=t;e&&!(e instanceof Hc)&&(e=b2(e,g),e.internal=!0),this.resolution=p||xe.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((u||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=l,this._scaleMode=o,this.format=c,this.type=h,this.target=d,this.alphaMode=n,this.uid=ul(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&u>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=vE(this.realWidth)&&vE(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Do[this.cacheId],delete cs[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Jl.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,n=xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${ul()}`}s=e._pixiId}let o=Do[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Jl(e,t),o.cacheId=s,Jl.addToCache(o,s)),o}static fromBuffer(e,t,n,i){e=e||new Float32Array(t*n*4);const s=new bg(e,{width:t,height:n,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=de.RGBA,a=Se.FLOAT):e instanceof Int32Array?(o=de.RGBA_INTEGER,a=Se.INT):e instanceof Uint32Array?(o=de.RGBA_INTEGER,a=Se.UNSIGNED_INT):e instanceof Int16Array?(o=de.RGBA_INTEGER,a=Se.SHORT):e instanceof Uint16Array?(o=de.RGBA_INTEGER,a=Se.UNSIGNED_SHORT):e instanceof Int8Array?(o=de.RGBA,a=Se.BYTE):(o=de.RGBA,a=Se.UNSIGNED_BYTE),s.internal=!0,new Jl(s,Object.assign({},z5,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Do[t]&&Do[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),Do[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=Do[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Do[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete Do[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};C1.defaultOptions={mipmap:di.POW2,anisotropicLevel:0,scaleMode:Bi.LINEAR,wrapMode:hi.CLAMP,alphaMode:$r.UNPACK,target:ku.TEXTURE_2D,format:de.RGBA,type:Se.UNSIGNED_BYTE},C1._globalBatch=0;let De=C1;class P1{constructor(){this.texArray=null,this.blend=0,this.type=Oi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let $5=0;class _t{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=$5++,this.disposeRunner=new Fi("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?As.ELEMENT_ARRAY_BUFFER:As.ARRAY_BUFFER}get index(){return this.type===As.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new _t(e)}}class dm{constructor(e,t=0,n=!1,i=Se.FLOAT,s,o,a,u=1){this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=u}destroy(){this.buffer=null}static from(e,t,n,i,s){return new dm(e,t,n,i,s)}}const Y5={Float32Array,Uint32Array,Int32Array,Uint8Array};function G5(r,e){let t=0,n=0;const i={};for(let u=0;u<r.length;u++)n+=e[u],t+=r[u].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let u=0;u<r.length;u++){const l=e[u],c=r[u],h=w2(c);i[h]||(i[h]=new Y5[h](s)),o=i[h];for(let d=0;d<c.length;d++){const p=(d/l|0)*n+a,g=d%l;o[p+g]=c[d]}a+=l}return new Float32Array(s)}const TE={5126:4,5123:2,5121:1};let W5=0;const V5={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Os{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=W5++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Fi("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,i=!1,s,o,a,u=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof _t||(t instanceof Array&&(t=new Float32Array(t)),t=new _t(t));const l=e.split("|");if(l.length>1){for(let h=0;h<l.length;h++)this.addAttribute(l[h],t,n,i,s);return this}let c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new dm(c,n,i,s,o,a,u),this.instanced=this.instanced||u,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof _t||(e instanceof Array&&(e=new Uint16Array(e)),e=new _t(e)),e.type=As.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],n=new _t;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*TE[s.type]/4),s.buffer=0}for(n.data=G5(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Os;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new _t(this.buffers[t].data.slice(0));for(const t in this.attributes){const n=this.attributes[t];e.attributes[t]=new dm(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=As.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new Os,n=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)i[u]=i[u]||0,i[u]+=o.buffers[u].data.length,s[u]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new V5[w2(o.buffers[a].data)](i[a]),t.buffers[a]=new _t(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)n[u].set(o.buffers[u].data,s[u]),s[u]+=o.buffers[u].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=As.ELEMENT_ARRAY_BUFFER;let a=0,u=0,l=0,c=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){c=h;break}for(const h in o.attributes){const d=o.attributes[h];(d.buffer|0)===c&&(u+=d.size*TE[d.type]/4)}for(let h=0;h<e.length;h++){const d=e[h].indexBuffer.data;for(let p=0;p<d.length;p++)t.indexBuffer.data[p+l]+=a;a+=e[h].buffers[c].data.length/u,l+=d.length}}return t}}class S2 extends Os{constructor(e=!1){super(),this._buffer=new _t(null,e,!1),this._indexBuffer=new _t(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Se.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Se.FLOAT).addAttribute("aColor",this._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Se.FLOAT).addIndex(this._indexBuffer)}}const fm=Math.PI*2,q5=180/Math.PI,K5=Math.PI/180;var Mr=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Mr||{});class Xe{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new Xe(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}Xe.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Bf=[new Xe,new Xe,new Xe,new Xe];let $e=class A1{constructor(e=0,t=0,n=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=Mr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new A1(0,0,0,0)}clone(){return new A1(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const O=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>O}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Bf[0].set(e.left,e.top),u=Bf[1].set(e.left,e.bottom),l=Bf[2].set(e.right,e.top),c=Bf[3].set(e.right,e.bottom);if(l.x<=a.x||u.y<=a.y)return!1;const h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(a,a),t.apply(u,u),t.apply(l,l),t.apply(c,c),Math.max(a.x,u.x,l.x,c.x)<=n||Math.min(a.x,u.x,l.x,c.x)>=i||Math.max(a.y,u.y,l.y,c.y)<=s||Math.min(a.y,u.y,l.y,c.y)>=o))return!1;const d=h*(u.y-a.y),p=h*(a.x-u.x),g=d*n+p*s,v=d*i+p*s,x=d*n+p*o,y=d*i+p*o;if(Math.max(g,v,x,y)<=d*a.x+p*a.y||Math.min(g,v,x,y)>=d*c.x+p*c.y)return!1;const b=h*(a.y-l.y),_=h*(l.x-a.x),S=b*n+_*s,I=b*i+_*s,A=b*n+_*o,k=b*i+_*o;return!(Math.max(S,I,A,k)<=b*a.x+_*a.y||Math.min(S,I,A,k)>=b*c.x+_*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this}};$e.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Sg{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=Mr.CIRC}clone(){return new Sg(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n}getBounds(){return new $e(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Sg.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Tg{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.width=n,this.height=i,this.type=Mr.ELIP}clone(){return new Tg(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new $e(this.x-this.width,this.y-this.height,this.width,this.height)}}Tg.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let bc=class T2{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let i=0,s=t.length;i<s;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.type=Mr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new T2(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],u=this.points[s*2+1],l=this.points[o*2],c=this.points[o*2+1];u>t!=c>t&&e<(l-a)*((t-u)/(c-u))+a&&(n=!n)}return n}};bc.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class Eg{constructor(e=0,t=0,n=0,i=0,s=20){this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=Mr.RREC}clone(){return new Eg(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=t-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=t-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}Eg.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class bt{constructor(e=1,t=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,s,o){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new Xe;const n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new Xe;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){const t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,t,n,i,s,o,a,u,l){return this.a=Math.cos(a+l)*s,this.b=Math.sin(a+l)*s,this.c=-Math.sin(a-u)*o,this.d=Math.cos(a-u)*o,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),u=Math.atan2(n,t),l=Math.abs(a+u);return l<1e-5||Math.abs(fm-l)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=u),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-t*n;return this.a=i/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new bt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new bt}static get TEMP_MATRIX(){return new bt}}bt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Xa=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ha=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],za=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],$a=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],k1=[],E2=[],Lf=Math.sign;function Q5(){for(let r=0;r<16;r++){const e=[];k1.push(e);for(let t=0;t<16;t++){const n=Lf(Xa[r]*Xa[t]+za[r]*Ha[t]),i=Lf(Ha[r]*Xa[t]+$a[r]*Ha[t]),s=Lf(Xa[r]*za[t]+za[r]*$a[t]),o=Lf(Ha[r]*za[t]+$a[r]*$a[t]);for(let a=0;a<16;a++)if(Xa[a]===n&&Ha[a]===i&&za[a]===s&&$a[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){const e=new bt;e.set(Xa[r],Ha[r],za[r],$a[r],0,0),E2.push(e)}}Q5();const Lt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Xa[r],uY:r=>Ha[r],vX:r=>za[r],vY:r=>$a[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>k1[r][e],sub:(r,e)=>k1[r][Lt.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Lt.S:Lt.N:Math.abs(e)*2<=Math.abs(r)?r>0?Lt.E:Lt.W:e>0?r>0?Lt.SE:Lt.SW:r>0?Lt.NE:Lt.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{const i=E2[Lt.inv(e)];i.tx=t,i.ty=n,r.append(i)}};class Ss{constructor(e,t,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Ss(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ss.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const I1=class{constructor(){this.worldTransform=new bt,this.localTransform=new bt,this.position=new Ss(this.onChange,this,0,0),this.scale=new Ss(this.onChange,this,1,1),this.pivot=new Ss(this.onChange,this,0,0),this.skew=new Ss(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};I1.IDENTITY=new I1;let Cg=I1;Cg.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var Z5=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,J5=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function EE(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function Yv(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function C2(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Yv(2*e);case"bvec3":return Yv(3*e);case"bvec4":return Yv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ou=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],e4={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},t4={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function r4(r,e){var n;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in r.uniforms){const s=e[i];if(!s){((n=r.uniforms[i])==null?void 0:n.group)===!0&&(r.uniforms[i].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=r.uniforms[i];let a=!1;for(let u=0;u<Ou.length;u++)if(Ou[u].test(s,o)){t.push(Ou[u].code(i,o)),a=!0;break}if(!a){const u=(s.size===1&&!s.isArray?e4:t4)[s.type].replace("location",`ud["${i}"].location`);t.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const P2={};let Yl=P2;function n4(){if(Yl===P2||Yl!=null&&Yl.isContextLost()){const r=xe.ADAPTER.createCanvas();let e;xe.PREFER_ENV>=_l.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Yl=e}return Yl}let Nf;function i4(){if(!Nf){Nf=si.MEDIUM;const r=n4();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(Nf=e.precision?si.HIGH:si.MEDIUM)}}return Nf}function CE(r,e){const t=r.getShaderSource(e).split(`
`).map((l,c)=>`${c}: ${l}`),n=r.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!s[l]?(s[l]=!0,!0):!1),a=[""];o.forEach(l=>{t[l-1]=`%c${t[l-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const u=t.join(`
`);a[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function s4(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||CE(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||CE(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const o4={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function A2(r){return o4[r]}let Ff=null;const PE={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function k2(r,e){if(!Ff){const t=Object.keys(PE);Ff={};for(let n=0;n<t.length;++n){const i=t[n];Ff[r[i]]=PE[i]}}return Ff[e]}function AE(r,e,t){if(r.substring(0,9)!=="precision"){let n=e;return e===si.HIGH&&t!==si.HIGH&&(n=si.MEDIUM),`precision ${n} float;
${r}`}else if(t!==si.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let Wh;function a4(){if(typeof Wh=="boolean")return Wh;try{Wh=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Wh=!1}return Wh}let l4=0;const Df={},M1=class eu{constructor(e,t,n="pixi-shader",i={}){this.extra={},this.id=l4++,this.vertexSrc=e||eu.defaultVertexSrc,this.fragmentSrc=t||eu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Df[n]?(Df[n]++,n+=`-${Df[n]}`):Df[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=AE(this.vertexSrc,eu.defaultVertexPrecision,si.HIGH),this.fragmentSrc=AE(this.fragmentSrc,eu.defaultFragmentPrecision,i4())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return J5}static get defaultFragmentSrc(){return Z5}static from(e,t,n){const i=e+t;let s=_E[i];return s||(_E[i]=s=new eu(e,t,n)),s}};M1.defaultVertexPrecision=si.HIGH,M1.defaultFragmentPrecision=oi.apple.device?si.HIGH:si.MEDIUM;let Ts=M1,u4=0;class Di{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=u4++,this.static=!!t,this.ubo=!!n,e instanceof _t?(this.buffer=e,this.buffer.type=As.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new _t(new Float32Array(1)),this.buffer.type=As.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(!this.ubo)this.uniforms[e]=new Di(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,n){return new Di(e,t,n)}static uboFrom(e,t){return new Di(e,t??!0,!0)}}class Ui{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Di?this.uniformGroup=t:this.uniformGroup=new Di(t):this.uniformGroup=new Di({}),this.disposeRunner=new Fi("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const n in t.uniforms){const i=t.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){const i=Ts.from(e,t);return new Ui(i,n)}}class I2{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=Di.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Ts(this.vertexSrc,i)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new bt,default:this.defaultGroupCache[e]};return new Ui(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class R1{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function h4(){return!oi.apple.device}function c4(r){let e=!0;const t=xe.ADAPTER.getNavigator();if(oi.tablet||oi.phone){if(oi.apple.device){const n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(oi.android.device){const n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?r:4}class Pg{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var d4=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,f4=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const sc=class Ci extends Pg{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=S2,this.vertexSize=6,this.state=Ds.for2d(),this.size=Ci.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??c4(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??h4(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ve("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return f4}static get defaultFragmentTemplate(){return d4}setShaderGenerator({vertex:e=Ci.defaultVertexSrc,fragment:t=Ci.defaultFragmentTemplate}={}){this.shaderGenerator=new I2(e,t)}contextChange(){const e=this.renderer.gl;xe.PREFER_ENV===_l.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ci.defaultMaxTextures),this.maxTextures=H5(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Ci,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new P1);for(;t.length<i;)t.push(new R1);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,n=Ci._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++De._globalBatch,u=0,l=n[0],c=0;i.copyBoundTextures(s,t);for(let h=0;h<this._bufferSize;++h){const d=e[h];e[h]=null,d._batchEnabled!==a&&(l.count>=t&&(i.boundArray(l,s,a,t),this.buildDrawCalls(l,c,h),c=h,l=n[++u],++a),d._batchEnabled=a,d.touched=o,l.elements[l.count++]=d)}l.count>0&&(i.boundArray(l,s,a,t),this.buildDrawCalls(l,c,this._bufferSize),++u,++a);for(let h=0;h<s.length;h++)s[h]=null;De._globalBatch=a}buildDrawCalls(e,t,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,u=Ci._drawCallPool;let l=this._dcIndex,c=this._aIndex,h=this._iIndex,d=u[l];d.start=this._iIndex,d.texArray=e;for(let p=t;p<n;++p){const g=i[p],v=g._texture.baseTexture,x=x2[v.alphaMode?1:0][g.blendMode];i[p]=null,t<p&&d.blend!==x&&(d.size=h-d.start,t=p,d=u[++l],d.texArray=e,d.start=h),this.packInterleavedGeometry(g,s,o,c,h),c+=g.vertexData.length/2*a,h+=g.indices.length,d.blend=x}t<n&&(d.size=h-d.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=h}bindAndClearTexArray(e){const t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:n}=this;Ci.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:n}=this.renderer,i=Ci._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:u,size:l,start:c,blend:h}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,n.set(this.state),t.drawElements(u,l,t.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ci.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=cm(Math.ceil(e/8)),n=yE(t),i=t*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new T1(i*this.vertexSize*4)),s}getIndexBuffer(e){const t=cm(Math.ceil(e/12)),n=yE(t),i=t*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,n,i,s){const{uint32View:o,float32View:a}=t,u=i/this.vertexSize,l=e.uvs,c=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),g=lt.shared.setValue(e._tintRGB).toPremultiplied(p,e._texture.baseTexture.alphaMode>0);for(let v=0;v<h.length;v+=2)a[i++]=h[v],a[i++]=h[v+1],a[i++]=l[v],a[i++]=l[v+1],o[i++]=g,a[i++]=d;for(let v=0;v<c.length;v++)n[s++]=u+c[v]}};sc.defaultBatchSize=4096,sc.extension={name:"batch",type:me.RendererPlugin},sc._drawCallPool=[],sc._textureArrayPool=[];let $o=sc;Te.add($o);var p4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,m4=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const O1=class oc extends Ui{constructor(e,t,n){const i=Ts.from(e||oc.defaultVertexSrc,t||oc.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=oc.defaultResolution,this.multisample=oc.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ds}apply(e,t,n,i,s){e.applyFilter(this,t,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return m4}static get defaultFragmentSrc(){return p4}};O1.defaultResolution=1,O1.defaultMultisample=tr.NONE;let en=O1;class pm{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new lt(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:n,backgroundAlpha:i}=e,s=n??t;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}pm.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},pm.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"background"};Te.add(pm);class M2{constructor(e){this.renderer=e,this.emptyRenderer=new Pg(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:n}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,n,i){const{elements:s,ids:o,count:a}=e;let u=0;for(let l=0;l<a;l++){const c=s[l],h=c._batchLocation;if(h>=0&&h<i&&t[h]===c){o[l]=h;continue}for(;u<i;){const d=t[u];if(d&&d._batchEnabled===n&&d._batchLocation===u){u++;continue}o[l]=u,c._batchLocation=u,t[u]=c;break}}}destroy(){this.renderer=null}}M2.extension={type:me.RendererSystem,name:"batch"};Te.add(M2);let kE=0;class mm{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=kE++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=kE++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(xe.PREFER_ENV>=_l.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}mm.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},mm.extension={type:me.RendererSystem,name:"context"};Te.add(mm);class B1{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Fi("disposeFramebuffer"),this.multisample=tr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new De(null,{scaleMode:Bi.NEAREST,resolution:1,mipmap:di.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new De(null,{scaleMode:Bi.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:di.OFF,format:de.DEPTH_COMPONENT,type:Se.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class R2 extends De{constructor(e={}){if(typeof e=="number"){const t=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:t,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=tr.NONE),super(null,e),this.mipmap=di.OFF,this.valid=!0,this._clear=new lt([0,0,0,0]),this.framebuffer=new B1(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class vo extends Hc{constructor(e){const t=e,n=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,i=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){n===void 0&&!t.startsWith("data:")?e.crossOrigin=U5(t):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,t,n,i){const s=e.gl,o=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===$r.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(t.target,0,n.internalFormat,t.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}}class O2 extends vo{constructor(e,t){if(t=t||{},typeof e=="string"){const n=new Image;vo.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??xe.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===$r.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class U_{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){const i=t.width,s=t.height;if(n){const o=e.width/2/i,a=e.height/2/s,u=e.x/i+o,l=e.y/s+a;n=Lt.add(n,Lt.NW),this.x0=u+o*Lt.uX(n),this.y0=l+a*Lt.uY(n),n=Lt.add(n,2),this.x1=u+o*Lt.uX(n),this.y1=l+a*Lt.uY(n),n=Lt.add(n,2),this.x2=u+o*Lt.uX(n),this.y2=l+a*Lt.uY(n),n=Lt.add(n,2),this.x3=u+o*Lt.uX(n),this.y3=l+a*Lt.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}U_.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const IE=new U_;function Uf(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}let Ie=class yt extends md{constructor(e,t,n,i,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new $e(0,0,1,1)),e instanceof yt&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=IE,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Xe(o.x,o.y):new Xe(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&cs[t.url]&&yt.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,yt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new yt(this.baseTexture,!this.noFrame&&e,t,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===IE&&(this._uvs=new U_),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=xe.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof De){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${ul()}`,De.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${ul()}`}s=e._pixiId}let o=cs[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof De)?(t.resolution||(t.resolution=go(e)),o=new yt(new De(e,t)),o.baseTexture.cacheId=s,De.addToCache(o.baseTexture,s),yt.addToCache(o,s)):!o&&e instanceof De&&(o=new yt(e),yt.addToCache(o,s)),o}static fromURL(e,t){const n=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),i=yt.from(e,Object.assign({resourceOptions:n},t),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,n,i){return new yt(De.fromBuffer(e,t,n,i))}static fromLoader(e,t,n,i){const s=new De(e,Object.assign({scaleMode:De.defaultOptions.scaleMode,resolution:go(t)},i)),{resource:o}=s;o instanceof O2&&(o.url=t);const a=new yt(s);return n||(n=t),De.addToCache(a.baseTexture,n),yt.addToCache(a,n),n!==t&&(De.addToCache(a.baseTexture,t),yt.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(u=>{a.baseTexture.once("loaded",()=>u(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),cs[t]&&cs[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),cs[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=cs[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete cs[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)cs[e.textureCacheIds[t]]===e&&delete cs[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:n,width:i,height:s}=e,o=t+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const u=o&&a?"and":"or",l=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,c=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${l} ${u} ${c}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return yt._EMPTY||(yt._EMPTY=new yt(new De),Uf(yt._EMPTY),Uf(yt._EMPTY.baseTexture)),yt._EMPTY}static get WHITE(){if(!yt._WHITE){const e=xe.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),yt._WHITE=new yt(De.from(e)),Uf(yt._WHITE),Uf(yt._WHITE.baseTexture)}return yt._WHITE}};class wl extends Ie{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new wl(new R2(e))}}class B2{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,n=tr.NONE){const i=new R2(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new wl(i)}getOptimalTexture(e,t,n=1,i=tr.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),t=Math.max(Math.ceil(t*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=cm(e),t=cm(t),s=((e&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,t,n){const i=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||tr.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}B2.SCREEN_KEY=-1;class g4 extends Os{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class L2 extends Os{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new _t(this.vertices),this.uvBuffer=new _t(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+t.width/e.width,this.uvs[3]=i,this.uvs[4]=n+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=n,this.uvs[7]=i+t.height/e.height,n=t.x,i=t.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=n+t.width,this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class v4{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=tr.NONE,this.sourceFrame=new $e,this.destinationFrame=new $e,this.bindingSourceFrame=new $e,this.bindingDestinationFrame=new $e,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const jf=[new Xe,new Xe,new Xe,new Xe],Gv=new bt;class N2{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new B2,this.statePool=[],this.quad=new g4,this.quadUv=new L2,this.tempRect=new $e,this.activeState={},this.globalUniforms=new Di({outputFrame:new $e,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new v4,o=n.renderTexture;let a,u;if(o.current){const x=o.current;a=x.resolution,u=x.multisample}else a=n.resolution,u=n.multisample;let l=t[0].resolution||a,c=t[0].multisample??u,h=t[0].padding,d=t[0].autoFit,p=t[0].legacy??!0;for(let x=1;x<t.length;x++){const y=t[x];l=Math.min(l,y.resolution||a),c=Math.min(c,y.multisample??u),h=this.useMaxPadding?Math.max(h,y.padding):h+y.padding,d=d&&y.autoFit,p=p||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=l,s.multisample=c,s.legacy=p,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(h);const g=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Gv.copyFrom(n.projection.transform).invert(),g),d?(s.sourceFrame.fit(g),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(g)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,c),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,v),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;const i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const l=i.filterArea;l[0]=t.destinationFrame.width,l[1]=t.destinationFrame.height,l[2]=t.sourceFrame.x,l[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const u=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,u.renderTexture,xs.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let l=t.renderTexture,c=this.getOptimalFilterTexture(l.width,l.height,t.resolution);c.filterFrame=l.filterFrame;let h=0;for(h=0;h<n.length-1;++h){h===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(l.width,l.height,t.resolution),c.filterFrame=l.filterFrame),n[h].apply(this,l,c,xs.CLEAR,t);const d=l;l=c,c=d}n[h].apply(this,l,u.renderTexture,xs.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=xs.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(t===xs.CLEAR||t===xs.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Oi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Oi.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=t._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=t.worldTransform.copyTo(bt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,i=tr.NONE){return this.texturePool.getOptimalTexture(e,t,n,i)}getFilterTexture(e,t,n){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||tr.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const n=jf[0],i=jf[1],s=jf[2],o=jf[3];n.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),u=Math.min(n.y,i.y,s.y,o.y),l=Math.max(n.x,i.x,s.x,o.x),c=Math.max(n.y,i.y,s.y,o.y);t.x=a,t.y=u,t.width=l-a,t.height=c-u}roundFrame(e,t,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:u,d:l}=s;if((Math.abs(a)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}s=s?Gv.copyFrom(s):Gv.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}N2.extension={type:me.RendererSystem,name:"filter"};Te.add(N2);class y4{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=tr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const x4=new $e;class F2{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new B1(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new $e,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;xe.PREFER_ENV===_l.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>n,a=t.height>>n,u=o/t.width;this.setViewport(t.x*u,t.y*u,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,i){const s=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=n,s.height=i,this.gl.viewport(e,t,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,i,s=o1.COLOR|o1.DEPTH){const{gl:o}=this;o.clearColor(e,t,n,i),o.clear(s)}initFramebuffer(e){const{gl:t}=this,n=new y4(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){t.bindRenderbuffer(t.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],u=a.parentTextureArray||a;this.renderer.texture.bind(u,0),o===0&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let u=0;u<o;u++){const l=s[u],c=l.parentTextureArray||l;this.renderer.texture.bind(c,0),u===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+u,l.target,c._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+u))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const u=e.depthTexture;this.renderer.texture.bind(u,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let u,l;this.renderer.context.webGLVersion===1?(u=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH_STENCIL):e.depth&&e.stencil?(u=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH24_STENCIL8):e.depth?(u=n.DEPTH_ATTACHMENT,l=n.DEPTH_COMPONENT24):(u=n.STENCIL_ATTACHMENT,l=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,l,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,l,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,u,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let n=tr.NONE;if(e<=1||t===null)return n;for(let i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return n===1&&(n=tr.NONE),n}blit(e,t,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const u=i.glFramebuffers[a];if(!u)return;if(!e){if(!u.msaaBuffer)return;const c=i.colorTextures[0];if(!c)return;u.blitFramebuffer||(u.blitFramebuffer=new B1(i.width,i.height),u.blitFramebuffer.addColorTexture(0,c)),e=u.blitFramebuffer,e.colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=x4,t.width=i.width,t.height=i.height),n||(n=t);const l=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,u;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,u=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,u=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,u=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,u,n,i):s.renderbufferStorage(s.RENDERBUFFER,u,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new $e}destroy(){this.renderer=null}}F2.extension={type:me.RendererSystem,name:"framebuffer"};Te.add(F2);const Wv={5126:4,5123:2,5121:1};class D2{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;xe.PREFER_ENV===_l.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,u)=>n.drawElementsInstancedANGLE(i,s,o,a,u),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];t.update(i)}}checkCompatibility(e,t){const n=e.attributes,i=t.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const n=e.attributes,i=t.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,t,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const u=this.getSignature(e,a),l=e.glVertexArrayObjects[this.CONTEXT_UID];let c=l[u];if(c)return l[a.id]=c,c;const h=e.buffers,d=e.attributes,p={},g={};for(const v in h)p[v]=0,g[v]=0;for(const v in d)!d[v].size&&a.attributeData[v]?d[v].size=a.attributeData[v].size:d[v].size||console.warn(`PIXI Geometry attribute '${v}' size cannot be determined (likely the bound shader does not have the attribute)`),p[d[v].buffer]+=d[v].size*Wv[d[v].type];for(const v in d){const x=d[v],y=x.size;x.stride===void 0&&(p[x.buffer]===y*Wv[x.type]?x.stride=0:x.stride=p[x.buffer]),x.start===void 0&&(x.start=g[x.buffer],g[x.buffer]+=y*Wv[x.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(let v=0;v<h.length;v++){const x=h[v];o.bind(x),n&&x._glBuffers[s].refCount++}return this.activateVao(e,a),l[a.id]=c,l[u]=c,i.bindVertexArray(null),o.unbind(As.ARRAY_BUFFER),c}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let u=0;u<s.length;u++){const l=s[u]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&o.dispose(s[u],t))}if(!t){for(const u in n)if(u[0]==="g"){const l=n[u];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let u=null;for(const l in a){const c=a[l],h=o[c.buffer],d=h._glBuffers[i];if(t.attributeData[l]){u!==d&&(s.bind(h),u=d);const p=t.attributeData[l].location;if(n.enableVertexAttribArray(p),n.vertexAttribPointer(p,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(p,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,u=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,u,(n||0)*a,i||1):s.drawElements(e,t||o.indexBuffer.data.length,u,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,t||o.getSize(),i||1):s.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}D2.extension={type:me.RendererSystem,name:"geometry"};Te.add(D2);const ME=new bt;class Ag{constructor(e,t){this._texture=e,this.mapCoord=new bt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];t[i]=s*n.a+o*n.c+n.tx,t[i+1]=s*n.b+o*n.d+n.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=t.orig,s=t.trim;s&&(ME.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(ME));const o=t.baseTexture,a=this.uClampFrame,u=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+u+l)/o.width,a[1]=(t._frame.y+u+l)/o.height,a[2]=(t._frame.x+t._frame.width-u+l)/o.width,a[3]=(t._frame.y+t._frame.height-u+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var _4=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,w4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class b4 extends en{constructor(e,t,n){let i=null;typeof e!="string"&&t===void 0&&n===void 0&&(i=e,e=void 0,t=void 0,n=void 0),super(e||w4,t||_4,n),this.maskSprite=i,this.maskMatrix=new bt}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Ag(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,i))}}class S4{constructor(e=null){this.type=lr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=en.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=lr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class U2{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){const s=this.maskDataPool.pop()||new S4;s.pooled=!0,s.maskObject=t,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==lr.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case lr.SCISSOR:this.renderer.scissor.push(n);break;case lr.STENCIL:this.renderer.stencil.push(n);break;case lr.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case lr.COLOR:this.pushColorMask(n);break}n.type===lr.SPRITE&&this.maskStack.push(n)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case lr.SCISSOR:this.renderer.scissor.pop(t);break;case lr.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case lr.SPRITE:this.popSpriteMask(t);break;case lr.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===lr.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=lr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=lr.SCISSOR:e.type=lr.STENCIL:e.type=lr.COLOR}pushSpriteMask(e){const{maskObject:t}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new b4])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;const s=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}U2.extension={type:me.RendererSystem,name:"mask"};Te.add(U2);class j2{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const RE=new bt,OE=[],X2=class Fp extends j2{constructor(e){super(e),this.glConst=xe.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,OE.pop()??new $e);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Fp.isMatrixRotated(t.worldTransform)||Fp.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,t,n,i,s){Fp.isMatrixRotated(s)||(s=s?RE.copyFrom(s):RE.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&OE.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};X2.extension={type:me.RendererSystem,name:"scissor"};let T4=X2;Te.add(T4);class H2 extends j2{constructor(e){super(e),this.glConst=xe.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}H2.extension={type:me.RendererSystem,name:"stencil"};Te.add(H2);class z2{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ve("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ve("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ve("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}z2.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"_plugin"};Te.add(z2);class $2{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new bt,this.transform=null}update(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}$2.extension={type:me.RendererSystem,name:"projection"};Te.add($2);const E4=new Cg,BE=new $e;class Y2{constructor(e){this.renderer=e,this._tempMatrix=new bt}generateTexture(e,t){const{region:n,...i}=t||{},s=(n==null?void 0:n.copyTo(BE))||e.getLocalBounds(BE,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=wl.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const u=e.transform;return e.transform=E4,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=u,a}destroy(){}}Y2.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"textureGenerator"};Te.add(Y2);const Fa=new $e,Vh=new $e;class G2{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new $e,this.destinationFrame=new $e,this.viewportFrame=new $e}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(Fa.width=e.frame.width,Fa.height=e.frame.height,t=Fa),n||(Vh.x=e.frame.x,Vh.y=e.frame.y,Vh.width=t.width,Vh.height=t.height,n=Vh),o=s.framebuffer):(a=i.resolution,t||(Fa.width=i._view.screen.width,Fa.height=i._view.screen.height,t=Fa),n||(n=Fa,n.width=t.width,n.height=t.height));const u=this.viewportFrame;u.x=n.x*a,u.y=n.y*a,u.width=n.width*a,u.height=n.height*a,e||(u.y=i.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(o,u),this.renderer.projection.update(n,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=lt.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:u,y:l,width:c,height:h}=this.viewportFrame;u=Math.round(u),l=Math.round(l),c=Math.round(c),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,l,c,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}G2.extension={type:me.RendererSystem,name:"renderTexture"};Te.add(G2);class C4{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function P4(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(r,i);if(s.name.startsWith("gl_"))continue;const o=k2(e,s.type),a={type:o,name:s.name,size:A2(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}return t}function A4(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(r,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),u=k2(e,s.type);t[o]={name:o,index:i,type:u,size:s.size,isArray:a,value:C2(u,s.size)}}return t}function k4(r,e){var a;const t=EE(r,r.VERTEX_SHADER,e.vertexSrc),n=EE(r,r.FRAGMENT_SHADER,e.fragmentSrc),i=r.createProgram();r.attachShader(i,t),r.attachShader(i,n);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||s4(r,i,t,n),e.attributeData=P4(i,r),e.uniformData=A4(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const u=Object.keys(e.attributeData);u.sort((l,c)=>l>c?1:-1);for(let l=0;l<u.length;l++)e.attributeData[u[l]].location=l,r.bindAttribLocation(i,l,u[l]);r.linkProgram(i)}r.deleteShader(t),r.deleteShader(n);const o={};for(const u in e.uniformData){const l=e.uniformData[u];o[u]={location:r.getUniformLocation(i,u),value:C2(l.type,l.size)}}return new C4(i,o)}function I4(r,e,t,n,i){t.buffer.update(i)}const M4={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},W2={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function R4(r){const e=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=W2[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,n%t!==0&&n<16){const a=n%t%16;n+=a,i+=a}n+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,n=t):(o.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function O4(r,e){const t=[];for(const n in r)e[n]&&t.push(e[n]);return t.sort((n,i)=>n.index-i.index),t}function B4(r,e){if(!r.autoManage)return{size:0,syncFunc:I4};const t=O4(r.uniforms,e),{uboElements:n,size:i}=R4(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],u=r.uniforms[a.data.name],l=a.data.name;let c=!1;for(let h=0;h<Ou.length;h++){const d=Ou[h];if(d.codeUbo&&d.test(a.data,u)){s.push(`offset = ${a.offset/4};`,Ou[h].codeUbo(a.data.name,u)),c=!0;break}}if(!c)if(a.data.size>1){const h=A2(a.data.type),d=Math.max(W2[a.data.type]/16,1),p=h/d,g=(4-p%4)%4;s.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${p}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const h=M4[a.data.type];s.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let L4=0;const Xf={textureCount:0,uboCount:0};class V2{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=L4++}systemCheck(){if(!a4())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(Xf.textureCount=0,Xf.uboCount=0,this.syncUniformGroup(e.uniformGroup,Xf)),i}setUniforms(e){const t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=r4(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Xf,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=B4(e,this.shader.program.uniformData)),e.autoManage){const u=new Float32Array(a.size/4);e.buffer.update(u)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,n=e.program,i=k4(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}V2.extension={type:me.RendererSystem,name:"shader"};Te.add(V2);class gm{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.2 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}gm.defaultOptions={hello:!1},gm.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"startup"};Te.add(gm);function N4(r,e=[]){return e[Ae.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.ADD]=[r.ONE,r.ONE],e[Ae.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.NONE]=[0,0],e[Ae.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[Ae.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Ae.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[Ae.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[Ae.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Ae.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[Ae.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[Ae.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[Ae.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[Ae.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Ae.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const F4=0,D4=1,U4=2,j4=3,X4=4,H4=5,q2=class L1{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ae.NONE,this._blendEq=!1,this.map=[],this.map[F4]=this.setBlend,this.map[D4]=this.setOffset,this.map[U4]=this.setCullFace,this.map[j4]=this.setDepthTest,this.map[X4]=this.setFrontFace,this.map[H4]=this.setDepthMask,this.checks=[],this.defaultState=new Ds,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=N4(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(L1.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(L1.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};q2.extension={type:me.RendererSystem,name:"state"};let z4=q2;Te.add(z4);class $4 extends md{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(i=>e.systems[i]),n=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Fi(t)})}addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,t){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const ac=class Dp{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Dp.defaultMaxIdle,this.checkCountMax=Dp.defaultCheckCountMax,this.mode=Dp.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==I_.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let n=!1;for(let i=0;i<t.length;i++){const s=t[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){const t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};ac.defaultMode=I_.AUTO,ac.defaultMaxIdle=60*60,ac.defaultCheckCountMax=60*10,ac.extension={type:me.RendererSystem,name:"textureGC"};let Ya=ac;Te.add(Ya);class Vv{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Se.UNSIGNED_BYTE,this.internalFormat=de.RGBA,this.samplerType=0}}function Y4(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:_e.FLOAT,[r.RGBA]:_e.FLOAT,[r.ALPHA]:_e.FLOAT,[r.LUMINANCE]:_e.FLOAT,[r.LUMINANCE_ALPHA]:_e.FLOAT,[r.R8]:_e.FLOAT,[r.R8_SNORM]:_e.FLOAT,[r.RG8]:_e.FLOAT,[r.RG8_SNORM]:_e.FLOAT,[r.RGB8]:_e.FLOAT,[r.RGB8_SNORM]:_e.FLOAT,[r.RGB565]:_e.FLOAT,[r.RGBA4]:_e.FLOAT,[r.RGB5_A1]:_e.FLOAT,[r.RGBA8]:_e.FLOAT,[r.RGBA8_SNORM]:_e.FLOAT,[r.RGB10_A2]:_e.FLOAT,[r.RGB10_A2UI]:_e.FLOAT,[r.SRGB8]:_e.FLOAT,[r.SRGB8_ALPHA8]:_e.FLOAT,[r.R16F]:_e.FLOAT,[r.RG16F]:_e.FLOAT,[r.RGB16F]:_e.FLOAT,[r.RGBA16F]:_e.FLOAT,[r.R32F]:_e.FLOAT,[r.RG32F]:_e.FLOAT,[r.RGB32F]:_e.FLOAT,[r.RGBA32F]:_e.FLOAT,[r.R11F_G11F_B10F]:_e.FLOAT,[r.RGB9_E5]:_e.FLOAT,[r.R8I]:_e.INT,[r.R8UI]:_e.UINT,[r.R16I]:_e.INT,[r.R16UI]:_e.UINT,[r.R32I]:_e.INT,[r.R32UI]:_e.UINT,[r.RG8I]:_e.INT,[r.RG8UI]:_e.UINT,[r.RG16I]:_e.INT,[r.RG16UI]:_e.UINT,[r.RG32I]:_e.INT,[r.RG32UI]:_e.UINT,[r.RGB8I]:_e.INT,[r.RGB8UI]:_e.UINT,[r.RGB16I]:_e.INT,[r.RGB16UI]:_e.UINT,[r.RGB32I]:_e.INT,[r.RGB32UI]:_e.UINT,[r.RGBA8I]:_e.INT,[r.RGBA8UI]:_e.UINT,[r.RGBA16I]:_e.INT,[r.RGBA16UI]:_e.UINT,[r.RGBA32I]:_e.INT,[r.RGBA32UI]:_e.UINT,[r.DEPTH_COMPONENT16]:_e.FLOAT,[r.DEPTH_COMPONENT24]:_e.FLOAT,[r.DEPTH_COMPONENT32F]:_e.FLOAT,[r.DEPTH_STENCIL]:_e.FLOAT,[r.DEPTH24_STENCIL8]:_e.FLOAT,[r.DEPTH32F_STENCIL8]:_e.FLOAT}:e={[r.RGB]:_e.FLOAT,[r.RGBA]:_e.FLOAT,[r.ALPHA]:_e.FLOAT,[r.LUMINANCE]:_e.FLOAT,[r.LUMINANCE_ALPHA]:_e.FLOAT,[r.DEPTH_STENCIL]:_e.FLOAT},e}function G4(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[Se.UNSIGNED_BYTE]:{[de.RGBA]:r.RGBA8,[de.RGB]:r.RGB8,[de.RG]:r.RG8,[de.RED]:r.R8,[de.RGBA_INTEGER]:r.RGBA8UI,[de.RGB_INTEGER]:r.RGB8UI,[de.RG_INTEGER]:r.RG8UI,[de.RED_INTEGER]:r.R8UI,[de.ALPHA]:r.ALPHA,[de.LUMINANCE]:r.LUMINANCE,[de.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Se.BYTE]:{[de.RGBA]:r.RGBA8_SNORM,[de.RGB]:r.RGB8_SNORM,[de.RG]:r.RG8_SNORM,[de.RED]:r.R8_SNORM,[de.RGBA_INTEGER]:r.RGBA8I,[de.RGB_INTEGER]:r.RGB8I,[de.RG_INTEGER]:r.RG8I,[de.RED_INTEGER]:r.R8I},[Se.UNSIGNED_SHORT]:{[de.RGBA_INTEGER]:r.RGBA16UI,[de.RGB_INTEGER]:r.RGB16UI,[de.RG_INTEGER]:r.RG16UI,[de.RED_INTEGER]:r.R16UI,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[Se.SHORT]:{[de.RGBA_INTEGER]:r.RGBA16I,[de.RGB_INTEGER]:r.RGB16I,[de.RG_INTEGER]:r.RG16I,[de.RED_INTEGER]:r.R16I},[Se.UNSIGNED_INT]:{[de.RGBA_INTEGER]:r.RGBA32UI,[de.RGB_INTEGER]:r.RGB32UI,[de.RG_INTEGER]:r.RG32UI,[de.RED_INTEGER]:r.R32UI,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[Se.INT]:{[de.RGBA_INTEGER]:r.RGBA32I,[de.RGB_INTEGER]:r.RGB32I,[de.RG_INTEGER]:r.RG32I,[de.RED_INTEGER]:r.R32I},[Se.FLOAT]:{[de.RGBA]:r.RGBA32F,[de.RGB]:r.RGB32F,[de.RG]:r.RG32F,[de.RED]:r.R32F,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[Se.HALF_FLOAT]:{[de.RGBA]:r.RGBA16F,[de.RGB]:r.RGB16F,[de.RG]:r.RG16F,[de.RED]:r.R16F},[Se.UNSIGNED_SHORT_5_6_5]:{[de.RGB]:r.RGB565},[Se.UNSIGNED_SHORT_4_4_4_4]:{[de.RGBA]:r.RGBA4},[Se.UNSIGNED_SHORT_5_5_5_1]:{[de.RGBA]:r.RGB5_A1},[Se.UNSIGNED_INT_2_10_10_10_REV]:{[de.RGBA]:r.RGB10_A2,[de.RGBA_INTEGER]:r.RGB10_A2UI},[Se.UNSIGNED_INT_10F_11F_11F_REV]:{[de.RGB]:r.R11F_G11F_B10F},[Se.UNSIGNED_INT_5_9_9_9_REV]:{[de.RGB]:r.RGB9_E5},[Se.UNSIGNED_INT_24_8]:{[de.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[Se.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[de.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[Se.UNSIGNED_BYTE]:{[de.RGBA]:r.RGBA,[de.RGB]:r.RGB,[de.ALPHA]:r.ALPHA,[de.LUMINANCE]:r.LUMINANCE,[de.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Se.UNSIGNED_SHORT_5_6_5]:{[de.RGB]:r.RGB},[Se.UNSIGNED_SHORT_4_4_4_4]:{[de.RGBA]:r.RGBA},[Se.UNSIGNED_SHORT_5_5_5_1]:{[de.RGBA]:r.RGBA}},e}class K2{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new De,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=G4(e),this.samplerTypes=Y4(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Vv(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Vv(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[i].samplerType!==_e.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new Vv(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var n;t.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??_e.FLOAT,this.webGLVersion===2&&e.type===Se.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var i;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const n=this.renderer;if(this.initTextureType(e,t),(i=e.resource)==null?void 0:i.upload(n,e,t))t.samplerType!==_e.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=n.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const i=this.managedTextures.indexOf(e);i!==-1&&Ru(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===di.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=hi.CLAMP:t.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const n=this.gl;if(t.mipmap&&e.mipmap!==di.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Bi.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Bi.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Bi.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Bi.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}K2.extension={type:me.RendererSystem,name:"texture"};Te.add(K2);class Q2{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:n,renderer:i}=this;t&&i.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:n,CONTEXT_UID:i}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[i]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const u=a._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&s.dispose(a,t))}n&&(t||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Q2.extension={type:me.RendererSystem,name:"transformFeedback"};Te.add(Q2);class vm{constructor(e){this.renderer=e}init(e){this.screen=new $e(0,0,e.width,e.height),this.element=e.view||xe.ADAPTER.createCanvas(),this.resolution=e.resolution||xe.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}vm.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},vm.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"_view"};Te.add(vm);xe.PREFER_ENV=_l.WEBGL2;xe.STRICT_TEXTURE_CACHE=!1;xe.RENDER_OPTIONS={...mm.defaultOptions,...pm.defaultOptions,...vm.defaultOptions,...gm.defaultOptions};Object.defineProperties(xe,{WRAP_MODE:{get(){return De.defaultOptions.wrapMode},set(r){Ve("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),De.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return De.defaultOptions.scaleMode},set(r){Ve("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),De.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return De.defaultOptions.mipmap},set(r){Ve("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),De.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return De.defaultOptions.anisotropicLevel},set(r){Ve("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),De.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return Ve("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),en.defaultResolution},set(r){en.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return Ve("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),en.defaultMultisample},set(r){en.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return $o.defaultMaxTextures},set(r){Ve("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),$o.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return $o.defaultBatchSize},set(r){Ve("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),$o.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return $o.canUploadSameBuffer},set(r){Ve("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),$o.canUploadSameBuffer=r}},GC_MODE:{get(){return Ya.defaultMode},set(r){Ve("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ya.defaultMode=r}},GC_MAX_IDLE:{get(){return Ya.defaultMaxIdle},set(r){Ve("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ya.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Ya.defaultCheckCountMax},set(r){Ve("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ya.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return Ts.defaultVertexPrecision},set(r){Ve("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ts.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return Ts.defaultFragmentPrecision},set(r){Ve("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ts.defaultFragmentPrecision=r}}});var ya=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(ya||{});class qv{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const Z2=class kn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new qv(null,null,1/0),this.deltaMS=1/kn.targetFPMS,this.elapsedMS=1/kn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=ya.NORMAL){return this._addListener(new qv(e,t,n))}addOnce(e,t,n=ya.NORMAL){return this._addListener(new qv(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*kn.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,kn.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!kn._shared){const e=kn._shared=new kn;e.autoStart=!0,e._protected=!0}return kn._shared}static get system(){if(!kn._system){const e=kn._system=new kn;e.autoStart=!0,e._protected=!0}return kn._system}};Z2.targetFPMS=.06;let Ut=Z2;Object.defineProperties(xe,{TARGET_FPMS:{get(){return Ut.targetFPMS},set(r){Ve("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ut.targetFPMS=r}}});class J2{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,ya.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ut.shared:new Ut,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}J2.extension=me.Application;Te.add(J2);const ek=[];Te.handleByList(me.Renderer,ek);function W4(r){for(const e of ek)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var V4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,q4=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const K4=V4,tk=q4;class rk{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=tr.HIGH?this.multisample=tr.HIGH:t>=tr.MEDIUM?this.multisample=tr.MEDIUM:t>=tr.LOW?this.multisample=tr.LOW:this.multisample=tr.NONE}destroy(){}}rk.extension={type:me.RendererSystem,name:"_multisample"};Te.add(rk);class Q4{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class nk{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,n*256,256)}update(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new Q4(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}nk.extension={type:me.RendererSystem,name:"buffer"};Te.add(nk);class ik{constructor(e){this.renderer=e}render(e,t){const n=this.renderer;let i,s,o,a;if(t&&(i=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){const u=e.enableTempParent();e.updateTransform(),e.disableTempParent(u)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(t.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ik.extension={type:me.RendererSystem,name:"objectRenderer"};Te.add(ik);const Up=class N1 extends $4{constructor(e){super(),this.type=$A.WEBGL,e=Object.assign({},xe.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Di({projectionMatrix:new bt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:N1.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Ve("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=N1.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:m2()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ve("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ve("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ve("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ve("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ve("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ve("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ve("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ve("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Up.extension={type:me.Renderer,priority:1},Up.__plugins={},Up.__systems={};let j_=Up;Te.handleByMap(me.RendererPlugin,j_.__plugins);Te.handleByMap(me.RendererSystem,j_.__systems);Te.add(j_);class sk extends Hc{constructor(e,t){const{width:n,height:i}=t||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new De;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Hc?this.addResourceAt(e[n],n):this.addResourceAt(b2(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:n}=this.items[0];return this.resize(t,n),this.update(),Promise.resolve(this)}),this._load}}class Z4 extends sk{constructor(e,t){const{width:n,height:i}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=ku.TEXTURE_2D_ARRAY}upload(e,t,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(let u=0;u<i;u++){const l=o[u];s[u]<l.dirtyId&&(s[u]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,u,l.resource.width,l.resource.height,1,t.format,n.type,l.resource.source))}return!0}}class J4 extends vo{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ok=class lc extends sk{constructor(e,t){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==lc.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<lc.SIDES;a++)this.items[a].target=ku.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=ku.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ku.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,n){const i=this.itemDirtyIds;for(let s=0;s<lc.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,t.realWidth,t.realHeight,0,t.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===lc.SIDES}};ok.SIDES=6;let e8=ok;class au extends vo{constructor(e,t){t=t||{};let n,i,s;typeof e=="string"?(n=au.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const n=await xe.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===$r.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}}),this._load)}upload(e,t,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return au._EMPTY=au._EMPTY??xe.ADAPTER.createCanvas(0,0),au._EMPTY}}const F1=class jp extends vo{constructor(e,t){t=t||{},super(xe.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},jp.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;vo.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*t,s=this._overrideHeight||this._overrideWidth/t*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${ul()}`,o.getContext("2d").drawImage(e,0,0,t,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const t=jp.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&jp.SVG_XML.test(e)}};F1.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,F1.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let D1=F1;class t8 extends vo{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const U1=class j1 extends vo{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");t.autoLoad!==!1&&n.setAttribute("preload","auto"),t.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),t.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),t.loop===!0&&n.setAttribute("loop",""),t.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];vo.crossOrigin(n,i,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:u}=e[s];if(a=a||e[s],a.startsWith("data:"))u=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const l=a.split("?").shift().toLowerCase(),c=l.slice(l.lastIndexOf(".")+1);u=u||j1.MIME_TYPES[c]||`video/${c}`}o.src=a,u&&(o.type=u),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Ut.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ut.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ut.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ut.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||j1.TYPES.includes(t)}};U1.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],U1.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let ak=U1;E1.push(au,O2,J4,ak,t8,D1,bg,e8,Z4);class ym{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?$e.EMPTY:(e=e||new $e(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:n,b:i,c:s,d:o,tx:a,ty:u}=e,l=n*t.x+s*t.y+a,c=i*t.x+o*t.y+u;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,t,n,i,s){this.addFrameMatrix(e.worldTransform,t,n,i,s)}addFrameMatrix(e,t,n,i,s){const o=e.a,a=e.b,u=e.c,l=e.d,c=e.tx,h=e.ty;let d=this.minX,p=this.minY,g=this.maxX,v=this.maxY,x=o*t+u*n+c,y=a*t+l*n+h;d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,x=o*i+u*n+c,y=a*i+l*n+h,d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,x=o*t+u*s+c,y=a*t+l*s+h,d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,x=o*i+u*s+c,y=a*i+l*s+h,d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,this.minX=d,this.minY=p,this.maxX=g,this.maxY=v}addVertexData(e,t,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let u=t;u<n;u+=2){const l=e[u],c=e[u+1];i=l<i?l:i,s=c<s?c:s,o=l>o?l:o,a=c>a?c:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)}addVerticesMatrix(e,t,n,i,s=0,o=s){const a=e.a,u=e.b,l=e.c,c=e.d,h=e.tx,d=e.ty;let p=this.minX,g=this.minY,v=this.maxX,x=this.maxY;for(let y=n;y<i;y+=2){const b=t[y],_=t[y+1],S=a*b+l*_+h,I=c*_+u*b+d;p=Math.min(p,S-s),v=Math.max(v,S+s),g=Math.min(g,I-o),x=Math.max(x,I+o)}this.minX=p,this.minY=g,this.maxX=v,this.maxY=x}addBounds(e){const t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&i<=o){const a=this.minX,u=this.minY,l=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=o>c?o:c}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&i<=o){const a=this.minX,u=this.minY,l=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=o>c?o:c}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,i,s,o){e-=s,t-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}}class Ot extends md{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Cg,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ym,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const i=t[n];Object.defineProperty(Ot.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new $e),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new $e),e=this._localBoundsRect),this._localBounds||(this._localBounds=new ym);const t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,i){return t&&(e=t.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,n=1,i=1,s=0,o=0,a=0,u=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=u,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new r8),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*q5}set angle(e){this.transform.rotation=e*K5}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class r8 extends Ot{constructor(){super(...arguments),this.sortDirty=null}}Ot.prototype.displayObjectUpdateTransform=Ot.prototype.updateTransform;const n8=new bt;function i8(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const lk=class X1 extends Ot{constructor(){super(),this.children=[],this.sortableChildren=X1.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const n=this.getChildIndex(e),i=this.getChildIndex(t);this.children[n]=t,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Ru(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,Ru(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ru(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const n=e,i=t,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){const i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(i8),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const n=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==X1.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=n8.copyFrom(i),i.prepend(s)):i=s),n&&t.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const u=this.children[o],l=u.cullable;u.cullable=l||!this.cullArea,u.render(e),u.cullable=l}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let u=0;u<t.length;u++)t[u].enabled&&this._enabledFilters.push(t[u])}const i=t&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==lr.NONE));if(i&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let u=0,l=this.children.length;u<l;++u)this.children[u].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};lk.defaultSortableChildren=!1;let Vr=lk;Vr.prototype.containerUpdateTransform=Vr.prototype.updateTransform;Object.defineProperties(xe,{SORTABLE_CHILDREN:{get(){return Vr.defaultSortableChildren},set(r){Ve("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Vr.defaultSortableChildren=r}}});const qh=new Xe,s8=new Uint16Array([0,1,2,0,2,3]);class qi extends Vr{constructor(e){super(),this._anchor=new Ss(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new lt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Ae.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Ie.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=s8,this.pluginName="batch",this.isSprite=!0,this._roundPixels=xe.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=ta(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=ta(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,u=t.ty,l=this.vertexData,c=e.trim,h=e.orig,d=this._anchor;let p=0,g=0,v=0,x=0;if(c?(g=c.x-d._x*h.width,p=g+c.width,x=c.y-d._y*h.height,v=x+c.height):(g=-d._x*h.width,p=g+h.width,x=-d._y*h.height,v=x+h.height),l[0]=n*g+s*x+a,l[1]=o*x+i*g+u,l[2]=n*p+s*x+a,l[3]=o*x+i*p+u,l[4]=n*p+s*v+a,l[5]=o*v+i*p+u,l[6]=n*g+s*v+a,l[7]=o*v+i*g+u,this._roundPixels){const y=xe.RESOLUTION;for(let b=0;b<l.length;++b)l[b]=Math.round(l[b]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,u=s.c,l=s.d,c=s.tx,h=s.ty,d=-i._x*n.width,p=d+n.width,g=-i._y*n.height,v=g+n.height;if(t[0]=o*d+u*g+c,t[1]=l*g+a*d+h,t[2]=o*p+u*g+c,t[3]=l*g+a*p+h,t[4]=o*p+u*v+c,t[5]=l*v+a*p+h,t[6]=o*d+u*v+c,t[7]=l*v+a*d+h,this._roundPixels){const x=xe.RESOLUTION;for(let y=0;y<t.length;++y)t[y]=Math.round(t[y]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new ym),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new $e),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,qh);const t=this._texture.orig.width,n=this._texture.orig.height,i=-t*this.anchor.x;let s=0;return qh.x>=i&&qh.x<i+t&&(s=-n*this.anchor.y,qh.y>=s&&qh.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const n=e instanceof Ie?e:Ie.from(e,t);return new qi(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=ta(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=ta(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Ie.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const uk=new bt;Ot.prototype._cacheAsBitmap=!1;Ot.prototype._cacheData=null;Ot.prototype._cacheAsBitmapResolution=null;Ot.prototype._cacheAsBitmapMultisample=null;class o8{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Ot.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new o8),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Ot.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Ot.prototype._initCachedDisplayObject=function(r){var d,p;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new $e,!0);if((p=this.filters)!=null&&p.length){const g=this.filters[0].padding;t.pad(g)}const n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const i=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,u=wl.create({width:t.width,height:t.height,resolution:n,multisample:this.cacheAsBitmapMultisample??r.multisample}),l=`cacheAsBitmap_${ul()}`;this._cacheData.textureCacheId=l,De.addToCache(u.baseTexture,l),Ie.addToCache(u,l);const c=this.transform.localTransform.copyTo(uk).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:u,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const h=new qi(u);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};Ot.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Ot.prototype._initCachedDisplayObjectCanvas=function(r){var c;if((c=this._cacheData)!=null&&c.sprite)return;const e=this.getLocalBounds(new $e,!0),t=this.alpha;this.alpha=1;const n=r.canvasContext.activeContext,i=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=wl.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${ul()}`;this._cacheData.textureCacheId=a,De.addToCache(o.baseTexture,a),Ie.addToCache(o,a);const u=uk;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=e.x,u.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:u,skipUpdateTransform:!1}),r.canvasContext.activeContext=n,r._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const l=new qi(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(e.x/e.width),l.anchor.y=-(e.y/e.height),l.alpha=t,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)};Ot.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ot.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ot.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,De.removeFromCache(this._cacheData.textureCacheId),Ie.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ot.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Ot.prototype.name=null;Vr.prototype.getChildByName=function(r,e){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,n=this.children.length;t<n;t++){const i=this.children[t];if(!i.getChildByName)continue;const s=i.getChildByName(r,!0);if(s)return s}return null};Ot.prototype.getGlobalPosition=function(r=new Xe,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var a8=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class l8 extends en{constructor(e=1){super(K4,a8,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const u8={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},h8=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function c8(r){const e=u8[r],t=e.length;let n=h8,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let u=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),u=u.replace("%value%",e[o].toString()),i+=u,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}const d8=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function f8(r,e){const t=Math.ceil(r/2);let n=d8,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}class H1 extends en{constructor(e,t=8,n=4,i=en.defaultResolution,s=5){const o=f8(s,e),a=c8(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,u=s;this.state.blend=!1,e.applyFilter(this,a,u,xs.CLEAR);for(let l=1;l<this.passes-1;l++){e.bindAndClear(a,xs.BLIT),this.uniforms.uSampler=u;const c=u;u=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class p8 extends en{constructor(e=8,t=4,n=en.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new H1(!0,e,t,n,i),this.blurYFilter=new H1(!1,e,t,n,i),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,xs.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,i):this.blurXFilter.apply(e,t,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var m8=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class z1 extends en{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(tk,m8,e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){const[n,i,s]=lt.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),u=n+(1-n)*o,l=o*(1-n)-a*i,c=o*(1-n)+a*i,h=o*(1-n)+a*i,d=n+o*(1-n),p=o*(1-n)-a*i,g=o*(1-n)-a*i,v=o*(1-n)+a*i,x=n+o*(1-n),y=[u,l,c,0,0,h,d,p,0,0,g,v,x,0,0,0,0,0,1,0];this._loadMatrix(y,t)}contrast(e,t){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,n,i,s){e=e||.2,t=t||.15,n=n||16770432,i=i||3375104;const o=lt.shared,[a,u,l]=o.setValue(n).toArray(),[c,h,d]=o.setValue(i).toArray(),p=[.3,.59,.11,0,0,a,u,l,e,0,c,h,d,t,0,a-c,u-h,l-d,0,0];this._loadMatrix(p,s)}night(e,t){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}z1.prototype.grayscale=z1.prototype.greyscale;var g8=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,v8=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class y8 extends en{constructor(e,t){const n=new bt;e.renderable=!1,super(v8,g8,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,t==null&&(t=20),this.scale=new Xe(t,t)}apply(e,t,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var x8=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,_8=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class w8 extends en{constructor(){super(_8,x8)}}var b8=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class S8 extends en{constructor(e=.5,t=Math.random()){super(tk,b8,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const LE={AlphaFilter:l8,BlurFilter:p8,BlurFilterPass:H1,ColorMatrixFilter:z1,DisplacementFilter:y8,FXAAFilter:w8,NoiseFilter:S8};Object.entries(LE).forEach(([r,e])=>{Object.defineProperty(LE,r,{get(){return Ve("7.1.0",`filters.${r} has moved to ${r}`),e}})});class T8{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Ut.system.add(this.tickerUpdate,this,ya.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ut.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Ko=new T8;class yd{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=yd.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Xe,this.page=new Xe,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class xm extends yd{constructor(){super(...arguments),this.client=new Xe,this.movement=new Xe,this.offset=new Xe,this.global=new Xe,this.screen=new Xe}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,s,o,a,u,l,c,h,d,p,g,v){throw new Error("Method not implemented.")}}class Pi extends xm{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Bu extends xm{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Bu.DOM_DELTA_PIXEL=0,Bu.DOM_DELTA_LINE=1,Bu.DOM_DELTA_PAGE=2;const E8=2048,C8=new Xe,Kv=new Xe;class P8{constructor(e){this.dispatch=new md,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Ko.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,C8.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let n=0;n<E8&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Ko.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let h=c.length-1;h>=0;h--){const d=c[h],p=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,i,s,o||s(e,n));if(p){if(p.length>0&&!p[p.length-1].parent)continue;const g=e.isInteractive();(p.length>0||g)&&(g&&this._allInteractiveElements.push(e),p.push(e)),this._hitElements.length===0&&(this._hitElements=p),a=!0}}}const u=this._isInteractive(t),l=e.isInteractive();return u&&l&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:u&&!s(e,n)&&i(e,n)?l?[e]:[]:null}hitTestRecursive(e,t,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Ko.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let l=u.length-1;l>=0;l--){const c=u[l],h=this.hitTestRecursive(c,this._isInteractive(t)?t:c.eventMode,n,i,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const d=e.isInteractive();return(h.length>0||d)&&h.push(e),h}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var n;if(e.hitArea&&(e.worldTransform.applyInverse(t,Kv),!e.hitArea.contains(Kv.x,Kv.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var s,o;t=t??e.type;const n=`on${t}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var u,l;if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((u=i.overTargets)==null?void 0:u.length)>0&&s!==t.target){const c=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,c,s);if(this.dispatchEvent(h,"pointerout"),n&&this.dispatchEvent(h,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(h)}if(s!==t.target){const c=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(t,c);this.dispatchEvent(h,"pointerover"),n&&this.dispatchEvent(h,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(t,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(h)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(l=t.target)==null?void 0:l.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const u=n.button===2;this.notifyTarget(n,u?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const u=i.clicksByButton[e.button];if(u.target===a.target&&t-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=a.target,u.timeStamp=t,a.detail=u.clickCount,a.pointerType==="mouse"){const l=a.button===2;this.dispatchEvent(a,l?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof Pi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Bu)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const i=this.allocateEvent(Pi);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(Bu);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(Pi);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Pi&&t instanceof Pi&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof xm&&t instanceof xm&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const A8=1,k8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},$1=class Y1{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new P8(null),Ko.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Pi(null),this.rootWheelEvent=new Bu(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...Y1.defaultEventFeatures},{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,Y1._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){const s=t[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Ko.pointerMoved();const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Ko.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Ko.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Ko.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=A8),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=k8[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};$1.extension={name:"events",type:[me.RendererSystem,me.CanvasRendererSystem]},$1.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let G1=$1;Te.add(G1);function NE(r){return r==="dynamic"||r==="static"}const I8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??NE(G1.defaultEventMode)},set interactive(r){Ve("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??G1.defaultEventMode},set eventMode(r){this._internalInteractive=NE(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;r=n?`${r}capture`:r;const a=typeof e=="function"?e:e.handleEvent,u=this;i&&i.addEventListener("abort",()=>{u.off(r,a,o)}),s?u.once(r,a,o):u.on(r,a,o)},removeEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof yd))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ot.mixin(I8);const M8={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ot.mixin(M8);const R8=9,Hf=100,O8=0,B8=0,FE=2,DE=1,L8=-1e3,N8=-1e3,F8=2;class hk{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(oi.tablet||oi.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${Hf}px`,t.style.height=`${Hf}px`,t.style.position="absolute",t.style.top=`${O8}px`,t.style.left=`${B8}px`,t.style.zIndex=FE.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${DE}px`,e.style.height=`${DE}px`,e.style.position="absolute",e.style.top=`${L8}px`,e.style.left=`${N8}px`,e.style.zIndex=F8.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){const e=performance.now();if(oi.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:u}=this.renderer,l=i/o*u,c=s/a*u;let h=this.div;h.style.left=`${t}px`,h.style.top=`${n}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const p=this.children[d];if(p.renderId!==this.renderId)p._accessibleActive=!1,Ru(this.children,d,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,d--;else{h=p._accessibleDiv;let g=p.hitArea;const v=p.worldTransform;p.hitArea?(h.style.left=`${(v.tx+g.x*v.a)*l}px`,h.style.top=`${(v.ty+g.y*v.d)*c}px`,h.style.width=`${g.width*v.a*l}px`,h.style.height=`${g.height*v.d*c}px`):(g=p.getBounds(),this.capHitArea(g),h.style.left=`${g.x*l}px`,h.style.top=`${g.y*c}px`,h.style.width=`${g.width*l}px`,h.style.height=`${g.height*c}px`,h.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(h.title=p.accessibleTitle),h.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&h.setAttribute("aria-label",p.accessibleHint)),(p.accessibleTitle!==h.title||p.tabIndex!==h.tabIndex)&&(h.title=p.accessibleTitle,h.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Hf}px`,t.style.height=`${Hf}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=FE.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new yd(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===R8&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}hk.extension={name:"accessibility",type:[me.RendererPlugin,me.CanvasRendererPlugin]};Te.add(hk);const ck=class W1{constructor(e){this.stage=new Vr,e=Object.assign({forceCanvas:!1},e),this.renderer=W4(e),W1._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const n=W1._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};ck._plugins=[];let kg=ck;Te.handleByList(me.Application,kg._plugins);class dk{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}dk.extension=me.Application;Te.add(dk);const UE={loader:me.LoadParser,resolver:me.ResolveParser,cache:me.CacheParser,detection:me.DetectionParser};Te.handle(me.Asset,r=>{const e=r.ref;Object.entries(UE).filter(([t])=>!!e[t]).forEach(([t,n])=>Te.add(Object.assign(e[t],{extension:e[t].extension??n})))},r=>{const e=r.ref;Object.keys(UE).filter(t=>!!e[t]).forEach(t=>Te.remove(e[t]))});class D8{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function yh(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function Fn(r,e){const t=r.split("?")[0],n=Gt.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const Mi=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r),V1=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function fk(r,e,t,n,i){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?fk(r.replace(n[t],a),e,t+1,n,i):i.push(r.replace(n[t],a))}}function U8(r){const e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){const i=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),fk(r,i,0,t,n)}else n.push(r);return n}const _m=r=>!Array.isArray(r);class j8{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=Mi(e);let i;for(let a=0;a<this.parsers.length;a++){const u=this.parsers[a];if(u.test(t)){i=u.getCacheableAssets(n,t);break}}i||(i={},n.forEach(a=>{i[a]=t}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof Ie){const a=t;n.forEach(u=>{a.baseTexture!==Ie.EMPTY.baseTexture&&De.addToCache(a.baseTexture,u),Ie.addToCache(a,u)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(n=>{this._cache.delete(n)}),t.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const qa=new j8;class X8{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];if(l.load&&((o=l.test)!=null&&o.call(l,e,t,this))){s=l;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,t,this),n.parser=s;for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];l.parse&&l.parse&&await((a=l.testParse)==null?void 0:a.call(l,i,t,this))&&(i=await l.parse(i,t,this)||i,n.parser=l)}return i})(),n}async load(e,t){this._parsersValidated||this._validateParsers();let n=0;const i={},s=_m(e),o=Mi(e,l=>({alias:[l],src:l})),a=o.length,u=o.map(async l=>{const c=Gt.toAbsolute(l.src);if(!i[l.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,l)),i[l.src]=await this.promiseCache[c].promise,t&&t(++n/a)}catch(h){throw delete this.promiseCache[c],delete i[l.src],new Error(`[Loader.load] Failed to load ${c}.
${h}`)}});return await Promise.all(u),s?i[o[0].src]:i}async unload(e){const t=Mi(e,n=>({alias:[n],src:n})).map(async n=>{var o,a;const i=Gt.toAbsolute(n.src),s=this.promiseCache[i];if(s){const u=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,u,n,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var zn=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(zn||{});const H8=".json",z8="application/json",$8={extension:{type:me.LoadParser,priority:zn.Low},name:"loadJson",test(r){return yh(r,z8)||Fn(r,H8)},async load(r){return await(await xe.ADAPTER.fetch(r)).json()}};Te.add($8);const Y8=".txt",G8="text/plain",W8={name:"loadTxt",extension:{type:me.LoadParser,priority:zn.Low},test(r){return yh(r,G8)||Fn(r,Y8)},async load(r){return await(await xe.ADAPTER.fetch(r)).text()}};Te.add(W8);const V8=["normal","bold","100","200","300","400","500","600","700","800","900"],q8=[".ttf",".otf",".woff",".woff2"],K8=["font/ttf","font/otf","font/woff","font/woff2"],Q8=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Z8(r){const e=Gt.extname(r),t=Gt.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=t.length>0;for(const s of t)if(!s.match(Q8)){n=!1;break}let i=t.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const J8=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function e6(r){return J8.test(r)?r:encodeURI(r)}const t6={extension:{type:me.LoadParser,priority:zn.Low},name:"loadWebFont",test(r){return yh(r,K8)||Fn(r,q8)},async load(r,e){var n,i,s;const t=xe.ADAPTER.getFontFaceSet();if(t){const o=[],a=((n=e.data)==null?void 0:n.family)??Z8(r),u=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(c=>V8.includes(c)))??["normal"],l=e.data??{};for(let c=0;c<u.length;c++){const h=u[c],d=new FontFace(a,`url(${e6(r)})`,{...l,weight:h});await d.load(),t.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>xe.ADAPTER.getFontFaceSet().delete(e))}};Te.add(t6);const r6=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Lu=null,q1=class{constructor(){Lu||(Lu=URL.createObjectURL(new Blob([r6],{type:"application/javascript"}))),this.worker=new Worker(Lu)}};q1.revokeObjectURL=function(){Lu&&(URL.revokeObjectURL(Lu),Lu=null)};const n6=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Nu=null;class pk{constructor(){Nu||(Nu=URL.createObjectURL(new Blob([n6],{type:"application/javascript"}))),this.worker=new Worker(Nu)}}pk.revokeObjectURL=function(){Nu&&(URL.revokeObjectURL(Nu),Nu=null)};let jE=0,Qv;class i6{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new q1;t.addEventListener("message",n=>{t.terminate(),q1.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Qv===void 0&&(Qv=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Qv&&(this._createdWorkers++,e=new pk().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),n=t.id;this.resolveHash[jE]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:jE++,id:n})}}const XE=new i6;function xd(r,e,t){r.resource.internal=!0;const n=new Ie(r),i=()=>{delete e.promiseCache[t],qa.has(t)&&qa.remove(t)};return n.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const s6=[".jpeg",".jpg",".png",".webp",".avif"],o6=["image/jpeg","image/png","image/webp","image/avif"];async function a6(r){const e=await xe.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Ig={name:"loadTextures",extension:{type:me.LoadParser,priority:zn.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return yh(r,o6)||Fn(r,s6)},async load(r,e,t){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await XE.isImageBitmapSupported()?i=await XE.loadImageBitmap(r):i=await a6(r):i=await new Promise((u,l)=>{const c=new Image;c.crossOrigin=this.config.crossOrigin,c.src=r,c.complete?u(c):(c.onload=()=>u(c),c.onerror=h=>l(h))});const s={...e.data};s.resolution??(s.resolution=go(r)),n&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new De(i,s);return o.resource.src=r,xd(o,t,r)},unload(r){r.destroy(!0)}};Te.add(Ig);const l6=".svg",u6="image/svg+xml",h6={extension:{type:me.LoadParser,priority:zn.High},name:"loadSVG",test(r){return yh(r,u6)||Fn(r,l6)},async testParse(r){return D1.test(r)},async parse(r,e,t){var s;const n=new D1(r,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await n.load();const i=new De(n,{resolution:go(r),...e==null?void 0:e.data});return i.resource.src=e.src,xd(i,t,e.src)},async load(r,e){return(await xe.ADAPTER.fetch(r)).text()},unload:Ig.unload};Te.add(h6);const c6=[".mp4",".m4v",".webm",".ogv"],d6=["video/mp4","video/webm","video/ogg"],f6={name:"loadVideo",extension:{type:me.LoadParser,priority:zn.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return yh(r,d6)||Fn(r,c6)},async load(r,e,t){var o;let n;const i=await(await xe.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},u=new ak(s,a);await u.load();const l=new De(u,{alphaMode:await w5(),resolution:go(r),...e==null?void 0:e.data});l.resource.src=r,n=xd(l,t,r),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return n},unload(r){r.destroy(!0)}};Te.add(f6);class p6{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,name:n,src:i,srcs:s}=e;return Mi(t||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];Array.isArray(t)?t.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const u=this._createBundleAssetId(e,o);n.push(u),a=[o,u]}else{const u=o.map(l=>this._createBundleAssetId(e,l));n.push(...u),a=[...o,...u]}this.add({...i,alias:a,src:s})}):Object.keys(t).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:s,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:s,src:t[i]});else{const o=t[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[e]=n}add(e,t,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ve("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=u=>{this.hasKey(u)&&console.warn(`[Resolver] already has key: ${u} overwriting`)},Mi(o).forEach(u=>{const{src:l,srcs:c}=u;let{data:h,format:d,loadParser:p}=u;const g=Mi(l||c).map(y=>typeof y=="string"?U8(y):Array.isArray(y)?y:[y]),v=this.getAlias(u);Array.isArray(v)?v.forEach(a):a(v);const x=[];g.forEach(y=>{y.forEach(b=>{let _={};if(typeof b!="object"){_.src=b;for(let S=0;S<this._parsers.length;S++){const I=this._parsers[S];if(I.test(b)){_=I.parse(b);break}}}else h=b.data??h,d=b.format??d,p=b.loadParser??p,_={..._,...b};if(!v)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:v,data:h,format:d,loadParser:p}),x.push(_)})}),v.forEach(y=>{this._assetMap[y]=x})})}resolveBundle(e){const t=_m(e);e=Mi(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const u in o){const l=o[u];a[this._extractAssetIdFromBundle(i,u)]=l}n[i]=a}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const i in t)n[i]=t[i].src;return n}return t.src}resolve(e){const t=_m(e);e=Mi(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(u=>{a.params[u].forEach(l=>{const c=s.filter(h=>h[u]?h[u]===l:!1);c.length&&(s=c)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:n,data:i,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=Gt.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??Gt.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class m6{constructor(){this._detections=[],this._initialized=!1,this.resolver=new p6,this.loader=new X8,this.cache=qa,this._backgroundLoader=new D8(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,n,i,s){this.resolver.add(e,t,n,i,s)}async load(e,t){this._initialized||await this.init();const n=_m(e),i=Mi(e).map(a=>{if(typeof a!="string"){const u=this.resolver.getAlias(a);return u.some(l=>!this.resolver.hasKey(l))&&this.add(a),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,t);return n?o[i[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,u=0;const l=()=>{t==null||t(++a/u)},c=o.map(h=>{const d=i[h];return u+=Object.keys(d).length,this._mapLoadToResolve(d,l).then(p=>{s[h]=p})});return await Promise.all(c),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return qa.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=qa.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,t);this._backgroundLoader.active=!0;const o={};return n.forEach((a,u)=>{const l=s[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[i[u]]=l,qa.set(c,l)}),o}async unload(e){this._initialized||await this.init();const t=Mi(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=Mi(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(n=>{qa.remove(n.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((n,i)=>t.indexOf(n)===i),t}get detections(){return this._detections}get preferWorkers(){return Ig.config.preferWorkers}set preferWorkers(e){Ve("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}}const fn=new m6;Te.handleByList(me.LoadParser,fn.loader.parsers).handleByList(me.ResolveParser,fn.resolver.parsers).handleByList(me.CacheParser,fn.cache.parsers).handleByList(me.DetectionParser,fn.detections);const g6={extension:me.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof Ie),getCacheableAssets:(r,e)=>{const t={};return r.forEach(n=>{e.forEach((i,s)=>{t[n+(s===0?"":s+1)]=i})}),t}};Te.add(g6);async function mk(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const gk={extension:{type:me.DetectionParser,priority:1},test:async()=>mk("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};Te.add(gk);const vk={extension:{type:me.DetectionParser,priority:0},test:async()=>mk("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};Te.add(vk);const HE=["png","jpg","jpeg"],v6={extension:{type:me.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...HE],remove:async r=>r.filter(e=>!HE.includes(e))};Te.add(v6);const y6="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function X_(r){return y6?!1:document.createElement("video").canPlayType(r)!==""}const x6={extension:{type:me.DetectionParser,priority:0},test:async()=>X_("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};Te.add(x6);const _6={extension:{type:me.DetectionParser,priority:0},test:async()=>X_("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};Te.add(_6);const w6={extension:{type:me.DetectionParser,priority:0},test:async()=>X_("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};Te.add(w6);const b6={extension:me.ResolveParser,test:Ig.test,parse:r=>{var e;return{resolution:parseFloat(((e=xe.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:Gt.extname(r).slice(1),src:r}}};Te.add(b6);var Cr=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(Cr||{});const wm={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let ds,tu;function zE(){tu={bptc:ds.getExtension("EXT_texture_compression_bptc"),astc:ds.getExtension("WEBGL_compressed_texture_astc"),etc:ds.getExtension("WEBGL_compressed_texture_etc"),s3tc:ds.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ds.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:ds.getExtension("WEBGL_compressed_texture_pvrtc")||ds.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:ds.getExtension("WEBGL_compressed_texture_etc1"),atc:ds.getExtension("WEBGL_compressed_texture_atc")}}const S6={extension:{type:me.DetectionParser,priority:2},test:async()=>{const r=xe.ADAPTER.createCanvas().getContext("webgl");return r?(ds=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{tu||zE();const e=[];for(const t in tu)tu[t]&&e.push(t);return[...e,...r]},remove:async r=>(tu||zE(),r.filter(e=>!(e in tu)))};Te.add(S6);class T6 extends bg{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,t),this.origin=n,this.buffer=i?new T1(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new T1(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class rl extends T6{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=rl._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||rl._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:u,levelHeight:l,levelBuffer:c}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,u,l,0,c)}return!0}onBlobLoaded(){this._levelBuffers=rl._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,n,i,s,o,a){const u=new Array(n);let l=e.byteOffset,c=o,h=a,d=c+i-1&~(i-1),p=h+s-1&~(s-1),g=d*p*wm[t];for(let v=0;v<n;v++)u[v]={levelID:v,levelWidth:n>1?c:d,levelHeight:n>1?h:p,levelBuffer:new Uint8Array(e.buffer,l,g)},l+=g,c=c>>1||1,h=h>>1||1,d=c+i-1&~(i-1),p=h+s-1&~(s-1),g=d*p*wm[t];return u}}const Zv=4,zf=124,E6=32,$E=20,C6=542327876,$f={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},P6={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Yf={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},A6=1,k6=2,I6=4,M6=64,R6=512,O6=131072,B6=827611204,L6=861165636,N6=894720068,F6=808540228,D6=4,U6={[B6]:Cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[L6]:Cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[N6]:Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT},j6={70:Cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Cr.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Cr.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Cr.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Cr.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function X6(r){const e=new Uint32Array(r);if(e[0]!==C6)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,zf/Uint32Array.BYTES_PER_ELEMENT),n=t[$f.HEIGHT],i=t[$f.WIDTH],s=t[$f.MIPMAP_COUNT],o=new Uint32Array(r,$f.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,E6/Uint32Array.BYTES_PER_ELEMENT),a=o[A6];if(a&I6){const u=o[P6.FOURCC];if(u!==F6){const b=U6[u],_=Zv+zf,S=new Uint8Array(r,_);return[new rl(S,{format:b,width:i,height:n,levels:s})]}const l=Zv+zf,c=new Uint32Array(e.buffer,l,$E/Uint32Array.BYTES_PER_ELEMENT),h=c[Yf.DXGI_FORMAT],d=c[Yf.RESOURCE_DIMENSION],p=c[Yf.MISC_FLAG],g=c[Yf.ARRAY_SIZE],v=j6[h];if(v===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(p===D6)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,y=Zv+zf+$E;if(g===1)x.push(new Uint8Array(r,y));else{const b=wm[v];let _=0,S=i,I=n;for(let k=0;k<s;k++){const M=Math.max(1,S+3&-4),O=Math.max(1,I+3&-4),F=M*O*b;_+=F,S=S>>>1,I=I>>>1}let A=y;for(let k=0;k<g;k++)x.push(new Uint8Array(r,A,_)),A+=_}return x.map(b=>new rl(b,{format:v,width:i,height:n,levels:s}))}throw a&M6?new Error("DDSParser does not support uncompressed texture data."):a&R6?new Error("DDSParser does not supported YUV uncompressed texture data."):a&O6?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&k6?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const YE=[171,75,84,88,32,49,49,187,13,10,26,10],H6=67305985,Si={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},K1=64,GE={[Se.UNSIGNED_BYTE]:1,[Se.UNSIGNED_SHORT]:2,[Se.INT]:4,[Se.UNSIGNED_INT]:4,[Se.FLOAT]:4,[Se.HALF_FLOAT]:8},z6={[de.RGBA]:4,[de.RGB]:3,[de.RG]:2,[de.RED]:1,[de.LUMINANCE]:1,[de.LUMINANCE_ALPHA]:2,[de.ALPHA]:1},$6={[Se.UNSIGNED_SHORT_4_4_4_4]:2,[Se.UNSIGNED_SHORT_5_5_5_1]:2,[Se.UNSIGNED_SHORT_5_6_5]:2};function Y6(r,e,t=!1){const n=new DataView(e);if(!G6(r,n))return null;const i=n.getUint32(Si.ENDIANNESS,!0)===H6,s=n.getUint32(Si.GL_TYPE,i),o=n.getUint32(Si.GL_FORMAT,i),a=n.getUint32(Si.GL_INTERNAL_FORMAT,i),u=n.getUint32(Si.PIXEL_WIDTH,i),l=n.getUint32(Si.PIXEL_HEIGHT,i)||1,c=n.getUint32(Si.PIXEL_DEPTH,i)||1,h=n.getUint32(Si.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(Si.NUMBER_OF_FACES,i),p=n.getUint32(Si.NUMBER_OF_MIPMAP_LEVELS,i),g=n.getUint32(Si.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const v=4,x=4,y=u+3&-4,b=l+3&-4,_=new Array(h);let S=u*l;s===0&&(S=y*b);let I;if(s!==0?GE[s]?I=GE[s]*z6[o]:I=$6[s]:I=wm[a],I===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const A=t?V6(n,g,i):null;let k=S*I,M=u,O=l,F=y,U=b,X=K1+g;for(let B=0;B<p;B++){const N=n.getUint32(X,i);let j=X+4;for(let W=0;W<h;W++){let Q=_[W];Q||(Q=_[W]=new Array(p)),Q[B]={levelID:B,levelWidth:p>1||s!==0?M:F,levelHeight:p>1||s!==0?O:U,levelBuffer:new Uint8Array(e,j,k)},j+=k}X+=N+4,X=X%4!==0?X+4-X%4:X,M=M>>1||1,O=O>>1||1,F=M+v-1&~(v-1),U=O+x-1&~(x-1),k=F*U*I}return s!==0?{uncompressed:_.map(B=>{let N=B[0].levelBuffer,j=!1;return s===Se.FLOAT?N=new Float32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4):s===Se.UNSIGNED_INT?(j=!0,N=new Uint32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)):s===Se.INT&&(j=!0,N=new Int32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)),{resource:new bg(N,{width:B[0].levelWidth,height:B[0].levelHeight}),type:s,format:j?W6(o):o}}),kvData:A}:{compressed:_.map(B=>new rl(null,{format:a,width:u,height:l,levels:p,levelBuffers:B})),kvData:A}}function G6(r,e){for(let t=0;t<YE.length;t++)if(e.getUint8(t)!==YE[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function W6(r){switch(r){case de.RGBA:return de.RGBA_INTEGER;case de.RGB:return de.RGB_INTEGER;case de.RG:return de.RG_INTEGER;case de.RED:return de.RED_INTEGER;default:return r}}function V6(r,e,t){const n=new Map;let i=0;for(;i<e;){const s=r.getUint32(K1+i,t),o=K1+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let u=0;for(;u<s&&r.getUint8(o+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const l=new TextDecoder().decode(new Uint8Array(r.buffer,o,u)),c=new DataView(r.buffer,o+u+1,s-u-1);n.set(l,c),i+=4+s+a}return n}const q6={extension:{type:me.LoadParser,priority:zn.High},name:"loadDDS",test(r){return Fn(r,".dds")},async load(r,e,t){const n=await(await xe.ADAPTER.fetch(r)).arrayBuffer(),i=X6(n).map(s=>{const o=new De(s,{mipmap:di.OFF,alphaMode:$r.NO_PREMULTIPLIED_ALPHA,resolution:go(r),...e.data});return xd(o,t,r)});return i.length===1?i[0]:i},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Te.add(q6);const K6={extension:{type:me.LoadParser,priority:zn.High},name:"loadKTX",test(r){return Fn(r,".ktx")},async load(r,e,t){const n=await(await xe.ADAPTER.fetch(r)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=Y6(r,n),a=i??s,u={mipmap:di.OFF,alphaMode:$r.NO_PREMULTIPLIED_ALPHA,resolution:go(r),...e.data},l=a.map(c=>{a===s&&Object.assign(u,{type:c.type,format:c.format});const h=c.resource??c,d=new De(h,u);return d.ktxKeyValueData=o,xd(d,t,r)});return l.length===1?l[0]:l},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Te.add(K6);const Q6=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],Z6={extension:me.ResolveParser,test:r=>{const e=Gt.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var n,i;const e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const s=e.pop();if(Q6.includes(s))return{resolution:parseFloat(((n=xe.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:s,src:r}}return{resolution:parseFloat(((i=xe.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:t,src:r}}};Te.add(Z6);const Gf=new $e,J6=4,yk=class uc{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,n,i){const s=new Image;return s.src=await this.base64(e,t,n,i),s}async base64(e,t,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(u=>{if(!u){a(new Error("ICanvas.toBlob failed!"));return}const l=new FileReader;l.onload=()=>o(l.result),l.onerror=a,l.readAsDataURL(u)},t,n)});if(s.toDataURL!==void 0)return s.toDataURL(t,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:n});return new Promise((a,u)=>{const l=new FileReader;l.onload=()=>a(l.result),l.onerror=u,l.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&uc._flipY(n,i,s),a&&uc._unpremultiplyAlpha(n);const u=new N5(i,s,1),l=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return u.context.putImageData(l,0,0),u.canvas}pixels(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&uc._flipY(n,i,s),a&&uc._unpremultiplyAlpha(n),n}_rawPixels(e,t){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,u=!1;e&&(e instanceof wl?a=e:(a=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),u=!0,t&&(Gf.width=t.width,Gf.height=t.height,t=Gf)));const l=n.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===de.RGBA,!u){n.renderTexture.bind(a);const p=a.framebuffer.glFramebuffers[n.CONTEXT_UID];p.blitFramebuffer&&n.framebuffer.bind(p.blitFramebuffer)}}else i=n.resolution,t||(t=Gf,t.width=n.width/i,t.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const c=Math.max(Math.round(t.width*i),1),h=Math.max(Math.round(t.height*i),1),d=new Uint8Array(J6*c*h);return l.readPixels(Math.round(t.x*i),Math.round(t.y*i),c,h,l.RGBA,l.UNSIGNED_BYTE,d),u&&(a==null||a.destroy(!0)),{pixels:d,width:c,height:h,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,n){const i=t<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const u=a*i,l=(n-a-1)*i;o.set(e.subarray(u,u+i)),e.copyWithin(u,l,l+i),e.set(o,l)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let n=0;n<t;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};yk.extension={name:"extract",type:me.RendererSystem};let eU=yk;Te.add(eU);const bm={build(r){const e=r.points;let t,n,i,s,o,a;if(r.type===Mr.CIRC){const g=r.shape;t=g.x,n=g.y,o=a=g.radius,i=s=0}else if(r.type===Mr.ELIP){const g=r.shape;t=g.x,n=g.y,o=g.width,a=g.height,i=s=0}else{const g=r.shape,v=g.width/2,x=g.height/2;t=g.x+v,n=g.y+x,o=a=Math.max(0,Math.min(g.radius,Math.min(v,x))),i=v-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const u=Math.ceil(2.3*Math.sqrt(o+a)),l=u*8+(i?4:0)+(s?4:0);if(e.length=l,l===0)return;if(u===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s;return}let c=0,h=u*4+(i?2:0)+2,d=h,p=l;{const g=i+o,v=s,x=t+g,y=t-g,b=n+v;if(e[c++]=x,e[c++]=b,e[--h]=b,e[--h]=y,s){const _=n-v;e[d++]=y,e[d++]=_,e[--p]=_,e[--p]=x}}for(let g=1;g<u;g++){const v=Math.PI/2*(g/u),x=i+Math.cos(v)*o,y=s+Math.sin(v)*a,b=t+x,_=t-x,S=n+y,I=n-y;e[c++]=b,e[c++]=S,e[--h]=S,e[--h]=_,e[d++]=_,e[d++]=I,e[--p]=I,e[--p]=b}{const g=i,v=s+a,x=t+g,y=t-g,b=n+v,_=n-v;e[c++]=x,e[c++]=b,e[--p]=_,e[--p]=x,i&&(e[c++]=y,e[c++]=b,e[--p]=_,e[--p]=y)}},triangulate(r,e){const t=r.points,n=e.points,i=e.indices;if(t.length===0)return;let s=n.length/2;const o=s;let a,u;if(r.type!==Mr.RREC){const c=r.shape;a=c.x,u=c.y}else{const c=r.shape;a=c.x+c.width/2,u=c.y+c.height/2}const l=r.matrix;n.push(r.matrix?l.a*a+l.c*u+l.tx:a,r.matrix?l.b*a+l.d*u+l.ty:u),s++,n.push(t[0],t[1]);for(let c=2;c<t.length;c+=2)n.push(t[c],t[c+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function WE(r,e=!1){const t=r.length;if(t<6)return;let n=0;for(let i=0,s=r[t-2],o=r[t-1];i<t;i+=2){const a=r[i],u=r[i+1];n+=(a-s)*(u+o),s=a,o=u}if(!e&&n>0||e&&n<=0){const i=t/2;for(let s=i+i%2;s<t;s+=2){const o=t-s-2,a=t-s-1,u=s,l=s+1;[r[o],r[u]]=[r[u],r[o]],[r[a],r[l]]=[r[l],r[a]]}}}const xk={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const n=r.holes,i=e.points,s=e.indices;if(t.length>=6){WE(t,!1);const o=[];for(let l=0;l<n.length;l++){const c=n[l];WE(c.points,!0),o.push(t.length/2),t=t.concat(c.points)}const a=HN(t,o,2);if(!a)return;const u=i.length/2;for(let l=0;l<a.length;l+=3)s.push(a[l]+u),s.push(a[l+1]+u),s.push(a[l+2]+u);for(let l=0;l<t.length;l++)i.push(t[l])}}},tU={build(r){const e=r.shape,t=e.x,n=e.y,i=e.width,s=e.height,o=r.points;o.length=0,i>=0&&s>=0&&o.push(t,n,t+i,n,t+i,n+s,t,n+s)},triangulate(r,e){const t=r.points,n=e.points;if(t.length===0)return;const i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},rU={build(r){bm.build(r)},triangulate(r,e){bm.triangulate(r,e)}};var ri=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(ri||{}),ra=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(ra||{});const Ju={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class VE{static curveTo(e,t,n,i,s,o){const a=o[o.length-2],u=o[o.length-1]-t,l=a-e,c=i-t,h=n-e,d=Math.abs(u*h-l*c);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const p=u*u+l*l,g=c*c+h*h,v=u*c+l*h,x=s*Math.sqrt(p)/d,y=s*Math.sqrt(g)/d,b=x*v/p,_=y*v/g,S=x*h+y*l,I=x*c+y*u,A=l*(y+b),k=u*(y+b),M=h*(x+_),O=c*(x+_),F=Math.atan2(k-I,A-S),U=Math.atan2(O-I,M-S);return{cx:S+e,cy:I+t,radius:s,startAngle:F,endAngle:U,anticlockwise:l*c>h*u}}static arc(e,t,n,i,s,o,a,u,l){const c=a-o,h=Ju._segmentsCount(Math.abs(c)*s,Math.ceil(Math.abs(c)/fm)*40),d=c/(h*2),p=d*2,g=Math.cos(d),v=Math.sin(d),x=h-1,y=x%1/x;for(let b=0;b<=x;++b){const _=b+y*b,S=d+o+p*_,I=Math.cos(S),A=-Math.sin(S);l.push((g*I+v*A)*s+n,(g*-A+v*I)*s+i)}}}class nU{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class H_{static curveLength(e,t,n,i,s,o,a,u){let l=0,c=0,h=0,d=0,p=0,g=0,v=0,x=0,y=0,b=0,_=0,S=e,I=t;for(let A=1;A<=10;++A)c=A/10,h=c*c,d=h*c,p=1-c,g=p*p,v=g*p,x=v*e+3*g*c*n+3*p*h*s+d*a,y=v*t+3*g*c*i+3*p*h*o+d*u,b=S-x,_=I-y,S=x,I=y,l+=Math.sqrt(b*b+_*_);return l}static curveTo(e,t,n,i,s,o,a){const u=a[a.length-2],l=a[a.length-1];a.length-=2;const c=Ju._segmentsCount(H_.curveLength(u,l,e,t,n,i,s,o));let h=0,d=0,p=0,g=0,v=0;a.push(u,l);for(let x=1,y=0;x<=c;++x)y=x/c,h=1-y,d=h*h,p=d*h,g=y*y,v=g*y,a.push(p*u+3*d*y*e+3*h*g*n+v*s,p*l+3*d*y*t+3*h*g*i+v*o)}}function qE(r,e,t,n,i,s,o,a){const u=r-t*i,l=e-n*i,c=r+t*s,h=e+n*s;let d,p;o?(d=n,p=-t):(d=-n,p=t);const g=u+d,v=l+p,x=c+d,y=h+p;return a.push(g,v,x,y),2}function Da(r,e,t,n,i,s,o,a){const u=t-r,l=n-e;let c=Math.atan2(u,l),h=Math.atan2(i-r,s-e);a&&c<h?c+=Math.PI*2:!a&&c>h&&(h+=Math.PI*2);let d=c;const p=h-c,g=Math.abs(p),v=Math.sqrt(u*u+l*l),x=(15*g*Math.sqrt(v)/Math.PI>>0)+1,y=p/x;if(d+=y,a){o.push(r,e,t,n);for(let b=1,_=d;b<x;b++,_+=y)o.push(r,e,r+Math.sin(_)*v,e+Math.cos(_)*v);o.push(r,e,i,s)}else{o.push(t,n,r,e);for(let b=1,_=d;b<x;b++,_+=y)o.push(r+Math.sin(_)*v,e+Math.cos(_)*v,r,e);o.push(i,s,r,e)}return x*2}function iU(r,e){const t=r.shape;let n=r.points||t.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=r.lineStyle,o=new Xe(n[0],n[1]),a=new Xe(n[n.length-2],n[n.length-1]),u=t.type!==Mr.POLY||t.closeStroke,l=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(u){n=n.slice(),l&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const Q=(o.x+a.x)*.5,H=(a.y+o.y)*.5;n.unshift(Q,H),n.push(Q,H)}const c=e.points,h=n.length/2;let d=n.length;const p=c.length/2,g=s.width/2,v=g*g,x=s.miterLimit*s.miterLimit;let y=n[0],b=n[1],_=n[2],S=n[3],I=0,A=0,k=-(b-S),M=y-_,O=0,F=0,U=Math.sqrt(k*k+M*M);k/=U,M/=U,k*=g,M*=g;const X=s.alignment,B=(1-X)*2,N=X*2;u||(s.cap===ra.ROUND?d+=Da(y-k*(B-N)*.5,b-M*(B-N)*.5,y-k*B,b-M*B,y+k*N,b+M*N,c,!0)+2:s.cap===ra.SQUARE&&(d+=qE(y,b,k,M,B,N,!0,c))),c.push(y-k*B,b-M*B,y+k*N,b+M*N);for(let Q=1;Q<h-1;++Q){y=n[(Q-1)*2],b=n[(Q-1)*2+1],_=n[Q*2],S=n[Q*2+1],I=n[(Q+1)*2],A=n[(Q+1)*2+1],k=-(b-S),M=y-_,U=Math.sqrt(k*k+M*M),k/=U,M/=U,k*=g,M*=g,O=-(S-A),F=_-I,U=Math.sqrt(O*O+F*F),O/=U,F/=U,O*=g,F*=g;const H=_-y,G=b-S,z=_-I,V=A-S,Z=H*z+G*V,re=G*z-V*H,he=re<0;if(Math.abs(re)<.001*Math.abs(Z)){c.push(_-k*B,S-M*B,_+k*N,S+M*N),Z>=0&&(s.join===ri.ROUND?d+=Da(_,S,_-k*B,S-M*B,_-O*B,S-F*B,c,!1)+4:d+=2,c.push(_-O*N,S-F*N,_+O*B,S+F*B));continue}const ve=(-k+y)*(-M+S)-(-k+_)*(-M+b),Me=(-O+I)*(-F+S)-(-O+_)*(-F+A),Ne=(H*Me-z*ve)/re,ze=(V*ve-G*Me)/re,We=(Ne-_)*(Ne-_)+(ze-S)*(ze-S),He=_+(Ne-_)*B,Fe=S+(ze-S)*B,ut=_-(Ne-_)*N,Ze=S-(ze-S)*N,Sr=Math.min(H*H+G*G,z*z+V*V),Lr=he?B:N,Qi=Sr+Lr*Lr*v,Cl=We<=Qi;let gi=s.join;if(gi===ri.MITER&&We/v>x&&(gi=ri.BEVEL),Cl)switch(gi){case ri.MITER:{c.push(He,Fe,ut,Ze);break}case ri.BEVEL:{he?c.push(He,Fe,_+k*N,S+M*N,He,Fe,_+O*N,S+F*N):c.push(_-k*B,S-M*B,ut,Ze,_-O*B,S-F*B,ut,Ze),d+=2;break}case ri.ROUND:{he?(c.push(He,Fe,_+k*N,S+M*N),d+=Da(_,S,_+k*N,S+M*N,_+O*N,S+F*N,c,!0)+4,c.push(He,Fe,_+O*N,S+F*N)):(c.push(_-k*B,S-M*B,ut,Ze),d+=Da(_,S,_-k*B,S-M*B,_-O*B,S-F*B,c,!1)+4,c.push(_-O*B,S-F*B,ut,Ze));break}}else{switch(c.push(_-k*B,S-M*B,_+k*N,S+M*N),gi){case ri.MITER:{he?c.push(ut,Ze,ut,Ze):c.push(He,Fe,He,Fe),d+=2;break}case ri.ROUND:{he?d+=Da(_,S,_+k*N,S+M*N,_+O*N,S+F*N,c,!0)+2:d+=Da(_,S,_-k*B,S-M*B,_-O*B,S-F*B,c,!1)+2;break}}c.push(_-O*B,S-F*B,_+O*N,S+F*N),d+=2}}y=n[(h-2)*2],b=n[(h-2)*2+1],_=n[(h-1)*2],S=n[(h-1)*2+1],k=-(b-S),M=y-_,U=Math.sqrt(k*k+M*M),k/=U,M/=U,k*=g,M*=g,c.push(_-k*B,S-M*B,_+k*N,S+M*N),u||(s.cap===ra.ROUND?d+=Da(_-k*(B-N)*.5,S-M*(B-N)*.5,_-k*B,S-M*B,_+k*N,S+M*N,c,!1)+2:s.cap===ra.SQUARE&&(d+=qE(_,S,k,M,B,N,!1,c)));const j=e.indices,W=Ju.epsilon*Ju.epsilon;for(let Q=p;Q<d+p-2;++Q)y=c[Q*2],b=c[Q*2+1],_=c[(Q+1)*2],S=c[(Q+1)*2+1],I=c[(Q+2)*2],A=c[(Q+2)*2+1],!(Math.abs(y*(S-A)+_*(A-b)+I*(b-S))<W)&&j.push(Q,Q+1,Q+2)}function sU(r,e){let t=0;const n=r.shape,i=r.points||n.points,s=n.type!==Mr.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,u=i.length/2,l=o.length/2;let c=l;for(o.push(i[0],i[1]),t=1;t<u;t++)o.push(i[t*2],i[t*2+1]),a.push(c,c+1),c++;s&&a.push(c,l)}function KE(r,e){r.lineStyle.native?sU(r,e):iU(r,e)}class z_{static curveLength(e,t,n,i,s,o){const a=e-2*n+s,u=t-2*i+o,l=2*n-2*e,c=2*i-2*t,h=4*(a*a+u*u),d=4*(a*l+u*c),p=l*l+c*c,g=2*Math.sqrt(h+d+p),v=Math.sqrt(h),x=2*h*v,y=2*Math.sqrt(p),b=d/v;return(x*g+v*d*(g-y)+(4*p*h-d*d)*Math.log((2*v+b+g)/(b+y)))/(4*x)}static curveTo(e,t,n,i,s){const o=s[s.length-2],a=s[s.length-1],u=Ju._segmentsCount(z_.curveLength(o,a,e,t,n,i));let l=0,c=0;for(let h=1;h<=u;++h){const d=h/u;l=o+(e-o)*d,c=a+(t-a)*d,s.push(l+(e+(n-e)*d-l)*d,c+(t+(i-t)*d-c)*d)}}}const Jv={[Mr.POLY]:xk,[Mr.CIRC]:bm,[Mr.ELIP]:bm,[Mr.RECT]:tU,[Mr.RREC]:rU},QE=[],Wf=[];class Sm{constructor(e,t=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new Sm(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Gl=new Xe,_k=class wk extends S2{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ym,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Wf.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),QE.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,i=null){const s=new Sm(e,t,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const n=new Sm(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let n=0;n<t.length;++n){const i=t[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Gl):Gl.copyFrom(e),i.shape.contains(Gl.x,Gl.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Gl.x,Gl.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let u=this.shapeIndex;u<t.length;u++){this.shapeIndex++;const l=t[u],c=l.fillStyle,h=l.lineStyle;Jv[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(c.visible||h.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const p=d===0?c:h;if(!p.visible)continue;const g=p.texture.baseTexture,v=this.indices.length,x=this.points.length/2;g.wrapMode=hi.REPEAT,d===0?this.processFill(l):this.processLine(l);const y=this.points.length/2-x;y!==0&&(n&&!this._compareStyles(i,p)&&(n.end(v,x),n=null),n||(n=QE.pop()||new nU,n.begin(p,v,x),this.batches.push(n),i=p),this.addUvs(this.points,e,p.texture,x,y,p.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,n=e.length;t<n;t++){const i=e[t];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<wk.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++De._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),Wf.push(this.drawCalls[h]);this.drawCalls.length=0;const t=this.colors,n=this.textureIds;let i=Wf.pop();i||(i=new P1,i.texArray=new R1),i.texArray.count=0,i.start=0,i.size=0,i.type=Oi.TRIANGLES;let s=0,o=null,a=0,u=!1,l=Oi.TRIANGLES,c=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){const d=this.batches[h],p=8,g=d.style,v=g.texture.baseTexture;u!==!!g.native&&(u=!!g.native,l=u?Oi.LINES:Oi.TRIANGLES,o=null,s=p,e++),o!==v&&(o=v,v._batchEnabled!==e&&(s===p&&(e++,s=0,i.size>0&&(i=Wf.pop(),i||(i=new P1,i.texArray=new R1),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=l),v.touched=1,v._batchEnabled=e,v._batchLocation=s,v.wrapMode=hi.REPEAT,i.texArray.elements[i.texArray.count++]=v,s++)),i.size+=d.size,c+=d.size,a=v._batchLocation,this.addColors(t,g.color,g.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}De._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let u=0;for(let l=0;l<e.length/2;l++)o[u++]=e[l*2],o[u++]=e[l*2+1],o[u++]=t[l*2],o[u++]=t[l*2+1],a[u++]=n[l],o[u++]=i[l];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?xk.triangulate(e,this):Jv[e.type].triangulate(e,this)}processLine(e){KE(e,this);for(let t=0;t<e.holes.length;t++)KE(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const n=e[t];Jv[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=t.a*i+t.c*s+t.tx,e[n*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,n,i,s=0){const o=lt.shared.setValue(t).toLittleEndianNumber(),a=lt.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let u=0;u<i;u++)e[s+u]=a}addTextureIds(e,t,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=t}addUvs(e,t,n,i,s,o=null){let a=0;const u=t.length,l=n.frame;for(;a<s;){let h=e[(i+a)*2],d=e[(i+a)*2+1];if(o){const p=o.a*h+o.c*d+o.tx;d=o.b*h+o.d*d+o.ty,h=p}a++,t.push(h/l.width,d/l.height)}const c=n.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(t,n,u,s)}adjustUvs(e,t,n,i){const s=t.baseTexture,o=1e-6,a=n+i*2,u=t.frame,l=u.width/s.width,c=u.height/s.height;let h=u.x/u.width,d=u.y/u.height,p=Math.floor(e[n]+o),g=Math.floor(e[n+1]+o);for(let v=n+2;v<a;v+=2)p=Math.min(p,Math.floor(e[v]+o)),g=Math.min(g,Math.floor(e[v+1]+o));h-=p,d-=g;for(let v=n;v<a;v+=2)e[v]=(e[v]+h)*l,e[v+1]=(e[v+1]+d)*c}};_k.BATCHABLE_SIZE=100;let oU=_k;class Mg{constructor(){this.color=16777215,this.alpha=1,this.texture=Ie.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Mg;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Ie.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class $_ extends Mg{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ra.BUTT,this.join=ri.MITER,this.miterLimit=10}clone(){const e=new $_;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=ra.BUTT,this.join=ri.MITER,this.miterLimit=10}}const ey={},Q1=class Xp extends Vr{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Mg,this._lineStyle=new $_,this._matrix=null,this._holeMode=!1,this.state=Ds.for2d(),this._geometry=e||new oU,this._geometry.refCount++,this._transformID=-1,this._tintColor=new lt(16777215),this.blendMode=Ae.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Xp(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:Ie.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:ra.BUTT,join:ri.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new bc,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new bc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),z_.curveTo(e,t,n,i,s),this}bezierCurveTo(e,t,n,i,s,o){return this._initCurve(),H_.curveTo(e,t,n,i,s,o,this.currentPath.points),this}arcTo(e,t,n,i,s){this._initCurve(e,t);const o=this.currentPath.points,a=VE.curveTo(e,t,n,i,s,o);if(a){const{cx:u,cy:l,radius:c,startAngle:h,endAngle:d,anticlockwise:p}=a;this.arc(u,l,c,h,d,p)}return this}arc(e,t,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=fm:o&&i<=s&&(i+=fm),s-i===0)return this;const a=e+Math.cos(i)*n,u=t+Math.sin(i)*n,l=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const h=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-u);h<l&&d<l||c.push(a,u)}else this.moveTo(a,u),c=this.currentPath.points;return VE.arc(a,u,e,t,n,i,s,o,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:Ie.WHITE,color:e,alpha:t})}normalizeColor(e){const t=lt.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:Ie.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,i){return this.drawShape(new $e(e,t,n,i))}drawRoundedRect(e,t,n,i,s){return this.drawShape(new Eg(e,t,n,i,s))}drawCircle(e,t,n){return this.drawShape(new Sg(e,t,n))}drawEllipse(e,t,n,i){return this.drawShape(new Tg(e,t,n,i))}drawPolygon(...e){let t,n=!0;const i=e[0];i.points?(n=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new bc(t);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Mr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),c={vertexData:a,blendMode:t,indices:l,uvs:u,_batchRGB:lt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=c}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const t=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=t.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,lt.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let a=0,u=o.length;a<u;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:n,type:i,size:s,start:o}=t,a=n.count;for(let u=0;u<a;u++)e.texture.bind(n.elements[u],u);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let t=this.shader;const n=this.pluginName;if(!t){if(!ey[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let u=0;u<i;u++)s[u]=u;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new bt,default:Di.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;ey[n]=new Ui(a,o)}t=ey[n]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Xp._TEMP_POINT),this._geometry.containsPoint(Xp._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=lt.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,u=t.ty,l=this._geometry.points,c=this.vertexData;let h=0;for(let d=0;d<l.length;d+=2){const p=l[d],g=l[d+1];c[h++]=n*p+s*g+a,c[h++]=o*g+i*p+u}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};Q1.curves=Ju,Q1._TEMP_POINT=new Xe;let Fu=Q1;class aU{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const ty=new Xe,ZE=new bc,bk=class Sk extends Vr{constructor(e,t,n,i=Oi.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||Ds.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=xe.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Oi.TRIANGLES&&t.length<Sk.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,u=i.d,l=i.tx,c=i.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){const p=t[d*2],g=t[d*2+1];h[d*2]=s*p+a*g+l,h[d*2+1]=o*p+u*g+c}if(this._roundPixels){const d=xe.RESOLUTION;for(let p=0;p<h.length;++p)h[p]=Math.round(h[p]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new aU(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ty);const t=this.geometry.getBuffer("aVertexPosition").data,n=ZE.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const u=i[a]*2,l=i[a+1]*2,c=i[a+2]*2;if(n[0]=t[u],n[1]=t[u+1],n[2]=t[l],n[3]=t[l+1],n[4]=t[c],n[5]=t[c+1],ZE.contains(ty.x,ty.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};bk.BATCHABLE_SIZE=100;let hl=bk;class _d extends Os{constructor(e,t,n){super();const i=new _t(e),s=new _t(t,!0),o=new _t(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Se.FLOAT).addAttribute("aTextureCoord",s,2,!1,Se.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var lU=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,uU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class eh extends Ui{constructor(e,t){const n={uSampler:e,alpha:1,uTextureMatrix:bt.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(n,t.uniforms),super(t.program||Ts.from(uU,lU),n),this._colorDirty=!1,this.uvMatrix=new Ag(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new lt(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;lt.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class hU extends _d{constructor(e=100,t=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,u=this.height/o;for(let c=0;c<e;c++){const h=c%this.segWidth,d=c/this.segWidth|0;t.push(h*a,d*u),n.push(h/s,d/o)}const l=s*o;for(let c=0;c<l;c++){const h=c%s,d=c/s|0,p=d*this.segWidth+h,g=d*this.segWidth+h+1,v=(d+1)*this.segWidth+h,x=(d+1)*this.segWidth+h+1;i.push(p,g,v,g,x,v)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class cU extends _d{constructor(e=200,t,n=0){super(new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6)),this.points=t,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,u=e[0];const l=this._width*this.textureScale,c=e.length;for(let d=0;d<c;d++){const p=d*4;if(this.textureScale>0){const g=u.x-e[d].x,v=u.y-e[d].y,x=Math.sqrt(g*g+v*v);u=e[d],a+=x/l}else a=d/(c-1);s[p]=a,s[p+1]=0,s[p+2]=a,s[p+3]=1}let h=0;for(let d=0;d<c-1;d++){const p=d*2;o[h++]=p,o[h++]=p+1,o[h++]=p+2,o[h++]=p+2,o[h++]=p+1,o[h++]=p+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],n,i=0,s=0;const o=this.buffers[0].data,a=e.length,u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<a;l++){const c=e[l],h=l*4;l<e.length-1?n=e[l+1]:n=c,s=-(n.x-t.x),i=n.y-t.y;const d=Math.sqrt(i*i+s*s);d<1e-6?(i=0,s=0):(i/=d,s/=d,i*=u,s*=u),o[h]=c.x+i,o[h+1]=c.y+s,o[h+2]=c.x-i,o[h+3]=c.y-s,t=c}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class dU extends hl{constructor(e,t,n){const i=new hU(e.width,e.height,t,n),s=new eh(Ie.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:n}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const Vf=10;class fU extends dU{constructor(e,t,n,i,s){var o,a,u,l;super(Ie.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??((o=e.defaultBorders)==null?void 0:o.left)??Vf,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??Vf,this._topHeight=n??((u=e.defaultBorders)==null?void 0:u.top)??Vf,this._bottomHeight=s??((l=e.defaultBorders)==null?void 0:l.bottom)??Vf,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(t,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class pU extends hl{constructor(e=Ie.EMPTY,t,n,i,s){const o=new _d(t,n,i);o.getBuffer("aVertexPosition").static=!1;const a=new eh(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class mU extends hl{constructor(e,t,n=0){const i=new cU(e.height,t,n),s=new eh(e);n>0&&(e.baseTexture.wrapMode=hi.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}}class gU extends Vr{constructor(e=1500,t,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Ae.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new lt(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class JE{constructor(e,t,n){this.geometry=new Os,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Se.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new _t(B5(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new _t(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new _t(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Se.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Se.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,t,n,s.type===Se.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,t,n,s.type===Se.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var vU=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,yU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Tk extends Pg{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new bt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Se.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ui.from(yU,vU,{}),this.state=Ds.for2d()}render(e){const t=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const u=t[0]._texture.baseTexture,l=u.alphaMode>0;this.state.blendMode=_2(e.blendMode,l),s.state.set(this.state);const c=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=lt.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);let d=!1;for(let p=0,g=0;p<o;p+=i,g+=1){let v=o-p;v>i&&(v=i),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[g];x.uploadDynamic(t,p,v);const y=e._bufferUpdateIDs[g]||0;d=d||x._updateID<y,d&&(x._updateID=e._updateID,x.uploadStatic(t,p,v)),s.geometry.bind(x.geometry),c.drawElements(c.TRIANGLES,v*6,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)t.push(new JE(this.properties,s,i));return t}_generateOneMoreBuffer(e){const t=e._batchSize,n=e._properties;return new JE(this.properties,n,t)}uploadVertices(e,t,n,i,s,o){let a=0,u=0,l=0,c=0;for(let h=0;h<n;++h){const d=e[t+h],p=d._texture,g=d.scale.x,v=d.scale.y,x=p.trim,y=p.orig;x?(u=x.x-d.anchor.x*y.width,a=u+x.width,c=x.y-d.anchor.y*y.height,l=c+x.height):(a=y.width*(1-d.anchor.x),u=y.width*-d.anchor.x,l=y.height*(1-d.anchor.y),c=y.height*-d.anchor.y),i[o]=u*g,i[o+1]=c*v,i[o+s]=a*g,i[o+s+1]=c*v,i[o+s*2]=a*g,i[o+s*2+1]=l*v,i[o+s*3]=u*g,i[o+s*3+1]=l*v,o+=s*4}}uploadPosition(e,t,n,i,s,o){for(let a=0;a<n;a++){const u=e[t+a].position;i[o]=u.x,i[o+1]=u.y,i[o+s]=u.x,i[o+s+1]=u.y,i[o+s*2]=u.x,i[o+s*2+1]=u.y,i[o+s*3]=u.x,i[o+s*3+1]=u.y,o+=s*4}}uploadRotation(e,t,n,i,s,o){for(let a=0;a<n;a++){const u=e[t+a].rotation;i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}uploadUvs(e,t,n,i,s,o){for(let a=0;a<n;++a){const u=e[t+a]._texture._uvs;u?(i[o]=u.x0,i[o+1]=u.y0,i[o+s]=u.x1,i[o+s+1]=u.y1,i[o+s*2]=u.x2,i[o+s*2+1]=u.y2,i[o+s*3]=u.x3,i[o+s*3+1]=u.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,n,i,s,o){for(let a=0;a<n;++a){const u=e[t+a],l=lt.shared.setValue(u._tintRGB).toPremultiplied(u.alpha,u.texture.baseTexture.alphaMode>0);i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Tk.extension={name:"particle",type:me.RendererPlugin};Te.add(Tk);var Rg=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Rg||{});const qf={willReadFrequently:!0},fs=class Pe{static get experimentalLetterSpacingSupported(){let e=Pe._experimentalLetterSpacingSupported;if(e!==void 0){const t=xe.ADAPTER.getCanvasRenderingContext2D().prototype;e=Pe._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,s,o,a,u,l){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=l}static measureText(e,t,n,i=Pe._canvas){n=n??t.wordWrap;const s=t.toFontString(),o=Pe.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=i.getContext("2d",qf);a.font=s;const u=(n?Pe.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),l=new Array(u.length);let c=0;for(let g=0;g<u.length;g++){const v=Pe._measureText(u[g],t.letterSpacing,a);l[g]=v,c=Math.max(c,v)}let h=c+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);const d=t.lineHeight||o.fontSize+t.strokeThickness;let p=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(u.length-1)*(d+t.leading);return t.dropShadow&&(p+=t.dropShadowDistance),new Pe(e,t,h,p,u,l,d+t.leading,c,o)}static _measureText(e,t,n){let i=!1;Pe.experimentalLetterSpacingSupported&&(Pe.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=t:s+=(Pe.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,n=Pe._canvas){const i=n.getContext("2d",qf);let s=0,o="",a="";const u=Object.create(null),{letterSpacing:l,whiteSpace:c}=t,h=Pe.collapseSpaces(c),d=Pe.collapseNewlines(c);let p=!h;const g=t.wordWrapWidth+l,v=Pe.tokenize(e);for(let x=0;x<v.length;x++){let y=v[x];if(Pe.isNewline(y)){if(!d){a+=Pe.addLine(o),p=!h,o="",s=0;continue}y=" "}if(h){const _=Pe.isBreakingSpace(y),S=Pe.isBreakingSpace(o[o.length-1]);if(_&&S)continue}const b=Pe.getFromCache(y,l,u,i);if(b>g)if(o!==""&&(a+=Pe.addLine(o),o="",s=0),Pe.canBreakWords(y,t.breakWords)){const _=Pe.wordWrapSplit(y);for(let S=0;S<_.length;S++){let I=_[S],A=I,k=1;for(;_[S+k];){const O=_[S+k];if(!Pe.canBreakChars(A,O,y,S,t.breakWords))I+=O;else break;A=O,k++}S+=k-1;const M=Pe.getFromCache(I,l,u,i);M+s>g&&(a+=Pe.addLine(o),p=!1,o="",s=0),o+=I,s+=M}}else{o.length>0&&(a+=Pe.addLine(o),o="",s=0);const _=x===v.length-1;a+=Pe.addLine(y,!_),p=!1,o="",s=0}else b+s>g&&(p=!1,a+=Pe.addLine(o),o="",s=0),(o.length>0||!Pe.isBreakingSpace(y)||p)&&(o+=y,s+=b)}return a+=Pe.addLine(o,!1),a}static addLine(e,t=!0){return e=Pe.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,n,i){let s=n[e];return typeof s!="number"&&(s=Pe._measureText(e,t,i)+t,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!Pe.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Pe._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Pe._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(Pe.isBreakingSpace(s,o)||Pe.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,s){return!0}static wordWrapSplit(e){return Pe.graphemeSegmenter(e)}static measureFont(e){if(Pe._fonts[e])return Pe._fonts[e];const t={ascent:0,descent:0,fontSize:0},n=Pe._canvas,i=Pe._context;i.font=e;const s=Pe.METRICS_STRING+Pe.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(Pe.BASELINE_SYMBOL).width);const u=Math.ceil(Pe.HEIGHT_MULTIPLIER*a);if(a=a*Pe.BASELINE_MULTIPLIER|0,o===0||u===0)return Pe._fonts[e]=t,t;n.width=o,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const l=i.getImageData(0,0,o,u).data,c=l.length,h=o*4;let d=0,p=0,g=!1;for(d=0;d<a;++d){for(let v=0;v<h;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p+=h;else break}for(t.ascent=a-d,p=c-h,g=!1,d=u;d>a;--d){for(let v=0;v<h;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p-=h;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,Pe._fonts[e]=t,t}static clearMetrics(e=""){e?delete Pe._fonts[e]:Pe._fonts={}}static get _canvas(){var e;if(!Pe.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",qf))!=null&&e.measureText)return Pe.__canvas=n,n;t=xe.ADAPTER.createCanvas()}catch{t=xe.ADAPTER.createCanvas()}t.width=t.height=10,Pe.__canvas=t}return Pe.__canvas}static get _context(){return Pe.__context||(Pe.__context=Pe._canvas.getContext("2d",qf)),Pe.__context}};fs.METRICS_STRING="|q",fs.BASELINE_SYMBOL="M",fs.BASELINE_MULTIPLIER=1.4,fs.HEIGHT_MULTIPLIER=2,fs.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),fs.experimentalLetterSpacing=!1,fs._fonts={},fs._newlines=[10,13],fs._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Yo=fs;const xU=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ek=class hc{constructor(e){this.styleID=0,this.reset(),ny(this,e,e)}clone(){const e={};return ny(e,this,hc.defaultStyle),new hc(e)}reset(){ny(this,hc.defaultStyle,hc.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=ry(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=ry(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){_U(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=ry(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!xU.includes(i)&&(i=`"${i}"`),t[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};Ek.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Rg.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Bs=Ek;function ry(r){const e=lt.shared,t=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function _U(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function ny(r,e,t){for(const n in t)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}const wU={texture:!0,children:!1,baseTexture:!0},Ck=class Z1 extends qi{constructor(e,t,n){let i=!1;n||(n=xe.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=Ie.from(n);s.orig=new $e,s.trim=new $e,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=Z1.defaultResolution??xe.RESOLUTION,this._autoResolution=Z1.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Yo.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ve("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Yo.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=Yo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,u=i.lineHeight,l=i.lineWidths,c=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;let d,p;const g=t.dropShadow?2:1;for(let v=0;v<g;++v){const x=t.dropShadow&&v===0,y=x?Math.ceil(Math.max(1,o)+t.padding*2):0,b=y*this._resolution;if(x){n.fillStyle="black",n.strokeStyle="black";const S=t.dropShadowColor,I=t.dropShadowBlur*this._resolution,A=t.dropShadowDistance*this._resolution;n.shadowColor=lt.shared.setValue(S).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=I,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*A,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*A+b}else n.fillStyle=this._generateFillStyle(t,a,i),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let _=(u-h.fontSize)/2;u-h.fontSize<0&&(_=0);for(let S=0;S<a.length;S++)d=t.strokeThickness/2,p=t.strokeThickness/2+S*u+h.ascent+_,t.align==="right"?d+=c-l[S]:t.align==="center"&&(d+=(c-l[S])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[S],d+t.padding,p+t.padding-y,!0),t.fill&&this.drawLetterSpacing(a[S],d+t.padding,p+t.padding-y)}this.updateTexture()}drawLetterSpacing(e,t,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(Yo.experimentalLetterSpacingSupported&&(Yo.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);return}let a=t;const u=Yo.graphemeSegmenter(e);let l=this.context.measureText(e).width,c=0;for(let h=0;h<u.length;++h){const d=u[h];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let p="";for(let g=h+1;g<u.length;++g)p+=u[g];c=this.context.measureText(p).width,a+=l-c+s,l=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=D5(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,n=this._style,i=n.trim?0:n.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,u=this.canvas.width/this._resolution-o-a*2,l=this.canvas.height/this._resolution-o-a*2,c=i.slice(),h=e.fillGradientStops.slice();if(!h.length){const d=c.length+1;for(let p=1;p<d;++p)h.push(p/d)}if(c.unshift(i[0]),h.unshift(0),c.push(i[i.length-1]),h.push(1),e.fillGradientType===Rg.LINEAR_VERTICAL){s=this.context.createLinearGradient(u/2,a,u/2,l+a);const d=n.fontProperties.fontSize+e.strokeThickness;for(let p=0;p<t.length;p++){const g=n.lineHeight*(p-1)+d,v=n.lineHeight*p;let x=v;p>0&&g>v&&(x=(v+g)/2);const y=v+d,b=n.lineHeight*(p+1);let _=y;p+1<t.length&&b<y&&(_=(y+b)/2);const S=(_-x)/l;for(let I=0;I<c.length;I++){let A=0;typeof h[I]=="number"?A=h[I]:A=I/c.length;let k=Math.min(1,Math.max(0,x/l+A*S));k=Number(k.toFixed(5)),s.addColorStop(k,c[I])}}}else{s=this.context.createLinearGradient(a,l/2,u+a,l/2);const d=c.length+1;let p=1;for(let g=0;g<c.length;g++){let v;typeof h[g]=="number"?v=h[g]:v=p/d,s.addColorStop(v,c[g]),p++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},wU,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=ta(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=ta(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Bs?this._style=e:this._style=new Bs(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};Ck.defaultAutoResolution=!0;let Y_=Ck;class bU{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function SU(r,e){var n;let t=!1;if((n=r==null?void 0:r._textures)!=null&&n.length){for(let i=0;i<r._textures.length;i++)if(r._textures[i]instanceof Ie){const s=r._textures[i].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function TU(r,e){if(r.baseTexture instanceof De){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function EU(r,e){if(r._texture&&r._texture instanceof Ie){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function CU(r,e){return e instanceof Y_?(e.updateText(!0),!0):!1}function PU(r,e){if(e instanceof Bs){const t=e.toFontString();return Yo.measureFont(t),!0}return!1}function AU(r,e){if(r instanceof Y_){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function kU(r,e){return r instanceof Bs?(e.includes(r)||e.push(r),!0):!1}const Pk=class Ak{constructor(e){this.limiter=new bU(Ak.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(AU),this.registerFindHook(kU),this.registerFindHook(SU),this.registerFindHook(TU),this.registerFindHook(EU),this.registerUploadHook(CU),this.registerUploadHook(PU)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Ut.system.addOnce(this.tick,this,ya.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Ut.system.addOnce(this.tick,this,ya.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Vr)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Ut.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Pk.uploadsPerFrame=4;let J1=Pk;Object.defineProperties(xe,{UPLOADS_PER_FRAME:{get(){return J1.uploadsPerFrame},set(r){Ve("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),J1.uploadsPerFrame=r}}});function kk(r,e){return e instanceof De?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function IU(r,e){if(!(e instanceof Fu))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:n}=t;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&kk(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function MU(r,e){return r instanceof Fu?(e.push(r),!0):!1}class Ik extends J1{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(MU),this.registerUploadHook(kk),this.registerUploadHook(IU)}}Ik.extension={name:"prepare",type:me.RendererSystem};Te.add(Ik);class zc extends qi{constructor(e,t=!0){super(e[0]instanceof Ie?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ut.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ut.shared.add(this.update,this,ya.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=t/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let n=0;n<e.length;++n)t.push(Ie.from(e[n]));return new zc(t)}static fromImages(e){const t=[];for(let n=0;n<e.length;++n)t.push(Ie.from(e[n]));return new zc(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof Ie)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Ut.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ut.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Kh=new Xe;class G_ extends qi{constructor(e,t=100,n=100){super(e),this.tileTransform=new Cg,this._width=t,this._height=n,this.uvMatrix=this.texture.uvMatrix||new Ag(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new $e),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Kh);const t=this._width,n=this._height,i=-t*this.anchor._x;if(Kh.x>=i&&Kh.x<i+t){const s=-n*this.anchor._y;if(Kh.y>=s&&Kh.y<s+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const n=e instanceof Ie?e:Ie.from(e,t);return new G_(n,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var RU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,OU=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,BU=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,eC=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,LU=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Kf=new bt;class Mk extends Pg{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new L2,this.state=Ds.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Ui.from(eC,LU,t),this.shader=e.context.webGLVersion>1?Ui.from(OU,RU,t):Ui.from(eC,BU,t)}render(e){const t=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=e._texture,u=a.baseTexture,l=u.alphaMode>0,c=e.tileTransform.localTransform,h=e.uvMatrix;let d=u.isPowerOfTwo&&a.frame.width===u.width&&a.frame.height===u.height;d&&(u._glTextures[t.CONTEXT_UID]?d=u.wrapMode!==hi.CLAMP:u.wrapMode===hi.CLAMP&&(u.wrapMode=hi.REPEAT));const p=d?this.simpleShader:this.shader,g=a.width,v=a.height,x=e._width,y=e._height;Kf.set(c.a*g/x,c.b*g/y,c.c*v/x,c.d*v/y,c.tx/x,c.ty/y),Kf.invert(),d?Kf.prepend(h.mapCoord):(p.uniforms.uMapCoord=h.mapCoord.toArray(!0),p.uniforms.uClampFrame=h.uClampFrame,p.uniforms.uClampOffset=h.uClampOffset),p.uniforms.uTransform=Kf.toArray(!0),p.uniforms.uColor=lt.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(p.uniforms.uColor),p.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),p.uniforms.uSampler=a,t.shader.bind(p),t.geometry.bind(n),this.state.blendMode=_2(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Mk.extension={name:"tilingSprite",type:me.RendererPlugin};Te.add(Mk);const Rk=class cc{constructor(e,t,n){this.linkedSheets=[],(e instanceof De||e instanceof Ie)&&(e={texture:e,data:t,resolutionFilename:n});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof Ie?i:null,this.baseTexture=i instanceof De?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const u=this.baseTexture.resource;this.resolution=this._updateResolution(o||(u?u.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let n=go(e,null);return n===null&&(n=typeof t=="number"?t:parseFloat(t??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=cc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=cc.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){let a=null,u=null;const l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new $e(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?a=new $e(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new $e(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(u=new $e(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Ie(this.baseTexture,a,c,u,s.rotated?2:0,s.anchor,s.borders),Ie.addToCache(this.textures[i],this.cachePrefix+i.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*cc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*cc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Rk.BATCH_SIZE=1e3;let tC=Rk;const NU=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Ok(r,e,t){const n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!t){const i=Gt.dirname(r[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(n,Ok([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return n}const FU={extension:me.Asset,cache:{test:r=>r instanceof tC,getCacheableAssets:(r,e)=>Ok(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),n=e.pop();return t==="json"&&NU.includes(n)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=xe.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:me.LoadParser,priority:zn.Normal},async testParse(r,e){return Gt.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var c,h;const{texture:n,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=Gt.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(n&&n.baseTexture)a=n;else{const d=V1(o+(i??r.meta.image),e.src);a=(await t.load([d]))[d]}const u=new tC({texture:a.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:s});await u.parse();const l=(c=r==null?void 0:r.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const d=[];for(const g of l){if(typeof g!="string")continue;let v=o+g;(h=e.data)!=null&&h.ignoreMultiPack||(v=V1(v,e.src),d.push(t.load({src:v,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(d);u.linkedSheets=p,p.forEach(g=>{g.linkedSheets=[u].concat(u.linkedSheets.filter(v=>v!==g))})}return u},unload(r){r.destroy(!0)}}};Te.add(FU);class Tm{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Hp{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(const l in a){const c=a[l].split("="),h=c[0],d=c[1].replace(/"/gm,""),p=parseFloat(d),g=isNaN(p)?d:p;u[h]=g}n[o].push(u)}const i=new Tm;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class ex{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Tm,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),u=e.getElementsByTagName("distanceField");for(let l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(let l=0;l<i.length;l++)t.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(let l=0;l<s.length;l++)t.page.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});for(let l=0;l<o.length;l++){const c=o[l];t.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let l=0;l<a.length;l++)t.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});for(let l=0;l<u.length;l++)t.distanceField.push({fieldType:u[l].getAttribute("fieldType"),distanceRange:parseInt(u[l].getAttribute("distanceRange"),10)});return t}}class tx{static test(e){return typeof e=="string"&&e.includes("<font>")?ex.test(xe.ADAPTER.parseXML(e)):!1}static parse(e){return ex.parse(xe.ADAPTER.parseXML(e))}}const iy=[Hp,ex,tx];function DU(r){for(let e=0;e<iy.length;e++)if(iy[e].test(r))return iy[e];return null}function UU(r,e,t,n,i,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const u=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,c=r.width/n-u-l*2,h=r.height/n-u-l*2,d=o.slice(),p=t.fillGradientStops.slice();if(!p.length){const g=d.length+1;for(let v=1;v<g;++v)p.push(v/g)}if(d.unshift(o[0]),p.unshift(0),d.push(o[o.length-1]),p.push(1),t.fillGradientType===Rg.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,l,c/2,h+l);let g=0;const v=(s.fontProperties.fontSize+t.strokeThickness)/h;for(let x=0;x<i.length;x++){const y=s.lineHeight*x;for(let b=0;b<d.length;b++){let _=0;typeof p[b]=="number"?_=p[b]:_=b/d.length;const S=y/h+_*v;let I=Math.max(g,S);I=Math.min(I,1),a.addColorStop(I,d[b]),g=I}}}else{a=e.createLinearGradient(l,h/2,c+l,h/2);const g=d.length+1;let v=1;for(let x=0;x<d.length;x++){let y;typeof p[x]=="number"?y=p[x]:y=v/g,a.addColorStop(y,d[x]),v++}}return a}function jU(r,e,t,n,i,s,o){const a=t.text,u=t.fontProperties;e.translate(n,i),e.scale(s,s);const l=o.strokeThickness/2,c=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=UU(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,d=o.dropShadowBlur*s,p=o.dropShadowDistance*s;e.shadowColor=lt.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,l,c+t.lineHeight-u.descent),o.fill&&e.fillText(a,l,c+t.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function zp(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function Bk(r){return Array.from?Array.from(r):r.split("")}function XU(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,u=o;a<=u;a++)e.push(String.fromCharCode(a))}else e.push(...Bk(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const jo=class ps{constructor(e,t,n){var c;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,u=go(o.file),l={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=l;for(let h=0;h<e.page.length;h++){const{id:d,file:p}=e.page[h];l[d]=t instanceof Array?t[h]:t[p],a!=null&&a.fieldType&&a.fieldType!=="none"&&(l[d].baseTexture.alphaMode=$r.NO_PREMULTIPLIED_ALPHA,l[d].baseTexture.mipmap=di.OFF)}for(let h=0;h<e.char.length;h++){const{id:d,page:p}=e.char[h];let{x:g,y:v,width:x,height:y,xoffset:b,yoffset:_,xadvance:S}=e.char[h];g/=u,v/=u,x/=u,y/=u,b/=u,_/=u,S/=u;const I=new $e(g+l[p].frame.x/u,v+l[p].frame.y/u,x,y);this.chars[d]={xOffset:b,yOffset:_,xAdvance:S,kerning:{},texture:new Ie(l[p].baseTexture,I),page:p}}for(let h=0;h<e.kerning.length;h++){let{first:d,second:p,amount:g}=e.kerning[h];d/=u,p/=u,g/=u,this.chars[p]&&(this.chars[p].kerning[d]=g)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((c=a==null?void 0:a.fieldType)==null?void 0:c.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,n){let i;if(e instanceof Tm)i=e;else{const o=DU(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof Ie&&(t=[t]);const s=new ps(i,t,n);return ps.available[s.font]=s,s}static uninstall(e){const t=ps.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete ps.available[e]}static from(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:u,...l}=Object.assign({},ps.defaultOptions,n),c=XU(i),h=t instanceof Bs?t:new Bs(t),d=a,p=new Tm;p.info[0]={face:h.fontFamily,size:h.fontSize},p.common[0]={lineHeight:h.fontSize};let g=0,v=0,x,y,b,_=0;const S=[];for(let A=0;A<c.length;A++){x||(x=xe.ADAPTER.createCanvas(),x.width=a,x.height=u,y=x.getContext("2d"),b=new De(x,{resolution:o,...l}),S.push(new Ie(b)),p.page.push({id:S.length-1,file:""}));const k=c[A],M=Yo.measureText(k,h,!1,x),O=M.width,F=Math.ceil(M.height),U=Math.ceil((h.fontStyle==="italic"?2:1)*O);if(v>=u-F*o){if(v===0)throw new Error(`[BitmapFont] textureHeight ${u}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${k}')`);--A,x=null,y=null,b=null,v=0,g=0,_=0;continue}if(_=Math.max(F+M.fontProperties.descent,_),U*o+g>=d){if(g===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${k}')`);--A,v+=_*o,v=Math.ceil(v),g=0,_=0;continue}jU(x,y,M,g,v,o,h);const X=zp(M.text);p.char.push({id:X,page:S.length-1,x:g/o,y:v/o,width:U,height:F,xoffset:0,yoffset:0,xadvance:O-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),g+=(U+2*s)*o,g=Math.ceil(g)}if(!(n!=null&&n.skipKerning))for(let A=0,k=c.length;A<k;A++){const M=c[A];for(let O=0;O<k;O++){const F=c[O],U=y.measureText(M).width,X=y.measureText(F).width,B=y.measureText(M+F).width-(U+X);B&&p.kerning.push({first:zp(M),second:zp(F),amount:B})}}const I=new ps(p,S,!0);return ps.available[e]!==void 0&&ps.uninstall(e),ps.available[e]=I,I}};jo.ALPHA=[["a","z"],["A","Z"]," "],jo.NUMERIC=[["0","9"]],jo.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],jo.ASCII=[[" ","~"]],jo.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:jo.ALPHANUMERIC},jo.available={};let Xo=jo;var HU=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,zU=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const rC=[],nC=[],iC=[],Lk=class Nk extends Vr{constructor(e,t={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:u}=Object.assign({},Nk.styleDefaults,t);if(!Xo.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new lt(i),this._font=void 0,this._fontName=a,this._fontSize=u,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ss(()=>{this.dirty=!0},this,0,0),this._roundPixels=xe.ROUND_PIXELS,this.dirty=!0,this._resolution=xe.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var U;const e=Xo.available[this._fontName],t=this.fontSize,n=t/e.size,i=new Xe,s=[],o=[],a=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Bk(u),c=this._maxWidth*e.size/t,h=e.distanceFieldType==="none"?rC:nC;let d=null,p=0,g=0,v=0,x=-1,y=0,b=0,_=0,S=0;for(let X=0;X<l.length;X++){const B=l[X],N=zp(B);if(/(?:\s)/.test(B)&&(x=X,y=p,S++),B==="\r"||B===`
`){o.push(p),a.push(-1),g=Math.max(g,p),++v,++b,i.x=0,i.y+=e.lineHeight,d=null,S=0;continue}const j=e.chars[N];if(!j)continue;d&&j.kerning[d]&&(i.x+=j.kerning[d]);const W=iC.pop()||{texture:Ie.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Xe};W.texture=j.texture,W.line=v,W.charCode=N,W.position.x=Math.round(i.x+j.xOffset+this._letterSpacing/2),W.position.y=Math.round(i.y+j.yOffset),W.prevSpaces=S,s.push(W),p=W.position.x+Math.max(j.xAdvance-j.xOffset,j.texture.orig.width),i.x+=j.xAdvance+this._letterSpacing,_=Math.max(_,j.yOffset+j.texture.height),d=N,x!==-1&&c>0&&i.x>c&&(++b,Ru(s,1+x-b,1+X-x),X=x,x=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,y),v++,i.x=0,i.y+=e.lineHeight,d=null,S=0)}const I=l[l.length-1];I!=="\r"&&I!==`
`&&(/(?:\s)/.test(I)&&(p=y),o.push(p),g=Math.max(g,p),a.push(-1));const A=[];for(let X=0;X<=v;X++){let B=0;this._align==="right"?B=g-o[X]:this._align==="center"?B=(g-o[X])/2:this._align==="justify"&&(B=a[X]<0?0:(g-o[X])/a[X]),A.push(B)}const k=s.length,M={},O=[],F=this._activePagesMeshData;h.push(...F);for(let X=0;X<k;X++){const B=s[X].texture,N=B.baseTexture.uid;if(!M[N]){let j=h.pop();if(!j){const Q=new _d;let H,G;e.distanceFieldType==="none"?(H=new eh(Ie.EMPTY),G=Ae.NORMAL):(H=new eh(Ie.EMPTY,{program:Ts.from(zU,HU),uniforms:{uFWidth:0}}),G=Ae.NORMAL_NPM);const z=new hl(Q,H);z.blendMode=G,j={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:z,vertices:null,uvs:null,indices:null}}j.index=0,j.indexCount=0,j.vertexCount=0,j.uvsCount=0,j.total=0;const{_textureCache:W}=this;W[N]=W[N]||new Ie(B.baseTexture),j.mesh.texture=W[N],j.mesh.tint=this._tintColor.value,O.push(j),M[N]=j}M[N].total++}for(let X=0;X<F.length;X++)O.includes(F[X])||this.removeChild(F[X].mesh);for(let X=0;X<O.length;X++)O[X].mesh.parent!==this&&this.addChild(O[X].mesh);this._activePagesMeshData=O;for(const X in M){const B=M[X],N=B.total;if(!(((U=B.indices)==null?void 0:U.length)>6*N)||B.vertices.length<hl.BATCHABLE_SIZE*2)B.vertices=new Float32Array(4*2*N),B.uvs=new Float32Array(4*2*N),B.indices=new Uint16Array(6*N);else{const j=B.total,W=B.vertices;for(let Q=j*4*2;Q<W.length;Q++)W[Q]=0}B.mesh.size=6*N}for(let X=0;X<k;X++){const B=s[X];let N=B.position.x+A[B.line]*(this._align==="justify"?B.prevSpaces:1);this._roundPixels&&(N=Math.round(N));const j=N*n,W=B.position.y*n,Q=B.texture,H=M[Q.baseTexture.uid],G=Q.frame,z=Q._uvs,V=H.index++;H.indices[V*6+0]=0+V*4,H.indices[V*6+1]=1+V*4,H.indices[V*6+2]=2+V*4,H.indices[V*6+3]=0+V*4,H.indices[V*6+4]=2+V*4,H.indices[V*6+5]=3+V*4,H.vertices[V*8+0]=j,H.vertices[V*8+1]=W,H.vertices[V*8+2]=j+G.width*n,H.vertices[V*8+3]=W,H.vertices[V*8+4]=j+G.width*n,H.vertices[V*8+5]=W+G.height*n,H.vertices[V*8+6]=j,H.vertices[V*8+7]=W+G.height*n,H.uvs[V*8+0]=z.x0,H.uvs[V*8+1]=z.y0,H.uvs[V*8+2]=z.x1,H.uvs[V*8+3]=z.y1,H.uvs[V*8+4]=z.x2,H.uvs[V*8+5]=z.y2,H.uvs[V*8+6]=z.x3,H.uvs[V*8+7]=z.y3}this._textWidth=g*n,this._textHeight=(i.y+e.lineHeight)*n;for(const X in M){const B=M[X];if(this.anchor.x!==0||this.anchor.y!==0){let Q=0;const H=this._textWidth*this.anchor.x,G=this._textHeight*this.anchor.y;for(let z=0;z<B.total;z++)B.vertices[Q++]-=H,B.vertices[Q++]-=G,B.vertices[Q++]-=H,B.vertices[Q++]-=G,B.vertices[Q++]-=H,B.vertices[Q++]-=G,B.vertices[Q++]-=H,B.vertices[Q++]-=G}this._maxLineHeight=_*n;const N=B.mesh.geometry.getBuffer("aVertexPosition"),j=B.mesh.geometry.getBuffer("aTextureCoord"),W=B.mesh.geometry.getIndex();N.data=B.vertices,j.data=B.uvs,W.data=B.indices,N.update(),j.update(),W.update()}for(let X=0;X<s.length;X++)iC.push(s[X]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:n,size:i}=Xo.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:u}=this.worldTransform,l=Math.sqrt(s*s+o*o),c=Math.sqrt(a*a+u*u),h=(Math.abs(l)+Math.abs(c))/2,d=this.fontSize/i,p=e._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=h*t*d*p}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=Xo.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Xo.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Xo.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=Xo.available[this._fontName].distanceFieldType==="none"?rC:nC;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=Ie.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};Lk.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let $U=Lk;const YU=[".xml",".fnt"],GU={extension:{type:me.LoadParser,priority:zn.Normal},name:"loadBitmapFont",test(r){return YU.includes(Gt.extname(r).toLowerCase())},async testParse(r){return Hp.test(r)||tx.test(r)},async parse(r,e,t){const n=Hp.test(r)?Hp.parse(r):tx.parse(r),{src:i}=e,{page:s}=n,o=[];for(let l=0;l<s.length;++l){const c=s[l].file;let h=Gt.join(Gt.dirname(i),c);h=V1(h,i),o.push(h)}const a=await t.load(o),u=o.map(l=>a[l]);return Xo.install(n,u,!0)},async load(r,e){return(await xe.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};Te.add(GU);const rx=class ru extends Bs{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new ru(Object.keys(ru.defaultOptions).reduce((t,n)=>({...t,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete ru.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:n}=ru;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return xe.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),u=new FileReader;u.onload=()=>s([a,u.result]),u.onerror=o,u.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:Gt.basename(e,Gt.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(n=>!this._overrides.includes(n));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(n=>this._overrides.includes(n));t.length>0&&(this._overrides=this._overrides.filter(n=>!t.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=R5(e)),typeof e=="number"?M5(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,ru.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=xe.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};rx.availableFonts={},rx.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let sy=rx;const Qf=class nu extends qi{constructor(e="",t={}){super(Ie.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=Ie.from(n,{scaleMode:xe.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new $e,i.trim=new $e,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),u=document.createElementNS(s,"foreignObject"),l=document.createElementNS(o,"div"),c=document.createElementNS(o,"style");u.setAttribute("width","10000"),u.setAttribute("height","10000"),u.style.overflow="hidden",a.appendChild(u),this.maxWidth=nu.defaultMaxWidth,this.maxHeight=nu.defaultMaxHeight,this._domElement=l,this._styleElement=c,this._svgRoot=a,this._foreignObject=u,this._foreignObject.appendChild(c),this._foreignObject.appendChild(l),this._image=n,this._loadImage=new Image,this._autoResolution=nu.defaultAutoResolution,this._resolution=nu.defaultResolution??xe.RESOLUTION,this.text=e,this.style=t}measureText(e){var c,h;const{text:t,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const u=Math.min(this.maxWidth,Math.ceil(o)),l=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",u.toString()),this._svgRoot.setAttribute("height",l.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(c=this._style)==null?void 0:c.toCSS(i)}),this._styleElement.textContent=(h=this._style)==null?void 0:h.toGlobalCSS()),{width:u+n.padding*2,height:l+n.padding*2}}async updateText(e=!0){const{style:t,_image:n,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(u=>{i.onload=async()=>{if(a<this._updateID){u();return}await t.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),u()};const l=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/i,t.trim.height=t._frame.height=n.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},nu.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=t,(i=this._svgRoot)==null||i.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=ta(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=ta(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof sy?(this.ownsStyle=!1,this._style=e):e instanceof Bs?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=sy.from(e)):(this.ownsStyle=!0,this._style=new sy(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Qf.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Qf.defaultMaxWidth=2024,Qf.defaultMaxHeight=2024,Qf.defaultAutoResolution=!0;function WU(r){const e=Object.create(null);return r=r.trim().replace(/^(\?|#|&)/,""),r&&r.split("&").forEach(t=>{const n=t.replace(/\+/g," ").split("=");let i=n.shift(),s=n.length>0?n.join("="):void 0;i=decodeURIComponent(i),s=s===void 0?null:decodeURIComponent(s),e[i]===void 0?e[i]=s:Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]}),e}function VU(r){let e="",t=0;for(const n in r)r[n]&&(t++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e}function qU(r){return r===void 0&&(r=W_()),`${window.location.protocol}//${window.location.host}${window.location.pathname}?`+VU(r)}function W_(){return WU(window.location.search)}function KU(r,e){const t=W_();return t[r]=e,qU(t)}function In(r,e){const t=W_();return t[r]?t[r]:e}var gn=(r=>(r.English="en",r.Chinese="cs",r.Vietnamese="vn",r.Thai="th",r.Khmer="kh",r.Indonesian="id",r.Korean="kr",r.Japanese="jp",r.Turkish="tr",r.Portuguese="pt",r.IndianHindi="hi",r))(gn||{});class QU{constructor(){C(this,"urlOptions");C(this,"tableOptions");C(this,"configOptions");this.urlOptions=this.getUrlConfig(),this.tableOptions=iu("table")||{},this.configOptions=iu("gameconfig")||{}}configureLanguage(){let e=In("lang","en");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e="en";break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e="cs";break;case e.indexOf("th")>=0:e="th";break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e="vn";break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e="kr";break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e="kh";break;case e.indexOf("id")>=0:e="id";break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e="jp";break;case e.indexOf("hi")>=0:e="hi";break;case e.indexOf("tr")>=0:e="tr";break;case e.indexOf("pt")>=0:e="pt";break;default:e="en"}return e}getUrlConfig(){const e={operator:In("op",""),funPLay:In("fun","0")=="1",showLog:In("log","0")=="1",loginUrl:In("loginUrl",""),lobbyUrl:In("lobbyUrl",""),fundsUrl:In("fundsUrl",""),livechatUrl:In("livechatUrl",""),token:In("token")||In("s"),lang:this.configureLanguage(),platform:In("p")||(oi.any?"mobile":"web")};return!e.token&&!e.loginUrl&&(e.funPLay=!0),e}getLoginUrl(){return this.urlOptions.loginUrl?`${this.urlOptions.loginUrl}?url=${encodeURIComponent(KU("fun","0"))}`:this.getLobbyUrl()}getLobbyUrl(){return this.urlOptions.lobbyUrl||""}}var vn=Object.freeze({Linear:Object.freeze({None:function(r){return r},In:function(r){return r},Out:function(r){return r},InOut:function(r){return r}}),Quadratic:Object.freeze({In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}}),Cubic:Object.freeze({In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}}),Quartic:Object.freeze({In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}}),Quintic:Object.freeze({In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}}),Sinusoidal:Object.freeze({In:function(r){return 1-Math.sin((1-r)*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.sin(Math.PI*(.5-r)))}}),Exponential:Object.freeze({In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}}),Circular:Object.freeze({In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}}),Elastic:Object.freeze({In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(r){var e=1.70158;return r===1?1:r*r*((e+1)*r-e)},Out:function(r){var e=1.70158;return r===0?0:--r*r*((e+1)*r+e)+1},InOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)}}),Bounce:Object.freeze({In:function(r){return 1-vn.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?vn.Bounce.In(r*2)*.5:vn.Bounce.Out(r*2-1)*.5+.5}}),generatePow:function(r){return r===void 0&&(r=4),r=r<Number.EPSILON?Number.EPSILON:r,r=r>1e4?1e4:r,{In:function(e){return Math.pow(e,r)},Out:function(e){return 1-Math.pow(1-e,r)},InOut:function(e){return e<.5?Math.pow(e*2,r)/2:(1-Math.pow(2-e*2,r))/2+.5}}}}),dc=function(){return performance.now()},Fk=function(){function r(){this._tweens={},this._tweensAddedDuringUpdate={}}return r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},r.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},r.prototype.update=function(e,t){e===void 0&&(e=dc()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var s=this._tweens[n[i]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},r}(),lu={Linear:function(r,e){var t=r.length-1,n=t*e,i=Math.floor(n),s=lu.Utils.Linear;return e<0?s(r[0],r[1],n):e>1?s(r[t],r[t-1],t-n):s(r[i],r[i+1>t?t:i+1],n-i)},Bezier:function(r,e){for(var t=0,n=r.length-1,i=Math.pow,s=lu.Utils.Bernstein,o=0;o<=n;o++)t+=i(1-e,n-o)*i(e,o)*r[o]*s(n,o);return t},CatmullRom:function(r,e){var t=r.length-1,n=t*e,i=Math.floor(n),s=lu.Utils.CatmullRom;return r[0]===r[t]?(e<0&&(i=Math.floor(n=t*(1+e))),s(r[(i-1+t)%t],r[i],r[(i+1)%t],r[(i+2)%t],n-i)):e<0?r[0]-(s(r[0],r[0],r[1],r[1],-n)-r[0]):e>1?r[t]-(s(r[t],r[t],r[t-1],r[t-1],n-t)-r[t]):s(r[i?i-1:0],r[i],r[t<i+1?t:i+1],r[t<i+2?t:i+2],n-i)},Utils:{Linear:function(r,e,t){return(e-r)*t+r},Bernstein:function(r,e){var t=lu.Utils.Factorial;return t(r)/t(e)/t(r-e)},Factorial:function(){var r=[1];return function(e){var t=1;if(r[e])return r[e];for(var n=e;n>1;n--)t*=n;return r[e]=t,t}}(),CatmullRom:function(r,e,t,n,i){var s=(t-r)*.5,o=(n-e)*.5,a=i*i,u=i*a;return(2*e-2*t+s+o)*u+(-3*e+3*t-2*s-o)*a+s*i+e}}},ZU=function(){function r(){}return r.nextId=function(){return r._nextId++},r._nextId=0,r}(),nx=new Fk,V_=function(){function r(e,t){t===void 0&&(t=nx),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=vn.Linear.None,this._interpolationFunction=lu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=ZU.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return r.prototype.getId=function(){return this._id},r.prototype.isPlaying=function(){return this._isPlaying},r.prototype.isPaused=function(){return this._isPaused},r.prototype.getDuration=function(){return this._duration},r.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},r.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},r.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},r.prototype.start=function(e,t){if(e===void 0&&(e=dc()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},r.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},r.prototype._setupProperties=function(e,t,n,i,s){for(var o in n){var a=e[o],u=Array.isArray(a),l=u?"array":typeof a,c=!u&&Array.isArray(n[o]);if(!(l==="undefined"||l==="function")){if(c){var h=n[o];if(h.length===0)continue;for(var d=[a],p=0,g=h.length;p<g;p+=1){var v=this._handleRelativeValue(a,h[p]);if(isNaN(v)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(v)}c&&(n[o]=d)}if((l==="object"||u)&&a&&!c){t[o]=u?[]:{};var x=a;for(var y in x)t[o][y]=x[y];i[o]=u?[]:{};var h=n[o];if(!this._isDynamic){var b={};for(var y in h)b[y]=h[y];n[o]=h=b}this._setupProperties(x,t[o],h,i[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),u||(t[o]*=1),c?i[o]=n[o].slice().reverse():i[o]=t[o]||0}}},r.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},r.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},r.prototype.pause=function(e){return e===void 0&&(e=dc()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},r.prototype.resume=function(e){return e===void 0&&(e=dc()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},r.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},r.prototype.group=function(e){return e===void 0&&(e=nx),this._group=e,this},r.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},r.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},r.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},r.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},r.prototype.easing=function(e){return e===void 0&&(e=vn.Linear.None),this._easingFunction=e,this},r.prototype.interpolation=function(e){return e===void 0&&(e=lu.Linear),this._interpolationFunction=e,this},r.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},r.prototype.onStart=function(e){return this._onStartCallback=e,this},r.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},r.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},r.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},r.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},r.prototype.onStop=function(e){return this._onStopCallback=e,this},r.prototype.update=function(e,t){var n;if(e===void 0&&(e=dc()),t===void 0&&(t=!0),this._isPaused)return!0;var i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,o=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),a=this._duration+this._repeat*o,u=this._calculateElapsedPortion(s,o,a),l=this._easingFunction(u),c=this._calculateCompletionStatus(s,o);if(c==="repeat"&&this._processRepetition(s,o),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,l),c==="about-to-repeat"&&this._processRepetition(s,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),c==="repeat"||c==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(c==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var h=0,d=this._chainedTweens.length;h<d;h++)this._chainedTweens[h].start(this._startTime+this._duration,!1)}return c!=="completed"},r.prototype._calculateElapsedPortion=function(e,t,n){if(this._duration===0||e>n)return 1;var i=e%t,s=Math.min(i/this._duration,1);return s===0&&e!==0&&e%this._duration===0?1:s},r.prototype._calculateCompletionStatus=function(e,t){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},r.prototype._processRepetition=function(e,t){var n=Math.min(Math.trunc((e-this._duration)/t)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=n);for(var i in this._valuesStartRepeat){var s=this._valuesEnd[i];!this._yoyo&&typeof s=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(s)),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=t*n},r.prototype._updateProperties=function(e,t,n,i){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,a=n[s],u=Array.isArray(e[s]),l=Array.isArray(a),c=!u&&l;c?e[s]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(e[s],o,a,i):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*i))}},r.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},r.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},r}(),Ls=nx;Ls.getAll.bind(Ls);Ls.removeAll.bind(Ls);Ls.add.bind(Ls);var Dk=Ls.remove.bind(Ls),JU=Ls.update.bind(Ls);class ej extends QU{constructor(){super();C(this,"_time",0);C(this,"_turboTime",0);C(this,"turboTicker",new Ut);C(this,"turboTweenGroup",new Fk);this.turboTicker.autoStart=!1}deltaTime(t){this._time+=t}deltaTurboTime(t){this._turboTime+=t}getTime(t){return t?this._turboTime:this._time}}class tj extends ej{constructor(){super(...arguments);C(this,"eventEmitter",new wN.EventEmitter)}get notice(){return this.eventEmitter}}class rj extends tj{constructor(){super(...arguments);C(this,"_viewport");C(this,"_orientation")}get viewport(){return this._viewport}get orientation(){return this._orientation}updateViewport(t,n,i,s){this._viewport=[t,n,i,s]}updateOrientation(){this._orientation=this.getOrientationType()}get isLandscapeOnly(){const t=this.configOptions.layoutMap;return t.l&&!t.p}get isPortraitOnly(){const t=this.configOptions.layoutMap;return t.p&&!t.l}getOrientationType(){const t=this.configOptions.layoutMap;return t.p&&t.l?document.documentElement.clientHeight/document.documentElement.clientWidth>1/.767?"p":"l":t.p?"p":"l"}get layoutOptions(){return this.configOptions.layoutMap[this._orientation]}}class nj extends rj{constructor(){super(...arguments);C(this,"_isSupportAvif",!1);C(this,"_isSupportWebp",!1)}get isSupportWebp(){return this._isSupportWebp}get isSupportAvif(){return this._isSupportAvif}setSupportImagesFormat(t,n){this._isSupportAvif=n,this._isSupportWebp=t}filterImageFormat(t){return this.isSupportAvif||t.splice(t.indexOf("avif"),1),this.isSupportWebp||t.splice(t.indexOf("webp"),1),t[0]}}class ij extends nj{constructor(){super();C(this,"isTablet");C(this,"isMobile");this.isMobile=fe.mobile(),this.isTablet=fe.tablet()}}class sj extends ij{constructor(){super(...arguments);C(this,"_serverTimeMillisecond",0);C(this,"_timer")}setServerTime(t){this._serverTimeMillisecond=t*1e3,this._timer=new Date}getServerTimeMillisecond(){return this._serverTimeMillisecond}getServerTimeMillisecondNow(){const n=new Date().getTime()-this._timer.getTime();return this._serverTimeMillisecond+n}}const lg=class lg extends sj{static get Obj(){return this._Obj||(this._Obj=new lg),this._Obj}};C(lg,"_Obj");let Oe=lg;const oj="action_sign_in",Uk="action_get_player_info",jk="action_balance_change",Xk="action_sound_open",aj="action_volume_changed",Hk="action_menu_open",zk="action_paytable_open",lj="action_betpanel_open",uj="action_auto_panel_open",$k="action_orientation_changed",hj="action_force_update",Yk="action_history_list_open",Gk="action_history_detail_open",Wk="action_error_detail",Vk="action_spin",qk="action_loaded",Kk="action_loaded_error",Qk="action_spin_stopping",Zk="action_spin_stop",Jk="action_set_bet_amount",eI="action_set_bet_level",tI="action_set_auto_spin_detail",cj="action_do_auto_spin",rI="action_stop_auto_spin",nI="action_set_spin_speed",iI="action_linebets_loaded",dj="action_scene_push",fj="action_scene_pop",sI="action_scene_replace",pj="action_scene_to_root",oI="action_assets_loading",mj=(r={},e)=>{switch(e.type){case Xk:return{...r,soundOn:e.value};case aj:return{...r};case Hk:return{...r,menuOn:e.value};case zk:return{...r,payTableOn:e.value};case lj:return{...r,betPanelOn:e.value};case uj:return{...r,autoSpinPanelOn:e.value};case $k:return{...r,orientation:e.value};case hj:return{...r,forceUpdate:!r.forceUpdate};case Yk:return{...r,historyListOn:e.value};case Gk:return{...r,historyDetail:{...e.value}};case Wk:return{...r,error:{...e.value}};default:return r}},gj={setting:{volume:.5,menuOn:!1,payTableOn:!1,betPanelOn:!1,autoSpinPanelOn:!1,orientation:"l",forceUpdate:!1,historyListOn:!1,historyDetail:{on:!1,data:null,index:0},error:{code:0,show:!1,allowClose:!0}}};function aI(r){return{type:Xk,value:r}}function lI(r){return{type:Hk,value:r}}function uI(r){return{type:zk,value:r}}function vj(r){return{type:$k,value:r}}function hI(r){return{type:Yk,value:r}}function cI(r,e=[],t=0){return{type:Gk,value:{on:r,data:e,index:t}}}function Jr(r,e=!1,t=!0){return{type:Wk,value:{code:r,show:e,allowClose:t}}}const oy="authorization",yj="https://dev-crescendo-real.gpistudios.com",xj="https://dev-crescendo-slot-api.gpistudios.com";class _j{constructor(){C(this,"context",Oe.Obj);C(this,"authorization",sessionStorage.getItem(oy));C(this,"canReAuth",!!this.authorization);C(this,"_dispatch")}get domain(){return this.context.urlOptions.funPLay?xj:yj}setDispatch(e){this._dispatch=e}authAndCanReTry(){this.authorization="",sessionStorage.setItem(oy,"");const e=this.canReAuth;return this.canReAuth=!1,e}request(e,t="GET",n="json",i=null){const s=this.authorization?{Authorization:`${this.authorization}`}:{};return navigator.onLine==!1?(this._dispatch(Jr("000")),Promise.reject()):new Promise((o,a)=>{const u=new AbortController,l=setTimeout(()=>{clearTimeout(l),u.abort(),this._dispatch(Jr("001"))},15e3);fetch(e,{method:t,headers:s,signal:u.signal}).then(c=>{clearTimeout(l),c.status==200?c[n]().then(d=>{if(i){const p=new i(d);p.code&&this._dispatch(Jr(p.code)),o(p)}else o(d)}).catch(()=>{this._dispatch(Jr("000")),a()}):(this._dispatch(Jr(c.status)),o({code:c.status}))}).catch(c=>{clearTimeout(l),c.name!="AbortError"&&this._dispatch(Jr("000")),a()})})}auth(){const{operator:e,token:t}=this.context.urlOptions,n=t||Math.random().toFixed(8),i=`${this.domain}/auth/${e}/${n}`;return!t&&this.authorization?Promise.resolve(this.authorization):this.request(i,"GET","text").then(s=>{tL(s)&&(s=`Bearer ${s}`,this.authorization=s,sessionStorage.setItem(oy,s))})}player(){const e=Ys("player"),t=`${this.domain}/s/player`;return this.request(t,"GET","json",e)}meta(){const e=Ys("meta"),t=this.context.configOptions.id,n=`${this.domain}/s/meta/${t}`;return this.request(n,"GET","json",e)}spin(e){const t=Ys("spin"),n=this.context.configOptions.id,i=`${this.domain}/s/spin/${n}?lineBet=${e}`;return this.request(i,"GET","json",t)}spin2(e,t){const n=Ys("spin"),i=this.context.configOptions.id,s=`${this.domain}/s/spin/${i}?lineBet=${e}&level=${t}`;return this.request(s,"GET","json",n)}load(){const e=Ys("load"),t=this.context.configOptions.id,n=`${this.domain}/s/load/${t}`;return this.request(n,"GET","json",e)}start(e){const t=Ys("start"),n=this.context.configOptions.id,i=`${this.domain}/s/start/${n}/${e}`;return this.request(i,"GET","json",t)}continue(){const e=Ys("continue"),t=this.context.configOptions.id,n=`${this.domain}/s/cont/${t}`;return this.request(n,"GET","json",e)}history(e,t,n,i,s){const o=Ys("history"),a=this.context.configOptions.id,u=`${this.domain}/s/list/${a}/${e}/${t}/${n}/${i}/${s}`;return this.request(u,"GET","json",o)}lineBets(){const e=Ys("lineBets"),t=this.context.configOptions.id,n=`${this.domain}/s/lineBets/${t}`;return this.request(n,"GET","json",e)}}function wj(){const{dispatch:r}=L.useContext(gt);return L.useEffect(()=>{mg().setDispatch(r)},[]),E.jsx(E.Fragment,{})}function Du(r,e){const t=r.toString();return new Array(e-t.length+1).join("0")+t}function bj(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Sj(r){return r%4==0&&r%100!=0||r%400==0}function Tj(r){return r==gn.Chinese?"MMdd hh:mm:ss":"dd/MM hh:mm:ss"}function dI(r,e,t,n=gn.English){r instanceof Date||(r=new Date(r));const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=["1","2","3","4","5","6","7","8","9","10","11","12"],o=r.getUTCFullYear(),a=r.getUTCMonth(),u=r.getUTCDate(),l=r.getUTCHours();let c=o,h=a,d=u,p=l+e;if(p>=24){p-=24,d++;const y=Sj(c)?29:28;d>[31,y,31,30,31,30,31,31,30,31,30,31][h]&&(d=1,h++,h==12&&(h=0,c++))}h=(n==gn.Chinese?s:i)[h],d=Du(d,2)+(n==gn.Chinese?"":"");const v=Du(r.getMinutes(),2),x=Du(r.getSeconds(),2);return t.replace("dd",d).replace("MM",h).replace("yyyy",`${c}`).replace("hh",p).replace("mm",v).replace("ss",x)}function Ej(r,e,t){const n=new Date(t);let i=n.getUTCHours()+r;i>=24&&(i=i-24);const s=n.getUTCMinutes(),o=n.getSeconds(),a=Du(i,2)+":"+Du(s,2);return e?a+" (+"+r+")":a+":"+Du(o,2)+" (GMT+"+r+")"}function fI(r,e){return r*=1e3,dI(new Date(r),8,Tj(e),e)}class Cj{constructor(e){C(this,"list",[]);const t=Oe.Obj.urlOptions.lang;this.list=e||[],this.list.forEach(n=>{n.createdOnFormat=fI(n.createdOn,t)})}}class wd{constructor(e){C(this,"data");C(this,"code");C(this,"message");this.data=e;const t=e.result||e;t.code&&(this.code=t.code,this.message=t.message)}static Init(e,t){return new wd({code:e,message:t})}}let Pj=class extends wd{constructor(t){super(t);C(this,"gameId");C(this,"currency");C(this,"lineBets");this.gameId=t.gameId,this.currency=t.currency,this.lineBets=t.lineBets}};class Aj extends Pj{}class kj extends wd{constructor(t){super(t);C(this,"isFromLoad",!1);C(this,"credit");C(this,"cost");C(this,"payout");C(this,"balance");C(this,"createdOn");!this.code&&(this.createdOn=t.createdOn,this.credit=new rt(t.credit||0),this.cost=new rt(t.cost||0),this.payout=new rt(t.payout||0),this.balance=new rt(t.balance||0))}}class q_ extends kj{constructor(t){super(t);C(this,"g");C(this,"level");C(this,"lineBet");C(this,"ss");C(this,"map");C(this,"collapse");C(this,"tm");C(this,"winLines");if(this.code)return;const n=t.result;if(this.ss=n.ss,this.map=n.map,this.collapse=n.collapse,this.lineBet=new rt(n.lineBet||0),n.win){this.tm=new rt(n.win.tm);const i=[];for(const s of n.win.details)for(const o of s.cls)i.push({cls:{c:o.c,m:o.m},s:s.s});this.winLines=i}else this.tm=new rt(0),this.winLines=[]}get existWin(){return this.tm.gt(0)}getWinType(t){const n=t.div(this.lineBet.mul(10));return n.greaterThanOrEqualTo(38)?"big":n.greaterThanOrEqualTo(26)?"high":n.greaterThanOrEqualTo(17)?"medium":n.greaterThanOrEqualTo(6)?"normal":"small"}}class Ij extends q_{constructor(){super(...arguments);C(this,"isFromLoad",!0)}}class Mj extends wd{constructor(t){super(t);C(this,"name");C(this,"test");C(this,"currency");C(this,"balance");C(this,"st");!this.code&&(this.name=t.name,this.test=t.test,this.currency=t.currency,this.balance=new rt(t.balance),this.st=t.st)}}hL(_j);pd("spin",q_);pd("load",Ij);pd("player",Mj);pd("lineBets",Aj);pd("history",Cj);var pI={exports:{}};(function(r){(function(){function e(v,x){document.addEventListener?v.addEventListener("scroll",x,!1):v.attachEvent("scroll",x)}function t(v){document.body?v():document.addEventListener?document.addEventListener("DOMContentLoaded",function x(){document.removeEventListener("DOMContentLoaded",x),v()}):document.attachEvent("onreadystatechange",function x(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",x),v())})}function n(v){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(v)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(v,x){v.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+x+";"}function s(v){var x=v.g.offsetWidth,y=x+100;return v.j.style.width=y+"px",v.i.scrollLeft=y,v.h.scrollLeft=v.h.scrollWidth+100,v.l!==x?(v.l=x,!0):!1}function o(v,x){function y(){var _=b;s(_)&&_.g.parentNode!==null&&x(_.l)}var b=v;e(v.h,y),e(v.i,y),s(v)}function a(v,x,y){x=x||{},y=y||window,this.family=v,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal",this.context=y}var u=null,l=null,c=null,h=null;function d(v){return l===null&&(p(v)&&/Apple/.test(window.navigator.vendor)?(v=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!v&&603>parseInt(v[1],10)):l=!1),l}function p(v){return h===null&&(h=!!v.document.fonts),h}function g(v,x){var y=v.style,b=v.weight;if(c===null){var _=document.createElement("div");try{_.style.font="condensed 100px sans-serif"}catch{}c=_.style.font!==""}return[y,b,c?v.stretch:"","100px",x].join(" ")}a.prototype.load=function(v,x){var y=this,b=v||"BESbswy",_=0,S=x||3e3,I=new Date().getTime();return new Promise(function(A,k){if(p(y.context)&&!d(y.context)){var M=new Promise(function(F,U){function X(){new Date().getTime()-I>=S?U(Error(""+S+"ms timeout exceeded")):y.context.document.fonts.load(g(y,'"'+y.family+'"'),b).then(function(B){1<=B.length?F():setTimeout(X,25)},U)}X()}),O=new Promise(function(F,U){_=setTimeout(function(){U(Error(""+S+"ms timeout exceeded"))},S)});Promise.race([O,M]).then(function(){clearTimeout(_),A(y)},k)}else t(function(){function F(){var Z;(Z=j!=-1&&W!=-1||j!=-1&&Q!=-1||W!=-1&&Q!=-1)&&((Z=j!=W&&j!=Q&&W!=Q)||(u===null&&(Z=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!Z&&(536>parseInt(Z[1],10)||parseInt(Z[1],10)===536&&11>=parseInt(Z[2],10))),Z=u&&(j==H&&W==H&&Q==H||j==G&&W==G&&Q==G||j==z&&W==z&&Q==z)),Z=!Z),Z&&(V.parentNode!==null&&V.parentNode.removeChild(V),clearTimeout(_),A(y))}function U(){if(new Date().getTime()-I>=S)V.parentNode!==null&&V.parentNode.removeChild(V),k(Error(""+S+"ms timeout exceeded"));else{var Z=y.context.document.hidden;(Z===!0||Z===void 0)&&(j=X.g.offsetWidth,W=B.g.offsetWidth,Q=N.g.offsetWidth,F()),_=setTimeout(U,50)}}var X=new n(b),B=new n(b),N=new n(b),j=-1,W=-1,Q=-1,H=-1,G=-1,z=-1,V=document.createElement("div");V.dir="ltr",i(X,g(y,"sans-serif")),i(B,g(y,"serif")),i(N,g(y,"monospace")),V.appendChild(X.g),V.appendChild(B.g),V.appendChild(N.g),y.context.document.body.appendChild(V),H=X.g.offsetWidth,G=B.g.offsetWidth,z=N.g.offsetWidth,U(),o(X,function(Z){j=Z,F()}),i(X,g(y,'"'+y.family+'",sans-serif')),o(B,function(Z){W=Z,F()}),i(B,g(y,'"'+y.family+'",serif')),o(N,function(Z){Q=Z,F()}),i(N,g(y,'"'+y.family+'",monospace'))})})},r.exports=a})()})(pI);var Rj=pI.exports;const Oj=dd(Rj);var mI={exports:{}},$n={},gI={exports:{}},vI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(H,G){var z=H.length;H.push(G);e:for(;0<z;){var V=z-1>>>1,Z=H[V];if(0<i(Z,G))H[V]=G,H[z]=Z,z=V;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var G=H[0],z=H.pop();if(z!==G){H[0]=z;e:for(var V=0,Z=H.length,re=Z>>>1;V<re;){var he=2*(V+1)-1,ve=H[he],Me=he+1,Ne=H[Me];if(0>i(ve,z))Me<Z&&0>i(Ne,ve)?(H[V]=Ne,H[Me]=z,V=Me):(H[V]=ve,H[he]=z,V=he);else if(Me<Z&&0>i(Ne,z))H[V]=Ne,H[Me]=z,V=Me;else break e}}return G}function i(H,G){var z=H.sortIndex-G.sortIndex;return z!==0?z:H.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,h=null,d=3,p=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var G=t(l);G!==null;){if(G.callback===null)n(l);else if(G.startTime<=H)n(l),G.sortIndex=G.expirationTime,e(u,G);else break;G=t(l)}}function S(H){if(v=!1,_(H),!g)if(t(u)!==null)g=!0,W(I);else{var G=t(l);G!==null&&Q(S,G.startTime-H)}}function I(H,G){g=!1,v&&(v=!1,y(M),M=-1),p=!0;var z=d;try{for(_(G),h=t(u);h!==null&&(!(h.expirationTime>G)||H&&!U());){var V=h.callback;if(typeof V=="function"){h.callback=null,d=h.priorityLevel;var Z=V(h.expirationTime<=G);G=r.unstable_now(),typeof Z=="function"?h.callback=Z:h===t(u)&&n(u),_(G)}else n(u);h=t(u)}if(h!==null)var re=!0;else{var he=t(l);he!==null&&Q(S,he.startTime-G),re=!1}return re}finally{h=null,d=z,p=!1}}var A=!1,k=null,M=-1,O=5,F=-1;function U(){return!(r.unstable_now()-F<O)}function X(){if(k!==null){var H=r.unstable_now();F=H;var G=!0;try{G=k(!0,H)}finally{G?B():(A=!1,k=null)}}else A=!1}var B;if(typeof b=="function")B=function(){b(X)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=X,B=function(){j.postMessage(null)}}else B=function(){x(X,0)};function W(H){k=H,A||(A=!0,B())}function Q(H,G){M=x(function(){H(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,W(I))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(H){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var z=d;d=G;try{return H()}finally{d=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var z=d;d=H;try{return G()}finally{d=z}},r.unstable_scheduleCallback=function(H,G,z){var V=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?V+z:V):z=V,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,H={id:c++,callback:G,priorityLevel:H,startTime:z,expirationTime:Z,sortIndex:-1},z>V?(H.sortIndex=z,e(l,H),t(u)===null&&H===t(l)&&(v?(y(M),M=-1):v=!0,Q(S,z-V))):(H.sortIndex=Z,e(u,H),g||p||(g=!0,W(I))),H},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(H){var G=d;return function(){var z=d;d=G;try{return H.apply(this,arguments)}finally{d=z}}}})(vI);gI.exports=vI;var Bj=gI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lj=L,Xn=Bj;function le(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yI=new Set,$c={};function bl(r,e){th(r,e),th(r+"Capture",e)}function th(r,e){for($c[r]=e,r=0;r<e.length;r++)yI.add(e[r])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ix=Object.prototype.hasOwnProperty,Nj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sC={},oC={};function Fj(r){return ix.call(oC,r)?!0:ix.call(sC,r)?!1:Nj.test(r)?oC[r]=!0:(sC[r]=!0,!1)}function Dj(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function Uj(r,e,t,n){if(e===null||typeof e>"u"||Dj(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(r,e,t,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Br={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Br[r]=new nn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Br[e]=new nn(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Br[r]=new nn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Br[r]=new nn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Br[r]=new nn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Br[r]=new nn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Br[r]=new nn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Br[r]=new nn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Br[r]=new nn(r,5,!1,r.toLowerCase(),null,!1,!1)});var K_=/[\-:]([a-z])/g;function Q_(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(K_,Q_);Br[e]=new nn(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(K_,Q_);Br[e]=new nn(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(K_,Q_);Br[e]=new nn(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Br[r]=new nn(r,1,!1,r.toLowerCase(),null,!1,!1)});Br.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Br[r]=new nn(r,1,!1,r.toLowerCase(),null,!0,!0)});function Z_(r,e,t,n){var i=Br.hasOwnProperty(e)?Br[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uj(e,t,i,n)&&(t=null),n||i===null?Fj(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var To=Lj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zf=Symbol.for("react.element"),uu=Symbol.for("react.portal"),hu=Symbol.for("react.fragment"),J_=Symbol.for("react.strict_mode"),sx=Symbol.for("react.profiler"),xI=Symbol.for("react.provider"),_I=Symbol.for("react.context"),ew=Symbol.for("react.forward_ref"),ox=Symbol.for("react.suspense"),ax=Symbol.for("react.suspense_list"),tw=Symbol.for("react.memo"),Go=Symbol.for("react.lazy"),wI=Symbol.for("react.offscreen"),aC=Symbol.iterator;function Qh(r){return r===null||typeof r!="object"?null:(r=aC&&r[aC]||r["@@iterator"],typeof r=="function"?r:null)}var Ht=Object.assign,ay;function fc(r){if(ay===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);ay=e&&e[1]||""}return`
`+ay+r}var ly=!1;function uy(r,e){if(!r||ly)return"";ly=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(r,[],e)}else{try{e.call()}catch(l){n=l}r.call(e.prototype)}else{try{throw Error()}catch(l){n=l}r()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return r.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",r.displayName)),u}while(1<=o&&0<=a);break}}}finally{ly=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?fc(r):""}function jj(r){switch(r.tag){case 5:return fc(r.type);case 16:return fc("Lazy");case 13:return fc("Suspense");case 19:return fc("SuspenseList");case 0:case 2:case 15:return r=uy(r.type,!1),r;case 11:return r=uy(r.type.render,!1),r;case 1:return r=uy(r.type,!0),r;default:return""}}function lx(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case hu:return"Fragment";case uu:return"Portal";case sx:return"Profiler";case J_:return"StrictMode";case ox:return"Suspense";case ax:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case _I:return(r.displayName||"Context")+".Consumer";case xI:return(r._context.displayName||"Context")+".Provider";case ew:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case tw:return e=r.displayName||null,e!==null?e:lx(r.type)||"Memo";case Go:e=r._payload,r=r._init;try{return lx(r(e))}catch{}}return null}function Xj(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lx(e);case 8:return e===J_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xa(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function bI(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Hj(r){var e=bI(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function Jf(r){r._valueTracker||(r._valueTracker=Hj(r))}function SI(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=bI(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Em(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ux(r,e){var t=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function lC(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=xa(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TI(r,e){e=e.checked,e!=null&&Z_(r,"checked",e,!1)}function hx(r,e){TI(r,e);var t=xa(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?cx(r,e.type,t):e.hasOwnProperty("defaultValue")&&cx(r,e.type,xa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function uC(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function cx(r,e,t){(e!=="number"||Em(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var pc=Array.isArray;function Uu(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+xa(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function dx(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function hC(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(le(92));if(pc(t)){if(1<t.length)throw Error(le(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:xa(t)}}function EI(r,e){var t=xa(e.value),n=xa(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function cC(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function CI(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fx(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?CI(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ep,PI=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(ep=ep||document.createElement("div"),ep.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ep.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Yc(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zj=["Webkit","ms","Moz","O"];Object.keys(Sc).forEach(function(r){zj.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Sc[e]=Sc[r]})});function AI(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Sc.hasOwnProperty(r)&&Sc[r]?(""+e).trim():e+"px"}function kI(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=AI(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var $j=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function px(r,e){if(e){if($j[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function mx(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gx=null;function rw(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var vx=null,ju=null,Xu=null;function dC(r){if(r=Td(r)){if(typeof vx!="function")throw Error(le(280));var e=r.stateNode;e&&(e=Fg(e),vx(r.stateNode,r.type,e))}}function II(r){ju?Xu?Xu.push(r):Xu=[r]:ju=r}function MI(){if(ju){var r=ju,e=Xu;if(Xu=ju=null,dC(r),e)for(r=0;r<e.length;r++)dC(e[r])}}function RI(r,e){return r(e)}function OI(){}var hy=!1;function BI(r,e,t){if(hy)return r(e,t);hy=!0;try{return RI(r,e,t)}finally{hy=!1,(ju!==null||Xu!==null)&&(OI(),MI())}}function Gc(r,e){var t=r.stateNode;if(t===null)return null;var n=Fg(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(le(231,e,typeof t));return t}var yx=!1;if(yo)try{var Zh={};Object.defineProperty(Zh,"passive",{get:function(){yx=!0}}),window.addEventListener("test",Zh,Zh),window.removeEventListener("test",Zh,Zh)}catch{yx=!1}function Yj(r,e,t,n,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(t,l)}catch(c){this.onError(c)}}var Tc=!1,Cm=null,Pm=!1,xx=null,Gj={onError:function(r){Tc=!0,Cm=r}};function Wj(r,e,t,n,i,s,o,a,u){Tc=!1,Cm=null,Yj.apply(Gj,arguments)}function Vj(r,e,t,n,i,s,o,a,u){if(Wj.apply(this,arguments),Tc){if(Tc){var l=Cm;Tc=!1,Cm=null}else throw Error(le(198));Pm||(Pm=!0,xx=l)}}function Sl(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function LI(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function fC(r){if(Sl(r)!==r)throw Error(le(188))}function qj(r){var e=r.alternate;if(!e){if(e=Sl(r),e===null)throw Error(le(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return fC(i),r;if(s===n)return fC(i),e;s=s.sibling}throw Error(le(188))}if(t.return!==n.return)t=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,n=s;break}if(a===n){o=!0,n=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,n=i;break}if(a===n){o=!0,n=s,t=i;break}a=a.sibling}if(!o)throw Error(le(189))}}if(t.alternate!==n)throw Error(le(190))}if(t.tag!==3)throw Error(le(188));return t.stateNode.current===t?r:e}function NI(r){return r=qj(r),r!==null?FI(r):null}function FI(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=FI(r);if(e!==null)return e;r=r.sibling}return null}var DI=Xn.unstable_scheduleCallback,pC=Xn.unstable_cancelCallback,Kj=Xn.unstable_shouldYield,Qj=Xn.unstable_requestPaint,Qt=Xn.unstable_now,Zj=Xn.unstable_getCurrentPriorityLevel,nw=Xn.unstable_ImmediatePriority,UI=Xn.unstable_UserBlockingPriority,Am=Xn.unstable_NormalPriority,Jj=Xn.unstable_LowPriority,jI=Xn.unstable_IdlePriority,Og=null,ks=null;function eX(r){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(Og,r,void 0,(r.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:nX,tX=Math.log,rX=Math.LN2;function nX(r){return r>>>=0,r===0?32:31-(tX(r)/rX|0)|0}var tp=64,rp=4194304;function mc(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function km(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?n=mc(a):(s&=o,s!==0&&(n=mc(s)))}else o=t&~i,o!==0?n=mc(o):s!==0&&(n=mc(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-ji(e),i=1<<t,n|=r[t],e&=~i;return n}function iX(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sX(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var o=31-ji(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&n)&&(i[o]=iX(a,e)):u<=e&&(r.expiredLanes|=a),s&=~a}}function _x(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function XI(){var r=tp;return tp<<=1,!(tp&4194240)&&(tp=64),r}function cy(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function bd(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-ji(e),r[e]=t}function oX(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-ji(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function iw(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-ji(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var ft=0;function HI(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var zI,sw,$I,YI,GI,wx=!1,np=[],aa=null,la=null,ua=null,Wc=new Map,Vc=new Map,Qo=[],aX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mC(r,e){switch(r){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ua=null;break;case"pointerover":case"pointerout":Wc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(e.pointerId)}}function Jh(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Td(e),e!==null&&sw(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function lX(r,e,t,n,i){switch(e){case"focusin":return aa=Jh(aa,r,e,t,n,i),!0;case"dragenter":return la=Jh(la,r,e,t,n,i),!0;case"mouseover":return ua=Jh(ua,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return Wc.set(s,Jh(Wc.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Vc.set(s,Jh(Vc.get(s)||null,r,e,t,n,i)),!0}return!1}function WI(r){var e=Ka(r.target);if(e!==null){var t=Sl(e);if(t!==null){if(e=t.tag,e===13){if(e=LI(t),e!==null){r.blockedOn=e,GI(r.priority,function(){$I(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function $p(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=bx(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);gx=n,t.target.dispatchEvent(n),gx=null}else return e=Td(t),e!==null&&sw(e),r.blockedOn=t,!1;e.shift()}return!0}function gC(r,e,t){$p(r)&&t.delete(e)}function uX(){wx=!1,aa!==null&&$p(aa)&&(aa=null),la!==null&&$p(la)&&(la=null),ua!==null&&$p(ua)&&(ua=null),Wc.forEach(gC),Vc.forEach(gC)}function ec(r,e){r.blockedOn===e&&(r.blockedOn=null,wx||(wx=!0,Xn.unstable_scheduleCallback(Xn.unstable_NormalPriority,uX)))}function qc(r){function e(i){return ec(i,r)}if(0<np.length){ec(np[0],r);for(var t=1;t<np.length;t++){var n=np[t];n.blockedOn===r&&(n.blockedOn=null)}}for(aa!==null&&ec(aa,r),la!==null&&ec(la,r),ua!==null&&ec(ua,r),Wc.forEach(e),Vc.forEach(e),t=0;t<Qo.length;t++)n=Qo[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Qo.length&&(t=Qo[0],t.blockedOn===null);)WI(t),t.blockedOn===null&&Qo.shift()}var Hu=To.ReactCurrentBatchConfig,Im=!0;function hX(r,e,t,n){var i=ft,s=Hu.transition;Hu.transition=null;try{ft=1,ow(r,e,t,n)}finally{ft=i,Hu.transition=s}}function cX(r,e,t,n){var i=ft,s=Hu.transition;Hu.transition=null;try{ft=4,ow(r,e,t,n)}finally{ft=i,Hu.transition=s}}function ow(r,e,t,n){if(Im){var i=bx(r,e,t,n);if(i===null)wy(r,e,n,Mm,t),mC(r,n);else if(lX(i,r,e,t,n))n.stopPropagation();else if(mC(r,n),e&4&&-1<aX.indexOf(r)){for(;i!==null;){var s=Td(i);if(s!==null&&zI(s),s=bx(r,e,t,n),s===null&&wy(r,e,n,Mm,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else wy(r,e,n,null,t)}}var Mm=null;function bx(r,e,t,n){if(Mm=null,r=rw(n),r=Ka(r),r!==null)if(e=Sl(r),e===null)r=null;else if(t=e.tag,t===13){if(r=LI(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Mm=r,null}function VI(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zj()){case nw:return 1;case UI:return 4;case Am:case Jj:return 16;case jI:return 536870912;default:return 16}default:return 16}}var na=null,aw=null,Yp=null;function qI(){if(Yp)return Yp;var r,e=aw,t=e.length,n,i="value"in na?na.value:na.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===i[s-n];n++);return Yp=i.slice(r,1<n?1-n:void 0)}function Gp(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function ip(){return!0}function vC(){return!1}function Yn(r){function e(t,n,i,s,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ip:vC,this.isPropagationStopped=vC,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ip)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ip)},persist:function(){},isPersistent:ip}),e}var xh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lw=Yn(xh),Sd=Ht({},xh,{view:0,detail:0}),dX=Yn(Sd),dy,fy,tc,Bg=Ht({},Sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uw,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==tc&&(tc&&r.type==="mousemove"?(dy=r.screenX-tc.screenX,fy=r.screenY-tc.screenY):fy=dy=0,tc=r),dy)},movementY:function(r){return"movementY"in r?r.movementY:fy}}),yC=Yn(Bg),fX=Ht({},Bg,{dataTransfer:0}),pX=Yn(fX),mX=Ht({},Sd,{relatedTarget:0}),py=Yn(mX),gX=Ht({},xh,{animationName:0,elapsedTime:0,pseudoElement:0}),vX=Yn(gX),yX=Ht({},xh,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),xX=Yn(yX),_X=Ht({},xh,{data:0}),xC=Yn(_X),wX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},SX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TX(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=SX[r])?!!e[r]:!1}function uw(){return TX}var EX=Ht({},Sd,{key:function(r){if(r.key){var e=wX[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=Gp(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?bX[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uw,charCode:function(r){return r.type==="keypress"?Gp(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Gp(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),CX=Yn(EX),PX=Ht({},Bg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_C=Yn(PX),AX=Ht({},Sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uw}),kX=Yn(AX),IX=Ht({},xh,{propertyName:0,elapsedTime:0,pseudoElement:0}),MX=Yn(IX),RX=Ht({},Bg,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),OX=Yn(RX),BX=[9,13,27,32],hw=yo&&"CompositionEvent"in window,Ec=null;yo&&"documentMode"in document&&(Ec=document.documentMode);var LX=yo&&"TextEvent"in window&&!Ec,KI=yo&&(!hw||Ec&&8<Ec&&11>=Ec),wC=" ",bC=!1;function QI(r,e){switch(r){case"keyup":return BX.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZI(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var cu=!1;function NX(r,e){switch(r){case"compositionend":return ZI(e);case"keypress":return e.which!==32?null:(bC=!0,wC);case"textInput":return r=e.data,r===wC&&bC?null:r;default:return null}}function FX(r,e){if(cu)return r==="compositionend"||!hw&&QI(r,e)?(r=qI(),Yp=aw=na=null,cu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KI&&e.locale!=="ko"?null:e.data;default:return null}}var DX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SC(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!DX[r.type]:e==="textarea"}function JI(r,e,t,n){II(n),e=Rm(e,"onChange"),0<e.length&&(t=new lw("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Cc=null,Kc=null;function UX(r){hM(r,0)}function Lg(r){var e=pu(r);if(SI(e))return r}function jX(r,e){if(r==="change")return e}var eM=!1;if(yo){var my;if(yo){var gy="oninput"in document;if(!gy){var TC=document.createElement("div");TC.setAttribute("oninput","return;"),gy=typeof TC.oninput=="function"}my=gy}else my=!1;eM=my&&(!document.documentMode||9<document.documentMode)}function EC(){Cc&&(Cc.detachEvent("onpropertychange",tM),Kc=Cc=null)}function tM(r){if(r.propertyName==="value"&&Lg(Kc)){var e=[];JI(e,Kc,r,rw(r)),BI(UX,e)}}function XX(r,e,t){r==="focusin"?(EC(),Cc=e,Kc=t,Cc.attachEvent("onpropertychange",tM)):r==="focusout"&&EC()}function HX(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Lg(Kc)}function zX(r,e){if(r==="click")return Lg(e)}function $X(r,e){if(r==="input"||r==="change")return Lg(e)}function YX(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var zi=typeof Object.is=="function"?Object.is:YX;function Qc(r,e){if(zi(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!ix.call(e,i)||!zi(r[i],e[i]))return!1}return!0}function CC(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function PC(r,e){var t=CC(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=CC(t)}}function rM(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?rM(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function nM(){for(var r=window,e=Em();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Em(r.document)}return e}function cw(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function GX(r){var e=nM(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&rM(t.ownerDocument.documentElement,t)){if(n!==null&&cw(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=PC(t,s);var o=PC(t,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var WX=yo&&"documentMode"in document&&11>=document.documentMode,du=null,Sx=null,Pc=null,Tx=!1;function AC(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Tx||du==null||du!==Em(n)||(n=du,"selectionStart"in n&&cw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Pc&&Qc(Pc,n)||(Pc=n,n=Rm(Sx,"onSelect"),0<n.length&&(e=new lw("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=du)))}function sp(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var fu={animationend:sp("Animation","AnimationEnd"),animationiteration:sp("Animation","AnimationIteration"),animationstart:sp("Animation","AnimationStart"),transitionend:sp("Transition","TransitionEnd")},vy={},iM={};yo&&(iM=document.createElement("div").style,"AnimationEvent"in window||(delete fu.animationend.animation,delete fu.animationiteration.animation,delete fu.animationstart.animation),"TransitionEvent"in window||delete fu.transitionend.transition);function Ng(r){if(vy[r])return vy[r];if(!fu[r])return r;var e=fu[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in iM)return vy[r]=e[t];return r}var sM=Ng("animationend"),oM=Ng("animationiteration"),aM=Ng("animationstart"),lM=Ng("transitionend"),uM=new Map,kC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ta(r,e){uM.set(r,e),bl(e,[r])}for(var yy=0;yy<kC.length;yy++){var xy=kC[yy],VX=xy.toLowerCase(),qX=xy[0].toUpperCase()+xy.slice(1);Ta(VX,"on"+qX)}Ta(sM,"onAnimationEnd");Ta(oM,"onAnimationIteration");Ta(aM,"onAnimationStart");Ta("dblclick","onDoubleClick");Ta("focusin","onFocus");Ta("focusout","onBlur");Ta(lM,"onTransitionEnd");th("onMouseEnter",["mouseout","mouseover"]);th("onMouseLeave",["mouseout","mouseover"]);th("onPointerEnter",["pointerout","pointerover"]);th("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KX=new Set("cancel close invalid load scroll toggle".split(" ").concat(gc));function IC(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,Vj(n,e,void 0,r),r.currentTarget=null}function hM(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;IC(i,a,l),s=u}else for(o=0;o<n.length;o++){if(a=n[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;IC(i,a,l),s=u}}}if(Pm)throw r=xx,Pm=!1,xx=null,r}function Tt(r,e){var t=e[kx];t===void 0&&(t=e[kx]=new Set);var n=r+"__bubble";t.has(n)||(cM(e,r,2,!1),t.add(n))}function _y(r,e,t){var n=0;e&&(n|=4),cM(t,r,n,e)}var op="_reactListening"+Math.random().toString(36).slice(2);function Zc(r){if(!r[op]){r[op]=!0,yI.forEach(function(t){t!=="selectionchange"&&(KX.has(t)||_y(t,!1,r),_y(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[op]||(e[op]=!0,_y("selectionchange",!1,e))}}function cM(r,e,t,n){switch(VI(e)){case 1:var i=hX;break;case 4:i=cX;break;default:i=ow}t=i.bind(null,e,t,r),i=void 0,!yx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function wy(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ka(a),o===null)return;if(u=o.tag,u===5||u===6){n=s=o;continue e}a=a.parentNode}}n=n.return}BI(function(){var l=s,c=rw(t),h=[];e:{var d=uM.get(r);if(d!==void 0){var p=lw,g=r;switch(r){case"keypress":if(Gp(t)===0)break e;case"keydown":case"keyup":p=CX;break;case"focusin":g="focus",p=py;break;case"focusout":g="blur",p=py;break;case"beforeblur":case"afterblur":p=py;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=pX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kX;break;case sM:case oM:case aM:p=vX;break;case lM:p=MX;break;case"scroll":p=dX;break;case"wheel":p=OX;break;case"copy":case"cut":case"paste":p=xX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_C}var v=(e&4)!==0,x=!v&&r==="scroll",y=v?d!==null?d+"Capture":null:d;v=[];for(var b=l,_;b!==null;){_=b;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,y!==null&&(S=Gc(b,y),S!=null&&v.push(Jc(b,S,_)))),x)break;b=b.return}0<v.length&&(d=new p(d,g,null,t,c),h.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",d&&t!==gx&&(g=t.relatedTarget||t.fromElement)&&(Ka(g)||g[xo]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=l,g=g?Ka(g):null,g!==null&&(x=Sl(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=l),p!==g)){if(v=yC,S="onMouseLeave",y="onMouseEnter",b="mouse",(r==="pointerout"||r==="pointerover")&&(v=_C,S="onPointerLeave",y="onPointerEnter",b="pointer"),x=p==null?d:pu(p),_=g==null?d:pu(g),d=new v(S,b+"leave",p,t,c),d.target=x,d.relatedTarget=_,S=null,Ka(c)===l&&(v=new v(y,b+"enter",g,t,c),v.target=_,v.relatedTarget=x,S=v),x=S,p&&g)t:{for(v=p,y=g,b=0,_=v;_;_=Wl(_))b++;for(_=0,S=y;S;S=Wl(S))_++;for(;0<b-_;)v=Wl(v),b--;for(;0<_-b;)y=Wl(y),_--;for(;b--;){if(v===y||y!==null&&v===y.alternate)break t;v=Wl(v),y=Wl(y)}v=null}else v=null;p!==null&&MC(h,d,p,v,!1),g!==null&&x!==null&&MC(h,x,g,v,!0)}}e:{if(d=l?pu(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var I=jX;else if(SC(d))if(eM)I=$X;else{I=HX;var A=XX}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=zX);if(I&&(I=I(r,l))){JI(h,I,t,c);break e}A&&A(r,d,l),r==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&cx(d,"number",d.value)}switch(A=l?pu(l):window,r){case"focusin":(SC(A)||A.contentEditable==="true")&&(du=A,Sx=l,Pc=null);break;case"focusout":Pc=Sx=du=null;break;case"mousedown":Tx=!0;break;case"contextmenu":case"mouseup":case"dragend":Tx=!1,AC(h,t,c);break;case"selectionchange":if(WX)break;case"keydown":case"keyup":AC(h,t,c)}var k;if(hw)e:{switch(r){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else cu?QI(r,t)&&(M="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(KI&&t.locale!=="ko"&&(cu||M!=="onCompositionStart"?M==="onCompositionEnd"&&cu&&(k=qI()):(na=c,aw="value"in na?na.value:na.textContent,cu=!0)),A=Rm(l,M),0<A.length&&(M=new xC(M,r,null,t,c),h.push({event:M,listeners:A}),k?M.data=k:(k=ZI(t),k!==null&&(M.data=k)))),(k=LX?NX(r,t):FX(r,t))&&(l=Rm(l,"onBeforeInput"),0<l.length&&(c=new xC("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:l}),c.data=k))}hM(h,e)})}function Jc(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Rm(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gc(r,t),s!=null&&n.unshift(Jc(r,s,i)),s=Gc(r,e),s!=null&&n.push(Jc(r,s,i))),r=r.return}return n}function Wl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function MC(r,e,t,n,i){for(var s=e._reactName,o=[];t!==null&&t!==n;){var a=t,u=a.alternate,l=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&l!==null&&(a=l,i?(u=Gc(t,s),u!=null&&o.unshift(Jc(t,u,a))):i||(u=Gc(t,s),u!=null&&o.push(Jc(t,u,a)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var QX=/\r\n?/g,ZX=/\u0000|\uFFFD/g;function RC(r){return(typeof r=="string"?r:""+r).replace(QX,`
`).replace(ZX,"")}function ap(r,e,t){if(e=RC(e),RC(r)!==e&&t)throw Error(le(425))}function Om(){}var Ex=null,Cx=null;function Px(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ax=typeof setTimeout=="function"?setTimeout:void 0,JX=typeof clearTimeout=="function"?clearTimeout:void 0,OC=typeof Promise=="function"?Promise:void 0,eH=typeof queueMicrotask=="function"?queueMicrotask:typeof OC<"u"?function(r){return OC.resolve(null).then(r).catch(tH)}:Ax;function tH(r){setTimeout(function(){throw r})}function by(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),qc(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);qc(e)}function ha(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function BC(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var _h=Math.random().toString(36).slice(2),ws="__reactFiber$"+_h,ed="__reactProps$"+_h,xo="__reactContainer$"+_h,kx="__reactEvents$"+_h,rH="__reactListeners$"+_h,nH="__reactHandles$"+_h;function Ka(r){var e=r[ws];if(e)return e;for(var t=r.parentNode;t;){if(e=t[xo]||t[ws]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=BC(r);r!==null;){if(t=r[ws])return t;r=BC(r)}return e}r=t,t=r.parentNode}return null}function Td(r){return r=r[ws]||r[xo],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function pu(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(le(33))}function Fg(r){return r[ed]||null}var Ix=[],mu=-1;function Ea(r){return{current:r}}function Ct(r){0>mu||(r.current=Ix[mu],Ix[mu]=null,mu--)}function wt(r,e){mu++,Ix[mu]=r.current,r.current=e}var _a={},qr=Ea(_a),yn=Ea(!1),cl=_a;function rh(r,e){var t=r.type.contextTypes;if(!t)return _a;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function xn(r){return r=r.childContextTypes,r!=null}function Bm(){Ct(yn),Ct(qr)}function LC(r,e,t){if(qr.current!==_a)throw Error(le(168));wt(qr,e),wt(yn,t)}function dM(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(le(108,Xj(r)||"Unknown",i));return Ht({},t,n)}function Lm(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||_a,cl=qr.current,wt(qr,r),wt(yn,yn.current),!0}function NC(r,e,t){var n=r.stateNode;if(!n)throw Error(le(169));t?(r=dM(r,e,cl),n.__reactInternalMemoizedMergedChildContext=r,Ct(yn),Ct(qr),wt(qr,r)):Ct(yn),wt(yn,t)}var Js=null,Dg=!1,Sy=!1;function fM(r){Js===null?Js=[r]:Js.push(r)}function iH(r){Dg=!0,fM(r)}function Ca(){if(!Sy&&Js!==null){Sy=!0;var r=0,e=ft;try{var t=Js;for(ft=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}Js=null,Dg=!1}catch(i){throw Js!==null&&(Js=Js.slice(r+1)),DI(nw,Ca),i}finally{ft=e,Sy=!1}}return null}var gu=[],vu=0,Nm=null,Fm=0,ni=[],ii=0,dl=null,lo=1,uo="";function Ga(r,e){gu[vu++]=Fm,gu[vu++]=Nm,Nm=r,Fm=e}function pM(r,e,t){ni[ii++]=lo,ni[ii++]=uo,ni[ii++]=dl,dl=r;var n=lo;r=uo;var i=32-ji(n)-1;n&=~(1<<i),t+=1;var s=32-ji(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,lo=1<<32-ji(e)+i|t<<i|n,uo=s+r}else lo=1<<s|t<<i|n,uo=r}function dw(r){r.return!==null&&(Ga(r,1),pM(r,1,0))}function fw(r){for(;r===Nm;)Nm=gu[--vu],gu[vu]=null,Fm=gu[--vu],gu[vu]=null;for(;r===dl;)dl=ni[--ii],ni[ii]=null,uo=ni[--ii],ni[ii]=null,lo=ni[--ii],ni[ii]=null}var Dn=null,Nn=null,Mt=!1,Ii=null;function mM(r,e){var t=li(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function FC(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Dn=r,Nn=ha(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Dn=r,Nn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=dl!==null?{id:lo,overflow:uo}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=li(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Dn=r,Nn=null,!0):!1;default:return!1}}function Mx(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Rx(r){if(Mt){var e=Nn;if(e){var t=e;if(!FC(r,e)){if(Mx(r))throw Error(le(418));e=ha(t.nextSibling);var n=Dn;e&&FC(r,e)?mM(n,t):(r.flags=r.flags&-4097|2,Mt=!1,Dn=r)}}else{if(Mx(r))throw Error(le(418));r.flags=r.flags&-4097|2,Mt=!1,Dn=r}}}function DC(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Dn=r}function lp(r){if(r!==Dn)return!1;if(!Mt)return DC(r),Mt=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!Px(r.type,r.memoizedProps)),e&&(e=Nn)){if(Mx(r))throw gM(),Error(le(418));for(;e;)mM(r,e),e=ha(e.nextSibling)}if(DC(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(le(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){Nn=ha(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}Nn=null}}else Nn=Dn?ha(r.stateNode.nextSibling):null;return!0}function gM(){for(var r=Nn;r;)r=ha(r.nextSibling)}function nh(){Nn=Dn=null,Mt=!1}function pw(r){Ii===null?Ii=[r]:Ii.push(r)}var sH=To.ReactCurrentBatchConfig;function rc(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(le(309));var n=t.stateNode}if(!n)throw Error(le(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof r!="string")throw Error(le(284));if(!t._owner)throw Error(le(290,r))}return r}function up(r,e){throw r=Object.prototype.toString.call(e),Error(le(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function UC(r){var e=r._init;return e(r._payload)}function vM(r){function e(y,b){if(r){var _=y.deletions;_===null?(y.deletions=[b],y.flags|=16):_.push(b)}}function t(y,b){if(!r)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function n(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=pa(y,b),y.index=0,y.sibling=null,y}function s(y,b,_){return y.index=_,r?(_=y.alternate,_!==null?(_=_.index,_<b?(y.flags|=2,b):_):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return r&&y.alternate===null&&(y.flags|=2),y}function a(y,b,_,S){return b===null||b.tag!==6?(b=Iy(_,y.mode,S),b.return=y,b):(b=i(b,_),b.return=y,b)}function u(y,b,_,S){var I=_.type;return I===hu?c(y,b,_.props.children,S,_.key):b!==null&&(b.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Go&&UC(I)===b.type)?(S=i(b,_.props),S.ref=rc(y,b,_),S.return=y,S):(S=Jp(_.type,_.key,_.props,null,y.mode,S),S.ref=rc(y,b,_),S.return=y,S)}function l(y,b,_,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=My(_,y.mode,S),b.return=y,b):(b=i(b,_.children||[]),b.return=y,b)}function c(y,b,_,S,I){return b===null||b.tag!==7?(b=il(_,y.mode,S,I),b.return=y,b):(b=i(b,_),b.return=y,b)}function h(y,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Iy(""+b,y.mode,_),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Zf:return _=Jp(b.type,b.key,b.props,null,y.mode,_),_.ref=rc(y,null,b),_.return=y,_;case uu:return b=My(b,y.mode,_),b.return=y,b;case Go:var S=b._init;return h(y,S(b._payload),_)}if(pc(b)||Qh(b))return b=il(b,y.mode,_,null),b.return=y,b;up(y,b)}return null}function d(y,b,_,S){var I=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:a(y,b,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zf:return _.key===I?u(y,b,_,S):null;case uu:return _.key===I?l(y,b,_,S):null;case Go:return I=_._init,d(y,b,I(_._payload),S)}if(pc(_)||Qh(_))return I!==null?null:c(y,b,_,S,null);up(y,_)}return null}function p(y,b,_,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(_)||null,a(b,y,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zf:return y=y.get(S.key===null?_:S.key)||null,u(b,y,S,I);case uu:return y=y.get(S.key===null?_:S.key)||null,l(b,y,S,I);case Go:var A=S._init;return p(y,b,_,A(S._payload),I)}if(pc(S)||Qh(S))return y=y.get(_)||null,c(b,y,S,I,null);up(b,S)}return null}function g(y,b,_,S){for(var I=null,A=null,k=b,M=b=0,O=null;k!==null&&M<_.length;M++){k.index>M?(O=k,k=null):O=k.sibling;var F=d(y,k,_[M],S);if(F===null){k===null&&(k=O);break}r&&k&&F.alternate===null&&e(y,k),b=s(F,b,M),A===null?I=F:A.sibling=F,A=F,k=O}if(M===_.length)return t(y,k),Mt&&Ga(y,M),I;if(k===null){for(;M<_.length;M++)k=h(y,_[M],S),k!==null&&(b=s(k,b,M),A===null?I=k:A.sibling=k,A=k);return Mt&&Ga(y,M),I}for(k=n(y,k);M<_.length;M++)O=p(k,y,M,_[M],S),O!==null&&(r&&O.alternate!==null&&k.delete(O.key===null?M:O.key),b=s(O,b,M),A===null?I=O:A.sibling=O,A=O);return r&&k.forEach(function(U){return e(y,U)}),Mt&&Ga(y,M),I}function v(y,b,_,S){var I=Qh(_);if(typeof I!="function")throw Error(le(150));if(_=I.call(_),_==null)throw Error(le(151));for(var A=I=null,k=b,M=b=0,O=null,F=_.next();k!==null&&!F.done;M++,F=_.next()){k.index>M?(O=k,k=null):O=k.sibling;var U=d(y,k,F.value,S);if(U===null){k===null&&(k=O);break}r&&k&&U.alternate===null&&e(y,k),b=s(U,b,M),A===null?I=U:A.sibling=U,A=U,k=O}if(F.done)return t(y,k),Mt&&Ga(y,M),I;if(k===null){for(;!F.done;M++,F=_.next())F=h(y,F.value,S),F!==null&&(b=s(F,b,M),A===null?I=F:A.sibling=F,A=F);return Mt&&Ga(y,M),I}for(k=n(y,k);!F.done;M++,F=_.next())F=p(k,y,M,F.value,S),F!==null&&(r&&F.alternate!==null&&k.delete(F.key===null?M:F.key),b=s(F,b,M),A===null?I=F:A.sibling=F,A=F);return r&&k.forEach(function(X){return e(y,X)}),Mt&&Ga(y,M),I}function x(y,b,_,S){if(typeof _=="object"&&_!==null&&_.type===hu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Zf:e:{for(var I=_.key,A=b;A!==null;){if(A.key===I){if(I=_.type,I===hu){if(A.tag===7){t(y,A.sibling),b=i(A,_.props.children),b.return=y,y=b;break e}}else if(A.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Go&&UC(I)===A.type){t(y,A.sibling),b=i(A,_.props),b.ref=rc(y,A,_),b.return=y,y=b;break e}t(y,A);break}else e(y,A);A=A.sibling}_.type===hu?(b=il(_.props.children,y.mode,S,_.key),b.return=y,y=b):(S=Jp(_.type,_.key,_.props,null,y.mode,S),S.ref=rc(y,b,_),S.return=y,y=S)}return o(y);case uu:e:{for(A=_.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){t(y,b.sibling),b=i(b,_.children||[]),b.return=y,y=b;break e}else{t(y,b);break}else e(y,b);b=b.sibling}b=My(_,y.mode,S),b.return=y,y=b}return o(y);case Go:return A=_._init,x(y,b,A(_._payload),S)}if(pc(_))return g(y,b,_,S);if(Qh(_))return v(y,b,_,S);up(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(t(y,b.sibling),b=i(b,_),b.return=y,y=b):(t(y,b),b=Iy(_,y.mode,S),b.return=y,y=b),o(y)):t(y,b)}return x}var ih=vM(!0),yM=vM(!1),Dm=Ea(null),Um=null,yu=null,mw=null;function gw(){mw=yu=Um=null}function vw(r){var e=Dm.current;Ct(Dm),r._currentValue=e}function Ox(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function zu(r,e){Um=r,mw=yu=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(pn=!0),r.firstContext=null)}function fi(r){var e=r._currentValue;if(mw!==r)if(r={context:r,memoizedValue:e,next:null},yu===null){if(Um===null)throw Error(le(308));yu=r,Um.dependencies={lanes:0,firstContext:r}}else yu=yu.next=r;return e}var Qa=null;function yw(r){Qa===null?Qa=[r]:Qa.push(r)}function xM(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,yw(e)):(t.next=i.next,i.next=t),e.interleaved=t,_o(r,n)}function _o(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var Wo=!1;function xw(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _M(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function fo(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function ca(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,st&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,_o(r,t)}return i=n.interleaved,i===null?(e.next=e,yw(n)):(e.next=i.next,i.next=e),n.interleaved=e,_o(r,t)}function Wp(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,iw(r,t)}}function jC(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function jm(r,e,t,n){var i=r.updateQueue;Wo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=r.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var h=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,p=a.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=r,v=a;switch(d=e,p=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){h=g.call(p,h,d);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(p,h,d):g,d==null)break e;h=Ht({},h,d);break e;case 2:Wo=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=p,u=h):c=c.next=p,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=h),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);pl|=o,r.lanes=o,r.memoizedState=h}}function XC(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(le(191,i));i.call(n)}}}var Ed={},Is=Ea(Ed),td=Ea(Ed),rd=Ea(Ed);function Za(r){if(r===Ed)throw Error(le(174));return r}function _w(r,e){switch(wt(rd,e),wt(td,r),wt(Is,Ed),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fx(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=fx(e,r)}Ct(Is),wt(Is,e)}function sh(){Ct(Is),Ct(td),Ct(rd)}function wM(r){Za(rd.current);var e=Za(Is.current),t=fx(e,r.type);e!==t&&(wt(td,r),wt(Is,t))}function ww(r){td.current===r&&(Ct(Is),Ct(td))}var Ft=Ea(0);function Xm(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ty=[];function bw(){for(var r=0;r<Ty.length;r++)Ty[r]._workInProgressVersionPrimary=null;Ty.length=0}var Vp=To.ReactCurrentDispatcher,Ey=To.ReactCurrentBatchConfig,fl=0,Xt=null,hr=null,_r=null,Hm=!1,Ac=!1,nd=0,oH=0;function jr(){throw Error(le(321))}function Sw(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!zi(r[t],e[t]))return!1;return!0}function Tw(r,e,t,n,i,s){if(fl=s,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vp.current=r===null||r.memoizedState===null?hH:cH,r=t(n,i),Ac){s=0;do{if(Ac=!1,nd=0,25<=s)throw Error(le(301));s+=1,_r=hr=null,e.updateQueue=null,Vp.current=dH,r=t(n,i)}while(Ac)}if(Vp.current=zm,e=hr!==null&&hr.next!==null,fl=0,_r=hr=Xt=null,Hm=!1,e)throw Error(le(300));return r}function Ew(){var r=nd!==0;return nd=0,r}function ms(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _r===null?Xt.memoizedState=_r=r:_r=_r.next=r,_r}function pi(){if(hr===null){var r=Xt.alternate;r=r!==null?r.memoizedState:null}else r=hr.next;var e=_r===null?Xt.memoizedState:_r.next;if(e!==null)_r=e,hr=r;else{if(r===null)throw Error(le(310));hr=r,r={memoizedState:hr.memoizedState,baseState:hr.baseState,baseQueue:hr.baseQueue,queue:hr.queue,next:null},_r===null?Xt.memoizedState=_r=r:_r=_r.next=r}return _r}function id(r,e){return typeof e=="function"?e(r):e}function Cy(r){var e=pi(),t=e.queue;if(t===null)throw Error(le(311));t.lastRenderedReducer=r;var n=hr,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((fl&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:r(n,l.action);else{var h={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=h,o=n):u=u.next=h,Xt.lanes|=c,pl|=c}l=l.next}while(l!==null&&l!==s);u===null?o=n:u.next=a,zi(n,e.memoizedState)||(pn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,Xt.lanes|=s,pl|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Py(r){var e=pi(),t=e.queue;if(t===null)throw Error(le(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=r(s,o.action),o=o.next;while(o!==i);zi(s,e.memoizedState)||(pn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function bM(){}function SM(r,e){var t=Xt,n=pi(),i=e(),s=!zi(n.memoizedState,i);if(s&&(n.memoizedState=i,pn=!0),n=n.queue,Cw(CM.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||_r!==null&&_r.memoizedState.tag&1){if(t.flags|=2048,sd(9,EM.bind(null,t,n,i,e),void 0,null),br===null)throw Error(le(349));fl&30||TM(t,e,i)}return i}function TM(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function EM(r,e,t,n){e.value=t,e.getSnapshot=n,PM(e)&&AM(r)}function CM(r,e,t){return t(function(){PM(e)&&AM(r)})}function PM(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!zi(r,t)}catch{return!0}}function AM(r){var e=_o(r,1);e!==null&&Xi(e,r,1,-1)}function HC(r){var e=ms();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:id,lastRenderedState:r},e.queue=r,r=r.dispatch=uH.bind(null,Xt,r),[e.memoizedState,r]}function sd(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function kM(){return pi().memoizedState}function qp(r,e,t,n){var i=ms();Xt.flags|=r,i.memoizedState=sd(1|e,t,void 0,n===void 0?null:n)}function Ug(r,e,t,n){var i=pi();n=n===void 0?null:n;var s=void 0;if(hr!==null){var o=hr.memoizedState;if(s=o.destroy,n!==null&&Sw(n,o.deps)){i.memoizedState=sd(e,t,s,n);return}}Xt.flags|=r,i.memoizedState=sd(1|e,t,s,n)}function zC(r,e){return qp(8390656,8,r,e)}function Cw(r,e){return Ug(2048,8,r,e)}function IM(r,e){return Ug(4,2,r,e)}function MM(r,e){return Ug(4,4,r,e)}function RM(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function OM(r,e,t){return t=t!=null?t.concat([r]):null,Ug(4,4,RM.bind(null,e,r),t)}function Pw(){}function BM(r,e){var t=pi();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Sw(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function LM(r,e){var t=pi();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Sw(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function NM(r,e,t){return fl&21?(zi(t,e)||(t=XI(),Xt.lanes|=t,pl|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,pn=!0),r.memoizedState=t)}function aH(r,e){var t=ft;ft=t!==0&&4>t?t:4,r(!0);var n=Ey.transition;Ey.transition={};try{r(!1),e()}finally{ft=t,Ey.transition=n}}function FM(){return pi().memoizedState}function lH(r,e,t){var n=fa(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},DM(r))UM(e,t);else if(t=xM(r,e,t,n),t!==null){var i=tn();Xi(t,r,n,i),jM(t,e,n)}}function uH(r,e,t){var n=fa(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(DM(r))UM(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,zi(a,o)){var u=e.interleaved;u===null?(i.next=i,yw(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=xM(r,e,i,n),t!==null&&(i=tn(),Xi(t,r,n,i),jM(t,e,n))}}function DM(r){var e=r.alternate;return r===Xt||e!==null&&e===Xt}function UM(r,e){Ac=Hm=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function jM(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,iw(r,t)}}var zm={readContext:fi,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},hH={readContext:fi,useCallback:function(r,e){return ms().memoizedState=[r,e===void 0?null:e],r},useContext:fi,useEffect:zC,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,qp(4194308,4,RM.bind(null,e,r),t)},useLayoutEffect:function(r,e){return qp(4194308,4,r,e)},useInsertionEffect:function(r,e){return qp(4,2,r,e)},useMemo:function(r,e){var t=ms();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=ms();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=lH.bind(null,Xt,r),[n.memoizedState,r]},useRef:function(r){var e=ms();return r={current:r},e.memoizedState=r},useState:HC,useDebugValue:Pw,useDeferredValue:function(r){return ms().memoizedState=r},useTransition:function(){var r=HC(!1),e=r[0];return r=aH.bind(null,r[1]),ms().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=Xt,i=ms();if(Mt){if(t===void 0)throw Error(le(407));t=t()}else{if(t=e(),br===null)throw Error(le(349));fl&30||TM(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,zC(CM.bind(null,n,s,r),[r]),n.flags|=2048,sd(9,EM.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=ms(),e=br.identifierPrefix;if(Mt){var t=uo,n=lo;t=(n&~(1<<32-ji(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=nd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=oH++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},cH={readContext:fi,useCallback:BM,useContext:fi,useEffect:Cw,useImperativeHandle:OM,useInsertionEffect:IM,useLayoutEffect:MM,useMemo:LM,useReducer:Cy,useRef:kM,useState:function(){return Cy(id)},useDebugValue:Pw,useDeferredValue:function(r){var e=pi();return NM(e,hr.memoizedState,r)},useTransition:function(){var r=Cy(id)[0],e=pi().memoizedState;return[r,e]},useMutableSource:bM,useSyncExternalStore:SM,useId:FM,unstable_isNewReconciler:!1},dH={readContext:fi,useCallback:BM,useContext:fi,useEffect:Cw,useImperativeHandle:OM,useInsertionEffect:IM,useLayoutEffect:MM,useMemo:LM,useReducer:Py,useRef:kM,useState:function(){return Py(id)},useDebugValue:Pw,useDeferredValue:function(r){var e=pi();return hr===null?e.memoizedState=r:NM(e,hr.memoizedState,r)},useTransition:function(){var r=Py(id)[0],e=pi().memoizedState;return[r,e]},useMutableSource:bM,useSyncExternalStore:SM,useId:FM,unstable_isNewReconciler:!1};function Ai(r,e){if(r&&r.defaultProps){e=Ht({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function Bx(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Ht({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var jg={isMounted:function(r){return(r=r._reactInternals)?Sl(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=tn(),i=fa(r),s=fo(n,i);s.payload=e,t!=null&&(s.callback=t),e=ca(r,s,i),e!==null&&(Xi(e,r,i,n),Wp(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=tn(),i=fa(r),s=fo(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ca(r,s,i),e!==null&&(Xi(e,r,i,n),Wp(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=tn(),n=fa(r),i=fo(t,n);i.tag=2,e!=null&&(i.callback=e),e=ca(r,i,n),e!==null&&(Xi(e,r,n,t),Wp(e,r,n))}};function $C(r,e,t,n,i,s,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Qc(t,n)||!Qc(i,s):!0}function XM(r,e,t){var n=!1,i=_a,s=e.contextType;return typeof s=="object"&&s!==null?s=fi(s):(i=xn(e)?cl:qr.current,n=e.contextTypes,s=(n=n!=null)?rh(r,i):_a),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jg,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function YC(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&jg.enqueueReplaceState(e,e.state,null)}function Lx(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},xw(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=fi(s):(s=xn(e)?cl:qr.current,i.context=rh(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bx(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jg.enqueueReplaceState(i,i.state,null),jm(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function oh(r,e){try{var t="",n=e;do t+=jj(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function Ay(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function Nx(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var fH=typeof WeakMap=="function"?WeakMap:Map;function HM(r,e,t){t=fo(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){Ym||(Ym=!0,Gx=n),Nx(r,e)},t}function zM(r,e,t){t=fo(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){Nx(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Nx(r,e),typeof n!="function"&&(da===null?da=new Set([this]):da.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function GC(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new fH;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=PH.bind(null,r,e,t),e.then(r,r))}function WC(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function VC(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=fo(-1,1),e.tag=2,ca(t,e,1))),t.lanes|=1),r)}var pH=To.ReactCurrentOwner,pn=!1;function Zr(r,e,t,n){e.child=r===null?yM(e,null,t,n):ih(e,r.child,t,n)}function qC(r,e,t,n,i){t=t.render;var s=e.ref;return zu(e,i),n=Tw(r,e,t,n,s,i),t=Ew(),r!==null&&!pn?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,wo(r,e,i)):(Mt&&t&&dw(e),e.flags|=1,Zr(r,e,n,i),e.child)}function KC(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!Lw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,$M(r,e,s,n,i)):(r=Jp(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Qc,t(o,n)&&r.ref===e.ref)return wo(r,e,i)}return e.flags|=1,r=pa(s,n),r.ref=e.ref,r.return=e,e.child=r}function $M(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(Qc(s,n)&&r.ref===e.ref)if(pn=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(pn=!0);else return e.lanes=r.lanes,wo(r,e,i)}return Fx(r,e,t,n,i)}function YM(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(_u,On),On|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,wt(_u,On),On|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,wt(_u,On),On|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,wt(_u,On),On|=n;return Zr(r,e,i,t),e.child}function GM(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Fx(r,e,t,n,i){var s=xn(t)?cl:qr.current;return s=rh(e,s),zu(e,i),t=Tw(r,e,t,n,s,i),n=Ew(),r!==null&&!pn?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,wo(r,e,i)):(Mt&&n&&dw(e),e.flags|=1,Zr(r,e,t,i),e.child)}function QC(r,e,t,n,i){if(xn(t)){var s=!0;Lm(e)}else s=!1;if(zu(e,i),e.stateNode===null)Kp(r,e),XM(e,t,n),Lx(e,t,n,i),n=!0;else if(r===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=t.contextType;typeof l=="object"&&l!==null?l=fi(l):(l=xn(t)?cl:qr.current,l=rh(e,l));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||u!==l)&&YC(e,o,n,l),Wo=!1;var d=e.memoizedState;o.state=d,jm(e,n,o,i),u=e.memoizedState,a!==n||d!==u||yn.current||Wo?(typeof c=="function"&&(Bx(e,t,c,n),u=e.memoizedState),(a=Wo||$C(e,t,a,n,d,u,l))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,_M(r,e),a=e.memoizedProps,l=e.type===e.elementType?a:Ai(e.type,a),o.props=l,h=e.pendingProps,d=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=fi(u):(u=xn(t)?cl:qr.current,u=rh(e,u));var p=t.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==u)&&YC(e,o,n,u),Wo=!1,d=e.memoizedState,o.state=d,jm(e,n,o,i);var g=e.memoizedState;a!==h||d!==g||yn.current||Wo?(typeof p=="function"&&(Bx(e,t,p,n),g=e.memoizedState),(l=Wo||$C(e,t,l,n,d,g,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=u,n=l):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return Dx(r,e,t,n,s,i)}function Dx(r,e,t,n,i,s){GM(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&NC(e,t,!1),wo(r,e,s);n=e.stateNode,pH.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=ih(e,r.child,null,s),e.child=ih(e,null,a,s)):Zr(r,e,a,s),e.memoizedState=n.state,i&&NC(e,t,!0),e.child}function WM(r){var e=r.stateNode;e.pendingContext?LC(r,e.pendingContext,e.pendingContext!==e.context):e.context&&LC(r,e.context,!1),_w(r,e.containerInfo)}function ZC(r,e,t,n,i){return nh(),pw(i),e.flags|=256,Zr(r,e,t,n),e.child}var Ux={dehydrated:null,treeContext:null,retryLane:0};function jx(r){return{baseLanes:r,cachePool:null,transitions:null}}function VM(r,e,t){var n=e.pendingProps,i=Ft.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),wt(Ft,i&1),r===null)return Rx(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zg(o,n,0,null),r=il(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=jx(t),e.memoizedState=Ux,r):Aw(e,o));if(i=r.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return mH(r,e,o,n,a,i,t);if(s){s=n.fallback,o=e.mode,i=r.child,a=i.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=pa(i,u),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=pa(a,s):(s=il(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=r.child.memoizedState,o=o===null?jx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=r.childLanes&~t,e.memoizedState=Ux,n}return s=r.child,r=s.sibling,n=pa(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function Aw(r,e){return e=zg({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function hp(r,e,t,n){return n!==null&&pw(n),ih(e,r.child,null,t),r=Aw(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function mH(r,e,t,n,i,s,o){if(t)return e.flags&256?(e.flags&=-257,n=Ay(Error(le(422))),hp(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=zg({mode:"visible",children:n.children},i,0,null),s=il(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&ih(e,r.child,null,o),e.child.memoizedState=jx(o),e.memoizedState=Ux,s);if(!(e.mode&1))return hp(r,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(le(419)),n=Ay(s,n,void 0),hp(r,e,o,n)}if(a=(o&r.childLanes)!==0,pn||a){if(n=br,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_o(r,i),Xi(n,r,i,-1))}return Bw(),n=Ay(Error(le(421))),hp(r,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=AH.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,Nn=ha(i.nextSibling),Dn=e,Mt=!0,Ii=null,r!==null&&(ni[ii++]=lo,ni[ii++]=uo,ni[ii++]=dl,lo=r.id,uo=r.overflow,dl=e),e=Aw(e,n.children),e.flags|=4096,e)}function JC(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),Ox(r.return,e,t)}function ky(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function qM(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Zr(r,e,n.children,t),n=Ft.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&JC(r,t,e);else if(r.tag===19)JC(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(wt(Ft,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&Xm(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),ky(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&Xm(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}ky(e,!0,t,null,s);break;case"together":ky(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kp(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function wo(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),pl|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(le(153));if(e.child!==null){for(r=e.child,t=pa(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=pa(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function gH(r,e,t){switch(e.tag){case 3:WM(e),nh();break;case 5:wM(e);break;case 1:xn(e.type)&&Lm(e);break;case 4:_w(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;wt(Dm,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(wt(Ft,Ft.current&1),e.flags|=128,null):t&e.child.childLanes?VM(r,e,t):(wt(Ft,Ft.current&1),r=wo(r,e,t),r!==null?r.sibling:null);wt(Ft,Ft.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return qM(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(Ft,Ft.current),n)break;return null;case 22:case 23:return e.lanes=0,YM(r,e,t)}return wo(r,e,t)}var KM,Xx,QM,ZM;KM=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Xx=function(){};QM=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,Za(Is.current);var s=null;switch(t){case"input":i=ux(r,i),n=ux(r,n),s=[];break;case"select":i=Ht({},i,{value:void 0}),n=Ht({},n,{value:void 0}),s=[];break;case"textarea":i=dx(r,i),n=dx(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Om)}px(t,n);var o;t=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&($c.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(l,t)),t=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&($c.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Tt("scroll",r),s||a===u||(s=[])):(s=s||[]).push(l,u))}t&&(s=s||[]).push("style",t);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};ZM=function(r,e,t,n){t!==n&&(e.flags|=4)};function nc(r,e){if(!Mt)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Xr(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function vH(r,e,t){var n=e.pendingProps;switch(fw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(e),null;case 1:return xn(e.type)&&Bm(),Xr(e),null;case 3:return n=e.stateNode,sh(),Ct(yn),Ct(qr),bw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(lp(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ii!==null&&(qx(Ii),Ii=null))),Xx(r,e),Xr(e),null;case 5:ww(e);var i=Za(rd.current);if(t=e.type,r!==null&&e.stateNode!=null)QM(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(le(166));return Xr(e),null}if(r=Za(Is.current),lp(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[ws]=e,n[ed]=s,r=(e.mode&1)!==0,t){case"dialog":Tt("cancel",n),Tt("close",n);break;case"iframe":case"object":case"embed":Tt("load",n);break;case"video":case"audio":for(i=0;i<gc.length;i++)Tt(gc[i],n);break;case"source":Tt("error",n);break;case"img":case"image":case"link":Tt("error",n),Tt("load",n);break;case"details":Tt("toggle",n);break;case"input":lC(n,s),Tt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Tt("invalid",n);break;case"textarea":hC(n,s),Tt("invalid",n)}px(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ap(n.textContent,a,r),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ap(n.textContent,a,r),i=["children",""+a]):$c.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Tt("scroll",n)}switch(t){case"input":Jf(n),uC(n,s,!0);break;case"textarea":Jf(n),cC(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Om)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=CI(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[ws]=e,r[ed]=n,KM(r,e,!1,!1),e.stateNode=r;e:{switch(o=mx(t,n),t){case"dialog":Tt("cancel",r),Tt("close",r),i=n;break;case"iframe":case"object":case"embed":Tt("load",r),i=n;break;case"video":case"audio":for(i=0;i<gc.length;i++)Tt(gc[i],r);i=n;break;case"source":Tt("error",r),i=n;break;case"img":case"image":case"link":Tt("error",r),Tt("load",r),i=n;break;case"details":Tt("toggle",r),i=n;break;case"input":lC(r,n),i=ux(r,n),Tt("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Ht({},n,{value:void 0}),Tt("invalid",r);break;case"textarea":hC(r,n),i=dx(r,n),Tt("invalid",r);break;default:i=n}px(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?kI(r,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&PI(r,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Yc(r,u):typeof u=="number"&&Yc(r,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($c.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Tt("scroll",r):u!=null&&Z_(r,s,u,o))}switch(t){case"input":Jf(r),uC(r,n,!1);break;case"textarea":Jf(r),cC(r);break;case"option":n.value!=null&&r.setAttribute("value",""+xa(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Uu(r,!!n.multiple,s,!1):n.defaultValue!=null&&Uu(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Om)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xr(e),null;case 6:if(r&&e.stateNode!=null)ZM(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(le(166));if(t=Za(rd.current),Za(Is.current),lp(e)){if(n=e.stateNode,t=e.memoizedProps,n[ws]=e,(s=n.nodeValue!==t)&&(r=Dn,r!==null))switch(r.tag){case 3:ap(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ap(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[ws]=e,e.stateNode=n}return Xr(e),null;case 13:if(Ct(Ft),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Mt&&Nn!==null&&e.mode&1&&!(e.flags&128))gM(),nh(),e.flags|=98560,s=!1;else if(s=lp(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[ws]=e}else nh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xr(e),s=!1}else Ii!==null&&(qx(Ii),Ii=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Ft.current&1?dr===0&&(dr=3):Bw())),e.updateQueue!==null&&(e.flags|=4),Xr(e),null);case 4:return sh(),Xx(r,e),r===null&&Zc(e.stateNode.containerInfo),Xr(e),null;case 10:return vw(e.type._context),Xr(e),null;case 17:return xn(e.type)&&Bm(),Xr(e),null;case 19:if(Ct(Ft),s=e.memoizedState,s===null)return Xr(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)nc(s,!1);else{if(dr!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=Xm(r),o!==null){for(e.flags|=128,nc(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return wt(Ft,Ft.current&1|2),e.child}r=r.sibling}s.tail!==null&&Qt()>ah&&(e.flags|=128,n=!0,nc(s,!1),e.lanes=4194304)}else{if(!n)if(r=Xm(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),nc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mt)return Xr(e),null}else 2*Qt()-s.renderingStartTime>ah&&t!==1073741824&&(e.flags|=128,n=!0,nc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,t=Ft.current,wt(Ft,n?t&1|2:t&1),e):(Xr(e),null);case 22:case 23:return Ow(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?On&1073741824&&(Xr(e),e.subtreeFlags&6&&(e.flags|=8192)):Xr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function yH(r,e){switch(fw(e),e.tag){case 1:return xn(e.type)&&Bm(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return sh(),Ct(yn),Ct(qr),bw(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return ww(e),null;case 13:if(Ct(Ft),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(le(340));nh()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Ct(Ft),null;case 4:return sh(),null;case 10:return vw(e.type._context),null;case 22:case 23:return Ow(),null;case 24:return null;default:return null}}var cp=!1,zr=!1,xH=typeof WeakSet=="function"?WeakSet:Set,be=null;function xu(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Yt(r,e,n)}else t.current=null}function Hx(r,e,t){try{t()}catch(n){Yt(r,e,n)}}var eP=!1;function _H(r,e){if(Ex=Im,r=nM(),cw(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,l=0,c=0,h=r,d=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||n!==0&&h.nodeType!==3||(u=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===r)break t;if(d===t&&++l===i&&(a=o),d===s&&++c===n&&(u=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(Cx={focusedElem:r,selectionRange:t},Im=!1,be=e;be!==null;)if(e=be,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,be=r;else for(;be!==null;){e=be;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Ai(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(S){Yt(e,e.return,S)}if(r=e.sibling,r!==null){r.return=e.return,be=r;break}be=e.return}return g=eP,eP=!1,g}function kc(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hx(e,t,s)}i=i.next}while(i!==n)}}function Xg(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function zx(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function JM(r){var e=r.alternate;e!==null&&(r.alternate=null,JM(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[ws],delete e[ed],delete e[kx],delete e[rH],delete e[nH])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function eR(r){return r.tag===5||r.tag===3||r.tag===4}function tP(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||eR(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function $x(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Om));else if(n!==4&&(r=r.child,r!==null))for($x(r,e,t),r=r.sibling;r!==null;)$x(r,e,t),r=r.sibling}function Yx(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(Yx(r,e,t),r=r.sibling;r!==null;)Yx(r,e,t),r=r.sibling}var Pr=null,ki=!1;function Uo(r,e,t){for(t=t.child;t!==null;)tR(r,e,t),t=t.sibling}function tR(r,e,t){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(Og,t)}catch{}switch(t.tag){case 5:zr||xu(t,e);case 6:var n=Pr,i=ki;Pr=null,Uo(r,e,t),Pr=n,ki=i,Pr!==null&&(ki?(r=Pr,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Pr.removeChild(t.stateNode));break;case 18:Pr!==null&&(ki?(r=Pr,t=t.stateNode,r.nodeType===8?by(r.parentNode,t):r.nodeType===1&&by(r,t),qc(r)):by(Pr,t.stateNode));break;case 4:n=Pr,i=ki,Pr=t.stateNode.containerInfo,ki=!0,Uo(r,e,t),Pr=n,ki=i;break;case 0:case 11:case 14:case 15:if(!zr&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hx(t,e,o),i=i.next}while(i!==n)}Uo(r,e,t);break;case 1:if(!zr&&(xu(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){Yt(t,e,a)}Uo(r,e,t);break;case 21:Uo(r,e,t);break;case 22:t.mode&1?(zr=(n=zr)||t.memoizedState!==null,Uo(r,e,t),zr=n):Uo(r,e,t);break;default:Uo(r,e,t)}}function rP(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new xH),e.forEach(function(n){var i=kH.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function Ti(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pr=a.stateNode,ki=!1;break e;case 3:Pr=a.stateNode.containerInfo,ki=!0;break e;case 4:Pr=a.stateNode.containerInfo,ki=!0;break e}a=a.return}if(Pr===null)throw Error(le(160));tR(s,o,i),Pr=null,ki=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Yt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rR(e,r),e=e.sibling}function rR(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ti(e,r),us(r),n&4){try{kc(3,r,r.return),Xg(3,r)}catch(v){Yt(r,r.return,v)}try{kc(5,r,r.return)}catch(v){Yt(r,r.return,v)}}break;case 1:Ti(e,r),us(r),n&512&&t!==null&&xu(t,t.return);break;case 5:if(Ti(e,r),us(r),n&512&&t!==null&&xu(t,t.return),r.flags&32){var i=r.stateNode;try{Yc(i,"")}catch(v){Yt(r,r.return,v)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,o=t!==null?t.memoizedProps:s,a=r.type,u=r.updateQueue;if(r.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TI(i,s),mx(a,o);var l=mx(a,s);for(o=0;o<u.length;o+=2){var c=u[o],h=u[o+1];c==="style"?kI(i,h):c==="dangerouslySetInnerHTML"?PI(i,h):c==="children"?Yc(i,h):Z_(i,c,h,l)}switch(a){case"input":hx(i,s);break;case"textarea":EI(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Uu(i,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?Uu(i,!!s.multiple,s.defaultValue,!0):Uu(i,!!s.multiple,s.multiple?[]:"",!1))}i[ed]=s}catch(v){Yt(r,r.return,v)}}break;case 6:if(Ti(e,r),us(r),n&4){if(r.stateNode===null)throw Error(le(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(v){Yt(r,r.return,v)}}break;case 3:if(Ti(e,r),us(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{qc(e.containerInfo)}catch(v){Yt(r,r.return,v)}break;case 4:Ti(e,r),us(r);break;case 13:Ti(e,r),us(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mw=Qt())),n&4&&rP(r);break;case 22:if(c=t!==null&&t.memoizedState!==null,r.mode&1?(zr=(l=zr)||c,Ti(e,r),zr=l):Ti(e,r),us(r),n&8192){if(l=r.memoizedState!==null,(r.stateNode.isHidden=l)&&!c&&r.mode&1)for(be=r,c=r.child;c!==null;){for(h=be=c;be!==null;){switch(d=be,p=d.child,d.tag){case 0:case 11:case 14:case 15:kc(4,d,d.return);break;case 1:xu(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Yt(n,t,v)}}break;case 5:xu(d,d.return);break;case 22:if(d.memoizedState!==null){iP(h);continue}}p!==null?(p.return=d,be=p):iP(h)}c=c.sibling}e:for(c=null,h=r;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=AI("display",o))}catch(v){Yt(r,r.return,v)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(v){Yt(r,r.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===r)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===r)break e;for(;h.sibling===null;){if(h.return===null||h.return===r)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ti(e,r),us(r),n&4&&rP(r);break;case 21:break;default:Ti(e,r),us(r)}}function us(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(eR(t)){var n=t;break e}t=t.return}throw Error(le(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Yc(i,""),n.flags&=-33);var s=tP(r);Yx(r,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=tP(r);$x(r,a,o);break;default:throw Error(le(161))}}catch(u){Yt(r,r.return,u)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function wH(r,e,t){be=r,nR(r)}function nR(r,e,t){for(var n=(r.mode&1)!==0;be!==null;){var i=be,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||cp;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||zr;a=cp;var l=zr;if(cp=o,(zr=u)&&!l)for(be=i;be!==null;)o=be,u=o.child,o.tag===22&&o.memoizedState!==null?sP(i):u!==null?(u.return=o,be=u):sP(i);for(;s!==null;)be=s,nR(s),s=s.sibling;be=i,cp=a,zr=l}nP(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,be=s):nP(r)}}function nP(r){for(;be!==null;){var e=be;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||Xg(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!zr)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ai(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&XC(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}XC(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&qc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}zr||e.flags&512&&zx(e)}catch(d){Yt(e,e.return,d)}}if(e===r){be=null;break}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}}function iP(r){for(;be!==null;){var e=be;if(e===r){be=null;break}var t=e.sibling;if(t!==null){t.return=e.return,be=t;break}be=e.return}}function sP(r){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Xg(4,e)}catch(u){Yt(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){Yt(e,i,u)}}var s=e.return;try{zx(e)}catch(u){Yt(e,s,u)}break;case 5:var o=e.return;try{zx(e)}catch(u){Yt(e,o,u)}}}catch(u){Yt(e,e.return,u)}if(e===r){be=null;break}var a=e.sibling;if(a!==null){a.return=e.return,be=a;break}be=e.return}}var bH=Math.ceil,$m=To.ReactCurrentDispatcher,kw=To.ReactCurrentOwner,ci=To.ReactCurrentBatchConfig,st=0,br=null,nr=null,Or=0,On=0,_u=Ea(0),dr=0,od=null,pl=0,Hg=0,Iw=0,Ic=null,cn=null,Mw=0,ah=1/0,qs=null,Ym=!1,Gx=null,da=null,dp=!1,ia=null,Gm=0,Mc=0,Wx=null,Qp=-1,Zp=0;function tn(){return st&6?Qt():Qp!==-1?Qp:Qp=Qt()}function fa(r){return r.mode&1?st&2&&Or!==0?Or&-Or:sH.transition!==null?(Zp===0&&(Zp=XI()),Zp):(r=ft,r!==0||(r=window.event,r=r===void 0?16:VI(r.type)),r):1}function Xi(r,e,t,n){if(50<Mc)throw Mc=0,Wx=null,Error(le(185));bd(r,t,n),(!(st&2)||r!==br)&&(r===br&&(!(st&2)&&(Hg|=t),dr===4&&Zo(r,Or)),_n(r,n),t===1&&st===0&&!(e.mode&1)&&(ah=Qt()+500,Dg&&Ca()))}function _n(r,e){var t=r.callbackNode;sX(r,e);var n=km(r,r===br?Or:0);if(n===0)t!==null&&pC(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&pC(t),e===1)r.tag===0?iH(oP.bind(null,r)):fM(oP.bind(null,r)),eH(function(){!(st&6)&&Ca()}),t=null;else{switch(HI(n)){case 1:t=nw;break;case 4:t=UI;break;case 16:t=Am;break;case 536870912:t=jI;break;default:t=Am}t=cR(t,iR.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function iR(r,e){if(Qp=-1,Zp=0,st&6)throw Error(le(327));var t=r.callbackNode;if($u()&&r.callbackNode!==t)return null;var n=km(r,r===br?Or:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=Wm(r,n);else{e=n;var i=st;st|=2;var s=oR();(br!==r||Or!==e)&&(qs=null,ah=Qt()+500,nl(r,e));do try{EH();break}catch(a){sR(r,a)}while(!0);gw(),$m.current=s,st=i,nr!==null?e=0:(br=null,Or=0,e=dr)}if(e!==0){if(e===2&&(i=_x(r),i!==0&&(n=i,e=Vx(r,i))),e===1)throw t=od,nl(r,0),Zo(r,n),_n(r,Qt()),t;if(e===6)Zo(r,n);else{if(i=r.current.alternate,!(n&30)&&!SH(i)&&(e=Wm(r,n),e===2&&(s=_x(r),s!==0&&(n=s,e=Vx(r,s))),e===1))throw t=od,nl(r,0),Zo(r,n),_n(r,Qt()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(le(345));case 2:Wa(r,cn,qs);break;case 3:if(Zo(r,n),(n&130023424)===n&&(e=Mw+500-Qt(),10<e)){if(km(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){tn(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=Ax(Wa.bind(null,r,cn,qs),e);break}Wa(r,cn,qs);break;case 4:if(Zo(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var o=31-ji(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bH(n/1960))-n,10<n){r.timeoutHandle=Ax(Wa.bind(null,r,cn,qs),n);break}Wa(r,cn,qs);break;case 5:Wa(r,cn,qs);break;default:throw Error(le(329))}}}return _n(r,Qt()),r.callbackNode===t?iR.bind(null,r):null}function Vx(r,e){var t=Ic;return r.current.memoizedState.isDehydrated&&(nl(r,e).flags|=256),r=Wm(r,e),r!==2&&(e=cn,cn=t,e!==null&&qx(e)),r}function qx(r){cn===null?cn=r:cn.push.apply(cn,r)}function SH(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!zi(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zo(r,e){for(e&=~Iw,e&=~Hg,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-ji(e),n=1<<t;r[t]=-1,e&=~n}}function oP(r){if(st&6)throw Error(le(327));$u();var e=km(r,0);if(!(e&1))return _n(r,Qt()),null;var t=Wm(r,e);if(r.tag!==0&&t===2){var n=_x(r);n!==0&&(e=n,t=Vx(r,n))}if(t===1)throw t=od,nl(r,0),Zo(r,e),_n(r,Qt()),t;if(t===6)throw Error(le(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Wa(r,cn,qs),_n(r,Qt()),null}function Rw(r,e){var t=st;st|=1;try{return r(e)}finally{st=t,st===0&&(ah=Qt()+500,Dg&&Ca())}}function ml(r){ia!==null&&ia.tag===0&&!(st&6)&&$u();var e=st;st|=1;var t=ci.transition,n=ft;try{if(ci.transition=null,ft=1,r)return r()}finally{ft=n,ci.transition=t,st=e,!(st&6)&&Ca()}}function Ow(){On=_u.current,Ct(_u)}function nl(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,JX(t)),nr!==null)for(t=nr.return;t!==null;){var n=t;switch(fw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Bm();break;case 3:sh(),Ct(yn),Ct(qr),bw();break;case 5:ww(n);break;case 4:sh();break;case 13:Ct(Ft);break;case 19:Ct(Ft);break;case 10:vw(n.type._context);break;case 22:case 23:Ow()}t=t.return}if(br=r,nr=r=pa(r.current,null),Or=On=e,dr=0,od=null,Iw=Hg=pl=0,cn=Ic=null,Qa!==null){for(e=0;e<Qa.length;e++)if(t=Qa[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}t.pending=n}Qa=null}return r}function sR(r,e){do{var t=nr;try{if(gw(),Vp.current=zm,Hm){for(var n=Xt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Hm=!1}if(fl=0,_r=hr=Xt=null,Ac=!1,nd=0,kw.current=null,t===null||t.return===null){dr=1,od=e,nr=null;break}e:{var s=r,o=t.return,a=t,u=e;if(e=Or,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=WC(o);if(p!==null){p.flags&=-257,VC(p,o,a,s,e),p.mode&1&&GC(s,l,e),e=p,u=l;var g=e.updateQueue;if(g===null){var v=new Set;v.add(u),e.updateQueue=v}else g.add(u);break e}else{if(!(e&1)){GC(s,l,e),Bw();break e}u=Error(le(426))}}else if(Mt&&a.mode&1){var x=WC(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),VC(x,o,a,s,e),pw(oh(u,a));break e}}s=u=oh(u,a),dr!==4&&(dr=2),Ic===null?Ic=[s]:Ic.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=HM(s,u,e);jC(s,y);break e;case 1:a=u;var b=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(da===null||!da.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=zM(s,a,e);jC(s,S);break e}}s=s.return}while(s!==null)}lR(t)}catch(I){e=I,nr===t&&t!==null&&(nr=t=t.return);continue}break}while(!0)}function oR(){var r=$m.current;return $m.current=zm,r===null?zm:r}function Bw(){(dr===0||dr===3||dr===2)&&(dr=4),br===null||!(pl&268435455)&&!(Hg&268435455)||Zo(br,Or)}function Wm(r,e){var t=st;st|=2;var n=oR();(br!==r||Or!==e)&&(qs=null,nl(r,e));do try{TH();break}catch(i){sR(r,i)}while(!0);if(gw(),st=t,$m.current=n,nr!==null)throw Error(le(261));return br=null,Or=0,dr}function TH(){for(;nr!==null;)aR(nr)}function EH(){for(;nr!==null&&!Kj();)aR(nr)}function aR(r){var e=hR(r.alternate,r,On);r.memoizedProps=r.pendingProps,e===null?lR(r):nr=e,kw.current=null}function lR(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=yH(t,e),t!==null){t.flags&=32767,nr=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{dr=6,nr=null;return}}else if(t=vH(t,e,On),t!==null){nr=t;return}if(e=e.sibling,e!==null){nr=e;return}nr=e=r}while(e!==null);dr===0&&(dr=5)}function Wa(r,e,t){var n=ft,i=ci.transition;try{ci.transition=null,ft=1,CH(r,e,t,n)}finally{ci.transition=i,ft=n}return null}function CH(r,e,t,n){do $u();while(ia!==null);if(st&6)throw Error(le(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(le(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(oX(r,s),r===br&&(nr=br=null,Or=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||dp||(dp=!0,cR(Am,function(){return $u(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ci.transition,ci.transition=null;var o=ft;ft=1;var a=st;st|=4,kw.current=null,_H(r,t),rR(t,r),GX(Cx),Im=!!Ex,Cx=Ex=null,r.current=t,wH(t),Qj(),st=a,ft=o,ci.transition=s}else r.current=t;if(dp&&(dp=!1,ia=r,Gm=i),s=r.pendingLanes,s===0&&(da=null),eX(t.stateNode),_n(r,Qt()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ym)throw Ym=!1,r=Gx,Gx=null,r;return Gm&1&&r.tag!==0&&$u(),s=r.pendingLanes,s&1?r===Wx?Mc++:(Mc=0,Wx=r):Mc=0,Ca(),null}function $u(){if(ia!==null){var r=HI(Gm),e=ci.transition,t=ft;try{if(ci.transition=null,ft=16>r?16:r,ia===null)var n=!1;else{if(r=ia,ia=null,Gm=0,st&6)throw Error(le(331));var i=st;for(st|=4,be=r.current;be!==null;){var s=be,o=s.child;if(be.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(be=l;be!==null;){var c=be;switch(c.tag){case 0:case 11:case 15:kc(8,c,s)}var h=c.child;if(h!==null)h.return=c,be=h;else for(;be!==null;){c=be;var d=c.sibling,p=c.return;if(JM(c),c===l){be=null;break}if(d!==null){d.return=p,be=d;break}be=p}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}be=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,be=o;else e:for(;be!==null;){if(s=be,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kc(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,be=y;break e}be=s.return}}var b=r.current;for(be=b;be!==null;){o=be;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,be=_;else e:for(o=b;be!==null;){if(a=be,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Xg(9,a)}}catch(I){Yt(a,a.return,I)}if(a===o){be=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,be=S;break e}be=a.return}}if(st=i,Ca(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(Og,r)}catch{}n=!0}return n}finally{ft=t,ci.transition=e}}return!1}function aP(r,e,t){e=oh(t,e),e=HM(r,e,1),r=ca(r,e,1),e=tn(),r!==null&&(bd(r,1,e),_n(r,e))}function Yt(r,e,t){if(r.tag===3)aP(r,r,t);else for(;e!==null;){if(e.tag===3){aP(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(da===null||!da.has(n))){r=oh(t,r),r=zM(e,r,1),e=ca(e,r,1),r=tn(),e!==null&&(bd(e,1,r),_n(e,r));break}}e=e.return}}function PH(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=tn(),r.pingedLanes|=r.suspendedLanes&t,br===r&&(Or&t)===t&&(dr===4||dr===3&&(Or&130023424)===Or&&500>Qt()-Mw?nl(r,0):Iw|=t),_n(r,e)}function uR(r,e){e===0&&(r.mode&1?(e=rp,rp<<=1,!(rp&130023424)&&(rp=4194304)):e=1);var t=tn();r=_o(r,e),r!==null&&(bd(r,e,t),_n(r,t))}function AH(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),uR(r,t)}function kH(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(e),uR(r,t)}var hR;hR=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||yn.current)pn=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return pn=!1,gH(r,e,t);pn=!!(r.flags&131072)}else pn=!1,Mt&&e.flags&1048576&&pM(e,Fm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Kp(r,e),r=e.pendingProps;var i=rh(e,qr.current);zu(e,t),i=Tw(null,e,n,r,i,t);var s=Ew();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xn(n)?(s=!0,Lm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,xw(e),i.updater=jg,e.stateNode=i,i._reactInternals=e,Lx(e,n,r,t),e=Dx(null,e,n,!0,s,t)):(e.tag=0,Mt&&s&&dw(e),Zr(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Kp(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=MH(n),r=Ai(n,r),i){case 0:e=Fx(null,e,n,r,t);break e;case 1:e=QC(null,e,n,r,t);break e;case 11:e=qC(null,e,n,r,t);break e;case 14:e=KC(null,e,n,Ai(n.type,r),t);break e}throw Error(le(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),Fx(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),QC(r,e,n,i,t);case 3:e:{if(WM(e),r===null)throw Error(le(387));n=e.pendingProps,s=e.memoizedState,i=s.element,_M(r,e),jm(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=oh(Error(le(423)),e),e=ZC(r,e,n,t,i);break e}else if(n!==i){i=oh(Error(le(424)),e),e=ZC(r,e,n,t,i);break e}else for(Nn=ha(e.stateNode.containerInfo.firstChild),Dn=e,Mt=!0,Ii=null,t=yM(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(nh(),n===i){e=wo(r,e,t);break e}Zr(r,e,n,t)}e=e.child}return e;case 5:return wM(e),r===null&&Rx(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,o=i.children,Px(n,i)?o=null:s!==null&&Px(n,s)&&(e.flags|=32),GM(r,e),Zr(r,e,o,t),e.child;case 6:return r===null&&Rx(e),null;case 13:return VM(r,e,t);case 4:return _w(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=ih(e,null,n,t):Zr(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),qC(r,e,n,i,t);case 7:return Zr(r,e,e.pendingProps,t),e.child;case 8:return Zr(r,e,e.pendingProps.children,t),e.child;case 12:return Zr(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,wt(Dm,n._currentValue),n._currentValue=o,s!==null)if(zi(s.value,o)){if(s.children===i.children&&!yn.current){e=wo(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=fo(-1,t&-t),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),Ox(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Ox(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Zr(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,zu(e,t),i=fi(i),n=n(i),e.flags|=1,Zr(r,e,n,t),e.child;case 14:return n=e.type,i=Ai(n,e.pendingProps),i=Ai(n.type,i),KC(r,e,n,i,t);case 15:return $M(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ai(n,i),Kp(r,e),e.tag=1,xn(n)?(r=!0,Lm(e)):r=!1,zu(e,t),XM(e,n,i),Lx(e,n,i,t),Dx(null,e,n,!0,r,t);case 19:return qM(r,e,t);case 22:return YM(r,e,t)}throw Error(le(156,e.tag))};function cR(r,e){return DI(r,e)}function IH(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function li(r,e,t,n){return new IH(r,e,t,n)}function Lw(r){return r=r.prototype,!(!r||!r.isReactComponent)}function MH(r){if(typeof r=="function")return Lw(r)?1:0;if(r!=null){if(r=r.$$typeof,r===ew)return 11;if(r===tw)return 14}return 2}function pa(r,e){var t=r.alternate;return t===null?(t=li(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Jp(r,e,t,n,i,s){var o=2;if(n=r,typeof r=="function")Lw(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case hu:return il(t.children,i,s,e);case J_:o=8,i|=8;break;case sx:return r=li(12,t,e,i|2),r.elementType=sx,r.lanes=s,r;case ox:return r=li(13,t,e,i),r.elementType=ox,r.lanes=s,r;case ax:return r=li(19,t,e,i),r.elementType=ax,r.lanes=s,r;case wI:return zg(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case xI:o=10;break e;case _I:o=9;break e;case ew:o=11;break e;case tw:o=14;break e;case Go:o=16,n=null;break e}throw Error(le(130,r==null?r:typeof r,""))}return e=li(o,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function il(r,e,t,n){return r=li(7,r,n,e),r.lanes=t,r}function zg(r,e,t,n){return r=li(22,r,n,e),r.elementType=wI,r.lanes=t,r.stateNode={isHidden:!1},r}function Iy(r,e,t){return r=li(6,r,null,e),r.lanes=t,r}function My(r,e,t){return e=li(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function RH(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cy(0),this.expirationTimes=cy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cy(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nw(r,e,t,n,i,s,o,a,u){return r=new RH(r,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=li(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},xw(s),r}function OH(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uu,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function dR(r){if(!r)return _a;r=r._reactInternals;e:{if(Sl(r)!==r||r.tag!==1)throw Error(le(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(r.tag===1){var t=r.type;if(xn(t))return dM(r,t,e)}return e}function fR(r,e,t,n,i,s,o,a,u){return r=Nw(t,n,!0,r,i,s,o,a,u),r.context=dR(null),t=r.current,n=tn(),i=fa(t),s=fo(n,i),s.callback=e??null,ca(t,s,i),r.current.lanes=i,bd(r,i,n),_n(r,n),r}function $g(r,e,t,n){var i=e.current,s=tn(),o=fa(i);return t=dR(t),e.context===null?e.context=t:e.pendingContext=t,e=fo(s,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=ca(i,e,o),r!==null&&(Xi(r,i,o,s),Wp(r,i,o)),o}function Vm(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function lP(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function Fw(r,e){lP(r,e),(r=r.alternate)&&lP(r,e)}function BH(){return null}var pR=typeof reportError=="function"?reportError:function(r){console.error(r)};function Dw(r){this._internalRoot=r}Yg.prototype.render=Dw.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(le(409));$g(r,e,null,null)};Yg.prototype.unmount=Dw.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;ml(function(){$g(null,r,null,null)}),e[xo]=null}};function Yg(r){this._internalRoot=r}Yg.prototype.unstable_scheduleHydration=function(r){if(r){var e=YI();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Qo.length&&e!==0&&e<Qo[t].priority;t++);Qo.splice(t,0,r),t===0&&WI(r)}};function Uw(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Gg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function uP(){}function LH(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=Vm(o);s.call(l)}}var o=fR(e,n,r,0,null,!1,!1,"",uP);return r._reactRootContainer=o,r[xo]=o.current,Zc(r.nodeType===8?r.parentNode:r),ml(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=Vm(u);a.call(l)}}var u=Nw(r,0,!1,null,null,!1,!1,"",uP);return r._reactRootContainer=u,r[xo]=u.current,Zc(r.nodeType===8?r.parentNode:r),ml(function(){$g(e,u,t,n)}),u}function Wg(r,e,t,n,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Vm(o);a.call(u)}}$g(e,o,r,i)}else o=LH(t,e,r,i,n);return Vm(o)}zI=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=mc(e.pendingLanes);t!==0&&(iw(e,t|1),_n(e,Qt()),!(st&6)&&(ah=Qt()+500,Ca()))}break;case 13:ml(function(){var n=_o(r,1);if(n!==null){var i=tn();Xi(n,r,1,i)}}),Fw(r,1)}};sw=function(r){if(r.tag===13){var e=_o(r,134217728);if(e!==null){var t=tn();Xi(e,r,134217728,t)}Fw(r,134217728)}};$I=function(r){if(r.tag===13){var e=fa(r),t=_o(r,e);if(t!==null){var n=tn();Xi(t,r,e,n)}Fw(r,e)}};YI=function(){return ft};GI=function(r,e){var t=ft;try{return ft=r,e()}finally{ft=t}};vx=function(r,e,t){switch(e){case"input":if(hx(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=Fg(n);if(!i)throw Error(le(90));SI(n),hx(n,i)}}}break;case"textarea":EI(r,t);break;case"select":e=t.value,e!=null&&Uu(r,!!t.multiple,e,!1)}};RI=Rw;OI=ml;var NH={usingClientEntryPoint:!1,Events:[Td,pu,Fg,II,MI,Rw]},ic={findFiberByHostInstance:Ka,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FH={bundleType:ic.bundleType,version:ic.version,rendererPackageName:ic.rendererPackageName,rendererConfig:ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:To.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=NI(r),r===null?null:r.stateNode},findFiberByHostInstance:ic.findFiberByHostInstance||BH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fp.isDisabled&&fp.supportsFiber)try{Og=fp.inject(FH),ks=fp}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NH;$n.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uw(e))throw Error(le(200));return OH(r,e,null,t)};$n.createRoot=function(r,e){if(!Uw(r))throw Error(le(299));var t=!1,n="",i=pR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nw(r,1,!1,null,null,t,!1,n,i),r[xo]=e.current,Zc(r.nodeType===8?r.parentNode:r),new Dw(e)};$n.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(le(188)):(r=Object.keys(r).join(","),Error(le(268,r)));return r=NI(e),r=r===null?null:r.stateNode,r};$n.flushSync=function(r){return ml(r)};$n.hydrate=function(r,e,t){if(!Gg(e))throw Error(le(200));return Wg(null,r,e,!0,t)};$n.hydrateRoot=function(r,e,t){if(!Uw(r))throw Error(le(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",o=pR;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=fR(e,null,r,1,t??null,i,!1,s,o),r[xo]=e.current,Zc(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Yg(e)};$n.render=function(r,e,t){if(!Gg(e))throw Error(le(200));return Wg(null,r,e,!1,t)};$n.unmountComponentAtNode=function(r){if(!Gg(r))throw Error(le(40));return r._reactRootContainer?(ml(function(){Wg(null,null,r,!1,function(){r._reactRootContainer=null,r[xo]=null})}),!0):!1};$n.unstable_batchedUpdates=Rw;$n.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!Gg(t))throw Error(le(200));if(r==null||r._reactInternals===void 0)throw Error(le(38));return Wg(r,e,t,!1,n)};$n.version="18.3.1-next-f1338f8080-20240426";function mR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mR)}catch(r){console.error(r)}}mR(),mI.exports=$n;var DH=mI.exports,jw,hP=DH;jw=hP.createRoot,hP.hydrateRoot;function gR(...r){const e={};for(const t of r)for(const n of t)e[n.id]=n;return Object.values(e)}const vR="game_Bg_L",Sn="message",yR="lang_components";function UH(r){return[{id:Sn,src:`text/${r}.json`},{id:yR,src:`compress/lang/${r}@2x.[avif,webp,png].json`}]}function jH(r,...e){return gR(UH(r),...e)}const xR="sounds",_R="components",Xw="uncomponents",em="preload_component";function XH(r){return[{id:xR,src:"sound/sounds.json"},{id:_R,src:"compress/components-_default@2x.[avif,webp,png].json"}]}function HH(r,...e){return gR(XH(),...e)}function zH(r,e){return`./assets/${r}${e?`?v=${e}`:""}`}function $H(r,e){const t=r.match(/\[(.+)\]/);if(t){const n=t[1].split(",");r=r.replace(t[0],Oe.Obj.filterImageFormat(n))}return zH(r,e)}function wR(r,e,t){const n=[];function i(s,o,a={}){fn.add({src:$H(o,e),alias:s,...a})}for(const s of r)switch(n.push(s.id),s.type){default:i(s.id,s.src,s.options)}return fn.load(n,t)}function YH(r){return fn.get(r)}function GH(r,e){const t=fn.get(r);let n=t.textures[e];if(!n){for(const i of t.linkedSheets)if(n=i.textures[e],n)break}return n}function WH(r){return fn.get(r)}function Hn(r,e){return(fn.get(r)||{})[e]||e}function VH(r){const[e,t]=L.useState("");return L.useEffect(()=>{if(!e){const n=setInterval(()=>{const i="disablel",s=Hn(Sn,i);s&&i!=s&&(t(s),clearInterval(n))},1e3)}},[e]),E.jsx("div",{id:"screen-only-tips-p",className:"screen-only-tips-mod p",children:E.jsx("div",{className:"tips",children:e})})}function qH(r){const[e,t]=L.useState("");return L.useEffect(()=>{if(!e){const n=setInterval(()=>{const i="disablep",s=Hn(Sn,i);s&&i!=s&&(t(s),clearInterval(n))},1e3)}},[e]),E.jsx("div",{id:"screen-only-tips-l",className:"screen-only-tips-mod p",children:E.jsx("div",{className:"tips",children:e})})}function KH(){return E.jsxs(E.Fragment,{children:[E.jsx(qH,{}),E.jsx(VH,{})]})}function QH({children:r}){return E.jsx("div",{id:"App",className:"app-mod",children:r})}function ZH(){if(m2())return Promise.resolve();{const r={cs:`
WebGL
`,kh:`
  WebGL
 WebGL`,id:`Loadin game gagal.
Browser Anda tidak mendukung atau telah menonaktifkan WebGL. 
Load ulang game di browser dengan WebGL diaktifkan.`,kr:`  .
 WebGL   .
WebGL    .`,th:`
 WebGL,
 `,vn:`Ti tr chi khng thnh cng.
Trnh duyt ca bn khng h tr hoc  tt WebGL. 
Vui lng ti li tr chi trong trnh duyt c bt WebGL.`,tr:"Oyun ykleme baarsz oldu Taraycnz WebGL'yi desteklemiyor veya devre d brakm.Ltfen oyunu WebGL'nin etkin olduu tarayclarda yeniden ykleyin.",pt:"O carregamento do jogo falhou. Seu navegador no suporta ou desabilitou o WebGL. Por favor, recarregue o jogo em navegadores com o WebGL ativado."}[Oe.Obj.urlOptions.lang]??`Game loading failed. 
Your browser does not support or has disabled the WebGL. 
Please reload game in browsers with WebGL enabled.`;return jw(document.body).render(E.jsx("div",{className:"webgl-not-support",children:E.jsx("div",{className:"text",children:r})})),Promise.reject("webgl not support")}}function JH(r=[]){return new Promise((e,t)=>{if(r.length===0)e();else{const n=[];for(const i of r){const s=new Oj(i);n.push(s.load(null,3e5))}Promise.all(n).then(()=>{e()})}})}function e7(){return Promise.all([gk.test(),vk.test()]).then(([r,e])=>{Oe.Obj.setSupportImagesFormat(e,r);const t=document.getElementById("blur-bg");t.className=t.className+" "+Oe.Obj.filterImageFormat(["avif","webp","jpg"])})}function t7(r,e=[]){const t=Oe.Obj,{operator:n,token:i,loginUrl:s,funPLay:o}=t.urlOptions;n?!o&&!i&&s?window.open(t.getLoginUrl(),"_self"):ZH().then(JH.bind(null,e)).then(e7).then(()=>{jw(document.getElementById("root")).render(E.jsxs(E.Fragment,{children:[E.jsx(QH,{children:r}),E.jsx(KH,{})]}))}).catch(a=>{console.error(a)}):alert("The operator parameter is missing!")}var Vg={exports:{}},bR={exports:{}},r7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",n7=r7,i7=n7;function SR(){}function TR(){}TR.resetWarningCache=SR;var s7=function(){function r(n,i,s,o,a,u){if(u!==i7){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:TR,resetWarningCache:SR};return t.PropTypes=t,t};bR.exports=s7();var o7=bR.exports;const Et=dd(o7);function Un(r){return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(r)}function ER(r){var e=function(t,n){if(Un(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,n||"default");if(Un(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}(r,"string");return Un(e)==="symbol"?e:String(e)}function Kt(r,e,t){return(e=ER(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ry(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function bo(r){return function(e){if(Array.isArray(e))return Ry(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return Ry(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ry(e,t):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Wt(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i]}var a7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l7(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var u7=function(r){return r==null};function vc(r){var e=[];if(r===void 0)return e;if(typeof r=="string")e=r.split(",");else if(typeof r=="number")e=[r];else if(Array.isArray(r))e=bo(r);else{if(r===null||Un(r)!=="object")return e;e=[r&&(r==null?void 0:r.x)||0,r&&(r==null?void 0:r.y)||0]}return e.filter(function(t){return!u7(t)&&!isNaN(t)}).map(Number)}function cP(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function Oy(r){return r instanceof Xe||r instanceof Ss}var qm=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function By(r,e,t){if(Oy(r[e])&&Oy(t))r[e].copyFrom(t);else if(Oy(r[e])){var n=vc(t);Wt(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(t),Un(t)),r[e].set(n.shift(),n.shift())}else r[e]=t}var Vl,CR=function(r){var e,t=r;if(!Array.isArray(t)){if(e=r,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");t=Object.keys(r)}var n={};return t.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},PR=function(r){return function(){return!r.apply(void 0,arguments)}},Kx="children",h7=(Kt(Vl={},Kx,!0),Kt(Vl,"parent",!0),Kt(Vl,"worldAlpha",!0),Kt(Vl,"worldTransform",!0),Kt(Vl,"worldVisible",!0),Vl),Qx={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Ns=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var u,l;a==null||(u=a.__reactpixi)===null||u===void 0||(l=u.root)===null||l===void 0||l.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,u){if(t.hasOwnProperty(a))return Wt(u.typeofs.some(function(l){return Un(t[a])===l})||u.instanceofs.some(function(l){return t[a]instanceof l}),"".concat(r," ").concat(a," prop is invalid")),t[a]};if(t.texture)return Wt(t.texture instanceof Ie,"".concat(r," texture needs to be typeof `Texture`")),t.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,Ie]});Wt(!!s,"".concat(r," could not get texture from props"));var o=Ie.from(s);return o.__reactpixi={root:e},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},c7=PR(CR([].concat(bo(Object.keys(h7)),bo(qm))));function Fs(r,e,t){var n=!1;if(Wt(Ot.prototype.isPrototypeOf(r),"instance needs to be typeof `DisplayObject`, got `%s`",Un(r)),!t.ignoreEvents)for(var i=typeof r.removeListener=="function",s=typeof r.on=="function",o=0;o<qm.length;o++){var a=qm[o];e[a]!==t[a]&&(n=!0,typeof e[a]=="function"&&i&&r.removeListener(a,e[a]),typeof t[a]=="function"&&s&&r.on(a,t[a]))}var u=Object.keys(t||{});if(t.overwriteProps){for(var l=0;l<u.length;l++){var c=u[l];e[c]!==t[c]&&(n=!0,By(r,c,t[c]))}return n}for(var h=u.filter(c7),d=0;d<h.length;d++){var p=h[d],g=t[p];t[p]!==e[p]&&(n=!0),g!==void 0?By(r,p,g):p in Qx?(console.warn("setting default value: ".concat(p,", from: ").concat(r[p]," to: ").concat(g," for"),r),n=!0,By(r,p,Qx[p])):console.warn("ignoring prop: ".concat(p,", from ").concat(r[p]," to ").concat(g," for"),r)}return n}var d7=function(r,e){var t=e.text,n=e.style;return new $U(t,n)},f7=function(){return new Vr};function Pa(r,e){if(r==null)return{};var t,n,i=function(o,a){if(o==null)return{};var u,l,c={},h=Object.keys(o);for(l=0;l<h.length;l++)u=h[l],a.indexOf(u)>=0||(c[u]=o[u]);return c}(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}var p7=["draw","geometry"],m7=function(r,e){var t=e.geometry;Wt(!t||t instanceof Fu,"Graphics geometry needs to be a `Graphics`");var n=t?new Fu(t.geometry):new Fu;return n.applyProps=function(i,s,o){var a=o.draw;o.geometry;var u=Fs(i,s,Pa(o,p7));return s.draw!==a&&typeof a=="function"&&(u=!0,a.call(n,n)),u},n},g7=["image","texture"],v7=function(r,e){var t=e.leftWidth,n=t===void 0?10:t,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,u=e.bottomHeight,l=u===void 0?10:u,c=Ns("NineSlicePlane",r,e),h=new fU(c,n,s,a,l);return h.applyProps=function(d,p,g){var v=g.image,x=g.texture,y=Fs(d,p,Pa(g,g7));return(v||x)&&(x!==p.texture&&(y=!0),d.texture=Ns("NineSlicePlane",r,g)),y},h};function dP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?dP(Object(t),!0).forEach(function(n){Kt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):dP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var y7=function(r,e){var t=e.maxSize,n=t===void 0?1500:t,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,u=pp(pp({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),l=pp(pp({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),c=new gU(n,u,s,a);return c.willUnmount=function(h,d,p){h.destroy(l)},c},x7=["image","texture"],_7=function(r,e){var t=new qi(Ns("Sprite",r,e));return t.applyProps=function(n,i,s){var o=s.image,a=s.texture,u=Fs(n,i,Pa(s,x7));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(u=!0),n.texture=Ns("Sprite",r,s)),u},t},w7=["textures","isPlaying","initialFrame","images"],b7=function(r,e){var t=e.textures,n=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(l){return l.map(function(c){return Wt(c instanceof Ie||(c==null?void 0:c.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),c})},u=n?zc.fromImages(n):new zc(a(t));return u[s?"gotoAndPlay":"gotoAndStop"](o||0),u.applyProps=function(l,c,h){var d=h.textures,p=h.isPlaying,g=h.initialFrame,v=h.images,x=Fs(l,c,Pa(h,w7));if(v&&c.images!==v){for(var y=[],b=0;b<v.length;++b)y.push(Ie.from(v[b]));l.textures=y,x=!0}if(d&&c.textures!==d&&(l.textures=a(d),x=!0),p!==c.isPlaying||g!==c.initialFrame){var _=typeof g=="number"?g:u.currentFrame||0;u[p?"gotoAndPlay":"gotoAndStop"](_),x=!0}return x},u},S7=function(r,e){var t=e.text,n=t===void 0?"":t,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new Y_(n,s);return o?(a.updateText(),new qi(a.texture)):a},T7=["tileScale","tilePosition","image","texture"],E7=function(r,e){var t=e.width,n=t===void 0?100:t,i=e.height,s=i===void 0?100:i,o=Ns("TilingSprite",r,e),a=new G_(o,n,s);return a.applyProps=function(u,l,c){var h=c.tileScale,d=c.tilePosition,p=c.image,g=c.texture,v=Fs(u,l,Pa(c,T7));if(d){var x,y=vc(d);(x=u.tilePosition).set.apply(x,bo(y)),v=!cP(vc(l.tilePosition),y)||v}if(h){var b,_=vc(h);(b=u.tileScale).set.apply(b,bo(_)),v=!cP(vc(l.tileScale),_)||v}return(p||g)&&(g!==l.texture&&(v=!0),u.texture=Ns("Sprite",r,c)),v},a},C7=["image","texture"],P7=function(r,e){var t=Ns("Mesh",r,e),n=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?Oi.TRIANGLES:o,u=new pU(t,n,i,s,a);return u.applyProps=function(l,c,h){var d=h.image,p=h.texture,g=Fs(l,c,Pa(h,C7));return(d||p)&&(p!==c.texture&&(g=!0),l.texture=Ns("Mesh",r,h)),g},u},A7=["image","texture"],k7=function(r,e){var t=Ns("SimpleRope",r,e),n=e.points,i=new mU(t,n);return i.applyProps=function(s,o,a){var u=a.image,l=a.texture,c=Pa(a,A7);Wt(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<Point>");var h=Fs(s,o,c);return(u||l)&&(l!==o.texture&&(h=!0),s.texture=Ns("SimpleRope",r,a)),h},i},I7=Object.freeze({__proto__:null,BitmapText:d7,Container:f7,Graphics:m7,NineSlicePlane:v7,ParticleContainer:y7,Sprite:_7,Text:S7,TilingSprite:E7,SimpleMesh:P7,SimpleRope:k7,AnimatedSprite:b7});function fP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fP(Object(t),!0).forEach(function(n){Kt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Tn={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},M7=Object.keys(Tn).reduce(function(r,e){return pP(pP({},r),{},Kt({},e,I7[e]))},{}),AR={};function R7(r,e){return Wt(!!r,"Expect type to be defined, got `%s`",r),Wt(!Tn[r],"Component `%s` could not be created, already exists in default components.",r),AR[r]=e,r}var mP,gP,vP,yP,Zx={},Jx={},O7={get exports(){return Jx},set exports(r){Jx=r}},xP={};function B7(){return gP||(gP=1,O7.exports=(mP||(mP=1,function(r){function e(H,G){var z=H.length;H.push(G);e:for(;0<z;){var V=z-1>>>1,Z=H[V];if(!(0<i(Z,G)))break e;H[V]=G,H[z]=Z,z=V}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var G=H[0],z=H.pop();if(z!==G){H[0]=z;e:for(var V=0,Z=H.length,re=Z>>>1;V<re;){var he=2*(V+1)-1,ve=H[he],Me=he+1,Ne=H[Me];if(0>i(ve,z))Me<Z&&0>i(Ne,ve)?(H[V]=Ne,H[Me]=z,V=Me):(H[V]=ve,H[he]=z,V=he);else{if(!(Me<Z&&0>i(Ne,z)))break e;H[V]=Ne,H[Me]=z,V=Me}}}return G}function i(H,G){var z=H.sortIndex-G.sortIndex;return z!==0?z:H.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,h=null,d=3,p=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;function _(H){for(var G=t(l);G!==null;){if(G.callback===null)n(l);else{if(!(G.startTime<=H))break;n(l),G.sortIndex=G.expirationTime,e(u,G)}G=t(l)}}function S(H){if(v=!1,_(H),!g)if(t(u)!==null)g=!0,W(I);else{var G=t(l);G!==null&&Q(S,G.startTime-H)}}function I(H,G){g=!1,v&&(v=!1,y(O),O=-1),p=!0;var z=d;try{for(_(G),h=t(u);h!==null&&(!(h.expirationTime>G)||H&&!X());){var V=h.callback;if(typeof V=="function"){h.callback=null,d=h.priorityLevel;var Z=V(h.expirationTime<=G);G=r.unstable_now(),typeof Z=="function"?h.callback=Z:h===t(u)&&n(u),_(G)}else n(u);h=t(u)}if(h!==null)var re=!0;else{var he=t(l);he!==null&&Q(S,he.startTime-G),re=!1}return re}finally{h=null,d=z,p=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,k=!1,M=null,O=-1,F=5,U=-1;function X(){return!(r.unstable_now()-U<F)}function B(){if(M!==null){var H=r.unstable_now();U=H;var G=!0;try{G=M(!0,H)}finally{G?A():(k=!1,M=null)}}else k=!1}if(typeof b=="function")A=function(){b(B)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=B,A=function(){j.postMessage(null)}}else A=function(){x(B,0)};function W(H){M=H,k||(k=!0,A())}function Q(H,G){O=x(function(){H(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,W(I))},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(H){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var z=d;d=G;try{return H()}finally{d=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(H,G){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var z=d;d=H;try{return G()}finally{d=z}},r.unstable_scheduleCallback=function(H,G,z){var V=r.unstable_now();switch(z=typeof z=="object"&&z!==null&&typeof(z=z.delay)=="number"&&0<z?V+z:V,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return H={id:c++,callback:G,priorityLevel:H,startTime:z,expirationTime:Z=z+Z,sortIndex:-1},z>V?(H.sortIndex=z,e(l,H),t(u)===null&&H===t(l)&&(v?(y(O),O=-1):v=!0,Q(S,z-V))):(H.sortIndex=Z,e(u,H),g||p||(g=!0,W(I))),H},r.unstable_shouldYield=X,r.unstable_wrapCallback=function(H){var G=d;return function(){var z=d;d=G;try{return H.apply(this,arguments)}finally{d=z}}}}(xP)),xP)),Jx}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function L7(){return yP||(yP=1,vP=function(r){var e={},t=ho,n=B7(),i=Object.assign;function s(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,w=1;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),u=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),S=Symbol.iterator;function I(f){return f===null||typeof f!="object"?null:typeof(f=S&&f[S]||f["@@iterator"])=="function"?f:null}function A(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case l:return"Fragment";case u:return"Portal";case h:return"Profiler";case c:return"StrictMode";case v:return"Suspense";case x:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case p:return(f.displayName||"Context")+".Consumer";case d:return(f._context.displayName||"Context")+".Provider";case g:var m=f.render;return(f=f.displayName)||(f=(f=m.displayName||m.name||"")!==""?"ForwardRef("+f+")":"ForwardRef"),f;case y:return(m=f.displayName||null)!==null?m:A(f.type)||"Memo";case b:m=f._payload,f=f._init;try{return A(f(m))}catch{}}return null}function k(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=(f=m.render).displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(m);case 8:return m===c?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function M(f){var m=f,w=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do 4098&(m=f).flags&&(w=m.return),f=m.return;while(f)}return m.tag===3?w:null}function O(f){if(M(f)!==f)throw Error(s(188))}function F(f){var m=f.alternate;if(!m){if((m=M(f))===null)throw Error(s(188));return m!==f?null:f}for(var w=f,T=m;;){var P=w.return;if(P===null)break;var R=P.alternate;if(R===null){if((T=P.return)!==null){w=T;continue}break}if(P.child===R.child){for(R=P.child;R;){if(R===w)return O(P),f;if(R===T)return O(P),m;R=R.sibling}throw Error(s(188))}if(w.return!==T.return)w=P,T=R;else{for(var D=!1,$=P.child;$;){if($===w){D=!0,w=P,T=R;break}if($===T){D=!0,T=P,w=R;break}$=$.sibling}if(!D){for($=R.child;$;){if($===w){D=!0,w=R,T=P;break}if($===T){D=!0,T=R,w=P;break}$=$.sibling}if(!D)throw Error(s(189))}}if(w.alternate!==T)throw Error(s(190))}if(w.tag!==3)throw Error(s(188));return w.stateNode.current===w?f:m}function U(f){return(f=F(f))!==null?X(f):null}function X(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=X(f);if(m!==null)return m;f=f.sibling}return null}function B(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var m=B(f);if(m!==null)return m}f=f.sibling}return null}var N,j=Array.isArray,W=r.getPublicInstance,Q=r.getRootHostContext,H=r.getChildHostContext,G=r.prepareForCommit,z=r.resetAfterCommit,V=r.createInstance,Z=r.appendInitialChild,re=r.finalizeInitialChildren,he=r.prepareUpdate,ve=r.shouldSetTextContent,Me=r.createTextInstance,Ne=r.scheduleTimeout,ze=r.cancelTimeout,We=r.noTimeout,He=r.isPrimaryRenderer,Fe=r.supportsMutation,ut=r.supportsPersistence,Ze=r.supportsHydration,Sr=r.getInstanceFromNode,Lr=r.preparePortalMount,Qi=r.getCurrentEventPriority,Cl=r.detachDeletedInstance,gi=r.supportsMicrotasks,Th=r.scheduleMicrotask,Eo=r.supportsTestSelectors,Co=r.findFiberRoot,Bd=r.getBoundingRect,Ld=r.getTextContent,Gn=r.isHiddenSubtree,fO=r.matchAccessibilityRole,pO=r.setFocusIfFocusable,mO=r.setupIntersectionObserver,gO=r.appendChild,vO=r.appendChildToContainer,yO=r.commitTextUpdate,xO=r.commitMount,_O=r.commitUpdate,wO=r.insertBefore,bO=r.insertInContainerBefore,SO=r.removeChild,TO=r.removeChildFromContainer,Sb=r.resetTextContent,EO=r.hideInstance,CO=r.hideTextInstance,PO=r.unhideInstance,AO=r.unhideTextInstance,kO=r.clearContainer,IO=r.cloneInstance,Tb=r.createContainerChildSet,Eb=r.appendChildToContainerChildSet,MO=r.finalizeContainerChildren,s0=r.replaceContainerChildren,Cb=r.cloneHiddenInstance,Pb=r.cloneHiddenTextInstance,RO=r.canHydrateInstance,OO=r.canHydrateTextInstance,BO=r.canHydrateSuspenseInstance,Ab=r.isSuspenseInstancePending,o0=r.isSuspenseInstanceFallback,LO=r.getSuspenseInstanceFallbackErrorDetails,NO=r.registerSuspenseInstanceRetry,Nd=r.getNextHydratableSibling,FO=r.getFirstHydratableChild,DO=r.getFirstHydratableChildWithinContainer,UO=r.getFirstHydratableChildWithinSuspenseInstance,jO=r.hydrateInstance,XO=r.hydrateTextInstance,HO=r.hydrateSuspenseInstance,zO=r.getNextHydratableInstanceAfterSuspenseInstance,$O=r.commitHydratedContainer,YO=r.commitHydratedSuspenseInstance,GO=r.clearSuspenseBoundary,WO=r.clearSuspenseBoundaryFromContainer,VO=r.shouldDeleteUnhydratedTailInstances,qO=r.didNotMatchHydratedContainerTextInstance,KO=r.didNotMatchHydratedTextInstance;function Eh(f){if(N===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);N=m&&m[1]||""}return`
`+N+f}var a0=!1;function l0(f,m){if(!f||a0)return"";a0=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ee){var T=ee}Reflect.construct(f,[],m)}else{try{m.call()}catch(ee){T=ee}f.call(m.prototype)}else{try{throw Error()}catch(ee){T=ee}f()}}catch(ee){if(ee&&T&&typeof ee.stack=="string"){for(var P=ee.stack.split(`
`),R=T.stack.split(`
`),D=P.length-1,$=R.length-1;1<=D&&0<=$&&P[D]!==R[$];)$--;for(;1<=D&&0<=$;D--,$--)if(P[D]!==R[$]){if(D!==1||$!==1)do if(D--,0>--$||P[D]!==R[$]){var K=`
`+P[D].replace(" at new "," at ");return f.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",f.displayName)),K}while(1<=D&&0<=$);break}}}finally{a0=!1,Error.prepareStackTrace=w}return(f=f?f.displayName||f.name:"")?Eh(f):""}var QO=Object.prototype.hasOwnProperty,u0=[],Pl=-1;function Po(f){return{current:f}}function At(f){0>Pl||(f.current=u0[Pl],u0[Pl]=null,Pl--)}function vt(f,m){Pl++,u0[Pl]=f.current,f.current=m}var Ao={},Nr=Po(Ao),sn=Po(!1),Aa=Ao;function Al(f,m){var w=f.type.contextTypes;if(!w)return Ao;var T=f.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===m)return T.__reactInternalMemoizedMaskedChildContext;var P,R={};for(P in w)R[P]=m[P];return T&&((f=f.stateNode).__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=R),R}function En(f){return(f=f.childContextTypes)!=null}function h0(){At(sn),At(Nr)}function kb(f,m,w){if(Nr.current!==Ao)throw Error(s(168));vt(Nr,m),vt(sn,w)}function Ib(f,m,w){var T=f.stateNode;if(m=m.childContextTypes,typeof T.getChildContext!="function")return w;for(var P in T=T.getChildContext())if(!(P in m))throw Error(s(108,k(f)||"Unknown",P));return i({},w,T)}function Fd(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Ao,Aa=Nr.current,vt(Nr,f),vt(sn,sn.current),!0}function Mb(f,m,w){var T=f.stateNode;if(!T)throw Error(s(169));w?(f=Ib(f,m,Aa),T.__reactInternalMemoizedMergedChildContext=f,At(sn),At(Nr),vt(Nr,f)):At(sn),vt(sn,w)}var vi=Math.clz32?Math.clz32:function(f){return(f>>>=0)===0?32:31-(ZO(f)/JO|0)|0},ZO=Math.log,JO=Math.LN2,c0=64,d0=4194304;function Ch(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&f;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&f;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Dd(f,m){var w=f.pendingLanes;if(w===0)return 0;var T=0,P=f.suspendedLanes,R=f.pingedLanes,D=268435455&w;if(D!==0){var $=D&~P;$!==0?T=Ch($):(R&=D)!==0&&(T=Ch(R))}else(D=w&~P)!==0?T=Ch(D):R!==0&&(T=Ch(R));if(T===0)return 0;if(m!==0&&m!==T&&!(m&P)&&((P=T&-T)>=(R=m&-m)||P===16&&4194240&R))return m;if(4&T&&(T|=16&w),(m=f.entangledLanes)!==0)for(f=f.entanglements,m&=T;0<m;)P=1<<(w=31-vi(m)),T|=f[w],m&=~P;return T}function eB(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;default:return-1}}function f0(f){return(f=-1073741825&f.pendingLanes)!==0?f:1073741824&f?1073741824:0}function Rb(){var f=c0;return!(4194240&(c0<<=1))&&(c0=64),f}function p0(f){for(var m=[],w=0;31>w;w++)m.push(f);return m}function Ph(f,m,w){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),(f=f.eventTimes)[m=31-vi(m)]=w}function m0(f,m){var w=f.entangledLanes|=m;for(f=f.entanglements;w;){var T=31-vi(w),P=1<<T;P&m|f[T]&m&&(f[T]|=m),w&=~P}}var ot=0;function Ob(f){return 1<(f&=-f)?4<f?268435455&f?16:536870912:4:1}var g0=n.unstable_scheduleCallback,Bb=n.unstable_cancelCallback,tB=n.unstable_shouldYield,rB=n.unstable_requestPaint,fr=n.unstable_now,v0=n.unstable_ImmediatePriority,nB=n.unstable_UserBlockingPriority,Lb=n.unstable_NormalPriority,iB=n.unstable_IdlePriority,Ud=null,Zi=null,yi=typeof Object.is=="function"?Object.is:function(f,m){return f===m&&(f!==0||1/f==1/m)||f!=f&&m!=m},Xs=null,jd=!1,y0=!1;function Nb(f){Xs===null?Xs=[f]:Xs.push(f)}function Ji(){if(!y0&&Xs!==null){y0=!0;var f=0,m=ot;try{var w=Xs;for(ot=1;f<w.length;f++){var T=w[f];do T=T(!0);while(T!==null)}Xs=null,jd=!1}catch(P){throw Xs!==null&&(Xs=Xs.slice(f+1)),g0(v0,Ji),P}finally{ot=m,y0=!1}}return null}var kl=[],Il=0,Xd=null,Hd=0,Wn=[],Vn=0,ka=null,es=1,Hs="";function Ia(f,m){kl[Il++]=Hd,kl[Il++]=Xd,Xd=f,Hd=m}function Fb(f,m,w){Wn[Vn++]=es,Wn[Vn++]=Hs,Wn[Vn++]=ka,ka=f;var T=es;f=Hs;var P=32-vi(T)-1;T&=~(1<<P),w+=1;var R=32-vi(m)+P;if(30<R){var D=P-P%5;R=(T&(1<<D)-1).toString(32),T>>=D,P-=D,es=1<<32-vi(m)+P|w<<P|T,Hs=R+f}else es=1<<R|w<<P|T,Hs=f}function x0(f){f.return!==null&&(Ia(f,1),Fb(f,1,0))}function _0(f){for(;f===Xd;)Xd=kl[--Il],kl[Il]=null,Hd=kl[--Il],kl[Il]=null;for(;f===ka;)ka=Wn[--Vn],Wn[Vn]=null,Hs=Wn[--Vn],Wn[Vn]=null,es=Wn[--Vn],Wn[Vn]=null}var Cn=null,qn=null,kt=!1,Ah=!1,xi=null;function Db(f,m){var w=ei(5,null,null,0);w.elementType="DELETED",w.stateNode=m,w.return=f,(m=f.deletions)===null?(f.deletions=[w],f.flags|=16):m.push(w)}function Ub(f,m){switch(f.tag){case 5:return(m=RO(m,f.type,f.pendingProps))!==null&&(f.stateNode=m,Cn=f,qn=FO(m),!0);case 6:return(m=OO(m,f.pendingProps))!==null&&(f.stateNode=m,Cn=f,qn=null,!0);case 13:if((m=BO(m))!==null){var w=ka!==null?{id:es,overflow:Hs}:null;return f.memoizedState={dehydrated:m,treeContext:w,retryLane:1073741824},(w=ei(18,null,null,0)).stateNode=m,w.return=f,f.child=w,Cn=f,qn=null,!0}return!1;default:return!1}}function w0(f){return(1&f.mode)!=0&&(128&f.flags)==0}function b0(f){if(kt){var m=qn;if(m){var w=m;if(!Ub(f,m)){if(w0(f))throw Error(s(418));m=Nd(w);var T=Cn;m&&Ub(f,m)?Db(T,w):(f.flags=-4097&f.flags|2,kt=!1,Cn=f)}}else{if(w0(f))throw Error(s(418));f.flags=-4097&f.flags|2,kt=!1,Cn=f}}}function jb(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Cn=f}function zd(f){if(!Ze||f!==Cn)return!1;if(!kt)return jb(f),kt=!0,!1;if(f.tag!==3&&(f.tag!==5||VO(f.type)&&!ve(f.type,f.memoizedProps))){var m=qn;if(m){if(w0(f))throw Xb(),Error(s(418));for(;m;)Db(f,m),m=Nd(m)}}if(jb(f),f.tag===13){if(!Ze)throw Error(s(316));if(!(f=(f=f.memoizedState)!==null?f.dehydrated:null))throw Error(s(317));qn=zO(f)}else qn=Cn?Nd(f.stateNode):null;return!0}function Xb(){for(var f=qn;f;)f=Nd(f)}function Ml(){Ze&&(qn=Cn=null,Ah=kt=!1)}function S0(f){xi===null?xi=[f]:xi.push(f)}var sB=o.ReactCurrentBatchConfig;function $d(f,m){if(yi(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var w=Object.keys(f),T=Object.keys(m);if(w.length!==T.length)return!1;for(T=0;T<w.length;T++){var P=w[T];if(!QO.call(m,P)||!yi(f[P],m[P]))return!1}return!0}function oB(f){switch(f.tag){case 5:return Eh(f.type);case 16:return Eh("Lazy");case 13:return Eh("Suspense");case 19:return Eh("SuspenseList");case 0:case 2:case 15:return f=l0(f.type,!1);case 11:return f=l0(f.type.render,!1);case 1:return f=l0(f.type,!0);default:return""}}function _i(f,m){if(f&&f.defaultProps){for(var w in m=i({},m),f=f.defaultProps)m[w]===void 0&&(m[w]=f[w]);return m}return m}var Yd=Po(null),Gd=null,Rl=null,T0=null;function E0(){T0=Rl=Gd=null}function Hb(f,m,w){He?(vt(Yd,m._currentValue),m._currentValue=w):(vt(Yd,m._currentValue2),m._currentValue2=w)}function C0(f){var m=Yd.current;At(Yd),He?f._currentValue=m:f._currentValue2=m}function P0(f,m,w){for(;f!==null;){var T=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,T!==null&&(T.childLanes|=m)):T!==null&&(T.childLanes&m)!==m&&(T.childLanes|=m),f===w)break;f=f.return}}function Ol(f,m){Gd=f,T0=Rl=null,(f=f.dependencies)!==null&&f.firstContext!==null&&(f.lanes&m&&(on=!0),f.firstContext=null)}function Kn(f){var m=He?f._currentValue:f._currentValue2;if(T0!==f)if(f={context:f,memoizedValue:m,next:null},Rl===null){if(Gd===null)throw Error(s(308));Rl=f,Gd.dependencies={lanes:0,firstContext:f}}else Rl=Rl.next=f;return m}var Ma=null;function A0(f){Ma===null?Ma=[f]:Ma.push(f)}function zb(f,m,w,T){var P=m.interleaved;return P===null?(w.next=w,A0(m)):(w.next=P.next,P.next=w),m.interleaved=w,ts(f,T)}function ts(f,m){f.lanes|=m;var w=f.alternate;for(w!==null&&(w.lanes|=m),w=f,f=f.return;f!==null;)f.childLanes|=m,(w=f.alternate)!==null&&(w.childLanes|=m),w=f,f=f.return;return w.tag===3?w.stateNode:null}var ko=!1;function k0(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $b(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function zs(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function Io(f,m,w){var T=f.updateQueue;if(T===null)return null;if(T=T.shared,(2&Je)!=0){var P=T.pending;return P===null?m.next=m:(m.next=P.next,P.next=m),T.pending=m,ts(f,w)}return(P=T.interleaved)===null?(m.next=m,A0(T)):(m.next=P.next,P.next=m),T.interleaved=m,ts(f,w)}function Wd(f,m,w){if((m=m.updateQueue)!==null&&(m=m.shared,(4194240&w)!=0)){var T=m.lanes;w|=T&=f.pendingLanes,m.lanes=w,m0(f,w)}}function Yb(f,m){var w=f.updateQueue,T=f.alternate;if(T!==null&&w===(T=T.updateQueue)){var P=null,R=null;if((w=w.firstBaseUpdate)!==null){do{var D={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};R===null?P=R=D:R=R.next=D,w=w.next}while(w!==null);R===null?P=R=m:R=R.next=m}else P=R=m;return w={baseState:T.baseState,firstBaseUpdate:P,lastBaseUpdate:R,shared:T.shared,effects:T.effects},void(f.updateQueue=w)}(f=w.lastBaseUpdate)===null?w.firstBaseUpdate=m:f.next=m,w.lastBaseUpdate=m}function Vd(f,m,w,T){var P=f.updateQueue;ko=!1;var R=P.firstBaseUpdate,D=P.lastBaseUpdate,$=P.shared.pending;if($!==null){P.shared.pending=null;var K=$,ee=K.next;K.next=null,D===null?R=ee:D.next=ee,D=K;var ie=f.alternate;ie!==null&&($=(ie=ie.updateQueue).lastBaseUpdate)!==D&&($===null?ie.firstBaseUpdate=ee:$.next=ee,ie.lastBaseUpdate=K)}if(R!==null){var ge=P.baseState;for(D=0,ie=ee=K=null,$=R;;){var te=$.lane,ce=$.eventTime;if((T&te)===te){ie!==null&&(ie=ie.next={eventTime:ce,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Ee=f,Ge=$;switch(te=m,ce=w,Ge.tag){case 1:if(typeof(Ee=Ge.payload)=="function"){ge=Ee.call(ce,ge,te);break e}ge=Ee;break e;case 3:Ee.flags=-65537&Ee.flags|128;case 0:if((te=typeof(Ee=Ge.payload)=="function"?Ee.call(ce,ge,te):Ee)==null)break e;ge=i({},ge,te);break e;case 2:ko=!0}}$.callback!==null&&$.lane!==0&&(f.flags|=64,(te=P.effects)===null?P.effects=[$]:te.push($))}else ce={eventTime:ce,lane:te,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ie===null?(ee=ie=ce,K=ge):ie=ie.next=ce,D|=te;if(($=$.next)===null){if(($=P.shared.pending)===null)break;$=(te=$).next,te.next=null,P.lastBaseUpdate=te,P.shared.pending=null}}if(ie===null&&(K=ge),P.baseState=K,P.firstBaseUpdate=ee,P.lastBaseUpdate=ie,(m=P.shared.interleaved)!==null){P=m;do D|=P.lane,P=P.next;while(P!==m)}else R===null&&(P.shared.lanes=0);Oa|=D,f.lanes=D,f.memoizedState=ge}}function Gb(f,m,w){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var T=f[m],P=T.callback;if(P!==null){if(T.callback=null,T=w,typeof P!="function")throw Error(s(191,P));P.call(T)}}}var Wb=new t.Component().refs;function I0(f,m,w,T){w=(w=w(T,m=f.memoizedState))==null?m:i({},m,w),f.memoizedState=w,f.lanes===0&&(f.updateQueue.baseState=w)}var qd={isMounted:function(f){return!!(f=f._reactInternals)&&M(f)===f},enqueueSetState:function(f,m,w){f=f._reactInternals;var T=Ur(),P=Bo(f),R=zs(T,P);R.payload=m,w!=null&&(R.callback=w),(m=Io(f,R,P))!==null&&(Jn(m,f,P,T),Wd(m,f,P))},enqueueReplaceState:function(f,m,w){f=f._reactInternals;var T=Ur(),P=Bo(f),R=zs(T,P);R.tag=1,R.payload=m,w!=null&&(R.callback=w),(m=Io(f,R,P))!==null&&(Jn(m,f,P,T),Wd(m,f,P))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var w=Ur(),T=Bo(f),P=zs(w,T);P.tag=2,m!=null&&(P.callback=m),(m=Io(f,P,T))!==null&&(Jn(m,f,T,w),Wd(m,f,T))}};function Vb(f,m,w,T,P,R,D){return typeof(f=f.stateNode).shouldComponentUpdate=="function"?f.shouldComponentUpdate(T,R,D):!m.prototype||!m.prototype.isPureReactComponent||!$d(w,T)||!$d(P,R)}function qb(f,m,w){var T=!1,P=Ao,R=m.contextType;return typeof R=="object"&&R!==null?R=Kn(R):(P=En(m)?Aa:Nr.current,R=(T=(T=m.contextTypes)!=null)?Al(f,P):Ao),m=new m(w,R),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qd,f.stateNode=m,m._reactInternals=f,T&&((f=f.stateNode).__reactInternalMemoizedUnmaskedChildContext=P,f.__reactInternalMemoizedMaskedChildContext=R),m}function Kb(f,m,w,T){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,T),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,T),m.state!==f&&qd.enqueueReplaceState(m,m.state,null)}function M0(f,m,w,T){var P=f.stateNode;P.props=w,P.state=f.memoizedState,P.refs=Wb,k0(f);var R=m.contextType;typeof R=="object"&&R!==null?P.context=Kn(R):(R=En(m)?Aa:Nr.current,P.context=Al(f,R)),P.state=f.memoizedState,typeof(R=m.getDerivedStateFromProps)=="function"&&(I0(f,m,R,w),P.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(m=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),m!==P.state&&qd.enqueueReplaceState(P,P.state,null),Vd(f,w,P,T),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308)}function kh(f,m,w){if((f=w.ref)!==null&&typeof f!="function"&&typeof f!="object"){if(w._owner){if(w=w._owner){if(w.tag!==1)throw Error(s(309));var T=w.stateNode}if(!T)throw Error(s(147,f));var P=T,R=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===R?m.ref:(m=function(D){var $=P.refs;$===Wb&&($=P.refs={}),D===null?delete $[R]:$[R]=D},m._stringRef=R,m)}if(typeof f!="string")throw Error(s(284));if(!w._owner)throw Error(s(290,f))}return f}function Kd(f,m){throw f=Object.prototype.toString.call(m),Error(s(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function Qb(f){return(0,f._init)(f._payload)}function Zb(f){function m(se,q){if(f){var J=se.deletions;J===null?(se.deletions=[q],se.flags|=16):J.push(q)}}function w(se,q){if(!f)return null;for(;q!==null;)m(se,q),q=q.sibling;return null}function T(se,q){for(se=new Map;q!==null;)q.key!==null?se.set(q.key,q):se.set(q.index,q),q=q.sibling;return se}function P(se,q){return(se=No(se,q)).index=0,se.sibling=null,se}function R(se,q,J){return se.index=J,f?(J=se.alternate)!==null?(J=J.index)<q?(se.flags|=2,q):J:(se.flags|=2,q):(se.flags|=1048576,q)}function D(se){return f&&se.alternate===null&&(se.flags|=2),se}function $(se,q,J,ae){return q===null||q.tag!==6?((q=vv(J,se.mode,ae)).return=se,q):((q=P(q,J)).return=se,q)}function K(se,q,J,ae){var Be=J.type;return Be===l?ie(se,q,J.props.children,ae,J.key):q!==null&&(q.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===b&&Qb(Be)===q.type)?((ae=P(q,J.props)).ref=kh(se,q,J),ae.return=se,ae):((ae=Sf(J.type,J.key,J.props,null,se.mode,ae)).ref=kh(se,q,J),ae.return=se,ae)}function ee(se,q,J,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?((q=yv(J,se.mode,ae)).return=se,q):((q=P(q,J.children||[])).return=se,q)}function ie(se,q,J,ae,Be){return q===null||q.tag!==7?((q=Na(J,se.mode,ae,Be)).return=se,q):((q=P(q,J)).return=se,q)}function ge(se,q,J){if(typeof q=="string"&&q!==""||typeof q=="number")return(q=vv(""+q,se.mode,J)).return=se,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case a:return(J=Sf(q.type,q.key,q.props,null,se.mode,J)).ref=kh(se,null,q),J.return=se,J;case u:return(q=yv(q,se.mode,J)).return=se,q;case b:return ge(se,(0,q._init)(q._payload),J)}if(j(q)||I(q))return(q=Na(q,se.mode,J,null)).return=se,q;Kd(se,q)}return null}function te(se,q,J,ae){var Be=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Be!==null?null:$(se,q,""+J,ae);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case a:return J.key===Be?K(se,q,J,ae):null;case u:return J.key===Be?ee(se,q,J,ae):null;case b:return te(se,q,(Be=J._init)(J._payload),ae)}if(j(J)||I(J))return Be!==null?null:ie(se,q,J,ae,null);Kd(se,J)}return null}function ce(se,q,J,ae,Be){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return $(q,se=se.get(J)||null,""+ae,Be);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case a:return K(q,se=se.get(ae.key===null?J:ae.key)||null,ae,Be);case u:return ee(q,se=se.get(ae.key===null?J:ae.key)||null,ae,Be);case b:return ce(se,q,J,(0,ae._init)(ae._payload),Be)}if(j(ae)||I(ae))return ie(q,se=se.get(J)||null,ae,Be,null);Kd(q,ae)}return null}function Ee(se,q,J,ae){for(var Be=null,ht=null,Ce=q,at=q=0,Er=null;Ce!==null&&at<J.length;at++){Ce.index>at?(Er=Ce,Ce=null):Er=Ce.sibling;var ct=te(se,Ce,J[at],ae);if(ct===null){Ce===null&&(Ce=Er);break}f&&Ce&&ct.alternate===null&&m(se,Ce),q=R(ct,q,at),ht===null?Be=ct:ht.sibling=ct,ht=ct,Ce=Er}if(at===J.length)return w(se,Ce),kt&&Ia(se,at),Be;if(Ce===null){for(;at<J.length;at++)(Ce=ge(se,J[at],ae))!==null&&(q=R(Ce,q,at),ht===null?Be=Ce:ht.sibling=Ce,ht=Ce);return kt&&Ia(se,at),Be}for(Ce=T(se,Ce);at<J.length;at++)(Er=ce(Ce,se,at,J[at],ae))!==null&&(f&&Er.alternate!==null&&Ce.delete(Er.key===null?at:Er.key),q=R(Er,q,at),ht===null?Be=Er:ht.sibling=Er,ht=Er);return f&&Ce.forEach(function(Fo){return m(se,Fo)}),kt&&Ia(se,at),Be}function Ge(se,q,J,ae){var Be=I(J);if(typeof Be!="function")throw Error(s(150));if((J=Be.call(J))==null)throw Error(s(151));for(var ht=Be=null,Ce=q,at=q=0,Er=null,ct=J.next();Ce!==null&&!ct.done;at++,ct=J.next()){Ce.index>at?(Er=Ce,Ce=null):Er=Ce.sibling;var Fo=te(se,Ce,ct.value,ae);if(Fo===null){Ce===null&&(Ce=Er);break}f&&Ce&&Fo.alternate===null&&m(se,Ce),q=R(Fo,q,at),ht===null?Be=Fo:ht.sibling=Fo,ht=Fo,Ce=Er}if(ct.done)return w(se,Ce),kt&&Ia(se,at),Be;if(Ce===null){for(;!ct.done;at++,ct=J.next())(ct=ge(se,ct.value,ae))!==null&&(q=R(ct,q,at),ht===null?Be=ct:ht.sibling=ct,ht=ct);return kt&&Ia(se,at),Be}for(Ce=T(se,Ce);!ct.done;at++,ct=J.next())(ct=ce(Ce,se,at,ct.value,ae))!==null&&(f&&ct.alternate!==null&&Ce.delete(ct.key===null?at:ct.key),q=R(ct,q,at),ht===null?Be=ct:ht.sibling=ct,ht=ct);return f&&Ce.forEach(function(IB){return m(se,IB)}),kt&&Ia(se,at),Be}return function se(q,J,ae,Be){if(typeof ae=="object"&&ae!==null&&ae.type===l&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case a:e:{for(var ht=ae.key,Ce=J;Ce!==null;){if(Ce.key===ht){if((ht=ae.type)===l){if(Ce.tag===7){w(q,Ce.sibling),(J=P(Ce,ae.props.children)).return=q,q=J;break e}}else if(Ce.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===b&&Qb(ht)===Ce.type){w(q,Ce.sibling),(J=P(Ce,ae.props)).ref=kh(q,Ce,ae),J.return=q,q=J;break e}w(q,Ce);break}m(q,Ce),Ce=Ce.sibling}ae.type===l?((J=Na(ae.props.children,q.mode,Be,ae.key)).return=q,q=J):((Be=Sf(ae.type,ae.key,ae.props,null,q.mode,Be)).ref=kh(q,J,ae),Be.return=q,q=Be)}return D(q);case u:e:{for(Ce=ae.key;J!==null;){if(J.key===Ce){if(J.tag===4&&J.stateNode.containerInfo===ae.containerInfo&&J.stateNode.implementation===ae.implementation){w(q,J.sibling),(J=P(J,ae.children||[])).return=q,q=J;break e}w(q,J);break}m(q,J),J=J.sibling}(J=yv(ae,q.mode,Be)).return=q,q=J}return D(q);case b:return se(q,J,(Ce=ae._init)(ae._payload),Be)}if(j(ae))return Ee(q,J,ae,Be);if(I(ae))return Ge(q,J,ae,Be);Kd(q,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,J!==null&&J.tag===6?(w(q,J.sibling),(J=P(J,ae)).return=q,q=J):(w(q,J),(J=vv(ae,q.mode,Be)).return=q,q=J),D(q)):w(q,J)}}var Bl=Zb(!0),Jb=Zb(!1),Ih={},Qn=Po(Ih),Mh=Po(Ih),Ll=Po(Ih);function rs(f){if(f===Ih)throw Error(s(174));return f}function R0(f,m){vt(Ll,m),vt(Mh,f),vt(Qn,Ih),f=Q(m),At(Qn),vt(Qn,f)}function Nl(){At(Qn),At(Mh),At(Ll)}function eS(f){var m=rs(Ll.current),w=rs(Qn.current);w!==(m=H(w,f.type,m))&&(vt(Mh,f),vt(Qn,m))}function O0(f){Mh.current===f&&(At(Qn),At(Mh))}var $t=Po(0);function Qd(f){for(var m=f;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&((w=w.dehydrated)===null||Ab(w)||o0(w)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(128&m.flags)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var B0=[];function L0(){for(var f=0;f<B0.length;f++){var m=B0[f];He?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}B0.length=0}var Zd=o.ReactCurrentDispatcher,N0=o.ReactCurrentBatchConfig,Ra=0,Bt=null,pr=null,mr=null,Jd=!1,Rh=!1,Oh=0,aB=0;function Fr(){throw Error(s(321))}function F0(f,m){if(m===null)return!1;for(var w=0;w<m.length&&w<f.length;w++)if(!yi(f[w],m[w]))return!1;return!0}function D0(f,m,w,T,P,R){if(Ra=R,Bt=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Zd.current=f===null||f.memoizedState===null?cB:dB,f=w(T,P),Rh){R=0;do{if(Rh=!1,Oh=0,25<=R)throw Error(s(301));R+=1,mr=pr=null,m.updateQueue=null,Zd.current=fB,f=w(T,P)}while(Rh)}if(Zd.current=rf,m=pr!==null&&pr.next!==null,Ra=0,mr=pr=Bt=null,Jd=!1,m)throw Error(s(300));return f}function U0(){var f=Oh!==0;return Oh=0,f}function ns(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Bt.memoizedState=mr=f:mr=mr.next=f,mr}function Zn(){if(pr===null){var f=Bt.alternate;f=f!==null?f.memoizedState:null}else f=pr.next;var m=mr===null?Bt.memoizedState:mr.next;if(m!==null)mr=m,pr=f;else{if(f===null)throw Error(s(310));f={memoizedState:(pr=f).memoizedState,baseState:pr.baseState,baseQueue:pr.baseQueue,queue:pr.queue,next:null},mr===null?Bt.memoizedState=mr=f:mr=mr.next=f}return mr}function Bh(f,m){return typeof m=="function"?m(f):m}function j0(f){var m=Zn(),w=m.queue;if(w===null)throw Error(s(311));w.lastRenderedReducer=f;var T=pr,P=T.baseQueue,R=w.pending;if(R!==null){if(P!==null){var D=P.next;P.next=R.next,R.next=D}T.baseQueue=P=R,w.pending=null}if(P!==null){R=P.next,T=T.baseState;var $=D=null,K=null,ee=R;do{var ie=ee.lane;if((Ra&ie)===ie)K!==null&&(K=K.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),T=ee.hasEagerState?ee.eagerState:f(T,ee.action);else{var ge={lane:ie,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};K===null?($=K=ge,D=T):K=K.next=ge,Bt.lanes|=ie,Oa|=ie}ee=ee.next}while(ee!==null&&ee!==R);K===null?D=T:K.next=$,yi(T,m.memoizedState)||(on=!0),m.memoizedState=T,m.baseState=D,m.baseQueue=K,w.lastRenderedState=T}if((f=w.interleaved)!==null){P=f;do R=P.lane,Bt.lanes|=R,Oa|=R,P=P.next;while(P!==f)}else P===null&&(w.lanes=0);return[m.memoizedState,w.dispatch]}function X0(f){var m=Zn(),w=m.queue;if(w===null)throw Error(s(311));w.lastRenderedReducer=f;var T=w.dispatch,P=w.pending,R=m.memoizedState;if(P!==null){w.pending=null;var D=P=P.next;do R=f(R,D.action),D=D.next;while(D!==P);yi(R,m.memoizedState)||(on=!0),m.memoizedState=R,m.baseQueue===null&&(m.baseState=R),w.lastRenderedState=R}return[R,T]}function tS(){}function rS(f,m){var w=Bt,T=Zn(),P=m(),R=!yi(T.memoizedState,P);if(R&&(T.memoizedState=P,on=!0),T=T.queue,H0(sS.bind(null,w,T,f),[f]),T.getSnapshot!==m||R||mr!==null&&1&mr.memoizedState.tag){if(w.flags|=2048,Lh(9,iS.bind(null,w,T,P,m),void 0,null),gr===null)throw Error(s(349));30&Ra||nS(w,m,P)}return P}function nS(f,m,w){f.flags|=16384,f={getSnapshot:m,value:w},(m=Bt.updateQueue)===null?(m={lastEffect:null,stores:null},Bt.updateQueue=m,m.stores=[f]):(w=m.stores)===null?m.stores=[f]:w.push(f)}function iS(f,m,w,T){m.value=w,m.getSnapshot=T,oS(m)&&aS(f)}function sS(f,m,w){return w(function(){oS(m)&&aS(f)})}function oS(f){var m=f.getSnapshot;f=f.value;try{var w=m();return!yi(f,w)}catch{return!0}}function aS(f){var m=ts(f,1);m!==null&&Jn(m,f,1,-1)}function lS(f){var m=ns();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:f},m.queue=f,f=f.dispatch=hB.bind(null,Bt,f),[m.memoizedState,f]}function Lh(f,m,w,T){return f={tag:f,create:m,destroy:w,deps:T,next:null},(m=Bt.updateQueue)===null?(m={lastEffect:null,stores:null},Bt.updateQueue=m,m.lastEffect=f.next=f):(w=m.lastEffect)===null?m.lastEffect=f.next=f:(T=w.next,w.next=f,f.next=T,m.lastEffect=f),f}function uS(){return Zn().memoizedState}function ef(f,m,w,T){var P=ns();Bt.flags|=f,P.memoizedState=Lh(1|m,w,void 0,T===void 0?null:T)}function tf(f,m,w,T){var P=Zn();T=T===void 0?null:T;var R=void 0;if(pr!==null){var D=pr.memoizedState;if(R=D.destroy,T!==null&&F0(T,D.deps))return void(P.memoizedState=Lh(m,w,R,T))}Bt.flags|=f,P.memoizedState=Lh(1|m,w,R,T)}function hS(f,m){return ef(8390656,8,f,m)}function H0(f,m){return tf(2048,8,f,m)}function cS(f,m){return tf(4,2,f,m)}function dS(f,m){return tf(4,4,f,m)}function fS(f,m){return typeof m=="function"?(f=f(),m(f),function(){m(null)}):m!=null?(f=f(),m.current=f,function(){m.current=null}):void 0}function pS(f,m,w){return w=w!=null?w.concat([f]):null,tf(4,4,fS.bind(null,m,f),w)}function z0(){}function mS(f,m){var w=Zn();m=m===void 0?null:m;var T=w.memoizedState;return T!==null&&m!==null&&F0(m,T[1])?T[0]:(w.memoizedState=[f,m],f)}function gS(f,m){var w=Zn();m=m===void 0?null:m;var T=w.memoizedState;return T!==null&&m!==null&&F0(m,T[1])?T[0]:(f=f(),w.memoizedState=[f,m],f)}function vS(f,m,w){return 21&Ra?(yi(w,m)||(w=Rb(),Bt.lanes|=w,Oa|=w,f.baseState=!0),m):(f.baseState&&(f.baseState=!1,on=!0),f.memoizedState=w)}function lB(f,m){var w=ot;ot=w!==0&&4>w?w:4,f(!0);var T=N0.transition;N0.transition={};try{f(!1),m()}finally{ot=w,N0.transition=T}}function yS(){return Zn().memoizedState}function uB(f,m,w){var T=Bo(f);w={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null},xS(f)?_S(m,w):(w=zb(f,m,w,T))!==null&&(Jn(w,f,T,Ur()),wS(w,m,T))}function hB(f,m,w){var T=Bo(f),P={lane:T,action:w,hasEagerState:!1,eagerState:null,next:null};if(xS(f))_S(m,P);else{var R=f.alternate;if(f.lanes===0&&(R===null||R.lanes===0)&&(R=m.lastRenderedReducer)!==null)try{var D=m.lastRenderedState,$=R(D,w);if(P.hasEagerState=!0,P.eagerState=$,yi($,D)){var K=m.interleaved;return K===null?(P.next=P,A0(m)):(P.next=K.next,K.next=P),void(m.interleaved=P)}}catch{}(w=zb(f,m,P,T))!==null&&(Jn(w,f,T,P=Ur()),wS(w,m,T))}}function xS(f){var m=f.alternate;return f===Bt||m!==null&&m===Bt}function _S(f,m){Rh=Jd=!0;var w=f.pending;w===null?m.next=m:(m.next=w.next,w.next=m),f.pending=m}function wS(f,m,w){if(4194240&w){var T=m.lanes;w|=T&=f.pendingLanes,m.lanes=w,m0(f,w)}}var rf={readContext:Kn,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},cB={readContext:Kn,useCallback:function(f,m){return ns().memoizedState=[f,m===void 0?null:m],f},useContext:Kn,useEffect:hS,useImperativeHandle:function(f,m,w){return w=w!=null?w.concat([f]):null,ef(4194308,4,fS.bind(null,m,f),w)},useLayoutEffect:function(f,m){return ef(4194308,4,f,m)},useInsertionEffect:function(f,m){return ef(4,2,f,m)},useMemo:function(f,m){var w=ns();return m=m===void 0?null:m,f=f(),w.memoizedState=[f,m],f},useReducer:function(f,m,w){var T=ns();return m=w!==void 0?w(m):m,T.memoizedState=T.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},T.queue=f,f=f.dispatch=uB.bind(null,Bt,f),[T.memoizedState,f]},useRef:function(f){return f={current:f},ns().memoizedState=f},useState:lS,useDebugValue:z0,useDeferredValue:function(f){return ns().memoizedState=f},useTransition:function(){var f=lS(!1),m=f[0];return f=lB.bind(null,f[1]),ns().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,w){var T=Bt,P=ns();if(kt){if(w===void 0)throw Error(s(407));w=w()}else{if(w=m(),gr===null)throw Error(s(349));30&Ra||nS(T,m,w)}P.memoizedState=w;var R={value:w,getSnapshot:m};return P.queue=R,hS(sS.bind(null,T,R,f),[f]),T.flags|=2048,Lh(9,iS.bind(null,T,R,w,m),void 0,null),w},useId:function(){var f=ns(),m=gr.identifierPrefix;if(kt){var w=Hs;m=":"+m+"R"+(w=(es&~(1<<32-vi(es)-1)).toString(32)+w),0<(w=Oh++)&&(m+="H"+w.toString(32)),m+=":"}else m=":"+m+"r"+(w=aB++).toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},dB={readContext:Kn,useCallback:mS,useContext:Kn,useEffect:H0,useImperativeHandle:pS,useInsertionEffect:cS,useLayoutEffect:dS,useMemo:gS,useReducer:j0,useRef:uS,useState:function(){return j0(Bh)},useDebugValue:z0,useDeferredValue:function(f){return vS(Zn(),pr.memoizedState,f)},useTransition:function(){return[j0(Bh)[0],Zn().memoizedState]},useMutableSource:tS,useSyncExternalStore:rS,useId:yS,unstable_isNewReconciler:!1},fB={readContext:Kn,useCallback:mS,useContext:Kn,useEffect:H0,useImperativeHandle:pS,useInsertionEffect:cS,useLayoutEffect:dS,useMemo:gS,useReducer:X0,useRef:uS,useState:function(){return X0(Bh)},useDebugValue:z0,useDeferredValue:function(f){var m=Zn();return pr===null?m.memoizedState=f:vS(m,pr.memoizedState,f)},useTransition:function(){return[X0(Bh)[0],Zn().memoizedState]},useMutableSource:tS,useSyncExternalStore:rS,useId:yS,unstable_isNewReconciler:!1};function Fl(f,m){try{var w="",T=m;do w+=oB(T),T=T.return;while(T);var P=w}catch(R){P=`
Error generating stack: `+R.message+`
`+R.stack}return{value:f,source:m,stack:P,digest:null}}function $0(f,m,w){return{value:f,source:null,stack:w??null,digest:m??null}}function Y0(f,m){try{console.error(m.value)}catch(w){setTimeout(function(){throw w})}}var pB=typeof WeakMap=="function"?WeakMap:Map;function bS(f,m,w){(w=zs(-1,w)).tag=3,w.payload={element:null};var T=m.value;return w.callback=function(){vf||(vf=!0,hv=T),Y0(0,m)},w}function SS(f,m,w){(w=zs(-1,w)).tag=3;var T=f.type.getDerivedStateFromError;if(typeof T=="function"){var P=m.value;w.payload=function(){return T(P)},w.callback=function(){Y0(0,m)}}var R=f.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(w.callback=function(){Y0(0,m),typeof T!="function"&&(Ro===null?Ro=new Set([this]):Ro.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})}),w}function TS(f,m,w){var T=f.pingCache;if(T===null){T=f.pingCache=new pB;var P=new Set;T.set(m,P)}else(P=T.get(m))===void 0&&(P=new Set,T.set(m,P));P.has(w)||(P.add(w),f=SB.bind(null,f,m,w),m.then(f,f))}function ES(f){do{var m;if((m=f.tag===13)&&(m=(m=f.memoizedState)===null||m.dehydrated!==null),m)return f;f=f.return}while(f!==null);return null}function CS(f,m,w,T,P){return 1&f.mode?(f.flags|=65536,f.lanes=P,f):(f===m?f.flags|=65536:(f.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:((m=zs(-1,1)).tag=2,Io(w,m,1))),w.lanes|=1),f)}var mB=o.ReactCurrentOwner,on=!1;function an(f,m,w,T){m.child=f===null?Jb(m,null,w,T):Bl(m,f.child,w,T)}function PS(f,m,w,T,P){w=w.render;var R=m.ref;return Ol(m,P),T=D0(f,m,w,T,R,P),w=U0(),f===null||on?(kt&&w&&x0(m),m.flags|=1,an(f,m,T,P),m.child):(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~P,$s(f,m,P))}function AS(f,m,w,T,P){if(f===null){var R=w.type;return typeof R!="function"||gv(R)||R.defaultProps!==void 0||w.compare!==null||w.defaultProps!==void 0?((f=Sf(w.type,null,T,m,m.mode,P)).ref=m.ref,f.return=m,m.child=f):(m.tag=15,m.type=R,kS(f,m,R,T,P))}if(R=f.child,(f.lanes&P)==0){var D=R.memoizedProps;if((w=(w=w.compare)!==null?w:$d)(D,T)&&f.ref===m.ref)return $s(f,m,P)}return m.flags|=1,(f=No(R,T)).ref=m.ref,f.return=m,m.child=f}function kS(f,m,w,T,P){if(f!==null){var R=f.memoizedProps;if($d(R,T)&&f.ref===m.ref){if(on=!1,m.pendingProps=T=R,(f.lanes&P)==0)return m.lanes=f.lanes,$s(f,m,P);131072&f.flags&&(on=!0)}}return G0(f,m,w,T,P)}function IS(f,m,w){var T=m.pendingProps,P=T.children,R=f!==null?f.memoizedState:null;if(T.mode==="hidden")if(!(1&m.mode))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},vt(Ul,Pn),Pn|=w;else{if(!(1073741824&w))return f=R!==null?R.baseLanes|w:w,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,vt(Ul,Pn),Pn|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},T=R!==null?R.baseLanes:w,vt(Ul,Pn),Pn|=T}else R!==null?(T=R.baseLanes|w,m.memoizedState=null):T=w,vt(Ul,Pn),Pn|=T;return an(f,m,P,w),m.child}function MS(f,m){var w=m.ref;(f===null&&w!==null||f!==null&&f.ref!==w)&&(m.flags|=512,m.flags|=2097152)}function G0(f,m,w,T,P){var R=En(w)?Aa:Nr.current;return R=Al(m,R),Ol(m,P),w=D0(f,m,w,T,R,P),T=U0(),f===null||on?(kt&&T&&x0(m),m.flags|=1,an(f,m,w,P),m.child):(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~P,$s(f,m,P))}function RS(f,m,w,T,P){if(En(w)){var R=!0;Fd(m)}else R=!1;if(Ol(m,P),m.stateNode===null)af(f,m),qb(m,w,T),M0(m,w,T,P),T=!0;else if(f===null){var D=m.stateNode,$=m.memoizedProps;D.props=$;var K=D.context,ee=w.contextType;typeof ee=="object"&&ee!==null?ee=Kn(ee):ee=Al(m,ee=En(w)?Aa:Nr.current);var ie=w.getDerivedStateFromProps,ge=typeof ie=="function"||typeof D.getSnapshotBeforeUpdate=="function";ge||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||($!==T||K!==ee)&&Kb(m,D,T,ee),ko=!1;var te=m.memoizedState;D.state=te,Vd(m,T,D,P),K=m.memoizedState,$!==T||te!==K||sn.current||ko?(typeof ie=="function"&&(I0(m,w,ie,T),K=m.memoizedState),($=ko||Vb(m,w,$,T,te,K,ee))?(ge||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(m.flags|=4194308)):(typeof D.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=T,m.memoizedState=K),D.props=T,D.state=K,D.context=ee,T=$):(typeof D.componentDidMount=="function"&&(m.flags|=4194308),T=!1)}else{D=m.stateNode,$b(f,m),$=m.memoizedProps,ee=m.type===m.elementType?$:_i(m.type,$),D.props=ee,ge=m.pendingProps,te=D.context,typeof(K=w.contextType)=="object"&&K!==null?K=Kn(K):K=Al(m,K=En(w)?Aa:Nr.current);var ce=w.getDerivedStateFromProps;(ie=typeof ce=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||($!==ge||te!==K)&&Kb(m,D,T,K),ko=!1,te=m.memoizedState,D.state=te,Vd(m,T,D,P);var Ee=m.memoizedState;$!==ge||te!==Ee||sn.current||ko?(typeof ce=="function"&&(I0(m,w,ce,T),Ee=m.memoizedState),(ee=ko||Vb(m,w,ee,T,te,Ee,K)||!1)?(ie||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(T,Ee,K),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(T,Ee,K)),typeof D.componentDidUpdate=="function"&&(m.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof D.componentDidUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=1024),m.memoizedProps=T,m.memoizedState=Ee),D.props=T,D.state=Ee,D.context=K,T=ee):(typeof D.componentDidUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=1024),T=!1)}return W0(f,m,w,T,R,P)}function W0(f,m,w,T,P,R){MS(f,m);var D=(128&m.flags)!=0;if(!T&&!D)return P&&Mb(m,w,!1),$s(f,m,R);T=m.stateNode,mB.current=m;var $=D&&typeof w.getDerivedStateFromError!="function"?null:T.render();return m.flags|=1,f!==null&&D?(m.child=Bl(m,f.child,null,R),m.child=Bl(m,null,$,R)):an(f,m,$,R),m.memoizedState=T.state,P&&Mb(m,w,!0),m.child}function OS(f){var m=f.stateNode;m.pendingContext?kb(0,m.pendingContext,m.pendingContext!==m.context):m.context&&kb(0,m.context,!1),R0(f,m.containerInfo)}function BS(f,m,w,T,P){return Ml(),S0(P),m.flags|=256,an(f,m,w,T),m.child}var Nh,Fh,nf,sf,V0={dehydrated:null,treeContext:null,retryLane:0};function q0(f){return{baseLanes:f,cachePool:null,transitions:null}}function LS(f,m,w){var T,P=m.pendingProps,R=$t.current,D=!1,$=(128&m.flags)!=0;if((T=$)||(T=(f===null||f.memoizedState!==null)&&(2&R)!=0),T?(D=!0,m.flags&=-129):f!==null&&f.memoizedState===null||(R|=1),vt($t,1&R),f===null)return b0(m),(f=m.memoizedState)!==null&&(f=f.dehydrated)!==null?(1&m.mode?o0(f)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):($=P.children,f=P.fallback,D?(P=m.mode,D=m.child,$={mode:"hidden",children:$},!(1&P)&&D!==null?(D.childLanes=0,D.pendingProps=$):D=Tf($,P,0,null),f=Na(f,P,w,null),D.return=m,f.return=m,D.sibling=f,m.child=D,m.child.memoizedState=q0(w),m.memoizedState=V0,f):K0(m,$));if((R=f.memoizedState)!==null&&(T=R.dehydrated)!==null)return function(ee,ie,ge,te,ce,Ee,Ge){if(ge)return 256&ie.flags?(ie.flags&=-257,of(ee,ie,Ge,te=$0(Error(s(422))))):ie.memoizedState!==null?(ie.child=ee.child,ie.flags|=128,null):(Ee=te.fallback,ce=ie.mode,te=Tf({mode:"visible",children:te.children},ce,0,null),(Ee=Na(Ee,ce,Ge,null)).flags|=2,te.return=ie,Ee.return=ie,te.sibling=Ee,ie.child=te,1&ie.mode&&Bl(ie,ee.child,null,Ge),ie.child.memoizedState=q0(Ge),ie.memoizedState=V0,Ee);if(!(1&ie.mode))return of(ee,ie,Ge,null);if(o0(ce))return te=LO(ce).digest,Ee=Error(s(419)),te=$0(Ee,te,void 0),of(ee,ie,Ge,te);if(ge=(Ge&ee.childLanes)!=0,on||ge){if((te=gr)!==null){switch(Ge&-Ge){case 4:ce=2;break;case 16:ce=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ce=32;break;case 536870912:ce=268435456;break;default:ce=0}(ce=ce&(te.suspendedLanes|Ge)?0:ce)!==0&&ce!==Ee.retryLane&&(Ee.retryLane=ce,ts(ee,ce),Jn(te,ee,ce,-1))}return mv(),of(ee,ie,Ge,te=$0(Error(s(421))))}return Ab(ce)?(ie.flags|=128,ie.child=ee.child,ie=TB.bind(null,ee),NO(ce,ie),null):(ee=Ee.treeContext,Ze&&(qn=UO(ce),Cn=ie,kt=!0,xi=null,Ah=!1,ee!==null&&(Wn[Vn++]=es,Wn[Vn++]=Hs,Wn[Vn++]=ka,es=ee.id,Hs=ee.overflow,ka=ie)),ie=K0(ie,te.children),ie.flags|=4096,ie)}(f,m,$,P,T,R,w);if(D){D=P.fallback,$=m.mode,T=(R=f.child).sibling;var K={mode:"hidden",children:P.children};return!(1&$)&&m.child!==R?((P=m.child).childLanes=0,P.pendingProps=K,m.deletions=null):(P=No(R,K)).subtreeFlags=14680064&R.subtreeFlags,T!==null?D=No(T,D):(D=Na(D,$,w,null)).flags|=2,D.return=m,P.return=m,P.sibling=D,m.child=P,P=D,D=m.child,$=($=f.child.memoizedState)===null?q0(w):{baseLanes:$.baseLanes|w,cachePool:null,transitions:$.transitions},D.memoizedState=$,D.childLanes=f.childLanes&~w,m.memoizedState=V0,P}return f=(D=f.child).sibling,P=No(D,{mode:"visible",children:P.children}),!(1&m.mode)&&(P.lanes=w),P.return=m,P.sibling=null,f!==null&&((w=m.deletions)===null?(m.deletions=[f],m.flags|=16):w.push(f)),m.child=P,m.memoizedState=null,P}function K0(f,m){return(m=Tf({mode:"visible",children:m},f.mode,0,null)).return=f,f.child=m}function of(f,m,w,T){return T!==null&&S0(T),Bl(m,f.child,null,w),(f=K0(m,m.pendingProps.children)).flags|=2,m.memoizedState=null,f}function NS(f,m,w){f.lanes|=m;var T=f.alternate;T!==null&&(T.lanes|=m),P0(f.return,m,w)}function Q0(f,m,w,T,P){var R=f.memoizedState;R===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:T,tail:w,tailMode:P}:(R.isBackwards=m,R.rendering=null,R.renderingStartTime=0,R.last=T,R.tail=w,R.tailMode=P)}function FS(f,m,w){var T=m.pendingProps,P=T.revealOrder,R=T.tail;if(an(f,m,T.children,w),(2&(T=$t.current))!=0)T=1&T|2,m.flags|=128;else{if(f!==null&&128&f.flags)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&NS(f,w,m);else if(f.tag===19)NS(f,w,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}T&=1}if(vt($t,T),(1&m.mode)==0)m.memoizedState=null;else switch(P){case"forwards":for(w=m.child,P=null;w!==null;)(f=w.alternate)!==null&&Qd(f)===null&&(P=w),w=w.sibling;(w=P)===null?(P=m.child,m.child=null):(P=w.sibling,w.sibling=null),Q0(m,!1,P,w,R);break;case"backwards":for(w=null,P=m.child,m.child=null;P!==null;){if((f=P.alternate)!==null&&Qd(f)===null){m.child=P;break}f=P.sibling,P.sibling=w,w=P,P=f}Q0(m,!0,w,null,R);break;case"together":Q0(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function af(f,m){!(1&m.mode)&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function $s(f,m,w){if(f!==null&&(m.dependencies=f.dependencies),Oa|=m.lanes,(w&m.childLanes)==0)return null;if(f!==null&&m.child!==f.child)throw Error(s(153));if(m.child!==null){for(w=No(f=m.child,f.pendingProps),m.child=w,w.return=m;f.sibling!==null;)f=f.sibling,(w=w.sibling=No(f,f.pendingProps)).return=m;w.sibling=null}return m.child}function is(f){f.flags|=4}function DS(f,m){if(f!==null&&f.child===m.child)return!0;if(16&m.flags)return!1;for(f=m.child;f!==null;){if(12854&f.flags||12854&f.subtreeFlags)return!1;f=f.sibling}return!0}if(Fe)Nh=function(f,m){for(var w=m.child;w!==null;){if(w.tag===5||w.tag===6)Z(f,w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===m)break;for(;w.sibling===null;){if(w.return===null||w.return===m)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Fh=function(){},nf=function(f,m,w,T,P){if((f=f.memoizedProps)!==T){var R=m.stateNode,D=rs(Qn.current);w=he(R,w,f,T,P,D),(m.updateQueue=w)&&is(m)}},sf=function(f,m,w,T){w!==T&&is(m)};else if(ut){Nh=function(f,m,w,T){for(var P=m.child;P!==null;){if(P.tag===5){var R=P.stateNode;w&&T&&(R=Cb(R,P.type,P.memoizedProps,P)),Z(f,R)}else if(P.tag===6)R=P.stateNode,w&&T&&(R=Pb(R,P.memoizedProps,P)),Z(f,R);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)(R=P.child)!==null&&(R.return=P),Nh(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===m)break;for(;P.sibling===null;){if(P.return===null||P.return===m)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var US=function(f,m,w,T){for(var P=m.child;P!==null;){if(P.tag===5){var R=P.stateNode;w&&T&&(R=Cb(R,P.type,P.memoizedProps,P)),Eb(f,R)}else if(P.tag===6)R=P.stateNode,w&&T&&(R=Pb(R,P.memoizedProps,P)),Eb(f,R);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)(R=P.child)!==null&&(R.return=P),US(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===m)break;for(;P.sibling===null;){if(P.return===null||P.return===m)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Fh=function(f,m){var w=m.stateNode;if(!DS(f,m)){f=w.containerInfo;var T=Tb(f);US(T,m,!1,!1),w.pendingChildren=T,is(m),MO(f,T)}},nf=function(f,m,w,T,P){var R=f.stateNode,D=f.memoizedProps;if((f=DS(f,m))&&D===T)m.stateNode=R;else{var $=m.stateNode,K=rs(Qn.current),ee=null;D!==T&&(ee=he($,w,D,T,P,K)),f&&ee===null?m.stateNode=R:(R=IO(R,ee,w,D,T,m,f,$),re(R,w,T,P,K)&&is(m),m.stateNode=R,f?is(m):Nh(R,m,!1,!1))}},sf=function(f,m,w,T){w!==T?(f=rs(Ll.current),w=rs(Qn.current),m.stateNode=Me(T,f,w,m),is(m)):m.stateNode=f.stateNode}}else Fh=function(){},nf=function(){},sf=function(){};function Dh(f,m){if(!kt)switch(f.tailMode){case"hidden":m=f.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?f.tail=null:w.sibling=null;break;case"collapsed":w=f.tail;for(var T=null;w!==null;)w.alternate!==null&&(T=w),w=w.sibling;T===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:T.sibling=null}}function Kr(f){var m=f.alternate!==null&&f.alternate.child===f.child,w=0,T=0;if(m)for(var P=f.child;P!==null;)w|=P.lanes|P.childLanes,T|=14680064&P.subtreeFlags,T|=14680064&P.flags,P.return=f,P=P.sibling;else for(P=f.child;P!==null;)w|=P.lanes|P.childLanes,T|=P.subtreeFlags,T|=P.flags,P.return=f,P=P.sibling;return f.subtreeFlags|=T,f.childLanes=w,m}function gB(f,m,w){var T=m.pendingProps;switch(_0(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(m),null;case 1:case 17:return En(m.type)&&h0(),Kr(m),null;case 3:return w=m.stateNode,Nl(),At(sn),At(Nr),L0(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),f!==null&&f.child!==null||(zd(m)?is(m):f===null||f.memoizedState.isDehydrated&&!(256&m.flags)||(m.flags|=1024,xi!==null&&(fv(xi),xi=null))),Fh(f,m),Kr(m),null;case 5:O0(m),w=rs(Ll.current);var P=m.type;if(f!==null&&m.stateNode!=null)nf(f,m,P,T,w),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!T){if(m.stateNode===null)throw Error(s(166));return Kr(m),null}if(f=rs(Qn.current),zd(m)){if(!Ze)throw Error(s(175));f=jO(m.stateNode,m.type,m.memoizedProps,w,f,m,!Ah),m.updateQueue=f,f!==null&&is(m)}else{var R=V(P,T,w,f,m);Nh(R,m,!1,!1),m.stateNode=R,re(R,P,T,w,f)&&is(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Kr(m),null;case 6:if(f&&m.stateNode!=null)sf(f,m,f.memoizedProps,T);else{if(typeof T!="string"&&m.stateNode===null)throw Error(s(166));if(f=rs(Ll.current),w=rs(Qn.current),zd(m)){if(!Ze)throw Error(s(176));if(f=m.stateNode,w=m.memoizedProps,(T=XO(f,w,m,!Ah))&&(P=Cn)!==null)switch(P.tag){case 3:qO(P.stateNode.containerInfo,f,w,(1&P.mode)!=0);break;case 5:KO(P.type,P.memoizedProps,P.stateNode,f,w,(1&P.mode)!=0)}T&&is(m)}else m.stateNode=Me(T,f,w,m)}return Kr(m),null;case 13:if(At($t),T=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(kt&&qn!==null&&1&m.mode&&!(128&m.flags))Xb(),Ml(),m.flags|=98560,P=!1;else if(P=zd(m),T!==null&&T.dehydrated!==null){if(f===null){if(!P)throw Error(s(318));if(!Ze)throw Error(s(344));if(!(P=(P=m.memoizedState)!==null?P.dehydrated:null))throw Error(s(317));HO(P,m)}else Ml(),!(128&m.flags)&&(m.memoizedState=null),m.flags|=4;Kr(m),P=!1}else xi!==null&&(fv(xi),xi=null),P=!0;if(!P)return 65536&m.flags?m:null}return 128&m.flags?(m.lanes=w,m):((w=T!==null)!=(f!==null&&f.memoizedState!==null)&&w&&(m.child.flags|=8192,1&m.mode&&(f===null||1&$t.current?ir===0&&(ir=3):mv())),m.updateQueue!==null&&(m.flags|=4),Kr(m),null);case 4:return Nl(),Fh(f,m),f===null&&Lr(m.stateNode.containerInfo),Kr(m),null;case 10:return C0(m.type._context),Kr(m),null;case 19:if(At($t),(P=m.memoizedState)===null)return Kr(m),null;if(T=(128&m.flags)!=0,(R=P.rendering)===null)if(T)Dh(P,!1);else{if(ir!==0||f!==null&&128&f.flags)for(f=m.child;f!==null;){if((R=Qd(f))!==null){for(m.flags|=128,Dh(P,!1),(f=R.updateQueue)!==null&&(m.updateQueue=f,m.flags|=4),m.subtreeFlags=0,f=w,w=m.child;w!==null;)P=f,(T=w).flags&=14680066,(R=T.alternate)===null?(T.childLanes=0,T.lanes=P,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=R.childLanes,T.lanes=R.lanes,T.child=R.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=R.memoizedProps,T.memoizedState=R.memoizedState,T.updateQueue=R.updateQueue,T.type=R.type,P=R.dependencies,T.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),w=w.sibling;return vt($t,1&$t.current|2),m.child}f=f.sibling}P.tail!==null&&fr()>uv&&(m.flags|=128,T=!0,Dh(P,!1),m.lanes=4194304)}else{if(!T)if((f=Qd(R))!==null){if(m.flags|=128,T=!0,(f=f.updateQueue)!==null&&(m.updateQueue=f,m.flags|=4),Dh(P,!0),P.tail===null&&P.tailMode==="hidden"&&!R.alternate&&!kt)return Kr(m),null}else 2*fr()-P.renderingStartTime>uv&&w!==1073741824&&(m.flags|=128,T=!0,Dh(P,!1),m.lanes=4194304);P.isBackwards?(R.sibling=m.child,m.child=R):((f=P.last)!==null?f.sibling=R:m.child=R,P.last=R)}return P.tail!==null?(m=P.tail,P.rendering=m,P.tail=m.sibling,P.renderingStartTime=fr(),m.sibling=null,f=$t.current,vt($t,T?1&f|2:1&f),m):(Kr(m),null);case 22:case 23:return pv(),w=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==w&&(m.flags|=8192),w&&1&m.mode?1073741824&Pn&&(Kr(m),Fe&&6&m.subtreeFlags&&(m.flags|=8192)):Kr(m),null;case 24:case 25:return null}throw Error(s(156,m.tag))}function vB(f,m){switch(_0(m),m.tag){case 1:return En(m.type)&&h0(),65536&(f=m.flags)?(m.flags=-65537&f|128,m):null;case 3:return Nl(),At(sn),At(Nr),L0(),65536&(f=m.flags)&&!(128&f)?(m.flags=-65537&f|128,m):null;case 5:return O0(m),null;case 13:if(At($t),(f=m.memoizedState)!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(s(340));Ml()}return 65536&(f=m.flags)?(m.flags=-65537&f|128,m):null;case 19:return At($t),null;case 4:return Nl(),null;case 10:return C0(m.type._context),null;case 22:case 23:return pv(),null;default:return null}}var lf=!1,Dr=!1,yB=typeof WeakSet=="function"?WeakSet:Set,we=null;function Dl(f,m){var w=f.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(T){It(f,m,T)}else w.current=null}function jS(f,m,w){try{w()}catch(T){It(f,m,T)}}var XS=!1;function Uh(f,m,w){var T=m.updateQueue;if((T=T!==null?T.lastEffect:null)!==null){var P=T=T.next;do{if((P.tag&f)===f){var R=P.destroy;P.destroy=void 0,R!==void 0&&jS(m,w,R)}P=P.next}while(P!==T)}}function uf(f,m){if((m=(m=m.updateQueue)!==null?m.lastEffect:null)!==null){var w=m=m.next;do{if((w.tag&f)===f){var T=w.create;w.destroy=T()}w=w.next}while(w!==m)}}function Z0(f){var m=f.ref;if(m!==null){var w=f.stateNode;f.tag===5?f=W(w):f=w,typeof m=="function"?m(f):m.current=f}}function HS(f){var m=f.alternate;m!==null&&(f.alternate=null,HS(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode)!==null&&Cl(m),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function zS(f){return f.tag===5||f.tag===3||f.tag===4}function $S(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||zS(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(2&f.flags||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(2&f.flags))return f.stateNode}}function J0(f,m,w){var T=f.tag;if(T===5||T===6)f=f.stateNode,m?bO(w,f,m):vO(w,f);else if(T!==4&&(f=f.child)!==null)for(J0(f,m,w),f=f.sibling;f!==null;)J0(f,m,w),f=f.sibling}function ev(f,m,w){var T=f.tag;if(T===5||T===6)f=f.stateNode,m?wO(w,f,m):gO(w,f);else if(T!==4&&(f=f.child)!==null)for(ev(f,m,w),f=f.sibling;f!==null;)ev(f,m,w),f=f.sibling}var Qr=null,ss=!1;function os(f,m,w){for(w=w.child;w!==null;)tv(f,m,w),w=w.sibling}function tv(f,m,w){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(Ud,w)}catch{}switch(w.tag){case 5:Dr||Dl(w,m);case 6:if(Fe){var T=Qr,P=ss;Qr=null,os(f,m,w),ss=P,(Qr=T)!==null&&(ss?TO(Qr,w.stateNode):SO(Qr,w.stateNode))}else os(f,m,w);break;case 18:Fe&&Qr!==null&&(ss?WO(Qr,w.stateNode):GO(Qr,w.stateNode));break;case 4:Fe?(T=Qr,P=ss,Qr=w.stateNode.containerInfo,ss=!0,os(f,m,w),Qr=T,ss=P):(ut&&(T=w.stateNode.containerInfo,P=Tb(T),s0(T,P)),os(f,m,w));break;case 0:case 11:case 14:case 15:if(!Dr&&(T=w.updateQueue)!==null&&(T=T.lastEffect)!==null){P=T=T.next;do{var R=P,D=R.destroy;R=R.tag,D!==void 0&&(2&R||4&R)&&jS(w,m,D),P=P.next}while(P!==T)}os(f,m,w);break;case 1:if(!Dr&&(Dl(w,m),typeof(T=w.stateNode).componentWillUnmount=="function"))try{T.props=w.memoizedProps,T.state=w.memoizedState,T.componentWillUnmount()}catch($){It(w,m,$)}os(f,m,w);break;case 21:os(f,m,w);break;case 22:1&w.mode?(Dr=(T=Dr)||w.memoizedState!==null,os(f,m,w),Dr=T):os(f,m,w);break;default:os(f,m,w)}}function YS(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var w=f.stateNode;w===null&&(w=f.stateNode=new yB),m.forEach(function(T){var P=EB.bind(null,f,T);w.has(T)||(w.add(T),T.then(P,P))})}}function wi(f,m){var w=m.deletions;if(w!==null)for(var T=0;T<w.length;T++){var P=w[T];try{var R=f,D=m;if(Fe){var $=D;e:for(;$!==null;){switch($.tag){case 5:Qr=$.stateNode,ss=!1;break e;case 3:case 4:Qr=$.stateNode.containerInfo,ss=!0;break e}$=$.return}if(Qr===null)throw Error(s(160));tv(R,D,P),Qr=null,ss=!1}else tv(R,D,P);var K=P.alternate;K!==null&&(K.return=null),P.return=null}catch(ee){It(P,m,ee)}}if(12854&m.subtreeFlags)for(m=m.child;m!==null;)GS(m,f),m=m.sibling}function GS(f,m){var w=f.alternate,T=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(wi(m,f),as(f),4&T){try{Uh(3,f,f.return),uf(3,f)}catch(te){It(f,f.return,te)}try{Uh(5,f,f.return)}catch(te){It(f,f.return,te)}}break;case 1:wi(m,f),as(f),512&T&&w!==null&&Dl(w,w.return);break;case 5:if(wi(m,f),as(f),512&T&&w!==null&&Dl(w,w.return),Fe){if(32&f.flags){var P=f.stateNode;try{Sb(P)}catch(te){It(f,f.return,te)}}if(4&T&&(P=f.stateNode)!=null){var R=f.memoizedProps;if(w=w!==null?w.memoizedProps:R,T=f.type,m=f.updateQueue,f.updateQueue=null,m!==null)try{_O(P,m,T,w,R,f)}catch(te){It(f,f.return,te)}}}break;case 6:if(wi(m,f),as(f),4&T&&Fe){if(f.stateNode===null)throw Error(s(162));P=f.stateNode,R=f.memoizedProps,w=w!==null?w.memoizedProps:R;try{yO(P,w,R)}catch(te){It(f,f.return,te)}}break;case 3:if(wi(m,f),as(f),4&T){if(Fe&&Ze&&w!==null&&w.memoizedState.isDehydrated)try{$O(m.containerInfo)}catch(te){It(f,f.return,te)}if(ut){P=m.containerInfo,R=m.pendingChildren;try{s0(P,R)}catch(te){It(f,f.return,te)}}}break;case 4:if(wi(m,f),as(f),4&T&&ut){P=(R=f.stateNode).containerInfo,R=R.pendingChildren;try{s0(P,R)}catch(te){It(f,f.return,te)}}break;case 13:wi(m,f),as(f),8192&(P=f.child).flags&&(R=P.memoizedState!==null,P.stateNode.isHidden=R,!R||P.alternate!==null&&P.alternate.memoizedState!==null||(lv=fr())),4&T&&YS(f);break;case 22:var D=w!==null&&w.memoizedState!==null;if(1&f.mode?(Dr=(w=Dr)||D,wi(m,f),Dr=w):wi(m,f),as(f),8192&T){if(w=f.memoizedState!==null,(f.stateNode.isHidden=w)&&!D&&(1&f.mode)!=0)for(we=f,T=f.child;T!==null;){for(m=we=T;we!==null;){var $=(D=we).child;switch(D.tag){case 0:case 11:case 14:case 15:Uh(4,D,D.return);break;case 1:Dl(D,D.return);var K=D.stateNode;if(typeof K.componentWillUnmount=="function"){var ee=D,ie=D.return;try{var ge=ee;K.props=ge.memoizedProps,K.state=ge.memoizedState,K.componentWillUnmount()}catch(te){It(ee,ie,te)}}break;case 5:Dl(D,D.return);break;case 22:if(D.memoizedState!==null){qS(m);continue}}$!==null?($.return=D,we=$):qS(m)}T=T.sibling}if(Fe){e:if(T=null,Fe)for(m=f;;){if(m.tag===5){if(T===null){T=m;try{P=m.stateNode,w?EO(P):PO(m.stateNode,m.memoizedProps)}catch(te){It(f,f.return,te)}}}else if(m.tag===6){if(T===null)try{R=m.stateNode,w?CO(R):AO(R,m.memoizedProps)}catch(te){It(f,f.return,te)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===f)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break e;for(;m.sibling===null;){if(m.return===null||m.return===f)break e;T===m&&(T=null),m=m.return}T===m&&(T=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:wi(m,f),as(f),4&T&&YS(f);break;case 21:break;default:wi(m,f),as(f)}}function as(f){var m=f.flags;if(2&m){try{if(Fe){e:{for(var w=f.return;w!==null;){if(zS(w)){var T=w;break e}w=w.return}throw Error(s(160))}switch(T.tag){case 5:var P=T.stateNode;32&T.flags&&(Sb(P),T.flags&=-33),ev(f,$S(f),P);break;case 3:case 4:var R=T.stateNode.containerInfo;J0(f,$S(f),R);break;default:throw Error(s(161))}}}catch(D){It(f,f.return,D)}f.flags&=-3}4096&m&&(f.flags&=-4097)}function xB(f,m,w){we=f,WS(f)}function WS(f,m,w){for(var T=(1&f.mode)!=0;we!==null;){var P=we,R=P.child;if(P.tag===22&&T){var D=P.memoizedState!==null||lf;if(!D){var $=P.alternate,K=$!==null&&$.memoizedState!==null||Dr;$=lf;var ee=Dr;if(lf=D,(Dr=K)&&!ee)for(we=P;we!==null;)K=(D=we).child,D.tag===22&&D.memoizedState!==null?KS(P):K!==null?(K.return=D,we=K):KS(P);for(;R!==null;)we=R,WS(R),R=R.sibling;we=P,lf=$,Dr=ee}VS(f)}else 8772&P.subtreeFlags&&R!==null?(R.return=P,we=R):VS(f)}}function VS(f){for(;we!==null;){var m=we;if(8772&m.flags){var w=m.alternate;try{if(8772&m.flags)switch(m.tag){case 0:case 11:case 15:Dr||uf(5,m);break;case 1:var T=m.stateNode;if(4&m.flags&&!Dr)if(w===null)T.componentDidMount();else{var P=m.elementType===m.type?w.memoizedProps:_i(m.type,w.memoizedProps);T.componentDidUpdate(P,w.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var R=m.updateQueue;R!==null&&Gb(m,R,T);break;case 3:var D=m.updateQueue;if(D!==null){if(w=null,m.child!==null)switch(m.child.tag){case 5:w=W(m.child.stateNode);break;case 1:w=m.child.stateNode}Gb(m,D,w)}break;case 5:var $=m.stateNode;w===null&&4&m.flags&&xO($,m.type,m.memoizedProps,m);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Ze&&m.memoizedState===null){var K=m.alternate;if(K!==null){var ee=K.memoizedState;if(ee!==null){var ie=ee.dehydrated;ie!==null&&YO(ie)}}}break;default:throw Error(s(163))}Dr||512&m.flags&&Z0(m)}catch(ge){It(m,m.return,ge)}}if(m===f){we=null;break}if((w=m.sibling)!==null){w.return=m.return,we=w;break}we=m.return}}function qS(f){for(;we!==null;){var m=we;if(m===f){we=null;break}var w=m.sibling;if(w!==null){w.return=m.return,we=w;break}we=m.return}}function KS(f){for(;we!==null;){var m=we;try{switch(m.tag){case 0:case 11:case 15:var w=m.return;try{uf(4,m)}catch(K){It(m,w,K)}break;case 1:var T=m.stateNode;if(typeof T.componentDidMount=="function"){var P=m.return;try{T.componentDidMount()}catch(K){It(m,P,K)}}var R=m.return;try{Z0(m)}catch(K){It(m,R,K)}break;case 5:var D=m.return;try{Z0(m)}catch(K){It(m,D,K)}}}catch(K){It(m,m.return,K)}if(m===f){we=null;break}var $=m.sibling;if($!==null){$.return=m.return,we=$;break}we=m.return}}var hf=0,cf=1,df=2,ff=3,pf=4;if(typeof Symbol=="function"&&Symbol.for){var jh=Symbol.for;hf=jh("selector.component"),cf=jh("selector.has_pseudo_class"),df=jh("selector.role"),ff=jh("selector.test_id"),pf=jh("selector.text")}function rv(f){var m=Sr(f);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(s(364));return m}if((f=Co(f))===null)throw Error(s(362));return f.stateNode.current}function nv(f,m){switch(m.$$typeof){case hf:if(f.type===m.value)return!0;break;case cf:e:{m=m.value,f=[f,0];for(var w=0;w<f.length;){var T=f[w++],P=f[w++],R=m[P];if(T.tag!==5||!Gn(T)){for(;R!=null&&nv(T,R);)R=m[++P];if(P===m.length){m=!0;break e}for(T=T.child;T!==null;)f.push(T,P),T=T.sibling}}m=!1}return m;case df:if(f.tag===5&&fO(f.stateNode,m.value))return!0;break;case pf:if((f.tag===5||f.tag===6)&&(f=Ld(f))!==null&&0<=f.indexOf(m.value))return!0;break;case ff:if(f.tag===5&&typeof(f=f.memoizedProps["data-testname"])=="string"&&f.toLowerCase()===m.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function iv(f){switch(f.$$typeof){case hf:return"<"+(A(f.value)||"Unknown")+">";case cf:return":has("+(iv(f)||"")+")";case df:return'[role="'+f.value+'"]';case pf:return'"'+f.value+'"';case ff:return'[data-testname="'+f.value+'"]';default:throw Error(s(365))}}function QS(f,m){var w=[];f=[f,0];for(var T=0;T<f.length;){var P=f[T++],R=f[T++],D=m[R];if(P.tag!==5||!Gn(P)){for(;D!=null&&nv(P,D);)D=m[++R];if(R===m.length)w.push(P);else for(P=P.child;P!==null;)f.push(P,R),P=P.sibling}}return w}function sv(f,m){if(!Eo)throw Error(s(363));f=QS(f=rv(f),m),m=[],f=Array.from(f);for(var w=0;w<f.length;){var T=f[w++];if(T.tag===5)Gn(T)||m.push(T.stateNode);else for(T=T.child;T!==null;)f.push(T),T=T.sibling}return m}var _B=Math.ceil,mf=o.ReactCurrentDispatcher,ov=o.ReactCurrentOwner,Vt=o.ReactCurrentBatchConfig,Je=0,gr=null,Jt=null,Tr=0,Pn=0,Ul=Po(0),ir=0,Xh=null,Oa=0,gf=0,av=0,Hh=null,An=null,lv=0,uv=1/0,Mo=null;function jl(){uv=fr()+500}var ZS,vf=!1,hv=null,Ro=null,yf=!1,Oo=null,xf=0,zh=0,cv=null,_f=-1,wf=0;function Ur(){return 6&Je?fr():_f!==-1?_f:_f=fr()}function Bo(f){return 1&f.mode?2&Je&&Tr!==0?Tr&-Tr:sB.transition!==null?(wf===0&&(wf=Rb()),wf):(f=ot)!==0?f:Qi():1}function Jn(f,m,w,T){if(50<zh)throw zh=0,cv=null,Error(s(185));Ph(f,w,T),2&Je&&f===gr||(f===gr&&(!(2&Je)&&(gf|=w),ir===4&&Lo(f,Tr)),ln(f,T),w===1&&Je===0&&!(1&m.mode)&&(jl(),jd&&Ji()))}function ln(f,m){var w=f.callbackNode;(function(P,R){for(var D=P.suspendedLanes,$=P.pingedLanes,K=P.expirationTimes,ee=P.pendingLanes;0<ee;){var ie=31-vi(ee),ge=1<<ie,te=K[ie];te===-1?ge&D&&!(ge&$)||(K[ie]=eB(ge,R)):te<=R&&(P.expiredLanes|=ge),ee&=~ge}})(f,m);var T=Dd(f,f===gr?Tr:0);if(T===0)w!==null&&Bb(w),f.callbackNode=null,f.callbackPriority=0;else if(m=T&-T,f.callbackPriority!==m){if(w!=null&&Bb(w),m===1)f.tag===0?function(P){jd=!0,Nb(P)}(eT.bind(null,f)):Nb(eT.bind(null,f)),gi?Th(function(){!(6&Je)&&Ji()}):g0(v0,Ji),w=null;else{switch(Ob(T)){case 1:w=v0;break;case 4:w=nB;break;case 16:default:w=Lb;break;case 536870912:w=iB}w=lT(w,JS.bind(null,f))}f.callbackPriority=m,f.callbackNode=w}}function JS(f,m){if(_f=-1,wf=0,(6&Je)!=0)throw Error(s(327));var w=f.callbackNode;if(La()&&f.callbackNode!==w)return null;var T=Dd(f,f===gr?Tr:0);if(T===0)return null;if(30&T||T&f.expiredLanes||m)m=bf(f,T);else{m=T;var P=Je;Je|=2;var R=nT();for(gr===f&&Tr===m||(Mo=null,jl(),Ba(f,m));;)try{bB();break}catch($){rT(f,$)}E0(),mf.current=R,Je=P,Jt!==null?m=0:(gr=null,Tr=0,m=ir)}if(m!==0){if(m===2&&(P=f0(f))!==0&&(T=P,m=dv(f,P)),m===1)throw w=Xh,Ba(f,0),Lo(f,T),ln(f,fr()),w;if(m===6)Lo(f,T);else{if(P=f.current.alternate,(30&T)==0&&!function($){for(var K=$;;){if(16384&K.flags){var ee=K.updateQueue;if(ee!==null&&(ee=ee.stores)!==null)for(var ie=0;ie<ee.length;ie++){var ge=ee[ie],te=ge.getSnapshot;ge=ge.value;try{if(!yi(te(),ge))return!1}catch{return!1}}}if(ee=K.child,16384&K.subtreeFlags&&ee!==null)ee.return=K,K=ee;else{if(K===$)break;for(;K.sibling===null;){if(K.return===null||K.return===$)return!0;K=K.return}K.sibling.return=K.return,K=K.sibling}}return!0}(P)&&((m=bf(f,T))===2&&(R=f0(f))!==0&&(T=R,m=dv(f,R)),m===1))throw w=Xh,Ba(f,0),Lo(f,T),ln(f,fr()),w;switch(f.finishedWork=P,f.finishedLanes=T,m){case 0:case 1:throw Error(s(345));case 2:case 5:Xl(f,An,Mo);break;case 3:if(Lo(f,T),(130023424&T)===T&&10<(m=lv+500-fr())){if(Dd(f,0)!==0)break;if(((P=f.suspendedLanes)&T)!==T){Ur(),f.pingedLanes|=f.suspendedLanes&P;break}f.timeoutHandle=Ne(Xl.bind(null,f,An,Mo),m);break}Xl(f,An,Mo);break;case 4:if(Lo(f,T),(4194240&T)===T)break;for(m=f.eventTimes,P=-1;0<T;){var D=31-vi(T);R=1<<D,(D=m[D])>P&&(P=D),T&=~R}if(T=P,10<(T=(120>(T=fr()-T)?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*_B(T/1960))-T)){f.timeoutHandle=Ne(Xl.bind(null,f,An,Mo),T);break}Xl(f,An,Mo);break;default:throw Error(s(329))}}}return ln(f,fr()),f.callbackNode===w?JS.bind(null,f):null}function dv(f,m){var w=Hh;return f.current.memoizedState.isDehydrated&&(Ba(f,m).flags|=256),(f=bf(f,m))!==2&&(m=An,An=w,m!==null&&fv(m)),f}function fv(f){An===null?An=f:An.push.apply(An,f)}function Lo(f,m){for(m&=~av,m&=~gf,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var w=31-vi(m),T=1<<w;f[w]=-1,m&=~T}}function eT(f){if(6&Je)throw Error(s(327));La();var m=Dd(f,0);if(!(1&m))return ln(f,fr()),null;var w=bf(f,m);if(f.tag!==0&&w===2){var T=f0(f);T!==0&&(m=T,w=dv(f,T))}if(w===1)throw w=Xh,Ba(f,0),Lo(f,m),ln(f,fr()),w;if(w===6)throw Error(s(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,Xl(f,An,Mo),ln(f,fr()),null}function tT(f){Oo!==null&&Oo.tag===0&&!(6&Je)&&La();var m=Je;Je|=1;var w=Vt.transition,T=ot;try{if(Vt.transition=null,ot=1,f)return f()}finally{ot=T,Vt.transition=w,!(6&(Je=m))&&Ji()}}function pv(){Pn=Ul.current,At(Ul)}function Ba(f,m){f.finishedWork=null,f.finishedLanes=0;var w=f.timeoutHandle;if(w!==We&&(f.timeoutHandle=We,ze(w)),Jt!==null)for(w=Jt.return;w!==null;){var T=w;switch(_0(T),T.tag){case 1:(T=T.type.childContextTypes)!=null&&h0();break;case 3:Nl(),At(sn),At(Nr),L0();break;case 5:O0(T);break;case 4:Nl();break;case 13:case 19:At($t);break;case 10:C0(T.type._context);break;case 22:case 23:pv()}w=w.return}if(gr=f,Jt=f=No(f.current,null),Tr=Pn=m,ir=0,Xh=null,av=gf=Oa=0,An=Hh=null,Ma!==null){for(m=0;m<Ma.length;m++)if((T=(w=Ma[m]).interleaved)!==null){w.interleaved=null;var P=T.next,R=w.pending;if(R!==null){var D=R.next;R.next=P,T.next=D}w.pending=T}Ma=null}return f}function rT(f,m){for(;;){var w=Jt;try{if(E0(),Zd.current=rf,Jd){for(var T=Bt.memoizedState;T!==null;){var P=T.queue;P!==null&&(P.pending=null),T=T.next}Jd=!1}if(Ra=0,mr=pr=Bt=null,Rh=!1,Oh=0,ov.current=null,w===null||w.return===null){ir=1,Xh=m,Jt=null;break}e:{var R=f,D=w.return,$=w,K=m;if(m=Tr,$.flags|=32768,K!==null&&typeof K=="object"&&typeof K.then=="function"){var ee=K,ie=$,ge=ie.tag;if(!(1&ie.mode)&&(ge===0||ge===11||ge===15)){var te=ie.alternate;te?(ie.updateQueue=te.updateQueue,ie.memoizedState=te.memoizedState,ie.lanes=te.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var ce=ES(D);if(ce!==null){ce.flags&=-257,CS(ce,D,$,0,m),1&ce.mode&&TS(R,ee,m),K=ee;var Ee=(m=ce).updateQueue;if(Ee===null){var Ge=new Set;Ge.add(K),m.updateQueue=Ge}else Ee.add(K);break e}if(!(1&m)){TS(R,ee,m),mv();break e}K=Error(s(426))}else if(kt&&1&$.mode){var se=ES(D);if(se!==null){!(65536&se.flags)&&(se.flags|=256),CS(se,D,$,0,m),S0(Fl(K,$));break e}}R=K=Fl(K,$),ir!==4&&(ir=2),Hh===null?Hh=[R]:Hh.push(R),R=D;do{switch(R.tag){case 3:R.flags|=65536,m&=-m,R.lanes|=m,Yb(R,bS(0,K,m));break e;case 1:$=K;var q=R.type,J=R.stateNode;if(!(128&R.flags)&&(typeof q.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(Ro===null||!Ro.has(J)))){R.flags|=65536,m&=-m,R.lanes|=m,Yb(R,SS(R,$,m));break e}}R=R.return}while(R!==null)}sT(w)}catch(ae){m=ae,Jt===w&&w!==null&&(Jt=w=w.return);continue}break}}function nT(){var f=mf.current;return mf.current=rf,f===null?rf:f}function mv(){ir!==0&&ir!==3&&ir!==2||(ir=4),gr===null||!(268435455&Oa)&&!(268435455&gf)||Lo(gr,Tr)}function bf(f,m){var w=Je;Je|=2;var T=nT();for(gr===f&&Tr===m||(Mo=null,Ba(f,m));;)try{wB();break}catch(P){rT(f,P)}if(E0(),Je=w,mf.current=T,Jt!==null)throw Error(s(261));return gr=null,Tr=0,ir}function wB(){for(;Jt!==null;)iT(Jt)}function bB(){for(;Jt!==null&&!tB();)iT(Jt)}function iT(f){var m=ZS(f.alternate,f,Pn);f.memoizedProps=f.pendingProps,m===null?sT(f):Jt=m,ov.current=null}function sT(f){var m=f;do{var w=m.alternate;if(f=m.return,(32768&m.flags)==0){if((w=gB(w,m,Pn))!==null)return void(Jt=w)}else{if((w=vB(w,m))!==null)return w.flags&=32767,void(Jt=w);if(f===null)return ir=6,void(Jt=null);f.flags|=32768,f.subtreeFlags=0,f.deletions=null}if((m=m.sibling)!==null)return void(Jt=m);Jt=m=f}while(m!==null);ir===0&&(ir=5)}function Xl(f,m,w){var T=ot,P=Vt.transition;try{Vt.transition=null,ot=1,function(R,D,$,K){do La();while(Oo!==null);if(6&Je)throw Error(s(327));$=R.finishedWork;var ee=R.finishedLanes;if($===null)return null;if(R.finishedWork=null,R.finishedLanes=0,$===R.current)throw Error(s(177));R.callbackNode=null,R.callbackPriority=0;var ie=$.lanes|$.childLanes;if(function(ce,Ee){var Ge=ce.pendingLanes&~Ee;ce.pendingLanes=Ee,ce.suspendedLanes=0,ce.pingedLanes=0,ce.expiredLanes&=Ee,ce.mutableReadLanes&=Ee,ce.entangledLanes&=Ee,Ee=ce.entanglements;var se=ce.eventTimes;for(ce=ce.expirationTimes;0<Ge;){var q=31-vi(Ge),J=1<<q;Ee[q]=0,se[q]=-1,ce[q]=-1,Ge&=~J}}(R,ie),R===gr&&(Jt=gr=null,Tr=0),!(2064&$.subtreeFlags)&&!(2064&$.flags)||yf||(yf=!0,lT(Lb,function(){return La(),null})),ie=(15990&$.flags)!=0,(15990&$.subtreeFlags)!=0||ie){ie=Vt.transition,Vt.transition=null;var ge=ot;ot=1;var te=Je;Je|=4,ov.current=null,function(ce,Ee){for(G(ce.containerInfo),we=Ee;we!==null;)if(Ee=(ce=we).child,(1028&ce.subtreeFlags)!=0&&Ee!==null)Ee.return=ce,we=Ee;else for(;we!==null;){ce=we;try{var Ge=ce.alternate;if(1024&ce.flags)switch(ce.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Ge!==null){var se=Ge.memoizedProps,q=Ge.memoizedState,J=ce.stateNode,ae=J.getSnapshotBeforeUpdate(ce.elementType===ce.type?se:_i(ce.type,se),q);J.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:Fe&&kO(ce.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Be){It(ce,ce.return,Be)}if((Ee=ce.sibling)!==null){Ee.return=ce.return,we=Ee;break}we=ce.return}Ge=XS,XS=!1}(R,$),GS($,R),z(R.containerInfo),R.current=$,xB($),rB(),Je=te,ot=ge,Vt.transition=ie}else R.current=$;if(yf&&(yf=!1,Oo=R,xf=ee),ie=R.pendingLanes,ie===0&&(Ro=null),function(ce){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(Ud,ce,void 0,(128&ce.current.flags)==128)}catch{}}($.stateNode),ln(R,fr()),D!==null)for(K=R.onRecoverableError,$=0;$<D.length;$++)ee=D[$],K(ee.value,{componentStack:ee.stack,digest:ee.digest});if(vf)throw vf=!1,R=hv,hv=null,R;1&xf&&R.tag!==0&&La(),ie=R.pendingLanes,1&ie?R===cv?zh++:(zh=0,cv=R):zh=0,Ji()}(f,m,w,T)}finally{Vt.transition=P,ot=T}return null}function La(){if(Oo!==null){var f=Ob(xf),m=Vt.transition,w=ot;try{if(Vt.transition=null,ot=16>f?16:f,Oo===null)var T=!1;else{if(f=Oo,Oo=null,xf=0,(6&Je)!=0)throw Error(s(331));var P=Je;for(Je|=4,we=f.current;we!==null;){var R=we,D=R.child;if(16&we.flags){var $=R.deletions;if($!==null){for(var K=0;K<$.length;K++){var ee=$[K];for(we=ee;we!==null;){var ie=we;switch(ie.tag){case 0:case 11:case 15:Uh(8,ie,R)}var ge=ie.child;if(ge!==null)ge.return=ie,we=ge;else for(;we!==null;){var te=(ie=we).sibling,ce=ie.return;if(HS(ie),ie===ee){we=null;break}if(te!==null){te.return=ce,we=te;break}we=ce}}}var Ee=R.alternate;if(Ee!==null){var Ge=Ee.child;if(Ge!==null){Ee.child=null;do{var se=Ge.sibling;Ge.sibling=null,Ge=se}while(Ge!==null)}}we=R}}if(2064&R.subtreeFlags&&D!==null)D.return=R,we=D;else e:for(;we!==null;){if(2048&(R=we).flags)switch(R.tag){case 0:case 11:case 15:Uh(9,R,R.return)}var q=R.sibling;if(q!==null){q.return=R.return,we=q;break e}we=R.return}}var J=f.current;for(we=J;we!==null;){var ae=(D=we).child;if(2064&D.subtreeFlags&&ae!==null)ae.return=D,we=ae;else e:for(D=J;we!==null;){if(2048&($=we).flags)try{switch($.tag){case 0:case 11:case 15:uf(9,$)}}catch(ht){It($,$.return,ht)}if($===D){we=null;break e}var Be=$.sibling;if(Be!==null){Be.return=$.return,we=Be;break e}we=$.return}}if(Je=P,Ji(),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(Ud,f)}catch{}T=!0}return T}finally{ot=w,Vt.transition=m}}return!1}function oT(f,m,w){f=Io(f,m=bS(0,m=Fl(w,m),1),1),m=Ur(),f!==null&&(Ph(f,1,m),ln(f,m))}function It(f,m,w){if(f.tag===3)oT(f,f,w);else for(;m!==null;){if(m.tag===3){oT(m,f,w);break}if(m.tag===1){var T=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Ro===null||!Ro.has(T))){m=Io(m,f=SS(m,f=Fl(w,f),1),1),f=Ur(),m!==null&&(Ph(m,1,f),ln(m,f));break}}m=m.return}}function SB(f,m,w){var T=f.pingCache;T!==null&&T.delete(m),m=Ur(),f.pingedLanes|=f.suspendedLanes&w,gr===f&&(Tr&w)===w&&(ir===4||ir===3&&(130023424&Tr)===Tr&&500>fr()-lv?Ba(f,0):av|=w),ln(f,m)}function aT(f,m){m===0&&(1&f.mode?(m=d0,!(130023424&(d0<<=1))&&(d0=4194304)):m=1);var w=Ur();(f=ts(f,m))!==null&&(Ph(f,m,w),ln(f,w))}function TB(f){var m=f.memoizedState,w=0;m!==null&&(w=m.retryLane),aT(f,w)}function EB(f,m){var w=0;switch(f.tag){case 13:var T=f.stateNode,P=f.memoizedState;P!==null&&(w=P.retryLane);break;case 19:T=f.stateNode;break;default:throw Error(s(314))}T!==null&&T.delete(m),aT(f,w)}function lT(f,m){return g0(f,m)}function CB(f,m,w,T){this.tag=f,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(f,m,w,T){return new CB(f,m,w,T)}function gv(f){return!(!(f=f.prototype)||!f.isReactComponent)}function No(f,m){var w=f.alternate;return w===null?((w=ei(f.tag,m,f.key,f.mode)).elementType=f.elementType,w.type=f.type,w.stateNode=f.stateNode,w.alternate=f,f.alternate=w):(w.pendingProps=m,w.type=f.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=14680064&f.flags,w.childLanes=f.childLanes,w.lanes=f.lanes,w.child=f.child,w.memoizedProps=f.memoizedProps,w.memoizedState=f.memoizedState,w.updateQueue=f.updateQueue,m=f.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=f.sibling,w.index=f.index,w.ref=f.ref,w}function Sf(f,m,w,T,P,R){var D=2;if(T=f,typeof f=="function")gv(f)&&(D=1);else if(typeof f=="string")D=5;else e:switch(f){case l:return Na(w.children,P,R,m);case c:D=8,P|=8;break;case h:return(f=ei(12,w,m,2|P)).elementType=h,f.lanes=R,f;case v:return(f=ei(13,w,m,P)).elementType=v,f.lanes=R,f;case x:return(f=ei(19,w,m,P)).elementType=x,f.lanes=R,f;case _:return Tf(w,P,R,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case d:D=10;break e;case p:D=9;break e;case g:D=11;break e;case y:D=14;break e;case b:D=16,T=null;break e}throw Error(s(130,f==null?f:typeof f,""))}return(m=ei(D,w,m,P)).elementType=f,m.type=T,m.lanes=R,m}function Na(f,m,w,T){return(f=ei(7,f,T,m)).lanes=w,f}function Tf(f,m,w,T){return(f=ei(22,f,T,m)).elementType=_,f.lanes=w,f.stateNode={isHidden:!1},f}function vv(f,m,w){return(f=ei(6,f,null,m)).lanes=w,f}function yv(f,m,w){return(m=ei(4,f.children!==null?f.children:[],f.key,m)).lanes=w,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function PB(f,m,w,T,P){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=We,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p0(0),this.expirationTimes=p0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p0(0),this.identifierPrefix=T,this.onRecoverableError=P,Ze&&(this.mutableSourceEagerHydrationData=null)}function uT(f,m,w,T,P,R,D,$,K){return f=new PB(f,m,w,$,K),m===1?(m=1,R===!0&&(m|=8)):m=0,R=ei(3,null,null,m),f.current=R,R.stateNode=f,R.memoizedState={element:T,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},k0(R),f}function hT(f){if(!f)return Ao;e:{if(M(f=f._reactInternals)!==f||f.tag!==1)throw Error(s(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(En(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(s(171))}if(f.tag===1){var w=f.type;if(En(w))return Ib(f,w,m)}return m}function cT(f){var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(s(188)):(f=Object.keys(f).join(","),Error(s(268,f)));return(f=U(m))===null?null:f.stateNode}function dT(f,m){if((f=f.memoizedState)!==null&&f.dehydrated!==null){var w=f.retryLane;f.retryLane=w!==0&&w<m?w:m}}function Ef(f,m){dT(f,m),(f=f.alternate)&&dT(f,m)}function AB(f){return(f=U(f))===null?null:f.stateNode}function kB(){return null}return ZS=function(f,m,w){if(f!==null)if(f.memoizedProps!==m.pendingProps||sn.current)on=!0;else{if(!(f.lanes&w)&&!(128&m.flags))return on=!1,function(ge,te,ce){switch(te.tag){case 3:OS(te),Ml();break;case 5:eS(te);break;case 1:En(te.type)&&Fd(te);break;case 4:R0(te,te.stateNode.containerInfo);break;case 10:Hb(0,te.type._context,te.memoizedProps.value);break;case 13:var Ee=te.memoizedState;if(Ee!==null)return Ee.dehydrated!==null?(vt($t,1&$t.current),te.flags|=128,null):ce&te.child.childLanes?LS(ge,te,ce):(vt($t,1&$t.current),(ge=$s(ge,te,ce))!==null?ge.sibling:null);vt($t,1&$t.current);break;case 19:if(Ee=(ce&te.childLanes)!=0,(128&ge.flags)!=0){if(Ee)return FS(ge,te,ce);te.flags|=128}var Ge=te.memoizedState;if(Ge!==null&&(Ge.rendering=null,Ge.tail=null,Ge.lastEffect=null),vt($t,$t.current),Ee)break;return null;case 22:case 23:return te.lanes=0,IS(ge,te,ce)}return $s(ge,te,ce)}(f,m,w);on=(131072&f.flags)!=0}else on=!1,kt&&1048576&m.flags&&Fb(m,Hd,m.index);switch(m.lanes=0,m.tag){case 2:var T=m.type;af(f,m),f=m.pendingProps;var P=Al(m,Nr.current);Ol(m,w),P=D0(null,m,T,f,P,w);var R=U0();return m.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,En(T)?(R=!0,Fd(m)):R=!1,m.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,k0(m),P.updater=qd,m.stateNode=P,P._reactInternals=m,M0(m,T,f,w),m=W0(null,m,T,!0,R,w)):(m.tag=0,kt&&R&&x0(m),an(null,m,P,w),m=m.child),m;case 16:T=m.elementType;e:{switch(af(f,m),f=m.pendingProps,T=(P=T._init)(T._payload),m.type=T,P=m.tag=function(ge){if(typeof ge=="function")return gv(ge)?1:0;if(ge!=null){if((ge=ge.$$typeof)===g)return 11;if(ge===y)return 14}return 2}(T),f=_i(T,f),P){case 0:m=G0(null,m,T,f,w);break e;case 1:m=RS(null,m,T,f,w);break e;case 11:m=PS(null,m,T,f,w);break e;case 14:m=AS(null,m,T,_i(T.type,f),w);break e}throw Error(s(306,T,""))}return m;case 0:return T=m.type,P=m.pendingProps,G0(f,m,T,P=m.elementType===T?P:_i(T,P),w);case 1:return T=m.type,P=m.pendingProps,RS(f,m,T,P=m.elementType===T?P:_i(T,P),w);case 3:e:{if(OS(m),f===null)throw Error(s(387));T=m.pendingProps,P=(R=m.memoizedState).element,$b(f,m),Vd(m,T,null,w);var D=m.memoizedState;if(T=D.element,Ze&&R.isDehydrated){if(R={element:T,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},m.updateQueue.baseState=R,m.memoizedState=R,256&m.flags){m=BS(f,m,T,w,P=Fl(Error(s(423)),m));break e}if(T!==P){m=BS(f,m,T,w,P=Fl(Error(s(424)),m));break e}for(Ze&&(qn=DO(m.stateNode.containerInfo),Cn=m,kt=!0,xi=null,Ah=!1),w=Jb(m,null,T,w),m.child=w;w;)w.flags=-3&w.flags|4096,w=w.sibling}else{if(Ml(),T===P){m=$s(f,m,w);break e}an(f,m,T,w)}m=m.child}return m;case 5:return eS(m),f===null&&b0(m),T=m.type,P=m.pendingProps,R=f!==null?f.memoizedProps:null,D=P.children,ve(T,P)?D=null:R!==null&&ve(T,R)&&(m.flags|=32),MS(f,m),an(f,m,D,w),m.child;case 6:return f===null&&b0(m),null;case 13:return LS(f,m,w);case 4:return R0(m,m.stateNode.containerInfo),T=m.pendingProps,f===null?m.child=Bl(m,null,T,w):an(f,m,T,w),m.child;case 11:return T=m.type,P=m.pendingProps,PS(f,m,T,P=m.elementType===T?P:_i(T,P),w);case 7:return an(f,m,m.pendingProps,w),m.child;case 8:case 12:return an(f,m,m.pendingProps.children,w),m.child;case 10:e:{if(T=m.type._context,P=m.pendingProps,R=m.memoizedProps,Hb(0,T,D=P.value),R!==null)if(yi(R.value,D)){if(R.children===P.children&&!sn.current){m=$s(f,m,w);break e}}else for((R=m.child)!==null&&(R.return=m);R!==null;){var $=R.dependencies;if($!==null){D=R.child;for(var K=$.firstContext;K!==null;){if(K.context===T){if(R.tag===1){(K=zs(-1,w&-w)).tag=2;var ee=R.updateQueue;if(ee!==null){var ie=(ee=ee.shared).pending;ie===null?K.next=K:(K.next=ie.next,ie.next=K),ee.pending=K}}R.lanes|=w,(K=R.alternate)!==null&&(K.lanes|=w),P0(R.return,w,m),$.lanes|=w;break}K=K.next}}else if(R.tag===10)D=R.type===m.type?null:R.child;else if(R.tag===18){if((D=R.return)===null)throw Error(s(341));D.lanes|=w,($=D.alternate)!==null&&($.lanes|=w),P0(D,w,m),D=R.sibling}else D=R.child;if(D!==null)D.return=R;else for(D=R;D!==null;){if(D===m){D=null;break}if((R=D.sibling)!==null){R.return=D.return,D=R;break}D=D.return}R=D}an(f,m,P.children,w),m=m.child}return m;case 9:return P=m.type,T=m.pendingProps.children,Ol(m,w),T=T(P=Kn(P)),m.flags|=1,an(f,m,T,w),m.child;case 14:return P=_i(T=m.type,m.pendingProps),AS(f,m,T,P=_i(T.type,P),w);case 15:return kS(f,m,m.type,m.pendingProps,w);case 17:return T=m.type,P=m.pendingProps,P=m.elementType===T?P:_i(T,P),af(f,m),m.tag=1,En(T)?(f=!0,Fd(m)):f=!1,Ol(m,w),qb(m,T,P),M0(m,T,P,w),W0(null,m,T,!0,f,w);case 19:return FS(f,m,w);case 22:return IS(f,m,w)}throw Error(s(156,m.tag))},e.attemptContinuousHydration=function(f){if(f.tag===13){var m=ts(f,134217728);m!==null&&Jn(m,f,134217728,Ur()),Ef(f,134217728)}},e.attemptDiscreteHydration=function(f){if(f.tag===13){var m=ts(f,1);m!==null&&Jn(m,f,1,Ur()),Ef(f,1)}},e.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var m=Bo(f),w=ts(f,m);w!==null&&Jn(w,f,m,Ur()),Ef(f,m)}},e.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var w=Ch(m.pendingLanes);w!==0&&(m0(m,1|w),ln(m,fr()),!(6&Je)&&(jl(),Ji()))}break;case 13:tT(function(){var T=ts(f,1);if(T!==null){var P=Ur();Jn(T,f,1,P)}}),Ef(f,1)}},e.batchedUpdates=function(f,m){var w=Je;Je|=1;try{return f(m)}finally{(Je=w)===0&&(jl(),jd&&Ji())}},e.createComponentSelector=function(f){return{$$typeof:hf,value:f}},e.createContainer=function(f,m,w,T,P,R,D){return uT(f,m,!1,null,0,T,0,R,D)},e.createHasPseudoClassSelector=function(f){return{$$typeof:cf,value:f}},e.createHydrationContainer=function(f,m,w,T,P,R,D,$,K){return(f=uT(w,T,!0,f,0,R,0,$,K)).context=hT(null),w=f.current,(R=zs(T=Ur(),P=Bo(w))).callback=m??null,Io(w,R,P),f.current.lanes=P,Ph(f,P,T),ln(f,T),f},e.createPortal=function(f,m,w){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:T==null?null:""+T,children:f,containerInfo:m,implementation:w}},e.createRoleSelector=function(f){return{$$typeof:df,value:f}},e.createTestNameSelector=function(f){return{$$typeof:ff,value:f}},e.createTextSelector=function(f){return{$$typeof:pf,value:f}},e.deferredUpdates=function(f){var m=ot,w=Vt.transition;try{return Vt.transition=null,ot=16,f()}finally{ot=m,Vt.transition=w}},e.discreteUpdates=function(f,m,w,T,P){var R=ot,D=Vt.transition;try{return Vt.transition=null,ot=1,f(m,w,T,P)}finally{ot=R,Vt.transition=D,Je===0&&jl()}},e.findAllNodes=sv,e.findBoundingRects=function(f,m){if(!Eo)throw Error(s(363));m=sv(f,m),f=[];for(var w=0;w<m.length;w++)f.push(Bd(m[w]));for(m=f.length-1;0<m;m--)for(var T=(w=f[m]).x,P=T+w.width,R=w.y,D=R+w.height,$=m-1;0<=$;$--)if(m!==$){var K=f[$],ee=K.x,ie=ee+K.width,ge=K.y,te=ge+K.height;if(T>=ee&&R>=ge&&P<=ie&&D<=te){f.splice(m,1);break}if(!(T!==ee||w.width!==K.width||te<R||ge>D)){ge>R&&(K.height+=ge-R,K.y=R),te<D&&(K.height=D-ge),f.splice(m,1);break}if(!(R!==ge||w.height!==K.height||ie<T||ee>P)){ee>T&&(K.width+=ee-T,K.x=T),ie<P&&(K.width=P-ee),f.splice(m,1);break}}return f},e.findHostInstance=cT,e.findHostInstanceWithNoPortals=function(f){return(f=(f=F(f))!==null?B(f):null)===null?null:f.stateNode},e.findHostInstanceWithWarning=function(f){return cT(f)},e.flushControlled=function(f){var m=Je;Je|=1;var w=Vt.transition,T=ot;try{Vt.transition=null,ot=1,f()}finally{ot=T,Vt.transition=w,(Je=m)===0&&(jl(),Ji())}},e.flushPassiveEffects=La,e.flushSync=tT,e.focusWithin=function(f,m){if(!Eo)throw Error(s(363));for(m=QS(f=rv(f),m),m=Array.from(m),f=0;f<m.length;){var w=m[f++];if(!Gn(w)){if(w.tag===5&&pO(w.stateNode))return!0;for(w=w.child;w!==null;)m.push(w),w=w.sibling}}return!1},e.getCurrentUpdatePriority=function(){return ot},e.getFindAllNodesFailureDescription=function(f,m){if(!Eo)throw Error(s(363));var w=0,T=[];f=[rv(f),0];for(var P=0;P<f.length;){var R=f[P++],D=f[P++],$=m[D];if((R.tag!==5||!Gn(R))&&(nv(R,$)&&(T.push(iv($)),++D>w&&(w=D)),D<m.length))for(R=R.child;R!==null;)f.push(R,D),R=R.sibling}if(w<m.length){for(f=[];w<m.length;w++)f.push(iv(m[w]));return`findAllNodes was able to match part of the selector:
  `+T.join(" > ")+`

No matching component was found for:
  `+f.join(" > ")}return null},e.getPublicRootInstance=function(f){return(f=f.current).child?f.child.tag===5?W(f.child.stateNode):f.child.stateNode:null},e.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:AB,findFiberByHostInstance:f.findFiberByHostInstance||kB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)f=!0;else{try{Ud=m.inject(f),Zi=m}catch{}f=!!m.checkDCE}}return f},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(f,m,w,T){if(!Eo)throw Error(s(363));f=sv(f,m);var P=mO(f,w,T).disconnect;return{disconnect:function(){P()}}},e.registerMutableSourceForHydration=function(f,m){var w=m._getVersion;w=w(m._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[m,w]:f.mutableSourceEagerHydrationData.push(m,w)},e.runWithPriority=function(f,m){var w=ot;try{return ot=f,m()}finally{ot=w}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(f,m,w,T){var P=m.current,R=Ur(),D=Bo(P);return w=hT(w),m.context===null?m.context=w:m.pendingContext=w,(m=zs(R,D)).payload={element:f},(T=T===void 0?null:T)!==null&&(m.callback=T),(f=Io(P,m,D))!==null&&(Jn(f,P,D,R),Wd(f,P,D)),D},e}),vP}({get exports(){return Zx},set exports(r){Zx=r}}).exports=L7();var N7=l7(Zx),kR={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},e_={},mp={get exports(){return e_},set exports(r){e_=r}};(function(){var r,e,t,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?mp.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(mp.exports=function(){return(r()-i)/1e6},e=process.hrtime,n=(r=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(mp.exports=function(){return Date.now()-t},t=Date.now()):(mp.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(a7);var _P,wu={},Ua={};({get exports(){return wu},set exports(r){wu=r}}).exports=(_P||(_P=1,Ua.ConcurrentRoot=1,Ua.ContinuousEventPriority=4,Ua.DefaultEventPriority=16,Ua.DiscreteEventPriority=1,Ua.IdleEventPriority=536870912,Ua.LegacyRoot=0),Ua);var F7={};function Ly(r,e){r.addChild&&(r.addChild(e),typeof e.didMount=="function"&&e.didMount(e,r))}function IR(r,e){var t,n,i;(t=r.willUnmount)===null||t===void 0||t.call(r,r,e),((n=r.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=r.children)!==null&&i!==void 0&&i.length&&bo(r.children).forEach(function(s){IR(s,r)})}function wP(r,e){var t;IR(e,r),r.removeChild(e);var n=(t=e.config)!==null&&t!==void 0?t:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,a=o===void 0||o,u=n.destroyTexture,l=u!==void 0&&u,c=n.destroyBaseTexture,h=c!==void 0&&c;s&&e.destroy({children:a,texture:l,baseTexture:h})}function bP(r,e,t){var n,i;Wt(e!==t,"Cannot insert node before itself"),r.children.indexOf(e)!==-1&&r.removeChild(e);var s=r.getChildIndex(t);r.addChildAt(e,s),(n=r.__reactpixi)===null||n===void 0||(i=n.root)===null||i===void 0||i.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var SP=null,Li=N7({getRootHostContext:function(){return F7},getChildHostContext:function(r){return r},getChildHostContextForEventComponent:function(r){return r},getPublicInstance:function(r){return r},getCurrentEventPriority:function(){return function(){var r,e;if(typeof window>"u")return wu.DefaultEventPriority;switch((r=window)===null||r===void 0||(e=r.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return wu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return wu.ContinuousEventPriority;default:return wu.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(r){var e,t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=M7[r];if(typeof s=="function"&&(e=s(i,n)),!e){var o=AR[r];o&&((e=o.create(n,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((t=e)===null||t===void 0?void 0:t.applyProps)=="function"?e.applyProps:Fs)(e,{},n)),e},hideInstance:function(r){r.visible=!1},unhideInstance:function(r,e){var t=e==null||!e.hasOwnProperty("visible")||e.visible;r.visible=t},finalizeInitialChildren:function(r,e,t){return!1},prepareUpdate:function(r,e,t,n,i,s){return SP=function(o,a,u,l){var c=null;for(var h in u)!l.hasOwnProperty(h)&&u.hasOwnProperty(h)&&u[h]!==null&&(h===Kx||(c||(c=[]),c.push(h,null)));for(var d in l){var p=l[d],g=u!==null?u[d]:void 0;!l.hasOwnProperty(d)||p===g||p===null&&g===null||d===Kx||(c||(c=[]),c.push(d,p))}return c}(0,0,t,n)},shouldSetTextContent:function(r,e){return!1},shouldDeprioritizeSubtree:function(r,e){var t=e.alpha===void 0||e.alpha>0,n=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(t&&n&&i)},createTextInstance:function(r,e,t){Wt(!1,'Error trying to add text node "'.concat(r,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(r,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:e_,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Ly.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Ly.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Ly.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=wP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=wP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:bP,insertInContainerBefore:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=bP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(r,e,t,n,i){var s,o,a=r&&r.applyProps;typeof a!="function"&&(a=Fs),(a(r,n,i)||SP)&&((s=r.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(r,e,t,n,i){},commitTextUpdate:function(r,e,t){},resetTextContent:function(r){},clearContainer:function(r){},getFundamentalComponentInstance:function(r){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(r){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},getInstanceFromNode:function(r){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(r){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(r){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(r){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(r){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(r){}}),D7=kR.dependencies["react-dom"].replace(/[^0-9.]/g,""),U7=kR.name;Li.injectIntoDevTools({bundleType:0,version:D7,rendererPackageName:U7,findHostInstanceByFiber:Li.findHostInstance});var ma=new Map;function MR(r){if(Wt(Vr.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`."),ma.has(r)){var e=ma.get(r).pixiFiberContainer;Li.updateContainer(null,e,void 0,function(){ma.delete(r)})}}function RR(r){Wt(Vr.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`.");var e=ma.get(r);if(Wt(!e,"createRoot should only be called once"),!e){var t=Li.createContainer(r);e={pixiFiberContainer:t,reactRoot:{render:function(n){return Li.updateContainer(n,t,void 0),Li.getPublicRootInstance(t)},unmount:function(){MR(r),ma.delete(r)}}},ma.set(r,e)}return e.reactRoot}function j7(r,e,t){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),t!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),ma.has(e)?n=ma.get(e).reactRoot:n=RR(e),n.render(r)}function X7(r){MR(r)}function ad(){return ad=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ad.apply(this,arguments)}function H7(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function z7(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ER(n.key),n)}}function Vs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Km(r,e){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Km(r,e)}function $7(r,e){if(e&&(Un(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vs(r)}function Qm(r){return Qm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Qm(r)}var qg=ho.createContext(null),OR=qg.Provider,BR=qg.Consumer,Y7=function(r){var e=ho.forwardRef(function(t,n){return ho.createElement(BR,null,function(i){return ho.createElement(r,ad({},t,{ref:n,app:i}))})});return e.displayName="withPIXIApp(".concat(r.displayName||r.name,")"),e};function G7(r){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,n=Qm(r);if(e){var i=Qm(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return $7(this,t)}}function TP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(t),!0).forEach(function(n){Kt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):TP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var EP=function(){},LR={width:Et.number,height:Et.number,onMount:Et.func,onUnmount:Et.func,raf:Et.bool,renderOnComponentChange:Et.bool,children:Et.node,options:Et.shape({autoStart:Et.bool,width:Et.number,height:Et.number,useContextAlpha:Et.bool,backgroundAlpha:Et.number,autoDensity:Et.bool,antialias:Et.bool,preserveDrawingBuffer:Et.bool,resolution:Et.number,forceCanvas:Et.bool,backgroundColor:Et.number,clearBeforeRender:Et.bool,powerPreference:Et.string,sharedTicker:Et.bool,sharedLoader:Et.bool,resizeTo:function(r,e){var t=r[e];t&&Wt(t===window||t instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Un(t),", expect `window` or an `HTMLElement`."))},view:function(r,e,t){var n=r[e];n&&Wt(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Un(n),", supplied to ").concat(t,", expected `<canvas> Element`"))}})},W7={width:800,height:600,onMount:EP,onUnmount:EP,raf:!0,renderOnComponentChange:!0},t_=function(r){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Km(s,o)})(i,ho.Component);var e,t,n=G7(i);function i(){var s;H7(this,i);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return Kt(Vs(s=n.call.apply(n,[this].concat(a))),"_canvas",null),Kt(Vs(s),"_mediaQuery",null),Kt(Vs(s),"_ticker",null),Kt(Vs(s),"_needsUpdate",!0),Kt(Vs(s),"app",null),Kt(Vs(s),"updateSize",function(){var l=s.props,c=l.width,h=l.height,d=l.options;d!=null&&d.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(c,h)}),Kt(Vs(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),Kt(Vs(s),"renderStage",function(){var l=s.props,c=l.renderOnComponentChange;!l.raf&&c&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(t=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,u=s.height,l=s.options,c=s.raf,h=s.renderOnComponentChange;this.app=new kg(gp(gp({width:a,height:u,view:this._canvas},l),{},{autoDensity:(l==null?void 0:l.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[c?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Li.createContainer(this.app.stage),Li.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),l!=null&&l.autoDensity&&window.matchMedia&&(l==null?void 0:l.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),h&&!c&&(this._ticker=new Ut,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var u,l=this.props,c=l.width,h=l.height,d=l.raf,p=l.renderOnComponentChange,g=l.options;(g==null?void 0:g.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(g==null?void 0:g.resolution)&&(this.app.renderer.resolution=g.resolution,this.resetInteractionManager()),s.height===h&&s.width===c&&((u=s.options)===null||u===void 0?void 0:u.resolution)===(g==null?void 0:g.resolution)||this.updateSize(),s.raf!==d&&this.app.ticker[d?"start":"stop"](),Li.updateContainer(this.getChildren(),this.mountNode,this),s.width===c&&s.height===h&&s.raf===d&&s.renderOnComponentChange===p&&s.options===g||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return ho.createElement(OR,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Li.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,u=this.props.options;return u&&u.view?(Wt(u.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):ho.createElement("canvas",ad({},(s=this.props,o=[].concat(bo(Object.keys(LR)),bo(Object.keys(Qx))),Object.keys(s).filter(function(l){return!o.includes(l)}).reduce(function(l,c){return gp(gp({},l),{},Kt({},c,s[c]))},{})),{ref:function(l){return a._canvas=l}}))}}])&&z7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}();t_.propTypes=LR,t_.defaultProps=W7;var V7=t_;function NR(){var r=L.useContext(qg);return Wt(r instanceof kg,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),r}function q7(r){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=NR();Wt(typeof r=="function","`useTick` needs a callback function."),Wt(t instanceof kg,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var n=L.useRef(null);L.useEffect(function(){n.current=r},[r]),L.useEffect(function(){if(e){var i=function(s){return n.current.apply(t.ticker,[s,t.ticker])};return t.ticker.add(i),function(){t.ticker&&t.ticker.remove(i)}}},[e])}function K7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function r_(r,e,t){return r_=K7()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(n,o));return s&&Km(a,s.prototype),a},r_.apply(null,arguments)}var Q7=["children","apply"];function CP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(t),!0).forEach(function(n){Kt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):CP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Z7=function(r,e){Wt(Un(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var t=Object.keys(e),n=function(i){var s=i.children,o=i.apply,a=Pa(i,Q7),u=L.useRef(L.useMemo(function(){return t.map(function(h){var d,p=(a==null||(d=a[h])===null||d===void 0?void 0:d.construct)||[];return r_(e[h],bo(p))})},[t])),l=L.useMemo(function(){return t.reduce(function(h,d,p){return vp(vp({},h),{},Kt({},d,u.current[p]))},{})},[t]),c=L.useMemo(function(){return Object.keys(a).filter(PR(CR(t))).reduce(function(h,d){return vp(vp({},h),{},Kt({},d,a[d]))},{})},[a,t]);return t.forEach(function(h,d){return Object.assign(u.current[d],a[h])}),o&&function(){for(var h=arguments.length,d=new Array(h),p=0;p<h;p++)d[p]=arguments[p];return d.every(function(g){return typeof g=="function"})}(o)&&o.call(r,l),ho.createElement(r,ad({},c,{filters:u.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:Et.node,apply:Et.func},n},J7=Tn.BitmapText,ez=Tn.Container,tz=Tn.Graphics,rz=Tn.NineSlicePlane,nz=Tn.ParticleContainer,iz=Tn.Sprite,sz=Tn.AnimatedSprite,oz=Tn.Text,az=Tn.TilingSprite,lz=Tn.SimpleMesh,uz=Tn.SimpleRope;const hz=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:sz,AppConsumer:BR,AppContext:qg,AppProvider:OR,BitmapText:J7,Container:ez,Graphics:tz,NineSlicePlane:rz,ParticleContainer:nz,PixiComponent:R7,PixiFiber:Li,SimpleMesh:lz,SimpleRope:uz,Sprite:iz,Stage:V7,TYPES:Tn,Text:oz,TilingSprite:az,applyDefaultProps:Fs,createRoot:RR,eventHandlers:qm,render:j7,unmountComponentAtNode:X7,useApp:NR,useTick:q7,withFilters:Z7,withPixiApp:Y7},Symbol.toStringTag,{value:"Module"})),cz=uA(hz);Vg.exports=cz;var zt=Vg.exports;function n_(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Ny=function(){return Math.random().toString(36).substring(7).split("").join(".")},PP={INIT:"@@redux/INIT"+Ny(),REPLACE:"@@redux/REPLACE"+Ny(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ny()}};function dz(r){Object.keys(r).forEach(function(e){var t=r[e],n=t(void 0,{type:PP.INIT});if(typeof n>"u")throw new Error(n_(12));if(typeof t(void 0,{type:PP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(n_(13))})}function fz(r){for(var e=Object.keys(r),t={},n=0;n<e.length;n++){var i=e[n];typeof r[i]=="function"&&(t[i]=r[i])}var s=Object.keys(t),o;try{dz(t)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,h={},d=0;d<s.length;d++){var p=s[d],g=t[p],v=u[p],x=g(v,l);if(typeof x>"u")throw l&&l.type,new Error(n_(14));h[p]=x,c=c||x!==v}return c=c||s.length!==Object.keys(u).length,c?h:u}}const pz=(r={},e)=>{const t=[].concat(r.scenes);switch(e.type){case dj:return t.push(e.value),{...r,scenes:t};case fj:return t.pop(),{...r,scenes:t};case sI:return t.pop(),t.push(e.value),{...r,scenes:t};case pj:return{...r};case oI:return{...r,assetsLoadingProgress:e.value};default:return r}},mz={sceneManager:{scenes:["preload"],assetsLoadingProgress:0}};function Hw(r){return{type:sI,value:r}}function i_(r){return{type:oI,value:r}}const s_="",gz=(r={},e)=>{switch(e.type){case Vk:let t=r.status;return r.status=="idle"?t="spin":r.status=="stopping"&&(t="idle"),{...r,status:t};case qk:return{...r,spinModel:e.value};case Kk:return{...r,loadErrorModel:e.value};case Qk:return{...r,status:"stopping",spinModel:e.value};case Zk:return{...r,status:"idle"};case Jk:return{...r,betAmount:e.value};case eI:return{...r,betLevel:e.value};case tI:return{...r,autoSpinCount:e.value.autoSpinCount,stopAutoSpinLimit:e.value.stopAutoSpinLimit};case cj:{let n=r.autoSpinCount;return n!=s_&&--n,{...r,status:"spin",autoSpinCount:n}}case rI:return{...r,autoSpinCount:0};case nI:return{...r,speedModel:e.value};case iI:return{...r,lineBetsModel:e.value};default:return r}},vz={spin:{status:"idle",autoSpinCount:0,lineBetsModel:null,speedModel:"normal",stopAutoSpinLimit:{totalBetTimes:new rt(0),signleWin:new rt(0),balanceTo:new rt(0)}}};function AP(){return{type:Vk}}function yz(r){return{type:qk,value:r}}function xz(r){return{type:Kk,value:r}}function _z(r){return{type:Qk,value:r}}function zw(){return{type:Zk}}function eo(r){return{type:Jk,value:new rt(r)}}function kP(r){return{type:eI,value:new rt(r)}}function wz(r,e,t,n){return{type:tI,value:{autoSpinCount:r,stopAutoSpinLimit:{totalBetTimes:e==s_?s_:new rt(e),signleWin:new rt(t),balanceTo:new rt(n)}}}}function IP(){return{type:rI}}function bz(r){return{type:nI,value:r}}function Sz(r){return{type:iI,value:r}}const Tz=(r={},e)=>{switch(e.type){case oj:return{};case Uk:const t=e.value;return{...r,loggingIn:!0,memberName:t.name,isTestAccount:t.test,balance:t.balance,currency:t.currency};case jk:return{...r,balance:e.value.balance};default:return r}},Ez={user:{loggingIn:!1,memberName:"w88",currency:"RMB",isTestAccount:!0,balance:new rt(0)}};function Cz(r){return{type:Uk,value:r}}function Fy(r){return{type:jk,value:{balance:new rt(r)}}}function Pz(){const r=$h("user")||Tz,e=$h("setting")||mj,t=$h("spin")||gz,n=$h("scene")||pz,i=$h("reducers");return fz({user:r,setting:e,spin:t,sceneManager:n,...i})}function yp(r,e={},t){const n=Object.assign(r[t],e[t]||{});return r[t]=n,r}function Az(){const r=yp(Ez,iu("user"),"user"),e=yp(gj,iu("setting"),"setting"),t=yp(vz,iu("spin"),"spin"),n=yp(mz,iu("scene"),"sceneManager");return nL(r,e,t,n)}function kz(){const{state:r}=L.useContext(gt),{scenes:e}=r.sceneManager,t=e[e.length-1]=="preload";return E.jsx("div",{className:`page-mod ${t?"db":"dn"}`,children:E.jsx("div",{className:"scene-preload-mod",children:E.jsxs("div",{className:"loading-animation-default-mod",children:[E.jsx("div",{}),E.jsx("div",{}),E.jsx("div",{}),E.jsx("div",{}),E.jsx("div",{}),E.jsx("div",{}),E.jsx("div",{}),E.jsx("div",{})]})})})}var FR=(r=>(r[r.NotEnoughBalance=1e3]="NotEnoughBalance",r[r.UserNotFound=1001]="UserNotFound",r[r.ErrorReadGameState=1002]="ErrorReadGameState",r[r.InvalidCredit=1003]="InvalidCredit",r[r.ConcurrentSpin=1004]="ConcurrentSpin",r[r.NoGameState=1005]="NoGameState",r[r.InvalidGameState=1006]="InvalidGameState",r[r.ExpiredState=1007]="ExpiredState",r[r.InternalFailure=1008]="InternalFailure",r[r.ExternalFailure=1009]="ExternalFailure",r))(FR||{});const Iz=()=>{const{state:r,dispatch:e}=L.useContext(gt),{code:t}=r.setting.error;return L.useEffect(()=>{t&&(t==="000"||t==="001"?e(Jr(t,!0,!1)):t==1e3?e(Jr(t,!0,!0)):t==1005?e(Jr("",!1,!0)):e(Jr(t,!0,!1)))},[t]),E.jsx(E.Fragment,{})};function Mz(){const r=document.getElementById("context");r.style.setProperty("opacity","1"),r.className="context-fadein";const e=document.getElementById("logo");document.body.removeChild(e)}const Rz=()=>{const{state:r}=L.useContext(gt),{scenes:e}=r.sceneManager,t=e[e.length-1]=="load";return L.useMemo(()=>{t&&Mz()},[t]),E.jsx(E.Fragment,{})};var o_={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var h=this||t;return h._counter=1e3,h._html5AudioPool=[],h.html5PoolSize=10,h._codecs={},h._howls=[],h._muted=!1,h._volume=1,h._canPlayEvent="canplaythrough",h._navigator=typeof window<"u"&&window.navigator?window.navigator:null,h.masterGain=null,h.noAudio=!1,h.usingWebAudio=!0,h.autoSuspend=!0,h.ctx=null,h.autoUnlock=!0,h._setup(),h},volume:function(h){var d=this||t;if(h=parseFloat(h),d.ctx||c(),typeof h<"u"&&h>=0&&h<=1){if(d._volume=h,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(h,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var g=d._howls[p]._getSoundIds(),v=0;v<g.length;v++){var x=d._howls[p]._soundById(g[v]);x&&x._node&&(x._node.volume=x._volume*h)}return d}return d._volume},mute:function(h){var d=this||t;d.ctx||c(),d._muted=h,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(h?0:d._volume,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var g=d._howls[p]._getSoundIds(),v=0;v<g.length;v++){var x=d._howls[p]._soundById(g[v]);x&&x._node&&(x._node.muted=h?!0:x._muted)}return d},stop:function(){for(var h=this||t,d=0;d<h._howls.length;d++)h._howls[d].stop();return h},unload:function(){for(var h=this||t,d=h._howls.length-1;d>=0;d--)h._howls[d].unload();return h.usingWebAudio&&h.ctx&&typeof h.ctx.close<"u"&&(h.ctx.close(),h.ctx=null,c()),h},codecs:function(h){return(this||t)._codecs[h.replace(/^x-/,"")]},_setup:function(){var h=this||t;if(h.state=h.ctx&&h.ctx.state||"suspended",h._autoSuspend(),!h.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(h._canPlayEvent="canplay")}catch{h.noAudio=!0}else h.noAudio=!0;try{var d=new Audio;d.muted&&(h.noAudio=!0)}catch{}return h.noAudio||h._setupCodecs(),h},_setupCodecs:function(){var h=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return h}if(!d||typeof d.canPlayType!="function")return h;var p=d.canPlayType("audio/mpeg;").replace(/^no$/,""),g=h._navigator?h._navigator.userAgent:"",v=g.match(/OPR\/(\d+)/g),x=v&&parseInt(v[0].split("/")[1],10)<33,y=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,b=g.match(/Version\/(.*?) /),_=y&&b&&parseInt(b[1],10)<15;return h._codecs={mp3:!!(!x&&(p||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},h},_unlockAudio:function(){var h=this||t;if(!(h._audioUnlocked||!h.ctx)){h._audioUnlocked=!1,h.autoUnlock=!1,!h._mobileUnloaded&&h.ctx.sampleRate!==44100&&(h._mobileUnloaded=!0,h.unload()),h._scratchBuffer=h.ctx.createBuffer(1,1,22050);var d=function(p){for(;h._html5AudioPool.length<h.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,h._releaseHtml5Audio(g)}catch{h.noAudio=!0;break}for(var v=0;v<h._howls.length;v++)if(!h._howls[v]._webAudio)for(var x=h._howls[v]._getSoundIds(),y=0;y<x.length;y++){var b=h._howls[v]._soundById(x[y]);b&&b._node&&!b._node._unlocked&&(b._node._unlocked=!0,b._node.load())}h._autoResume();var _=h.ctx.createBufferSource();_.buffer=h._scratchBuffer,_.connect(h.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof h.ctx.resume=="function"&&h.ctx.resume(),_.onended=function(){_.disconnect(0),h._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var S=0;S<h._howls.length;S++)h._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),h}},_obtainHtml5Audio:function(){var h=this||t;if(h._html5AudioPool.length)return h._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(h){var d=this||t;return h._unlocked&&d._html5AudioPool.push(h),d},_autoSuspend:function(){var h=this;if(!(!h.autoSuspend||!h.ctx||typeof h.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<h._howls.length;d++)if(h._howls[d]._webAudio){for(var p=0;p<h._howls[d]._sounds.length;p++)if(!h._howls[d]._sounds[p]._paused)return h}return h._suspendTimer&&clearTimeout(h._suspendTimer),h._suspendTimer=setTimeout(function(){if(h.autoSuspend){h._suspendTimer=null,h.state="suspending";var g=function(){h.state="suspended",h._resumeAfterSuspend&&(delete h._resumeAfterSuspend,h._autoResume())};h.ctx.suspend().then(g,g)}},3e4),h}},_autoResume:function(){var h=this;if(!(!h.ctx||typeof h.ctx.resume>"u"||!t.usingWebAudio))return h.state==="running"&&h.ctx.state!=="interrupted"&&h._suspendTimer?(clearTimeout(h._suspendTimer),h._suspendTimer=null):h.state==="suspended"||h.state==="running"&&h.ctx.state==="interrupted"?(h.ctx.resume().then(function(){h.state="running";for(var d=0;d<h._howls.length;d++)h._howls[d]._emit("resume")}),h._suspendTimer&&(clearTimeout(h._suspendTimer),h._suspendTimer=null)):h.state==="suspending"&&(h._resumeAfterSuspend=!0),h}};var t=new e,n=function(h){var d=this;if(!h.src||h.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(h)};n.prototype={init:function(h){var d=this;return t.ctx||c(),d._autoplay=h.autoplay||!1,d._format=typeof h.format!="string"?h.format:[h.format],d._html5=h.html5||!1,d._muted=h.mute||!1,d._loop=h.loop||!1,d._pool=h.pool||5,d._preload=typeof h.preload=="boolean"||h.preload==="metadata"?h.preload:!0,d._rate=h.rate||1,d._sprite=h.sprite||{},d._src=typeof h.src!="string"?h.src:[h.src],d._volume=h.volume!==void 0?h.volume:1,d._xhr={method:h.xhr&&h.xhr.method?h.xhr.method:"GET",headers:h.xhr&&h.xhr.headers?h.xhr.headers:null,withCredentials:h.xhr&&h.xhr.withCredentials?h.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=h.onend?[{fn:h.onend}]:[],d._onfade=h.onfade?[{fn:h.onfade}]:[],d._onload=h.onload?[{fn:h.onload}]:[],d._onloaderror=h.onloaderror?[{fn:h.onloaderror}]:[],d._onplayerror=h.onplayerror?[{fn:h.onplayerror}]:[],d._onpause=h.onpause?[{fn:h.onpause}]:[],d._onplay=h.onplay?[{fn:h.onplay}]:[],d._onstop=h.onstop?[{fn:h.onstop}]:[],d._onmute=h.onmute?[{fn:h.onmute}]:[],d._onvolume=h.onvolume?[{fn:h.onvolume}]:[],d._onrate=h.onrate?[{fn:h.onrate}]:[],d._onseek=h.onseek?[{fn:h.onseek}]:[],d._onunlock=h.onunlock?[{fn:h.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var h=this,d=null;if(t.noAudio){h._emit("loaderror",null,"No audio support.");return}typeof h._src=="string"&&(h._src=[h._src]);for(var p=0;p<h._src.length;p++){var g,v;if(h._format&&h._format[p])g=h._format[p];else{if(v=h._src[p],typeof v!="string"){h._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(v),g||(g=/\.([^.]+)$/.exec(v.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&t.codecs(g)){d=h._src[p];break}}if(!d){h._emit("loaderror",null,"No codec support for selected audio sources.");return}return h._src=d,h._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(h._html5=!0,h._webAudio=!1),new i(h),h._webAudio&&o(h),h},play:function(h,d){var p=this,g=null;if(typeof h=="number")g=h,h=null;else{if(typeof h=="string"&&p._state==="loaded"&&!p._sprite[h])return null;if(typeof h>"u"&&(h="__default",!p._playLock)){for(var v=0,x=0;x<p._sounds.length;x++)p._sounds[x]._paused&&!p._sounds[x]._ended&&(v++,g=p._sounds[x]._id);v===1?h=null:g=null}}var y=g?p._soundById(g):p._inactiveSound();if(!y)return null;if(g&&!h&&(h=y._sprite||"__default"),p._state!=="loaded"){y._sprite=h,y._ended=!1;var b=y._id;return p._queue.push({event:"play",action:function(){p.play(b)}}),b}if(g&&!y._paused)return d||p._loadQueue("play"),y._id;p._webAudio&&t._autoResume();var _=Math.max(0,y._seek>0?y._seek:p._sprite[h][0]/1e3),S=Math.max(0,(p._sprite[h][0]+p._sprite[h][1])/1e3-_),I=S*1e3/Math.abs(y._rate),A=p._sprite[h][0]/1e3,k=(p._sprite[h][0]+p._sprite[h][1])/1e3;y._sprite=h,y._ended=!1;var M=function(){y._paused=!1,y._seek=_,y._start=A,y._stop=k,y._loop=!!(y._loop||p._sprite[h][2])};if(_>=k){p._ended(y);return}var O=y._node;if(p._webAudio){var F=function(){p._playLock=!1,M(),p._refreshBuffer(y);var N=y._muted||p._muted?0:y._volume;O.gain.setValueAtTime(N,t.ctx.currentTime),y._playStart=t.ctx.currentTime,typeof O.bufferSource.start>"u"?y._loop?O.bufferSource.noteGrainOn(0,_,86400):O.bufferSource.noteGrainOn(0,_,S):y._loop?O.bufferSource.start(0,_,86400):O.bufferSource.start(0,_,S),I!==1/0&&(p._endTimers[y._id]=setTimeout(p._ended.bind(p,y),I)),d||setTimeout(function(){p._emit("play",y._id),p._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?F():(p._playLock=!0,p.once("resume",F),p._clearTimer(y._id))}else{var U=function(){O.currentTime=_,O.muted=y._muted||p._muted||t._muted||O.muted,O.volume=y._volume*t.volume(),O.playbackRate=y._rate;try{var N=O.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(p._playLock=!0,M(),N.then(function(){p._playLock=!1,O._unlocked=!0,d?p._loadQueue():p._emit("play",y._id)}).catch(function(){p._playLock=!1,p._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),y._ended=!0,y._paused=!0})):d||(p._playLock=!1,M(),p._emit("play",y._id)),O.playbackRate=y._rate,O.paused){p._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}h!=="__default"||y._loop?p._endTimers[y._id]=setTimeout(p._ended.bind(p,y),I):(p._endTimers[y._id]=function(){p._ended(y),O.removeEventListener("ended",p._endTimers[y._id],!1)},O.addEventListener("ended",p._endTimers[y._id],!1))}catch(j){p._emit("playerror",y._id,j)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=p._src,O.load());var X=window&&window.ejecta||!O.readyState&&t._navigator.isCocoonJS;if(O.readyState>=3||X)U();else{p._playLock=!0,p._state="loading";var B=function(){p._state="loaded",U(),O.removeEventListener(t._canPlayEvent,B,!1)};O.addEventListener(t._canPlayEvent,B,!1),p._clearTimer(y._id)}}return y._id},pause:function(h){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(h)}}),d;for(var p=d._getSoundIds(h),g=0;g<p.length;g++){d._clearTimer(p[g]);var v=d._soundById(p[g]);if(v&&!v._paused&&(v._seek=d.seek(p[g]),v._rateSeek=0,v._paused=!0,d._stopFade(p[g]),v._node))if(d._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||d._emit("pause",v?v._id:null)}return d},stop:function(h,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(h)}}),p;for(var g=p._getSoundIds(h),v=0;v<g.length;v++){p._clearTimer(g[v]);var x=p._soundById(g[v]);x&&(x._seek=x._start||0,x._rateSeek=0,x._paused=!0,x._ended=!0,p._stopFade(g[v]),x._node&&(p._webAudio?x._node.bufferSource&&(typeof x._node.bufferSource.stop>"u"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),p._cleanBuffer(x._node)):(!isNaN(x._node.duration)||x._node.duration===1/0)&&(x._node.currentTime=x._start||0,x._node.pause(),x._node.duration===1/0&&p._clearSound(x._node))),d||p._emit("stop",x._id))}return p},mute:function(h,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(h,d)}}),p;if(typeof d>"u")if(typeof h=="boolean")p._muted=h;else return p._muted;for(var g=p._getSoundIds(d),v=0;v<g.length;v++){var x=p._soundById(g[v]);x&&(x._muted=h,x._interval&&p._stopFade(x._id),p._webAudio&&x._node?x._node.gain.setValueAtTime(h?0:x._volume,t.ctx.currentTime):x._node&&(x._node.muted=t._muted?!0:h),p._emit("mute",x._id))}return p},volume:function(){var h=this,d=arguments,p,g;if(d.length===0)return h._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var v=h._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):p=parseFloat(d[0])}else d.length>=2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));var y;if(typeof p<"u"&&p>=0&&p<=1){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"volume",action:function(){h.volume.apply(h,d)}}),h;typeof g>"u"&&(h._volume=p),g=h._getSoundIds(g);for(var b=0;b<g.length;b++)y=h._soundById(g[b]),y&&(y._volume=p,d[2]||h._stopFade(g[b]),h._webAudio&&y._node&&!y._muted?y._node.gain.setValueAtTime(p,t.ctx.currentTime):y._node&&!y._muted&&(y._node.volume=p*t.volume()),h._emit("volume",y._id))}else return y=g?h._soundById(g):h._sounds[0],y?y._volume:0;return h},fade:function(h,d,p,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(h,d,p,g)}}),v;h=Math.min(Math.max(0,parseFloat(h)),1),d=Math.min(Math.max(0,parseFloat(d)),1),p=parseFloat(p),v.volume(h,g);for(var x=v._getSoundIds(g),y=0;y<x.length;y++){var b=v._soundById(x[y]);if(b){if(g||v._stopFade(x[y]),v._webAudio&&!b._muted){var _=t.ctx.currentTime,S=_+p/1e3;b._volume=h,b._node.gain.setValueAtTime(h,_),b._node.gain.linearRampToValueAtTime(d,S)}v._startFadeInterval(b,h,d,p,x[y],typeof g>"u")}}return v},_startFadeInterval:function(h,d,p,g,v,x){var y=this,b=d,_=p-d,S=Math.abs(_/.01),I=Math.max(4,S>0?g/S:g),A=Date.now();h._fadeTo=p,h._interval=setInterval(function(){var k=(Date.now()-A)/g;A=Date.now(),b+=_*k,b=Math.round(b*100)/100,_<0?b=Math.max(p,b):b=Math.min(p,b),y._webAudio?h._volume=b:y.volume(b,h._id,!0),x&&(y._volume=b),(p<d&&b<=p||p>d&&b>=p)&&(clearInterval(h._interval),h._interval=null,h._fadeTo=null,y.volume(p,h._id),y._emit("fade",h._id))},I)},_stopFade:function(h){var d=this,p=d._soundById(h);return p&&p._interval&&(d._webAudio&&p._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(p._interval),p._interval=null,d.volume(p._fadeTo,h),p._fadeTo=null,d._emit("fade",h)),d},loop:function(){var h=this,d=arguments,p,g,v;if(d.length===0)return h._loop;if(d.length===1)if(typeof d[0]=="boolean")p=d[0],h._loop=p;else return v=h._soundById(parseInt(d[0],10)),v?v._loop:!1;else d.length===2&&(p=d[0],g=parseInt(d[1],10));for(var x=h._getSoundIds(g),y=0;y<x.length;y++)v=h._soundById(x[y]),v&&(v._loop=p,h._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=p,p&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,h.playing(x[y])&&(h.pause(x[y],!0),h.play(x[y],!0)))));return h},rate:function(){var h=this,d=arguments,p,g;if(d.length===0)g=h._sounds[0]._id;else if(d.length===1){var v=h._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):p=parseFloat(d[0])}else d.length===2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));var y;if(typeof p=="number"){if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"rate",action:function(){h.rate.apply(h,d)}}),h;typeof g>"u"&&(h._rate=p),g=h._getSoundIds(g);for(var b=0;b<g.length;b++)if(y=h._soundById(g[b]),y){h.playing(g[b])&&(y._rateSeek=h.seek(g[b]),y._playStart=h._webAudio?t.ctx.currentTime:y._playStart),y._rate=p,h._webAudio&&y._node&&y._node.bufferSource?y._node.bufferSource.playbackRate.setValueAtTime(p,t.ctx.currentTime):y._node&&(y._node.playbackRate=p);var _=h.seek(g[b]),S=(h._sprite[y._sprite][0]+h._sprite[y._sprite][1])/1e3-_,I=S*1e3/Math.abs(y._rate);(h._endTimers[g[b]]||!y._paused)&&(h._clearTimer(g[b]),h._endTimers[g[b]]=setTimeout(h._ended.bind(h,y),I)),h._emit("rate",y._id)}}else return y=h._soundById(g),y?y._rate:h._rate;return h},seek:function(){var h=this,d=arguments,p,g;if(d.length===0)h._sounds.length&&(g=h._sounds[0]._id);else if(d.length===1){var v=h._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):h._sounds.length&&(g=h._sounds[0]._id,p=parseFloat(d[0]))}else d.length===2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));if(typeof g>"u")return 0;if(typeof p=="number"&&(h._state!=="loaded"||h._playLock))return h._queue.push({event:"seek",action:function(){h.seek.apply(h,d)}}),h;var y=h._soundById(g);if(y)if(typeof p=="number"&&p>=0){var b=h.playing(g);b&&h.pause(g,!0),y._seek=p,y._ended=!1,h._clearTimer(g),!h._webAudio&&y._node&&!isNaN(y._node.duration)&&(y._node.currentTime=p);var _=function(){b&&h.play(g,!0),h._emit("seek",g)};if(b&&!h._webAudio){var S=function(){h._playLock?setTimeout(S,0):_()};setTimeout(S,0)}else _()}else if(h._webAudio){var I=h.playing(g)?t.ctx.currentTime-y._playStart:0,A=y._rateSeek?y._rateSeek-y._seek:0;return y._seek+(A+I*Math.abs(y._rate))}else return y._node.currentTime;return h},playing:function(h){var d=this;if(typeof h=="number"){var p=d._soundById(h);return p?!p._paused:!1}for(var g=0;g<d._sounds.length;g++)if(!d._sounds[g]._paused)return!0;return!1},duration:function(h){var d=this,p=d._duration,g=d._soundById(h);return g&&(p=d._sprite[g._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var h=this,d=h._sounds,p=0;p<d.length;p++)d[p]._paused||h.stop(d[p]._id),h._webAudio||(h._clearSound(d[p]._node),d[p]._node.removeEventListener("error",d[p]._errorFn,!1),d[p]._node.removeEventListener(t._canPlayEvent,d[p]._loadFn,!1),d[p]._node.removeEventListener("ended",d[p]._endFn,!1),t._releaseHtml5Audio(d[p]._node)),delete d[p]._node,h._clearTimer(d[p]._id);var g=t._howls.indexOf(h);g>=0&&t._howls.splice(g,1);var v=!0;for(p=0;p<t._howls.length;p++)if(t._howls[p]._src===h._src||h._src.indexOf(t._howls[p]._src)>=0){v=!1;break}return s&&v&&delete s[h._src],t.noAudio=!1,h._state="unloaded",h._sounds=[],h=null,null},on:function(h,d,p,g){var v=this,x=v["_on"+h];return typeof d=="function"&&x.push(g?{id:p,fn:d,once:g}:{id:p,fn:d}),v},off:function(h,d,p){var g=this,v=g["_on"+h],x=0;if(typeof d=="number"&&(p=d,d=null),d||p)for(x=0;x<v.length;x++){var y=p===v[x].id;if(d===v[x].fn&&y||!d&&y){v.splice(x,1);break}}else if(h)g["_on"+h]=[];else{var b=Object.keys(g);for(x=0;x<b.length;x++)b[x].indexOf("_on")===0&&Array.isArray(g[b[x]])&&(g[b[x]]=[])}return g},once:function(h,d,p){var g=this;return g.on(h,d,p,1),g},_emit:function(h,d,p){for(var g=this,v=g["_on"+h],x=v.length-1;x>=0;x--)(!v[x].id||v[x].id===d||h==="load")&&(setTimeout((function(y){y.call(this,d,p)}).bind(g,v[x].fn),0),v[x].once&&g.off(h,v[x].fn,v[x].id));return g._loadQueue(h),g},_loadQueue:function(h){var d=this;if(d._queue.length>0){var p=d._queue[0];p.event===h&&(d._queue.shift(),d._loadQueue()),h||p.action()}return d},_ended:function(h){var d=this,p=h._sprite;if(!d._webAudio&&h._node&&!h._node.paused&&!h._node.ended&&h._node.currentTime<h._stop)return setTimeout(d._ended.bind(d,h),100),d;var g=!!(h._loop||d._sprite[p][2]);if(d._emit("end",h._id),!d._webAudio&&g&&d.stop(h._id,!0).play(h._id),d._webAudio&&g){d._emit("play",h._id),h._seek=h._start||0,h._rateSeek=0,h._playStart=t.ctx.currentTime;var v=(h._stop-h._start)*1e3/Math.abs(h._rate);d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),v)}return d._webAudio&&!g&&(h._paused=!0,h._ended=!0,h._seek=h._start||0,h._rateSeek=0,d._clearTimer(h._id),d._cleanBuffer(h._node),t._autoSuspend()),!d._webAudio&&!g&&d.stop(h._id,!0),d},_clearTimer:function(h){var d=this;if(d._endTimers[h]){if(typeof d._endTimers[h]!="function")clearTimeout(d._endTimers[h]);else{var p=d._soundById(h);p&&p._node&&p._node.removeEventListener("ended",d._endTimers[h],!1)}delete d._endTimers[h]}return d},_soundById:function(h){for(var d=this,p=0;p<d._sounds.length;p++)if(h===d._sounds[p]._id)return d._sounds[p];return null},_inactiveSound:function(){var h=this;h._drain();for(var d=0;d<h._sounds.length;d++)if(h._sounds[d]._ended)return h._sounds[d].reset();return new i(h)},_drain:function(){var h=this,d=h._pool,p=0,g=0;if(!(h._sounds.length<d)){for(g=0;g<h._sounds.length;g++)h._sounds[g]._ended&&p++;for(g=h._sounds.length-1;g>=0;g--){if(p<=d)return;h._sounds[g]._ended&&(h._webAudio&&h._sounds[g]._node&&h._sounds[g]._node.disconnect(0),h._sounds.splice(g,1),p--)}}},_getSoundIds:function(h){var d=this;if(typeof h>"u"){for(var p=[],g=0;g<d._sounds.length;g++)p.push(d._sounds[g]._id);return p}else return[h]},_refreshBuffer:function(h){var d=this;return h._node.bufferSource=t.ctx.createBufferSource(),h._node.bufferSource.buffer=s[d._src],h._panner?h._node.bufferSource.connect(h._panner):h._node.bufferSource.connect(h._node),h._node.bufferSource.loop=h._loop,h._loop&&(h._node.bufferSource.loopStart=h._start||0,h._node.bufferSource.loopEnd=h._stop||0),h._node.bufferSource.playbackRate.setValueAtTime(h._rate,t.ctx.currentTime),d},_cleanBuffer:function(h){var d=this,p=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!h.bufferSource)return d;if(t._scratchBuffer&&h.bufferSource&&(h.bufferSource.onended=null,h.bufferSource.disconnect(0),p))try{h.bufferSource.buffer=t._scratchBuffer}catch{}return h.bufferSource=null,d},_clearSound:function(h){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(h.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(h){this._parent=h,this.init()};i.prototype={init:function(){var h=this,d=h._parent;return h._muted=d._muted,h._loop=d._loop,h._volume=d._volume,h._rate=d._rate,h._seek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++t._counter,d._sounds.push(h),h.create(),h},create:function(){var h=this,d=h._parent,p=t._muted||h._muted||h._parent._muted?0:h._volume;return d._webAudio?(h._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),h._node.gain.setValueAtTime(p,t.ctx.currentTime),h._node.paused=!0,h._node.connect(t.masterGain)):t.noAudio||(h._node=t._obtainHtml5Audio(),h._errorFn=h._errorListener.bind(h),h._node.addEventListener("error",h._errorFn,!1),h._loadFn=h._loadListener.bind(h),h._node.addEventListener(t._canPlayEvent,h._loadFn,!1),h._endFn=h._endListener.bind(h),h._node.addEventListener("ended",h._endFn,!1),h._node.src=d._src,h._node.preload=d._preload===!0?"auto":d._preload,h._node.volume=p*t.volume(),h._node.load()),h},reset:function(){var h=this,d=h._parent;return h._muted=d._muted,h._loop=d._loop,h._volume=d._volume,h._rate=d._rate,h._seek=0,h._rateSeek=0,h._paused=!0,h._ended=!0,h._sprite="__default",h._id=++t._counter,h},_errorListener:function(){var h=this;h._parent._emit("loaderror",h._id,h._node.error?h._node.error.code:0),h._node.removeEventListener("error",h._errorFn,!1)},_loadListener:function(){var h=this,d=h._parent;d._duration=Math.ceil(h._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),h._node.removeEventListener(t._canPlayEvent,h._loadFn,!1)},_endListener:function(){var h=this,d=h._parent;d._duration===1/0&&(d._duration=Math.ceil(h._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(h)),h._node.removeEventListener("ended",h._endFn,!1)}};var s={},o=function(h){var d=h._src;if(s[d]){h._duration=s[d].duration,l(h);return}if(/^data:[^;]+;base64,/.test(d)){for(var p=atob(d.split(",")[1]),g=new Uint8Array(p.length),v=0;v<p.length;++v)g[v]=p.charCodeAt(v);u(g.buffer,h)}else{var x=new XMLHttpRequest;x.open(h._xhr.method,d,!0),x.withCredentials=h._xhr.withCredentials,x.responseType="arraybuffer",h._xhr.headers&&Object.keys(h._xhr.headers).forEach(function(y){x.setRequestHeader(y,h._xhr.headers[y])}),x.onload=function(){var y=(x.status+"")[0];if(y!=="0"&&y!=="2"&&y!=="3"){h._emit("loaderror",null,"Failed loading audio file with status: "+x.status+".");return}u(x.response,h)},x.onerror=function(){h._webAudio&&(h._html5=!0,h._webAudio=!1,h._sounds=[],delete s[d],h.load())},a(x)}},a=function(h){try{h.send()}catch{h.onerror()}},u=function(h,d){var p=function(){d._emit("loaderror",null,"Decoding audio data failed.")},g=function(v){v&&d._sounds.length>0?(s[d._src]=v,l(d,v)):p()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(h).then(g).catch(p):t.ctx.decodeAudioData(h,g,p)},l=function(h,d){d&&!h._duration&&(h._duration=d.duration),Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue())},c=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var h=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=d?parseInt(d[1],10):null;if(h&&p&&p<9){var g=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!g&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=n,typeof io<"u"?(io.HowlerGlobal=e,io.Howler=t,io.Howl=n,io.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,i,s,o,a){var u=this;if(!u.ctx||!u.ctx.listener)return u;var l=u._orientation;if(n=typeof n!="number"?l[1]:n,i=typeof i!="number"?l[2]:i,s=typeof s!="number"?l[3]:s,o=typeof o!="number"?l[4]:o,a=typeof a!="number"?l[5]:a,typeof t=="number")u._orientation=[t,n,i,s,o,a],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(t,n,i,s,o,a);else return l;return u},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var u=i._soundById(o[a]);if(u)if(typeof t=="number")u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,s),s==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",u._id);else return u._stereo}return i},Howl.prototype.pos=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,i,s)}}),o;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")o._pos=[t,n,i];else return o._pos;for(var a=o._getSoundIds(s),u=0;u<a.length;u++){var l=o._soundById(a[u]);if(l)if(typeof t=="number")l._pos=[t,n,i],l._node&&((!l._panner||l._panner.pan)&&e(l,"spatial"),typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setPosition(t,n,i)),o._emit("pos",l._id);else return l._pos}return o},Howl.prototype.orientation=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,i,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof t=="number")o._orientation=[t,n,i];else return o._orientation;for(var a=o._getSoundIds(s),u=0;u<a.length;u++){var l=o._soundById(a[u]);if(l)if(typeof t=="number")l._orientation=[t,n,i],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),typeof l._panner.orientationX<"u"?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,i)),o._emit("orientation",l._id);else return l._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,s,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var a=t._getSoundIds(s),u=0;u<a.length;u++)if(o=t._soundById(a[u]),o){var l=o._pannerAttr;l={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:l.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:l.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:l.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:l.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:l.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:l.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:l.panningModel};var c=o._panner;c||(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"),c=o._panner),c.coneInnerAngle=l.coneInnerAngle,c.coneOuterAngle=l.coneOuterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor,c.panningModel=l.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(o_);const Oz="IChannelClick";class Bz{constructor(){C(this,"channels",{})}exist(e,t){const n=this.channels[e];return Bn(e)&&Bn(n[t])}add(e,t,n,i=1,s=!1,o){let a=this.channels[e];Vu(a)&&(a={},this.channels[e]=a),Bn(a[t])&&console.warn(`sound "${t}" is existing in channel "${e}"`);const u={channelId:e,name:t,soundId:n,volume:i,softBgm:s,onComplete:o};return a[t]=u,u}getPlaybackBy(e){for(const t in this.channels){const n=this.channels[t];for(const i in n)if(e(n[i]))return n[i]}}getPlaybackBySoundId(e){return this.getPlaybackBy(t=>t.soundId==e)}getPlaybackBySoundName(e){return this.getPlaybackBy(t=>t.name==e)}removeBy(e){for(const t in this.channels){const n=this.channels[t];for(const i in n){const s=n[i];e(s)&&(delete n[i],rL(n)&&delete this.channels[t])}}}removeBySoundId(e){return this.removeBy(t=>t.soundId==e)}removeBySoundName(e){return this.removeBy(t=>t.name==e)}getSoundIds(e){const t=[],n=this.channels[e];for(const i in n)t.push(n[i].soundId);return t}}const Nc=class Nc{constructor(){C(this,"howlers",{});C(this,"_muted",!1);C(this,"_volume",1);C(this,"bgm");C(this,"channelManager");C(this,"_pause");this.channelManager=new Bz}static get Obj(){return this._Obj||(this._Obj=new Nc),this._Obj}static clickSound(e="click"){Nc.Obj.play(Oz,e,1,!1,!1)}getSoundIdBySoundName(e){const t=this.channelManager.getPlaybackBySoundName(e);if(t)return t.soundId}getChannelIdBySoundName(e){const t=this.channelManager.getPlaybackBySoundName(e);if(t)return t.channelId}play(e,t,n=1,i=!1,s,o){let a=this.channelManager.getPlaybackBySoundName(t);const u=this.getVolumn(n),l=this.getSoundPlayer(e);if(a&&a.channelId==e)l.stop(a.soundId),l.play(a.soundId),l.volume(u,a.soundId);else{const c=l.play(t);l.volume(u,c),a=this.channelManager.add(e,t,c,n,i,h=>{o&&o(h)})}i&&this.softBgm(!0)}plays(e,t,n=1,i=!1,s){const[o,...a]=t;o?this.play(e,o,n,i,!1,()=>{this.plays(e,a,n,i,s)}):s&&s(o)}playBgm(e,t,n=1,i=.3){const s=this.channelManager.getPlaybackBySoundName(t),o=this.getSoundPlayer(e),a=this.getVolumn(n);if(s&&s.channelId==e)o.playing(s.soundId)||(o.play(s.soundId),o.volume(a,s.soundId));else{this.bgm&&this.stop(this.bgm.channelId,this.bgm.name);const u=o.play(t);o.volume(a,u),this.channelManager.add(e,t,u,n),this.bgm={soundId:u,channelId:e,name:t,soft:i}}}isReady(e){return Bn(this.howlers[e])}getSoundPlayer(e){if(!this.isReady(e)){const t=WH(xR);if(Bn(t)){t.onend=i=>{if(!(this.bgm&&i==this.bgm.soundId)){const s=this.channelManager.getPlaybackBySoundId(i);s&&s.name.indexOf("bgm")==-1&&(s&&(s.softBgm&&this.softBgm(!1),s.onComplete&&s.onComplete(s.name)),this.channelManager.removeBySoundId(i))}};const n=new o_.Howl(t);this.howlers[e]=n}}return this.howlers[e]}pauses(e){if(this._pause!=e){for(const t in this.howlers)if(e)this.howlers[t].pause();else{const n=this.channelManager.getSoundIds(t),i=this.howlers[t];for(const s of n)!i.playing(s)&&i.play(s)}this._pause=e}}pause(e,t){const n=this.getSoundIdBySoundName(t);n&&this.getSoundPlayer(e).pause(n)}stop(e,t){const n=this.getSoundIdBySoundName(t);n&&(this.channelManager.removeBySoundId(n),this.getSoundPlayer(e).stop(n))}stops(e,t){t.forEach(n=>this.stop(e,n))}softBgm(e){if(this.bgm){const t=this.channelManager.getPlaybackBySoundName(this.bgm.name);if(t){const n=this.getVolumn(e?this.bgm.soft:1,t.volume);this.getSoundPlayer(this.bgm.channelId).volume(n,t.soundId)}}}getVolumn(...e){return e.reduce((n,i)=>n*i,this._volume)}setVolumn(e,t,n){this.howlers[e]&&this.howlers[e].volume(n)}get volume(){return this._volume}set volume(e){if(this._volume!=e){this._volume=e;for(const t in this.channelManager.channels){const n=this.channelManager.channels[t],i=this.getSoundPlayer(t);for(const s in n){const o=n[s];i.volume(o.volume*e,o.soundId)}}}}get muted(){return this._muted}set muted(e){this._muted=e,o_.Howler.mute(e)}setRate(e=1){for(const t in this.howlers)this.howlers[t].rate(e)}};C(Nc,"_Obj");let $i=Nc;const Lz=document.querySelector("html"),Yi="resize";function Nz(r,e=1.5){return 2}const Fz=()=>{const r=zt.useApp(),{current:e}=L.useRef({clientSize:[0,0],renderFrame:[0,0,0,0]}),{state:t,dispatch:n}=L.useContext(gt),i=Oe.Obj,[s,o]=L.useMemo(()=>[Oe.Obj.isLandscapeOnly,Oe.Obj.isPortraitOnly],[]),a=L.useMemo(()=>document.getElementById("App"),[]),[u,l]=L.useMemo(()=>typeof document.hidden<"u"?["hidden","visibilitychange"]:typeof document.msHidden<"u"?["msHidden","msvisibilitychange"]:typeof document.webkitHidden<"u"?["webkitHidden","webkitvisibilitychange"]:(console.error("visibilitychange events not supported"),["hidden","visibilitychange"]),[]);function c(p){p?($i.Obj.pauses(!0),r.ticker.started&&r.ticker.stop(),Oe.Obj.turboTicker.started&&Oe.Obj.turboTicker.stop()):($i.Obj.pauses(!1),!r.ticker.started&&r.ticker.start(),!Oe.Obj.turboTicker.started&&Oe.Obj.turboTicker.start())}const h=()=>{Oe.Obj.updateOrientation();const p=i.orientation;let{safeArea:g}=i.layoutOptions;const{displayArea:v}=i.layoutOptions,[x,y,b,_]=v,S=_/b;g=g||[0,0,b,_];const[I,A,k,M]=g,O=M/k,F=document.documentElement.clientWidth,U=document.documentElement.clientHeight,X=U/F;let B,N,j,W;p=="l"?X<=O?(N=U*(_/M),B=N/S,N=Math.min(_,N),B=Math.min(b,B),W=U,j=B):(F<=k?B=F*(b/k):F<=b?B=b:B=F,N=B*S,N=Math.min(_,N),B=Math.min(b,B),W=N,j=F):X>=O?(B=F*(b/k),N=B*S,N=Math.min(_,N),B=Math.min(b,B),j=F,W=N):(U<=M?N=U*(_/M):U<=_?N=_:N=U,B=N/S,N=Math.min(_,N),B=Math.min(b,B),j=B,W=U);const Q=B/b,H=(F-B)/2,G=(U-N)/2,z=Math.round(Math.min(H,0)),V=Math.round(Math.min(G,0)),{clientWidth:Z,clientHeight:re}=document.documentElement;if(e.renderFrame[0]!=z||e.renderFrame[1]!=V||e.renderFrame[2]!=B||e.renderFrame[3]!=N||e.clientSize[0]!=Z||e.clientSize[1]!=re){e.renderFrame=[z,V,B,N],e.clientSize=[Z,re],r.stage.scale.set(Q),r.renderer.resolution=Nz(Q,t.setting.maxResolution),r.renderer.resize(B,N);const he=Math.max(V/Q,y-A)*Q,ve=Math.max(z/Q,-(I-x))*Q;r.view.style.top=`${he}px`,r.view.style.left=`${ve}px`;const Me=Math.ceil(Math.min(F,j,B)),Ne=Math.round(Math.min(U,W,N)),ze=Math.round(Math.max(0,G)),We=Math.round(Math.max(0,H));a.style.width=`${Me}px`,a.style.height=`${Ne}px`,a.style.top=`${ze}px`,a.style.left=`${We}px`;let He=0;p=="l"?He=Math.max(12,20*(document.documentElement.clientWidth-We*2)/960):He=Math.max(12,20*(document.documentElement.clientWidth-We*2)/540),Lz.style.fontSize=`${He}px`,t.setting.orientation!=p&&n(vj(p)),Oe.Obj.updateViewport(z/Q,V/Q,Math.round(Me/Q),Math.round(Ne/Q)),i.notice.emit(Yi)}};function d(){c(!!document[u])}return L.useEffect(()=>(document.addEventListener(l,d),()=>{document.removeEventListener(l,d)}),[]),L.useEffect(()=>{function p(g){const v=Math.abs(Math.sin(g/180*Math.PI))==1;if(s){const x=document.getElementById("screen-only-tips-l");v?(x.style.display="none",c(!1)):(x.style.display="block",c(!0))}else if(o){const x=document.getElementById("screen-only-tips-p");v?(x.style.display="block",c(!0)):(x.style.display="none",c(!1))}}oi.any&&(window.screen.orientation?(window.screen.orientation.addEventListener("change",g=>{const v=g.target.angle;p(v)}),p(window.screen.orientation.angle)):(window.addEventListener("orientationchange",g=>{const v=g.target.screen.orientation.angle;p(v)}),p(window.orientation||0)))},[]),zt.useTick((p,g)=>{(window.scrollX!=0||window.scrollY!=0)&&window.scrollTo(0,0),h()},!0),E.jsx(E.Fragment,{})},Dz=()=>{const{state:r}=L.useContext(gt),{soundOn:e,volume:t}=r.setting;return L.useEffect(()=>{$i.Obj.muted=!e},[e]),L.useEffect(()=>{},[t]),E.jsx(E.Fragment,{})};function DR(r,e){function t(n){if(n&&n.props){const i={},s=n.props;for(const o in s)o.startsWith(e)&&(i[o.slice(2)]=s[o]);return n.props.children&&(i.children=DR(n.props.children,e)),L.cloneElement(n,i)}return n}return Array.isArray(r)?L.Children.map(r,n=>t(n)):t(r)}function UR(r,e=!0){const t=Rt(Oe.Obj),n=L.useRef(null);L.useEffect(()=>{n.current=r},[r]),L.useEffect(()=>{if(e){const i=s=>n.current.apply(t.turboTicker,[s,t.turboTicker]);return t.turboTicker.add(i),()=>{t.turboTicker&&t.turboTicker.remove(i)}}},[e])}function wh(r,e,t){zt.useTick(r,e&&!t),UR(r,e&&t)}function a_(r,e,t=[]){const{current:n}=L.useRef({fn:r,timer:null});return L.useEffect(function(){n.fn=r},[r]),L.useCallback(function(...s){n.timer||(n.timer=setTimeout(()=>{clearTimeout(n.timer),delete n.timer},e),n.fn(...s))},t)}function Uz(r,e,t=[]){const{current:n}=L.useRef({fn:r,timer:null});return L.useEffect(function(){n.fn=r},[r]),L.useCallback(function(...s){n.timer&&clearTimeout(n.timer),n.timer=setTimeout(()=>{n.fn(...s)},e)},t)}function jz(r,e=[]){const{state:t}=L.useContext(gt),n=t.setting.orientation;return DR(r,`${n}-`)}function Rt(r){return L.useMemo(()=>r,[])}function jR(r,e,t,n,i=[]){const{current:s}=L.useRef({timer:null}),[o,a]=L.useState(!1);L.useEffect(()=>{n&&(s.timer=0,a(!0))},i),L.useEffect(()=>{a(n),s.timer=0},[n]),wh((u,l)=>{s.timer+=u,s.timer>t&&(e(),a(!1))},o,r)}function gl(r,e,t,n=[]){jR(!1,r,e,t,n)}function Ja(r,e,t,n=[]){jR(!0,r,e,t,n)}function XR(r,e,t,n,i=[]){const{current:s}=L.useRef({time:null});L.useEffect(()=>{n&&(s.time=0)},i),L.useEffect(()=>{n&&(s.time=0)},[n]),wh((o,a)=>{s.time+=o,s.time>=e&&(s.time=0,t())},n,r)}function ld(r,e,t,n=[]){XR(!1,r,e,t,n)}function Rc(r,e,t,n=[]){XR(!0,r,e,t,n)}function Cd(){return L.useContext(gt)}const Xz=({children:r,Context:e,render:t})=>E.jsx(e.Consumer,{children:n=>t(E.jsxs(e.Provider,{value:n,children:[E.jsx(wj,{}),E.jsx(Yz,{}),E.jsx(Fz,{}),E.jsx(Dz,{}),E.jsx(Rz,{}),E.jsx(Iz,{}),r]}))}),Hz=Pz(),zz=Az(),$z=({children:r,antialias:e=!0,...t})=>{const[n,i]=L.useReducer(Hz,zz),[s,...o]=L.Children.map(r,a=>a);return E.jsxs(gt.Provider,{value:{state:n,dispatch:i},children:[E.jsx(Xz,{Context:gt,render:a=>E.jsx(zt.Stage,{options:{backgroundColor:1118481,backgroundAlpha:0,resolution:1,antialias:e,autoDensity:!0},...t,children:a}),children:s}),E.jsx(kz,{}),E.jsx(gt.Consumer,{children:({state:a})=>a.sceneManager.scenes[0]=="preload"?E.jsx(E.Fragment,{}):o})]})},HR=60,MP=Number((1e3/HR).toFixed(2));function Yz(){const r=zt.useApp(),e=Oe.Obj,{state:t}=Cd(),{speedModel:n}=t.spin;L.useMemo(()=>{r.ticker.maxFPS=r.ticker.minFPS=HR,r.ticker.speed=MP,e.turboTicker.start()},[]);const i=L.useMemo(()=>n=="fast"?2:1,[n]);return L.useMemo(()=>{e.turboTicker.speed=i*MP},[n]),zt.useTick((s,o)=>{JU(e.getTime(!1)),e.deltaTime(s)},!0),UR((s,o)=>{e.turboTweenGroup.update(e.getTime(!0)),e.deltaTurboTime(s)},!0),E.jsx(E.Fragment,{})}const Gz=({children:r})=>{const{state:e}=L.useContext(gt),{scenes:t}=e.sceneManager;return L.useMemo(()=>{const i=[];return L.Children.forEach(r,s=>{t.indexOf(s.props.id)!=-1&&i.push(s)}),i},[t])},ye=L.forwardRef(({hitFrame:r,children:e,...t},n)=>{const i=L.useMemo(()=>r?new $e(...r):null,[]);return E.jsx(zt.Container,{hitArea:i,...t,ref:n,children:e})}),Tl=({children:r})=>jz(r),wr=L.forwardRef(({turbo:r=!1,dep:e=[],children:t,id:n,from:i={},to:s={},playing:o=!1,duration:a,yoyo:u,repeat:l,repeatDelay:c,delay:h=0,easing:d=b=>b,onStart:p,onComplete:g,onRepeat:v,onUpdate:x},y)=>{var A,k;const[b,_]=L.useState(!1),{current:S}=L.useRef({tween:null});function I(){var M;(M=S.tween)==null||M.stop(),S.tween=null}return L.useMemo(()=>{if(I(),o){const M=Oe.Obj;S.tween=new V_({...i}).group(r?M.turboTweenGroup:void 0).to({...s},a).repeat(l).repeatDelay(c).delay(h).yoyo(u).start(M.getTime(r))}},[o,...e]),L.useMemo(()=>{var M;(M=S.tween)==null||M.repeat(l)},[l]),L.useMemo(()=>{var M;(M=S.tween)==null||M.delay(h)},[h]),(A=S.tween)==null||A.easing(d).onStart(p).onUpdate((M,O)=>{x&&x(M,O),_(!b)}).onRepeat(v).onComplete(g),L.useImperativeHandle(y,()=>({get repeated(){return S.tween._initialRepeat-S.tween._repeat},get repeat(){return S.tween._repeat}})),L.useEffect(()=>{},[]),t(S.tween?S.tween._object:i,((k=S.tween)==null?void 0:k.isPlaying())||!1)});function Wz({children:r,progress:e,onComplete:t,...n}){const{current:i}=L.useRef({percent:0,oldPercent:0});return L.useMemo(()=>{i.oldPercent=i.percent},[e]),E.jsx(ye,{...n,children:E.jsx(wr,{dep:[e],from:{k:0},to:{k:1},playing:!0,duration:500,onComplete:()=>{t&&t(e)},children:({k:s})=>{const o=i.oldPercent+(e-i.oldPercent)*s;return i.percent=o,r(o)}})})}const Kg=r=>{const{children:e,...t}=r,{l:n,p:i}=Oe.Obj.configOptions.layoutMap,s=L.useMemo(()=>!!(n&&i),[]),[o,a,u,l]=L.useMemo(()=>{if(s)return[-n.displayArea[0],-n.displayArea[1],-i.displayArea[0],-i.displayArea[1]];{const c=n??i;return[-c.displayArea[0],-c.displayArea[1],0,0]}},[]);return E.jsx(ye,{...t,children:s?E.jsx(Tl,{children:E.jsx(ye,{"l-x":o,"l-y":a,"p-x":u,"p-y":l,children:e})}):E.jsx(ye,{x:o,y:a,children:e})})},Vz=({assets:r,next:e,...t})=>{const n=Oe.Obj.configOptions.assetVersion,{dispatch:i}=L.useContext(gt),{current:s}=L.useRef({loaded:!1,loggingIn:!1});return L.useEffect(()=>(i(i_(0)),wR(r,n,o=>{i(i_(Math.floor(o*100)))}).then(()=>{s.loaded=!0,i(Hw(e))}),()=>{const o=Hn(Sn,"gametitle");document.title=o}),[]),E.jsx(Kg,{...t})},qz=({children:r,assets:e,next:t,...n})=>{const i=Oe.Obj.configOptions.assetVersion,{state:s,dispatch:o}=L.useContext(gt),{current:a}=L.useRef({loaded:!1,loggingIn:!1}),{loggingIn:u}=s.user,[l,c]=L.useState(0),[h,d]=L.useState(0);function p(){a.loggingIn&&a.loaded&&t&&o(Hw(t))}function g(b){l==100&&(a.loaded=!0,p())}L.useEffect(()=>{u&&(a.loggingIn=!0),p()},[u]);const[v,x]=L.useMemo(()=>[Hn(Sn,"loggingin"),Hn(Sn,"loading")],[]),y=L.useMemo(()=>l==100?[`${v}.`,`${v}..`,`${v}...`][h]:[`${x}.`,`${x}..`,`${x}...`][h],[h,l]);return L.useEffect(()=>{o(i_(0)),wR(e,i,b=>{c(Math.floor(b*100))})},[]),ld(400,()=>{d((h+1)%3)},!0),E.jsx(Kg,{...n,children:E.jsx(Wz,{progress:l,onComplete:g,children:b=>r(b,y)})})};function bh({children:r,active:e=!0,...t}){const[n,i]=L.useState(!1),s=L.useRef(null);return L.useEffect(()=>{i(!n)},[]),E.jsxs(ye,{...t,children:[L.cloneElement(r[0],{mask:e?s.current:null}),L.cloneElement(r[1],{ref:s,visible:e})]})}function $w(r){return L.forwardRef(({res:e=r,name:t,...n},i)=>{const s=L.useMemo(()=>GH(e,t),[t]);return E.jsx(zt.Sprite,{ref:i,texture:s,...n})})}const it=$w(_R),tm=$w(Xw),ga=$w(yR),Kz=L.forwardRef(({name:r,...e},t)=>{const n=L.useMemo(()=>YH(r),[r]);return E.jsx(zt.Sprite,{ref:t,texture:n,...e})}),mi=L.forwardRef(({style:r,maxScaleLength:e,...t},n)=>{const i=L.useRef(),s=L.useMemo(()=>r instanceof Bs?r:new Bs(r),[]);return L.useEffect(()=>{if(e&&i.current){const o=setTimeout(()=>{const a=i.current.width,u=i.current.scale.x,l=e/a*u,c=u>0?1:-1,h=i.current.scale.y>0?1:-1;l<1?i.current.scale.set(l*c,l*h):i.current.scale.x!=1&&i.current.scale.set(1*c,1*h),clearTimeout(o)},1)}},[t.text,e]),L.useImperativeHandle(n,()=>i.current,[i]),E.jsx(zt.Text,{ref:i,...t,style:s})}),Qz=L.forwardRef(({maxScaleLength:r,...e},t)=>{const n=L.useRef();return L.useEffect(()=>{if(r&&n.current){const i=setTimeout(()=>{const s=n.current.width,o=n.current.scale.x,a=r/s*o,u=o>0?1:-1,l=n.current.scale.y>0?1:-1;a<1?n.current.scale.set(a*u,a*l):n.current.scale.x!=1&&n.current.scale.set(1*u,1*l),clearTimeout(i)},1)}},[e.text,r]),L.useImperativeHandle(t,()=>n.current,[n]),E.jsx(zt.BitmapText,{ref:n,...e})}),Oc=L.forwardRef(({text:r,...e},t)=>{const n=L.useMemo(()=>Hn(Sn,r),[r]);return E.jsx(mi,{ref:t,text:n,...e})});function Zz(r){return jH(r,[{id:vR,src:"compress/bg-game-l@2x.[avif,webp,jpg]"},{id:em,src:"compress/preload@2x.[avif,webp,png].json"}])}const zR="goldFont@1x",$R="symbol_all_skel",YR="symbol_all_atlas",GR="spine_bg_skel",WR="spine_bg_atlas",VR="spine_spin_skel",qR="spine_spin_atlas";function Jz(r){return HH(r,[{id:$R,src:"compress/atlas/all/oceanpopingamesmall.skel"},{id:YR,src:"compress/atlas/all/@1x/oceanpopingamesmall@1x.[avif,webp,png].atlas"},{id:GR,src:"compress/atlas/bg/oceanpop_background.skel"},{id:WR,src:"compress/atlas/bg/@1x/oceanpop_background@1x.[avif,webp,png].atlas"},{id:zR,src:"font/goldFont@1x.xml"},{id:VR,src:"compress/atlas/autospin/SpinButton.skel"},{id:qR,src:"compress/atlas/autospin/@1x/SpinButton@1x.[avif,webp,png].atlas"},{id:Xw,src:"uncompress/components@2x.[avif,webp,png].json"}])}const e9=({...r})=>{const e=L.useMemo(()=>Jz(Oe.Obj.urlOptions.lang),[]);return E.jsx(qz,{assets:e,...r,children:(t,n)=>{const i=-450+450*(t/100);return E.jsxs(Tl,{children:[E.jsx(Kz,{"l-x":585,"p-x":558,y:585,name:vR,anchor:.5}),E.jsxs(ye,{"l-x":315,"l-y":830,"p-x":298,"p-y":830,children:[E.jsx(it,{res:em,name:"LoadConatiner.png"}),E.jsxs(bh,{x:36,y:41,children:[E.jsx(it,{x:-2,y:-.2,res:em,name:"LoadMeter.png"}),E.jsx(it,{x:i,pivot:[-4,-.5],res:em,name:"LoadMetermask.png"})]}),E.jsx(mi,{x:285,y:55,text:`${n}`,anchor:.5,style:{align:"center",fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})]})}})};function t9({children:r,...e}){return r(e)}const r9=({dataSource:r,children:e})=>{const{gameStatus:t,nextGameStatus:n}=r.base,[i,s]=L.useMemo(()=>t.startsWith("pause_")?[!0,Number(t.split("_")[1])]:[!1,0],[t]);return gl(()=>{n()},s,i),L.cloneElement(e,{dataSource:r})};var xt=(r=>(r.showWinAmount="showWinAmount",r.reSpin="reSpin",r.reSpinStoping="reSpinStoping",r.collapsing="collapsing",r.showBigWinAmount="showBigWinAmount",r))(xt||{});function ql(r,e){return`${r},${e}`}const n9=({dataSource:r,children:e})=>{const{gameStatus:t,state:n,nextGameStatus:i}=r==null?void 0:r.base,s=t==xt.collapsing,[o,a]=L.useState(!1),{current:u}=L.useRef({collapsePositions:[],willCollaspingLines:[],currentHighLightLines:[],highLightLines:[],currentCrackPositions:[],currentCollaspingPositions:[],currentCollaspedPositions:[],history:[]});L.useMemo(()=>{if(s){const A=n.spin.spinModel;u.willCollaspingLines=[...A.winLines],u.collapsePositions=[];for(const k of u.willCollaspingLines)for(const M of k.cls.c)u.collapsePositions.push(ql(...M));u.willCollaspingLines.sort((k,M)=>M.s-k.s)}else u.willCollaspingLines.length>0&&(u.history=[...u.history,...u.willCollaspingLines]),u.willCollaspingLines=[],u.currentHighLightLines=[],u.highLightLines=[],u.currentCrackPositions=[],u.currentCollaspingPositions=[]},[s]);const l=u.willCollaspingLines.length>0,c=u.currentHighLightLines.length>0,h=u.currentCrackPositions.length>0,d=u.currentCollaspingPositions.length>0;L.useMemo(()=>{t==xt.reSpinStoping?u.currentCollaspedPositions=[]:t=="spin"&&(u.history=[])},[t]);function p(){const A=u.willCollaspingLines.shift();u.currentHighLightLines.push(A),u.highLightLines.push(A),u.history.push(A),a(!o)}Ja(()=>{p()},0,s&&l&&!c),Rc(1e3,()=>{p()},s&&l&&c);function g(){const A=u.currentHighLightLines.shift();for(const k of A.cls.c)u.currentCrackPositions.push(ql(...k));a(!o)}Ja(()=>{g()},1200,s&&!l&&c&&!h),Rc(1200,()=>{g()},s&&c&&h);function v(){const A=u.currentCrackPositions.shift();u.currentCollaspingPositions.push(A),a(!o)}Ja(()=>{v()},1500,s&&!c&&h&&!d),Rc(100,()=>{v()},s&&h&&d);function x(){u.currentCollaspedPositions=[...u.currentCollaspingPositions],i()}Ja(()=>{x()},800,s&&!h&&d);function y(A){const k=ql(...A);return u.currentCrackPositions.indexOf(k)>=0}function b(A){const k=ql(...A);return u.currentCollaspingPositions.indexOf(k)>=0}function _(A){const k=ql(...A);return u.currentCollaspedPositions.indexOf(k)>=0}function S(A){const k=ql(...A);return u.collapsePositions.indexOf(k)>=0}const I={winlines:{heigLightLines:u.highLightLines,showLineWin:u.currentHighLightLines.length>0,isCollapseSymbol:S,isCrack:y,isCollasping:b,isCollasped:_,history:u.history},...r};return L.cloneElement(e,{dataSource:I})},i9=({dataSource:r,children:e})=>{const{state:t,dispatch:n}=L.useContext(gt),{status:i,spinModel:s,betLevel:o}=t.spin,[a,u]=L.useState(!1),{current:l}=L.useRef({status:"idle",statusOrder:[],inFreeSpin:!1,winAmount:new rt(0)});function c(g,v=!0){l.status!=g&&(l.status==xt.showWinAmount&&(l.winAmount=new rt(0)),l.status=g,v&&u(!a))}function h(){const g=l.statusOrder.shift();g&&c(g,!0)}function d(){h()}L.useMemo(()=>{let g;i=="spin"?s&&s.existWin?g=xt.reSpin:g="spin":i=="stopping"?l.status=="spin"?g="stopping":g=xt.reSpinStoping:i=="idle"&&(l.status=="stopping"||l.status==xt.reSpinStoping?(l.statusOrder=[],l.statusOrder.push("pause_500"),s.existWin?(l.winAmount=l.winAmount.add(s.payout),l.statusOrder.push(xt.collapsing)):l.winAmount.gt(0)&&(s.getWinType(l.winAmount)=="big"&&l.statusOrder.push(xt.showBigWinAmount),l.statusOrder.push(xt.showWinAmount)),l.statusOrder.push("idle"),g=l.statusOrder.shift()):g="idle"),c(g,!1)},[i]),L.useMemo(()=>{s&&s!=null&&s.existWin&&(l.statusOrder=[xt.collapsing,"idle"],l.winAmount=new rt(s.tm.mul(s.lineBet).mul(o)),h())},[]);const p={base:{state:t,dispatch:n,nextGameStatus:h,onSkip:d,gameStatus:l.status},winAmount:l.winAmount,...r};return L.cloneElement(e,{dataSource:p})};if(typeof window<"u"&&window.PIXI){let r=window.require;window.require=e=>{if(r)return r(e);if(e.startsWith("@pixi/"))return window.PIXI}}class KR{constructor(){C(this,"entries",{});C(this,"size",0)}add(e){let t=this.entries[e];return this.entries[e]=!0,t?!1:(this.size++,!0)}addAll(e){let t=this.size;for(var n=0,i=e.length;n<i;n++)this.add(e[n]);return t!=this.size}contains(e){return this.entries[e]}clear(){this.entries={},this.size=0}}const Mn=class Mn{constructor(e=0,t=0,n=0,i=0){C(this,"r");C(this,"g");C(this,"b");C(this,"a");this.r=e,this.g=t,this.b=n,this.a=i}set(e,t,n,i){return this.r=e,this.g=t,this.b=n,this.a=i,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,t,n,i){return this.r+=e,this.g+=t,this.b+=n,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,t){e.r=((t&4278190080)>>>24)/255,e.g=((t&16711680)>>>16)/255,e.b=((t&65280)>>>8)/255,e.a=(t&255)/255}static rgb888ToColor(e,t){e.r=((t&16711680)>>>16)/255,e.g=((t&65280)>>>8)/255,e.b=(t&255)/255}toRgb888(){const e=t=>("0"+(t*255).toString(16)).slice(-2);return+("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e){return new Mn().setFromString(e)}};C(Mn,"WHITE",new Mn(1,1,1,1)),C(Mn,"RED",new Mn(1,0,0,1)),C(Mn,"GREEN",new Mn(0,1,0,1)),C(Mn,"BLUE",new Mn(0,0,1,1)),C(Mn,"MAGENTA",new Mn(1,0,1,1));let je=Mn;const sr=class sr{static clamp(e,t,n){return e<t?t:e>n?n:e}static cosDeg(e){return Math.cos(e*sr.degRad)}static sinDeg(e){return Math.sin(e*sr.degRad)}static atan2Deg(e,t){return Math.atan2(e,t)*sr.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let t=Math.pow(Math.abs(e),.3333333333333333);return e<0?-t:t}static randomTriangular(e,t){return sr.randomTriangularWith(e,t,(e+t)*.5)}static randomTriangularWith(e,t,n){let i=Math.random(),s=t-e;return i<=(n-e)/s?e+Math.sqrt(i*s*(n-e)):t-Math.sqrt((1-i)*s*(t-n))}static isPowerOfTwo(e){return e&&(e&e-1)===0}};C(sr,"PI",3.1415927),C(sr,"PI2",sr.PI*2),C(sr,"invPI2",1/sr.PI2),C(sr,"radiansToDegrees",180/sr.PI),C(sr,"radDeg",sr.radiansToDegrees),C(sr,"degreesToRadians",sr.PI/180),C(sr,"degRad",sr.degreesToRadians);let ue=sr;const qo=class qo{static arrayCopy(e,t,n,i,s){for(let o=t,a=i;o<t+s;o++,a++)n[a]=e[o]}static arrayFill(e,t,n,i){for(let s=t;s<n;s++)e[s]=i}static setArraySize(e,t,n=0){let i=e.length;if(i==t)return e;if(e.length=t,i<t)for(let s=i;s<t;s++)e[s]=n;return e}static ensureArrayCapacity(e,t,n=0){return e.length>=t?e:qo.setArraySize(e,t,n)}static newArray(e,t){let n=new Array(e);for(let i=0;i<e;i++)n[i]=t;return n}static newFloatArray(e){if(qo.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static newShortArray(e){if(qo.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static toFloatArray(e){return qo.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return qo.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,t){}static contains(e,t,n=!0){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}static enumValue(e,t){return e[t[0].toUpperCase()+t.slice(1)]}};C(qo,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u");let pe=qo;class l_{constructor(e){C(this,"items",new Array);C(this,"instantiator");this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}}class Zm{constructor(e=0,t=0){C(this,"x");C(this,"y");this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}length(){let e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}normalize(){let e=this.length();return e!=0&&(this.x/=e,this.y/=e),this}}class QR{constructor(e){C(this,"name");if(!e)throw new Error("name cannot be null.");this.name=e}}const ug=class ug extends QR{constructor(t){super(t);C(this,"id",ug.nextID++);C(this,"bones",null);C(this,"vertices",[]);C(this,"worldVerticesLength",0);C(this,"timelineAttachment",this)}computeWorldVertices(t,n,i,s,o,a){i=o+(i>>1)*a;let u=t.bone.skeleton,l=t.deform,c=this.vertices,h=this.bones;if(!h){l.length>0&&(c=l);let v=t.bone,x=v.worldX,y=v.worldY,b=v.a,_=v.b,S=v.c,I=v.d;for(let A=n,k=o;k<i;A+=2,k+=a){let M=c[A],O=c[A+1];s[k]=M*b+O*_+x,s[k+1]=M*S+O*I+y}return}let d=0,p=0;for(let v=0;v<n;v+=2){let x=h[d];d+=x+1,p+=x}let g=u.bones;if(l.length==0)for(let v=o,x=p*3;v<i;v+=a){let y=0,b=0,_=h[d++];for(_+=d;d<_;d++,x+=3){let S=g[h[d]],I=c[x],A=c[x+1],k=c[x+2];y+=(I*S.a+A*S.b+S.worldX)*k,b+=(I*S.c+A*S.d+S.worldY)*k}s[v]=y,s[v+1]=b}else{let v=l;for(let x=o,y=p*3,b=p<<1;x<i;x+=a){let _=0,S=0,I=h[d++];for(I+=d;d<I;d++,y+=3,b+=2){let A=g[h[d]],k=c[y]+v[b],M=c[y+1]+v[b+1],O=c[y+2];_+=(k*A.a+M*A.b+A.worldX)*O,S+=(k*A.c+M*A.d+A.worldY)*O}s[x]=_,s[x+1]=S}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),pe.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=pe.newFloatArray(this.vertices.length),pe.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}};C(ug,"nextID",0);let Gi=ug;const Eu=class Eu{constructor(e){C(this,"id",Eu.nextID());C(this,"regions");C(this,"start",0);C(this,"digits",0);C(this,"setupIndex",0);this.regions=new Array(e)}copy(){let e=new Eu(this.regions.length);return pe.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}apply(e,t){let n=e.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);let i=this.regions[n];t.region!=i&&(t.region=i,t.updateRegion())}getPath(e,t){let n=e,i=(this.start+t).toString();for(let s=this.digits-i.length;s>0;s--)n+="0";return n+=i,n}static nextID(){return Eu._nextID++}};C(Eu,"_nextID",0);let Jm=Eu;var kr;(function(r){r[r.hold=0]="hold",r[r.once=1]="once",r[r.loop=2]="loop",r[r.pingpong=3]="pingpong",r[r.onceReverse=4]="onceReverse",r[r.loopReverse=5]="loopReverse",r[r.pingpongReverse=6]="pingpongReverse"})(kr||(kr={}));const ZR=[kr.hold,kr.once,kr.loop,kr.pingpong,kr.onceReverse,kr.loopReverse,kr.pingpongReverse];let Yw=class{constructor(e,t,n){C(this,"name");C(this,"timelines",[]);C(this,"timelineIds",new KR);C(this,"duration");if(!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(t),this.duration=n}setTimelines(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var t=0;t<e.length;t++)this.timelineIds.addAll(e[t].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(e,t,n,i,s,o,a,u){if(!e)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,t>0&&(t%=this.duration));let l=this.timelines;for(let c=0,h=l.length;c<h;c++)l[c].apply(e,t,n,s,o,a,u)}};var ne;(function(r){r[r.setup=0]="setup",r[r.first=1]="first",r[r.replace=2]="replace",r[r.add=3]="add"})(ne||(ne={}));var dn;(function(r){r[r.mixIn=0]="mixIn",r[r.mixOut=1]="mixOut"})(dn||(dn={}));const Ye={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class Pt{constructor(e,t){C(this,"propertyIds");C(this,"frames");this.propertyIds=t,this.frames=pe.newFloatArray(e*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,t){let n=e.length;for(let i=1;i<n;i++)if(e[i]>t)return i-1;return n-1}static search(e,t,n){let i=e.length;for(let s=n;s<i;s+=n)if(e[s]>t)return s-n;return i-n}}class Us extends Pt{constructor(t,n,i){super(t,i);C(this,"curves");this.curves=pe.newFloatArray(t+n*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let n=this.getFrameCount()+t*18;if(this.curves.length>n){let i=pe.newFloatArray(n);pe.arrayCopy(this.curves,0,i,0,n),this.curves=i}}setBezier(t,n,i,s,o,a,u,l,c,h,d){let p=this.curves,g=this.getFrameCount()+t*18;i==0&&(p[n]=2+g);let v=(s-a*2+l)*.03,x=(o-u*2+c)*.03,y=((a-l)*3-s+h)*.006,b=((u-c)*3-o+d)*.006,_=v*2+y,S=x*2+b,I=(a-s)*.3+v+y*.16666667,A=(u-o)*.3+x+b*.16666667,k=s+I,M=o+A;for(let O=g+18;g<O;g+=2)p[g]=k,p[g+1]=M,I+=_,A+=S,_+=y,S+=b,k+=I,M+=A}getBezierValue(t,n,i,s){let o=this.curves;if(o[s]>t){let c=this.frames[n],h=this.frames[n+i];return h+(t-c)/(o[s]-c)*(o[s+1]-h)}let a=s+18;for(s+=2;s<a;s+=2)if(o[s]>=t){let c=o[s-2],h=o[s-1];return h+(t-c)/(o[s]-c)*(o[s+1]-h)}n+=this.getFrameEntries();let u=o[a-2],l=o[a-1];return l+(t-u)/(this.frames[n]-u)*(this.frames[n+i]-l)}}class Ki extends Us{constructor(e,t,n){super(e,t,[n])}getFrameEntries(){return 2}setFrame(e,t,n){e<<=1,this.frames[e]=t,this.frames[e+1]=n}getCurveValue(e){let t=this.frames,n=t.length-2;for(let s=2;s<=n;s+=2)if(t[s]>e){n=s-2;break}let i=this.curves[n>>1];switch(i){case 0:let s=t[n],o=t[n+1];return o+(e-s)/(t[n+2]-s)*(t[n+2+1]-o);case 1:return t[n+1]}return this.getBezierValue(e,n,1,i-2)}getRelativeValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case ne.setup:return s;case ne.first:return i+(s-i)*t}return i}let o=this.getCurveValue(e);switch(n){case ne.setup:return s+o*t;case ne.first:case ne.replace:o+=s-i}return i+o*t}getAbsoluteValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case ne.setup:return s;case ne.first:return i+(s-i)*t}return i}let o=this.getCurveValue(e);return n==ne.setup?s+(o-s)*t:i+(o-i)*t}getAbsoluteValue2(e,t,n,i,s,o){if(e<this.frames[0]){switch(n){case ne.setup:return s;case ne.first:return i+(s-i)*t}return i}return n==ne.setup?s+(o-s)*t:i+(o-i)*t}getScaleValue(e,t,n,i,s,o){const a=this.frames;if(e<a[0]){switch(n){case ne.setup:return o;case ne.first:return s+(o-s)*t}return s}let u=this.getCurveValue(e)*o;if(t==1)return n==ne.add?s+u-o:u;if(i==dn.mixOut)switch(n){case ne.setup:return o+(Math.abs(u)*ue.signum(o)-o)*t;case ne.first:case ne.replace:return s+(Math.abs(u)*ue.signum(s)-s)*t}else{let l=0;switch(n){case ne.setup:return l=Math.abs(o)*ue.signum(u),l+(u-l)*t;case ne.first:case ne.replace:return l=Math.abs(s)*ue.signum(u),l+(u-l)*t}}return s+(u-o)*t}}class Gw extends Us{constructor(e,t,n,i){super(e,t,[n,i])}getFrameEntries(){return 3}setFrame(e,t,n,i){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=i}}class eg extends Ki{constructor(t,n,i){super(t,n,Ye.rotate+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.rotation=this.getRelativeValue(i,o,a,l.rotation,l.data.rotation))}}class JR extends Gw{constructor(t,n,i){super(t,n,Ye.x+"|"+i,Ye.y+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let c=this.frames;if(i<c[0]){switch(a){case ne.setup:l.x=l.data.x,l.y=l.data.y;return;case ne.first:l.x+=(l.data.x-l.x)*o,l.y+=(l.data.y-l.y)*o}return}let h=0,d=0,p=Pt.search(c,i,3),g=this.curves[p/3];switch(g){case 0:let v=c[p];h=c[p+1],d=c[p+2];let x=(i-v)/(c[p+3]-v);h+=(c[p+3+1]-h)*x,d+=(c[p+3+2]-d)*x;break;case 1:h=c[p+1],d=c[p+2];break;default:h=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}switch(a){case ne.setup:l.x=l.data.x+h*o,l.y=l.data.y+d*o;break;case ne.first:case ne.replace:l.x+=(l.data.x+h-l.x)*o,l.y+=(l.data.y+d-l.y)*o;break;case ne.add:l.x+=h*o,l.y+=d*o}}}class e3 extends Ki{constructor(t,n,i){super(t,n,Ye.x+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.x=this.getRelativeValue(i,o,a,l.x,l.data.x))}}class t3 extends Ki{constructor(t,n,i){super(t,n,Ye.y+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.y=this.getRelativeValue(i,o,a,l.y,l.data.y))}}class r3 extends Gw{constructor(t,n,i){super(t,n,Ye.scaleX+"|"+i,Ye.scaleY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let c=this.frames;if(i<c[0]){switch(a){case ne.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case ne.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o,l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}let h,d,p=Pt.search(c,i,3),g=this.curves[p/3];switch(g){case 0:let v=c[p];h=c[p+1],d=c[p+2];let x=(i-v)/(c[p+3]-v);h+=(c[p+3+1]-h)*x,d+=(c[p+3+2]-d)*x;break;case 1:h=c[p+1],d=c[p+2];break;default:h=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}if(h*=l.data.scaleX,d*=l.data.scaleY,o==1)a==ne.add?(l.scaleX+=h-l.data.scaleX,l.scaleY+=d-l.data.scaleY):(l.scaleX=h,l.scaleY=d);else{let v=0,x=0;if(u==dn.mixOut)switch(a){case ne.setup:v=l.data.scaleX,x=l.data.scaleY,l.scaleX=v+(Math.abs(h)*ue.signum(v)-v)*o,l.scaleY=x+(Math.abs(d)*ue.signum(x)-x)*o;break;case ne.first:case ne.replace:v=l.scaleX,x=l.scaleY,l.scaleX=v+(Math.abs(h)*ue.signum(v)-v)*o,l.scaleY=x+(Math.abs(d)*ue.signum(x)-x)*o;break;case ne.add:l.scaleX+=(h-l.data.scaleX)*o,l.scaleY+=(d-l.data.scaleY)*o}else switch(a){case ne.setup:v=Math.abs(l.data.scaleX)*ue.signum(h),x=Math.abs(l.data.scaleY)*ue.signum(d),l.scaleX=v+(h-v)*o,l.scaleY=x+(d-x)*o;break;case ne.first:case ne.replace:v=Math.abs(l.scaleX)*ue.signum(h),x=Math.abs(l.scaleY)*ue.signum(d),l.scaleX=v+(h-v)*o,l.scaleY=x+(d-x)*o;break;case ne.add:l.scaleX+=(h-l.data.scaleX)*o,l.scaleY+=(d-l.data.scaleY)*o}}}}class n3 extends Ki{constructor(t,n,i){super(t,n,Ye.scaleX+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.scaleX=this.getScaleValue(i,o,a,u,l.scaleX,l.data.scaleX))}}class i3 extends Ki{constructor(t,n,i){super(t,n,Ye.scaleY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.scaleY=this.getScaleValue(i,o,a,u,l.scaleY,l.data.scaleY))}}class s3 extends Gw{constructor(t,n,i){super(t,n,Ye.shearX+"|"+i,Ye.shearY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let c=this.frames;if(i<c[0]){switch(a){case ne.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case ne.first:l.shearX+=(l.data.shearX-l.shearX)*o,l.shearY+=(l.data.shearY-l.shearY)*o}return}let h=0,d=0,p=Pt.search(c,i,3),g=this.curves[p/3];switch(g){case 0:let v=c[p];h=c[p+1],d=c[p+2];let x=(i-v)/(c[p+3]-v);h+=(c[p+3+1]-h)*x,d+=(c[p+3+2]-d)*x;break;case 1:h=c[p+1],d=c[p+2];break;default:h=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}switch(a){case ne.setup:l.shearX=l.data.shearX+h*o,l.shearY=l.data.shearY+d*o;break;case ne.first:case ne.replace:l.shearX+=(l.data.shearX+h-l.shearX)*o,l.shearY+=(l.data.shearY+d-l.shearY)*o;break;case ne.add:l.shearX+=h*o,l.shearY+=d*o}}}class o3 extends Ki{constructor(t,n,i){super(t,n,Ye.shearX+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.shearX=this.getRelativeValue(i,o,a,l.shearX,l.data.shearX))}}class a3 extends Ki{constructor(t,n,i){super(t,n,Ye.shearY+"|"+i);C(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.shearY=this.getRelativeValue(i,o,a,l.shearY,l.data.shearY))}}class l3 extends Pt{constructor(t,n){super(t,[Ye.inherit+"|"+n]);C(this,"boneIndex",0);this.boneIndex=n}getFrameEntries(){return 2}setFrame(t,n,i){t*=2,this.frames[t]=n,this.frames[t+1]=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let c=this.frames;if(i<c[0]){(a==ne.setup||a==ne.first)&&(l.inherit=l.data.inherit);return}l.inherit=this.frames[Pt.search(c,i,2)+1]}}class u3 extends Us{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i,Ye.alpha+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,n,i,s,o,a){t*=5,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let c=this.frames,h=l.color;if(i<c[0]){let b=l.data.color;switch(a){case ne.setup:h.setFromColor(b);return;case ne.first:h.add((b.r-h.r)*o,(b.g-h.g)*o,(b.b-h.b)*o,(b.a-h.a)*o)}return}let d=0,p=0,g=0,v=0,x=Pt.search(c,i,5),y=this.curves[x/5];switch(y){case 0:let b=c[x];d=c[x+1],p=c[x+2],g=c[x+3],v=c[x+4];let _=(i-b)/(c[x+5]-b);d+=(c[x+5+1]-d)*_,p+=(c[x+5+2]-p)*_,g+=(c[x+5+3]-g)*_,v+=(c[x+5+4]-v)*_;break;case 1:d=c[x+1],p=c[x+2],g=c[x+3],v=c[x+4];break;default:d=this.getBezierValue(i,x,1,y-2),p=this.getBezierValue(i,x,2,y+18-2),g=this.getBezierValue(i,x,3,y+18*2-2),v=this.getBezierValue(i,x,4,y+18*3-2)}o==1?h.set(d,p,g,v):(a==ne.setup&&h.setFromColor(l.data.color),h.add((d-h.r)*o,(p-h.g)*o,(g-h.b)*o,(v-h.a)*o))}}class h3 extends Us{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,n,i,s,o){t<<=2,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let c=this.frames,h=l.color;if(i<c[0]){let y=l.data.color;switch(a){case ne.setup:h.r=y.r,h.g=y.g,h.b=y.b;return;case ne.first:h.r+=(y.r-h.r)*o,h.g+=(y.g-h.g)*o,h.b+=(y.b-h.b)*o}return}let d=0,p=0,g=0,v=Pt.search(c,i,4),x=this.curves[v>>2];switch(x){case 0:let y=c[v];d=c[v+1],p=c[v+2],g=c[v+3];let b=(i-y)/(c[v+4]-y);d+=(c[v+4+1]-d)*b,p+=(c[v+4+2]-p)*b,g+=(c[v+4+3]-g)*b;break;case 1:d=c[v+1],p=c[v+2],g=c[v+3];break;default:d=this.getBezierValue(i,v,1,x-2),p=this.getBezierValue(i,v,2,x+18-2),g=this.getBezierValue(i,v,3,x+18*2-2)}if(o==1)h.r=d,h.g=p,h.b=g;else{if(a==ne.setup){let y=l.data.color;h.r=y.r,h.g=y.g,h.b=y.b}h.r+=(d-h.r)*o,h.g+=(p-h.g)*o,h.b+=(g-h.b)*o}}}class c3 extends Ki{constructor(t,n,i){super(t,n,Ye.alpha+"|"+i);C(this,"slotIndex",0);this.slotIndex=i}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let c=l.color;if(i<this.frames[0]){let d=l.data.color;switch(a){case ne.setup:c.a=d.a;return;case ne.first:c.a+=(d.a-c.a)*o}return}let h=this.getCurveValue(i);o==1?c.a=h:(a==ne.setup&&(c.a=l.data.color.a),c.a+=(h-c.a)*o)}}class d3 extends Us{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i,Ye.alpha+"|"+i,Ye.rgb2+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,n,i,s,o,a,u,l,c){t<<=3,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a,this.frames[t+5]=u,this.frames[t+6]=l,this.frames[t+7]=c}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let c=this.frames,h=l.color,d=l.darkColor;if(i<c[0]){let A=l.data.color,k=l.data.darkColor;switch(a){case ne.setup:h.setFromColor(A),d.r=k.r,d.g=k.g,d.b=k.b;return;case ne.first:h.add((A.r-h.r)*o,(A.g-h.g)*o,(A.b-h.b)*o,(A.a-h.a)*o),d.r+=(k.r-d.r)*o,d.g+=(k.g-d.g)*o,d.b+=(k.b-d.b)*o}return}let p=0,g=0,v=0,x=0,y=0,b=0,_=0,S=Pt.search(c,i,8),I=this.curves[S>>3];switch(I){case 0:let A=c[S];p=c[S+1],g=c[S+2],v=c[S+3],x=c[S+4],y=c[S+5],b=c[S+6],_=c[S+7];let k=(i-A)/(c[S+8]-A);p+=(c[S+8+1]-p)*k,g+=(c[S+8+2]-g)*k,v+=(c[S+8+3]-v)*k,x+=(c[S+8+4]-x)*k,y+=(c[S+8+5]-y)*k,b+=(c[S+8+6]-b)*k,_+=(c[S+8+7]-_)*k;break;case 1:p=c[S+1],g=c[S+2],v=c[S+3],x=c[S+4],y=c[S+5],b=c[S+6],_=c[S+7];break;default:p=this.getBezierValue(i,S,1,I-2),g=this.getBezierValue(i,S,2,I+18-2),v=this.getBezierValue(i,S,3,I+18*2-2),x=this.getBezierValue(i,S,4,I+18*3-2),y=this.getBezierValue(i,S,5,I+18*4-2),b=this.getBezierValue(i,S,6,I+18*5-2),_=this.getBezierValue(i,S,7,I+18*6-2)}if(o==1)h.set(p,g,v,x),d.r=y,d.g=b,d.b=_;else{if(a==ne.setup){h.setFromColor(l.data.color);let A=l.data.darkColor;d.r=A.r,d.g=A.g,d.b=A.b}h.add((p-h.r)*o,(g-h.g)*o,(v-h.b)*o,(x-h.a)*o),d.r+=(y-d.r)*o,d.g+=(b-d.g)*o,d.b+=(_-d.b)*o}}}class f3 extends Us{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i,Ye.rgb2+"|"+i]);C(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,n,i,s,o,a,u,l){t*=7,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a,this.frames[t+5]=u,this.frames[t+6]=l}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let c=this.frames,h=l.color,d=l.darkColor;if(i<c[0]){let I=l.data.color,A=l.data.darkColor;switch(a){case ne.setup:h.r=I.r,h.g=I.g,h.b=I.b,d.r=A.r,d.g=A.g,d.b=A.b;return;case ne.first:h.r+=(I.r-h.r)*o,h.g+=(I.g-h.g)*o,h.b+=(I.b-h.b)*o,d.r+=(A.r-d.r)*o,d.g+=(A.g-d.g)*o,d.b+=(A.b-d.b)*o}return}let p=0,g=0,v=0,x=0,y=0,b=0,_=Pt.search(c,i,7),S=this.curves[_/7];switch(S){case 0:let I=c[_];p=c[_+1],g=c[_+2],v=c[_+3],x=c[_+4],y=c[_+5],b=c[_+6];let A=(i-I)/(c[_+7]-I);p+=(c[_+7+1]-p)*A,g+=(c[_+7+2]-g)*A,v+=(c[_+7+3]-v)*A,x+=(c[_+7+4]-x)*A,y+=(c[_+7+5]-y)*A,b+=(c[_+7+6]-b)*A;break;case 1:p=c[_+1],g=c[_+2],v=c[_+3],x=c[_+4],y=c[_+5],b=c[_+6];break;default:p=this.getBezierValue(i,_,1,S-2),g=this.getBezierValue(i,_,2,S+18-2),v=this.getBezierValue(i,_,3,S+18*2-2),x=this.getBezierValue(i,_,4,S+18*3-2),y=this.getBezierValue(i,_,5,S+18*4-2),b=this.getBezierValue(i,_,6,S+18*5-2)}if(o==1)h.r=p,h.g=g,h.b=v,d.r=x,d.g=y,d.b=b;else{if(a==ne.setup){let I=l.data.color,A=l.data.darkColor;h.r=I.r,h.g=I.g,h.b=I.b,d.r=A.r,d.g=A.g,d.b=A.b}h.r+=(p-h.r)*o,h.g+=(g-h.g)*o,h.b+=(v-h.b)*o,d.r+=(x-d.r)*o,d.g+=(y-d.g)*o,d.b+=(b-d.b)*o}}}class bu extends Pt{constructor(t,n){super(t,[Ye.attachment+"|"+n]);C(this,"slotIndex",0);C(this,"attachmentNames");this.slotIndex=n,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.attachmentNames[t]=i}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(l.bone.active){if(u==dn.mixOut){a==ne.setup&&this.setAttachment(t,l,l.data.attachmentName);return}if(i<this.frames[0]){(a==ne.setup||a==ne.first)&&this.setAttachment(t,l,l.data.attachmentName);return}this.setAttachment(t,l,this.attachmentNames[Pt.search1(this.frames,i)])}}setAttachment(t,n,i){n.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}class p3 extends Us{constructor(t,n,i,s){super(t,n,[Ye.deform+"|"+i+"|"+s.id]);C(this,"slotIndex",0);C(this,"attachment");C(this,"vertices");this.slotIndex=i,this.attachment=s,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.vertices[t]=i}setBezier(t,n,i,s,o,a,u,l,c,h,d){let p=this.curves,g=this.getFrameCount()+t*18;i==0&&(p[n]=2+g);let v=(s-a*2+l)*.03,x=c*.03-u*.06,y=((a-l)*3-s+h)*.006,b=(u-c+.33333333)*.018,_=v*2+y,S=x*2+b,I=(a-s)*.3+v+y*.16666667,A=u*.3+x+b*.16666667,k=s+I,M=A;for(let O=g+18;g<O;g+=2)p[g]=k,p[g+1]=M,I+=_,A+=S,_+=y,S+=b,k+=I,M+=A}getCurvePercent(t,n){let i=this.curves,s=i[n];switch(s){case 0:let l=this.frames[n];return(t-l)/(this.frames[n+this.getFrameEntries()]-l);case 1:return 0}if(s-=2,i[s]>t){let l=this.frames[n];return i[s+1]*(t-l)/(i[s]-l)}let o=s+18;for(s+=2;s<o;s+=2)if(i[s]>=t){let l=i[s-2],c=i[s-1];return c+(t-l)/(i[s]-l)*(i[s+1]-c)}let a=i[o-2],u=i[o-1];return u+(1-u)*(t-a)/(this.frames[n+this.getFrameEntries()]-a)}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let c=l.getAttachment();if(!c||!(c instanceof Gi)||c.timelineAttachment!=this.attachment)return;let h=l.deform;h.length==0&&(a=ne.setup);let d=this.vertices,p=d[0].length,g=this.frames;if(i<g[0]){switch(a){case ne.setup:h.length=0;return;case ne.first:if(o==1){h.length=0;return}h.length=p;let S=c;if(S.bones){o=1-o;for(var v=0;v<p;v++)h[v]*=o}else{let I=S.vertices;for(var v=0;v<p;v++)h[v]+=(I[v]-h[v])*o}}return}if(h.length=p,i>=g[g.length-1]){let S=d[g.length-1];if(o==1)if(a==ne.add){let I=c;if(I.bones)for(let A=0;A<p;A++)h[A]+=S[A];else{let A=I.vertices;for(let k=0;k<p;k++)h[k]+=S[k]-A[k]}}else pe.arrayCopy(S,0,h,0,p);else switch(a){case ne.setup:{let A=c;if(A.bones)for(let k=0;k<p;k++)h[k]=S[k]*o;else{let k=A.vertices;for(let M=0;M<p;M++){let O=k[M];h[M]=O+(S[M]-O)*o}}break}case ne.first:case ne.replace:for(let A=0;A<p;A++)h[A]+=(S[A]-h[A])*o;break;case ne.add:let I=c;if(I.bones)for(let A=0;A<p;A++)h[A]+=S[A]*o;else{let A=I.vertices;for(let k=0;k<p;k++)h[k]+=(S[k]-A[k])*o}}return}let x=Pt.search1(g,i),y=this.getCurvePercent(i,x),b=d[x],_=d[x+1];if(o==1)if(a==ne.add){let S=c;if(S.bones)for(let I=0;I<p;I++){let A=b[I];h[I]+=A+(_[I]-A)*y}else{let I=S.vertices;for(let A=0;A<p;A++){let k=b[A];h[A]+=k+(_[A]-k)*y-I[A]}}}else for(let S=0;S<p;S++){let I=b[S];h[S]=I+(_[S]-I)*y}else switch(a){case ne.setup:{let I=c;if(I.bones)for(let A=0;A<p;A++){let k=b[A];h[A]=(k+(_[A]-k)*y)*o}else{let A=I.vertices;for(let k=0;k<p;k++){let M=b[k],O=A[k];h[k]=O+(M+(_[k]-M)*y-O)*o}}break}case ne.first:case ne.replace:for(let I=0;I<p;I++){let A=b[I];h[I]+=(A+(_[I]-A)*y-h[I])*o}break;case ne.add:let S=c;if(S.bones)for(let I=0;I<p;I++){let A=b[I];h[I]+=(A+(_[I]-A)*y)*o}else{let I=S.vertices;for(let A=0;A<p;A++){let k=b[A];h[A]+=(k+(_[A]-k)*y-I[A])*o}}}}}const hg=class hg extends Pt{constructor(t){super(t,hg.propertyIds);C(this,"events");this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n){this.frames[t]=n.time,this.events[t]=n}apply(t,n,i,s,o,a,u){if(!s)return;let l=this.frames,c=this.frames.length;if(n>i)this.apply(t,n,Number.MAX_VALUE,s,o,a,u),n=-1;else if(n>=l[c-1])return;if(i<l[0])return;let h=0;if(n<l[0])h=0;else{h=Pt.search1(l,n)+1;let d=l[h];for(;h>0&&l[h-1]==d;)h--}for(;h<c&&i>=l[h];h++)s.push(this.events[h])}};C(hg,"propertyIds",[""+Ye.event]);let ud=hg;const cg=class cg extends Pt{constructor(t){super(t,cg.propertyIds);C(this,"drawOrders");this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.drawOrders[t]=i}apply(t,n,i,s,o,a,u){if(u==dn.mixOut){a==ne.setup&&pe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(i<this.frames[0]){(a==ne.setup||a==ne.first)&&pe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let l=Pt.search1(this.frames,i),c=this.drawOrders[l];if(!c)pe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{let h=t.drawOrder,d=t.slots;for(let p=0,g=c.length;p<g;p++)h[p]=d[c[p]]}}};C(cg,"propertyIds",[""+Ye.drawOrder]);let sl=cg;class m3 extends Us{constructor(t,n,i){super(t,n,[Ye.ikConstraint+"|"+i]);C(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 6}setFrame(t,n,i,s,o,a,u){t*=6,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a?1:0,this.frames[t+5]=u?1:0}apply(t,n,i,s,o,a,u){let l=t.ikConstraints[this.constraintIndex];if(!l.active)return;let c=this.frames;if(i<c[0]){switch(a){case ne.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case ne.first:l.mix+=(l.data.mix-l.mix)*o,l.softness+=(l.data.softness-l.softness)*o,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}let h=0,d=0,p=Pt.search(c,i,6),g=this.curves[p/6];switch(g){case 0:let v=c[p];h=c[p+1],d=c[p+2];let x=(i-v)/(c[p+6]-v);h+=(c[p+6+1]-h)*x,d+=(c[p+6+2]-d)*x;break;case 1:h=c[p+1],d=c[p+2];break;default:h=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}a==ne.setup?(l.mix=l.data.mix+(h-l.data.mix)*o,l.softness=l.data.softness+(d-l.data.softness)*o,u==dn.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=c[p+3],l.compress=c[p+4]!=0,l.stretch=c[p+5]!=0)):(l.mix+=(h-l.mix)*o,l.softness+=(d-l.softness)*o,u==dn.mixIn&&(l.bendDirection=c[p+3],l.compress=c[p+4]!=0,l.stretch=c[p+5]!=0))}}class g3 extends Us{constructor(t,n,i){super(t,n,[Ye.transformConstraint+"|"+i]);C(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 7}setFrame(t,n,i,s,o,a,u,l){let c=this.frames;t*=7,c[t]=n,c[t+1]=i,c[t+2]=s,c[t+3]=o,c[t+4]=a,c[t+5]=u,c[t+6]=l}apply(t,n,i,s,o,a,u){let l=t.transformConstraints[this.constraintIndex];if(!l.active)return;let c=this.frames;if(i<c[0]){let _=l.data;switch(a){case ne.setup:l.mixRotate=_.mixRotate,l.mixX=_.mixX,l.mixY=_.mixY,l.mixScaleX=_.mixScaleX,l.mixScaleY=_.mixScaleY,l.mixShearY=_.mixShearY;return;case ne.first:l.mixRotate+=(_.mixRotate-l.mixRotate)*o,l.mixX+=(_.mixX-l.mixX)*o,l.mixY+=(_.mixY-l.mixY)*o,l.mixScaleX+=(_.mixScaleX-l.mixScaleX)*o,l.mixScaleY+=(_.mixScaleY-l.mixScaleY)*o,l.mixShearY+=(_.mixShearY-l.mixShearY)*o}return}let h,d,p,g,v,x,y=Pt.search(c,i,7),b=this.curves[y/7];switch(b){case 0:let _=c[y];h=c[y+1],d=c[y+2],p=c[y+3],g=c[y+4],v=c[y+5],x=c[y+6];let S=(i-_)/(c[y+7]-_);h+=(c[y+7+1]-h)*S,d+=(c[y+7+2]-d)*S,p+=(c[y+7+3]-p)*S,g+=(c[y+7+4]-g)*S,v+=(c[y+7+5]-v)*S,x+=(c[y+7+6]-x)*S;break;case 1:h=c[y+1],d=c[y+2],p=c[y+3],g=c[y+4],v=c[y+5],x=c[y+6];break;default:h=this.getBezierValue(i,y,1,b-2),d=this.getBezierValue(i,y,2,b+18-2),p=this.getBezierValue(i,y,3,b+18*2-2),g=this.getBezierValue(i,y,4,b+18*3-2),v=this.getBezierValue(i,y,5,b+18*4-2),x=this.getBezierValue(i,y,6,b+18*5-2)}if(a==ne.setup){let _=l.data;l.mixRotate=_.mixRotate+(h-_.mixRotate)*o,l.mixX=_.mixX+(d-_.mixX)*o,l.mixY=_.mixY+(p-_.mixY)*o,l.mixScaleX=_.mixScaleX+(g-_.mixScaleX)*o,l.mixScaleY=_.mixScaleY+(v-_.mixScaleY)*o,l.mixShearY=_.mixShearY+(x-_.mixShearY)*o}else l.mixRotate+=(h-l.mixRotate)*o,l.mixX+=(d-l.mixX)*o,l.mixY+=(p-l.mixY)*o,l.mixScaleX+=(g-l.mixScaleX)*o,l.mixScaleY+=(v-l.mixScaleY)*o,l.mixShearY+=(x-l.mixShearY)*o}}class v3 extends Ki{constructor(t,n,i){super(t,n,Ye.pathConstraintPosition+"|"+i);C(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,u){let l=t.pathConstraints[this.constraintIndex];l.active&&(l.position=this.getAbsoluteValue(i,o,a,l.position,l.data.position))}}class y3 extends Ki{constructor(t,n,i){super(t,n,Ye.pathConstraintSpacing+"|"+i);C(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,u){let l=t.pathConstraints[this.constraintIndex];l.active&&(l.spacing=this.getAbsoluteValue(i,o,a,l.spacing,l.data.spacing))}}class x3 extends Us{constructor(t,n,i){super(t,n,[Ye.pathConstraintMix+"|"+i]);C(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 4}setFrame(t,n,i,s,o){let a=this.frames;t<<=2,a[t]=n,a[t+1]=i,a[t+2]=s,a[t+3]=o}apply(t,n,i,s,o,a,u){let l=t.pathConstraints[this.constraintIndex];if(!l.active)return;let c=this.frames;if(i<c[0]){switch(a){case ne.setup:l.mixRotate=l.data.mixRotate,l.mixX=l.data.mixX,l.mixY=l.data.mixY;return;case ne.first:l.mixRotate+=(l.data.mixRotate-l.mixRotate)*o,l.mixX+=(l.data.mixX-l.mixX)*o,l.mixY+=(l.data.mixY-l.mixY)*o}return}let h,d,p,g=Pt.search(c,i,4),v=this.curves[g>>2];switch(v){case 0:let x=c[g];h=c[g+1],d=c[g+2],p=c[g+3];let y=(i-x)/(c[g+4]-x);h+=(c[g+4+1]-h)*y,d+=(c[g+4+2]-d)*y,p+=(c[g+4+3]-p)*y;break;case 1:h=c[g+1],d=c[g+2],p=c[g+3];break;default:h=this.getBezierValue(i,g,1,v-2),d=this.getBezierValue(i,g,2,v+18-2),p=this.getBezierValue(i,g,3,v+18*2-2)}if(a==ne.setup){let x=l.data;l.mixRotate=x.mixRotate+(h-x.mixRotate)*o,l.mixX=x.mixX+(d-x.mixX)*o,l.mixY=x.mixY+(p-x.mixY)*o}else l.mixRotate+=(h-l.mixRotate)*o,l.mixX+=(d-l.mixX)*o,l.mixY+=(p-l.mixY)*o}}class El extends Ki{constructor(t,n,i,s){super(t,n,s+"|"+i);C(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,u){let l;if(this.constraintIndex==-1){const c=i>=this.frames[0]?this.getCurveValue(i):0;for(const h of t.physicsConstraints)h.active&&this.global(h.data)&&this.set(h,this.getAbsoluteValue2(i,o,a,this.get(h),this.setup(h),c))}else l=t.physicsConstraints[this.constraintIndex],l.active&&this.set(l,this.getAbsoluteValue(i,o,a,this.get(l),this.setup(l)))}}class _3 extends El{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintInertia)}setup(e){return e.data.inertia}get(e){return e.inertia}set(e,t){e.inertia=t}global(e){return e.inertiaGlobal}}class w3 extends El{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintStrength)}setup(e){return e.data.strength}get(e){return e.strength}set(e,t){e.strength=t}global(e){return e.strengthGlobal}}class b3 extends El{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintDamping)}setup(e){return e.data.damping}get(e){return e.damping}set(e,t){e.damping=t}global(e){return e.dampingGlobal}}class S3 extends El{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintMass)}setup(e){return 1/e.data.massInverse}get(e){return 1/e.massInverse}set(e,t){e.massInverse=1/t}global(e){return e.massGlobal}}class T3 extends El{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintWind)}setup(e){return e.data.wind}get(e){return e.wind}set(e,t){e.wind=t}global(e){return e.windGlobal}}class E3 extends El{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintGravity)}setup(e){return e.data.gravity}get(e){return e.gravity}set(e,t){e.gravity=t}global(e){return e.gravityGlobal}}class C3 extends El{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintMix)}setup(e){return e.data.mix}get(e){return e.mix}set(e,t){e.mix=t}global(e){return e.mixGlobal}}const dg=class dg extends Pt{constructor(t,n){super(t,dg.propertyIds);C(this,"constraintIndex");this.constraintIndex=n}getFrameCount(){return this.frames.length}setFrame(t,n){this.frames[t]=n}apply(t,n,i,s,o,a,u){let l;if(this.constraintIndex!=-1&&(l=t.physicsConstraints[this.constraintIndex],!l.active))return;const c=this.frames;if(n>i)this.apply(t,n,Number.MAX_VALUE,[],o,a,u),n=-1;else if(n>=c[c.length-1])return;if(!(i<c[0])&&(n<c[0]||i>=c[Pt.search1(c,n)+1]))if(l!=null)l.reset();else for(const h of t.physicsConstraints)h.active&&h.reset()}};C(dg,"propertyIds",[Ye.physicsConstraintReset.toString()]);let tg=dg;const ti=class ti extends Pt{constructor(t,n,i){super(t,[Ye.sequence+"|"+n+"|"+i.sequence.id]);C(this,"slotIndex");C(this,"attachment");this.slotIndex=n,this.attachment=i}getFrameEntries(){return ti.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,n,i,s,o){let a=this.frames;t*=ti.ENTRIES,a[t]=n,a[t+ti.MODE]=i|s<<4,a[t+ti.DELAY]=o}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let c=l.attachment,h=this.attachment;if(c!=h&&(!(c instanceof Gi)||c.timelineAttachment!=h))return;let d=this.frames;if(i<d[0]){(a==ne.setup||a==ne.first)&&(l.sequenceIndex=-1);return}let p=Pt.search(d,i,ti.ENTRIES),g=d[p],v=d[p+ti.MODE],x=d[p+ti.DELAY];if(!this.attachment.sequence)return;let y=v>>4,b=this.attachment.sequence.regions.length,_=ZR[v&15];if(_!=kr.hold)switch(y+=(i-g)/x+1e-5|0,_){case kr.once:y=Math.min(b-1,y);break;case kr.loop:y%=b;break;case kr.pingpong:{let S=(b<<1)-2;y=S==0?0:y%S,y>=b&&(y=S-y);break}case kr.onceReverse:y=Math.max(b-1-y,0);break;case kr.loopReverse:y=b-1-y%b;break;case kr.pingpongReverse:{let S=(b<<1)-2;y=S==0?0:(y+b-1)%S,y>=b&&(y=S-y)}}l.sequenceIndex=y}};C(ti,"ENTRIES",3),C(ti,"MODE",1),C(ti,"DELAY",2);let rg=ti;const Cu=class Cu{constructor(e){C(this,"data");C(this,"tracks",new Array);C(this,"timeScale",1);C(this,"unkeyedState",0);C(this,"events",new Array);C(this,"listeners",new Array);C(this,"queue",new o9(this));C(this,"propertyIDs",new KR);C(this,"animationsChanged",!1);C(this,"trackEntryPool",new l_(()=>new s9));this.data=e}static emptyAnimation(){return Cu._emptyAnimation}update(e){e*=this.timeScale;let t=this.tracks;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let o=e*s.timeScale;if(s.delay>0){if(s.delay-=o,s.delay>0)continue;o=-s.delay,s.delay=0}let a=s.next;if(a){let u=s.trackLast-a.delay;if(u>=0){for(a.delay=0,a.trackTime+=s.timeScale==0?0:(u/s.timeScale+e)*a.timeScale,s.trackTime+=o,this.setCurrent(n,a,!0);a.mixingFrom;)a.mixTime+=e,a=a.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){t[n]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,e)){let u=s.mixingFrom;for(s.mixingFrom=null,u&&(u.mixingTo=null);u;)this.queue.end(u),u=u.mixingFrom}s.trackTime+=o}this.queue.drain()}updateMixingFrom(e,t){let n=e.mixingFrom;if(!n)return!0;let i=this.updateMixingFrom(n,t);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=t*n.timeScale,e.mixTime+=t,!1)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let t=this.events,n=this.tracks,i=!1;for(let d=0,p=n.length;d<p;d++){let g=n[d];if(!g||g.delay>0)continue;i=!0;let v=d==0?ne.first:g.mixBlend,x=g.alpha;g.mixingFrom?x*=this.applyMixingFrom(g,e,v):g.trackTime>=g.trackEnd&&!g.next&&(x=0);let y=x>=g.alphaAttachmentThreshold,b=g.animationLast,_=g.getAnimationTime(),S=_,I=t;g.reverse&&(S=g.animation.duration-S,I=null);let A=g.animation.timelines,k=A.length;if(d==0&&x==1||v==ne.add){d==0&&(y=!0);for(let M=0;M<k;M++){var s=A[M];s instanceof bu?this.applyAttachmentTimeline(s,e,S,v,y):s.apply(e,b,S,I,x,v,dn.mixIn)}}else{let M=g.timelineMode,O=g.shortestRotation,F=!O&&g.timelinesRotation.length!=k<<1;F&&(g.timelinesRotation.length=k<<1);for(let U=0;U<k;U++){let X=A[U],B=M[U]==Dy?v:ne.setup;!O&&X instanceof eg?this.applyRotateTimeline(X,e,S,x,B,g.timelinesRotation,U<<1,F):X instanceof bu?this.applyAttachmentTimeline(X,e,S,v,y):X.apply(e,b,S,I,x,B,dn.mixIn)}}this.queueEvents(g,_),t.length=0,g.nextAnimationLast=_,g.nextTrackLast=g.trackTime}for(var o=this.unkeyedState+BP,a=e.slots,u=0,l=e.slots.length;u<l;u++){var c=a[u];if(c.attachmentState==o){var h=c.data.attachmentName;c.setAttachment(h?e.getAttachment(c.data.index,h):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(e,t,n){let i=e.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,t,n);let s=0;e.mixDuration==0?(s=1,n==ne.first&&(n=ne.setup)):(s=e.mixTime/e.mixDuration,s>1&&(s=1),n!=ne.first&&(n=i.mixBlend));let o=s<i.mixAttachmentThreshold,a=s<i.mixDrawOrderThreshold,u=i.animation.timelines,l=u.length,c=i.alpha*e.interruptAlpha,h=c*(1-s),d=i.animationLast,p=i.getAnimationTime(),g=p,v=null;if(i.reverse?g=i.animation.duration-g:s<i.eventThreshold&&(v=this.events),n==ne.add)for(let x=0;x<l;x++)u[x].apply(t,d,g,v,h,n,dn.mixOut);else{let x=i.timelineMode,y=i.timelineHoldMix,b=i.shortestRotation,_=!b&&i.timelinesRotation.length!=l<<1;_&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(let S=0;S<l;S++){let I=u[S],A=dn.mixOut,k,M=0;switch(x[S]){case Dy:if(!a&&I instanceof sl)continue;k=n,M=h;break;case RP:k=ne.setup,M=h;break;case OP:k=n,M=c;break;case Uy:k=ne.setup,M=c;break;default:k=ne.setup;let O=y[S];M=c*Math.max(0,1-O.mixTime/O.mixDuration);break}i.totalAlpha+=M,!b&&I instanceof eg?this.applyRotateTimeline(I,t,g,M,k,i.timelinesRotation,S<<1,_):I instanceof bu?this.applyAttachmentTimeline(I,t,g,k,o&&M>=i.alphaAttachmentThreshold):(a&&I instanceof sl&&k==ne.setup&&(A=dn.mixIn),I.apply(t,d,g,v,M,k,A))}}return e.mixDuration>0&&this.queueEvents(i,p),this.events.length=0,i.nextAnimationLast=p,i.nextTrackLast=i.trackTime,s}applyAttachmentTimeline(e,t,n,i,s){var o=t.slots[e.slotIndex];o.bone.active&&(n<e.frames[0]?(i==ne.setup||i==ne.first)&&this.setAttachment(t,o,o.data.attachmentName,s):this.setAttachment(t,o,e.attachmentNames[Pt.search1(e.frames,n)],s),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+BP))}setAttachment(e,t,n,i){t.setAttachment(n?e.getAttachment(t.data.index,n):null),i&&(t.attachmentState=this.unkeyedState+l9)}applyRotateTimeline(e,t,n,i,s,o,a,u){if(u&&(o[a]=0),i==1){e.apply(t,0,n,null,1,s,dn.mixIn);return}let l=t.bones[e.boneIndex];if(!l.active)return;let c=e.frames,h=0,d=0;if(n<c[0])switch(s){case ne.setup:l.rotation=l.data.rotation;default:return;case ne.first:h=l.rotation,d=l.data.rotation}else h=s==ne.setup?l.data.rotation:l.rotation,d=l.data.rotation+e.getCurveValue(n);let p=0,g=d-h;if(g-=Math.ceil(g/360-.5)*360,g==0)p=o[a];else{let v=0,x=0;u?(v=0,x=g):(v=o[a],x=o[a+1]);let y=v-v%360;p=g+y;let b=g>=0,_=v>=0;Math.abs(x)<=90&&ue.signum(x)!=ue.signum(g)&&(Math.abs(v-y)>180?(p+=360*ue.signum(v),_=b):y!=0?p-=360*ue.signum(v):_=b),_!=b&&(p+=360*ue.signum(v)),o[a]=p}o[a+1]=g,l.rotation=h+p*i}queueEvents(e,t){let n=e.animationStart,i=e.animationEnd,s=i-n,o=e.trackLast%s,a=this.events,u=0,l=a.length;for(;u<l;u++){let h=a[u];if(h.time<o)break;h.time>i||this.queue.event(e,h)}let c=!1;if(e.loop)if(s==0)c=!0;else{const h=Math.floor(e.trackTime/s);c=h>0&&h>Math.floor(e.trackLast/s)}else c=t>=i&&e.animationLast<i;for(c&&this.queue.complete(e);u<l;u++){let h=a[u];h.time<n||this.queue.event(e,h)}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,n=this.tracks.length;t<n;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()}clearTrack(e){if(e>=this.tracks.length)return;let t=this.tracks[e];if(!t)return;this.queue.end(t),this.clearNext(t);let n=t;for(;;){let i=n.mixingFrom;if(!i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(e,t,n){let i=this.expandToIndex(e);this.tracks[e]=t,t.previous=null,i&&(n&&this.queue.interrupt(i),t.mixingFrom=i,i.mixingTo=t,t.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(t.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(t)}setAnimation(e,t,n=!1){let i=this.data.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,i,n)}setAnimationWith(e,t,n=!1){if(!t)throw new Error("animation cannot be null.");let i=!0,s=this.expandToIndex(e);s&&(s.nextTrackLast==-1?(this.tracks[e]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.clearNext(s),s=s.mixingFrom,i=!1):this.clearNext(s));let o=this.trackEntry(e,t,n,s);return this.setCurrent(e,o,i),this.queue.drain(),o}addAnimation(e,t,n=!1,i=0){let s=this.data.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,s,n,i)}addAnimationWith(e,t,n=!1,i=0){if(!t)throw new Error("animation cannot be null.");let s=this.expandToIndex(e);if(s)for(;s.next;)s=s.next;let o=this.trackEntry(e,t,n,s);return s?(s.next=o,o.previous=s,i<=0&&(i+=s.getTrackComplete()-o.mixDuration)):(this.setCurrent(e,o,!0),this.queue.drain()),o.delay=i,o}setEmptyAnimation(e,t=0){let n=this.setAnimationWith(e,Cu.emptyAnimation(),!1);return n.mixDuration=t,n.trackEnd=t,n}addEmptyAnimation(e,t=0,n=0){let i=this.addAnimationWith(e,Cu.emptyAnimation(),!1,n);return n<=0&&(i.delay+=i.mixDuration-t),i.mixDuration=t,i.trackEnd=t,i}setEmptyAnimations(e=0){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let n=0,i=this.tracks.length;n<i;n++){let s=this.tracks[n];s&&this.setEmptyAnimation(s.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(pe.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,t,n,i){let s=this.trackEntryPool.obtain();return s.reset(),s.trackIndex=e,s.animation=t,s.loop=n,s.holdPrevious=!1,s.reverse=!1,s.shortestRotation=!1,s.eventThreshold=0,s.alphaAttachmentThreshold=0,s.mixAttachmentThreshold=0,s.mixDrawOrderThreshold=0,s.animationStart=0,s.animationEnd=t.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.mixTime=0,s.mixDuration=i?this.data.getMix(i.animation,t):0,s.interruptAlpha=1,s.totalAlpha=0,s.mixBlend=ne.replace,s}clearNext(e){let t=e.next;for(;t;)this.queue.dispose(t),t=t.next;e.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let t=0,n=e.length;t<n;t++){let i=e[t];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do(!i.mixingTo||i.mixBlend!=ne.add)&&this.computeHold(i),i=i.mixingTo;while(i)}}}computeHold(e){let t=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,s=e.timelineMode;s.length=i;let o=e.timelineHoldMix;o.length=0;let a=this.propertyIDs;if(t&&t.holdPrevious){for(let u=0;u<i;u++)s[u]=a.addAll(n[u].getPropertyIds())?Uy:OP;return}e:for(let u=0;u<i;u++){let l=n[u],c=l.getPropertyIds();if(!a.addAll(c))s[u]=Dy;else if(!t||l instanceof bu||l instanceof sl||l instanceof ud||!t.animation.hasTimeline(c))s[u]=RP;else{for(let h=t.mixingTo;h;h=h.mixingTo)if(!h.animation.hasTimeline(c)){if(e.mixDuration>0){s[u]=a9,o[u]=h;continue e}break}s[u]=Uy}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};C(Cu,"_emptyAnimation",new Yw("<empty>",[],0));let u_=Cu;class s9{constructor(){C(this,"animation",null);C(this,"previous",null);C(this,"next",null);C(this,"mixingFrom",null);C(this,"mixingTo",null);C(this,"listener",null);C(this,"trackIndex",0);C(this,"loop",!1);C(this,"holdPrevious",!1);C(this,"reverse",!1);C(this,"shortestRotation",!1);C(this,"eventThreshold",0);C(this,"mixAttachmentThreshold",0);C(this,"alphaAttachmentThreshold",0);C(this,"mixDrawOrderThreshold",0);C(this,"animationStart",0);C(this,"animationEnd",0);C(this,"animationLast",0);C(this,"nextAnimationLast",0);C(this,"delay",0);C(this,"trackTime",0);C(this,"trackLast",0);C(this,"nextTrackLast",0);C(this,"trackEnd",0);C(this,"timeScale",0);C(this,"alpha",0);C(this,"mixTime",0);C(this,"_mixDuration",0);C(this,"interruptAlpha",0);C(this,"totalAlpha",0);C(this,"mixBlend",ne.replace);C(this,"timelineMode",new Array);C(this,"timelineHoldMix",new Array);C(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(e){this._mixDuration=e}setMixDurationWithDelay(e,t){this._mixDuration=e,this.previous!=null&&t<=0&&(t+=this.previous.getTrackComplete()-e),this.delay=t}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(e){this.animationLast=e,this.nextAnimationLast=e}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}}class o9{constructor(e){C(this,"objects",[]);C(this,"drainDisabled",!1);C(this,"animState");this.animState=e}start(e){this.objects.push(un.start),this.objects.push(e),this.animState.animationsChanged=!0}interrupt(e){this.objects.push(un.interrupt),this.objects.push(e)}end(e){this.objects.push(un.end),this.objects.push(e),this.animState.animationsChanged=!0}dispose(e){this.objects.push(un.dispose),this.objects.push(e)}complete(e){this.objects.push(un.complete),this.objects.push(e)}event(e,t){this.objects.push(un.event),this.objects.push(e),this.objects.push(t)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let e=this.objects,t=this.animState.listeners;for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];switch(i){case un.start:s.listener&&s.listener.start&&s.listener.start(s);for(let a=0;a<t.length;a++){let u=t[a];u.start&&u.start(s)}break;case un.interrupt:s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(let a=0;a<t.length;a++){let u=t[a];u.interrupt&&u.interrupt(s)}break;case un.end:s.listener&&s.listener.end&&s.listener.end(s);for(let a=0;a<t.length;a++){let u=t[a];u.end&&u.end(s)}case un.dispose:s.listener&&s.listener.dispose&&s.listener.dispose(s);for(let a=0;a<t.length;a++){let u=t[a];u.dispose&&u.dispose(s)}this.animState.trackEntryPool.free(s);break;case un.complete:s.listener&&s.listener.complete&&s.listener.complete(s);for(let a=0;a<t.length;a++){let u=t[a];u.complete&&u.complete(s)}break;case un.event:let o=e[n+++2];s.listener&&s.listener.event&&s.listener.event(s,o);for(let a=0;a<t.length;a++){let u=t[a];u.event&&u.event(s,o)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var un;(function(r){r[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event"})(un||(un={}));const Dy=0,RP=1,OP=2,Uy=3,a9=4,BP=1,l9=2;class u9{constructor(e){C(this,"skeletonData");C(this,"animationToMixTime",{});C(this,"defaultMix",0);if(!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}setMix(e,t,n){let i=this.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);this.setMixWith(i,s,n)}setMixWith(e,t,n){if(!e)throw new Error("from cannot be null.");if(!t)throw new Error("to cannot be null.");let i=e.name+"."+t.name;this.animationToMixTime[i]=n}getMix(e,t){let n=e.name+"."+t.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i}}class Ww extends Gi{constructor(t){super(t);C(this,"color",new je(1,1,1,1))}copy(){let t=new Ww(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Pd extends Gi{constructor(t){super(t);C(this,"endSlot",null);C(this,"color",new je(.2275,.2275,.8078,1))}copy(){let t=new Pd(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class h9{constructor(e){C(this,"_image");this._image=e}getImage(){return this._image}}var vr;(function(r){r[r.Nearest=9728]="Nearest",r[r.Linear=9729]="Linear",r[r.MipMap=9987]="MipMap",r[r.MipMapNearestNearest=9984]="MipMapNearestNearest",r[r.MipMapLinearNearest=9985]="MipMapLinearNearest",r[r.MipMapNearestLinear=9986]="MipMapNearestLinear",r[r.MipMapLinearLinear=9987]="MipMapLinearLinear"})(vr||(vr={}));var po;(function(r){r[r.MirroredRepeat=33648]="MirroredRepeat",r[r.ClampToEdge=33071]="ClampToEdge",r[r.Repeat=10497]="Repeat"})(po||(po={}));class c9{constructor(){C(this,"texture");C(this,"u",0);C(this,"v",0);C(this,"u2",0);C(this,"v2",0);C(this,"width",0);C(this,"height",0);C(this,"degrees",0);C(this,"offsetX",0);C(this,"offsetY",0);C(this,"originalWidth",0);C(this,"originalHeight",0)}}class d9{constructor(e){C(this,"pages",new Array);C(this,"regions",new Array);let t=new f9(e),n=new Array(4),i={};i.size=c=>{c.width=parseInt(n[1]),c.height=parseInt(n[2])},i.format=()=>{},i.filter=c=>{c.minFilter=pe.enumValue(vr,n[1]),c.magFilter=pe.enumValue(vr,n[2])},i.repeat=c=>{n[1].indexOf("x")!=-1&&(c.uWrap=po.Repeat),n[1].indexOf("y")!=-1&&(c.vWrap=po.Repeat)},i.pma=c=>{c.pma=n[1]=="true"};var s={};s.xy=c=>{c.x=parseInt(n[1]),c.y=parseInt(n[2])},s.size=c=>{c.width=parseInt(n[1]),c.height=parseInt(n[2])},s.bounds=c=>{c.x=parseInt(n[1]),c.y=parseInt(n[2]),c.width=parseInt(n[3]),c.height=parseInt(n[4])},s.offset=c=>{c.offsetX=parseInt(n[1]),c.offsetY=parseInt(n[2])},s.orig=c=>{c.originalWidth=parseInt(n[1]),c.originalHeight=parseInt(n[2])},s.offsets=c=>{c.offsetX=parseInt(n[1]),c.offsetY=parseInt(n[2]),c.originalWidth=parseInt(n[3]),c.originalHeight=parseInt(n[4])},s.rotate=c=>{let h=n[1];h=="true"?c.degrees=90:h!="false"&&(c.degrees=parseInt(h))},s.index=c=>{c.index=parseInt(n[1])};let o=t.readLine();for(;o&&o.trim().length==0;)o=t.readLine();for(;!(!o||o.trim().length==0||t.readEntry(n,o)==0);)o=t.readLine();let a=null,u=null,l=null;for(;o!==null;)if(o.trim().length==0)a=null,o=t.readLine();else if(a){let c=new P3(a,o);for(;;){let h=t.readEntry(n,o=t.readLine());if(h==0)break;let d=s[n[0]];if(d)d(c);else{u||(u=[]),l||(l=[]),u.push(n[0]);let p=[];for(let g=0;g<h;g++)p.push(parseInt(n[g+1]));l.push(p)}}c.originalWidth==0&&c.originalHeight==0&&(c.originalWidth=c.width,c.originalHeight=c.height),u&&u.length>0&&l&&l.length>0&&(c.names=u,c.values=l,u=null,l=null),c.u=c.x/a.width,c.v=c.y/a.height,c.degrees==90?(c.u2=(c.x+c.height)/a.width,c.v2=(c.y+c.width)/a.height):(c.u2=(c.x+c.width)/a.width,c.v2=(c.y+c.height)/a.height),this.regions.push(c)}else{for(a=new p9(o.trim());t.readEntry(n,o=t.readLine())!=0;){let c=i[n[0]];c&&c(a)}this.pages.push(a)}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(e,t=""){for(let n of this.pages)n.setTexture(e.get(t+n.name))}dispose(){var e;for(let t=0;t<this.pages.length;t++)(e=this.pages[t].texture)==null||e.dispose()}}class f9{constructor(e){C(this,"lines");C(this,"index",0);this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,t){if(!t||(t=t.trim(),t.length==0))return 0;let n=t.indexOf(":");if(n==-1)return 0;e[0]=t.substr(0,n).trim();for(let i=1,s=n+1;;i++){let o=t.indexOf(",",s);if(o==-1)return e[i]=t.substr(s).trim(),i;if(e[i]=t.substr(s,o-s).trim(),s=o+1,i==4)return 4}}}class p9{constructor(e){C(this,"name");C(this,"minFilter",vr.Nearest);C(this,"magFilter",vr.Nearest);C(this,"uWrap",po.ClampToEdge);C(this,"vWrap",po.ClampToEdge);C(this,"texture",null);C(this,"width",0);C(this,"height",0);C(this,"pma",!1);C(this,"regions",new Array);this.name=e}setTexture(e){this.texture=e,e.setFilters(this.minFilter,this.magFilter),e.setWraps(this.uWrap,this.vWrap);for(let t of this.regions)t.texture=e}}class P3 extends c9{constructor(t,n){super();C(this,"page");C(this,"name");C(this,"x",0);C(this,"y",0);C(this,"offsetX",0);C(this,"offsetY",0);C(this,"originalWidth",0);C(this,"originalHeight",0);C(this,"index",0);C(this,"degrees",0);C(this,"names",null);C(this,"values",null);this.page=t,this.name=n,t.regions.push(this)}}class vl extends Gi{constructor(t,n){super(t);C(this,"region",null);C(this,"path");C(this,"regionUVs",[]);C(this,"uvs",[]);C(this,"triangles",[]);C(this,"color",new je(1,1,1,1));C(this,"width",0);C(this,"height",0);C(this,"hullLength",0);C(this,"edges",[]);C(this,"parentMesh",null);C(this,"sequence",null);C(this,"tempColor",new je(0,0,0,0));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=pe.newFloatArray(t.length));let n=this.uvs,i=this.uvs.length,s=this.region.u,o=this.region.v,a=0,u=0;if(this.region instanceof P3){let l=this.region,c=l.page,h=c.width,d=c.height;switch(l.degrees){case 90:s-=(l.originalHeight-l.offsetY-l.height)/h,o-=(l.originalWidth-l.offsetX-l.width)/d,a=l.originalHeight/h,u=l.originalWidth/d;for(let p=0;p<i;p+=2)n[p]=s+t[p+1]*a,n[p+1]=o+(1-t[p])*u;return;case 180:s-=(l.originalWidth-l.offsetX-l.width)/h,o-=l.offsetY/d,a=l.originalWidth/h,u=l.originalHeight/d;for(let p=0;p<i;p+=2)n[p]=s+(1-t[p])*a,n[p+1]=o+(1-t[p+1])*u;return;case 270:s-=l.offsetY/h,o-=l.offsetX/d,a=l.originalHeight/h,u=l.originalWidth/d;for(let p=0;p<i;p+=2)n[p]=s+(1-t[p+1])*a,n[p+1]=o+t[p]*u;return}s-=l.offsetX/h,o-=(l.originalHeight-l.offsetY-l.height)/d,a=l.originalWidth/h,u=l.originalHeight/d}else this.region?(a=this.region.u2-s,u=this.region.v2-o):(s=o=0,a=u=1);for(let l=0;l<i;l+=2)n[l]=s+t[l]*a,n[l+1]=o+t[l+1]*u}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new vl(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),pe.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),pe.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),pe.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),pe.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,n,i,s,o,a){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,n,i,s,o,a)}newLinkedMesh(){let t=new vl(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.region!=null&&t.updateRegion(),t}}class lh extends Gi{constructor(t){super(t);C(this,"lengths",[]);C(this,"closed",!1);C(this,"constantSpeed",!1);C(this,"color",new je(1,1,1,1))}copy(){let t=new lh(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),pe.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Vw extends Gi{constructor(t){super(t);C(this,"x",0);C(this,"y",0);C(this,"rotation",0);C(this,"color",new je(.38,.94,0,1))}computeWorldPosition(t,n){return n.x=this.x*t.a+this.y*t.b+t.worldX,n.y=this.x*t.c+this.y*t.d+t.worldY,n}computeWorldRotation(t){const n=this.rotation*ue.degRad,i=Math.cos(n),s=Math.sin(n),o=i*t.a+s*t.b,a=i*t.c+s*t.d;return ue.atan2Deg(a,o)}copy(){let t=new Vw(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}const et=class et extends QR{constructor(t,n){super(t);C(this,"x",0);C(this,"y",0);C(this,"scaleX",1);C(this,"scaleY",1);C(this,"rotation",0);C(this,"width",0);C(this,"height",0);C(this,"color",new je(1,1,1,1));C(this,"path");C(this,"region",null);C(this,"sequence",null);C(this,"offset",pe.newFloatArray(8));C(this,"uvs",pe.newFloatArray(8));C(this,"tempColor",new je(1,1,1,1));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,n=this.uvs;if(t==null){n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=1,n[5]=1,n[6]=1,n[7]=0;return}let i=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,o=-this.width/2*this.scaleX+this.region.offsetX*i,a=-this.height/2*this.scaleY+this.region.offsetY*s,u=o+this.region.width*i,l=a+this.region.height*s,c=this.rotation*ue.degRad,h=Math.cos(c),d=Math.sin(c),p=this.x,g=this.y,v=o*h+p,x=o*d,y=a*h+g,b=a*d,_=u*h+p,S=u*d,I=l*h+g,A=l*d,k=this.offset;k[0]=v-b,k[1]=y+x,k[2]=v-A,k[3]=I+x,k[4]=_-A,k[5]=I+S,k[6]=_-b,k[7]=y+S,t.degrees==90?(n[0]=t.u2,n[1]=t.v2,n[2]=t.u,n[3]=t.v2,n[4]=t.u,n[5]=t.v,n[6]=t.u2,n[7]=t.v):(n[0]=t.u,n[1]=t.v2,n[2]=t.u,n[3]=t.v,n[4]=t.u2,n[5]=t.v,n[6]=t.u2,n[7]=t.v2)}computeWorldVertices(t,n,i,s){this.sequence!=null&&this.sequence.apply(t,this);let o=t.bone,a=this.offset,u=o.worldX,l=o.worldY,c=o.a,h=o.b,d=o.c,p=o.d,g=0,v=0;g=a[0],v=a[1],n[i]=g*c+v*h+u,n[i+1]=g*d+v*p+l,i+=s,g=a[2],v=a[3],n[i]=g*c+v*h+u,n[i+1]=g*d+v*p+l,i+=s,g=a[4],v=a[5],n[i]=g*c+v*h+u,n[i+1]=g*d+v*p+l,i+=s,g=a[6],v=a[7],n[i]=g*c+v*h+u,n[i+1]=g*d+v*p+l}copy(){let t=new et(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,pe.arrayCopy(this.uvs,0,t.uvs,0,8),pe.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=this.sequence!=null?this.sequence.copy():null,t}};C(et,"X1",0),C(et,"Y1",1),C(et,"C1R",2),C(et,"C1G",3),C(et,"C1B",4),C(et,"C1A",5),C(et,"U1",6),C(et,"V1",7),C(et,"X2",8),C(et,"Y2",9),C(et,"C2R",10),C(et,"C2G",11),C(et,"C2B",12),C(et,"C2A",13),C(et,"U2",14),C(et,"V2",15),C(et,"X3",16),C(et,"Y3",17),C(et,"C3R",18),C(et,"C3G",19),C(et,"C3B",20),C(et,"C3A",21),C(et,"U3",22),C(et,"V3",23),C(et,"X4",24),C(et,"Y4",25),C(et,"C4R",26),C(et,"C4G",27),C(et,"C4B",28),C(et,"C4A",29),C(et,"U4",30),C(et,"V4",31);let hd=et;class m9{constructor(e){C(this,"atlas");this.atlas=e}loadSequence(e,t,n){let i=n.regions;for(let s=0,o=i.length;s<o;s++){let a=n.getPath(t,s),u=this.atlas.findRegion(a);if(u==null)throw new Error("Region not found in atlas: "+a+" (sequence: "+e+")");i[s]=u}}newRegionAttachment(e,t,n,i){let s=new hd(t,n);if(i!=null)this.loadSequence(t,n,i);else{let o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (region attachment: "+t+")");s.region=o}return s}newMeshAttachment(e,t,n,i){let s=new vl(t,n);if(i!=null)this.loadSequence(t,n,i);else{let o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+t+")");s.region=o}return s}newBoundingBoxAttachment(e,t){return new Ww(t)}newPathAttachment(e,t){return new lh(t)}newPointAttachment(e,t){return new Vw(t)}newClippingAttachment(e,t){return new Pd(t)}}class A3{constructor(e,t,n){C(this,"index",0);C(this,"name");C(this,"parent",null);C(this,"length",0);C(this,"x",0);C(this,"y",0);C(this,"rotation",0);C(this,"scaleX",1);C(this,"scaleY",1);C(this,"shearX",0);C(this,"shearY",0);C(this,"inherit",Nt.Normal);C(this,"skinRequired",!1);C(this,"color",new je);C(this,"icon");C(this,"visible",!1);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=n}}var Nt;(function(r){r[r.Normal=0]="Normal",r[r.OnlyTranslation=1]="OnlyTranslation",r[r.NoRotationOrReflection=2]="NoRotationOrReflection",r[r.NoScale=3]="NoScale",r[r.NoScaleOrReflection=4]="NoScaleOrReflection"})(Nt||(Nt={}));class LP{constructor(e,t,n){C(this,"data");C(this,"skeleton");C(this,"parent",null);C(this,"children",new Array);C(this,"x",0);C(this,"y",0);C(this,"rotation",0);C(this,"scaleX",0);C(this,"scaleY",0);C(this,"shearX",0);C(this,"shearY",0);C(this,"ax",0);C(this,"ay",0);C(this,"arotation",0);C(this,"ascaleX",0);C(this,"ascaleY",0);C(this,"ashearX",0);C(this,"ashearY",0);C(this,"a",0);C(this,"b",0);C(this,"c",0);C(this,"d",0);C(this,"worldY",0);C(this,"worldX",0);C(this,"inherit",Nt.Normal);C(this,"sorted",!1);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=n,this.setToSetupPose()}isActive(){return this.active}update(e){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,t,n,i,s,o,a){this.ax=e,this.ay=t,this.arotation=n,this.ascaleX=i,this.ascaleY=s,this.ashearX=o,this.ashearY=a;let u=this.parent;if(!u){let p=this.skeleton;const g=p.scaleX,v=p.scaleY,x=(n+o)*ue.degRad,y=(n+90+a)*ue.degRad;this.a=Math.cos(x)*i*g,this.b=Math.cos(y)*s*g,this.c=Math.sin(x)*i*v,this.d=Math.sin(y)*s*v,this.worldX=e*g+p.x,this.worldY=t*v+p.y;return}let l=u.a,c=u.b,h=u.c,d=u.d;switch(this.worldX=l*e+c*t+u.worldX,this.worldY=h*e+d*t+u.worldY,this.inherit){case Nt.Normal:{const p=(n+o)*ue.degRad,g=(n+90+a)*ue.degRad,v=Math.cos(p)*i,x=Math.cos(g)*s,y=Math.sin(p)*i,b=Math.sin(g)*s;this.a=l*v+c*y,this.b=l*x+c*b,this.c=h*v+d*y,this.d=h*x+d*b;return}case Nt.OnlyTranslation:{const p=(n+o)*ue.degRad,g=(n+90+a)*ue.degRad;this.a=Math.cos(p)*i,this.b=Math.cos(g)*s,this.c=Math.sin(p)*i,this.d=Math.sin(g)*s;break}case Nt.NoRotationOrReflection:{let p=l*l+h*h,g=0;p>1e-4?(p=Math.abs(l*d-c*h)/p,l/=this.skeleton.scaleX,h/=this.skeleton.scaleY,c=h*p,d=l*p,g=Math.atan2(h,l)*ue.radDeg):(l=0,h=0,g=90-Math.atan2(d,c)*ue.radDeg);const v=(n+o-g)*ue.degRad,x=(n+a-g+90)*ue.degRad,y=Math.cos(v)*i,b=Math.cos(x)*s,_=Math.sin(v)*i,S=Math.sin(x)*s;this.a=l*y-c*_,this.b=l*b-c*S,this.c=h*y+d*_,this.d=h*b+d*S;break}case Nt.NoScale:case Nt.NoScaleOrReflection:{n*=ue.degRad;const p=Math.cos(n),g=Math.sin(n);let v=(l*p+c*g)/this.skeleton.scaleX,x=(h*p+d*g)/this.skeleton.scaleY,y=Math.sqrt(v*v+x*x);y>1e-5&&(y=1/y),v*=y,x*=y,y=Math.sqrt(v*v+x*x),this.inherit==Nt.NoScale&&l*d-c*h<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(y=-y),n=Math.PI/2+Math.atan2(x,v);const b=Math.cos(n)*y,_=Math.sin(n)*y;o*=ue.degRad,a=(90+a)*ue.degRad;const S=Math.cos(o)*i,I=Math.cos(a)*s,A=Math.sin(o)*i,k=Math.sin(a)*s;this.a=v*S+b*A,this.b=v*I+b*k,this.c=x*S+_*A,this.d=x*I+_*k;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY,this.inherit=e.inherit}updateAppliedTransform(){let e=this.parent;if(!e){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*ue.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*ue.radDeg;return}let t=e.a,n=e.b,i=e.c,s=e.d,o=1/(t*s-n*i),a=s*o,u=n*o,l=i*o,c=t*o,h=this.worldX-e.worldX,d=this.worldY-e.worldY;this.ax=h*a-d*u,this.ay=d*c-h*l;let p,g,v,x;if(this.inherit==Nt.OnlyTranslation)p=this.a,g=this.b,v=this.c,x=this.d;else{switch(this.inherit){case Nt.NoRotationOrReflection:{let I=Math.abs(t*s-n*i)/(t*t+i*i),A=t/this.skeleton.scaleX;n=-(i/this.skeleton.scaleY)*I*this.skeleton.scaleX,s=A*I*this.skeleton.scaleY,o=1/(t*s-n*i),a=s*o,u=n*o;break}case Nt.NoScale:case Nt.NoScaleOrReflection:let y=ue.cosDeg(this.rotation),b=ue.sinDeg(this.rotation);t=(t*y+n*b)/this.skeleton.scaleX,i=(i*y+s*b)/this.skeleton.scaleY;let _=Math.sqrt(t*t+i*i);_>1e-5&&(_=1/_),t*=_,i*=_,_=Math.sqrt(t*t+i*i),this.inherit==Nt.NoScale&&o<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let S=ue.PI/2+Math.atan2(i,t);n=Math.cos(S)*_,s=Math.sin(S)*_,o=1/(t*s-n*i),a=s*o,u=n*o,l=i*o,c=t*o}p=a*this.a-u*this.c,g=a*this.b-u*this.d,v=c*this.c-l*this.a,x=c*this.d-l*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(p*p+v*v),this.ascaleX>1e-4){let y=p*x-g*v;this.ascaleY=y/this.ascaleX,this.ashearY=-Math.atan2(p*g+v*x,y)*ue.radDeg,this.arotation=Math.atan2(v,p)*ue.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(g*g+x*x),this.ashearY=0,this.arotation=90-Math.atan2(x,g)*ue.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*ue.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*ue.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(e){let t=1/(this.a*this.d-this.b*this.c),n=e.x-this.worldX,i=e.y-this.worldY;return e.x=n*this.d*t-i*this.b*t,e.y=i*this.a*t-n*this.c*t,e}localToWorld(e){let t=e.x,n=e.y;return e.x=t*this.a+n*this.b+this.worldX,e.y=t*this.c+n*this.d+this.worldY,e}worldToParent(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.worldToLocal(e)}parentToWorld(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.localToWorld(e)}worldToLocalRotation(e){let t=ue.sinDeg(e),n=ue.cosDeg(e);return Math.atan2(this.a*t-this.c*n,this.d*n-this.b*t)*ue.radDeg+this.rotation-this.shearX}localToWorldRotation(e){e-=this.rotation-this.shearX;let t=ue.sinDeg(e),n=ue.cosDeg(e);return Math.atan2(n*this.c+t*this.d,n*this.a+t*this.b)*ue.radDeg}rotateWorld(e){e*=ue.degRad;const t=Math.sin(e),n=Math.cos(e),i=this.a,s=this.b;this.a=n*i-t*this.c,this.b=n*s-t*this.d,this.c=t*i+n*this.c,this.d=t*s+n*this.d}}class Qg{constructor(e,t,n){C(this,"name");C(this,"order");C(this,"skinRequired");this.name=e,this.order=t,this.skinRequired=n}}let k3=class{constructor(e,t){C(this,"data");C(this,"intValue",0);C(this,"floatValue",0);C(this,"stringValue",null);C(this,"time",0);C(this,"volume",0);C(this,"balance",0);if(!t)throw new Error("data cannot be null.");this.time=e,this.data=t}};class I3{constructor(e){C(this,"name");C(this,"intValue",0);C(this,"floatValue",0);C(this,"stringValue",null);C(this,"audioPath",null);C(this,"volume",0);C(this,"balance",0);this.name=e}}class g9{constructor(e,t){C(this,"data");C(this,"bones");C(this,"target");C(this,"bendDirection",0);C(this,"compress",!1);C(this,"stretch",!1);C(this,"mix",1);C(this,"softness",0);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0;i<e.bones.length;i++){let s=t.findBone(e.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${e.bones[i].name}`);this.bones.push(s)}let n=t.findBone(e.target.name);if(!n)throw new Error(`Couldn't find bone ${e.target.name}`);this.target=n,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}update(e){if(this.mix==0)return;let t=this.target,n=this.bones;switch(n.length){case 1:this.apply1(n[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(n[0],n[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(e,t,n,i,s,o,a){let u=e.parent;if(!u)throw new Error("IK bone must have parent.");let l=u.a,c=u.b,h=u.c,d=u.d,p=-e.ashearX-e.arotation,g=0,v=0;switch(e.inherit){case Nt.OnlyTranslation:g=(t-e.worldX)*ue.signum(e.skeleton.scaleX),v=(n-e.worldY)*ue.signum(e.skeleton.scaleY);break;case Nt.NoRotationOrReflection:let b=Math.abs(l*d-c*h)/Math.max(1e-4,l*l+h*h),_=l/e.skeleton.scaleX,S=h/e.skeleton.scaleY;c=-S*b*e.skeleton.scaleX,d=_*b*e.skeleton.scaleY,p+=Math.atan2(S,_)*ue.radDeg;default:let I=t-u.worldX,A=n-u.worldY,k=l*d-c*h;Math.abs(k)<=1e-4?(g=0,v=0):(g=(I*d-A*c)/k-e.ax,v=(A*l-I*h)/k-e.ay)}p+=Math.atan2(v,g)*ue.radDeg,e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let x=e.ascaleX,y=e.ascaleY;if(i||s){switch(e.inherit){case Nt.NoScale:case Nt.NoScaleOrReflection:g=t-e.worldX,v=n-e.worldY}const b=e.data.length*x;if(b>1e-4){const _=g*g+v*v;if(i&&_<b*b||s&&_>b*b){const S=(Math.sqrt(_)/b-1)*a+1;x*=S,o&&(y*=S)}}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*a,x,y,e.ashearX,e.ashearY)}apply2(e,t,n,i,s,o,a,u,l){if(e.inherit!=Nt.Normal||t.inherit!=Nt.Normal)return;let c=e.ax,h=e.ay,d=e.ascaleX,p=e.ascaleY,g=d,v=p,x=t.ascaleX,y=0,b=0,_=0;d<0?(d=-d,y=180,_=-1):(y=0,_=1),p<0&&(p=-p,_=-_),x<0?(x=-x,b=180):b=0;let S=t.ax,I=0,A=0,k=0,M=e.a,O=e.b,F=e.c,U=e.d,X=Math.abs(d-p)<=1e-4;!X||o?(I=0,A=M*S+e.worldX,k=F*S+e.worldY):(I=t.ay,A=M*S+O*I+e.worldX,k=F*S+U*I+e.worldY);let B=e.parent;if(!B)throw new Error("IK parent must itself have a parent.");M=B.a,O=B.b,F=B.c,U=B.d;let N=M*U-O*F,j=A-B.worldX,W=k-B.worldY;N=Math.abs(N)<=1e-4?0:1/N;let Q=(j*U-W*O)*N-c,H=(W*M-j*F)*N-h,G=Math.sqrt(Q*Q+H*H),z=t.data.length*x,V,Z;if(G<1e-4){this.apply1(e,n,i,!1,o,!1,l),t.updateWorldTransformWith(S,I,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);return}j=n-B.worldX,W=i-B.worldY;let re=(j*U-W*O)*N-c,he=(W*M-j*F)*N-h,ve=re*re+he*he;if(u!=0){u*=d*(x+1)*.5;let ze=Math.sqrt(ve),We=ze-G-z*d+u;if(We>0){let He=Math.min(1,We/(u*2))-1;He=(We-u*(1-He*He))/ze,re-=He*re,he-=He*he,ve=re*re+he*he}}e:if(X){z*=d;let ze=(ve-G*G-z*z)/(2*G*z);ze<-1?(ze=-1,Z=Math.PI*s):ze>1?(ze=1,Z=0,o&&(M=(Math.sqrt(ve)/(G+z)-1)*l+1,g*=M,a&&(v*=M))):Z=Math.acos(ze)*s,M=G+z*ze,O=z*Math.sin(Z),V=Math.atan2(he*M-re*O,re*M+he*O)}else{M=d*z,O=p*z;let ze=M*M,We=O*O,He=Math.atan2(he,re);F=We*G*G+ze*ve-ze*We;let Fe=-2*We*G,ut=We-ze;if(U=Fe*Fe-4*ut*F,U>=0){let Co=Math.sqrt(U);Fe<0&&(Co=-Co),Co=-(Fe+Co)*.5;let Bd=Co/ut,Ld=F/Co,Gn=Math.abs(Bd)<Math.abs(Ld)?Bd:Ld;if(Gn*Gn<=ve){W=Math.sqrt(ve-Gn*Gn)*s,V=He-Math.atan2(W,Gn),Z=Math.atan2(W/p,(Gn-G)/d);break e}}let Ze=ue.PI,Sr=G-M,Lr=Sr*Sr,Qi=0,Cl=0,gi=G+M,Th=gi*gi,Eo=0;F=-M*G/(ze-We),F>=-1&&F<=1&&(F=Math.acos(F),j=M*Math.cos(F)+G,W=O*Math.sin(F),U=j*j+W*W,U<Lr&&(Ze=F,Lr=U,Sr=j,Qi=W),U>Th&&(Cl=F,Th=U,gi=j,Eo=W)),ve<=(Lr+Th)*.5?(V=He-Math.atan2(Qi*s,Sr),Z=Ze*s):(V=He-Math.atan2(Eo*s,gi),Z=Cl*s)}let Me=Math.atan2(I,S)*_,Ne=e.arotation;V=(V-Me)*ue.radDeg+y-Ne,V>180?V-=360:V<-180&&(V+=360),e.updateWorldTransformWith(c,h,Ne+V*l,g,v,0,0),Ne=t.arotation,Z=((Z+Me)*ue.radDeg-t.ashearX)*_+b-Ne,Z>180?Z-=360:Z<-180&&(Z+=360),t.updateWorldTransformWith(S,I,Ne+Z*l,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}}class M3 extends Qg{constructor(t){super(t,0,!1);C(this,"bones",new Array);C(this,"_target",null);C(this,"bendDirection",0);C(this,"compress",!1);C(this,"stretch",!1);C(this,"uniform",!1);C(this,"mix",0);C(this,"softness",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class R3 extends Qg{constructor(t){super(t,0,!1);C(this,"bones",new Array);C(this,"_target",null);C(this,"positionMode",Ms.Fixed);C(this,"spacingMode",cr.Fixed);C(this,"rotateMode",ol.Chain);C(this,"offsetRotation",0);C(this,"position",0);C(this,"spacing",0);C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var Ms;(function(r){r[r.Fixed=0]="Fixed",r[r.Percent=1]="Percent"})(Ms||(Ms={}));var cr;(function(r){r[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",r[r.Proportional=3]="Proportional"})(cr||(cr={}));var ol;(function(r){r[r.Tangent=0]="Tangent",r[r.Chain=1]="Chain",r[r.ChainScale=2]="ChainScale"})(ol||(ol={}));const Rn=class Rn{constructor(e,t){C(this,"data");C(this,"bones");C(this,"target");C(this,"position",0);C(this,"spacing",0);C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0);C(this,"spaces",new Array);C(this,"positions",new Array);C(this,"world",new Array);C(this,"curves",new Array);C(this,"lengths",new Array);C(this,"segments",new Array);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0,s=e.bones.length;i<s;i++){let o=t.findBone(e.bones[i].name);if(!o)throw new Error(`Couldn't find bone ${e.bones[i].name}.`);this.bones.push(o)}let n=t.findSlot(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=n,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}update(e){let t=this.target.getAttachment();if(!(t instanceof lh))return;let n=this.mixRotate,i=this.mixX,s=this.mixY;if(n==0&&i==0&&s==0)return;let o=this.data,a=o.rotateMode==ol.Tangent,u=o.rotateMode==ol.ChainScale,l=this.bones,c=l.length,h=a?c:c+1,d=pe.setArraySize(this.spaces,h),p=u?this.lengths=pe.setArraySize(this.lengths,c):[],g=this.spacing;switch(o.spacingMode){case cr.Percent:if(u)for(let A=0,k=h-1;A<k;A++){let M=l[A],O=M.data.length,F=O*M.a,U=O*M.c;p[A]=Math.sqrt(F*F+U*U)}pe.arrayFill(d,1,h,g);break;case cr.Proportional:let S=0;for(let A=0,k=h-1;A<k;){let M=l[A],O=M.data.length;if(O<Rn.epsilon)u&&(p[A]=0),d[++A]=g;else{let F=O*M.a,U=O*M.c,X=Math.sqrt(F*F+U*U);u&&(p[A]=X),d[++A]=X,S+=X}}if(S>0){S=h/S*g;for(let A=1;A<h;A++)d[A]*=S}break;default:let I=o.spacingMode==cr.Length;for(let A=0,k=h-1;A<k;){let M=l[A],O=M.data.length;if(O<Rn.epsilon)u&&(p[A]=0),d[++A]=g;else{let F=O*M.a,U=O*M.c,X=Math.sqrt(F*F+U*U);u&&(p[A]=X),d[++A]=(I?O+g:g)*X/O}}}let v=this.computeWorldPositions(t,h,a),x=v[0],y=v[1],b=o.offsetRotation,_=!1;if(b==0)_=o.rotateMode==ol.Chain;else{_=!1;let S=this.target.bone;b*=S.a*S.d-S.b*S.c>0?ue.degRad:-ue.degRad}for(let S=0,I=3;S<c;S++,I+=3){let A=l[S];A.worldX+=(x-A.worldX)*i,A.worldY+=(y-A.worldY)*s;let k=v[I],M=v[I+1],O=k-x,F=M-y;if(u){let U=p[S];if(U!=0){let X=(Math.sqrt(O*O+F*F)/U-1)*n+1;A.a*=X,A.c*=X}}if(x=k,y=M,n>0){let U=A.a,X=A.b,B=A.c,N=A.d,j=0,W=0,Q=0;if(a?j=v[I-1]:d[S+1]==0?j=v[I+2]:j=Math.atan2(F,O),j-=Math.atan2(B,U),_){W=Math.cos(j),Q=Math.sin(j);let H=A.data.length;x+=(H*(W*U-Q*B)-O)*n,y+=(H*(Q*U+W*B)-F)*n}else j+=b;j>ue.PI?j-=ue.PI2:j<-ue.PI&&(j+=ue.PI2),j*=n,W=Math.cos(j),Q=Math.sin(j),A.a=W*U-Q*B,A.b=W*X-Q*N,A.c=Q*U+W*B,A.d=Q*X+W*N}A.updateAppliedTransform()}}computeWorldPositions(e,t,n){let i=this.target,s=this.position,o=this.spaces,a=pe.setArraySize(this.positions,t*3+2),u=this.world,l=e.closed,c=e.worldVerticesLength,h=c/6,d=Rn.NONE;if(!e.constantSpeed){let H=e.lengths;h-=l?1:2;let G=H[h];this.data.positionMode==Ms.Percent&&(s*=G);let z;switch(this.data.spacingMode){case cr.Percent:z=G;break;case cr.Proportional:z=G/t;break;default:z=1}u=pe.setArraySize(this.world,8);for(let V=0,Z=0,re=0;V<t;V++,Z+=3){let he=o[V]*z;s+=he;let ve=s;if(l)ve%=G,ve<0&&(ve+=G),re=0;else if(ve<0){d!=Rn.BEFORE&&(d=Rn.BEFORE,e.computeWorldVertices(i,2,4,u,0,2)),this.addBeforePosition(ve,u,0,a,Z);continue}else if(ve>G){d!=Rn.AFTER&&(d=Rn.AFTER,e.computeWorldVertices(i,c-6,4,u,0,2)),this.addAfterPosition(ve-G,u,0,a,Z);continue}for(;;re++){let Me=H[re];if(!(ve>Me)){if(re==0)ve/=Me;else{let Ne=H[re-1];ve=(ve-Ne)/(Me-Ne)}break}}re!=d&&(d=re,l&&re==h?(e.computeWorldVertices(i,c-4,4,u,0,2),e.computeWorldVertices(i,0,4,u,4,2)):e.computeWorldVertices(i,re*6+2,8,u,0,2)),this.addCurvePosition(ve,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],a,Z,n||V>0&&he==0)}return a}l?(c+=2,u=pe.setArraySize(this.world,c),e.computeWorldVertices(i,2,c-4,u,0,2),e.computeWorldVertices(i,0,2,u,c-4,2),u[c-2]=u[0],u[c-1]=u[1]):(h--,c-=4,u=pe.setArraySize(this.world,c),e.computeWorldVertices(i,2,c,u,0,2));let p=pe.setArraySize(this.curves,h),g=0,v=u[0],x=u[1],y=0,b=0,_=0,S=0,I=0,A=0,k=0,M=0,O=0,F=0,U=0,X=0,B=0,N=0;for(let H=0,G=2;H<h;H++,G+=6)y=u[G],b=u[G+1],_=u[G+2],S=u[G+3],I=u[G+4],A=u[G+5],k=(v-y*2+_)*.1875,M=(x-b*2+S)*.1875,O=((y-_)*3-v+I)*.09375,F=((b-S)*3-x+A)*.09375,U=k*2+O,X=M*2+F,B=(y-v)*.75+k+O*.16666667,N=(b-x)*.75+M+F*.16666667,g+=Math.sqrt(B*B+N*N),B+=U,N+=X,U+=O,X+=F,g+=Math.sqrt(B*B+N*N),B+=U,N+=X,g+=Math.sqrt(B*B+N*N),B+=U+O,N+=X+F,g+=Math.sqrt(B*B+N*N),p[H]=g,v=I,x=A;this.data.positionMode==Ms.Percent&&(s*=g);let j;switch(this.data.spacingMode){case cr.Percent:j=g;break;case cr.Proportional:j=g/t;break;default:j=1}let W=this.segments,Q=0;for(let H=0,G=0,z=0,V=0;H<t;H++,G+=3){let Z=o[H]*j;s+=Z;let re=s;if(l)re%=g,re<0&&(re+=g),z=0;else if(re<0){this.addBeforePosition(re,u,0,a,G);continue}else if(re>g){this.addAfterPosition(re-g,u,c-4,a,G);continue}for(;;z++){let he=p[z];if(!(re>he)){if(z==0)re/=he;else{let ve=p[z-1];re=(re-ve)/(he-ve)}break}}if(z!=d){d=z;let he=z*6;for(v=u[he],x=u[he+1],y=u[he+2],b=u[he+3],_=u[he+4],S=u[he+5],I=u[he+6],A=u[he+7],k=(v-y*2+_)*.03,M=(x-b*2+S)*.03,O=((y-_)*3-v+I)*.006,F=((b-S)*3-x+A)*.006,U=k*2+O,X=M*2+F,B=(y-v)*.3+k+O*.16666667,N=(b-x)*.3+M+F*.16666667,Q=Math.sqrt(B*B+N*N),W[0]=Q,he=1;he<8;he++)B+=U,N+=X,U+=O,X+=F,Q+=Math.sqrt(B*B+N*N),W[he]=Q;B+=U,N+=X,Q+=Math.sqrt(B*B+N*N),W[8]=Q,B+=U+O,N+=X+F,Q+=Math.sqrt(B*B+N*N),W[9]=Q,V=0}for(re*=Q;;V++){let he=W[V];if(!(re>he)){if(V==0)re/=he;else{let ve=W[V-1];re=V+(re-ve)/(he-ve)}break}}this.addCurvePosition(re*.1,v,x,y,b,_,S,I,A,a,G,n||H>0&&Z==0)}return a}addBeforePosition(e,t,n,i,s){let o=t[n],a=t[n+1],u=t[n+2]-o,l=t[n+3]-a,c=Math.atan2(l,u);i[s]=o+e*Math.cos(c),i[s+1]=a+e*Math.sin(c),i[s+2]=c}addAfterPosition(e,t,n,i,s){let o=t[n+2],a=t[n+3],u=o-t[n],l=a-t[n+1],c=Math.atan2(l,u);i[s]=o+e*Math.cos(c),i[s+1]=a+e*Math.sin(c),i[s+2]=c}addCurvePosition(e,t,n,i,s,o,a,u,l,c,h,d){if(e==0||isNaN(e)){c[h]=t,c[h+1]=n,c[h+2]=Math.atan2(s-n,i-t);return}let p=e*e,g=p*e,v=1-e,x=v*v,y=x*v,b=v*e,_=b*3,S=v*_,I=_*e,A=t*y+i*S+o*I+u*g,k=n*y+s*S+a*I+l*g;c[h]=A,c[h+1]=k,d&&(e<.001?c[h+2]=Math.atan2(s-n,i-t):c[h+2]=Math.atan2(k-(n*x+s*b*2+a*p),A-(t*x+i*b*2+o*p)))}};C(Rn,"NONE",-1),C(Rn,"BEFORE",-2),C(Rn,"AFTER",-3),C(Rn,"epsilon",1e-5);let h_=Rn;class v9{constructor(e,t){C(this,"data");C(this,"_bone",null);C(this,"inertia",0);C(this,"strength",0);C(this,"damping",0);C(this,"massInverse",0);C(this,"wind",0);C(this,"gravity",0);C(this,"mix",0);C(this,"_reset",!0);C(this,"ux",0);C(this,"uy",0);C(this,"cx",0);C(this,"cy",0);C(this,"tx",0);C(this,"ty",0);C(this,"xOffset",0);C(this,"xVelocity",0);C(this,"yOffset",0);C(this,"yVelocity",0);C(this,"rotateOffset",0);C(this,"rotateVelocity",0);C(this,"scaleOffset",0);C(this,"scaleVelocity",0);C(this,"active",!1);C(this,"skeleton");C(this,"remaining",0);C(this,"lastTime",0);this.data=e,this.skeleton=t,this.bone=t.bones[e.bone.index],this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}set bone(e){this._bone=e}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const e=this.data;this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}isActive(){return this.active}update(e){const t=this.mix;if(t==0)return;const n=this.data.x>0,i=this.data.y>0,s=this.data.rotate>0||this.data.shearX>0,o=this.data.scaleX>0,a=this.bone,u=a.data.length;switch(e){case so.none:return;case so.reset:this.reset();case so.update:const l=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=l,this.lastTime=this.skeleton.time;const c=a.worldX,h=a.worldY;if(this._reset)this._reset=!1,this.ux=c,this.uy=h;else{let d=this.remaining,p=this.inertia,g=this.data.limit*l,v=this.data.step,x=this.skeleton.data.referenceScale,y=-1;if(n||i){if(n){const b=(this.ux-c)*p;this.xOffset+=b>g?g:b<-g?-g:b,this.ux=c}if(i){const b=(this.uy-h)*p;this.yOffset+=b>g?g:b<-g?-g:b,this.uy=h}if(d>=v){y=Math.pow(this.damping,60*v);const b=this.massInverse*v,_=this.strength,S=this.wind*x,I=(uh.yDown?-this.gravity:this.gravity)*x;do n&&(this.xVelocity+=(S-this.xOffset*_)*b,this.xOffset+=this.xVelocity*v,this.xVelocity*=y),i&&(this.yVelocity-=(I+this.yOffset*_)*b,this.yOffset+=this.yVelocity*v,this.yVelocity*=y),d-=v;while(d>=v)}n&&(a.worldX+=this.xOffset*t*this.data.x),i&&(a.worldY+=this.yOffset*t*this.data.y)}if(s||o){let b=Math.atan2(a.c,a.a),_=0,S=0,I=0,A=this.cx-a.worldX,k=this.cy-a.worldY;if(A>g?A=g:A<-g&&(A=-g),k>g?k=g:k<-g&&(k=-g),s){I=(this.data.rotate+this.data.shearX)*t;let M=Math.atan2(k+this.ty,A+this.tx)-b-this.rotateOffset*I;this.rotateOffset+=(M-Math.ceil(M*ue.invPI2-.5)*ue.PI2)*p,M=this.rotateOffset*I+b,_=Math.cos(M),S=Math.sin(M),o&&(M=u*a.getWorldScaleX(),M>0&&(this.scaleOffset+=(A*_+k*S)*p/M))}else{_=Math.cos(b),S=Math.sin(b);const M=u*a.getWorldScaleX();M>0&&(this.scaleOffset+=(A*_+k*S)*p/M)}if(d=this.remaining,d>=v){y==-1&&(y=Math.pow(this.damping,60*v));const M=this.massInverse*v,O=this.strength,F=this.wind,U=uh.yDown?-this.gravity:this.gravity,X=u/x;for(;;)if(d-=v,o&&(this.scaleVelocity+=(F*_-U*S-this.scaleOffset*O)*M,this.scaleOffset+=this.scaleVelocity*v,this.scaleVelocity*=y),s){if(this.rotateVelocity-=((F*S+U*_)*X+this.rotateOffset*O)*M,this.rotateOffset+=this.rotateVelocity*v,this.rotateVelocity*=y,d<v)break;const B=this.rotateOffset*I+b;_=Math.cos(B),S=Math.sin(B)}else if(d<v)break}}this.remaining=d}this.cx=a.worldX,this.cy=a.worldY;break;case so.pose:n&&(a.worldX+=this.xOffset*t*this.data.x),i&&(a.worldY+=this.yOffset*t*this.data.y)}if(s){let l=this.rotateOffset*t,c=0,h=0,d=0;if(this.data.shearX>0){let p=0;this.data.rotate>0&&(p=l*this.data.rotate,c=Math.sin(p),h=Math.cos(p),d=a.b,a.b=h*d-c*a.d,a.d=c*d+h*a.d),p+=l*this.data.shearX,c=Math.sin(p),h=Math.cos(p),d=a.a,a.a=h*d-c*a.c,a.c=c*d+h*a.c}else l*=this.data.rotate,c=Math.sin(l),h=Math.cos(l),d=a.a,a.a=h*d-c*a.c,a.c=c*d+h*a.c,d=a.b,a.b=h*d-c*a.d,a.d=c*d+h*a.d}if(o){const l=1+this.scaleOffset*t*this.data.scaleX;a.a*=l,a.c*=l}e!=so.pose&&(this.tx=u*a.a,this.ty=u*a.c),a.updateAppliedTransform()}translate(e,t){this.ux-=e,this.uy-=t,this.cx-=e,this.cy-=t}rotate(e,t,n){const i=n*ue.degRad,s=Math.cos(i),o=Math.sin(i),a=this.cx-e,u=this.cy-t;this.translate(a*s-u*o-a,a*o+u*s-u)}}class y9{constructor(e,t){C(this,"data");C(this,"bone");C(this,"color");C(this,"darkColor",null);C(this,"attachment",null);C(this,"attachmentState",0);C(this,"sequenceIndex",-1);C(this,"deform",new Array);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("bone cannot be null.");this.data=e,this.bone=t,this.color=new je,this.darkColor=e.darkColor?new je:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(e){this.attachment!=e&&((!(e instanceof Gi)||!(this.attachment instanceof Gi)||e.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=e,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class x9{constructor(e,t){C(this,"data");C(this,"bones");C(this,"target");C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0);C(this,"mixScaleX",0);C(this,"mixScaleY",0);C(this,"mixShearY",0);C(this,"temp",new Zm);C(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0;i<e.bones.length;i++){let s=t.findBone(e.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${e.bones[i].name}.`);this.bones.push(s)}let n=t.findBone(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}.`);this.target=n,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}update(e){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=t!=0||n!=0,u=this.target,l=u.a,c=u.b,h=u.c,d=u.d,p=l*d-c*h>0?ue.degRad:-ue.degRad,g=this.data.offsetRotation*p,v=this.data.offsetShearY*p,x=this.bones;for(let y=0,b=x.length;y<b;y++){let _=x[y];if(e!=0){let S=_.a,I=_.b,A=_.c,k=_.d,M=Math.atan2(h,l)-Math.atan2(A,S)+g;M>ue.PI?M-=ue.PI2:M<-ue.PI&&(M+=ue.PI2),M*=e;let O=Math.cos(M),F=Math.sin(M);_.a=O*S-F*A,_.b=O*I-F*k,_.c=F*S+O*A,_.d=F*I+O*k}if(a){let S=this.temp;u.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(S.x-_.worldX)*t,_.worldY+=(S.y-_.worldY)*n}if(i!=0){let S=Math.sqrt(_.a*_.a+_.c*_.c);S!=0&&(S=(S+(Math.sqrt(l*l+h*h)-S+this.data.offsetScaleX)*i)/S),_.a*=S,_.c*=S}if(s!=0){let S=Math.sqrt(_.b*_.b+_.d*_.d);S!=0&&(S=(S+(Math.sqrt(c*c+d*d)-S+this.data.offsetScaleY)*s)/S),_.b*=S,_.d*=S}if(o>0){let S=_.b,I=_.d,A=Math.atan2(I,S),k=Math.atan2(d,c)-Math.atan2(h,l)-(A-Math.atan2(_.c,_.a));k>ue.PI?k-=ue.PI2:k<-ue.PI&&(k+=ue.PI2),k=A+(k+v)*o;let M=Math.sqrt(S*S+I*I);_.b=Math.cos(k)*M,_.d=Math.sin(k)*M}_.updateAppliedTransform()}}applyRelativeWorld(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=t!=0||n!=0,u=this.target,l=u.a,c=u.b,h=u.c,d=u.d,p=l*d-c*h>0?ue.degRad:-ue.degRad,g=this.data.offsetRotation*p,v=this.data.offsetShearY*p,x=this.bones;for(let y=0,b=x.length;y<b;y++){let _=x[y];if(e!=0){let S=_.a,I=_.b,A=_.c,k=_.d,M=Math.atan2(h,l)+g;M>ue.PI?M-=ue.PI2:M<-ue.PI&&(M+=ue.PI2),M*=e;let O=Math.cos(M),F=Math.sin(M);_.a=O*S-F*A,_.b=O*I-F*k,_.c=F*S+O*A,_.d=F*I+O*k}if(a){let S=this.temp;u.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=S.x*t,_.worldY+=S.y*n}if(i!=0){let S=(Math.sqrt(l*l+h*h)-1+this.data.offsetScaleX)*i+1;_.a*=S,_.c*=S}if(s!=0){let S=(Math.sqrt(c*c+d*d)-1+this.data.offsetScaleY)*s+1;_.b*=S,_.d*=S}if(o>0){let S=Math.atan2(d,c)-Math.atan2(h,l);S>ue.PI?S-=ue.PI2:S<-ue.PI&&(S+=ue.PI2);let I=_.b,A=_.d;S=Math.atan2(A,I)+(S-ue.PI/2+v)*o;let k=Math.sqrt(I*I+A*A);_.b=Math.cos(S)*k,_.d=Math.sin(S)*k}_.updateAppliedTransform()}}applyAbsoluteLocal(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=this.target,u=this.bones;for(let l=0,c=u.length;l<c;l++){let h=u[l],d=h.arotation;e!=0&&(d+=(a.arotation-d+this.data.offsetRotation)*e);let p=h.ax,g=h.ay;p+=(a.ax-p+this.data.offsetX)*t,g+=(a.ay-g+this.data.offsetY)*n;let v=h.ascaleX,x=h.ascaleY;i!=0&&v!=0&&(v=(v+(a.ascaleX-v+this.data.offsetScaleX)*i)/v),s!=0&&x!=0&&(x=(x+(a.ascaleY-x+this.data.offsetScaleY)*s)/x);let y=h.ashearY;o!=0&&(y+=(a.ashearY-y+this.data.offsetShearY)*o),h.updateWorldTransformWith(p,g,d,v,x,h.ashearX,y)}}applyRelativeLocal(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=this.target,u=this.bones;for(let l=0,c=u.length;l<c;l++){let h=u[l],d=h.arotation+(a.arotation+this.data.offsetRotation)*e,p=h.ax+(a.ax+this.data.offsetX)*t,g=h.ay+(a.ay+this.data.offsetY)*n,v=h.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*i+1),x=h.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*s+1),y=h.ashearY+(a.ashearY+this.data.offsetShearY)*o;h.updateWorldTransformWith(p,g,d,v,x,h.ashearX,y)}}}const Pu=class Pu{constructor(e){C(this,"data");C(this,"bones");C(this,"slots");C(this,"drawOrder");C(this,"ikConstraints");C(this,"transformConstraints");C(this,"pathConstraints");C(this,"physicsConstraints");C(this,"_updateCache",new Array);C(this,"skin",null);C(this,"color");C(this,"scaleX",1);C(this,"_scaleY",1);C(this,"x",0);C(this,"y",0);C(this,"time",0);if(!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let t=0;t<e.bones.length;t++){let n=e.bones[t],i;if(!n.parent)i=new LP(n,this,null);else{let s=this.bones[n.parent.index];i=new LP(n,this,s),s.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<e.slots.length;t++){let n=e.slots[t],i=this.bones[n.boneData.index],s=new y9(n,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(let t=0;t<e.ikConstraints.length;t++){let n=e.ikConstraints[t];this.ikConstraints.push(new g9(n,this))}this.transformConstraints=new Array;for(let t=0;t<e.transformConstraints.length;t++){let n=e.transformConstraints[t];this.transformConstraints.push(new x9(n,this))}this.pathConstraints=new Array;for(let t=0;t<e.pathConstraints.length;t++){let n=e.pathConstraints[t];this.pathConstraints.push(new h_(n,this))}this.physicsConstraints=new Array;for(let t=0;t<e.physicsConstraints.length;t++){let n=e.physicsConstraints[t];this.physicsConstraints.push(new v9(n,this))}this.color=new je(1,1,1,1),this.updateCache()}get scaleY(){return Pu.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e}updateCache(){let e=this._updateCache;e.length=0;let t=this.bones;for(let d=0,p=t.length;d<p;d++){let g=t[d];g.sorted=g.data.skinRequired,g.active=!g.sorted}if(this.skin){let d=this.skin.bones;for(let p=0,g=this.skin.bones.length;p<g;p++){let v=this.bones[d[p].index];do v.sorted=!1,v.active=!0,v=v.parent;while(v)}}let n=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,o=this.physicsConstraints,a=n.length,u=i.length,l=s.length,c=this.physicsConstraints.length,h=a+u+l+c;e:for(let d=0;d<h;d++){for(let p=0;p<a;p++){let g=n[p];if(g.data.order==d){this.sortIkConstraint(g);continue e}}for(let p=0;p<u;p++){let g=i[p];if(g.data.order==d){this.sortTransformConstraint(g);continue e}}for(let p=0;p<l;p++){let g=s[p];if(g.data.order==d){this.sortPathConstraint(g);continue e}}for(let p=0;p<c;p++){const g=o[p];if(g.data.order==d){this.sortPhysicsConstraint(g);continue e}}}for(let d=0,p=t.length;d<p;d++)this.sortBone(t[d])}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&pe.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target;this.sortBone(t);let n=e.bones,i=n[0];if(this.sortBone(i),n.length==1)this._updateCache.push(e),this.sortReset(i.children);else{let s=n[n.length-1];this.sortBone(s),this._updateCache.push(e),this.sortReset(i.children),s.sorted=!0}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&pe.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target,n=t.data.index,i=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(let u=0,l=this.data.skins.length;u<l;u++)this.sortPathConstraintAttachment(this.data.skins[u],n,i);let s=t.getAttachment();s instanceof lh&&this.sortPathConstraintAttachmentWith(s,i);let o=e.bones,a=o.length;for(let u=0;u<a;u++)this.sortBone(o[u]);this._updateCache.push(e);for(let u=0;u<a;u++)this.sortReset(o[u].children);for(let u=0;u<a;u++)o[u].sorted=!0}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&pe.contains(this.skin.constraints,e.data,!0)),!e.active)return;this.sortBone(e.target);let t=e.bones,n=t.length;if(e.data.local)for(let i=0;i<n;i++){let s=t[i];this.sortBone(s.parent),this.sortBone(s)}else for(let i=0;i<n;i++)this.sortBone(t[i]);this._updateCache.push(e);for(let i=0;i<n;i++)this.sortReset(t[i].children);for(let i=0;i<n;i++)t[i].sorted=!0}sortPathConstraintAttachment(e,t,n){let i=e.attachments[t];if(i)for(let s in i)this.sortPathConstraintAttachmentWith(i[s],n)}sortPathConstraintAttachmentWith(e,t){if(!(e instanceof lh))return;let n=e.bones;if(!n)this.sortBone(t);else{let i=this.bones;for(let s=0,o=n.length;s<o;){let a=n[s++];for(a+=s;s<a;)this.sortBone(i[n[s++]])}}}sortPhysicsConstraint(e){const t=e.bone;e.active=t.active&&(!e.data.skinRequired||this.skin!=null&&pe.contains(this.skin.constraints,e.data,!0)),e.active&&(this.sortBone(t),this._updateCache.push(e),this.sortReset(t.children),t.sorted=!0)}sortBone(e){if(!e||e.sorted)return;let t=e.parent;t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}sortReset(e){for(let t=0,n=e.length;t<n;t++){let i=e[t];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(e){if(e==null)throw new Error("physics is undefined");let t=this.bones;for(let i=0,s=t.length;i<s;i++){let o=t[i];o.ax=o.x,o.ay=o.y,o.arotation=o.rotation,o.ascaleX=o.scaleX,o.ascaleY=o.scaleY,o.ashearX=o.shearX,o.ashearY=o.shearY}let n=this._updateCache;for(let i=0,s=n.length;i<s;i++)n[i].update(e)}updateWorldTransformWith(e,t){let n=this.getRootBone();if(!n)throw new Error("Root bone must not be null.");let i=t.a,s=t.b,o=t.c,a=t.d;n.worldX=i*this.x+s*this.y+t.worldX,n.worldY=o*this.x+a*this.y+t.worldY;const u=(n.rotation+n.shearX)*ue.degRad,l=(n.rotation+90+n.shearY)*ue.degRad,c=Math.cos(u)*n.scaleX,h=Math.cos(l)*n.scaleY,d=Math.sin(u)*n.scaleX,p=Math.sin(l)*n.scaleY;n.a=(i*c+s*d)*this.scaleX,n.b=(i*h+s*p)*this.scaleX,n.c=(o*c+a*d)*this.scaleY,n.d=(o*h+a*p)*this.scaleY;let g=this._updateCache;for(let v=0,x=g.length;v<x;v++){let y=g[v];y!=n&&y.update(e)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const e of this.bones)e.setToSetupPose();for(const e of this.ikConstraints)e.setToSetupPose();for(const e of this.transformConstraints)e.setToSetupPose();for(const e of this.pathConstraints)e.setToSetupPose();for(const e of this.physicsConstraints)e.setToSetupPose()}setSlotsToSetupPose(){let e=this.slots;pe.arrayCopy(e,0,this.drawOrder,0,e.length);for(let t=0,n=e.length;t<n;t++)e[t].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.data.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.data.name==e)return s}return null}setSkinByName(e){let t=this.data.findSkin(e);if(!t)throw new Error("Skin not found: "+e);this.setSkin(t)}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else{let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n],o=s.data.attachmentName;if(o){let a=e.getAttachment(n,o);a&&s.setAttachment(a)}}}this.skin=e,this.updateCache()}}getAttachmentByName(e,t){let n=this.data.findSlot(e);if(!n)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(n.index,t)}getAttachment(e,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){let n=this.skin.getAttachment(e,t);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null}setAttachment(e,t){if(!e)throw new Error("slotName cannot be null.");let n=this.slots;for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.data.name==e){let a=null;if(t&&(a=this.getAttachment(i,t),!a))throw new Error("Attachment not found: "+t+", for slot: "+e);o.setAttachment(a);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(t=>t.data.name==e)??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(t=>t.data.name==e)??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(t=>t.data.name==e)??null}findPhysicsConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(t=>t.data.name==e)??null}getBoundsRect(){let e=new Zm,t=new Zm;return this.getBounds(e,t),{x:e.x,y:e.y,width:t.x,height:t.y}}getBounds(e,t,n=new Array(2),i=null){if(!e)throw new Error("offset cannot be null.");if(!t)throw new Error("size cannot be null.");let s=this.drawOrder,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let c=0,h=s.length;c<h;c++){let d=s[c];if(!d.bone.active)continue;let p=0,g=null,v=null,x=d.getAttachment();if(x instanceof hd)p=8,g=pe.setArraySize(n,p,0),x.computeWorldVertices(d,g,0,2),v=Pu.quadTriangles;else if(x instanceof vl){let y=x;p=y.worldVerticesLength,g=pe.setArraySize(n,p,0),y.computeWorldVertices(d,0,p,g,0,2),v=y.triangles}else if(x instanceof Pd&&i!=null){i.clipStart(d,x);continue}if(g&&v){i!=null&&i.isClipping()&&(i.clipTriangles(g,v,v.length),g=i.clippedVertices,p=i.clippedVertices.length);for(let y=0,b=g.length;y<b;y+=2){let _=g[y],S=g[y+1];o=Math.min(o,_),a=Math.min(a,S),u=Math.max(u,_),l=Math.max(l,S)}}i!=null&&i.clipEndWithSlot(d)}i!=null&&i.clipEnd(),e.set(o,a),t.set(u-o,l-a)}update(e){this.time+=e}physicsTranslate(e,t){const n=this.physicsConstraints;for(let i=0,s=n.length;i<s;i++)n[i].translate(e,t)}physicsRotate(e,t,n){const i=this.physicsConstraints;for(let s=0,o=i.length;s<o;s++)i[s].rotate(e,t,n)}};C(Pu,"quadTriangles",[0,1,2,2,3,0]),C(Pu,"yDown",!1);let uh=Pu;var so;(function(r){r[r.none=0]="none",r[r.reset=1]="reset",r[r.update=2]="update",r[r.pose=3]="pose"})(so||(so={}));class O3 extends Qg{constructor(t){super(t,0,!1);C(this,"_bone",null);C(this,"x",0);C(this,"y",0);C(this,"rotate",0);C(this,"scaleX",0);C(this,"shearX",0);C(this,"limit",0);C(this,"step",0);C(this,"inertia",0);C(this,"strength",0);C(this,"damping",0);C(this,"massInverse",0);C(this,"wind",0);C(this,"gravity",0);C(this,"mix",0);C(this,"inertiaGlobal",!1);C(this,"strengthGlobal",!1);C(this,"dampingGlobal",!1);C(this,"massGlobal",!1);C(this,"windGlobal",!1);C(this,"gravityGlobal",!1);C(this,"mixGlobal",!1)}set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}}class B3{constructor(){C(this,"name",null);C(this,"bones",new Array);C(this,"slots",new Array);C(this,"skins",new Array);C(this,"defaultSkin",null);C(this,"events",new Array);C(this,"animations",new Array);C(this,"ikConstraints",new Array);C(this,"transformConstraints",new Array);C(this,"pathConstraints",new Array);C(this,"physicsConstraints",new Array);C(this,"x",0);C(this,"y",0);C(this,"width",0);C(this,"height",0);C(this,"referenceScale",100);C(this,"version",null);C(this,"hash",null);C(this,"fps",0);C(this,"imagesPath",null);C(this,"audioPath",null)}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findSkin(e){if(!e)throw new Error("skinName cannot be null.");let t=this.skins;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findEvent(e){if(!e)throw new Error("eventDataName cannot be null.");let t=this.events;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findAnimation(e){if(!e)throw new Error("animationName cannot be null.");let t=this.animations;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.ikConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.transformConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.pathConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findPhysicsConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.physicsConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}}class NP{constructor(e=0,t,n){C(this,"slotIndex");C(this,"name");C(this,"attachment");this.slotIndex=e,this.name=t,this.attachment=n}}class c_{constructor(e){C(this,"name");C(this,"attachments",new Array);C(this,"bones",Array());C(this,"constraints",new Array);C(this,"color",new je(.99607843,.61960787,.30980393,1));if(!e)throw new Error("name cannot be null.");this.name=e}setAttachment(e,t,n){if(!n)throw new Error("attachment cannot be null.");let i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][t]=n}addSkin(e){for(let i=0;i<e.bones.length;i++){let s=e.bones[i],o=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){o=!0;break}o||this.bones.push(s)}for(let i=0;i<e.constraints.length;i++){let s=e.constraints[i],o=!1;for(let a=0;a<this.constraints.length;a++)if(this.constraints[a]==s){o=!0;break}o||this.constraints.push(s)}let t=e.getAttachments();for(let i=0;i<t.length;i++){var n=t[i];this.setAttachment(n.slotIndex,n.name,n.attachment)}}copySkin(e){for(let i=0;i<e.bones.length;i++){let s=e.bones[i],o=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){o=!0;break}o||this.bones.push(s)}for(let i=0;i<e.constraints.length;i++){let s=e.constraints[i],o=!1;for(let a=0;a<this.constraints.length;a++)if(this.constraints[a]==s){o=!0;break}o||this.constraints.push(s)}let t=e.getAttachments();for(let i=0;i<t.length;i++){var n=t[i];n.attachment&&(n.attachment instanceof vl?(n.attachment=n.attachment.newLinkedMesh(),this.setAttachment(n.slotIndex,n.name,n.attachment)):(n.attachment=n.attachment.copy(),this.setAttachment(n.slotIndex,n.name,n.attachment)))}}getAttachment(e,t){let n=this.attachments[e];return n?n[t]:null}removeAttachment(e,t){let n=this.attachments[e];n&&delete n[t]}getAttachments(){let e=new Array;for(var t=0;t<this.attachments.length;t++){let n=this.attachments[t];if(n)for(let i in n){let s=n[i];s&&e.push(new NP(t,i,s))}}return e}getAttachmentsForSlot(e,t){let n=this.attachments[e];if(n)for(let i in n){let s=n[i];s&&t.push(new NP(e,i,s))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,t){let n=0;for(let i=0;i<e.slots.length;i++){let s=e.slots[i],o=s.getAttachment();if(o&&n<t.attachments.length){let a=t.attachments[n];for(let u in a){let l=a[u];if(o==l){let c=this.getAttachment(n,u);c&&s.setAttachment(c);break}}}n++}}}class L3{constructor(e,t,n){C(this,"index",0);C(this,"name");C(this,"boneData");C(this,"color",new je(1,1,1,1));C(this,"darkColor",null);C(this,"attachmentName",null);C(this,"blendMode",sa.Normal);C(this,"visible",!0);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=e,this.name=t,this.boneData=n}}var sa;(function(r){r[r.Normal=0]="Normal",r[r.Additive=1]="Additive",r[r.Multiply=2]="Multiply",r[r.Screen=3]="Screen"})(sa||(sa={}));class N3 extends Qg{constructor(t){super(t,0,!1);C(this,"bones",new Array);C(this,"_target",null);C(this,"mixRotate",0);C(this,"mixX",0);C(this,"mixY",0);C(this,"mixScaleX",0);C(this,"mixScaleY",0);C(this,"mixShearY",0);C(this,"offsetRotation",0);C(this,"offsetX",0);C(this,"offsetY",0);C(this,"offsetScaleX",0);C(this,"offsetScaleY",0);C(this,"offsetShearY",0);C(this,"relative",!1);C(this,"local",!1)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class _9{constructor(e){C(this,"scale",1);C(this,"attachmentLoader");C(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,n=new B3;n.name="";let i=new w9(e),s=i.readInt32(),o=i.readInt32();n.hash=o==0&&s==0?null:o.toString(16)+s.toString(16),n.version=i.readString(),n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat(),n.referenceScale=i.readFloat()*t;let a=i.readBoolean();a&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());let u=0;u=i.readInt(!0);for(let c=0;c<u;c++){let h=i.readString();if(!h)throw new Error("String in string table must not be null.");i.strings.push(h)}u=i.readInt(!0);for(let c=0;c<u;c++){let h=i.readString();if(!h)throw new Error("Bone name must not be null.");let d=c==0?null:n.bones[i.readInt(!0)],p=new A3(c,h,d);p.rotation=i.readFloat(),p.x=i.readFloat()*t,p.y=i.readFloat()*t,p.scaleX=i.readFloat(),p.scaleY=i.readFloat(),p.shearX=i.readFloat(),p.shearY=i.readFloat(),p.length=i.readFloat()*t,p.inherit=i.readByte(),p.skinRequired=i.readBoolean(),a&&(je.rgba8888ToColor(p.color,i.readInt32()),p.icon=i.readString()??void 0,p.visible=i.readBoolean()),n.bones.push(p)}u=i.readInt(!0);for(let c=0;c<u;c++){let h=i.readString();if(!h)throw new Error("Slot name must not be null.");let d=n.bones[i.readInt(!0)],p=new L3(c,h,d);je.rgba8888ToColor(p.color,i.readInt32());let g=i.readInt32();g!=-1&&je.rgb888ToColor(p.darkColor=new je,g),p.attachmentName=i.readStringRef(),p.blendMode=i.readInt(!0),a&&(p.visible=i.readBoolean()),n.slots.push(p)}u=i.readInt(!0);for(let c=0,h;c<u;c++){let d=i.readString();if(!d)throw new Error("IK constraint data name must not be null.");let p=new M3(d);p.order=i.readInt(!0),h=i.readInt(!0);for(let v=0;v<h;v++)p.bones.push(n.bones[i.readInt(!0)]);p.target=n.bones[i.readInt(!0)];let g=i.readByte();p.skinRequired=(g&1)!=0,p.bendDirection=g&2?1:-1,p.compress=(g&4)!=0,p.stretch=(g&8)!=0,p.uniform=(g&16)!=0,g&32&&(p.mix=g&64?i.readFloat():1),g&128&&(p.softness=i.readFloat()*t),n.ikConstraints.push(p)}u=i.readInt(!0);for(let c=0,h;c<u;c++){let d=i.readString();if(!d)throw new Error("Transform constraint data name must not be null.");let p=new N3(d);p.order=i.readInt(!0),h=i.readInt(!0);for(let v=0;v<h;v++)p.bones.push(n.bones[i.readInt(!0)]);p.target=n.bones[i.readInt(!0)];let g=i.readByte();p.skinRequired=(g&1)!=0,p.local=(g&2)!=0,p.relative=(g&4)!=0,g&8&&(p.offsetRotation=i.readFloat()),g&16&&(p.offsetX=i.readFloat()*t),g&32&&(p.offsetY=i.readFloat()*t),g&64&&(p.offsetScaleX=i.readFloat()),g&128&&(p.offsetScaleY=i.readFloat()),g=i.readByte(),g&1&&(p.offsetShearY=i.readFloat()),g&2&&(p.mixRotate=i.readFloat()),g&4&&(p.mixX=i.readFloat()),g&8&&(p.mixY=i.readFloat()),g&16&&(p.mixScaleX=i.readFloat()),g&32&&(p.mixScaleY=i.readFloat()),g&64&&(p.mixShearY=i.readFloat()),n.transformConstraints.push(p)}u=i.readInt(!0);for(let c=0,h;c<u;c++){let d=i.readString();if(!d)throw new Error("Path constraint data name must not be null.");let p=new R3(d);p.order=i.readInt(!0),p.skinRequired=i.readBoolean(),h=i.readInt(!0);for(let v=0;v<h;v++)p.bones.push(n.bones[i.readInt(!0)]);p.target=n.slots[i.readInt(!0)];const g=i.readByte();p.positionMode=g&1,p.spacingMode=g>>1&3,p.rotateMode=g>>3&3,g&128&&(p.offsetRotation=i.readFloat()),p.position=i.readFloat(),p.positionMode==Ms.Fixed&&(p.position*=t),p.spacing=i.readFloat(),(p.spacingMode==cr.Length||p.spacingMode==cr.Fixed)&&(p.spacing*=t),p.mixRotate=i.readFloat(),p.mixX=i.readFloat(),p.mixY=i.readFloat(),n.pathConstraints.push(p)}u=i.readInt(!0);for(let c=0,h;c<u;c++){const d=i.readString();if(!d)throw new Error("Physics constraint data name must not be null.");const p=new O3(d);p.order=i.readInt(!0),p.bone=n.bones[i.readInt(!0)];let g=i.readByte();p.skinRequired=(g&1)!=0,g&2&&(p.x=i.readFloat()),g&4&&(p.y=i.readFloat()),g&8&&(p.rotate=i.readFloat()),g&16&&(p.scaleX=i.readFloat()),g&32&&(p.shearX=i.readFloat()),p.limit=(g&64?i.readFloat():5e3)*t,p.step=1/i.readUnsignedByte(),p.inertia=i.readFloat(),p.strength=i.readFloat(),p.damping=i.readFloat(),p.massInverse=g&128?i.readFloat():1,p.wind=i.readFloat(),p.gravity=i.readFloat(),g=i.readByte(),g&1&&(p.inertiaGlobal=!0),g&2&&(p.strengthGlobal=!0),g&4&&(p.dampingGlobal=!0),g&8&&(p.massGlobal=!0),g&16&&(p.windGlobal=!0),g&32&&(p.gravityGlobal=!0),g&64&&(p.mixGlobal=!0),p.mix=g&128?i.readFloat():1,n.physicsConstraints.push(p)}let l=this.readSkin(i,n,!0,a);l&&(n.defaultSkin=l,n.skins.push(l));{let c=n.skins.length;for(pe.setArraySize(n.skins,u=c+i.readInt(!0));c<u;c++){let h=this.readSkin(i,n,!1,a);if(!h)throw new Error("readSkin() should not have returned null.");n.skins[c]=h}}u=this.linkedMeshes.length;for(let c=0;c<u;c++){let h=this.linkedMeshes[c];const d=n.skins[h.skinIndex];if(!h.parent)throw new Error("Linked mesh parent must not be null");let p=d.getAttachment(h.slotIndex,h.parent);if(!p)throw new Error(`Parent mesh not found: ${h.parent}`);h.mesh.timelineAttachment=h.inheritTimeline?p:h.mesh,h.mesh.setParentMesh(p),h.mesh.region!=null&&h.mesh.updateRegion()}this.linkedMeshes.length=0,u=i.readInt(!0);for(let c=0;c<u;c++){let h=i.readString();if(!h)throw new Error("Event data name must not be null");let d=new I3(h);d.intValue=i.readInt(!1),d.floatValue=i.readFloat(),d.stringValue=i.readString(),d.audioPath=i.readString(),d.audioPath&&(d.volume=i.readFloat(),d.balance=i.readFloat()),n.events.push(d)}u=i.readInt(!0);for(let c=0;c<u;c++){let h=i.readString();if(!h)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(i,h,n))}return n}readSkin(e,t,n,i){let s=null,o=0;if(n){if(o=e.readInt(!0),o==0)return null;s=new c_("default")}else{let a=e.readString();if(!a)throw new Error("Skin name must not be null.");s=new c_(a),i&&je.rgba8888ToColor(s.color,e.readInt32()),s.bones.length=e.readInt(!0);for(let u=0,l=s.bones.length;u<l;u++)s.bones[u]=t.bones[e.readInt(!0)];for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.ikConstraints[e.readInt(!0)]);for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.transformConstraints[e.readInt(!0)]);for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.pathConstraints[e.readInt(!0)]);for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.physicsConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(let a=0;a<o;a++){let u=e.readInt(!0);for(let l=0,c=e.readInt(!0);l<c;l++){let h=e.readStringRef();if(!h)throw new Error("Attachment name must not be null");let d=this.readAttachment(e,t,s,u,h,i);d&&s.setAttachment(u,h,d)}}return s}readAttachment(e,t,n,i,s,o){let a=this.scale,u=e.readByte();const l=u&8?e.readStringRef():s;if(!l)throw new Error("Attachment name must not be null");switch(u&7){case Ks.Region:{let c=u&16?e.readStringRef():null;const h=u&32?e.readInt32():4294967295,d=u&64?this.readSequence(e):null;let p=u&128?e.readFloat():0,g=e.readFloat(),v=e.readFloat(),x=e.readFloat(),y=e.readFloat(),b=e.readFloat(),_=e.readFloat();c||(c=l);let S=this.attachmentLoader.newRegionAttachment(n,l,c,d);return S?(S.path=c,S.x=g*a,S.y=v*a,S.scaleX=x,S.scaleY=y,S.rotation=p,S.width=b*a,S.height=_*a,je.rgba8888ToColor(S.color,h),S.sequence=d,d==null&&S.updateRegion(),S):null}case Ks.BoundingBox:{let c=this.readVertices(e,(u&16)!=0),h=o?e.readInt32():0,d=this.attachmentLoader.newBoundingBoxAttachment(n,l);return d?(d.worldVerticesLength=c.length,d.vertices=c.vertices,d.bones=c.bones,o&&je.rgba8888ToColor(d.color,h),d):null}case Ks.Mesh:{let c=u&16?e.readStringRef():l;const h=u&32?e.readInt32():4294967295,d=u&64?this.readSequence(e):null,p=e.readInt(!0),g=this.readVertices(e,(u&128)!=0),v=this.readFloatArray(e,g.length,1),x=this.readShortArray(e,(g.length-p-2)*3);let y=[],b=0,_=0;o&&(y=this.readShortArray(e,e.readInt(!0)),b=e.readFloat(),_=e.readFloat()),c||(c=l);let S=this.attachmentLoader.newMeshAttachment(n,l,c,d);return S?(S.path=c,je.rgba8888ToColor(S.color,h),S.bones=g.bones,S.vertices=g.vertices,S.worldVerticesLength=g.length,S.triangles=x,S.regionUVs=v,d==null&&S.updateRegion(),S.hullLength=p<<1,S.sequence=d,o&&(S.edges=y,S.width=b*a,S.height=_*a),S):null}case Ks.LinkedMesh:{const c=u&16?e.readStringRef():l;if(c==null)throw new Error("Path of linked mesh must not be null");const h=u&32?e.readInt32():4294967295,d=u&64?this.readSequence(e):null,p=(u&128)!=0,g=e.readInt(!0),v=e.readStringRef();let x=0,y=0;o&&(x=e.readFloat(),y=e.readFloat());let b=this.attachmentLoader.newMeshAttachment(n,l,c,d);return b?(b.path=c,je.rgba8888ToColor(b.color,h),b.sequence=d,o&&(b.width=x*a,b.height=y*a),this.linkedMeshes.push(new b9(b,g,i,v,p)),b):null}case Ks.Path:{const c=(u&16)!=0,h=(u&32)!=0,d=this.readVertices(e,(u&64)!=0),p=pe.newArray(d.length/6,0);for(let x=0,y=p.length;x<y;x++)p[x]=e.readFloat()*a;const g=o?e.readInt32():0,v=this.attachmentLoader.newPathAttachment(n,l);return v?(v.closed=c,v.constantSpeed=h,v.worldVerticesLength=d.length,v.vertices=d.vertices,v.bones=d.bones,v.lengths=p,o&&je.rgba8888ToColor(v.color,g),v):null}case Ks.Point:{const c=e.readFloat(),h=e.readFloat(),d=e.readFloat(),p=o?e.readInt32():0,g=this.attachmentLoader.newPointAttachment(n,l);return g?(g.x=h*a,g.y=d*a,g.rotation=c,o&&je.rgba8888ToColor(g.color,p),g):null}case Ks.Clipping:{const c=e.readInt(!0),h=this.readVertices(e,(u&16)!=0);let d=o?e.readInt32():0,p=this.attachmentLoader.newClippingAttachment(n,l);return p?(p.endSlot=t.slots[c],p.worldVerticesLength=h.length,p.vertices=h.vertices,p.bones=h.bones,o&&je.rgba8888ToColor(p.color,d),p):null}}return null}readSequence(e){let t=new Jm(e.readInt(!0));return t.start=e.readInt(!0),t.digits=e.readInt(!0),t.setupIndex=e.readInt(!0),t}readVertices(e,t){const n=this.scale,i=e.readInt(!0),s=new S9;if(s.length=i<<1,!t)return s.vertices=this.readFloatArray(e,s.length,n),s;let o=new Array,a=new Array;for(let u=0;u<i;u++){let l=e.readInt(!0);a.push(l);for(let c=0;c<l;c++)a.push(e.readInt(!0)),o.push(e.readFloat()*n),o.push(e.readFloat()*n),o.push(e.readFloat())}return s.vertices=pe.toFloatArray(o),s.bones=a,s}readFloatArray(e,t,n){let i=new Array(t);if(n==1)for(let s=0;s<t;s++)i[s]=e.readFloat();else for(let s=0;s<t;s++)i[s]=e.readFloat()*n;return i}readShortArray(e,t){let n=new Array(t);for(let i=0;i<t;i++)n[i]=e.readInt(!0);return n}readAnimation(e,t,n){e.readInt(!0);let i=new Array,s=this.scale;for(let l=0,c=e.readInt(!0);l<c;l++){let h=e.readInt(!0);for(let d=0,p=e.readInt(!0);d<p;d++){let g=e.readByte(),v=e.readInt(!0),x=v-1;switch(g){case L9:{let y=new bu(v,h);for(let b=0;b<v;b++)y.setFrame(b,e.readFloat(),e.readStringRef());i.push(y);break}case N9:{let y=e.readInt(!0),b=new u3(v,y,h),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255;for(let M=0,O=0;b.setFrame(M,_,S,I,A,k),M!=x;M++){let F=e.readFloat(),U=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255,B=e.readUnsignedByte()/255,N=e.readUnsignedByte()/255;switch(e.readByte()){case gs:b.setStepped(M);break;case vs:Qe(e,b,O++,M,0,_,F,S,U,1),Qe(e,b,O++,M,1,_,F,I,X,1),Qe(e,b,O++,M,2,_,F,A,B,1),Qe(e,b,O++,M,3,_,F,k,N,1)}_=F,S=U,I=X,A=B,k=N}i.push(b);break}case F9:{let y=e.readInt(!0),b=new h3(v,y,h),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255;for(let k=0,M=0;b.setFrame(k,_,S,I,A),k!=x;k++){let O=e.readFloat(),F=e.readUnsignedByte()/255,U=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255;switch(e.readByte()){case gs:b.setStepped(k);break;case vs:Qe(e,b,M++,k,0,_,O,S,F,1),Qe(e,b,M++,k,1,_,O,I,U,1),Qe(e,b,M++,k,2,_,O,A,X,1)}_=O,S=F,I=U,A=X}i.push(b);break}case D9:{let y=e.readInt(!0),b=new d3(v,y,h),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255;for(let U=0,X=0;b.setFrame(U,_,S,I,A,k,M,O,F),U!=x;U++){let B=e.readFloat(),N=e.readUnsignedByte()/255,j=e.readUnsignedByte()/255,W=e.readUnsignedByte()/255,Q=e.readUnsignedByte()/255,H=e.readUnsignedByte()/255,G=e.readUnsignedByte()/255,z=e.readUnsignedByte()/255;switch(e.readByte()){case gs:b.setStepped(U);break;case vs:Qe(e,b,X++,U,0,_,B,S,N,1),Qe(e,b,X++,U,1,_,B,I,j,1),Qe(e,b,X++,U,2,_,B,A,W,1),Qe(e,b,X++,U,3,_,B,k,Q,1),Qe(e,b,X++,U,4,_,B,M,H,1),Qe(e,b,X++,U,5,_,B,O,G,1),Qe(e,b,X++,U,6,_,B,F,z,1)}_=B,S=N,I=j,A=W,k=Q,M=H,O=G,F=z}i.push(b);break}case U9:{let y=e.readInt(!0),b=new f3(v,y,h),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255;for(let F=0,U=0;b.setFrame(F,_,S,I,A,k,M,O),F!=x;F++){let X=e.readFloat(),B=e.readUnsignedByte()/255,N=e.readUnsignedByte()/255,j=e.readUnsignedByte()/255,W=e.readUnsignedByte()/255,Q=e.readUnsignedByte()/255,H=e.readUnsignedByte()/255;switch(e.readByte()){case gs:b.setStepped(F);break;case vs:Qe(e,b,U++,F,0,_,X,S,B,1),Qe(e,b,U++,F,1,_,X,I,N,1),Qe(e,b,U++,F,2,_,X,A,j,1),Qe(e,b,U++,F,3,_,X,k,W,1),Qe(e,b,U++,F,4,_,X,M,Q,1),Qe(e,b,U++,F,5,_,X,O,H,1)}_=X,S=B,I=N,A=j,k=W,M=Q,O=H}i.push(b);break}case j9:{let y=new c3(v,e.readInt(!0),h),b=e.readFloat(),_=e.readUnsignedByte()/255;for(let S=0,I=0;y.setFrame(S,b,_),S!=x;S++){let A=e.readFloat(),k=e.readUnsignedByte()/255;switch(e.readByte()){case gs:y.setStepped(S);break;case vs:Qe(e,y,I++,S,0,b,A,_,k,1)}b=A,_=k}i.push(y)}}}}for(let l=0,c=e.readInt(!0);l<c;l++){let h=e.readInt(!0);for(let d=0,p=e.readInt(!0);d<p;d++){let g=e.readByte(),v=e.readInt(!0);if(g==B9){let y=new l3(v,h);for(let b=0;b<v;b++)y.setFrame(b,e.readFloat(),e.readByte());i.push(y);continue}let x=e.readInt(!0);switch(g){case T9:i.push(Hr(e,new eg(v,x,h),1));break;case E9:i.push(jy(e,new JR(v,x,h),s));break;case C9:i.push(Hr(e,new e3(v,x,h),s));break;case P9:i.push(Hr(e,new t3(v,x,h),s));break;case A9:i.push(jy(e,new r3(v,x,h),1));break;case k9:i.push(Hr(e,new n3(v,x,h),1));break;case I9:i.push(Hr(e,new i3(v,x,h),1));break;case M9:i.push(jy(e,new s3(v,x,h),1));break;case R9:i.push(Hr(e,new o3(v,x,h),1));break;case O9:i.push(Hr(e,new a3(v,x,h),1))}}}for(let l=0,c=e.readInt(!0);l<c;l++){let h=e.readInt(!0),d=e.readInt(!0),p=d-1,g=new m3(d,e.readInt(!0),h),v=e.readByte(),x=e.readFloat(),y=v&1?v&2?e.readFloat():1:0,b=v&4?e.readFloat()*s:0;for(let _=0,S=0;g.setFrame(_,x,y,b,v&8?1:-1,(v&16)!=0,(v&32)!=0),_!=p;_++){v=e.readByte();const I=e.readFloat(),A=v&1?v&2?e.readFloat():1:0,k=v&4?e.readFloat()*s:0;v&64?g.setStepped(_):v&128&&(Qe(e,g,S++,_,0,x,I,y,A,1),Qe(e,g,S++,_,1,x,I,b,k,s)),x=I,y=A,b=k}i.push(g)}for(let l=0,c=e.readInt(!0);l<c;l++){let h=e.readInt(!0),d=e.readInt(!0),p=d-1,g=new g3(d,e.readInt(!0),h),v=e.readFloat(),x=e.readFloat(),y=e.readFloat(),b=e.readFloat(),_=e.readFloat(),S=e.readFloat(),I=e.readFloat();for(let A=0,k=0;g.setFrame(A,v,x,y,b,_,S,I),A!=p;A++){let M=e.readFloat(),O=e.readFloat(),F=e.readFloat(),U=e.readFloat(),X=e.readFloat(),B=e.readFloat(),N=e.readFloat();switch(e.readByte()){case gs:g.setStepped(A);break;case vs:Qe(e,g,k++,A,0,v,M,x,O,1),Qe(e,g,k++,A,1,v,M,y,F,1),Qe(e,g,k++,A,2,v,M,b,U,1),Qe(e,g,k++,A,3,v,M,_,X,1),Qe(e,g,k++,A,4,v,M,S,B,1),Qe(e,g,k++,A,5,v,M,I,N,1)}v=M,x=O,y=F,b=U,_=X,S=B,I=N}i.push(g)}for(let l=0,c=e.readInt(!0);l<c;l++){let h=e.readInt(!0),d=n.pathConstraints[h];for(let p=0,g=e.readInt(!0);p<g;p++){const v=e.readByte(),x=e.readInt(!0),y=e.readInt(!0);switch(v){case z9:i.push(Hr(e,new v3(x,y,h),d.positionMode==Ms.Fixed?s:1));break;case $9:i.push(Hr(e,new y3(x,y,h),d.spacingMode==cr.Length||d.spacingMode==cr.Fixed?s:1));break;case Y9:let b=new x3(x,y,h),_=e.readFloat(),S=e.readFloat(),I=e.readFloat(),A=e.readFloat();for(let k=0,M=0,O=b.getFrameCount()-1;b.setFrame(k,_,S,I,A),k!=O;k++){let F=e.readFloat(),U=e.readFloat(),X=e.readFloat(),B=e.readFloat();switch(e.readByte()){case gs:b.setStepped(k);break;case vs:Qe(e,b,M++,k,0,_,F,S,U,1),Qe(e,b,M++,k,1,_,F,I,X,1),Qe(e,b,M++,k,2,_,F,A,B,1)}_=F,S=U,I=X,A=B}i.push(b)}}}for(let l=0,c=e.readInt(!0);l<c;l++){const h=e.readInt(!0)-1;for(let d=0,p=e.readInt(!0);d<p;d++){const g=e.readByte(),v=e.readInt(!0);if(g==J9){const y=new tg(v,h);for(let b=0;b<v;b++)y.setFrame(b,e.readFloat());i.push(y);continue}const x=e.readInt(!0);switch(g){case G9:i.push(Hr(e,new _3(v,x,h),1));break;case W9:i.push(Hr(e,new w3(v,x,h),1));break;case V9:i.push(Hr(e,new b3(v,x,h),1));break;case q9:i.push(Hr(e,new S3(v,x,h),1));break;case K9:i.push(Hr(e,new T3(v,x,h),1));break;case Q9:i.push(Hr(e,new E3(v,x,h),1));break;case Z9:i.push(Hr(e,new C3(v,x,h),1))}}}for(let l=0,c=e.readInt(!0);l<c;l++){let h=n.skins[e.readInt(!0)];for(let d=0,p=e.readInt(!0);d<p;d++){let g=e.readInt(!0);for(let v=0,x=e.readInt(!0);v<x;v++){let y=e.readStringRef();if(!y)throw new Error("attachmentName must not be null.");let b=h.getAttachment(g,y),_=e.readByte(),S=e.readInt(!0),I=S-1;switch(_){case X9:{let A=b,k=A.bones,M=A.vertices,O=k?M.length/3*2:M.length,F=e.readInt(!0),U=new p3(S,F,g,A),X=e.readFloat();for(let B=0,N=0;;B++){let j,W=e.readInt(!0);if(W==0)j=k?pe.newFloatArray(O):M;else{j=pe.newFloatArray(O);let H=e.readInt(!0);if(W+=H,s==1)for(let G=H;G<W;G++)j[G]=e.readFloat();else for(let G=H;G<W;G++)j[G]=e.readFloat()*s;if(!k)for(let G=0,z=j.length;G<z;G++)j[G]+=M[G]}if(U.setFrame(B,X,j),B==I)break;let Q=e.readFloat();switch(e.readByte()){case gs:U.setStepped(B);break;case vs:Qe(e,U,N++,B,0,X,Q,0,1,1)}X=Q}i.push(U);break}case H9:{let A=new rg(S,g,b);for(let k=0;k<S;k++){let M=e.readFloat(),O=e.readInt32();A.setFrame(k,M,ZR[O&15],O>>4,e.readFloat())}i.push(A);break}}}}}let o=e.readInt(!0);if(o>0){let l=new sl(o),c=n.slots.length;for(let h=0;h<o;h++){let d=e.readFloat(),p=e.readInt(!0),g=pe.newArray(c,0);for(let b=c-1;b>=0;b--)g[b]=-1;let v=pe.newArray(c-p,0),x=0,y=0;for(let b=0;b<p;b++){let _=e.readInt(!0);for(;x!=_;)v[y++]=x++;g[x+e.readInt(!0)]=x++}for(;x<c;)v[y++]=x++;for(let b=c-1;b>=0;b--)g[b]==-1&&(g[b]=v[--y]);l.setFrame(h,d,g)}i.push(l)}let a=e.readInt(!0);if(a>0){let l=new ud(a);for(let c=0;c<a;c++){let h=e.readFloat(),d=n.events[e.readInt(!0)],p=new k3(h,d);p.intValue=e.readInt(!1),p.floatValue=e.readFloat(),p.stringValue=e.readString(),p.stringValue==null&&(p.stringValue=d.stringValue),p.data.audioPath&&(p.volume=e.readFloat(),p.balance=e.readFloat()),l.setFrame(c,p)}i.push(l)}let u=0;for(let l=0,c=i.length;l<c;l++)u=Math.max(u,i[l].getDuration());return new Yw(t,i,u)}}class w9{constructor(e,t=new Array,n=0,i=new DataView(e instanceof ArrayBuffer?e:e.buffer)){C(this,"strings");C(this,"index");C(this,"buffer");this.strings=t,this.index=n,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){let e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let t=this.readByte(),n=t&127;return t&128&&(t=this.readByte(),n|=(t&127)<<7,t&128&&(t=this.readByte(),n|=(t&127)<<14,t&128&&(t=this.readByte(),n|=(t&127)<<21,t&128&&(t=this.readByte(),n|=(t&127)<<28)))),e?n:n>>>1^-(n&1)}readStringRef(){let e=this.readInt(!0);return e==0?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let t="";for(let n=0;n<e;){let i=this.readUnsignedByte();switch(i>>4){case 12:case 13:t+=String.fromCharCode((i&31)<<6|this.readByte()&63),n+=2;break;case 14:t+=String.fromCharCode((i&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:t+=String.fromCharCode(i),n++}}return t}readFloat(){let e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return this.readByte()!=0}}let b9=class{constructor(e,t,n,i,s){C(this,"parent");C(this,"skinIndex");C(this,"slotIndex");C(this,"mesh");C(this,"inheritTimeline");this.mesh=e,this.skinIndex=t,this.slotIndex=n,this.parent=i,this.inheritTimeline=s}};class S9{constructor(e=null,t=null,n=0){C(this,"bones");C(this,"vertices");C(this,"length");this.bones=e,this.vertices=t,this.length=n}}var Ks;(function(r){r[r.Region=0]="Region",r[r.BoundingBox=1]="BoundingBox",r[r.Mesh=2]="Mesh",r[r.LinkedMesh=3]="LinkedMesh",r[r.Path=4]="Path",r[r.Point=5]="Point",r[r.Clipping=6]="Clipping"})(Ks||(Ks={}));function Hr(r,e,t){let n=r.readFloat(),i=r.readFloat()*t;for(let s=0,o=0,a=e.getFrameCount()-1;e.setFrame(s,n,i),s!=a;s++){let u=r.readFloat(),l=r.readFloat()*t;switch(r.readByte()){case gs:e.setStepped(s);break;case vs:Qe(r,e,o++,s,0,n,u,i,l,t)}n=u,i=l}return e}function jy(r,e,t){let n=r.readFloat(),i=r.readFloat()*t,s=r.readFloat()*t;for(let o=0,a=0,u=e.getFrameCount()-1;e.setFrame(o,n,i,s),o!=u;o++){let l=r.readFloat(),c=r.readFloat()*t,h=r.readFloat()*t;switch(r.readByte()){case gs:e.setStepped(o);break;case vs:Qe(r,e,a++,o,0,n,l,i,c,t),Qe(r,e,a++,o,1,n,l,s,h,t)}n=l,i=c,s=h}return e}function Qe(r,e,t,n,i,s,o,a,u,l){e.setBezier(t,n,i,s,a,r.readFloat(),r.readFloat()*l,r.readFloat(),r.readFloat()*l,o,u)}const T9=0,E9=1,C9=2,P9=3,A9=4,k9=5,I9=6,M9=7,R9=8,O9=9,B9=10,L9=0,N9=1,F9=2,D9=3,U9=4,j9=5,X9=0,H9=1,z9=0,$9=1,Y9=2,G9=0,W9=1,V9=2,q9=4,K9=5,Q9=6,Z9=7,J9=8,gs=1,vs=2;class hn{constructor(){C(this,"convexPolygons",new Array);C(this,"convexPolygonsIndices",new Array);C(this,"indicesArray",new Array);C(this,"isConcaveArray",new Array);C(this,"triangles",new Array);C(this,"polygonPool",new l_(()=>new Array));C(this,"polygonIndicesPool",new l_(()=>new Array))}triangulate(e){let t=e,n=e.length>>1,i=this.indicesArray;i.length=0;for(let a=0;a<n;a++)i[a]=a;let s=this.isConcaveArray;s.length=0;for(let a=0,u=n;a<u;++a)s[a]=hn.isConcave(a,n,t,i);let o=this.triangles;for(o.length=0;n>3;){let a=n-1,u=0,l=1;for(;;){e:if(!s[u]){let d=i[a]<<1,p=i[u]<<1,g=i[l]<<1,v=t[d],x=t[d+1],y=t[p],b=t[p+1],_=t[g],S=t[g+1];for(let I=(l+1)%n;I!=a;I=(I+1)%n){if(!s[I])continue;let A=i[I]<<1,k=t[A],M=t[A+1];if(hn.positiveArea(_,S,v,x,k,M)&&hn.positiveArea(v,x,y,b,k,M)&&hn.positiveArea(y,b,_,S,k,M))break e}break}if(l==0){do{if(!s[u])break;u--}while(u>0);break}a=u,u=l,l=(l+1)%n}o.push(i[(n+u-1)%n]),o.push(i[u]),o.push(i[(u+1)%n]),i.splice(u,1),s.splice(u,1),n--;let c=(n+u-1)%n,h=u==n?0:u;s[c]=hn.isConcave(c,n,t,i),s[h]=hn.isConcave(h,n,t,i)}return n==3&&(o.push(i[2]),o.push(i[0]),o.push(i[1])),o}decompose(e,t){let n=e,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;let s=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(s),s.length=0;let o=this.polygonIndicesPool.obtain();o.length=0;let a=this.polygonPool.obtain();a.length=0;let u=-1,l=0;for(let c=0,h=t.length;c<h;c+=3){let d=t[c]<<1,p=t[c+1]<<1,g=t[c+2]<<1,v=n[d],x=n[d+1],y=n[p],b=n[p+1],_=n[g],S=n[g+1],I=!1;if(u==d){let A=a.length-4,k=hn.winding(a[A],a[A+1],a[A+2],a[A+3],_,S),M=hn.winding(_,S,a[0],a[1],a[2],a[3]);k==l&&M==l&&(a.push(_),a.push(S),o.push(g),I=!0)}I||(a.length>0?(i.push(a),s.push(o)):(this.polygonPool.free(a),this.polygonIndicesPool.free(o)),a=this.polygonPool.obtain(),a.length=0,a.push(v),a.push(x),a.push(y),a.push(b),a.push(_),a.push(S),o=this.polygonIndicesPool.obtain(),o.length=0,o.push(d),o.push(p),o.push(g),l=hn.winding(v,x,y,b,_,S),u=d)}a.length>0&&(i.push(a),s.push(o));for(let c=0,h=i.length;c<h;c++){if(o=s[c],o.length==0)continue;let d=o[0],p=o[o.length-1];a=i[c];let g=a.length-4,v=a[g],x=a[g+1],y=a[g+2],b=a[g+3],_=a[0],S=a[1],I=a[2],A=a[3],k=hn.winding(v,x,y,b,_,S);for(let M=0;M<h;M++){if(M==c)continue;let O=s[M];if(O.length!=3)continue;let F=O[0],U=O[1],X=O[2],B=i[M],N=B[B.length-2],j=B[B.length-1];if(F!=d||U!=p)continue;let W=hn.winding(v,x,y,b,N,j),Q=hn.winding(N,j,_,S,I,A);W==k&&Q==k&&(B.length=0,O.length=0,a.push(N),a.push(j),o.push(X),v=y,x=b,y=N,b=j,M=0)}}for(let c=i.length-1;c>=0;c--)a=i[c],a.length==0&&(i.splice(c,1),this.polygonPool.free(a),o=s[c],s.splice(c,1),this.polygonIndicesPool.free(o));return i}static isConcave(e,t,n,i){let s=i[(t+e-1)%t]<<1,o=i[e]<<1,a=i[(e+1)%t]<<1;return!this.positiveArea(n[s],n[s+1],n[o],n[o+1],n[a],n[a+1])}static positiveArea(e,t,n,i,s,o){return e*(o-i)+n*(t-o)+s*(i-t)>=0}static winding(e,t,n,i,s,o){let a=n-e,u=i-t;return s*u-o*a+a*t-e*u>=0?1:-1}}class ng{constructor(){C(this,"triangulator",new hn);C(this,"clippingPolygon",new Array);C(this,"clipOutput",new Array);C(this,"clippedVertices",new Array);C(this,"clippedUVs",new Array);C(this,"clippedTriangles",new Array);C(this,"scratch",new Array);C(this,"clipAttachment",null);C(this,"clippingPolygons",null)}clipStart(e,t){if(this.clipAttachment)return 0;this.clipAttachment=t;let n=t.worldVerticesLength,i=pe.setArraySize(this.clippingPolygon,n);t.computeWorldVertices(e,0,n,i,0,2);let s=this.clippingPolygon;ng.makeClockwise(s);let o=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s));for(let a=0,u=o.length;a<u;a++){let l=o[a];ng.makeClockwise(l),l.push(l[0]),l.push(l[1])}return o.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(e,t,n,i,s,o,a){i&&s&&o&&typeof a=="boolean"?this.clipTrianglesRender(e,t,n,i,s,o,a):this.clipTrianglesNoRender(e,t,n)}clipTrianglesNoRender(e,t,n){let i=this.clipOutput,s=this.clippedVertices,o=this.clippedTriangles,a=this.clippingPolygons,u=a.length,l=0;s.length=0,o.length=0;for(let c=0;c<n;c+=3){let h=t[c]<<1,d=e[h],p=e[h+1];h=t[c+1]<<1;let g=e[h],v=e[h+1];h=t[c+2]<<1;let x=e[h],y=e[h+1];for(let b=0;b<u;b++){let _=s.length;if(this.clip(d,p,g,v,x,y,a[b],i)){let S=i.length;if(S==0)continue;let I=S>>1,A=this.clipOutput,k=pe.setArraySize(s,_+I*2);for(let O=0;O<S;O+=2,_+=2){let F=A[O],U=A[O+1];k[_]=F,k[_+1]=U}_=o.length;let M=pe.setArraySize(o,_+3*(I-2));I--;for(let O=1;O<I;O++,_+=3)M[_]=l,M[_+1]=l+O,M[_+2]=l+O+1;l+=I+1}else{let S=pe.setArraySize(s,_+6);S[_]=d,S[_+1]=p,S[_+2]=g,S[_+3]=v,S[_+4]=x,S[_+5]=y,_=o.length;let I=pe.setArraySize(o,_+3);I[_]=l,I[_+1]=l+1,I[_+2]=l+2,l+=3;break}}}}clipTrianglesRender(e,t,n,i,s,o,a){let u=this.clipOutput,l=this.clippedVertices,c=this.clippedTriangles,h=this.clippingPolygons,d=h.length,p=a?12:8,g=0;l.length=0,c.length=0;for(let v=0;v<n;v+=3){let x=t[v]<<1,y=e[x],b=e[x+1],_=i[x],S=i[x+1];x=t[v+1]<<1;let I=e[x],A=e[x+1],k=i[x],M=i[x+1];x=t[v+2]<<1;let O=e[x],F=e[x+1],U=i[x],X=i[x+1];for(let B=0;B<d;B++){let N=l.length;if(this.clip(y,b,I,A,O,F,h[B],u)){let j=u.length;if(j==0)continue;let W=A-F,Q=O-I,H=y-O,G=F-b,z=1/(W*H+Q*(b-F)),V=j>>1,Z=this.clipOutput,re=pe.setArraySize(l,N+V*p);for(let ve=0;ve<j;ve+=2,N+=p){let Me=Z[ve],Ne=Z[ve+1];re[N]=Me,re[N+1]=Ne,re[N+2]=s.r,re[N+3]=s.g,re[N+4]=s.b,re[N+5]=s.a;let ze=Me-O,We=Ne-F,He=(W*ze+Q*We)*z,Fe=(G*ze+H*We)*z,ut=1-He-Fe;re[N+6]=_*He+k*Fe+U*ut,re[N+7]=S*He+M*Fe+X*ut,a&&(re[N+8]=o.r,re[N+9]=o.g,re[N+10]=o.b,re[N+11]=o.a)}N=c.length;let he=pe.setArraySize(c,N+3*(V-2));V--;for(let ve=1;ve<V;ve++,N+=3)he[N]=g,he[N+1]=g+ve,he[N+2]=g+ve+1;g+=V+1}else{let j=pe.setArraySize(l,N+3*p);j[N]=y,j[N+1]=b,j[N+2]=s.r,j[N+3]=s.g,j[N+4]=s.b,j[N+5]=s.a,a?(j[N+6]=_,j[N+7]=S,j[N+8]=o.r,j[N+9]=o.g,j[N+10]=o.b,j[N+11]=o.a,j[N+12]=I,j[N+13]=A,j[N+14]=s.r,j[N+15]=s.g,j[N+16]=s.b,j[N+17]=s.a,j[N+18]=k,j[N+19]=M,j[N+20]=o.r,j[N+21]=o.g,j[N+22]=o.b,j[N+23]=o.a,j[N+24]=O,j[N+25]=F,j[N+26]=s.r,j[N+27]=s.g,j[N+28]=s.b,j[N+29]=s.a,j[N+30]=U,j[N+31]=X,j[N+32]=o.r,j[N+33]=o.g,j[N+34]=o.b,j[N+35]=o.a):(j[N+6]=_,j[N+7]=S,j[N+8]=I,j[N+9]=A,j[N+10]=s.r,j[N+11]=s.g,j[N+12]=s.b,j[N+13]=s.a,j[N+14]=k,j[N+15]=M,j[N+16]=O,j[N+17]=F,j[N+18]=s.r,j[N+19]=s.g,j[N+20]=s.b,j[N+21]=s.a,j[N+22]=U,j[N+23]=X),N=c.length;let W=pe.setArraySize(c,N+3);W[N]=g,W[N+1]=g+1,W[N+2]=g+2,g+=3;break}}}}clipTrianglesUnpacked(e,t,n,i){let s=this.clipOutput,o=this.clippedVertices,a=this.clippedUVs,u=this.clippedTriangles,l=this.clippingPolygons,c=l.length,h=0;o.length=0,a.length=0,u.length=0;for(let d=0;d<n;d+=3){let p=t[d]<<1,g=e[p],v=e[p+1],x=i[p],y=i[p+1];p=t[d+1]<<1;let b=e[p],_=e[p+1],S=i[p],I=i[p+1];p=t[d+2]<<1;let A=e[p],k=e[p+1],M=i[p],O=i[p+1];for(let F=0;F<c;F++){let U=o.length;if(this.clip(g,v,b,_,A,k,l[F],s)){let X=s.length;if(X==0)continue;let B=_-k,N=A-b,j=g-A,W=k-v,Q=1/(B*j+N*(v-k)),H=X>>1,G=this.clipOutput,z=pe.setArraySize(o,U+H*2),V=pe.setArraySize(a,U+H*2);for(let re=0;re<X;re+=2,U+=2){let he=G[re],ve=G[re+1];z[U]=he,z[U+1]=ve;let Me=he-A,Ne=ve-k,ze=(B*Me+N*Ne)*Q,We=(W*Me+j*Ne)*Q,He=1-ze-We;V[U]=x*ze+S*We+M*He,V[U+1]=y*ze+I*We+O*He}U=u.length;let Z=pe.setArraySize(u,U+3*(H-2));H--;for(let re=1;re<H;re++,U+=3)Z[U]=h,Z[U+1]=h+re,Z[U+2]=h+re+1;h+=H+1}else{let X=pe.setArraySize(o,U+6);X[U]=g,X[U+1]=v,X[U+2]=b,X[U+3]=_,X[U+4]=A,X[U+5]=k;let B=pe.setArraySize(a,U+3*2);B[U]=x,B[U+1]=y,B[U+2]=S,B[U+3]=I,B[U+4]=M,B[U+5]=O,U=u.length;let N=pe.setArraySize(u,U+3);N[U]=h,N[U+1]=h+1,N[U+2]=h+2,h+=3;break}}}}clip(e,t,n,i,s,o,a,u){let l=u,c=!1,h;a.length%4>=2?(h=u,u=this.scratch):h=this.scratch,h.length=0,h.push(e),h.push(t),h.push(n),h.push(i),h.push(s),h.push(o),h.push(e),h.push(t),u.length=0;let d=a.length-4,p=a;for(let g=0;;g+=2){let v=p[g],x=p[g+1],y=v-p[g+2],b=x-p[g+3],_=u.length,S=h;for(let A=0,k=h.length-2;A<k;){let M=S[A],O=S[A+1];A+=2;let F=S[A],U=S[A+1],X=b*(v-F)>y*(x-U),B=b*(v-M)-y*(x-O);if(B>0){if(X){u.push(F),u.push(U);continue}let N=F-M,j=U-O,W=B/(N*b-j*y);if(W>=0&&W<=1)u.push(M+N*W),u.push(O+j*W);else{u.push(F),u.push(U);continue}}else if(X){let N=F-M,j=U-O,W=B/(N*b-j*y);if(W>=0&&W<=1)u.push(M+N*W),u.push(O+j*W),u.push(F),u.push(U);else{u.push(F),u.push(U);continue}}c=!0}if(_==u.length)return l.length=0,!0;if(u.push(u[0]),u.push(u[1]),g==d)break;let I=u;u=h,u.length=0,h=I}if(l!=u){l.length=0;for(let g=0,v=u.length-2;g<v;g++)l[g]=u[g]}else l.length=l.length-2;return c}static makeClockwise(e){let t=e,n=e.length,i=t[n-2]*t[1]-t[0]*t[n-1],s=0,o=0,a=0,u=0;for(let l=0,c=n-3;l<c;l+=2)s=t[l],o=t[l+1],a=t[l+2],u=t[l+3],i+=s*u-a*o;if(!(i<0))for(let l=0,c=n-2,h=n>>1;l<h;l+=2){let d=t[l],p=t[l+1],g=c-l;t[l]=t[g],t[l+1]=t[g+1],t[g]=d,t[g+1]=p}}}class e${constructor(e){C(this,"attachmentLoader");C(this,"scale",1);C(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,n=new B3,i=typeof e=="string"?JSON.parse(e):e,s=i.skeleton;if(s&&(n.hash=s.hash,n.version=s.spine,n.x=s.x,n.y=s.y,n.width=s.width,n.height=s.height,n.referenceScale=Y(s,"referenceScale",100)*t,n.fps=s.fps,n.imagesPath=s.images??null,n.audioPath=s.audio??null),i.bones)for(let o=0;o<i.bones.length;o++){let a=i.bones[o],u=null,l=Y(a,"parent",null);l&&(u=n.findBone(l));let c=new A3(n.bones.length,a.name,u);c.length=Y(a,"length",0)*t,c.x=Y(a,"x",0)*t,c.y=Y(a,"y",0)*t,c.rotation=Y(a,"rotation",0),c.scaleX=Y(a,"scaleX",1),c.scaleY=Y(a,"scaleY",1),c.shearX=Y(a,"shearX",0),c.shearY=Y(a,"shearY",0),c.inherit=pe.enumValue(Nt,Y(a,"inherit","Normal")),c.skinRequired=Y(a,"skin",!1);let h=Y(a,"color",null);h&&c.color.setFromString(h),n.bones.push(c)}if(i.slots)for(let o=0;o<i.slots.length;o++){let a=i.slots[o],u=a.name,l=n.findBone(a.bone);if(!l)throw new Error(`Couldn't find bone ${a.bone} for slot ${u}`);let c=new L3(n.slots.length,u,l),h=Y(a,"color",null);h&&c.color.setFromString(h);let d=Y(a,"dark",null);d&&(c.darkColor=je.fromString(d)),c.attachmentName=Y(a,"attachment",null),c.blendMode=pe.enumValue(sa,Y(a,"blend","normal")),c.visible=Y(a,"visible",!0),n.slots.push(c)}if(i.ik)for(let o=0;o<i.ik.length;o++){let a=i.ik[o],u=new M3(a.name);u.order=Y(a,"order",0),u.skinRequired=Y(a,"skin",!1);for(let c=0;c<a.bones.length;c++){let h=n.findBone(a.bones[c]);if(!h)throw new Error(`Couldn't find bone ${a.bones[c]} for IK constraint ${a.name}.`);u.bones.push(h)}let l=n.findBone(a.target);if(!l)throw new Error(`Couldn't find target bone ${a.target} for IK constraint ${a.name}.`);u.target=l,u.mix=Y(a,"mix",1),u.softness=Y(a,"softness",0)*t,u.bendDirection=Y(a,"bendPositive",!0)?1:-1,u.compress=Y(a,"compress",!1),u.stretch=Y(a,"stretch",!1),u.uniform=Y(a,"uniform",!1),n.ikConstraints.push(u)}if(i.transform)for(let o=0;o<i.transform.length;o++){let a=i.transform[o],u=new N3(a.name);u.order=Y(a,"order",0),u.skinRequired=Y(a,"skin",!1);for(let h=0;h<a.bones.length;h++){let d=a.bones[h],p=n.findBone(d);if(!p)throw new Error(`Couldn't find bone ${d} for transform constraint ${a.name}.`);u.bones.push(p)}let l=a.target,c=n.findBone(l);if(!c)throw new Error(`Couldn't find target bone ${l} for transform constraint ${a.name}.`);u.target=c,u.local=Y(a,"local",!1),u.relative=Y(a,"relative",!1),u.offsetRotation=Y(a,"rotation",0),u.offsetX=Y(a,"x",0)*t,u.offsetY=Y(a,"y",0)*t,u.offsetScaleX=Y(a,"scaleX",0),u.offsetScaleY=Y(a,"scaleY",0),u.offsetShearY=Y(a,"shearY",0),u.mixRotate=Y(a,"mixRotate",1),u.mixX=Y(a,"mixX",1),u.mixY=Y(a,"mixY",u.mixX),u.mixScaleX=Y(a,"mixScaleX",1),u.mixScaleY=Y(a,"mixScaleY",u.mixScaleX),u.mixShearY=Y(a,"mixShearY",1),n.transformConstraints.push(u)}if(i.path)for(let o=0;o<i.path.length;o++){let a=i.path[o],u=new R3(a.name);u.order=Y(a,"order",0),u.skinRequired=Y(a,"skin",!1);for(let h=0;h<a.bones.length;h++){let d=a.bones[h],p=n.findBone(d);if(!p)throw new Error(`Couldn't find bone ${d} for path constraint ${a.name}.`);u.bones.push(p)}let l=a.target,c=n.findSlot(l);if(!c)throw new Error(`Couldn't find target slot ${l} for path constraint ${a.name}.`);u.target=c,u.positionMode=pe.enumValue(Ms,Y(a,"positionMode","Percent")),u.spacingMode=pe.enumValue(cr,Y(a,"spacingMode","Length")),u.rotateMode=pe.enumValue(ol,Y(a,"rotateMode","Tangent")),u.offsetRotation=Y(a,"rotation",0),u.position=Y(a,"position",0),u.positionMode==Ms.Fixed&&(u.position*=t),u.spacing=Y(a,"spacing",0),(u.spacingMode==cr.Length||u.spacingMode==cr.Fixed)&&(u.spacing*=t),u.mixRotate=Y(a,"mixRotate",1),u.mixX=Y(a,"mixX",1),u.mixY=Y(a,"mixY",u.mixX),n.pathConstraints.push(u)}if(i.physics)for(let o=0;o<i.physics.length;o++){const a=i.physics[o],u=new O3(a.name);u.order=Y(a,"order",0),u.skinRequired=Y(a,"skin",!1);const l=a.bone,c=n.findBone(l);if(c==null)throw new Error("Physics bone not found: "+l);u.bone=c,u.x=Y(a,"x",0),u.y=Y(a,"y",0),u.rotate=Y(a,"rotate",0),u.scaleX=Y(a,"scaleX",0),u.shearX=Y(a,"shearX",0),u.limit=Y(a,"limit",5e3)*t,u.step=1/Y(a,"fps",60),u.inertia=Y(a,"inertia",1),u.strength=Y(a,"strength",100),u.damping=Y(a,"damping",1),u.massInverse=1/Y(a,"mass",1),u.wind=Y(a,"wind",0),u.gravity=Y(a,"gravity",0),u.mix=Y(a,"mix",1),u.inertiaGlobal=Y(a,"inertiaGlobal",!1),u.strengthGlobal=Y(a,"strengthGlobal",!1),u.dampingGlobal=Y(a,"dampingGlobal",!1),u.massGlobal=Y(a,"massGlobal",!1),u.windGlobal=Y(a,"windGlobal",!1),u.gravityGlobal=Y(a,"gravityGlobal",!1),u.mixGlobal=Y(a,"mixGlobal",!1),n.physicsConstraints.push(u)}if(i.skins)for(let o=0;o<i.skins.length;o++){let a=i.skins[o],u=new c_(a.name);if(a.bones)for(let l=0;l<a.bones.length;l++){let c=a.bones[l],h=n.findBone(c);if(!h)throw new Error(`Couldn't find bone ${c} for skin ${a.name}.`);u.bones.push(h)}if(a.ik)for(let l=0;l<a.ik.length;l++){let c=a.ik[l],h=n.findIkConstraint(c);if(!h)throw new Error(`Couldn't find IK constraint ${c} for skin ${a.name}.`);u.constraints.push(h)}if(a.transform)for(let l=0;l<a.transform.length;l++){let c=a.transform[l],h=n.findTransformConstraint(c);if(!h)throw new Error(`Couldn't find transform constraint ${c} for skin ${a.name}.`);u.constraints.push(h)}if(a.path)for(let l=0;l<a.path.length;l++){let c=a.path[l],h=n.findPathConstraint(c);if(!h)throw new Error(`Couldn't find path constraint ${c} for skin ${a.name}.`);u.constraints.push(h)}if(a.physics)for(let l=0;l<a.physics.length;l++){let c=a.physics[l],h=n.findPhysicsConstraint(c);if(!h)throw new Error(`Couldn't find physics constraint ${c} for skin ${a.name}.`);u.constraints.push(h)}for(let l in a.attachments){let c=n.findSlot(l);if(!c)throw new Error(`Couldn't find slot ${l} for skin ${a.name}.`);let h=a.attachments[l];for(let d in h){let p=this.readAttachment(h[d],u,c.index,d,n);p&&u.setAttachment(c.index,d,p)}}n.skins.push(u),u.name=="default"&&(n.defaultSkin=u)}for(let o=0,a=this.linkedMeshes.length;o<a;o++){let u=this.linkedMeshes[o],l=u.skin?n.findSkin(u.skin):n.defaultSkin;if(!l)throw new Error(`Skin not found: ${u.skin}`);let c=l.getAttachment(u.slotIndex,u.parent);if(!c)throw new Error(`Parent mesh not found: ${u.parent}`);u.mesh.timelineAttachment=u.inheritTimeline?c:u.mesh,u.mesh.setParentMesh(c),u.mesh.region!=null&&u.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(let o in i.events){let a=i.events[o],u=new I3(o);u.intValue=Y(a,"int",0),u.floatValue=Y(a,"float",0),u.stringValue=Y(a,"string",""),u.audioPath=Y(a,"audio",null),u.audioPath&&(u.volume=Y(a,"volume",1),u.balance=Y(a,"balance",0)),n.events.push(u)}if(i.animations)for(let o in i.animations){let a=i.animations[o];this.readAnimation(a,o,n)}return n}readAttachment(e,t,n,i,s){let o=this.scale;switch(i=Y(e,"name",i),Y(e,"type","region")){case"region":{let a=Y(e,"path",i),u=this.readSequence(Y(e,"sequence",null)),l=this.attachmentLoader.newRegionAttachment(t,i,a,u);if(!l)return null;l.path=a,l.x=Y(e,"x",0)*o,l.y=Y(e,"y",0)*o,l.scaleX=Y(e,"scaleX",1),l.scaleY=Y(e,"scaleY",1),l.rotation=Y(e,"rotation",0),l.width=e.width*o,l.height=e.height*o,l.sequence=u;let c=Y(e,"color",null);return c&&l.color.setFromString(c),l.region!=null&&l.updateRegion(),l}case"boundingbox":{let a=this.attachmentLoader.newBoundingBoxAttachment(t,i);if(!a)return null;this.readVertices(e,a,e.vertexCount<<1);let u=Y(e,"color",null);return u&&a.color.setFromString(u),a}case"mesh":case"linkedmesh":{let a=Y(e,"path",i),u=this.readSequence(Y(e,"sequence",null)),l=this.attachmentLoader.newMeshAttachment(t,i,a,u);if(!l)return null;l.path=a;let c=Y(e,"color",null);c&&l.color.setFromString(c),l.width=Y(e,"width",0)*o,l.height=Y(e,"height",0)*o,l.sequence=u;let h=Y(e,"parent",null);if(h)return this.linkedMeshes.push(new t$(l,Y(e,"skin",null),n,h,Y(e,"timelines",!0))),l;let d=e.uvs;return this.readVertices(e,l,d.length),l.triangles=e.triangles,l.regionUVs=d,l.region!=null&&l.updateRegion(),l.edges=Y(e,"edges",null),l.hullLength=Y(e,"hull",0)*2,l}case"path":{let a=this.attachmentLoader.newPathAttachment(t,i);if(!a)return null;a.closed=Y(e,"closed",!1),a.constantSpeed=Y(e,"constantSpeed",!0);let u=e.vertexCount;this.readVertices(e,a,u<<1);let l=pe.newArray(u/3,0);for(let h=0;h<e.lengths.length;h++)l[h]=e.lengths[h]*o;a.lengths=l;let c=Y(e,"color",null);return c&&a.color.setFromString(c),a}case"point":{let a=this.attachmentLoader.newPointAttachment(t,i);if(!a)return null;a.x=Y(e,"x",0)*o,a.y=Y(e,"y",0)*o,a.rotation=Y(e,"rotation",0);let u=Y(e,"color",null);return u&&a.color.setFromString(u),a}case"clipping":{let a=this.attachmentLoader.newClippingAttachment(t,i);if(!a)return null;let u=Y(e,"end",null);u&&(a.endSlot=s.findSlot(u));let l=e.vertexCount;this.readVertices(e,a,l<<1);let c=Y(e,"color",null);return c&&a.color.setFromString(c),a}}return null}readSequence(e){if(e==null)return null;let t=new Jm(Y(e,"count",0));return t.start=Y(e,"start",1),t.digits=Y(e,"digits",0),t.setupIndex=Y(e,"setup",0),t}readVertices(e,t,n){let i=this.scale;t.worldVerticesLength=n;let s=e.vertices;if(n==s.length){let u=pe.toFloatArray(s);if(i!=1)for(let l=0,c=s.length;l<c;l++)u[l]*=i;t.vertices=u;return}let o=new Array,a=new Array;for(let u=0,l=s.length;u<l;){let c=s[u++];a.push(c);for(let h=u+c*4;u<h;u+=4)a.push(s[u]),o.push(s[u+1]*i),o.push(s[u+2]*i),o.push(s[u+3])}t.bones=a,t.vertices=pe.toFloatArray(o)}readAnimation(e,t,n){let i=this.scale,s=new Array;if(e.slots)for(let a in e.slots){let u=e.slots[a],l=n.findSlot(a);if(!l)throw new Error("Slot not found: "+a);let c=l.index;for(let h in u){let d=u[h];if(!d)continue;let p=d.length;if(h=="attachment"){let g=new bu(p,c);for(let v=0;v<p;v++){let x=d[v];g.setFrame(v,Y(x,"time",0),Y(x,"name",null))}s.push(g)}else if(h=="rgba"){let g=new u3(p,p<<2,c),v=d[0],x=Y(v,"time",0),y=je.fromString(v.color);for(let b=0,_=0;;b++){g.setFrame(b,x,y.r,y.g,y.b,y.a);let S=d[b+1];if(!S){g.shrink(_);break}let I=Y(S,"time",0),A=je.fromString(S.color),k=v.curve;k&&(_=tt(k,g,_,b,0,x,I,y.r,A.r,1),_=tt(k,g,_,b,1,x,I,y.g,A.g,1),_=tt(k,g,_,b,2,x,I,y.b,A.b,1),_=tt(k,g,_,b,3,x,I,y.a,A.a,1)),x=I,y=A,v=S}s.push(g)}else if(h=="rgb"){let g=new h3(p,p*3,c),v=d[0],x=Y(v,"time",0),y=je.fromString(v.color);for(let b=0,_=0;;b++){g.setFrame(b,x,y.r,y.g,y.b);let S=d[b+1];if(!S){g.shrink(_);break}let I=Y(S,"time",0),A=je.fromString(S.color),k=v.curve;k&&(_=tt(k,g,_,b,0,x,I,y.r,A.r,1),_=tt(k,g,_,b,1,x,I,y.g,A.g,1),_=tt(k,g,_,b,2,x,I,y.b,A.b,1)),x=I,y=A,v=S}s.push(g)}else if(h=="alpha")s.push(Ei(d,new c3(p,p,c),0,1));else if(h=="rgba2"){let g=new d3(p,p*7,c),v=d[0],x=Y(v,"time",0),y=je.fromString(v.light),b=je.fromString(v.dark);for(let _=0,S=0;;_++){g.setFrame(_,x,y.r,y.g,y.b,y.a,b.r,b.g,b.b);let I=d[_+1];if(!I){g.shrink(S);break}let A=Y(I,"time",0),k=je.fromString(I.light),M=je.fromString(I.dark),O=v.curve;O&&(S=tt(O,g,S,_,0,x,A,y.r,k.r,1),S=tt(O,g,S,_,1,x,A,y.g,k.g,1),S=tt(O,g,S,_,2,x,A,y.b,k.b,1),S=tt(O,g,S,_,3,x,A,y.a,k.a,1),S=tt(O,g,S,_,4,x,A,b.r,M.r,1),S=tt(O,g,S,_,5,x,A,b.g,M.g,1),S=tt(O,g,S,_,6,x,A,b.b,M.b,1)),x=A,y=k,b=M,v=I}s.push(g)}else if(h=="rgb2"){let g=new f3(p,p*6,c),v=d[0],x=Y(v,"time",0),y=je.fromString(v.light),b=je.fromString(v.dark);for(let _=0,S=0;;_++){g.setFrame(_,x,y.r,y.g,y.b,b.r,b.g,b.b);let I=d[_+1];if(!I){g.shrink(S);break}let A=Y(I,"time",0),k=je.fromString(I.light),M=je.fromString(I.dark),O=v.curve;O&&(S=tt(O,g,S,_,0,x,A,y.r,k.r,1),S=tt(O,g,S,_,1,x,A,y.g,k.g,1),S=tt(O,g,S,_,2,x,A,y.b,k.b,1),S=tt(O,g,S,_,3,x,A,b.r,M.r,1),S=tt(O,g,S,_,4,x,A,b.g,M.g,1),S=tt(O,g,S,_,5,x,A,b.b,M.b,1)),x=A,y=k,b=M,v=I}s.push(g)}}}if(e.bones)for(let a in e.bones){let u=e.bones[a],l=n.findBone(a);if(!l)throw new Error("Bone not found: "+a);let c=l.index;for(let h in u){let d=u[h],p=d.length;if(p!=0){if(h==="rotate")s.push(Ei(d,new eg(p,p,c),0,1));else if(h==="translate"){let g=new JR(p,p<<1,c);s.push(Xy(d,g,"x","y",0,i))}else if(h==="translatex"){let g=new e3(p,p,c);s.push(Ei(d,g,0,i))}else if(h==="translatey"){let g=new t3(p,p,c);s.push(Ei(d,g,0,i))}else if(h==="scale"){let g=new r3(p,p<<1,c);s.push(Xy(d,g,"x","y",1,1))}else if(h==="scalex"){let g=new n3(p,p,c);s.push(Ei(d,g,1,1))}else if(h==="scaley"){let g=new i3(p,p,c);s.push(Ei(d,g,1,1))}else if(h==="shear"){let g=new s3(p,p<<1,c);s.push(Xy(d,g,"x","y",0,1))}else if(h==="shearx"){let g=new o3(p,p,c);s.push(Ei(d,g,0,1))}else if(h==="sheary"){let g=new a3(p,p,c);s.push(Ei(d,g,0,1))}else if(h==="inherit"){let g=new l3(p,l.index);for(let v=0;v<d.length;v++){let x=d[v];g.setFrame(v,Y(x,"time",0),pe.enumValue(Nt,Y(x,"inherit","Normal")))}s.push(g)}}}}if(e.ik)for(let a in e.ik){let u=e.ik[a],l=u[0];if(!l)continue;let c=n.findIkConstraint(a);if(!c)throw new Error("IK Constraint not found: "+a);let h=n.ikConstraints.indexOf(c),d=new m3(u.length,u.length<<1,h),p=Y(l,"time",0),g=Y(l,"mix",1),v=Y(l,"softness",0)*i;for(let x=0,y=0;;x++){d.setFrame(x,p,g,v,Y(l,"bendPositive",!0)?1:-1,Y(l,"compress",!1),Y(l,"stretch",!1));let b=u[x+1];if(!b){d.shrink(y);break}let _=Y(b,"time",0),S=Y(b,"mix",1),I=Y(b,"softness",0)*i,A=l.curve;A&&(y=tt(A,d,y,x,0,p,_,g,S,1),y=tt(A,d,y,x,1,p,_,v,I,i)),p=_,g=S,v=I,l=b}s.push(d)}if(e.transform)for(let a in e.transform){let u=e.transform[a],l=u[0];if(!l)continue;let c=n.findTransformConstraint(a);if(!c)throw new Error("Transform constraint not found: "+a);let h=n.transformConstraints.indexOf(c),d=new g3(u.length,u.length*6,h),p=Y(l,"time",0),g=Y(l,"mixRotate",1),v=Y(l,"mixX",1),x=Y(l,"mixY",v),y=Y(l,"mixScaleX",1),b=Y(l,"mixScaleY",y),_=Y(l,"mixShearY",1);for(let S=0,I=0;;S++){d.setFrame(S,p,g,v,x,y,b,_);let A=u[S+1];if(!A){d.shrink(I);break}let k=Y(A,"time",0),M=Y(A,"mixRotate",1),O=Y(A,"mixX",1),F=Y(A,"mixY",O),U=Y(A,"mixScaleX",1),X=Y(A,"mixScaleY",U),B=Y(A,"mixShearY",1),N=l.curve;N&&(I=tt(N,d,I,S,0,p,k,g,M,1),I=tt(N,d,I,S,1,p,k,v,O,1),I=tt(N,d,I,S,2,p,k,x,F,1),I=tt(N,d,I,S,3,p,k,y,U,1),I=tt(N,d,I,S,4,p,k,b,X,1),I=tt(N,d,I,S,5,p,k,_,B,1)),p=k,g=M,v=O,x=F,y=U,b=X,y=U,l=A}s.push(d)}if(e.path)for(let a in e.path){let u=e.path[a],l=n.findPathConstraint(a);if(!l)throw new Error("Path constraint not found: "+a);let c=n.pathConstraints.indexOf(l);for(let h in u){let d=u[h],p=d[0];if(!p)continue;let g=d.length;if(h==="position"){let v=new v3(g,g,c);s.push(Ei(d,v,0,l.positionMode==Ms.Fixed?i:1))}else if(h==="spacing"){let v=new y3(g,g,c);s.push(Ei(d,v,0,l.spacingMode==cr.Length||l.spacingMode==cr.Fixed?i:1))}else if(h==="mix"){let v=new x3(g,g*3,c),x=Y(p,"time",0),y=Y(p,"mixRotate",1),b=Y(p,"mixX",1),_=Y(p,"mixY",b);for(let S=0,I=0;;S++){v.setFrame(S,x,y,b,_);let A=d[S+1];if(!A){v.shrink(I);break}let k=Y(A,"time",0),M=Y(A,"mixRotate",1),O=Y(A,"mixX",1),F=Y(A,"mixY",O),U=p.curve;U&&(I=tt(U,v,I,S,0,x,k,y,M,1),I=tt(U,v,I,S,1,x,k,b,O,1),I=tt(U,v,I,S,2,x,k,_,F,1)),x=k,y=M,b=O,_=F,p=A}s.push(v)}}}if(e.physics)for(let a in e.physics){let u=e.physics[a],l=-1;if(a.length>0){let c=n.findPhysicsConstraint(a);if(!c)throw new Error("Physics constraint not found: "+a);l=n.physicsConstraints.indexOf(c)}for(let c in u){let h=u[c],d=h[0];if(!d)continue;let p=h.length;if(c=="reset"){const v=new tg(p,l);for(let x=0;d!=null;d=h[x+1],x++)v.setFrame(x,Y(d,"time",0));s.push(v);continue}let g;if(c=="inertia")g=new _3(p,p,l);else if(c=="strength")g=new w3(p,p,l);else if(c=="damping")g=new b3(p,p,l);else if(c=="mass")g=new S3(p,p,l);else if(c=="wind")g=new T3(p,p,l);else if(c=="gravity")g=new E3(p,p,l);else if(c=="mix")g=new C3(p,p,l);else continue;s.push(Ei(h,g,0,1))}}if(e.attachments)for(let a in e.attachments){let u=e.attachments[a],l=n.findSkin(a);if(!l)throw new Error("Skin not found: "+a);for(let c in u){let h=u[c],d=n.findSlot(c);if(!d)throw new Error("Slot not found: "+c);let p=d.index;for(let g in h){let v=h[g],x=l.getAttachment(p,g);for(let y in v){let b=v[y],_=b[0];if(_){if(y=="deform"){let S=x.bones,I=x.vertices,A=S?I.length/3*2:I.length,k=new p3(b.length,b.length,p,x),M=Y(_,"time",0);for(let O=0,F=0;;O++){let U,X=Y(_,"vertices",null);if(!X)U=S?pe.newFloatArray(A):I;else{U=pe.newFloatArray(A);let W=Y(_,"offset",0);if(pe.arrayCopy(X,0,U,W,X.length),i!=1)for(let Q=W,H=Q+X.length;Q<H;Q++)U[Q]*=i;if(!S)for(let Q=0;Q<A;Q++)U[Q]+=I[Q]}k.setFrame(O,M,U);let B=b[O+1];if(!B){k.shrink(F);break}let N=Y(B,"time",0),j=_.curve;j&&(F=tt(j,k,F,O,0,M,N,0,1,1)),M=N,_=B}s.push(k)}else if(y=="sequence"){let S=new rg(b.length,p,x),I=0;for(let A=0;A<b.length;A++){let k=Y(_,"delay",I),M=Y(_,"time",0),O=kr[Y(_,"mode","hold")],F=Y(_,"index",0);S.setFrame(A,M,O,F,k),I=k,_=b[A+1]}s.push(S)}}}}}}if(e.drawOrder){let a=new sl(e.drawOrder.length),u=n.slots.length,l=0;for(let c=0;c<e.drawOrder.length;c++,l++){let h=e.drawOrder[c],d=null,p=Y(h,"offsets",null);if(p){d=pe.newArray(u,-1);let g=pe.newArray(u-p.length,0),v=0,x=0;for(let y=0;y<p.length;y++){let b=p[y],_=n.findSlot(b.slot);if(!_)throw new Error("Slot not found: "+_);let S=_.index;for(;v!=S;)g[x++]=v++;d[v+b.offset]=v++}for(;v<u;)g[x++]=v++;for(let y=u-1;y>=0;y--)d[y]==-1&&(d[y]=g[--x])}a.setFrame(l,Y(h,"time",0),d)}s.push(a)}if(e.events){let a=new ud(e.events.length),u=0;for(let l=0;l<e.events.length;l++,u++){let c=e.events[l],h=n.findEvent(c.name);if(!h)throw new Error("Event not found: "+c.name);let d=new k3(pe.toSinglePrecision(Y(c,"time",0)),h);d.intValue=Y(c,"int",h.intValue),d.floatValue=Y(c,"float",h.floatValue),d.stringValue=Y(c,"string",h.stringValue),d.data.audioPath&&(d.volume=Y(c,"volume",1),d.balance=Y(c,"balance",0)),a.setFrame(u,d)}s.push(a)}let o=0;for(let a=0,u=s.length;a<u;a++)o=Math.max(o,s[a].getDuration());n.animations.push(new Yw(t,s,o))}}class t${constructor(e,t,n,i,s){C(this,"parent");C(this,"skin");C(this,"slotIndex");C(this,"mesh");C(this,"inheritTimeline");this.mesh=e,this.skin=t,this.slotIndex=n,this.parent=i,this.inheritTimeline=s}}function Ei(r,e,t,n){let i=r[0],s=Y(i,"time",0),o=Y(i,"value",t)*n,a=0;for(let u=0;;u++){e.setFrame(u,s,o);let l=r[u+1];if(!l)return e.shrink(a),e;let c=Y(l,"time",0),h=Y(l,"value",t)*n;i.curve&&(a=tt(i.curve,e,a,u,0,s,c,o,h,n)),s=c,o=h,i=l}}function Xy(r,e,t,n,i,s){let o=r[0],a=Y(o,"time",0),u=Y(o,t,i)*s,l=Y(o,n,i)*s,c=0;for(let h=0;;h++){e.setFrame(h,a,u,l);let d=r[h+1];if(!d)return e.shrink(c),e;let p=Y(d,"time",0),g=Y(d,t,i)*s,v=Y(d,n,i)*s,x=o.curve;x&&(c=tt(x,e,c,h,0,a,p,u,g,s),c=tt(x,e,c,h,1,a,p,l,v,s)),a=p,u=g,l=v,o=d}}function tt(r,e,t,n,i,s,o,a,u,l){if(r=="stepped")return e.setStepped(n),t;let c=i<<2,h=r[c],d=r[c+1]*l,p=r[c+2],g=r[c+3]*l;return e.setBezier(t,n,i,s,a,h,d,p,g,o,u),t+1}function Y(r,e,t){return r[e]!==void 0?r[e]:t}typeof Math.fround>"u"&&(Math.fround=function(r){return function(e){return r[0]=e,r[0]}}(new Float32Array(1)));const Qs=class Qs extends h9{constructor(t){super(t.resource.source);C(this,"texture");this.texture=Ie.from(t)}static from(t){return Qs.textureMap.has(t)?Qs.textureMap.get(t):new Qs(t)}setFilters(t,n){this.texture.baseTexture.scaleMode=Qs.toPixiTextureFilter(t),this.texture.baseTexture.mipmap=Qs.toPixiMipMap(t)}setWraps(t,n){this.texture.baseTexture.wrapMode=Qs.toPixiTextureWrap(t)}dispose(){this.texture.destroy()}static toPixiTextureFilter(t){switch(t){case vr.Nearest:case vr.MipMapNearestLinear:case vr.MipMapNearestNearest:return Bi.NEAREST;case vr.Linear:case vr.MipMapLinearLinear:case vr.MipMapLinearNearest:return Bi.LINEAR;default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiMipMap(t){switch(t){case vr.Nearest:case vr.Linear:return di.OFF;case vr.MipMapNearestLinear:case vr.MipMapNearestNearest:case vr.MipMapLinearLinear:case vr.MipMapLinearNearest:return di.ON;default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiTextureWrap(t){switch(t){case po.ClampToEdge:return hi.CLAMP;case po.MirroredRepeat:return hi.MIRRORED_REPEAT;case po.Repeat:return hi.REPEAT;default:throw new Error(`Unknown texture wrap: ${String(t)}`)}}static toPixiBlending(t){switch(t){case sa.Normal:return Ae.NORMAL;case sa.Additive:return Ae.ADD;case sa.Multiply:return Ae.MULTIPLY;case sa.Screen:return Ae.SCREEN;default:throw new Error(`Unknown blendMode: ${String(t)}`)}}};C(Qs,"textureMap",new Map);let hh=Qs;const Zs=class Zs extends hl{constructor(){const t=new _d;t.getBuffer("aVertexPosition").static=!1,t.getBuffer("aTextureCoord").static=!1;const n=new eh(Ie.EMPTY);super(t,n);C(this,"name","");C(this,"warnedTwoTint",!1)}updateFromSpineData(t,n,i,s,o,a,u,l){var y,b;this.texture=t.texture;const c=o/(l?12:8)*2,h=this.geometry.getBuffer("aTextureCoord");((y=h.data)==null?void 0:y.length)!==c&&(h.data=new Float32Array(c));const d=this.geometry.getBuffer("aVertexPosition");((b=d.data)==null?void 0:b.length)!==c&&(d.data=new Float32Array(c));let p=0,g=h.data,v=d.data;for(let _=0;_<o;_+=l?12:8){let S=_;v[p]=s[S++],v[p+1]=s[S++],S+=4,g[p]=s[S++],g[p+1]=s[S++],p+=2}l&&!this.warnedTwoTint&&(console.warn("DarkTint is not enabled by default. To enable use a DarkSlotMesh factory while creating the Spine object."),this.warnedTwoTint=!0),Zs.auxColor[0]=s[2],Zs.auxColor[1]=s[3],Zs.auxColor[2]=s[4],Zs.auxColor[3]=s[5],this.tint=Zs.auxColor,this.alpha=Zs.auxColor[3],this.blendMode=hh.toPixiBlending(n);const x=this.geometry.indexBuffer;if(x.data.length!==a.length)x.data=new Uint32Array(a);else{const _=x.data;for(let S=0;S<u;S++)_[S]=a[S]}this.name=i,h.update(),d.update(),x.update()}};C(Zs,"auxColor",[0,0,0,0]);let d_=Zs;class r$ extends Os{constructor(e=!1){super();const t=new _t(void 0),n=new _t(void 0,!0),i=new _t(void 0,!0,!0);this.addAttribute("aVertexPosition",t,2,!1,Se.FLOAT),this.addAttribute("aTextureCoord",n,2,!1,Se.FLOAT),this.addIndex(i)}}const n$=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,i$=`
varying vec2 vTextureCoord;
uniform vec4 uColor;
uniform vec4 uDarkColor;

uniform sampler2D uSampler;

void main(void)
{
	vec4 texColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor.a = texColor.a * uColor.a;
    gl_FragColor.rgb = ((texColor.a - 1.0) * uDarkColor.a + 1.0 - texColor.rgb) * uDarkColor.rgb + texColor.rgb * uColor.rgb;
}
`;class s$ extends Ui{constructor(t){const n={uSampler:t??Ie.EMPTY,alpha:1,uTextureMatrix:bt.IDENTITY,uColor:new Float32Array([1,1,1,1]),uDarkColor:new Float32Array([0,0,0,0])},i={tint:16777215,darkTint:0,alpha:1,pluginName:"darkTintBatch"};super(Ts.from(n$,i$),n);C(this,"uvMatrix");C(this,"batchable");C(this,"pluginName");C(this,"_tintRGB");C(this,"_darkTintRGB");C(this,"_colorDirty");C(this,"_alpha");C(this,"_tintColor");C(this,"_darkTintColor");this._colorDirty=!1,this.uvMatrix=new Ag(n.uSampler),this.batchable=!0,this.pluginName=i.pluginName,this._tintColor=new lt(i.tint),this._darkTintColor=new lt(i.darkTint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._darkTintRGB=this._darkTintColor.toLittleEndianNumber(),this._alpha=i.alpha,this._colorDirty=!0}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}set darkTint(t){t!==this.darkTint&&(this._darkTintColor.setValue(t),this._darkTintRGB=this._darkTintColor.toLittleEndianNumber(),this._colorDirty=!0)}get darkTint(){return this._darkTintColor.value}get tintValue(){return this._tintColor.toNumber()}get darkTintValue(){return this._darkTintColor.toNumber()}update(){this._colorDirty&&(this._colorDirty=!1,lt.shared.setValue(this._tintColor).premultiply(this._alpha,!0).toArray(this.uniforms.uColor),lt.shared.setValue(this._darkTintColor).premultiply(this._alpha,!0).premultiply(1,!1).toArray(this.uniforms.uDarkColor)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class o$ extends hl{constructor(t){super(new r$,new s$(t),void 0,void 0);C(this,"_darkTintRGB",0)}get darkTint(){return"darkTint"in this.shader?this.shader.darkTint:null}set darkTint(t){this.shader.darkTint=t}get darkTintValue(){return this.shader.darkTintValue}_renderToBatch(t){const n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._darkTintRGB=i._darkTintRGB,this._texture=i.texture;const s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}}const or=class or extends o${constructor(){super();C(this,"name","")}updateFromSpineData(t,n,i,s,o,a,u,l){var y,b;this.texture=t.texture;const c=o/(l?12:8)*2,h=this.geometry.getBuffer("aTextureCoord");((y=h.data)==null?void 0:y.length)!==c&&(h.data=new Float32Array(c));const d=this.geometry.getBuffer("aVertexPosition");((b=d.data)==null?void 0:b.length)!==c&&(d.data=new Float32Array(c));let p=0,g=h.data,v=d.data;for(let _=0;_<o;_+=l?12:8){let S=_;v[p]=s[S++],v[p+1]=s[S++],S+=4,g[p]=s[S++],g[p+1]=s[S++],p+=2}l?(or.auxColor[0]=s[8],or.auxColor[1]=s[9],or.auxColor[2]=s[10],or.auxColor[3]=s[11],this.darkTint=or.auxColor,or.auxColor[0]=s[2],or.auxColor[1]=s[3],or.auxColor[2]=s[4],or.auxColor[3]=s[5],this.tint=or.auxColor):(or.auxColor[0]=s[2],or.auxColor[1]=s[3],or.auxColor[2]=s[4],or.auxColor[3]=s[5],this.tint=or.auxColor),this.blendMode=hh.toPixiBlending(n),this.alpha=or.auxColor[3];const x=this.geometry.indexBuffer;if(x.data.length!==a.length)x.data=new Uint32Array(a);else{const _=x.data;for(let S=0;S<u;S++)_[S]=a[S]}this.name=i,h.update(),d.update(),x.update()}};C(or,"auxColor",[0,0,0,0]);let f_=or;var nt;let a$=(nt=class extends Vr{constructor(t,n){super();C(this,"skeleton");C(this,"state");C(this,"_debug");C(this,"slotMeshFactory",()=>new d_);C(this,"beforeUpdateWorldTransforms",()=>{});C(this,"afterUpdateWorldTransforms",()=>{});C(this,"autoUpdateWarned",!1);C(this,"_autoUpdate",!0);C(this,"meshesCache",new Map);C(this,"lightColor",new je);C(this,"darkColor",new je);C(this,"slotsObject",new Map);C(this,"verticesCache",pe.newFloatArray(1024));C(this,"clippingSlotToPixiMasks",{});this.skeleton=new uh(t);const i=new u9(t);this.state=new u_(i),this.autoUpdate=(n==null?void 0:n.autoUpdate)??!0,this.initializeMeshFactory(n),this.skeleton.setToSetupPose(),this.skeleton.updateWorldTransform(so.update)}get debug(){return this._debug}set debug(t){this._debug&&this._debug.unregisterSpine(this),t&&t.registerSpine(this),this._debug=t}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t?(Ut.shared.add(this.internalUpdate,this),this.autoUpdateWarned=!1):Ut.shared.remove(this.internalUpdate,this),this._autoUpdate=t}initializeMeshFactory(t){if(t!=null&&t.slotMeshFactory)this.slotMeshFactory=t==null?void 0:t.slotMeshFactory;else for(let n=0;n<this.skeleton.slots.length;n++)if(this.skeleton.slots[n].data.darkColor){this.slotMeshFactory=(t==null?void 0:t.slotMeshFactory)??(()=>new f_);break}}update(t){this.autoUpdate&&!this.autoUpdateWarned&&(console.warn("You are calling update on a Spine instance that has autoUpdate set to true. This is probably not what you want."),this.autoUpdateWarned=!0),this.internalUpdate(0,t)}internalUpdate(t,n){const i=n??Ut.shared.deltaMS/1e3;this.state.update(i),this.state.apply(this.skeleton),this.beforeUpdateWorldTransforms(this),this.skeleton.update(i),this.skeleton.updateWorldTransform(so.update),this.afterUpdateWorldTransforms(this)}updateTransform(){var t;this.renderMeshes(),this.sortChildren(),(t=this.debug)==null||t.renderDebug(this),super.updateTransform()}destroy(t){this.autoUpdate&&(this.autoUpdate=!1);for(const[,n]of this.meshesCache)n==null||n.destroy();this.state.clearListeners(),this.debug=void 0,this.meshesCache.clear(),this.slotsObject.clear();for(let n in this.clippingSlotToPixiMasks)this.clippingSlotToPixiMasks[n].destroy(),delete this.clippingSlotToPixiMasks[n];super.destroy(t)}resetMeshes(){for(const[,t]of this.meshesCache)t.zIndex=-1,t.visible=!1}getMeshForSlot(t){if(this.meshesCache.has(t)){let n=this.meshesCache.get(t);return n.visible=!0,n}else{let n=this.slotMeshFactory();return this.addChild(n),this.meshesCache.set(t,n),n}}getSlotFromRef(t){let n;if(typeof t=="number"?n=this.skeleton.slots[t]:typeof t=="string"?n=this.skeleton.findSlot(t):n=t,!n)throw new Error(`No slot found with the given slot reference: ${t}`);return n}addSlotObject(t,n){let i=this.getSlotFromRef(t),s=this.slotsObject.get(i);if(s!==n){for(const[o,a]of this.slotsObject)if(o!==i&&a===n){this.removeSlotObject(o,n);break}s&&this.removeChild(s),this.slotsObject.set(i,n),this.addChild(n)}}getSlotObject(t){return this.slotsObject.get(this.getSlotFromRef(t))}removeSlotObject(t,n){let i=this.getSlotFromRef(t),s=this.slotsObject.get(i);s&&(n&&n!==s||(this.removeChild(s),this.slotsObject.delete(i)))}pixiMaskCleanup(t){let n=this.clippingSlotToPixiMasks[t.data.name];n&&(delete this.clippingSlotToPixiMasks[t.data.name],n.destroy())}updatePixiObject(t,n,i){t.setTransform(n.bone.worldX,n.bone.worldY,n.bone.getWorldScaleX(),n.bone.getWorldScaleX(),n.bone.getWorldRotationX()*ue.degRad),t.zIndex=i+1,t.alpha=this.skeleton.color.a*n.color.a}updateAndSetPixiMask(t,n){if(nt.clipper.isClipping()&&t){let i=this.clippingSlotToPixiMasks[t.slot.data.name];if(i||(i=new Fu,this.clippingSlotToPixiMasks[t.slot.data.name]=i,this.addChild(i)),!t.computed){t.computed=!0;const s=t.slot.attachment,o=Array.from(s.vertices);s.computeWorldVertices(t.slot,0,s.worldVerticesLength,o,0,2),i.clear().lineStyle(0).beginFill(0).drawPolygon(o)}n.mask=i}else n.mask&&(n.mask=null)}renderMeshes(){var o,a;this.resetMeshes();let t=null,n=null,i=null;const s=this.skeleton.drawOrder;for(let u=0,l=s.length,c=0;u<l;u++){const h=s[u];let d=this.slotsObject.get(h),p=u+c;d&&(this.updatePixiObject(d,h,p+1),c++,this.updateAndSetPixiMask(i,d));const g=h.darkColor!=null,v=nt.clipper.isClipping()?2:g?nt.DARK_VERTEX_SIZE:nt.VERTEX_SIZE;if(!h.bone.active){nt.clipper.clipEndWithSlot(h),this.pixiMaskCleanup(h);continue}const x=h.getAttachment();let y,b,_=0;if(x instanceof hd){const S=x;y=S.color,_=v*4,S.computeWorldVertices(h,this.verticesCache,0,v),t=nt.QUAD_TRIANGLES,n=S.uvs,b=(o=S.region)==null?void 0:o.texture}else if(x instanceof vl){const S=x;y=S.color,_=(S.worldVerticesLength>>1)*v,_>this.verticesCache.length&&(this.verticesCache=pe.newFloatArray(_)),S.computeWorldVertices(h,0,S.worldVerticesLength,this.verticesCache,0,v),t=S.triangles,n=S.uvs,b=(a=S.region)==null?void 0:a.texture}else if(x instanceof Pd){nt.clipper.clipStart(h,x),i={slot:h,computed:!1};continue}else{nt.clipper.clipEndWithSlot(h),this.pixiMaskCleanup(h);continue}if(b!=null){const I=h.bone.skeleton.color,A=h.color,k=I.a*A.a*y.a;this.lightColor.set(I.r*A.r*y.r,I.g*A.g*y.g,I.b*A.b*y.b,k),h.darkColor!=null?this.darkColor.set(h.darkColor.r,h.darkColor.g,h.darkColor.b,1):this.darkColor.set(0,0,0,1);let M,O,F,U;if(nt.clipper.isClipping())nt.clipper.clipTriangles(this.verticesCache,t,t.length,n,this.lightColor,this.darkColor,g),M=nt.clipper.clippedVertices,O=M.length,F=nt.clipper.clippedTriangles,U=F.length;else{const B=this.verticesCache;for(let N=2,j=0,W=_;N<W;N+=v,j+=2){let Q=N;B[Q++]=this.lightColor.r,B[Q++]=this.lightColor.g,B[Q++]=this.lightColor.b,B[Q++]=this.lightColor.a,B[Q++]=n[j],B[Q++]=n[j+1],g&&(B[Q++]=this.darkColor.r,B[Q++]=this.darkColor.g,B[Q++]=this.darkColor.b,B[Q++]=this.darkColor.a)}M=this.verticesCache,O=_,F=t,U=t.length}if(O==0||U==0){nt.clipper.clipEndWithSlot(h);continue}const X=this.getMeshForSlot(h);X.zIndex=p,X.updateFromSpineData(b,h.data.blendMode,h.data.name,M,O,F,U,g)}nt.clipper.clipEndWithSlot(h),this.pixiMaskCleanup(h)}nt.clipper.clipEnd()}setBonePosition(t,n){const i=t;if(typeof t=="string"&&(t=this.skeleton.findBone(t)),!t)throw Error(`Cannot set bone position, bone ${String(i)} not found`);if(nt.vectorAux.set(n.x,n.y),t.parent){const s=t.parent.worldToLocal(nt.vectorAux);t.x=s.x,t.y=s.y}else t.x=nt.vectorAux.x,t.y=nt.vectorAux.y}getBonePosition(t,n){const i=t;return typeof t=="string"&&(t=this.skeleton.findBone(t)),t?(n||(n={x:0,y:0}),n.x=t.worldX,n.y=t.worldY,n):(console.error(`Cannot get bone position! Bone ${String(i)} not found`),n)}skeletonToPixiWorldCoordinates(t){this.worldTransform.apply(t,t)}pixiWorldCoordinatesToSkeleton(t){this.worldTransform.applyInverse(t,t)}pixiWorldCoordinatesToBone(t,n){this.pixiWorldCoordinatesToSkeleton(t),n.parent?n.parent.worldToLocal(t):n.worldToLocal(t)}static from(t,n,i){const s=`${t}-${n}-${(i==null?void 0:i.scale)??1}`;let o=nt.skeletonCache[s];if(o)return new nt(o,i);const a=fn.get(t),u=fn.get(n),l=new m9(u);let c=a instanceof Uint8Array?new _9(l):new e$(l);return c.scale=(i==null?void 0:i.scale)??1,o=c.readSkeletonData(a),nt.skeletonCache[s]=o,new this(o,i)}get tint(){return this.skeleton.color.toRgb888()}set tint(t){je.rgb888ToColor(this.skeleton.color,t)}},C(nt,"vectorAux",new Zm),C(nt,"clipper",new ng),C(nt,"QUAD_TRIANGLES",[0,1,2,2,3,0]),C(nt,"VERTEX_SIZE",8),C(nt,"DARK_VERTEX_SIZE",12),C(nt,"skeletonCache",Object.create(null)),nt);uh.yDown=!0;const l$={extension:me.Asset,loader:{extension:{type:me.LoadParser,priority:zn.Normal,name:"spineTextureAtlasLoader"},test(r){return Fn(r,".atlas")},async load(r){return await(await xe.ADAPTER.fetch(r)).text()},testParse(r,e){const t=Fn(e.src,".atlas"),n=typeof r=="string";return Promise.resolve(t&&n)},unload(r){r.dispose()},async parse(r,e,t){var u;const n=e.data||{};let i=Gt.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");const s=new d9(r);if(n.images instanceof De||typeof n.images=="string"){const l=n.images;n.images={},n.images[s.pages[0].name]=l}const o=[];let a=!0;for(const l of t.parsers)if(l.name=="loadTextures"){a=(u=l.config)==null?void 0:u.preferCreateImageBitmap;break}fn.setPreferences({preferCreateImageBitmap:!1});for(const l of s.pages){const c=l.name,h=n!=null&&n.images?n.images[c]:void 0;if(h instanceof De)l.setTexture(hh.from(h));else{const p={src:h??Gt.normalize([...i.split(Gt.sep),c].join(Gt.sep)),data:{...n.imageMetadata,alphaMode:l.pma?$r.PMA:$r.UNPACK}},g=t.load(p).then(v=>{l.setTexture(hh.from(v.baseTexture))});o.push(g)}}return await Promise.all(o),fn.setPreferences({preferCreateImageBitmap:a}),s}}};Te.add(l$);function u$(r){return r.hasOwnProperty("bones")}function h$(r){return r instanceof Uint8Array}const c$={extension:me.Asset,loader:{extension:{type:me.LoadParser,priority:zn.Normal},test(r){return Fn(r,".skel")},async load(r){const e=await xe.ADAPTER.fetch(r);return new Uint8Array(await e.arrayBuffer())},testParse(r,e){const t=Fn(e.src,".json")&&u$(r),n=Fn(e.src,".skel")&&h$(r);return Promise.resolve(t||n)}}};Te.add(c$);class d$ extends Os{constructor(t=!1){super();C(this,"_buffer");C(this,"_indexBuffer");this._buffer=new _t(void 0,t,!1),this._indexBuffer=new _t(void 0,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Se.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Se.FLOAT).addAttribute("aColor",this._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aDarkColor",this._buffer,4,!0,Se.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Se.FLOAT).addIndex(this._indexBuffer)}}const f$=`
precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute vec4 aDarkColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec4 vDarkColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
    vDarkColor = aDarkColor * tint;

}
`,p$=`
varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec4 vDarkColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%


    gl_FragColor.a = color.a * vColor.a;
    gl_FragColor.rgb = ((color.a - 1.0) * vDarkColor.a + 1.0 - color.rgb) * vDarkColor.rgb + color.rgb * vColor.rgb;
}
`;class F3 extends $o{constructor(e){super(e),this.shaderGenerator=new I2(f$,p$),this.geometryClass=d$,this.vertexSize=7}packInterleavedGeometry(e,t,n,i,s){const{uint32View:o,float32View:a}=t,u=i/this.vertexSize,l=e.uvs,c=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),g=lt.shared.setValue(e._tintRGB).toPremultiplied(p,!0),v=lt.shared.setValue(e._darkTintRGB).premultiply(p,!0).toPremultiplied(1,!1);for(let x=0;x<h.length;x+=2)a[i++]=h[x],a[i++]=h[x+1],a[i++]=l[x],a[i++]=l[x+1],o[i++]=g,o[i++]=v,a[i++]=d;for(let x=0;x<c.length;x++)n[s++]=u+c[x]}}C(F3,"extension",{name:"darkTintBatch",type:me.RendererPlugin});Te.add(F3);const m$=zt.PixiComponent("Spine",{create:({atlas:r,skel:e})=>a$.from(e,r,{autoUpdate:!1}),didMount:(r,e)=>{},willUnmount:(r,e)=>{r.state.clearListeners()},applyProps:(r,e,t)=>{const{onComplete:n,event:i,...s}=t;zt.applyDefaultProps(r,e,s),r.state.clearListeners(),r.state.addListener({complete:n,event:i})},config:{destroy:!0,destroyChildren:!0}}),Zg=L.forwardRef((r,e)=>{const{children:t,atlas:n,skel:i,tint:s=16777215,onComplete:o,event:a,playing:u=!1,action:l,actions:c,skin:h,timeScale:d=1,toFrameOneWhenStop:p,turbo:g=!1,...v}=r,x=L.useRef(),{current:y}=L.useRef({updateTime:0});return wh((b,_)=>{y.updateTime+=b/1e3,y.updateTime>.03&&(x.current&&x.current.update(y.updateTime),y.updateTime=0)},u,g),L.useEffect(()=>{l&&(x.current.state.setAnimation(...l),h&&x.current.skeleton.setSkinByName(h),x.current.update(0))},[l]),L.useEffect(()=>{x.current.update(0)},[s]),L.useEffect(()=>{if(c){const b=c[0];b&&(x.current.state.setAnimation(...b),x.current.update(0));for(let _=1;_<c.length;_++)x.current.state.addAnimation(...c[_],0)}},[u,c]),L.useEffect(()=>{!u&&p&&l&&(x.current.state.setAnimation(...l),x.current.update(0))},[u]),L.useEffect(()=>{h&&(x.current.skeleton.setSkinByName(h),x.current.skeleton.setSlotsToSetupPose(),x.current.update(0))},[h]),L.useEffect(()=>{x.current.state.timeScale=d},[d]),L.useImperativeHandle(e,()=>x.current,[x]),E.jsx(ye,{...v,children:E.jsx(m$,{ref:x,skel:i,atlas:n,tint:s,onComplete:o,event:a})})});L.forwardRef(({onLoop:r,onRepeatComplete:e,repeat:t,...n},i)=>{const{current:s}=L.useRef({loopTimes:0}),o=n.playing;function a(u){n.onComplete&&n.onComplete(u),s.loopTimes++;const l=s.loopTimes;t==l&&e&&e(),r&&r(l)}return L.useEffect(()=>{s.loopTimes=0},[n.action,n.actions,o,n.id]),E.jsx(Zg,{ref:i,...n,onComplete:a})});function qw(r,e,t,n){return L.forwardRef((i,s)=>E.jsx(r,{ref:s,atlas:t,skel:e,...n,...i}))}const g$={Random:(r,e=0)=>Math.floor(Math.random()*(r-e))+e},p_={defaultUp:(r,e,t)=>1/2*e*t*t+r*t,up:(r,e,t,n)=>{if(t=t/1e3,n=n/1e3,t==0)return 0;const i=(e-r)/t;return r*n+i*n*n/2},down:(r,e,t,n)=>{if(t=t/1e3,n=n/1e3,t==0)return 0;const i=(r-e)/t;return r*n-i*n*n/2}};function ui(r,e){const t=[];for(let n=0;n<r;n++)t.push(e(n));return t}function Sh(r){return r[r.length-1]}function D3(r){return r[g$.Random(r.length)]}const ch=qw(Zg,$R,YR,{skin:Oe.Obj.urlOptions.lang==gn.Chinese?"CH":"EN"}),U3=qw(Zg,GR,WR),v$=qw(Zg,VR,qR);function y$(){return D3([[[5,0,0,4,4],[2,3,3,5,2],[1,0,1,1,0],[3,2,2,3,2],[0,1,0,1,0]],[[0,4,1,0,3],[2,2,2,1,3],[4,0,1,3,0],[1,0,1,0,1],[1,0,3,2,4]],[[0,0,1,1,0],[2,3,2,2,3],[1,1,4,4,0],[2,3,2,3,2],[1,5,0,0,4]],[[3,0,1,5,4],[0,2,0,4,3],[4,4,4,2,2],[2,0,1,2,5],[0,2,0,3,0]],[[4,0,4,0,0],[3,2,2,3,3],[0,1,0,1,0],[3,2,2,5,3],[1,0,0,1,1]],[[3,0,1,5,4],[3,5,4,4,4],[1,2,0,0,2],[5,1,1,2,4],[1,3,3,3,1]],[[5,4,0,0,0],[4,1,3,0,2],[0,0,2,4,1],[0,2,4,1,3],[2,4,1,1,3]],[[1,0,0,1,1],[2,2,2,3,3],[1,0,1,0,1],[2,3,2,3,2],[0,0,1,1,0]],[[1,3,0,0,0],[4,3,2,4,1],[2,4,3,0,0],[3,3,1,2,2],[2,0,3,2,4]],[[0,0,1,1,5],[2,3,2,2,3],[1,0,1,1,0],[5,3,3,3,3],[1,1,0,1,0]]])}/*!
 * @pixi/particle-emitter - v5.0.8
 * Compiled Mon, 28 Nov 2022 04:01:38 UTC
 *
 * @pixi/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class Es{constructor(e,t,n){this.value=e,this.time=t,this.next=null,this.isStepped=!1,n?this.ease=typeof n=="function"?n:H3(n):this.ease=null}static createList(e){if("list"in e){const n=e.list;let i;const{value:s,time:o}=n[0],a=i=new Es(typeof s=="string"?xp(s):s,o,e.ease);if(n.length>2||n.length===2&&n[1].value!==s)for(let u=1;u<n.length;++u){const{value:l,time:c}=n[u];i.next=new Es(typeof l=="string"?xp(l):l,c),i=i.next}return a.isStepped=!!e.isStepped,a}const t=new Es(typeof e.start=="string"?xp(e.start):e.start,0);return e.end!==e.start&&(t.next=new Es(typeof e.end=="string"?xp(e.end):e.end,1)),t}}let cd=Ie.from;const bs=Math.PI/180;function mo(r,e){if(!r)return;const t=Math.sin(r),n=Math.cos(r),i=e.x*n-e.y*t,s=e.x*t+e.y*n;e.x=i,e.y=s}function Jg(r,e,t){return r<<16|e<<8|t}function j3(r){return Math.sqrt(r.x*r.x+r.y*r.y)}function x$(r){const e=1/j3(r);r.x*=e,r.y*=e}function X3(r,e){r.x*=e,r.y*=e}function xp(r,e){e||(e={}),r.charAt(0)==="#"?r=r.substr(1):r.indexOf("0x")===0&&(r=r.substr(2));let t;return r.length===8&&(t=r.substr(0,2),r=r.substr(2)),e.r=parseInt(r.substr(0,2),16),e.g=parseInt(r.substr(2,2),16),e.b=parseInt(r.substr(4,2),16),t&&(e.a=parseInt(t,16)),e}function H3(r){const e=r.length,t=1/e;return function(n){const i=e*n|0,s=(n-i*t)*e,o=r[i]||r[e-1];return o.s+s*(2*(1-s)*(o.cp-o.s)+s*(o.e-o.s))}}function _$(r){return r?(r=r.toUpperCase().replace(/ /g,"_"),Ae[r]||Ae.NORMAL):Ae.NORMAL}class Hy extends qi{constructor(e){super(),this.prevChild=this.nextChild=null,this.emitter=e,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(e){this.maxLife=e,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}var St;(function(r){r[r.Spawn=0]="Spawn",r[r.Normal=2]="Normal",r[r.Late=5]="Late"})(St||(St={}));const zy=Ut.shared,ja=Symbol("Position particle per emitter position");class dt{constructor(e,t){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new Xe,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new Xe,this._prevEmitterPos=new Xe,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=e,t&&this.init(t),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(e){dt.knownBehaviors[e.type]=e}get frequency(){return this._frequency}set frequency(e){typeof e=="number"&&e>0?this._frequency=e:this._frequency=1}get parent(){return this._parent}set parent(e){this.cleanup(),this._parent=e}init(e){if(!e)return;this.cleanup(),this._origConfig=e,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,e.ease?this.customEase=typeof e.ease=="function"?e.ease:H3(e.ease):this.customEase=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.frequency=e.frequency,this.spawnChance=typeof e.spawnChance=="number"&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos.set(0),e.pos?this.spawnPos.copyFrom(e.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=e.emit===void 0?!0:!!e.emit,this.autoUpdate=!!e.autoUpdate;const t=e.behaviors.map(n=>{const i=dt.knownBehaviors[n.type];return i?new i(n.config):(console.error(`Unknown behavior: ${n.type}`),null)}).filter(n=>!!n);t.push(ja),t.sort((n,i)=>n===ja?i.order===St.Spawn?1:-1:i===ja?n.order===St.Spawn?-1:1:n.order-i.order),this.initBehaviors=t.slice(),this.updateBehaviors=t.filter(n=>n!==ja&&n.updateParticle),this.recycleBehaviors=t.filter(n=>n!==ja&&n.recycleParticle)}getBehavior(e){return dt.knownBehaviors[e]&&this.initBehaviors.find(t=>t instanceof dt.knownBehaviors[e])||null}fillPool(e){for(;e>0;--e){const t=new Hy(this);t.next=this._poolFirst,this._poolFirst=t}}recycle(e,t=!1){for(let n=0;n<this.recycleBehaviors.length;++n)this.recycleBehaviors[n].recycleParticle(e,!t);e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e===this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,e.parent&&e.parent.removeChild(e),--this.particleCount}rotate(e){if(this.rotation===e)return;const t=e-this.rotation;this.rotation=e,mo(t,this.spawnPos),this._posChanged=!0}updateSpawnPos(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t}updateOwnerPos(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){this._autoUpdate&&!e?zy.remove(this.update,this):!this._autoUpdate&&e&&zy.add(this.update,this),this._autoUpdate=!!e}playOnceAndDestroy(e){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=e}playOnce(e){this.emit=!0,this._completeCallback=e}update(e){if(this._autoUpdate&&(e=zy.elapsedMS*.001),!this._parent)return;for(let o=this._activeParticlesFirst,a;o;o=a)if(a=o.next,o.age+=e,o.age>o.maxLife||o.age<0)this.recycle(o);else{let u=o.age*o.oneOverLife;this.customEase&&(this.customEase.length===4?u=this.customEase(u,0,1,1):u=this.customEase(u)),o.agePercent=u;for(let l=0;l<this.updateBehaviors.length;++l)if(this.updateBehaviors[l].updateParticle(o,e)){this.recycle(o);break}}let t,n;this._prevPosIsValid&&(t=this._prevEmitterPos.x,n=this._prevEmitterPos.y);const i=this.ownerPos.x+this.spawnPos.x,s=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=e<0?0:e;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let o,a;if(this._prevPosIsValid&&this._posChanged){const c=1+this._spawnTimer/e;o=(i-t)*c+t,a=(s-n)*c+n}else o=i,a=s;let u=null,l=null;for(let c=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),h=0;h<c;++h){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let d;if(this.minLifetime===this.maxLifetime?d=this.minLifetime:d=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=d)continue;let p;this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new Hy(this),p.init(d),this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p),u?(l.next=p,p.prev=l,l=p):l=u=p,++this.particleCount}if(u){this._activeParticlesLast?(this._activeParticlesLast.next=u,u.prev=this._activeParticlesLast,this._activeParticlesLast=l):(this._activeParticlesFirst=u,this._activeParticlesLast=l);for(let c=0;c<this.initBehaviors.length;++c){const h=this.initBehaviors[c];if(h===ja)for(let d=u,p;d;d=p){p=d.next,this.rotation!==0&&(mo(this.rotation,d.position),d.rotation+=this.rotation),d.position.x+=o,d.position.y+=a,d.age+=-this._spawnTimer;let g=d.age*d.oneOverLife;this.customEase&&(this.customEase.length===4?g=this.customEase(g,0,1,1):g=this.customEase(g)),d.agePercent=g}else h.initParticles(u)}for(let c=u,h;c;c=h){h=c.next;for(let d=0;d<this.updateBehaviors.length;++d)if(this.updateBehaviors[d].updateParticle(c,-this._spawnTimer)){this.recycle(c);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=i,this._prevEmitterPos.y=s,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const o=this._completeCallback;this._completeCallback=null,o()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const e=this.ownerPos.x+this.spawnPos.x,t=this.ownerPos.y+this.spawnPos.y;let n=null,i=null;for(let s=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),o=0;o<s;++o){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let a;this._poolFirst?(a=this._poolFirst,this._poolFirst=this._poolFirst.next,a.next=null):a=new Hy(this);let u;this.minLifetime===this.maxLifetime?u=this.minLifetime:u=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,a.init(u),this.addAtBack?this._parent.addChildAt(a,0):this._parent.addChild(a),n?(i.next=a,a.prev=i,i=a):i=n=a,++this.particleCount}if(n){this._activeParticlesLast?(this._activeParticlesLast.next=n,n.prev=this._activeParticlesLast,this._activeParticlesLast=i):(this._activeParticlesFirst=n,this._activeParticlesLast=i);for(let s=0;s<this.initBehaviors.length;++s){const o=this.initBehaviors[s];if(o===ja)for(let a=n,u;a;a=u)u=a.next,this.rotation!==0&&(mo(this.rotation,a.position),a.rotation+=this.rotation),a.position.x+=e,a.position.y+=t;else o.initParticles(n)}}}cleanup(){let e,t;for(e=this._activeParticlesFirst;e;e=t)t=e.next,this.recycle(e,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let e;for(let t=this._poolFirst;t;t=e)e=t.next,t.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}dt.knownBehaviors={};let Kw=class{constructor(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h}getRandPos(e){e.x=Math.random()*this.w+this.x,e.y=Math.random()*this.h+this.y}};Kw.type="rect";Kw.editorConfig=null;class e0{constructor(e){this.x=e.x||0,this.y=e.y||0,this.radius=e.radius,this.innerRadius=e.innerRadius||0,this.rotation=!!e.affectRotation}getRandPos(e){this.innerRadius!==this.radius?e.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:e.x=this.radius,e.y=0;const t=Math.random()*Math.PI*2;this.rotation&&(e.rotation+=t),mo(t,e.position),e.position.x+=this.x,e.position.y+=this.y}}e0.type="torus";e0.editorConfig=null;class Qw{constructor(e){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(e)}init(e){if(!e||!e.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(e[0]))for(let t=0;t<e.length;++t){const n=e[t];let i=n[0];for(let s=1;s<n.length;++s){const o=n[s];this.segments.push({p1:i,p2:o,l:0}),i=o}}else{let t=e[0];for(let n=1;n<e.length;++n){const i=e[n];this.segments.push({p1:t,p2:i,l:0}),t=i}}for(let t=0;t<this.segments.length;++t){const{p1:n,p2:i}=this.segments[t],s=Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y));this.segments[t].l=s,this.totalLength+=s,this.countingLengths.push(this.totalLength)}}getRandPos(e){const t=Math.random()*this.totalLength;let n,i;if(this.segments.length===1)n=this.segments[0],i=t;else for(let a=0;a<this.countingLengths.length;++a)if(t<this.countingLengths[a]){n=this.segments[a],i=a===0?t:t-this.countingLengths[a-1];break}i/=n.l||1;const{p1:s,p2:o}=n;e.x=s.x+i*(o.x-s.x),e.y=s.y+i*(o.y-s.y)}}Qw.type="polygonalChain";Qw.editorConfig=null;class Zw{constructor(e){var t;this.order=St.Late,this.minStart=e.minStart,this.maxStart=e.maxStart,this.accel=e.accel,this.rotate=!!e.rotate,this.maxSpeed=(t=e.maxSpeed)!==null&&t!==void 0?t:0}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.maxStart-this.minStart)+this.minStart;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new Xe(n,0),mo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity,i=n.x,s=n.y;if(n.x+=this.accel.x*t,n.y+=this.accel.y*t,this.maxSpeed){const o=j3(n);o>this.maxSpeed&&X3(n,this.maxSpeed/o)}e.x+=(i+n.x)/2*t,e.y+=(s+n.y)/2*t,this.rotate&&(e.rotation=Math.atan2(n.y,n.x))}}Zw.type="moveAcceleration";Zw.editorConfig=null;function w$(r){return this.ease&&(r=this.ease(r)),(this.first.next.value-this.first.value)*r+this.first.value}function b$(r){this.ease&&(r=this.ease(r));const e=this.first.value,t=this.first.next.value,n=(t.r-e.r)*r+e.r,i=(t.g-e.g)*r+e.g,s=(t.b-e.b)*r+e.b;return Jg(n,i,s)}function S$(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;return r=(r-e.time)/(t.time-e.time),(t.value-e.value)*r+e.value}function T$(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;r=(r-e.time)/(t.time-e.time);const n=e.value,i=t.value,s=(i.r-n.r)*r+n.r,o=(i.g-n.g)*r+n.g,a=(i.b-n.b)*r+n.b;return Jg(s,o,a)}function E$(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;return e.value}function C$(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;const t=e.value;return Jg(t.r,t.g,t.b)}class Ad{constructor(e=!1){this.first=null,this.isColor=!!e,this.interpolate=null,this.ease=null}reset(e){this.first=e,e.next&&e.next.time>=1?this.interpolate=this.isColor?b$:w$:e.isStepped?this.interpolate=this.isColor?C$:E$:this.interpolate=this.isColor?T$:S$,this.ease=this.first.ease}}class Jw{constructor(e){this.order=St.Normal,this.list=new Ad(!1),this.list.reset(Es.createList(e.alpha))}initParticles(e){let t=e;for(;t;)t.alpha=this.list.first.value,t=t.next}updateParticle(e){e.alpha=this.list.interpolate(e.agePercent)}}Jw.type="alpha";Jw.editorConfig=null;class eb{constructor(e){this.order=St.Normal,this.value=e.alpha}initParticles(e){let t=e;for(;t;)t.alpha=this.value,t=t.next}}eb.type="alphaStatic";eb.editorConfig=null;function z3(r){const e=[];for(let t=0;t<r.length;++t){let n=r[t];if(typeof n=="string")e.push(cd(n));else if(n instanceof Ie)e.push(n);else{let i=n.count||1;for(typeof n.texture=="string"?n=cd(n.texture):n=n.texture;i>0;--i)e.push(n)}}return e}class tb{constructor(e){this.order=St.Normal,this.anims=[];for(let t=0;t<e.anims.length;++t){const n=e.anims[t],i=z3(n.textures),s=n.framerate<0?-1:n.framerate>0?n.framerate:60,o={textures:i,duration:s>0?i.length/s:0,framerate:s,loop:s>0?!!n.loop:!1};this.anims.push(o)}}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.anims.length),i=t.config.anim=this.anims[n];t.texture=i.textures[0],t.config.animElapsed=0,i.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=i.textures.length/t.maxLife):(t.config.animDuration=i.duration,t.config.animFramerate=i.framerate),t=t.next}}updateParticle(e,t){const n=e.config,i=n.anim;n.animElapsed+=t,n.animElapsed>=n.animDuration&&(n.anim.loop?n.animElapsed=n.animElapsed%n.animDuration:n.animElapsed=n.animDuration-1e-6);const s=n.animElapsed*n.animFramerate+1e-7|0;e.texture=i.textures[s]||i.textures[i.textures.length-1]||Ie.EMPTY}}tb.type="animatedRandom";tb.editorConfig=null;class rb{constructor(e){this.order=St.Normal;const t=e.anim,n=z3(t.textures),i=t.framerate<0?-1:t.framerate>0?t.framerate:60;this.anim={textures:n,duration:i>0?n.length/i:0,framerate:i,loop:i>0?!!t.loop:!1}}initParticles(e){let t=e;const n=this.anim;for(;t;)t.texture=n.textures[0],t.config.animElapsed=0,n.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=n.textures.length/t.maxLife):(t.config.animDuration=n.duration,t.config.animFramerate=n.framerate),t=t.next}updateParticle(e,t){const n=this.anim,i=e.config;i.animElapsed+=t,i.animElapsed>=i.animDuration&&(n.loop?i.animElapsed=i.animElapsed%i.animDuration:i.animElapsed=i.animDuration-1e-6);const s=i.animElapsed*i.animFramerate+1e-7|0;e.texture=n.textures[s]||n.textures[n.textures.length-1]||Ie.EMPTY}}rb.type="animatedSingle";rb.editorConfig=null;class nb{constructor(e){this.order=St.Normal,this.value=e.blendMode}initParticles(e){let t=e;for(;t;)t.blendMode=_$(this.value),t=t.next}}nb.type="blendMode";nb.editorConfig=null;class ib{constructor(e){this.order=St.Spawn,this.spacing=e.spacing*bs,this.start=e.start*bs,this.distance=e.distance}initParticles(e){let t=0,n=e;for(;n;){let i;this.spacing?i=this.start+this.spacing*t:i=Math.random()*Math.PI*2,n.rotation=i,this.distance&&(n.position.x=this.distance,mo(i,n.position)),n=n.next,++t}}}ib.type="spawnBurst";ib.editorConfig=null;class sb{constructor(e){this.order=St.Normal,this.list=new Ad(!0),this.list.reset(Es.createList(e.color))}initParticles(e){let t=e;const n=this.list.first.value,i=Jg(n.r,n.g,n.b);for(;t;)t.tint=i,t=t.next}updateParticle(e){e.tint=this.list.interpolate(e.agePercent)}}sb.type="color";sb.editorConfig=null;class ob{constructor(e){this.order=St.Normal;let t=e.color;t.charAt(0)==="#"?t=t.substr(1):t.indexOf("0x")===0&&(t=t.substr(2)),this.value=parseInt(t,16)}initParticles(e){let t=e;for(;t;)t.tint=this.value,t=t.next}}ob.type="colorStatic";ob.editorConfig=null;class ab{constructor(e){this.order=St.Normal,this.index=0,this.textures=e.textures.map(t=>typeof t=="string"?cd(t):t)}initParticles(e){let t=e;for(;t;)t.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),t=t.next}}ab.type="textureOrdered";ab.editorConfig=null;const Kl=new Xe,$3=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],P$=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat($3).join("|"),"g");function A$(r){const e=r.match(P$);for(let t=e.length-1;t>=0;--t)$3.indexOf(e[t])>=0&&(e[t]=`Math.${e[t]}`);return r=e.join(""),new Function("x",`return ${r};`)}class lb{constructor(e){var t;if(this.order=St.Late,e.path)if(typeof e.path=="function")this.path=e.path;else try{this.path=A$(e.path)}catch{this.path=null}else this.path=n=>n;this.list=new Ad(!1),this.list.reset(Es.createList(e.speed)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){t.config.initRotation=t.rotation,t.config.initPosition?t.config.initPosition.copyFrom(t.position):t.config.initPosition=new Xe(t.x,t.y),t.config.movement=0;const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult;e.config.movement+=n*t,Kl.x=e.config.movement,Kl.y=this.path(Kl.x),mo(e.config.initRotation,Kl),e.position.x=e.config.initPosition.x+Kl.x,e.position.y=e.config.initPosition.y+Kl.y}}lb.type="movePath";lb.editorConfig=null;class ub{constructor(){this.order=St.Spawn}initParticles(e){}}ub.type="spawnPoint";ub.editorConfig=null;class hb{constructor(e){this.order=St.Normal,this.textures=e.textures.map(t=>typeof t=="string"?cd(t):t)}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.textures.length);t.texture=this.textures[n],t=t.next}}}hb.type="textureRandom";hb.editorConfig=null;class cb{constructor(e){this.order=St.Normal,this.minStart=e.minStart*bs,this.maxStart=e.maxStart*bs,this.minSpeed=e.minSpeed*bs,this.maxSpeed=e.maxSpeed*bs,this.accel=e.accel*bs}initParticles(e){let t=e;for(;t;)this.minStart===this.maxStart?t.rotation+=this.maxStart:t.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,t.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,t=t.next}updateParticle(e,t){if(this.accel){const n=e.config.rotSpeed;e.config.rotSpeed+=this.accel*t,e.rotation+=(e.config.rotSpeed+n)/2*t}else e.rotation+=e.config.rotSpeed*t}}cb.type="rotation";cb.editorConfig=null;class db{constructor(e){this.order=St.Normal,this.min=e.min*bs,this.max=e.max*bs}initParticles(e){let t=e;for(;t;)this.min===this.max?t.rotation+=this.max:t.rotation+=Math.random()*(this.max-this.min)+this.min,t=t.next}}db.type="rotationStatic";db.editorConfig=null;class fb{constructor(e){this.order=St.Late+1,this.rotation=(e.rotation||0)*bs}initParticles(e){let t=e;for(;t;)t.rotation=this.rotation,t=t.next}}fb.type="noRotation";fb.editorConfig=null;class pb{constructor(e){var t;this.order=St.Normal,this.list=new Ad(!1),this.list.reset(Es.createList(e.scale)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.scaleMult=n,t.scale.x=t.scale.y=this.list.first.value*n,t=t.next}}updateParticle(e){e.scale.x=e.scale.y=this.list.interpolate(e.agePercent)*e.config.scaleMult}}pb.type="scale";pb.editorConfig=null;class mb{constructor(e){this.order=St.Normal,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.scale.x=t.scale.y=n,t=t.next}}}mb.type="scaleStatic";mb.editorConfig=null;class Wi{constructor(e){this.order=St.Spawn;const t=Wi.shapes[e.type];if(!t)throw new Error(`No shape found with type '${e.type}'`);this.shape=new t(e.data)}static registerShape(e,t){Wi.shapes[t||e.type]=e}initParticles(e){let t=e;for(;t;)this.shape.getRandPos(t),t=t.next}}Wi.type="spawnShape";Wi.editorConfig=null;Wi.shapes={};Wi.registerShape(Qw);Wi.registerShape(Kw);Wi.registerShape(e0);Wi.registerShape(e0,"circle");class gb{constructor(e){this.order=St.Normal,this.texture=typeof e.texture=="string"?cd(e.texture):e.texture}initParticles(e){let t=e;for(;t;)t.texture=this.texture,t=t.next}}gb.type="textureSingle";gb.editorConfig=null;class vb{constructor(e){var t;this.order=St.Late,this.list=new Ad(!1),this.list.reset(Es.createList(e.speed)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t.config.velocity?t.config.velocity.set(this.list.first.value*n,0):t.config.velocity=new Xe(this.list.first.value*n,0),mo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult,i=e.config.velocity;x$(i),X3(i,n),e.x+=i.x*t,e.y+=i.y*t}}vb.type="moveSpeed";vb.editorConfig=null;class yb{constructor(e){this.order=St.Late,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new Xe(n,0),mo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity;e.x+=n.x*t,e.y+=n.y*t}}yb.type="moveSpeedStatic";yb.editorConfig=null;function kd(r,e){var t,n,i,s,o,a,u,l,c,h,d,p,g,v,x,y,b,_,S,I,A;if("behaviors"in r)return r;const k={lifetime:r.lifetime,ease:r.ease,particlesPerWave:r.particlesPerWave,frequency:r.frequency,spawnChance:r.spawnChance,emitterLifetime:r.emitterLifetime,maxParticles:r.maxParticles,addAtBack:r.addAtBack,pos:r.pos,emit:r.emit,autoUpdate:r.autoUpdate,behaviors:[]};if(r.alpha)if("start"in r.alpha)if(r.alpha.start===r.alpha.end)r.alpha.start!==1&&k.behaviors.push({type:"alphaStatic",config:{alpha:r.alpha.start}});else{const M={list:[{time:0,value:r.alpha.start},{time:1,value:r.alpha.end}]};k.behaviors.push({type:"alpha",config:{alpha:M}})}else r.alpha.list.length===1?r.alpha.list[0].value!==1&&k.behaviors.push({type:"alphaStatic",config:{alpha:r.alpha.list[0].value}}):k.behaviors.push({type:"alpha",config:{alpha:r.alpha}});if(r.acceleration&&(r.acceleration.x||r.acceleration.y)){let M,O;"start"in r.speed?(M=r.speed.start*((t=r.speed.minimumSpeedMultiplier)!==null&&t!==void 0?t:1),O=r.speed.start):(M=r.speed.list[0].value*((n=r.minimumSpeedMultiplier)!==null&&n!==void 0?n:1),O=r.speed.list[0].value),k.behaviors.push({type:"moveAcceleration",config:{accel:r.acceleration,minStart:M,maxStart:O,rotate:!r.noRotation,maxSpeed:r.maxSpeed}})}else if(!((i=r.extraData)===null||i===void 0)&&i.path){let M,O;"start"in r.speed?(O=(s=r.speed.minimumSpeedMultiplier)!==null&&s!==void 0?s:1,r.speed.start===r.speed.end?M={list:[{time:0,value:r.speed.start}]}:M={list:[{time:0,value:r.speed.start},{time:1,value:r.speed.end}]}):(M=r.speed,O=(o=r.minimumSpeedMultiplier)!==null&&o!==void 0?o:1),k.behaviors.push({type:"movePath",config:{path:r.extraData.path,speed:M,minMult:O}})}else if(r.speed)if("start"in r.speed)if(r.speed.start===r.speed.end)k.behaviors.push({type:"moveSpeedStatic",config:{min:r.speed.start*((a=r.speed.minimumSpeedMultiplier)!==null&&a!==void 0?a:1),max:r.speed.start}});else{const M={list:[{time:0,value:r.speed.start},{time:1,value:r.speed.end}]};k.behaviors.push({type:"moveSpeed",config:{speed:M,minMult:r.speed.minimumSpeedMultiplier}})}else r.speed.list.length===1?k.behaviors.push({type:"moveSpeedStatic",config:{min:r.speed.list[0].value*((u=r.minimumSpeedMultiplier)!==null&&u!==void 0?u:1),max:r.speed.list[0].value}}):k.behaviors.push({type:"moveSpeed",config:{speed:r.speed,minMult:(l=r.minimumSpeedMultiplier)!==null&&l!==void 0?l:1}});if(r.scale)if("start"in r.scale){const M=(c=r.scale.minimumScaleMultiplier)!==null&&c!==void 0?c:1;if(r.scale.start===r.scale.end)k.behaviors.push({type:"scaleStatic",config:{min:r.scale.start*M,max:r.scale.start}});else{const O={list:[{time:0,value:r.scale.start},{time:1,value:r.scale.end}]};k.behaviors.push({type:"scale",config:{scale:O,minMult:M}})}}else if(r.scale.list.length===1){const M=(h=r.minimumScaleMultiplier)!==null&&h!==void 0?h:1,O=r.scale.list[0].value;k.behaviors.push({type:"scaleStatic",config:{min:O*M,max:O}})}else k.behaviors.push({type:"scale",config:{scale:r.scale,minMult:(d=r.minimumScaleMultiplier)!==null&&d!==void 0?d:1}});if(r.color)if("start"in r.color)if(r.color.start===r.color.end)r.color.start!=="ffffff"&&k.behaviors.push({type:"colorStatic",config:{color:r.color.start}});else{const M={list:[{time:0,value:r.color.start},{time:1,value:r.color.end}]};k.behaviors.push({type:"color",config:{color:M}})}else r.color.list.length===1?r.color.list[0].value!=="ffffff"&&k.behaviors.push({type:"colorStatic",config:{color:r.color.list[0].value}}):k.behaviors.push({type:"color",config:{color:r.color}});if(r.rotationAcceleration||!((p=r.rotationSpeed)===null||p===void 0)&&p.min||!((g=r.rotationSpeed)===null||g===void 0)&&g.max?k.behaviors.push({type:"rotation",config:{accel:r.rotationAcceleration||0,minSpeed:((v=r.rotationSpeed)===null||v===void 0?void 0:v.min)||0,maxSpeed:((x=r.rotationSpeed)===null||x===void 0?void 0:x.max)||0,minStart:((y=r.startRotation)===null||y===void 0?void 0:y.min)||0,maxStart:((b=r.startRotation)===null||b===void 0?void 0:b.max)||0}}):(!((_=r.startRotation)===null||_===void 0)&&_.min||!((S=r.startRotation)===null||S===void 0)&&S.max)&&k.behaviors.push({type:"rotationStatic",config:{min:((I=r.startRotation)===null||I===void 0?void 0:I.min)||0,max:((A=r.startRotation)===null||A===void 0?void 0:A.max)||0}}),r.noRotation&&k.behaviors.push({type:"noRotation",config:{}}),r.blendMode&&r.blendMode!=="normal"&&k.behaviors.push({type:"blendMode",config:{blendMode:r.blendMode}}),Array.isArray(e)&&typeof e[0]!="string"&&"framerate"in e[0]){for(let M=0;M<e.length;++M)e[M].framerate==="matchLife"&&(e[M].framerate=-1);k.behaviors.push({type:"animatedRandom",config:{anims:e}})}else typeof e!="string"&&"framerate"in e?(e.framerate==="matchLife"&&(e.framerate=-1),k.behaviors.push({type:"animatedSingle",config:{anim:e}})):r.orderedArt&&Array.isArray(e)?k.behaviors.push({type:"textureOrdered",config:{textures:e}}):Array.isArray(e)?k.behaviors.push({type:"textureRandom",config:{textures:e}}):k.behaviors.push({type:"textureSingle",config:{texture:e}});if(r.spawnType==="burst")k.behaviors.push({type:"spawnBurst",config:{start:r.angleStart||0,spacing:r.particleSpacing,distance:0}});else if(r.spawnType==="point")k.behaviors.push({type:"spawnPoint",config:{}});else{let M;r.spawnType==="ring"?M={type:"torus",data:{x:r.spawnCircle.x,y:r.spawnCircle.y,radius:r.spawnCircle.r,innerRadius:r.spawnCircle.minR,affectRotation:!0}}:r.spawnType==="circle"?M={type:"torus",data:{x:r.spawnCircle.x,y:r.spawnCircle.y,radius:r.spawnCircle.r,innerRadius:0,affectRotation:!1}}:r.spawnType==="rect"?M={type:"rect",data:r.spawnRect}:r.spawnType==="polygonalChain"&&(M={type:"polygonalChain",data:r.spawnPolygon}),M&&k.behaviors.push({type:"spawnShape",config:M})}return k}dt.registerBehavior(Zw);dt.registerBehavior(Jw);dt.registerBehavior(eb);dt.registerBehavior(tb);dt.registerBehavior(rb);dt.registerBehavior(nb);dt.registerBehavior(ib);dt.registerBehavior(sb);dt.registerBehavior(ob);dt.registerBehavior(ab);dt.registerBehavior(lb);dt.registerBehavior(ub);dt.registerBehavior(hb);dt.registerBehavior(cb);dt.registerBehavior(db);dt.registerBehavior(fb);dt.registerBehavior(pb);dt.registerBehavior(mb);dt.registerBehavior(Wi);dt.registerBehavior(gb);dt.registerBehavior(vb);dt.registerBehavior(yb);const Ar=({turbo:r=!1,playing:e=!1,config:t,...n})=>{const i=L.useRef(),[s,o]=L.useState(null);return wh((a,u)=>{s.update(a/1e3)},e,r),L.useEffect(()=>{!e&&s?s.cleanup():e&&s&&s.playOnce()},[e]),L.useEffect(()=>{const a=new dt(i.current,t);return o(a),()=>{a.destroy()}},[]),E.jsx(zt.ParticleContainer,{ref:i,...n})},FP=kd({alpha:{start:1,end:1},scale:{start:.2,end:1.4,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:2},acceleration:{x:0,y:-25},maxSpeed:600,startRotation:{min:0,max:-180},noRotation:!1,rotationSpeed:{min:-15,max:30},lifetime:{min:5,max:20},blendMode:"screen",frequency:.5,emitterLifetime:-1,maxParticles:8,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-30,y:300,w:60,h:40}},{framerate:0,loop:!0,textures:["bubble.png"]}),DP=kd({alpha:{start:1,end:1},scale:{start:.2,end:1.4,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:2},acceleration:{x:0,y:-60},maxSpeed:600,startRotation:{min:0,max:-180},noRotation:!1,rotationSpeed:{min:-15,max:30},lifetime:{min:5,max:12},blendMode:"screen",frequency:.5,emitterLifetime:-1,maxParticles:8,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-30,y:300,w:60,h:40}},{framerate:0,loop:!0,textures:["bubble.png"]});function Id(r){return kd({alpha:{start:1,end:1},scale:{start:.5,end:.8,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:400,end:500,minimumSpeedMultiplier:2.5},acceleration:{x:0,y:900},maxSpeed:0,startRotation:{min:250,max:290},noRotation:!1,rotationSpeed:{min:-100,max:100},lifetime:{min:2,max:4},blendMode:"normal",frequency:.1,emitterLifetime:r,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-50,y:0,w:100,h:0}},{framerate:0,loop:!1,textures:["pearl_Blue.png","pearl_Pink.png","pearl_Yellow.png"]})}function Y3(){return E.jsxs(ye,{children:[E.jsx(Ar,{x:170,y:370,scale:1,playing:!0,config:DP}),E.jsx(Ar,{x:100,y:770,scale:1,playing:!0,config:FP}),E.jsx(Ar,{x:420,y:820,scale:1,playing:!0,config:FP}),E.jsx(Ar,{x:1100,y:770,scale:1,playing:!0,config:DP})]})}const k$=L.forwardRef(({maxScaleLength:r,...e},t)=>{const n=L.useRef();return L.useEffect(()=>{if(r&&n.current){const i=setTimeout(()=>{const s=n.current.width,o=n.current.scale.x,a=r/s*o,u=o>0?1:-1,l=n.current.scale.y>0?1:-1;a<1?n.current.scale.set(a*u,a*l):n.current.scale.x!=1&&n.current.scale.set(1*u,1*l),clearTimeout(i)},1)}},[e.text]),L.useImperativeHandle(t,()=>n.current,[n]),E.jsx(zt.BitmapText,{ref:n,...e})});function I$(r){return kd({alpha:{start:1,end:.7},scale:{start:.4,end:.8,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:800,minimumSpeedMultiplier:3},acceleration:{x:0,y:700},maxSpeed:0,startRotation:{min:240,max:270},noRotation:!1,rotationSpeed:{min:-50,max:50},lifetime:{min:2,max:3},blendMode:"normal",frequency:.1,emitterLifetime:r,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-25,y:0,w:50,h:0}},{framerate:0,loop:!0,textures:ui(18,e=>`coin_${e+1}.png`)})}function t0(r){return kd({alpha:{start:1,end:.8},scale:{start:.5,end:.9,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:500,minimumSpeedMultiplier:2.5},acceleration:{x:0,y:1e3},maxSpeed:0,startRotation:{min:240,max:290},noRotation:!1,rotationSpeed:{min:-50,max:50},lifetime:{min:1.5,max:2},blendMode:"normal",frequency:.1,emitterLifetime:r,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-25,y:0,w:50,h:0}},{framerate:0,loop:!0,textures:ui(18,e=>`coin_${e+1}.png`)})}const M$=({frame:r=[0,0,100,100],color:e,radius:t,...n},i)=>{const s=L.useCallback(o=>{o.clear(),o.beginFill(e),t?o.drawRoundedRect(...r,t):o.drawRect(...r),o.endFill()},[...r,e,t]);return E.jsx(zt.Graphics,{ref:i,draw:s,...n})},Cs=L.forwardRef(M$);function R$({selected:r=0,children:e,duration:t,...n}){const{current:i}=L.useRef({index:r}),[s,o]=L.useState(!1),a=L.useMemo(()=>L.Children.count(e),[]);return ld(t,()=>{i.index=(i.index+1)%a,o(!s)},!0),E.jsx(ye,{...n,children:L.Children.map(e,(u,l)=>{let c,h=!1;return l==i.index?(c={from:{alpha:0,visible:1},to:{alpha:1,visible:1},duration:200},h=!0):c={from:{visible:0}},E.jsx(wr,{dep:[`${l}${r}`],...c,playing:h,children:d=>L.cloneElement(u,d)},`SlideTipTween${l}`)})})}function G3({children:r,slotName:e}){const[t,n]=r,i=L.useRef(null),s=L.useRef(null);return L.useEffect(()=>{if(i.current&&s.current){const o=i.current.skeleton.findSlot(e);i.current.addSlotObject(o,s.current)}},[i,s]),E.jsxs(ye,{children:[L.cloneElement(t,{ref:i}),E.jsx(ye,{ref:s,children:n})]})}new rt(0);new rt(1);new rt(-1);function O$(r){const e=r.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function mn(r=new rt(0),e=2,t=0){return r instanceof rt||(r=new rt(r)),O$(r.toFixed(e,rt.ROUND_FLOOR))}function Md(r){return L.forwardRef(({turbo:e=!1,text:t=new rt(0),tweenOptions:n={},tmp:i="{}",...s},o)=>{const{current:a}=L.useRef({amount:0,id:0}),u=Number(t.toString()),[l,c]=L.useMemo(()=>{const h=a.amount;return a.amount=u,[a.id++,h]},[u]);return E.jsx(wr,{dep:[l],playing:!0,turbo:e,from:{text:c},to:{text:u},duration:1e3,...n,children:h=>E.jsx(r,{ref:o,...s,text:i.replace("{}",mn(h.text))})})})}const m_=Md(mi);Md(Oc);Md(Qz);Md(({text:r,...e})=>E.jsx("div",{...e,children:r}));Md(({text:r,cb:e,...t})=>E.jsx("div",{...t,children:e(r)}));function B$({children:r,speed:e}){const[t,n]=L.useState(0);return zt.useTick((i,s)=>{n((i/1e3*(e*360)+t)%360)},!0),r(Math.PI*2*(t/360))}function L$(r,e=vn.Linear.None){const t=Math.PI*r/180;return n=>{let i=0;return n<.333?i=t*e(n*3):n<.666?i=t-t*2*e((n-.333)*3):i=-t+t*e((n-.666)*3),i}}const UP=t0(2),N$=t0(3),F$=t0(4),D$=t0(7),jP=Id(1),U$=Id(2),j$=Id(3),X$=Id(6),XP=I$(10),H$=Id(9);function z$({dataSource:r}){const{gameStatus:e,nextGameStatus:t}=r.base,{winAmount:n}=r,i=e==xt.showBigWinAmount,s=n.toNumber();function o(u){u.animation.name=="BIGWIN_OUT"&&t()}const a=L.useMemo(()=>i?mn(s):"",[i]);return E.jsx(Tl,{children:E.jsxs(ye,{visible:i,children:[E.jsx(Cs,{frame:[0,0,1170,1170],alpha:.32,interactive:!0}),E.jsxs(zt.Container,{children:[E.jsx(Ar,{x:470,y:505,scale:1,playing:i,config:XP}),E.jsx(Ar,{x:700,y:505,scale:[-1,1],playing:i,config:XP}),E.jsx(Ar,{x:585,y:605,scale:1,playing:i,config:H$})]}),E.jsxs(G3,{slotName:"88800",children:[E.jsx(ch,{x:585,y:585,onComplete:o,playing:i,"l-scale":.5,"p-scale":.4,actions:Rt([[0,"BIGWIN_ENTER",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_OUT",!1]]),toFrameOneWhenStop:!0}),E.jsx(k$,{y:-15,scale:[1,1],anchor:.5,text:a,maxScaleLength:1700,style:{fontName:zR,fontSize:130,align:"center"}})]})]})})}function $$({dataSource:r,...e}){const{gameStatus:t,state:n}=r.base,{autoSpinCount:i,spinModel:s}=n.spin,o=i==""||i>0,a=t=="spin"||t=="stopping",u=t=="idle"&&!o&&(s==null?void 0:s.existWin)!=!0,l=L.useMemo(()=>{const c=Oe.Obj.urlOptions.lang;return c==gn.Vietnamese||c==gn.Khmer||c==gn.Thai?.8:.9},[]);return E.jsxs(ye,{...e,children:[E.jsxs(R$,{selected:0,duration:3e3,visible:u,children:[E.jsx(ga,{scale:l,anchor:.5,name:"Hold for autospin.png"}),E.jsx(ga,{scale:l,anchor:.5,name:"Place your bets.png"})]}),E.jsx(ga,{scale:l,anchor:.5,name:"Good luck.png",visible:a})]})}function Y$({dataSource:r,...e}){var A;const{gameStatus:t,state:n}=r.base,{heigLightLines:i,showLineWin:s}=r.winlines,{currency:o}=n.user,{betLevel:a}=n.spin,{winAmount:u}=r,l=t==xt.showWinAmount,c=l?u.toNumber():0,h=(A=n.spin.spinModel)==null?void 0:A.getWinType(u),d=Rt(Hn(Sn,"win")),p=Sh(i),g=L.useMemo(()=>{let k=0;return p&&s&&(k=n.spin.spinModel.lineBet.mul(p.cls.m).mul(a).toNumber()),mn(k)},[p,s]),v=L.useMemo(()=>l?h=="big"?1e3:h=="high"?4500:h=="medium"?3500:h=="normal"?2500:1500:0,[l]),[x,y,b,_,S]=L.useMemo(()=>l?[h=="small",h=="normal",h=="medium",h=="high",h=="big"]:[!1,!1,!1,!1,!1],[l]),I=L.useMemo(()=>{const k=Oe.Obj.urlOptions.lang;return k==gn.Vietnamese||k==gn.Khmer||k==gn.Thai?30:35},[]);return E.jsxs(ye,{...e,children:[E.jsx(m_,{visible:l,y:2,anchor:.5,tweenOptions:{duration:v,playing:l,turbo:!0},text:c,style:{fill:"#a8cbff",fontFamily:Rt(Oe.Obj.urlOptions.lang),fontWeight:"bolder",fontSize:45,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),E.jsx(mi,{visible:s,y:3,anchor:.5,text:`${d} ${o} ${g}`,style:{fill:"#ffdc00",fontFamily:Rt(Oe.Obj.urlOptions.lang),fontWeight:"bolder",fontSize:I,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:x,config:UP}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:y,config:N$}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:b,config:F$}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:_,config:D$}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:S,config:UP}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:x,config:jP}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:y,config:U$}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:b,config:j$}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:_,config:X$}),E.jsx(Ar,{turbo:!0,y:-45,scale:1,playing:S,config:jP})]})}function G$({dataSource:r,...e}){const{state:t}=r.base,{history:n}=r.winlines,i=n.length,{spinModel:s,betLevel:o}=t.spin,a=s?s.lineBet.mul(o).toNumber():0;return E.jsxs(ye,{...e,children:[E.jsx(it,{name:"history-frame.png",scale:1}),E.jsxs(bh,{children:[E.jsx(ye,{x:10,y:10,children:n.map((u,l)=>E.jsx(V$,{line:u,lineIndex:l,lineCount:i,betAmount:a},`history${l}`))}),E.jsx(Cs,{frame:[9,9,156,260]})]})]})}function W$({dataSource:r,...e}){const{state:t}=r.base,{history:n}=r.winlines,i=n.length,{spinModel:s,betLevel:o}=t.spin,a=s?s.lineBet.mul(o).toNumber():0;return E.jsxs(ye,{...e,children:[E.jsx(it,{name:"history-frame-p.png"}),E.jsxs(bh,{x:13,y:15,children:[E.jsx(ye,{children:n.map((u,l)=>E.jsx(q$,{line:u,lineIndex:l,lineCount:i,betAmount:a},`history${l}`))}),E.jsx(Cs,{frame:[0,0,320,114]})]})]})}function V$({line:r,lineIndex:e,lineCount:t,betAmount:n}){const i=e==t-1,[s,o,a]=[r.s,r.cls.c.length,r.cls.m.valueOf()],[u,l]=L.useMemo(()=>t<=5?e+1==t?[{x:0,y:-1},{x:0,y:4-e}]:[{x:0,y:4-e},{x:0,y:4-e}]:[{x:0,y:t-3-e},{x:0,y:t-1-e}],[t]);function c(h){return{x:(u.x+(l.x-u.x)*h)*141,y:(u.y+(l.y-u.y)*h)*52}}return E.jsx(wr,{turbo:!0,dep:[t],from:{k:0},to:{k:1},duration:500,playing:!0,children:({k:h})=>{const d=c(h);return E.jsx(W3,{...d,isActive:i,s,c:o,m:a,betAmount:n})}})}function q$({line:r,lineIndex:e,lineCount:t,betAmount:n}){const i=e==t-1,[s,o,a]=[r.s,r.cls.c.length,r.cls.m.valueOf()],[u,l]=L.useMemo(()=>{const h=t-e;return h<=2?[{x:0,y:t-2-e},{x:0,y:t-1-e}]:h==3?[{x:0,y:1},{x:1,y:0}]:[{x:1,y:h-4},{x:1,y:1+(h-4)}]},[t]);function c(h){return{x:(u.x+(l.x-u.x)*h)*161,y:(u.y+(l.y-u.y)*h)*60}}return E.jsx(wr,{turbo:!0,dep:[t],from:{k:0},to:{k:1},duration:500,playing:!0,children:({k:h})=>{const d=c(h);return E.jsx(W3,{...d,isActive:i,s,c:o,m:a,betAmount:n})}})}function W3({isActive:r,s:e,c:t,m:n,betAmount:i,...s}){return E.jsxs(ye,{...s,children:[E.jsx(ye,{children:E.jsx(it,{name:"winhistory_highlight.png",visible:r})}),E.jsxs(ye,{children:[E.jsx(tm,{y:[6,6,6,6,6,6,3,2][e],scale:[1,1,1,1,.9,1,.9,1][e]*.5,x:6,name:`${e}.png`}),E.jsx(mi,{anchor:[0,.5],x:51,y:37,text:`x${t}`,maxScaleLength:100,style:{fill:"#ffffff",fontFamily:Rt(Oe.Obj.urlOptions.lang),fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),E.jsx(mi,{anchor:[1,.5],x:150,y:13,text:`${mn(n*i)}`,maxScaleLength:100,style:{fill:"#ffffff",fontFamily:Rt(Oe.Obj.urlOptions.lang),fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})]})}function K$({dataSource:r,...e}){const{history:t}=r.winlines,n=t[t.length-1];return E.jsxs(ye,{...e,children:[E.jsx(it,{name:"radar-frame.png",scale:1}),E.jsx(ye,{x:13,y:13,children:n==null?void 0:n.cls.c.map((i,s)=>E.jsx(it,{name:"minimap_highlight.png",x:i[0]*30,y:i[1]*22},`h${s}`))})]})}function Q$({...r}){const{turbo:e=!0,on:t,cellCount:n,collaspedRows:i=[],result:s=[],children:o,onEnd:a,easing:u=vn.Linear.None}=r,[l,c]=L.useState(!1),{current:h}=L.useRef({fallTime:0}),d=i.length,p=L.useMemo(()=>{const v=[];h.fallTime=0;let x=n-1;for(let y=d;y>0;y--){const b=-y+d;v.push({from:-y,to:b,selected:s[b]})}for(let y=n-1;y>=0;y--)i.indexOf(y)==-1&&(v.push({from:y,to:x,selected:s[x]}),x--);return v},[t,s]);wh((v,x)=>{h.fallTime+=v,c(!l)},t,e);const g=L.useMemo(()=>{const v=[],x=p_.defaultUp(0,.2,h.fallTime/200);return p.forEach((y,b)=>{const{from:_,to:S,selected:I}=y,A=S-_,k=Math.min(x,A),M=A==0?0:u(k/A)*A,O=_+M;v.push({k:O,selected:I})}),x>=d&&d>0&&a(),v.sort((y,b)=>y.k-b.k),v},[l,s]);return o(g)}function Z$({...r}){const{state:e}=L.useContext(gt),{startSpeed:t=0,speed:n=24,accTime:i,decTime:s,accEasing:o=vn.Linear.None,decEasing:a=vn.Linear.None}=r,{turbo:u=!0,children:l,inColumn:c,cellCount:h,symbols:d,result:p,playing:g,stop:v,onEnd:x}=r,{current:y}=L.useRef({spinTime:0,stopingTime:0,resultK:0,ssMap:{}}),[b,_]=L.useState(!1),S=2*h;function I(X){return p_.up(t,n,i,X)}function A(X){return p_.down(n,0,s,X)}function k(X,B){const N=X+B;let j=y.ssMap[N];return Vu(j)&&(v&&y.resultK==X?j=p[B]:j=D3(d),y.ssMap[N]=j),j}const M=I(i),O=A(s);L.useMemo(()=>{y.spinTime=0,g?(y.stopingTime=0,y.resultK=0):(y.ssMap={},p.forEach((X,B)=>{y.ssMap[B]=X}))},[g]),L.useMemo(()=>{e.spin.status=="idle"&&(y.ssMap={},p.forEach((X,B)=>{y.ssMap[B]=X}),_(!b))},[e.spin.status]),L.useMemo(()=>{if(v){const X=M+Math.max(0,y.spinTime-i)/1e3*n;let B=Math.ceil(X+Math.max(h,O));B=Math.ceil(B/S)*S,y.resultK=B,y.stopingTime=i+(B-O-M)/n*1e3}},[v]),wh((X,B)=>{y.spinTime+=X,_(!b),v&&y.spinTime>=y.stopingTime+s&&x(c)},g,u);const F=L.useMemo(()=>{let X;const B=y.spinTime;if(B<=i)X=I(o(B/i)*i);else if(!v||B<=y.stopingTime)X=M+(B-i)/1e3*n;else if(B>=y.stopingTime+s)X=y.resultK;else{const N=B-y.stopingTime;X=M+(y.stopingTime-i)/1e3*n+A(a(N/s)*s)}return X},[y.spinTime,g]),U=L.useMemo(()=>{let X=F%S;X>=h&&(X=-h+(X-h));const B=Math.floor((F+h)/S)*S;return ui(h,j=>({k:X+j,selected:k(B,j)}))},[b,F,g]);return l(U)}const J$=({inSpin:r,selected:e,crack:t,collasping:n,tint:i,...s})=>{const o=L.useMemo(()=>[[0,"HP_SHELL_WIN",!0],[0,"HP_SHELL2_WIN",!0],[0,"HP_SHELL3_WIN",!0],[0,"HP_TURTLE_WIN",!0],[0,"HP_SHARK_WIN",!0],[0,"HP_OCTOPUS_WIN",!0]][e],[e]),a=t||n,u=!a;return E.jsxs(ye,{...s,children:[E.jsx(V3,{res:Xw,visible:u,name:`${e}.png`,angle:16,anchor:.5,scale:1,tint:i,inSpin:r}),E.jsx(ch,{turbo:!0,playing:a,visible:a,action:o,scale:.5,toFrameOneWhenStop:!0,tint:i})]})},eY=({inSpin:r,collasping:e,collasped:t,crack:n,selected:i,tint:s,...o})=>{const[a,u]=L.useState(!1),[l,c]=L.useState(!1);return L.useEffect(()=>{u(e)},[e]),L.useEffect(()=>{t||c(!1)},[t]),Ja(()=>{c(!0)},150,a),E.jsxs(ye,{...o,visible:o.visible!=!1&&!t,children:[E.jsx(J$,{selected:i,crack:n,collasping:a,visible:!l,inSpin:r,tint:s}),E.jsx(wr,{turbo:!0,from:{scale:0},to:{scale:.4},duration:1e3,easing:vn.Elastic.Out,playing:n,children:({scale:h})=>E.jsx(ch,{scale:h,action:Rt([0,"BUBBLES_IDLE",!0]),visible:n,playing:n,toFrameOneWhenStop:!0})}),E.jsx(ch,{turbo:!0,scale:.5,action:Rt([0,"BUBBLES_CRUSH",!1]),visible:a,playing:a,onComplete:u.bind(null,!1),toFrameOneWhenStop:!0})]})};function tY({children:r,dataSource:e}){const{gameStatus:t,dispatch:n,state:i}=e.base,{spinModel:s}=i.spin,{current:o}=L.useRef({startSpinIndex:0,stopSpinIndex:-1,stopedColumn:[],stopping:!1}),[a,u]=L.useState(!1),l=t=="stopping",c=t=="spin"||l,h=s?s.ss:y$(),d=L.useMemo(()=>ui(5,p=>({playing:c&&p<=o.startSpinIndex&&o.stopedColumn.indexOf(p)<0,stop:l&&p<=o.stopSpinIndex,result:h[p],onEnd:g=>{o.stopedColumn.indexOf(g)<0&&(o.stopedColumn.push(g),o.stopedColumn.length==5?n(zw()):u(!a))}})),[t,o.startSpinIndex,o.stopSpinIndex]);return Rc(50,()=>{o.startSpinIndex++,u(!a)},c&&o.startSpinIndex<5),Rc(50,()=>{o.stopSpinIndex++,u(!a)},o.stopping&&l&&o.stopSpinIndex<5&&o.startSpinIndex==5),Ja(()=>{o.stopping=!0,u(!a)},200,l&&o.stopSpinIndex<5&&o.startSpinIndex==5&&!o.stopping),L.useEffect(()=>{c||(o.stopSpinIndex=-1,o.startSpinIndex=0,o.stopedColumn=[],o.stopping=!1,u(!a))},[c]),r(d)}function rY({dataSource:r,...e}){const{gameStatus:t,dispatch:n,state:i}=r.base,{isCollasped:s,isCrack:o,isCollasping:a,isCollapseSymbol:u}=r.winlines,{spinModel:l}=i.spin,{current:c}=L.useRef({collaspedInColumnRows:{}}),h=Rt(ui(6,_=>_)),d=t=="spin",p=t=="stopping",g=d||p,v=t==xt.showWinAmount,x=t==xt.collapsing,y=t==xt.reSpin||t==xt.reSpinStoping;L.useMemo(()=>{const _={};if(t==xt.reSpin){for(const S of l.winLines)for(const[I,A]of S.cls.c){const k=_[I];k?k.indexOf(A)<0&&k.push(A):_[I]=[A]}c.collaspedInColumnRows=_}else t!=xt.reSpinStoping&&(c.collaspedInColumnRows=_)},[t]);function b(_){delete c.collaspedInColumnRows[_],Object.keys(c.collaspedInColumnRows).length==0&&n(zw())}return E.jsxs(ye,{...e,children:[E.jsx(V3,{x:285,y:311,anchor:.5,name:"reel.png",angle:4,inSpin:d}),E.jsx(nY,{dataSource:r,x:74,y:68}),E.jsxs(bh,{active:!0,children:[E.jsx(ye,{x:72,y:70,children:E.jsx(tY,{dataSource:r,children:_=>ui(5,S=>{const I=_[S];return E.jsx(ye,{x:S*103,children:E.jsx(Z$,{...I,inColumn:S,startSpeed:-2,speed:15,accTime:700,decTime:700,decEasing:vn.Bounce.Out,cellCount:5,symbols:h,children:A=>E.jsx(Q$,{turbo:!0,on:t==xt.reSpinStoping,cellCount:5,collaspedRows:c.collaspedInColumnRows[S],result:l==null?void 0:l.ss[S],onEnd:b.bind(null,S),easing:vn.Bounce.Out,children:k=>(y?k:A).map((O,F)=>{const{k:U,...X}=O,B=o([S,F]),N=a([S,F]),j=s([S,F]),W=v||x&&!u([S,F])?11184810:16777215;return E.jsx(eY,{tint:W,inSpin:g,crack:B,collasping:N,collasped:j,y:103*U,...X},`symbol${F}`)})})})},`reel${S}`)})})}),E.jsx(Cs,{frame:[20,13,520,516]})]})]})}function V3({inSpin:r,angle:e=8,...t}){const[n,i]=L.useState(!1);return L.useMemo(()=>{r&&i(!0)},[r]),E.jsx(wr,{from:{k:0},to:{k:1},duration:300,easing:L$(e),playing:n,onComplete:i.bind(null,!1),children:({k:s})=>E.jsx(it,{...t,rotation:s})})}function nY({dataSource:r,...e}){const{heigLightLines:t,isCollasping:n,isCollasped:i}=r.winlines,s=t.length,o=L.useMemo(()=>{const a=[];for(const u of t)a.push(...u.cls.c);return a},[s]);return E.jsx(ye,{...e,children:o.map(([a,u],l)=>E.jsx(wr,{from:{alpha:0},to:{alpha:1},playing:!0,duration:500,children:({alpha:c})=>{const h=n([a,u])||i([a,u]);return E.jsx(wr,{from:{k:0},to:{k:1},playing:h,duration:150,children:({k:d})=>E.jsx(it,{alpha:c*(d==1?0:1),x:a*103,y:u*103,anchor:.5,name:"Winframe.png"})})}},`wf${a}${u}`))})}const xb="IchannelDefault",oo=$i.Obj;function Vo(r){const{dep:e=[],channelId:t=xb,sound:n,sounds:i=[],volum:s=1,playing:o=!0,allowStop:a=!0,softBgm:u,loop:l=!1,onSoundEnd:c}=r;return L.useEffect(()=>{n&&(o?oo.play(t,n,s,u,l,c):a&&oo.stop(t,n))},[n,o,...e]),L.useEffect(()=>{i.length>0&&(o?oo.plays(t,i,s,u,c):a&&oo.stops(t,i))},[i,o,...e]),L.useEffect(()=>{oo.setVolumn(t,n,s)},[s]),E.jsx(E.Fragment,{})}function iY(r){const{dep:e=[],channelId:t="channelBgm",sound:n="bgm",volum:i=1,playing:s=!0,soft:o=.3}=r;return L.useEffect(()=>{if(s)return oo.playBgm(t,n,i,o),()=>{oo.pause(t,n)};oo.pause(t,n)},[n,s,...e]),L.useEffect(()=>{oo.setVolumn(t,n,i)},[i]),E.jsx(E.Fragment,{})}function q3(r,e="click"){function t(n){const i={};return i[e]=n,i}return L.forwardRef(({channelId:n=xb,sound:i,volum:s=1,softBgm:o,onSoundEnd:a,...u},l)=>{const c=u[e];function h(d){$i.clickSound(),c&&c(d)}return E.jsx(r,{...u,ref:l,...t(h)})})}function g_({volumn:r=1,playing:e,fadeInTime:t=0,fadeOutTime:n=0,children:i}){const[s,o]=L.useState(!1),[a,u]=L.useState(!1),[l,c]=L.useState(!1);return L.useEffect(()=>{e?(o(!0),c(!0),u(!1)):s&&(c(!1),u(!0))},[e]),gl(()=>{o(!1),u(!1),c(!1)},n,!e&&s),E.jsx(wr,{dep:[l,a],from:{k:0},to:{k:1},playing:l||a,duration:a?n:t,children:({k:h})=>(h=l?h:1-h,h*=r,L.cloneElement(i,{volum:h,playing:s}))})}function sY(){const{state:r}=L.useContext(gt),e=Sh(r.sceneManager.scenes),t=L.useMemo(()=>{if(e=="main")return"bgm";if(e=="premain")return"loading_bgm"},[e]);return E.jsx(iY,{sound:t,playing:!!t,volum:.8})}function oY({dataSource:r}){const{gameStatus:e,state:t,nextGameStatus:n}=r.base,{winAmount:i}=r,s=e==xt.showWinAmount,o=t.spin.status=="spin",a=e==xt.collapsing,u=L.useMemo(()=>{var c;const l=(c=t.spin.spinModel)==null?void 0:c.getWinType(i);return l=="big"?3e3:l=="high"?8e3:l=="medium"?6e3:l=="normal"?4e3:3e3},[s]);return Ja(()=>{n()},u+500,s),E.jsxs(E.Fragment,{children:[E.jsx(Vo,{sound:"spin",softBgm:!0,playing:o,allowStop:!1}),E.jsx(Vo,{sound:"sfx_panel_display",softBgm:!0,playing:a,allowStop:!1,volum:.7}),E.jsx(Vo,{sound:"drop",softBgm:!0,playing:e==xt.reSpinStoping,allowStop:!1}),E.jsx(Vo,{sounds:Rt(["Highlight","Appear","Pop_Up"]),playing:a,allowStop:!0,softBgm:!0}),E.jsx(aY,{playing:s,duration:u-1e3}),E.jsx(g_,{playing:s||a,fadeInTime:1e3,fadeOutTime:2e3,volumn:.5,children:E.jsx(Vo,{channelId:"layerCover",sound:"win_layer",allowStop:!0,softBgm:!0})}),E.jsx(g_,{fadeInTime:1e3,playing:e==xt.showBigWinAmount,children:E.jsx(Vo,{channelId:"bigwin",sounds:Rt(["win_big","win_big_outro"]),allowStop:!0,softBgm:!0})})]})}function aY({playing:r,duration:e}){const[t,n]=L.useState("idle"),[i,s]=L.useState(!1),[o,a]=L.useState(!1),u=t=="idle",l=t=="outro";return L.useEffect(()=>{r?(s(!0),n("idle")):(s(!1),a(!1))},[r]),gl(()=>{a(!0),s(!1)},e,r&&!o),gl(()=>{n("outro")},e-500,r&&!o&&u),E.jsxs(E.Fragment,{children:[E.jsx(g_,{fadeInTime:1500,playing:i&&u,children:E.jsx(Vo,{channelId:"winmeter",sound:"winmeter_bgm",allowStop:!0,softBgm:!0})}),E.jsx(Vo,{sound:"winmeter_outro",playing:i&&l,allowStop:!0,softBgm:!0})]})}const K3=L.forwardRef(({children:r,enable:e=!0,click:t,...n},i)=>{const s=a_(t,300,[]),o={};return o.ontouchend=s||null,o.click=s,E.jsx(ye,{cursor:"pointer",interactive:e,...o,...n,ref:i,children:r})}),lY=1e3;function Q3({children:r,enable:e=!0,onpointerup:t,onLongPress:n,...i}){const{isMobile:s,isTablet:o}=Oe.Obj,[a,u]=L.useState(0),[l,c]=L.useState(!1),[h,d]=L.useState(!1);function p(y){c(!0),u(Date.now())}function g(){d(!1),u(0),c(!1)}function v(y){(!n||!h)&&t&&t(y),g()}zt.useTick(()=>{!h&&Date.now()-a>=lY&&(d(!0),n&&n())},a>0&&!h);const x={};return s||o?(x.ontouchstart=p,x.ontouchend=v,x.ontouchcancel=g,x.ontouchendoutside=g):(x.onmousedown=p,x.onmouseup=v,x.onmouseout=g,x.onmouseupoutside=g),E.jsx(ye,{cursor:"pointer",interactive:e,...i,...x,children:E.jsx(ye,{scale:l?.9:1,children:r})})}const Ps=q3(K3);q3(Q3,"onpointerup");const uY=({path:r,color:e,bColor:t,border:n=0,...i},s)=>{const o=L.useCallback(a=>{a.clear(),a.beginFill(e),a.lineStyle(n,t,1),a.moveTo(...r[0]);for(let u=1;u<r.length;u++)a.lineTo(...r[u]);a.lineTo(...r[0]),a.endFill()},[r,e]);return E.jsx(zt.Graphics,{ref:s,draw:o,...i})},HP=L.forwardRef(uY);function hY({children:r,selected:e=0,cellHeight:t,onSelectedChange:n,onScrollStart:i,onScrollEnd:s,selectedColor:o=16691720,...a}){const{isMobile:u,isTablet:l}=Oe.Obj,[c,h]=L.useState(!1),{current:d}=L.useRef({tween:null,startPoint:null,movement:{x:0,y:0},page:e,update:!1}),p=L.Children.count(r),g=Math.floor(p/2);function v(M){return(M+g+p)%p-g}function x(){const M=d.movement.y/t;return(d.page+M+p)%p}function y(M,O=!0,F=d.page){O&&F!=M?(d.tween&&(d.tween.stop(),Dk(d.tween)),d.tween=new V_({page:F}).to({page:M},200).onUpdate(U=>{d.page=U.page,d.update=!0}).onComplete(()=>{const U=Math.round((M+p)%p);n&&n(U),d.page=U,d.update=!0}).start(Oe.Obj.getTime(!1))):d.page=M}function b(M){d.startPoint={x:M.x,y:M.y},i&&i()}function _(M){d.startPoint&&(d.update=!0,d.movement={x:-(M.x-d.startPoint.x),y:-(M.y-d.startPoint.y)})}function S(M){if(d.startPoint){let O=d.movement.y/t;const F=d.page+O;O=Math.round(O+(O>0?.25:-.25));const U=d.page+O;d.startPoint=null,s&&s(),d.movement={x:0,y:0},y(U,!0,F)}}const I=L.useMemo(()=>x(),[d.movement.x,d.movement.y,d.page]);L.useEffect(()=>{d.page!=e&&y(e,!0,d.page)},[e]),zt.useTick(()=>{d.update&&(h(!c),d.update=!1)},!0);function A(M){const O=t,F=Math.abs(M),U=Math.max(0,3-F),X=F<2.5?.4+U*.2:0,B=F<.5?o:16777215;return{y:M*O,scale:X,tint:B}}const k={};return u||l?(k.ontouchstart=b,k.ontouchmove=_,k.ontouchend=S,k.ontouchcancel=S,k.ontouchendoutside=S):(k.onmousedown=b,k.onmousemove=_,k.onmouseup=S,k.onmouseout=S,k.onmouseupoutside=S),E.jsx(ye,{interactive:!0,cursor:"pointer",...k,...a,children:L.Children.map(r,(M,O)=>{const F=v(-I+O);return L.cloneElement(M,A(F))})})}function cY({betAmount:r,on:e,onClose:t,onSelectedChange:n,lineBets:i}){const[s,o]=L.useState(0),{current:a}=L.useRef({inScroll:!1,ebaleClose:!1}),u=Oe.Obj;L.useEffect(()=>{const p=()=>{const g=u.viewport[1],v=u.viewport[3],x=u.layoutOptions.displayArea[1];o(-g+v+x)};return p(),u.notice.on(Yi,p),()=>{u.notice.off(Yi,p)}},[]);const l=L.useMemo(()=>i.map(p=>Number(p)).indexOf(r),[r]);function c(){a.inScroll=!0}function h(){a.inScroll=!1}function d(){a.ebaleClose&&!a.inScroll&&t&&t()}return L.useMemo(()=>{e&&(a.ebaleClose=!1)},[e]),gl(()=>{a.ebaleClose=!0},500,e&&!a.ebaleClose),E.jsxs(ye,{children:[E.jsx(Ps,{click:d,hitFrame:[0,0,1170,1170],visible:e}),E.jsx(wr,{dep:[e],from:{k:0},to:{k:1},playing:!0,duration:300,easing:vn.Cubic.In,children:({k:p})=>{const g=(e?-380*p:1e3)+s;return E.jsxs(ye,{y:g,children:[E.jsx(Cs,{frame:[0,0,1170,380],color:1908791,alpha:.9,interactive:!0}),E.jsx(ye,{children:E.jsx(Oc,{x:585,y:20,anchor:.5,text:"betamount",style:{fill:"#ffffff",fontFamily:"Verdana",fontWeight:"bold",fontSize:23}})}),E.jsxs(ye,{y:173,children:[E.jsx(Cs,{frame:[0,0,1170,60],alpha:.72}),E.jsx(Cs,{frame:[0,0,1170,1],color:11062271}),E.jsx(Cs,{frame:[0,0,1170,1],color:11062271,y:57}),E.jsx(HP,{x:775,y:15,path:[[0,0],[0,30],[-15,15]],color:11062271}),E.jsx(HP,{x:400,y:15,path:[[0,0],[0,30],[15,15]],color:11062271})]}),E.jsxs(bh,{children:[E.jsx(hY,{hitFrame:[0,-270,1170,500],selected:l,cellHeight:60,y:203,onSelectedChange:n,selectedColor:11062271,onScrollStart:c,onScrollEnd:h,children:i.map((v,x)=>E.jsx(mi,{x:585,y:25,anchor:.5,text:`${v}`,style:{fill:"#ffffff",fontWeight:"500",fontSize:50}},`selecterItem${x}`))}),E.jsx(it,{name:"selecter_mask.png",scale:[234,2],y:35})]})]})}})]})}const fg=class fg{constructor(){C(this,"keys",[]);C(this,"keysChangedFCMap",{});window.addEventListener("keydown",this.onKeyDownHandler.bind(this)),window.addEventListener("keyup",this.onKeyUpHandler.bind(this))}static get Obj(){return this._Obj||(this._Obj=new fg),this._Obj}onKeyDownHandler(e){if(e&&e.key){const t=e.key.toLowerCase();this.keys.indexOf(t)==-1&&this.keys.push(t)}}onKeyUpHandler(e){if(e&&e.key){let t=e.key.toLowerCase();const n=this.keys.indexOf(t);if(n>-1){t=bj(t);const i=`onKey${t==" "?"Space":t}`,s=this.keysChangedFCMap[i];for(const o of s||[])o();this.keys.splice(n,1)}}}setKeysFCMap(e,t){const n=this.keysChangedFCMap[e];n?n.push(t):this.keysChangedFCMap[e]=[t]}removeFc(e,t){const n=this.keysChangedFCMap[e],i=n.indexOf(t);i>-1&&n.splice(i,1)}};C(fg,"_Obj");let v_=fg;function Z3({enable:r=!0,sound:e=!0,...t}){return L.useEffect(()=>{const n=v_.Obj,i=[];if(r){for(const o in t)o.match(/onKey[A-Z]\w+/)&&i.push(o);const s={};for(const o of i){let a=function(){u(),$i.clickSound()};const u=t[o];n.setKeysFCMap(o,a),s[o]=a}return()=>{for(const o of i)n.removeFc(o,s[o])}}},[t]),E.jsx(E.Fragment,{})}function dY({enable:r=!0,dataSource:e,...t}){const{dispatch:n,gameStatus:i,state:s,onSkip:o}=e.base,{betAmount:a,betLevel:u,spinModel:l}=s.spin,{balance:c}=s.user,{code:h}=s.setting.error,[d,p]=L.useState("idle"),g=s.spin.autoSpinCount==""||s.spin.autoSpinCount>0,v=c.greaterThanOrEqualTo(a.mul(u)),x=i=="idle",y=(l==null?void 0:l.existWin)==!0,b=d=="idle",_=d=="fast"||d=="fast1500",S=d=="stop",I=d=="skip",A=i==xt.showWinAmount,{historyListOn:k,historyDetail:{on:M},payTableOn:O,menuOn:F}=s.setting,U=r&&!k&&!M&&!O&&!F;function X(){!(l?l.existWin:!1)&&!v?(g&&n(IP()),n(Jr(FR.NotEnoughBalance,!0,!0))):h||n(AP())}function B(re=null,he=!1){!A&&g&&!he&&n(IP()),S?(n(AP()),$i.clickSound()):A?(o(),$i.clickSound()):x&&X()}function N(){!g&&x&&!y&&n(wz("","",0,0))}L.useEffect(()=>{if(i=="spin"&&!y){const re=a.mul(u);n(Fy(c.sub(re)))}else i=="idle"&&!y&&!(l!=null&&l.isFromLoad)?n(Fy((l==null?void 0:l.balance)||c)):i=="stopping"&&l.payout.isZero()&&!c.eq(l.balance)&&n(Fy(l.balance))},[i]),L.useEffect(()=>{i=="spin"?p("fast"):x?p("idle"):i!="stopping"&&d!="fast"?p("skip"):i=="stopping"&&d=="fast1500"&&p("stop")},[i]),gl(()=>{i=="stopping"?p("stop"):x?p("idle"):i!="spin"?p("skip"):p("fast1500")},1500,d=="fast"),gl(()=>{B(null,!0)},y?0:500,x&&(g||y));const j=_||b&&!g&&!y,W=S,Q=I&&i==xt.showWinAmount,H=x&&g&&!y,G=U&&(x&&!y||W||Q),z=G||g,V=_||G?16777215:11184810,Z=L.useMemo(()=>g?[0,"Auto",!0]:[0,"Idle",!0],[g]);return E.jsxs(ye,{children:[E.jsx(Z3,{onKeySpace:B.bind(null,null,!0),onKeyEnter:B.bind(null,null,!0),enable:G,sound:!1}),E.jsx(ye,{...t,children:E.jsx(Q3,{hitFrame:[-65,-65,110,110],onpointerup:B,onLongPress:N,interactive:z,children:E.jsxs(ye,{x:91,y:87,pivot:[98,94],children:[E.jsxs(G3,{slotName:"Counter",children:[E.jsx(v$,{scale:.5,action:Z,playing:!0,timeScale:1,tint:V}),E.jsx(it,{anchor:.5,scale:4,name:"infinite.png",visible:H})]}),E.jsx(B$,{speed:d!="idle"?2:.1,children:re=>E.jsxs(ye,{children:[E.jsx(it,{visible:j,anchor:.5,name:"Spin.png",rotation:re}),E.jsx(it,{visible:W,anchor:.5,name:"stop.png"}),E.jsx(it,{visible:Q,anchor:.5,name:"skip.png"})]})})]})})})]})}const fY=({dataSource:r})=>{const{dispatch:e,gameStatus:t,state:n}=r.base,{speedModel:i,spinModel:s}=n.spin,o=n.spin.autoSpinCount==""||n.spin.autoSpinCount>0,a=i=="fast",u=t=="idle",l=u&&(s==null?void 0:s.existWin)!=!0;function c(){u&&e(bz(a?"normal":"fast"))}return E.jsx(Tl,{children:E.jsxs(ye,{"l-x":925,"l-y":-28,"p-x":582,"p-y":-100,"l-scale":1,"p-scale":1,children:[E.jsx(dY,{dataSource:r,"l-x":73,"l-y":-50,"p-x":10,"p-y":-8,"l-visible":!0,"p-visible":!0,"l-enable":!0,"p-enable":!0}),E.jsxs(Ps,{"l-x":75,"l-y":73,"p-x":240,"p-y":35,click:c,"l-scale":1,"p-scale":.8,interactive:l&&!o,children:[E.jsx(it,{name:"turbo_disable.png",anchor:.5,visible:a||!l||o}),E.jsx(it,{name:"turbo_enable.png",anchor:.5,visible:!a&&l&&!o}),E.jsx(wr,{from:{k:0},to:{k:1},playing:a,duration:2e3,repeat:1e6,children:({k:h})=>E.jsx(it,{visible:a,alpha:.5+Math.sin(Math.PI*2*h)*.5,name:"turbo_activate.png",anchor:.5,x:3,y:-5})})]})]})})};function pY({dataSource:r}){const{state:e,dispatch:t,gameStatus:n}=r.base,{menuOn:i}=e.setting,{currency:s,balance:o}=e.user,{betLevel:a,betAmount:u,lineBetsModel:l,spinModel:c}=e.spin,[h,d]=L.useState(!1),{lineBets:p}=e.spin.lineBetsModel,g=L.useRef(null),v=L.useRef(null),x=Oe.Obj,y=oi.any,_=n=="idle"&&(c==null?void 0:c.existWin)!=!0,S=e.spin.autoSpinCount==""||e.spin.autoSpinCount>0;function I(){const U=p.indexOf(u.toFixed(2))+1;U<p.length&&t(eo(p[U]))}function A(){const U=p.indexOf(u.toFixed(2))-1;U>=0&&t(eo(p[U]))}function k(){t(lI(!i))}L.useEffect(()=>{if(g.current,v.current){const U=()=>{const X=x.orientation,B=x.viewport[0],N=x.viewport[1],j=x.viewport[3],W=x.layoutOptions.displayArea[0],Q=x.layoutOptions.displayArea[1];g.current.y=j-N+Q,X=="l"||v.current.position.set(-B+50+W,-N+50+Q)};return U(),x.notice.on(Yi,U),()=>{x.notice.off(Yi,U)}}},[g]);const M=_&&!S&&u.toNumber()!=Number(l.lineBets[0]),O=_&&!S&&u.toNumber()!=Number(Sh(l.lineBets)),F=Rt(Oe.Obj.urlOptions.lang);return E.jsxs(ye,{children:[E.jsxs(Tl,{children:[E.jsxs(ye,{"l-x":585,"p-x":585,"l-pivot":[585,87],"p-pivot":[585,82],ref:g,children:[E.jsx(it,{name:"UI_Container.png","l-y":-220,"p-y":-300}),E.jsx(it,{name:"value_bg.png",x:82,"l-y":22,"p-y":10}),E.jsx(Ps,{interactive:_&&!S,"l-x":65,"l-y":48,"p-x":320,"p-y":-64,"l-visible":!0,"p-visible":!0,click:k,children:E.jsx(it,{name:"menu-on.png",anchor:.5,tint:_&&!S?16777215:8947848})}),E.jsxs(ye,{"l-x":280,"l-y":7,"p-x":383,"p-y":-5,children:[E.jsxs(ye,{"l-x":250,"l-y":-15,"p-x":202,"p-y":-15,children:[y?E.jsx(ye,{children:E.jsxs(Ps,{y:50,interactive:_&&!S,click:d.bind(null,!0),children:[E.jsx(it,{name:"bet_amount_bg.png",anchor:.5,"l-scale":1,"p-scale":.8,tint:_&&!S?16777215:8947848}),E.jsx(mi,{anchor:.5,y:-2,text:mn(u),maxScaleLength:95,style:{fontSize:30,fill:"#ffdc00",fontFamily:F,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})}):E.jsxs(ye,{children:[E.jsxs(ye,{y:50,children:[E.jsx(Ps,{"l-x":-95,"p-x":-75,click:A,interactive:M,children:E.jsx(it,{name:"bet_minus.png",anchor:.5,tint:M?16777215:8947848})}),E.jsx(Ps,{"l-x":95,"p-x":75,click:I,interactive:O,children:E.jsx(it,{name:"bet_plus.png",anchor:.5,tint:O?16777215:8947848})})]}),E.jsx(ye,{y:52,children:E.jsx(mi,{anchor:.5,y:-2,text:`${mn(u)}`,maxScaleLength:100,style:{fill:"#ffdc00",fontFamily:F,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]}),E.jsx(Oc,{"l-y":y?0:5,"p-y":y?0:10,anchor:.5,text:"betamount",style:{fill:"#ffdc00 ",fontFamily:F,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]}),E.jsxs(ye,{x:-20,children:[E.jsx(Oc,{anchor:.5,text:"balance",style:{fill:"#eeeeee",fontFamily:F,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),E.jsx(ye,{y:37,children:E.jsx(m_,{anchor:.5,tmp:`${s} {}`,"p-maxScaleLength":240,"l-maxScaleLength":300,text:o.toNumber(),tweenOptions:{duration:500},style:{fontSize:26,fill:"#eeeeee",fontFamily:F,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]}),E.jsxs(ye,{"l-x":510,"p-x":424,children:[E.jsx(Oc,{anchor:.5,text:"totalbet",style:{fill:"#eeeeee",fontFamily:F,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),E.jsx(ye,{y:37,children:E.jsx(m_,{anchor:.5,tmp:`${s} {}`,"p-maxScaleLength":240,"l-maxScaleLength":270,text:a==null?void 0:a.mul(u),style:{fontSize:26,fill:"#eeeeee",fontFamily:F,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]})]}),E.jsx(ye,{children:E.jsx(fY,{dataSource:r})})]}),E.jsx(K3,{ref:v,"l-visible":!1,"p-visible":!1,click:k,children:E.jsx(it,{name:"menu-on.png",anchor:.5})})]}),E.jsx(cY,{on:h,onClose:d.bind(null,!1),betAmount:u.toNumber(),lineBets:p,onSelectedChange:U=>{p[U]&&t(eo(p[U]))}})]})}const mY=({...r})=>E.jsx(i9,{children:E.jsx(r9,{children:E.jsx(n9,{children:E.jsx(t9,{children:({dataSource:e})=>E.jsxs(Kg,{...r,children:[E.jsxs(ye,{children:[E.jsx(U3,{"l-x":585,"p-x":558,y:585,playing:!0,scale:.5,action:Rt([0,"IDLE",!0])}),E.jsx(Y3,{})]}),E.jsx(rY,{"l-x":320,"l-y":280,"l-scale":1,"p-x":330,"p-y":330,"p-scale":.9,dataSource:e}),E.jsx(ga,{"l-x":155,"l-y":365,scale:.8,"p-x":565,"p-y":105,name:"logo.png",anchor:.5}),E.jsx(G$,{x:900,y:440,"l-visible":!0,"p-visible":!1,dataSource:e}),E.jsx(W$,{x:517,y:195,scale:.9,"l-visible":!1,"p-visible":!0,dataSource:e}),E.jsx(K$,{"l-x":900,"l-y":284,"l-scale":1,"p-x":337,"p-y":195,"p-scale":.9,dataSource:e}),E.jsx($$,{dataSource:e,"l-x":600,"l-y":852,"p-x":580,"p-y":845}),E.jsx(pY,{dataSource:e}),E.jsx(Y$,{dataSource:e,"l-x":600,"l-y":847,"l-scale":1,"p-x":580,"p-y":842,"p-scale":.9}),E.jsx(z$,{dataSource:e}),E.jsx(oY,{dataSource:e})]})})})})}),gY=({...r})=>{const e=L.useMemo(()=>Zz(Oe.Obj.urlOptions.lang),[]);return E.jsx(Vz,{assets:e,...r})};function vY({children:r,selected:e=0,direction:t="H",size:n,onSelectedChange:i,onScrollStart:s,onScrollEnd:o,...a}){const[u,l]=L.useState(!1),[c,h]=L.useState(!0),{current:d}=L.useRef({tween:null,startPoint:null,movement:{x:0,y:0},page:e,update:!1}),p=L.Children.count(r),g=Math.floor(p/2);function v(k){return(k+g+p)%p-g}function x(){let k;return t=="H"?k=d.movement.x/n[0]:k=d.movement.y/n[1],(d.page+k+p)%p}function y(k,M=!0,O=d.page){M&&O!=k?(d.tween&&(d.tween.stop(),d.tween.end(),Dk(d.tween)),d.tween=new V_({page:O}).to({page:k},200).onStart(()=>{h(!1)}).onUpdate(F=>{d.page=F.page,d.update=!0}).onComplete(()=>{h(!0);const F=(k+p)%p;i&&i(F),d.page=F,d.update=!0}).start(Oe.Obj.getTime(!1))):d.page=k}function b(k){d.startPoint={x:k.x,y:k.y},s&&s()}function _(k){d.startPoint&&(d.update=!0,d.movement={x:-(k.x-d.startPoint.x),y:-(k.y-d.startPoint.y)})}function S(k){if(d.startPoint){let M;t=="H"?M=d.movement.x/n[0]:M=d.movement.y/n[1];const O=d.page+M;M=Math.round(M+(M>0?.25:-.25));const F=d.page+M;d.startPoint=null,o&&o(),d.movement={x:0,y:0},d.page=O,y(F,!0,O)}}const I=L.useMemo(()=>{if(t=="H"){const k=n[0];return M=>({x:M*k})}else{const k=n[1];return M=>({y:M*k})}},[t]),A=L.useMemo(()=>x(),[d.movement.x,d.movement.y,d.page]);return L.useEffect(()=>{d.page!=e&&!d.startPoint&&y(e,!0,d.page)},[e]),zt.useTick(()=>{d.update&&(l(!u),d.update=!1)},!0),E.jsx(ye,{hitFrame:[0,0,...n],interactive:c,cursor:"pointer",onpointerdown:b,onpointermove:_,onpointerupoutside:S,onpointerup:S,onpointerout:S,...a,children:L.Children.map(r,(k,M)=>{const O=v(-A+M);return E.jsx(ye,{...I(O),visible:O>-1&&O<1,children:k})})})}const zP=[[1,5,0,1,2],[3,5,4,3,4],[3,5,5,5,3],[2,5,3,4,4],[0,5,1,1,1]],$P=["01","11","21","31","41","22","23"],yY={"00":{offset:1},10:{offset:1},20:{offset:3},30:{offset:1},40:{offset:1}},xY=[{inColumn:0,from:-1,to:0,s:0},{inColumn:1,from:-1,to:0,s:1},{inColumn:2,from:-1,to:2,s:2},{inColumn:3,from:-1,to:0,s:3},{inColumn:4,from:-1,to:0,s:4},{inColumn:2,from:-2,to:1,s:5},{inColumn:2,from:-3,to:0,s:0}];function _Y({...r}){const{current:e}=L.useRef({inScroll:!1}),[t,n]=L.useState(0),i=t==0,s=t==1;ld(8e3,()=>{e.inScroll||n(1)},t==0),ld(8e3,()=>{e.inScroll||n(0)},t==1);function o(){n((t+2-1)%2)}function a(){n((t+1)%2)}function u(){e.inScroll=!0}function l(){e.inScroll=!1}return E.jsxs(ye,{...r,children:[E.jsx(it,{name:"loading_panel.png"}),E.jsxs(bh,{x:40,y:30,children:[E.jsxs(vY,{size:[614,360],selected:t,onSelectedChange:n,onScrollStart:u,onScrollEnd:l,children:[E.jsxs(ye,{children:[zP.map((c,h)=>E.jsx(ye,{x:70*h+165,children:c.map((d,p)=>{const g=i&&$P.indexOf(`${h}${p}`)!=-1;return E.jsxs(ye,{y:55*p+30,children:[E.jsx(wr,{from:{alpha:0},to:{alpha:1},playing:g,duration:500,children:({alpha:v})=>E.jsx(it,{alpha:v,scale:.5,anchor:.5,name:"Winframe.png"})}),E.jsx(tm,{scale:.5,anchor:.5,name:`${d}.png`}),E.jsx(wr,{from:{scale:0},to:{scale:.25},playing:g,duration:500,delay:500,easing:vn.Elastic.Out,children:({scale:v})=>E.jsx(ch,{scale:v,action:Rt([0,"BUBBLES_IDLE",!0]),visible:g,playing:g,toFrameOneWhenStop:!0})})]},`p1_${p}`)})},`p1${h}`)),E.jsx(ga,{x:310,y:320,anchor:[.5,.5],name:"loading-1.png"})]}),E.jsxs(ye,{children:[zP.map((c,h)=>E.jsx(ye,{x:70*h+165,children:c.map((d,p)=>{let g=!1;const v=`${h}${p}`,x=s&&$P.indexOf(v)!=-1;let y=yY[v];y?g=s:y={from:0,to:0};const{offset:b}=y;return E.jsx(wr,{from:{k:0},to:{k:b},playing:g,delay:1300,duration:b*150,children:({k:_})=>E.jsxs(ye,{y:55*p+30+55*_,children:[E.jsx(wr,{from:{alpha:1},to:{alpha:0},playing:x,duration:150,delay:1e3,children:({alpha:S})=>E.jsxs(ye,{alpha:S,children:[E.jsx(it,{visible:x,scale:.5,anchor:.5,name:"Winframe.png"}),E.jsx(tm,{scale:.5,anchor:.5,name:`${d}.png`})]})}),E.jsx(ch,{scale:.25,actions:Rt([[0,"BUBBLES_IDLE",!1],[0,"BUBBLES_CRUSH",!1]]),visible:x,playing:x,toFrameOneWhenStop:!0})]})},`p1_${p}`)})},`p1${h}`)),xY.map(({inColumn:c,from:h,to:d,s:p},g)=>E.jsx(wr,{from:{k:h},to:{k:d},playing:s,delay:1300,duration:(d-h)*150,children:({k:v})=>E.jsx(tm,{x:70*c+165,y:55*v+30,scale:.5,anchor:.5,name:`${p}.png`})},`p21${g}`)),E.jsx(ga,{x:310,y:320,anchor:[.5,.5],name:"loading-2.png"})]})]}),E.jsx(Cs,{frame:[0,0,614,360],color:0})]}),E.jsx(ye,{x:313,y:433,children:ui(2,c=>E.jsxs(Ps,{x:50*c,click:n.bind(null,c),children:[E.jsx(it,{visible:t==c,y:0,name:"loading_panel_lit.png"}),E.jsx(it,{visible:t!=c,name:"loading_panel_unlit.png"})]},`page_tip_${c}`))}),E.jsx(Tl,{children:E.jsxs(ye,{y:170,children:[E.jsx(Ps,{"l-x":-70,"p-x":60,click:o,children:E.jsx(it,{name:"loading_arrow_left.png"})}),E.jsx(Ps,{"l-x":700,"p-x":565,click:a,children:E.jsx(it,{name:"loading_arrow_right.png"})})]})})]})}const wY=({...r})=>{const{dispatch:e}=L.useContext(gt);function t(){e(Hw("main"))}const n=Rt(Oe.Obj.urlOptions.lang==gn.Turkish?1.2:1.5);return E.jsx(Kg,{...r,children:E.jsxs(ye,{children:[E.jsx(Z3,{onKeySpace:t,onKeyEnter:t,enable:!0}),E.jsx(U3,{"l-x":585,"p-x":558,y:585,playing:!0,scale:.5,action:Rt([0,"IDLE",!0])}),E.jsx(Y3,{}),E.jsx(_Y,{"l-x":255,"l-y":420,"l-scale":1,"p-x":232,"p-y":400,"p-scale":1}),E.jsx(ga,{"l-x":590,"l-y":355,"p-x":565,"p-y":235,name:"logo.png",anchor:.5}),E.jsxs(Ps,{"l-x":456,"l-y":880,"p-x":429,"p-y":960,click:t,children:[E.jsx(it,{name:"continueButton.png"}),E.jsx(ga,{x:145,y:38,anchor:.5,name:"continue.png",scale:n})]})]})})};function bY({children:r}){const e=L.useMemo(()=>{let i=!1;return i=In("debug","0")==="1",i},[]);L.useEffect(()=>{e||(window.oncontextmenu=function(i){i.preventDefault()})},[]);const t=L.useMemo(()=>[...L.Children.toArray(r),E.jsx(SY,{})],[]),n=e?L.Children.map(t,i=>L.cloneElement(i,{debug:e})):[];return E.jsxs(ye,{visible:e,children:[...n]})}function SY(){const{state:r}=Cd(),{spinModel:e}=r.spin;return L.useEffect(()=>{e&&console.log("spin",e.data)},[e]),E.jsx(E.Fragment,{})}function TY({debug:r,...e}){const[t,n]=L.useState(60);return zt.useTick(i=>{n(Math.round(1/(i/1e3)))},r),E.jsx(Tl,{children:E.jsxs(ye,{...e,children:[E.jsx(Cs,{frame:[0,0,70,25]}),E.jsx(mi,{text:`${t} FPS`,style:{align:"center",fill:"#FF0000",fontSize:20}})]})})}function EY({...r}){const e=L.useRef(null),{state:t}=Cd(),{scenes:n}=t.sceneManager,[i,s]=L.useState(""),o=Oe.Obj,a=L.useMemo(()=>{let l=!1;return l=In("hideServerTime","0")==="1",l},[]),[u]=L.useMemo(()=>[Sh(n)=="main"],n);return L.useEffect(()=>{if(e.current){let l=function(){if(o.viewport){const[c,h,d]=o.viewport;e.current.x=-c+d-5,e.current.y=-h+5}};return l(),o.notice.on(Yi,l),()=>{o.notice.off(Yi,l)}}},[e]),ld(1e3,()=>{s(Ej(8,!1,o.getServerTimeMillisecondNow()))},u),E.jsx(mi,{visible:u&&!a,ref:e,text:`${i}`,anchor:[1,0],style:{fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2},...r})}function CY({...r}){const e=L.useRef(null),{state:t}=Cd(),{scenes:n}=t.sceneManager,i=Oe.Obj,[s]=L.useMemo(()=>{const o=Sh(n);return[o=="premain"||o=="load"]},n);return L.useEffect(()=>{if(e.current){let o=function(){if(i.viewport){const[a,u,l,c]=i.viewport;e.current.x=-a+l-5,e.current.y=-u+c-5}};return o(),i.notice.on(Yi,o),()=>{i.notice.off(Yi,o)}}},[e]),E.jsx(mi,{visible:s,ref:e,text:`v${i.configOptions.version}`,anchor:[1,1],style:{fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2},...r})}function Re({children:r,tmp:e,replaceMap:t={},tcase:n="default",...i}){const s=L.useMemo(()=>{let o=e?L.Children.map(e,a=>Hn(Sn,a)).reduce((a,u)=>a+u,""):Hn(Sn,r);for(const a in t)o=o.replace(a,t[a]);return n=="upper"?o=o.toUpperCase():n=="lower"&&(o=o.toLowerCase()),o},[e,r]);return E.jsx("div",{...i,children:s})}const PY=()=>{const r=L.useRef(null),e=L.useRef(null),{state:t,dispatch:n}=L.useContext(gt),{code:i,show:s,allowClose:o}=t.setting.error;function a(){o?n(Jr("",!1,!0)):window.location.reload()}const u=L.useMemo(()=>Hn(Sn,"err_000"),[]),l=L.useMemo(()=>{const h=`err_${i}`,d=Hn(Sn,h);return h==d?u:d},[i]);function c(){if(e.current){const h=r.current.clientHeight,d=e.current.clientHeight;e.current.style.marginTop=`${(h-d)*.4}px`}}return L.useEffect(()=>{const h=Oe.Obj;return h.notice.on(Yi,c),()=>{h.notice.off(Yi,c)}},[]),L.useEffect(()=>{s&&c()},[s]),E.jsx("div",{ref:r,className:`page-mod ${s?"db":"dn"}`,children:E.jsxs("div",{ref:e,className:`error-mod ${t.setting.orientation}`,children:[E.jsxs("div",{className:"top",children:[E.jsx("div",{className:"dib info-icon"}),E.jsx("div",{className:"title",children:i})]}),E.jsxs("div",{className:"bottom",children:[E.jsx(Re,{className:"detail",children:l}),E.jsx(Re,{className:"ok btn-mod dib",onClick:a,children:o?"ok":"refresh"})]}),E.jsx("div",{className:"close"})]})})},AY=$i.Obj,Ln=({children:r,onClick:e,channelId:t=xb,sound:n="click",volum:i=1,playing:s,softBgm:o=!0,soft:a,...u})=>{function l(c){e(c),AY.play(t,n,i,o,!1)}return E.jsx("div",{...u,onClick:e?l:null,children:r})};function J3(r){return({children:e,on:t,style:n,duration:i=250,...s})=>{const[o,a]=L.useState(!1),[u,l]=L.useState(!1);L.useEffect(()=>{t&&a(!0)},[t]);function c(){l(!1),t||a(!1)}function h(){l(!0)}return E.jsxs("div",{className:`page-mod ${o?"db":"dn"}`,style:{overflow:"hidden"},children:[E.jsx(wr,{dep:[t],from:{k:0},to:{k:100},duration:i,playing:!0,onComplete:c,onStart:h,children:({k:d})=>{const p=t?100-d:d;return E.jsx(Ln,{className:`page-mod ${o?"db":"dn"}`,style:{...r(p),...n},...s,children:e})}}),E.jsx("div",{className:`page-mod ${u?"db":"dn"}`})]})}}const _b=J3(r=>({top:`${r}%`})),kY=J3(r=>({left:`${r}%`}));function IY({cls:r="menu-mod",style:e,...t}){const{state:n,dispatch:i}=L.useContext(gt),{menuOn:s,soundOn:o}=n.setting,[a,u]=L.useState(!1),{fundsUrl:l,livechatUrl:c,lang:h,funPLay:d}=Oe.Obj.urlOptions;function p(I){a&&i(lI(!1)),I&&I.stopPropagation()}function g(I){a&&(p(),i(uI(!0)))}function v(I){a&&i(aI(!o))}function x(){a&&window.open(l,"_self")}function y(){a&&(p(),i(hI(!0)))}function b(){a&&window.open(l,"fund")}function _(){a&&window.open(c,"LiveChat")}L.useEffect(()=>{s?setTimeout(()=>{u(!0)},300):u(!1)},[s]);const S=Rt(Oe.Obj.filterImageFormat(["avif","webp","png"]));return E.jsx(_b,{on:s,onClick:p,duration:300,children:E.jsx("div",{className:`${r}`,style:e,onClick:I=>I.stopPropagation(),children:E.jsxs("div",{className:"list",children:[E.jsxs("div",{className:`cell ${d?"fun-play":""}`,children:[E.jsxs(Ln,{className:"item w-33 btn-mod btn-mod-active",onClick:g,children:[E.jsx("div",{className:`icon-mod icon paytable ${S}`}),E.jsx(Re,{className:`title ${h}`,children:"paytable"})]}),E.jsxs(Ln,{className:"item w-33 btn-mod btn-mod-active",onClick:v,children:[E.jsx("div",{className:`icon-mod icon ${o?"sound-on":"sound-off"} ${S}`}),E.jsx(Re,{className:"title",children:"sound"})]}),E.jsxs(Ln,{className:"item w-33 btn-mod btn-mod-active",onClick:x,children:[E.jsx("div",{className:`icon-mod icon lobby ${S}`}),E.jsx(Re,{className:"title",children:"lobby"})]})]}),E.jsxs("div",{className:`cell ${d?"hidden":"visible"}`,children:[E.jsxs(Ln,{className:"item w-33 btn-mod btn-mod-active",onClick:y,children:[E.jsx("div",{className:`icon-mod icon history ${S}`}),E.jsx(Re,{className:"title",children:"bethistory"})]}),E.jsxs(Ln,{className:"item w-33 btn-mod btn-mod-active",onClick:b,children:[E.jsx("div",{className:`icon-mod icon transfer ${S}`}),E.jsx(Re,{className:"title",children:"transfer"})]}),E.jsxs(Ln,{className:"item w-33 btn-mod btn-mod-active",onClick:_,children:[E.jsx("div",{className:`icon-mod icon chat ${S}`}),E.jsx(Re,{className:"title",children:"customservice"})]})]})]})})})}const MY="ISoundOn_",RY="IBetAmount_",OY="IBetLevel_";function BY({children:r}){const{state:e,dispatch:t}=Cd(),{soundOn:n}=e.setting,{betAmount:i,betLevel:s,spinModel:o,lineBetsModel:a,status:u}=e.spin,{scenes:l}=e.sceneManager,[c,h,d]=L.useMemo(()=>{const{id:p}=Oe.Obj.configOptions;return[MY,RY,OY].map(g=>g+p)},[]);return L.useEffect(()=>{Bn(n)&&localStorage.setItem(c,n?"1":"0")},[n]),L.useEffect(()=>{if(u=="spin"&&a&&Bn(i)){const p=i.toNumber();localStorage.setItem(h,`${a.lineBets.map(g=>Number(g)).indexOf(p)}`)}},[u]),L.useEffect(()=>{Bn(s)&&localStorage.setItem(d,`${s}`)},[s]),L.useEffect(()=>{if(Sh(l)=="premain"){const g=localStorage.getItem(c)!="0",v=Number(localStorage.getItem(h)),x=localStorage.getItem(d);if(t(aI(g)),o){const y=o.lineBet,b=o.credit,_=o.betLevel;y&&!y.isZero()?t(eo(y)):b&&!b.isZero()?t(eo(b)):a&&(Bn(v)?t(eo(a.lineBets[v]||a.lineBets[0])):t(eo(a.lineBets[0]))),Bn(_)&&_!=0&&t(kP(_))}else a&&(Bn(v)?t(eo(a.lineBets[v]||a.lineBets[0])):t(eo(a.lineBets[0]))),Bn(x)&&t(kP(x))}},[l]),E.jsx(E.Fragment,{children:L.Children.map(r,p=>p)})}const Bc=mg(),LY=({children:r})=>{const{state:e,dispatch:t}=L.useContext(gt),[n,i]=L.useState(!1),{loggingIn:s}=e.user,[o,a]=L.useState(null),{current:u}=L.useRef({httpDoneCount:0}),[l,c]=L.useState(!1);L.useEffect(()=>{n?!s&&!o&&Bc.player().then(d=>{d.code?(d.code==500||d.code==404||d.code==401)&&Bc.authAndCanReTry()&&(t(Jr("")),i(!1)):a(d)}):Bc.auth().then(d=>{i(!0)})},[n]),L.useEffect(()=>{L.Children.count(r)==u.httpDoneCount&&o&&!o.code&&(Oe.Obj.setServerTime(o.st),t(Cz(o)))},[o,u.httpDoneCount]);function h(){u.httpDoneCount++,c(!l)}return E.jsx(E.Fragment,{children:L.Children.map(r,d=>L.cloneElement(d,{on:n&&!!o&&!o.code,onComplete:h}))})};function NY({on:r,onComplete:e}){const{dispatch:t}=L.useContext(gt);L.useEffect(()=>{r&&Bc.load().then(n=>{n.code?t(xz(n)):t(yz(n)),e(n)})},[r])}function FY({on:r,onComplete:e}){const{dispatch:t}=L.useContext(gt);L.useEffect(()=>{r&&Bc.lineBets().then(n=>{n.code||(t(Sz(n)),e(n))})},[r])}function DY(){const{state:r,dispatch:e}=L.useContext(gt),{status:t,betAmount:n}=r.spin;return L.useEffect(()=>{const i=mg();t=="spin"&&i.spin(n.toNumber()).then(s=>{s.code?e(zw()):e(_z(s))}).catch(()=>{})},[t]),E.jsx(E.Fragment,{})}/*!
 * better-scroll / slide
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 */function eO(r){console.error("[BScroll warn]: "+r)}var Rd=typeof window<"u",ig=Rd&&navigator.userAgent.toLowerCase();ig&&ig.indexOf("android")>0;(function(){if(typeof ig=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(ig);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var UY=!1;if(Rd){var jY="test-passive";try{var YP={};Object.defineProperty(YP,"passive",{get:function(){UY=!0}}),window.addEventListener(jY,function(){},YP)}catch{}}var Lc=function(r,e){for(var t in e)r[t]=e[t];return r};function Su(r,e,t){return r<e?e:r>t?t:r}var tO=Rd&&document.createElement("div").style,Yu=function(){if(!Rd)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(tO[n.value]!==void 0)return n.key}return!1}();function to(r){return Yu===!1?r:Yu==="standard"?r==="transitionEnd"?"transitionend":r:Yu+r.charAt(0).toUpperCase()+r.substr(1)}Yu&&Yu!=="standard"&&""+Yu.toLowerCase();var XY=to("transform"),HY=to("transition");Rd&&to("perspective")in tO;to("transitionTimingFunction"),to("transitionDuration"),to("transitionDelay"),to("transformOrigin"),to("transitionEnd"),to("transitionProperty");function zY(r,e){var t=e.firstChild;t?$Y(r,t):e.appendChild(r)}function $Y(r,e){var t=e.parentNode;t.insertBefore(r,e)}function YY(r,e){r.removeChild(e)}var $y={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(r){return 1+--r*r*r*r*r}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(r){return 1- --r*r*r*r}}},rO={pageX:0,pageY:0,x:0,y:0},GY={x:0,y:0,width:0,height:0,cx:0,cy:0},WY=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY;this.wrapperWidth=t.wrapperSize,this.wrapperHeight=n.wrapperSize,this.scrollerHeight=n.contentSize,this.scrollerWidth=t.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},r.prototype.getPageStats=function(e,t){return this.pages[e]&&this.pages[e][t]?this.pages[e][t]:GY},r.prototype.getNearestPageIndex=function(e,t){for(var n=0,i=0,s=this.pages.length;n<s-1&&!(e>=this.pages[n][0].cx);n++);for(s=this.pages[n]?this.pages[n].length:0;i<s-1&&!(t>=this.pages[0][i].cy);i++);return{pageX:n,pageY:i}},r.prototype.buildPagesMatrix=function(e,t){var n=[],i=0,s,o,a,u=0,l,c=this.scroll.scroller.scrollBehaviorX.maxScrollPos,h=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(o=Math.round(e/2),a=Math.round(t/2);i>-this.scrollerWidth;){for(n[u]=[],l=0,s=0;s>-this.scrollerHeight;)n[u][l]={x:Math.max(i,c),y:Math.max(s,h),width:e,height:t,cx:i-o,cy:s-a},s-=t,l++;i-=e,u++}return n},r}(),VY=function(){function r(e,t){this.scroll=e,this.slideOptions=t,this.slideX=!1,this.slideY=!1,this.currentPage=Lc({},rO)}return r.prototype.refresh=function(){this.pagesMatrix=new WY(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},r.prototype.getAdjustedCurrentPage=function(){var e=this.currentPage,t=e.pageX,n=e.pageY;t=Math.min(t,this.pagesMatrix.pageLengthOfX-1),n=Math.min(n,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(t=Math.min(t,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(n=Math.min(n,this.pagesMatrix.pageLengthOfY-2));var i=this.pagesMatrix.getPageStats(t,n),s=i.x,o=i.y;return{pageX:t,pageY:n,x:s,y:o}},r.prototype.setCurrentPage=function(e){this.currentPage=e},r.prototype.getInternalPage=function(e,t){e>=this.pagesMatrix.pageLengthOfX?e=this.pagesMatrix.pageLengthOfX-1:e<0&&(e=0),t>=this.pagesMatrix.pageLengthOfY?t=this.pagesMatrix.pageLengthOfY-1:t<0&&(t=0);var n=this.pagesMatrix.getPageStats(e,t),i=n.x,s=n.y;return{pageX:e,pageY:t,x:i,y:s}},r.prototype.getInitialPage=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=this.slideOptions,i=n.startPageXIndex,s=n.startPageYIndex,o=this.loopX?1:0,a=this.loopY?1:0,u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY;t?(u=this.loopX?i+1:i,l=this.loopY?s+1:s):(u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY);var c=this.pagesMatrix.getPageStats(u,l),h=c.x,d=c.y;return{pageX:u,pageY:l,x:h,y:d}},r.prototype.getExposedPage=function(e){var t=Lc({},e);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},r.prototype.getExposedPageByPageIndex=function(e,t){var n={pageX:e,pageY:t};this.loopX&&(n.pageX=e+1),this.loopY&&(n.pageY=t+1);var i=this.pagesMatrix.getPageStats(n.pageX,n.pageY),s=i.x,o=i.y;return{x:s,y:o,pageX:e,pageY:t}},r.prototype.getWillChangedPage=function(e){return e=Lc({},e),this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2),e.x=this.pagesMatrix.getPageStats(e.pageX+1,0).x),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2),e.y=this.pagesMatrix.getPageStats(0,e.pageY+1).y),e},r.prototype.fixedPage=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},r.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},r.prototype.getValidPageIndex=function(e,t){var n=this.pagesMatrix.pageLengthOfX-1,i=this.pagesMatrix.pageLengthOfY-1,s=0,o=0;return this.loopX&&(e+=1,s=s+1,n=n-1),this.loopY&&(t+=1,o=o+1,i=i-1),e=Su(e,s,n),t=Su(t,o,i),{pageX:e,pageY:t}},r.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},r.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},r.prototype.getNearestPage=function(e,t){var n=this.pagesMatrix.getNearestPageIndex(e,t),i=n.pageX,s=n.pageY,o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.getPageByDirection=function(e,t,n){var i=e.pageX,s=e.pageY;i===this.currentPage.pageX&&(i=Su(i+t,0,this.pagesMatrix.pageLengthOfX-1)),s===this.currentPage.pageY&&(s=Su(s+n,0,this.pagesMatrix.pageLengthOfY-1));var o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.resetLoopPage=function(){if(this.loopX){if(this.currentPage.pageX===0)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(this.currentPage.pageY===0)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},r.prototype.getPageIndexByDirection=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t=e==="negative"?t-1:t+1),this.slideY&&(n=e==="negative"?n-1:n+1),{pageX:t,pageY:n}},r.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&eO("slide does not support two direction at the same time.")},r}(),qY="plugins.slide",KY=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],QY=KY.map(function(r){return{key:r.key,sourceKey:qY+"."+r.name}}),ZY=function(r,e){return r.pageX===e.pageX&&r.pageY===e.pageY},JY=function(){function r(e){this.scroll=e,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return r.prototype.satisfyInitialization=function(){return this.scroll.scroller.content.children.length<=0?(eO("slide need at least one slide page to be initialised.please check your DOM layout."),!1):!0},r.prototype.init=function(){this.willChangeToPage=Lc({},rO),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},r.prototype.createPages=function(){this.pages=new VY(this.scroll,this.options)},r.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(QY)},r.prototype.handleOptions=function(){var e=this.scroll.options.slide===!0?{}:this.scroll.options.slide,t={loop:!0,threshold:.1,speed:400,easing:$y.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0};this.options=Lc(t,e)},r.prototype.handleLoop=function(e){var t=this.options.loop,n=this.scroll.scroller.content,i=n.children.length;t&&(n!==e?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(e),i>1&&this.cloneFirstAndLastSlidePage(n)):i===3&&this.initialised?(this.removeClonedSlidePage(n),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):i>1?(this.initialised&&this.cachedClonedPageDOM.length===0?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(n),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(n)):this.resetLoopChangedStatus())},r.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,n=this.scroll.scroller.hooks,i=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,function(){return!0}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(s){(s.directionX===1||s.directionY===1)&&e.next(),(s.directionX===-1||s.directionY===-1)&&e.prev()})),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(n,n.eventTypes.beforeRefresh,function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()}),this.registerHooks(n,n.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(n,n.eventTypes.scroll,this.scrollHandler),this.registerHooks(n,n.eventTypes.checkClick,this.startPlay),i&&this.registerHooks(n,n.eventTypes.flick,this.flickHandler)},r.prototype.startPlay=function(){var e=this,t=this.options,n=t.interval,i=t.autoplay;i&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout(function(){e.next()},n))},r.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},r.prototype.setSlideInlineStyle=function(){var e=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],t=this.scroll.scroller,n=t.content,i=t.wrapper,s=this.scroll.options;e.forEach(function(o){var a=o.direction,u=o.sizeType,l=o.styleType;if(s[a]){for(var c=i[u],h=n.children,d=h.length,p=0;p<d;p++){var g=h[p];g.style[l]=c+"px"}n.style[l]=c*d+"px"}})},r.prototype.next=function(e,t){var n=this.pages.nextPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.prev=function(e,t){var n=this.pages.prevPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.goToPage=function(e,t,n,i){var s=this.pages.getValidPageIndex(e,t);this.goTo(s.pageX,s.pageY,n,i)},r.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},r.prototype.setCurrentPage=function(e){this.pages.setCurrentPage(e),this.exposedPage=this.pages.getExposedPage(e)},r.prototype.nearestPage=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=i.maxScrollPos,a=i.minScrollPos,u=s.maxScrollPos,l=s.minScrollPos;return this.pages.getNearestPage(Su(e,o,a),Su(t,u,l))},r.prototype.satisfyThreshold=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=!0;return Math.abs(e-i.absStartPos)<=this.thresholdX&&Math.abs(t-s.absStartPos)<=this.thresholdY&&(o=!1),o},r.prototype.refreshHandler=function(e){var t=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var n=this.contentChanged=this.prevContent!==e;n&&(this.prevContent=e);var i=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,n||!this.initialised);this.initialised?this.goTo(i.pageX,i.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(s){t.initialised=!0,s.x=i.x,s.y=i.y}),this.startPlay()}},r.prototype.computeThreshold=function(){var e=this.options.threshold;if(e%1===0)this.thresholdX=e,this.thresholdY=e;else{var t=this.pages.getPageStats(),n=t.width,i=t.height;this.thresholdX=Math.round(n*e),this.thresholdY=Math.round(i*e)}},r.prototype.cloneFirstAndLastSlidePage=function(e){var t=e.children,n=t[t.length-1].cloneNode(!0),i=t[0].cloneNode(!0);zY(n,e),e.appendChild(i),this.cachedClonedPageDOM=[n,i]},r.prototype.removeClonedSlidePage=function(e){var t=e&&e.children||[];t.length&&this.cachedClonedPageDOM.forEach(function(n){YY(e,n)}),this.cachedClonedPageDOM=[]},r.prototype.modifyCurrentPage=function(e){var t=this.getCurrentPage(),n=t.pageX,i=t.pageY,s=this.nearestPage(e.x,e.y);if(this.setCurrentPage(s),this.contentChanged)return this.contentChanged=!1,!0;var o=this.getCurrentPage(),a=o.pageX,u=o.pageY;if(this.pageWillChangeTo(s),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&n===0&&i===0)return this.moreToOnePageInLoop=!1,!0;if(n!==a||i!==u){var l=this.pages.getExposedPageByPageIndex(a,u);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,l)}if(this.resetLooping){this.resetLooping=!1;return}var c=this.pages.resetLoopPage();if(c)return this.resetLooping=!0,this.goTo(c.pageX,c.pageY,0),!0},r.prototype.goTo=function(e,t,n,i){var s=this.pages.getInternalPage(e,t),o=i||this.options.easing||$y.bounce,a=s.x,u=s.y,l=a-this.scroll.scroller.scrollBehaviorX.currentPos,c=u-this.scroll.scroller.scrollBehaviorY.currentPos;if(!l&&!c){this.scroll.scroller.togglePointerEvents(!0);return}n=n===void 0?this.getEaseTime(l,c):n,this.scroll.scroller.scrollTo(a,u,n,o)},r.prototype.flickHandler=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos,s=t.startPos,o=t.direction,a=n.currentPos,u=n.startPos,l=n.direction,c=this.pages.currentPage,h=c.pageX,d=c.pageY,p=this.getEaseTime(i-s,a-u);this.goTo(h+o,d+l,p)},r.prototype.getEaseTime=function(e,t){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},r.prototype.modifyScrollMetaHandler=function(e){var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=t.animater,o=e.newX,a=e.newY,u=this.satisfyThreshold(o,a)||s.forceStopped?this.pages.getPageByDirection(this.nearestPage(o,a),n.direction,i.direction):this.pages.currentPage;e.time=this.getEaseTime(e.newX-u.x,e.newY-u.y),e.newX=u.x,e.newY=u.y,e.easing=this.options.easing||$y.bounce},r.prototype.scrollHandler=function(e){var t=e.x,n=e.y;if(this.satisfyThreshold(t,n)){var i=this.nearestPage(t,n);this.pageWillChangeTo(i)}},r.prototype.pageWillChangeTo=function(e){var t=this.pages.getWillChangedPage(e);ZY(this.willChangeToPage,t)||(this.willChangeToPage=t,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){var e=this.scroll.scroller.content,t=this.options,n=t.loop,i=t.autoplay;n&&this.removeClonedSlidePage(e),i&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],u=s[2];o.eventTypes[a]&&o.off(a,u)}),this.hooksFn.length=0},r.pluginName="slide",r}();/*!
 * better-scroll / better-scroll
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var y_=function(r,e){return y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},y_(r,e)};function r0(r,e){y_(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Vi=function(){return Vi=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Vi.apply(this,arguments)};function Yy(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function Gy(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function sg(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}var eG=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function Hi(r){console.error("[BScroll warn]: "+r)}function GP(r,e){if(!r)throw new Error("[BScroll] "+e)}var js=typeof window<"u",dh=js&&navigator.userAgent.toLowerCase(),tG=!!(dh&&/wechatdevtools/.test(dh)),rG=dh&&dh.indexOf("android")>0,nG=function(){if(typeof dh=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(dh);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1}(),nO=!1;if(js){var iG="test-passive";try{var WP={};Object.defineProperty(WP,"passive",{get:function(){nO=!0}}),window.addEventListener(iG,function(){},WP)}catch{}}function jn(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var Yr=function(r,e){for(var t in e)r[t]=e[t];return r};function x_(r){return r==null}function sG(r,e){return Math.sqrt(r*r+e*e)}function rr(r,e,t){return r<e?e:r>t?t:r}function Tu(r,e){if(r.findIndex)return r.findIndex(e);var t=-1;return r.some(function(n,i,s){var o=e(n,i,s);if(o)return t=i,o}),t}var wb=js&&document.createElement("div").style,Gu=function(){if(!js)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(wb[n.value]!==void 0)return n.key}return!1}();function ro(r){return Gu===!1?r:Gu==="standard"?r==="transitionEnd"?"transitionend":r:Gu+r.charAt(0).toUpperCase()+r.substr(1)}function iO(r){return typeof r=="string"?document.querySelector(r):r}function oG(r,e,t,n){var i=nO?{passive:!1,capture:!!n}:!!n;r.addEventListener(e,t,i)}function aG(r,e,t,n){r.removeEventListener(e,t,{capture:!!n})}function al(r){r.cancelable&&r.preventDefault()}function VP(r){for(var e=0,t=0;r;)e-=r.offsetLeft,t-=r.offsetTop,r=r.offsetParent;return{left:e,top:t}}function lG(r){var e=r.getBoundingClientRect();return{left:-(e.left+window.pageXOffset),top:-(e.top+window.pageYOffset)}}var uG=Gu&&Gu!=="standard"?"-"+Gu.toLowerCase()+"-":"",hG=ro("transform"),sO=ro("transition"),cG=js&&ro("perspective")in wb,qP=js&&("ontouchstart"in window||tG),dG=js&&sO in wb,jt={transform:hG,transition:sO,transitionTimingFunction:ro("transitionTimingFunction"),transitionDuration:ro("transitionDuration"),transitionDelay:ro("transitionDelay"),transformOrigin:ro("transformOrigin"),transitionEnd:ro("transitionEnd"),transitionProperty:ro("transitionProperty")},Wy={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function yl(r){if(r instanceof window.SVGElement){var e=r.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}else return{top:r.offsetTop,left:r.offsetLeft,width:r.offsetWidth,height:r.offsetHeight}}function fh(r,e){for(var t in e)if(e[t].test(r[t]))return!0;return!1}var fG=fh;function pG(r,e){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.pageX=r.pageX,t.pageY=r.pageY,r.target.dispatchEvent(t)}function oO(r,e){e===void 0&&(e="click");var t;r.type==="mouseup"?t=r:(r.type==="touchend"||r.type==="touchcancel")&&(t=r.changedTouches[0]);var n={};t&&(n.screenX=t.screenX||0,n.screenY=t.screenY||0,n.clientX=t.clientX||0,n.clientY=t.clientY||0);var i,s=!0,o=!0,a=r.ctrlKey,u=r.shiftKey,l=r.altKey,c=r.metaKey,h={ctrlKey:a,shiftKey:u,altKey:l,metaKey:c};if(typeof MouseEvent<"u")try{i=new MouseEvent(e,Yr(Vi({bubbles:s,cancelable:o},h),n))}catch{d()}else d();function d(){i=document.createEvent("Event"),i.initEvent(e,s,o),Yr(i,n)}i.forwardedTouchEvent=!0,i._constructed=!0,r.target.dispatchEvent(i)}function mG(r){oO(r,"dblclick")}function gG(r,e){var t=e.firstChild;t?vG(r,t):e.appendChild(r)}function vG(r,e){var t=e.parentNode;t.insertBefore(r,e)}function yG(r,e){r.removeChild(e)}function _p(r,e){var t=new RegExp("(^|\\s)"+e+"(\\s|$)");return t.test(r.className)}function xG(r){return Array.prototype.slice.call(r,0)}function _G(r){return{width:r.clientWidth,height:r.clientHeight}}var Ir={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(r){return 1+--r*r*r*r*r}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(r){return 1- --r*r*r*r}}},wG=1e3/60,oa=js&&window;function aO(){}var bb=function(){return js?oa.requestAnimationFrame||oa.webkitRequestAnimationFrame||oa.mozRequestAnimationFrame||oa.oRequestAnimationFrame||function(r){return window.setTimeout(r,r.interval||wG)}:aO}(),wa=function(){return js?oa.cancelAnimationFrame||oa.webkitCancelAnimationFrame||oa.mozCancelAnimationFrame||oa.oCancelAnimationFrame||function(r){window.clearTimeout(r)}:aO}(),KP=function(r){},Vy={enumerable:!0,configurable:!0,get:KP,set:KP},bG=function(r,e){for(var t=e.split("."),n=0;n<t.length-1;n++)if(r=r[t[n]],typeof r!="object"||!r)return;var i=t.pop();return typeof r[i]=="function"?function(){return r[i].apply(r,arguments)}:r[i]},SG=function(r,e,t){for(var n=e.split("."),i,s=0;s<n.length-1;s++)i=n[s],r[i]||(r[i]={}),r=r[i];r[n.pop()]=t};function TG(r,e,t){Vy.get=function(){return bG(this,e)},Vy.set=function(i){SG(this,e,i)},Object.defineProperty(r,t,Vy)}var So=function(){function r(e){this.events={},this.eventTypes={},this.registerType(e)}return r.prototype.on=function(e,t,n){return n===void 0&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},r.prototype.once=function(e,t,n){var i=this;n===void 0&&(n=this),this.hasType(e);var s=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];i.off(e,s);var u=t.apply(n,o);if(u===!0)return u};return s.fn=t,this.on(e,s),this},r.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},r.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var s=i.length,o=sg(i),a,u=0;u<s;u++){var l=o[u],c=l[0],h=l[1];if(c&&(a=c.apply(h,t),a===!0))return a}},r.prototype.registerType=function(e){var t=this;e.forEach(function(n){t.eventTypes[n]=n})},r.prototype.destroy=function(){this.events={},this.eventTypes={}},r.prototype.hasType=function(e){var t=this.eventTypes,n=t[e]===e;n||Hi('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+(""+Object.keys(t).map(function(i){return JSON.stringify(i)}))+"]")},r}(),wn=function(){function r(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return r.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},r.prototype.addDOMEvents=function(){this.handleDOMEvents(oG)},r.prototype.removeDOMEvents=function(){this.handleDOMEvents(aG)},r.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach(function(i){e(n,i.name,t,!!i.capture)})},r.prototype.handleEvent=function(e){var t=e.type;this.events.some(function(n){return n.name===t?(n.handler(e),!0):!1})},r}(),EG=function(){function r(){}return r}(),CG=function(r){r0(e,r);function e(){var t=r.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=qP,t.disableTouch=!qP,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}return e.prototype.merge=function(t){if(!t)return this;for(var n in t){if(n==="bounce"){this.bounce=this.resolveBounce(t[n]);continue}this[n]=t[n]}return this},e.prototype.process=function(){return this.translateZ=this.HWCompositing&&cG?" translateZ(1px)":"",this.useTransition=this.useTransition&&dG,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX=this.eventPassthrough==="horizontal"?!1:this.scrollX,this.scrollY=this.eventPassthrough==="vertical"?!1:this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=this.freeScroll?!0:this.scrollX,this.scrollY=this.freeScroll?!0:this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},e.prototype.resolveBounce=function(t){var n={top:!0,right:!0,bottom:!0,left:!0},i={top:!1,right:!1,bottom:!1,left:!1},s;return typeof t=="object"?s=Yr(n,t):s=t?n:i,s},e}(EG),PG=function(){function r(e,t){this.wrapper=e,this.options=t,this.hooks=new So(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return r.prototype.handleDOMEvents=function(){var e=this.options,t=e.bindToWrapper,n=e.disableMouse,i=e.disableTouch,s=e.click,o=this.wrapper,a=t?o:window,u=[],l=[],c=!i,h=!n;s&&u.push({name:"click",handler:this.click.bind(this),capture:!0}),c&&(u.push({name:"touchstart",handler:this.start.bind(this)}),l.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),h&&(u.push({name:"mousedown",handler:this.start.bind(this)}),l.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new wn(o,u),this.targetEventRegister=new wn(a,l)},r.prototype.beforeHandler=function(e,t){var n=this.options,i=n.preventDefault,s=n.stopPropagation,o=n.preventDefaultException,a={start:function(){return i&&!fh(e.target,o)},end:function(){return i&&!fh(e.target,o)},move:function(){return i}};a[t]()&&e.preventDefault(),s&&e.stopPropagation()},r.prototype.setInitiated=function(e){e===void 0&&(e=0),this.initiated=e},r.prototype.start=function(e){var t=Wy[e.type];if(!(this.initiated&&this.initiated!==t)){if(this.setInitiated(t),fG(e.target,this.options.tagException)){this.setInitiated();return}if(!(t===2&&e.button!==0)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,e)){this.beforeHandler(e,"start");var n=e.touches?e.touches[0]:e;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,e)}}},r.prototype.move=function(e){if(Wy[e.type]===this.initiated){this.beforeHandler(e,"move");var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,i=t.pageY-this.pointY;if(this.pointX=t.pageX,this.pointY=t.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:i,e})){var s=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,a=this.pointX-s,u=this.pointY-o,l=this.options.autoEndDistance;(a>document.documentElement.clientWidth-l||u>document.documentElement.clientHeight-l||a<l||u<l)&&this.end(e)}}},r.prototype.end=function(e){Wy[e.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(e,"end"),this.hooks.trigger(this.hooks.eventTypes.end,e))},r.prototype.click=function(e){this.hooks.trigger(this.hooks.eventTypes.click,e)},r.prototype.setContent=function(e){e!==this.wrapper&&(this.wrapper=e,this.rebindDOMEvents())},r.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},r.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},r}(),qy={x:["translateX","px"],y:["translateY","px"]},AG=function(){function r(e){this.setContent(e),this.hooks=new So(["beforeTranslate","translate"])}return r.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null),t=e[jt.transform].split(")")[0].split(", "),n=+(t[12]||t[4])||0,i=+(t[13]||t[5])||0;return{x:n,y:i}},r.prototype.translate=function(e){var t=[];Object.keys(e).forEach(function(n){if(qy[n]){var i=qy[n][0];if(i){var s=qy[n][1],o=e[n];t.push(i+"("+o+s+")")}}}),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,t,e),this.style[jt.transform]=t.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,e)},r.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style)},r.prototype.destroy=function(){this.hooks.destroy()},r}(),lO=function(){function r(e,t,n){this.translater=t,this.options=n,this.timer=0,this.hooks=new So(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(e)}return r.prototype.translate=function(e){this.translater.translate(e)},r.prototype.setPending=function(e){this.pending=e},r.prototype.setForceStopped=function(e){this.forceStopped=e},r.prototype.setCallStop=function(e){this.callStopWhenPending=e},r.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style,this.stop())},r.prototype.clearTimer=function(){this.timer&&(wa(this.timer),this.timer=0)},r.prototype.destroy=function(){this.hooks.destroy(),wa(this.timer)},r}(),kG=function(r,e,t,n){var i=function(l,c){var h=l-c,d=h>0?-1:h<0?1:0;return d},s=i(e.x,r.x),o=i(e.y,r.y),a=t.x-n.x,u=t.y-n.y;return s*a<=0&&o*u<=0},IG=function(r){r0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.startProbe=function(t,n){var i=this,s=t,o=function(){var a=i.translater.getComputedPosition();kG(t,n,a,s)&&i.hooks.trigger(i.hooks.eventTypes.move,a),i.pending||(i.callStopWhenPending?i.callStopWhenPending=!1:i.hooks.trigger(i.hooks.eventTypes.end,a)),s=a,i.pending&&(i.timer=bb(o))};this.callStopWhenPending&&this.setCallStop(!1),wa(this.timer),o()},e.prototype.transitionTime=function(t){t===void 0&&(t=0),this.style[jt.transitionDuration]=t+"ms",this.hooks.trigger(this.hooks.eventTypes.time,t)},e.prototype.transitionTimingFunction=function(t){this.style[jt.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},e.prototype.transitionProperty=function(){this.style[jt.transitionProperty]=jt.transform},e.prototype.move=function(t,n,i,s){this.setPending(i>0),this.transitionTimingFunction(s),this.transitionProperty(),this.transitionTime(i),this.translate(n);var o=this.options.probeType===3;i&&o&&this.startProbe(t,n),i||(this._reflow=this.content.offsetHeight,o&&this.hooks.trigger(this.hooks.eventTypes.move,n),this.hooks.trigger(this.hooks.eventTypes.end,n))},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),wa(this.timer);var n=this.translater.getComputedPosition(),i=n.x,s=n.y;this.transitionTime(),this.translate({x:i,y:s}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:i,y:s})}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(lO),MG=function(r){r0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.move=function(t,n,i,s){if(!i){this.translate(n),this.options.probeType===3&&this.hooks.trigger(this.hooks.eventTypes.move,n),this.hooks.trigger(this.hooks.eventTypes.end,n);return}this.animate(t,n,i,s)},e.prototype.animate=function(t,n,i,s){var o=this,a=jn(),u=a+i,l=this.options.probeType===3,c=function(){var h=jn();if(h>=u){o.translate(n),l&&o.hooks.trigger(o.hooks.eventTypes.move,n),o.hooks.trigger(o.hooks.eventTypes.end,n);return}h=(h-a)/i;var d=s(h),p={};Object.keys(n).forEach(function(g){var v=t[g],x=n[g];p[g]=(x-v)*d+v}),o.translate(p),l&&o.hooks.trigger(o.hooks.eventTypes.move,p),o.pending&&(o.timer=bb(c)),o.pending||(o.callStopWhenPending?o.callStopWhenPending=!1:o.hooks.trigger(o.hooks.eventTypes.end,n))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),wa(this.timer),c()},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),wa(this.timer);var n=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,n)}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(lO);function RG(r,e,t){var n=t.useTransition,i={};return Object.defineProperty(i,"probeType",{enumerable:!0,configurable:!1,get:function(){return t.probeType}}),n?new IG(r,e,i):new MG(r,e,i)}var QP=function(){function r(e,t,n){this.wrapper=e,this.options=n,this.hooks=new So(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(t)}return r.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},r.prototype.move=function(e){return e=this.hasScroll?e:0,this.setMovingDirection(e),this.performDampingAlgorithm(e,this.options.outOfBoundaryDampingFactor)},r.prototype.setMovingDirection=function(e){this.movingDirection=e>0?-1:e<0?1:0},r.prototype.setDirection=function(e){this.direction=e>0?-1:e<0?1:0},r.prototype.performDampingAlgorithm=function(e,t){var n=this.currentPos+e;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?n=this.currentPos+e*t:n=n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},r.prototype.end=function(e){var t={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&e<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var i=this.direction===-1&&this.options.bounces[0]||this.direction===1&&this.options.bounces[1]?this.wrapperSize:0;t=this.hasScroll?this.momentum(this.currentPos,this.startPos,e,this.maxScrollPos,this.minScrollPos,i,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,t);return t},r.prototype.momentum=function(e,t,n,i,s,o,a){a===void 0&&(a=this.options);var u=e-t,l=Math.abs(u)/n,c=a.deceleration,h=a.swipeBounceTime,d=a.swipeTime,p=Math.min(d,l*2/c),g={destination:e+l*l/c*(u<0?-1:1),duration:p,rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,g,u),g.destination<i?(g.destination=o?Math.max(i-o/4,i-o/g.rate*l):i,g.duration=h):g.destination>s&&(g.destination=o?Math.min(s+o/4,s+o/g.rate*l):s,g.duration=h),g.destination=Math.round(g.destination),g},r.prototype.updateDirection=function(){var e=this.currentPos-this.absStartPos;this.setDirection(e)},r.prototype.refresh=function(e){var t=this.options.rect,n=t.size,i=t.position,s=window.getComputedStyle(this.wrapper,null).position==="static",o=yl(this.wrapper);this.wrapperSize=this.wrapper[n==="width"?"clientWidth":"clientHeight"],this.setContent(e);var a=yl(this.content);this.contentSize=a[n],this.relativeOffset=a[i],s&&(this.relativeOffset-=o[i]),this.computeBoundary(),this.setDirection(0)},r.prototype.setContent=function(e){e!==this.content&&(this.content=e,this.resetState())},r.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},r.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var e={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};e.maxScrollPos<0&&(e.maxScrollPos-=this.relativeOffset,this.options.specifiedIndexAsContent===0&&(e.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,e),this.minScrollPos=e.minScrollPos,this.maxScrollPos=e.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},r.prototype.updatePosition=function(e){this.currentPos=e},r.prototype.getCurrentPos=function(){return this.currentPos},r.prototype.checkInBoundary=function(){var e=this.adjustPosition(this.currentPos),t=e===this.getCurrentPos();return{position:e,inBoundary:t}},r.prototype.adjustPosition=function(e){return!this.hasScroll&&!this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?e=this.minScrollPos:e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos),e},r.prototype.updateStartPos=function(){this.startPos=this.currentPos},r.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},r.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},r.prototype.getAbsDist=function(e){return this.dist+=e,Math.abs(this.dist)},r.prototype.destroy=function(){this.hooks.destroy()},r}(),wp,bp,Sp,Tp,ZP=(wp={},wp.yes=function(r){return!0},wp.no=function(r){return al(r),!1},wp),OG=(bp={},bp.horizontal=(Sp={},Sp.yes="horizontal",Sp.no="vertical",Sp),bp.vertical=(Tp={},Tp.yes="vertical",Tp.no="horizontal",Tp),bp),BG=function(){function r(e,t,n){this.directionLockThreshold=e,this.freeScroll=t,this.eventPassthrough=n,this.reset()}return r.prototype.reset=function(){this.directionLocked=""},r.prototype.checkMovingDirection=function(e,t,n){return this.computeDirectionLock(e,t),this.handleEventPassthrough(n)},r.prototype.adjustDelta=function(e,t){return this.directionLocked==="horizontal"?t=0:this.directionLocked==="vertical"&&(e=0),{deltaX:e,deltaY:t}},r.prototype.computeDirectionLock=function(e,t){this.directionLocked===""&&!this.freeScroll&&(e>t+this.directionLockThreshold?this.directionLocked="horizontal":t>=e+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},r.prototype.handleEventPassthrough=function(e){var t=OG[this.directionLocked];if(t){if(this.eventPassthrough===t.yes)return ZP.yes(e);if(this.eventPassthrough===t.no)return ZP.no(e)}return!1},r}(),LG=function(r,e,t){return t===2?[e,-r]:t===3?[-r,-e]:t===4?[-e,r]:[r,e]},NG=function(){function r(e,t,n,i,s){this.hooks=new So(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=e,this.scrollBehaviorY=t,this.actionsHandler=n,this.animater=i,this.options=s,this.directionLockAction=new BG(s.directionLockThreshold,s.freeScroll,s.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return r.prototype.bindActionsHandler=function(){var e=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,function(t){return e.enabled?e.handleStart(t):!0}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,function(t){var n=t.deltaX,i=t.deltaY,s=t.e;if(!e.enabled)return!0;var o=LG(n,i,e.options.quadrant),a=o[0],u=o[1],l={deltaX:a,deltaY:u};return e.hooks.trigger(e.hooks.eventTypes.coordinateTransformation,l),e.handleMove(l.deltaX,l.deltaY,s)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,function(t){return e.enabled?e.handleEnd(t):!0}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,function(t){e.enabled&&!t._constructed&&e.handleClick(t)})},r.prototype.handleStart=function(e){var t=jn();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=t,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,e)},r.prototype.handleMove=function(e,t,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var i=this.scrollBehaviorX.getAbsDist(e),s=this.scrollBehaviorY.getAbsDist(t),o=jn();if(this.checkMomentum(i,s,o))return!0;if(this.directionLockAction.checkMovingDirection(i,s,n))return this.actionsHandler.setInitiated(),!0;var a=this.directionLockAction.adjustDelta(e,t),u=this.scrollBehaviorX.getCurrentPos(),l=this.scrollBehaviorX.move(a.deltaX),c=this.scrollBehaviorY.getCurrentPos(),h=this.scrollBehaviorY.move(a.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var d=l!==u||h!==c;!this.contentMoved&&!d&&this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&d&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&d&&(this.animater.translate({x:l,y:h}),this.dispatchScroll(o))}}},r.prototype.dispatchScroll=function(e){e-this.startTime>this.options.momentumLimitTime&&(this.startTime=e,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),this.options.probeType===1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},r.prototype.checkMomentum=function(e,t,n){return n-this.endTime>this.options.momentumLimitTime&&t<this.options.momentumLimitDistance&&e<this.options.momentumLimitDistance},r.prototype.handleEnd=function(e){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,e)){var t=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,e,t))return!0;t=this.ensureIntegerPos(t),this.animater.translate(t),this.endTime=jn();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,t,n)}},r.prototype.ensureIntegerPos=function(e){this.ensuringInteger=!0;var t=e.x,n=e.y,i=this.scrollBehaviorX,s=i.minScrollPos,o=i.maxScrollPos,a=this.scrollBehaviorY,u=a.minScrollPos,l=a.maxScrollPos;return t=t>0?Math.ceil(t):Math.floor(t),n=n>0?Math.ceil(n):Math.floor(n),t=rr(t,o,s),n=rr(n,l,u),{x:t,y:n}},r.prototype.handleClick=function(e){fh(e.target,this.options.preventDefaultException)||(al(e),e.stopPropagation())},r.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},r.prototype.refresh=function(){this.endTime=0},r.prototype.destroy=function(){this.hooks.destroy()},r}();function FG(r){var e=["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce(function(t,n){return t[n]=r[n],t},{});return e}function JP(r,e,t,n){var i=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce(function(s,o){return s[o]=r[o],s},{});return i.scrollable=!!r[e],i.bounces=t,i.rect=n,i}function __(r,e,t){t.forEach(function(n){var i,s;typeof n=="string"?i=s=n:(i=n.source,s=n.target),r.on(i,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return e.trigger.apply(e,sg([s],o))})})}function DG(r,e){for(var t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];if(r[s]!==e[s])return!1}return!0}var eA=1,UG=function(){function r(e,t,n){this.wrapper=e,this.content=t,this.resizeTimeout=0,this.hooks=new So(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var i=this.options.bounce,s=i.left,o=i.right,a=i.top,u=i.bottom;this.scrollBehaviorX=new QP(e,t,JP(n,"scrollX",[s,o],{size:"width",position:"left"})),this.scrollBehaviorY=new QP(e,t,JP(n,"scrollY",[a,u],{size:"height",position:"top"})),this.translater=new AG(this.content),this.animater=RG(this.content,this.translater,this.options),this.actionsHandler=new PG(this.options.bindToTarget?this.content:e,FG(this.options)),this.actions=new NG(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var l=this.resize.bind(this);this.resizeRegister=new wn(window,[{name:"orientationchange",handler:l},{name:"resize",handler:l}]),this.registerTransitionEnd(),this.init()}return r.prototype.init=function(){var e=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,function(){e.togglePointerEvents(!0)})},r.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new wn(this.content,[{name:jt.transitionEnd,handler:this.transitionEnd.bind(this)}])},r.prototype.bindTranslater=function(){var e=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,function(n){e.options.translateZ&&n.push(e.options.translateZ)}),t.on(t.eventTypes.translate,function(n){var i=e.getCurrentPos();if(e.updatePositions(n),e.actions.ensuringInteger===!0){e.actions.ensuringInteger=!1;return}(n.x!==i.x||n.y!==i.y)&&e.togglePointerEvents(!1)})},r.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))}),__(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},r.prototype.bindActions=function(){var e=this,t=this.actions;__(t.hooks,this.hooks,[{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:t.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:t.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:t.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:t.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),t.hooks.on(t.hooks.eventTypes.end,function(n,i){if(e.hooks.trigger(e.hooks.eventTypes.touchEnd,i),e.hooks.trigger(e.hooks.eventTypes.end,i)||!t.fingerMoved&&(e.hooks.trigger(e.hooks.eventTypes.scrollCancel),e.checkClick(n)))return!0;if(e.resetPosition(e.options.bounceTime,Ir.bounce))return e.animater.setForceStopped(!1),!0}),t.hooks.on(t.hooks.eventTypes.scrollEnd,function(n,i){var s=Math.abs(n.x-e.scrollBehaviorX.startPos),o=Math.abs(n.y-e.scrollBehaviorY.startPos);if(e.checkFlick(i,s,o)){e.animater.setForceStopped(!1),e.hooks.trigger(e.hooks.eventTypes.flick);return}if(e.momentum(n,i)){e.animater.setForceStopped(!1);return}t.contentMoved&&e.hooks.trigger(e.hooks.eventTypes.scrollEnd,n),e.animater.forceStopped&&e.animater.setForceStopped(!1)})},r.prototype.checkFlick=function(e,t,n){var i=1;if(this.hooks.events.flick.length>1&&e<this.options.flickLimitTime&&t<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>i||t>i))return!0},r.prototype.momentum=function(e,t){var n={time:0,easing:Ir.swiper,newX:e.x,newY:e.y},i=this.scrollBehaviorX.end(t),s=this.scrollBehaviorY.end(t);if(n.newX=x_(i.destination)?n.newX:i.destination,n.newY=x_(s.destination)?n.newY:s.destination,n.time=Math.max(i.duration,s.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==e.x||n.newY!==e.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=Ir.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},r.prototype.checkClick=function(e){var t={preventClick:this.animater.forceStopped};if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!t.preventClick){var n=this.options.dblclick,i=!1;if(n&&this.lastClickTime){var s=n.delay,o=s===void 0?300:s;jn()-this.lastClickTime<o&&(i=!0,mG(e))}return this.options.tap&&pG(e,this.options.tap),this.options.click&&!fh(e.target,this.options.preventDefaultException)&&oO(e),this.lastClickTime=i?null:jn(),!0}return!1},r.prototype.resize=function(){var e=this;this.actions.enabled&&(rG&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){e.hooks.trigger(e.hooks.eventTypes.resize)},this.options.resizePolling))},r.prototype.transitionEnd=function(e){if(!(e.target!==this.content||!this.animater.pending)){var t=this.animater;t.transitionTime(),this.resetPosition(this.options.bounceTime,Ir.bounce)||(this.animater.setPending(!1),this.options.probeType!==3&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos()))}},r.prototype.togglePointerEvents=function(e){e===void 0&&(e=!0);for(var t=this.content.children.length?this.content.children:[this.content],n=e?"auto":"none",i=0;i<t.length;i++){var s=t[i];s.isBScrollContainer||(s.style.pointerEvents=n)}},r.prototype.refresh=function(e){var t=this.setContent(e);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(e),this.scrollBehaviorY.refresh(e),t&&(this.translater.setContent(e),this.animater.setContent(e),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(e)),this.actions.refresh(),this.wrapperOffset=VP(this.wrapper)},r.prototype.setContent=function(e){var t=e!==this.content;return t&&(this.content=e),t},r.prototype.scrollBy=function(e,t,n,i){n===void 0&&(n=0);var s=this.getCurrentPos(),o=s.x,a=s.y;i=i||Ir.bounce,e+=o,t+=a,this.scrollTo(e,t,n,i)},r.prototype.scrollTo=function(e,t,n,i,s){n===void 0&&(n=0),i===void 0&&(i=Ir.bounce),s===void 0&&(s={start:{},end:{}});var o=this.options.useTransition?i.style:i.fn,a=this.getCurrentPos(),u=Vi({x:a.x,y:a.y},s.start),l=Vi({x:e,y:t},s.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!DG(u,l)){var c=Math.abs(l.x-u.x),h=Math.abs(l.y-u.y);c<eA&&h<eA&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(u,l,n,o)}},r.prototype.scrollToElement=function(e,t,n,i,s){var o=iO(e),a=VP(o),u=function(c,h,d){return typeof c=="number"?c:c?Math.round(h/2-d/2):0};n=u(n,o.offsetWidth,this.wrapper.offsetWidth),i=u(i,o.offsetHeight,this.wrapper.offsetHeight);var l=function(c,h,d,p){return c-=h,c=p.adjustPosition(c-d),c};a.left=l(a.left,this.wrapperOffset.left,n,this.scrollBehaviorX),a.top=l(a.top,this.wrapperOffset.top,i,this.scrollBehaviorY),!this.hooks.trigger(this.hooks.eventTypes.scrollToElement,o,a)&&this.scrollTo(a.left,a.top,t,s)},r.prototype.resetPosition=function(e,t){e===void 0&&(e=0),t===void 0&&(t=Ir.bounce);var n=this.scrollBehaviorX.checkInBoundary(),i=n.position,s=n.inBoundary,o=this.scrollBehaviorY.checkInBoundary(),a=o.position,u=o.inBoundary;return s&&u?!1:(nG&&this.reflow(),this.scrollTo(i,a,e,t),!0)},r.prototype.reflow=function(){this._reflow=this.content.offsetHeight},r.prototype.updatePositions=function(e){this.scrollBehaviorX.updatePosition(e.x),this.scrollBehaviorY.updatePosition(e.y)},r.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},r.prototype.enable=function(){this.actions.enabled=!0},r.prototype.disable=function(){wa(this.animater.timer),this.actions.enabled=!1},r.prototype.destroy=function(){var e=this,t=["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"];t.forEach(function(n){return e[n].destroy()})},r}(),n0=function(r){r0(e,r);function e(t,n){var i=r.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,s=iO(t);return s?(i.plugins={},i.options=new CG().merge(n).process(),i.setContent(s).valid&&(i.hooks=new So(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),i.init(s)),i):(Hi("Can not resolve the wrapper DOM."),i)}return e.use=function(t){var n=t.pluginName,i=e.plugins.some(function(s){return t===s.ctor});return i?e:x_(n)?(Hi("Plugin Class must specify plugin's name in static property by 'pluginName' field."),e):(e.pluginsMap[n]=!0,e.plugins.push({name:n,applyOrder:t.applyOrder,ctor:t}),e)},e.prototype.setContent=function(t){var n=!1,i=!0,s=t.children[this.options.specifiedIndexAsContent];return s?(n=this.content!==s,n&&(this.content=s)):(Hi("The wrapper need at least one child element to be content element to scroll."),i=!1),{valid:i,contentChanged:n}},e.prototype.init=function(t){var n=this;this.wrapper=t,t.isBScrollContainer=!0,this.scroller=new UG(t,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,function(){n.refresh()}),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(eG),this.applyPlugins(),this.refreshWithoutReset(this.content);var i=this.options,s=i.startX,o=i.startY,a={x:s,y:o};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,a)||this.scroller.scrollTo(a.x,a.y)},e.prototype.applyPlugins=function(){var t=this,n=this.options;e.plugins.sort(function(i,s){var o,a=(o={},o.pre=-1,o.post=1,o),u=i.applyOrder?a[i.applyOrder]:0,l=s.applyOrder?a[s.applyOrder]:0;return u-l}).forEach(function(i){var s=i.ctor;n[i.name]&&typeof s=="function"&&(t.plugins[i.name]=new s(t))})},e.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,function(){var t=document.activeElement;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA")&&t.blur()})},e.prototype.eventBubbling=function(){__(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},e.prototype.refreshWithoutReset=function(t){this.scroller.refresh(t),this.hooks.trigger(this.hooks.eventTypes.refresh,t),this.trigger(this.eventTypes.refresh,t)},e.prototype.proxy=function(t){var n=this;t.forEach(function(i){var s=i.key,o=i.sourceKey;TG(n,o,s)})},e.prototype.refresh=function(){var t=this.setContent(this.wrapper),n=t.contentChanged,i=t.valid;if(i){var s=this.content;this.refreshWithoutReset(s),n&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,s),this.trigger(this.eventTypes.contentChanged,s)),this.scroller.resetPosition()}},e.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},e.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},e.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},e.prototype.eventRegister=function(t){this.registerType(t)},e.plugins=[],e.pluginsMap={},e}(So);function i0(r,e){var t=new n0(r,e);return t}i0.use=n0.use;i0.plugins=n0.plugins;i0.pluginsMap=n0.pluginsMap;var ph=i0,jG=function(){function r(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},r.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.mouseWheel===!0?{}:this.scroll.options.mouseWheel,t={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=Yr(t,e)},r.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.registerEvent=function(){this.eventRegister=new wn(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},r.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},r.prototype.cleanCache=function(){this.deltaCache=[]},r.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,s=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var o=this.deltaCache.reduce(function(p,g){return{x:p.x+g.x,y:p.y+g.y}},{x:0,y:0});this.cleanCache();var a=this.scroll.scroller,u=a.scrollBehaviorX,l=a.scrollBehaviorY;u.setMovingDirection(-e.directionX),l.setMovingDirection(-e.directionY),u.setDirection(e.x),l.setDirection(e.y);var c=u.performDampingAlgorithm(Math.round(e.x)+o.x,s),h=l.performDampingAlgorithm(Math.round(e.y)+o.x,s);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:c,y:h})){var d=this.getEaseTime();(c!==this.scroll.x||h!==this.scroll.y)&&this.scroll.scrollTo(c,h,d)}i&&(this.wheelMoveTimer=window.setTimeout(function(){t.wheelMoveTimer=0},i))}},r.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)},this.mouseWheelOpt.discreteTime)},r.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=t.invert,s=0,o=0,a=i?-1:1;switch(!0){case"deltaX"in e:e.deltaMode===1?(s=-e.deltaX*n,o=-e.deltaY*n):(s=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:s=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:s=o=e.wheelDelta/120*n;break;case"detail"in e:s=o=-e.detail/3*n;break}s*=a,o*=a,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(s)&&(s=o),o=0),this.scroll.hasHorizontalScroll||(s=0);var u=s>0?-1:s<0?1:0,l=o>0?-1:o<0?1:0;return{x:s,y:o,directionX:u,directionY:l}},r.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,s=t.preventDefaultException;n&&!fh(e.target,s)&&al(e),i&&e.stopPropagation()},r.prototype.getEaseTime=function(){var e=100,t=this.mouseWheelOpt.easeTime;return t<e&&Hi("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,e)},r.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})},r.pluginName="mouseWheel",r.applyOrder="pre",r}(),XG=function(){function r(e){this.scroll=e,this.stopObserver=!1,this.init()}return r.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},r.prototype.handleMutationObserver=function(){var e=this;if(typeof MutationObserver<"u"){var t=0;this.observer=new MutationObserver(function(n){e.mutationObserverHandler(n,t)}),this.startObserve(this.observer)}else this.checkDOMUpdate()},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.stopObserve(),e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,function(){e.stopObserver&&e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,function(){e.stopObserve()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){e.destroy()})},r.prototype.mutationObserverHandler=function(e,t){var n=this;if(!this.shouldNotRefresh()){for(var i=!1,s=!1,o=0;o<e.length;o++){var a=e[o];if(a.type!=="attributes"){i=!0;break}else if(a.target!==this.scroll.scroller.content){s=!0;break}}i?this.scroll.refresh():s&&(clearTimeout(t),t=window.setTimeout(function(){n.shouldNotRefresh()||n.scroll.refresh()},60))}},r.prototype.startObserve=function(e){var t={attributes:!0,childList:!0,subtree:!0};e.observe(this.scroll.scroller.content,t)},r.prototype.shouldNotRefresh=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos>t.minScrollPos||t.currentPos<t.maxScrollPos||n.currentPos>n.minScrollPos||n.currentPos<n.maxScrollPos;return e.animater.pending||i},r.prototype.checkDOMUpdate=function(){var e=this,t=this.scroll.scroller.content,n=yl(t),i=n.width,s=n.height,o=function(){if(!e.stopObserver){n=yl(t);var u=n.width,l=n.height;(i!==u||s!==l)&&e.scroll.refresh(),i=u,s=l,a()}},a=function(){setTimeout(function(){o()},1e3)};a()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},r.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.pluginName="observeDOM",r}(),HG="plugins.pullDownRefresh",zG=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}],$G=zG.map(function(r){return{key:r.key,sourceKey:HG+"."+r.name}}),Ky="pullingDown",tA="enterThreshold",rA="leaveThreshold",YG=function(){function r(e){this.scroll=e,this.pulling=0,this.thresholdBoundary=0,this.init()}return r.prototype.setPulling=function(e){this.pulling=e},r.prototype.setThresholdBoundary=function(e){this.thresholdBoundary=e},r.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},r.prototype.handleBScroll=function(){this.scroll.registerType([Ky,tA,rA]),this.scroll.proxy($G)},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={threshold:90,stop:40};this.options=Yr(t,e),this.scroll.options.probeType=3},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=n.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.finishPullDown()}),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,function(i){i.maxScrollPos>0&&(i.maxScrollPos=-1),i.minScrollPos=e.currentMinScrollY}),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,function(i){var s=300,o=350;i.discreteTime=s,i.easeTime=o}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(){t.hooks.trigger(t.hooks.eventTypes.end)}))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},r.prototype.watch=function(){var e=this.scroll.scroller;this.watching=!0,this.registerHooks(e.hooks,e.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},r.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},r.prototype.checkLocationOfThresholdBoundary=function(){if(this.pulling===1){var e=this.scroll,t=this.thresholdBoundary!==1&&this.locateInsideThresholdBoundary(),n=this.thresholdBoundary!==2&&!this.locateInsideThresholdBoundary();t&&(this.setThresholdBoundary(1),e.trigger(tA)),n&&(this.setThresholdBoundary(2),e.trigger(rA))}},r.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},r.prototype.unwatch=function(){var e=this.scroll,t=e.scroller;this.watching=!1,t.hooks.off(t.hooks.eventTypes.end,this.checkPullDown),e.off(e.eventTypes.scrollStart,this.resetStateBeforeScrollStart),e.off(e.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&e.off(e.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},r.prototype.checkPullDown=function(){var e=this.options,t=e.threshold,n=e.stop;return this.scroll.y<t?!1:(this.pulling===1&&(this.modifyBehaviorYBoundary(n),this.setPulling(2),this.scroll.trigger(Ky)),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,Ir.bounce),this.isFetchingStatus())},r.prototype.isFetchingStatus=function(){return this.pulling===2},r.prototype.modifyBehaviorYBoundary=function(e){var t=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=t.minScrollPos,this.currentMinScrollY=e,t.computeBoundary()},r.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var e=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,e.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,Ir.bounce)}},r.prototype.openPullDown=function(e){e===void 0&&(e={}),this.handleOptions(e),this.watching||this.watch()},r.prototype.closePullDown=function(){this.unwatch()},r.prototype.autoPullDownRefresh=function(){var e=this.options,t=e.threshold,n=e.stop;this.isFetchingStatus()||!this.watching||(this.modifyBehaviorYBoundary(n),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,t),this.setPulling(2),this.scroll.trigger(Ky),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,Ir.bounce))},r.pluginName="pullDownRefresh",r}(),GG="plugins.pullUpLoad",WG=[{key:"finishPullUp",name:"finishPullUp"},{key:"openPullUp",name:"openPullUp"},{key:"closePullUp",name:"closePullUp"},{key:"autoPullUpLoad",name:"autoPullUpLoad"}],VG=WG.map(function(r){return{key:r.key,sourceKey:GG+"."+r.name}}),nA="pullingUp",qG=function(){function r(e){this.scroll=e,this.pulling=!1,this.watching=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullUpLoad),this.handleHooks(),this.watch()},r.prototype.handleBScroll=function(){this.scroll.registerType([nA]),this.scroll.proxy(VG)},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={threshold:0};this.options=Yr(t,e),this.scroll.options.probeType=3},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller.scrollBehaviorY;this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.finishPullUp()}),this.registerHooks(t.hooks,t.hooks.eventTypes.computeBoundary,function(n){n.maxScrollPos>0&&(n.maxScrollPos=-1)})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.watch=function(){this.watching||(this.watching=!0,this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkPullUp))},r.prototype.unwatch=function(){this.watching=!1,this.scroll.off(this.scroll.eventTypes.scroll,this.checkPullUp)},r.prototype.checkPullUp=function(e){var t=this,n=this.options.threshold;this.scroll.movingDirectionY===1&&e.y<=this.scroll.maxScrollY+n&&(this.pulling=!0,this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){t.pulling=!1}),this.unwatch(),this.scroll.trigger(nA))},r.prototype.finishPullUp=function(){var e=this;this.scroll.scroller.scrollBehaviorY.setMovingDirection(0),this.pulling?this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){e.watch()}):this.watch()},r.prototype.openPullUp=function(e){e===void 0&&(e={}),this.handleOptions(e),this.watch()},r.prototype.closePullUp=function(){this.unwatch()},r.prototype.autoPullUpLoad=function(){var e=this.options.threshold,t=this.scroll.scroller.scrollBehaviorY;if(!(this.pulling||!this.watching)){var n=-1,i=t.maxScrollPos+e+n;this.scroll.scroller.scrollBehaviorY.setMovingDirection(n),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime)}},r.pluginName="pullUpLoad",r}(),KG=function(){function r(e,t){this.indicator=e,this.options=t,this.hooks=new So(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return r.prototype.registerEvents=function(){var e=this.options,t=e.disableMouse,n=e.disableTouch,i=[],s=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),s.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),s.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new wn(this.indicator.indicatorEl,i),this.moveEventRegister=new wn(window,s),this.endEventRegister=new wn(window,o)},r.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},r.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;al(e),e.stopPropagation(),this.initiated=!0,this.lastPoint=t[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},r.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t[this.indicator.keysMap.point];al(e),e.stopPropagation();var i=n-this.lastPoint;this.lastPoint=n,this.hooks.trigger(this.hooks.eventTypes.touchMove,i)}},r.prototype.end=function(e){this.initiated&&(this.initiated=!1,al(e),e.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},r.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},r}(),QG=function(){function r(e,t){this.scroll=e,this.options=t,this.hooksFn=[],this.wrapper=t.wrapper,this.direction=t.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return r.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},r.prototype.handleHooks=function(){var e=this,t=this.options,n=t.fade,i=t.interactive,s=t.scrollbarTrackClickable,o=this.scroll,a=o.hooks,u=o.scroller.translater.hooks,l=o.scroller.animater.hooks;if(this.registerHooks(a,a.eventTypes.refresh,this.refresh),this.registerHooks(u,u.eventTypes.translate,function(g){var v=e.keysMap.hasScroll;e.scroll[v]&&e.updatePosition(g)}),this.registerHooks(l,l.eventTypes.time,this.transitionTime),this.registerHooks(l,l.eventTypes.timeFunction,this.transitionTimingFunction),n&&(this.registerHooks(o,o.eventTypes.scrollEnd,function(){e.fade()}),this.registerHooks(o,o.eventTypes.scrollStart,function(){e.fade(!0)}),o.eventTypes.mousewheelStart&&o.eventTypes.mousewheelEnd&&(this.registerHooks(o,o.eventTypes.mousewheelStart,function(){e.fade(!0)}),this.registerHooks(o,o.eventTypes.mousewheelMove,function(){e.fade(!0)}),this.registerHooks(o,o.eventTypes.mousewheelEnd,function(){e.fade()}))),i){var c=this.scroll.options,h=c.disableMouse,d=c.disableTouch;this.eventHandler=new KG(this,{disableMouse:h,disableTouch:d});var p=this.eventHandler.hooks;this.registerHooks(p,p.eventTypes.touchStart,this.startHandler),this.registerHooks(p,p.eventTypes.touchMove,this.moveHandler),this.registerHooks(p,p.eventTypes.touchEnd,this.endHandler)}s&&this.bindClick()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.bindClick=function(){var e=this.wrapper;this.clickEventRegister=new wn(e,[{name:"click",handler:this.handleClick.bind(this)}])},r.prototype.handleClick=function(e){var t=this.calculateclickOffsetPos(e),n=this.scroll,i=n.x,s=n.y;i=this.direction==="horizontal"?t:i,s=this.direction==="vertical"?t:s,this.scroll.scrollTo(i,s,this.options.scrollbarTrackOffsetTime)},r.prototype.calculateclickOffsetPos=function(e){var t=this.keysMap,n=t.point,i=t.domRect,s=this.options.scrollbarTrackOffsetType,o=e[n]-this.wrapperRect[i],a=o<this.currentPos?-1:1,u=0,l=this.currentPos;return s==="step"?u=this.scrollInfo.baseSize*a:(u=0,l=o),this.newPos(l,u,this.scrollInfo)},r.prototype.getKeysMap=function(){return this.direction==="vertical"?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},r.prototype.fade=function(e){var t=this.options,n=t.fadeInTime,i=t.fadeOutTime,s=e?n:i,o=this.wrapper;o.style[jt.transitionDuration]=s+"ms",o.style.opacity=e?"1":"0"},r.prototype.refresh=function(){var e=this.keysMap.hasScroll,t=this.scroll,n=t.x,i=t.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(t[e])){var s=this.keysMap,o=s.wrapperSize,a=s.scrollerSize,u=s.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[o],t[a],t[u],this.indicatorEl[o]),this.updatePosition({x:n,y:i})}},r.prototype.transitionTime=function(e){e===void 0&&(e=0),this.indicatorEl.style[jt.transitionDuration]=e+"ms"},r.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[jt.transitionTimingFunction]=e},r.prototype.canScroll=function(e){return this.wrapper.style.display=e?"block":"none",e},r.prototype.refreshScrollInfo=function(e,t,n,i){var s=Math.max(Math.round(e*e/(t||e||1)),this.options.minSize);this.options.isCustom&&(s=i);var o=e-s,a=o/n;return{baseSize:s,maxScrollPos:o,minScrollPos:0,sizeRatio:a}},r.prototype.updatePosition=function(e){var t=this.caculatePosAndSize(e,this.scrollInfo),n=t.pos,i=t.size;this.refreshStyle(i,n),this.currentPos=n},r.prototype.caculatePosAndSize=function(e,t){var n=this.keysMap.pos,i=t.sizeRatio,s=t.baseSize,o=t.maxScrollPos,a=t.minScrollPos,u=this.options.minSize,l=Math.round(i*e[n]),c;return l<a?(c=Math.max(s+l*3,u),l=a):l>o?(c=Math.max(s-(l-o)*3,u),l=o+s-c):c=s,{pos:l,size:c}},r.prototype.refreshStyle=function(e,t){var n=this.keysMap,i=n.translateProperty,s=n.size,o=this.scroll.options.translateZ;this.indicatorEl.style[s]=e+"px",this.indicatorEl.style[jt.transform]=i+"("+t+"px)"+o},r.prototype.startHandler=function(){this.moved=!1,this.startTime=jn(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},r.prototype.moveHandler=function(e){if(!this.moved&&!this.indicatorNotMoved(e)&&(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var t=this.newPos(this.currentPos,e,this.scrollInfo);this.syncBScroll(t)}},r.prototype.endHandler=function(){if(this.moved){var e=this.scroll,t=e.x,n=e.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:n})}},r.prototype.indicatorNotMoved=function(e){var t=this.currentPos,n=this.scrollInfo,i=n.maxScrollPos,s=n.minScrollPos,o=t===s&&e<=0||t===i&&e>=0;return o},r.prototype.syncBScroll=function(e){var t=jn(),n=this.scroll,i=n.x,s=n.y,o=n.options,a=n.scroller,u=n.maxScrollY,l=n.minScrollY,c=n.maxScrollX,h=n.minScrollX,d=o.probeType,p=o.momentumLimitTime,g={x:i,y:s};this.direction==="vertical"?g.y=rr(e,u,l):g.x=rr(e,c,h),a.translater.translate(g),t-this.startTime>p&&(this.startTime=t,d===1&&a.hooks.trigger(a.hooks.eventTypes.scroll,g)),d>1&&a.hooks.trigger(a.hooks.eventTypes.scroll,g)},r.prototype.newPos=function(e,t,n){var i=n.maxScrollPos,s=n.sizeRatio,o=n.minScrollPos,a=e+t;return a=rr(a,o,i),Math.round(a/s)},r.prototype.destroy=function(){var e=this.options,t=e.interactive,n=e.scrollbarTrackClickable,i=e.isCustom;t&&this.eventHandler.destroy(),n&&this.clickEventRegister.destroy(),i||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],u=s[2];o.off(a,u)}),this.hooksFn.length=0},r}(),ZG=function(){function r(e){this.scroll=e,this.handleOptions(),this.createIndicators(),this.handleHooks()}return r.prototype.handleHooks=function(){var e=this,t=this.scroll;t.hooks.on(t.hooks.eventTypes.destroy,function(){for(var n=0,i=e.indicators;n<i.length;n++){var s=i[n];s.destroy()}})},r.prototype.handleOptions=function(){var e=this.scroll.options.scrollbar===!0?{}:this.scroll.options.scrollbar,t={fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300};this.options=Yr(t,e)},r.prototype.createIndicators=function(){for(var e,t=this.scroll,n=[],i=["scrollX","scrollY"],s=["horizontal","vertical"],o=this.options.customElements,a=0;a<i.length;a++){var u=i[a];if(t.options[u]){var l=o.shift(),c=s[a],h=!1,d=l||this.createScrollbarElement(c);d!==l?t.wrapper.appendChild(d):h=!0,e=Vi(Vi({wrapper:d,direction:c},this.options),{isCustom:h}),n.push(new QG(t,e))}}this.indicators=n},r.prototype.createScrollbarElement=function(e,t){t===void 0&&(t=this.options.scrollbarTrackClickable);var n=document.createElement("div"),i=document.createElement("div");return n.style.cssText="position:absolute;z-index:9999;overflow:hidden;",i.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",i.className="bscroll-indicator",e==="horizontal"?(n.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",i.style.height="100%",n.className="bscroll-horizontal-scrollbar"):(n.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",i.style.width="100%",n.className="bscroll-vertical-scrollbar"),t||(n.style.cssText+="pointer-events:none;"),n.appendChild(i),n},r.pluginName="scrollbar",r}(),uO={pageX:0,pageY:0,x:0,y:0},JG={x:0,y:0,width:0,height:0,cx:0,cy:0},eW=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY;this.wrapperWidth=t.wrapperSize,this.wrapperHeight=n.wrapperSize,this.scrollerHeight=n.contentSize,this.scrollerWidth=t.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},r.prototype.getPageStats=function(e,t){return this.pages[e]&&this.pages[e][t]?this.pages[e][t]:JG},r.prototype.getNearestPageIndex=function(e,t){for(var n=0,i=0,s=this.pages.length;n<s-1&&!(e>=this.pages[n][0].cx);n++);for(s=this.pages[n]?this.pages[n].length:0;i<s-1&&!(t>=this.pages[0][i].cy);i++);return{pageX:n,pageY:i}},r.prototype.buildPagesMatrix=function(e,t){var n=[],i=0,s,o,a,u=0,l,c=this.scroll.scroller.scrollBehaviorX.maxScrollPos,h=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(o=Math.round(e/2),a=Math.round(t/2);i>-this.scrollerWidth;){for(n[u]=[],l=0,s=0;s>-this.scrollerHeight;)n[u][l]={x:Math.max(i,c),y:Math.max(s,h),width:e,height:t,cx:i-o,cy:s-a},s-=t,l++;i-=e,u++}return n},r}(),tW=function(){function r(e,t){this.scroll=e,this.slideOptions=t,this.slideX=!1,this.slideY=!1,this.currentPage=Yr({},uO)}return r.prototype.refresh=function(){this.pagesMatrix=new eW(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},r.prototype.getAdjustedCurrentPage=function(){var e=this.currentPage,t=e.pageX,n=e.pageY;t=Math.min(t,this.pagesMatrix.pageLengthOfX-1),n=Math.min(n,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(t=Math.min(t,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(n=Math.min(n,this.pagesMatrix.pageLengthOfY-2));var i=this.pagesMatrix.getPageStats(t,n),s=i.x,o=i.y;return{pageX:t,pageY:n,x:s,y:o}},r.prototype.setCurrentPage=function(e){this.currentPage=e},r.prototype.getInternalPage=function(e,t){e>=this.pagesMatrix.pageLengthOfX?e=this.pagesMatrix.pageLengthOfX-1:e<0&&(e=0),t>=this.pagesMatrix.pageLengthOfY?t=this.pagesMatrix.pageLengthOfY-1:t<0&&(t=0);var n=this.pagesMatrix.getPageStats(e,t),i=n.x,s=n.y;return{pageX:e,pageY:t,x:i,y:s}},r.prototype.getInitialPage=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=this.slideOptions,i=n.startPageXIndex,s=n.startPageYIndex,o=this.loopX?1:0,a=this.loopY?1:0,u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY;t?(u=this.loopX?i+1:i,l=this.loopY?s+1:s):(u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY);var c=this.pagesMatrix.getPageStats(u,l),h=c.x,d=c.y;return{pageX:u,pageY:l,x:h,y:d}},r.prototype.getExposedPage=function(e){var t=Yr({},e);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},r.prototype.getExposedPageByPageIndex=function(e,t){var n={pageX:e,pageY:t};this.loopX&&(n.pageX=e+1),this.loopY&&(n.pageY=t+1);var i=this.pagesMatrix.getPageStats(n.pageX,n.pageY),s=i.x,o=i.y;return{x:s,y:o,pageX:e,pageY:t}},r.prototype.getWillChangedPage=function(e){return e=Yr({},e),this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2),e.x=this.pagesMatrix.getPageStats(e.pageX+1,0).x),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2),e.y=this.pagesMatrix.getPageStats(0,e.pageY+1).y),e},r.prototype.fixedPage=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},r.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},r.prototype.getValidPageIndex=function(e,t){var n=this.pagesMatrix.pageLengthOfX-1,i=this.pagesMatrix.pageLengthOfY-1,s=0,o=0;return this.loopX&&(e+=1,s=s+1,n=n-1),this.loopY&&(t+=1,o=o+1,i=i-1),e=rr(e,s,n),t=rr(t,o,i),{pageX:e,pageY:t}},r.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},r.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},r.prototype.getNearestPage=function(e,t){var n=this.pagesMatrix.getNearestPageIndex(e,t),i=n.pageX,s=n.pageY,o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.getPageByDirection=function(e,t,n){var i=e.pageX,s=e.pageY;i===this.currentPage.pageX&&(i=rr(i+t,0,this.pagesMatrix.pageLengthOfX-1)),s===this.currentPage.pageY&&(s=rr(s+n,0,this.pagesMatrix.pageLengthOfY-1));var o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.resetLoopPage=function(){if(this.loopX){if(this.currentPage.pageX===0)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(this.currentPage.pageY===0)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},r.prototype.getPageIndexByDirection=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t=e==="negative"?t-1:t+1),this.slideY&&(n=e==="negative"?n-1:n+1),{pageX:t,pageY:n}},r.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&Hi("slide does not support two direction at the same time.")},r}(),rW="plugins.slide",nW=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],iW=nW.map(function(r){return{key:r.key,sourceKey:rW+"."+r.name}}),sW=function(r,e){return r.pageX===e.pageX&&r.pageY===e.pageY},oW=function(){function r(e){this.scroll=e,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return r.prototype.satisfyInitialization=function(){return this.scroll.scroller.content.children.length<=0?(Hi("slide need at least one slide page to be initialised.please check your DOM layout."),!1):!0},r.prototype.init=function(){this.willChangeToPage=Yr({},uO),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},r.prototype.createPages=function(){this.pages=new tW(this.scroll,this.options)},r.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(iW)},r.prototype.handleOptions=function(){var e=this.scroll.options.slide===!0?{}:this.scroll.options.slide,t={loop:!0,threshold:.1,speed:400,easing:Ir.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0};this.options=Yr(t,e)},r.prototype.handleLoop=function(e){var t=this.options.loop,n=this.scroll.scroller.content,i=n.children.length;t&&(n!==e?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(e),i>1&&this.cloneFirstAndLastSlidePage(n)):i===3&&this.initialised?(this.removeClonedSlidePage(n),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):i>1?(this.initialised&&this.cachedClonedPageDOM.length===0?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(n),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(n)):this.resetLoopChangedStatus())},r.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,n=this.scroll.scroller.hooks,i=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,function(){return!0}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(s){(s.directionX===1||s.directionY===1)&&e.next(),(s.directionX===-1||s.directionY===-1)&&e.prev()})),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(n,n.eventTypes.beforeRefresh,function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()}),this.registerHooks(n,n.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(n,n.eventTypes.scroll,this.scrollHandler),this.registerHooks(n,n.eventTypes.checkClick,this.startPlay),i&&this.registerHooks(n,n.eventTypes.flick,this.flickHandler)},r.prototype.startPlay=function(){var e=this,t=this.options,n=t.interval,i=t.autoplay;i&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout(function(){e.next()},n))},r.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},r.prototype.setSlideInlineStyle=function(){var e=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],t=this.scroll.scroller,n=t.content,i=t.wrapper,s=this.scroll.options;e.forEach(function(o){var a=o.direction,u=o.sizeType,l=o.styleType;if(s[a]){for(var c=i[u],h=n.children,d=h.length,p=0;p<d;p++){var g=h[p];g.style[l]=c+"px"}n.style[l]=c*d+"px"}})},r.prototype.next=function(e,t){var n=this.pages.nextPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.prev=function(e,t){var n=this.pages.prevPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.goToPage=function(e,t,n,i){var s=this.pages.getValidPageIndex(e,t);this.goTo(s.pageX,s.pageY,n,i)},r.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},r.prototype.setCurrentPage=function(e){this.pages.setCurrentPage(e),this.exposedPage=this.pages.getExposedPage(e)},r.prototype.nearestPage=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=i.maxScrollPos,a=i.minScrollPos,u=s.maxScrollPos,l=s.minScrollPos;return this.pages.getNearestPage(rr(e,o,a),rr(t,u,l))},r.prototype.satisfyThreshold=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=!0;return Math.abs(e-i.absStartPos)<=this.thresholdX&&Math.abs(t-s.absStartPos)<=this.thresholdY&&(o=!1),o},r.prototype.refreshHandler=function(e){var t=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var n=this.contentChanged=this.prevContent!==e;n&&(this.prevContent=e);var i=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,n||!this.initialised);this.initialised?this.goTo(i.pageX,i.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(s){t.initialised=!0,s.x=i.x,s.y=i.y}),this.startPlay()}},r.prototype.computeThreshold=function(){var e=this.options.threshold;if(e%1===0)this.thresholdX=e,this.thresholdY=e;else{var t=this.pages.getPageStats(),n=t.width,i=t.height;this.thresholdX=Math.round(n*e),this.thresholdY=Math.round(i*e)}},r.prototype.cloneFirstAndLastSlidePage=function(e){var t=e.children,n=t[t.length-1].cloneNode(!0),i=t[0].cloneNode(!0);gG(n,e),e.appendChild(i),this.cachedClonedPageDOM=[n,i]},r.prototype.removeClonedSlidePage=function(e){var t=e&&e.children||[];t.length&&this.cachedClonedPageDOM.forEach(function(n){yG(e,n)}),this.cachedClonedPageDOM=[]},r.prototype.modifyCurrentPage=function(e){var t=this.getCurrentPage(),n=t.pageX,i=t.pageY,s=this.nearestPage(e.x,e.y);if(this.setCurrentPage(s),this.contentChanged)return this.contentChanged=!1,!0;var o=this.getCurrentPage(),a=o.pageX,u=o.pageY;if(this.pageWillChangeTo(s),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&n===0&&i===0)return this.moreToOnePageInLoop=!1,!0;if(n!==a||i!==u){var l=this.pages.getExposedPageByPageIndex(a,u);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,l)}if(this.resetLooping){this.resetLooping=!1;return}var c=this.pages.resetLoopPage();if(c)return this.resetLooping=!0,this.goTo(c.pageX,c.pageY,0),!0},r.prototype.goTo=function(e,t,n,i){var s=this.pages.getInternalPage(e,t),o=i||this.options.easing||Ir.bounce,a=s.x,u=s.y,l=a-this.scroll.scroller.scrollBehaviorX.currentPos,c=u-this.scroll.scroller.scrollBehaviorY.currentPos;if(!l&&!c){this.scroll.scroller.togglePointerEvents(!0);return}n=n===void 0?this.getEaseTime(l,c):n,this.scroll.scroller.scrollTo(a,u,n,o)},r.prototype.flickHandler=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos,s=t.startPos,o=t.direction,a=n.currentPos,u=n.startPos,l=n.direction,c=this.pages.currentPage,h=c.pageX,d=c.pageY,p=this.getEaseTime(i-s,a-u);this.goTo(h+o,d+l,p)},r.prototype.getEaseTime=function(e,t){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},r.prototype.modifyScrollMetaHandler=function(e){var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=t.animater,o=e.newX,a=e.newY,u=this.satisfyThreshold(o,a)||s.forceStopped?this.pages.getPageByDirection(this.nearestPage(o,a),n.direction,i.direction):this.pages.currentPage;e.time=this.getEaseTime(e.newX-u.x,e.newY-u.y),e.newX=u.x,e.newY=u.y,e.easing=this.options.easing||Ir.bounce},r.prototype.scrollHandler=function(e){var t=e.x,n=e.y;if(this.satisfyThreshold(t,n)){var i=this.nearestPage(t,n);this.pageWillChangeTo(i)}},r.prototype.pageWillChangeTo=function(e){var t=this.pages.getWillChangedPage(e);sW(this.willChangeToPage,t)||(this.willChangeToPage=t,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){var e=this.scroll.scroller.content,t=this.options,n=t.loop,i=t.autoplay;n&&this.removeClonedSlidePage(e),i&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],u=s[2];o.eventTypes[a]&&o.off(a,u)}),this.hooksFn.length=0},r.pluginName="slide",r}(),aW="plugins.wheel",lW=[{key:"wheelTo",name:"wheelTo"},{key:"getSelectedIndex",name:"getSelectedIndex"},{key:"restorePosition",name:"restorePosition"}],uW=lW.map(function(r){return{key:r.key,sourceKey:aW+"."+r.name}}),iA="wheelIndexChanged",hW={rate:4},cW=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.refreshBoundary(),this.setSelectedIndex(this.options.selectedIndex)},r.prototype.handleBScroll=function(){this.scroll.proxy(uW),this.scroll.registerType([iA])},r.prototype.handleOptions=function(){var e=this.scroll.options.wheel===!0?{}:this.scroll.options.wheel,t={wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item",rotate:25,adjustTime:400,selectedIndex:0,wheelDisabledItemClass:"wheel-disabled-item"};this.options=Yr(t,e)},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller,i=n.actionsHandler,s=n.scrollBehaviorX,o=n.scrollBehaviorY,a=n.animater,u=n.content;t.on(t.eventTypes.scrollEnd,function(l){var c=e.findNearestValidWheel(l.y).index;if(n.animater.forceStopped&&!e.isAdjustingPosition)return e.target=e.items[c],!0;e.setSelectedIndex(c),e.isAdjustingPosition&&(e.isAdjustingPosition=!1)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh,function(l){l!==u&&(u=l,e.setSelectedIndex(e.options.selectedIndex,!0)),e.rotateX(e.scroll.y),e.wheelTo(e.selectedIndex,0)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(l){l.x=0,l.y=-(e.selectedIndex*e.itemHeight)}),n.hooks.on(n.hooks.eventTypes.checkClick,function(){var l=xG(e.items).indexOf(e.target);return l===-1||e.wheelTo(l,e.options.adjustTime,Ir.swipe),!0}),n.hooks.on(n.hooks.eventTypes.scrollTo,function(l){l.y=e.findNearestValidWheel(l.y).y}),n.hooks.on(n.hooks.eventTypes.minDistanceScroll,function(){var l=n.animater;l.forceStopped===!0&&(l.forceStopped=!1)}),n.hooks.on(n.hooks.eventTypes.scrollToElement,function(l,c){if(_p(l,e.options.wheelItemClass))c.top=e.findNearestValidWheel(c.top).y;else return!0}),i.hooks.on(i.hooks.eventTypes.beforeStart,function(l){e.target=l.target}),s.hooks.on(s.hooks.eventTypes.computeBoundary,function(l){l.maxScrollPos=0,l.minScrollPos=0}),o.hooks.on(o.hooks.eventTypes.computeBoundary,function(l){e.items=e.scroll.scroller.content.children,e.checkWheelAllDisabled(),e.itemHeight=e.items.length>0?o.contentSize/e.items.length:0,l.maxScrollPos=-e.itemHeight*(e.items.length-1),l.minScrollPos=0}),o.hooks.on(o.hooks.eventTypes.momentum,function(l){l.rate=hW.rate,l.destination=e.findNearestValidWheel(l.destination).y}),o.hooks.on(o.hooks.eventTypes.end,function(l){var c=e.findNearestValidWheel(o.currentPos);l.destination=c.y,l.duration=e.options.adjustTime}),a.hooks.on(a.hooks.eventTypes.time,function(l){e.transitionDuration(l)}),a.hooks.on(a.hooks.eventTypes.timeFunction,function(l){e.timeFunction(l)}),a.hooks.on(a.hooks.eventTypes.callStop,function(){var l=e.findNearestValidWheel(e.scroll.y).index;e.isAdjustingPosition=!0,e.wheelTo(l,0)}),a.translater.hooks.on(a.translater.hooks.eventTypes.translate,function(l){e.rotateX(l.y)})},r.prototype.refreshBoundary=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=e.content;t.refresh(i),n.refresh(i)},r.prototype.setSelectedIndex=function(e,t){t===void 0&&(t=!1);var n=this.selectedIndex;this.selectedIndex=e,n!==e&&!t&&this.scroll.trigger(iA,e)},r.prototype.getSelectedIndex=function(){return this.selectedIndex},r.prototype.wheelTo=function(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0);var i=-e*this.itemHeight;this.scroll.scrollTo(0,i,t,n)},r.prototype.restorePosition=function(){var e=this.scroll.pending;if(e){var t=this.getSelectedIndex();this.scroll.scroller.animater.clearTimer(),this.wheelTo(t,0)}},r.prototype.transitionDuration=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[jt.transitionDuration]=e+"ms"},r.prototype.timeFunction=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[jt.transitionTimingFunction]=e},r.prototype.rotateX=function(e){for(var t=this.options.rotate,n=t===void 0?25:t,i=0;i<this.items.length;i++){var s=n*(e/this.itemHeight+i),o=s.toFixed(3);this.items[i].style[jt.transform]="rotateX("+o+"deg)"}},r.prototype.findNearestValidWheel=function(e){e=e>0?0:e<this.scroll.maxScrollY?this.scroll.maxScrollY:e;for(var t=Math.abs(Math.round(-e/this.itemHeight)),n=t,i=this.items,s=this.options.wheelDisabledItemClass;t>=0&&_p(i[t],s);)t--;if(t<0)for(t=n;t<=i.length-1&&_p(i[t],s);)t++;return t===i.length&&(t=n),{index:this.wheelItemsAllDisabled?-1:t,y:-t*this.itemHeight}},r.prototype.checkWheelAllDisabled=function(){var e=this.options.wheelDisabledItemClass,t=this.items;this.wheelItemsAllDisabled=!0;for(var n=0;n<t.length;n++)if(!_p(t[n],e)){this.wheelItemsAllDisabled=!1;break}},r.pluginName="wheel",r}(),dW="plugins.zoom",fW=[{key:"zoomTo",name:"zoomTo"}],pW=fW.map(function(r){return{key:r.key,sourceKey:dW+"."+r.name}}),Ep=2,Cp=1,mW=function(){function r(e){this.scroll=e,this.scale=Cp,this.prevScale=1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.tryInitialZoomTo(this.zoomOpt)},r.prototype.zoomTo=function(e,t,n,i){var s=this.resolveOrigin(t,n),o=s.originX,a=s.originY,u={x:o,y:a,baseScale:this.scale};this._doZoomTo(e,u,i,!0)},r.prototype.handleBScroll=function(){this.scroll.proxy(pW),this.scroll.registerType(["beforeZoomStart","zoomStart","zooming","zoomEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.zoom===!0?{}:this.scroll.options.zoom,t={start:1,min:1,max:4,initialOrigin:[0,0],minimalZoomDistance:5,bounceTime:800};this.zoomOpt=Yr(t,e)},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller;this.wrapper=this.scroll.scroller.wrapper,this.setTransformOrigin(this.scroll.scroller.content);var i=n.scrollBehaviorX,s=n.scrollBehaviorY;this.hooksFn=[],this.registerHooks(t.hooks,t.hooks.eventTypes.contentChanged,function(o){e.setTransformOrigin(o),e.scale=Cp,e.tryInitialZoomTo(e.zoomOpt)}),this.registerHooks(t.hooks,t.hooks.eventTypes.beforeInitialScrollTo,function(){if(e.zoomOpt.start!==Cp)return!0}),this.registerHooks(i.hooks,i.hooks.eventTypes.beforeComputeBoundary,function(){var o=yl(e.scroll.scroller.content);i.contentSize=Math.floor(o.width*e.scale)}),this.registerHooks(s.hooks,s.hooks.eventTypes.beforeComputeBoundary,function(){var o=yl(e.scroll.scroller.content);s.contentSize=Math.floor(o.height*e.scale)}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.start,function(o){var a=o.touches&&o.touches.length||0;e.fingersOperation(a),a===Ep&&e.zoomStart(o)}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeMove,function(o){var a=o.touches&&o.touches.length||0;if(e.fingersOperation(a),a===Ep)return e.zoom(o),!0}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeEnd,function(o){var a=e.fingersOperation();if(a===Ep)return e.zoomEnd(),!0}),this.registerHooks(n.translater.hooks,n.translater.hooks.eventTypes.beforeTranslate,function(o,a){var u=a.scale?a.scale:e.prevScale;e.prevScale=u,o.push("scale("+u+")")}),this.registerHooks(n.hooks,n.hooks.eventTypes.scrollEnd,function(){e.fingersOperation()===Ep&&e.scroll.trigger(e.scroll.eventTypes.zoomEnd,{scale:e.scale})}),this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.setTransformOrigin=function(e){e.style[jt.transformOrigin]="0 0"},r.prototype.tryInitialZoomTo=function(e){var t=e.start,n=e.initialOrigin,i=this.scroll.scroller,s=i.scrollBehaviorX,o=i.scrollBehaviorY;t!==Cp&&(this.resetBoundaries([s,o]),this.zoomTo(t,n[0],n[1],0))},r.prototype.fingersOperation=function(e){if(typeof e=="number")this.numberOfFingers=e;else return this.numberOfFingers},r.prototype._doZoomTo=function(e,t,n,i){var s=this;n===void 0&&(n=this.zoomOpt.bounceTime),i===void 0&&(i=!1);var o=this.zoomOpt,a=o.min,u=o.max,l=this.scale,c=rr(e,a,u);(function(){if(n===0){s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:c});return}if(n>0){var h,d=jn(),p=d+n,g=function(){var v=jn();if(v>=p){s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:c}),wa(h);return}var x=Ir.bounce.fn((v-d)/n),y=x*(c-l)+l;s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:y}),h=bb(g)};g()}})(),this.fingersOperation(2),this._zoomTo(c,l,t,n,i)},r.prototype._zoomTo=function(e,t,n,i,s){s===void 0&&(s=!1);var o=e/n.baseScale;this.setScale(e);var a=this.scroll.scroller,u=a.scrollBehaviorX,l=a.scrollBehaviorY;this.resetBoundaries([u,l]);var c=this.getNewPos(n.x,o,u,!0,s),h=this.getNewPos(n.y,o,l,!0,s);(u.currentPos!==Math.round(c)||l.currentPos!==Math.round(h)||e!==t)&&a.scrollTo(c,h,i,Ir.bounce,{start:{scale:t},end:{scale:e}})},r.prototype.resolveOrigin=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.contentSize},bottom:function(){return s.contentSize},center:function(a){var u=a===0?i.contentSize:s.contentSize;return u/2}};return{originX:typeof e=="number"?e:o[e](0),originY:typeof t=="number"?t:o[t](1)}},r.prototype.zoomStart=function(e){var t=e.touches[0],n=e.touches[1];this.startDistance=this.getFingerDistance(e),this.startScale=this.scale;var i=lG(this.wrapper),s=i.left,o=i.top;this.origin={x:Math.abs(t.pageX+n.pageX)/2+s-this.scroll.x,y:Math.abs(t.pageY+n.pageY)/2+o-this.scroll.y,baseScale:this.startScale},this.scroll.trigger(this.scroll.eventTypes.beforeZoomStart)},r.prototype.zoom=function(e){var t=this.getFingerDistance(e);if(!(!this.zoomed&&Math.abs(t-this.startDistance)<this.zoomOpt.minimalZoomDistance)){var n=this.dampingScale(t/this.startDistance*this.startScale),i=n/this.startScale;this.setScale(n),this.zoomed||(this.zoomed=!0,this.scroll.trigger(this.scroll.eventTypes.zoomStart));var s=this.scroll.scroller,o=s.scrollBehaviorX,a=s.scrollBehaviorY,u=this.getNewPos(this.origin.x,i,o,!1,!1),l=this.getNewPos(this.origin.y,i,a,!1,!1);this.scroll.trigger(this.scroll.eventTypes.zooming,{scale:this.scale}),s.translater.translate({x:u,y:l,scale:n})}},r.prototype.zoomEnd=function(){if(this.zoomed){if(this.shouldRebound()){this._doZoomTo(this.scale,this.origin,this.zoomOpt.bounceTime);return}this.scroll.trigger(this.scroll.eventTypes.zoomEnd,{scale:this.scale})}},r.prototype.getFingerDistance=function(e){var t=e.touches[0],n=e.touches[1],i=Math.abs(t.pageX-n.pageX),s=Math.abs(t.pageY-n.pageY);return sG(i,s)},r.prototype.shouldRebound=function(){var e=this.zoomOpt,t=e.min,n=e.max,i=this.scale;if(i!==rr(i,t,n))return!0;var s=this.scroll.scroller,o=s.scrollBehaviorX,a=s.scrollBehaviorY;this.resetBoundaries([o,a]);var u=o.checkInBoundary().inBoundary,l=o.checkInBoundary().inBoundary;return!(u&&l)},r.prototype.dampingScale=function(e){var t=this.zoomOpt,n=t.min,i=t.max;return e<n?e=.5*n*Math.pow(2,e/n):e>i&&(e=2*i*Math.pow(.5,i/e)),e},r.prototype.setScale=function(e){this.scale=e},r.prototype.resetBoundaries=function(e){e.forEach(function(t){return t.computeBoundary()})},r.prototype.getNewPos=function(e,t,n,i,s){s===void 0&&(s=!1);var o=e-e*t+(s?n.currentPos:n.startPos);return i&&(o=rr(o,n.maxScrollPos,n.minScrollPos)),o>0?Math.floor(o):Math.ceil(o)},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.pluginName="zoom",r}(),gW=function(){function r(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return r.create=function(e){return new r(e)},r.prototype.hasAncestors=function(e){var t=Tu(this.ancestors,function(n){var i=n[0];return i===e});return t>-1},r.prototype.hasDescendants=function(e){var t=Tu(this.descendants,function(n){var i=n[0];return i===e});return t>-1},r.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort(function(i,s){return i[1]-s[1]})},r.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort(function(i,s){return i[1]-s[1]})},r.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=Tu(this.ancestors,function(i){var s=i[0];return s===e});if(n>-1)return t.splice(n,1)}},r.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=Tu(this.descendants,function(i){var s=i[0];return s===e});if(n>-1)return t.splice(n,1)}},r.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},r.prototype.setAnalyzed=function(e){e===void 0&&(e=!1),this.analyzed=e},r.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){var n=t[0];n.removeDescendant(e)}),this.descendants.forEach(function(t){var n=t[0];n.removeAncestor(e)}),this.hooksManager.forEach(function(t){var n=t[0],i=t[1],s=t[2];n.off(i,s)}),this.hooksManager=[]},r}(),vW="plugins.nestedScroll",yW=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],xW=yW.map(function(r){return{key:r.key,sourceKey:vW+"."+r.name}}),_W="INTERNAL_NESTED_SCROLL",wW=function(r){r.forEach(function(e){e.pending&&(e.stop(),e.resetPosition())})},sA=function(r){r.forEach(function(e){e.enable()})},Pp=function(r,e){r.forEach(function(t){(t.hasHorizontalScroll===e.hasHorizontalScroll||t.hasVerticalScroll===e.hasVerticalScroll)&&t.disable()})},bW=function(r){r.forEach(function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,s=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),s.start(),i.resetStartPos(),s.resetStartPos(),n.startTime=+new Date})},SW=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,s=r.minScrollX,o=r.maxScrollX,a=r.minScrollY,u=r.maxScrollY,l=r.movingDirectionX,c=r.movingDirectionY,h=!1,d=n>=s&&l===-1,p=n<=o&&l===1,g=i>=a&&c===-1,v=i<=u&&c===1;return t?h=g||v:e&&(h=d||p),h},TW=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,s=r.minScrollX,o=r.maxScrollX,a=r.minScrollY,u=r.maxScrollY,l=!1,c=n>s,h=n<o,d=i>a,p=i<u;return t?l=d||p:e&&(l=c||h),l},EW=function(r){r.scroller.reflow(),r.resetPosition(0)},CW=function(r,e){for(var t=0,n=r.parentNode;n&&n!==e;)t++,n=n.parentNode;return t},PW=function(){function r(e){var t=this.handleOptions(e),n=r.instancesMap[t];return n||(n=r.instancesMap[t]=this,n.store=[],n.hooksFn=[]),n.init(e),n}return r.getAllNestedScrolls=function(){var e=r.instancesMap;return Object.keys(e).map(function(t){return e[t]})},r.purgeAllNestedScrolls=function(){var e=r.getAllNestedScrolls();e.forEach(function(t){return t.purgeNestedScroll()})},r.prototype.handleOptions=function(e){var t=e.options.nestedScroll===!0?{}:e.options.nestedScroll,n={groupId:_W};this.options=Yr(n,t);var i=typeof this.options.groupId;return i!=="string"&&i!=="number"&&Hi("groupId must be string or number for NestedScroll plugin"),this.options.groupId},r.prototype.init=function(e){e.proxy(xW),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},r.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,function(){t.deleteScroll(e)})},r.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,s=Tu(n,function(d){return d.selfScroll===e});if(s>-1){var o=n[s];o.purge(),n.splice(s,1)}var a=Tu(i,function(d){var p=d[0];return p===e.hooks});if(a>-1){var u=i[a],l=u[0],c=u[1],h=u[2];l.off(c,h),i.splice(a,1)}},r.prototype.addBScroll=function(e){this.store.push(gW.create(e))},r.prototype.buildBScrollGraph=function(){for(var e=this.store,t,n,i,s,o=this.store.length,a=0;a<o;a++){t=e[a],i=t.selfScroll.wrapper;for(var u=0;u<o;u++)if(n=e[u],s=n.selfScroll.wrapper,t!==n&&i.contains(s)){var l=CW(s,i);t.hasDescendants(n)||t.addDescendant(n,l),n.hasAncestors(t)||n.addAncestor(t,l)}}},r.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,s=function(){var u=t.map(function(c){var h=c[0];return h.selfScroll}),l=n.map(function(c){var h=c[0];return h.selfScroll});wW(sg(u,l)),TW(i)&&EW(i),bW(u),Pp(u,i)},o=function(){var u=t.map(function(c){var h=c[0];return h.selfScroll}),l=n.map(function(c){var h=c[0];return h.selfScroll});sA(sg(u,l))};e.registerHooks(i,i.eventTypes.beforeScrollStart,s),e.registerHooks(i,i.eventTypes.touchEnd,o);var a=i.scroller.actions.hooks;e.registerHooks(a,a.eventTypes.detectMovingDirection,function(){var u=t.map(function(p){var g=p[0];return g.selfScroll}),l=u[0],c=u.slice(1),h=i.scroller.actions.contentMoved,d=u.length===0;if(h)Pp(u,i);else if(!d&&SW(i))return Pp([i],i),l&&sA([l]),Pp(c,i),!0}),e.setAnalyzed(!0)}})},r.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort(function(n,i){return n.descendants.length-i.descendants.length});t.forEach(function(n){var i=n.selfScroll;i.scroller.actionsHandler.rebindDOMEvents()})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var n=t[0],i=t[1],s=t[2];n.off(i,s)}),this.hooksFn=[],delete r.instancesMap[e]},r.pluginName="nestedScroll",r.instancesMap={},r}(),oA=10,aA=30,AW=function(){function r(e,t){this.wrapperHeight=e,this.tombstoneHeight=t,this.lastDirection=1,this.lastPos=0}return r.prototype.calculate=function(e,t){var n=e-this.lastPos;this.lastPos=e;var i=this.getDirection(n),s=this.calculateIndex(0,e,t),o=this.calculateIndex(s,e+this.wrapperHeight,t);return i===1?(s-=oA,o+=aA):(s-=aA,o+=oA),s<0&&(s=0),{start:s,end:o}},r.prototype.getDirection=function(e){var t;if(e>0)t=1;else if(e<0)t=0;else return this.lastDirection;return this.lastDirection=t,t},r.prototype.calculateIndex=function(e,t,n){if(t<=0)return e;for(var i=e,s=n[i]&&n[i].pos!==-1?n[i].pos:0,o=s,a=0;i<n.length&&n[i].pos<t;)o=n[i].pos,i++;return i===n.length&&(a=Math.floor((t-o)/this.tombstoneHeight)),i+=a,i},r.prototype.resetState=function(){this.lastDirection=1,this.lastPos=0},r}(),kW=function(){function r(){this.data=null,this.dom=null,this.tombstone=null,this.width=0,this.height=0,this.pos=0}return r}(),IW=function(){function r(e,t,n){this.fetchFn=t,this.onFetchFinish=n,this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=e||[]}return r.prototype.update=function(e){return Yy(this,void 0,void 0,function(){var t;return Gy(this,function(n){return this.hasMore||(e=Math.min(e,this.list.length)),e>this.list.length&&(t=e-this.list.length,this.addEmptyData(t)),[2,this.checkToFetch(e)]})})},r.prototype.add=function(e){for(var t=0;t<e.length;t++)this.list[this.loadedNum]?this.list[this.loadedNum]=Vi(Vi({},this.list[this.loadedNum]),{data:e[t]}):this.list[this.loadedNum]={data:e[t]},this.loadedNum++;return this.list},r.prototype.addEmptyData=function(e){for(var t=0;t<e;t++)this.list.push(new kW);return this.list},r.prototype.fetch=function(e){return Yy(this,void 0,void 0,function(){var t;return Gy(this,function(n){switch(n.label){case 0:return this.fetching?[2,[]]:(this.fetching=!0,[4,this.fetchFn(e)]);case 1:return t=n.sent(),this.fetching=!1,[2,t]}})})},r.prototype.checkToFetch=function(e){return Yy(this,void 0,void 0,function(){var t,n,i;return Gy(this,function(s){switch(s.label){case 0:return this.hasMore?e<=this.loadedNum?[2]:(t=e-this.loadedNum,[4,this.fetch(t)]):[2];case 1:return n=s.sent(),n instanceof Array&&n.length?(this.add(n),i=this.onFetchFinish(this.list,!0),[2,this.checkToFetch(i)]):(typeof n=="boolean"&&n===!1&&(this.hasMore=!1,this.list.splice(this.loadedNum),this.onFetchFinish(this.list,!1)),[2])}})})},r.prototype.getList=function(){return this.list},r.prototype.resetState=function(){this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=[]},r}(),rm=function(){function r(e){this.create=e,this.cached=[],this.width=0,this.height=0,this.initialed=!1,this.getSize()}return r.isTombstone=function(e){return e&&e.classList?e.classList.contains("tombstone"):!1},r.prototype.getSize=function(){if(!this.initialed){var e=this.create();e.style.position="absolute",document.body.appendChild(e),e.style.display="",this.height=e.offsetHeight,this.width=e.offsetWidth,document.body.removeChild(e),this.cached.push(e)}},r.prototype.getOne=function(){var e=this.cached.pop();if(e){var t=e.style;return t.display="",t.opacity="1",t[jt.transform]="",t[jt.transition]="",e}return this.create()},r.prototype.recycle=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];i.style.display="none",this.cached.push(i)}return this.cached},r.prototype.recycleOne=function(e){return this.cached.push(e),this.cached},r}(),Qy=200,MW=function(){function r(e,t,n){this.renderFn=t,this.tombstone=n,this.unusedDom=[],this.timers=[],this.setContent(e)}return r.prototype.update=function(e,t,n){t>=e.length&&(t=e.length-1),n>e.length&&(n=e.length),this.collectUnusedDom(e,t,n),this.createDom(e,t,n),this.cacheHeight(e,t,n);var i=this.positionDom(e,t,n),s=i.startPos,o=i.startDelta,a=i.endPos;return{start:t,startPos:s,startDelta:o,end:n,endPos:a}},r.prototype.collectUnusedDom=function(e,t,n){for(var i=0;i<e.length;i++){if(i===t){i=n-1;continue}if(e[i].dom){var s=e[i].dom;rm.isTombstone(s)?(this.tombstone.recycleOne(s),s.style.display="none"):this.unusedDom.push(s),e[i].dom=null}}return e},r.prototype.createDom=function(e,t,n){for(var i=t;i<n;i++){var s=e[i].dom,o=e[i].data;if(s)if(rm.isTombstone(s)&&o)e[i].tombstone=s,e[i].dom=null;else continue;s=o?this.renderFn(o,this.unusedDom.pop()):this.tombstone.getOne(),s.style.position="absolute",e[i].dom=s,e[i].pos=-1,this.content.appendChild(s)}},r.prototype.cacheHeight=function(e,t,n){for(var i=t;i<n;i++)e[i].data&&!e[i].height&&(e[i].height=e[i].dom.offsetHeight)},r.prototype.positionDom=function(e,t,n){for(var i=this,s=[],o=this.getStartPos(e,t,n),a=o.start,u=o.delta,l=a,c=t;c<n;c++){var h=e[c].tombstone;if(h){var d=h.style;d[jt.transition]=uG+"transform "+Qy+"ms, opacity "+Qy+"ms",d[jt.transform]="translateY("+l+"px)",d.opacity="0",e[c].tombstone=null,s.push(h)}e[c].dom&&e[c].pos!==l&&(e[c].dom.style[jt.transform]="translateY("+l+"px)",e[c].pos=l),l+=e[c].height||this.tombstone.height}var p=window.setTimeout(function(){i.tombstone.recycle(s)},Qy);return this.timers.push(p),{startPos:a,startDelta:u,endPos:l}},r.prototype.getStartPos=function(e,t,n){if(e[t]&&e[t].pos!==-1)return{start:e[t].pos,delta:0};for(var i=e[0].pos===-1?0:e[0].pos,s=0;s<t;s++)i+=e[s].height||this.tombstone.height;var o=i,a;for(a=t;a<n;a++)if(!rm.isTombstone(e[a].dom)&&e[a].pos!==-1){i=e[a].pos;break}var u=a;if(u<n)for(;u>t;)i-=e[u-1].height,u--;var l=o-i;return{start:i,delta:l}},r.prototype.removeTombstone=function(){for(var e=this.content.querySelectorAll(".tombstone"),t=e.length-1;t>=0;t--)this.content.removeChild(e[t])},r.prototype.setContent=function(e){e!==this.content&&(this.content=e)},r.prototype.destroy=function(){this.removeTombstone(),this.timers.forEach(function(e){clearTimeout(e)})},r.prototype.resetState=function(){this.destroy(),this.timers=[],this.unusedDom=[]},r}(),RW=-2e3,OW=function(){function r(e){this.scroll=e,this.start=0,this.end=0,this.init()}return r.prototype.init=function(){var e=this;this.handleOptions();var t=this.options,n=t.fetch,i=t.render,s=t.createTombstone;this.tombstone=new rm(s),this.indexCalculator=new AW(this.scroll.scroller.scrollBehaviorY.wrapperSize,this.tombstone.height),this.domManager=new MW(this.scroll.scroller.content,i,this.tombstone),this.dataManager=new IW([],n,this.onFetchFinish.bind(this)),this.scroll.on(this.scroll.eventTypes.destroy,this.destroy,this),this.scroll.on(this.scroll.eventTypes.scroll,this.update,this),this.scroll.on(this.scroll.eventTypes.contentChanged,function(a){e.domManager.setContent(a),e.indexCalculator.resetState(),e.domManager.resetState(),e.dataManager.resetState(),e.update({y:0})});var o=this.scroll.scroller.scrollBehaviorY;o.hooks.on(o.hooks.eventTypes.computeBoundary,this.modifyBoundary,this),this.update({y:0})},r.prototype.modifyBoundary=function(e){e.maxScrollPos=RW},r.prototype.handleOptions=function(){var e=this.scroll.options.infinity;e&&(typeof e.fetch!="function"&&Hi("Infinity plugin need fetch Function to new data."),typeof e.render!="function"&&Hi("Infinity plugin need render Function to render each item."),typeof e.render!="function"&&Hi("Infinity plugin need createTombstone Function to create tombstone."),this.options=e),this.scroll.options.probeType=3},r.prototype.update=function(e){var t=Math.round(-e.y),n=this.indexCalculator.calculate(t,this.dataManager.getList()),i=n.start,s=n.end;this.start=i,this.end=s,this.dataManager.update(s),this.updateDom(this.dataManager.getList())},r.prototype.onFetchFinish=function(e,t){var n=this.updateDom(e).end;return t||(this.domManager.removeTombstone(),this.scroll.scroller.animater.stop(),this.scroll.resetPosition()),n},r.prototype.updateDom=function(e){var t=this.domManager.update(e,this.start,this.end),n=t.end,i=t.startPos,s=t.endPos,o=t.startDelta;return o&&(this.scroll.minScrollY=o),s>this.scroll.maxScrollY&&(this.scroll.maxScrollY=-(s-this.scroll.scroller.scrollBehaviorY.wrapperSize)),{end:n,startPos:i,endPos:s}},r.prototype.destroy=function(){for(var e=this.scroll.scroller,t=e.content,n=e.scrollBehaviorY;t.firstChild;)t.removeChild(t.firstChild);this.domManager.destroy(),this.scroll.off("scroll",this.update),this.scroll.off("destroy",this.destroy),n.hooks.off(n.hooks.eventTypes.computeBoundary)},r.pluginName="infinity",r}(),BW="plugins.movable",LW=[{key:"putAt",name:"putAt"}],NW=LW.map(function(r){return{key:r.key,sourceKey:BW+"."+r.name}}),FW=function(){function r(e){this.scroll=e,this.handleBScroll(),this.handleHooks()}return r.prototype.handleBScroll=function(){this.scroll.proxy(NW)},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=function(o,a){o.maxScrollPos>0&&(o.minScrollPos=a.wrapperSize-a.contentSize,o.maxScrollPos=0)};this.registerHooks(n.hooks,n.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,function(o){s(o,n)}),this.registerHooks(i.hooks,i.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(i.hooks,i.hooks.eventTypes.computeBoundary,function(o){s(o,i)}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){e.destroy()})},r.prototype.putAt=function(e,t,n,i){n===void 0&&(n=this.scroll.options.bounceTime),i===void 0&&(i=Ir.bounce);var s=this.resolvePostion(e,t);this.scroll.scrollTo(s.x,s.y,n,i)},r.prototype.resolvePostion=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.minScrollPos},bottom:function(){return s.minScrollPos},center:function(a){var u=a===0?i.minScrollPos:s.minScrollPos;return u/2}};return{x:typeof e=="number"?e:o[e](0),y:typeof t=="number"?t:o[t](1)}},r.prototype.destroy=function(){this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.pluginName="movable",r.applyOrder="pre",r}(),DW=function(r){return r.tagName.toLowerCase()==="img"},UW=function(){function r(e){this.scroll=e,this.refreshTimer=0,this.init()}return r.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={debounceTime:100};this.options=Yr(t,e)},r.prototype.bindEventsToWrapper=function(){var e=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new wn(e,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new wn(e,[{name:"error",handler:this.load.bind(this),capture:!0}])},r.prototype.load=function(e){var t=this,n=e.target,i=this.options.debounceTime;n&&DW(n)&&(i===0?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(function(){t.scroll.refresh()},this.options.debounceTime)))},r.pluginName="observeImage",r}(),jW=function(r){var e={ratioX:0,ratioY:0};return r&&(typeof r=="number"?e.ratioX=e.ratioY=r:typeof r=="object"&&r&&(e.ratioX=r.x||0,e.ratioY=r.y||0)),e},Zy=function(r){al(r),r.stopPropagation()},XW=function(){function r(e,t){this.scroll=e,this.options=t,this.currentPos={x:0,y:0},this.hooksFn=[],this.handleDOM(),this.handleHooks(),this.handleInteractive()}return r.prototype.handleDOM=function(){var e=this.options,t=e.relationElement,n=e.relationElementHandleElementIndex,i=n===void 0?0:n;this.wrapper=t,this.indicatorEl=this.wrapper.children[i]},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=t.hooks,i=t.scroller.translater.hooks,s=t.scroller.animater.hooks;this.registerHooks(n,n.eventTypes.refresh,this.refresh),this.registerHooks(i,i.eventTypes.translate,function(o){e.updatePosition(o)}),this.registerHooks(s,s.eventTypes.time,this.transitionTime),this.registerHooks(s,s.eventTypes.timeFunction,this.transitionTimingFunction)},r.prototype.transitionTime=function(e){e===void 0&&(e=0),this.indicatorEl.style[jt.transitionDuration]=e+"ms"},r.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[jt.transitionTimingFunction]=e},r.prototype.handleInteractive=function(){this.options.interactive!==!1&&this.registerEvents()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.registerEvents=function(){var e=this.scroll.options,t=e.disableMouse,n=e.disableTouch,i=[],s=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),s.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),s.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new wn(this.indicatorEl,i),this.moveEventRegister=new wn(window,s),this.endEventRegister=new wn(window,o)},r.prototype.refresh=function(){var e=this.scroll,t=e.x,n=e.y,i=e.hasHorizontalScroll,s=e.hasVerticalScroll,o=e.maxScrollX,a=e.maxScrollY,u=jW(this.options.ratio),l=u.ratioX,c=u.ratioY,h=_G(this.wrapper),d=h.width,p=h.height,g=yl(this.indicatorEl),v=g.width,x=g.height;i&&(this.maxScrollX=d-v,this.translateXSign=this.maxScrollX>0?-1:1,this.minScrollX=0,this.ratioX=l||Math.abs(this.maxScrollX/o)),s&&(this.maxScrollY=p-x,this.translateYSign=this.maxScrollY>0?-1:1,this.minScrollY=0,this.ratioY=c||Math.abs(this.maxScrollY/a)),this.updatePosition({x:t,y:n})},r.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;Zy(e),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=jn(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)}},r.prototype.BScrollIsDisabled=function(){return!this.scroll.enabled},r.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t.pageX,i=t.pageY;Zy(e);var s=n-this.lastPointX,o=i-this.lastPointY;if(this.lastPointX=n,this.lastPointY=i,!this.moved&&!this.indicatorNotMoved(s,o)&&(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var a=this.getBScrollPosByRatio(this.currentPos,s,o);this.syncBScroll(a)}}},r.prototype.end=function(e){if(this.initiated&&(this.initiated=!1,Zy(e),this.moved)){var t=this.scroll,n=t.x,i=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:n,y:i})}},r.prototype.getBScrollPosByRatio=function(e,t,n){var i=e.x,s=e.y,o=this.scroll,a=o.hasHorizontalScroll,u=o.hasVerticalScroll,l=o.minScrollX,c=o.maxScrollX,h=o.minScrollY,d=o.maxScrollY,p=this.scroll,g=p.x,v=p.y;if(a){var x=rr(i+t,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX)),y=Math.round(x/this.ratioX*this.translateXSign);g=rr(y,c,l)}if(u){var b=rr(s+n,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY)),_=Math.round(b/this.ratioY*this.translateYSign);v=rr(_,d,h)}return{x:g,y:v}},r.prototype.indicatorNotMoved=function(e,t){var n=this.currentPos,i=n.x,s=n.y,o=i===this.minScrollX&&e<=0||i===this.maxScrollX&&e>=0,a=s===this.minScrollY&&t<=0||s===this.maxScrollY&&t>=0;return o&&a},r.prototype.syncBScroll=function(e){var t=jn(),n=this.scroll,i=n.options,s=n.scroller,o=i.probeType,a=i.momentumLimitTime;s.translater.translate(e),t-this.startTime>a&&(this.startTime=t,o===1&&s.hooks.trigger(s.hooks.eventTypes.scroll,e)),o>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,e)},r.prototype.updatePosition=function(e){var t=this.getIndicatorPosByRatio(e);this.applyTransformProperty(t),this.currentPos=Vi({},t)},r.prototype.applyTransformProperty=function(e){var t=this.scroll.options.translateZ,n=["translateX("+e.x+"px)","translateY("+e.y+"px)",""+t];this.indicatorEl.style[jt.transform]=n.join(" ")},r.prototype.getIndicatorPosByRatio=function(e){var t=e.x,n=e.y,i=this.scroll,s=i.hasHorizontalScroll,o=i.hasVerticalScroll,a=Vi({},this.currentPos);if(s){var u=Math.round(this.ratioX*t*this.translateXSign);a.x=rr(u,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX))}if(o){var l=Math.round(this.ratioY*n*this.translateYSign);a.y=rr(l,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY))}return a},r.prototype.destroy=function(){this.options.interactive!==!1&&(this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r}(),HW=function(){function r(e){this.scroll=e,this.options=[],this.indicators=[],this.handleOptions(),this.handleHooks()}return r.prototype.handleOptions=function(){var e=this.scroll.options.indicators;GP(Array.isArray(e),"'indicators' must be an array.");for(var t=0,n=e;t<n.length;t++){var i=n[t];GP(!!i.relationElement,"'relationElement' must be a HTMLElement."),this.createIndicators(i)}},r.prototype.createIndicators=function(e){this.indicators.push(new XW(this.scroll,e))},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks;t.on(t.eventTypes.destroy,function(){for(var n=0,i=e.indicators;n<i.length;n++){var s=i[n];s.destroy()}e.indicators=[]})},r.pluginName="indicators",r}();ph.use(jG).use(XG).use(YG).use(qG).use(ZG).use(oW).use(cW).use(mW).use(PW).use(OW).use(FW).use(UW).use(HW);ph.use(JY);function zW(r,e){return()=>{const{state:t,dispatch:n}=L.useContext(gt),{on:i,data:s,index:o}=t.setting.historyDetail,a=L.useRef(null),{current:u}=L.useRef({detailList:null,call:null}),{currency:l}=t.user,{orientation:c}=t.setting,{tableOptions:h}=Oe.Obj,[d,p]=L.useState(0),g=Array.isArray(s)?s:s?[s]:[];function v(S){n(cI(!1,s,o)),S==null||S.stopPropagation()}L.useEffect(()=>{a.current&&!u.detailList&&s&&(u.detailList=new ph(a.current,{scrollX:!0,scrollY:!1,disableTouch:!0,slide:{threshold:100,loop:!1,autoplay:!1},click:!1,momentum:!1,bounce:!1,probeType:0}),u.detailList.on("slidePageChanged",S=>{u.call?(u.call(),u.call=null):p(S.pageX)}))},[a,s]),L.useEffect(()=>{if(i&&u.detailList){const S=setTimeout(()=>{clearTimeout(S),u.detailList.plugins.slide.setCurrentPage({pageX:o,pageY:0}),u.detailList.refresh()},100)}},[i]);const x=a_(()=>{u.detailList&&u.detailList.plugins.slide.prev()},300),y=a_(()=>{u.detailList&&u.detailList.plugins.slide.next()},300);L.useMemo(()=>{c&&u.detailList&&(u.call=()=>{u.detailList.plugins.slide.setCurrentPage({pageX:d,pageY:0})})},[c]);const b=Rt(Oe.Obj.filterImageFormat(["avif","webp","png"])),_=g.length;return E.jsx(kY,{on:i,style:{backgroundColor:"#25232d"},children:E.jsxs("div",{className:`base-history-detail-mod ${r}`,children:[E.jsx(Re,{className:"head-mod",children:"gametitle"}),E.jsx("div",{ref:a,className:"content-scroll-mod hidden-scroolbar",children:E.jsx("div",{className:"slide-content",children:g.map((S,I)=>E.jsx(e,{render:I==d||I==d-1||I==d+1,symbolFormat:b,data:S,currency:l,table:h},`hid_${I}`))})}),E.jsx(Ln,{className:"arrow-icon left  btn-mod btn-mod-active",onClick:v,style:{position:"absolute",left:"1rem",top:"0.8rem",height:"2rem",width:"2rem"}}),E.jsx(Ln,{className:`arrow-btn left-arrow-btn btn-mod btn-mod-active ${d>0?"db":"dn"}`,onClick:x,children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:E.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})}),E.jsx(Ln,{className:`arrow-btn right-arrow-btn btn-mod btn-mod-active ${d<_-1&&_>1?"db":"dn"}`,onClick:y,children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:E.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})})]})})}}const $W=zW("oceanpop-history-detail-mod",YW);function YW({symbolFormat:r,currency:e,data:t,table:n,render:i}){const s=L.useMemo(()=>{if(t)return new q_(t)},[t]),o=(s==null?void 0:s.data.result.ss)||[],a=Rt(Hn(Sn,"collapse").toUpperCase()),u=L.useMemo(()=>t&&t.cost>0?mn(Number(t.cost)):a,[s]);return i?E.jsx("div",{className:"content-mod clearfix hidden-scroolbar",children:E.jsxs("div",{className:"content-box",children:[t?E.jsx("div",{className:"content-top",children:E.jsxs("table",{children:[E.jsx("tbody",{children:E.jsxs("tr",{children:[E.jsx("th",{children:E.jsx(Re,{tcase:"upper",children:"dateandtime"})}),E.jsxs("th",{children:[E.jsx(Re,{className:"dib",tcase:"upper",children:"linebet"}),E.jsx("br",{}),"(",e,")"]}),E.jsxs("th",{children:[E.jsx(Re,{className:"dib",tcase:"upper",children:"totalbet"}),E.jsx("br",{}),"(",e,")"]}),E.jsxs("th",{children:[E.jsx(Re,{className:"dib",tcase:"upper",children:"totalwin"}),E.jsx("br",{}),"(",e,")"]})]})}),E.jsx("tbody",{children:E.jsxs("tr",{children:[E.jsx("th",{children:t.createdOnFormat||fI(t.createdOn)}),E.jsx("th",{children:mn(Number((s==null?void 0:s.lineBet)||0))}),E.jsx("th",{children:u}),E.jsx("th",{children:mn(Number(t.payout))})]})})]})}):E.jsx(E.Fragment,{}),E.jsx("div",{className:"content-right",children:E.jsx("table",{style:{width:"100%",fontSize:0},children:o.length!=0?ui(5,l=>E.jsx("tbody",{children:E.jsx("tr",{children:ui(5,c=>{const h=o[c][l];return E.jsx("th",{children:E.jsx("div",{className:`icon-mod symbol oceanpop-symbol-${h} ${r}`})},`history-s-${c}`)})})},`history-reel${l}`)):E.jsx(E.Fragment,{})})}),E.jsx("div",{className:"content-left",children:E.jsxs("table",{style:{width:"100%"},children:[E.jsx("tbody",{children:E.jsxs("tr",{children:[E.jsx("th",{}),E.jsx("th",{children:E.jsx(Re,{tcase:"upper",children:"cluster"})}),E.jsxs("th",{children:[E.jsx(Re,{className:"dib",tcase:"upper",children:"win"}),E.jsx("br",{}),"(",e,")"]})]})}),s?s.winLines.map((l,c)=>{const h=l.cls.c;return E.jsx("tbody",{children:E.jsxs("tr",{children:[E.jsx("th",{children:c+1}),E.jsx("th",{children:E.jsx("table",{className:"w-100",children:ui(5,d=>E.jsx("tbody",{children:E.jsx("tr",{children:ui(5,p=>{let g;const v=h.findIndex(([x,y])=>x==p&&y==d);return v>=0&&(g=o[p][d]),E.jsx("td",{style:{width:"1.5rem",height:"1.5rem",fontSize:0},children:v>=0?E.jsx("div",{className:`icon-mod symbol oceanpop-symbol-${g} ${r}`}):E.jsx("div",{className:"icon-mod symbol oceanpop-symbol-0",style:{visibility:"hidden"}})},`row${p}`)})})},`column${d}`))})}),E.jsx("th",{children:mn(s.lineBet.mul(10).mul(l.cls.m).toNumber(),2)})]})},`table${c}`)}):null]})})]})}):E.jsx("div",{className:"content-mod"})}/*!
 * better-scroll / mouse-wheel
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 */function GW(r){console.error("[BScroll warn]: "+r)}var Od=typeof window<"u",og=Od&&navigator.userAgent.toLowerCase();og&&og.indexOf("android")>0;(function(){if(typeof og=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(og);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var hO=!1;if(Od){var WW="test-passive";try{var lA={};Object.defineProperty(lA,"passive",{get:function(){hO=!0}}),window.addEventListener(WW,function(){},lA)}catch{}}var VW=function(r,e){for(var t in e)r[t]=e[t];return r},cO=Od&&document.createElement("div").style,Wu=function(){if(!Od)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(cO[n.value]!==void 0)return n.key}return!1}();function no(r){return Wu===!1?r:Wu==="standard"?r==="transitionEnd"?"transitionend":r:Wu+r.charAt(0).toUpperCase()+r.substr(1)}function qW(r,e,t,n){var i=hO?{passive:!1,capture:!!n}:!!n;r.addEventListener(e,t,i)}function KW(r,e,t,n){r.removeEventListener(e,t,{capture:!!n})}function QW(r){r.cancelable&&r.preventDefault()}Wu&&Wu!=="standard"&&""+Wu.toLowerCase();var ZW=no("transform"),JW=no("transition");Od&&no("perspective")in cO;no("transitionTimingFunction"),no("transitionDuration"),no("transitionDelay"),no("transformOrigin"),no("transitionEnd"),no("transitionProperty");function eV(r,e){for(var t in e)if(e[t].test(r[t]))return!0;return!1}var tV=function(){function r(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return r.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},r.prototype.addDOMEvents=function(){this.handleDOMEvents(qW)},r.prototype.removeDOMEvents=function(){this.handleDOMEvents(KW)},r.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach(function(i){e(n,i.name,t,!!i.capture)})},r.prototype.handleEvent=function(e){var t=e.type;this.events.some(function(n){return n.name===t?(n.handler(e),!0):!1})},r}(),rV=function(){function r(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},r.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.mouseWheel===!0?{}:this.scroll.options.mouseWheel,t={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=VW(t,e)},r.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.registerEvent=function(){this.eventRegister=new tV(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},r.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},r.prototype.cleanCache=function(){this.deltaCache=[]},r.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,s=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var o=this.deltaCache.reduce(function(p,g){return{x:p.x+g.x,y:p.y+g.y}},{x:0,y:0});this.cleanCache();var a=this.scroll.scroller,u=a.scrollBehaviorX,l=a.scrollBehaviorY;u.setMovingDirection(-e.directionX),l.setMovingDirection(-e.directionY),u.setDirection(e.x),l.setDirection(e.y);var c=u.performDampingAlgorithm(Math.round(e.x)+o.x,s),h=l.performDampingAlgorithm(Math.round(e.y)+o.x,s);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:c,y:h})){var d=this.getEaseTime();(c!==this.scroll.x||h!==this.scroll.y)&&this.scroll.scrollTo(c,h,d)}i&&(this.wheelMoveTimer=window.setTimeout(function(){t.wheelMoveTimer=0},i))}},r.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)},this.mouseWheelOpt.discreteTime)},r.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=t.invert,s=0,o=0,a=i?-1:1;switch(!0){case"deltaX"in e:e.deltaMode===1?(s=-e.deltaX*n,o=-e.deltaY*n):(s=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:s=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:s=o=e.wheelDelta/120*n;break;case"detail"in e:s=o=-e.detail/3*n;break}s*=a,o*=a,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(s)&&(s=o),o=0),this.scroll.hasHorizontalScroll||(s=0);var u=s>0?-1:s<0?1:0,l=o>0?-1:o<0?1:0;return{x:s,y:o,directionX:u,directionY:l}},r.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,s=t.preventDefaultException;n&&!eV(e.target,s)&&QW(e),i&&e.stopPropagation()},r.prototype.getEaseTime=function(){var e=100,t=this.mouseWheelOpt.easeTime;return t<e&&GW("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,e)},r.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})},r.pluginName="mouseWheel",r.applyOrder="pre",r}();ph.use(rV);function nV({TitleEL:r=dO,ItemEL:e=iV,order:t=1}){const{state:n,dispatch:i}=L.useContext(gt),{historyListOn:s,orientation:o,historyDetail:a}=n.setting,u=L.useRef(null),l=L.useRef(null),[c,h]=L.useState(0),[d,p]=L.useState(!1),{current:g}=L.useRef({selectedDate:c,historyList:null,dateList:null,page:0,size:20,list:[],isNoMoreData:!1,recordMap:{},loading:!1}),v=Oe.Obj.urlOptions.lang;function x(){g.loading=!1,g.historyList.finishPullUp();const M=setTimeout(()=>{g.historyList.refresh(),clearTimeout(M)},200);p(!1)}function y(M){g.recordMap[M]={page:g.page,list:g.list,isNoMoreData:g.isNoMoreData}}function b(){if(g.isNoMoreData||g.loading)g.historyList.finishPullUp();else{p(!0);const M=new Date,O=M.getTime(),F=M.getTimezoneOffset()*60;let U=M.setHours(0,0,0,0)/1e3-g.selectedDate*24*60*60,X=U+24*60*60-1;g.selectedDate==6&&(U-=F),g.selectedDate==0&&(X=Math.floor(O/1e3)-1),g.loading=!0,mg().history(U,X,g.page,g.size,t).then(B=>{B.code?i(Jr("")):(g.page++,g.list=g.list.concat(B.list),g.isNoMoreData=B.list<g.size,y(g.selectedDate)),x()}).catch(()=>{x()})}}function _(){!a.on&&i(hI(!1))}function S(M,O){i(cI(!0,g.list,O))}function I(M,O){if(!(O&&O.button==2)&&c!=M&&!g.loading){const F=g.recordMap[M];F?(g.page=F.page,g.isNoMoreData=F.isNoMoreData,g.list=F.list):(g.page=0,g.isNoMoreData=!1,g.list=[]),h(M)}}function A(M){g.historyList.scrollTo(0,0,500)}const k=L.useMemo(()=>{const M=new Date().getTime(),O=v==gn.Chinese?"MMdd":"dd/MM";return ui(7,F=>dI(new Date(M-F*24*60*60*1e3),8,O,v))},[]);return L.useEffect(()=>{if(u.current)return g.historyList=new ph(u.current,{scrollY:!0,pullUpLoad:!0,click:"ontouchstart"in window,mouseWheel:{speed:20,invert:!1,easeTime:300}}),g.historyList.on("pullingUp",b),()=>{g.historyList.destroy()}},[u]),L.useEffect(()=>{if(l.current&&s){const M=setTimeout(()=>{clearTimeout(M),g.dateList=new ph(l.current,{scrollX:!0,click:!1,eventPassthrough:"vertical"}),g.dateList.scrollTo(0,0)},200);return()=>{g.dateList&&g.dateList.destroy()}}},[l,s]),L.useEffect(()=>{s&&(g.selectedDate=c,g.recordMap={},g.page=0,g.isNoMoreData=!1,g.list=[],b())},[s,c]),L.useEffect(()=>{s||h(0)},[s]),E.jsx(_b,{on:s,style:{backgroundColor:"#1B1B21"},children:E.jsxs("div",{className:"history-list-mod",children:[E.jsx(Re,{className:"head-mod",children:"gametitle"}),E.jsx("div",{ref:l,className:"date-list hidden-scroolbar",children:E.jsx("ul",{className:"content",children:k.map((M,O)=>E.jsx("li",{className:`item btn-mod btn-mod-active ${O==c?"selected":""} ${v}`,onClick:I.bind(null,O),children:M},`dateItem${O}`))})}),E.jsxs("div",{className:"history-model",children:[E.jsx("div",{ref:u,className:"history-list",children:E.jsxs("ul",{className:"content",children:[g.list.map((M,O)=>E.jsx(e,{item:M,index:O,onHistoryDetail:S,lang:v},`historyItem${O}`)),E.jsx("div",{className:"pullup-tips",children:g.isNoMoreData?E.jsx("div",{className:"before-trigger",children:E.jsx("span",{className:"pullup-txt",children:E.jsx(Re,{children:"nomorehostory"})})}):d?E.jsx("div",{className:"after-trigger",children:E.jsxs("span",{className:"pullup-txt",children:[E.jsx(Re,{className:"dib",children:"loading"}),"..."]})}):E.jsx("div",{className:"before-trigger",children:E.jsx("span",{className:"pullup-txt",children:E.jsx(Re,{children:"pullload"})})})})]})}),E.jsx(r,{currency:n.user.currency,lang:v})]}),E.jsxs("div",{className:"footer",children:[E.jsx(Re,{style:{lineHeight:"1rem"},className:"item",replaceMap:{"{%day%}":"7"},children:"history1"}),E.jsx(Re,{style:{lineHeight:"1rem"},className:"item",children:"history2"})]}),E.jsx(Ln,{className:"close-icon btn-mod btn-mod-active",onClick:_,style:{position:"absolute",right:"1rem",top:"0.5rem",height:"2rem",width:"2rem"}}),E.jsx(Ln,{className:`fab icon-mod btn-mod btn-mod-active ${o}`,onClick:A,children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:E.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})})]})})}function dO({currency:r}){return E.jsxs("div",{className:"default-history-list-item list history-info history-head",children:[E.jsx(Re,{className:"item time",tcase:"upper",children:"dateandtime"}),E.jsxs("div",{className:"item bet",children:[E.jsx(Re,{className:"dib",tcase:"upper",children:"totalbet"}),E.jsx("br",{}),"(",r,")"]}),E.jsxs("div",{className:"item payout",children:[E.jsx(Re,{className:"dib",tcase:"upper",children:"totalwin"}),E.jsx("br",{}),"(",r,")"]}),E.jsx("div",{className:"item detail",children:E.jsx(Re,{})}),E.jsx("div",{className:"line-bottom"})]},"historyItemHead")}function iV({item:r,index:e,onHistoryDetail:t}){return E.jsxs("li",{className:`default-history-list-item list history-info btn-mod ${e%2==0?"even-line":""}`,onClick:t.bind(null,r,e),children:[E.jsx("div",{className:"item time",children:r.createdOnFormat}),E.jsx("div",{className:"item bet",children:mn(Number(r.cost))}),E.jsx("div",{className:"item payout",children:mn(Number(r.payout))}),E.jsx("div",{className:"item detail btn-mod",children:E.jsx("svg",{className:"info",style:{fontWeight:"bolder",verticalAlign:"middle"},version:"1.1",viewBox:"0 0 330 330",xmlSpace:"preserve",children:E.jsx("path",{id:"XMLID_222_",d:`M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001
c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213
C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606
C255,161.018,253.42,157.202,250.606,154.389z`})})}),E.jsx("div",{className:"line-bottom"})]})}function sV(){return E.jsx(nV,{order:1,TitleEL:dO,ItemEL:oV})}function oV({item:r,index:e,onHistoryDetail:t}){const n=Rt(Hn(Sn,"collapse").toUpperCase()),i=Number(r.cost);return E.jsxs("li",{className:`default-history-list-item list history-info btn-mod  ${e%2==0?"even-line":""}`,onClick:t.bind(null,r,e),children:[E.jsx("div",{className:"item time",children:r.createdOnFormat}),E.jsx("div",{className:"item bet",children:i==0?n:mn(i)}),E.jsx("div",{className:"item payout",children:mn(Number(r.payout))}),E.jsx("div",{className:"item detail btn-mod",children:E.jsx("svg",{className:"info",style:{fontWeight:"bolder",verticalAlign:"middle"},version:"1.1",viewBox:"0 0 330 330",xmlSpace:"preserve",children:E.jsx("path",{id:"XMLID_222_",d:`M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001
c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213
C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606
C255,161.018,253.42,157.202,250.606,154.389z`})})}),E.jsx("div",{className:"line-bottom"})]})}const aV=[[5,5,5,5,5],[1,5,5,5,5],[2,4,5,5,5],[3,2,3,5,5],[1,0,4,0,5]],lV=[[4,4,5,5,5],[4,4,4,3,5],[1,3,3,3,5],[1,1,3,0,0],[1,1,0,0,0]],uV=[[2,2,2,5,4],[2,2,5,2,2],[4,5,2,2,2],[4,0,2,2,0],[1,3,1,1,1]],hV=[[5,4,4,4,4],[4,4,2,2,2],[1,4,1,5,3],[1,4,3,5,2],[5,3,1,2,3]],cV=[[5,0,4,0,4],[0,4,2,2,2],[1,0,1,5,3],[1,4,3,5,2],[5,3,1,2,3]],dV=[[0,0,0,0,0],[0,0,1,1,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,0,0,0]],fV=[[0,0,0,1,0],[0,0,1,0,0],[0,1,1,0,0],[0,0,1,0,0],[0,0,0,0,0]];function pV(){const r=L.useRef(null),e=L.useRef(null),t=L.useRef(null),n=L.useRef(null),{state:i,dispatch:s}=L.useContext(gt),[o,a]=L.useState(0),{payTableOn:u}=i.setting,{orientation:l}=i.setting,c=Oe.Obj.urlOptions.lang;function h(v){s(uI(!1)),v.stopPropagation()}const d=Uz(()=>{var b,_,S;const v=((b=r.current)==null?void 0:b.scrollTop)||0,x=((_=t.current)==null?void 0:_.offsetTop)||0,y=((S=n.current)==null?void 0:S.offsetTop)||0;v>y-250?a(2):v>x-100?a(1):a(0)},300);L.useEffect(()=>{var v;u&&((v=r.current)==null||v.scrollTo({top:0}))},[u]);function p(v){var y,b,_;let x=0;v==1?x=((y=t.current)==null?void 0:y.offsetTop)||0:v==2&&(x=((b=n.current)==null?void 0:b.offsetTop)||0),(_=r.current)==null||_.scrollTo({top:x,behavior:"smooth"}),a(v)}const g=Rt(Oe.Obj.filterImageFormat(["avif","webp","png"]));return E.jsxs(_b,{on:u,children:[E.jsxs("div",{className:"rule-bg-mod",children:[E.jsx("div",{className:`blur-bg bg ${Rt(Oe.Obj.filterImageFormat(["avif","webp","jpg"]))}`}),E.jsx("div",{className:"cover blur-filter-mod"})]}),E.jsx("div",{className:`rule-head-mod ${l}`,children:E.jsxs("div",{className:`list ${c}`,children:[E.jsx(Re,{tcase:"upper",className:`item btn-mod ${o==0?"selected":""}`,onClick:p.bind(null,0),children:"payout"}),E.jsx(Re,{tcase:"upper",className:`item btn-mod ${o==1?"selected":""}`,onClick:p.bind(null,1),children:"features"}),E.jsx(Re,{tcase:"upper",className:`item btn-mod ${o==2?"selected":""}`,onClick:p.bind(null,2),children:"gameplay"})]})}),E.jsxs("div",{ref:r,className:`rule-page-mod hidden-scroolbar ${l}`,onScroll:d,children:[E.jsxs("div",{ref:e,id:"geisha-payout",className:"paytable-mod clearfix",children:[E.jsx(Re,{className:"title",children:"clusterpaytable"}),E.jsxs("div",{className:"pay-table-mod",style:{width:"90%",margin:"0 auto"},children:[E.jsxs("div",{className:"column-item",children:[E.jsx("div",{className:"row-item"}),["16+",15,14,13,12,11,10,9,8,7,6,5].map((v,x)=>E.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:v},`row-${x}`))]}),E.jsxs("div",{className:"column-item",children:[E.jsx("div",{className:"row-item",children:E.jsx("div",{className:`icon-mod oceanpop-symbol-5 ${g}`})}),["10,000","7,000","7,000","7,000","7,000","5,000","5,000","5,000","5,000","2,000","500","50"].map((v,x)=>E.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:v},`row-${x}`))]}),E.jsxs("div",{className:"column-item",children:[E.jsx("div",{className:"row-item",children:E.jsx("div",{className:`icon-mod oceanpop-symbol-4 ${g}`})}),["5,000","1,000","500","250","200","150","125","100","50","25","12.5","7.5"].map((v,x)=>E.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:v},`row-${x}`))]}),E.jsxs("div",{className:"column-item",children:[E.jsx("div",{className:"row-item",children:E.jsx("div",{className:`icon-mod oceanpop-symbol-3 ${g}`})}),["1,000","500","250","150","100","75","50","25","15","10","5","2"].map((v,x)=>E.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:v},`row-${x}`))]}),E.jsxs("div",{className:"column-item",children:[E.jsx("div",{className:"row-item",children:E.jsx("div",{className:`icon-mod oceanpop-symbol-2 ${g}`})}),["500","250","150","100","50","25","15","10","7","3.5","2","1"].map((v,x)=>E.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:v},`row-${x}`))]}),E.jsxs("div",{className:"column-item",children:[E.jsx("div",{className:"row-item",children:E.jsx("div",{className:`icon-mod oceanpop-symbol-1 ${g}`})}),["100","75","50","25","15","8","4","2","1.2","1","0.7","0.5"].map((v,x)=>E.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:v},`row-${x}`))]}),E.jsxs("div",{className:"column-item",children:[E.jsx("div",{className:"row-item",children:E.jsx("div",{className:`icon-mod oceanpop-symbol-0 ${g}`})}),["50","25","12.5","7.5","4.5","3","2","1.5","1","0.8","0.6","0.4"].map((v,x)=>E.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:v},`row-${x}`))]})]})]}),E.jsxs("div",{ref:t,id:"geisha-features",className:"payline-mod",children:[E.jsx(Re,{className:"title",tcase:"upper",children:"cluster"}),E.jsx(Re,{tmp:["waytowin"]}),E.jsxs("div",{className:"detail0",style:{padding:"1rem 0"},children:[E.jsxs("div",{className:"dib w-50",children:[E.jsx("svg",{style:{verticalAlign:"middle"},width:"5rem",height:"5rem",viewBox:"2 2 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{d:"M18 7L9.42857 17L6 13",stroke:"#ffde17",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),E.jsx("div",{className:"table",style:{verticalAlign:"middle"},children:dV.map((v,x)=>E.jsx("div",{children:v.map((y,b)=>E.jsx("div",{className:`icon-mod w-20 cell yellow ${["","selected"][y]}`},`column-${b}`))},`row-${x}`))})]}),E.jsxs("div",{className:"dib w-50",children:[E.jsx("svg",{style:{verticalAlign:"middle"},width:"5rem",height:"5rem",viewBox:"2 -1 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{d:"M19 5L4.99998 19M5.00001 5L19 19",stroke:"#ff1700",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),E.jsx("div",{className:"table",style:{verticalAlign:"middle"},children:fV.map((v,x)=>E.jsx("div",{children:v.map((y,b)=>E.jsx("div",{className:`icon-mod w-20 cell ${["","selected"][y]}`},`column-${b}`))},`row-${x}`))})]})]}),E.jsxs("div",{children:[E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap"},children:"clpayline1"}),E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap"},children:"clpayline2"})]}),E.jsxs("div",{className:"detail1",children:[E.jsxs("div",{className:"row row-1 clearfix",children:[E.jsxs("div",{className:`item fl left ${l}`,children:[E.jsx("div",{children:E.jsx("div",{className:"reel-mod",children:aV.map((v,x)=>E.jsx("div",{style:{fontSize:0},children:v.map((y,b)=>E.jsx("div",{className:`icon-mod icon-center oceanpop-symbol-${y} ${g} w-20`,style:{paddingBottom:"20%",backgroundColor:{5:"rgba(135,206,250, 0.5)"}[y]||""}},`column-${b}`))},`row-${x}`))})}),E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem"},children:"clpayline3"})]}),E.jsxs("div",{className:`item fr right ${l}`,children:[E.jsx("div",{children:E.jsx("div",{className:"reel-mod w-50",children:lV.map((v,x)=>E.jsx("div",{style:{fontSize:0},children:v.map((y,b)=>E.jsx("div",{className:`icon-mod icon-center oceanpop-symbol-${y} ${g} w-20`,style:{paddingBottom:"20%",backgroundColor:{0:"rgba(255,255,255, 0.5)",3:"rgba(0,255,127, 0.5)",1:"rgba(255,218,185, 0.5)",4:"rgba(219,112,147, 0.5)",5:"rgba(135,206,250, 0.5)"}[y]||""}},`column-${b}`))},`row-${x}`))})}),E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem"},children:"clpayline4"})]})]}),E.jsxs("div",{className:"row row-2 clearfix",children:[E.jsxs("div",{className:`item fl left ${l}`,children:[E.jsx("div",{style:{fontSize:0},children:E.jsx("div",{className:"reel-mod",children:uV.map((v,x)=>E.jsx("div",{style:{fontSize:0},children:v.map((y,b)=>E.jsx("div",{className:`icon-mod icon-center oceanpop-symbol-${y} ${g} w-20`,style:{paddingBottom:"20%",backgroundColor:{2:"rgba(200,200,200, 0.5)"}[y]||""}},`column-${b}`))},`row-${x}`))})}),E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem"},children:"clpayline5"})]}),E.jsxs("div",{className:`item fr right ${l}`,children:[E.jsxs("div",{children:[E.jsx("div",{className:"reel-mod w-50",style:{verticalAlign:"middle"},children:hV.map((v,x)=>E.jsx("div",{style:{fontSize:0},children:v.map((y,b)=>E.jsx("div",{className:`icon-mod icon-center oceanpop-symbol-${y} ${g} w-20`,style:{paddingBottom:"20%",backgroundColor:{4:"rgba(219,112,147, 0.5)"}[y]||""}},`column-${b}`))},`row-${x}`))}),E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle",padding:"0 0.2rem",fill:"white"},width:"2rem",height:"2rem",viewBox:"0 0 24 24",children:E.jsx("path",{d:"m21.707 11.293-7-7A1 1 0 0 0 13 5v3H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10v3a1 1 0 0 0 1.707.707l7-7a1 1 0 0 0 0-1.414z","data-name":"Right"})}),E.jsx("div",{className:"reel-mod w-50",style:{verticalAlign:"middle"},children:cV.map((v,x)=>E.jsx("div",{style:{fontSize:0},children:v.map((y,b)=>E.jsx("div",{className:`icon-mod icon-center oceanpop-symbol-${y} ${g} w-20`,style:{paddingBottom:"20%",backgroundColor:{0:"rgba(219,112,147, 0.5)",4:"rgba(219,112,147, 0.5)"}[y]||""}},`column-${b}`))},`row-${x}`))})]}),E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem"},children:"clpayline6"})]})]})]}),E.jsxs("div",{children:[E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap"},children:"clpayline8"}),E.jsx(Re,{className:`desc ${l}`,style:{whiteSpace:"pre-wrap"},children:"clpayline9"})]})]}),E.jsxs("div",{ref:n,id:"geisha-gameplay",className:"game-info-mod",children:[E.jsx(Re,{className:"title",children:"gameplay"}),E.jsx("div",{className:`detail-table ${c}`,children:E.jsxs("div",{children:[E.jsxs("div",{className:"item",children:[E.jsx(Re,{children:"reel"}),E.jsx(Re,{replaceMap:{"{%reel%}":"5 x 5"},children:"3_5reel"})]}),E.jsxs("div",{className:"item",children:[E.jsx(Re,{children:"wintype"}),E.jsx(Re,{children:"clusterwin"})]}),E.jsxs("div",{className:"item",children:[E.jsx(Re,{children:"defaultrtp"}),E.jsx("div",{children:"94.8%"})]})]})}),E.jsxs("div",{className:`description ${l}`,style:{marginTop:"2rem"},children:[E.jsx(Re,{className:"text text-coral",children:"minmaxbet"}),E.jsx(Re,{className:"text",style:{paddingLeft:"1rem"},children:"gameplay1"}),E.jsxs("div",{className:"clearfix",style:{paddingLeft:"1rem"},children:[E.jsxs("div",{className:"text fl",children:[E.jsx(Re,{style:{fontWeight:"bold"},tmp:["example",":"]})," "]}),E.jsxs("div",{className:"fl",style:{width:"70%",paddingLeft:"0.5rem"},children:[E.jsx(Re,{className:"text",children:"gameplay2"}),E.jsx(Re,{className:"text",replaceMap:{"{%line%}":"10","{%amount%}":"1.00"},children:"gameplay3_1"}),E.jsx(Re,{className:"text",replaceMap:{"{%amount%}":"10.00"},children:"gameplay4"})]})]})]}),E.jsxs("div",{className:`description ${l}`,children:[E.jsx(Re,{className:"text text-coral",tmp:["howtoplay"]}),E.jsx("div",{children:E.jsx(Re,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["1. ","howtoplay1"]})}),E.jsx("div",{children:E.jsx(Re,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["2. ","howtoplay2"]})}),E.jsx("div",{children:E.jsx(Re,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["3. ","howtoplay3"]})})]})]})]}),E.jsx(Ln,{className:"close-icon btn-mod",onClick:h,style:{position:"absolute",right:"1rem",top:"1.4rem",height:"2rem",width:"2rem"}})]})}const mV=()=>E.jsxs($z,{id:"game-canvas",className:"game-context-mod",antialias:!1,children:[E.jsxs(ye,{children:[E.jsxs(Gz,{children:[E.jsx(gY,{id:"preload",next:"load"}),E.jsx(e9,{id:"load",next:"premain"}),E.jsx(wY,{id:"premain"}),E.jsx(mY,{id:"main"})]}),E.jsx(bY,{children:E.jsx(TY,{"l-x":300,"l-y":200,"p-x":300,"p-y":200})}),E.jsx(CY,{}),E.jsx(EY,{})]}),E.jsx(IY,{}),E.jsx(pV,{}),E.jsx(sV,{}),E.jsx($W,{}),E.jsx(PY,{}),E.jsx(DY,{}),E.jsxs(LY,{children:[E.jsx(NY,{}),E.jsx(FY,{})]}),E.jsx(BY,{}),E.jsx(sY,{})]});t7(E.jsx(mV,{}),[Oe.Obj.urlOptions.lang])});export default gV();
