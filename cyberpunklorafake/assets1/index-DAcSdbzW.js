var HN=Object.defineProperty;var zN=(r,e,t)=>e in r?HN(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var $N=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var P=(r,e,t)=>zN(r,typeof e!="symbol"?e+"":e,t);var GV=$N((JV,Qg)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dd(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function uC(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}),t}var cC={exports:{}},vg={},hC={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fd=Symbol.for("react.element"),YN=Symbol.for("react.portal"),GN=Symbol.for("react.fragment"),WN=Symbol.for("react.strict_mode"),VN=Symbol.for("react.profiler"),qN=Symbol.for("react.provider"),KN=Symbol.for("react.context"),QN=Symbol.for("react.forward_ref"),ZN=Symbol.for("react.suspense"),JN=Symbol.for("react.memo"),eB=Symbol.for("react.lazy"),gT=Symbol.iterator;function tB(r){return r===null||typeof r!="object"?null:(r=gT&&r[gT]||r["@@iterator"],typeof r=="function"?r:null)}var dC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fC=Object.assign,pC={};function gc(r,e,t){this.props=r,this.context=e,this.refs=pC,this.updater=t||dC}gc.prototype.isReactComponent={};gc.prototype.setState=function(r,e){if(typeof r!="object"&&typeof r!="function"&&r!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,r,e,"setState")};gc.prototype.forceUpdate=function(r){this.updater.enqueueForceUpdate(this,r,"forceUpdate")};function mC(){}mC.prototype=gc.prototype;function E_(r,e,t){this.props=r,this.context=e,this.refs=pC,this.updater=t||dC}var P_=E_.prototype=new mC;P_.constructor=E_;fC(P_,gc.prototype);P_.isPureReactComponent=!0;var vT=Array.isArray,gC=Object.prototype.hasOwnProperty,C_={current:null},vC={key:!0,ref:!0,__self:!0,__source:!0};function yC(r,e,t){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)gC.call(e,n)&&!vC.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(r&&r.defaultProps)for(n in a=r.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:fd,type:r,key:s,ref:o,props:i,_owner:C_.current}}function rB(r,e){return{$$typeof:fd,type:r.type,key:e,ref:r.ref,props:r.props,_owner:r._owner}}function A_(r){return typeof r=="object"&&r!==null&&r.$$typeof===fd}function nB(r){var e={"=":"=0",":":"=2"};return"$"+r.replace(/[=:]/g,function(t){return e[t]})}var yT=/\/+/g;function wv(r,e){return typeof r=="object"&&r!==null&&r.key!=null?nB(""+r.key):e.toString(36)}function Ap(r,e,t,n,i){var s=typeof r;(s==="undefined"||s==="boolean")&&(r=null);var o=!1;if(r===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(r.$$typeof){case fd:case YN:o=!0}}if(o)return o=r,i=i(o),r=n===""?"."+wv(o,0):n,vT(i)?(t="",r!=null&&(t=r.replace(yT,"$&/")+"/"),Ap(i,e,t,"",function(l){return l})):i!=null&&(A_(i)&&(i=rB(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yT,"$&/")+"/")+r)),e.push(i)),1;if(o=0,n=n===""?".":n+":",vT(r))for(var a=0;a<r.length;a++){s=r[a];var u=n+wv(s,a);o+=Ap(s,e,t,u,i)}else if(u=tB(r),typeof u=="function")for(r=u.call(r),a=0;!(s=r.next()).done;)s=s.value,u=n+wv(s,a++),o+=Ap(s,e,t,u,i);else if(s==="object")throw e=String(r),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pf(r,e,t){if(r==null)return r;var n=[],i=0;return Ap(r,n,"","",function(s){return e.call(t,s,i++)}),n}function iB(r){if(r._status===-1){var e=r._result;e=e(),e.then(function(t){(r._status===0||r._status===-1)&&(r._status=1,r._result=t)},function(t){(r._status===0||r._status===-1)&&(r._status=2,r._result=t)}),r._status===-1&&(r._status=0,r._result=e)}if(r._status===1)return r._result.default;throw r._result}var rn={current:null},kp={transition:null},sB={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:kp,ReactCurrentOwner:C_};function xC(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Pf,forEach:function(r,e,t){Pf(r,function(){e.apply(this,arguments)},t)},count:function(r){var e=0;return Pf(r,function(){e++}),e},toArray:function(r){return Pf(r,function(e){return e})||[]},only:function(r){if(!A_(r))throw Error("React.Children.only expected to receive a single React element child.");return r}};qe.Component=gc;qe.Fragment=GN;qe.Profiler=VN;qe.PureComponent=E_;qe.StrictMode=WN;qe.Suspense=ZN;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sB;qe.act=xC;qe.cloneElement=function(r,e,t){if(r==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+r+".");var n=fC({},r.props),i=r.key,s=r.ref,o=r._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=C_.current),e.key!==void 0&&(i=""+e.key),r.type&&r.type.defaultProps)var a=r.type.defaultProps;for(u in e)gC.call(e,u)&&!vC.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=t;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:fd,type:r.type,key:i,ref:s,props:n,_owner:o}};qe.createContext=function(r){return r={$$typeof:KN,_currentValue:r,_currentValue2:r,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},r.Provider={$$typeof:qN,_context:r},r.Consumer=r};qe.createElement=yC;qe.createFactory=function(r){var e=yC.bind(null,r);return e.type=r,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(r){return{$$typeof:QN,render:r}};qe.isValidElement=A_;qe.lazy=function(r){return{$$typeof:eB,_payload:{_status:-1,_result:r},_init:iB}};qe.memo=function(r,e){return{$$typeof:JN,type:r,compare:e===void 0?null:e}};qe.startTransition=function(r){var e=kp.transition;kp.transition={};try{r()}finally{kp.transition=e}};qe.unstable_act=xC;qe.useCallback=function(r,e){return rn.current.useCallback(r,e)};qe.useContext=function(r){return rn.current.useContext(r)};qe.useDebugValue=function(){};qe.useDeferredValue=function(r){return rn.current.useDeferredValue(r)};qe.useEffect=function(r,e){return rn.current.useEffect(r,e)};qe.useId=function(){return rn.current.useId()};qe.useImperativeHandle=function(r,e,t){return rn.current.useImperativeHandle(r,e,t)};qe.useInsertionEffect=function(r,e){return rn.current.useInsertionEffect(r,e)};qe.useLayoutEffect=function(r,e){return rn.current.useLayoutEffect(r,e)};qe.useMemo=function(r,e){return rn.current.useMemo(r,e)};qe.useReducer=function(r,e,t){return rn.current.useReducer(r,e,t)};qe.useRef=function(r){return rn.current.useRef(r)};qe.useState=function(r){return rn.current.useState(r)};qe.useSyncExternalStore=function(r,e,t){return rn.current.useSyncExternalStore(r,e,t)};qe.useTransition=function(){return rn.current.useTransition()};qe.version="18.3.1";hC.exports=qe;var B=hC.exports;const lo=dd(B);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oB=B,aB=Symbol.for("react.element"),lB=Symbol.for("react.fragment"),uB=Object.prototype.hasOwnProperty,cB=oB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hB={key:!0,ref:!0,__self:!0,__source:!0};function _C(r,e,t){var n,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)uB.call(e,n)&&!hB.hasOwnProperty(n)&&(i[n]=e[n]);if(r&&r.defaultProps)for(n in e=r.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:aB,type:r,key:s,ref:o,props:i,_owner:cB.current}}vg.Fragment=lB;vg.jsx=_C;vg.jsxs=_C;cC.exports=vg;var T=cC.exports;function cr(r){return r!=null}function qu(r){return r==null}function dB(r){return typeof r=="string"}function fB(r){return Object.keys(r).length===0&&r.constructor===Object}function pB(...r){const e={};for(let t=0;t<r.length;t++){const n=r[t];if(n!=null)for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}const ug=class ug{constructor(){P(this,"mappings");this.mappings={}}static get Obj(){return this._Obj||(this._Obj=new ug),this._Obj}map(e,t){const n=new _B(e,t);return this.mappings[e]=n,n}unmap(e){this.mappings[e]=void 0}get(e,...t){const n=this.mappings[e];if(!qu(n))return n.get(t)}resolve(){console.warn("Injector.resolve() is not implement yet")}};P(ug,"_Obj");let t1=ug;class mB{constructor(e){this.value=e}get(e){return this.value}destroy(){this.value=void 0}}class gB{constructor(e){this.type=e}get(e){return wC(this.type,e)}destroy(){this.type=void 0}}class vB{constructor(e){this.func=e}get(...e){return this.func(...e)}destroy(){this.func=void 0}}class yB{constructor(e){P(this,"instance");this.type=e}get(e){return qu(this.instance)&&(this.instance=wC(this.type,e)),this.instance}destroy(){this.type=void 0,this.instance=void 0}}class xB{constructor(e){this.factory=e}get(e){return this.factory(e)}destroy(){this.factory=void 0}}class _B{constructor(e,t){P(this,"provider");this.name=e,this.type=t}get(e){return qu(this.provider)&&this.toType(this.type),this.provider.get(e)}toValue(e){this.destroy(),this.provider=new mB(e)}toType(e){this.destroy(),this.provider=new gB(e)}toSingleton(e){this.destroy(),this.provider=new yB(e)}asSingleton(){if(this.destroy(),qu(this.type))throw new Error("asSingleton must have a type.");this.toSingleton(this.type)}toFactory(e){this.destroy(),this.provider=new xB(e)}toFunction(e){this.destroy(),this.provider=new vB(e)}destroy(){cr(this.provider)&&this.provider.destroy()}}function wC(r,e){switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);default:throw new Error("only support instantiate maximum 10 arguments!")}}const To=t1.Obj;function Yc(r){return To.get(`action_fc:${r}`)}function k_(r,e){To.map(`action_init:${r}`).toValue(e)}function iu(r){return To.get(`action_init:${r}`)}const bC="apiService";function SC(r){return To.map(bC).toSingleton(r)}function yg(){return To.get(bC)}function pd(r,e){return To.map(`parser:${r}`).toValue(e)}function Hs(r){return To.get(`parser:${r}`)}const TC="fakeService";function wB(r){return To.map(TC).toValue(r)}function bB(){return To.get(TC)}const SB="https://stanleyshu.github.io/nslots.io/cyberpunklora/?op=1",TB="https://stanleyshu.github.io/nslots.io/cyberpunklorafake/?op=1&fake={%case%}",EB=2,PB="cyberpunkLora",CB=[],AB={default:{description:"null",resultDescription:"",load:{result:{g:0,lineBet:"0.1",level:10,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.1",cost:"1.0",payout:"0",balance:"9998.0",result:{g:0,lineBet:"0.1",level:10,ss:[[0,[1,4,3]],[1,[0,1,1]],[2,[6,6,6]],[3,[2,2,0]],[4,[6,1,1]]],reSpin:!1}}]},case1:{description:"wild respin max",resultDescription:"",load:{result:{g:0,lineBet:"0.1",level:10,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{balance:"930200.00",cost:"10",credit:"10",payout:"10",result:{level:10,ss:[[0,[3,0,0]],[1,[3,3,0]],[2,[7,4,3]],[3,[6,6,6]],[4,[1,1,2]]],wildReels:[2],tm:20,wins:[{s:0,cls:[{m:1,c:[[0,1],[0,2],[1,2],[2,0],[2,1],[2,2]]}]},{s:3,cls:[{m:2,c:[[0,0],[1,0],[1,1],[2,0],[2,1],[2,2]]}]},{s:6,cls:[{m:3,c:[[2,0],[2,1],[2,2],[3,0],[3,1],[3,2]]}]}]}},{balance:"930300.00",cost:"10",credit:"10",payout:"100",result:{level:10,ss:[[0,[3,0,0]],[1,[3,3,7]],[3,[6,6,6]],[4,[1,1,2]]],wildReels:[1,2],tm:10,wins:[{s:0,cls:[{m:4,c:[[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]]}]},{s:3,cls:[{m:5,c:[[0,0],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2]]}]},{s:6,cls:[{m:6,c:[[1,0],[1,1],[1,2],[2,0],[2,1],[2,2],[3,0],[3,1],[3,2]]}]}]}},{balance:"930400.00",cost:"10",credit:"10",payout:"2000",result:{level:10,ss:[[0,[3,1,2]],[3,[6,7,7]],[4,[1,1,2]]],wildReels:[1,2,3],tm:20,wins:[{s:1,cls:[{m:7,c:[[0,1],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2],[3,0],[3,1],[3,2],[4,0],[4,1]]}]},{s:2,cls:[{m:8,c:[[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2],[3,0],[3,1],[3,2],[4,2]]}]},{s:3,cls:[{m:9,c:[[0,0],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2],[3,0],[3,1],[3,2]]}]}]}},{balance:"930500.00",cost:"10",credit:"10",payout:"4000",result:{level:10,ss:[[0,[3,1,7]],[4,[1,7,2]]],wildReels:[0,1,2,3,4],tm:49,wins:[{s:7,cls:[{m:10,c:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2],[3,0],[3,1],[3,2],[4,0],[4,1],[4,2]]}]}]}}]},case2:{description:"wild respin max",resultDescription:"",load:{result:{g:10,lineBet:"0.1",level:20,ss:[[0,[2,0,0]],[1,[1,1,7]],[2,[1,2,0]],[3,[0,4,4]],[4,[4,4,0]]],wildReels:[1],tm:1.5,wins:[{s:0,cls:[{m:1,c:[[0,1],[0,2],[1,0],[1,1],[1,2],[2,2]]}]},{s:2,cls:[{m:.5,c:[[0,0],[1,0],[1,1],[1,2],[2,1]]}]}],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.1",cost:"0",payout:"4.0",balance:"10055.0",result:{g:10,lineBet:"0.1",level:20,ss:[[0,[4,4,4]],[2,[0,5,1]],[3,[6,1,3]],[4,[6,6,6]]],tm:2,wins:[{s:4,cls:[{m:2,c:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]]}]}],reSpin:!0}}]},case3:{description:"small, normal, middle, high, big win effect",resultDescription:"small, normal, middle, high, big win effect",load:{result:{g:0,lineBet:"0.1",level:10,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.1",cost:"2.0",payout:"2.00",balance:"10009.00",result:{g:9,lineBet:"0.1",level:20,ss:[[0,[5,0,4]],[1,[0,0,0]],[2,[2,0,4]],[3,[0,1,1]],[4,[5,5,5]]],tm:.5,wins:[{s:0,cls:[{m:.5,c:[[0,1],[1,0],[1,1],[1,2],[2,1]]}]}],reSpin:!1}},{credit:"0.1",cost:"2.0",payout:"14.00",balance:"10009.00",result:{g:9,lineBet:"0.1",level:20,ss:[[0,[5,0,4]],[1,[0,0,0]],[2,[2,0,4]],[3,[0,1,1]],[4,[5,5,5]]],tm:.5,wins:[{s:0,cls:[{m:.5,c:[[0,1],[1,0],[1,1],[1,2],[2,1]]}]}],reSpin:!1}},{credit:"0.1",cost:"2.0",payout:"35.00",balance:"10009.00",result:{g:9,lineBet:"0.1",level:20,ss:[[0,[5,0,4]],[1,[0,0,0]],[2,[2,0,4]],[3,[0,1,1]],[4,[5,5,5]]],tm:.5,wins:[{s:0,cls:[{m:.5,c:[[0,1],[1,0],[1,1],[1,2],[2,1]]}]}],reSpin:!1}},{credit:"0.1",cost:"2.0",payout:"53.00",balance:"10009.00",result:{g:9,lineBet:"0.1",level:20,ss:[[0,[5,0,4]],[1,[0,0,0]],[2,[2,0,4]],[3,[0,1,1]],[4,[5,5,5]]],tm:.5,wins:[{s:0,cls:[{m:.5,c:[[0,1],[1,0],[1,1],[1,2],[2,1]]}]}],reSpin:!1}},{credit:"0.1",cost:"2.0",payout:"100.00",balance:"10009.00",result:{g:9,lineBet:"0.1",level:20,ss:[[0,[5,0,4]],[1,[0,0,0]],[2,[2,0,4]],[3,[0,1,1]],[4,[5,5,5]]],tm:.5,wins:[{s:0,cls:[{m:.5,c:[[0,1],[1,0],[1,1],[1,2],[2,1]]}]}],reSpin:!1}}]},case4:{description:"reload in second respin",resultDescription:"",load:{result:{g:12,lineBet:"0.1",level:20,ss:[[0,[1,1,7]],[1,[2,2,0]],[3,[1,1,1]],[4,[2,2,0]]],wildReels:[0,2],tm:4.5,wins:[{s:0,cls:[{m:1.5,c:[[0,0],[0,1],[0,2],[1,2],[2,0],[2,1],[2,2]]}]},{s:1,cls:[{m:1,c:[[2,0],[2,1],[2,2],[3,0],[3,1],[3,2]]}]},{s:2,cls:[{m:2,c:[[0,0],[0,1],[0,2],[1,0],[1,1],[2,0],[2,1],[2,2]]}]}],reSpin:!0}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.1",cost:"0",payout:"4.0",balance:"10055.0",result:{g:10,lineBet:"0.1",level:20,ss:[[1,[0,5,1]],[3,[6,1,3]],[4,[6,6,6]]],tm:2,wins:[{s:4,cls:[{m:2,c:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2]]}]}],reSpin:!0}}]},case6:{description:"wild respin max",resultDescription:"",load:{result:{g:0,lineBet:"0.5",level:20,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.5",cost:"10",payout:"30000",balance:"1000",result:{g:10,lineBet:"0.5",level:20,ss:[[0,[7,1,1]],[1,[7,1,1]],[2,[3,7,1]],[3,[2,4,7]],[4,[7,0,0]]],wildReels:[0,1,2,3,4],tm:3e3,wins:[{s:7,cls:[{m:3e3,c:[[0,0],[1,0],[2,1],[3,2],[4,0]]}]}],reSpin:!1}}]},case7:{description:"same cluster combination",resultDescription:"",load:{result:{g:0,lineBet:"0.5",level:20,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.5",cost:"10",payout:"60",balance:"1000",result:{g:10,lineBet:"0.5",level:20,ss:[[0,[6,6,6]],[1,[6,6,4]],[2,[1,3,2]],[3,[6,0,6]],[4,[6,6,6]]],tm:6,wins:[{s:6,cls:[{m:3,c:[[0,0],[0,1],[0,2],[1,0],[1,1]]},{m:3,c:[[3,0],[3,2],[4,0],[4,1],[4,2]]}]}],reSpin:!1}}]},case8:{description:"medium win",resultDescription:"",load:{result:{g:0,lineBet:"0.5",level:20,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.5",cost:"10",payout:"200",balance:"1000",result:{g:10,lineBet:"0.5",level:20,ss:[[0,[4,4,1]],[1,[4,4,2]],[2,[4,4,2]],[3,[4,4,0]],[4,[4,4,4]]],tm:20,wins:[{s:4,cls:[{m:20,c:[[0,0],[0,1],[1,0],[1,1],[2,0],[2,1],[3,0],[3,1],[4,0],[4,1],[4,2]]}]}],reSpin:!1}}]},case9:{description:"high win",resultDescription:"",load:{result:{g:0,lineBet:"0.5",level:20,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.5",cost:"10",payout:"270",balance:"1000",result:{g:10,lineBet:"0.5",level:20,ss:[[0,[6,6,6]],[1,[6,6,6]],[2,[6,6,6]],[3,[5,5,6]],[4,[5,5,5]]],tm:27,wins:[{s:6,cls:[{m:25,c:[[0,0],[0,1],[0,2],[1,0],[1,1],[1,2],[2,0],[2,1],[2,2],[3,2]]}]},{s:5,cls:[{m:2,c:[[3,0],[3,1],[4,0],[4,1],[4,2]]}]}],reSpin:!1}}]},case10:{description:"big win",resultDescription:"",load:{result:{g:0,lineBet:"0.5",level:20,ss:[[0,[1,1,6]],[1,[5,0,4]],[2,[4,3,3]],[3,[5,0,4]],[4,[1,4,3]]],reSpin:!1}},lineBets:{gameId:2,currency:"RMB",lineBets:["0.10","0.20","0.30","0.50","0.75","1.00","2.00","3.00","5.00","10.00","15.00"]},spin:[{credit:"0.5",cost:"10",payout:"400",balance:"1000",result:{g:10,lineBet:"0.5",level:20,ss:[[0,[5,1,0]],[1,[3,3,3]],[2,[3,3,3]],[3,[3,3,3]],[4,[3,3,3]]],tm:40,wins:[{s:3,cls:[{m:40,c:[[1,0],[1,1],[1,2],[2,0],[2,1],[2,2],[3,0],[3,1],[3,2],[4,0],[4,1],[4,2]]}]}],reSpin:!1}}]}},kB={link:SB,linkFake:TB,id:EB,name:PB,examplesArr:CB,examples:AB};function IB(r){const e=Object.create(null);return r=r.trim().replace(/^(\?|#|&)/,""),r&&r.split("&").forEach(t=>{const n=t.replace(/\+/g," ").split("=");let i=n.shift(),s=n.length>0?n.join("="):void 0;i=decodeURIComponent(i),s=s===void 0?null:decodeURIComponent(s),e[i]===void 0?e[i]=s:Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]}),e}function MB(r){let e="",t=0;for(const n in r)r[n]&&(t++&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e}function RB(r){return r===void 0&&(r=I_()),`${window.location.protocol}//${window.location.host}${window.location.pathname}?`+MB(r)}function I_(){return IB(window.location.search)}function OB(r,e){const t=I_();return t[r]=e,RB(t)}function hn(r,e){const t=I_();return t[r]?t[r]:e}class NB{constructor(e){P(this,"data");const t=hn("fake","default");this.data=e.examples[t]}}class BB extends NB{constructor(){super(...arguments);P(this,"indexOfSpin",0)}resolve(t){let n=null;if(/^(\/s\/start)/.test(t))n=this.data.start;else if(/^(\/s\/spin)/.test(t)){const i=this.data.spin;n=i[this.indexOfSpin++%i.length]}else/^(\/s\/cont)/.test(t)?n=this.data.cont:/^(\/s\/load)/.test(t)?n=this.data.load:/^(\/s\/lineBets)/.test(t)&&(n=this.data.lineBets);return n}}wB(new BB(kB));function LB(r){const e={};for(const t in r){const n=r[t];e[t]=n.map((i,s)=>[s,i])}return e}function FB(r){const e={};for(const t in r){const n=r[t],i=n.length,s=[];for(let u=0;u<i;u++){const l=n[u];s.push([u+.5,l+.5])}const o=n[0];s.unshift([0,o+.5]);const a=n[i-1];s.push([i,a+.5]),e[t]=s}return e}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var su=9e15,Pa=1e9,r1="0123456789abcdef",rm="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",nm="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",n1={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-su,maxE:su,crypto:!1},EC,io,Ue=!0,xg="[DecimalError] ",_a=xg+"Invalid argument: ",PC=xg+"Precision limit exceeded",CC=xg+"crypto unavailable",AC="[object Decimal]",Wr=Math.floor,lr=Math.pow,DB=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,UB=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,jB=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,kC=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ri=1e7,Ne=7,XB=9007199254740991,HB=rm.length-1,i1=nm.length-1,oe={toStringTag:AC};oe.absoluteValue=oe.abs=function(){var r=new this.constructor(this);return r.s<0&&(r.s=1),Ie(r)};oe.ceil=function(){return Ie(new this.constructor(this),this.e+1,2)};oe.clampedTo=oe.clamp=function(r,e){var t,n=this,i=n.constructor;if(r=new i(r),e=new i(e),!r.s||!e.s)return new i(NaN);if(r.gt(e))throw Error(_a+e);return t=n.cmp(r),t<0?r:n.cmp(e)>0?e:new i(n)};oe.comparedTo=oe.cmp=function(r){var e,t,n,i,s=this,o=s.d,a=(r=new s.constructor(r)).d,u=s.s,l=r.s;if(!o||!a)return!u||!l?NaN:u!==l?u:o===a?0:!o^u<0?1:-1;if(!o[0]||!a[0])return o[0]?u:a[0]?-l:0;if(u!==l)return u;if(s.e!==r.e)return s.e>r.e^u<0?1:-1;for(n=o.length,i=a.length,e=0,t=n<i?n:i;e<t;++e)if(o[e]!==a[e])return o[e]>a[e]^u<0?1:-1;return n===i?0:n>i^u<0?1:-1};oe.cosine=oe.cos=function(){var r,e,t=this,n=t.constructor;return t.d?t.d[0]?(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Ne,n.rounding=1,t=zB(n,NC(n,t)),n.precision=r,n.rounding=e,Ie(io==2||io==3?t.neg():t,r,e,!0)):new n(1):new n(NaN)};oe.cubeRoot=oe.cbrt=function(){var r,e,t,n,i,s,o,a,u,l,h=this,c=h.constructor;if(!h.isFinite()||h.isZero())return new c(h);for(Ue=!1,s=h.s*lr(h.s*h,1/3),!s||Math.abs(s)==1/0?(t=Rr(h.d),r=h.e,(s=(r-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=lr(t,1/3),r=Wr((r+1)/3)-(r%3==(r<0?-1:2)),s==1/0?t="5e"+r:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+r),n=new c(t),n.s=h.s):n=new c(s.toString()),o=(r=c.precision)+3;;)if(a=n,u=a.times(a).times(a),l=u.plus(h),n=mt(l.plus(h).times(a),l.plus(u),o+2,1),Rr(a.d).slice(0,o)===(t=Rr(n.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!i&&t=="4999"){if(!i&&(Ie(a,r+1,0),a.times(a).times(a).eq(h))){n=a;break}o+=4,i=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Ie(n,r+1,1),e=!n.times(n).times(n).eq(h));break}return Ue=!0,Ie(n,r,c.rounding,e)};oe.decimalPlaces=oe.dp=function(){var r,e=this.d,t=NaN;if(e){if(r=e.length-1,t=(r-Wr(this.e/Ne))*Ne,r=e[r],r)for(;r%10==0;r/=10)t--;t<0&&(t=0)}return t};oe.dividedBy=oe.div=function(r){return mt(this,new this.constructor(r))};oe.dividedToIntegerBy=oe.divToInt=function(r){var e=this,t=e.constructor;return Ie(mt(e,new t(r),0,1,1),t.precision,t.rounding)};oe.equals=oe.eq=function(r){return this.cmp(r)===0};oe.floor=function(){return Ie(new this.constructor(this),this.e+1,3)};oe.greaterThan=oe.gt=function(r){return this.cmp(r)>0};oe.greaterThanOrEqualTo=oe.gte=function(r){var e=this.cmp(r);return e==1||e===0};oe.hyperbolicCosine=oe.cosh=function(){var r,e,t,n,i,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;t=o.precision,n=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,i=s.d.length,i<32?(r=Math.ceil(i/3),e=(1/wg(4,r)).toString()):(r=16,e="2.3283064365386962890625e-10"),s=Ku(o,1,s.times(e),new o(1),!0);for(var u,l=r,h=new o(8);l--;)u=s.times(s),s=a.minus(u.times(h.minus(u.times(h))));return Ie(s,o.precision=t,o.rounding=n,!0)};oe.hyperbolicSine=oe.sinh=function(){var r,e,t,n,i=this,s=i.constructor;if(!i.isFinite()||i.isZero())return new s(i);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(i.e,i.sd())+4,s.rounding=1,n=i.d.length,n<3)i=Ku(s,2,i,i,!0);else{r=1.4*Math.sqrt(n),r=r>16?16:r|0,i=i.times(1/wg(5,r)),i=Ku(s,2,i,i,!0);for(var o,a=new s(5),u=new s(16),l=new s(20);r--;)o=i.times(i),i=i.times(a.plus(o.times(u.times(o).plus(l))))}return s.precision=e,s.rounding=t,Ie(i,e,t,!0)};oe.hyperbolicTangent=oe.tanh=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+7,n.rounding=1,mt(t.sinh(),t.cosh(),n.precision=r,n.rounding=e)):new n(t.s)};oe.inverseCosine=oe.acos=function(){var r,e=this,t=e.constructor,n=e.abs().cmp(1),i=t.precision,s=t.rounding;return n!==-1?n===0?e.isNeg()?Ci(t,i,s):new t(0):new t(NaN):e.isZero()?Ci(t,i+4,s).times(.5):(t.precision=i+6,t.rounding=1,e=e.asin(),r=Ci(t,i+4,s).times(.5),t.precision=i,t.rounding=s,r.minus(e))};oe.inverseHyperbolicCosine=oe.acosh=function(){var r,e,t=this,n=t.constructor;return t.lte(1)?new n(t.eq(1)?0:NaN):t.isFinite()?(r=n.precision,e=n.rounding,n.precision=r+Math.max(Math.abs(t.e),t.sd())+4,n.rounding=1,Ue=!1,t=t.times(t).minus(1).sqrt().plus(t),Ue=!0,n.precision=r,n.rounding=e,t.ln()):new n(t)};oe.inverseHyperbolicSine=oe.asinh=function(){var r,e,t=this,n=t.constructor;return!t.isFinite()||t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+2*Math.max(Math.abs(t.e),t.sd())+6,n.rounding=1,Ue=!1,t=t.times(t).plus(1).sqrt().plus(t),Ue=!0,n.precision=r,n.rounding=e,t.ln())};oe.inverseHyperbolicTangent=oe.atanh=function(){var r,e,t,n,i=this,s=i.constructor;return i.isFinite()?i.e>=0?new s(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(r=s.precision,e=s.rounding,n=i.sd(),Math.max(n,r)<2*-i.e-1?Ie(new s(i),r,e,!0):(s.precision=t=n-i.e,i=mt(i.plus(1),new s(1).minus(i),t+r,1),s.precision=r+4,s.rounding=1,i=i.ln(),s.precision=r,s.rounding=e,i.times(.5))):new s(NaN)};oe.inverseSine=oe.asin=function(){var r,e,t,n,i=this,s=i.constructor;return i.isZero()?new s(i):(e=i.abs().cmp(1),t=s.precision,n=s.rounding,e!==-1?e===0?(r=Ci(s,t+4,n).times(.5),r.s=i.s,r):new s(NaN):(s.precision=t+6,s.rounding=1,i=i.div(new s(1).minus(i.times(i)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=n,i.times(2)))};oe.inverseTangent=oe.atan=function(){var r,e,t,n,i,s,o,a,u,l=this,h=l.constructor,c=h.precision,d=h.rounding;if(l.isFinite()){if(l.isZero())return new h(l);if(l.abs().eq(1)&&c+4<=i1)return o=Ci(h,c+4,d).times(.25),o.s=l.s,o}else{if(!l.s)return new h(NaN);if(c+4<=i1)return o=Ci(h,c+4,d).times(.5),o.s=l.s,o}for(h.precision=a=c+10,h.rounding=1,t=Math.min(28,a/Ne+2|0),r=t;r;--r)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(Ue=!1,e=Math.ceil(a/Ne),n=1,u=l.times(l),o=new h(l),i=l;r!==-1;)if(i=i.times(u),s=o.minus(i.div(n+=2)),i=i.times(u),o=s.plus(i.div(n+=2)),o.d[e]!==void 0)for(r=e;o.d[r]===s.d[r]&&r--;);return t&&(o=o.times(2<<t-1)),Ue=!0,Ie(o,h.precision=c,h.rounding=d,!0)};oe.isFinite=function(){return!!this.d};oe.isInteger=oe.isInt=function(){return!!this.d&&Wr(this.e/Ne)>this.d.length-2};oe.isNaN=function(){return!this.s};oe.isNegative=oe.isNeg=function(){return this.s<0};oe.isPositive=oe.isPos=function(){return this.s>0};oe.isZero=function(){return!!this.d&&this.d[0]===0};oe.lessThan=oe.lt=function(r){return this.cmp(r)<0};oe.lessThanOrEqualTo=oe.lte=function(r){return this.cmp(r)<1};oe.logarithm=oe.log=function(r){var e,t,n,i,s,o,a,u,l=this,h=l.constructor,c=h.precision,d=h.rounding,p=5;if(r==null)r=new h(10),e=!0;else{if(r=new h(r),t=r.d,r.s<0||!t||!t[0]||r.eq(1))return new h(NaN);e=r.eq(10)}if(t=l.d,l.s<0||!t||!t[0]||l.eq(1))return new h(t&&!t[0]?-1/0:l.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(i=t[0];i%10===0;)i/=10;s=i!==1}if(Ue=!1,a=c+p,o=ta(l,a),n=e?im(h,a+10):ta(r,a),u=mt(o,n,a,1),Dh(u.d,i=c,d))do if(a+=10,o=ta(l,a),n=e?im(h,a+10):ta(r,a),u=mt(o,n,a,1),!s){+Rr(u.d).slice(i+1,i+15)+1==1e14&&(u=Ie(u,c+1,0));break}while(Dh(u.d,i+=10,d));return Ue=!0,Ie(u,c,d)};oe.minus=oe.sub=function(r){var e,t,n,i,s,o,a,u,l,h,c,d,p=this,g=p.constructor;if(r=new g(r),!p.d||!r.d)return!p.s||!r.s?r=new g(NaN):p.d?r.s=-r.s:r=new g(r.d||p.s!==r.s?p:NaN),r;if(p.s!=r.s)return r.s=-r.s,p.plus(r);if(l=p.d,d=r.d,a=g.precision,u=g.rounding,!l[0]||!d[0]){if(d[0])r.s=-r.s;else if(l[0])r=new g(p);else return new g(u===3?-0:0);return Ue?Ie(r,a,u):r}if(t=Wr(r.e/Ne),h=Wr(p.e/Ne),l=l.slice(),s=h-t,s){for(c=s<0,c?(e=l,s=-s,o=d.length):(e=d,t=h,o=l.length),n=Math.max(Math.ceil(a/Ne),o)+2,s>n&&(s=n,e.length=1),e.reverse(),n=s;n--;)e.push(0);e.reverse()}else{for(n=l.length,o=d.length,c=n<o,c&&(o=n),n=0;n<o;n++)if(l[n]!=d[n]){c=l[n]<d[n];break}s=0}for(c&&(e=l,l=d,d=e,r.s=-r.s),o=l.length,n=d.length-o;n>0;--n)l[o++]=0;for(n=d.length;n>s;){if(l[--n]<d[n]){for(i=n;i&&l[--i]===0;)l[i]=Ri-1;--l[i],l[n]+=Ri}l[n]-=d[n]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--t;return l[0]?(r.d=l,r.e=_g(l,t),Ue?Ie(r,a,u):r):new g(u===3?-0:0)};oe.modulo=oe.mod=function(r){var e,t=this,n=t.constructor;return r=new n(r),!t.d||!r.s||r.d&&!r.d[0]?new n(NaN):!r.d||t.d&&!t.d[0]?Ie(new n(t),n.precision,n.rounding):(Ue=!1,n.modulo==9?(e=mt(t,r.abs(),0,3,1),e.s*=r.s):e=mt(t,r,0,n.modulo,1),e=e.times(r),Ue=!0,t.minus(e))};oe.naturalExponential=oe.exp=function(){return s1(this)};oe.naturalLogarithm=oe.ln=function(){return ta(this)};oe.negated=oe.neg=function(){var r=new this.constructor(this);return r.s=-r.s,Ie(r)};oe.plus=oe.add=function(r){var e,t,n,i,s,o,a,u,l,h,c=this,d=c.constructor;if(r=new d(r),!c.d||!r.d)return!c.s||!r.s?r=new d(NaN):c.d||(r=new d(r.d||c.s===r.s?c:NaN)),r;if(c.s!=r.s)return r.s=-r.s,c.minus(r);if(l=c.d,h=r.d,a=d.precision,u=d.rounding,!l[0]||!h[0])return h[0]||(r=new d(c)),Ue?Ie(r,a,u):r;if(s=Wr(c.e/Ne),n=Wr(r.e/Ne),l=l.slice(),i=s-n,i){for(i<0?(t=l,i=-i,o=h.length):(t=h,n=s,o=l.length),s=Math.ceil(a/Ne),o=s>o?s+1:o+1,i>o&&(i=o,t.length=1),t.reverse();i--;)t.push(0);t.reverse()}for(o=l.length,i=h.length,o-i<0&&(i=o,t=h,h=l,l=t),e=0;i;)e=(l[--i]=l[i]+h[i]+e)/Ri|0,l[i]%=Ri;for(e&&(l.unshift(e),++n),o=l.length;l[--o]==0;)l.pop();return r.d=l,r.e=_g(l,n),Ue?Ie(r,a,u):r};oe.precision=oe.sd=function(r){var e,t=this;if(r!==void 0&&r!==!!r&&r!==1&&r!==0)throw Error(_a+r);return t.d?(e=IC(t.d),r&&t.e+1>e&&(e=t.e+1)):e=NaN,e};oe.round=function(){var r=this,e=r.constructor;return Ie(new e(r),r.e+1,e.rounding)};oe.sine=oe.sin=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+Math.max(t.e,t.sd())+Ne,n.rounding=1,t=YB(n,NC(n,t)),n.precision=r,n.rounding=e,Ie(io>2?t.neg():t,r,e,!0)):new n(NaN)};oe.squareRoot=oe.sqrt=function(){var r,e,t,n,i,s,o=this,a=o.d,u=o.e,l=o.s,h=o.constructor;if(l!==1||!a||!a[0])return new h(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);for(Ue=!1,l=Math.sqrt(+o),l==0||l==1/0?(e=Rr(a),(e.length+u)%2==0&&(e+="0"),l=Math.sqrt(e),u=Wr((u+1)/2)-(u<0||u%2),l==1/0?e="5e"+u:(e=l.toExponential(),e=e.slice(0,e.indexOf("e")+1)+u),n=new h(e)):n=new h(l.toString()),t=(u=h.precision)+3;;)if(s=n,n=s.plus(mt(o,s,t+2,1)).times(.5),Rr(s.d).slice(0,t)===(e=Rr(n.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!i&&e=="4999"){if(!i&&(Ie(s,u+1,0),s.times(s).eq(o))){n=s;break}t+=4,i=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Ie(n,u+1,1),r=!n.times(n).eq(o));break}return Ue=!0,Ie(n,u,h.rounding,r)};oe.tangent=oe.tan=function(){var r,e,t=this,n=t.constructor;return t.isFinite()?t.isZero()?new n(t):(r=n.precision,e=n.rounding,n.precision=r+10,n.rounding=1,t=t.sin(),t.s=1,t=mt(t,new n(1).minus(t.times(t)).sqrt(),r+10,0),n.precision=r,n.rounding=e,Ie(io==2||io==4?t.neg():t,r,e,!0)):new n(NaN)};oe.times=oe.mul=function(r){var e,t,n,i,s,o,a,u,l,h=this,c=h.constructor,d=h.d,p=(r=new c(r)).d;if(r.s*=h.s,!d||!d[0]||!p||!p[0])return new c(!r.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:!d||!p?r.s/0:r.s*0);for(t=Wr(h.e/Ne)+Wr(r.e/Ne),u=d.length,l=p.length,u<l&&(s=d,d=p,p=s,o=u,u=l,l=o),s=[],o=u+l,n=o;n--;)s.push(0);for(n=l;--n>=0;){for(e=0,i=u+n;i>n;)a=s[i]+p[n]*d[i-n-1]+e,s[i--]=a%Ri|0,e=a/Ri|0;s[i]=(s[i]+e)%Ri|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),r.d=s,r.e=_g(s,t),Ue?Ie(r,c.precision,c.rounding):r};oe.toBinary=function(r,e){return M_(this,2,r,e)};oe.toDecimalPlaces=oe.toDP=function(r,e){var t=this,n=t.constructor;return t=new n(t),r===void 0?t:(wn(r,0,Pa),e===void 0?e=n.rounding:wn(e,0,8),Ie(t,r+t.e+1,e))};oe.toExponential=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Cs(n,!0):(wn(r,0,Pa),e===void 0?e=i.rounding:wn(e,0,8),n=Ie(new i(n),r+1,e),t=Cs(n,!0,r+1)),n.isNeg()&&!n.isZero()?"-"+t:t};oe.toFixed=function(r,e){var t,n,i=this,s=i.constructor;return r===void 0?t=Cs(i):(wn(r,0,Pa),e===void 0?e=s.rounding:wn(e,0,8),n=Ie(new s(i),r+i.e+1,e),t=Cs(n,!1,r+n.e+1)),i.isNeg()&&!i.isZero()?"-"+t:t};oe.toFraction=function(r){var e,t,n,i,s,o,a,u,l,h,c,d,p=this,g=p.d,v=p.constructor;if(!g)return new v(p);if(l=t=new v(1),n=u=new v(0),e=new v(n),s=e.e=IC(g)-p.e-1,o=s%Ne,e.d[0]=lr(10,o<0?Ne+o:o),r==null)r=s>0?e:l;else{if(a=new v(r),!a.isInt()||a.lt(l))throw Error(_a+a);r=a.gt(e)?s>0?e:l:a}for(Ue=!1,a=new v(Rr(g)),h=v.precision,v.precision=s=g.length*Ne*2;c=mt(a,e,0,1,1),i=t.plus(c.times(n)),i.cmp(r)!=1;)t=n,n=i,i=l,l=u.plus(c.times(i)),u=i,i=e,e=a.minus(c.times(i)),a=i;return i=mt(r.minus(t),n,0,1,1),u=u.plus(i.times(l)),t=t.plus(i.times(n)),u.s=l.s=p.s,d=mt(l,n,s,1).minus(p).abs().cmp(mt(u,t,s,1).minus(p).abs())<1?[l,n]:[u,t],v.precision=h,Ue=!0,d};oe.toHexadecimal=oe.toHex=function(r,e){return M_(this,16,r,e)};oe.toNearest=function(r,e){var t=this,n=t.constructor;if(t=new n(t),r==null){if(!t.d)return t;r=new n(1),e=n.rounding}else{if(r=new n(r),e===void 0?e=n.rounding:wn(e,0,8),!t.d)return r.s?t:r;if(!r.d)return r.s&&(r.s=t.s),r}return r.d[0]?(Ue=!1,t=mt(t,r,0,e,1).times(r),Ue=!0,Ie(t)):(r.s=t.s,t=r),t};oe.toNumber=function(){return+this};oe.toOctal=function(r,e){return M_(this,8,r,e)};oe.toPower=oe.pow=function(r){var e,t,n,i,s,o,a=this,u=a.constructor,l=+(r=new u(r));if(!a.d||!r.d||!a.d[0]||!r.d[0])return new u(lr(+a,l));if(a=new u(a),a.eq(1))return a;if(n=u.precision,s=u.rounding,r.eq(1))return Ie(a,n,s);if(e=Wr(r.e/Ne),e>=r.d.length-1&&(t=l<0?-l:l)<=XB)return i=MC(u,a,t,n),r.s<0?new u(1).div(i):Ie(i,n,s);if(o=a.s,o<0){if(e<r.d.length-1)return new u(NaN);if(r.d[e]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return t=lr(+a,l),e=t==0||!isFinite(t)?Wr(l*(Math.log("0."+Rr(a.d))/Math.LN10+a.e+1)):new u(t+"").e,e>u.maxE+1||e<u.minE-1?new u(e>0?o/0:0):(Ue=!1,u.rounding=a.s=1,t=Math.min(12,(e+"").length),i=s1(r.times(ta(a,n+t)),n),i.d&&(i=Ie(i,n+5,1),Dh(i.d,n,s)&&(e=n+10,i=Ie(s1(r.times(ta(a,e+t)),e),e+5,1),+Rr(i.d).slice(n+1,n+15)+1==1e14&&(i=Ie(i,n+1,0)))),i.s=o,Ue=!0,u.rounding=s,Ie(i,n,s))};oe.toPrecision=function(r,e){var t,n=this,i=n.constructor;return r===void 0?t=Cs(n,n.e<=i.toExpNeg||n.e>=i.toExpPos):(wn(r,1,Pa),e===void 0?e=i.rounding:wn(e,0,8),n=Ie(new i(n),r,e),t=Cs(n,r<=n.e||n.e<=i.toExpNeg,r)),n.isNeg()&&!n.isZero()?"-"+t:t};oe.toSignificantDigits=oe.toSD=function(r,e){var t=this,n=t.constructor;return r===void 0?(r=n.precision,e=n.rounding):(wn(r,1,Pa),e===void 0?e=n.rounding:wn(e,0,8)),Ie(new n(t),r,e)};oe.toString=function(){var r=this,e=r.constructor,t=Cs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()&&!r.isZero()?"-"+t:t};oe.truncated=oe.trunc=function(){return Ie(new this.constructor(this),this.e+1,1)};oe.valueOf=oe.toJSON=function(){var r=this,e=r.constructor,t=Cs(r,r.e<=e.toExpNeg||r.e>=e.toExpPos);return r.isNeg()?"-"+t:t};function Rr(r){var e,t,n,i=r.length-1,s="",o=r[0];if(i>0){for(s+=o,e=1;e<i;e++)n=r[e]+"",t=Ne-n.length,t&&(s+=$o(t)),s+=n;o=r[e],n=o+"",t=Ne-n.length,t&&(s+=$o(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function wn(r,e,t){if(r!==~~r||r<e||r>t)throw Error(_a+r)}function Dh(r,e,t,n){var i,s,o,a;for(s=r[0];s>=10;s/=10)--e;return--e<0?(e+=Ne,i=0):(i=Math.ceil((e+1)/Ne),e%=Ne),s=lr(10,Ne-e),a=r[i]%s|0,n==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):o=(t<4&&a+1==s||t>3&&a+1==s/2)&&(r[i+1]/s/100|0)==lr(10,e-2)-1||(a==s/2||a==0)&&(r[i+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(n||t<4)&&a==9999||!n&&t>3&&a==4999):o=((n||t<4)&&a+1==s||!n&&t>3&&a+1==s/2)&&(r[i+1]/s/1e3|0)==lr(10,e-3)-1,o}function Ip(r,e,t){for(var n,i=[0],s,o=0,a=r.length;o<a;){for(s=i.length;s--;)i[s]*=e;for(i[0]+=r1.indexOf(r.charAt(o++)),n=0;n<i.length;n++)i[n]>t-1&&(i[n+1]===void 0&&(i[n+1]=0),i[n+1]+=i[n]/t|0,i[n]%=t)}return i.reverse()}function zB(r,e){var t,n,i;if(e.isZero())return e;n=e.d.length,n<32?(t=Math.ceil(n/3),i=(1/wg(4,t)).toString()):(t=16,i="2.3283064365386962890625e-10"),r.precision+=t,e=Ku(r,1,e.times(i),new r(1));for(var s=t;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return r.precision-=t,e}var mt=function(){function r(n,i,s){var o,a=0,u=n.length;for(n=n.slice();u--;)o=n[u]*i+a,n[u]=o%s|0,a=o/s|0;return a&&n.unshift(a),n}function e(n,i,s,o){var a,u;if(s!=o)u=s>o?1:-1;else for(a=u=0;a<s;a++)if(n[a]!=i[a]){u=n[a]>i[a]?1:-1;break}return u}function t(n,i,s,o){for(var a=0;s--;)n[s]-=a,a=n[s]<i[s]?1:0,n[s]=a*o+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o,a,u){var l,h,c,d,p,g,v,x,y,w,_,S,I,A,k,M,O,F,U,H,L=n.constructor,N=n.s==i.s?1:-1,j=n.d,Y=i.d;if(!j||!j[0]||!Y||!Y[0])return new L(!n.s||!i.s||(j?Y&&j[0]==Y[0]:!Y)?NaN:j&&j[0]==0||!Y?N*0:N/0);for(u?(p=1,h=n.e-i.e):(u=Ri,p=Ne,h=Wr(n.e/p)-Wr(i.e/p)),U=Y.length,O=j.length,y=new L(N),w=y.d=[],c=0;Y[c]==(j[c]||0);c++);if(Y[c]>(j[c]||0)&&h--,s==null?(A=s=L.precision,o=L.rounding):a?A=s+(n.e-i.e)+1:A=s,A<0)w.push(1),g=!0;else{if(A=A/p+2|0,c=0,U==1){for(d=0,Y=Y[0],A++;(c<O||d)&&A--;c++)k=d*u+(j[c]||0),w[c]=k/Y|0,d=k%Y|0;g=d||c<O}else{for(d=u/(Y[0]+1)|0,d>1&&(Y=r(Y,d,u),j=r(j,d,u),U=Y.length,O=j.length),M=U,_=j.slice(0,U),S=_.length;S<U;)_[S++]=0;H=Y.slice(),H.unshift(0),F=Y[0],Y[1]>=u/2&&++F;do d=0,l=e(Y,_,U,S),l<0?(I=_[0],U!=S&&(I=I*u+(_[1]||0)),d=I/F|0,d>1?(d>=u&&(d=u-1),v=r(Y,d,u),x=v.length,S=_.length,l=e(v,_,x,S),l==1&&(d--,t(v,U<x?H:Y,x,u))):(d==0&&(l=d=1),v=Y.slice()),x=v.length,x<S&&v.unshift(0),t(_,v,S,u),l==-1&&(S=_.length,l=e(Y,_,U,S),l<1&&(d++,t(_,U<S?H:Y,S,u))),S=_.length):l===0&&(d++,_=[0]),w[c++]=d,l&&_[0]?_[S++]=j[M]||0:(_=[j[M]],S=1);while((M++<O||_[0]!==void 0)&&A--);g=_[0]!==void 0}w[0]||w.shift()}if(p==1)y.e=h,EC=g;else{for(c=1,d=w[0];d>=10;d/=10)c++;y.e=c+h*p-1,Ie(y,a?s+y.e+1:s,o,g)}return y}}();function Ie(r,e,t,n){var i,s,o,a,u,l,h,c,d,p=r.constructor;e:if(e!=null){if(c=r.d,!c)return r;for(i=1,a=c[0];a>=10;a/=10)i++;if(s=e-i,s<0)s+=Ne,o=e,h=c[d=0],u=h/lr(10,i-o-1)%10|0;else if(d=Math.ceil((s+1)/Ne),a=c.length,d>=a)if(n){for(;a++<=d;)c.push(0);h=u=0,i=1,s%=Ne,o=s-Ne+1}else break e;else{for(h=a=c[d],i=1;a>=10;a/=10)i++;s%=Ne,o=s-Ne+i,u=o<0?0:h/lr(10,i-o-1)%10|0}if(n=n||e<0||c[d+1]!==void 0||(o<0?h:h%lr(10,i-o-1)),l=t<4?(u||n)&&(t==0||t==(r.s<0?3:2)):u>5||u==5&&(t==4||n||t==6&&(s>0?o>0?h/lr(10,i-o):0:c[d-1])%10&1||t==(r.s<0?8:7)),e<1||!c[0])return c.length=0,l?(e-=r.e+1,c[0]=lr(10,(Ne-e%Ne)%Ne),r.e=-e||0):c[0]=r.e=0,r;if(s==0?(c.length=d,a=1,d--):(c.length=d+1,a=lr(10,Ne-s),c[d]=o>0?(h/lr(10,i-o)%lr(10,o)|0)*a:0),l)for(;;)if(d==0){for(s=1,o=c[0];o>=10;o/=10)s++;for(o=c[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(r.e++,c[0]==Ri&&(c[0]=1));break}else{if(c[d]+=a,c[d]!=Ri)break;c[d--]=0,a=1}for(s=c.length;c[--s]===0;)c.pop()}return Ue&&(r.e>p.maxE?(r.d=null,r.e=NaN):r.e<p.minE&&(r.e=0,r.d=[0])),r}function Cs(r,e,t){if(!r.isFinite())return OC(r);var n,i=r.e,s=Rr(r.d),o=s.length;return e?(t&&(n=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+$o(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r.e<0?"e":"e+")+r.e):i<0?(s="0."+$o(-i-1)+s,t&&(n=t-o)>0&&(s+=$o(n))):i>=o?(s+=$o(i+1-o),t&&(n=t-i-1)>0&&(s=s+"."+$o(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),t&&(n=t-o)>0&&(i+1===o&&(s+="."),s+=$o(n))),s}function _g(r,e){var t=r[0];for(e*=Ne;t>=10;t/=10)e++;return e}function im(r,e,t){if(e>HB)throw Ue=!0,t&&(r.precision=t),Error(PC);return Ie(new r(rm),e,1,!0)}function Ci(r,e,t){if(e>i1)throw Error(PC);return Ie(new r(nm),e,t,!0)}function IC(r){var e=r.length-1,t=e*Ne+1;if(e=r[e],e){for(;e%10==0;e/=10)t--;for(e=r[0];e>=10;e/=10)t++}return t}function $o(r){for(var e="";r--;)e+="0";return e}function MC(r,e,t,n){var i,s=new r(1),o=Math.ceil(n/Ne+4);for(Ue=!1;;){if(t%2&&(s=s.times(e),_T(s.d,o)&&(i=!0)),t=Wr(t/2),t===0){t=s.d.length-1,i&&s.d[t]===0&&++s.d[t];break}e=e.times(e),_T(e.d,o)}return Ue=!0,s}function xT(r){return r.d[r.d.length-1]&1}function RC(r,e,t){for(var n,i=new r(e[0]),s=0;++s<e.length;)if(n=new r(e[s]),n.s)i[t](n)&&(i=n);else{i=n;break}return i}function s1(r,e){var t,n,i,s,o,a,u,l=0,h=0,c=0,d=r.constructor,p=d.rounding,g=d.precision;if(!r.d||!r.d[0]||r.e>17)return new d(r.d?r.d[0]?r.s<0?0:1/0:1:r.s?r.s<0?0:r:NaN);for(e==null?(Ue=!1,u=g):u=e,a=new d(.03125);r.e>-2;)r=r.times(a),c+=5;for(n=Math.log(lr(2,c))/Math.LN10*2+5|0,u+=n,t=s=o=new d(1),d.precision=u;;){if(s=Ie(s.times(r),u,1),t=t.times(++h),a=o.plus(mt(s,t,u,1)),Rr(a.d).slice(0,u)===Rr(o.d).slice(0,u)){for(i=c;i--;)o=Ie(o.times(o),u,1);if(e==null)if(l<3&&Dh(o.d,u-n,p,l))d.precision=u+=10,t=s=a=new d(1),h=0,l++;else return Ie(o,d.precision=g,p,Ue=!0);else return d.precision=g,o}o=a}}function ta(r,e){var t,n,i,s,o,a,u,l,h,c,d,p=1,g=10,v=r,x=v.d,y=v.constructor,w=y.rounding,_=y.precision;if(v.s<0||!x||!x[0]||!v.e&&x[0]==1&&x.length==1)return new y(x&&!x[0]?-1/0:v.s!=1?NaN:x?0:v);if(e==null?(Ue=!1,h=_):h=e,y.precision=h+=g,t=Rr(x),n=t.charAt(0),Math.abs(s=v.e)<15e14){for(;n<7&&n!=1||n==1&&t.charAt(1)>3;)v=v.times(r),t=Rr(v.d),n=t.charAt(0),p++;s=v.e,n>1?(v=new y("0."+t),s++):v=new y(n+"."+t.slice(1))}else return l=im(y,h+2,_).times(s+""),v=ta(new y(n+"."+t.slice(1)),h-g).plus(l),y.precision=_,e==null?Ie(v,_,w,Ue=!0):v;for(c=v,u=o=v=mt(v.minus(1),v.plus(1),h,1),d=Ie(v.times(v),h,1),i=3;;){if(o=Ie(o.times(d),h,1),l=u.plus(mt(o,new y(i),h,1)),Rr(l.d).slice(0,h)===Rr(u.d).slice(0,h))if(u=u.times(2),s!==0&&(u=u.plus(im(y,h+2,_).times(s+""))),u=mt(u,new y(p),h,1),e==null)if(Dh(u.d,h-g,w,a))y.precision=h+=g,l=o=v=mt(c.minus(1),c.plus(1),h,1),d=Ie(v.times(v),h,1),i=a=1;else return Ie(u,y.precision=_,w,Ue=!0);else return y.precision=_,u;u=l,i+=2}}function OC(r){return String(r.s*r.s/0)}function o1(r,e){var t,n,i;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(t<0&&(t=n),t+=+e.slice(n+1),e=e.substring(0,n)):t<0&&(t=e.length),n=0;e.charCodeAt(n)===48;n++);for(i=e.length;e.charCodeAt(i-1)===48;--i);if(e=e.slice(n,i),e){if(i-=n,r.e=t=t-n-1,r.d=[],n=(t+1)%Ne,t<0&&(n+=Ne),n<i){for(n&&r.d.push(+e.slice(0,n)),i-=Ne;n<i;)r.d.push(+e.slice(n,n+=Ne));e=e.slice(n),n=Ne-e.length}else n-=i;for(;n--;)e+="0";r.d.push(+e),Ue&&(r.e>r.constructor.maxE?(r.d=null,r.e=NaN):r.e<r.constructor.minE&&(r.e=0,r.d=[0]))}else r.e=0,r.d=[0];return r}function $B(r,e){var t,n,i,s,o,a,u,l,h;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),kC.test(e))return o1(r,e)}else if(e==="Infinity"||e==="NaN")return+e||(r.s=NaN),r.e=NaN,r.d=null,r;if(UB.test(e))t=16,e=e.toLowerCase();else if(DB.test(e))t=2;else if(jB.test(e))t=8;else throw Error(_a+e);for(s=e.search(/p/i),s>0?(u=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,n=r.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,i=MC(n,new n(t),s,s*2)),l=Ip(e,t,Ri),h=l.length-1,s=h;l[s]===0;--s)l.pop();return s<0?new n(r.s*0):(r.e=_g(l,h),r.d=l,Ue=!1,o&&(r=mt(r,i,a*4)),u&&(r=r.times(Math.abs(u)<54?lr(2,u):ut.pow(2,u))),Ue=!0,r)}function YB(r,e){var t,n=e.d.length;if(n<3)return e.isZero()?e:Ku(r,2,e,e);t=1.4*Math.sqrt(n),t=t>16?16:t|0,e=e.times(1/wg(5,t)),e=Ku(r,2,e,e);for(var i,s=new r(5),o=new r(16),a=new r(20);t--;)i=e.times(e),e=e.times(s.plus(i.times(o.times(i).minus(a))));return e}function Ku(r,e,t,n,i){var s,o,a,u,l=r.precision,h=Math.ceil(l/Ne);for(Ue=!1,u=t.times(t),a=new r(n);;){if(o=mt(a.times(u),new r(e++*e++),l,1),a=i?n.plus(o):n.minus(o),n=mt(o.times(u),new r(e++*e++),l,1),o=a.plus(n),o.d[h]!==void 0){for(s=h;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=n,n=o,o=s}return Ue=!0,o.d.length=h+1,o}function wg(r,e){for(var t=r;--e;)t*=r;return t}function NC(r,e){var t,n=e.s<0,i=Ci(r,r.precision,1),s=i.times(.5);if(e=e.abs(),e.lte(s))return io=n?4:1,e;if(t=e.divToInt(i),t.isZero())io=n?3:2;else{if(e=e.minus(t.times(i)),e.lte(s))return io=xT(t)?n?2:3:n?4:1,e;io=xT(t)?n?1:4:n?3:2}return e.minus(i).abs()}function M_(r,e,t,n){var i,s,o,a,u,l,h,c,d,p=r.constructor,g=t!==void 0;if(g?(wn(t,1,Pa),n===void 0?n=p.rounding:wn(n,0,8)):(t=p.precision,n=p.rounding),!r.isFinite())h=OC(r);else{for(h=Cs(r),o=h.indexOf("."),g?(i=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):i=e,o>=0&&(h=h.replace(".",""),d=new p(1),d.e=h.length-o,d.d=Ip(Cs(d),10,i),d.e=d.d.length),c=Ip(h,10,i),s=u=c.length;c[--u]==0;)c.pop();if(!c[0])h=g?"0p+0":"0";else{if(o<0?s--:(r=new p(r),r.d=c,r.e=s,r=mt(r,d,t,n,0,i),c=r.d,s=r.e,l=EC),o=c[t],a=i/2,l=l||c[t+1]!==void 0,l=n<4?(o!==void 0||l)&&(n===0||n===(r.s<0?3:2)):o>a||o===a&&(n===4||l||n===6&&c[t-1]&1||n===(r.s<0?8:7)),c.length=t,l)for(;++c[--t]>i-1;)c[t]=0,t||(++s,c.unshift(1));for(u=c.length;!c[u-1];--u);for(o=0,h="";o<u;o++)h+=r1.charAt(c[o]);if(g){if(u>1)if(e==16||e==8){for(o=e==16?4:3,--u;u%o;u++)h+="0";for(c=Ip(h,i,e),u=c.length;!c[u-1];--u);for(o=1,h="1.";o<u;o++)h+=r1.charAt(c[o])}else h=h.charAt(0)+"."+h.slice(1);h=h+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)h="0"+h;h="0."+h}else if(++s>u)for(s-=u;s--;)h+="0";else s<u&&(h=h.slice(0,s)+"."+h.slice(s))}h=(e==16?"0x":e==2?"0b":e==8?"0o":"")+h}return r.s<0?"-"+h:h}function _T(r,e){if(r.length>e)return r.length=e,!0}function GB(r){return new this(r).abs()}function WB(r){return new this(r).acos()}function VB(r){return new this(r).acosh()}function qB(r,e){return new this(r).plus(e)}function KB(r){return new this(r).asin()}function QB(r){return new this(r).asinh()}function ZB(r){return new this(r).atan()}function JB(r){return new this(r).atanh()}function eL(r,e){r=new this(r),e=new this(e);var t,n=this.precision,i=this.rounding,s=n+4;return!r.s||!e.s?t=new this(NaN):!r.d&&!e.d?(t=Ci(this,s,1).times(e.s>0?.25:.75),t.s=r.s):!e.d||r.isZero()?(t=e.s<0?Ci(this,n,i):new this(0),t.s=r.s):!r.d||e.isZero()?(t=Ci(this,s,1).times(.5),t.s=r.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(mt(r,e,s,1)),e=Ci(this,s,1),this.precision=n,this.rounding=i,t=r.s<0?t.minus(e):t.plus(e)):t=this.atan(mt(r,e,s,1)),t}function tL(r){return new this(r).cbrt()}function rL(r){return Ie(r=new this(r),r.e+1,2)}function nL(r,e,t){return new this(r).clamp(e,t)}function iL(r){if(!r||typeof r!="object")throw Error(xg+"Object expected");var e,t,n,i=r.defaults===!0,s=["precision",1,Pa,"rounding",0,8,"toExpNeg",-su,0,"toExpPos",0,su,"maxE",0,su,"minE",-su,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],i&&(this[t]=n1[t]),(n=r[t])!==void 0)if(Wr(n)===n&&n>=s[e+1]&&n<=s[e+2])this[t]=n;else throw Error(_a+t+": "+n);if(t="crypto",i&&(this[t]=n1[t]),(n=r[t])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(CC);else this[t]=!1;else throw Error(_a+t+": "+n);return this}function sL(r){return new this(r).cos()}function oL(r){return new this(r).cosh()}function BC(r){var e,t,n;function i(s){var o,a,u,l=this;if(!(l instanceof i))return new i(s);if(l.constructor=i,wT(s)){l.s=s.s,Ue?!s.d||s.e>i.maxE?(l.e=NaN,l.d=null):s.e<i.minE?(l.e=0,l.d=[0]):(l.e=s.e,l.d=s.d.slice()):(l.e=s.e,l.d=s.d?s.d.slice():s.d);return}if(u=typeof s,u==="number"){if(s===0){l.s=1/s<0?-1:1,l.e=0,l.d=[0];return}if(s<0?(s=-s,l.s=-1):l.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Ue?o>i.maxE?(l.e=NaN,l.d=null):o<i.minE?(l.e=0,l.d=[0]):(l.e=o,l.d=[s]):(l.e=o,l.d=[s]);return}else if(s*0!==0){s||(l.s=NaN),l.e=NaN,l.d=null;return}return o1(l,s.toString())}else if(u!=="string")throw Error(_a+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),l.s=-1):(a===43&&(s=s.slice(1)),l.s=1),kC.test(s)?o1(l,s):$B(l,s)}if(i.prototype=oe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=iL,i.clone=BC,i.isDecimal=wT,i.abs=GB,i.acos=WB,i.acosh=VB,i.add=qB,i.asin=KB,i.asinh=QB,i.atan=ZB,i.atanh=JB,i.atan2=eL,i.cbrt=tL,i.ceil=rL,i.clamp=nL,i.cos=sL,i.cosh=oL,i.div=aL,i.exp=lL,i.floor=uL,i.hypot=cL,i.ln=hL,i.log=dL,i.log10=pL,i.log2=fL,i.max=mL,i.min=gL,i.mod=vL,i.mul=yL,i.pow=xL,i.random=_L,i.round=wL,i.sign=bL,i.sin=SL,i.sinh=TL,i.sqrt=EL,i.sub=PL,i.sum=CL,i.tan=AL,i.tanh=kL,i.trunc=IL,r===void 0&&(r={}),r&&r.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<n.length;)r.hasOwnProperty(t=n[e++])||(r[t]=this[t]);return i.config(r),i}function aL(r,e){return new this(r).div(e)}function lL(r){return new this(r).exp()}function uL(r){return Ie(r=new this(r),r.e+1,3)}function cL(){var r,e,t=new this(0);for(Ue=!1,r=0;r<arguments.length;)if(e=new this(arguments[r++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Ue=!0,new this(1/0);t=e}return Ue=!0,t.sqrt()}function wT(r){return r instanceof ut||r&&r.toStringTag===AC||!1}function hL(r){return new this(r).ln()}function dL(r,e){return new this(r).log(e)}function fL(r){return new this(r).log(2)}function pL(r){return new this(r).log(10)}function mL(){return RC(this,arguments,"lt")}function gL(){return RC(this,arguments,"gt")}function vL(r,e){return new this(r).mod(e)}function yL(r,e){return new this(r).mul(e)}function xL(r,e){return new this(r).pow(e)}function _L(r){var e,t,n,i,s=0,o=new this(1),a=[];if(r===void 0?r=this.precision:wn(r,1,Pa),n=Math.ceil(r/Ne),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(n));s<n;)i=e[s],i>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=i%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(n*=4);s<n;)i=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),i>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(i%1e7),s+=4);s=n/4}else throw Error(CC);else for(;s<n;)a[s++]=Math.random()*1e7|0;for(n=a[--s],r%=Ne,n&&r&&(i=lr(10,Ne-r),a[s]=(n/i|0)*i);a[s]===0;s--)a.pop();if(s<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=Ne)a.shift();for(n=1,i=a[0];i>=10;i/=10)n++;n<Ne&&(t-=Ne-n)}return o.e=t,o.d=a,o}function wL(r){return Ie(r=new this(r),r.e+1,this.rounding)}function bL(r){return r=new this(r),r.d?r.d[0]?r.s:0*r.s:r.s||NaN}function SL(r){return new this(r).sin()}function TL(r){return new this(r).sinh()}function EL(r){return new this(r).sqrt()}function PL(r,e){return new this(r).sub(e)}function CL(){var r=0,e=arguments,t=new this(e[r]);for(Ue=!1;t.s&&++r<e.length;)t=t.plus(e[r]);return Ue=!0,Ie(t,this.precision,this.rounding)}function AL(r){return new this(r).tan()}function kL(r){return new this(r).tanh()}function IL(r){return Ie(r=new this(r),r.e+1,1)}oe[Symbol.for("nodejs.util.inspect.custom")]=oe.toString;oe[Symbol.toStringTag]="Decimal";var ut=oe.constructor=BC(n1);rm=new ut(rm);nm=new ut(nm);const ML="geisha",RL=1721188420081,OL={title:ML,assetVersion:RL},bv={},NL={row:3,column:5,paylineMapV2:bv,paylineMap:LB(bv),paylinePathMap:FB(bv),symbolSize:[104,102],symbolFrame:[104,102]};k_("table",NL);const BL={id:2,version:"1.0.0",layoutMap:{l:{safeArea:[0,300,1170,640],displayArea:[0,70,1170,1070]},p:{safeArea:[280,120,630,1050],displayArea:[150,120,870,1050]}}};k_("gameconfig",Object.assign(BL,OL));const LL={spin:{betLevel:new ut(20)}};k_("spin",LL);const _t=B.createContext({});var FL=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},DL=window.device,fe={},a1=[];window.device=fe;var Uh=window.document.documentElement,UL=window.navigator.userAgent.toLowerCase(),bT=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","pov_tv","hbbtv","ce-html"];fe.macos=function(){return Qt("mac")};fe.ios=function(){return fe.iphone()||fe.ipod()||fe.ipad()};fe.iphone=function(){return!fe.windows()&&Qt("iphone")};fe.ipod=function(){return Qt("ipod")};fe.ipad=function(){var r=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;return Qt("ipad")||r};fe.android=function(){return!fe.windows()&&Qt("android")};fe.androidPhone=function(){return fe.android()&&Qt("mobile")};fe.androidTablet=function(){return fe.android()&&!Qt("mobile")};fe.blackberry=function(){return Qt("blackberry")||Qt("bb10")};fe.blackberryPhone=function(){return fe.blackberry()&&!Qt("tablet")};fe.blackberryTablet=function(){return fe.blackberry()&&Qt("tablet")};fe.windows=function(){return Qt("windows")};fe.windowsPhone=function(){return fe.windows()&&Qt("phone")};fe.windowsTablet=function(){return fe.windows()&&Qt("touch")&&!fe.windowsPhone()};fe.fxos=function(){return(Qt("(mobile")||Qt("(tablet"))&&Qt(" rv:")};fe.fxosPhone=function(){return fe.fxos()&&Qt("mobile")};fe.fxosTablet=function(){return fe.fxos()&&Qt("tablet")};fe.meego=function(){return Qt("meego")};fe.cordova=function(){return window.cordova&&location.protocol==="file:"};fe.nodeWebkit=function(){return FL(window.process)==="object"};fe.mobile=function(){return fe.androidPhone()||fe.iphone()||fe.ipod()||fe.windowsPhone()||fe.blackberryPhone()||fe.fxosPhone()||fe.meego()};fe.tablet=function(){return fe.ipad()||fe.androidTablet()||fe.blackberryTablet()||fe.windowsTablet()||fe.fxosTablet()};fe.desktop=function(){return!fe.tablet()&&!fe.mobile()};fe.television=function(){for(var r=0;r<bT.length;){if(Qt(bT[r]))return!0;r++}return!1};fe.portrait=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?R_(screen.orientation.type,"portrait"):fe.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?Math.abs(window.orientation)!==90:window.innerHeight/window.innerWidth>1};fe.landscape=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?R_(screen.orientation.type,"landscape"):fe.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?Math.abs(window.orientation)===90:window.innerHeight/window.innerWidth<1};fe.noConflict=function(){return window.device=DL,this};function R_(r,e){return r.indexOf(e)!==-1}function Qt(r){return R_(UL,r)}function LC(r){return Uh.className.match(new RegExp(r,"i"))}function Jt(r){var e=null;LC(r)||(e=Uh.className.replace(/^\s+|\s+$/g,""),Uh.className=e+" "+r)}function ST(r){LC(r)&&(Uh.className=Uh.className.replace(" "+r,""))}fe.ios()?fe.ipad()?Jt("ios ipad tablet"):fe.iphone()?Jt("ios iphone mobile"):fe.ipod()&&Jt("ios ipod mobile"):fe.macos()?Jt("macos desktop"):fe.android()?fe.androidTablet()?Jt("android tablet"):Jt("android mobile"):fe.blackberry()?fe.blackberryTablet()?Jt("blackberry tablet"):Jt("blackberry mobile"):fe.windows()?fe.windowsTablet()?Jt("windows tablet"):fe.windowsPhone()?Jt("windows mobile"):Jt("windows desktop"):fe.fxos()?fe.fxosTablet()?Jt("fxos tablet"):Jt("fxos mobile"):fe.meego()?Jt("meego mobile"):fe.nodeWebkit()?Jt("node-webkit"):fe.television()?Jt("television"):fe.desktop()&&Jt("desktop");fe.cordova()&&Jt("cordova");function Mp(){fe.landscape()?(ST("portrait"),Jt("landscape"),TT("landscape")):(ST("landscape"),Jt("portrait"),TT("portrait")),FC()}function TT(r){for(var e=0;e<a1.length;e++)a1[e](r)}fe.onChangeOrientation=function(r){typeof r=="function"&&a1.push(r)};var Rp="resize";Object.prototype.hasOwnProperty.call(window,"onorientationchange")&&(Rp="orientationchange");window.addEventListener?window.addEventListener(Rp,Mp,!1):window.attachEvent?window.attachEvent(Rp,Mp):window[Rp]=Mp;Mp();function O_(r){for(var e=0;e<r.length;e++)if(fe[r[e]]())return r[e];return"unknown"}fe.type=O_(["mobile","tablet","desktop"]);fe.os=O_(["ios","iphone","ipad","ipod","android","blackberry","macos","windows","fxos","meego","television"]);function FC(){fe.orientation=O_(["portrait","landscape"])}FC();var N_={exports:{}},Au=typeof Reflect=="object"?Reflect:null,ET=Au&&typeof Au.apply=="function"?Au.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Op;Au&&typeof Au.ownKeys=="function"?Op=Au.ownKeys:Object.getOwnPropertySymbols?Op=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Op=function(e){return Object.getOwnPropertyNames(e)};function jL(r){console&&console.warn&&console.warn(r)}var DC=Number.isNaN||function(e){return e!==e};function pt(){pt.init.call(this)}N_.exports=pt;N_.exports.once=$L;pt.EventEmitter=pt;pt.prototype._events=void 0;pt.prototype._eventsCount=0;pt.prototype._maxListeners=void 0;var PT=10;function bg(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(pt,"defaultMaxListeners",{enumerable:!0,get:function(){return PT},set:function(r){if(typeof r!="number"||r<0||DC(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");PT=r}});pt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};pt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||DC(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function UC(r){return r._maxListeners===void 0?pt.defaultMaxListeners:r._maxListeners}pt.prototype.getMaxListeners=function(){return UC(this)};pt.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")ET(u,this,t);else for(var l=u.length,h=$C(u,l),n=0;n<l;++n)ET(h[n],this,t);return!0};function jC(r,e,t,n){var i,s,o;if(bg(t),s=r._events,s===void 0?(s=r._events=Object.create(null),r._eventsCount=0):(s.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),s=r._events),o=s[e]),o===void 0)o=s[e]=t,++r._eventsCount;else if(typeof o=="function"?o=s[e]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),i=UC(r),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=r,a.type=e,a.count=o.length,jL(a)}return r}pt.prototype.addListener=function(e,t){return jC(this,e,t,!1)};pt.prototype.on=pt.prototype.addListener;pt.prototype.prependListener=function(e,t){return jC(this,e,t,!0)};function XL(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function XC(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=XL.bind(n);return i.listener=t,n.wrapFn=i,i}pt.prototype.once=function(e,t){return bg(t),this.on(e,XC(this,e,t)),this};pt.prototype.prependOnceListener=function(e,t){return bg(t),this.prependListener(e,XC(this,e,t)),this};pt.prototype.removeListener=function(e,t){var n,i,s,o,a;if(bg(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():HL(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};pt.prototype.off=pt.prototype.removeListener;pt.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function HC(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?zL(i):$C(i,i.length)}pt.prototype.listeners=function(e){return HC(this,e,!0)};pt.prototype.rawListeners=function(e){return HC(this,e,!1)};pt.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):zC.call(r,e)};pt.prototype.listenerCount=zC;function zC(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}pt.prototype.eventNames=function(){return this._eventsCount>0?Op(this._events):[]};function $C(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function HL(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function zL(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function $L(r,e){return new Promise(function(t,n){function i(o){r.removeListener(e,s),n(o)}function s(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}YC(r,e,s,{once:!0}),e!=="error"&&YL(r,i,{once:!0})})}function YL(r,e,t){typeof r.on=="function"&&YC(r,"error",e,t)}function YC(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(s){n.once&&r.removeEventListener(e,i),t(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var GL=N_.exports,bl=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(bl||{}),GC=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(GC||{}),l1=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(l1||{}),Pe=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Pe||{}),Ai=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(Ai||{}),de=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(de||{}),ku=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(ku||{}),Te=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(Te||{}),we=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(we||{}),ki=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(ki||{}),oi=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(oi||{}),li=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(li||{}),$r=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))($r||{}),ms=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(ms||{}),B_=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(B_||{}),ri=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(ri||{}),ar=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(ar||{}),er=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(er||{}),Ss=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Ss||{});const WL={createCanvas:(r,e)=>{const t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},_e={ADAPTER:WL,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Sv=/iPhone/i,CT=/iPod/i,AT=/iPad/i,kT=/\biOS-universal(?:.+)Mac\b/i,Tv=/\bAndroid(?:.+)Mobile\b/i,IT=/Android/i,zl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Cf=/Silk/i,zs=/Windows Phone/i,MT=/\bWindows(?:.+)ARM\b/i,RT=/BlackBerry/i,OT=/BB10/i,NT=/Opera Mini/i,BT=/\b(CriOS|Chrome)(?:.+)Mobile/i,LT=/Mobile(?:.+)Firefox\b/i,FT=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function VL(r){return function(e){return e.test(r)}}function DT(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=VL(t),s={apple:{phone:i(Sv)&&!i(zs),ipod:i(CT),tablet:!i(Sv)&&(i(AT)||FT(e))&&!i(zs),universal:i(kT),device:(i(Sv)||i(CT)||i(AT)||i(kT)||FT(e))&&!i(zs)},amazon:{phone:i(zl),tablet:!i(zl)&&i(Cf),device:i(zl)||i(Cf)},android:{phone:!i(zs)&&i(zl)||!i(zs)&&i(Tv),tablet:!i(zs)&&!i(zl)&&!i(Tv)&&(i(Cf)||i(IT)),device:!i(zs)&&(i(zl)||i(Cf)||i(Tv)||i(IT))||i(/\bokhttp\b/i)},windows:{phone:i(zs),tablet:i(MT),device:i(zs)||i(MT)},other:{blackberry:i(RT),blackberry10:i(OT),opera:i(NT),firefox:i(LT),chrome:i(BT),device:i(RT)||i(OT)||i(NT)||i(LT)||i(BT)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const qL=DT.default??DT,ni=qL(globalThis.navigator);_e.RETINA_PREFIX=/@([0-9\.]+)x/;_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var WC={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(u,l,h){this.fn=u,this.context=l,this.once=h||!1}function s(u,l,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var p=new i(h,c||u,d),g=t?t+l:l;return u._events[g]?u._events[g].fn?u._events[g]=[u._events[g],p]:u._events[g].push(p):(u._events[g]=p,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],h,c;if(this._eventsCount===0)return l;for(c in h=this._events)e.call(h,c)&&l.push(t?c.slice(1):c);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(h)):l},a.prototype.listeners=function(l){var h=t?t+l:l,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,p=c.length,g=new Array(p);d<p;d++)g[d]=c[d].fn;return g},a.prototype.listenerCount=function(l){var h=t?t+l:l,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(l,h,c,d,p,g){var v=t?t+l:l;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,w,_;if(x.fn){switch(x.once&&this.removeListener(l,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,c),!0;case 4:return x.fn.call(x.context,h,c,d),!0;case 5:return x.fn.call(x.context,h,c,d,p),!0;case 6:return x.fn.call(x.context,h,c,d,p,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];x.fn.apply(x.context,w)}else{var S=x.length,I;for(_=0;_<S;_++)switch(x[_].once&&this.removeListener(l,x[_].fn,void 0,!0),y){case 1:x[_].fn.call(x[_].context);break;case 2:x[_].fn.call(x[_].context,h);break;case 3:x[_].fn.call(x[_].context,h,c);break;case 4:x[_].fn.call(x[_].context,h,c,d);break;default:if(!w)for(I=1,w=new Array(y-1);I<y;I++)w[I-1]=arguments[I];x[_].fn.apply(x[_].context,w)}}return!0},a.prototype.on=function(l,h,c){return s(this,l,h,c,!1)},a.prototype.once=function(l,h,c){return s(this,l,h,c,!0)},a.prototype.removeListener=function(l,h,c,d){var p=t?t+l:l;if(!this._events[p])return this;if(!h)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===h&&(!d||g.once)&&(!c||g.context===c)&&o(this,p);else{for(var v=0,x=[],y=g.length;v<y;v++)(g[v].fn!==h||d&&!g[v].once||c&&g[v].context!==c)&&x.push(g[v]);x.length?this._events[p]=x.length===1?x[0]:x:o(this,p)}return this},a.prototype.removeAllListeners=function(l){var h;return l?(h=t?t+l:l,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(WC);var KL=WC.exports;const md=dd(KL);var L_={exports:{}};L_.exports=Sg;L_.exports.default=Sg;function Sg(r,e,t){t=t||2;var n=e&&e.length,i=n?e[0]*t:r.length,s=VC(r,0,i,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,u,l,h,c,d,p;if(n&&(s=tF(r,e,s,t)),r.length>80*t){a=l=r[0],u=h=r[1];for(var g=t;g<i;g+=t)c=r[g],d=r[g+1],c<a&&(a=c),d<u&&(u=d),c>l&&(l=c),d>h&&(h=d);p=Math.max(l-a,h-u),p=p!==0?32767/p:0}return jh(s,o,t,a,u,p,0),o}function VC(r,e,t,n,i){var s,o;if(i===h1(r,e,t,n)>0)for(s=e;s<t;s+=n)o=UT(s,r[s],r[s+1],o);else for(s=t-n;s>=e;s-=n)o=UT(s,r[s],r[s+1],o);return o&&Tg(o,o.next)&&(Hh(o),o=o.next),o}function dl(r,e){if(!r)return r;e||(e=r);var t=r,n;do if(n=!1,!t.steiner&&(Tg(t,t.next)||Ft(t.prev,t,t.next)===0)){if(Hh(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function jh(r,e,t,n,i,s,o){if(r){!o&&s&&oF(r,n,i,s);for(var a=r,u,l;r.prev!==r.next;){if(u=r.prev,l=r.next,s?ZL(r,n,i,s):QL(r)){e.push(u.i/t|0),e.push(r.i/t|0),e.push(l.i/t|0),Hh(r),r=l.next,a=l.next;continue}if(r=l,r===a){o?o===1?(r=JL(dl(r),e,t),jh(r,e,t,n,i,s,2)):o===2&&eF(r,e,t,n,i,s):jh(dl(r),e,t,n,i,s,1);break}}}}function QL(r){var e=r.prev,t=r,n=r.next;if(Ft(e,t,n)>=0)return!1;for(var i=e.x,s=t.x,o=n.x,a=e.y,u=t.y,l=n.y,h=i<s?i<o?i:o:s<o?s:o,c=a<u?a<l?a:l:u<l?u:l,d=i>s?i>o?i:o:s>o?s:o,p=a>u?a>l?a:l:u>l?u:l,g=n.next;g!==e;){if(g.x>=h&&g.x<=d&&g.y>=c&&g.y<=p&&ou(i,a,s,u,o,l,g.x,g.y)&&Ft(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function ZL(r,e,t,n){var i=r.prev,s=r,o=r.next;if(Ft(i,s,o)>=0)return!1;for(var a=i.x,u=s.x,l=o.x,h=i.y,c=s.y,d=o.y,p=a<u?a<l?a:l:u<l?u:l,g=h<c?h<d?h:d:c<d?c:d,v=a>u?a>l?a:l:u>l?u:l,x=h>c?h>d?h:d:c>d?c:d,y=u1(p,g,e,t,n),w=u1(v,x,e,t,n),_=r.prevZ,S=r.nextZ;_&&_.z>=y&&S&&S.z<=w;){if(_.x>=p&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&ou(a,h,u,c,l,d,_.x,_.y)&&Ft(_.prev,_,_.next)>=0||(_=_.prevZ,S.x>=p&&S.x<=v&&S.y>=g&&S.y<=x&&S!==i&&S!==o&&ou(a,h,u,c,l,d,S.x,S.y)&&Ft(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;_&&_.z>=y;){if(_.x>=p&&_.x<=v&&_.y>=g&&_.y<=x&&_!==i&&_!==o&&ou(a,h,u,c,l,d,_.x,_.y)&&Ft(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;S&&S.z<=w;){if(S.x>=p&&S.x<=v&&S.y>=g&&S.y<=x&&S!==i&&S!==o&&ou(a,h,u,c,l,d,S.x,S.y)&&Ft(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function JL(r,e,t){var n=r;do{var i=n.prev,s=n.next.next;!Tg(i,s)&&qC(i,n,n.next,s)&&Xh(i,s)&&Xh(s,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Hh(n),Hh(n.next),n=r=s),n=n.next}while(n!==r);return dl(n)}function eF(r,e,t,n,i,s){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&uF(o,a)){var u=KC(o,a);o=dl(o,o.next),u=dl(u,u.next),jh(o,e,t,n,i,s,0),jh(u,e,t,n,i,s,0);return}a=a.next}o=o.next}while(o!==r)}function tF(r,e,t,n){var i=[],s,o,a,u,l;for(s=0,o=e.length;s<o;s++)a=e[s]*n,u=s<o-1?e[s+1]*n:r.length,l=VC(r,a,u,n,!1),l===l.next&&(l.steiner=!0),i.push(lF(l));for(i.sort(rF),s=0;s<i.length;s++)t=nF(i[s],t);return t}function rF(r,e){return r.x-e.x}function nF(r,e){var t=iF(r,e);if(!t)return e;var n=KC(t,r);return dl(n,n.next),dl(t,t.next)}function iF(r,e){var t=e,n=r.x,i=r.y,s=-1/0,o;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===n))return o}t=t.next}while(t!==e);if(!o)return null;var u=o,l=o.x,h=o.y,c=1/0,d;t=o;do n>=t.x&&t.x>=l&&n!==t.x&&ou(i<h?n:s,i,l,h,i<h?s:n,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(n-t.x),Xh(t,r)&&(d<c||d===c&&(t.x>o.x||t.x===o.x&&sF(o,t)))&&(o=t,c=d)),t=t.next;while(t!==u);return o}function sF(r,e){return Ft(r.prev,r,e.prev)<0&&Ft(e.next,r,r.next)<0}function oF(r,e,t,n){var i=r;do i.z===0&&(i.z=u1(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,aF(i)}function aF(r){var e,t,n,i,s,o,a,u,l=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,n=t,a=0,e=0;e<l&&(a++,n=n.nextZ,!!n);e++);for(u=l;a>0||u>0&&n;)a!==0&&(u===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:r=i,i.prevZ=s,s=i;t=n}s.nextZ=null,l*=2}while(o>1);return r}function u1(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function lF(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function ou(r,e,t,n,i,s,o,a){return(i-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(n-a)}function uF(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!cF(r,e)&&(Xh(r,e)&&Xh(e,r)&&hF(r,e)&&(Ft(r.prev,r,e.prev)||Ft(r,e.prev,e))||Tg(r,e)&&Ft(r.prev,r,r.next)>0&&Ft(e.prev,e,e.next)>0)}function Ft(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function Tg(r,e){return r.x===e.x&&r.y===e.y}function qC(r,e,t,n){var i=kf(Ft(r,e,t)),s=kf(Ft(r,e,n)),o=kf(Ft(t,n,r)),a=kf(Ft(t,n,e));return!!(i!==s&&o!==a||i===0&&Af(r,t,e)||s===0&&Af(r,n,e)||o===0&&Af(t,r,n)||a===0&&Af(t,e,n))}function Af(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function kf(r){return r>0?1:r<0?-1:0}function cF(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&qC(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Xh(r,e){return Ft(r.prev,r,r.next)<0?Ft(r,e,r.next)>=0&&Ft(r,r.prev,e)>=0:Ft(r,e,r.prev)<0||Ft(r,r.next,e)<0}function hF(r,e){var t=r,n=!1,i=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function KC(r,e){var t=new c1(r.i,r.x,r.y),n=new c1(e.i,e.x,e.y),i=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function UT(r,e,t,n){var i=new c1(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Hh(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function c1(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Sg.deviation=function(r,e,t,n){var i=e&&e.length,s=i?e[0]*t:r.length,o=Math.abs(h1(r,0,s,t));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*t,h=a<u-1?e[a+1]*t:r.length;o-=Math.abs(h1(r,l,h,t))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,p=n[a+1]*t,g=n[a+2]*t;c+=Math.abs((r[d]-r[g])*(r[p+1]-r[d+1])-(r[d]-r[p])*(r[g+1]-r[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function h1(r,e,t,n){for(var i=0,s=e,o=t-n;s<t;s+=n)i+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return i}Sg.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,i=0;i<r.length;i++){for(var s=0;s<r[i].length;s++)for(var o=0;o<e;o++)t.vertices.push(r[i][s][o]);i>0&&(n+=r[i-1].length,t.holes.push(n))}return t};var dF=L_.exports;const fF=dd(dF);var sm={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */sm.exports;(function(r,e){(function(t){var n=e&&!e.nodeType&&e,i=r&&!r.nodeType&&r,s=typeof to=="object"&&to;(s.global===s||s.window===s||s.self===s)&&(t=s);var o,a=2147483647,u=36,l=1,h=26,c=38,d=700,p=72,g=128,v="-",x=/^xn--/,y=/[^\x20-\x7E]/,w=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=u-l,I=Math.floor,A=String.fromCharCode,k;function M(z){throw new RangeError(_[z])}function O(z,V){for(var Z=z.length,re=[];Z--;)re[Z]=V(z[Z]);return re}function F(z,V){var Z=z.split("@"),re="";Z.length>1&&(re=Z[0]+"@",z=Z[1]),z=z.replace(w,".");var ce=z.split("."),xe=O(ce,V).join(".");return re+xe}function U(z){for(var V=[],Z=0,re=z.length,ce,xe;Z<re;)ce=z.charCodeAt(Z++),ce>=55296&&ce<=56319&&Z<re?(xe=z.charCodeAt(Z++),(xe&64512)==56320?V.push(((ce&1023)<<10)+(xe&1023)+65536):(V.push(ce),Z--)):V.push(ce);return V}function H(z){return O(z,function(V){var Z="";return V>65535&&(V-=65536,Z+=A(V>>>10&1023|55296),V=56320|V&1023),Z+=A(V),Z}).join("")}function L(z){return z-48<10?z-22:z-65<26?z-65:z-97<26?z-97:u}function N(z,V){return z+22+75*(z<26)-((V!=0)<<5)}function j(z,V,Z){var re=0;for(z=Z?I(z/d):z>>1,z+=I(z/V);z>S*h>>1;re+=u)z=I(z/S);return I(re+(S+1)*z/(z+c))}function Y(z){var V=[],Z=z.length,re,ce=0,xe=g,Re=p,Le,ze,We,He,Fe,at,Ze,Tr,Br;for(Le=z.lastIndexOf(v),Le<0&&(Le=0),ze=0;ze<Le;++ze)z.charCodeAt(ze)>=128&&M("not-basic"),V.push(z.charCodeAt(ze));for(We=Le>0?Le+1:0;We<Z;){for(He=ce,Fe=1,at=u;We>=Z&&M("invalid-input"),Ze=L(z.charCodeAt(We++)),(Ze>=u||Ze>I((a-ce)/Fe))&&M("overflow"),ce+=Ze*Fe,Tr=at<=Re?l:at>=Re+h?h:at-Re,!(Ze<Tr);at+=u)Br=u-Tr,Fe>I(a/Br)&&M("overflow"),Fe*=Br;re=V.length+1,Re=j(ce-He,re,He==0),I(ce/re)>a-xe&&M("overflow"),xe+=I(ce/re),ce%=re,V.splice(ce++,0,xe)}return H(V)}function K(z){var V,Z,re,ce,xe,Re,Le,ze,We,He,Fe,at=[],Ze,Tr,Br,Wi;for(z=U(z),Ze=z.length,V=g,Z=0,xe=p,Re=0;Re<Ze;++Re)Fe=z[Re],Fe<128&&at.push(A(Fe));for(re=ce=at.length,ce&&at.push(v);re<Ze;){for(Le=a,Re=0;Re<Ze;++Re)Fe=z[Re],Fe>=V&&Fe<Le&&(Le=Fe);for(Tr=re+1,Le-V>I((a-Z)/Tr)&&M("overflow"),Z+=(Le-V)*Tr,V=Le,Re=0;Re<Ze;++Re)if(Fe=z[Re],Fe<V&&++Z>a&&M("overflow"),Fe==V){for(ze=Z,We=u;He=We<=xe?l:We>=xe+h?h:We-xe,!(ze<He);We+=u)Wi=ze-He,Br=u-He,at.push(A(N(He+Wi%Br,0))),ze=I(Wi/Br);at.push(A(N(ze,0))),xe=j(Z,Tr,re==ce),Z=0,++re}++Z,++V}return at.join("")}function X(z){return F(z,function(V){return x.test(V)?Y(V.slice(4).toLowerCase()):V})}function W(z){return F(z,function(V){return y.test(V)?"xn--"+K(V):V})}if(o={version:"1.4.1",ucs2:{decode:U,encode:H},decode:Y,encode:K,toASCII:W,toUnicode:X},n&&i)if(r.exports==n)i.exports=o;else for(k in o)o.hasOwnProperty(k)&&(n[k]=o[k]);else t.punycode=o})(to)})(sm,sm.exports);var pF=sm.exports,mF=Error,gF=EvalError,vF=RangeError,yF=ReferenceError,QC=SyntaxError,gd=TypeError,xF=URIError,_F=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0},jT=typeof Symbol<"u"&&Symbol,wF=_F,bF=function(){return typeof jT!="function"||typeof Symbol!="function"||typeof jT("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:wF()},Ev={__proto__:null,foo:{}},SF=Object,TF=function(){return{__proto__:Ev}.foo===Ev.foo&&!(Ev instanceof SF)},EF="Function.prototype.bind called on incompatible ",PF=Object.prototype.toString,CF=Math.max,AF="[object Function]",XT=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var s=0;s<t.length;s+=1)n[s+e.length]=t[s];return n},kF=function(e,t){for(var n=[],i=t||0,s=0;i<e.length;i+=1,s+=1)n[s]=e[i];return n},IF=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},MF=function(e){var t=this;if(typeof t!="function"||PF.apply(t)!==AF)throw new TypeError(EF+t);for(var n=kF(arguments,1),i,s=function(){if(this instanceof i){var h=t.apply(this,XT(n,arguments));return Object(h)===h?h:this}return t.apply(e,XT(n,arguments))},o=CF(0,t.length-n.length),a=[],u=0;u<o;u++)a[u]="$"+u;if(i=Function("binder","return function ("+IF(a,",")+"){ return binder.apply(this,arguments); }")(s),t.prototype){var l=function(){};l.prototype=t.prototype,i.prototype=new l,l.prototype=null}return i},RF=MF,F_=Function.prototype.bind||RF,OF=Function.prototype.call,NF=Object.prototype.hasOwnProperty,BF=F_,LF=BF.call(OF,NF),Ke,FF=mF,DF=gF,UF=vF,jF=yF,Qu=QC,Iu=gd,XF=xF,ZC=Function,Pv=function(r){try{return ZC('"use strict"; return ('+r+").constructor;")()}catch{}},il=Object.getOwnPropertyDescriptor;if(il)try{il({},"")}catch{il=null}var Cv=function(){throw new Iu},HF=il?function(){try{return arguments.callee,Cv}catch{try{return il(arguments,"callee").get}catch{return Cv}}}():Cv,$l=bF(),zF=TF(),xr=Object.getPrototypeOf||(zF?function(r){return r.__proto__}:null),Ql={},$F=typeof Uint8Array>"u"||!xr?Ke:xr(Uint8Array),sl={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":$l&&xr?xr([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":Ql,"%AsyncGenerator%":Ql,"%AsyncGeneratorFunction%":Ql,"%AsyncIteratorPrototype%":Ql,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ke:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ke:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":FF,"%eval%":eval,"%EvalError%":DF,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":ZC,"%GeneratorFunction%":Ql,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$l&&xr?xr(xr([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$l||!xr?Ke:xr(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":UF,"%ReferenceError%":jF,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$l||!xr?Ke:xr(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$l&&xr?xr(""[Symbol.iterator]()):Ke,"%Symbol%":$l?Symbol:Ke,"%SyntaxError%":Qu,"%ThrowTypeError%":HF,"%TypedArray%":$F,"%TypeError%":Iu,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":XF,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet};if(xr)try{null.error}catch(r){var YF=xr(xr(r));sl["%Error.prototype%"]=YF}var GF=function r(e){var t;if(e==="%AsyncFunction%")t=Pv("async function () {}");else if(e==="%GeneratorFunction%")t=Pv("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Pv("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&xr&&(t=xr(i.prototype))}return sl[e]=t,t},HT={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},vd=F_,om=LF,WF=vd.call(Function.call,Array.prototype.concat),VF=vd.call(Function.apply,Array.prototype.splice),zT=vd.call(Function.call,String.prototype.replace),am=vd.call(Function.call,String.prototype.slice),qF=vd.call(Function.call,RegExp.prototype.exec),KF=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,QF=/\\(\\)?/g,ZF=function(e){var t=am(e,0,1),n=am(e,-1);if(t==="%"&&n!=="%")throw new Qu("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Qu("invalid intrinsic syntax, expected opening `%`");var i=[];return zT(e,KF,function(s,o,a,u){i[i.length]=a?zT(u,QF,"$1"):o||s}),i},JF=function(e,t){var n=e,i;if(om(HT,n)&&(i=HT[n],n="%"+i[0]+"%"),om(sl,n)){var s=sl[n];if(s===Ql&&(s=GF(n)),typeof s>"u"&&!t)throw new Iu("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Qu("intrinsic "+e+" does not exist!")},vc=function(e,t){if(typeof e!="string"||e.length===0)throw new Iu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Iu('"allowMissing" argument must be a boolean');if(qF(/^%?[^%]*%?$/,e)===null)throw new Qu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=ZF(e),i=n.length>0?n[0]:"",s=JF("%"+i+"%",t),o=s.name,a=s.value,u=!1,l=s.alias;l&&(i=l[0],VF(n,WF([0,1],l)));for(var h=1,c=!0;h<n.length;h+=1){var d=n[h],p=am(d,0,1),g=am(d,-1);if((p==='"'||p==="'"||p==="`"||g==='"'||g==="'"||g==="`")&&p!==g)throw new Qu("property names with quotes must have matching quotes");if((d==="constructor"||!c)&&(u=!0),i+="."+d,o="%"+i+"%",om(sl,o))a=sl[o];else if(a!=null){if(!(d in a)){if(!t)throw new Iu("base intrinsic for "+e+" exists, but the property is not available.");return}if(il&&h+1>=n.length){var v=il(a,d);c=!!v,c&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[d]}else c=om(a,d),a=a[d];c&&!u&&(sl[o]=a)}}return a},JC={exports:{}},Av,$T;function D_(){if($T)return Av;$T=1;var r=vc,e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Av=e,Av}var eD=vc,Np=eD("%Object.getOwnPropertyDescriptor%",!0);if(Np)try{Np([],"length")}catch{Np=null}var eA=Np,YT=D_(),tD=QC,Yl=gd,GT=eA,rD=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Yl("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Yl("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Yl("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Yl("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Yl("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Yl("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,u=!!GT&&GT(e,t);if(YT)YT(e,t,{configurable:o===null&&u?u.configurable:!o,enumerable:i===null&&u?u.enumerable:!i,value:n,writable:s===null&&u?u.writable:!s});else if(a||!i&&!s&&!o)e[t]=n;else throw new tD("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},d1=D_(),tA=function(){return!!d1};tA.hasArrayLengthDefineBug=function(){if(!d1)return null;try{return d1([],"length",{value:1}).length!==1}catch{return!0}};var nD=tA,iD=vc,WT=rD,sD=nD(),VT=eA,qT=gd,oD=iD("%Math.floor%"),aD=function(e,t){if(typeof e!="function")throw new qT("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||oD(t)!==t)throw new qT("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&VT){var o=VT(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!n)&&(sD?WT(e,"length",t,!0,!0):WT(e,"length",t)),e};(function(r){var e=F_,t=vc,n=aD,i=gd,s=t("%Function.prototype.apply%"),o=t("%Function.prototype.call%"),a=t("%Reflect.apply%",!0)||e.call(o,s),u=D_(),l=t("%Math.max%");r.exports=function(d){if(typeof d!="function")throw new i("a function is required");var p=a(e,o,arguments);return n(p,1+l(0,d.length-(arguments.length-1)),!0)};var h=function(){return a(e,s,arguments)};u?u(r.exports,"apply",{value:h}):r.exports.apply=h})(JC);var lD=JC.exports,rA=vc,nA=lD,uD=nA(rA("String.prototype.indexOf")),cD=function(e,t){var n=rA(e,!!t);return typeof n=="function"&&uD(e,".prototype.")>-1?nA(n):n};const hD={},dD=Object.freeze(Object.defineProperty({__proto__:null,default:hD},Symbol.toStringTag,{value:"Module"})),fD=uC(dD);var U_=typeof Map=="function"&&Map.prototype,kv=Object.getOwnPropertyDescriptor&&U_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,lm=U_&&kv&&typeof kv.get=="function"?kv.get:null,KT=U_&&Map.prototype.forEach,j_=typeof Set=="function"&&Set.prototype,Iv=Object.getOwnPropertyDescriptor&&j_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,um=j_&&Iv&&typeof Iv.get=="function"?Iv.get:null,QT=j_&&Set.prototype.forEach,pD=typeof WeakMap=="function"&&WeakMap.prototype,xh=pD?WeakMap.prototype.has:null,mD=typeof WeakSet=="function"&&WeakSet.prototype,_h=mD?WeakSet.prototype.has:null,gD=typeof WeakRef=="function"&&WeakRef.prototype,ZT=gD?WeakRef.prototype.deref:null,vD=Boolean.prototype.valueOf,yD=Object.prototype.toString,xD=Function.prototype.toString,_D=String.prototype.match,X_=String.prototype.slice,ra=String.prototype.replace,wD=String.prototype.toUpperCase,JT=String.prototype.toLowerCase,iA=RegExp.prototype.test,eE=Array.prototype.concat,gs=Array.prototype.join,bD=Array.prototype.slice,tE=Math.floor,f1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Mv=Object.getOwnPropertySymbols,p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Vr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Zu||!0)?Symbol.toStringTag:null,sA=Object.prototype.propertyIsEnumerable,rE=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function nE(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||iA.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-tE(-r):tE(r);if(n!==r){var i=String(n),s=X_.call(e,i.length+1);return ra.call(i,t,"$&_")+"."+ra.call(ra.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ra.call(e,t,"$&_")}var m1=fD,iE=m1.custom,sE=aA(iE)?iE:null,SD=function r(e,t,n,i){var s=t||{};if(Yo(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Yo(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Yo(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Yo(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Yo(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return uA(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var u=String(e);return a?nE(e,u):u}if(typeof e=="bigint"){var l=String(e)+"n";return a?nE(e,l):l}var h=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return g1(e)?"[Array]":"[Object]";var c=XD(s,n);if(typeof i>"u")i=[];else if(lA(i,e)>=0)return"[Circular]";function d(L,N,j){if(N&&(i=bD.call(i),i.push(N)),j){var Y={depth:s.depth};return Yo(s,"quoteStyle")&&(Y.quoteStyle=s.quoteStyle),r(L,Y,n+1,i)}return r(L,s,n+1,i)}if(typeof e=="function"&&!oE(e)){var p=RD(e),g=If(e,d);return"[Function"+(p?": "+p:" (anonymous)")+"]"+(g.length>0?" { "+gs.call(g,", ")+" }":"")}if(aA(e)){var v=Zu?ra.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):p1.call(e);return typeof e=="object"&&!Zu?Gc(v):v}if(DD(e)){for(var x="<"+JT.call(String(e.nodeName)),y=e.attributes||[],w=0;w<y.length;w++)x+=" "+y[w].name+"="+oA(TD(y[w].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+JT.call(String(e.nodeName))+">",x}if(g1(e)){if(e.length===0)return"[]";var _=If(e,d);return c&&!jD(_)?"["+v1(_,c)+"]":"[ "+gs.call(_,", ")+" ]"}if(PD(e)){var S=If(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!sA.call(e,"cause")?"{ ["+String(e)+"] "+gs.call(eE.call("[cause]: "+d(e.cause),S),", ")+" }":S.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+gs.call(S,", ")+" }"}if(typeof e=="object"&&o){if(sE&&typeof e[sE]=="function"&&m1)return m1(e,{depth:h-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(OD(e)){var I=[];return KT&&KT.call(e,function(L,N){I.push(d(N,e,!0)+" => "+d(L,e))}),aE("Map",lm.call(e),I,c)}if(LD(e)){var A=[];return QT&&QT.call(e,function(L){A.push(d(L,e))}),aE("Set",um.call(e),A,c)}if(ND(e))return Rv("WeakMap");if(FD(e))return Rv("WeakSet");if(BD(e))return Rv("WeakRef");if(AD(e))return Gc(d(Number(e)));if(ID(e))return Gc(d(f1.call(e)));if(kD(e))return Gc(vD.call(e));if(CD(e))return Gc(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===to)return"{ [object globalThis] }";if(!ED(e)&&!oE(e)){var k=If(e,d),M=rE?rE(e)===Object.prototype:e instanceof Object||e.constructor===Object,O=e instanceof Object?"":"null prototype",F=!M&&Vr&&Object(e)===e&&Vr in e?X_.call(Ca(e),8,-1):O?"Object":"",U=M||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",H=U+(F||O?"["+gs.call(eE.call([],F||[],O||[]),": ")+"] ":"");return k.length===0?H+"{}":c?H+"{"+v1(k,c)+"}":H+"{ "+gs.call(k,", ")+" }"}return String(e)};function oA(r,e,t){var n=(t.quoteStyle||e)==="double"?'"':"'";return n+r+n}function TD(r){return ra.call(String(r),/"/g,"&quot;")}function g1(r){return Ca(r)==="[object Array]"&&(!Vr||!(typeof r=="object"&&Vr in r))}function ED(r){return Ca(r)==="[object Date]"&&(!Vr||!(typeof r=="object"&&Vr in r))}function oE(r){return Ca(r)==="[object RegExp]"&&(!Vr||!(typeof r=="object"&&Vr in r))}function PD(r){return Ca(r)==="[object Error]"&&(!Vr||!(typeof r=="object"&&Vr in r))}function CD(r){return Ca(r)==="[object String]"&&(!Vr||!(typeof r=="object"&&Vr in r))}function AD(r){return Ca(r)==="[object Number]"&&(!Vr||!(typeof r=="object"&&Vr in r))}function kD(r){return Ca(r)==="[object Boolean]"&&(!Vr||!(typeof r=="object"&&Vr in r))}function aA(r){if(Zu)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!p1)return!1;try{return p1.call(r),!0}catch{}return!1}function ID(r){if(!r||typeof r!="object"||!f1)return!1;try{return f1.call(r),!0}catch{}return!1}var MD=Object.prototype.hasOwnProperty||function(r){return r in this};function Yo(r,e){return MD.call(r,e)}function Ca(r){return yD.call(r)}function RD(r){if(r.name)return r.name;var e=_D.call(xD.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function lA(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function OD(r){if(!lm||!r||typeof r!="object")return!1;try{lm.call(r);try{um.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function ND(r){if(!xh||!r||typeof r!="object")return!1;try{xh.call(r,xh);try{_h.call(r,_h)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function BD(r){if(!ZT||!r||typeof r!="object")return!1;try{return ZT.call(r),!0}catch{}return!1}function LD(r){if(!um||!r||typeof r!="object")return!1;try{um.call(r);try{lm.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function FD(r){if(!_h||!r||typeof r!="object")return!1;try{_h.call(r,_h);try{xh.call(r,xh)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function DD(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function uA(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return uA(X_.call(r,0,e.maxStringLength),e)+n}var i=ra.call(ra.call(r,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,UD);return oA(i,"single",e)}function UD(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+wD.call(e.toString(16))}function Gc(r){return"Object("+r+")"}function Rv(r){return r+" { ? }"}function aE(r,e,t,n){var i=n?v1(t,n):gs.call(t,", ");return r+" ("+e+") {"+i+"}"}function jD(r){for(var e=0;e<r.length;e++)if(lA(r[e],`
`)>=0)return!1;return!0}function XD(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=gs.call(Array(r.indent+1)," ");else return null;return{base:t,prev:gs.call(Array(e+1),t)}}function v1(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+gs.call(r,","+t)+`
`+e.prev}function If(r,e){var t=g1(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=Yo(r,i)?e(r[i],r):""}var s=typeof Mv=="function"?Mv(r):[],o;if(Zu){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var u in r)Yo(r,u)&&(t&&String(Number(u))===u&&u<r.length||Zu&&o["$"+u]instanceof Symbol||(iA.call(/[^\w$]/,u)?n.push(e(u,r)+": "+e(r[u],r)):n.push(u+": "+e(r[u],r))));if(typeof Mv=="function")for(var l=0;l<s.length;l++)sA.call(r,s[l])&&n.push("["+e(s[l])+"]: "+e(r[s[l]],r));return n}var cA=vc,yc=cD,HD=SD,zD=gd,Mf=cA("%WeakMap%",!0),Rf=cA("%Map%",!0),$D=yc("WeakMap.prototype.get",!0),YD=yc("WeakMap.prototype.set",!0),GD=yc("WeakMap.prototype.has",!0),WD=yc("Map.prototype.get",!0),VD=yc("Map.prototype.set",!0),qD=yc("Map.prototype.has",!0),H_=function(r,e){for(var t=r,n;(n=t.next)!==null;t=n)if(n.key===e)return t.next=n.next,n.next=r.next,r.next=n,n},KD=function(r,e){var t=H_(r,e);return t&&t.value},QD=function(r,e,t){var n=H_(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},ZD=function(r,e){return!!H_(r,e)},JD=function(){var e,t,n,i={assert:function(s){if(!i.has(s))throw new zD("Side channel does not contain "+HD(s))},get:function(s){if(Mf&&s&&(typeof s=="object"||typeof s=="function")){if(e)return $D(e,s)}else if(Rf){if(t)return WD(t,s)}else if(n)return KD(n,s)},has:function(s){if(Mf&&s&&(typeof s=="object"||typeof s=="function")){if(e)return GD(e,s)}else if(Rf){if(t)return qD(t,s)}else if(n)return ZD(n,s);return!1},set:function(s,o){Mf&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Mf),YD(e,s,o)):Rf?(t||(t=new Rf),VD(t,s,o)):(n||(n={key:{},next:null}),QD(n,s,o))}};return i},e5=String.prototype.replace,t5=/%20/g,Ov={RFC1738:"RFC1738",RFC3986:"RFC3986"},z_={default:Ov.RFC3986,formatters:{RFC1738:function(r){return e5.call(r,t5,"+")},RFC3986:function(r){return String(r)}},RFC1738:Ov.RFC1738,RFC3986:Ov.RFC3986},r5=z_,Nv=Object.prototype.hasOwnProperty,Ja=Array.isArray,is=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),n5=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Ja(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);t.obj[t.prop]=i}}},hA=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},i5=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(Ja(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Nv.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return Ja(e)&&!Ja(t)&&(i=hA(e,n)),Ja(e)&&Ja(t)?(t.forEach(function(s,o){if(Nv.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=r(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(t).reduce(function(s,o){var a=t[o];return Nv.call(s,o)?s[o]=r(s[o],a,n):s[o]=a,s},i)},s5=function(e,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},e)},o5=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},a5=function(e,t,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",u=0;u<o.length;++u){var l=o.charCodeAt(u);if(l===45||l===46||l===95||l===126||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||s===r5.RFC1738&&(l===40||l===41)){a+=o.charAt(u);continue}if(l<128){a=a+is[l];continue}if(l<2048){a=a+(is[192|l>>6]+is[128|l&63]);continue}if(l<55296||l>=57344){a=a+(is[224|l>>12]+is[128|l>>6&63]+is[128|l&63]);continue}u+=1,l=65536+((l&1023)<<10|o.charCodeAt(u)&1023),a+=is[240|l>>18]+is[128|l>>12&63]+is[128|l>>6&63]+is[128|l&63]}return a},l5=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var s=t[i],o=s.obj[s.prop],a=Object.keys(o),u=0;u<a.length;++u){var l=a[u],h=o[l];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(t.push({obj:o,prop:l}),n.push(h))}return n5(t),e},u5=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},c5=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},h5=function(e,t){return[].concat(e,t)},d5=function(e,t){if(Ja(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)},dA={arrayToObject:hA,assign:s5,combine:h5,compact:l5,decode:o5,encode:a5,isBuffer:c5,isRegExp:u5,maybeMap:d5,merge:i5},fA=JD,Bp=dA,wh=z_,f5=Object.prototype.hasOwnProperty,pA={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},ps=Array.isArray,p5=Array.prototype.push,mA=function(r,e){p5.apply(r,ps(e)?e:[e])},m5=Date.prototype.toISOString,lE=wh.default,or={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Bp.encode,encodeValuesOnly:!1,format:lE,formatter:wh.formatters[lE],indices:!1,serializeDate:function(e){return m5.call(e)},skipNulls:!1,strictNullHandling:!1},g5=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Bv={},v5=function r(e,t,n,i,s,o,a,u,l,h,c,d,p,g,v,x,y,w){for(var _=e,S=w,I=0,A=!1;(S=S.get(Bv))!==void 0&&!A;){var k=S.get(e);if(I+=1,typeof k<"u"){if(k===I)throw new RangeError("Cyclic object value");A=!0}typeof S.get(Bv)>"u"&&(I=0)}if(typeof h=="function"?_=h(t,_):_ instanceof Date?_=p(_):n==="comma"&&ps(_)&&(_=Bp.maybeMap(_,function(z){return z instanceof Date?p(z):z})),_===null){if(o)return l&&!x?l(t,or.encoder,y,"key",g):t;_=""}if(g5(_)||Bp.isBuffer(_)){if(l){var M=x?t:l(t,or.encoder,y,"key",g);return[v(M)+"="+v(l(_,or.encoder,y,"value",g))]}return[v(t)+"="+v(String(_))]}var O=[];if(typeof _>"u")return O;var F;if(n==="comma"&&ps(_))x&&l&&(_=Bp.maybeMap(_,l)),F=[{value:_.length>0?_.join(",")||null:void 0}];else if(ps(h))F=h;else{var U=Object.keys(_);F=c?U.sort(c):U}var H=u?t.replace(/\./g,"%2E"):t,L=i&&ps(_)&&_.length===1?H+"[]":H;if(s&&ps(_)&&_.length===0)return L+"[]";for(var N=0;N<F.length;++N){var j=F[N],Y=typeof j=="object"&&typeof j.value<"u"?j.value:_[j];if(!(a&&Y===null)){var K=d&&u?j.replace(/\./g,"%2E"):j,X=ps(_)?typeof n=="function"?n(L,K):L:L+(d?"."+K:"["+K+"]");w.set(e,I);var W=fA();W.set(Bv,w),mA(O,r(Y,X,n,i,s,o,a,u,n==="comma"&&x&&ps(_)?null:l,h,c,d,p,g,v,x,y,W))}}return O},y5=function(e){if(!e)return or;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||or.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=wh.default;if(typeof e.format<"u"){if(!f5.call(wh.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=wh.formatters[n],s=or.filter;(typeof e.filter=="function"||ps(e.filter))&&(s=e.filter);var o;if(e.arrayFormat in pA?o=e.arrayFormat:"indices"in e?o=e.indices?"indices":"repeat":o=or.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:or.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:or.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:or.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:or.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?or.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:or.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:or.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:or.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:or.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:or.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:or.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:or.strictNullHandling}},x5=function(r,e){var t=r,n=y5(e),i,s;typeof n.filter=="function"?(s=n.filter,t=s("",t)):ps(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof t!="object"||t===null)return"";var a=pA[n.arrayFormat],u=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);for(var l=fA(),h=0;h<i.length;++h){var c=i[h];n.skipNulls&&t[c]===null||mA(o,v5(t[c],c,a,u,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,l))}var d=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),d.length>0?p+d:""},Ju=dA,y1=Object.prototype.hasOwnProperty,_5=Array.isArray,Wt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!0,decoder:Ju.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},w5=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},gA=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},b5="utf8=%26%2310003%3B",S5="utf8=%E2%9C%93",T5=function(e,t){var n={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,o=i.split(t.delimiter,s),a=-1,u,l=t.charset;if(t.charsetSentinel)for(u=0;u<o.length;++u)o[u].indexOf("utf8=")===0&&(o[u]===S5?l="utf-8":o[u]===b5&&(l="iso-8859-1"),a=u,u=o.length);for(u=0;u<o.length;++u)if(u!==a){var h=o[u],c=h.indexOf("]="),d=c===-1?h.indexOf("="):c+1,p,g;d===-1?(p=t.decoder(h,Wt.decoder,l,"key"),g=t.strictNullHandling?null:""):(p=t.decoder(h.slice(0,d),Wt.decoder,l,"key"),g=Ju.maybeMap(gA(h.slice(d+1),t),function(x){return t.decoder(x,Wt.decoder,l,"value")})),g&&t.interpretNumericEntities&&l==="iso-8859-1"&&(g=w5(g)),h.indexOf("[]=")>-1&&(g=_5(g)?[g]:g);var v=y1.call(n,p);v&&t.duplicates==="combine"?n[p]=Ju.combine(n[p],g):(!v||t.duplicates==="last")&&(n[p]=g)}return n},E5=function(r,e,t,n){for(var i=n?e:gA(e,t),s=r.length-1;s>=0;--s){var o,a=r[s];if(a==="[]"&&t.parseArrays)o=t.allowEmptyArrays&&i===""?[]:[].concat(i);else{o=t.plainObjects?Object.create(null):{};var u=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,l=t.decodeDotInKeys?u.replace(/%2E/g,"."):u,h=parseInt(l,10);!t.parseArrays&&l===""?o={0:i}:!isNaN(h)&&a!==l&&String(h)===l&&h>=0&&t.parseArrays&&h<=t.arrayLimit?(o=[],o[h]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},P5=function(e,t,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,u=n.depth>0&&o.exec(s),l=u?s.slice(0,u.index):s,h=[];if(l){if(!n.plainObjects&&y1.call(Object.prototype,l)&&!n.allowPrototypes)return;h.push(l)}for(var c=0;n.depth>0&&(u=a.exec(s))!==null&&c<n.depth;){if(c+=1,!n.plainObjects&&y1.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(u[1])}return u&&h.push("["+s.slice(u.index)+"]"),E5(h,t,n,i)}},C5=function(e){if(!e)return Wt;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Wt.charset:e.charset,n=typeof e.duplicates>"u"?Wt.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Wt.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Wt.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Wt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Wt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Wt.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Wt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Wt.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Wt.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Wt.decoder,delimiter:typeof e.delimiter=="string"||Ju.isRegExp(e.delimiter)?e.delimiter:Wt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Wt.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Wt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Wt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Wt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Wt.strictNullHandling}},A5=function(r,e){var t=C5(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?T5(r,t):r,i=t.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],u=P5(a,n[a],t,typeof r=="string");i=Ju.merge(i,u,t)}return t.allowSparse===!0?i:Ju.compact(i)},k5=x5,I5=A5,M5=z_,R5={formats:M5,parse:I5,stringify:k5},O5=pF;function uo(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var N5=/^([a-z0-9.+-]+:)/i,B5=/:[0-9]*$/,L5=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,F5=["<",">",'"',"`"," ","\r",`
`,"	"],D5=["{","}","|","\\","^","`"].concat(F5),x1=["'"].concat(D5),uE=["%","/","?",";","#"].concat(x1),cE=["/","?","#"],U5=255,hE=/^[+a-z0-9A-Z_-]{0,63}$/,j5=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,X5={javascript:!0,"javascript:":!0},_1={javascript:!0,"javascript:":!0},Mu={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},w1=R5;function H5(r,e,t){if(r&&typeof r=="object"&&r instanceof uo)return r;var n=new uo;return n.parse(r,e,t),n}uo.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",s=r.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),r=s.join(i);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var u=L5.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],e?this.query=w1.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var l=N5.exec(a);if(l){l=l[0];var h=l.toLowerCase();this.protocol=h,a=a.substr(l.length)}if(t||l||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(l&&_1[l])&&(a=a.substr(2),this.slashes=!0)}if(!_1[l]&&(c||l&&!Mu[l])){for(var d=-1,p=0;p<cE.length;p++){var g=a.indexOf(cE[p]);g!==-1&&(d===-1||g<d)&&(d=g)}var v,x;d===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",d),x!==-1&&(v=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(v)),d=-1;for(var p=0;p<uE.length;p++){var g=a.indexOf(uE[p]);g!==-1&&(d===-1||g<d)&&(d=g)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var w=this.hostname.split(/\./),p=0,_=w.length;p<_;p++){var S=w[p];if(S&&!S.match(hE)){for(var I="",A=0,k=S.length;A<k;A++)S.charCodeAt(A)>127?I+="x":I+=S[A];if(!I.match(hE)){var M=w.slice(0,p),O=w.slice(p+1),F=S.match(j5);F&&(M.push(F[1]),O.unshift(F[2])),O.length&&(a="/"+O.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>U5?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=O5.toASCII(this.hostname));var U=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+U,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!X5[h])for(var p=0,_=x1.length;p<_;p++){var L=x1[p];if(a.indexOf(L)!==-1){var N=encodeURIComponent(L);N===L&&(N=escape(L)),a=a.split(L).join(N)}}var j=a.indexOf("#");j!==-1&&(this.hash=a.substr(j),a=a.slice(0,j));var Y=a.indexOf("?");if(Y!==-1?(this.search=a.substr(Y),this.query=a.substr(Y+1),e&&(this.query=w1.parse(this.query)),a=a.slice(0,Y)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Mu[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",K=this.search||"";this.path=U+K}return this.href=this.format(),this};uo.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=w1.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Mu[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+t+o+n};uo.prototype.resolve=function(r){return this.resolveObject(H5(r,!1,!0)).format()};uo.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new uo;e.parse(r,!1,!0),r=e}for(var t=new uo,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];t[s]=this[s]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var u=o[a];u!=="protocol"&&(t[u]=r[u])}return Mu[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!Mu[r.protocol]){for(var l=Object.keys(r),h=0;h<l.length;h++){var c=l[h];t[c]=r[c]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!_1[r.protocol]){for(var _=(r.pathname||"").split("/");_.length&&!(r.host=_.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),_[0]!==""&&_.unshift(""),_.length<2&&_.unshift(""),t.pathname=_.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var d=t.pathname||"",p=t.search||"";t.path=d+p}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var g=t.pathname&&t.pathname.charAt(0)==="/",v=r.host||r.pathname&&r.pathname.charAt(0)==="/",x=v||g||t.host&&r.pathname,y=x,w=t.pathname&&t.pathname.split("/")||[],_=r.pathname&&r.pathname.split("/")||[],S=t.protocol&&!Mu[t.protocol];if(S&&(t.hostname="",t.port=null,t.host&&(w[0]===""?w[0]=t.host:w.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(_[0]===""?_[0]=r.host:_.unshift(r.host)),r.host=null),x=x&&(_[0]===""||w[0]==="")),v)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,w=_;else if(_.length)w||(w=[]),w.pop(),w=w.concat(_),t.search=r.search,t.query=r.query;else if(r.search!=null){if(S){t.host=w.shift(),t.hostname=t.host;var I=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;I&&(t.auth=I.shift(),t.hostname=I.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!w.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var A=w.slice(-1)[0],k=(t.host||r.host||w.length>1)&&(A==="."||A==="..")||A==="",M=0,O=w.length;O>=0;O--)A=w[O],A==="."?w.splice(O,1):A===".."?(w.splice(O,1),M++):M&&(w.splice(O,1),M--);if(!x&&!y)for(;M--;M)w.unshift("..");x&&w[0]!==""&&(!w[0]||w[0].charAt(0)!=="/")&&w.unshift(""),k&&w.join("/").substr(-1)!=="/"&&w.push("");var F=w[0]===""||w[0]&&w[0].charAt(0)==="/";if(S){t.hostname=F?"":w.length?w.shift():"",t.host=t.hostname;var I=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;I&&(t.auth=I.shift(),t.hostname=I.shift(),t.host=t.hostname)}return x=x||t.host&&w.length,x&&!F&&w.unshift(""),w.length>0?t.pathname=w.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};uo.prototype.parseHost=function(){var r=this.host,e=B5.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};const dE={};function Ve(r,e,t=3){if(dE[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),dE[e]=!0}function vi(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Wc(r){return r.split("?")[0].split("#")[0]}function z5(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function $5(r,e,t){return r.replace(new RegExp(z5(e),"g"),t)}function Y5(r,e){let t="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){const u=t.lastIndexOf("/");if(u!==t.length-1){u===-1?(t="",n=0):(t=t.slice(0,u),n=t.length-1-t.lastIndexOf("/")),i=a,s=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,s=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+=`/${r.slice(i+1,a)}`:t=r.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return t}const $t={toPosix(r){return $5(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){vi(r),r=this.toPosix(r);const e=/^file:\/\/\//.exec(r);if(e)return e[0];const t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(vi(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const n=Wc(this.toPosix(e??_e.ADAPTER.getBaseUrl())),i=Wc(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?$t.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(vi(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="";const t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));const n=r.endsWith("/");return r=Y5(r,!1),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return vi(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const n=r[t];if(vi(n),n.length>0)if(e===void 0)e=n;else{const i=r[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(vi(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0);const t=e===47;let n=-1,i=!0;const s=this.getProtocol(r),o=r;r=r.slice(s.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?t?"/":this.isUrl(o)?s+r:s:t&&n===1?"//":s+r.slice(0,n)},rootname(r){vi(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){const t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){vi(r),e&&vi(e),r=Wc(this.toPosix(r));let t=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const u=r.charCodeAt(s);if(u===47){if(!i){t=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(u===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===47){if(!i){t=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":r.slice(t,n)},extname(r){vi(r),r=Wc(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!i){t=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){vi(r);const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=Wc(this.toPosix(r));let t=r.charCodeAt(0);const n=this.isAbsolute(r);let i;e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let s=-1,o=0,a=-1,u=!0,l=r.length-1,h=0;for(;l>=i;--l){if(t=r.charCodeAt(l),t===47){if(!u){o=l+1;break}continue}a===-1&&(u=!1,a=l+1),t===46?s===-1?s=l:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=r.slice(1,a):e.base=e.name=r.slice(o,a)):(o===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,a)):(e.name=r.slice(o,s),e.base=r.slice(o,a)),e.ext=r.slice(s,a)),e.dir=this.dirname(r),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let Lv;async function G5(){return Lv??(Lv=(async()=>{var s;const r=document.createElement("canvas").getContext("webgl");if(!r)return $r.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return $r.UNPACK;const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);const n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,i),r.deleteFramebuffer(n),r.deleteTexture(t),(s=r.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?$r.PMA:$r.UNPACK})()),Lv}let Fv;function vA(){return typeof Fv>"u"&&(Fv=function(){var e;const r={stencil:!0,failIfMajorPerformanceCaveat:_e.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!_e.ADAPTER.getWebGLRenderingContext())return!1;const t=_e.ADAPTER.createCanvas();let n=t.getContext("webgl",r)||t.getContext("experimental-webgl",r);const i=!!((e=n==null?void 0:n.getContextAttributes())!=null&&e.stencil);if(n){const s=n.getExtension("WEBGL_lose_context");s&&s.loseContext()}return n=null,i}catch{return!1}}()),Fv}var W5={grad:.9,turn:360,rad:360/(2*Math.PI)},$s=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},_r=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},ii=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},yA=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},fE=function(r){return{r:ii(r.r,0,255),g:ii(r.g,0,255),b:ii(r.b,0,255),a:ii(r.a)}},Dv=function(r){return{r:_r(r.r),g:_r(r.g),b:_r(r.b),a:_r(r.a,3)}},V5=/^#([0-9a-f]{3,8})$/i,Of=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},xA=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=Math.max(e,t,n),o=s-Math.min(e,t,n),a=o?s===e?(t-n)/o:s===t?2+(n-e)/o:4+(e-t)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},_A=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var s=Math.floor(e),o=n*(1-t),a=n*(1-(e-s)*t),u=n*(1-(1-e+s)*t),l=s%6;return{r:255*[n,a,o,o,u,n][l],g:255*[u,n,n,a,o,o][l],b:255*[o,o,u,n,n,a][l],a:i}},pE=function(r){return{h:yA(r.h),s:ii(r.s,0,100),l:ii(r.l,0,100),a:ii(r.a)}},mE=function(r){return{h:_r(r.h),s:_r(r.s),l:_r(r.l),a:_r(r.a,3)}},gE=function(r){return _A((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},bh=function(r){return{h:(e=xA(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},q5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,K5=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Q5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Z5=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b1={string:[[function(r){var e=V5.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?_r(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?_r(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=Q5.exec(r)||Z5.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:fE({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=q5.exec(r)||K5.exec(r);if(!e)return null;var t,n,i=pE({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(W5[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return gE(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,s=i===void 0?1:i;return $s(e)&&$s(t)&&$s(n)?fE({r:Number(e),g:Number(t),b:Number(n),a:Number(s)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,s=i===void 0?1:i;if(!$s(e)||!$s(t)||!$s(n))return null;var o=pE({h:Number(e),s:Number(t),l:Number(n),a:Number(s)});return gE(o)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,s=i===void 0?1:i;if(!$s(e)||!$s(t)||!$s(n))return null;var o=function(a){return{h:yA(a.h),s:ii(a.s,0,100),v:ii(a.v,0,100),a:ii(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(s)});return _A(o)},"hsv"]]},vE=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},J5=function(r){return typeof r=="string"?vE(r.trim(),b1.string):typeof r=="object"&&r!==null?vE(r,b1.object):[null,void 0]},Uv=function(r,e){var t=bh(r);return{h:t.h,s:ii(t.s+100*e,0,100),l:t.l,a:t.a}},jv=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},yE=function(r,e){var t=bh(r);return{h:t.h,s:t.s,l:ii(t.l+100*e,0,100),a:t.a}},S1=function(){function r(e){this.parsed=J5(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return _r(jv(this.rgba),2)},r.prototype.isDark=function(){return jv(this.rgba)<.5},r.prototype.isLight=function(){return jv(this.rgba)>=.5},r.prototype.toHex=function(){return e=Dv(this.rgba),t=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Of(_r(255*s)):"","#"+Of(t)+Of(n)+Of(i)+o;var e,t,n,i,s,o},r.prototype.toRgb=function(){return Dv(this.rgba)},r.prototype.toRgbString=function(){return e=Dv(this.rgba),t=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+t+", "+n+", "+i+", "+s+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,s},r.prototype.toHsl=function(){return mE(bh(this.rgba))},r.prototype.toHslString=function(){return e=mE(bh(this.rgba)),t=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+s+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,s},r.prototype.toHsv=function(){return e=xA(this.rgba),{h:_r(e.h),s:_r(e.s),v:_r(e.v),a:_r(e.a,3)};var e},r.prototype.invert=function(){return os({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),os(Uv(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),os(Uv(this.rgba,-e))},r.prototype.grayscale=function(){return os(Uv(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),os(yE(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),os(yE(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?os({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):_r(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=bh(this.rgba);return typeof e=="number"?os({h:e,s:t.s,l:t.l,a:t.a}):_r(t.h)},r.prototype.isEqual=function(e){return this.toHex()===os(e).toHex()},r}(),os=function(r){return r instanceof S1?r:new S1(r)},xE=[],e4=function(r){r.forEach(function(e){xE.indexOf(e)<0&&(e(S1,b1),xE.push(e))})};function t4(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var s={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,u,l=n[this.toHex()];if(l)return l;if(o!=null&&o.closest){var h=this.toRgb(),c=1/0,d="black";if(!s.length)for(var p in t)s[p]=new r(t[p]).toRgb();for(var g in t){var v=(a=h,u=s[g],Math.pow(a.r-u.r,2)+Math.pow(a.g-u.g,2)+Math.pow(a.b-u.b,2));v<c&&(c=v,d=g)}return d}},e.string.push([function(o){var a=o.toLowerCase(),u=a==="transparent"?"#0000":t[a];return u?new r(u).toRgb():null},"name"])}e4([t4]);const Zl=class Lp{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Lp)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,s)=>i===t[s]);if(e!==null&&t!==null){const i=Object.keys(e),s=Object.keys(t);return i.length!==s.length?!1:i.every(o=>e[o]===t[o])}return e===t}toRgba(){const[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,n,i,s]=Lp.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,n,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,n,i,s]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=s,e}normalize(e){let t,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;t=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,s=255]=e,t/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=Lp.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=os(e);o.isValid()&&({r:t,g:n,b:i,a:s}=o.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,t),n)}),e)}};Zl.shared=new Zl,Zl.temp=new Zl,Zl.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let ot=Zl;function r4(r){return Ve("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),ot.shared.setValue(r).toHex()}function n4(r){return Ve("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),ot.shared.setValue(r).toNumber()}function i4(){const r=[],e=[];for(let n=0;n<32;n++)r[n]=n,e[n]=n;r[Pe.NORMAL_NPM]=Pe.NORMAL,r[Pe.ADD_NPM]=Pe.ADD,r[Pe.SCREEN_NPM]=Pe.SCREEN,e[Pe.NORMAL]=Pe.NORMAL_NPM,e[Pe.ADD]=Pe.ADD_NPM,e[Pe.SCREEN]=Pe.SCREEN_NPM;const t=[];return t.push(e),t.push(r),t}const wA=i4();function bA(r,e){return wA[e?1:0][r]}function s4(r,e=null){const t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function SA(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function cm(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function _E(r){return!(r&r-1)&&!!r}function wE(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Ru(r,e,t){const n=r.length;let i;if(e>=n||t===0)return;t=e+t>n?n-e:t;const s=n-t;for(i=e;i<s;++i)r[i]=r[i+t];r.length=s}function na(r){return r===0?0:r<0?-1:1}let o4=0;function fl(){return++o4}const T1=class{constructor(r,e,t,n){this.left=r,this.top=e,this.right=t,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};T1.EMPTY=new T1(0,0,0,0);let bE=T1;const SE={},as=Object.create(null),jo=Object.create(null);class a4{constructor(e,t,n){this._canvas=_e.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||_e.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function TE(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function EE(r,e,t,n,i){const s=4*e;for(let o=n,a=n*s+4*t;o<=i;++o,a+=s)if(r[a+3]!==0)return!1;return!0}function l4(r){const{width:e,height:t}=r,n=r.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const i=n.getImageData(0,0,e,t).data;let s=0,o=0,a=e-1,u=t-1;for(;o<t&&TE(i,e,o);)++o;if(o===t)return bE.EMPTY;for(;TE(i,e,u);)--u;for(;EE(i,e,s,o,u);)++s;for(;EE(i,e,a,o,u);)--a;return++a,++u,new bE(s,o,a,u)}function u4(r){const e=l4(r),{width:t,height:n}=e;let i=null;if(!e.isEmpty()){const s=r.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,t,n)}return{width:t,height:n,data:i}}function c4(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;const t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function go(r,e=1){var n;const t=(n=_e.RETINA_PREFIX)==null?void 0:n.exec(r);return t?parseFloat(t[1]):e}var me=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(me||{});const E1=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},PE=(r,e)=>E1(r).priority??e,Ee={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(E1).forEach(e=>{e.type.forEach(t=>{var n,i;return(i=(n=this._removeHandlers)[t])==null?void 0:i.call(n,e)})}),this},add(...r){return r.map(E1).forEach(e=>{e.type.forEach(t=>{var s,o;const n=this._addHandlers,i=this._queue;n[t]?(s=n[t])==null||s.call(n,e):(i[t]=i[t]||[],(o=i[t])==null||o.push(e))})}),this},handle(r,e,t){var o;const n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;const s=this._queue;return s[r]&&((o=s[r])==null||o.forEach(a=>e(a)),delete s[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>PE(s,t)-PE(i,t)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class P1{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const h4=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function d4(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function f4(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=h4.replace(/%forloop%/gi,d4(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}const Xv=0,Hv=1,zv=2,$v=3,Yv=4,Gv=5;class Bs{constructor(){this.data=0,this.blendMode=Pe.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Xv)}set blend(e){!!(this.data&1<<Xv)!==e&&(this.data^=1<<Xv)}get offsets(){return!!(this.data&1<<Hv)}set offsets(e){!!(this.data&1<<Hv)!==e&&(this.data^=1<<Hv)}get culling(){return!!(this.data&1<<zv)}set culling(e){!!(this.data&1<<zv)!==e&&(this.data^=1<<zv)}get depthTest(){return!!(this.data&1<<$v)}set depthTest(e){!!(this.data&1<<$v)!==e&&(this.data^=1<<$v)}get depthMask(){return!!(this.data&1<<Gv)}set depthMask(e){!!(this.data&1<<Gv)!==e&&(this.data^=1<<Gv)}get clockwiseFrontFace(){return!!(this.data&1<<Yv)}set clockwiseFrontFace(e){!!(this.data&1<<Yv)!==e&&(this.data^=1<<Yv)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Pe.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new Bs;return e.depthTest=!1,e.blend=!0,e}}Bs.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const C1=[];function TA(r,e){if(!r)return null;let t="";if(typeof r=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(let n=C1.length-1;n>=0;--n){const i=C1[n];if(i.test&&i.test(r,t))return new i(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Oi{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,i,s,o,a,u){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][l](e,t,n,i,s,o,a,u);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Oi.prototype,{dispatch:{value:Oi.prototype.emit},run:{value:Oi.prototype.emit}});class zh{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Oi("setRealSize"),this.onUpdate=new Oi("update"),this.onError=new Oi("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Eg extends zh{constructor(e,t){const{width:n,height:i}=t||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===$r.UNPACK);const s=t.realWidth,o=t.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(t.target,0,0,0,s,o,t.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(t.target,0,n.internalFormat,s,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const p4={scaleMode:ki.NEAREST,alphaMode:$r.NPM},A1=class Jl extends md{constructor(e=null,t=null){super(),t=Object.assign({},Jl.defaultOptions,t);const{alphaMode:n,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:u,wrapMode:l,format:h,type:c,target:d,resolution:p,resourceOptions:g}=t;e&&!(e instanceof zh)&&(e=TA(e,g),e.internal=!0),this.resolution=p||_e.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((u||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=l,this._scaleMode=o,this.format=h,this.type=c,this.target=d,this.alphaMode=n,this.uid=fl(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&u>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=_E(this.realWidth)&&_E(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete jo[this.cacheId],delete as[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Jl.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,n=_e.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${fl()}`}s=e._pixiId}let o=jo[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Jl(e,t),o.cacheId=s,Jl.addToCache(o,s)),o}static fromBuffer(e,t,n,i){e=e||new Float32Array(t*n*4);const s=new Eg(e,{width:t,height:n,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=de.RGBA,a=Te.FLOAT):e instanceof Int32Array?(o=de.RGBA_INTEGER,a=Te.INT):e instanceof Uint32Array?(o=de.RGBA_INTEGER,a=Te.UNSIGNED_INT):e instanceof Int16Array?(o=de.RGBA_INTEGER,a=Te.SHORT):e instanceof Uint16Array?(o=de.RGBA_INTEGER,a=Te.UNSIGNED_SHORT):e instanceof Int8Array?(o=de.RGBA,a=Te.BYTE):(o=de.RGBA,a=Te.UNSIGNED_BYTE),s.internal=!0,new Jl(s,Object.assign({},p4,{type:a,format:o},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),jo[t]&&jo[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),jo[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=jo[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete jo[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete jo[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};A1.defaultOptions={mipmap:li.POW2,anisotropicLevel:0,scaleMode:ki.LINEAR,wrapMode:oi.CLAMP,alphaMode:$r.UNPACK,target:ku.TEXTURE_2D,format:de.RGBA,type:Te.UNSIGNED_BYTE},A1._globalBatch=0;let De=A1;class k1{constructor(){this.texArray=null,this.blend=0,this.type=Ai.TRIANGLES,this.start=0,this.size=0,this.data=null}}let m4=0;class yt{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=m4++,this.disposeRunner=new Oi("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Ss.ELEMENT_ARRAY_BUFFER:Ss.ARRAY_BUFFER}get index(){return this.type===Ss.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new yt(e)}}class hm{constructor(e,t=0,n=!1,i=Te.FLOAT,s,o,a,u=1){this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=u}destroy(){this.buffer=null}static from(e,t,n,i,s){return new hm(e,t,n,i,s)}}const g4={Float32Array,Uint32Array,Int32Array,Uint8Array};function v4(r,e){let t=0,n=0;const i={};for(let u=0;u<r.length;u++)n+=e[u],t+=r[u].length;const s=new ArrayBuffer(t*4);let o=null,a=0;for(let u=0;u<r.length;u++){const l=e[u],h=r[u],c=SA(h);i[c]||(i[c]=new g4[c](s)),o=i[c];for(let d=0;d<h.length;d++){const p=(d/l|0)*n+a,g=d%l;o[p+g]=h[d]}a+=l}return new Float32Array(s)}const CE={5126:4,5123:2,5121:1};let y4=0;const x4={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class As{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=y4++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Oi("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,i=!1,s,o,a,u=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof yt||(t instanceof Array&&(t=new Float32Array(t)),t=new yt(t));const l=e.split("|");if(l.length>1){for(let c=0;c<l.length;c++)this.addAttribute(l[c],t,n,i,s);return this}let h=this.buffers.indexOf(t);return h===-1&&(this.buffers.push(t),h=this.buffers.length-1),this.attributes[e]=new hm(h,n,i,s,o,a,u),this.instanced=this.instanced||u,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof yt||(e instanceof Array&&(e=new Uint16Array(e)),e=new yt(e)),e.type=Ss.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],t=[],n=new yt;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),t.push(s.size*CE[s.type]/4),s.buffer=0}for(n.data=v4(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new As;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new yt(this.buffers[t].data.slice(0));for(const t in this.attributes){const n=this.attributes[t];e.attributes[t]=new hm(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Ss.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new As,n=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)i[u]=i[u]||0,i[u]+=o.buffers[u].data.length,s[u]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new x4[SA(o.buffers[a].data)](i[a]),t.buffers[a]=new yt(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let u=0;u<o.buffers.length;u++)n[u].set(o.buffers[u].data,s[u]),s[u]+=o.buffers[u].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Ss.ELEMENT_ARRAY_BUFFER;let a=0,u=0,l=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(u+=d.size*CE[d.type]/4)}for(let c=0;c<e.length;c++){const d=e[c].indexBuffer.data;for(let p=0;p<d.length;p++)t.indexBuffer.data[p+l]+=a;a+=e[c].buffers[h].data.length/u,l+=d.length}}return t}}class EA extends As{constructor(e=!1){super(),this._buffer=new yt(null,e,!1),this._indexBuffer=new yt(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Te.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Te.FLOAT).addAttribute("aColor",this._buffer,4,!0,Te.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Te.FLOAT).addIndex(this._indexBuffer)}}const dm=Math.PI*2,_4=180/Math.PI,w4=Math.PI/180;var Mr=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Mr||{});class je{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new je(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}je.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Nf=[new je,new je,new je,new je];let $e=class I1{constructor(e=0,t=0,n=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=Mr.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new I1(0,0,0,0)}clone(){return new I1(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const M=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=M)return!1;const O=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>O}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Nf[0].set(e.left,e.top),u=Nf[1].set(e.left,e.bottom),l=Nf[2].set(e.right,e.top),h=Nf[3].set(e.right,e.bottom);if(l.x<=a.x||u.y<=a.y)return!1;const c=Math.sign(t.a*t.d-t.b*t.c);if(c===0||(t.apply(a,a),t.apply(u,u),t.apply(l,l),t.apply(h,h),Math.max(a.x,u.x,l.x,h.x)<=n||Math.min(a.x,u.x,l.x,h.x)>=i||Math.max(a.y,u.y,l.y,h.y)<=s||Math.min(a.y,u.y,l.y,h.y)>=o))return!1;const d=c*(u.y-a.y),p=c*(a.x-u.x),g=d*n+p*s,v=d*i+p*s,x=d*n+p*o,y=d*i+p*o;if(Math.max(g,v,x,y)<=d*a.x+p*a.y||Math.min(g,v,x,y)>=d*h.x+p*h.y)return!1;const w=c*(a.y-l.y),_=c*(l.x-a.x),S=w*n+_*s,I=w*i+_*s,A=w*n+_*o,k=w*i+_*o;return!(Math.max(S,I,A,k)<=w*a.x+_*a.y||Math.min(S,I,A,k)>=w*h.x+_*h.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=s-i,this}};$e.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Pg{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=Mr.CIRC}clone(){return new Pg(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-t;return i*=i,s*=s,i+s<=n}getBounds(){return new $e(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Pg.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Cg{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.width=n,this.height=i,this.type=Mr.ELIP}clone(){return new Cg(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new $e(this.x-this.width,this.y-this.height,this.width,this.height)}}Cg.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};let Sh=class PA{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){const n=[];for(let i=0,s=t.length;i<s;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.type=Mr.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new PA(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],u=this.points[s*2+1],l=this.points[o*2],h=this.points[o*2+1];u>t!=h>t&&e<(l-a)*((t-u)/(h-u))+a&&(n=!n)}return n}};Sh.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};class Ag{constructor(e=0,t=0,n=0,i=0,s=20){this.x=e,this.y=t,this.width=n,this.height=i,this.radius=s,this.type=Mr.RREC}clone(){return new Ag(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=t-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=t-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}}Ag.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class wt{constructor(e=1,t=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,s,o){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new je;const n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new je;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return t.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=s*t-this.d*n,this.d=s*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){const t=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,t,n,i,s,o,a,u,l){return this.a=Math.cos(a+l)*s,this.b=Math.sin(a+l)*s,this.c=-Math.sin(a-u)*o,this.d=Math.cos(a-u)*o,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){const t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),u=Math.atan2(n,t),l=Math.abs(a+u);return l<1e-5||Math.abs(dm-l)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=u),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*t+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,t=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-t*n;return this.a=i/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new wt;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new wt}static get TEMP_MATRIX(){return new wt}}wt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ya=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ga=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Wa=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Va=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],M1=[],CA=[],Bf=Math.sign;function b4(){for(let r=0;r<16;r++){const e=[];M1.push(e);for(let t=0;t<16;t++){const n=Bf(Ya[r]*Ya[t]+Wa[r]*Ga[t]),i=Bf(Ga[r]*Ya[t]+Va[r]*Ga[t]),s=Bf(Ya[r]*Wa[t]+Wa[r]*Va[t]),o=Bf(Ga[r]*Wa[t]+Va[r]*Va[t]);for(let a=0;a<16;a++)if(Ya[a]===n&&Ga[a]===i&&Wa[a]===s&&Va[a]===o){e.push(a);break}}}for(let r=0;r<16;r++){const e=new wt;e.set(Ya[r],Ga[r],Wa[r],Va[r],0,0),CA.push(e)}}b4();const Nt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Ya[r],uY:r=>Ga[r],vX:r=>Wa[r],vY:r=>Va[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>M1[r][e],sub:(r,e)=>M1[r][Nt.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Nt.S:Nt.N:Math.abs(e)*2<=Math.abs(r)?r>0?Nt.E:Nt.W:e>0?r>0?Nt.SE:Nt.SW:r>0?Nt.NE:Nt.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{const i=CA[Nt.inv(e)];i.tx=t,i.ty=n,r.append(i)}};class Ii{constructor(e,t,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new Ii(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ii.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const R1=class{constructor(){this.worldTransform=new wt,this.localTransform=new wt,this.position=new Ii(this.onChange,this,0,0),this.scale=new Ii(this.onChange,this,1,1),this.pivot=new Ii(this.onChange,this,0,0),this.skew=new Ii(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const t=r.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};R1.IDENTITY=new R1;let kg=R1;kg.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var S4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,T4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function AE(r,e,t){const n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function Wv(r){const e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function AA(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Wv(2*e);case"bvec3":return Wv(3*e);case"bvec4":return Wv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Ou=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],E4={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},P4={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function C4(r,e){var n;const t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in r.uniforms){const s=e[i];if(!s){((n=r.uniforms[i])==null?void 0:n.group)===!0&&(r.uniforms[i].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=r.uniforms[i];let a=!1;for(let u=0;u<Ou.length;u++)if(Ou[u].test(s,o)){t.push(Ou[u].code(i,o)),a=!0;break}if(!a){const u=(s.size===1&&!s.isArray?E4:P4)[s.type].replace("location",`ud["${i}"].location`);t.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}const kA={};let Gl=kA;function A4(){if(Gl===kA||Gl!=null&&Gl.isContextLost()){const r=_e.ADAPTER.createCanvas();let e;_e.PREFER_ENV>=bl.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Gl=e}return Gl}let Lf;function k4(){if(!Lf){Lf=ri.MEDIUM;const r=A4();if(r&&r.getShaderPrecisionFormat){const e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(Lf=e.precision?ri.HIGH:ri.MEDIUM)}}return Lf}function kE(r,e){const t=r.getShaderSource(e).split(`
`).map((l,h)=>`${h}: ${l}`),n=r.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!s[l]?(s[l]=!0,!0):!1),a=[""];o.forEach(l=>{t[l-1]=`%c${t[l-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const u=t.join(`
`);a[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function I4(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||kE(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||kE(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}const M4={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function IA(r){return M4[r]}let Ff=null;const IE={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function MA(r,e){if(!Ff){const t=Object.keys(IE);Ff={};for(let n=0;n<t.length;++n){const i=t[n];Ff[r[i]]=IE[i]}}return Ff[e]}function ME(r,e,t){if(r.substring(0,9)!=="precision"){let n=e;return e===ri.HIGH&&t!==ri.HIGH&&(n=ri.MEDIUM),`precision ${n} float;
${r}`}else if(t!==ri.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let Vc;function R4(){if(typeof Vc=="boolean")return Vc;try{Vc=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Vc=!1}return Vc}let O4=0;const Df={},O1=class eu{constructor(e,t,n="pixi-shader",i={}){this.extra={},this.id=O4++,this.vertexSrc=e||eu.defaultVertexSrc,this.fragmentSrc=t||eu.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Df[n]?(Df[n]++,n+=`-${Df[n]}`):Df[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=ME(this.vertexSrc,eu.defaultVertexPrecision,ri.HIGH),this.fragmentSrc=ME(this.fragmentSrc,eu.defaultFragmentPrecision,k4())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return T4}static get defaultFragmentSrc(){return S4}static from(e,t,n){const i=e+t;let s=SE[i];return s||(SE[i]=s=new eu(e,t,n)),s}};O1.defaultVertexPrecision=ri.HIGH,O1.defaultFragmentPrecision=ni.apple.device?ri.HIGH:ri.MEDIUM;let _s=O1,N4=0;class Ni{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=N4++,this.static=!!t,this.ubo=!!n,e instanceof yt?(this.buffer=e,this.buffer.type=Ss.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new yt(new Float32Array(1)),this.buffer.type=Ss.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(!this.ubo)this.uniforms[e]=new Ni(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,n){return new Ni(e,t,n)}static uboFrom(e,t){return new Ni(e,t??!0,!0)}}class Bi{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Ni?this.uniformGroup=t:this.uniformGroup=new Ni(t):this.uniformGroup=new Ni({}),this.disposeRunner=new Oi("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const n in t.uniforms){const i=t.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){const i=_s.from(e,t);return new Bi(i,n)}}class RA{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=Ni.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new _s(this.vertexSrc,i)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new wt,default:this.defaultGroupCache[e]};return new Bi(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}}class N1{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function B4(){return!ni.apple.device}function L4(r){let e=!0;const t=_e.ADAPTER.getNavigator();if(ni.tablet||ni.phone){if(ni.apple.device){const n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(ni.android.device){const n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?r:4}class Ig{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var F4=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,D4=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const oh=class wi extends Ig{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=EA,this.vertexSize=6,this.state=Bs.for2d(),this.size=wi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??L4(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??B4(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ve("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return D4}static get defaultFragmentTemplate(){return F4}setShaderGenerator({vertex:e=wi.defaultVertexSrc,fragment:t=wi.defaultFragmentTemplate}={}){this.shaderGenerator=new RA(e,t)}contextChange(){const e=this.renderer.gl;_e.PREFER_ENV===bl.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),wi.defaultMaxTextures),this.maxTextures=f4(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=wi,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new k1);for(;t.length<i;)t.push(new N1);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,n=wi._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++De._globalBatch,u=0,l=n[0],h=0;i.copyBoundTextures(s,t);for(let c=0;c<this._bufferSize;++c){const d=e[c];e[c]=null,d._batchEnabled!==a&&(l.count>=t&&(i.boundArray(l,s,a,t),this.buildDrawCalls(l,h,c),h=c,l=n[++u],++a),d._batchEnabled=a,d.touched=o,l.elements[l.count++]=d)}l.count>0&&(i.boundArray(l,s,a,t),this.buildDrawCalls(l,h,this._bufferSize),++u,++a);for(let c=0;c<s.length;c++)s[c]=null;De._globalBatch=a}buildDrawCalls(e,t,n){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,u=wi._drawCallPool;let l=this._dcIndex,h=this._aIndex,c=this._iIndex,d=u[l];d.start=this._iIndex,d.texArray=e;for(let p=t;p<n;++p){const g=i[p],v=g._texture.baseTexture,x=wA[v.alphaMode?1:0][g.blendMode];i[p]=null,t<p&&d.blend!==x&&(d.size=c-d.start,t=p,d=u[++l],d.texArray=e,d.start=c),this.packInterleavedGeometry(g,s,o,h,c),h+=g.vertexData.length/2*a,c+=g.indices.length,d.blend=x}t<n&&(d.size=c-d.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=c}bindAndClearTexArray(e){const t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:n}=this;wi.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:n}=this.renderer,i=wi._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:u,size:l,start:h,blend:c}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=c,n.set(this.state),t.drawElements(u,l,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),wi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=cm(Math.ceil(e/8)),n=wE(t),i=t*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new P1(i*this.vertexSize*4)),s}getIndexBuffer(e){const t=cm(Math.ceil(e/12)),n=wE(t),i=t*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let s=this._iBuffers[n];return s||(this._iBuffers[n]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,t,n,i,s){const{uint32View:o,float32View:a}=t,u=i/this.vertexSize,l=e.uvs,h=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),g=ot.shared.setValue(e._tintRGB).toPremultiplied(p,e._texture.baseTexture.alphaMode>0);for(let v=0;v<c.length;v+=2)a[i++]=c[v],a[i++]=c[v+1],a[i++]=l[v],a[i++]=l[v+1],o[i++]=g,a[i++]=d;for(let v=0;v<h.length;v++)n[s++]=u+h[v]}};oh.defaultBatchSize=4096,oh.extension={name:"batch",type:me.RendererPlugin},oh._drawCallPool=[],oh._textureArrayPool=[];let Go=oh;Ee.add(Go);var U4=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,j4=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const B1=class ah extends Bi{constructor(e,t,n){const i=_s.from(e||ah.defaultVertexSrc,t||ah.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=ah.defaultResolution,this.multisample=ah.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Bs}apply(e,t,n,i,s){e.applyFilter(this,t,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return j4}static get defaultFragmentSrc(){return U4}};B1.defaultResolution=1,B1.defaultMultisample=er.NONE;let Yr=B1;class fm{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new ot(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:n,backgroundAlpha:i}=e,s=n??t;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}fm.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},fm.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"background"};Ee.add(fm);class OA{constructor(e){this.renderer=e,this.emptyRenderer=new Ig(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:n}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,n,i){const{elements:s,ids:o,count:a}=e;let u=0;for(let l=0;l<a;l++){const h=s[l],c=h._batchLocation;if(c>=0&&c<i&&t[c]===h){o[l]=c;continue}for(;u<i;){const d=t[u];if(d&&d._batchEnabled===n&&d._batchLocation===u){u++;continue}o[l]=u,h._batchLocation=u,t[u]=h;break}}}destroy(){this.renderer=null}}OA.extension={type:me.RendererSystem,name:"batch"};Ee.add(OA);let RE=0;class pm{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=RE++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=RE++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(_e.PREFER_ENV>=bl.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}pm.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},pm.extension={type:me.RendererSystem,name:"context"};Ee.add(pm);class L1{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Oi("disposeFramebuffer"),this.multisample=er.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new De(null,{scaleMode:ki.NEAREST,resolution:1,mipmap:li.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new De(null,{scaleMode:ki.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:li.OFF,format:de.DEPTH_COMPONENT,type:Te.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,t/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class NA extends De{constructor(e={}){if(typeof e=="number"){const t=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:t,height:n,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=er.NONE),super(null,e),this.mipmap=li.OFF,this.valid=!0,this._clear=new ot([0,0,0,0]),this.framebuffer=new L1(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class vo extends zh{constructor(e){const t=e,n=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,i=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){n===void 0&&!t.startsWith("data:")?e.crossOrigin=c4(t):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,t,n,i){const s=e.gl,o=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===$r.UNPACK),!this.noSubImage&&t.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(t.target,0,n.internalFormat,t.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}}class BA extends vo{constructor(e,t){if(t=t||{},typeof e=="string"){const n=new Image;vo.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??_e.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===$r.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class $_{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){const i=t.width,s=t.height;if(n){const o=e.width/2/i,a=e.height/2/s,u=e.x/i+o,l=e.y/s+a;n=Nt.add(n,Nt.NW),this.x0=u+o*Nt.uX(n),this.y0=l+a*Nt.uY(n),n=Nt.add(n,2),this.x1=u+o*Nt.uX(n),this.y1=l+a*Nt.uY(n),n=Nt.add(n,2),this.x2=u+o*Nt.uX(n),this.y2=l+a*Nt.uY(n),n=Nt.add(n,2),this.x3=u+o*Nt.uX(n),this.y3=l+a*Nt.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}$_.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const OE=new $_;function Uf(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}let Me=class vt extends md{constructor(e,t,n,i,s,o,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new $e(0,0,1,1)),e instanceof vt&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=OE,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new je(o.x,o.y):new je(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t!=null&&t.url&&as[t.url]&&vt.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,vt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new vt(this.baseTexture,!this.noFrame&&e,t,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===OE&&(this._uvs=new $_),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=_e.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof De){if(!e.cacheId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${fl()}`,De.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${fl()}`}s=e._pixiId}let o=as[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof De)?(t.resolution||(t.resolution=go(e)),o=new vt(new De(e,t)),o.baseTexture.cacheId=s,De.addToCache(o.baseTexture,s),vt.addToCache(o,s)):!o&&e instanceof De&&(o=new vt(e),vt.addToCache(o,s)),o}static fromURL(e,t){const n=Object.assign({autoLoad:!1},t==null?void 0:t.resourceOptions),i=vt.from(e,Object.assign({resourceOptions:n},t),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,n,i){return new vt(De.fromBuffer(e,t,n,i))}static fromLoader(e,t,n,i){const s=new De(e,Object.assign({scaleMode:De.defaultOptions.scaleMode,resolution:go(t)},i)),{resource:o}=s;o instanceof BA&&(o.url=t);const a=new vt(s);return n||(n=t),De.addToCache(a.baseTexture,n),vt.addToCache(a,n),n!==t&&(De.addToCache(a.baseTexture,t),vt.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(u=>{a.baseTexture.once("loaded",()=>u(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),as[t]&&as[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),as[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=as[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete as[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)as[e.textureCacheIds[t]]===e&&delete as[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:n,width:i,height:s}=e,o=t+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const u=o&&a?"and":"or",l=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,h=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${l} ${u} ${h}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return vt._EMPTY||(vt._EMPTY=new vt(new De),Uf(vt._EMPTY),Uf(vt._EMPTY.baseTexture)),vt._EMPTY}static get WHITE(){if(!vt._WHITE){const e=_e.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),vt._WHITE=new vt(De.from(e)),Uf(vt._WHITE),Uf(vt._WHITE.baseTexture)}return vt._WHITE}};class Sl extends Me{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(t*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new Sl(new NA(e))}}class LA{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,n=er.NONE){const i=new NA(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Sl(i)}getOptimalTexture(e,t,n=1,i=er.NONE){let s;e=Math.max(Math.ceil(e*n-1e-6),1),t=Math.max(Math.ceil(t*n-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||t!==this._pixelsHeight?(e=cm(e),t=cm(t),s=((e&65535)<<16|t&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,t,n){const i=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||er.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const t in this.texturePool){const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const t in this.texturePool){if(!(Number(t)<0))continue;const n=this.texturePool[t];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}LA.SCREEN_KEY=-1;class X4 extends As{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class FA extends As{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new yt(this.vertices),this.uvBuffer=new yt(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+t.width/e.width,this.uvs[3]=i,this.uvs[4]=n+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=n,this.uvs[7]=i+t.height/e.height,n=t.x,i=t.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=n+t.width,this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class H4{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=er.NONE,this.sourceFrame=new $e,this.destinationFrame=new $e,this.bindingSourceFrame=new $e,this.bindingDestinationFrame=new $e,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const jf=[new je,new je,new je,new je],Vv=new wt;class DA{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new LA,this.statePool=[],this.quad=new X4,this.quadUv=new FA,this.tempRect=new $e,this.activeState={},this.globalUniforms=new Ni({outputFrame:new $e,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new H4,o=n.renderTexture;let a,u;if(o.current){const x=o.current;a=x.resolution,u=x.multisample}else a=n.resolution,u=n.multisample;let l=t[0].resolution||a,h=t[0].multisample??u,c=t[0].padding,d=t[0].autoFit,p=t[0].legacy??!0;for(let x=1;x<t.length;x++){const y=t[x];l=Math.min(l,y.resolution||a),h=Math.min(h,y.multisample??u),c=this.useMaxPadding?Math.max(c,y.padding):c+y.padding,d=d&&y.autoFit,p=p||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=l,s.multisample=h,s.legacy=p,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const g=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Vv.copyFrom(n.projection.transform).invert(),g),d?(s.sourceFrame.fit(g),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(g)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,h),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const v=this.tempRect;v.x=0,v.y=0,v.width=s.sourceFrame.width,v.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,v),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;const i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const l=i.filterArea;l[0]=t.destinationFrame.width,l[1]=t.destinationFrame.height,l[2]=t.sourceFrame.x,l[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const u=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,u.renderTexture,ms.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let l=t.renderTexture,h=this.getOptimalFilterTexture(l.width,l.height,t.resolution);h.filterFrame=l.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&t.multisample>1&&(h=this.getOptimalFilterTexture(l.width,l.height,t.resolution),h.filterFrame=l.filterFrame),n[c].apply(this,l,h,ms.CLEAR,t);const d=l;l=h,h=d}n[c].apply(this,l,u.renderTexture,ms.BLEND,t),c>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(h)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=ms.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(t===ms.CLEAR||t===ms.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Ai.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Ai.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=t._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=t.worldTransform.copyTo(wt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,i=er.NONE){return this.texturePool.getOptimalTexture(e,t,n,i)}getFilterTexture(e,t,n){if(typeof e=="number"){const s=e;e=t,t=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||er.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const n=jf[0],i=jf[1],s=jf[2],o=jf[3];n.set(t.left,t.top),i.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),u=Math.min(n.y,i.y,s.y,o.y),l=Math.max(n.x,i.x,s.x,o.x),h=Math.max(n.y,i.y,s.y,o.y);t.x=a,t.y=u,t.width=l-a,t.height=h-u}roundFrame(e,t,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:u,d:l}=s;if((Math.abs(a)>1e-4||Math.abs(u)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}s=s?Vv.copyFrom(s):Vv.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}DA.extension={type:me.RendererSystem,name:"filter"};Ee.add(DA);class z4{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=er.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const $4=new $e;class UA{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new L1(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new $e,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;_e.PREFER_ENV===bl.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>n,a=t.height>>n,u=o/t.width;this.setViewport(t.x*u,t.y*u,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,i){const s=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=n,s.height=i,this.gl.viewport(e,t,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,i,s=l1.COLOR|l1.DEPTH){const{gl:o}=this;o.clearColor(e,t,n,i),o.clear(s)}initFramebuffer(e){const{gl:t}=this,n=new z4(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){t.bindRenderbuffer(t.RENDERBUFFER,n.stencil);let o;this.renderer.context.webGLVersion===1?o=t.DEPTH_STENCIL:e.depth&&e.stencil?o=t.DEPTH24_STENCIL8:e.depth?o=t.DEPTH_COMPONENT24:o=t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,o,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],u=a.parentTextureArray||a;this.renderer.texture.bind(u,0),o===0&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let u=0;u<o;u++){const l=s[u],h=l.parentTextureArray||l;this.renderer.texture.bind(h,0),u===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+u,l.target,h._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+u))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const u=e.depthTexture;this.renderer.texture.bind(u,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let u,l;this.renderer.context.webGLVersion===1?(u=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH_STENCIL):e.depth&&e.stencil?(u=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH24_STENCIL8):e.depth?(u=n.DEPTH_ATTACHMENT,l=n.DEPTH_COMPONENT24):(u=n.STENCIL_ATTACHMENT,l=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,l,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,l,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,u,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let n=er.NONE;if(e<=1||t===null)return n;for(let i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return n===1&&(n=er.NONE),n}blit(e,t,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const u=i.glFramebuffers[a];if(!u)return;if(!e){if(!u.msaaBuffer)return;const h=i.colorTextures[0];if(!h)return;u.blitFramebuffer||(u.blitFramebuffer=new L1(i.width,i.height),u.blitFramebuffer.addColorTexture(0,h)),e=u.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=$4,t.width=i.width,t.height=i.height),n||(n=t);const l=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,u.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=t.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,u;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,u=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,u=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,u=s.STENCIL_INDEX8),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,u,n,i):s.renderbufferStorage(s.RENDERBUFFER,u,n,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new $e}destroy(){this.renderer=null}}UA.extension={type:me.RendererSystem,name:"framebuffer"};Ee.add(UA);const qv={5126:4,5123:2,5121:1};class jA{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;_e.PREFER_ENV===bl.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,u)=>n.drawElementsInstancedANGLE(i,s,o,a,u),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];t.update(i)}}checkCompatibility(e,t){const n=e.attributes,i=t.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const n=e.attributes,i=t.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,t,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const u=this.getSignature(e,a),l=e.glVertexArrayObjects[this.CONTEXT_UID];let h=l[u];if(h)return l[a.id]=h,h;const c=e.buffers,d=e.attributes,p={},g={};for(const v in c)p[v]=0,g[v]=0;for(const v in d)!d[v].size&&a.attributeData[v]?d[v].size=a.attributeData[v].size:d[v].size||console.warn(`PIXI Geometry attribute '${v}' size cannot be determined (likely the bound shader does not have the attribute)`),p[d[v].buffer]+=d[v].size*qv[d[v].type];for(const v in d){const x=d[v],y=x.size;x.stride===void 0&&(p[x.buffer]===y*qv[x.type]?x.stride=0:x.stride=p[x.buffer]),x.start===void 0&&(x.start=g[x.buffer],g[x.buffer]+=y*qv[x.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(let v=0;v<c.length;v++){const x=c[v];o.bind(x),n&&x._glBuffers[s].refCount++}return this.activateVao(e,a),l[a.id]=h,l[u]=h,i.bindVertexArray(null),o.unbind(Ss.ARRAY_BUFFER),h}disposeGeometry(e,t){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let u=0;u<s.length;u++){const l=s[u]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&o.dispose(s[u],t))}if(!t){for(const u in n)if(u[0]==="g"){const l=n[u];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let u=null;for(const l in a){const h=a[l],c=o[h.buffer],d=c._glBuffers[i];if(t.attributeData[l]){u!==d&&(s.bind(c),u=d);const p=t.attributeData[l].location;if(n.enableVertexAttribArray(p),n.vertexAttribPointer(p,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(p,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,u=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,u,(n||0)*a,i||1):s.drawElements(e,t||o.indexBuffer.data.length,u,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,t||o.getSize(),i||1):s.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}jA.extension={type:me.RendererSystem,name:"geometry"};Ee.add(jA);const NE=new wt;class Mg{constructor(e,t){this._texture=e,this.mapCoord=new wt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];t[i]=s*n.a+o*n.c+n.tx,t[i+1]=s*n.b+o*n.d+n.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=t.orig,s=t.trim;s&&(NE.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(NE));const o=t.baseTexture,a=this.uClampFrame,u=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+u+l)/o.width,a[1]=(t._frame.y+u+l)/o.height,a[2]=(t._frame.x+t._frame.width-u+l)/o.width,a[3]=(t._frame.y+t._frame.height-u+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&t.rotate===0,!0}}var Y4=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,G4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class W4 extends Yr{constructor(e,t,n){let i=null;typeof e!="string"&&t===void 0&&n===void 0&&(i=e,e=void 0,t=void 0,n=void 0),super(e||G4,t||Y4,n),this.maskSprite=i,this.maskMatrix=new wt}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Mg(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,i))}}class V4{constructor(e=null){this.type=ar.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Yr.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=ar.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class XA{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){const s=this.maskDataPool.pop()||new V4;s.pooled=!0,s.maskObject=t,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==ar.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case ar.SCISSOR:this.renderer.scissor.push(n);break;case ar.STENCIL:this.renderer.stencil.push(n);break;case ar.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case ar.COLOR:this.pushColorMask(n);break}n.type===ar.SPRITE&&this.maskStack.push(n)}pop(e){const t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case ar.SCISSOR:this.renderer.scissor.pop(t);break;case ar.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case ar.SPRITE:this.popSpriteMask(t);break;case ar.COLOR:this.popColorMask(t);break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===ar.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=ar.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=ar.SCISSOR:e.type=ar.STENCIL:e.type=ar.COLOR}pushSpriteMask(e){const{maskObject:t}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new W4])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;const s=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}XA.extension={type:me.RendererSystem,name:"mask"};Ee.add(XA);class HA{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const BE=new wt,LE=[],zA=class Fp extends HA{constructor(e){super(e),this.glConst=_e.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,s=i.renderTexture,o=n.getBounds(!0,LE.pop()??new $e);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:n,c:i,d:s}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||Fp.isMatrixRotated(t.worldTransform)||Fp.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,t,n,i,s){Fp.isMatrixRotated(s)||(s=s?BE.copyFrom(s):BE.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&LE.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};zA.extension={type:me.RendererSystem,name:"scissor"};let q4=zA;Ee.add(q4);class $A extends HA{constructor(e){super(e),this.glConst=_e.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}$A.extension={type:me.RendererSystem,name:"stencil"};Ee.add($A);class YA{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ve("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ve("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ve("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}YA.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"_plugin"};Ee.add(YA);class GA{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new wt,this.transform=null}update(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}GA.extension={type:me.RendererSystem,name:"projection"};Ee.add(GA);const K4=new kg,FE=new $e;class WA{constructor(e){this.renderer=e,this._tempMatrix=new wt}generateTexture(e,t){const{region:n,...i}=t||{},s=(n==null?void 0:n.copyTo(FE))||e.getLocalBounds(FE,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=Sl.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const u=e.transform;return e.transform=K4,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=u,a}destroy(){}}WA.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"textureGenerator"};Ee.add(WA);const Xa=new $e,qc=new $e;class VA{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new $e,this.destinationFrame=new $e,this.viewportFrame=new $e}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,t||(Xa.width=e.frame.width,Xa.height=e.frame.height,t=Xa),n||(qc.x=e.frame.x,qc.y=e.frame.y,qc.width=t.width,qc.height=t.height,n=qc),o=s.framebuffer):(a=i.resolution,t||(Xa.width=i._view.screen.width,Xa.height=i._view.screen.height,t=Xa),n||(n=Xa,n.width=t.width,n.height=t.height));const u=this.viewportFrame;u.x=n.x*a,u.y=n.y*a,u.width=n.width*a,u.height=n.height*a,e||(u.y=i.view.height-(u.y+u.height)),u.ceil(),this.renderer.framebuffer.bind(o,u),this.renderer.projection.update(n,t,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=ot.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:u,y:l,width:h,height:c}=this.viewportFrame;u=Math.round(u),l=Math.round(l),h=Math.round(h),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(u,l,h,c)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}VA.extension={type:me.RendererSystem,name:"renderTexture"};Ee.add(VA);class Q4{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function Z4(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(r,i);if(s.name.startsWith("gl_"))continue;const o=MA(e,s.type),a={type:o,name:s.name,size:IA(o),location:e.getAttribLocation(r,s.name)};t[s.name]=a}return t}function J4(r,e){const t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(r,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),u=MA(e,s.type);t[o]={name:o,index:i,type:u,size:s.size,isArray:a,value:AA(u,s.size)}}return t}function e6(r,e){var a;const t=AE(r,r.VERTEX_SHADER,e.vertexSrc),n=AE(r,r.FRAGMENT_SHADER,e.fragmentSrc),i=r.createProgram();r.attachShader(i,t),r.attachShader(i,n);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||I4(r,i,t,n),e.attributeData=Z4(i,r),e.uniformData=J4(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const u=Object.keys(e.attributeData);u.sort((l,h)=>l>h?1:-1);for(let l=0;l<u.length;l++)e.attributeData[u[l]].location=l,r.bindAttribLocation(i,l,u[l]);r.linkProgram(i)}r.deleteShader(t),r.deleteShader(n);const o={};for(const u in e.uniformData){const l=e.uniformData[u];o[u]={location:r.getUniformLocation(i,u),value:AA(l.type,l.size)}}return new Q4(i,o)}function t6(r,e,t,n,i){t.buffer.update(i)}const r6={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},qA={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function n6(r){const e=r.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=qA[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,n%t!==0&&n<16){const a=n%t%16;n+=a,i+=a}n+t>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=t,n=t):(o.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function i6(r,e){const t=[];for(const n in r)e[n]&&t.push(e[n]);return t.sort((n,i)=>n.index-i.index),t}function s6(r,e){if(!r.autoManage)return{size:0,syncFunc:t6};const t=i6(r.uniforms,e),{uboElements:n,size:i}=n6(t),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],u=r.uniforms[a.data.name],l=a.data.name;let h=!1;for(let c=0;c<Ou.length;c++){const d=Ou[c];if(d.codeUbo&&d.test(a.data,u)){s.push(`offset = ${a.offset/4};`,Ou[c].codeUbo(a.data.name,u)),h=!0;break}}if(!h)if(a.data.size>1){const c=IA(a.data.type),d=Math.max(qA[a.data.type]/16,1),p=c/d,g=(4-p%4)%4;s.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${p}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${g};
                }

                `)}else{const c=r6[a.data.type];s.push(`
                cv = ud.${l}.value;
                v = uv.${l};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let o6=0;const Xf={textureCount:0,uboCount:0};class KA{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=o6++}systemCheck(){if(!R4())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(Xf.textureCount=0,Xf.uboCount=0,this.syncUniformGroup(e.uniformGroup,Xf)),i}setUniforms(e){const t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=C4(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Xf,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=s6(e,this.shader.program.uniformData)),e.autoManage){const u=new Float32Array(a.size/4);e.buffer.update(u)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,n=e.program,i=e6(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}KA.extension={type:me.RendererSystem,name:"shader"};Ee.add(KA);class mm{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.2 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}mm.defaultOptions={hello:!1},mm.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"startup"};Ee.add(mm);function a6(r,e=[]){return e[Pe.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.ADD]=[r.ONE,r.ONE],e[Pe.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.NONE]=[0,0],e[Pe.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[Pe.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Pe.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[Pe.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[Pe.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Pe.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[Pe.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[Pe.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[Pe.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[Pe.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Pe.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}const l6=0,u6=1,c6=2,h6=3,d6=4,f6=5,QA=class F1{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Pe.NONE,this._blendEq=!1,this.map=[],this.map[l6]=this.setBlend,this.map[u6]=this.setOffset,this.map[c6]=this.setCullFace,this.map[h6]=this.setDepthTest,this.map[d6]=this.setFrontFace,this.map[f6]=this.setDepthMask,this.checks=[],this.defaultState=new Bs,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=a6(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(F1.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(F1.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};QA.extension={type:me.RendererSystem,name:"state"};let p6=QA;Ee.add(p6);class m6 extends md{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(i=>e.systems[i]),n=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Oi(t)})}addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,t){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const lh=class Dp{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Dp.defaultMaxIdle,this.checkCountMax=Dp.defaultCheckCountMax,this.mode=Dp.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==B_.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let n=!1;for(let i=0;i<t.length;i++){const s=t[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[i]=null,n=!0)}if(n){let i=0;for(let s=0;s<t.length;s++)t[s]!==null&&(t[i++]=t[s]);t.length=i}}unload(e){const t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};lh.defaultMode=B_.AUTO,lh.defaultMaxIdle=60*60,lh.defaultCheckCountMax=60*10,lh.extension={type:me.RendererSystem,name:"textureGC"};let qa=lh;Ee.add(qa);class Kv{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Te.UNSIGNED_BYTE,this.internalFormat=de.RGBA,this.samplerType=0}}function g6(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:we.FLOAT,[r.RGBA]:we.FLOAT,[r.ALPHA]:we.FLOAT,[r.LUMINANCE]:we.FLOAT,[r.LUMINANCE_ALPHA]:we.FLOAT,[r.R8]:we.FLOAT,[r.R8_SNORM]:we.FLOAT,[r.RG8]:we.FLOAT,[r.RG8_SNORM]:we.FLOAT,[r.RGB8]:we.FLOAT,[r.RGB8_SNORM]:we.FLOAT,[r.RGB565]:we.FLOAT,[r.RGBA4]:we.FLOAT,[r.RGB5_A1]:we.FLOAT,[r.RGBA8]:we.FLOAT,[r.RGBA8_SNORM]:we.FLOAT,[r.RGB10_A2]:we.FLOAT,[r.RGB10_A2UI]:we.FLOAT,[r.SRGB8]:we.FLOAT,[r.SRGB8_ALPHA8]:we.FLOAT,[r.R16F]:we.FLOAT,[r.RG16F]:we.FLOAT,[r.RGB16F]:we.FLOAT,[r.RGBA16F]:we.FLOAT,[r.R32F]:we.FLOAT,[r.RG32F]:we.FLOAT,[r.RGB32F]:we.FLOAT,[r.RGBA32F]:we.FLOAT,[r.R11F_G11F_B10F]:we.FLOAT,[r.RGB9_E5]:we.FLOAT,[r.R8I]:we.INT,[r.R8UI]:we.UINT,[r.R16I]:we.INT,[r.R16UI]:we.UINT,[r.R32I]:we.INT,[r.R32UI]:we.UINT,[r.RG8I]:we.INT,[r.RG8UI]:we.UINT,[r.RG16I]:we.INT,[r.RG16UI]:we.UINT,[r.RG32I]:we.INT,[r.RG32UI]:we.UINT,[r.RGB8I]:we.INT,[r.RGB8UI]:we.UINT,[r.RGB16I]:we.INT,[r.RGB16UI]:we.UINT,[r.RGB32I]:we.INT,[r.RGB32UI]:we.UINT,[r.RGBA8I]:we.INT,[r.RGBA8UI]:we.UINT,[r.RGBA16I]:we.INT,[r.RGBA16UI]:we.UINT,[r.RGBA32I]:we.INT,[r.RGBA32UI]:we.UINT,[r.DEPTH_COMPONENT16]:we.FLOAT,[r.DEPTH_COMPONENT24]:we.FLOAT,[r.DEPTH_COMPONENT32F]:we.FLOAT,[r.DEPTH_STENCIL]:we.FLOAT,[r.DEPTH24_STENCIL8]:we.FLOAT,[r.DEPTH32F_STENCIL8]:we.FLOAT}:e={[r.RGB]:we.FLOAT,[r.RGBA]:we.FLOAT,[r.ALPHA]:we.FLOAT,[r.LUMINANCE]:we.FLOAT,[r.LUMINANCE_ALPHA]:we.FLOAT,[r.DEPTH_STENCIL]:we.FLOAT},e}function v6(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[Te.UNSIGNED_BYTE]:{[de.RGBA]:r.RGBA8,[de.RGB]:r.RGB8,[de.RG]:r.RG8,[de.RED]:r.R8,[de.RGBA_INTEGER]:r.RGBA8UI,[de.RGB_INTEGER]:r.RGB8UI,[de.RG_INTEGER]:r.RG8UI,[de.RED_INTEGER]:r.R8UI,[de.ALPHA]:r.ALPHA,[de.LUMINANCE]:r.LUMINANCE,[de.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Te.BYTE]:{[de.RGBA]:r.RGBA8_SNORM,[de.RGB]:r.RGB8_SNORM,[de.RG]:r.RG8_SNORM,[de.RED]:r.R8_SNORM,[de.RGBA_INTEGER]:r.RGBA8I,[de.RGB_INTEGER]:r.RGB8I,[de.RG_INTEGER]:r.RG8I,[de.RED_INTEGER]:r.R8I},[Te.UNSIGNED_SHORT]:{[de.RGBA_INTEGER]:r.RGBA16UI,[de.RGB_INTEGER]:r.RGB16UI,[de.RG_INTEGER]:r.RG16UI,[de.RED_INTEGER]:r.R16UI,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[Te.SHORT]:{[de.RGBA_INTEGER]:r.RGBA16I,[de.RGB_INTEGER]:r.RGB16I,[de.RG_INTEGER]:r.RG16I,[de.RED_INTEGER]:r.R16I},[Te.UNSIGNED_INT]:{[de.RGBA_INTEGER]:r.RGBA32UI,[de.RGB_INTEGER]:r.RGB32UI,[de.RG_INTEGER]:r.RG32UI,[de.RED_INTEGER]:r.R32UI,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[Te.INT]:{[de.RGBA_INTEGER]:r.RGBA32I,[de.RGB_INTEGER]:r.RGB32I,[de.RG_INTEGER]:r.RG32I,[de.RED_INTEGER]:r.R32I},[Te.FLOAT]:{[de.RGBA]:r.RGBA32F,[de.RGB]:r.RGB32F,[de.RG]:r.RG32F,[de.RED]:r.R32F,[de.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[Te.HALF_FLOAT]:{[de.RGBA]:r.RGBA16F,[de.RGB]:r.RGB16F,[de.RG]:r.RG16F,[de.RED]:r.R16F},[Te.UNSIGNED_SHORT_5_6_5]:{[de.RGB]:r.RGB565},[Te.UNSIGNED_SHORT_4_4_4_4]:{[de.RGBA]:r.RGBA4},[Te.UNSIGNED_SHORT_5_5_5_1]:{[de.RGBA]:r.RGB5_A1},[Te.UNSIGNED_INT_2_10_10_10_REV]:{[de.RGBA]:r.RGB10_A2,[de.RGBA_INTEGER]:r.RGB10_A2UI},[Te.UNSIGNED_INT_10F_11F_11F_REV]:{[de.RGB]:r.R11F_G11F_B10F},[Te.UNSIGNED_INT_5_9_9_9_REV]:{[de.RGB]:r.RGB9_E5},[Te.UNSIGNED_INT_24_8]:{[de.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[Te.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[de.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[Te.UNSIGNED_BYTE]:{[de.RGBA]:r.RGBA,[de.RGB]:r.RGB,[de.ALPHA]:r.ALPHA,[de.LUMINANCE]:r.LUMINANCE,[de.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[Te.UNSIGNED_SHORT_5_6_5]:{[de.RGB]:r.RGB},[Te.UNSIGNED_SHORT_4_4_4_4]:{[de.RGBA]:r.RGBA},[Te.UNSIGNED_SHORT_5_5_5_1]:{[de.RGBA]:r.RGBA}},e}class ZA{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new De,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=v6(e),this.samplerTypes=g6(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Kv(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Kv(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[i].samplerType!==we.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new Kv(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){var n;t.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??we.FLOAT,this.webGLVersion===2&&e.type===Te.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){var i;const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const n=this.renderer;if(this.initTextureType(e,t),(i=e.resource)==null?void 0:i.upload(n,e,t))t.samplerType!==we.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=n.gl;(t.width!==s||t.height!==o||t.dirtyId<0)&&(t.width=s,t.height=o,a.texImage2D(e.target,0,t.internalFormat,s,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const i=this.managedTextures.indexOf(e);i!==-1&&Ru(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===li.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=oi.CLAMP:t.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const n=this.gl;if(t.mipmap&&e.mipmap!==li.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===ki.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===ki.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===ki.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===ki.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}ZA.extension={type:me.RendererSystem,name:"texture"};Ee.add(ZA);class JA{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:n,renderer:i}=this;t&&i.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:n,CONTEXT_UID:i}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[i]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const u=a._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&s.dispose(a,t))}n&&(t||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}JA.extension={type:me.RendererSystem,name:"transformFeedback"};Ee.add(JA);class gm{constructor(e){this.renderer=e}init(e){this.screen=new $e(0,0,e.width,e.height),this.element=e.view||_e.ADAPTER.createCanvas(),this.resolution=e.resolution||_e.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var t;e&&((t=this.element.parentNode)==null||t.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}gm.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},gm.extension={type:[me.RendererSystem,me.CanvasRendererSystem],name:"_view"};Ee.add(gm);_e.PREFER_ENV=bl.WEBGL2;_e.STRICT_TEXTURE_CACHE=!1;_e.RENDER_OPTIONS={...pm.defaultOptions,...fm.defaultOptions,...gm.defaultOptions,...mm.defaultOptions};Object.defineProperties(_e,{WRAP_MODE:{get(){return De.defaultOptions.wrapMode},set(r){Ve("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),De.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return De.defaultOptions.scaleMode},set(r){Ve("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),De.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return De.defaultOptions.mipmap},set(r){Ve("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),De.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return De.defaultOptions.anisotropicLevel},set(r){Ve("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),De.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return Ve("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Yr.defaultResolution},set(r){Yr.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return Ve("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Yr.defaultMultisample},set(r){Yr.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Go.defaultMaxTextures},set(r){Ve("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Go.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Go.defaultBatchSize},set(r){Ve("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Go.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Go.canUploadSameBuffer},set(r){Ve("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Go.canUploadSameBuffer=r}},GC_MODE:{get(){return qa.defaultMode},set(r){Ve("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),qa.defaultMode=r}},GC_MAX_IDLE:{get(){return qa.defaultMaxIdle},set(r){Ve("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),qa.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return qa.defaultCheckCountMax},set(r){Ve("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),qa.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return _s.defaultVertexPrecision},set(r){Ve("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),_s.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return _s.defaultFragmentPrecision},set(r){Ve("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),_s.defaultFragmentPrecision=r}}});var wa=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(wa||{});class Qv{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const ek=class An{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Qv(null,null,1/0),this.deltaMS=1/An.targetFPMS,this.elapsedMS=1/An.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=wa.NORMAL){return this._addListener(new Qv(e,t,n))}addOnce(e,t,n=wa.NORMAL){return this._addListener(new Qv(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*An.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,An.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!An._shared){const e=An._shared=new An;e.autoStart=!0,e._protected=!0}return An._shared}static get system(){if(!An._system){const e=An._system=new An;e.autoStart=!0,e._protected=!0}return An._system}};ek.targetFPMS=.06;let Dt=ek;Object.defineProperties(_e,{TARGET_FPMS:{get(){return Dt.targetFPMS},set(r){Ve("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Dt.targetFPMS=r}}});class tk{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,wa.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Dt.shared:new Dt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}tk.extension=me.Application;Ee.add(tk);const rk=[];Ee.handleByList(me.Renderer,rk);function y6(r){for(const e of rk)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var x6=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,_6=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const w6=x6,nk=_6;class ik{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=er.HIGH?this.multisample=er.HIGH:t>=er.MEDIUM?this.multisample=er.MEDIUM:t>=er.LOW?this.multisample=er.LOW:this.multisample=er.NONE}destroy(){}}ik.extension={type:me.RendererSystem,name:"_multisample"};Ee.add(ik);class b6{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class sk{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,o.buffer,n*256,256)}update(e){const{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new b6(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}sk.extension={type:me.RendererSystem,name:"buffer"};Ee.add(sk);class ok{constructor(e){this.renderer=e}render(e,t){const n=this.renderer;let i,s,o,a;if(t&&(i=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){const u=e.enableTempParent();e.updateTransform(),e.disableTempParent(u)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(t.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ok.extension={type:me.RendererSystem,name:"objectRenderer"};Ee.add(ok);const Up=class D1 extends m6{constructor(e){super(),this.type=GC.WEBGL,e=Object.assign({},_e.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ni({projectionMatrix:new wt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:D1.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(Ve("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=D1.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:vA()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ve("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ve("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ve("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ve("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ve("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ve("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ve("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ve("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Up.extension={type:me.Renderer,priority:1},Up.__plugins={},Up.__systems={};let Y_=Up;Ee.handleByMap(me.RendererPlugin,Y_.__plugins);Ee.handleByMap(me.RendererSystem,Y_.__systems);Ee.add(Y_);class ak extends zh{constructor(e,t){const{width:n,height:i}=t||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new De;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof zh?this.addResourceAt(e[n],n):this.addResourceAt(TA(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{const{realWidth:t,realHeight:n}=this.items[0];return this.resize(t,n),this.update(),Promise.resolve(this)}),this._load}}class S6 extends ak{constructor(e,t){const{width:n,height:i}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=ku.TEXTURE_2D_ARRAY}upload(e,t,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(let u=0;u<i;u++){const l=o[u];s[u]<l.dirtyId&&(s[u]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,u,l.resource.width,l.resource.height,1,t.format,n.type,l.resource.source))}return!0}}class T6 extends vo{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const lk=class uh extends ak{constructor(e,t){const{width:n,height:i,autoLoad:s,linkBaseTexture:o}=t||{};if(e&&e.length!==uh.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<uh.SIDES;a++)this.items[a].target=ku.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,t),s!==!1&&this.load()}bind(e){super.bind(e),e.target=ku.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=ku.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,n){const i=this.itemDirtyIds;for(let s=0;s<uh.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||n.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,n),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,n.internalFormat,t.realWidth,t.realHeight,0,t.format,n.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===uh.SIDES}};lk.SIDES=6;let E6=lk;class au extends vo{constructor(e,t){t=t||{};let n,i,s;typeof e=="string"?(n=au.EMPTY,i=e,s=!0):(n=e,i=null,s=!1),super(n),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??s,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,t)=>{if(this.url===null){e(this);return}try{const n=await _e.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===$r.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}}),this._load)}upload(e,t,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return au._EMPTY=au._EMPTY??_e.ADAPTER.createCanvas(0,0),au._EMPTY}}const U1=class jp extends vo{constructor(e,t){t=t||{},super(_e.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},jp.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;vo.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,s=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*t,s=this._overrideHeight||this._overrideWidth/t*n),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${fl()}`,o.getContext("2d").drawImage(e,0,0,t,n,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const t=jp.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&jp.SVG_XML.test(e)}};U1.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,U1.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let j1=U1;class P6 extends vo{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const X1=class H1 extends vo{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const n=document.createElement("video");t.autoLoad!==!1&&n.setAttribute("preload","auto"),t.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),t.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),t.loop===!0&&n.setAttribute("loop",""),t.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];vo.crossOrigin(n,i,t.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:u}=e[s];if(a=a||e[s],a.startsWith("data:"))u=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const l=a.split("?").shift().toLowerCase(),h=l.slice(l.lastIndexOf(".")+1);u=u||H1.MIME_TYPES[h]||`video/${h}`}o.src=a,u&&(o.type=u),n.appendChild(o)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const t=Dt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Dt.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||H1.TYPES.includes(t)}};X1.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],X1.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let uk=X1;C1.push(au,BA,T6,uk,P6,j1,Eg,E6,S6);class vm{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?$e.EMPTY:(e=e||new $e(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:n,b:i,c:s,d:o,tx:a,ty:u}=e,l=n*t.x+s*t.y+a,h=i*t.x+o*t.y+u;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let t=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=t,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,t,n,i,s){this.addFrameMatrix(e.worldTransform,t,n,i,s)}addFrameMatrix(e,t,n,i,s){const o=e.a,a=e.b,u=e.c,l=e.d,h=e.tx,c=e.ty;let d=this.minX,p=this.minY,g=this.maxX,v=this.maxY,x=o*t+u*n+h,y=a*t+l*n+c;d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,x=o*i+u*n+h,y=a*i+l*n+c,d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,x=o*t+u*s+h,y=a*t+l*s+c,d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,x=o*i+u*s+h,y=a*i+l*s+c,d=x<d?x:d,p=y<p?y:p,g=x>g?x:g,v=y>v?y:v,this.minX=d,this.minY=p,this.maxX=g,this.maxY=v}addVertexData(e,t,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let u=t;u<n;u+=2){const l=e[u],h=e[u+1];i=l<i?l:i,s=h<s?h:s,o=l>o?l:o,a=h>a?h:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)}addVerticesMatrix(e,t,n,i,s=0,o=s){const a=e.a,u=e.b,l=e.c,h=e.d,c=e.tx,d=e.ty;let p=this.minX,g=this.minY,v=this.maxX,x=this.maxY;for(let y=n;y<i;y+=2){const w=t[y],_=t[y+1],S=a*w+l*_+c,I=h*_+u*w+d;p=Math.min(p,S-s),v=Math.max(v,S+s),g=Math.min(g,I-o),x=Math.max(x,I+o)}this.minX=p,this.minY=g,this.maxX=v,this.maxY=x}addBounds(e){const t=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=s&&i<=o){const a=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=o>h?o:h}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=s&&i<=o){const a=this.minX,u=this.minY,l=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<u?i:u,this.maxX=s>l?s:l,this.maxY=o>h?o:h}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,i,s,o){e-=s,t-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}}class Mt extends md{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new kg,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new vm,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const i=t[n];Object.defineProperty(Mt.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new $e),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new $e),e=this._localBoundsRect),this._localBounds||(this._localBounds=new vm);const t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(n==null?void 0:n.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,i){return t&&(e=t.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,t=0,n=1,i=1,s=0,o=0,a=0,u=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=u,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new C6),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*_4}set angle(e){this.transform.rotation=e*w4}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class C6 extends Mt{constructor(){super(...arguments),this.sortDirty=null}}Mt.prototype.displayObjectUpdateTransform=Mt.prototype.updateTransform;const A6=new wt;function k6(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}const ck=class z1 extends Mt{constructor(){super(),this.children=[],this.sortableChildren=z1.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const n=this.getChildIndex(e),i=this.getChildIndex(t);this.children[n]=t,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);Ru(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,Ru(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Ru(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const n=e,i=t,s=i-n;let o;if(s>0&&s<=i){o=this.children.splice(n,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){const i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(k6),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const n=super.getLocalBounds(e);if(!t)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==z1.prototype._render&&(n=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=A6.copyFrom(i),i.prepend(s)):i=s),n&&t.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const u=this.children[o],l=u.cullable;u.cullable=l||!this.cullArea,u.render(e),u.cullable=l}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){var s,o,a;const t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let u=0;u<t.length;u++)t[u].enabled&&this._enabledFilters.push(t[u])}const i=t&&((s=this._enabledFilters)==null?void 0:s.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==ar.NONE));if(i&&e.batch.flush(),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let u=0,l=this.children.length;u<l;++u)this.children[u].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,n=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};ck.defaultSortableChildren=!1;let qr=ck;qr.prototype.containerUpdateTransform=qr.prototype.updateTransform;Object.defineProperties(_e,{SORTABLE_CHILDREN:{get(){return qr.defaultSortableChildren},set(r){Ve("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),qr.defaultSortableChildren=r}}});const Kc=new je,I6=new Uint16Array([0,1,2,0,2,3]);class Yi extends qr{constructor(e){super(),this._anchor=new Ii(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new ot(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Pe.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Me.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=I6,this.pluginName="batch",this.isSprite=!0,this._roundPixels=_e.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=na(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=na(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,u=t.ty,l=this.vertexData,h=e.trim,c=e.orig,d=this._anchor;let p=0,g=0,v=0,x=0;if(h?(g=h.x-d._x*c.width,p=g+h.width,x=h.y-d._y*c.height,v=x+h.height):(g=-d._x*c.width,p=g+c.width,x=-d._y*c.height,v=x+c.height),l[0]=n*g+s*x+a,l[1]=o*x+i*g+u,l[2]=n*p+s*x+a,l[3]=o*x+i*p+u,l[4]=n*p+s*v+a,l[5]=o*v+i*p+u,l[6]=n*g+s*v+a,l[7]=o*v+i*g+u,this._roundPixels){const y=_e.RESOLUTION;for(let w=0;w<l.length;++w)l[w]=Math.round(l[w]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,u=s.c,l=s.d,h=s.tx,c=s.ty,d=-i._x*n.width,p=d+n.width,g=-i._y*n.height,v=g+n.height;if(t[0]=o*d+u*g+h,t[1]=l*g+a*d+c,t[2]=o*p+u*g+h,t[3]=l*g+a*p+c,t[4]=o*p+u*v+h,t[5]=l*v+a*p+c,t[6]=o*d+u*v+h,t[7]=l*v+a*d+c,this._roundPixels){const x=_e.RESOLUTION;for(let y=0;y<t.length;++y)t[y]=Math.round(t[y]*x)/x}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new vm),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new $e),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Kc);const t=this._texture.orig.width,n=this._texture.orig.height,i=-t*this.anchor.x;let s=0;return Kc.x>=i&&Kc.x<i+t&&(s=-n*this.anchor.y,Kc.y>=s&&Kc.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const t=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const n=e instanceof Me?e:Me.from(e,t);return new Yi(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=na(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=na(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Me.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const hk=new wt;Mt.prototype._cacheAsBitmap=!1;Mt.prototype._cacheData=null;Mt.prototype._cacheAsBitmapResolution=null;Mt.prototype._cacheAsBitmapMultisample=null;class M6{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Mt.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new M6),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Mt.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Mt.prototype._initCachedDisplayObject=function(r){var d,p;if((d=this._cacheData)!=null&&d.sprite)return;const e=this.alpha;this.alpha=1,r.batch.flush();const t=this.getLocalBounds(new $e,!0);if((p=this.filters)!=null&&p.length){const g=this.filters[0].padding;t.pad(g)}const n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const i=r.renderTexture.current,s=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,u=Sl.create({width:t.width,height:t.height,resolution:n,multisample:this.cacheAsBitmapMultisample??r.multisample}),l=`cacheAsBitmap_${fl()}`;this._cacheData.textureCacheId=l,De.addToCache(u.baseTexture,l),Me.addToCache(u,l);const h=this.transform.localTransform.copyTo(hk).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:u,clear:!0,transform:h,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const c=new Yi(u);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(t.x/t.width),c.anchor.y=-(t.y/t.height),c.alpha=e,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};Mt.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Mt.prototype._initCachedDisplayObjectCanvas=function(r){var h;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.getLocalBounds(new $e,!0),t=this.alpha;this.alpha=1;const n=r.canvasContext.activeContext,i=r._projTransform,s=this.cacheAsBitmapResolution||r.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=Sl.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${fl()}`;this._cacheData.textureCacheId=a,De.addToCache(o.baseTexture,a),Me.addToCache(o,a);const u=hk;this.transform.localTransform.copyTo(u),u.invert(),u.tx-=e.x,u.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:u,skipUpdateTransform:!1}),r.canvasContext.activeContext=n,r._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const l=new Yi(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-(e.x/e.width),l.anchor.y=-(e.y/e.height),l.alpha=t,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)};Mt.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Mt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Mt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,De.removeFromCache(this._cacheData.textureCacheId),Me.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Mt.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Mt.prototype.name=null;qr.prototype.getChildByName=function(r,e){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,n=this.children.length;t<n;t++){const i=this.children[t];if(!i.getChildByName)continue;const s=i.getChildByName(r,!0);if(s)return s}return null};Mt.prototype.getGlobalPosition=function(r=new je,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var R6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class O6 extends Yr{constructor(e=1){super(w6,R6,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const N6={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},B6=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function L6(r){const e=N6[r],t=e.length;let n=B6,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let u=s.replace("%index%",a.toString());o=a,a>=t&&(o=r-a-1),u=u.replace("%value%",e[o].toString()),i+=u,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}const F6=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function D6(r,e){const t=Math.ceil(r/2);let n=F6,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(t-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}class $1 extends Yr{constructor(e,t=8,n=4,i=Yr.defaultResolution,s=5){const o=D6(s,e),a=L6(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=t,u=s;this.state.blend=!1,e.applyFilter(this,a,u,ms.CLEAR);for(let l=1;l<this.passes-1;l++){e.bindAndClear(a,ms.BLIT),this.uniforms.uSampler=u;const h=u;u=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,u,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class U6 extends Yr{constructor(e=8,t=4,n=Yr.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new $1(!0,e,t,n,i),this.blurYFilter=new $1(!1,e,t,n,i),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,ms.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,i):this.blurXFilter.apply(e,t,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var j6=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Y1 extends Yr{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(nk,j6,e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){const[n,i,s]=ot.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){const t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),u=n+(1-n)*o,l=o*(1-n)-a*i,h=o*(1-n)+a*i,c=o*(1-n)+a*i,d=n+o*(1-n),p=o*(1-n)-a*i,g=o*(1-n)-a*i,v=o*(1-n)+a*i,x=n+o*(1-n),y=[u,l,h,0,0,c,d,p,0,0,g,v,x,0,0,0,0,0,1,0];this._loadMatrix(y,t)}contrast(e,t){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,t)}saturate(e=0,t){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,t)}desaturate(){this.saturate(-1)}negative(e){const t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){const t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){const t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){const t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){const t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){const t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){const t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){const t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,n,i,s){e=e||.2,t=t||.15,n=n||16770432,i=i||3375104;const o=ot.shared,[a,u,l]=o.setValue(n).toArray(),[h,c,d]=o.setValue(i).toArray(),p=[.3,.59,.11,0,0,a,u,l,e,0,h,c,d,t,0,a-h,u-c,l-d,0,0];this._loadMatrix(p,s)}night(e,t){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){const t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Y1.prototype.grayscale=Y1.prototype.greyscale;var X6=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,H6=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class z6 extends Yr{constructor(e,t){const n=new wt;e.renderable=!1,super(H6,X6,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,t==null&&(t=20),this.scale=new je(t,t)}apply(e,t,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,t,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var $6=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,Y6=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class G6 extends Yr{constructor(){super(Y6,$6)}}var W6=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class V6 extends Yr{constructor(e=.5,t=Math.random()){super(nk,W6,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const DE={AlphaFilter:O6,BlurFilter:U6,BlurFilterPass:$1,ColorMatrixFilter:Y1,DisplacementFilter:z6,FXAAFilter:G6,NoiseFilter:V6};Object.entries(DE).forEach(([r,e])=>{Object.defineProperty(DE,r,{get(){return Ve("7.1.0",`filters.${r} has moved to ${r}`),e}})});class q6{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Dt.system.add(this.tickerUpdate,this,wa.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Dt.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Zo=new q6;class yd{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=yd.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new je,this.page=new je,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ym extends yd{constructor(){super(...arguments),this.client=new je,this.movement=new je,this.offset=new je,this.global=new je,this.screen=new je}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,s,o,a,u,l,h,c,d,p,g,v){throw new Error("Method not implemented.")}}class bi extends ym{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Nu extends ym{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Nu.DOM_DELTA_PIXEL=0,Nu.DOM_DELTA_LINE=1,Nu.DOM_DELTA_PAGE=2;const K6=2048,Q6=new je,Zv=new je;class Z6{constructor(e){this.dispatch=new md,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){Zo.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,Q6.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(t)?t:[t];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const t=[e];for(let n=0;n<K6&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Zo.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const d=h[c],p=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,i,s,o||s(e,n));if(p){if(p.length>0&&!p[p.length-1].parent)continue;const g=e.isInteractive();(p.length>0||g)&&(g&&this._allInteractiveElements.push(e),p.push(e)),this._hitElements.length===0&&(this._hitElements=p),a=!0}}}const u=this._isInteractive(t),l=e.isInteractive();return u&&l&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:u&&!s(e,n)&&i(e,n)?l?[e]:[]:null}hitTestRecursive(e,t,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(Zo.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let l=u.length-1;l>=0;l--){const h=u[l],c=this.hitTestRecursive(h,this._isInteractive(t)?t:h.eventMode,n,i,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const d=e.isInteractive();return(c.length>0||d)&&c.push(e),c}}}const o=this._isInteractive(t),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){var n;if(e.hitArea&&(e.worldTransform.applyInverse(t,Zv),!e.hitArea.contains(Zv.x,Zv.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,t)))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){var s,o;t=t??e.type;const n=`on${t}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){const i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){var u,l;if(!(e instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((u=i.overTargets)==null?void 0:u.length)>0&&s!==t.target){const h=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,h,s);if(this.dispatchEvent(c,"pointerout"),n&&this.dispatchEvent(c,"mouseout"),!t.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!t.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}if(s!==t.target){const h=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(t,h);this.dispatchEvent(c,"pointerover"),n&&this.dispatchEvent(c,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==t.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(t,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&o.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(l=t.target)==null?void 0:l.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){var o;if(!(e instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId);if(t.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const u=n.button===2;this.notifyTarget(n,u?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const u=i.clicksByButton[e.button];if(u.target===a.target&&t-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=a.target,u.timeStamp=t,a.detail=u.clickCount,a.pointerType==="mouse"){const l=a.button===2;this.dispatchEvent(a,l?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof bi)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Nu)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const i=this.allocateEvent(bi);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){const t=this.allocateEvent(Nu);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(bi);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof bi&&t instanceof bi&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof ym&&t instanceof ym&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const J6=1,e8={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},G1=class W1{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Z6(null),Zo.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new bi(null),this.rootWheelEvent=new Nu(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...W1.defaultEventFeatures},{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,W1._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){const s=t[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Zo.pointerMoved();const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){const s=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Zo.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Zo.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Zo.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=J6),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=e8[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};G1.extension={name:"events",type:[me.RendererSystem,me.CanvasRendererSystem]},G1.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let V1=G1;Ee.add(V1);function UE(r){return r==="dynamic"||r==="static"}const t8={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??UE(V1.defaultEventMode)},set interactive(r){Ve("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??V1.defaultEventMode},set eventMode(r){this._internalInteractive=UE(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,s=typeof t=="object"?t.once===!0:!1,o=typeof e=="function"?void 0:e;r=n?`${r}capture`:r;const a=typeof e=="function"?e:e.handleEvent,u=this;i&&i.addEventListener("abort",()=>{u.off(r,a,o)}),s?u.once(r,a,o):u.on(r,a,o)},removeEventListener(r,e,t){const n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof yd))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Mt.mixin(t8);const r8={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Mt.mixin(r8);const n8=9,Hf=100,i8=0,s8=0,jE=2,XE=1,o8=-1e3,a8=-1e3,l8=2;class dk{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ni.tablet||ni.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width=`${Hf}px`,t.style.height=`${Hf}px`,t.style.position="absolute",t.style.top=`${i8}px`,t.style.left=`${s8}px`,t.style.zIndex=jE.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${XE}px`,e.style.height=`${XE}px`,e.style.position="absolute",e.style.top=`${o8}px`,e.style.left=`${a8}px`,e.style.zIndex=l8.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){const e=performance.now();if(ni.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:u}=this.renderer,l=i/o*u,h=s/a*u;let c=this.div;c.style.left=`${t}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const p=this.children[d];if(p.renderId!==this.renderId)p._accessibleActive=!1,Ru(this.children,d,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,d--;else{c=p._accessibleDiv;let g=p.hitArea;const v=p.worldTransform;p.hitArea?(c.style.left=`${(v.tx+g.x*v.a)*l}px`,c.style.top=`${(v.ty+g.y*v.d)*h}px`,c.style.width=`${g.width*v.a*l}px`,c.style.height=`${g.height*v.d*h}px`):(g=p.getBounds(),this.capHitArea(g),c.style.left=`${g.x*l}px`,c.style.top=`${g.y*h}px`,c.style.width=`${g.width*l}px`,c.style.height=`${g.height*h}px`,c.title!==p.accessibleTitle&&p.accessibleTitle!==null&&(c.title=p.accessibleTitle),c.getAttribute("aria-label")!==p.accessibleHint&&p.accessibleHint!==null&&c.setAttribute("aria-label",p.accessibleHint)),(p.accessibleTitle!==c.title||p.tabIndex!==c.tabIndex)&&(c.title=p.accessibleTitle,c.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${Hf}px`,t.style.height=`${Hf}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=jE.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new yd(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===n8&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}dk.extension={name:"accessibility",type:[me.RendererPlugin,me.CanvasRendererPlugin]};Ee.add(dk);const fk=class q1{constructor(e){this.stage=new qr,e=Object.assign({forceCanvas:!1},e),this.renderer=y6(e),q1._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,t){const n=q1._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};fk._plugins=[];let Rg=fk;Ee.handleByList(me.Application,Rg._plugins);class pk{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;t=i,n=s}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}pk.extension=me.Application;Ee.add(pk);const HE={loader:me.LoadParser,resolver:me.ResolveParser,cache:me.CacheParser,detection:me.DetectionParser};Ee.handle(me.Asset,r=>{const e=r.ref;Object.entries(HE).filter(([t])=>!!e[t]).forEach(([t,n])=>Ee.add(Object.assign(e[t],{extension:e[t].extension??n})))},r=>{const e=r.ref;Object.keys(HE).filter(t=>!!e[t]).forEach(t=>Ee.remove(e[t]))});class u8{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function xc(r,e){if(Array.isArray(e)){for(const t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function Nn(r,e){const t=r.split("?")[0],n=$t.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const Pi=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r),K1=(r,e)=>{const t=e.split("?")[1];return t&&(r+=`?${t}`),r};function mk(r,e,t,n,i){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?mk(r.replace(n[t],a),e,t+1,n,i):i.push(r.replace(n[t],a))}}function c8(r){const e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){const i=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),mk(r,i,0,t,n)}else n.push(r);return n}const xm=r=>!Array.isArray(r);class h8{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=Pi(e);let i;for(let a=0;a<this.parsers.length;a++){const u=this.parsers[a];if(u.test(t)){i=u.getCacheableAssets(n,t);break}}i||(i={},n.forEach(a=>{i[a]=t}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof Me){const a=t;n.forEach(u=>{a.baseTexture!==Me.EMPTY.baseTexture&&De.addToCache(a.baseTexture,u),Me.addToCache(a,u)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const t=this._cacheMap.get(e);t.cacheKeys.forEach(n=>{this._cache.delete(n)}),t.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const el=new h8;class d8{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(t.loadParser&&(s=this._parserHash[t.loadParser],s||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!s){for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];if(l.load&&((o=l.test)!=null&&o.call(l,e,t,this))){s=l;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,t,this),n.parser=s;for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];l.parse&&l.parse&&await((a=l.testParse)==null?void 0:a.call(l,i,t,this))&&(i=await l.parse(i,t,this)||i,n.parser=l)}return i})(),n}async load(e,t){this._parsersValidated||this._validateParsers();let n=0;const i={},s=xm(e),o=Pi(e,l=>({alias:[l],src:l})),a=o.length,u=o.map(async l=>{const h=$t.toAbsolute(l.src);if(!i[l.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,l)),i[l.src]=await this.promiseCache[h].promise,t&&t(++n/a)}catch(c){throw delete this.promiseCache[h],delete i[l.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(u),s?i[o[0].src]:i}async unload(e){const t=Pi(e,n=>({alias:[n],src:n})).map(async n=>{var o,a;const i=$t.toAbsolute(n.src),s=this.promiseCache[i];if(s){const u=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,u,n,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var jn=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(jn||{});const f8=".json",p8="application/json",m8={extension:{type:me.LoadParser,priority:jn.Low},name:"loadJson",test(r){return xc(r,p8)||Nn(r,f8)},async load(r){return await(await _e.ADAPTER.fetch(r)).json()}};Ee.add(m8);const g8=".txt",v8="text/plain",y8={name:"loadTxt",extension:{type:me.LoadParser,priority:jn.Low},test(r){return xc(r,v8)||Nn(r,g8)},async load(r){return await(await _e.ADAPTER.fetch(r)).text()}};Ee.add(y8);const x8=["normal","bold","100","200","300","400","500","600","700","800","900"],_8=[".ttf",".otf",".woff",".woff2"],w8=["font/ttf","font/otf","font/woff","font/woff2"],b8=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function S8(r){const e=$t.extname(r),t=$t.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let n=t.length>0;for(const s of t)if(!s.match(b8)){n=!1;break}let i=t.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const T8=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function E8(r){return T8.test(r)?r:encodeURI(r)}const P8={extension:{type:me.LoadParser,priority:jn.Low},name:"loadWebFont",test(r){return xc(r,w8)||Nn(r,_8)},async load(r,e){var n,i,s;const t=_e.ADAPTER.getFontFaceSet();if(t){const o=[],a=((n=e.data)==null?void 0:n.family)??S8(r),u=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(h=>x8.includes(h)))??["normal"],l=e.data??{};for(let h=0;h<u.length;h++){const c=u[h],d=new FontFace(a,`url(${E8(r)})`,{...l,weight:c});await d.load(),t.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>_e.ADAPTER.getFontFaceSet().delete(e))}};Ee.add(P8);const C8=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Bu=null,Q1=class{constructor(){Bu||(Bu=URL.createObjectURL(new Blob([C8],{type:"application/javascript"}))),this.worker=new Worker(Bu)}};Q1.revokeObjectURL=function(){Bu&&(URL.revokeObjectURL(Bu),Bu=null)};const A8=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Lu=null;class gk{constructor(){Lu||(Lu=URL.createObjectURL(new Blob([A8],{type:"application/javascript"}))),this.worker=new Worker(Lu)}}gk.revokeObjectURL=function(){Lu&&(URL.revokeObjectURL(Lu),Lu=null)};let zE=0,Jv;class k8{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new Q1;t.addEventListener("message",n=>{t.terminate(),Q1.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Jv===void 0&&(Jv=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Jv&&(this._createdWorkers++,e=new gk().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),n=t.id;this.resolveHash[zE]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:zE++,id:n})}}const $E=new k8;function xd(r,e,t){r.resource.internal=!0;const n=new Me(r),i=()=>{delete e.promiseCache[t],el.has(t)&&el.remove(t)};return n.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const I8=[".jpeg",".jpg",".png",".webp",".avif"],M8=["image/jpeg","image/png","image/webp","image/avif"];async function R8(r){const e=await _e.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);const t=await e.blob();return await createImageBitmap(t)}const Og={name:"loadTextures",extension:{type:me.LoadParser,priority:jn.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return xc(r,M8)||Nn(r,I8)},async load(r,e,t){var a;const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;n?this.config.preferWorkers&&await $E.isImageBitmapSupported()?i=await $E.loadImageBitmap(r):i=await R8(r):i=await new Promise((u,l)=>{const h=new Image;h.crossOrigin=this.config.crossOrigin,h.src=r,h.complete?u(h):(h.onload=()=>u(h),h.onerror=c=>l(c))});const s={...e.data};s.resolution??(s.resolution=go(r)),n&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new De(i,s);return o.resource.src=r,xd(o,t,r)},unload(r){r.destroy(!0)}};Ee.add(Og);const O8=".svg",N8="image/svg+xml",B8={extension:{type:me.LoadParser,priority:jn.High},name:"loadSVG",test(r){return xc(r,N8)||Nn(r,O8)},async testParse(r){return j1.test(r)},async parse(r,e,t){var s;const n=new j1(r,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await n.load();const i=new De(n,{resolution:go(r),...e==null?void 0:e.data});return i.resource.src=e.src,xd(i,t,e.src)},async load(r,e){return(await _e.ADAPTER.fetch(r)).text()},unload:Og.unload};Ee.add(B8);const L8=[".mp4",".m4v",".webm",".ogv"],F8=["video/mp4","video/webm","video/ogg"],D8={name:"loadVideo",extension:{type:me.LoadParser,priority:jn.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return xc(r,F8)||Nn(r,L8)},async load(r,e,t){var o;let n;const i=await(await _e.ADAPTER.fetch(r)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},u=new uk(s,a);await u.load();const l=new De(u,{alphaMode:await G5(),resolution:go(r),...e==null?void 0:e.data});l.resource.src=r,n=xd(l,t,r),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return n},unload(r){r.destroy(!0)}};Ee.add(D8);class U8{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){const{alias:t,name:n,src:i,srcs:s}=e;return Pi(t||n||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const n=[];Array.isArray(t)?t.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const u=this._createBundleAssetId(e,o);n.push(u),a=[o,u]}else{const u=o.map(l=>this._createBundleAssetId(e,l));n.push(...u),a=[...o,...u]}this.add({...i,alias:a,src:s})}):Object.keys(t).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:s,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:s,src:t[i]});else{const o=t[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}n.push(...s)}),this._bundles[e]=n}add(e,t,n,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ve("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:t,data:n,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=u=>{this.hasKey(u)&&console.warn(`[Resolver] already has key: ${u} overwriting`)},Pi(o).forEach(u=>{const{src:l,srcs:h}=u;let{data:c,format:d,loadParser:p}=u;const g=Pi(l||h).map(y=>typeof y=="string"?c8(y):Array.isArray(y)?y:[y]),v=this.getAlias(u);Array.isArray(v)?v.forEach(a):a(v);const x=[];g.forEach(y=>{y.forEach(w=>{let _={};if(typeof w!="object"){_.src=w;for(let S=0;S<this._parsers.length;S++){const I=this._parsers[S];if(I.test(w)){_=I.parse(w);break}}}else c=w.data??c,d=w.format??d,p=w.loadParser??p,_={..._,...w};if(!v)throw new Error(`[Resolver] alias is undefined for this asset: ${_.src}`);_=this.buildResolvedAsset(_,{aliases:v,data:c,format:d,loadParser:p}),x.push(_)})}),v.forEach(y=>{this._assetMap[y]=x})})}resolveBundle(e){const t=xm(e);e=Pi(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const u in o){const l=o[u];a[this._extractAssetIdFromBundle(i,u)]=l}n[i]=a}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if(typeof e!="string"){const n={};for(const i in t)n[i]=t[i].src;return n}return t.src}resolve(e){const t=xm(e);e=Pi(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(u=>{a.params[u].forEach(l=>{const h=s.filter(c=>c[u]?c[u]===l:!1);h.length&&(s=h)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){const{aliases:n,data:i,loadParser:s,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=$t.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??$t.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class j8{constructor(){this._detections=[],this._initialized=!1,this.resolver=new U8,this.loader=new d8,this.cache=el,this._backgroundLoader=new u8(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const t=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof t=="number"?[t]:t,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,n,i,s){this.resolver.add(e,t,n,i,s)}async load(e,t){this._initialized||await this.init();const n=xm(e),i=Pi(e).map(a=>{if(typeof a!="string"){const u=this.resolver.getAlias(a);return u.some(l=>!this.resolver.hasKey(l))&&this.add(a),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,t);return n?o[i[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,u=0;const l=()=>{t==null||t(++a/u)},h=o.map(c=>{const d=i[c];return u+=Object.keys(d).length,this._mapLoadToResolve(d,l).then(p=>{s[c]=p})});return await Promise.all(h),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return el.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=el.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,t);this._backgroundLoader.active=!0;const o={};return n.forEach((a,u)=>{const l=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[i[u]]=l,el.set(h,l)}),o}async unload(e){this._initialized||await this.init();const t=Pi(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=Pi(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(n=>{el.remove(n.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((n,i)=>t.indexOf(n)===i),t}get detections(){return this._detections}get preferWorkers(){return Og.config.preferWorkers}set preferWorkers(e){Ve("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}}const pn=new j8;Ee.handleByList(me.LoadParser,pn.loader.parsers).handleByList(me.ResolveParser,pn.resolver.parsers).handleByList(me.CacheParser,pn.cache.parsers).handleByList(me.DetectionParser,pn.detections);const X8={extension:me.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof Me),getCacheableAssets:(r,e)=>{const t={};return r.forEach(n=>{e.forEach((i,s)=>{t[n+(s===0?"":s+1)]=i})}),t}};Ee.add(X8);async function vk(r){if("Image"in globalThis)return new Promise(e=>{const t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(r)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const yk={extension:{type:me.DetectionParser,priority:1},test:async()=>vk("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(e=>e!=="avif")};Ee.add(yk);const xk={extension:{type:me.DetectionParser,priority:0},test:async()=>vk("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(e=>e!=="webp")};Ee.add(xk);const YE=["png","jpg","jpeg"],H8={extension:{type:me.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...YE],remove:async r=>r.filter(e=>!YE.includes(e))};Ee.add(H8);const z8="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function G_(r){return z8?!1:document.createElement("video").canPlayType(r)!==""}const $8={extension:{type:me.DetectionParser,priority:0},test:async()=>G_("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(e=>e!=="webm")};Ee.add($8);const Y8={extension:{type:me.DetectionParser,priority:0},test:async()=>G_("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(e=>e!=="mp4"&&e!=="m4v")};Ee.add(Y8);const G8={extension:{type:me.DetectionParser,priority:0},test:async()=>G_("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(e=>e!=="ogv")};Ee.add(G8);const W8={extension:me.ResolveParser,test:Og.test,parse:r=>{var e;return{resolution:parseFloat(((e=_e.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:$t.extname(r).slice(1),src:r}}};Ee.add(W8);var Cr=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(Cr||{});const _m={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let ls,tu;function GE(){tu={bptc:ls.getExtension("EXT_texture_compression_bptc"),astc:ls.getExtension("WEBGL_compressed_texture_astc"),etc:ls.getExtension("WEBGL_compressed_texture_etc"),s3tc:ls.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:ls.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:ls.getExtension("WEBGL_compressed_texture_pvrtc")||ls.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:ls.getExtension("WEBGL_compressed_texture_etc1"),atc:ls.getExtension("WEBGL_compressed_texture_atc")}}const V8={extension:{type:me.DetectionParser,priority:2},test:async()=>{const r=_e.ADAPTER.createCanvas().getContext("webgl");return r?(ls=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{tu||GE();const e=[];for(const t in tu)tu[t]&&e.push(t);return[...e,...r]},remove:async r=>(tu||GE(),r.filter(e=>!(e in tu)))};Ee.add(V8);class q8 extends Eg{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,t),this.origin=n,this.buffer=i?new P1(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new P1(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class ol extends q8{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=ol._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||ol._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:u,levelHeight:l,levelBuffer:h}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,u,l,0,h)}return!0}onBlobLoaded(){this._levelBuffers=ol._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,n,i,s,o,a){const u=new Array(n);let l=e.byteOffset,h=o,c=a,d=h+i-1&~(i-1),p=c+s-1&~(s-1),g=d*p*_m[t];for(let v=0;v<n;v++)u[v]={levelID:v,levelWidth:n>1?h:d,levelHeight:n>1?c:p,levelBuffer:new Uint8Array(e.buffer,l,g)},l+=g,h=h>>1||1,c=c>>1||1,d=h+i-1&~(i-1),p=c+s-1&~(s-1),g=d*p*_m[t];return u}}const ey=4,zf=124,K8=32,WE=20,Q8=542327876,$f={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},Z8={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Yf={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},J8=1,eU=2,tU=4,rU=64,nU=512,iU=131072,sU=827611204,oU=861165636,aU=894720068,lU=808540228,uU=4,cU={[sU]:Cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[oU]:Cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[aU]:Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT},hU={70:Cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Cr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Cr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Cr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Cr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Cr.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Cr.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Cr.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Cr.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function dU(r){const e=new Uint32Array(r);if(e[0]!==Q8)throw new Error("Invalid DDS file magic word");const t=new Uint32Array(r,0,zf/Uint32Array.BYTES_PER_ELEMENT),n=t[$f.HEIGHT],i=t[$f.WIDTH],s=t[$f.MIPMAP_COUNT],o=new Uint32Array(r,$f.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,K8/Uint32Array.BYTES_PER_ELEMENT),a=o[J8];if(a&tU){const u=o[Z8.FOURCC];if(u!==lU){const w=cU[u],_=ey+zf,S=new Uint8Array(r,_);return[new ol(S,{format:w,width:i,height:n,levels:s})]}const l=ey+zf,h=new Uint32Array(e.buffer,l,WE/Uint32Array.BYTES_PER_ELEMENT),c=h[Yf.DXGI_FORMAT],d=h[Yf.RESOURCE_DIMENSION],p=h[Yf.MISC_FLAG],g=h[Yf.ARRAY_SIZE],v=hU[c];if(v===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(p===uU)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");const x=new Array,y=ey+zf+WE;if(g===1)x.push(new Uint8Array(r,y));else{const w=_m[v];let _=0,S=i,I=n;for(let k=0;k<s;k++){const M=Math.max(1,S+3&-4),O=Math.max(1,I+3&-4),F=M*O*w;_+=F,S=S>>>1,I=I>>>1}let A=y;for(let k=0;k<g;k++)x.push(new Uint8Array(r,A,_)),A+=_}return x.map(w=>new ol(w,{format:v,width:i,height:n,levels:s}))}throw a&rU?new Error("DDSParser does not support uncompressed texture data."):a&nU?new Error("DDSParser does not supported YUV uncompressed texture data."):a&iU?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&eU?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const VE=[171,75,84,88,32,49,49,187,13,10,26,10],fU=67305985,yi={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Z1=64,qE={[Te.UNSIGNED_BYTE]:1,[Te.UNSIGNED_SHORT]:2,[Te.INT]:4,[Te.UNSIGNED_INT]:4,[Te.FLOAT]:4,[Te.HALF_FLOAT]:8},pU={[de.RGBA]:4,[de.RGB]:3,[de.RG]:2,[de.RED]:1,[de.LUMINANCE]:1,[de.LUMINANCE_ALPHA]:2,[de.ALPHA]:1},mU={[Te.UNSIGNED_SHORT_4_4_4_4]:2,[Te.UNSIGNED_SHORT_5_5_5_1]:2,[Te.UNSIGNED_SHORT_5_6_5]:2};function gU(r,e,t=!1){const n=new DataView(e);if(!vU(r,n))return null;const i=n.getUint32(yi.ENDIANNESS,!0)===fU,s=n.getUint32(yi.GL_TYPE,i),o=n.getUint32(yi.GL_FORMAT,i),a=n.getUint32(yi.GL_INTERNAL_FORMAT,i),u=n.getUint32(yi.PIXEL_WIDTH,i),l=n.getUint32(yi.PIXEL_HEIGHT,i)||1,h=n.getUint32(yi.PIXEL_DEPTH,i)||1,c=n.getUint32(yi.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(yi.NUMBER_OF_FACES,i),p=n.getUint32(yi.NUMBER_OF_MIPMAP_LEVELS,i),g=n.getUint32(yi.BYTES_OF_KEY_VALUE_DATA,i);if(l===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const v=4,x=4,y=u+3&-4,w=l+3&-4,_=new Array(c);let S=u*l;s===0&&(S=y*w);let I;if(s!==0?qE[s]?I=qE[s]*pU[o]:I=mU[s]:I=_m[a],I===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const A=t?xU(n,g,i):null;let k=S*I,M=u,O=l,F=y,U=w,H=Z1+g;for(let L=0;L<p;L++){const N=n.getUint32(H,i);let j=H+4;for(let Y=0;Y<c;Y++){let K=_[Y];K||(K=_[Y]=new Array(p)),K[L]={levelID:L,levelWidth:p>1||s!==0?M:F,levelHeight:p>1||s!==0?O:U,levelBuffer:new Uint8Array(e,j,k)},j+=k}H+=N+4,H=H%4!==0?H+4-H%4:H,M=M>>1||1,O=O>>1||1,F=M+v-1&~(v-1),U=O+x-1&~(x-1),k=F*U*I}return s!==0?{uncompressed:_.map(L=>{let N=L[0].levelBuffer,j=!1;return s===Te.FLOAT?N=new Float32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4):s===Te.UNSIGNED_INT?(j=!0,N=new Uint32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4)):s===Te.INT&&(j=!0,N=new Int32Array(L[0].levelBuffer.buffer,L[0].levelBuffer.byteOffset,L[0].levelBuffer.byteLength/4)),{resource:new Eg(N,{width:L[0].levelWidth,height:L[0].levelHeight}),type:s,format:j?yU(o):o}}),kvData:A}:{compressed:_.map(L=>new ol(null,{format:a,width:u,height:l,levels:p,levelBuffers:L})),kvData:A}}function vU(r,e){for(let t=0;t<VE.length;t++)if(e.getUint8(t)!==VE[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function yU(r){switch(r){case de.RGBA:return de.RGBA_INTEGER;case de.RGB:return de.RGB_INTEGER;case de.RG:return de.RG_INTEGER;case de.RED:return de.RED_INTEGER;default:return r}}function xU(r,e,t){const n=new Map;let i=0;for(;i<e;){const s=r.getUint32(Z1+i,t),o=Z1+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let u=0;for(;u<s&&r.getUint8(o+u)!==0;u++);if(u===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const l=new TextDecoder().decode(new Uint8Array(r.buffer,o,u)),h=new DataView(r.buffer,o+u+1,s-u-1);n.set(l,h),i+=4+s+a}return n}const _U={extension:{type:me.LoadParser,priority:jn.High},name:"loadDDS",test(r){return Nn(r,".dds")},async load(r,e,t){const n=await(await _e.ADAPTER.fetch(r)).arrayBuffer(),i=dU(n).map(s=>{const o=new De(s,{mipmap:li.OFF,alphaMode:$r.NO_PREMULTIPLIED_ALPHA,resolution:go(r),...e.data});return xd(o,t,r)});return i.length===1?i[0]:i},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Ee.add(_U);const wU={extension:{type:me.LoadParser,priority:jn.High},name:"loadKTX",test(r){return Nn(r,".ktx")},async load(r,e,t){const n=await(await _e.ADAPTER.fetch(r)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=gU(r,n),a=i??s,u={mipmap:li.OFF,alphaMode:$r.NO_PREMULTIPLIED_ALPHA,resolution:go(r),...e.data},l=a.map(h=>{a===s&&Object.assign(u,{type:h.type,format:h.format});const c=h.resource??h,d=new De(c,u);return d.ktxKeyValueData=o,xd(d,t,r)});return l.length===1?l[0]:l},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};Ee.add(wU);const bU=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],SU={extension:me.ResolveParser,test:r=>{const e=$t.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{var n,i;const e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){const s=e.pop();if(bU.includes(s))return{resolution:parseFloat(((n=_e.RETINA_PREFIX.exec(r))==null?void 0:n[1])??"1"),format:s,src:r}}return{resolution:parseFloat(((i=_e.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:t,src:r}}};Ee.add(SU);const Gf=new $e,TU=4,_k=class ch{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var t;const e=(t=this.renderer)==null?void 0:t.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,n,i){const s=new Image;return s.src=await this.base64(e,t,n,i),s}async base64(e,t,n,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(u=>{if(!u){a(new Error("ICanvas.toBlob failed!"));return}const l=new FileReader;l.onload=()=>o(l.result),l.onerror=a,l.readAsDataURL(u)},t,n)});if(s.toDataURL!==void 0)return s.toDataURL(t,n);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:t,quality:n});return new Promise((a,u)=>{const l=new FileReader;l.onload=()=>a(l.result),l.onerror=u,l.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);o&&ch._flipY(n,i,s),a&&ch._unpremultiplyAlpha(n);const u=new a4(i,s,1),l=new ImageData(new Uint8ClampedArray(n.buffer),i,s);return u.context.putImageData(l,0,0),u.canvas}pixels(e,t){const{pixels:n,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,t);return o&&ch._flipY(n,i,s),a&&ch._unpremultiplyAlpha(n),n}_rawPixels(e,t){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,u=!1;e&&(e instanceof Sl?a=e:(a=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),u=!0,t&&(Gf.width=t.width,Gf.height=t.height,t=Gf)));const l=n.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===de.RGBA,!u){n.renderTexture.bind(a);const p=a.framebuffer.glFramebuffers[n.CONTEXT_UID];p.blitFramebuffer&&n.framebuffer.bind(p.blitFramebuffer)}}else i=n.resolution,t||(t=Gf,t.width=n.width/i,t.height=n.height/i),s=!0,o=this._rendererPremultipliedAlpha,n.renderTexture.bind();const h=Math.max(Math.round(t.width*i),1),c=Math.max(Math.round(t.height*i),1),d=new Uint8Array(TU*h*c);return l.readPixels(Math.round(t.x*i),Math.round(t.y*i),h,c,l.RGBA,l.UNSIGNED_BYTE,d),u&&(a==null||a.destroy(!0)),{pixels:d,width:h,height:c,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,t,n){const i=t<<2,s=n>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const u=a*i,l=(n-a-1)*i;o.set(e.subarray(u,u+i)),e.copyWithin(u,l,l+i),e.set(o,l)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let n=0;n<t;n+=4){const i=e[n+3];if(i!==0){const s=255.001/i;e[n]=e[n]*s+.5,e[n+1]=e[n+1]*s+.5,e[n+2]=e[n+2]*s+.5}}}};_k.extension={name:"extract",type:me.RendererSystem};let EU=_k;Ee.add(EU);const wm={build(r){const e=r.points;let t,n,i,s,o,a;if(r.type===Mr.CIRC){const g=r.shape;t=g.x,n=g.y,o=a=g.radius,i=s=0}else if(r.type===Mr.ELIP){const g=r.shape;t=g.x,n=g.y,o=g.width,a=g.height,i=s=0}else{const g=r.shape,v=g.width/2,x=g.height/2;t=g.x+v,n=g.y+x,o=a=Math.max(0,Math.min(g.radius,Math.min(v,x))),i=v-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const u=Math.ceil(2.3*Math.sqrt(o+a)),l=u*8+(i?4:0)+(s?4:0);if(e.length=l,l===0)return;if(u===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=n+s,e[2]=e[4]=t-i,e[5]=e[7]=n-s;return}let h=0,c=u*4+(i?2:0)+2,d=c,p=l;{const g=i+o,v=s,x=t+g,y=t-g,w=n+v;if(e[h++]=x,e[h++]=w,e[--c]=w,e[--c]=y,s){const _=n-v;e[d++]=y,e[d++]=_,e[--p]=_,e[--p]=x}}for(let g=1;g<u;g++){const v=Math.PI/2*(g/u),x=i+Math.cos(v)*o,y=s+Math.sin(v)*a,w=t+x,_=t-x,S=n+y,I=n-y;e[h++]=w,e[h++]=S,e[--c]=S,e[--c]=_,e[d++]=_,e[d++]=I,e[--p]=I,e[--p]=w}{const g=i,v=s+a,x=t+g,y=t-g,w=n+v,_=n-v;e[h++]=x,e[h++]=w,e[--p]=_,e[--p]=x,i&&(e[h++]=y,e[h++]=w,e[--p]=_,e[--p]=y)}},triangulate(r,e){const t=r.points,n=e.points,i=e.indices;if(t.length===0)return;let s=n.length/2;const o=s;let a,u;if(r.type!==Mr.RREC){const h=r.shape;a=h.x,u=h.y}else{const h=r.shape;a=h.x+h.width/2,u=h.y+h.height/2}const l=r.matrix;n.push(r.matrix?l.a*a+l.c*u+l.tx:a,r.matrix?l.b*a+l.d*u+l.ty:u),s++,n.push(t[0],t[1]);for(let h=2;h<t.length;h+=2)n.push(t[h],t[h+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function KE(r,e=!1){const t=r.length;if(t<6)return;let n=0;for(let i=0,s=r[t-2],o=r[t-1];i<t;i+=2){const a=r[i],u=r[i+1];n+=(a-s)*(u+o),s=a,o=u}if(!e&&n>0||e&&n<=0){const i=t/2;for(let s=i+i%2;s<t;s+=2){const o=t-s-2,a=t-s-1,u=s,l=s+1;[r[o],r[u]]=[r[u],r[o]],[r[a],r[l]]=[r[l],r[a]]}}}const wk={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points;const n=r.holes,i=e.points,s=e.indices;if(t.length>=6){KE(t,!1);const o=[];for(let l=0;l<n.length;l++){const h=n[l];KE(h.points,!0),o.push(t.length/2),t=t.concat(h.points)}const a=fF(t,o,2);if(!a)return;const u=i.length/2;for(let l=0;l<a.length;l+=3)s.push(a[l]+u),s.push(a[l+1]+u),s.push(a[l+2]+u);for(let l=0;l<t.length;l++)i.push(t[l])}}},PU={build(r){const e=r.shape,t=e.x,n=e.y,i=e.width,s=e.height,o=r.points;o.length=0,i>=0&&s>=0&&o.push(t,n,t+i,n,t+i,n+s,t,n+s)},triangulate(r,e){const t=r.points,n=e.points;if(t.length===0)return;const i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},CU={build(r){wm.build(r)},triangulate(r,e){wm.triangulate(r,e)}};var Jn=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Jn||{}),ia=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(ia||{});const ec={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class QE{static curveTo(e,t,n,i,s,o){const a=o[o.length-2],u=o[o.length-1]-t,l=a-e,h=i-t,c=n-e,d=Math.abs(u*c-l*h);if(d<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const p=u*u+l*l,g=h*h+c*c,v=u*h+l*c,x=s*Math.sqrt(p)/d,y=s*Math.sqrt(g)/d,w=x*v/p,_=y*v/g,S=x*c+y*l,I=x*h+y*u,A=l*(y+w),k=u*(y+w),M=c*(x+_),O=h*(x+_),F=Math.atan2(k-I,A-S),U=Math.atan2(O-I,M-S);return{cx:S+e,cy:I+t,radius:s,startAngle:F,endAngle:U,anticlockwise:l*h>c*u}}static arc(e,t,n,i,s,o,a,u,l){const h=a-o,c=ec._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/dm)*40),d=h/(c*2),p=d*2,g=Math.cos(d),v=Math.sin(d),x=c-1,y=x%1/x;for(let w=0;w<=x;++w){const _=w+y*w,S=d+o+p*_,I=Math.cos(S),A=-Math.sin(S);l.push((g*I+v*A)*s+n,(g*-A+v*I)*s+i)}}}class AU{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class W_{static curveLength(e,t,n,i,s,o,a,u){let l=0,h=0,c=0,d=0,p=0,g=0,v=0,x=0,y=0,w=0,_=0,S=e,I=t;for(let A=1;A<=10;++A)h=A/10,c=h*h,d=c*h,p=1-h,g=p*p,v=g*p,x=v*e+3*g*h*n+3*p*c*s+d*a,y=v*t+3*g*h*i+3*p*c*o+d*u,w=S-x,_=I-y,S=x,I=y,l+=Math.sqrt(w*w+_*_);return l}static curveTo(e,t,n,i,s,o,a){const u=a[a.length-2],l=a[a.length-1];a.length-=2;const h=ec._segmentsCount(W_.curveLength(u,l,e,t,n,i,s,o));let c=0,d=0,p=0,g=0,v=0;a.push(u,l);for(let x=1,y=0;x<=h;++x)y=x/h,c=1-y,d=c*c,p=d*c,g=y*y,v=g*y,a.push(p*u+3*d*y*e+3*c*g*n+v*s,p*l+3*d*y*t+3*c*g*i+v*o)}}function ZE(r,e,t,n,i,s,o,a){const u=r-t*i,l=e-n*i,h=r+t*s,c=e+n*s;let d,p;o?(d=n,p=-t):(d=-n,p=t);const g=u+d,v=l+p,x=h+d,y=c+p;return a.push(g,v,x,y),2}function Ha(r,e,t,n,i,s,o,a){const u=t-r,l=n-e;let h=Math.atan2(u,l),c=Math.atan2(i-r,s-e);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const p=c-h,g=Math.abs(p),v=Math.sqrt(u*u+l*l),x=(15*g*Math.sqrt(v)/Math.PI>>0)+1,y=p/x;if(d+=y,a){o.push(r,e,t,n);for(let w=1,_=d;w<x;w++,_+=y)o.push(r,e,r+Math.sin(_)*v,e+Math.cos(_)*v);o.push(r,e,i,s)}else{o.push(t,n,r,e);for(let w=1,_=d;w<x;w++,_+=y)o.push(r+Math.sin(_)*v,e+Math.cos(_)*v,r,e);o.push(i,s,r,e)}return x*2}function kU(r,e){const t=r.shape;let n=r.points||t.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=r.lineStyle,o=new je(n[0],n[1]),a=new je(n[n.length-2],n[n.length-1]),u=t.type!==Mr.POLY||t.closeStroke,l=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(u){n=n.slice(),l&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const K=(o.x+a.x)*.5,X=(a.y+o.y)*.5;n.unshift(K,X),n.push(K,X)}const h=e.points,c=n.length/2;let d=n.length;const p=h.length/2,g=s.width/2,v=g*g,x=s.miterLimit*s.miterLimit;let y=n[0],w=n[1],_=n[2],S=n[3],I=0,A=0,k=-(w-S),M=y-_,O=0,F=0,U=Math.sqrt(k*k+M*M);k/=U,M/=U,k*=g,M*=g;const H=s.alignment,L=(1-H)*2,N=H*2;u||(s.cap===ia.ROUND?d+=Ha(y-k*(L-N)*.5,w-M*(L-N)*.5,y-k*L,w-M*L,y+k*N,w+M*N,h,!0)+2:s.cap===ia.SQUARE&&(d+=ZE(y,w,k,M,L,N,!0,h))),h.push(y-k*L,w-M*L,y+k*N,w+M*N);for(let K=1;K<c-1;++K){y=n[(K-1)*2],w=n[(K-1)*2+1],_=n[K*2],S=n[K*2+1],I=n[(K+1)*2],A=n[(K+1)*2+1],k=-(w-S),M=y-_,U=Math.sqrt(k*k+M*M),k/=U,M/=U,k*=g,M*=g,O=-(S-A),F=_-I,U=Math.sqrt(O*O+F*F),O/=U,F/=U,O*=g,F*=g;const X=_-y,W=w-S,z=_-I,V=A-S,Z=X*z+W*V,re=W*z-V*X,ce=re<0;if(Math.abs(re)<.001*Math.abs(Z)){h.push(_-k*L,S-M*L,_+k*N,S+M*N),Z>=0&&(s.join===Jn.ROUND?d+=Ha(_,S,_-k*L,S-M*L,_-O*L,S-F*L,h,!1)+4:d+=2,h.push(_-O*N,S-F*N,_+O*L,S+F*L));continue}const xe=(-k+y)*(-M+S)-(-k+_)*(-M+w),Re=(-O+I)*(-F+S)-(-O+_)*(-F+A),Le=(X*Re-z*xe)/re,ze=(V*xe-W*Re)/re,We=(Le-_)*(Le-_)+(ze-S)*(ze-S),He=_+(Le-_)*L,Fe=S+(ze-S)*L,at=_-(Le-_)*N,Ze=S-(ze-S)*N,Tr=Math.min(X*X+W*W,z*z+V*V),Br=ce?L:N,Wi=Tr+Br*Br*v,Cl=We<=Wi;let hi=s.join;if(hi===Jn.MITER&&We/v>x&&(hi=Jn.BEVEL),Cl)switch(hi){case Jn.MITER:{h.push(He,Fe,at,Ze);break}case Jn.BEVEL:{ce?h.push(He,Fe,_+k*N,S+M*N,He,Fe,_+O*N,S+F*N):h.push(_-k*L,S-M*L,at,Ze,_-O*L,S-F*L,at,Ze),d+=2;break}case Jn.ROUND:{ce?(h.push(He,Fe,_+k*N,S+M*N),d+=Ha(_,S,_+k*N,S+M*N,_+O*N,S+F*N,h,!0)+4,h.push(He,Fe,_+O*N,S+F*N)):(h.push(_-k*L,S-M*L,at,Ze),d+=Ha(_,S,_-k*L,S-M*L,_-O*L,S-F*L,h,!1)+4,h.push(_-O*L,S-F*L,at,Ze));break}}else{switch(h.push(_-k*L,S-M*L,_+k*N,S+M*N),hi){case Jn.MITER:{ce?h.push(at,Ze,at,Ze):h.push(He,Fe,He,Fe),d+=2;break}case Jn.ROUND:{ce?d+=Ha(_,S,_+k*N,S+M*N,_+O*N,S+F*N,h,!0)+2:d+=Ha(_,S,_-k*L,S-M*L,_-O*L,S-F*L,h,!1)+2;break}}h.push(_-O*L,S-F*L,_+O*N,S+F*N),d+=2}}y=n[(c-2)*2],w=n[(c-2)*2+1],_=n[(c-1)*2],S=n[(c-1)*2+1],k=-(w-S),M=y-_,U=Math.sqrt(k*k+M*M),k/=U,M/=U,k*=g,M*=g,h.push(_-k*L,S-M*L,_+k*N,S+M*N),u||(s.cap===ia.ROUND?d+=Ha(_-k*(L-N)*.5,S-M*(L-N)*.5,_-k*L,S-M*L,_+k*N,S+M*N,h,!1)+2:s.cap===ia.SQUARE&&(d+=ZE(_,S,k,M,L,N,!1,h)));const j=e.indices,Y=ec.epsilon*ec.epsilon;for(let K=p;K<d+p-2;++K)y=h[K*2],w=h[K*2+1],_=h[(K+1)*2],S=h[(K+1)*2+1],I=h[(K+2)*2],A=h[(K+2)*2+1],!(Math.abs(y*(S-A)+_*(A-w)+I*(w-S))<Y)&&j.push(K,K+1,K+2)}function IU(r,e){let t=0;const n=r.shape,i=r.points||n.points,s=n.type!==Mr.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,u=i.length/2,l=o.length/2;let h=l;for(o.push(i[0],i[1]),t=1;t<u;t++)o.push(i[t*2],i[t*2+1]),a.push(h,h+1),h++;s&&a.push(h,l)}function JE(r,e){r.lineStyle.native?IU(r,e):kU(r,e)}class V_{static curveLength(e,t,n,i,s,o){const a=e-2*n+s,u=t-2*i+o,l=2*n-2*e,h=2*i-2*t,c=4*(a*a+u*u),d=4*(a*l+u*h),p=l*l+h*h,g=2*Math.sqrt(c+d+p),v=Math.sqrt(c),x=2*c*v,y=2*Math.sqrt(p),w=d/v;return(x*g+v*d*(g-y)+(4*p*c-d*d)*Math.log((2*v+w+g)/(w+y)))/(4*x)}static curveTo(e,t,n,i,s){const o=s[s.length-2],a=s[s.length-1],u=ec._segmentsCount(V_.curveLength(o,a,e,t,n,i));let l=0,h=0;for(let c=1;c<=u;++c){const d=c/u;l=o+(e-o)*d,h=a+(t-a)*d,s.push(l+(e+(n-e)*d-l)*d,h+(t+(i-t)*d-h)*d)}}}const ty={[Mr.POLY]:wk,[Mr.CIRC]:wm,[Mr.ELIP]:wm,[Mr.RECT]:PU,[Mr.RREC]:CU},e2=[],Wf=[];class bm{constructor(e,t=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new bm(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Wl=new je,bk=class Sk extends EA{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new vm,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),Wf.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),e2.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,i=null){const s=new bm(e,t,n,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const n=new bm(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let n=0;n<t.length;++n){const i=t[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,Wl):Wl.copyFrom(e),i.shape.contains(Wl.x,Wl.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(Wl.x,Wl.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let u=this.shapeIndex;u<t.length;u++){this.shapeIndex++;const l=t[u],h=l.fillStyle,c=l.lineStyle;ty[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const p=d===0?h:c;if(!p.visible)continue;const g=p.texture.baseTexture,v=this.indices.length,x=this.points.length/2;g.wrapMode=oi.REPEAT,d===0?this.processFill(l):this.processLine(l);const y=this.points.length/2-x;y!==0&&(n&&!this._compareStyles(i,p)&&(n.end(v,x),n=null),n||(n=e2.pop()||new AU,n.begin(p,v,x),this.batches.push(n),i=p),this.addUvs(this.points,e,p.texture,x,y,p.matrix))}}const s=this.indices.length,o=this.points.length/2;if(n&&n.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const n=this.graphicsData[e],i=n.fillStyle,s=n.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,n=e.length;t<n;t++){const i=e[t];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<Sk.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++De._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),Wf.push(this.drawCalls[c]);this.drawCalls.length=0;const t=this.colors,n=this.textureIds;let i=Wf.pop();i||(i=new k1,i.texArray=new N1),i.texArray.count=0,i.start=0,i.size=0,i.type=Ai.TRIANGLES;let s=0,o=null,a=0,u=!1,l=Ai.TRIANGLES,h=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const d=this.batches[c],p=8,g=d.style,v=g.texture.baseTexture;u!==!!g.native&&(u=!!g.native,l=u?Ai.LINES:Ai.TRIANGLES,o=null,s=p,e++),o!==v&&(o=v,v._batchEnabled!==e&&(s===p&&(e++,s=0,i.size>0&&(i=Wf.pop(),i||(i=new k1,i.texArray=new N1),this.drawCalls.push(i)),i.start=h,i.size=0,i.texArray.count=0,i.type=l),v.touched=1,v._batchEnabled=e,v._batchLocation=s,v.wrapMode=oi.REPEAT,i.texArray.elements[i.texArray.count++]=v,s++)),i.size+=d.size,h+=d.size,a=v._batchLocation,this.addColors(t,g.color,g.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}De._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,n=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let u=0;for(let l=0;l<e.length/2;l++)o[u++]=e[l*2],o[u++]=e[l*2+1],o[u++]=t[l*2],o[u++]=t[l*2+1],a[u++]=n[l],o[u++]=i[l];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?wk.triangulate(e,this):ty[e.type].triangulate(e,this)}processLine(e){JE(e,this);for(let t=0;t<e.holes.length;t++)JE(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const n=e[t];ty[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){const i=e[n*2],s=e[n*2+1];e[n*2]=t.a*i+t.c*s+t.tx,e[n*2+1]=t.b*i+t.d*s+t.ty}}addColors(e,t,n,i,s=0){const o=ot.shared.setValue(t).toLittleEndianNumber(),a=ot.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,s+i);for(let u=0;u<i;u++)e[s+u]=a}addTextureIds(e,t,n,i=0){e.length=Math.max(e.length,i+n);for(let s=0;s<n;s++)e[i+s]=t}addUvs(e,t,n,i,s,o=null){let a=0;const u=t.length,l=n.frame;for(;a<s;){let c=e[(i+a)*2],d=e[(i+a)*2+1];if(o){const p=o.a*c+o.c*d+o.tx;d=o.b*c+o.d*d+o.ty,c=p}a++,t.push(c/l.width,d/l.height)}const h=n.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,n,u,s)}adjustUvs(e,t,n,i){const s=t.baseTexture,o=1e-6,a=n+i*2,u=t.frame,l=u.width/s.width,h=u.height/s.height;let c=u.x/u.width,d=u.y/u.height,p=Math.floor(e[n]+o),g=Math.floor(e[n+1]+o);for(let v=n+2;v<a;v+=2)p=Math.min(p,Math.floor(e[v]+o)),g=Math.min(g,Math.floor(e[v+1]+o));c-=p,d-=g;for(let v=n;v<a;v+=2)e[v]=(e[v]+c)*l,e[v+1]=(e[v+1]+d)*h}};bk.BATCHABLE_SIZE=100;let MU=bk;class Ng{constructor(){this.color=16777215,this.alpha=1,this.texture=Me.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Ng;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Me.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class q_ extends Ng{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ia.BUTT,this.join=Jn.MITER,this.miterLimit=10}clone(){const e=new q_;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=ia.BUTT,this.join=Jn.MITER,this.miterLimit=10}}const ry={},J1=class Xp extends qr{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ng,this._lineStyle=new q_,this._matrix=null,this._holeMode=!1,this.state=Bs.for2d(),this._geometry=e||new MU,this._geometry.refCount++,this._transformID=-1,this._tintColor=new ot(16777215),this.blendMode=Pe.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Xp(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:n,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:Me.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:ia.BUTT,join:Jn.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Sh,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Sh,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),V_.curveTo(e,t,n,i,s),this}bezierCurveTo(e,t,n,i,s,o){return this._initCurve(),W_.curveTo(e,t,n,i,s,o,this.currentPath.points),this}arcTo(e,t,n,i,s){this._initCurve(e,t);const o=this.currentPath.points,a=QE.curveTo(e,t,n,i,s,o);if(a){const{cx:u,cy:l,radius:h,startAngle:c,endAngle:d,anticlockwise:p}=a;this.arc(u,l,h,c,d,p)}return this}arc(e,t,n,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=dm:o&&i<=s&&(i+=dm),s-i===0)return this;const a=e+Math.cos(i)*n,u=t+Math.sin(i)*n,l=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-u);c<l&&d<l||h.push(a,u)}else this.moveTo(a,u),h=this.currentPath.points;return QE.arc(a,u,e,t,n,i,s,o,h),this}beginFill(e=0,t){return this.beginTextureFill({texture:Me.WHITE,color:e,alpha:t})}normalizeColor(e){const t=ot.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:Me.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,i){return this.drawShape(new $e(e,t,n,i))}drawRoundedRect(e,t,n,i,s){return this.drawShape(new Ag(e,t,n,i,s))}drawCircle(e,t,n){return this.drawShape(new Pg(e,t,n))}drawEllipse(e,t,n,i){return this.drawShape(new Cg(e,t,n,i))}drawPolygon(...e){let t,n=!0;const i=e[0];i.points?(n=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;const s=new Sh(t);return s.closeStroke=n,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Mr.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),u=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),h={vertexData:a,blendMode:t,indices:l,uvs:u,_batchRGB:ot.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){const i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const t=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,s=t.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,ot.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let a=0,u=o.length;a<u;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:n,type:i,size:s,start:o}=t,a=n.count;for(let u=0;u<a;u++)e.texture.bind(n.elements[u],u);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let t=this.shader;const n=this.pluginName;if(!t){if(!ry[n]){const{maxTextures:i}=e.plugins[n],s=new Int32Array(i);for(let u=0;u<i;u++)s[u]=u;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new wt,default:Ni.from({uSamplers:s},!0)},a=e.plugins[n]._shader.program;ry[n]=new Bi(a,o)}t=ry[n]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:n,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,t,n,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,Xp._TEMP_POINT),this._geometry.containsPoint(Xp._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=ot.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,u=t.ty,l=this._geometry.points,h=this.vertexData;let c=0;for(let d=0;d<l.length;d+=2){const p=l[d],g=l[d+1];h[c++]=n*p+s*g+a,h[c++]=o*g+i*p+u}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};J1.curves=ec,J1._TEMP_POINT=new je;let Fu=J1;class RU{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const ny=new je,t2=new Sh,Tk=class Ek extends qr{constructor(e,t,n,i=Ai.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||Bs.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=_e.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Ai.TRIANGLES&&t.length<Ek.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,u=i.d,l=i.tx,h=i.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const p=t[d*2],g=t[d*2+1];c[d*2]=s*p+a*g+l,c[d*2+1]=o*p+u*g+h}if(this._roundPixels){const d=_e.RESOLUTION;for(let p=0;p<c.length;++p)c[p]=Math.round(c[p]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new RU(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,ny);const t=this.geometry.getBuffer("aVertexPosition").data,n=t2.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const u=i[a]*2,l=i[a+1]*2,h=i[a+2]*2;if(n[0]=t[u],n[1]=t[u+1],n[2]=t[l],n[3]=t[l+1],n[4]=t[h],n[5]=t[h+1],t2.contains(ny.x,ny.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Tk.BATCHABLE_SIZE=100;let pl=Tk;class _d extends As{constructor(e,t,n){super();const i=new yt(e),s=new yt(t,!0),o=new yt(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,Te.FLOAT).addAttribute("aTextureCoord",s,2,!1,Te.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var OU=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,NU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class tc extends Bi{constructor(e,t){const n={uSampler:e,alpha:1,uTextureMatrix:wt.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(n,t.uniforms),super(t.program||_s.from(NU,OU),n),this._colorDirty=!1,this.uvMatrix=new Mg(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new ot(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;ot.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class BU extends _d{constructor(e=100,t=100,n=10,i=10){super(),this.segWidth=n,this.segHeight=i,this.width=e,this.height=t,this.build()}build(){const e=this.segWidth*this.segHeight,t=[],n=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,u=this.height/o;for(let h=0;h<e;h++){const c=h%this.segWidth,d=h/this.segWidth|0;t.push(c*a,d*u),n.push(c/s,d/o)}const l=s*o;for(let h=0;h<l;h++){const c=h%s,d=h/s|0,p=d*this.segWidth+c,g=d*this.segWidth+c+1,v=(d+1)*this.segWidth+c,x=(d+1)*this.segWidth+c+1;i.push(p,g,v,g,x,v)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class LU extends _d{constructor(e=200,t,n=0){super(new Float32Array(t.length*4),new Float32Array(t.length*4),new Uint16Array((t.length-1)*6)),this.points=t,this._width=e,this.textureScale=n,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;t.data.length/4!==e.length&&(t.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,u=e[0];const l=this._width*this.textureScale,h=e.length;for(let d=0;d<h;d++){const p=d*4;if(this.textureScale>0){const g=u.x-e[d].x,v=u.y-e[d].y,x=Math.sqrt(g*g+v*v);u=e[d],a+=x/l}else a=d/(h-1);s[p]=a,s[p+1]=0,s[p+2]=a,s[p+3]=1}let c=0;for(let d=0;d<h-1;d++){const p=d*2;o[c++]=p,o[c++]=p+1,o[c++]=p+2,o[c++]=p+2,o[c++]=p+1,o[c++]=p+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let t=e[0],n,i=0,s=0;const o=this.buffers[0].data,a=e.length,u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<a;l++){const h=e[l],c=l*4;l<e.length-1?n=e[l+1]:n=h,s=-(n.x-t.x),i=n.y-t.y;const d=Math.sqrt(i*i+s*s);d<1e-6?(i=0,s=0):(i/=d,s/=d,i*=u,s*=u),o[c]=h.x+i,o[c+1]=h.y+s,o[c+2]=h.x-i,o[c+3]=h.y-s,t=h}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class FU extends pl{constructor(e,t,n){const i=new BU(e.width,e.height,t,n),s=new tc(Me.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:t,height:n}=this.shader.texture;this.autoResize&&(e.width!==t||e.height!==n)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const Vf=10;class DU extends FU{constructor(e,t,n,i,s){var o,a,u,l;super(Me.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=t??((o=e.defaultBorders)==null?void 0:o.left)??Vf,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??Vf,this._topHeight=n??((u=e.defaultBorders)==null?void 0:u.top)??Vf,this._bottomHeight=s??((l=e.defaultBorders)==null?void 0:l.bottom)??Vf,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,i=this._height>n?1:this._height/n;return Math.min(t,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const n=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class UU extends pl{constructor(e=Me.EMPTY,t,n,i,s){const o=new _d(t,n,i);o.getBuffer("aVertexPosition").static=!1;const a=new tc(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class jU extends pl{constructor(e,t,n=0){const i=new LU(e.height,t,n),s=new tc(e);n>0&&(e.baseTexture.wrapMode=oi.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),super._render(e)}}class XU extends qr{constructor(e=1500,t,n=16384,i=!1){super();const s=16384;n>s&&(n=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=n,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Pe.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(t),this._tintColor=new ot(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const t=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class r2{constructor(e,t,n){this.geometry=new As,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Te.FLOAT,offset:s.offset},t[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new yt(s4(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new yt(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new yt(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Te.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Te.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,t,n,s.type===Te.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,t,n,s.type===Te.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var HU=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,zU=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Pk extends Ig{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new wt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Te.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Bi.from(zU,HU,{}),this.state=Bs.for2d()}render(e){const t=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=t.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const u=t[0]._texture.baseTexture,l=u.alphaMode>0;this.state.blendMode=bA(e.blendMode,l),s.state.set(this.state);const h=s.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=ot.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);let d=!1;for(let p=0,g=0;p<o;p+=i,g+=1){let v=o-p;v>i&&(v=i),g>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[g];x.uploadDynamic(t,p,v);const y=e._bufferUpdateIDs[g]||0;d=d||x._updateID<y,d&&(x._updateID=e._updateID,x.uploadStatic(t,p,v)),s.geometry.bind(x.geometry),h.drawElements(h.TRIANGLES,v*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)t.push(new r2(this.properties,s,i));return t}_generateOneMoreBuffer(e){const t=e._batchSize,n=e._properties;return new r2(this.properties,n,t)}uploadVertices(e,t,n,i,s,o){let a=0,u=0,l=0,h=0;for(let c=0;c<n;++c){const d=e[t+c],p=d._texture,g=d.scale.x,v=d.scale.y,x=p.trim,y=p.orig;x?(u=x.x-d.anchor.x*y.width,a=u+x.width,h=x.y-d.anchor.y*y.height,l=h+x.height):(a=y.width*(1-d.anchor.x),u=y.width*-d.anchor.x,l=y.height*(1-d.anchor.y),h=y.height*-d.anchor.y),i[o]=u*g,i[o+1]=h*v,i[o+s]=a*g,i[o+s+1]=h*v,i[o+s*2]=a*g,i[o+s*2+1]=l*v,i[o+s*3]=u*g,i[o+s*3+1]=l*v,o+=s*4}}uploadPosition(e,t,n,i,s,o){for(let a=0;a<n;a++){const u=e[t+a].position;i[o]=u.x,i[o+1]=u.y,i[o+s]=u.x,i[o+s+1]=u.y,i[o+s*2]=u.x,i[o+s*2+1]=u.y,i[o+s*3]=u.x,i[o+s*3+1]=u.y,o+=s*4}}uploadRotation(e,t,n,i,s,o){for(let a=0;a<n;a++){const u=e[t+a].rotation;i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}uploadUvs(e,t,n,i,s,o){for(let a=0;a<n;++a){const u=e[t+a]._texture._uvs;u?(i[o]=u.x0,i[o+1]=u.y0,i[o+s]=u.x1,i[o+s+1]=u.y1,i[o+s*2]=u.x2,i[o+s*2+1]=u.y2,i[o+s*3]=u.x3,i[o+s*3+1]=u.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,t,n,i,s,o){for(let a=0;a<n;++a){const u=e[t+a],l=ot.shared.setValue(u._tintRGB).toPremultiplied(u.alpha,u.texture.baseTexture.alphaMode>0);i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Pk.extension={name:"particle",type:me.RendererPlugin};Ee.add(Pk);var Bg=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Bg||{});const qf={willReadFrequently:!0},us=class ke{static get experimentalLetterSpacingSupported(){let e=ke._experimentalLetterSpacingSupported;if(e!==void 0){const t=_e.ADAPTER.getCanvasRenderingContext2D().prototype;e=ke._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,s,o,a,u,l){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=l}static measureText(e,t,n,i=ke._canvas){n=n??t.wordWrap;const s=t.toFontString(),o=ke.measureFont(s);o.fontSize===0&&(o.fontSize=t.fontSize,o.ascent=t.fontSize);const a=i.getContext("2d",qf);a.font=s;const u=(n?ke.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),l=new Array(u.length);let h=0;for(let g=0;g<u.length;g++){const v=ke._measureText(u[g],t.letterSpacing,a);l[g]=v,h=Math.max(h,v)}let c=h+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const d=t.lineHeight||o.fontSize+t.strokeThickness;let p=Math.max(d,o.fontSize+t.strokeThickness*2)+t.leading+(u.length-1)*(d+t.leading);return t.dropShadow&&(p+=t.dropShadowDistance),new ke(e,t,c,p,u,l,d+t.leading,h,o)}static _measureText(e,t,n){let i=!1;ke.experimentalLetterSpacingSupported&&(ke.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let s=n.measureText(e).width;return s>0&&(i?s-=t:s+=(ke.graphemeSegmenter(e).length-1)*t),s}static wordWrap(e,t,n=ke._canvas){const i=n.getContext("2d",qf);let s=0,o="",a="";const u=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,c=ke.collapseSpaces(h),d=ke.collapseNewlines(h);let p=!c;const g=t.wordWrapWidth+l,v=ke.tokenize(e);for(let x=0;x<v.length;x++){let y=v[x];if(ke.isNewline(y)){if(!d){a+=ke.addLine(o),p=!c,o="",s=0;continue}y=" "}if(c){const _=ke.isBreakingSpace(y),S=ke.isBreakingSpace(o[o.length-1]);if(_&&S)continue}const w=ke.getFromCache(y,l,u,i);if(w>g)if(o!==""&&(a+=ke.addLine(o),o="",s=0),ke.canBreakWords(y,t.breakWords)){const _=ke.wordWrapSplit(y);for(let S=0;S<_.length;S++){let I=_[S],A=I,k=1;for(;_[S+k];){const O=_[S+k];if(!ke.canBreakChars(A,O,y,S,t.breakWords))I+=O;else break;A=O,k++}S+=k-1;const M=ke.getFromCache(I,l,u,i);M+s>g&&(a+=ke.addLine(o),p=!1,o="",s=0),o+=I,s+=M}}else{o.length>0&&(a+=ke.addLine(o),o="",s=0);const _=x===v.length-1;a+=ke.addLine(y,!_),p=!1,o="",s=0}else w+s>g&&(p=!1,a+=ke.addLine(o),o="",s=0),(o.length>0||!ke.isBreakingSpace(y)||p)&&(o+=y,s+=w)}return a+=ke.addLine(o,!1),a}static addLine(e,t=!0){return e=ke.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,n,i){let s=n[e];return typeof s!="number"&&(s=ke._measureText(e,t,i)+t,n[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const n=e[t];if(!ke.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:ke._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:ke._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(ke.isBreakingSpace(s,o)||ke.isNewline(s)){n!==""&&(t.push(n),n=""),t.push(s);continue}n+=s}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,s){return!0}static wordWrapSplit(e){return ke.graphemeSegmenter(e)}static measureFont(e){if(ke._fonts[e])return ke._fonts[e];const t={ascent:0,descent:0,fontSize:0},n=ke._canvas,i=ke._context;i.font=e;const s=ke.METRICS_STRING+ke.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(ke.BASELINE_SYMBOL).width);const u=Math.ceil(ke.HEIGHT_MULTIPLIER*a);if(a=a*ke.BASELINE_MULTIPLIER|0,o===0||u===0)return ke._fonts[e]=t,t;n.width=o,n.height=u,i.fillStyle="#f00",i.fillRect(0,0,o,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const l=i.getImageData(0,0,o,u).data,h=l.length,c=o*4;let d=0,p=0,g=!1;for(d=0;d<a;++d){for(let v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p+=c;else break}for(t.ascent=a-d,p=h-c,g=!1,d=u;d>a;--d){for(let v=0;v<c;v+=4)if(l[p+v]!==255){g=!0;break}if(!g)p-=c;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,ke._fonts[e]=t,t}static clearMetrics(e=""){e?delete ke._fonts[e]:ke._fonts={}}static get _canvas(){var e;if(!ke.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if((e=n.getContext("2d",qf))!=null&&e.measureText)return ke.__canvas=n,n;t=_e.ADAPTER.createCanvas()}catch{t=_e.ADAPTER.createCanvas()}t.width=t.height=10,ke.__canvas=t}return ke.__canvas}static get _context(){return ke.__context||(ke.__context=ke._canvas.getContext("2d",qf)),ke.__context}};us.METRICS_STRING="|ÉqÅ",us.BASELINE_SYMBOL="M",us.BASELINE_MULTIPLIER=1.4,us.HEIGHT_MULTIPLIER=2,us.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),us.experimentalLetterSpacing=!1,us._fonts={},us._newlines=[10,13],us._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Wo=us;const $U=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ck=class hh{constructor(e){this.styleID=0,this.reset(),sy(this,e,e)}clone(){const e={};return sy(e,this,hh.defaultStyle),new hh(e)}reset(){sy(this,hh.defaultStyle,hh.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=iy(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=iy(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){YU(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=iy(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!$U.includes(i)&&(i=`"${i}"`),t[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};Ck.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Bg.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let ks=Ck;function iy(r){const e=ot.shared,t=n=>{const i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function YU(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function sy(r,e,t){for(const n in t)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}const GU={texture:!0,children:!1,baseTexture:!0},Ak=class ex extends Yi{constructor(e,t,n){let i=!1;n||(n=_e.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const s=Me.from(n);s.orig=new $e,s.trim=new $e,super(s),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=ex.defaultResolution??_e.RESOLUTION,this._autoResolution=ex.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Wo.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ve("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Wo.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,i=Wo.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,u=i.lineHeight,l=i.lineWidths,h=i.maxLineWidth,c=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;let d,p;const g=t.dropShadow?2:1;for(let v=0;v<g;++v){const x=t.dropShadow&&v===0,y=x?Math.ceil(Math.max(1,o)+t.padding*2):0,w=y*this._resolution;if(x){n.fillStyle="black",n.strokeStyle="black";const S=t.dropShadowColor,I=t.dropShadowBlur*this._resolution,A=t.dropShadowDistance*this._resolution;n.shadowColor=ot.shared.setValue(S).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=I,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*A,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*A+w}else n.fillStyle=this._generateFillStyle(t,a,i),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let _=(u-c.fontSize)/2;u-c.fontSize<0&&(_=0);for(let S=0;S<a.length;S++)d=t.strokeThickness/2,p=t.strokeThickness/2+S*u+c.ascent+_,t.align==="right"?d+=h-l[S]:t.align==="center"&&(d+=(h-l[S])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[S],d+t.padding,p+t.padding-y,!0),t.fill&&this.drawLetterSpacing(a[S],d+t.padding,p+t.padding-y)}this.updateTexture()}drawLetterSpacing(e,t,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(Wo.experimentalLetterSpacingSupported&&(Wo.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);return}let a=t;const u=Wo.graphemeSegmenter(e);let l=this.context.measureText(e).width,h=0;for(let c=0;c<u.length;++c){const d=u[c];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let p="";for(let g=c+1;g<u.length;++g)p+=u[g];h=this.context.measureText(p).width,a+=l-h+s,l=h}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=u4(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const t=this._texture,n=this._style,i=n.trim?0:n.padding,s=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,u=this.canvas.width/this._resolution-o-a*2,l=this.canvas.height/this._resolution-o-a*2,h=i.slice(),c=e.fillGradientStops.slice();if(!c.length){const d=h.length+1;for(let p=1;p<d;++p)c.push(p/d)}if(h.unshift(i[0]),c.unshift(0),h.push(i[i.length-1]),c.push(1),e.fillGradientType===Bg.LINEAR_VERTICAL){s=this.context.createLinearGradient(u/2,a,u/2,l+a);const d=n.fontProperties.fontSize+e.strokeThickness;for(let p=0;p<t.length;p++){const g=n.lineHeight*(p-1)+d,v=n.lineHeight*p;let x=v;p>0&&g>v&&(x=(v+g)/2);const y=v+d,w=n.lineHeight*(p+1);let _=y;p+1<t.length&&w<y&&(_=(y+w)/2);const S=(_-x)/l;for(let I=0;I<h.length;I++){let A=0;typeof c[I]=="number"?A=c[I]:A=I/h.length;let k=Math.min(1,Math.max(0,x/l+A*S));k=Number(k.toFixed(5)),s.addColorStop(k,h[I])}}}else{s=this.context.createLinearGradient(a,l/2,u+a,l/2);const d=h.length+1;let p=1;for(let g=0;g<h.length;g++){let v;typeof c[g]=="number"?v=c[g]:v=p/d,s.addColorStop(v,h[g]),p++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},GU,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=na(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=na(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof ks?this._style=e:this._style=new ks(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};Ak.defaultAutoResolution=!0;let K_=Ak;class WU{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function VU(r,e){var n;let t=!1;if((n=r==null?void 0:r._textures)!=null&&n.length){for(let i=0;i<r._textures.length;i++)if(r._textures[i]instanceof Me){const s=r._textures[i].baseTexture;e.includes(s)||(e.push(s),t=!0)}}return t}function qU(r,e){if(r.baseTexture instanceof De){const t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function KU(r,e){if(r._texture&&r._texture instanceof Me){const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function QU(r,e){return e instanceof K_?(e.updateText(!0),!0):!1}function ZU(r,e){if(e instanceof ks){const t=e.toFontString();return Wo.measureFont(t),!0}return!1}function JU(r,e){if(r instanceof K_){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);const t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function ej(r,e){return r instanceof ks?(e.includes(r)||e.push(r),!0):!1}const kk=class Ik{constructor(e){this.limiter=new WU(Ik.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(JU),this.registerFindHook(ej),this.registerFindHook(VU),this.registerFindHook(qU),this.registerFindHook(KU),this.registerUploadHook(QU),this.registerUploadHook(ZU)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Dt.system.addOnce(this.tick,this,wa.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Dt.system.addOnce(this.tick,this,wa.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof qr)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Dt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};kk.uploadsPerFrame=4;let tx=kk;Object.defineProperties(_e,{UPLOADS_PER_FRAME:{get(){return tx.uploadsPerFrame},set(r){Ve("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),tx.uploadsPerFrame=r}}});function Mk(r,e){return e instanceof De?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function tj(r,e){if(!(e instanceof Fu))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:n}=t;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&Mk(r,s.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function rj(r,e){return r instanceof Fu?(e.push(r),!0):!1}class Rk extends tx{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(rj),this.registerUploadHook(Mk),this.registerUploadHook(tj)}}Rk.extension={name:"prepare",type:me.RendererSystem};Ee.add(Rk);class $h extends Yi{constructor(e,t=!0){super(e[0]instanceof Me?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Dt.shared.add(this.update,this,wa.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const t=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=t/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const t=[];for(let n=0;n<e.length;++n)t.push(Me.from(e[n]));return new $h(t)}static fromImages(e){const t=[];for(let n=0;n<e.length;++n)t.push(Me.from(e[n]));return new $h(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof Me)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Dt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Dt.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const Qc=new je;class Q_ extends Yi{constructor(e,t=100,n=100){super(e),this.tileTransform=new kg,this._width=t,this._height=n,this.uvMatrix=this.texture.uvMatrix||new Mg(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const t=this._texture;!t||!t.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new $e),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Qc);const t=this._width,n=this._height,i=-t*this.anchor._x;if(Qc.x>=i&&Qc.x<i+t){const s=-n*this.anchor._y;if(Qc.y>=s&&Qc.y<s+n)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,t){const n=e instanceof Me?e:Me.from(e,t);return new Q_(n,t.width,t.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var nj=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,ij=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,sj=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,n2=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,oj=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Kf=new wt;class Ok extends Ig{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new FA,this.state=Bs.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Bi.from(n2,oj,t),this.shader=e.context.webGLVersion>1?Bi.from(ij,nj,t):Bi.from(n2,sj,t)}render(e){const t=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=e._texture,u=a.baseTexture,l=u.alphaMode>0,h=e.tileTransform.localTransform,c=e.uvMatrix;let d=u.isPowerOfTwo&&a.frame.width===u.width&&a.frame.height===u.height;d&&(u._glTextures[t.CONTEXT_UID]?d=u.wrapMode!==oi.CLAMP:u.wrapMode===oi.CLAMP&&(u.wrapMode=oi.REPEAT));const p=d?this.simpleShader:this.shader,g=a.width,v=a.height,x=e._width,y=e._height;Kf.set(h.a*g/x,h.b*g/y,h.c*v/x,h.d*v/y,h.tx/x,h.ty/y),Kf.invert(),d?Kf.prepend(c.mapCoord):(p.uniforms.uMapCoord=c.mapCoord.toArray(!0),p.uniforms.uClampFrame=c.uClampFrame,p.uniforms.uClampOffset=c.uClampOffset),p.uniforms.uTransform=Kf.toArray(!0),p.uniforms.uColor=ot.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(p.uniforms.uColor),p.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),p.uniforms.uSampler=a,t.shader.bind(p),t.geometry.bind(n),this.state.blendMode=bA(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Ok.extension={name:"tilingSprite",type:me.RendererPlugin};Ee.add(Ok);const Nk=class dh{constructor(e,t,n){this.linkedSheets=[],(e instanceof De||e instanceof Me)&&(e={texture:e,data:t,resolutionFilename:n});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof Me?i:null,this.baseTexture=i instanceof De?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const u=this.baseTexture.resource;this.resolution=this._updateResolution(o||(u?u.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let n=go(e,null);return n===null&&(n=typeof t=="number"?t:parseFloat(t??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=dh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const n=dh.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){const i=this._frameKeys[t],s=this._frames[i],o=s.frame;if(o){let a=null,u=null;const l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,h=new $e(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?a=new $e(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new $e(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(u=new $e(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Me(this.baseTexture,a,h,u,s.rotated?2:0,s.anchor,s.borders),Me.addToCache(this.textures[i],this.cachePrefix+i.toString())}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*dh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*dh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Nk.BATCH_SIZE=1e3;let i2=Nk;const aj=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Bk(r,e,t){const n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!t){const i=$t.dirname(r[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(n,Bk([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return n}const lj={extension:me.Asset,cache:{test:r=>r instanceof i2,getCacheableAssets:(r,e)=>Bk(r,e,!1)},resolver:{test:r=>{const e=r.split("?")[0].split("."),t=e.pop(),n=e.pop();return t==="json"&&aj.includes(n)},parse:r=>{var t;const e=r.split(".");return{resolution:parseFloat(((t=_e.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:me.LoadParser,priority:jn.Normal},async testParse(r,e){return $t.extname(e.src).toLowerCase()===".json"&&!!r.frames},async parse(r,e,t){var h,c;const{texture:n,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=$t.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(n&&n.baseTexture)a=n;else{const d=K1(o+(i??r.meta.image),e.src);a=(await t.load([d]))[d]}const u=new i2({texture:a.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:s});await u.parse();const l=(h=r==null?void 0:r.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(l)){const d=[];for(const g of l){if(typeof g!="string")continue;let v=o+g;(c=e.data)!=null&&c.ignoreMultiPack||(v=K1(v,e.src),d.push(t.load({src:v,data:{ignoreMultiPack:!0}})))}const p=await Promise.all(d);u.linkedSheets=p,p.forEach(g=>{g.linkedSheets=[u].concat(u.linkedSheets.filter(v=>v!==g))})}return u},unload(r){r.destroy(!0)}}};Ee.add(lj);class Sm{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Hp{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),u={};for(const l in a){const h=a[l].split("="),c=h[0],d=h[1].replace(/"/gm,""),p=parseFloat(d),g=isNaN(p)?d:p;u[c]=g}n[o].push(u)}const i=new Sm;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class rx{static test(e){const t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const t=new Sm,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),u=e.getElementsByTagName("distanceField");for(let l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(let l=0;l<i.length;l++)t.common.push({lineHeight:parseInt(i[l].getAttribute("lineHeight"),10)});for(let l=0;l<s.length;l++)t.page.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});for(let l=0;l<o.length;l++){const h=o[l];t.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let l=0;l<a.length;l++)t.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});for(let l=0;l<u.length;l++)t.distanceField.push({fieldType:u[l].getAttribute("fieldType"),distanceRange:parseInt(u[l].getAttribute("distanceRange"),10)});return t}}class nx{static test(e){return typeof e=="string"&&e.includes("<font>")?rx.test(_e.ADAPTER.parseXML(e)):!1}static parse(e){return rx.parse(_e.ADAPTER.parseXML(e))}}const oy=[Hp,rx,nx];function uj(r){for(let e=0;e<oy.length;e++)if(oy[e].test(r))return oy[e];return null}function cj(r,e,t,n,i,s){const o=t.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const u=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,h=r.width/n-u-l*2,c=r.height/n-u-l*2,d=o.slice(),p=t.fillGradientStops.slice();if(!p.length){const g=d.length+1;for(let v=1;v<g;++v)p.push(v/g)}if(d.unshift(o[0]),p.unshift(0),d.push(o[o.length-1]),p.push(1),t.fillGradientType===Bg.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,l,h/2,c+l);let g=0;const v=(s.fontProperties.fontSize+t.strokeThickness)/c;for(let x=0;x<i.length;x++){const y=s.lineHeight*x;for(let w=0;w<d.length;w++){let _=0;typeof p[w]=="number"?_=p[w]:_=w/d.length;const S=y/c+_*v;let I=Math.max(g,S);I=Math.min(I,1),a.addColorStop(I,d[w]),g=I}}}else{a=e.createLinearGradient(l,c/2,h+l,c/2);const g=d.length+1;let v=1;for(let x=0;x<d.length;x++){let y;typeof p[x]=="number"?y=p[x]:y=v/g,a.addColorStop(y,d[x]),v++}}return a}function hj(r,e,t,n,i,s,o){const a=t.text,u=t.fontProperties;e.translate(n,i),e.scale(s,s);const l=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=cj(r,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=o.dropShadowBlur*s,p=o.dropShadowDistance*s;e.shadowColor=ot.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,l,h+t.lineHeight-u.descent),o.fill&&e.fillText(a,l,h+t.lineHeight-u.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function zp(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function Lk(r){return Array.from?Array.from(r):r.split("")}function dj(r){typeof r=="string"&&(r=[r]);const e=[];for(let t=0,n=r.length;t<n;t++){const i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,u=o;a<=u;a++)e.push(String.fromCharCode(a))}else e.push(...Lk(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Ho=class cs{constructor(e,t,n){var h;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,u=go(o.file),l={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=l;for(let c=0;c<e.page.length;c++){const{id:d,file:p}=e.page[c];l[d]=t instanceof Array?t[c]:t[p],a!=null&&a.fieldType&&a.fieldType!=="none"&&(l[d].baseTexture.alphaMode=$r.NO_PREMULTIPLIED_ALPHA,l[d].baseTexture.mipmap=li.OFF)}for(let c=0;c<e.char.length;c++){const{id:d,page:p}=e.char[c];let{x:g,y:v,width:x,height:y,xoffset:w,yoffset:_,xadvance:S}=e.char[c];g/=u,v/=u,x/=u,y/=u,w/=u,_/=u,S/=u;const I=new $e(g+l[p].frame.x/u,v+l[p].frame.y/u,x,y);this.chars[d]={xOffset:w,yOffset:_,xAdvance:S,kerning:{},texture:new Me(l[p].baseTexture,I),page:p}}for(let c=0;c<e.kerning.length;c++){let{first:d,second:p,amount:g}=e.kerning[c];d/=u,p/=u,g/=u,this.chars[p]&&(this.chars[p].kerning[d]=g)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((h=a==null?void 0:a.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,n){let i;if(e instanceof Sm)i=e;else{const o=uj(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}t instanceof Me&&(t=[t]);const s=new cs(i,t,n);return cs.available[s.font]=s,s}static uninstall(e){const t=cs.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete cs.available[e]}static from(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:u,...l}=Object.assign({},cs.defaultOptions,n),h=dj(i),c=t instanceof ks?t:new ks(t),d=a,p=new Sm;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};let g=0,v=0,x,y,w,_=0;const S=[];for(let A=0;A<h.length;A++){x||(x=_e.ADAPTER.createCanvas(),x.width=a,x.height=u,y=x.getContext("2d"),w=new De(x,{resolution:o,...l}),S.push(new Me(w)),p.page.push({id:S.length-1,file:""}));const k=h[A],M=Wo.measureText(k,c,!1,x),O=M.width,F=Math.ceil(M.height),U=Math.ceil((c.fontStyle==="italic"?2:1)*O);if(v>=u-F*o){if(v===0)throw new Error(`[BitmapFont] textureHeight ${u}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${k}')`);--A,x=null,y=null,w=null,v=0,g=0,_=0;continue}if(_=Math.max(F+M.fontProperties.descent,_),U*o+g>=d){if(g===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${k}')`);--A,v+=_*o,v=Math.ceil(v),g=0,_=0;continue}hj(x,y,M,g,v,o,c);const H=zp(M.text);p.char.push({id:H,page:S.length-1,x:g/o,y:v/o,width:U,height:F,xoffset:0,yoffset:0,xadvance:O-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),g+=(U+2*s)*o,g=Math.ceil(g)}if(!(n!=null&&n.skipKerning))for(let A=0,k=h.length;A<k;A++){const M=h[A];for(let O=0;O<k;O++){const F=h[O],U=y.measureText(M).width,H=y.measureText(F).width,L=y.measureText(M+F).width-(U+H);L&&p.kerning.push({first:zp(M),second:zp(F),amount:L})}}const I=new cs(p,S,!0);return cs.available[e]!==void 0&&cs.uninstall(e),cs.available[e]=I,I}};Ho.ALPHA=[["a","z"],["A","Z"]," "],Ho.NUMERIC=[["0","9"]],Ho.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Ho.ASCII=[[" ","~"]],Ho.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ho.ALPHANUMERIC},Ho.available={};let zo=Ho;var fj=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,pj=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const s2=[],o2=[],a2=[],Fk=class Dk extends qr{constructor(e,t={}){super();const{align:n,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:u}=Object.assign({},Dk.styleDefaults,t);if(!zo.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new ot(i),this._font=void 0,this._fontName=a,this._fontSize=u,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ii(()=>{this.dirty=!0},this,0,0),this._roundPixels=_e.ROUND_PIXELS,this.dirty=!0,this._resolution=_e.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var U;const e=zo.available[this._fontName],t=this.fontSize,n=t/e.size,i=new je,s=[],o=[],a=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Lk(u),h=this._maxWidth*e.size/t,c=e.distanceFieldType==="none"?s2:o2;let d=null,p=0,g=0,v=0,x=-1,y=0,w=0,_=0,S=0;for(let H=0;H<l.length;H++){const L=l[H],N=zp(L);if(/(?:\s)/.test(L)&&(x=H,y=p,S++),L==="\r"||L===`
`){o.push(p),a.push(-1),g=Math.max(g,p),++v,++w,i.x=0,i.y+=e.lineHeight,d=null,S=0;continue}const j=e.chars[N];if(!j)continue;d&&j.kerning[d]&&(i.x+=j.kerning[d]);const Y=a2.pop()||{texture:Me.EMPTY,line:0,charCode:0,prevSpaces:0,position:new je};Y.texture=j.texture,Y.line=v,Y.charCode=N,Y.position.x=Math.round(i.x+j.xOffset+this._letterSpacing/2),Y.position.y=Math.round(i.y+j.yOffset),Y.prevSpaces=S,s.push(Y),p=Y.position.x+Math.max(j.xAdvance-j.xOffset,j.texture.orig.width),i.x+=j.xAdvance+this._letterSpacing,_=Math.max(_,j.yOffset+j.texture.height),d=N,x!==-1&&h>0&&i.x>h&&(++w,Ru(s,1+x-w,1+H-x),H=x,x=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),g=Math.max(g,y),v++,i.x=0,i.y+=e.lineHeight,d=null,S=0)}const I=l[l.length-1];I!=="\r"&&I!==`
`&&(/(?:\s)/.test(I)&&(p=y),o.push(p),g=Math.max(g,p),a.push(-1));const A=[];for(let H=0;H<=v;H++){let L=0;this._align==="right"?L=g-o[H]:this._align==="center"?L=(g-o[H])/2:this._align==="justify"&&(L=a[H]<0?0:(g-o[H])/a[H]),A.push(L)}const k=s.length,M={},O=[],F=this._activePagesMeshData;c.push(...F);for(let H=0;H<k;H++){const L=s[H].texture,N=L.baseTexture.uid;if(!M[N]){let j=c.pop();if(!j){const K=new _d;let X,W;e.distanceFieldType==="none"?(X=new tc(Me.EMPTY),W=Pe.NORMAL):(X=new tc(Me.EMPTY,{program:_s.from(pj,fj),uniforms:{uFWidth:0}}),W=Pe.NORMAL_NPM);const z=new pl(K,X);z.blendMode=W,j={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:z,vertices:null,uvs:null,indices:null}}j.index=0,j.indexCount=0,j.vertexCount=0,j.uvsCount=0,j.total=0;const{_textureCache:Y}=this;Y[N]=Y[N]||new Me(L.baseTexture),j.mesh.texture=Y[N],j.mesh.tint=this._tintColor.value,O.push(j),M[N]=j}M[N].total++}for(let H=0;H<F.length;H++)O.includes(F[H])||this.removeChild(F[H].mesh);for(let H=0;H<O.length;H++)O[H].mesh.parent!==this&&this.addChild(O[H].mesh);this._activePagesMeshData=O;for(const H in M){const L=M[H],N=L.total;if(!(((U=L.indices)==null?void 0:U.length)>6*N)||L.vertices.length<pl.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*N),L.uvs=new Float32Array(4*2*N),L.indices=new Uint16Array(6*N);else{const j=L.total,Y=L.vertices;for(let K=j*4*2;K<Y.length;K++)Y[K]=0}L.mesh.size=6*N}for(let H=0;H<k;H++){const L=s[H];let N=L.position.x+A[L.line]*(this._align==="justify"?L.prevSpaces:1);this._roundPixels&&(N=Math.round(N));const j=N*n,Y=L.position.y*n,K=L.texture,X=M[K.baseTexture.uid],W=K.frame,z=K._uvs,V=X.index++;X.indices[V*6+0]=0+V*4,X.indices[V*6+1]=1+V*4,X.indices[V*6+2]=2+V*4,X.indices[V*6+3]=0+V*4,X.indices[V*6+4]=2+V*4,X.indices[V*6+5]=3+V*4,X.vertices[V*8+0]=j,X.vertices[V*8+1]=Y,X.vertices[V*8+2]=j+W.width*n,X.vertices[V*8+3]=Y,X.vertices[V*8+4]=j+W.width*n,X.vertices[V*8+5]=Y+W.height*n,X.vertices[V*8+6]=j,X.vertices[V*8+7]=Y+W.height*n,X.uvs[V*8+0]=z.x0,X.uvs[V*8+1]=z.y0,X.uvs[V*8+2]=z.x1,X.uvs[V*8+3]=z.y1,X.uvs[V*8+4]=z.x2,X.uvs[V*8+5]=z.y2,X.uvs[V*8+6]=z.x3,X.uvs[V*8+7]=z.y3}this._textWidth=g*n,this._textHeight=(i.y+e.lineHeight)*n;for(const H in M){const L=M[H];if(this.anchor.x!==0||this.anchor.y!==0){let K=0;const X=this._textWidth*this.anchor.x,W=this._textHeight*this.anchor.y;for(let z=0;z<L.total;z++)L.vertices[K++]-=X,L.vertices[K++]-=W,L.vertices[K++]-=X,L.vertices[K++]-=W,L.vertices[K++]-=X,L.vertices[K++]-=W,L.vertices[K++]-=X,L.vertices[K++]-=W}this._maxLineHeight=_*n;const N=L.mesh.geometry.getBuffer("aVertexPosition"),j=L.mesh.geometry.getBuffer("aTextureCoord"),Y=L.mesh.geometry.getIndex();N.data=L.vertices,j.data=L.uvs,Y.data=L.indices,N.update(),j.update(),Y.update()}for(let H=0;H<s.length;H++)a2.push(s[H]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:n,size:i}=zo.available[this._fontName];if(n!=="none"){const{a:s,b:o,c:a,d:u}=this.worldTransform,l=Math.sqrt(s*s+o*o),h=Math.sqrt(a*a+u*u),c=(Math.abs(l)+Math.abs(h))/2,d=this.fontSize/i,p=e._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=c*t*d*p}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=zo.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!zo.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??zo.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=zo.available[this._fontName].distanceFieldType==="none"?s2:o2;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=Me.EMPTY});for(const i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};Fk.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let mj=Fk;const gj=[".xml",".fnt"],vj={extension:{type:me.LoadParser,priority:jn.Normal},name:"loadBitmapFont",test(r){return gj.includes($t.extname(r).toLowerCase())},async testParse(r){return Hp.test(r)||nx.test(r)},async parse(r,e,t){const n=Hp.test(r)?Hp.parse(r):nx.parse(r),{src:i}=e,{page:s}=n,o=[];for(let l=0;l<s.length;++l){const h=s[l].file;let c=$t.join($t.dirname(i),h);c=K1(c,i),o.push(c)}const a=await t.load(o),u=o.map(l=>a[l]);return zo.install(n,u,!0)},async load(r,e){return(await _e.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};Ee.add(vj);const ix=class ru extends ks{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new ru(Object.keys(ru.defaultOptions).reduce((t,n)=>({...t,[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete ru.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:n}=ru;if(n[e]){const i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return _e.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),u=new FileReader;u.onload=()=>s([a,u.result]),u.onerror=o,u.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:$t.basename(e,$t.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},t);n[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(n=>!this._overrides.includes(n));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(n=>this._overrides.includes(n));t.length>0&&(this._overrides=this._overrides.filter(n=>!t.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=n4(e)),typeof e=="number"?r4(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const s=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,ru.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=_e.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};ix.availableFonts={},ix.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let ay=ix;const Qf=class nu extends Yi{constructor(e="",t={}){super(Me.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,i=Me.from(n,{scaleMode:_e.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new $e,i.trim=new $e,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),u=document.createElementNS(s,"foreignObject"),l=document.createElementNS(o,"div"),h=document.createElementNS(o,"style");u.setAttribute("width","10000"),u.setAttribute("height","10000"),u.style.overflow="hidden",a.appendChild(u),this.maxWidth=nu.defaultMaxWidth,this.maxHeight=nu.defaultMaxHeight,this._domElement=l,this._styleElement=h,this._svgRoot=a,this._foreignObject=u,this._foreignObject.appendChild(h),this._foreignObject.appendChild(l),this._image=n,this._loadImage=new Image,this._autoResolution=nu.defaultAutoResolution,this._resolution=nu.defaultResolution??_e.RESOLUTION,this.text=e,this.style=t}measureText(e){var h,c;const{text:t,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const u=Math.min(this.maxWidth,Math.ceil(o)),l=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",u.toString()),this._svgRoot.setAttribute("height",l.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:(h=this._style)==null?void 0:h.toCSS(i)}),this._styleElement.textContent=(c=this._style)==null?void 0:c.toGlobalCSS()),{width:u+n.padding*2,height:l+n.padding*2}}async updateText(e=!0){const{style:t,_image:n,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,s)),n.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(u=>{i.onload=async()=>{if(a<this._updateID){u();return}await t.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),u()};const l=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(l)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:n,resolution:i}=this,{padding:s}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/i,t.trim.height=t._frame.height=n.height/i,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var n,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},nu.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&((n=this._style)==null||n.cleanFonts()),this._style=t,(i=this._svgRoot)==null||i.remove(),this._svgRoot=t,(s=this._domElement)==null||s.remove(),this._domElement=t,(o=this._foreignObject)==null||o.remove(),this._foreignObject=t,(a=this._styleElement)==null||a.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=na(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=na(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof ay?(this.ownsStyle=!1,this._style=e):e instanceof ks?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=ay.from(e)):(this.ownsStyle=!0,this._style=new ay(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Qf.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Qf.defaultMaxWidth=2024,Qf.defaultMaxHeight=2024,Qf.defaultAutoResolution=!0;var co=(r=>(r.English="en",r.Chinese="cs",r.Vietnamese="vn",r.Thai="th",r.Khmer="kh",r.Indonesian="id",r.Korean="kr",r.Japanese="jp",r.Turkish="tr",r.Portuguese="pt",r.IndianHindi="hi",r))(co||{});class yj{constructor(){P(this,"urlOptions");P(this,"tableOptions");P(this,"configOptions");this.urlOptions=this.getUrlConfig(),this.tableOptions=iu("table")||{},this.configOptions=iu("gameconfig")||{}}configureLanguage(){let e=hn("lang","en");switch(!0){case e.indexOf("us")>=0:case e.indexOf("en")>=0:e="en";break;case e.indexOf("cn")>=0:case e.indexOf("zh")>=0:case e.indexOf("zn")>=0:case e.indexOf("cs")>=0:e="cs";break;case e.indexOf("th")>=0:e="th";break;case e.indexOf("vi")>=0:case e.indexOf("vn")>=0:e="vn";break;case e.indexOf("ko")>=0:case e.indexOf("kr")>=0:e="kr";break;case e.indexOf("km")>=0:case e.indexOf("kh")>=0:e="kh";break;case e.indexOf("id")>=0:e="id";break;case e.indexOf("ja")>=0:case e.indexOf("jp")>=0:e="jp";break;case e.indexOf("hi")>=0:e="hi";break;case e.indexOf("tr")>=0:e="tr";break;case e.indexOf("pt")>=0:e="pt";break;default:e="en"}return e}getUrlConfig(){const e={operator:hn("op",""),funPLay:hn("fun","0")=="1",showLog:hn("log","0")=="1",loginUrl:hn("loginUrl",""),lobbyUrl:hn("lobbyUrl",""),fundsUrl:hn("fundsUrl",""),livechatUrl:hn("livechatUrl",""),token:hn("token")||hn("s"),lang:this.configureLanguage(),platform:hn("p")||(ni.any?"mobile":"web")};return!e.token&&!e.loginUrl&&(e.funPLay=!0),e}getLoginUrl(){return this.urlOptions.loginUrl?`${this.urlOptions.loginUrl}?url=${encodeURIComponent(OB("fun","0"))}`:this.getLobbyUrl()}getLobbyUrl(){return this.urlOptions.lobbyUrl||""}}var ca=Object.freeze({Linear:Object.freeze({None:function(r){return r},In:function(r){return r},Out:function(r){return r},InOut:function(r){return r}}),Quadratic:Object.freeze({In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return(r*=2)<1?.5*r*r:-.5*(--r*(r-2)-1)}}),Cubic:Object.freeze({In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r:.5*((r-=2)*r*r+2)}}),Quartic:Object.freeze({In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return(r*=2)<1?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}}),Quintic:Object.freeze({In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return(r*=2)<1?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}}),Sinusoidal:Object.freeze({In:function(r){return 1-Math.sin((1-r)*Math.PI/2)},Out:function(r){return Math.sin(r*Math.PI/2)},InOut:function(r){return .5*(1-Math.sin(Math.PI*(.5-r)))}}),Exponential:Object.freeze({In:function(r){return r===0?0:Math.pow(1024,r-1)},Out:function(r){return r===1?1:1-Math.pow(2,-10*r)},InOut:function(r){return r===0?0:r===1?1:(r*=2)<1?.5*Math.pow(1024,r-1):.5*(-Math.pow(2,-10*(r-1))+2)}}),Circular:Object.freeze({In:function(r){return 1-Math.sqrt(1-r*r)},Out:function(r){return Math.sqrt(1- --r*r)},InOut:function(r){return(r*=2)<1?-.5*(Math.sqrt(1-r*r)-1):.5*(Math.sqrt(1-(r-=2)*r)+1)}}),Elastic:Object.freeze({In:function(r){return r===0?0:r===1?1:-Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI)},Out:function(r){return r===0?0:r===1?1:Math.pow(2,-10*r)*Math.sin((r-.1)*5*Math.PI)+1},InOut:function(r){return r===0?0:r===1?1:(r*=2,r<1?-.5*Math.pow(2,10*(r-1))*Math.sin((r-1.1)*5*Math.PI):.5*Math.pow(2,-10*(r-1))*Math.sin((r-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(r){var e=1.70158;return r===1?1:r*r*((e+1)*r-e)},Out:function(r){var e=1.70158;return r===0?0:--r*r*((e+1)*r+e)+1},InOut:function(r){var e=2.5949095;return(r*=2)<1?.5*(r*r*((e+1)*r-e)):.5*((r-=2)*r*((e+1)*r+e)+2)}}),Bounce:Object.freeze({In:function(r){return 1-ca.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return r<.5?ca.Bounce.In(r*2)*.5:ca.Bounce.Out(r*2-1)*.5+.5}}),generatePow:function(r){return r===void 0&&(r=4),r=r<Number.EPSILON?Number.EPSILON:r,r=r>1e4?1e4:r,{In:function(e){return Math.pow(e,r)},Out:function(e){return 1-Math.pow(1-e,r)},InOut:function(e){return e<.5?Math.pow(e*2,r)/2:(1-Math.pow(2-e*2,r))/2+.5}}}}),fh=function(){return performance.now()},Uk=function(){function r(){this._tweens={},this._tweensAddedDuringUpdate={}}return r.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},r.prototype.removeAll=function(){this._tweens={}},r.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},r.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},r.prototype.update=function(e,t){e===void 0&&(e=fh()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var s=this._tweens[n[i]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[n[i]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},r}(),lu={Linear:function(r,e){var t=r.length-1,n=t*e,i=Math.floor(n),s=lu.Utils.Linear;return e<0?s(r[0],r[1],n):e>1?s(r[t],r[t-1],t-n):s(r[i],r[i+1>t?t:i+1],n-i)},Bezier:function(r,e){for(var t=0,n=r.length-1,i=Math.pow,s=lu.Utils.Bernstein,o=0;o<=n;o++)t+=i(1-e,n-o)*i(e,o)*r[o]*s(n,o);return t},CatmullRom:function(r,e){var t=r.length-1,n=t*e,i=Math.floor(n),s=lu.Utils.CatmullRom;return r[0]===r[t]?(e<0&&(i=Math.floor(n=t*(1+e))),s(r[(i-1+t)%t],r[i],r[(i+1)%t],r[(i+2)%t],n-i)):e<0?r[0]-(s(r[0],r[0],r[1],r[1],-n)-r[0]):e>1?r[t]-(s(r[t],r[t],r[t-1],r[t-1],n-t)-r[t]):s(r[i?i-1:0],r[i],r[t<i+1?t:i+1],r[t<i+2?t:i+2],n-i)},Utils:{Linear:function(r,e,t){return(e-r)*t+r},Bernstein:function(r,e){var t=lu.Utils.Factorial;return t(r)/t(e)/t(r-e)},Factorial:function(){var r=[1];return function(e){var t=1;if(r[e])return r[e];for(var n=e;n>1;n--)t*=n;return r[e]=t,t}}(),CatmullRom:function(r,e,t,n,i){var s=(t-r)*.5,o=(n-e)*.5,a=i*i,u=i*a;return(2*e-2*t+s+o)*u+(-3*e+3*t-2*s-o)*a+s*i+e}}},xj=function(){function r(){}return r.nextId=function(){return r._nextId++},r._nextId=0,r}(),sx=new Uk,Z_=function(){function r(e,t){t===void 0&&(t=sx),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ca.Linear.None,this._interpolationFunction=lu.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=xj.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return r.prototype.getId=function(){return this._id},r.prototype.isPlaying=function(){return this._isPlaying},r.prototype.isPaused=function(){return this._isPaused},r.prototype.getDuration=function(){return this._duration},r.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},r.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},r.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},r.prototype.start=function(e,t){if(e===void 0&&(e=fh()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var s in this._valuesEnd)i[s]=this._valuesEnd[s];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},r.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},r.prototype._setupProperties=function(e,t,n,i,s){for(var o in n){var a=e[o],u=Array.isArray(a),l=u?"array":typeof a,h=!u&&Array.isArray(n[o]);if(!(l==="undefined"||l==="function")){if(h){var c=n[o];if(c.length===0)continue;for(var d=[a],p=0,g=c.length;p<g;p+=1){var v=this._handleRelativeValue(a,c[p]);if(isNaN(v)){h=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(v)}h&&(n[o]=d)}if((l==="object"||u)&&a&&!h){t[o]=u?[]:{};var x=a;for(var y in x)t[o][y]=x[y];i[o]=u?[]:{};var c=n[o];if(!this._isDynamic){var w={};for(var y in c)w[y]=c[y];n[o]=c=w}this._setupProperties(x,t[o],c,i[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),u||(t[o]*=1),h?i[o]=n[o].slice().reverse():i[o]=t[o]||0}}},r.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},r.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},r.prototype.pause=function(e){return e===void 0&&(e=fh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},r.prototype.resume=function(e){return e===void 0&&(e=fh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},r.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},r.prototype.group=function(e){return e===void 0&&(e=sx),this._group=e,this},r.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},r.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},r.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},r.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},r.prototype.easing=function(e){return e===void 0&&(e=ca.Linear.None),this._easingFunction=e,this},r.prototype.interpolation=function(e){return e===void 0&&(e=lu.Linear),this._interpolationFunction=e,this},r.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},r.prototype.onStart=function(e){return this._onStartCallback=e,this},r.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},r.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},r.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},r.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},r.prototype.onStop=function(e){return this._onStopCallback=e,this},r.prototype.update=function(e,t){var n;if(e===void 0&&(e=fh()),t===void 0&&(t=!0),this._isPaused)return!0;var i=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>i)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,o=this._duration+((n=this._repeatDelayTime)!==null&&n!==void 0?n:this._delayTime),a=this._duration+this._repeat*o,u=this._calculateElapsedPortion(s,o,a),l=this._easingFunction(u),h=this._calculateCompletionStatus(s,o);if(h==="repeat"&&this._processRepetition(s,o),this._updateProperties(this._object,this._valuesStart,this._valuesEnd,l),h==="about-to-repeat"&&this._processRepetition(s,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),h==="repeat"||h==="about-to-repeat")this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1;else if(h==="completed"){this._isPlaying=!1,this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var c=0,d=this._chainedTweens.length;c<d;c++)this._chainedTweens[c].start(this._startTime+this._duration,!1)}return h!=="completed"},r.prototype._calculateElapsedPortion=function(e,t,n){if(this._duration===0||e>n)return 1;var i=e%t,s=Math.min(i/this._duration,1);return s===0&&e!==0&&e%this._duration===0?1:s},r.prototype._calculateCompletionStatus=function(e,t){return this._duration!==0&&e<this._duration?"playing":this._repeat<=0?"completed":e===this._duration?"about-to-repeat":"repeat"},r.prototype._processRepetition=function(e,t){var n=Math.min(Math.trunc((e-this._duration)/t)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=n);for(var i in this._valuesStartRepeat){var s=this._valuesEnd[i];!this._yoyo&&typeof s=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(s)),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}this._yoyo&&(this._reversed=!this._reversed),this._startTime+=t*n},r.prototype._updateProperties=function(e,t,n,i){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,a=n[s],u=Array.isArray(e[s]),l=Array.isArray(a),h=!u&&l;h?e[s]=this._interpolationFunction(a,i):typeof a=="object"&&a?this._updateProperties(e[s],o,a,i):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*i))}},r.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},r.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},r}(),Is=sx;Is.getAll.bind(Is);Is.removeAll.bind(Is);Is.add.bind(Is);var jk=Is.remove.bind(Is),_j=Is.update.bind(Is);class wj extends yj{constructor(){super();P(this,"_time",0);P(this,"_turboTime",0);P(this,"turboTicker",new Dt);P(this,"turboTweenGroup",new Uk);this.turboTicker.autoStart=!1}deltaTime(t){this._time+=t}deltaTurboTime(t){this._turboTime+=t}getTime(t){return t?this._turboTime:this._time}}class bj extends wj{constructor(){super(...arguments);P(this,"eventEmitter",new GL.EventEmitter)}get notice(){return this.eventEmitter}}class Sj extends bj{constructor(){super(...arguments);P(this,"_viewport");P(this,"_orientation")}get viewport(){return this._viewport}get orientation(){return this._orientation}updateViewport(t,n,i,s){this._viewport=[t,n,i,s]}updateOrientation(){this._orientation=this.getOrientationType()}get isLandscapeOnly(){const t=this.configOptions.layoutMap;return t.l&&!t.p}get isPortraitOnly(){const t=this.configOptions.layoutMap;return t.p&&!t.l}getOrientationType(){const t=this.configOptions.layoutMap;return t.p&&t.l?document.documentElement.clientHeight/document.documentElement.clientWidth>1/.767?"p":"l":t.p?"p":"l"}get layoutOptions(){return this.configOptions.layoutMap[this._orientation]}}class Tj extends Sj{constructor(){super(...arguments);P(this,"_isSupportAvif",!1);P(this,"_isSupportWebp",!1)}get isSupportWebp(){return this._isSupportWebp}get isSupportAvif(){return this._isSupportAvif}setSupportImagesFormat(t,n){this._isSupportAvif=n,this._isSupportWebp=t}filterImageFormat(t){return this.isSupportAvif||t.splice(t.indexOf("avif"),1),this.isSupportWebp||t.splice(t.indexOf("webp"),1),t[0]}}class Ej extends Tj{constructor(){super();P(this,"isTablet");P(this,"isMobile");this.isMobile=fe.mobile(),this.isTablet=fe.tablet()}}class Pj extends Ej{constructor(){super(...arguments);P(this,"_serverTimeMillisecond",0);P(this,"_timer")}setServerTime(t){this._serverTimeMillisecond=t*1e3,this._timer=new Date}getServerTimeMillisecond(){return this._serverTimeMillisecond}getServerTimeMillisecondNow(){const n=new Date().getTime()-this._timer.getTime();return this._serverTimeMillisecond+n}}const cg=class cg extends Pj{static get Obj(){return this._Obj||(this._Obj=new cg),this._Obj}};P(cg,"_Obj");let Be=cg;const Cj="action_sign_in",Xk="action_get_player_info",Hk="action_balance_change",zk="action_sound_open",Aj="action_volume_changed",$k="action_menu_open",Yk="action_paytable_open",kj="action_betpanel_open",Ij="action_auto_panel_open",Gk="action_orientation_changed",Mj="action_force_update",Wk="action_history_list_open",Vk="action_history_detail_open",qk="action_error_detail",Kk="action_spin",Qk="action_loaded",Zk="action_loaded_error",Jk="action_spin_stopping",eI="action_spin_stop",tI="action_set_bet_amount",rI="action_set_bet_level",nI="action_set_auto_spin_detail",Rj="action_do_auto_spin",iI="action_stop_auto_spin",sI="action_set_spin_speed",oI="action_linebets_loaded",Oj="action_scene_push",Nj="action_scene_pop",aI="action_scene_replace",Bj="action_scene_to_root",lI="action_assets_loading",Lj=(r={},e)=>{switch(e.type){case zk:return{...r,soundOn:e.value};case Aj:return{...r};case $k:return{...r,menuOn:e.value};case Yk:return{...r,payTableOn:e.value};case kj:return{...r,betPanelOn:e.value};case Ij:return{...r,autoSpinPanelOn:e.value};case Gk:return{...r,orientation:e.value};case Mj:return{...r,forceUpdate:!r.forceUpdate};case Wk:return{...r,historyListOn:e.value};case Vk:return{...r,historyDetail:{...e.value}};case qk:return{...r,error:{...e.value}};default:return r}},Fj={setting:{volume:.5,menuOn:!1,payTableOn:!1,betPanelOn:!1,autoSpinPanelOn:!1,orientation:"l",forceUpdate:!1,historyListOn:!1,historyDetail:{on:!1,data:null,index:0},error:{code:0,show:!1,allowClose:!0}}};function uI(r){return{type:zk,value:r}}function cI(r){return{type:$k,value:r}}function hI(r){return{type:Yk,value:r}}function Dj(r){return{type:Gk,value:r}}function dI(r){return{type:Wk,value:r}}function fI(r,e=[],t=0){return{type:Vk,value:{on:r,data:e,index:t}}}function en(r,e=!1,t=!0){return{type:qk,value:{code:r,show:e,allowClose:t}}}const ly="authorization",Uj="https://dev-crescendo-real.gpistudios.com",pI="https://dev-crescendo-slot-api.gpistudios.com";class mI{constructor(){P(this,"context",Be.Obj);P(this,"authorization",sessionStorage.getItem(ly));P(this,"canReAuth",!!this.authorization);P(this,"_dispatch")}get domain(){return this.context.urlOptions.funPLay?pI:Uj}setDispatch(e){this._dispatch=e}authAndCanReTry(){this.authorization="",sessionStorage.setItem(ly,"");const e=this.canReAuth;return this.canReAuth=!1,e}request(e,t="GET",n="json",i=null){const s=this.authorization?{Authorization:`${this.authorization}`}:{};return navigator.onLine==!1?(this._dispatch(en("000")),Promise.reject()):new Promise((o,a)=>{const u=new AbortController,l=setTimeout(()=>{clearTimeout(l),u.abort(),this._dispatch(en("001"))},15e3);fetch(e,{method:t,headers:s,signal:u.signal}).then(h=>{clearTimeout(l),h.status==200?h[n]().then(d=>{if(i){const p=new i(d);p.code&&this._dispatch(en(p.code)),o(p)}else o(d)}).catch(()=>{this._dispatch(en("000")),a()}):(this._dispatch(en(h.status)),o({code:h.status}))}).catch(h=>{clearTimeout(l),h.name!="AbortError"&&this._dispatch(en("000")),a()})})}auth(){const{operator:e,token:t}=this.context.urlOptions,n=t||Math.random().toFixed(8),i=`${this.domain}/auth/${e}/${n}`;return!t&&this.authorization?Promise.resolve(this.authorization):this.request(i,"GET","text").then(s=>{dB(s)&&(s=`Bearer ${s}`,this.authorization=s,sessionStorage.setItem(ly,s))})}player(){const e=Hs("player"),t=`${this.domain}/s/player`;return this.request(t,"GET","json",e)}meta(){const e=Hs("meta"),t=this.context.configOptions.id,n=`${this.domain}/s/meta/${t}`;return this.request(n,"GET","json",e)}spin(e){const t=Hs("spin"),n=this.context.configOptions.id,i=`${this.domain}/s/spin/${n}?lineBet=${e}`;return this.request(i,"GET","json",t)}spin2(e,t){const n=Hs("spin"),i=this.context.configOptions.id,s=`${this.domain}/s/spin/${i}?lineBet=${e}&level=${t}`;return this.request(s,"GET","json",n)}load(){const e=Hs("load"),t=this.context.configOptions.id,n=`${this.domain}/s/load/${t}`;return this.request(n,"GET","json",e)}start(e){const t=Hs("start"),n=this.context.configOptions.id,i=`${this.domain}/s/start/${n}/${e}`;return this.request(i,"GET","json",t)}continue(){const e=Hs("continue"),t=this.context.configOptions.id,n=`${this.domain}/s/cont/${t}`;return this.request(n,"GET","json",e)}history(e,t,n,i,s){const o=Hs("history"),a=this.context.configOptions.id,u=`${this.domain}/s/list/${a}/${e}/${t}/${n}/${i}/${s}`;return this.request(u,"GET","json",o)}lineBets(){const e=Hs("lineBets"),t=this.context.configOptions.id,n=`${this.domain}/s/lineBets/${t}`;return this.request(n,"GET","json",e)}}function jj(){const{dispatch:r}=B.useContext(_t);return B.useEffect(()=>{yg().setDispatch(r)},[]),T.jsx(T.Fragment,{})}function Du(r,e){const t=r.toString();return new Array(e-t.length+1).join("0")+t}function Xj(r){return r.charAt(0).toUpperCase()+r.slice(1)}function Hj(r){return r%4==0&&r%100!=0||r%400==0}function zj(r){return r==co.Chinese?"MMdd hh:mm:ss":"dd/MM hh:mm:ss"}function gI(r,e,t,n=co.English){r instanceof Date||(r=new Date(r));const i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],o=r.getUTCFullYear(),a=r.getUTCMonth(),u=r.getUTCDate(),l=r.getUTCHours();let h=o,c=a,d=u,p=l+e;if(p>=24){p-=24,d++;const y=Hj(h)?29:28;d>[31,y,31,30,31,30,31,31,30,31,30,31][c]&&(d=1,c++,c==12&&(c=0,h++))}c=(n==co.Chinese?s:i)[c],d=Du(d,2)+(n==co.Chinese?"日":"");const v=Du(r.getMinutes(),2),x=Du(r.getSeconds(),2);return t.replace("dd",d).replace("MM",c).replace("yyyy",`${h}`).replace("hh",p).replace("mm",v).replace("ss",x)}function $j(r,e,t){const n=new Date(t);let i=n.getUTCHours()+r;i>=24&&(i=i-24);const s=n.getUTCMinutes(),o=n.getSeconds(),a=Du(i,2)+":"+Du(s,2);return e?a+" (+"+r+")":a+":"+Du(o,2)+" (GMT+"+r+")"}function vI(r,e){return r*=1e3,gI(new Date(r),8,zj(e),e)}class Yj{constructor(e){P(this,"list",[]);const t=Be.Obj.urlOptions.lang;this.list=e||[],this.list.forEach(n=>{n.createdOnFormat=vI(n.createdOn,t)})}}class wd{constructor(e){P(this,"data");P(this,"code");P(this,"message");this.data=e;const t=e.result||e;t.code&&(this.code=t.code,this.message=t.message)}static Init(e,t){return new wd({code:e,message:t})}}let Gj=class extends wd{constructor(t){super(t);P(this,"gameId");P(this,"currency");P(this,"lineBets");this.gameId=t.gameId,this.currency=t.currency,this.lineBets=t.lineBets}};class Wj extends Gj{}class Vj extends wd{constructor(t){super(t);P(this,"isFromLoad",!1);P(this,"credit");P(this,"cost");P(this,"payout");P(this,"balance");P(this,"createdOn");!this.code&&(this.createdOn=t.createdOn,this.credit=new ut(t.credit||0),this.cost=new ut(t.cost||0),this.payout=new ut(t.payout||0),this.balance=new ut(t.balance||0))}}class J_ extends Vj{constructor(t){super(t);P(this,"g");P(this,"level");P(this,"lineBet");P(this,"reSpin");P(this,"ss");P(this,"ssMap");P(this,"tm");P(this,"wildReels");P(this,"newWildReels");P(this,"wins");if(this.code)return;const n=t.result;this.g=n.g,this.level=n.level||0,this.lineBet=new ut(n.lineBet||0),this.reSpin=n.reSpin,this.ss=n.ss??[[],[],[],[],[]],this.tm=new ut(n.tm||0),this.wildReels=n.wildReels||[];const i=[];if(n.wins)for(const a of n.wins)for(const u of a.cls)i.push({cls:{c:u.c,m:u.m},s:a.s});this.wins=i;const s=[],o={};for(const a of this.ss){const u=a[0];o[u]=a[1],this.wildReels.indexOf(u)>=0&&s.push(u)}this.newWildReels=s,this.ssMap=o}getWinType(t){const n=t.div(this.credit.mul(this.level));return n.greaterThanOrEqualTo(38)?"big":n.greaterThanOrEqualTo(26)?"high":n.greaterThanOrEqualTo(17)?"medium":n.greaterThanOrEqualTo(6)?"normal":"small"}get isExistRespin(){return this.newWildReels.length>0&&this.wildReels.length!=5}}class qj extends J_{constructor(){super(...arguments);P(this,"isFromLoad",!0)}}class Kj extends wd{constructor(t){super(t);P(this,"name");P(this,"test");P(this,"currency");P(this,"balance");P(this,"st");!this.code&&(this.name=t.name,this.test=t.test,this.currency=t.currency,this.balance=new ut(t.balance),this.st=t.st)}}SC(mI);pd("spin",J_);pd("player",Kj);pd("load",qj);pd("history",Yj);pd("lineBets",Wj);const hg=class hg{constructor(){P(this,"fakeObj");this.fakeObj=bB()}require(e,t){const n=this.resolve(e),i=t?new t(n):n;return Promise.resolve(i)}resolve(e){let t=null;return/^(\/auth)/.test(e)?t="ItIsFromLocal":/^(\/s\/player)/.test(e)?t={name:"2750e297-63bd-4f94-8b6d-6480153dd1f8",test:!0,currency:"RMB",balance:"1000000.0"}:t=this.fakeObj.resolve(e),t}};P(hg,"instance",new hg);let ox=hg;class Qj extends mI{request(e,t="GET",n="json",i=null){return ox.instance.require(e.replace(pI,""),i)}}console.log("FAKE MODEL");SC(Qj);var yI={exports:{}};(function(r){(function(){function e(v,x){document.addEventListener?v.addEventListener("scroll",x,!1):v.attachEvent("scroll",x)}function t(v){document.body?v():document.addEventListener?document.addEventListener("DOMContentLoaded",function x(){document.removeEventListener("DOMContentLoaded",x),v()}):document.attachEvent("onreadystatechange",function x(){(document.readyState=="interactive"||document.readyState=="complete")&&(document.detachEvent("onreadystatechange",x),v())})}function n(v){this.g=document.createElement("div"),this.g.setAttribute("aria-hidden","true"),this.g.appendChild(document.createTextNode(v)),this.h=document.createElement("span"),this.i=document.createElement("span"),this.m=document.createElement("span"),this.j=document.createElement("span"),this.l=-1,this.h.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.i.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.j.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.m.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.h.appendChild(this.m),this.i.appendChild(this.j),this.g.appendChild(this.h),this.g.appendChild(this.i)}function i(v,x){v.g.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+x+";"}function s(v){var x=v.g.offsetWidth,y=x+100;return v.j.style.width=y+"px",v.i.scrollLeft=y,v.h.scrollLeft=v.h.scrollWidth+100,v.l!==x?(v.l=x,!0):!1}function o(v,x){function y(){var _=w;s(_)&&_.g.parentNode!==null&&x(_.l)}var w=v;e(v.h,y),e(v.i,y),s(v)}function a(v,x,y){x=x||{},y=y||window,this.family=v,this.style=x.style||"normal",this.weight=x.weight||"normal",this.stretch=x.stretch||"normal",this.context=y}var u=null,l=null,h=null,c=null;function d(v){return l===null&&(p(v)&&/Apple/.test(window.navigator.vendor)?(v=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),l=!!v&&603>parseInt(v[1],10)):l=!1),l}function p(v){return c===null&&(c=!!v.document.fonts),c}function g(v,x){var y=v.style,w=v.weight;if(h===null){var _=document.createElement("div");try{_.style.font="condensed 100px sans-serif"}catch{}h=_.style.font!==""}return[y,w,h?v.stretch:"","100px",x].join(" ")}a.prototype.load=function(v,x){var y=this,w=v||"BESbswy",_=0,S=x||3e3,I=new Date().getTime();return new Promise(function(A,k){if(p(y.context)&&!d(y.context)){var M=new Promise(function(F,U){function H(){new Date().getTime()-I>=S?U(Error(""+S+"ms timeout exceeded")):y.context.document.fonts.load(g(y,'"'+y.family+'"'),w).then(function(L){1<=L.length?F():setTimeout(H,25)},U)}H()}),O=new Promise(function(F,U){_=setTimeout(function(){U(Error(""+S+"ms timeout exceeded"))},S)});Promise.race([O,M]).then(function(){clearTimeout(_),A(y)},k)}else t(function(){function F(){var Z;(Z=j!=-1&&Y!=-1||j!=-1&&K!=-1||Y!=-1&&K!=-1)&&((Z=j!=Y&&j!=K&&Y!=K)||(u===null&&(Z=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),u=!!Z&&(536>parseInt(Z[1],10)||parseInt(Z[1],10)===536&&11>=parseInt(Z[2],10))),Z=u&&(j==X&&Y==X&&K==X||j==W&&Y==W&&K==W||j==z&&Y==z&&K==z)),Z=!Z),Z&&(V.parentNode!==null&&V.parentNode.removeChild(V),clearTimeout(_),A(y))}function U(){if(new Date().getTime()-I>=S)V.parentNode!==null&&V.parentNode.removeChild(V),k(Error(""+S+"ms timeout exceeded"));else{var Z=y.context.document.hidden;(Z===!0||Z===void 0)&&(j=H.g.offsetWidth,Y=L.g.offsetWidth,K=N.g.offsetWidth,F()),_=setTimeout(U,50)}}var H=new n(w),L=new n(w),N=new n(w),j=-1,Y=-1,K=-1,X=-1,W=-1,z=-1,V=document.createElement("div");V.dir="ltr",i(H,g(y,"sans-serif")),i(L,g(y,"serif")),i(N,g(y,"monospace")),V.appendChild(H.g),V.appendChild(L.g),V.appendChild(N.g),y.context.document.body.appendChild(V),X=H.g.offsetWidth,W=L.g.offsetWidth,z=N.g.offsetWidth,U(),o(H,function(Z){j=Z,F()}),i(H,g(y,'"'+y.family+'",sans-serif')),o(L,function(Z){Y=Z,F()}),i(L,g(y,'"'+y.family+'",serif')),o(N,function(Z){K=Z,F()}),i(N,g(y,'"'+y.family+'",monospace'))})})},r.exports=a})()})(yI);var Zj=yI.exports;const Jj=dd(Zj);var xI={exports:{}},Xn={},_I={exports:{}},wI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(r){function e(X,W){var z=X.length;X.push(W);e:for(;0<z;){var V=z-1>>>1,Z=X[V];if(0<i(Z,W))X[V]=W,X[z]=Z,z=V;else break e}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var W=X[0],z=X.pop();if(z!==W){X[0]=z;e:for(var V=0,Z=X.length,re=Z>>>1;V<re;){var ce=2*(V+1)-1,xe=X[ce],Re=ce+1,Le=X[Re];if(0>i(xe,z))Re<Z&&0>i(Le,xe)?(X[V]=Le,X[Re]=z,V=Re):(X[V]=xe,X[ce]=z,V=ce);else if(Re<Z&&0>i(Le,z))X[V]=Le,X[Re]=z,V=Re;else break e}}return W}function i(X,W){var z=X.sortIndex-W.sortIndex;return z!==0?z:X.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var u=[],l=[],h=1,c=null,d=3,p=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(X){for(var W=t(l);W!==null;){if(W.callback===null)n(l);else if(W.startTime<=X)n(l),W.sortIndex=W.expirationTime,e(u,W);else break;W=t(l)}}function S(X){if(v=!1,_(X),!g)if(t(u)!==null)g=!0,Y(I);else{var W=t(l);W!==null&&K(S,W.startTime-X)}}function I(X,W){g=!1,v&&(v=!1,y(M),M=-1),p=!0;var z=d;try{for(_(W),c=t(u);c!==null&&(!(c.expirationTime>W)||X&&!U());){var V=c.callback;if(typeof V=="function"){c.callback=null,d=c.priorityLevel;var Z=V(c.expirationTime<=W);W=r.unstable_now(),typeof Z=="function"?c.callback=Z:c===t(u)&&n(u),_(W)}else n(u);c=t(u)}if(c!==null)var re=!0;else{var ce=t(l);ce!==null&&K(S,ce.startTime-W),re=!1}return re}finally{c=null,d=z,p=!1}}var A=!1,k=null,M=-1,O=5,F=-1;function U(){return!(r.unstable_now()-F<O)}function H(){if(k!==null){var X=r.unstable_now();F=X;var W=!0;try{W=k(!0,X)}finally{W?L():(A=!1,k=null)}}else A=!1}var L;if(typeof w=="function")L=function(){w(H)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=H,L=function(){j.postMessage(null)}}else L=function(){x(H,0)};function Y(X){k=X,A||(A=!0,L())}function K(X,W){M=x(function(){X(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,Y(I))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(X){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var z=d;d=W;try{return X()}finally{d=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,W){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var z=d;d=X;try{return W()}finally{d=z}},r.unstable_scheduleCallback=function(X,W,z){var V=r.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?V+z:V):z=V,X){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=z+Z,X={id:h++,callback:W,priorityLevel:X,startTime:z,expirationTime:Z,sortIndex:-1},z>V?(X.sortIndex=z,e(l,X),t(u)===null&&X===t(l)&&(v?(y(M),M=-1):v=!0,K(S,z-V))):(X.sortIndex=Z,e(u,X),g||p||(g=!0,Y(I))),X},r.unstable_shouldYield=U,r.unstable_wrapCallback=function(X){var W=d;return function(){var z=d;d=W;try{return X.apply(this,arguments)}finally{d=z}}}})(wI);_I.exports=wI;var e7=_I.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t7=B,Dn=e7;function le(r){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+r,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+r+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bI=new Set,Yh={};function Tl(r,e){rc(r,e),rc(r+"Capture",e)}function rc(r,e){for(Yh[r]=e,r=0;r<e.length;r++)bI.add(e[r])}var yo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ax=Object.prototype.hasOwnProperty,r7=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l2={},u2={};function n7(r){return ax.call(u2,r)?!0:ax.call(l2,r)?!1:r7.test(r)?u2[r]=!0:(l2[r]=!0,!1)}function i7(r,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function s7(r,e,t,n){if(e===null||typeof e>"u"||i7(r,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(r,e,t,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=r,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){Nr[r]=new nn(r,0,!1,r,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var e=r[0];Nr[e]=new nn(e,1,!1,r[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(r){Nr[r]=new nn(r,2,!1,r.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){Nr[r]=new nn(r,2,!1,r,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){Nr[r]=new nn(r,3,!1,r.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(r){Nr[r]=new nn(r,3,!0,r,null,!1,!1)});["capture","download"].forEach(function(r){Nr[r]=new nn(r,4,!1,r,null,!1,!1)});["cols","rows","size","span"].forEach(function(r){Nr[r]=new nn(r,6,!1,r,null,!1,!1)});["rowSpan","start"].forEach(function(r){Nr[r]=new nn(r,5,!1,r.toLowerCase(),null,!1,!1)});var ew=/[\-:]([a-z])/g;function tw(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var e=r.replace(ew,tw);Nr[e]=new nn(e,1,!1,r,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var e=r.replace(ew,tw);Nr[e]=new nn(e,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(r){var e=r.replace(ew,tw);Nr[e]=new nn(e,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(r){Nr[r]=new nn(r,1,!1,r.toLowerCase(),null,!1,!1)});Nr.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(r){Nr[r]=new nn(r,1,!1,r.toLowerCase(),null,!0,!0)});function rw(r,e,t,n){var i=Nr.hasOwnProperty(e)?Nr[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s7(e,t,i,n)&&(t=null),n||i===null?n7(e)&&(t===null?r.removeAttribute(e):r.setAttribute(e,""+t)):i.mustUseProperty?r[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,n=i.attributeNamespace,t===null?r.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,n?r.setAttributeNS(n,e,t):r.setAttribute(e,t))))}var Eo=t7.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zf=Symbol.for("react.element"),uu=Symbol.for("react.portal"),cu=Symbol.for("react.fragment"),nw=Symbol.for("react.strict_mode"),lx=Symbol.for("react.profiler"),SI=Symbol.for("react.provider"),TI=Symbol.for("react.context"),iw=Symbol.for("react.forward_ref"),ux=Symbol.for("react.suspense"),cx=Symbol.for("react.suspense_list"),sw=Symbol.for("react.memo"),Vo=Symbol.for("react.lazy"),EI=Symbol.for("react.offscreen"),c2=Symbol.iterator;function Zc(r){return r===null||typeof r!="object"?null:(r=c2&&r[c2]||r["@@iterator"],typeof r=="function"?r:null)}var Xt=Object.assign,uy;function ph(r){if(uy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);uy=e&&e[1]||""}return`
`+uy+r}var cy=!1;function hy(r,e){if(!r||cy)return"";cy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(r,[],e)}else{try{e.call()}catch(l){n=l}r.call(e.prototype)}else{try{throw Error()}catch(l){n=l}r()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return r.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",r.displayName)),u}while(1<=o&&0<=a);break}}}finally{cy=!1,Error.prepareStackTrace=t}return(r=r?r.displayName||r.name:"")?ph(r):""}function o7(r){switch(r.tag){case 5:return ph(r.type);case 16:return ph("Lazy");case 13:return ph("Suspense");case 19:return ph("SuspenseList");case 0:case 2:case 15:return r=hy(r.type,!1),r;case 11:return r=hy(r.type.render,!1),r;case 1:return r=hy(r.type,!0),r;default:return""}}function hx(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case cu:return"Fragment";case uu:return"Portal";case lx:return"Profiler";case nw:return"StrictMode";case ux:return"Suspense";case cx:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case TI:return(r.displayName||"Context")+".Consumer";case SI:return(r._context.displayName||"Context")+".Provider";case iw:var e=r.render;return r=r.displayName,r||(r=e.displayName||e.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case sw:return e=r.displayName||null,e!==null?e:hx(r.type)||"Memo";case Vo:e=r._payload,r=r._init;try{return hx(r(e))}catch{}}return null}function a7(r){var e=r.type;switch(r.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=e.render,r=r.displayName||r.name||"",e.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hx(e);case 8:return e===nw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function PI(r){var e=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function l7(r){var e=PI(r)?"checked":"value",t=Object.getOwnPropertyDescriptor(r.constructor.prototype,e),n=""+r[e];if(!r.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(r,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(r,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){r._valueTracker=null,delete r[e]}}}}function Jf(r){r._valueTracker||(r._valueTracker=l7(r))}function CI(r){if(!r)return!1;var e=r._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return r&&(n=PI(r)?r.checked?"true":"false":r.value),r=n,r!==t?(e.setValue(r),!0):!1}function Tm(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function dx(r,e){var t=e.checked;return Xt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??r._wrapperState.initialChecked})}function h2(r,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=ba(e.value!=null?e.value:t),r._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function AI(r,e){e=e.checked,e!=null&&rw(r,"checked",e,!1)}function fx(r,e){AI(r,e);var t=ba(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&r.value===""||r.value!=t)&&(r.value=""+t):r.value!==""+t&&(r.value=""+t);else if(n==="submit"||n==="reset"){r.removeAttribute("value");return}e.hasOwnProperty("value")?px(r,e.type,t):e.hasOwnProperty("defaultValue")&&px(r,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(r.defaultChecked=!!e.defaultChecked)}function d2(r,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+r._wrapperState.initialValue,t||e===r.value||(r.value=e),r.defaultValue=e}t=r.name,t!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,t!==""&&(r.name=t)}function px(r,e,t){(e!=="number"||Tm(r.ownerDocument)!==r)&&(t==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+t&&(r.defaultValue=""+t))}var mh=Array.isArray;function Uu(r,e,t,n){if(r=r.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<r.length;t++)i=e.hasOwnProperty("$"+r[t].value),r[t].selected!==i&&(r[t].selected=i),i&&n&&(r[t].defaultSelected=!0)}else{for(t=""+ba(t),e=null,i=0;i<r.length;i++){if(r[i].value===t){r[i].selected=!0,n&&(r[i].defaultSelected=!0);return}e!==null||r[i].disabled||(e=r[i])}e!==null&&(e.selected=!0)}}function mx(r,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Xt({},e,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function f2(r,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(le(92));if(mh(t)){if(1<t.length)throw Error(le(93));t=t[0]}e=t}e==null&&(e=""),t=e}r._wrapperState={initialValue:ba(t)}}function kI(r,e){var t=ba(e.value),n=ba(e.defaultValue);t!=null&&(t=""+t,t!==r.value&&(r.value=t),e.defaultValue==null&&r.defaultValue!==t&&(r.defaultValue=t)),n!=null&&(r.defaultValue=""+n)}function p2(r){var e=r.textContent;e===r._wrapperState.initialValue&&e!==""&&e!==null&&(r.value=e)}function II(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gx(r,e){return r==null||r==="http://www.w3.org/1999/xhtml"?II(e):r==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var ep,MI=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return r(e,t,n,i)})}:r}(function(r,e){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=e;else{for(ep=ep||document.createElement("div"),ep.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ep.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;e.firstChild;)r.appendChild(e.firstChild)}});function Gh(r,e){if(e){var t=r.firstChild;if(t&&t===r.lastChild&&t.nodeType===3){t.nodeValue=e;return}}r.textContent=e}var Th={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u7=["Webkit","ms","Moz","O"];Object.keys(Th).forEach(function(r){u7.forEach(function(e){e=e+r.charAt(0).toUpperCase()+r.substring(1),Th[e]=Th[r]})});function RI(r,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Th.hasOwnProperty(r)&&Th[r]?(""+e).trim():e+"px"}function OI(r,e){r=r.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,i=RI(t,e[t],n);t==="float"&&(t="cssFloat"),n?r.setProperty(t,i):r[t]=i}}var c7=Xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vx(r,e){if(e){if(c7[r]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,r));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function yx(r,e){if(r.indexOf("-")===-1)return typeof e.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xx=null;function ow(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _x=null,ju=null,Xu=null;function m2(r){if(r=Td(r)){if(typeof _x!="function")throw Error(le(280));var e=r.stateNode;e&&(e=jg(e),_x(r.stateNode,r.type,e))}}function NI(r){ju?Xu?Xu.push(r):Xu=[r]:ju=r}function BI(){if(ju){var r=ju,e=Xu;if(Xu=ju=null,m2(r),e)for(r=0;r<e.length;r++)m2(e[r])}}function LI(r,e){return r(e)}function FI(){}var dy=!1;function DI(r,e,t){if(dy)return r(e,t);dy=!0;try{return LI(r,e,t)}finally{dy=!1,(ju!==null||Xu!==null)&&(FI(),BI())}}function Wh(r,e){var t=r.stateNode;if(t===null)return null;var n=jg(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(r=r.type,n=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!n;break e;default:r=!1}if(r)return null;if(t&&typeof t!="function")throw Error(le(231,e,typeof t));return t}var wx=!1;if(yo)try{var Jc={};Object.defineProperty(Jc,"passive",{get:function(){wx=!0}}),window.addEventListener("test",Jc,Jc),window.removeEventListener("test",Jc,Jc)}catch{wx=!1}function h7(r,e,t,n,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(t,l)}catch(h){this.onError(h)}}var Eh=!1,Em=null,Pm=!1,bx=null,d7={onError:function(r){Eh=!0,Em=r}};function f7(r,e,t,n,i,s,o,a,u){Eh=!1,Em=null,h7.apply(d7,arguments)}function p7(r,e,t,n,i,s,o,a,u){if(f7.apply(this,arguments),Eh){if(Eh){var l=Em;Eh=!1,Em=null}else throw Error(le(198));Pm||(Pm=!0,bx=l)}}function El(r){var e=r,t=r;if(r.alternate)for(;e.return;)e=e.return;else{r=e;do e=r,e.flags&4098&&(t=e.return),r=e.return;while(r)}return e.tag===3?t:null}function UI(r){if(r.tag===13){var e=r.memoizedState;if(e===null&&(r=r.alternate,r!==null&&(e=r.memoizedState)),e!==null)return e.dehydrated}return null}function g2(r){if(El(r)!==r)throw Error(le(188))}function m7(r){var e=r.alternate;if(!e){if(e=El(r),e===null)throw Error(le(188));return e!==r?null:r}for(var t=r,n=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){t=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return g2(i),r;if(s===n)return g2(i),e;s=s.sibling}throw Error(le(188))}if(t.return!==n.return)t=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,n=s;break}if(a===n){o=!0,n=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,n=i;break}if(a===n){o=!0,n=s,t=i;break}a=a.sibling}if(!o)throw Error(le(189))}}if(t.alternate!==n)throw Error(le(190))}if(t.tag!==3)throw Error(le(188));return t.stateNode.current===t?r:e}function jI(r){return r=m7(r),r!==null?XI(r):null}function XI(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var e=XI(r);if(e!==null)return e;r=r.sibling}return null}var HI=Dn.unstable_scheduleCallback,v2=Dn.unstable_cancelCallback,g7=Dn.unstable_shouldYield,v7=Dn.unstable_requestPaint,qt=Dn.unstable_now,y7=Dn.unstable_getCurrentPriorityLevel,aw=Dn.unstable_ImmediatePriority,zI=Dn.unstable_UserBlockingPriority,Cm=Dn.unstable_NormalPriority,x7=Dn.unstable_LowPriority,$I=Dn.unstable_IdlePriority,Lg=null,Ts=null;function _7(r){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Lg,r,void 0,(r.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:S7,w7=Math.log,b7=Math.LN2;function S7(r){return r>>>=0,r===0?32:31-(w7(r)/b7|0)|0}var tp=64,rp=4194304;function gh(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Am(r,e){var t=r.pendingLanes;if(t===0)return 0;var n=0,i=r.suspendedLanes,s=r.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?n=gh(a):(s&=o,s!==0&&(n=gh(s)))}else o=t&~i,o!==0?n=gh(o):s!==0&&(n=gh(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=r.entangledLanes,e!==0)for(r=r.entanglements,e&=n;0<e;)t=31-Li(e),i=1<<t,n|=r[t],e&=~i;return n}function T7(r,e){switch(r){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E7(r,e){for(var t=r.suspendedLanes,n=r.pingedLanes,i=r.expirationTimes,s=r.pendingLanes;0<s;){var o=31-Li(s),a=1<<o,u=i[o];u===-1?(!(a&t)||a&n)&&(i[o]=T7(a,e)):u<=e&&(r.expiredLanes|=a),s&=~a}}function Sx(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function YI(){var r=tp;return tp<<=1,!(tp&4194240)&&(tp=64),r}function fy(r){for(var e=[],t=0;31>t;t++)e.push(r);return e}function bd(r,e,t){r.pendingLanes|=e,e!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,e=31-Li(e),r[e]=t}function P7(r,e){var t=r.pendingLanes&~e;r.pendingLanes=e,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=e,r.mutableReadLanes&=e,r.entangledLanes&=e,e=r.entanglements;var n=r.eventTimes;for(r=r.expirationTimes;0<t;){var i=31-Li(t),s=1<<i;e[i]=0,n[i]=-1,r[i]=-1,t&=~s}}function lw(r,e){var t=r.entangledLanes|=e;for(r=r.entanglements;t;){var n=31-Li(t),i=1<<n;i&e|r[n]&e&&(r[n]|=e),t&=~i}}var ft=0;function GI(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var WI,uw,VI,qI,KI,Tx=!1,np=[],ha=null,da=null,fa=null,Vh=new Map,qh=new Map,Jo=[],C7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function y2(r,e){switch(r){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":da=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":Vh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qh.delete(e.pointerId)}}function eh(r,e,t,n,i,s){return r===null||r.nativeEvent!==s?(r={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Td(e),e!==null&&uw(e)),r):(r.eventSystemFlags|=n,e=r.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),r)}function A7(r,e,t,n,i){switch(e){case"focusin":return ha=eh(ha,r,e,t,n,i),!0;case"dragenter":return da=eh(da,r,e,t,n,i),!0;case"mouseover":return fa=eh(fa,r,e,t,n,i),!0;case"pointerover":var s=i.pointerId;return Vh.set(s,eh(Vh.get(s)||null,r,e,t,n,i)),!0;case"gotpointercapture":return s=i.pointerId,qh.set(s,eh(qh.get(s)||null,r,e,t,n,i)),!0}return!1}function QI(r){var e=tl(r.target);if(e!==null){var t=El(e);if(t!==null){if(e=t.tag,e===13){if(e=UI(t),e!==null){r.blockedOn=e,KI(r.priority,function(){VI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){r.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}r.blockedOn=null}function $p(r){if(r.blockedOn!==null)return!1;for(var e=r.targetContainers;0<e.length;){var t=Ex(r.domEventName,r.eventSystemFlags,e[0],r.nativeEvent);if(t===null){t=r.nativeEvent;var n=new t.constructor(t.type,t);xx=n,t.target.dispatchEvent(n),xx=null}else return e=Td(t),e!==null&&uw(e),r.blockedOn=t,!1;e.shift()}return!0}function x2(r,e,t){$p(r)&&t.delete(e)}function k7(){Tx=!1,ha!==null&&$p(ha)&&(ha=null),da!==null&&$p(da)&&(da=null),fa!==null&&$p(fa)&&(fa=null),Vh.forEach(x2),qh.forEach(x2)}function th(r,e){r.blockedOn===e&&(r.blockedOn=null,Tx||(Tx=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,k7)))}function Kh(r){function e(i){return th(i,r)}if(0<np.length){th(np[0],r);for(var t=1;t<np.length;t++){var n=np[t];n.blockedOn===r&&(n.blockedOn=null)}}for(ha!==null&&th(ha,r),da!==null&&th(da,r),fa!==null&&th(fa,r),Vh.forEach(e),qh.forEach(e),t=0;t<Jo.length;t++)n=Jo[t],n.blockedOn===r&&(n.blockedOn=null);for(;0<Jo.length&&(t=Jo[0],t.blockedOn===null);)QI(t),t.blockedOn===null&&Jo.shift()}var Hu=Eo.ReactCurrentBatchConfig,km=!0;function I7(r,e,t,n){var i=ft,s=Hu.transition;Hu.transition=null;try{ft=1,cw(r,e,t,n)}finally{ft=i,Hu.transition=s}}function M7(r,e,t,n){var i=ft,s=Hu.transition;Hu.transition=null;try{ft=4,cw(r,e,t,n)}finally{ft=i,Hu.transition=s}}function cw(r,e,t,n){if(km){var i=Ex(r,e,t,n);if(i===null)Sy(r,e,n,Im,t),y2(r,n);else if(A7(i,r,e,t,n))n.stopPropagation();else if(y2(r,n),e&4&&-1<C7.indexOf(r)){for(;i!==null;){var s=Td(i);if(s!==null&&WI(s),s=Ex(r,e,t,n),s===null&&Sy(r,e,n,Im,t),s===i)break;i=s}i!==null&&n.stopPropagation()}else Sy(r,e,n,null,t)}}var Im=null;function Ex(r,e,t,n){if(Im=null,r=ow(n),r=tl(r),r!==null)if(e=El(r),e===null)r=null;else if(t=e.tag,t===13){if(r=UI(e),r!==null)return r;r=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;r=null}else e!==r&&(r=null);return Im=r,null}function ZI(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y7()){case aw:return 1;case zI:return 4;case Cm:case x7:return 16;case $I:return 536870912;default:return 16}default:return 16}}var sa=null,hw=null,Yp=null;function JI(){if(Yp)return Yp;var r,e=hw,t=e.length,n,i="value"in sa?sa.value:sa.textContent,s=i.length;for(r=0;r<t&&e[r]===i[r];r++);var o=t-r;for(n=1;n<=o&&e[t-n]===i[s-n];n++);return Yp=i.slice(r,1<n?1-n:void 0)}function Gp(r){var e=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}function ip(){return!0}function _2(){return!1}function Hn(r){function e(t,n,i,s,o){this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in r)r.hasOwnProperty(a)&&(t=r[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ip:_2,this.isPropagationStopped=_2,this}return Xt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=ip)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=ip)},persist:function(){},isPersistent:ip}),e}var _c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dw=Hn(_c),Sd=Xt({},_c,{view:0,detail:0}),R7=Hn(Sd),py,my,rh,Fg=Xt({},Sd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fw,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==rh&&(rh&&r.type==="mousemove"?(py=r.screenX-rh.screenX,my=r.screenY-rh.screenY):my=py=0,rh=r),py)},movementY:function(r){return"movementY"in r?r.movementY:my}}),w2=Hn(Fg),O7=Xt({},Fg,{dataTransfer:0}),N7=Hn(O7),B7=Xt({},Sd,{relatedTarget:0}),gy=Hn(B7),L7=Xt({},_c,{animationName:0,elapsedTime:0,pseudoElement:0}),F7=Hn(L7),D7=Xt({},_c,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),U7=Hn(D7),j7=Xt({},_c,{data:0}),b2=Hn(j7),X7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $7(r){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(r):(r=z7[r])?!!e[r]:!1}function fw(){return $7}var Y7=Xt({},Sd,{key:function(r){if(r.key){var e=X7[r.key]||r.key;if(e!=="Unidentified")return e}return r.type==="keypress"?(r=Gp(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?H7[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fw,charCode:function(r){return r.type==="keypress"?Gp(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Gp(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),G7=Hn(Y7),W7=Xt({},Fg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S2=Hn(W7),V7=Xt({},Sd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fw}),q7=Hn(V7),K7=Xt({},_c,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q7=Hn(K7),Z7=Xt({},Fg,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),J7=Hn(Z7),eX=[9,13,27,32],pw=yo&&"CompositionEvent"in window,Ph=null;yo&&"documentMode"in document&&(Ph=document.documentMode);var tX=yo&&"TextEvent"in window&&!Ph,eM=yo&&(!pw||Ph&&8<Ph&&11>=Ph),T2=" ",E2=!1;function tM(r,e){switch(r){case"keyup":return eX.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rM(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var hu=!1;function rX(r,e){switch(r){case"compositionend":return rM(e);case"keypress":return e.which!==32?null:(E2=!0,T2);case"textInput":return r=e.data,r===T2&&E2?null:r;default:return null}}function nX(r,e){if(hu)return r==="compositionend"||!pw&&tM(r,e)?(r=JI(),Yp=hw=sa=null,hu=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eM&&e.locale!=="ko"?null:e.data;default:return null}}var iX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function P2(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e==="input"?!!iX[r.type]:e==="textarea"}function nM(r,e,t,n){NI(n),e=Mm(e,"onChange"),0<e.length&&(t=new dw("onChange","change",null,t,n),r.push({event:t,listeners:e}))}var Ch=null,Qh=null;function sX(r){pM(r,0)}function Dg(r){var e=pu(r);if(CI(e))return r}function oX(r,e){if(r==="change")return e}var iM=!1;if(yo){var vy;if(yo){var yy="oninput"in document;if(!yy){var C2=document.createElement("div");C2.setAttribute("oninput","return;"),yy=typeof C2.oninput=="function"}vy=yy}else vy=!1;iM=vy&&(!document.documentMode||9<document.documentMode)}function A2(){Ch&&(Ch.detachEvent("onpropertychange",sM),Qh=Ch=null)}function sM(r){if(r.propertyName==="value"&&Dg(Qh)){var e=[];nM(e,Qh,r,ow(r)),DI(sX,e)}}function aX(r,e,t){r==="focusin"?(A2(),Ch=e,Qh=t,Ch.attachEvent("onpropertychange",sM)):r==="focusout"&&A2()}function lX(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Dg(Qh)}function uX(r,e){if(r==="click")return Dg(e)}function cX(r,e){if(r==="input"||r==="change")return Dg(e)}function hX(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Ui=typeof Object.is=="function"?Object.is:hX;function Zh(r,e){if(Ui(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;var t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var i=t[n];if(!ax.call(e,i)||!Ui(r[i],e[i]))return!1}return!0}function k2(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function I2(r,e){var t=k2(r);r=0;for(var n;t;){if(t.nodeType===3){if(n=r+t.textContent.length,r<=e&&n>=e)return{node:t,offset:e-r};r=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=k2(t)}}function oM(r,e){return r&&e?r===e?!0:r&&r.nodeType===3?!1:e&&e.nodeType===3?oM(r,e.parentNode):"contains"in r?r.contains(e):r.compareDocumentPosition?!!(r.compareDocumentPosition(e)&16):!1:!1}function aM(){for(var r=window,e=Tm();e instanceof r.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)r=e.contentWindow;else break;e=Tm(r.document)}return e}function mw(r){var e=r&&r.nodeName&&r.nodeName.toLowerCase();return e&&(e==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||e==="textarea"||r.contentEditable==="true")}function dX(r){var e=aM(),t=r.focusedElem,n=r.selectionRange;if(e!==t&&t&&t.ownerDocument&&oM(t.ownerDocument.documentElement,t)){if(n!==null&&mw(t)){if(e=n.start,r=n.end,r===void 0&&(r=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(r,t.value.length);else if(r=(e=t.ownerDocument||document)&&e.defaultView||window,r.getSelection){r=r.getSelection();var i=t.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!r.extend&&s>n&&(i=n,n=s,s=i),i=I2(t,s);var o=I2(t,n);i&&o&&(r.rangeCount!==1||r.anchorNode!==i.node||r.anchorOffset!==i.offset||r.focusNode!==o.node||r.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),r.removeAllRanges(),s>n?(r.addRange(e),r.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),r.addRange(e)))}}for(e=[],r=t;r=r.parentNode;)r.nodeType===1&&e.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)r=e[t],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var fX=yo&&"documentMode"in document&&11>=document.documentMode,du=null,Px=null,Ah=null,Cx=!1;function M2(r,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Cx||du==null||du!==Tm(n)||(n=du,"selectionStart"in n&&mw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ah&&Zh(Ah,n)||(Ah=n,n=Mm(Px,"onSelect"),0<n.length&&(e=new dw("onSelect","select",null,e,t),r.push({event:e,listeners:n}),e.target=du)))}function sp(r,e){var t={};return t[r.toLowerCase()]=e.toLowerCase(),t["Webkit"+r]="webkit"+e,t["Moz"+r]="moz"+e,t}var fu={animationend:sp("Animation","AnimationEnd"),animationiteration:sp("Animation","AnimationIteration"),animationstart:sp("Animation","AnimationStart"),transitionend:sp("Transition","TransitionEnd")},xy={},lM={};yo&&(lM=document.createElement("div").style,"AnimationEvent"in window||(delete fu.animationend.animation,delete fu.animationiteration.animation,delete fu.animationstart.animation),"TransitionEvent"in window||delete fu.transitionend.transition);function Ug(r){if(xy[r])return xy[r];if(!fu[r])return r;var e=fu[r],t;for(t in e)if(e.hasOwnProperty(t)&&t in lM)return xy[r]=e[t];return r}var uM=Ug("animationend"),cM=Ug("animationiteration"),hM=Ug("animationstart"),dM=Ug("transitionend"),fM=new Map,R2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Aa(r,e){fM.set(r,e),Tl(e,[r])}for(var _y=0;_y<R2.length;_y++){var wy=R2[_y],pX=wy.toLowerCase(),mX=wy[0].toUpperCase()+wy.slice(1);Aa(pX,"on"+mX)}Aa(uM,"onAnimationEnd");Aa(cM,"onAnimationIteration");Aa(hM,"onAnimationStart");Aa("dblclick","onDoubleClick");Aa("focusin","onFocus");Aa("focusout","onBlur");Aa(dM,"onTransitionEnd");rc("onMouseEnter",["mouseout","mouseover"]);rc("onMouseLeave",["mouseout","mouseover"]);rc("onPointerEnter",["pointerout","pointerover"]);rc("onPointerLeave",["pointerout","pointerover"]);Tl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gX=new Set("cancel close invalid load scroll toggle".split(" ").concat(vh));function O2(r,e,t){var n=r.type||"unknown-event";r.currentTarget=t,p7(n,e,void 0,r),r.currentTarget=null}function pM(r,e){e=(e&4)!==0;for(var t=0;t<r.length;t++){var n=r[t],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;O2(i,a,l),s=u}else for(o=0;o<n.length;o++){if(a=n[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;O2(i,a,l),s=u}}}if(Pm)throw r=bx,Pm=!1,bx=null,r}function St(r,e){var t=e[Rx];t===void 0&&(t=e[Rx]=new Set);var n=r+"__bubble";t.has(n)||(mM(e,r,2,!1),t.add(n))}function by(r,e,t){var n=0;e&&(n|=4),mM(t,r,n,e)}var op="_reactListening"+Math.random().toString(36).slice(2);function Jh(r){if(!r[op]){r[op]=!0,bI.forEach(function(t){t!=="selectionchange"&&(gX.has(t)||by(t,!1,r),by(t,!0,r))});var e=r.nodeType===9?r:r.ownerDocument;e===null||e[op]||(e[op]=!0,by("selectionchange",!1,e))}}function mM(r,e,t,n){switch(ZI(e)){case 1:var i=I7;break;case 4:i=M7;break;default:i=cw}t=i.bind(null,e,t,r),i=void 0,!wx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?r.addEventListener(e,t,{capture:!0,passive:i}):r.addEventListener(e,t,!0):i!==void 0?r.addEventListener(e,t,{passive:i}):r.addEventListener(e,t,!1)}function Sy(r,e,t,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=tl(a),o===null)return;if(u=o.tag,u===5||u===6){n=s=o;continue e}a=a.parentNode}}n=n.return}DI(function(){var l=s,h=ow(t),c=[];e:{var d=fM.get(r);if(d!==void 0){var p=dw,g=r;switch(r){case"keypress":if(Gp(t)===0)break e;case"keydown":case"keyup":p=G7;break;case"focusin":g="focus",p=gy;break;case"focusout":g="blur",p=gy;break;case"beforeblur":case"afterblur":p=gy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=w2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=N7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=q7;break;case uM:case cM:case hM:p=F7;break;case dM:p=Q7;break;case"scroll":p=R7;break;case"wheel":p=J7;break;case"copy":case"cut":case"paste":p=U7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=S2}var v=(e&4)!==0,x=!v&&r==="scroll",y=v?d!==null?d+"Capture":null:d;v=[];for(var w=l,_;w!==null;){_=w;var S=_.stateNode;if(_.tag===5&&S!==null&&(_=S,y!==null&&(S=Wh(w,y),S!=null&&v.push(ed(w,S,_)))),x)break;w=w.return}0<v.length&&(d=new p(d,g,null,t,h),c.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=r==="mouseover"||r==="pointerover",p=r==="mouseout"||r==="pointerout",d&&t!==xx&&(g=t.relatedTarget||t.fromElement)&&(tl(g)||g[xo]))break e;if((p||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,p?(g=t.relatedTarget||t.toElement,p=l,g=g?tl(g):null,g!==null&&(x=El(g),g!==x||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=l),p!==g)){if(v=w2,S="onMouseLeave",y="onMouseEnter",w="mouse",(r==="pointerout"||r==="pointerover")&&(v=S2,S="onPointerLeave",y="onPointerEnter",w="pointer"),x=p==null?d:pu(p),_=g==null?d:pu(g),d=new v(S,w+"leave",p,t,h),d.target=x,d.relatedTarget=_,S=null,tl(h)===l&&(v=new v(y,w+"enter",g,t,h),v.target=_,v.relatedTarget=x,S=v),x=S,p&&g)t:{for(v=p,y=g,w=0,_=v;_;_=Vl(_))w++;for(_=0,S=y;S;S=Vl(S))_++;for(;0<w-_;)v=Vl(v),w--;for(;0<_-w;)y=Vl(y),_--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=Vl(v),y=Vl(y)}v=null}else v=null;p!==null&&N2(c,d,p,v,!1),g!==null&&x!==null&&N2(c,x,g,v,!0)}}e:{if(d=l?pu(l):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var I=oX;else if(P2(d))if(iM)I=cX;else{I=lX;var A=aX}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=uX);if(I&&(I=I(r,l))){nM(c,I,t,h);break e}A&&A(r,d,l),r==="focusout"&&(A=d._wrapperState)&&A.controlled&&d.type==="number"&&px(d,"number",d.value)}switch(A=l?pu(l):window,r){case"focusin":(P2(A)||A.contentEditable==="true")&&(du=A,Px=l,Ah=null);break;case"focusout":Ah=Px=du=null;break;case"mousedown":Cx=!0;break;case"contextmenu":case"mouseup":case"dragend":Cx=!1,M2(c,t,h);break;case"selectionchange":if(fX)break;case"keydown":case"keyup":M2(c,t,h)}var k;if(pw)e:{switch(r){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else hu?tM(r,t)&&(M="onCompositionEnd"):r==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(eM&&t.locale!=="ko"&&(hu||M!=="onCompositionStart"?M==="onCompositionEnd"&&hu&&(k=JI()):(sa=h,hw="value"in sa?sa.value:sa.textContent,hu=!0)),A=Mm(l,M),0<A.length&&(M=new b2(M,r,null,t,h),c.push({event:M,listeners:A}),k?M.data=k:(k=rM(t),k!==null&&(M.data=k)))),(k=tX?rX(r,t):nX(r,t))&&(l=Mm(l,"onBeforeInput"),0<l.length&&(h=new b2("onBeforeInput","beforeinput",null,t,h),c.push({event:h,listeners:l}),h.data=k))}pM(c,e)})}function ed(r,e,t){return{instance:r,listener:e,currentTarget:t}}function Mm(r,e){for(var t=e+"Capture",n=[];r!==null;){var i=r,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Wh(r,t),s!=null&&n.unshift(ed(r,s,i)),s=Wh(r,e),s!=null&&n.push(ed(r,s,i))),r=r.return}return n}function Vl(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function N2(r,e,t,n,i){for(var s=e._reactName,o=[];t!==null&&t!==n;){var a=t,u=a.alternate,l=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&l!==null&&(a=l,i?(u=Wh(t,s),u!=null&&o.unshift(ed(t,u,a))):i||(u=Wh(t,s),u!=null&&o.push(ed(t,u,a)))),t=t.return}o.length!==0&&r.push({event:e,listeners:o})}var vX=/\r\n?/g,yX=/\u0000|\uFFFD/g;function B2(r){return(typeof r=="string"?r:""+r).replace(vX,`
`).replace(yX,"")}function ap(r,e,t){if(e=B2(e),B2(r)!==e&&t)throw Error(le(425))}function Rm(){}var Ax=null,kx=null;function Ix(r,e){return r==="textarea"||r==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mx=typeof setTimeout=="function"?setTimeout:void 0,xX=typeof clearTimeout=="function"?clearTimeout:void 0,L2=typeof Promise=="function"?Promise:void 0,_X=typeof queueMicrotask=="function"?queueMicrotask:typeof L2<"u"?function(r){return L2.resolve(null).then(r).catch(wX)}:Mx;function wX(r){setTimeout(function(){throw r})}function Ty(r,e){var t=e,n=0;do{var i=t.nextSibling;if(r.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(n===0){r.removeChild(i),Kh(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=i}while(t);Kh(e)}function pa(r){for(;r!=null;r=r.nextSibling){var e=r.nodeType;if(e===1||e===3)break;if(e===8){if(e=r.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return r}function F2(r){r=r.previousSibling;for(var e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return r;e--}else t==="/$"&&e++}r=r.previousSibling}return null}var wc=Math.random().toString(36).slice(2),ys="__reactFiber$"+wc,td="__reactProps$"+wc,xo="__reactContainer$"+wc,Rx="__reactEvents$"+wc,bX="__reactListeners$"+wc,SX="__reactHandles$"+wc;function tl(r){var e=r[ys];if(e)return e;for(var t=r.parentNode;t;){if(e=t[xo]||t[ys]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(r=F2(r);r!==null;){if(t=r[ys])return t;r=F2(r)}return e}r=t,t=r.parentNode}return null}function Td(r){return r=r[ys]||r[xo],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function pu(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(le(33))}function jg(r){return r[td]||null}var Ox=[],mu=-1;function ka(r){return{current:r}}function Et(r){0>mu||(r.current=Ox[mu],Ox[mu]=null,mu--)}function xt(r,e){mu++,Ox[mu]=r.current,r.current=e}var Sa={},Kr=ka(Sa),vn=ka(!1),ml=Sa;function nc(r,e){var t=r.type.contextTypes;if(!t)return Sa;var n=r.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=e,r.__reactInternalMemoizedMaskedChildContext=i),i}function yn(r){return r=r.childContextTypes,r!=null}function Om(){Et(vn),Et(Kr)}function D2(r,e,t){if(Kr.current!==Sa)throw Error(le(168));xt(Kr,e),xt(vn,t)}function gM(r,e,t){var n=r.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(le(108,a7(r)||"Unknown",i));return Xt({},t,n)}function Nm(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Sa,ml=Kr.current,xt(Kr,r),xt(vn,vn.current),!0}function U2(r,e,t){var n=r.stateNode;if(!n)throw Error(le(169));t?(r=gM(r,e,ml),n.__reactInternalMemoizedMergedChildContext=r,Et(vn),Et(Kr),xt(Kr,r)):Et(vn),xt(vn,t)}var Ks=null,Xg=!1,Ey=!1;function vM(r){Ks===null?Ks=[r]:Ks.push(r)}function TX(r){Xg=!0,vM(r)}function Ia(){if(!Ey&&Ks!==null){Ey=!0;var r=0,e=ft;try{var t=Ks;for(ft=1;r<t.length;r++){var n=t[r];do n=n(!0);while(n!==null)}Ks=null,Xg=!1}catch(i){throw Ks!==null&&(Ks=Ks.slice(r+1)),HI(aw,Ia),i}finally{ft=e,Ey=!1}}return null}var gu=[],vu=0,Bm=null,Lm=0,ei=[],ti=0,gl=null,so=1,oo="";function Ka(r,e){gu[vu++]=Lm,gu[vu++]=Bm,Bm=r,Lm=e}function yM(r,e,t){ei[ti++]=so,ei[ti++]=oo,ei[ti++]=gl,gl=r;var n=so;r=oo;var i=32-Li(n)-1;n&=~(1<<i),t+=1;var s=32-Li(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,so=1<<32-Li(e)+i|t<<i|n,oo=s+r}else so=1<<s|t<<i|n,oo=r}function gw(r){r.return!==null&&(Ka(r,1),yM(r,1,0))}function vw(r){for(;r===Bm;)Bm=gu[--vu],gu[vu]=null,Lm=gu[--vu],gu[vu]=null;for(;r===gl;)gl=ei[--ti],ei[ti]=null,oo=ei[--ti],ei[ti]=null,so=ei[--ti],ei[ti]=null}var Bn=null,On=null,It=!1,Ei=null;function xM(r,e){var t=si(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=r,e=r.deletions,e===null?(r.deletions=[t],r.flags|=16):e.push(t)}function j2(r,e){switch(r.tag){case 5:var t=r.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(r.stateNode=e,Bn=r,On=pa(e.firstChild),!0):!1;case 6:return e=r.pendingProps===""||e.nodeType!==3?null:e,e!==null?(r.stateNode=e,Bn=r,On=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=gl!==null?{id:so,overflow:oo}:null,r.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=si(18,null,null,0),t.stateNode=e,t.return=r,r.child=t,Bn=r,On=null,!0):!1;default:return!1}}function Nx(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Bx(r){if(It){var e=On;if(e){var t=e;if(!j2(r,e)){if(Nx(r))throw Error(le(418));e=pa(t.nextSibling);var n=Bn;e&&j2(r,e)?xM(n,t):(r.flags=r.flags&-4097|2,It=!1,Bn=r)}}else{if(Nx(r))throw Error(le(418));r.flags=r.flags&-4097|2,It=!1,Bn=r}}}function X2(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Bn=r}function lp(r){if(r!==Bn)return!1;if(!It)return X2(r),It=!0,!1;var e;if((e=r.tag!==3)&&!(e=r.tag!==5)&&(e=r.type,e=e!=="head"&&e!=="body"&&!Ix(r.type,r.memoizedProps)),e&&(e=On)){if(Nx(r))throw _M(),Error(le(418));for(;e;)xM(r,e),e=pa(e.nextSibling)}if(X2(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(le(317));e:{for(r=r.nextSibling,e=0;r;){if(r.nodeType===8){var t=r.data;if(t==="/$"){if(e===0){On=pa(r.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}r=r.nextSibling}On=null}}else On=Bn?pa(r.stateNode.nextSibling):null;return!0}function _M(){for(var r=On;r;)r=pa(r.nextSibling)}function ic(){On=Bn=null,It=!1}function yw(r){Ei===null?Ei=[r]:Ei.push(r)}var EX=Eo.ReactCurrentBatchConfig;function nh(r,e,t){if(r=t.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(le(309));var n=t.stateNode}if(!n)throw Error(le(147,r));var i=n,s=""+r;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof r!="string")throw Error(le(284));if(!t._owner)throw Error(le(290,r))}return r}function up(r,e){throw r=Object.prototype.toString.call(e),Error(le(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r))}function H2(r){var e=r._init;return e(r._payload)}function wM(r){function e(y,w){if(r){var _=y.deletions;_===null?(y.deletions=[w],y.flags|=16):_.push(w)}}function t(y,w){if(!r)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function n(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function i(y,w){return y=ya(y,w),y.index=0,y.sibling=null,y}function s(y,w,_){return y.index=_,r?(_=y.alternate,_!==null?(_=_.index,_<w?(y.flags|=2,w):_):(y.flags|=2,w)):(y.flags|=1048576,w)}function o(y){return r&&y.alternate===null&&(y.flags|=2),y}function a(y,w,_,S){return w===null||w.tag!==6?(w=Ry(_,y.mode,S),w.return=y,w):(w=i(w,_),w.return=y,w)}function u(y,w,_,S){var I=_.type;return I===cu?h(y,w,_.props.children,S,_.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Vo&&H2(I)===w.type)?(S=i(w,_.props),S.ref=nh(y,w,_),S.return=y,S):(S=Jp(_.type,_.key,_.props,null,y.mode,S),S.ref=nh(y,w,_),S.return=y,S)}function l(y,w,_,S){return w===null||w.tag!==4||w.stateNode.containerInfo!==_.containerInfo||w.stateNode.implementation!==_.implementation?(w=Oy(_,y.mode,S),w.return=y,w):(w=i(w,_.children||[]),w.return=y,w)}function h(y,w,_,S,I){return w===null||w.tag!==7?(w=ll(_,y.mode,S,I),w.return=y,w):(w=i(w,_),w.return=y,w)}function c(y,w,_){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ry(""+w,y.mode,_),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Zf:return _=Jp(w.type,w.key,w.props,null,y.mode,_),_.ref=nh(y,null,w),_.return=y,_;case uu:return w=Oy(w,y.mode,_),w.return=y,w;case Vo:var S=w._init;return c(y,S(w._payload),_)}if(mh(w)||Zc(w))return w=ll(w,y.mode,_,null),w.return=y,w;up(y,w)}return null}function d(y,w,_,S){var I=w!==null?w.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return I!==null?null:a(y,w,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Zf:return _.key===I?u(y,w,_,S):null;case uu:return _.key===I?l(y,w,_,S):null;case Vo:return I=_._init,d(y,w,I(_._payload),S)}if(mh(_)||Zc(_))return I!==null?null:h(y,w,_,S,null);up(y,_)}return null}function p(y,w,_,S,I){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(_)||null,a(w,y,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Zf:return y=y.get(S.key===null?_:S.key)||null,u(w,y,S,I);case uu:return y=y.get(S.key===null?_:S.key)||null,l(w,y,S,I);case Vo:var A=S._init;return p(y,w,_,A(S._payload),I)}if(mh(S)||Zc(S))return y=y.get(_)||null,h(w,y,S,I,null);up(w,S)}return null}function g(y,w,_,S){for(var I=null,A=null,k=w,M=w=0,O=null;k!==null&&M<_.length;M++){k.index>M?(O=k,k=null):O=k.sibling;var F=d(y,k,_[M],S);if(F===null){k===null&&(k=O);break}r&&k&&F.alternate===null&&e(y,k),w=s(F,w,M),A===null?I=F:A.sibling=F,A=F,k=O}if(M===_.length)return t(y,k),It&&Ka(y,M),I;if(k===null){for(;M<_.length;M++)k=c(y,_[M],S),k!==null&&(w=s(k,w,M),A===null?I=k:A.sibling=k,A=k);return It&&Ka(y,M),I}for(k=n(y,k);M<_.length;M++)O=p(k,y,M,_[M],S),O!==null&&(r&&O.alternate!==null&&k.delete(O.key===null?M:O.key),w=s(O,w,M),A===null?I=O:A.sibling=O,A=O);return r&&k.forEach(function(U){return e(y,U)}),It&&Ka(y,M),I}function v(y,w,_,S){var I=Zc(_);if(typeof I!="function")throw Error(le(150));if(_=I.call(_),_==null)throw Error(le(151));for(var A=I=null,k=w,M=w=0,O=null,F=_.next();k!==null&&!F.done;M++,F=_.next()){k.index>M?(O=k,k=null):O=k.sibling;var U=d(y,k,F.value,S);if(U===null){k===null&&(k=O);break}r&&k&&U.alternate===null&&e(y,k),w=s(U,w,M),A===null?I=U:A.sibling=U,A=U,k=O}if(F.done)return t(y,k),It&&Ka(y,M),I;if(k===null){for(;!F.done;M++,F=_.next())F=c(y,F.value,S),F!==null&&(w=s(F,w,M),A===null?I=F:A.sibling=F,A=F);return It&&Ka(y,M),I}for(k=n(y,k);!F.done;M++,F=_.next())F=p(k,y,M,F.value,S),F!==null&&(r&&F.alternate!==null&&k.delete(F.key===null?M:F.key),w=s(F,w,M),A===null?I=F:A.sibling=F,A=F);return r&&k.forEach(function(H){return e(y,H)}),It&&Ka(y,M),I}function x(y,w,_,S){if(typeof _=="object"&&_!==null&&_.type===cu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Zf:e:{for(var I=_.key,A=w;A!==null;){if(A.key===I){if(I=_.type,I===cu){if(A.tag===7){t(y,A.sibling),w=i(A,_.props.children),w.return=y,y=w;break e}}else if(A.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Vo&&H2(I)===A.type){t(y,A.sibling),w=i(A,_.props),w.ref=nh(y,A,_),w.return=y,y=w;break e}t(y,A);break}else e(y,A);A=A.sibling}_.type===cu?(w=ll(_.props.children,y.mode,S,_.key),w.return=y,y=w):(S=Jp(_.type,_.key,_.props,null,y.mode,S),S.ref=nh(y,w,_),S.return=y,y=S)}return o(y);case uu:e:{for(A=_.key;w!==null;){if(w.key===A)if(w.tag===4&&w.stateNode.containerInfo===_.containerInfo&&w.stateNode.implementation===_.implementation){t(y,w.sibling),w=i(w,_.children||[]),w.return=y,y=w;break e}else{t(y,w);break}else e(y,w);w=w.sibling}w=Oy(_,y.mode,S),w.return=y,y=w}return o(y);case Vo:return A=_._init,x(y,w,A(_._payload),S)}if(mh(_))return g(y,w,_,S);if(Zc(_))return v(y,w,_,S);up(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,w!==null&&w.tag===6?(t(y,w.sibling),w=i(w,_),w.return=y,y=w):(t(y,w),w=Ry(_,y.mode,S),w.return=y,y=w),o(y)):t(y,w)}return x}var sc=wM(!0),bM=wM(!1),Fm=ka(null),Dm=null,yu=null,xw=null;function _w(){xw=yu=Dm=null}function ww(r){var e=Fm.current;Et(Fm),r._currentValue=e}function Lx(r,e,t){for(;r!==null;){var n=r.alternate;if((r.childLanes&e)!==e?(r.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),r===t)break;r=r.return}}function zu(r,e){Dm=r,xw=yu=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&e&&(mn=!0),r.firstContext=null)}function ui(r){var e=r._currentValue;if(xw!==r)if(r={context:r,memoizedValue:e,next:null},yu===null){if(Dm===null)throw Error(le(308));yu=r,Dm.dependencies={lanes:0,firstContext:r}}else yu=yu.next=r;return e}var rl=null;function bw(r){rl===null?rl=[r]:rl.push(r)}function SM(r,e,t,n){var i=e.interleaved;return i===null?(t.next=t,bw(e)):(t.next=i.next,i.next=t),e.interleaved=t,_o(r,n)}function _o(r,e){r.lanes|=e;var t=r.alternate;for(t!==null&&(t.lanes|=e),t=r,r=r.return;r!==null;)r.childLanes|=e,t=r.alternate,t!==null&&(t.childLanes|=e),t=r,r=r.return;return t.tag===3?t.stateNode:null}var qo=!1;function Sw(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TM(r,e){r=r.updateQueue,e.updateQueue===r&&(e.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ho(r,e){return{eventTime:r,lane:e,tag:0,payload:null,callback:null,next:null}}function ma(r,e,t){var n=r.updateQueue;if(n===null)return null;if(n=n.shared,nt&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,_o(r,t)}return i=n.interleaved,i===null?(e.next=e,bw(n)):(e.next=i.next,i.next=e),n.interleaved=e,_o(r,t)}function Wp(r,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,lw(r,t)}}function z2(r,e){var t=r.updateQueue,n=r.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},r.updateQueue=t;return}r=t.lastBaseUpdate,r===null?t.firstBaseUpdate=e:r.next=e,t.lastBaseUpdate=e}function Um(r,e,t,n){var i=r.updateQueue;qo=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var h=r.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=u))}if(s!==null){var c=i.baseState;o=0,h=l=u=null,a=s;do{var d=a.lane,p=a.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=r,v=a;switch(d=e,p=t,v.tag){case 1:if(g=v.payload,typeof g=="function"){c=g.call(p,c,d);break e}c=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,d=typeof g=="function"?g.call(p,c,d):g,d==null)break e;c=Xt({},c,d);break e;case 2:qo=!0}}a.callback!==null&&a.lane!==0&&(r.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(l=h=p,u=c):h=h.next=p,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(h===null&&(u=c),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yl|=o,r.lanes=o,r.memoizedState=c}}function $2(r,e,t){if(r=e.effects,e.effects=null,r!==null)for(e=0;e<r.length;e++){var n=r[e],i=n.callback;if(i!==null){if(n.callback=null,n=t,typeof i!="function")throw Error(le(191,i));i.call(n)}}}var Ed={},Es=ka(Ed),rd=ka(Ed),nd=ka(Ed);function nl(r){if(r===Ed)throw Error(le(174));return r}function Tw(r,e){switch(xt(nd,e),xt(rd,r),xt(Es,Ed),r=e.nodeType,r){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gx(null,"");break;default:r=r===8?e.parentNode:e,e=r.namespaceURI||null,r=r.tagName,e=gx(e,r)}Et(Es),xt(Es,e)}function oc(){Et(Es),Et(rd),Et(nd)}function EM(r){nl(nd.current);var e=nl(Es.current),t=gx(e,r.type);e!==t&&(xt(rd,r),xt(Es,t))}function Ew(r){rd.current===r&&(Et(Es),Et(rd))}var Lt=ka(0);function jm(r){for(var e=r;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Py=[];function Pw(){for(var r=0;r<Py.length;r++)Py[r]._workInProgressVersionPrimary=null;Py.length=0}var Vp=Eo.ReactCurrentDispatcher,Cy=Eo.ReactCurrentBatchConfig,vl=0,jt=null,ur=null,wr=null,Xm=!1,kh=!1,id=0,PX=0;function jr(){throw Error(le(321))}function Cw(r,e){if(e===null)return!1;for(var t=0;t<e.length&&t<r.length;t++)if(!Ui(r[t],e[t]))return!1;return!0}function Aw(r,e,t,n,i,s){if(vl=s,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vp.current=r===null||r.memoizedState===null?IX:MX,r=t(n,i),kh){s=0;do{if(kh=!1,id=0,25<=s)throw Error(le(301));s+=1,wr=ur=null,e.updateQueue=null,Vp.current=RX,r=t(n,i)}while(kh)}if(Vp.current=Hm,e=ur!==null&&ur.next!==null,vl=0,wr=ur=jt=null,Xm=!1,e)throw Error(le(300));return r}function kw(){var r=id!==0;return id=0,r}function hs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?jt.memoizedState=wr=r:wr=wr.next=r,wr}function ci(){if(ur===null){var r=jt.alternate;r=r!==null?r.memoizedState:null}else r=ur.next;var e=wr===null?jt.memoizedState:wr.next;if(e!==null)wr=e,ur=r;else{if(r===null)throw Error(le(310));ur=r,r={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},wr===null?jt.memoizedState=wr=r:wr=wr.next=r}return wr}function sd(r,e){return typeof e=="function"?e(r):e}function Ay(r){var e=ci(),t=e.queue;if(t===null)throw Error(le(311));t.lastRenderedReducer=r;var n=ur,i=n.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,u=null,l=s;do{var h=l.lane;if((vl&h)===h)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:r(n,l.action);else{var c={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=c,o=n):u=u.next=c,jt.lanes|=h,yl|=h}l=l.next}while(l!==null&&l!==s);u===null?o=n:u.next=a,Ui(n,e.memoizedState)||(mn=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,t.lastRenderedState=n}if(r=t.interleaved,r!==null){i=r;do s=i.lane,jt.lanes|=s,yl|=s,i=i.next;while(i!==r)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function ky(r){var e=ci(),t=e.queue;if(t===null)throw Error(le(311));t.lastRenderedReducer=r;var n=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=r(s,o.action),o=o.next;while(o!==i);Ui(s,e.memoizedState)||(mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function PM(){}function CM(r,e){var t=jt,n=ci(),i=e(),s=!Ui(n.memoizedState,i);if(s&&(n.memoizedState=i,mn=!0),n=n.queue,Iw(IM.bind(null,t,n,r),[r]),n.getSnapshot!==e||s||wr!==null&&wr.memoizedState.tag&1){if(t.flags|=2048,od(9,kM.bind(null,t,n,i,e),void 0,null),Sr===null)throw Error(le(349));vl&30||AM(t,e,i)}return i}function AM(r,e,t){r.flags|=16384,r={getSnapshot:e,value:t},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.stores=[r]):(t=e.stores,t===null?e.stores=[r]:t.push(r))}function kM(r,e,t,n){e.value=t,e.getSnapshot=n,MM(e)&&RM(r)}function IM(r,e,t){return t(function(){MM(e)&&RM(r)})}function MM(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Ui(r,t)}catch{return!0}}function RM(r){var e=_o(r,1);e!==null&&Fi(e,r,1,-1)}function Y2(r){var e=hs();return typeof r=="function"&&(r=r()),e.memoizedState=e.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sd,lastRenderedState:r},e.queue=r,r=r.dispatch=kX.bind(null,jt,r),[e.memoizedState,r]}function od(r,e,t,n){return r={tag:r,create:e,destroy:t,deps:n,next:null},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.lastEffect=r.next=r):(t=e.lastEffect,t===null?e.lastEffect=r.next=r:(n=t.next,t.next=r,r.next=n,e.lastEffect=r)),r}function OM(){return ci().memoizedState}function qp(r,e,t,n){var i=hs();jt.flags|=r,i.memoizedState=od(1|e,t,void 0,n===void 0?null:n)}function Hg(r,e,t,n){var i=ci();n=n===void 0?null:n;var s=void 0;if(ur!==null){var o=ur.memoizedState;if(s=o.destroy,n!==null&&Cw(n,o.deps)){i.memoizedState=od(e,t,s,n);return}}jt.flags|=r,i.memoizedState=od(1|e,t,s,n)}function G2(r,e){return qp(8390656,8,r,e)}function Iw(r,e){return Hg(2048,8,r,e)}function NM(r,e){return Hg(4,2,r,e)}function BM(r,e){return Hg(4,4,r,e)}function LM(r,e){if(typeof e=="function")return r=r(),e(r),function(){e(null)};if(e!=null)return r=r(),e.current=r,function(){e.current=null}}function FM(r,e,t){return t=t!=null?t.concat([r]):null,Hg(4,4,LM.bind(null,e,r),t)}function Mw(){}function DM(r,e){var t=ci();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Cw(e,n[1])?n[0]:(t.memoizedState=[r,e],r)}function UM(r,e){var t=ci();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Cw(e,n[1])?n[0]:(r=r(),t.memoizedState=[r,e],r)}function jM(r,e,t){return vl&21?(Ui(t,e)||(t=YI(),jt.lanes|=t,yl|=t,r.baseState=!0),e):(r.baseState&&(r.baseState=!1,mn=!0),r.memoizedState=t)}function CX(r,e){var t=ft;ft=t!==0&&4>t?t:4,r(!0);var n=Cy.transition;Cy.transition={};try{r(!1),e()}finally{ft=t,Cy.transition=n}}function XM(){return ci().memoizedState}function AX(r,e,t){var n=va(r);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},HM(r))zM(e,t);else if(t=SM(r,e,t,n),t!==null){var i=tn();Fi(t,r,n,i),$M(t,e,n)}}function kX(r,e,t){var n=va(r),i={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(HM(r))zM(e,i);else{var s=r.alternate;if(r.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,Ui(a,o)){var u=e.interleaved;u===null?(i.next=i,bw(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}t=SM(r,e,i,n),t!==null&&(i=tn(),Fi(t,r,n,i),$M(t,e,n))}}function HM(r){var e=r.alternate;return r===jt||e!==null&&e===jt}function zM(r,e){kh=Xm=!0;var t=r.pending;t===null?e.next=e:(e.next=t.next,t.next=e),r.pending=e}function $M(r,e,t){if(t&4194240){var n=e.lanes;n&=r.pendingLanes,t|=n,e.lanes=t,lw(r,t)}}var Hm={readContext:ui,useCallback:jr,useContext:jr,useEffect:jr,useImperativeHandle:jr,useInsertionEffect:jr,useLayoutEffect:jr,useMemo:jr,useReducer:jr,useRef:jr,useState:jr,useDebugValue:jr,useDeferredValue:jr,useTransition:jr,useMutableSource:jr,useSyncExternalStore:jr,useId:jr,unstable_isNewReconciler:!1},IX={readContext:ui,useCallback:function(r,e){return hs().memoizedState=[r,e===void 0?null:e],r},useContext:ui,useEffect:G2,useImperativeHandle:function(r,e,t){return t=t!=null?t.concat([r]):null,qp(4194308,4,LM.bind(null,e,r),t)},useLayoutEffect:function(r,e){return qp(4194308,4,r,e)},useInsertionEffect:function(r,e){return qp(4,2,r,e)},useMemo:function(r,e){var t=hs();return e=e===void 0?null:e,r=r(),t.memoizedState=[r,e],r},useReducer:function(r,e,t){var n=hs();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:e},n.queue=r,r=r.dispatch=AX.bind(null,jt,r),[n.memoizedState,r]},useRef:function(r){var e=hs();return r={current:r},e.memoizedState=r},useState:Y2,useDebugValue:Mw,useDeferredValue:function(r){return hs().memoizedState=r},useTransition:function(){var r=Y2(!1),e=r[0];return r=CX.bind(null,r[1]),hs().memoizedState=r,[e,r]},useMutableSource:function(){},useSyncExternalStore:function(r,e,t){var n=jt,i=hs();if(It){if(t===void 0)throw Error(le(407));t=t()}else{if(t=e(),Sr===null)throw Error(le(349));vl&30||AM(n,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,G2(IM.bind(null,n,s,r),[r]),n.flags|=2048,od(9,kM.bind(null,n,s,t,e),void 0,null),t},useId:function(){var r=hs(),e=Sr.identifierPrefix;if(It){var t=oo,n=so;t=(n&~(1<<32-Li(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=id++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=PX++,e=":"+e+"r"+t.toString(32)+":";return r.memoizedState=e},unstable_isNewReconciler:!1},MX={readContext:ui,useCallback:DM,useContext:ui,useEffect:Iw,useImperativeHandle:FM,useInsertionEffect:NM,useLayoutEffect:BM,useMemo:UM,useReducer:Ay,useRef:OM,useState:function(){return Ay(sd)},useDebugValue:Mw,useDeferredValue:function(r){var e=ci();return jM(e,ur.memoizedState,r)},useTransition:function(){var r=Ay(sd)[0],e=ci().memoizedState;return[r,e]},useMutableSource:PM,useSyncExternalStore:CM,useId:XM,unstable_isNewReconciler:!1},RX={readContext:ui,useCallback:DM,useContext:ui,useEffect:Iw,useImperativeHandle:FM,useInsertionEffect:NM,useLayoutEffect:BM,useMemo:UM,useReducer:ky,useRef:OM,useState:function(){return ky(sd)},useDebugValue:Mw,useDeferredValue:function(r){var e=ci();return ur===null?e.memoizedState=r:jM(e,ur.memoizedState,r)},useTransition:function(){var r=ky(sd)[0],e=ci().memoizedState;return[r,e]},useMutableSource:PM,useSyncExternalStore:CM,useId:XM,unstable_isNewReconciler:!1};function Si(r,e){if(r&&r.defaultProps){e=Xt({},e),r=r.defaultProps;for(var t in r)e[t]===void 0&&(e[t]=r[t]);return e}return e}function Fx(r,e,t,n){e=r.memoizedState,t=t(n,e),t=t==null?e:Xt({},e,t),r.memoizedState=t,r.lanes===0&&(r.updateQueue.baseState=t)}var zg={isMounted:function(r){return(r=r._reactInternals)?El(r)===r:!1},enqueueSetState:function(r,e,t){r=r._reactInternals;var n=tn(),i=va(r),s=ho(n,i);s.payload=e,t!=null&&(s.callback=t),e=ma(r,s,i),e!==null&&(Fi(e,r,i,n),Wp(e,r,i))},enqueueReplaceState:function(r,e,t){r=r._reactInternals;var n=tn(),i=va(r),s=ho(n,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ma(r,s,i),e!==null&&(Fi(e,r,i,n),Wp(e,r,i))},enqueueForceUpdate:function(r,e){r=r._reactInternals;var t=tn(),n=va(r),i=ho(t,n);i.tag=2,e!=null&&(i.callback=e),e=ma(r,i,n),e!==null&&(Fi(e,r,n,t),Wp(e,r,n))}};function W2(r,e,t,n,i,s,o){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zh(t,n)||!Zh(i,s):!0}function YM(r,e,t){var n=!1,i=Sa,s=e.contextType;return typeof s=="object"&&s!==null?s=ui(s):(i=yn(e)?ml:Kr.current,n=e.contextTypes,s=(n=n!=null)?nc(r,i):Sa),e=new e(t,s),r.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zg,r.stateNode=e,e._reactInternals=r,n&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=s),e}function V2(r,e,t,n){r=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==r&&zg.enqueueReplaceState(e,e.state,null)}function Dx(r,e,t,n){var i=r.stateNode;i.props=t,i.state=r.memoizedState,i.refs={},Sw(r);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ui(s):(s=yn(e)?ml:Kr.current,i.context=nc(r,s)),i.state=r.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Fx(r,e,s,t),i.state=r.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zg.enqueueReplaceState(i,i.state,null),Um(r,t,i,n),i.state=r.memoizedState),typeof i.componentDidMount=="function"&&(r.flags|=4194308)}function ac(r,e){try{var t="",n=e;do t+=o7(n),n=n.return;while(n);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:r,source:e,stack:i,digest:null}}function Iy(r,e,t){return{value:r,source:null,stack:t??null,digest:e??null}}function Ux(r,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var OX=typeof WeakMap=="function"?WeakMap:Map;function GM(r,e,t){t=ho(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){$m||($m=!0,qx=n),Ux(r,e)},t}function WM(r,e,t){t=ho(-1,t),t.tag=3;var n=r.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;t.payload=function(){return n(i)},t.callback=function(){Ux(r,e)}}var s=r.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Ux(r,e),typeof n!="function"&&(ga===null?ga=new Set([this]):ga.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function q2(r,e,t){var n=r.pingCache;if(n===null){n=r.pingCache=new OX;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(t)||(i.add(t),r=WX.bind(null,r,e,t),e.then(r,r))}function K2(r){do{var e;if((e=r.tag===13)&&(e=r.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return r;r=r.return}while(r!==null);return null}function Q2(r,e,t,n,i){return r.mode&1?(r.flags|=65536,r.lanes=i,r):(r===e?r.flags|=65536:(r.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ho(-1,1),e.tag=2,ma(t,e,1))),t.lanes|=1),r)}var NX=Eo.ReactCurrentOwner,mn=!1;function Jr(r,e,t,n){e.child=r===null?bM(e,null,t,n):sc(e,r.child,t,n)}function Z2(r,e,t,n,i){t=t.render;var s=e.ref;return zu(e,i),n=Aw(r,e,t,n,s,i),t=kw(),r!==null&&!mn?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,wo(r,e,i)):(It&&t&&gw(e),e.flags|=1,Jr(r,e,n,i),e.child)}function J2(r,e,t,n,i){if(r===null){var s=t.type;return typeof s=="function"&&!Uw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,VM(r,e,s,n,i)):(r=Jp(t.type,null,n,e,e.mode,i),r.ref=e.ref,r.return=e,e.child=r)}if(s=r.child,!(r.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Zh,t(o,n)&&r.ref===e.ref)return wo(r,e,i)}return e.flags|=1,r=ya(s,n),r.ref=e.ref,r.return=e,e.child=r}function VM(r,e,t,n,i){if(r!==null){var s=r.memoizedProps;if(Zh(s,n)&&r.ref===e.ref)if(mn=!1,e.pendingProps=n=s,(r.lanes&i)!==0)r.flags&131072&&(mn=!0);else return e.lanes=r.lanes,wo(r,e,i)}return jx(r,e,t,n,i)}function qM(r,e,t){var n=e.pendingProps,i=n.children,s=r!==null?r.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(_u,Mn),Mn|=t;else{if(!(t&1073741824))return r=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:r,cachePool:null,transitions:null},e.updateQueue=null,xt(_u,Mn),Mn|=r,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,xt(_u,Mn),Mn|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,xt(_u,Mn),Mn|=n;return Jr(r,e,i,t),e.child}function KM(r,e){var t=e.ref;(r===null&&t!==null||r!==null&&r.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function jx(r,e,t,n,i){var s=yn(t)?ml:Kr.current;return s=nc(e,s),zu(e,i),t=Aw(r,e,t,n,s,i),n=kw(),r!==null&&!mn?(e.updateQueue=r.updateQueue,e.flags&=-2053,r.lanes&=~i,wo(r,e,i)):(It&&n&&gw(e),e.flags|=1,Jr(r,e,t,i),e.child)}function eP(r,e,t,n,i){if(yn(t)){var s=!0;Nm(e)}else s=!1;if(zu(e,i),e.stateNode===null)Kp(r,e),YM(e,t,n),Dx(e,t,n,i),n=!0;else if(r===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=t.contextType;typeof l=="object"&&l!==null?l=ui(l):(l=yn(t)?ml:Kr.current,l=nc(e,l));var h=t.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||u!==l)&&V2(e,o,n,l),qo=!1;var d=e.memoizedState;o.state=d,Um(e,n,o,i),u=e.memoizedState,a!==n||d!==u||vn.current||qo?(typeof h=="function"&&(Fx(e,t,h,n),u=e.memoizedState),(a=qo||W2(e,t,a,n,d,u,l))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,TM(r,e),a=e.memoizedProps,l=e.type===e.elementType?a:Si(e.type,a),o.props=l,c=e.pendingProps,d=o.context,u=t.contextType,typeof u=="object"&&u!==null?u=ui(u):(u=yn(t)?ml:Kr.current,u=nc(e,u));var p=t.getDerivedStateFromProps;(h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==u)&&V2(e,o,n,u),qo=!1,d=e.memoizedState,o.state=d,Um(e,n,o,i);var g=e.memoizedState;a!==c||d!==g||vn.current||qo?(typeof p=="function"&&(Fx(e,t,p,n),g=e.memoizedState),(l=qo||W2(e,t,l,n,d,g,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=g),o.props=n,o.state=g,o.context=u,n=l):(typeof o.componentDidUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===r.memoizedProps&&d===r.memoizedState||(e.flags|=1024),n=!1)}return Xx(r,e,t,n,s,i)}function Xx(r,e,t,n,i,s){KM(r,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&U2(e,t,!1),wo(r,e,s);n=e.stateNode,NX.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,r!==null&&o?(e.child=sc(e,r.child,null,s),e.child=sc(e,null,a,s)):Jr(r,e,a,s),e.memoizedState=n.state,i&&U2(e,t,!0),e.child}function QM(r){var e=r.stateNode;e.pendingContext?D2(r,e.pendingContext,e.pendingContext!==e.context):e.context&&D2(r,e.context,!1),Tw(r,e.containerInfo)}function tP(r,e,t,n,i){return ic(),yw(i),e.flags|=256,Jr(r,e,t,n),e.child}var Hx={dehydrated:null,treeContext:null,retryLane:0};function zx(r){return{baseLanes:r,cachePool:null,transitions:null}}function ZM(r,e,t){var n=e.pendingProps,i=Lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=r!==null&&r.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(r===null||r.memoizedState!==null)&&(i|=1),xt(Lt,i&1),r===null)return Bx(e),r=e.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(e.mode&1?r.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,r=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gg(o,n,0,null),r=ll(r,n,t,null),s.return=e,r.return=e,s.sibling=r,e.child=s,e.child.memoizedState=zx(t),e.memoizedState=Hx,r):Rw(e,o));if(i=r.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return BX(r,e,o,n,a,i,t);if(s){s=n.fallback,o=e.mode,i=r.child,a=i.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ya(i,u),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ya(a,s):(s=ll(s,o,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=r.child.memoizedState,o=o===null?zx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=r.childLanes&~t,e.memoizedState=Hx,n}return s=r.child,r=s.sibling,n=ya(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,r!==null&&(t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)),e.child=n,e.memoizedState=null,n}function Rw(r,e){return e=Gg({mode:"visible",children:e},r.mode,0,null),e.return=r,r.child=e}function cp(r,e,t,n){return n!==null&&yw(n),sc(e,r.child,null,t),r=Rw(e,e.pendingProps.children),r.flags|=2,e.memoizedState=null,r}function BX(r,e,t,n,i,s,o){if(t)return e.flags&256?(e.flags&=-257,n=Iy(Error(le(422))),cp(r,e,o,n)):e.memoizedState!==null?(e.child=r.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Gg({mode:"visible",children:n.children},i,0,null),s=ll(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&sc(e,r.child,null,o),e.child.memoizedState=zx(o),e.memoizedState=Hx,s);if(!(e.mode&1))return cp(r,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(le(419)),n=Iy(s,n,void 0),cp(r,e,o,n)}if(a=(o&r.childLanes)!==0,mn||a){if(n=Sr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_o(r,i),Fi(n,r,i,-1))}return Dw(),n=Iy(Error(le(421))),cp(r,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=r.child,e=VX.bind(null,r),i._reactRetry=e,null):(r=s.treeContext,On=pa(i.nextSibling),Bn=e,It=!0,Ei=null,r!==null&&(ei[ti++]=so,ei[ti++]=oo,ei[ti++]=gl,so=r.id,oo=r.overflow,gl=e),e=Rw(e,n.children),e.flags|=4096,e)}function rP(r,e,t){r.lanes|=e;var n=r.alternate;n!==null&&(n.lanes|=e),Lx(r.return,e,t)}function My(r,e,t,n,i){var s=r.memoizedState;s===null?r.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=i)}function JM(r,e,t){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Jr(r,e,n.children,t),n=Lt.current,n&2)n=n&1|2,e.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=e.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&rP(r,t,e);else if(r.tag===19)rP(r,t,e);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break e;for(;r.sibling===null;){if(r.return===null||r.return===e)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}n&=1}if(xt(Lt,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)r=t.alternate,r!==null&&jm(r)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),My(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(r=i.alternate,r!==null&&jm(r)===null){e.child=i;break}r=i.sibling,i.sibling=t,t=i,i=r}My(e,!0,t,null,s);break;case"together":My(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kp(r,e){!(e.mode&1)&&r!==null&&(r.alternate=null,e.alternate=null,e.flags|=2)}function wo(r,e,t){if(r!==null&&(e.dependencies=r.dependencies),yl|=e.lanes,!(t&e.childLanes))return null;if(r!==null&&e.child!==r.child)throw Error(le(153));if(e.child!==null){for(r=e.child,t=ya(r,r.pendingProps),e.child=t,t.return=e;r.sibling!==null;)r=r.sibling,t=t.sibling=ya(r,r.pendingProps),t.return=e;t.sibling=null}return e.child}function LX(r,e,t){switch(e.tag){case 3:QM(e),ic();break;case 5:EM(e);break;case 1:yn(e.type)&&Nm(e);break;case 4:Tw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;xt(Fm,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(xt(Lt,Lt.current&1),e.flags|=128,null):t&e.child.childLanes?ZM(r,e,t):(xt(Lt,Lt.current&1),r=wo(r,e,t),r!==null?r.sibling:null);xt(Lt,Lt.current&1);break;case 19:if(n=(t&e.childLanes)!==0,r.flags&128){if(n)return JM(r,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),xt(Lt,Lt.current),n)break;return null;case 22:case 23:return e.lanes=0,qM(r,e,t)}return wo(r,e,t)}var eR,$x,tR,rR;eR=function(r,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)r.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};$x=function(){};tR=function(r,e,t,n){var i=r.memoizedProps;if(i!==n){r=e.stateNode,nl(Es.current);var s=null;switch(t){case"input":i=dx(r,i),n=dx(r,n),s=[];break;case"select":i=Xt({},i,{value:void 0}),n=Xt({},n,{value:void 0}),s=[];break;case"textarea":i=mx(r,i),n=mx(r,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(r.onclick=Rm)}vx(t,n);var o;t=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Yh.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(s||(s=[]),s.push(l,t)),t=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Yh.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&St("scroll",r),s||a===u||(s=[])):(s=s||[]).push(l,u))}t&&(s=s||[]).push("style",t);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};rR=function(r,e,t,n){t!==n&&(e.flags|=4)};function ih(r,e){if(!It)switch(r.tailMode){case"hidden":e=r.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?r.tail=null:t.sibling=null;break;case"collapsed":t=r.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||r.tail===null?r.tail=null:r.tail.sibling=null:n.sibling=null}}function Xr(r){var e=r.alternate!==null&&r.alternate.child===r.child,t=0,n=0;if(e)for(var i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=r,i=i.sibling;else for(i=r.child;i!==null;)t|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=r,i=i.sibling;return r.subtreeFlags|=n,r.childLanes=t,e}function FX(r,e,t){var n=e.pendingProps;switch(vw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xr(e),null;case 1:return yn(e.type)&&Om(),Xr(e),null;case 3:return n=e.stateNode,oc(),Et(vn),Et(Kr),Pw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(r===null||r.child===null)&&(lp(e)?e.flags|=4:r===null||r.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ei!==null&&(Zx(Ei),Ei=null))),$x(r,e),Xr(e),null;case 5:Ew(e);var i=nl(nd.current);if(t=e.type,r!==null&&e.stateNode!=null)tR(r,e,t,n,i),r.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(le(166));return Xr(e),null}if(r=nl(Es.current),lp(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[ys]=e,n[td]=s,r=(e.mode&1)!==0,t){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(i=0;i<vh.length;i++)St(vh[i],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":h2(n,s),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},St("invalid",n);break;case"textarea":f2(n,s),St("invalid",n)}vx(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ap(n.textContent,a,r),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ap(n.textContent,a,r),i=["children",""+a]):Yh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",n)}switch(t){case"input":Jf(n),d2(n,s,!0);break;case"textarea":Jf(n),p2(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Rm)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=II(t)),r==="http://www.w3.org/1999/xhtml"?t==="script"?(r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof n.is=="string"?r=o.createElement(t,{is:n.is}):(r=o.createElement(t),t==="select"&&(o=r,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):r=o.createElementNS(r,t),r[ys]=e,r[td]=n,eR(r,e,!1,!1),e.stateNode=r;e:{switch(o=yx(t,n),t){case"dialog":St("cancel",r),St("close",r),i=n;break;case"iframe":case"object":case"embed":St("load",r),i=n;break;case"video":case"audio":for(i=0;i<vh.length;i++)St(vh[i],r);i=n;break;case"source":St("error",r),i=n;break;case"img":case"image":case"link":St("error",r),St("load",r),i=n;break;case"details":St("toggle",r),i=n;break;case"input":h2(r,n),i=dx(r,n),St("invalid",r);break;case"option":i=n;break;case"select":r._wrapperState={wasMultiple:!!n.multiple},i=Xt({},n,{value:void 0}),St("invalid",r);break;case"textarea":f2(r,n),i=mx(r,n),St("invalid",r);break;default:i=n}vx(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?OI(r,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&MI(r,u)):s==="children"?typeof u=="string"?(t!=="textarea"||u!=="")&&Gh(r,u):typeof u=="number"&&Gh(r,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yh.hasOwnProperty(s)?u!=null&&s==="onScroll"&&St("scroll",r):u!=null&&rw(r,s,u,o))}switch(t){case"input":Jf(r),d2(r,n,!1);break;case"textarea":Jf(r),p2(r);break;case"option":n.value!=null&&r.setAttribute("value",""+ba(n.value));break;case"select":r.multiple=!!n.multiple,s=n.value,s!=null?Uu(r,!!n.multiple,s,!1):n.defaultValue!=null&&Uu(r,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(r.onclick=Rm)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xr(e),null;case 6:if(r&&e.stateNode!=null)rR(r,e,r.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(le(166));if(t=nl(nd.current),nl(Es.current),lp(e)){if(n=e.stateNode,t=e.memoizedProps,n[ys]=e,(s=n.nodeValue!==t)&&(r=Bn,r!==null))switch(r.tag){case 3:ap(n.nodeValue,t,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ap(n.nodeValue,t,(r.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[ys]=e,e.stateNode=n}return Xr(e),null;case 13:if(Et(Lt),n=e.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(It&&On!==null&&e.mode&1&&!(e.flags&128))_M(),ic(),e.flags|=98560,s=!1;else if(s=lp(e),n!==null&&n.dehydrated!==null){if(r===null){if(!s)throw Error(le(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(le(317));s[ys]=e}else ic(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xr(e),s=!1}else Ei!==null&&(Zx(Ei),Ei=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(r!==null&&r.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(r===null||Lt.current&1?dr===0&&(dr=3):Dw())),e.updateQueue!==null&&(e.flags|=4),Xr(e),null);case 4:return oc(),$x(r,e),r===null&&Jh(e.stateNode.containerInfo),Xr(e),null;case 10:return ww(e.type._context),Xr(e),null;case 17:return yn(e.type)&&Om(),Xr(e),null;case 19:if(Et(Lt),s=e.memoizedState,s===null)return Xr(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)ih(s,!1);else{if(dr!==0||r!==null&&r.flags&128)for(r=e.child;r!==null;){if(o=jm(r),o!==null){for(e.flags|=128,ih(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,r=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=r,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,r=o.dependencies,s.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t=t.sibling;return xt(Lt,Lt.current&1|2),e.child}r=r.sibling}s.tail!==null&&qt()>lc&&(e.flags|=128,n=!0,ih(s,!1),e.lanes=4194304)}else{if(!n)if(r=jm(o),r!==null){if(e.flags|=128,n=!0,t=r.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ih(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!It)return Xr(e),null}else 2*qt()-s.renderingStartTime>lc&&t!==1073741824&&(e.flags|=128,n=!0,ih(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=qt(),e.sibling=null,t=Lt.current,xt(Lt,n?t&1|2:t&1),e):(Xr(e),null);case 22:case 23:return Fw(),n=e.memoizedState!==null,r!==null&&r.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Mn&1073741824&&(Xr(e),e.subtreeFlags&6&&(e.flags|=8192)):Xr(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function DX(r,e){switch(vw(e),e.tag){case 1:return yn(e.type)&&Om(),r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 3:return oc(),Et(vn),Et(Kr),Pw(),r=e.flags,r&65536&&!(r&128)?(e.flags=r&-65537|128,e):null;case 5:return Ew(e),null;case 13:if(Et(Lt),r=e.memoizedState,r!==null&&r.dehydrated!==null){if(e.alternate===null)throw Error(le(340));ic()}return r=e.flags,r&65536?(e.flags=r&-65537|128,e):null;case 19:return Et(Lt),null;case 4:return oc(),null;case 10:return ww(e.type._context),null;case 22:case 23:return Fw(),null;case 24:return null;default:return null}}var hp=!1,zr=!1,UX=typeof WeakSet=="function"?WeakSet:Set,Se=null;function xu(r,e){var t=r.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){zt(r,e,n)}else t.current=null}function Yx(r,e,t){try{t()}catch(n){zt(r,e,n)}}var nP=!1;function jX(r,e){if(Ax=km,r=aM(),mw(r)){if("selectionStart"in r)var t={start:r.selectionStart,end:r.selectionEnd};else e:{t=(t=r.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,u=-1,l=0,h=0,c=r,d=null;t:for(;;){for(var p;c!==t||i!==0&&c.nodeType!==3||(a=o+i),c!==s||n!==0&&c.nodeType!==3||(u=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(p=c.firstChild)!==null;)d=c,c=p;for(;;){if(c===r)break t;if(d===t&&++l===i&&(a=o),d===s&&++h===n&&(u=o),(p=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=p}t=a===-1||u===-1?null:{start:a,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(kx={focusedElem:r,selectionRange:t},km=!1,Se=e;Se!==null;)if(e=Se,r=e.child,(e.subtreeFlags&1028)!==0&&r!==null)r.return=e,Se=r;else for(;Se!==null;){e=Se;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,x=g.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Si(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(S){zt(e,e.return,S)}if(r=e.sibling,r!==null){r.return=e.return,Se=r;break}Se=e.return}return g=nP,nP=!1,g}function Ih(r,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&r)===r){var s=i.destroy;i.destroy=void 0,s!==void 0&&Yx(e,t,s)}i=i.next}while(i!==n)}}function $g(r,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&r)===r){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function Gx(r){var e=r.ref;if(e!==null){var t=r.stateNode;switch(r.tag){case 5:r=t;break;default:r=t}typeof e=="function"?e(r):e.current=r}}function nR(r){var e=r.alternate;e!==null&&(r.alternate=null,nR(e)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(e=r.stateNode,e!==null&&(delete e[ys],delete e[td],delete e[Rx],delete e[bX],delete e[SX])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function iR(r){return r.tag===5||r.tag===3||r.tag===4}function iP(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||iR(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Wx(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(r,e):t.insertBefore(r,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(r,t)):(e=t,e.appendChild(r)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Rm));else if(n!==4&&(r=r.child,r!==null))for(Wx(r,e,t),r=r.sibling;r!==null;)Wx(r,e,t),r=r.sibling}function Vx(r,e,t){var n=r.tag;if(n===5||n===6)r=r.stateNode,e?t.insertBefore(r,e):t.appendChild(r);else if(n!==4&&(r=r.child,r!==null))for(Vx(r,e,t),r=r.sibling;r!==null;)Vx(r,e,t),r=r.sibling}var Ar=null,Ti=!1;function Xo(r,e,t){for(t=t.child;t!==null;)sR(r,e,t),t=t.sibling}function sR(r,e,t){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Lg,t)}catch{}switch(t.tag){case 5:zr||xu(t,e);case 6:var n=Ar,i=Ti;Ar=null,Xo(r,e,t),Ar=n,Ti=i,Ar!==null&&(Ti?(r=Ar,t=t.stateNode,r.nodeType===8?r.parentNode.removeChild(t):r.removeChild(t)):Ar.removeChild(t.stateNode));break;case 18:Ar!==null&&(Ti?(r=Ar,t=t.stateNode,r.nodeType===8?Ty(r.parentNode,t):r.nodeType===1&&Ty(r,t),Kh(r)):Ty(Ar,t.stateNode));break;case 4:n=Ar,i=Ti,Ar=t.stateNode.containerInfo,Ti=!0,Xo(r,e,t),Ar=n,Ti=i;break;case 0:case 11:case 14:case 15:if(!zr&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Yx(t,e,o),i=i.next}while(i!==n)}Xo(r,e,t);break;case 1:if(!zr&&(xu(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(a){zt(t,e,a)}Xo(r,e,t);break;case 21:Xo(r,e,t);break;case 22:t.mode&1?(zr=(n=zr)||t.memoizedState!==null,Xo(r,e,t),zr=n):Xo(r,e,t);break;default:Xo(r,e,t)}}function sP(r){var e=r.updateQueue;if(e!==null){r.updateQueue=null;var t=r.stateNode;t===null&&(t=r.stateNode=new UX),e.forEach(function(n){var i=qX.bind(null,r,n);t.has(n)||(t.add(n),n.then(i,i))})}}function xi(r,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];try{var s=r,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ar=a.stateNode,Ti=!1;break e;case 3:Ar=a.stateNode.containerInfo,Ti=!0;break e;case 4:Ar=a.stateNode.containerInfo,Ti=!0;break e}a=a.return}if(Ar===null)throw Error(le(160));sR(s,o,i),Ar=null,Ti=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oR(e,r),e=e.sibling}function oR(r,e){var t=r.alternate,n=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(xi(e,r),ss(r),n&4){try{Ih(3,r,r.return),$g(3,r)}catch(v){zt(r,r.return,v)}try{Ih(5,r,r.return)}catch(v){zt(r,r.return,v)}}break;case 1:xi(e,r),ss(r),n&512&&t!==null&&xu(t,t.return);break;case 5:if(xi(e,r),ss(r),n&512&&t!==null&&xu(t,t.return),r.flags&32){var i=r.stateNode;try{Gh(i,"")}catch(v){zt(r,r.return,v)}}if(n&4&&(i=r.stateNode,i!=null)){var s=r.memoizedProps,o=t!==null?t.memoizedProps:s,a=r.type,u=r.updateQueue;if(r.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&AI(i,s),yx(a,o);var l=yx(a,s);for(o=0;o<u.length;o+=2){var h=u[o],c=u[o+1];h==="style"?OI(i,c):h==="dangerouslySetInnerHTML"?MI(i,c):h==="children"?Gh(i,c):rw(i,h,c,l)}switch(a){case"input":fx(i,s);break;case"textarea":kI(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Uu(i,!!s.multiple,p,!1):d!==!!s.multiple&&(s.defaultValue!=null?Uu(i,!!s.multiple,s.defaultValue,!0):Uu(i,!!s.multiple,s.multiple?[]:"",!1))}i[td]=s}catch(v){zt(r,r.return,v)}}break;case 6:if(xi(e,r),ss(r),n&4){if(r.stateNode===null)throw Error(le(162));i=r.stateNode,s=r.memoizedProps;try{i.nodeValue=s}catch(v){zt(r,r.return,v)}}break;case 3:if(xi(e,r),ss(r),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Kh(e.containerInfo)}catch(v){zt(r,r.return,v)}break;case 4:xi(e,r),ss(r);break;case 13:xi(e,r),ss(r),i=r.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Bw=qt())),n&4&&sP(r);break;case 22:if(h=t!==null&&t.memoizedState!==null,r.mode&1?(zr=(l=zr)||h,xi(e,r),zr=l):xi(e,r),ss(r),n&8192){if(l=r.memoizedState!==null,(r.stateNode.isHidden=l)&&!h&&r.mode&1)for(Se=r,h=r.child;h!==null;){for(c=Se=h;Se!==null;){switch(d=Se,p=d.child,d.tag){case 0:case 11:case 14:case 15:Ih(4,d,d.return);break;case 1:xu(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){n=d,t=d.return;try{e=n,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){zt(n,t,v)}}break;case 5:xu(d,d.return);break;case 22:if(d.memoizedState!==null){aP(c);continue}}p!==null?(p.return=d,Se=p):aP(c)}h=h.sibling}e:for(h=null,c=r;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,u=c.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=RI("display",o))}catch(v){zt(r,r.return,v)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=l?"":c.memoizedProps}catch(v){zt(r,r.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===r)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===r)break e;for(;c.sibling===null;){if(c.return===null||c.return===r)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:xi(e,r),ss(r),n&4&&sP(r);break;case 21:break;default:xi(e,r),ss(r)}}function ss(r){var e=r.flags;if(e&2){try{e:{for(var t=r.return;t!==null;){if(iR(t)){var n=t;break e}t=t.return}throw Error(le(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Gh(i,""),n.flags&=-33);var s=iP(r);Vx(r,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=iP(r);Wx(r,a,o);break;default:throw Error(le(161))}}catch(u){zt(r,r.return,u)}r.flags&=-3}e&4096&&(r.flags&=-4097)}function XX(r,e,t){Se=r,aR(r)}function aR(r,e,t){for(var n=(r.mode&1)!==0;Se!==null;){var i=Se,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||hp;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||zr;a=hp;var l=zr;if(hp=o,(zr=u)&&!l)for(Se=i;Se!==null;)o=Se,u=o.child,o.tag===22&&o.memoizedState!==null?lP(i):u!==null?(u.return=o,Se=u):lP(i);for(;s!==null;)Se=s,aR(s),s=s.sibling;Se=i,hp=a,zr=l}oP(r)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Se=s):oP(r)}}function oP(r){for(;Se!==null;){var e=Se;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zr||$g(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!zr)if(t===null)n.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Si(e.type,t.memoizedProps);n.componentDidUpdate(i,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&$2(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}$2(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var h=l.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Kh(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}zr||e.flags&512&&Gx(e)}catch(d){zt(e,e.return,d)}}if(e===r){Se=null;break}if(t=e.sibling,t!==null){t.return=e.return,Se=t;break}Se=e.return}}function aP(r){for(;Se!==null;){var e=Se;if(e===r){Se=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Se=t;break}Se=e.return}}function lP(r){for(;Se!==null;){var e=Se;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{$g(4,e)}catch(u){zt(e,t,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(u){zt(e,i,u)}}var s=e.return;try{Gx(e)}catch(u){zt(e,s,u)}break;case 5:var o=e.return;try{Gx(e)}catch(u){zt(e,o,u)}}}catch(u){zt(e,e.return,u)}if(e===r){Se=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Se=a;break}Se=e.return}}var HX=Math.ceil,zm=Eo.ReactCurrentDispatcher,Ow=Eo.ReactCurrentOwner,ai=Eo.ReactCurrentBatchConfig,nt=0,Sr=null,rr=null,Or=0,Mn=0,_u=ka(0),dr=0,ad=null,yl=0,Yg=0,Nw=0,Mh=null,dn=null,Bw=0,lc=1/0,Gs=null,$m=!1,qx=null,ga=null,dp=!1,oa=null,Ym=0,Rh=0,Kx=null,Qp=-1,Zp=0;function tn(){return nt&6?qt():Qp!==-1?Qp:Qp=qt()}function va(r){return r.mode&1?nt&2&&Or!==0?Or&-Or:EX.transition!==null?(Zp===0&&(Zp=YI()),Zp):(r=ft,r!==0||(r=window.event,r=r===void 0?16:ZI(r.type)),r):1}function Fi(r,e,t,n){if(50<Rh)throw Rh=0,Kx=null,Error(le(185));bd(r,t,n),(!(nt&2)||r!==Sr)&&(r===Sr&&(!(nt&2)&&(Yg|=t),dr===4&&ea(r,Or)),xn(r,n),t===1&&nt===0&&!(e.mode&1)&&(lc=qt()+500,Xg&&Ia()))}function xn(r,e){var t=r.callbackNode;E7(r,e);var n=Am(r,r===Sr?Or:0);if(n===0)t!==null&&v2(t),r.callbackNode=null,r.callbackPriority=0;else if(e=n&-n,r.callbackPriority!==e){if(t!=null&&v2(t),e===1)r.tag===0?TX(uP.bind(null,r)):vM(uP.bind(null,r)),_X(function(){!(nt&6)&&Ia()}),t=null;else{switch(GI(n)){case 1:t=aw;break;case 4:t=zI;break;case 16:t=Cm;break;case 536870912:t=$I;break;default:t=Cm}t=mR(t,lR.bind(null,r))}r.callbackPriority=e,r.callbackNode=t}}function lR(r,e){if(Qp=-1,Zp=0,nt&6)throw Error(le(327));var t=r.callbackNode;if($u()&&r.callbackNode!==t)return null;var n=Am(r,r===Sr?Or:0);if(n===0)return null;if(n&30||n&r.expiredLanes||e)e=Gm(r,n);else{e=n;var i=nt;nt|=2;var s=cR();(Sr!==r||Or!==e)&&(Gs=null,lc=qt()+500,al(r,e));do try{YX();break}catch(a){uR(r,a)}while(!0);_w(),zm.current=s,nt=i,rr!==null?e=0:(Sr=null,Or=0,e=dr)}if(e!==0){if(e===2&&(i=Sx(r),i!==0&&(n=i,e=Qx(r,i))),e===1)throw t=ad,al(r,0),ea(r,n),xn(r,qt()),t;if(e===6)ea(r,n);else{if(i=r.current.alternate,!(n&30)&&!zX(i)&&(e=Gm(r,n),e===2&&(s=Sx(r),s!==0&&(n=s,e=Qx(r,s))),e===1))throw t=ad,al(r,0),ea(r,n),xn(r,qt()),t;switch(r.finishedWork=i,r.finishedLanes=n,e){case 0:case 1:throw Error(le(345));case 2:Qa(r,dn,Gs);break;case 3:if(ea(r,n),(n&130023424)===n&&(e=Bw+500-qt(),10<e)){if(Am(r,0)!==0)break;if(i=r.suspendedLanes,(i&n)!==n){tn(),r.pingedLanes|=r.suspendedLanes&i;break}r.timeoutHandle=Mx(Qa.bind(null,r,dn,Gs),e);break}Qa(r,dn,Gs);break;case 4:if(ea(r,n),(n&4194240)===n)break;for(e=r.eventTimes,i=-1;0<n;){var o=31-Li(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=qt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*HX(n/1960))-n,10<n){r.timeoutHandle=Mx(Qa.bind(null,r,dn,Gs),n);break}Qa(r,dn,Gs);break;case 5:Qa(r,dn,Gs);break;default:throw Error(le(329))}}}return xn(r,qt()),r.callbackNode===t?lR.bind(null,r):null}function Qx(r,e){var t=Mh;return r.current.memoizedState.isDehydrated&&(al(r,e).flags|=256),r=Gm(r,e),r!==2&&(e=dn,dn=t,e!==null&&Zx(e)),r}function Zx(r){dn===null?dn=r:dn.push.apply(dn,r)}function zX(r){for(var e=r;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var i=t[n],s=i.getSnapshot;i=i.value;try{if(!Ui(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ea(r,e){for(e&=~Nw,e&=~Yg,r.suspendedLanes|=e,r.pingedLanes&=~e,r=r.expirationTimes;0<e;){var t=31-Li(e),n=1<<t;r[t]=-1,e&=~n}}function uP(r){if(nt&6)throw Error(le(327));$u();var e=Am(r,0);if(!(e&1))return xn(r,qt()),null;var t=Gm(r,e);if(r.tag!==0&&t===2){var n=Sx(r);n!==0&&(e=n,t=Qx(r,n))}if(t===1)throw t=ad,al(r,0),ea(r,e),xn(r,qt()),t;if(t===6)throw Error(le(345));return r.finishedWork=r.current.alternate,r.finishedLanes=e,Qa(r,dn,Gs),xn(r,qt()),null}function Lw(r,e){var t=nt;nt|=1;try{return r(e)}finally{nt=t,nt===0&&(lc=qt()+500,Xg&&Ia())}}function xl(r){oa!==null&&oa.tag===0&&!(nt&6)&&$u();var e=nt;nt|=1;var t=ai.transition,n=ft;try{if(ai.transition=null,ft=1,r)return r()}finally{ft=n,ai.transition=t,nt=e,!(nt&6)&&Ia()}}function Fw(){Mn=_u.current,Et(_u)}function al(r,e){r.finishedWork=null,r.finishedLanes=0;var t=r.timeoutHandle;if(t!==-1&&(r.timeoutHandle=-1,xX(t)),rr!==null)for(t=rr.return;t!==null;){var n=t;switch(vw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Om();break;case 3:oc(),Et(vn),Et(Kr),Pw();break;case 5:Ew(n);break;case 4:oc();break;case 13:Et(Lt);break;case 19:Et(Lt);break;case 10:ww(n.type._context);break;case 22:case 23:Fw()}t=t.return}if(Sr=r,rr=r=ya(r.current,null),Or=Mn=e,dr=0,ad=null,Nw=Yg=yl=0,dn=Mh=null,rl!==null){for(e=0;e<rl.length;e++)if(t=rl[e],n=t.interleaved,n!==null){t.interleaved=null;var i=n.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}t.pending=n}rl=null}return r}function uR(r,e){do{var t=rr;try{if(_w(),Vp.current=Hm,Xm){for(var n=jt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Xm=!1}if(vl=0,wr=ur=jt=null,kh=!1,id=0,Ow.current=null,t===null||t.return===null){dr=1,ad=e,rr=null;break}e:{var s=r,o=t.return,a=t,u=e;if(e=Or,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=K2(o);if(p!==null){p.flags&=-257,Q2(p,o,a,s,e),p.mode&1&&q2(s,l,e),e=p,u=l;var g=e.updateQueue;if(g===null){var v=new Set;v.add(u),e.updateQueue=v}else g.add(u);break e}else{if(!(e&1)){q2(s,l,e),Dw();break e}u=Error(le(426))}}else if(It&&a.mode&1){var x=K2(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Q2(x,o,a,s,e),yw(ac(u,a));break e}}s=u=ac(u,a),dr!==4&&(dr=2),Mh===null?Mh=[s]:Mh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=GM(s,u,e);z2(s,y);break e;case 1:a=u;var w=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ga===null||!ga.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=WM(s,a,e);z2(s,S);break e}}s=s.return}while(s!==null)}dR(t)}catch(I){e=I,rr===t&&t!==null&&(rr=t=t.return);continue}break}while(!0)}function cR(){var r=zm.current;return zm.current=Hm,r===null?Hm:r}function Dw(){(dr===0||dr===3||dr===2)&&(dr=4),Sr===null||!(yl&268435455)&&!(Yg&268435455)||ea(Sr,Or)}function Gm(r,e){var t=nt;nt|=2;var n=cR();(Sr!==r||Or!==e)&&(Gs=null,al(r,e));do try{$X();break}catch(i){uR(r,i)}while(!0);if(_w(),nt=t,zm.current=n,rr!==null)throw Error(le(261));return Sr=null,Or=0,dr}function $X(){for(;rr!==null;)hR(rr)}function YX(){for(;rr!==null&&!g7();)hR(rr)}function hR(r){var e=pR(r.alternate,r,Mn);r.memoizedProps=r.pendingProps,e===null?dR(r):rr=e,Ow.current=null}function dR(r){var e=r;do{var t=e.alternate;if(r=e.return,e.flags&32768){if(t=DX(t,e),t!==null){t.flags&=32767,rr=t;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{dr=6,rr=null;return}}else if(t=FX(t,e,Mn),t!==null){rr=t;return}if(e=e.sibling,e!==null){rr=e;return}rr=e=r}while(e!==null);dr===0&&(dr=5)}function Qa(r,e,t){var n=ft,i=ai.transition;try{ai.transition=null,ft=1,GX(r,e,t,n)}finally{ai.transition=i,ft=n}return null}function GX(r,e,t,n){do $u();while(oa!==null);if(nt&6)throw Error(le(327));t=r.finishedWork;var i=r.finishedLanes;if(t===null)return null;if(r.finishedWork=null,r.finishedLanes=0,t===r.current)throw Error(le(177));r.callbackNode=null,r.callbackPriority=0;var s=t.lanes|t.childLanes;if(P7(r,s),r===Sr&&(rr=Sr=null,Or=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||dp||(dp=!0,mR(Cm,function(){return $u(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ai.transition,ai.transition=null;var o=ft;ft=1;var a=nt;nt|=4,Ow.current=null,jX(r,t),oR(t,r),dX(kx),km=!!Ax,kx=Ax=null,r.current=t,XX(t),v7(),nt=a,ft=o,ai.transition=s}else r.current=t;if(dp&&(dp=!1,oa=r,Ym=i),s=r.pendingLanes,s===0&&(ga=null),_7(t.stateNode),xn(r,qt()),e!==null)for(n=r.onRecoverableError,t=0;t<e.length;t++)i=e[t],n(i.value,{componentStack:i.stack,digest:i.digest});if($m)throw $m=!1,r=qx,qx=null,r;return Ym&1&&r.tag!==0&&$u(),s=r.pendingLanes,s&1?r===Kx?Rh++:(Rh=0,Kx=r):Rh=0,Ia(),null}function $u(){if(oa!==null){var r=GI(Ym),e=ai.transition,t=ft;try{if(ai.transition=null,ft=16>r?16:r,oa===null)var n=!1;else{if(r=oa,oa=null,Ym=0,nt&6)throw Error(le(331));var i=nt;for(nt|=4,Se=r.current;Se!==null;){var s=Se,o=s.child;if(Se.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Se=l;Se!==null;){var h=Se;switch(h.tag){case 0:case 11:case 15:Ih(8,h,s)}var c=h.child;if(c!==null)c.return=h,Se=c;else for(;Se!==null;){h=Se;var d=h.sibling,p=h.return;if(nR(h),h===l){Se=null;break}if(d!==null){d.return=p,Se=d;break}Se=p}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Se=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Se=o;else e:for(;Se!==null;){if(s=Se,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ih(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Se=y;break e}Se=s.return}}var w=r.current;for(Se=w;Se!==null;){o=Se;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Se=_;else e:for(o=w;Se!==null;){if(a=Se,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$g(9,a)}}catch(I){zt(a,a.return,I)}if(a===o){Se=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Se=S;break e}Se=a.return}}if(nt=i,Ia(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Lg,r)}catch{}n=!0}return n}finally{ft=t,ai.transition=e}}return!1}function cP(r,e,t){e=ac(t,e),e=GM(r,e,1),r=ma(r,e,1),e=tn(),r!==null&&(bd(r,1,e),xn(r,e))}function zt(r,e,t){if(r.tag===3)cP(r,r,t);else for(;e!==null;){if(e.tag===3){cP(e,r,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ga===null||!ga.has(n))){r=ac(t,r),r=WM(e,r,1),e=ma(e,r,1),r=tn(),e!==null&&(bd(e,1,r),xn(e,r));break}}e=e.return}}function WX(r,e,t){var n=r.pingCache;n!==null&&n.delete(e),e=tn(),r.pingedLanes|=r.suspendedLanes&t,Sr===r&&(Or&t)===t&&(dr===4||dr===3&&(Or&130023424)===Or&&500>qt()-Bw?al(r,0):Nw|=t),xn(r,e)}function fR(r,e){e===0&&(r.mode&1?(e=rp,rp<<=1,!(rp&130023424)&&(rp=4194304)):e=1);var t=tn();r=_o(r,e),r!==null&&(bd(r,e,t),xn(r,t))}function VX(r){var e=r.memoizedState,t=0;e!==null&&(t=e.retryLane),fR(r,t)}function qX(r,e){var t=0;switch(r.tag){case 13:var n=r.stateNode,i=r.memoizedState;i!==null&&(t=i.retryLane);break;case 19:n=r.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(e),fR(r,t)}var pR;pR=function(r,e,t){if(r!==null)if(r.memoizedProps!==e.pendingProps||vn.current)mn=!0;else{if(!(r.lanes&t)&&!(e.flags&128))return mn=!1,LX(r,e,t);mn=!!(r.flags&131072)}else mn=!1,It&&e.flags&1048576&&yM(e,Lm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Kp(r,e),r=e.pendingProps;var i=nc(e,Kr.current);zu(e,t),i=Aw(null,e,n,r,i,t);var s=kw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(n)?(s=!0,Nm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Sw(e),i.updater=zg,e.stateNode=i,i._reactInternals=e,Dx(e,n,r,t),e=Xx(null,e,n,!0,s,t)):(e.tag=0,It&&s&&gw(e),Jr(null,e,i,t),e=e.child),e;case 16:n=e.elementType;e:{switch(Kp(r,e),r=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=QX(n),r=Si(n,r),i){case 0:e=jx(null,e,n,r,t);break e;case 1:e=eP(null,e,n,r,t);break e;case 11:e=Z2(null,e,n,r,t);break e;case 14:e=J2(null,e,n,Si(n.type,r),t);break e}throw Error(le(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Si(n,i),jx(r,e,n,i,t);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Si(n,i),eP(r,e,n,i,t);case 3:e:{if(QM(e),r===null)throw Error(le(387));n=e.pendingProps,s=e.memoizedState,i=s.element,TM(r,e),Um(e,n,null,t);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ac(Error(le(423)),e),e=tP(r,e,n,t,i);break e}else if(n!==i){i=ac(Error(le(424)),e),e=tP(r,e,n,t,i);break e}else for(On=pa(e.stateNode.containerInfo.firstChild),Bn=e,It=!0,Ei=null,t=bM(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(ic(),n===i){e=wo(r,e,t);break e}Jr(r,e,n,t)}e=e.child}return e;case 5:return EM(e),r===null&&Bx(e),n=e.type,i=e.pendingProps,s=r!==null?r.memoizedProps:null,o=i.children,Ix(n,i)?o=null:s!==null&&Ix(n,s)&&(e.flags|=32),KM(r,e),Jr(r,e,o,t),e.child;case 6:return r===null&&Bx(e),null;case 13:return ZM(r,e,t);case 4:return Tw(e,e.stateNode.containerInfo),n=e.pendingProps,r===null?e.child=sc(e,null,n,t):Jr(r,e,n,t),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Si(n,i),Z2(r,e,n,i,t);case 7:return Jr(r,e,e.pendingProps,t),e.child;case 8:return Jr(r,e,e.pendingProps.children,t),e.child;case 12:return Jr(r,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,xt(Fm,n._currentValue),n._currentValue=o,s!==null)if(Ui(s.value,o)){if(s.children===i.children&&!vn.current){e=wo(r,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===n){if(s.tag===1){u=ho(-1,t&-t),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var h=l.pending;h===null?u.next=u:(u.next=h.next,h.next=u),l.pending=u}}s.lanes|=t,u=s.alternate,u!==null&&(u.lanes|=t),Lx(s.return,t,e),a.lanes|=t;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(le(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),Lx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jr(r,e,i.children,t),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,zu(e,t),i=ui(i),n=n(i),e.flags|=1,Jr(r,e,n,t),e.child;case 14:return n=e.type,i=Si(n,e.pendingProps),i=Si(n.type,i),J2(r,e,n,i,t);case 15:return VM(r,e,e.type,e.pendingProps,t);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Si(n,i),Kp(r,e),e.tag=1,yn(n)?(r=!0,Nm(e)):r=!1,zu(e,t),YM(e,n,i),Dx(e,n,i,t),Xx(null,e,n,!0,r,t);case 19:return JM(r,e,t);case 22:return qM(r,e,t)}throw Error(le(156,e.tag))};function mR(r,e){return HI(r,e)}function KX(r,e,t,n){this.tag=r,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function si(r,e,t,n){return new KX(r,e,t,n)}function Uw(r){return r=r.prototype,!(!r||!r.isReactComponent)}function QX(r){if(typeof r=="function")return Uw(r)?1:0;if(r!=null){if(r=r.$$typeof,r===iw)return 11;if(r===sw)return 14}return 2}function ya(r,e){var t=r.alternate;return t===null?(t=si(r.tag,e,r.key,r.mode),t.elementType=r.elementType,t.type=r.type,t.stateNode=r.stateNode,t.alternate=r,r.alternate=t):(t.pendingProps=e,t.type=r.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=r.flags&14680064,t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,e=r.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=r.sibling,t.index=r.index,t.ref=r.ref,t}function Jp(r,e,t,n,i,s){var o=2;if(n=r,typeof r=="function")Uw(r)&&(o=1);else if(typeof r=="string")o=5;else e:switch(r){case cu:return ll(t.children,i,s,e);case nw:o=8,i|=8;break;case lx:return r=si(12,t,e,i|2),r.elementType=lx,r.lanes=s,r;case ux:return r=si(13,t,e,i),r.elementType=ux,r.lanes=s,r;case cx:return r=si(19,t,e,i),r.elementType=cx,r.lanes=s,r;case EI:return Gg(t,i,s,e);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case SI:o=10;break e;case TI:o=9;break e;case iw:o=11;break e;case sw:o=14;break e;case Vo:o=16,n=null;break e}throw Error(le(130,r==null?r:typeof r,""))}return e=si(o,t,e,i),e.elementType=r,e.type=n,e.lanes=s,e}function ll(r,e,t,n){return r=si(7,r,n,e),r.lanes=t,r}function Gg(r,e,t,n){return r=si(22,r,n,e),r.elementType=EI,r.lanes=t,r.stateNode={isHidden:!1},r}function Ry(r,e,t){return r=si(6,r,null,e),r.lanes=t,r}function Oy(r,e,t){return e=si(4,r.children!==null?r.children:[],r.key,e),e.lanes=t,e.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},e}function ZX(r,e,t,n,i){this.tag=e,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fy(0),this.expirationTimes=fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fy(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jw(r,e,t,n,i,s,o,a,u){return r=new ZX(r,e,t,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=si(3,null,null,e),r.current=s,s.stateNode=r,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sw(s),r}function JX(r,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uu,key:n==null?null:""+n,children:r,containerInfo:e,implementation:t}}function gR(r){if(!r)return Sa;r=r._reactInternals;e:{if(El(r)!==r||r.tag!==1)throw Error(le(170));var e=r;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(r.tag===1){var t=r.type;if(yn(t))return gM(r,t,e)}return e}function vR(r,e,t,n,i,s,o,a,u){return r=jw(t,n,!0,r,i,s,o,a,u),r.context=gR(null),t=r.current,n=tn(),i=va(t),s=ho(n,i),s.callback=e??null,ma(t,s,i),r.current.lanes=i,bd(r,i,n),xn(r,n),r}function Wg(r,e,t,n){var i=e.current,s=tn(),o=va(i);return t=gR(t),e.context===null?e.context=t:e.pendingContext=t,e=ho(s,o),e.payload={element:r},n=n===void 0?null:n,n!==null&&(e.callback=n),r=ma(i,e,o),r!==null&&(Fi(r,i,o,s),Wp(r,i,o)),o}function Wm(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function hP(r,e){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var t=r.retryLane;r.retryLane=t!==0&&t<e?t:e}}function Xw(r,e){hP(r,e),(r=r.alternate)&&hP(r,e)}function eH(){return null}var yR=typeof reportError=="function"?reportError:function(r){console.error(r)};function Hw(r){this._internalRoot=r}Vg.prototype.render=Hw.prototype.render=function(r){var e=this._internalRoot;if(e===null)throw Error(le(409));Wg(r,e,null,null)};Vg.prototype.unmount=Hw.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var e=r.containerInfo;xl(function(){Wg(null,r,null,null)}),e[xo]=null}};function Vg(r){this._internalRoot=r}Vg.prototype.unstable_scheduleHydration=function(r){if(r){var e=qI();r={blockedOn:null,target:r,priority:e};for(var t=0;t<Jo.length&&e!==0&&e<Jo[t].priority;t++);Jo.splice(t,0,r),t===0&&QI(r)}};function zw(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function qg(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function dP(){}function tH(r,e,t,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var l=Wm(o);s.call(l)}}var o=vR(e,n,r,0,null,!1,!1,"",dP);return r._reactRootContainer=o,r[xo]=o.current,Jh(r.nodeType===8?r.parentNode:r),xl(),o}for(;i=r.lastChild;)r.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var l=Wm(u);a.call(l)}}var u=jw(r,0,!1,null,null,!1,!1,"",dP);return r._reactRootContainer=u,r[xo]=u.current,Jh(r.nodeType===8?r.parentNode:r),xl(function(){Wg(e,u,t,n)}),u}function Kg(r,e,t,n,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=Wm(o);a.call(u)}}Wg(e,o,r,i)}else o=tH(t,e,r,i,n);return Wm(o)}WI=function(r){switch(r.tag){case 3:var e=r.stateNode;if(e.current.memoizedState.isDehydrated){var t=gh(e.pendingLanes);t!==0&&(lw(e,t|1),xn(e,qt()),!(nt&6)&&(lc=qt()+500,Ia()))}break;case 13:xl(function(){var n=_o(r,1);if(n!==null){var i=tn();Fi(n,r,1,i)}}),Xw(r,1)}};uw=function(r){if(r.tag===13){var e=_o(r,134217728);if(e!==null){var t=tn();Fi(e,r,134217728,t)}Xw(r,134217728)}};VI=function(r){if(r.tag===13){var e=va(r),t=_o(r,e);if(t!==null){var n=tn();Fi(t,r,e,n)}Xw(r,e)}};qI=function(){return ft};KI=function(r,e){var t=ft;try{return ft=r,e()}finally{ft=t}};_x=function(r,e,t){switch(e){case"input":if(fx(r,t),e=t.name,t.type==="radio"&&e!=null){for(t=r;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==r&&n.form===r.form){var i=jg(n);if(!i)throw Error(le(90));CI(n),fx(n,i)}}}break;case"textarea":kI(r,t);break;case"select":e=t.value,e!=null&&Uu(r,!!t.multiple,e,!1)}};LI=Lw;FI=xl;var rH={usingClientEntryPoint:!1,Events:[Td,pu,jg,NI,BI,Lw]},sh={findFiberByHostInstance:tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nH={bundleType:sh.bundleType,version:sh.version,rendererPackageName:sh.rendererPackageName,rendererConfig:sh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=jI(r),r===null?null:r.stateNode},findFiberByHostInstance:sh.findFiberByHostInstance||eH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fp.isDisabled&&fp.supportsFiber)try{Lg=fp.inject(nH),Ts=fp}catch{}}Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rH;Xn.createPortal=function(r,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zw(e))throw Error(le(200));return JX(r,e,null,t)};Xn.createRoot=function(r,e){if(!zw(r))throw Error(le(299));var t=!1,n="",i=yR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=jw(r,1,!1,null,null,t,!1,n,i),r[xo]=e.current,Jh(r.nodeType===8?r.parentNode:r),new Hw(e)};Xn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var e=r._reactInternals;if(e===void 0)throw typeof r.render=="function"?Error(le(188)):(r=Object.keys(r).join(","),Error(le(268,r)));return r=jI(e),r=r===null?null:r.stateNode,r};Xn.flushSync=function(r){return xl(r)};Xn.hydrate=function(r,e,t){if(!qg(e))throw Error(le(200));return Kg(null,r,e,!0,t)};Xn.hydrateRoot=function(r,e,t){if(!zw(r))throw Error(le(405));var n=t!=null&&t.hydratedSources||null,i=!1,s="",o=yR;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=vR(e,null,r,1,t??null,i,!1,s,o),r[xo]=e.current,Jh(r),n)for(r=0;r<n.length;r++)t=n[r],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Vg(e)};Xn.render=function(r,e,t){if(!qg(e))throw Error(le(200));return Kg(null,r,e,!1,t)};Xn.unmountComponentAtNode=function(r){if(!qg(r))throw Error(le(40));return r._reactRootContainer?(xl(function(){Kg(null,null,r,!1,function(){r._reactRootContainer=null,r[xo]=null})}),!0):!1};Xn.unstable_batchedUpdates=Lw;Xn.unstable_renderSubtreeIntoContainer=function(r,e,t,n){if(!qg(t))throw Error(le(200));if(r==null||r._reactInternals===void 0)throw Error(le(38));return Kg(r,e,t,!1,n)};Xn.version="18.3.1-next-f1338f8080-20240426";function xR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xR)}catch(r){console.error(r)}}xR(),xI.exports=Xn;var iH=xI.exports,$w,fP=iH;$w=fP.createRoot,fP.hydrateRoot;function _R(...r){const e={};for(const t of r)for(const n of t)e[n.id]=n;return Object.values(e)}const bn="message",wR="lang_components";function sH(r){return[{id:bn,src:`text/${r}.json`},{id:wR,src:`compress/lang/${r}@2x.[avif,webp,png].json`}]}function oH(r,...e){return _R(sH(r),...e)}const bR="sounds",SR="components",TR="uncomponents",em="preload_component";function aH(r){return[{id:bR,src:"sound/sounds.json"},{id:SR,src:"compress/components-_default@2x.[avif,webp,png].json"}]}function lH(r,...e){return _R(aH(),...e)}function uH(r,e){return`./assets/${r}${e?`?v=${e}`:""}`}function cH(r,e){const t=r.match(/\[(.+)\]/);if(t){const n=t[1].split(",");r=r.replace(t[0],Be.Obj.filterImageFormat(n))}return uH(r,e)}function ER(r,e,t){const n=[];function i(s,o,a={}){pn.add({src:cH(o,e),alias:s,...a})}for(const s of r)switch(n.push(s.id),s.type){default:i(s.id,s.src,s.options)}return pn.load(n,t)}function hH(r){return pn.get(r)}function dH(r,e){const t=pn.get(r);let n=t.textures[e];if(!n){for(const i of t.linkedSheets)if(n=i.textures[e],n)break}return n}function fH(r){return pn.get(r)}function Un(r,e){return(pn.get(r)||{})[e]||e}function pH(r){const[e,t]=B.useState("");return B.useEffect(()=>{if(!e){const n=setInterval(()=>{const i="disablel",s=Un(bn,i);s&&i!=s&&(t(s),clearInterval(n))},1e3)}},[e]),T.jsx("div",{id:"screen-only-tips-p",className:"screen-only-tips-mod p",children:T.jsx("div",{className:"tips",children:e})})}function mH(r){const[e,t]=B.useState("");return B.useEffect(()=>{if(!e){const n=setInterval(()=>{const i="disablep",s=Un(bn,i);s&&i!=s&&(t(s),clearInterval(n))},1e3)}},[e]),T.jsx("div",{id:"screen-only-tips-l",className:"screen-only-tips-mod p",children:T.jsx("div",{className:"tips",children:e})})}function gH(){return T.jsxs(T.Fragment,{children:[T.jsx(mH,{}),T.jsx(pH,{})]})}function vH({children:r}){return T.jsx("div",{id:"App",className:"app-mod",children:r})}function yH(){if(vA())return Promise.resolve();{const r={cs:`游戏加载失败。
您的浏览器不支持或已禁用WebGL。
请关闭浏览器限制并重新加载游戏。`,kh:`ដំនើការចូលក្នុងហ្គេមត្រូវបរាជ័យ។
កម្មវិធីអ៊ីនធឺណេតរបស់អ្នកមិនទ្រទ្រង់លើការប្រើប្រាស់ ឬបានបិត WebGL។
សូមចូលទៅកាន់ហ្គេមម្តងទៀតដោយបើក WebGL។`,id:`Loadin game gagal.
Browser Anda tidak mendukung atau telah menonaktifkan WebGL. 
Load ulang game di browser dengan WebGL diaktifkan.`,kr:`게임 로딩에 실패했습니다.
브라우저가 WebGL을 지원하지 않거나 비활성화했습니다.
WebGL이 활성화된 브라우저에서 게임을 새로고침하세요.`,th:`โหลดเกมไม่สำเร็จ
เบราว์เซอร์ของคุณไม่รองรับ WebGLหรือถูกปิดใช้งาน,
โปรดเปิดใช้งานบนเบราว์เซอร์ของคุณ และโหลดเกมใหม่`,vn:`Tải trò chơi không thành công.
Trình duyệt của bạn không hỗ trợ hoặc đã tắt WebGL. 
Vui lòng tải lại trò chơi trong trình duyệt có bật WebGL.`,tr:"Oyun yükleme başarısız oldu Tarayıcınız WebGL'yi desteklemiyor veya devre dışı bırakmış.Lütfen oyunu WebGL'nin etkin olduğu tarayıcılarda yeniden yükleyin.",pt:"O carregamento do jogo falhou. Seu navegador não suporta ou desabilitou o WebGL. Por favor, recarregue o jogo em navegadores com o WebGL ativado."}[Be.Obj.urlOptions.lang]??`Game loading failed. 
Your browser does not support or has disabled the WebGL. 
Please reload game in browsers with WebGL enabled.`;return $w(document.body).render(T.jsx("div",{className:"webgl-not-support",children:T.jsx("div",{className:"text",children:r})})),Promise.reject("webgl not support")}}function xH(r=[]){return new Promise((e,t)=>{if(r.length===0)e();else{const n=[];for(const i of r){const s=new Jj(i);n.push(s.load(null,3e5))}Promise.all(n).then(()=>{e()})}})}function _H(){return Promise.all([yk.test(),xk.test()]).then(([r,e])=>{Be.Obj.setSupportImagesFormat(e,r);const t=document.getElementById("blur-bg");t.className=t.className+" "+Be.Obj.filterImageFormat(["avif","webp","jpg"])})}function wH(r,e=[]){const t=Be.Obj,{operator:n,token:i,loginUrl:s,funPLay:o}=t.urlOptions;n?!o&&!i&&s?window.open(t.getLoginUrl(),"_self"):yH().then(xH.bind(null,e)).then(_H).then(()=>{$w(document.getElementById("root")).render(T.jsxs(T.Fragment,{children:[T.jsx(vH,{children:r}),T.jsx(gH,{})]}))}).catch(a=>{console.error(a)}):alert("The operator parameter is missing!")}function PR(r,e){function t(n){if(n&&n.props){const i={},s=n.props;for(const o in s)o.startsWith(e)&&(i[o.slice(2)]=s[o]);return n.props.children&&(i.children=PR(n.props.children,e)),B.cloneElement(n,i)}return n}return Array.isArray(r)?B.Children.map(r,n=>t(n)):t(r)}var Qg={exports:{}},CR={exports:{}},bH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SH=bH,TH=SH;function AR(){}function kR(){}kR.resetWarningCache=AR;var EH=function(){function r(n,i,s,o,a,u){if(u!==TH){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:kR,resetWarningCache:AR};return t.PropTypes=t,t};CR.exports=EH();var PH=CR.exports;const Tt=dd(PH);function Ln(r){return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(r)}function IR(r){var e=function(t,n){if(Ln(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var s=i.call(t,n||"default");if(Ln(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}(r,"string");return Ln(e)==="symbol"?e:String(e)}function Vt(r,e,t){return(e=IR(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ny(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function bo(r){return function(e){if(Array.isArray(e))return Ny(e)}(r)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(r)||function(e,t){if(e){if(typeof e=="string")return Ny(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ny(e,t):void 0}}(r)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Yt(r,e){for(var t=arguments.length,n=new Array(t>2?t-2:0),i=2;i<t;i++)n[i-2]=arguments[i]}var CH=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function AH(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var kH=function(r){return r==null};function yh(r){var e=[];if(r===void 0)return e;if(typeof r=="string")e=r.split(",");else if(typeof r=="number")e=[r];else if(Array.isArray(r))e=bo(r);else{if(r===null||Ln(r)!=="object")return e;e=[r&&(r==null?void 0:r.x)||0,r&&(r==null?void 0:r.y)||0]}return e.filter(function(t){return!kH(t)&&!isNaN(t)}).map(Number)}function pP(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function By(r){return r instanceof je||r instanceof Ii}var Vm=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function Ly(r,e,t){if(By(r[e])&&By(t))r[e].copyFrom(t);else if(By(r[e])){var n=yh(t);Yt(n!==void 0&&n.length>0&&n.length<3,"The property `%s` is a `Point` and must be set to a comma-separated string of either coordinates, an array containing coordinates, or a Point.",e,JSON.stringify(t),Ln(t)),r[e].set(n.shift(),n.shift())}else r[e]=t}var ql,MR=function(r){var e,t=r;if(!Array.isArray(t)){if(e=r,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");t=Object.keys(r)}var n={};return t.forEach(function(i){n[i]=!0}),function(i){return n[i]!==void 0}},RR=function(r){return function(){return!r.apply(void 0,arguments)}},Jx="children",IH=(Vt(ql={},Jx,!0),Vt(ql,"parent",!0),Vt(ql,"worldAlpha",!0),Vt(ql,"worldTransform",!0),Vt(ql,"worldVisible",!0),ql),e_={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Ms=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=function(a){return requestAnimationFrame(function(){var u,l;a==null||(u=a.__reactpixi)===null||u===void 0||(l=u.root)===null||l===void 0||l.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,u){if(t.hasOwnProperty(a))return Yt(u.typeofs.some(function(l){return Ln(t[a])===l})||u.instanceofs.some(function(l){return t[a]instanceof l}),"".concat(r," ").concat(a," prop is invalid")),t[a]};if(t.texture)return Yt(t.texture instanceof Me,"".concat(r," texture needs to be typeof `Texture`")),t.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,Me]});Yt(!!s,"".concat(r," could not get texture from props"));var o=Me.from(s);return o.__reactpixi={root:e},o.once("update",n),o.once("loaded",n),o.valid&&n(o),o},MH=RR(MR([].concat(bo(Object.keys(IH)),bo(Vm))));function Rs(r,e,t){var n=!1;if(Yt(Mt.prototype.isPrototypeOf(r),"instance needs to be typeof `DisplayObject`, got `%s`",Ln(r)),!t.ignoreEvents)for(var i=typeof r.removeListener=="function",s=typeof r.on=="function",o=0;o<Vm.length;o++){var a=Vm[o];e[a]!==t[a]&&(n=!0,typeof e[a]=="function"&&i&&r.removeListener(a,e[a]),typeof t[a]=="function"&&s&&r.on(a,t[a]))}var u=Object.keys(t||{});if(t.overwriteProps){for(var l=0;l<u.length;l++){var h=u[l];e[h]!==t[h]&&(n=!0,Ly(r,h,t[h]))}return n}for(var c=u.filter(MH),d=0;d<c.length;d++){var p=c[d],g=t[p];t[p]!==e[p]&&(n=!0),g!==void 0?Ly(r,p,g):p in e_?(console.warn("setting default value: ".concat(p,", from: ").concat(r[p]," to: ").concat(g," for"),r),n=!0,Ly(r,p,e_[p])):console.warn("ignoring prop: ".concat(p,", from ").concat(r[p]," to ").concat(g," for"),r)}return n}var RH=function(r,e){var t=e.text,n=e.style;return new mj(t,n)},OH=function(){return new qr};function Ma(r,e){if(r==null)return{};var t,n,i=function(o,a){if(o==null)return{};var u,l,h={},c=Object.keys(o);for(l=0;l<c.length;l++)u=c[l],a.indexOf(u)>=0||(h[u]=o[u]);return h}(r,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(r,t)&&(i[t]=r[t])}return i}var NH=["draw","geometry"],BH=function(r,e){var t=e.geometry;Yt(!t||t instanceof Fu,"Graphics geometry needs to be a `Graphics`");var n=t?new Fu(t.geometry):new Fu;return n.applyProps=function(i,s,o){var a=o.draw;o.geometry;var u=Rs(i,s,Ma(o,NH));return s.draw!==a&&typeof a=="function"&&(u=!0,a.call(n,n)),u},n},LH=["image","texture"],FH=function(r,e){var t=e.leftWidth,n=t===void 0?10:t,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,u=e.bottomHeight,l=u===void 0?10:u,h=Ms("NineSlicePlane",r,e),c=new DU(h,n,s,a,l);return c.applyProps=function(d,p,g){var v=g.image,x=g.texture,y=Rs(d,p,Ma(g,LH));return(v||x)&&(x!==p.texture&&(y=!0),d.texture=Ms("NineSlicePlane",r,g)),y},c};function mP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function pp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?mP(Object(t),!0).forEach(function(n){Vt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):mP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var DH=function(r,e){var t=e.maxSize,n=t===void 0?1500:t,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,u=pp(pp({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),l=pp(pp({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),h=new XU(n,u,s,a);return h.willUnmount=function(c,d,p){c.destroy(l)},h},UH=["image","texture"],jH=function(r,e){var t=new Yi(Ms("Sprite",r,e));return t.applyProps=function(n,i,s){var o=s.image,a=s.texture,u=Rs(n,i,Ma(s,UH));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(u=!0),n.texture=Ms("Sprite",r,s)),u},t},XH=["textures","isPlaying","initialFrame","images"],HH=function(r,e){var t=e.textures,n=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(l){return l.map(function(h){return Yt(h instanceof Me||(h==null?void 0:h.texture),"AnimationSprite texture needs to be an array of `Texture` or `{ texture: Texture, time:\n                number }`"),h})},u=n?$h.fromImages(n):new $h(a(t));return u[s?"gotoAndPlay":"gotoAndStop"](o||0),u.applyProps=function(l,h,c){var d=c.textures,p=c.isPlaying,g=c.initialFrame,v=c.images,x=Rs(l,h,Ma(c,XH));if(v&&h.images!==v){for(var y=[],w=0;w<v.length;++w)y.push(Me.from(v[w]));l.textures=y,x=!0}if(d&&h.textures!==d&&(l.textures=a(d),x=!0),p!==h.isPlaying||g!==h.initialFrame){var _=typeof g=="number"?g:u.currentFrame||0;u[p?"gotoAndPlay":"gotoAndStop"](_),x=!0}return x},u},zH=function(r,e){var t=e.text,n=t===void 0?"":t,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new K_(n,s);return o?(a.updateText(),new Yi(a.texture)):a},$H=["tileScale","tilePosition","image","texture"],YH=function(r,e){var t=e.width,n=t===void 0?100:t,i=e.height,s=i===void 0?100:i,o=Ms("TilingSprite",r,e),a=new Q_(o,n,s);return a.applyProps=function(u,l,h){var c=h.tileScale,d=h.tilePosition,p=h.image,g=h.texture,v=Rs(u,l,Ma(h,$H));if(d){var x,y=yh(d);(x=u.tilePosition).set.apply(x,bo(y)),v=!pP(yh(l.tilePosition),y)||v}if(c){var w,_=yh(c);(w=u.tileScale).set.apply(w,bo(_)),v=!pP(yh(l.tileScale),_)||v}return(p||g)&&(g!==l.texture&&(v=!0),u.texture=Ms("Sprite",r,h)),v},a},GH=["image","texture"],WH=function(r,e){var t=Ms("Mesh",r,e),n=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?Ai.TRIANGLES:o,u=new UU(t,n,i,s,a);return u.applyProps=function(l,h,c){var d=c.image,p=c.texture,g=Rs(l,h,Ma(c,GH));return(d||p)&&(p!==h.texture&&(g=!0),l.texture=Ms("Mesh",r,c)),g},u},VH=["image","texture"],qH=function(r,e){var t=Ms("SimpleRope",r,e),n=e.points,i=new jU(t,n);return i.applyProps=function(s,o,a){var u=a.image,l=a.texture,h=Ma(a,VH);Yt(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<Point>");var c=Rs(s,o,h);return(u||l)&&(l!==o.texture&&(c=!0),s.texture=Ms("SimpleRope",r,a)),c},i},KH=Object.freeze({__proto__:null,BitmapText:RH,Container:OH,Graphics:BH,NineSlicePlane:FH,ParticleContainer:DH,Sprite:jH,Text:zH,TilingSprite:YH,SimpleMesh:WH,SimpleRope:qH,AnimatedSprite:HH});function gP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vP(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gP(Object(t),!0).forEach(function(n){Vt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):gP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Sn={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},QH=Object.keys(Sn).reduce(function(r,e){return vP(vP({},r),{},Vt({},e,KH[e]))},{}),OR={};function ZH(r,e){return Yt(!!r,"Expect type to be defined, got `%s`",r),Yt(!Sn[r],"Component `%s` could not be created, already exists in default components.",r),OR[r]=e,r}var yP,xP,_P,wP,t_={},r_={},JH={get exports(){return r_},set exports(r){r_=r}},bP={};function ez(){return xP||(xP=1,JH.exports=(yP||(yP=1,function(r){function e(X,W){var z=X.length;X.push(W);e:for(;0<z;){var V=z-1>>>1,Z=X[V];if(!(0<i(Z,W)))break e;X[V]=W,X[z]=Z,z=V}}function t(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var W=X[0],z=X.pop();if(z!==W){X[0]=z;e:for(var V=0,Z=X.length,re=Z>>>1;V<re;){var ce=2*(V+1)-1,xe=X[ce],Re=ce+1,Le=X[Re];if(0>i(xe,z))Re<Z&&0>i(Le,xe)?(X[V]=Le,X[Re]=z,V=Re):(X[V]=xe,X[ce]=z,V=ce);else{if(!(Re<Z&&0>i(Le,z)))break e;X[V]=Le,X[Re]=z,V=Re}}}return W}function i(X,W){var z=X.sortIndex-W.sortIndex;return z!==0?z:X.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;r.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();r.unstable_now=function(){return o.now()-a}}var u=[],l=[],h=1,c=null,d=3,p=!1,g=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function _(X){for(var W=t(l);W!==null;){if(W.callback===null)n(l);else{if(!(W.startTime<=X))break;n(l),W.sortIndex=W.expirationTime,e(u,W)}W=t(l)}}function S(X){if(v=!1,_(X),!g)if(t(u)!==null)g=!0,Y(I);else{var W=t(l);W!==null&&K(S,W.startTime-X)}}function I(X,W){g=!1,v&&(v=!1,y(O),O=-1),p=!0;var z=d;try{for(_(W),c=t(u);c!==null&&(!(c.expirationTime>W)||X&&!H());){var V=c.callback;if(typeof V=="function"){c.callback=null,d=c.priorityLevel;var Z=V(c.expirationTime<=W);W=r.unstable_now(),typeof Z=="function"?c.callback=Z:c===t(u)&&n(u),_(W)}else n(u);c=t(u)}if(c!==null)var re=!0;else{var ce=t(l);ce!==null&&K(S,ce.startTime-W),re=!1}return re}finally{c=null,d=z,p=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var A,k=!1,M=null,O=-1,F=5,U=-1;function H(){return!(r.unstable_now()-U<F)}function L(){if(M!==null){var X=r.unstable_now();U=X;var W=!0;try{W=M(!0,X)}finally{W?A():(k=!1,M=null)}}else k=!1}if(typeof w=="function")A=function(){w(L)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,j=N.port2;N.port1.onmessage=L,A=function(){j.postMessage(null)}}else A=function(){x(L,0)};function Y(X){M=X,k||(k=!0,A())}function K(X,W){O=x(function(){X(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_continueExecution=function(){g||p||(g=!0,Y(I))},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return d},r.unstable_getFirstCallbackNode=function(){return t(u)},r.unstable_next=function(X){switch(d){case 1:case 2:case 3:var W=3;break;default:W=d}var z=d;d=W;try{return X()}finally{d=z}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(X,W){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var z=d;d=X;try{return W()}finally{d=z}},r.unstable_scheduleCallback=function(X,W,z){var V=r.unstable_now();switch(z=typeof z=="object"&&z!==null&&typeof(z=z.delay)=="number"&&0<z?V+z:V,X){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return X={id:h++,callback:W,priorityLevel:X,startTime:z,expirationTime:Z=z+Z,sortIndex:-1},z>V?(X.sortIndex=z,e(l,X),t(u)===null&&X===t(l)&&(v?(y(O),O=-1):v=!0,K(S,z-V))):(X.sortIndex=Z,e(u,X),g||p||(g=!0,Y(I))),X},r.unstable_shouldYield=H,r.unstable_wrapCallback=function(X){var W=d;return function(){var z=d;d=W;try{return X.apply(this,arguments)}finally{d=z}}}}(bP)),bP)),r_}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function tz(){return wP||(wP=1,_P=function(r){var e={},t=lo,n=ez(),i=Object.assign;function s(f){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),u=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),p=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),S=Symbol.iterator;function I(f){return f===null||typeof f!="object"?null:typeof(f=S&&f[S]||f["@@iterator"])=="function"?f:null}function A(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case l:return"Fragment";case u:return"Portal";case c:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case x:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case p:return(f.displayName||"Context")+".Consumer";case d:return(f._context.displayName||"Context")+".Provider";case g:var m=f.render;return(f=f.displayName)||(f=(f=m.displayName||m.name||"")!==""?"ForwardRef("+f+")":"ForwardRef"),f;case y:return(m=f.displayName||null)!==null?m:A(f.type)||"Memo";case w:m=f._payload,f=f._init;try{return A(f(m))}catch{}}return null}function k(f){var m=f.type;switch(f.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=(f=m.render).displayName||f.name||"",m.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return A(m);case 8:return m===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function M(f){var m=f,b=f;if(f.alternate)for(;m.return;)m=m.return;else{f=m;do 4098&(m=f).flags&&(b=m.return),f=m.return;while(f)}return m.tag===3?b:null}function O(f){if(M(f)!==f)throw Error(s(188))}function F(f){var m=f.alternate;if(!m){if((m=M(f))===null)throw Error(s(188));return m!==f?null:f}for(var b=f,E=m;;){var C=b.return;if(C===null)break;var R=C.alternate;if(R===null){if((E=C.return)!==null){b=E;continue}break}if(C.child===R.child){for(R=C.child;R;){if(R===b)return O(C),f;if(R===E)return O(C),m;R=R.sibling}throw Error(s(188))}if(b.return!==E.return)b=C,E=R;else{for(var D=!1,$=C.child;$;){if($===b){D=!0,b=C,E=R;break}if($===E){D=!0,E=C,b=R;break}$=$.sibling}if(!D){for($=R.child;$;){if($===b){D=!0,b=R,E=C;break}if($===E){D=!0,E=R,b=C;break}$=$.sibling}if(!D)throw Error(s(189))}}if(b.alternate!==E)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?f:m}function U(f){return(f=F(f))!==null?H(f):null}function H(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var m=H(f);if(m!==null)return m;f=f.sibling}return null}function L(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var m=L(f);if(m!==null)return m}f=f.sibling}return null}var N,j=Array.isArray,Y=r.getPublicInstance,K=r.getRootHostContext,X=r.getChildHostContext,W=r.prepareForCommit,z=r.resetAfterCommit,V=r.createInstance,Z=r.appendInitialChild,re=r.finalizeInitialChildren,ce=r.prepareUpdate,xe=r.shouldSetTextContent,Re=r.createTextInstance,Le=r.scheduleTimeout,ze=r.cancelTimeout,We=r.noTimeout,He=r.isPrimaryRenderer,Fe=r.supportsMutation,at=r.supportsPersistence,Ze=r.supportsHydration,Tr=r.getInstanceFromNode,Br=r.preparePortalMount,Wi=r.getCurrentEventPriority,Cl=r.detachDeletedInstance,hi=r.supportsMicrotasks,Ec=r.scheduleMicrotask,Co=r.supportsTestSelectors,Ao=r.findFiberRoot,Nd=r.getBoundingRect,Bd=r.getTextContent,zn=r.isHiddenSubtree,TO=r.matchAccessibilityRole,EO=r.setFocusIfFocusable,PO=r.setupIntersectionObserver,CO=r.appendChild,AO=r.appendChildToContainer,kO=r.commitTextUpdate,IO=r.commitMount,MO=r.commitUpdate,RO=r.insertBefore,OO=r.insertInContainerBefore,NO=r.removeChild,BO=r.removeChildFromContainer,Pb=r.resetTextContent,LO=r.hideInstance,FO=r.hideTextInstance,DO=r.unhideInstance,UO=r.unhideTextInstance,jO=r.clearContainer,XO=r.cloneInstance,Cb=r.createContainerChildSet,Ab=r.appendChildToContainerChildSet,HO=r.finalizeContainerChildren,a0=r.replaceContainerChildren,kb=r.cloneHiddenInstance,Ib=r.cloneHiddenTextInstance,zO=r.canHydrateInstance,$O=r.canHydrateTextInstance,YO=r.canHydrateSuspenseInstance,Mb=r.isSuspenseInstancePending,l0=r.isSuspenseInstanceFallback,GO=r.getSuspenseInstanceFallbackErrorDetails,WO=r.registerSuspenseInstanceRetry,Ld=r.getNextHydratableSibling,VO=r.getFirstHydratableChild,qO=r.getFirstHydratableChildWithinContainer,KO=r.getFirstHydratableChildWithinSuspenseInstance,QO=r.hydrateInstance,ZO=r.hydrateTextInstance,JO=r.hydrateSuspenseInstance,eN=r.getNextHydratableInstanceAfterSuspenseInstance,tN=r.commitHydratedContainer,rN=r.commitHydratedSuspenseInstance,nN=r.clearSuspenseBoundary,iN=r.clearSuspenseBoundaryFromContainer,sN=r.shouldDeleteUnhydratedTailInstances,oN=r.didNotMatchHydratedContainerTextInstance,aN=r.didNotMatchHydratedTextInstance;function Pc(f){if(N===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);N=m&&m[1]||""}return`
`+N+f}var u0=!1;function c0(f,m){if(!f||u0)return"";u0=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(ee){var E=ee}Reflect.construct(f,[],m)}else{try{m.call()}catch(ee){E=ee}f.call(m.prototype)}else{try{throw Error()}catch(ee){E=ee}f()}}catch(ee){if(ee&&E&&typeof ee.stack=="string"){for(var C=ee.stack.split(`
`),R=E.stack.split(`
`),D=C.length-1,$=R.length-1;1<=D&&0<=$&&C[D]!==R[$];)$--;for(;1<=D&&0<=$;D--,$--)if(C[D]!==R[$]){if(D!==1||$!==1)do if(D--,0>--$||C[D]!==R[$]){var Q=`
`+C[D].replace(" at new "," at ");return f.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",f.displayName)),Q}while(1<=D&&0<=$);break}}}finally{u0=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?Pc(f):""}var lN=Object.prototype.hasOwnProperty,h0=[],Al=-1;function ko(f){return{current:f}}function Ct(f){0>Al||(f.current=h0[Al],h0[Al]=null,Al--)}function gt(f,m){Al++,h0[Al]=f.current,f.current=m}var Io={},Lr=ko(Io),sn=ko(!1),Ra=Io;function kl(f,m){var b=f.type.contextTypes;if(!b)return Io;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===m)return E.__reactInternalMemoizedMaskedChildContext;var C,R={};for(C in b)R[C]=m[C];return E&&((f=f.stateNode).__reactInternalMemoizedUnmaskedChildContext=m,f.__reactInternalMemoizedMaskedChildContext=R),R}function Tn(f){return(f=f.childContextTypes)!=null}function d0(){Ct(sn),Ct(Lr)}function Rb(f,m,b){if(Lr.current!==Io)throw Error(s(168));gt(Lr,m),gt(sn,b)}function Ob(f,m,b){var E=f.stateNode;if(m=m.childContextTypes,typeof E.getChildContext!="function")return b;for(var C in E=E.getChildContext())if(!(C in m))throw Error(s(108,k(f)||"Unknown",C));return i({},b,E)}function Fd(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||Io,Ra=Lr.current,gt(Lr,f),gt(sn,sn.current),!0}function Nb(f,m,b){var E=f.stateNode;if(!E)throw Error(s(169));b?(f=Ob(f,m,Ra),E.__reactInternalMemoizedMergedChildContext=f,Ct(sn),Ct(Lr),gt(Lr,f)):Ct(sn),gt(sn,b)}var di=Math.clz32?Math.clz32:function(f){return(f>>>=0)===0?32:31-(uN(f)/cN|0)|0},uN=Math.log,cN=Math.LN2,f0=64,p0=4194304;function Cc(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&f;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&f;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function Dd(f,m){var b=f.pendingLanes;if(b===0)return 0;var E=0,C=f.suspendedLanes,R=f.pingedLanes,D=268435455&b;if(D!==0){var $=D&~C;$!==0?E=Cc($):(R&=D)!==0&&(E=Cc(R))}else(D=b&~C)!==0?E=Cc(D):R!==0&&(E=Cc(R));if(E===0)return 0;if(m!==0&&m!==E&&!(m&C)&&((C=E&-E)>=(R=m&-m)||C===16&&4194240&R))return m;if(4&E&&(E|=16&b),(m=f.entangledLanes)!==0)for(f=f.entanglements,m&=E;0<m;)C=1<<(b=31-di(m)),E|=f[b],m&=~C;return E}function hN(f,m){switch(f){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;default:return-1}}function m0(f){return(f=-1073741825&f.pendingLanes)!==0?f:1073741824&f?1073741824:0}function Bb(){var f=f0;return!(4194240&(f0<<=1))&&(f0=64),f}function g0(f){for(var m=[],b=0;31>b;b++)m.push(f);return m}function Ac(f,m,b){f.pendingLanes|=m,m!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),(f=f.eventTimes)[m=31-di(m)]=b}function v0(f,m){var b=f.entangledLanes|=m;for(f=f.entanglements;b;){var E=31-di(b),C=1<<E;C&m|f[E]&m&&(f[E]|=m),b&=~C}}var it=0;function Lb(f){return 1<(f&=-f)?4<f?268435455&f?16:536870912:4:1}var y0=n.unstable_scheduleCallback,Fb=n.unstable_cancelCallback,dN=n.unstable_shouldYield,fN=n.unstable_requestPaint,pr=n.unstable_now,x0=n.unstable_ImmediatePriority,pN=n.unstable_UserBlockingPriority,Db=n.unstable_NormalPriority,mN=n.unstable_IdlePriority,Ud=null,Vi=null,fi=typeof Object.is=="function"?Object.is:function(f,m){return f===m&&(f!==0||1/f==1/m)||f!=f&&m!=m},Ds=null,jd=!1,_0=!1;function Ub(f){Ds===null?Ds=[f]:Ds.push(f)}function qi(){if(!_0&&Ds!==null){_0=!0;var f=0,m=it;try{var b=Ds;for(it=1;f<b.length;f++){var E=b[f];do E=E(!0);while(E!==null)}Ds=null,jd=!1}catch(C){throw Ds!==null&&(Ds=Ds.slice(f+1)),y0(x0,qi),C}finally{it=m,_0=!1}}return null}var Il=[],Ml=0,Xd=null,Hd=0,$n=[],Yn=0,Oa=null,Ki=1,Us="";function Na(f,m){Il[Ml++]=Hd,Il[Ml++]=Xd,Xd=f,Hd=m}function jb(f,m,b){$n[Yn++]=Ki,$n[Yn++]=Us,$n[Yn++]=Oa,Oa=f;var E=Ki;f=Us;var C=32-di(E)-1;E&=~(1<<C),b+=1;var R=32-di(m)+C;if(30<R){var D=C-C%5;R=(E&(1<<D)-1).toString(32),E>>=D,C-=D,Ki=1<<32-di(m)+C|b<<C|E,Us=R+f}else Ki=1<<R|b<<C|E,Us=f}function w0(f){f.return!==null&&(Na(f,1),jb(f,1,0))}function b0(f){for(;f===Xd;)Xd=Il[--Ml],Il[Ml]=null,Hd=Il[--Ml],Il[Ml]=null;for(;f===Oa;)Oa=$n[--Yn],$n[Yn]=null,Us=$n[--Yn],$n[Yn]=null,Ki=$n[--Yn],$n[Yn]=null}var En=null,Gn=null,At=!1,kc=!1,pi=null;function Xb(f,m){var b=Qn(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=f,(m=f.deletions)===null?(f.deletions=[b],f.flags|=16):m.push(b)}function Hb(f,m){switch(f.tag){case 5:return(m=zO(m,f.type,f.pendingProps))!==null&&(f.stateNode=m,En=f,Gn=VO(m),!0);case 6:return(m=$O(m,f.pendingProps))!==null&&(f.stateNode=m,En=f,Gn=null,!0);case 13:if((m=YO(m))!==null){var b=Oa!==null?{id:Ki,overflow:Us}:null;return f.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},(b=Qn(18,null,null,0)).stateNode=m,b.return=f,f.child=b,En=f,Gn=null,!0}return!1;default:return!1}}function S0(f){return(1&f.mode)!=0&&(128&f.flags)==0}function T0(f){if(At){var m=Gn;if(m){var b=m;if(!Hb(f,m)){if(S0(f))throw Error(s(418));m=Ld(b);var E=En;m&&Hb(f,m)?Xb(E,b):(f.flags=-4097&f.flags|2,At=!1,En=f)}}else{if(S0(f))throw Error(s(418));f.flags=-4097&f.flags|2,At=!1,En=f}}}function zb(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;En=f}function zd(f){if(!Ze||f!==En)return!1;if(!At)return zb(f),At=!0,!1;if(f.tag!==3&&(f.tag!==5||sN(f.type)&&!xe(f.type,f.memoizedProps))){var m=Gn;if(m){if(S0(f))throw $b(),Error(s(418));for(;m;)Xb(f,m),m=Ld(m)}}if(zb(f),f.tag===13){if(!Ze)throw Error(s(316));if(!(f=(f=f.memoizedState)!==null?f.dehydrated:null))throw Error(s(317));Gn=eN(f)}else Gn=En?Ld(f.stateNode):null;return!0}function $b(){for(var f=Gn;f;)f=Ld(f)}function Rl(){Ze&&(Gn=En=null,kc=At=!1)}function E0(f){pi===null?pi=[f]:pi.push(f)}var gN=o.ReactCurrentBatchConfig;function $d(f,m){if(fi(f,m))return!0;if(typeof f!="object"||f===null||typeof m!="object"||m===null)return!1;var b=Object.keys(f),E=Object.keys(m);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var C=b[E];if(!lN.call(m,C)||!fi(f[C],m[C]))return!1}return!0}function vN(f){switch(f.tag){case 5:return Pc(f.type);case 16:return Pc("Lazy");case 13:return Pc("Suspense");case 19:return Pc("SuspenseList");case 0:case 2:case 15:return f=c0(f.type,!1);case 11:return f=c0(f.type.render,!1);case 1:return f=c0(f.type,!0);default:return""}}function mi(f,m){if(f&&f.defaultProps){for(var b in m=i({},m),f=f.defaultProps)m[b]===void 0&&(m[b]=f[b]);return m}return m}var Yd=ko(null),Gd=null,Ol=null,P0=null;function C0(){P0=Ol=Gd=null}function Yb(f,m,b){He?(gt(Yd,m._currentValue),m._currentValue=b):(gt(Yd,m._currentValue2),m._currentValue2=b)}function A0(f){var m=Yd.current;Ct(Yd),He?f._currentValue=m:f._currentValue2=m}function k0(f,m,b){for(;f!==null;){var E=f.alternate;if((f.childLanes&m)!==m?(f.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),f===b)break;f=f.return}}function Nl(f,m){Gd=f,P0=Ol=null,(f=f.dependencies)!==null&&f.firstContext!==null&&(f.lanes&m&&(on=!0),f.firstContext=null)}function Wn(f){var m=He?f._currentValue:f._currentValue2;if(P0!==f)if(f={context:f,memoizedValue:m,next:null},Ol===null){if(Gd===null)throw Error(s(308));Ol=f,Gd.dependencies={lanes:0,firstContext:f}}else Ol=Ol.next=f;return m}var Ba=null;function I0(f){Ba===null?Ba=[f]:Ba.push(f)}function Gb(f,m,b,E){var C=m.interleaved;return C===null?(b.next=b,I0(m)):(b.next=C.next,C.next=b),m.interleaved=b,Qi(f,E)}function Qi(f,m){f.lanes|=m;var b=f.alternate;for(b!==null&&(b.lanes|=m),b=f,f=f.return;f!==null;)f.childLanes|=m,(b=f.alternate)!==null&&(b.childLanes|=m),b=f,f=f.return;return b.tag===3?b.stateNode:null}var Mo=!1;function M0(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wb(f,m){f=f.updateQueue,m.updateQueue===f&&(m.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function js(f,m){return{eventTime:f,lane:m,tag:0,payload:null,callback:null,next:null}}function Ro(f,m,b){var E=f.updateQueue;if(E===null)return null;if(E=E.shared,(2&Je)!=0){var C=E.pending;return C===null?m.next=m:(m.next=C.next,C.next=m),E.pending=m,Qi(f,b)}return(C=E.interleaved)===null?(m.next=m,I0(E)):(m.next=C.next,C.next=m),E.interleaved=m,Qi(f,b)}function Wd(f,m,b){if((m=m.updateQueue)!==null&&(m=m.shared,(4194240&b)!=0)){var E=m.lanes;b|=E&=f.pendingLanes,m.lanes=b,v0(f,b)}}function Vb(f,m){var b=f.updateQueue,E=f.alternate;if(E!==null&&b===(E=E.updateQueue)){var C=null,R=null;if((b=b.firstBaseUpdate)!==null){do{var D={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};R===null?C=R=D:R=R.next=D,b=b.next}while(b!==null);R===null?C=R=m:R=R.next=m}else C=R=m;return b={baseState:E.baseState,firstBaseUpdate:C,lastBaseUpdate:R,shared:E.shared,effects:E.effects},void(f.updateQueue=b)}(f=b.lastBaseUpdate)===null?b.firstBaseUpdate=m:f.next=m,b.lastBaseUpdate=m}function Vd(f,m,b,E){var C=f.updateQueue;Mo=!1;var R=C.firstBaseUpdate,D=C.lastBaseUpdate,$=C.shared.pending;if($!==null){C.shared.pending=null;var Q=$,ee=Q.next;Q.next=null,D===null?R=ee:D.next=ee,D=Q;var ie=f.alternate;ie!==null&&($=(ie=ie.updateQueue).lastBaseUpdate)!==D&&($===null?ie.firstBaseUpdate=ee:$.next=ee,ie.lastBaseUpdate=Q)}if(R!==null){var ve=C.baseState;for(D=0,ie=ee=Q=null,$=R;;){var te=$.lane,he=$.eventTime;if((E&te)===te){ie!==null&&(ie=ie.next={eventTime:he,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var Ce=f,Ge=$;switch(te=m,he=b,Ge.tag){case 1:if(typeof(Ce=Ge.payload)=="function"){ve=Ce.call(he,ve,te);break e}ve=Ce;break e;case 3:Ce.flags=-65537&Ce.flags|128;case 0:if((te=typeof(Ce=Ge.payload)=="function"?Ce.call(he,ve,te):Ce)==null)break e;ve=i({},ve,te);break e;case 2:Mo=!0}}$.callback!==null&&$.lane!==0&&(f.flags|=64,(te=C.effects)===null?C.effects=[$]:te.push($))}else he={eventTime:he,lane:te,tag:$.tag,payload:$.payload,callback:$.callback,next:null},ie===null?(ee=ie=he,Q=ve):ie=ie.next=he,D|=te;if(($=$.next)===null){if(($=C.shared.pending)===null)break;$=(te=$).next,te.next=null,C.lastBaseUpdate=te,C.shared.pending=null}}if(ie===null&&(Q=ve),C.baseState=Q,C.firstBaseUpdate=ee,C.lastBaseUpdate=ie,(m=C.shared.interleaved)!==null){C=m;do D|=C.lane,C=C.next;while(C!==m)}else R===null&&(C.shared.lanes=0);Fa|=D,f.lanes=D,f.memoizedState=ve}}function qb(f,m,b){if(f=m.effects,m.effects=null,f!==null)for(m=0;m<f.length;m++){var E=f[m],C=E.callback;if(C!==null){if(E.callback=null,E=b,typeof C!="function")throw Error(s(191,C));C.call(E)}}}var Kb=new t.Component().refs;function R0(f,m,b,E){b=(b=b(E,m=f.memoizedState))==null?m:i({},m,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var qd={isMounted:function(f){return!!(f=f._reactInternals)&&M(f)===f},enqueueSetState:function(f,m,b){f=f._reactInternals;var E=Ur(),C=Lo(f),R=js(E,C);R.payload=m,b!=null&&(R.callback=b),(m=Ro(f,R,C))!==null&&(Kn(m,f,C,E),Wd(m,f,C))},enqueueReplaceState:function(f,m,b){f=f._reactInternals;var E=Ur(),C=Lo(f),R=js(E,C);R.tag=1,R.payload=m,b!=null&&(R.callback=b),(m=Ro(f,R,C))!==null&&(Kn(m,f,C,E),Wd(m,f,C))},enqueueForceUpdate:function(f,m){f=f._reactInternals;var b=Ur(),E=Lo(f),C=js(b,E);C.tag=2,m!=null&&(C.callback=m),(m=Ro(f,C,E))!==null&&(Kn(m,f,E,b),Wd(m,f,E))}};function Qb(f,m,b,E,C,R,D){return typeof(f=f.stateNode).shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,R,D):!m.prototype||!m.prototype.isPureReactComponent||!$d(b,E)||!$d(C,R)}function Zb(f,m,b){var E=!1,C=Io,R=m.contextType;return typeof R=="object"&&R!==null?R=Wn(R):(C=Tn(m)?Ra:Lr.current,R=(E=(E=m.contextTypes)!=null)?kl(f,C):Io),m=new m(b,R),f.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=qd,f.stateNode=m,m._reactInternals=f,E&&((f=f.stateNode).__reactInternalMemoizedUnmaskedChildContext=C,f.__reactInternalMemoizedMaskedChildContext=R),m}function Jb(f,m,b,E){f=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,E),m.state!==f&&qd.enqueueReplaceState(m,m.state,null)}function O0(f,m,b,E){var C=f.stateNode;C.props=b,C.state=f.memoizedState,C.refs=Kb,M0(f);var R=m.contextType;typeof R=="object"&&R!==null?C.context=Wn(R):(R=Tn(m)?Ra:Lr.current,C.context=kl(f,R)),C.state=f.memoizedState,typeof(R=m.getDerivedStateFromProps)=="function"&&(R0(f,m,R,b),C.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(m=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),m!==C.state&&qd.enqueueReplaceState(C,C.state,null),Vd(f,b,C,E),C.state=f.memoizedState),typeof C.componentDidMount=="function"&&(f.flags|=4194308)}function Ic(f,m,b){if((f=b.ref)!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner){if(b.tag!==1)throw Error(s(309));var E=b.stateNode}if(!E)throw Error(s(147,f));var C=E,R=""+f;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===R?m.ref:(m=function(D){var $=C.refs;$===Kb&&($=C.refs={}),D===null?delete $[R]:$[R]=D},m._stringRef=R,m)}if(typeof f!="string")throw Error(s(284));if(!b._owner)throw Error(s(290,f))}return f}function Kd(f,m){throw f=Object.prototype.toString.call(m),Error(s(31,f==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":f))}function eS(f){return(0,f._init)(f._payload)}function tS(f){function m(se,q){if(f){var J=se.deletions;J===null?(se.deletions=[q],se.flags|=16):J.push(q)}}function b(se,q){if(!f)return null;for(;q!==null;)m(se,q),q=q.sibling;return null}function E(se,q){for(se=new Map;q!==null;)q.key!==null?se.set(q.key,q):se.set(q.index,q),q=q.sibling;return se}function C(se,q){return(se=Do(se,q)).index=0,se.sibling=null,se}function R(se,q,J){return se.index=J,f?(J=se.alternate)!==null?(J=J.index)<q?(se.flags|=2,q):J:(se.flags|=2,q):(se.flags|=1048576,q)}function D(se){return f&&se.alternate===null&&(se.flags|=2),se}function $(se,q,J,ae){return q===null||q.tag!==6?((q=xv(J,se.mode,ae)).return=se,q):((q=C(q,J)).return=se,q)}function Q(se,q,J,ae){var Oe=J.type;return Oe===l?ie(se,q,J.props.children,ae,J.key):q!==null&&(q.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===w&&eS(Oe)===q.type)?((ae=C(q,J.props)).ref=Ic(se,q,J),ae.return=se,ae):((ae=Sf(J.type,J.key,J.props,null,se.mode,ae)).ref=Ic(se,q,J),ae.return=se,ae)}function ee(se,q,J,ae){return q===null||q.tag!==4||q.stateNode.containerInfo!==J.containerInfo||q.stateNode.implementation!==J.implementation?((q=_v(J,se.mode,ae)).return=se,q):((q=C(q,J.children||[])).return=se,q)}function ie(se,q,J,ae,Oe){return q===null||q.tag!==7?((q=ja(J,se.mode,ae,Oe)).return=se,q):((q=C(q,J)).return=se,q)}function ve(se,q,J){if(typeof q=="string"&&q!==""||typeof q=="number")return(q=xv(""+q,se.mode,J)).return=se,q;if(typeof q=="object"&&q!==null){switch(q.$$typeof){case a:return(J=Sf(q.type,q.key,q.props,null,se.mode,J)).ref=Ic(se,null,q),J.return=se,J;case u:return(q=_v(q,se.mode,J)).return=se,q;case w:return ve(se,(0,q._init)(q._payload),J)}if(j(q)||I(q))return(q=ja(q,se.mode,J,null)).return=se,q;Kd(se,q)}return null}function te(se,q,J,ae){var Oe=q!==null?q.key:null;if(typeof J=="string"&&J!==""||typeof J=="number")return Oe!==null?null:$(se,q,""+J,ae);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case a:return J.key===Oe?Q(se,q,J,ae):null;case u:return J.key===Oe?ee(se,q,J,ae):null;case w:return te(se,q,(Oe=J._init)(J._payload),ae)}if(j(J)||I(J))return Oe!==null?null:ie(se,q,J,ae,null);Kd(se,J)}return null}function he(se,q,J,ae,Oe){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return $(q,se=se.get(J)||null,""+ae,Oe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case a:return Q(q,se=se.get(ae.key===null?J:ae.key)||null,ae,Oe);case u:return ee(q,se=se.get(ae.key===null?J:ae.key)||null,ae,Oe);case w:return he(se,q,J,(0,ae._init)(ae._payload),Oe)}if(j(ae)||I(ae))return ie(q,se=se.get(J)||null,ae,Oe,null);Kd(q,ae)}return null}function Ce(se,q,J,ae){for(var Oe=null,ct=null,Ae=q,st=q=0,Pr=null;Ae!==null&&st<J.length;st++){Ae.index>st?(Pr=Ae,Ae=null):Pr=Ae.sibling;var ht=te(se,Ae,J[st],ae);if(ht===null){Ae===null&&(Ae=Pr);break}f&&Ae&&ht.alternate===null&&m(se,Ae),q=R(ht,q,st),ct===null?Oe=ht:ct.sibling=ht,ct=ht,Ae=Pr}if(st===J.length)return b(se,Ae),At&&Na(se,st),Oe;if(Ae===null){for(;st<J.length;st++)(Ae=ve(se,J[st],ae))!==null&&(q=R(Ae,q,st),ct===null?Oe=Ae:ct.sibling=Ae,ct=Ae);return At&&Na(se,st),Oe}for(Ae=E(se,Ae);st<J.length;st++)(Pr=he(Ae,se,st,J[st],ae))!==null&&(f&&Pr.alternate!==null&&Ae.delete(Pr.key===null?st:Pr.key),q=R(Pr,q,st),ct===null?Oe=Pr:ct.sibling=Pr,ct=Pr);return f&&Ae.forEach(function(Uo){return m(se,Uo)}),At&&Na(se,st),Oe}function Ge(se,q,J,ae){var Oe=I(J);if(typeof Oe!="function")throw Error(s(150));if((J=Oe.call(J))==null)throw Error(s(151));for(var ct=Oe=null,Ae=q,st=q=0,Pr=null,ht=J.next();Ae!==null&&!ht.done;st++,ht=J.next()){Ae.index>st?(Pr=Ae,Ae=null):Pr=Ae.sibling;var Uo=te(se,Ae,ht.value,ae);if(Uo===null){Ae===null&&(Ae=Pr);break}f&&Ae&&Uo.alternate===null&&m(se,Ae),q=R(Uo,q,st),ct===null?Oe=Uo:ct.sibling=Uo,ct=Uo,Ae=Pr}if(ht.done)return b(se,Ae),At&&Na(se,st),Oe;if(Ae===null){for(;!ht.done;st++,ht=J.next())(ht=ve(se,ht.value,ae))!==null&&(q=R(ht,q,st),ct===null?Oe=ht:ct.sibling=ht,ct=ht);return At&&Na(se,st),Oe}for(Ae=E(se,Ae);!ht.done;st++,ht=J.next())(ht=he(Ae,se,st,ht.value,ae))!==null&&(f&&ht.alternate!==null&&Ae.delete(ht.key===null?st:ht.key),q=R(ht,q,st),ct===null?Oe=ht:ct.sibling=ht,ct=ht);return f&&Ae.forEach(function(XN){return m(se,XN)}),At&&Na(se,st),Oe}return function se(q,J,ae,Oe){if(typeof ae=="object"&&ae!==null&&ae.type===l&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case a:e:{for(var ct=ae.key,Ae=J;Ae!==null;){if(Ae.key===ct){if((ct=ae.type)===l){if(Ae.tag===7){b(q,Ae.sibling),(J=C(Ae,ae.props.children)).return=q,q=J;break e}}else if(Ae.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===w&&eS(ct)===Ae.type){b(q,Ae.sibling),(J=C(Ae,ae.props)).ref=Ic(q,Ae,ae),J.return=q,q=J;break e}b(q,Ae);break}m(q,Ae),Ae=Ae.sibling}ae.type===l?((J=ja(ae.props.children,q.mode,Oe,ae.key)).return=q,q=J):((Oe=Sf(ae.type,ae.key,ae.props,null,q.mode,Oe)).ref=Ic(q,J,ae),Oe.return=q,q=Oe)}return D(q);case u:e:{for(Ae=ae.key;J!==null;){if(J.key===Ae){if(J.tag===4&&J.stateNode.containerInfo===ae.containerInfo&&J.stateNode.implementation===ae.implementation){b(q,J.sibling),(J=C(J,ae.children||[])).return=q,q=J;break e}b(q,J);break}m(q,J),J=J.sibling}(J=_v(ae,q.mode,Oe)).return=q,q=J}return D(q);case w:return se(q,J,(Ae=ae._init)(ae._payload),Oe)}if(j(ae))return Ce(q,J,ae,Oe);if(I(ae))return Ge(q,J,ae,Oe);Kd(q,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,J!==null&&J.tag===6?(b(q,J.sibling),(J=C(J,ae)).return=q,q=J):(b(q,J),(J=xv(ae,q.mode,Oe)).return=q,q=J),D(q)):b(q,J)}}var Bl=tS(!0),rS=tS(!1),Mc={},Vn=ko(Mc),Rc=ko(Mc),Ll=ko(Mc);function Zi(f){if(f===Mc)throw Error(s(174));return f}function N0(f,m){gt(Ll,m),gt(Rc,f),gt(Vn,Mc),f=K(m),Ct(Vn),gt(Vn,f)}function Fl(){Ct(Vn),Ct(Rc),Ct(Ll)}function nS(f){var m=Zi(Ll.current),b=Zi(Vn.current);b!==(m=X(b,f.type,m))&&(gt(Rc,f),gt(Vn,m))}function B0(f){Rc.current===f&&(Ct(Vn),Ct(Rc))}var Ht=ko(0);function Qd(f){for(var m=f;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&((b=b.dehydrated)===null||Mb(b)||l0(b)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(128&m.flags)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break;for(;m.sibling===null;){if(m.return===null||m.return===f)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var L0=[];function F0(){for(var f=0;f<L0.length;f++){var m=L0[f];He?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}L0.length=0}var Zd=o.ReactCurrentDispatcher,D0=o.ReactCurrentBatchConfig,La=0,Ot=null,mr=null,gr=null,Jd=!1,Oc=!1,Nc=0,yN=0;function Fr(){throw Error(s(321))}function U0(f,m){if(m===null)return!1;for(var b=0;b<m.length&&b<f.length;b++)if(!fi(f[b],m[b]))return!1;return!0}function j0(f,m,b,E,C,R){if(La=R,Ot=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Zd.current=f===null||f.memoizedState===null?bN:SN,f=b(E,C),Oc){R=0;do{if(Oc=!1,Nc=0,25<=R)throw Error(s(301));R+=1,gr=mr=null,m.updateQueue=null,Zd.current=TN,f=b(E,C)}while(Oc)}if(Zd.current=rf,m=mr!==null&&mr.next!==null,La=0,gr=mr=Ot=null,Jd=!1,m)throw Error(s(300));return f}function X0(){var f=Nc!==0;return Nc=0,f}function Ji(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gr===null?Ot.memoizedState=gr=f:gr=gr.next=f,gr}function qn(){if(mr===null){var f=Ot.alternate;f=f!==null?f.memoizedState:null}else f=mr.next;var m=gr===null?Ot.memoizedState:gr.next;if(m!==null)gr=m,mr=f;else{if(f===null)throw Error(s(310));f={memoizedState:(mr=f).memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},gr===null?Ot.memoizedState=gr=f:gr=gr.next=f}return gr}function Bc(f,m){return typeof m=="function"?m(f):m}function H0(f){var m=qn(),b=m.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=f;var E=mr,C=E.baseQueue,R=b.pending;if(R!==null){if(C!==null){var D=C.next;C.next=R.next,R.next=D}E.baseQueue=C=R,b.pending=null}if(C!==null){R=C.next,E=E.baseState;var $=D=null,Q=null,ee=R;do{var ie=ee.lane;if((La&ie)===ie)Q!==null&&(Q=Q.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),E=ee.hasEagerState?ee.eagerState:f(E,ee.action);else{var ve={lane:ie,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};Q===null?($=Q=ve,D=E):Q=Q.next=ve,Ot.lanes|=ie,Fa|=ie}ee=ee.next}while(ee!==null&&ee!==R);Q===null?D=E:Q.next=$,fi(E,m.memoizedState)||(on=!0),m.memoizedState=E,m.baseState=D,m.baseQueue=Q,b.lastRenderedState=E}if((f=b.interleaved)!==null){C=f;do R=C.lane,Ot.lanes|=R,Fa|=R,C=C.next;while(C!==f)}else C===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function z0(f){var m=qn(),b=m.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=f;var E=b.dispatch,C=b.pending,R=m.memoizedState;if(C!==null){b.pending=null;var D=C=C.next;do R=f(R,D.action),D=D.next;while(D!==C);fi(R,m.memoizedState)||(on=!0),m.memoizedState=R,m.baseQueue===null&&(m.baseState=R),b.lastRenderedState=R}return[R,E]}function iS(){}function sS(f,m){var b=Ot,E=qn(),C=m(),R=!fi(E.memoizedState,C);if(R&&(E.memoizedState=C,on=!0),E=E.queue,$0(lS.bind(null,b,E,f),[f]),E.getSnapshot!==m||R||gr!==null&&1&gr.memoizedState.tag){if(b.flags|=2048,Lc(9,aS.bind(null,b,E,C,m),void 0,null),vr===null)throw Error(s(349));30&La||oS(b,m,C)}return C}function oS(f,m,b){f.flags|=16384,f={getSnapshot:m,value:b},(m=Ot.updateQueue)===null?(m={lastEffect:null,stores:null},Ot.updateQueue=m,m.stores=[f]):(b=m.stores)===null?m.stores=[f]:b.push(f)}function aS(f,m,b,E){m.value=b,m.getSnapshot=E,uS(m)&&cS(f)}function lS(f,m,b){return b(function(){uS(m)&&cS(f)})}function uS(f){var m=f.getSnapshot;f=f.value;try{var b=m();return!fi(f,b)}catch{return!0}}function cS(f){var m=Qi(f,1);m!==null&&Kn(m,f,1,-1)}function hS(f){var m=Ji();return typeof f=="function"&&(f=f()),m.memoizedState=m.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bc,lastRenderedState:f},m.queue=f,f=f.dispatch=wN.bind(null,Ot,f),[m.memoizedState,f]}function Lc(f,m,b,E){return f={tag:f,create:m,destroy:b,deps:E,next:null},(m=Ot.updateQueue)===null?(m={lastEffect:null,stores:null},Ot.updateQueue=m,m.lastEffect=f.next=f):(b=m.lastEffect)===null?m.lastEffect=f.next=f:(E=b.next,b.next=f,f.next=E,m.lastEffect=f),f}function dS(){return qn().memoizedState}function ef(f,m,b,E){var C=Ji();Ot.flags|=f,C.memoizedState=Lc(1|m,b,void 0,E===void 0?null:E)}function tf(f,m,b,E){var C=qn();E=E===void 0?null:E;var R=void 0;if(mr!==null){var D=mr.memoizedState;if(R=D.destroy,E!==null&&U0(E,D.deps))return void(C.memoizedState=Lc(m,b,R,E))}Ot.flags|=f,C.memoizedState=Lc(1|m,b,R,E)}function fS(f,m){return ef(8390656,8,f,m)}function $0(f,m){return tf(2048,8,f,m)}function pS(f,m){return tf(4,2,f,m)}function mS(f,m){return tf(4,4,f,m)}function gS(f,m){return typeof m=="function"?(f=f(),m(f),function(){m(null)}):m!=null?(f=f(),m.current=f,function(){m.current=null}):void 0}function vS(f,m,b){return b=b!=null?b.concat([f]):null,tf(4,4,gS.bind(null,m,f),b)}function Y0(){}function yS(f,m){var b=qn();m=m===void 0?null:m;var E=b.memoizedState;return E!==null&&m!==null&&U0(m,E[1])?E[0]:(b.memoizedState=[f,m],f)}function xS(f,m){var b=qn();m=m===void 0?null:m;var E=b.memoizedState;return E!==null&&m!==null&&U0(m,E[1])?E[0]:(f=f(),b.memoizedState=[f,m],f)}function _S(f,m,b){return 21&La?(fi(b,m)||(b=Bb(),Ot.lanes|=b,Fa|=b,f.baseState=!0),m):(f.baseState&&(f.baseState=!1,on=!0),f.memoizedState=b)}function xN(f,m){var b=it;it=b!==0&&4>b?b:4,f(!0);var E=D0.transition;D0.transition={};try{f(!1),m()}finally{it=b,D0.transition=E}}function wS(){return qn().memoizedState}function _N(f,m,b){var E=Lo(f);b={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null},bS(f)?SS(m,b):(b=Gb(f,m,b,E))!==null&&(Kn(b,f,E,Ur()),TS(b,m,E))}function wN(f,m,b){var E=Lo(f),C={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null};if(bS(f))SS(m,C);else{var R=f.alternate;if(f.lanes===0&&(R===null||R.lanes===0)&&(R=m.lastRenderedReducer)!==null)try{var D=m.lastRenderedState,$=R(D,b);if(C.hasEagerState=!0,C.eagerState=$,fi($,D)){var Q=m.interleaved;return Q===null?(C.next=C,I0(m)):(C.next=Q.next,Q.next=C),void(m.interleaved=C)}}catch{}(b=Gb(f,m,C,E))!==null&&(Kn(b,f,E,C=Ur()),TS(b,m,E))}}function bS(f){var m=f.alternate;return f===Ot||m!==null&&m===Ot}function SS(f,m){Oc=Jd=!0;var b=f.pending;b===null?m.next=m:(m.next=b.next,b.next=m),f.pending=m}function TS(f,m,b){if(4194240&b){var E=m.lanes;b|=E&=f.pendingLanes,m.lanes=b,v0(f,b)}}var rf={readContext:Wn,useCallback:Fr,useContext:Fr,useEffect:Fr,useImperativeHandle:Fr,useInsertionEffect:Fr,useLayoutEffect:Fr,useMemo:Fr,useReducer:Fr,useRef:Fr,useState:Fr,useDebugValue:Fr,useDeferredValue:Fr,useTransition:Fr,useMutableSource:Fr,useSyncExternalStore:Fr,useId:Fr,unstable_isNewReconciler:!1},bN={readContext:Wn,useCallback:function(f,m){return Ji().memoizedState=[f,m===void 0?null:m],f},useContext:Wn,useEffect:fS,useImperativeHandle:function(f,m,b){return b=b!=null?b.concat([f]):null,ef(4194308,4,gS.bind(null,m,f),b)},useLayoutEffect:function(f,m){return ef(4194308,4,f,m)},useInsertionEffect:function(f,m){return ef(4,2,f,m)},useMemo:function(f,m){var b=Ji();return m=m===void 0?null:m,f=f(),b.memoizedState=[f,m],f},useReducer:function(f,m,b){var E=Ji();return m=b!==void 0?b(m):m,E.memoizedState=E.baseState=m,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:m},E.queue=f,f=f.dispatch=_N.bind(null,Ot,f),[E.memoizedState,f]},useRef:function(f){return f={current:f},Ji().memoizedState=f},useState:hS,useDebugValue:Y0,useDeferredValue:function(f){return Ji().memoizedState=f},useTransition:function(){var f=hS(!1),m=f[0];return f=xN.bind(null,f[1]),Ji().memoizedState=f,[m,f]},useMutableSource:function(){},useSyncExternalStore:function(f,m,b){var E=Ot,C=Ji();if(At){if(b===void 0)throw Error(s(407));b=b()}else{if(b=m(),vr===null)throw Error(s(349));30&La||oS(E,m,b)}C.memoizedState=b;var R={value:b,getSnapshot:m};return C.queue=R,fS(lS.bind(null,E,R,f),[f]),E.flags|=2048,Lc(9,aS.bind(null,E,R,b,m),void 0,null),b},useId:function(){var f=Ji(),m=vr.identifierPrefix;if(At){var b=Us;m=":"+m+"R"+(b=(Ki&~(1<<32-di(Ki)-1)).toString(32)+b),0<(b=Nc++)&&(m+="H"+b.toString(32)),m+=":"}else m=":"+m+"r"+(b=yN++).toString(32)+":";return f.memoizedState=m},unstable_isNewReconciler:!1},SN={readContext:Wn,useCallback:yS,useContext:Wn,useEffect:$0,useImperativeHandle:vS,useInsertionEffect:pS,useLayoutEffect:mS,useMemo:xS,useReducer:H0,useRef:dS,useState:function(){return H0(Bc)},useDebugValue:Y0,useDeferredValue:function(f){return _S(qn(),mr.memoizedState,f)},useTransition:function(){return[H0(Bc)[0],qn().memoizedState]},useMutableSource:iS,useSyncExternalStore:sS,useId:wS,unstable_isNewReconciler:!1},TN={readContext:Wn,useCallback:yS,useContext:Wn,useEffect:$0,useImperativeHandle:vS,useInsertionEffect:pS,useLayoutEffect:mS,useMemo:xS,useReducer:z0,useRef:dS,useState:function(){return z0(Bc)},useDebugValue:Y0,useDeferredValue:function(f){var m=qn();return mr===null?m.memoizedState=f:_S(m,mr.memoizedState,f)},useTransition:function(){return[z0(Bc)[0],qn().memoizedState]},useMutableSource:iS,useSyncExternalStore:sS,useId:wS,unstable_isNewReconciler:!1};function Dl(f,m){try{var b="",E=m;do b+=vN(E),E=E.return;while(E);var C=b}catch(R){C=`
Error generating stack: `+R.message+`
`+R.stack}return{value:f,source:m,stack:C,digest:null}}function G0(f,m,b){return{value:f,source:null,stack:b??null,digest:m??null}}function W0(f,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var EN=typeof WeakMap=="function"?WeakMap:Map;function ES(f,m,b){(b=js(-1,b)).tag=3,b.payload={element:null};var E=m.value;return b.callback=function(){vf||(vf=!0,dv=E),W0(0,m)},b}function PS(f,m,b){(b=js(-1,b)).tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var C=m.value;b.payload=function(){return E(C)},b.callback=function(){W0(0,m)}}var R=f.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(b.callback=function(){W0(0,m),typeof E!="function"&&(No===null?No=new Set([this]):No.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})}),b}function CS(f,m,b){var E=f.pingCache;if(E===null){E=f.pingCache=new EN;var C=new Set;E.set(m,C)}else(C=E.get(m))===void 0&&(C=new Set,E.set(m,C));C.has(b)||(C.add(b),f=NN.bind(null,f,m,b),m.then(f,f))}function AS(f){do{var m;if((m=f.tag===13)&&(m=(m=f.memoizedState)===null||m.dehydrated!==null),m)return f;f=f.return}while(f!==null);return null}function kS(f,m,b,E,C){return 1&f.mode?(f.flags|=65536,f.lanes=C,f):(f===m?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:((m=js(-1,1)).tag=2,Ro(b,m,1))),b.lanes|=1),f)}var PN=o.ReactCurrentOwner,on=!1;function an(f,m,b,E){m.child=f===null?rS(m,null,b,E):Bl(m,f.child,b,E)}function IS(f,m,b,E,C){b=b.render;var R=m.ref;return Nl(m,C),E=j0(f,m,b,E,R,C),b=X0(),f===null||on?(At&&b&&w0(m),m.flags|=1,an(f,m,E,C),m.child):(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~C,Xs(f,m,C))}function MS(f,m,b,E,C){if(f===null){var R=b.type;return typeof R!="function"||yv(R)||R.defaultProps!==void 0||b.compare!==null||b.defaultProps!==void 0?((f=Sf(b.type,null,E,m,m.mode,C)).ref=m.ref,f.return=m,m.child=f):(m.tag=15,m.type=R,RS(f,m,R,E,C))}if(R=f.child,(f.lanes&C)==0){var D=R.memoizedProps;if((b=(b=b.compare)!==null?b:$d)(D,E)&&f.ref===m.ref)return Xs(f,m,C)}return m.flags|=1,(f=Do(R,E)).ref=m.ref,f.return=m,m.child=f}function RS(f,m,b,E,C){if(f!==null){var R=f.memoizedProps;if($d(R,E)&&f.ref===m.ref){if(on=!1,m.pendingProps=E=R,(f.lanes&C)==0)return m.lanes=f.lanes,Xs(f,m,C);131072&f.flags&&(on=!0)}}return V0(f,m,b,E,C)}function OS(f,m,b){var E=m.pendingProps,C=E.children,R=f!==null?f.memoizedState:null;if(E.mode==="hidden")if(!(1&m.mode))m.memoizedState={baseLanes:0,cachePool:null,transitions:null},gt(jl,Pn),Pn|=b;else{if(!(1073741824&b))return f=R!==null?R.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:f,cachePool:null,transitions:null},m.updateQueue=null,gt(jl,Pn),Pn|=f,null;m.memoizedState={baseLanes:0,cachePool:null,transitions:null},E=R!==null?R.baseLanes:b,gt(jl,Pn),Pn|=E}else R!==null?(E=R.baseLanes|b,m.memoizedState=null):E=b,gt(jl,Pn),Pn|=E;return an(f,m,C,b),m.child}function NS(f,m){var b=m.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function V0(f,m,b,E,C){var R=Tn(b)?Ra:Lr.current;return R=kl(m,R),Nl(m,C),b=j0(f,m,b,E,R,C),E=X0(),f===null||on?(At&&E&&w0(m),m.flags|=1,an(f,m,b,C),m.child):(m.updateQueue=f.updateQueue,m.flags&=-2053,f.lanes&=~C,Xs(f,m,C))}function BS(f,m,b,E,C){if(Tn(b)){var R=!0;Fd(m)}else R=!1;if(Nl(m,C),m.stateNode===null)af(f,m),Zb(m,b,E),O0(m,b,E,C),E=!0;else if(f===null){var D=m.stateNode,$=m.memoizedProps;D.props=$;var Q=D.context,ee=b.contextType;typeof ee=="object"&&ee!==null?ee=Wn(ee):ee=kl(m,ee=Tn(b)?Ra:Lr.current);var ie=b.getDerivedStateFromProps,ve=typeof ie=="function"||typeof D.getSnapshotBeforeUpdate=="function";ve||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||($!==E||Q!==ee)&&Jb(m,D,E,ee),Mo=!1;var te=m.memoizedState;D.state=te,Vd(m,E,D,C),Q=m.memoizedState,$!==E||te!==Q||sn.current||Mo?(typeof ie=="function"&&(R0(m,b,ie,E),Q=m.memoizedState),($=Mo||Qb(m,b,$,E,te,Q,ee))?(ve||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(m.flags|=4194308)):(typeof D.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=Q),D.props=E,D.state=Q,D.context=ee,E=$):(typeof D.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{D=m.stateNode,Wb(f,m),$=m.memoizedProps,ee=m.type===m.elementType?$:mi(m.type,$),D.props=ee,ve=m.pendingProps,te=D.context,typeof(Q=b.contextType)=="object"&&Q!==null?Q=Wn(Q):Q=kl(m,Q=Tn(b)?Ra:Lr.current);var he=b.getDerivedStateFromProps;(ie=typeof he=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||($!==ve||te!==Q)&&Jb(m,D,E,Q),Mo=!1,te=m.memoizedState,D.state=te,Vd(m,E,D,C);var Ce=m.memoizedState;$!==ve||te!==Ce||sn.current||Mo?(typeof he=="function"&&(R0(m,b,he,E),Ce=m.memoizedState),(ee=Mo||Qb(m,b,ee,E,te,Ce,Q)||!1)?(ie||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(E,Ce,Q),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(E,Ce,Q)),typeof D.componentDidUpdate=="function"&&(m.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof D.componentDidUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=Ce),D.props=E,D.state=Ce,D.context=Q,E=ee):(typeof D.componentDidUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||$===f.memoizedProps&&te===f.memoizedState||(m.flags|=1024),E=!1)}return q0(f,m,b,E,R,C)}function q0(f,m,b,E,C,R){NS(f,m);var D=(128&m.flags)!=0;if(!E&&!D)return C&&Nb(m,b,!1),Xs(f,m,R);E=m.stateNode,PN.current=m;var $=D&&typeof b.getDerivedStateFromError!="function"?null:E.render();return m.flags|=1,f!==null&&D?(m.child=Bl(m,f.child,null,R),m.child=Bl(m,null,$,R)):an(f,m,$,R),m.memoizedState=E.state,C&&Nb(m,b,!0),m.child}function LS(f){var m=f.stateNode;m.pendingContext?Rb(0,m.pendingContext,m.pendingContext!==m.context):m.context&&Rb(0,m.context,!1),N0(f,m.containerInfo)}function FS(f,m,b,E,C){return Rl(),E0(C),m.flags|=256,an(f,m,b,E),m.child}var Fc,Dc,nf,sf,K0={dehydrated:null,treeContext:null,retryLane:0};function Q0(f){return{baseLanes:f,cachePool:null,transitions:null}}function DS(f,m,b){var E,C=m.pendingProps,R=Ht.current,D=!1,$=(128&m.flags)!=0;if((E=$)||(E=(f===null||f.memoizedState!==null)&&(2&R)!=0),E?(D=!0,m.flags&=-129):f!==null&&f.memoizedState===null||(R|=1),gt(Ht,1&R),f===null)return T0(m),(f=m.memoizedState)!==null&&(f=f.dehydrated)!==null?(1&m.mode?l0(f)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):($=C.children,f=C.fallback,D?(C=m.mode,D=m.child,$={mode:"hidden",children:$},!(1&C)&&D!==null?(D.childLanes=0,D.pendingProps=$):D=Tf($,C,0,null),f=ja(f,C,b,null),D.return=m,f.return=m,D.sibling=f,m.child=D,m.child.memoizedState=Q0(b),m.memoizedState=K0,f):Z0(m,$));if((R=f.memoizedState)!==null&&(E=R.dehydrated)!==null)return function(ee,ie,ve,te,he,Ce,Ge){if(ve)return 256&ie.flags?(ie.flags&=-257,of(ee,ie,Ge,te=G0(Error(s(422))))):ie.memoizedState!==null?(ie.child=ee.child,ie.flags|=128,null):(Ce=te.fallback,he=ie.mode,te=Tf({mode:"visible",children:te.children},he,0,null),(Ce=ja(Ce,he,Ge,null)).flags|=2,te.return=ie,Ce.return=ie,te.sibling=Ce,ie.child=te,1&ie.mode&&Bl(ie,ee.child,null,Ge),ie.child.memoizedState=Q0(Ge),ie.memoizedState=K0,Ce);if(!(1&ie.mode))return of(ee,ie,Ge,null);if(l0(he))return te=GO(he).digest,Ce=Error(s(419)),te=G0(Ce,te,void 0),of(ee,ie,Ge,te);if(ve=(Ge&ee.childLanes)!=0,on||ve){if((te=vr)!==null){switch(Ge&-Ge){case 4:he=2;break;case 16:he=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:he=32;break;case 536870912:he=268435456;break;default:he=0}(he=he&(te.suspendedLanes|Ge)?0:he)!==0&&he!==Ce.retryLane&&(Ce.retryLane=he,Qi(ee,he),Kn(te,ee,he,-1))}return vv(),of(ee,ie,Ge,te=G0(Error(s(421))))}return Mb(he)?(ie.flags|=128,ie.child=ee.child,ie=BN.bind(null,ee),WO(he,ie),null):(ee=Ce.treeContext,Ze&&(Gn=KO(he),En=ie,At=!0,pi=null,kc=!1,ee!==null&&($n[Yn++]=Ki,$n[Yn++]=Us,$n[Yn++]=Oa,Ki=ee.id,Us=ee.overflow,Oa=ie)),ie=Z0(ie,te.children),ie.flags|=4096,ie)}(f,m,$,C,E,R,b);if(D){D=C.fallback,$=m.mode,E=(R=f.child).sibling;var Q={mode:"hidden",children:C.children};return!(1&$)&&m.child!==R?((C=m.child).childLanes=0,C.pendingProps=Q,m.deletions=null):(C=Do(R,Q)).subtreeFlags=14680064&R.subtreeFlags,E!==null?D=Do(E,D):(D=ja(D,$,b,null)).flags|=2,D.return=m,C.return=m,C.sibling=D,m.child=C,C=D,D=m.child,$=($=f.child.memoizedState)===null?Q0(b):{baseLanes:$.baseLanes|b,cachePool:null,transitions:$.transitions},D.memoizedState=$,D.childLanes=f.childLanes&~b,m.memoizedState=K0,C}return f=(D=f.child).sibling,C=Do(D,{mode:"visible",children:C.children}),!(1&m.mode)&&(C.lanes=b),C.return=m,C.sibling=null,f!==null&&((b=m.deletions)===null?(m.deletions=[f],m.flags|=16):b.push(f)),m.child=C,m.memoizedState=null,C}function Z0(f,m){return(m=Tf({mode:"visible",children:m},f.mode,0,null)).return=f,f.child=m}function of(f,m,b,E){return E!==null&&E0(E),Bl(m,f.child,null,b),(f=Z0(m,m.pendingProps.children)).flags|=2,m.memoizedState=null,f}function US(f,m,b){f.lanes|=m;var E=f.alternate;E!==null&&(E.lanes|=m),k0(f.return,m,b)}function J0(f,m,b,E,C){var R=f.memoizedState;R===null?f.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:C}:(R.isBackwards=m,R.rendering=null,R.renderingStartTime=0,R.last=E,R.tail=b,R.tailMode=C)}function jS(f,m,b){var E=m.pendingProps,C=E.revealOrder,R=E.tail;if(an(f,m,E.children,b),(2&(E=Ht.current))!=0)E=1&E|2,m.flags|=128;else{if(f!==null&&128&f.flags)e:for(f=m.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&US(f,b,m);else if(f.tag===19)US(f,b,m);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===m)break e;for(;f.sibling===null;){if(f.return===null||f.return===m)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(gt(Ht,E),(1&m.mode)==0)m.memoizedState=null;else switch(C){case"forwards":for(b=m.child,C=null;b!==null;)(f=b.alternate)!==null&&Qd(f)===null&&(C=b),b=b.sibling;(b=C)===null?(C=m.child,m.child=null):(C=b.sibling,b.sibling=null),J0(m,!1,C,b,R);break;case"backwards":for(b=null,C=m.child,m.child=null;C!==null;){if((f=C.alternate)!==null&&Qd(f)===null){m.child=C;break}f=C.sibling,C.sibling=b,b=C,C=f}J0(m,!0,b,null,R);break;case"together":J0(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function af(f,m){!(1&m.mode)&&f!==null&&(f.alternate=null,m.alternate=null,m.flags|=2)}function Xs(f,m,b){if(f!==null&&(m.dependencies=f.dependencies),Fa|=m.lanes,(b&m.childLanes)==0)return null;if(f!==null&&m.child!==f.child)throw Error(s(153));if(m.child!==null){for(b=Do(f=m.child,f.pendingProps),m.child=b,b.return=m;f.sibling!==null;)f=f.sibling,(b=b.sibling=Do(f,f.pendingProps)).return=m;b.sibling=null}return m.child}function es(f){f.flags|=4}function XS(f,m){if(f!==null&&f.child===m.child)return!0;if(16&m.flags)return!1;for(f=m.child;f!==null;){if(12854&f.flags||12854&f.subtreeFlags)return!1;f=f.sibling}return!0}if(Fe)Fc=function(f,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)Z(f,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Dc=function(){},nf=function(f,m,b,E,C){if((f=f.memoizedProps)!==E){var R=m.stateNode,D=Zi(Vn.current);b=ce(R,b,f,E,C,D),(m.updateQueue=b)&&es(m)}},sf=function(f,m,b,E){b!==E&&es(m)};else if(at){Fc=function(f,m,b,E){for(var C=m.child;C!==null;){if(C.tag===5){var R=C.stateNode;b&&E&&(R=kb(R,C.type,C.memoizedProps,C)),Z(f,R)}else if(C.tag===6)R=C.stateNode,b&&E&&(R=Ib(R,C.memoizedProps,C)),Z(f,R);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(R=C.child)!==null&&(R.return=C),Fc(f,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var HS=function(f,m,b,E){for(var C=m.child;C!==null;){if(C.tag===5){var R=C.stateNode;b&&E&&(R=kb(R,C.type,C.memoizedProps,C)),Ab(f,R)}else if(C.tag===6)R=C.stateNode,b&&E&&(R=Ib(R,C.memoizedProps,C)),Ab(f,R);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)(R=C.child)!==null&&(R.return=C),HS(f,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===m)break;for(;C.sibling===null;){if(C.return===null||C.return===m)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};Dc=function(f,m){var b=m.stateNode;if(!XS(f,m)){f=b.containerInfo;var E=Cb(f);HS(E,m,!1,!1),b.pendingChildren=E,es(m),HO(f,E)}},nf=function(f,m,b,E,C){var R=f.stateNode,D=f.memoizedProps;if((f=XS(f,m))&&D===E)m.stateNode=R;else{var $=m.stateNode,Q=Zi(Vn.current),ee=null;D!==E&&(ee=ce($,b,D,E,C,Q)),f&&ee===null?m.stateNode=R:(R=XO(R,ee,b,D,E,m,f,$),re(R,b,E,C,Q)&&es(m),m.stateNode=R,f?es(m):Fc(R,m,!1,!1))}},sf=function(f,m,b,E){b!==E?(f=Zi(Ll.current),b=Zi(Vn.current),m.stateNode=Re(E,f,b,m),es(m)):m.stateNode=f.stateNode}}else Dc=function(){},nf=function(){},sf=function(){};function Uc(f,m){if(!At)switch(f.tailMode){case"hidden":m=f.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?m||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Qr(f){var m=f.alternate!==null&&f.alternate.child===f.child,b=0,E=0;if(m)for(var C=f.child;C!==null;)b|=C.lanes|C.childLanes,E|=14680064&C.subtreeFlags,E|=14680064&C.flags,C.return=f,C=C.sibling;else for(C=f.child;C!==null;)b|=C.lanes|C.childLanes,E|=C.subtreeFlags,E|=C.flags,C.return=f,C=C.sibling;return f.subtreeFlags|=E,f.childLanes=b,m}function CN(f,m,b){var E=m.pendingProps;switch(b0(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(m),null;case 1:case 17:return Tn(m.type)&&d0(),Qr(m),null;case 3:return b=m.stateNode,Fl(),Ct(sn),Ct(Lr),F0(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),f!==null&&f.child!==null||(zd(m)?es(m):f===null||f.memoizedState.isDehydrated&&!(256&m.flags)||(m.flags|=1024,pi!==null&&(mv(pi),pi=null))),Dc(f,m),Qr(m),null;case 5:B0(m),b=Zi(Ll.current);var C=m.type;if(f!==null&&m.stateNode!=null)nf(f,m,C,E,b),f.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!E){if(m.stateNode===null)throw Error(s(166));return Qr(m),null}if(f=Zi(Vn.current),zd(m)){if(!Ze)throw Error(s(175));f=QO(m.stateNode,m.type,m.memoizedProps,b,f,m,!kc),m.updateQueue=f,f!==null&&es(m)}else{var R=V(C,E,b,f,m);Fc(R,m,!1,!1),m.stateNode=R,re(R,C,E,b,f)&&es(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Qr(m),null;case 6:if(f&&m.stateNode!=null)sf(f,m,f.memoizedProps,E);else{if(typeof E!="string"&&m.stateNode===null)throw Error(s(166));if(f=Zi(Ll.current),b=Zi(Vn.current),zd(m)){if(!Ze)throw Error(s(176));if(f=m.stateNode,b=m.memoizedProps,(E=ZO(f,b,m,!kc))&&(C=En)!==null)switch(C.tag){case 3:oN(C.stateNode.containerInfo,f,b,(1&C.mode)!=0);break;case 5:aN(C.type,C.memoizedProps,C.stateNode,f,b,(1&C.mode)!=0)}E&&es(m)}else m.stateNode=Re(E,f,b,m)}return Qr(m),null;case 13:if(Ct(Ht),E=m.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(At&&Gn!==null&&1&m.mode&&!(128&m.flags))$b(),Rl(),m.flags|=98560,C=!1;else if(C=zd(m),E!==null&&E.dehydrated!==null){if(f===null){if(!C)throw Error(s(318));if(!Ze)throw Error(s(344));if(!(C=(C=m.memoizedState)!==null?C.dehydrated:null))throw Error(s(317));JO(C,m)}else Rl(),!(128&m.flags)&&(m.memoizedState=null),m.flags|=4;Qr(m),C=!1}else pi!==null&&(mv(pi),pi=null),C=!0;if(!C)return 65536&m.flags?m:null}return 128&m.flags?(m.lanes=b,m):((b=E!==null)!=(f!==null&&f.memoizedState!==null)&&b&&(m.child.flags|=8192,1&m.mode&&(f===null||1&Ht.current?nr===0&&(nr=3):vv())),m.updateQueue!==null&&(m.flags|=4),Qr(m),null);case 4:return Fl(),Dc(f,m),f===null&&Br(m.stateNode.containerInfo),Qr(m),null;case 10:return A0(m.type._context),Qr(m),null;case 19:if(Ct(Ht),(C=m.memoizedState)===null)return Qr(m),null;if(E=(128&m.flags)!=0,(R=C.rendering)===null)if(E)Uc(C,!1);else{if(nr!==0||f!==null&&128&f.flags)for(f=m.child;f!==null;){if((R=Qd(f))!==null){for(m.flags|=128,Uc(C,!1),(f=R.updateQueue)!==null&&(m.updateQueue=f,m.flags|=4),m.subtreeFlags=0,f=b,b=m.child;b!==null;)C=f,(E=b).flags&=14680066,(R=E.alternate)===null?(E.childLanes=0,E.lanes=C,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=R.childLanes,E.lanes=R.lanes,E.child=R.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=R.memoizedProps,E.memoizedState=R.memoizedState,E.updateQueue=R.updateQueue,E.type=R.type,C=R.dependencies,E.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),b=b.sibling;return gt(Ht,1&Ht.current|2),m.child}f=f.sibling}C.tail!==null&&pr()>hv&&(m.flags|=128,E=!0,Uc(C,!1),m.lanes=4194304)}else{if(!E)if((f=Qd(R))!==null){if(m.flags|=128,E=!0,(f=f.updateQueue)!==null&&(m.updateQueue=f,m.flags|=4),Uc(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!At)return Qr(m),null}else 2*pr()-C.renderingStartTime>hv&&b!==1073741824&&(m.flags|=128,E=!0,Uc(C,!1),m.lanes=4194304);C.isBackwards?(R.sibling=m.child,m.child=R):((f=C.last)!==null?f.sibling=R:m.child=R,C.last=R)}return C.tail!==null?(m=C.tail,C.rendering=m,C.tail=m.sibling,C.renderingStartTime=pr(),m.sibling=null,f=Ht.current,gt(Ht,E?1&f|2:1&f),m):(Qr(m),null);case 22:case 23:return gv(),b=m.memoizedState!==null,f!==null&&f.memoizedState!==null!==b&&(m.flags|=8192),b&&1&m.mode?1073741824&Pn&&(Qr(m),Fe&&6&m.subtreeFlags&&(m.flags|=8192)):Qr(m),null;case 24:case 25:return null}throw Error(s(156,m.tag))}function AN(f,m){switch(b0(m),m.tag){case 1:return Tn(m.type)&&d0(),65536&(f=m.flags)?(m.flags=-65537&f|128,m):null;case 3:return Fl(),Ct(sn),Ct(Lr),F0(),65536&(f=m.flags)&&!(128&f)?(m.flags=-65537&f|128,m):null;case 5:return B0(m),null;case 13:if(Ct(Ht),(f=m.memoizedState)!==null&&f.dehydrated!==null){if(m.alternate===null)throw Error(s(340));Rl()}return 65536&(f=m.flags)?(m.flags=-65537&f|128,m):null;case 19:return Ct(Ht),null;case 4:return Fl(),null;case 10:return A0(m.type._context),null;case 22:case 23:return gv(),null;default:return null}}var lf=!1,Dr=!1,kN=typeof WeakSet=="function"?WeakSet:Set,be=null;function Ul(f,m){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(E){kt(f,m,E)}else b.current=null}function zS(f,m,b){try{b()}catch(E){kt(f,m,E)}}var $S=!1;function jc(f,m,b){var E=m.updateQueue;if((E=E!==null?E.lastEffect:null)!==null){var C=E=E.next;do{if((C.tag&f)===f){var R=C.destroy;C.destroy=void 0,R!==void 0&&zS(m,b,R)}C=C.next}while(C!==E)}}function uf(f,m){if((m=(m=m.updateQueue)!==null?m.lastEffect:null)!==null){var b=m=m.next;do{if((b.tag&f)===f){var E=b.create;b.destroy=E()}b=b.next}while(b!==m)}}function ev(f){var m=f.ref;if(m!==null){var b=f.stateNode;f.tag===5?f=Y(b):f=b,typeof m=="function"?m(f):m.current=f}}function YS(f){var m=f.alternate;m!==null&&(f.alternate=null,YS(m)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(m=f.stateNode)!==null&&Cl(m),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function GS(f){return f.tag===5||f.tag===3||f.tag===4}function WS(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||GS(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(2&f.flags||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(2&f.flags))return f.stateNode}}function tv(f,m,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,m?OO(b,f,m):AO(b,f);else if(E!==4&&(f=f.child)!==null)for(tv(f,m,b),f=f.sibling;f!==null;)tv(f,m,b),f=f.sibling}function rv(f,m,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,m?RO(b,f,m):CO(b,f);else if(E!==4&&(f=f.child)!==null)for(rv(f,m,b),f=f.sibling;f!==null;)rv(f,m,b),f=f.sibling}var Zr=null,ts=!1;function rs(f,m,b){for(b=b.child;b!==null;)nv(f,m,b),b=b.sibling}function nv(f,m,b){if(Vi&&typeof Vi.onCommitFiberUnmount=="function")try{Vi.onCommitFiberUnmount(Ud,b)}catch{}switch(b.tag){case 5:Dr||Ul(b,m);case 6:if(Fe){var E=Zr,C=ts;Zr=null,rs(f,m,b),ts=C,(Zr=E)!==null&&(ts?BO(Zr,b.stateNode):NO(Zr,b.stateNode))}else rs(f,m,b);break;case 18:Fe&&Zr!==null&&(ts?iN(Zr,b.stateNode):nN(Zr,b.stateNode));break;case 4:Fe?(E=Zr,C=ts,Zr=b.stateNode.containerInfo,ts=!0,rs(f,m,b),Zr=E,ts=C):(at&&(E=b.stateNode.containerInfo,C=Cb(E),a0(E,C)),rs(f,m,b));break;case 0:case 11:case 14:case 15:if(!Dr&&(E=b.updateQueue)!==null&&(E=E.lastEffect)!==null){C=E=E.next;do{var R=C,D=R.destroy;R=R.tag,D!==void 0&&(2&R||4&R)&&zS(b,m,D),C=C.next}while(C!==E)}rs(f,m,b);break;case 1:if(!Dr&&(Ul(b,m),typeof(E=b.stateNode).componentWillUnmount=="function"))try{E.props=b.memoizedProps,E.state=b.memoizedState,E.componentWillUnmount()}catch($){kt(b,m,$)}rs(f,m,b);break;case 21:rs(f,m,b);break;case 22:1&b.mode?(Dr=(E=Dr)||b.memoizedState!==null,rs(f,m,b),Dr=E):rs(f,m,b);break;default:rs(f,m,b)}}function VS(f){var m=f.updateQueue;if(m!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new kN),m.forEach(function(E){var C=LN.bind(null,f,E);b.has(E)||(b.add(E),E.then(C,C))})}}function gi(f,m){var b=m.deletions;if(b!==null)for(var E=0;E<b.length;E++){var C=b[E];try{var R=f,D=m;if(Fe){var $=D;e:for(;$!==null;){switch($.tag){case 5:Zr=$.stateNode,ts=!1;break e;case 3:case 4:Zr=$.stateNode.containerInfo,ts=!0;break e}$=$.return}if(Zr===null)throw Error(s(160));nv(R,D,C),Zr=null,ts=!1}else nv(R,D,C);var Q=C.alternate;Q!==null&&(Q.return=null),C.return=null}catch(ee){kt(C,m,ee)}}if(12854&m.subtreeFlags)for(m=m.child;m!==null;)qS(m,f),m=m.sibling}function qS(f,m){var b=f.alternate,E=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:if(gi(m,f),ns(f),4&E){try{jc(3,f,f.return),uf(3,f)}catch(te){kt(f,f.return,te)}try{jc(5,f,f.return)}catch(te){kt(f,f.return,te)}}break;case 1:gi(m,f),ns(f),512&E&&b!==null&&Ul(b,b.return);break;case 5:if(gi(m,f),ns(f),512&E&&b!==null&&Ul(b,b.return),Fe){if(32&f.flags){var C=f.stateNode;try{Pb(C)}catch(te){kt(f,f.return,te)}}if(4&E&&(C=f.stateNode)!=null){var R=f.memoizedProps;if(b=b!==null?b.memoizedProps:R,E=f.type,m=f.updateQueue,f.updateQueue=null,m!==null)try{MO(C,m,E,b,R,f)}catch(te){kt(f,f.return,te)}}}break;case 6:if(gi(m,f),ns(f),4&E&&Fe){if(f.stateNode===null)throw Error(s(162));C=f.stateNode,R=f.memoizedProps,b=b!==null?b.memoizedProps:R;try{kO(C,b,R)}catch(te){kt(f,f.return,te)}}break;case 3:if(gi(m,f),ns(f),4&E){if(Fe&&Ze&&b!==null&&b.memoizedState.isDehydrated)try{tN(m.containerInfo)}catch(te){kt(f,f.return,te)}if(at){C=m.containerInfo,R=m.pendingChildren;try{a0(C,R)}catch(te){kt(f,f.return,te)}}}break;case 4:if(gi(m,f),ns(f),4&E&&at){C=(R=f.stateNode).containerInfo,R=R.pendingChildren;try{a0(C,R)}catch(te){kt(f,f.return,te)}}break;case 13:gi(m,f),ns(f),8192&(C=f.child).flags&&(R=C.memoizedState!==null,C.stateNode.isHidden=R,!R||C.alternate!==null&&C.alternate.memoizedState!==null||(cv=pr())),4&E&&VS(f);break;case 22:var D=b!==null&&b.memoizedState!==null;if(1&f.mode?(Dr=(b=Dr)||D,gi(m,f),Dr=b):gi(m,f),ns(f),8192&E){if(b=f.memoizedState!==null,(f.stateNode.isHidden=b)&&!D&&(1&f.mode)!=0)for(be=f,E=f.child;E!==null;){for(m=be=E;be!==null;){var $=(D=be).child;switch(D.tag){case 0:case 11:case 14:case 15:jc(4,D,D.return);break;case 1:Ul(D,D.return);var Q=D.stateNode;if(typeof Q.componentWillUnmount=="function"){var ee=D,ie=D.return;try{var ve=ee;Q.props=ve.memoizedProps,Q.state=ve.memoizedState,Q.componentWillUnmount()}catch(te){kt(ee,ie,te)}}break;case 5:Ul(D,D.return);break;case 22:if(D.memoizedState!==null){ZS(m);continue}}$!==null?($.return=D,be=$):ZS(m)}E=E.sibling}if(Fe){e:if(E=null,Fe)for(m=f;;){if(m.tag===5){if(E===null){E=m;try{C=m.stateNode,b?LO(C):DO(m.stateNode,m.memoizedProps)}catch(te){kt(f,f.return,te)}}}else if(m.tag===6){if(E===null)try{R=m.stateNode,b?FO(R):UO(R,m.memoizedProps)}catch(te){kt(f,f.return,te)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===f)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===f)break e;for(;m.sibling===null;){if(m.return===null||m.return===f)break e;E===m&&(E=null),m=m.return}E===m&&(E=null),m.sibling.return=m.return,m=m.sibling}}}break;case 19:gi(m,f),ns(f),4&E&&VS(f);break;case 21:break;default:gi(m,f),ns(f)}}function ns(f){var m=f.flags;if(2&m){try{if(Fe){e:{for(var b=f.return;b!==null;){if(GS(b)){var E=b;break e}b=b.return}throw Error(s(160))}switch(E.tag){case 5:var C=E.stateNode;32&E.flags&&(Pb(C),E.flags&=-33),rv(f,WS(f),C);break;case 3:case 4:var R=E.stateNode.containerInfo;tv(f,WS(f),R);break;default:throw Error(s(161))}}}catch(D){kt(f,f.return,D)}f.flags&=-3}4096&m&&(f.flags&=-4097)}function IN(f,m,b){be=f,KS(f)}function KS(f,m,b){for(var E=(1&f.mode)!=0;be!==null;){var C=be,R=C.child;if(C.tag===22&&E){var D=C.memoizedState!==null||lf;if(!D){var $=C.alternate,Q=$!==null&&$.memoizedState!==null||Dr;$=lf;var ee=Dr;if(lf=D,(Dr=Q)&&!ee)for(be=C;be!==null;)Q=(D=be).child,D.tag===22&&D.memoizedState!==null?JS(C):Q!==null?(Q.return=D,be=Q):JS(C);for(;R!==null;)be=R,KS(R),R=R.sibling;be=C,lf=$,Dr=ee}QS(f)}else 8772&C.subtreeFlags&&R!==null?(R.return=C,be=R):QS(f)}}function QS(f){for(;be!==null;){var m=be;if(8772&m.flags){var b=m.alternate;try{if(8772&m.flags)switch(m.tag){case 0:case 11:case 15:Dr||uf(5,m);break;case 1:var E=m.stateNode;if(4&m.flags&&!Dr)if(b===null)E.componentDidMount();else{var C=m.elementType===m.type?b.memoizedProps:mi(m.type,b.memoizedProps);E.componentDidUpdate(C,b.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var R=m.updateQueue;R!==null&&qb(m,R,E);break;case 3:var D=m.updateQueue;if(D!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=Y(m.child.stateNode);break;case 1:b=m.child.stateNode}qb(m,D,b)}break;case 5:var $=m.stateNode;b===null&&4&m.flags&&IO($,m.type,m.memoizedProps,m);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Ze&&m.memoizedState===null){var Q=m.alternate;if(Q!==null){var ee=Q.memoizedState;if(ee!==null){var ie=ee.dehydrated;ie!==null&&rN(ie)}}}break;default:throw Error(s(163))}Dr||512&m.flags&&ev(m)}catch(ve){kt(m,m.return,ve)}}if(m===f){be=null;break}if((b=m.sibling)!==null){b.return=m.return,be=b;break}be=m.return}}function ZS(f){for(;be!==null;){var m=be;if(m===f){be=null;break}var b=m.sibling;if(b!==null){b.return=m.return,be=b;break}be=m.return}}function JS(f){for(;be!==null;){var m=be;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{uf(4,m)}catch(Q){kt(m,b,Q)}break;case 1:var E=m.stateNode;if(typeof E.componentDidMount=="function"){var C=m.return;try{E.componentDidMount()}catch(Q){kt(m,C,Q)}}var R=m.return;try{ev(m)}catch(Q){kt(m,R,Q)}break;case 5:var D=m.return;try{ev(m)}catch(Q){kt(m,D,Q)}}}catch(Q){kt(m,m.return,Q)}if(m===f){be=null;break}var $=m.sibling;if($!==null){$.return=m.return,be=$;break}be=m.return}}var cf=0,hf=1,df=2,ff=3,pf=4;if(typeof Symbol=="function"&&Symbol.for){var Xc=Symbol.for;cf=Xc("selector.component"),hf=Xc("selector.has_pseudo_class"),df=Xc("selector.role"),ff=Xc("selector.test_id"),pf=Xc("selector.text")}function iv(f){var m=Tr(f);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(s(364));return m}if((f=Ao(f))===null)throw Error(s(362));return f.stateNode.current}function sv(f,m){switch(m.$$typeof){case cf:if(f.type===m.value)return!0;break;case hf:e:{m=m.value,f=[f,0];for(var b=0;b<f.length;){var E=f[b++],C=f[b++],R=m[C];if(E.tag!==5||!zn(E)){for(;R!=null&&sv(E,R);)R=m[++C];if(C===m.length){m=!0;break e}for(E=E.child;E!==null;)f.push(E,C),E=E.sibling}}m=!1}return m;case df:if(f.tag===5&&TO(f.stateNode,m.value))return!0;break;case pf:if((f.tag===5||f.tag===6)&&(f=Bd(f))!==null&&0<=f.indexOf(m.value))return!0;break;case ff:if(f.tag===5&&typeof(f=f.memoizedProps["data-testname"])=="string"&&f.toLowerCase()===m.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function ov(f){switch(f.$$typeof){case cf:return"<"+(A(f.value)||"Unknown")+">";case hf:return":has("+(ov(f)||"")+")";case df:return'[role="'+f.value+'"]';case pf:return'"'+f.value+'"';case ff:return'[data-testname="'+f.value+'"]';default:throw Error(s(365))}}function eT(f,m){var b=[];f=[f,0];for(var E=0;E<f.length;){var C=f[E++],R=f[E++],D=m[R];if(C.tag!==5||!zn(C)){for(;D!=null&&sv(C,D);)D=m[++R];if(R===m.length)b.push(C);else for(C=C.child;C!==null;)f.push(C,R),C=C.sibling}}return b}function av(f,m){if(!Co)throw Error(s(363));f=eT(f=iv(f),m),m=[],f=Array.from(f);for(var b=0;b<f.length;){var E=f[b++];if(E.tag===5)zn(E)||m.push(E.stateNode);else for(E=E.child;E!==null;)f.push(E),E=E.sibling}return m}var MN=Math.ceil,mf=o.ReactCurrentDispatcher,lv=o.ReactCurrentOwner,Gt=o.ReactCurrentBatchConfig,Je=0,vr=null,Zt=null,Er=0,Pn=0,jl=ko(0),nr=0,Hc=null,Fa=0,gf=0,uv=0,zc=null,Cn=null,cv=0,hv=1/0,Oo=null;function Xl(){hv=pr()+500}var tT,vf=!1,dv=null,No=null,yf=!1,Bo=null,xf=0,$c=0,fv=null,_f=-1,wf=0;function Ur(){return 6&Je?pr():_f!==-1?_f:_f=pr()}function Lo(f){return 1&f.mode?2&Je&&Er!==0?Er&-Er:gN.transition!==null?(wf===0&&(wf=Bb()),wf):(f=it)!==0?f:Wi():1}function Kn(f,m,b,E){if(50<$c)throw $c=0,fv=null,Error(s(185));Ac(f,b,E),2&Je&&f===vr||(f===vr&&(!(2&Je)&&(gf|=b),nr===4&&Fo(f,Er)),ln(f,E),b===1&&Je===0&&!(1&m.mode)&&(Xl(),jd&&qi()))}function ln(f,m){var b=f.callbackNode;(function(C,R){for(var D=C.suspendedLanes,$=C.pingedLanes,Q=C.expirationTimes,ee=C.pendingLanes;0<ee;){var ie=31-di(ee),ve=1<<ie,te=Q[ie];te===-1?ve&D&&!(ve&$)||(Q[ie]=hN(ve,R)):te<=R&&(C.expiredLanes|=ve),ee&=~ve}})(f,m);var E=Dd(f,f===vr?Er:0);if(E===0)b!==null&&Fb(b),f.callbackNode=null,f.callbackPriority=0;else if(m=E&-E,f.callbackPriority!==m){if(b!=null&&Fb(b),m===1)f.tag===0?function(C){jd=!0,Ub(C)}(nT.bind(null,f)):Ub(nT.bind(null,f)),hi?Ec(function(){!(6&Je)&&qi()}):y0(x0,qi),b=null;else{switch(Lb(E)){case 1:b=x0;break;case 4:b=pN;break;case 16:default:b=Db;break;case 536870912:b=mN}b=hT(b,rT.bind(null,f))}f.callbackPriority=m,f.callbackNode=b}}function rT(f,m){if(_f=-1,wf=0,(6&Je)!=0)throw Error(s(327));var b=f.callbackNode;if(Ua()&&f.callbackNode!==b)return null;var E=Dd(f,f===vr?Er:0);if(E===0)return null;if(30&E||E&f.expiredLanes||m)m=bf(f,E);else{m=E;var C=Je;Je|=2;var R=oT();for(vr===f&&Er===m||(Oo=null,Xl(),Da(f,m));;)try{ON();break}catch($){sT(f,$)}C0(),mf.current=R,Je=C,Zt!==null?m=0:(vr=null,Er=0,m=nr)}if(m!==0){if(m===2&&(C=m0(f))!==0&&(E=C,m=pv(f,C)),m===1)throw b=Hc,Da(f,0),Fo(f,E),ln(f,pr()),b;if(m===6)Fo(f,E);else{if(C=f.current.alternate,(30&E)==0&&!function($){for(var Q=$;;){if(16384&Q.flags){var ee=Q.updateQueue;if(ee!==null&&(ee=ee.stores)!==null)for(var ie=0;ie<ee.length;ie++){var ve=ee[ie],te=ve.getSnapshot;ve=ve.value;try{if(!fi(te(),ve))return!1}catch{return!1}}}if(ee=Q.child,16384&Q.subtreeFlags&&ee!==null)ee.return=Q,Q=ee;else{if(Q===$)break;for(;Q.sibling===null;){if(Q.return===null||Q.return===$)return!0;Q=Q.return}Q.sibling.return=Q.return,Q=Q.sibling}}return!0}(C)&&((m=bf(f,E))===2&&(R=m0(f))!==0&&(E=R,m=pv(f,R)),m===1))throw b=Hc,Da(f,0),Fo(f,E),ln(f,pr()),b;switch(f.finishedWork=C,f.finishedLanes=E,m){case 0:case 1:throw Error(s(345));case 2:case 5:Hl(f,Cn,Oo);break;case 3:if(Fo(f,E),(130023424&E)===E&&10<(m=cv+500-pr())){if(Dd(f,0)!==0)break;if(((C=f.suspendedLanes)&E)!==E){Ur(),f.pingedLanes|=f.suspendedLanes&C;break}f.timeoutHandle=Le(Hl.bind(null,f,Cn,Oo),m);break}Hl(f,Cn,Oo);break;case 4:if(Fo(f,E),(4194240&E)===E)break;for(m=f.eventTimes,C=-1;0<E;){var D=31-di(E);R=1<<D,(D=m[D])>C&&(C=D),E&=~R}if(E=C,10<(E=(120>(E=pr()-E)?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*MN(E/1960))-E)){f.timeoutHandle=Le(Hl.bind(null,f,Cn,Oo),E);break}Hl(f,Cn,Oo);break;default:throw Error(s(329))}}}return ln(f,pr()),f.callbackNode===b?rT.bind(null,f):null}function pv(f,m){var b=zc;return f.current.memoizedState.isDehydrated&&(Da(f,m).flags|=256),(f=bf(f,m))!==2&&(m=Cn,Cn=b,m!==null&&mv(m)),f}function mv(f){Cn===null?Cn=f:Cn.push.apply(Cn,f)}function Fo(f,m){for(m&=~uv,m&=~gf,f.suspendedLanes|=m,f.pingedLanes&=~m,f=f.expirationTimes;0<m;){var b=31-di(m),E=1<<b;f[b]=-1,m&=~E}}function nT(f){if(6&Je)throw Error(s(327));Ua();var m=Dd(f,0);if(!(1&m))return ln(f,pr()),null;var b=bf(f,m);if(f.tag!==0&&b===2){var E=m0(f);E!==0&&(m=E,b=pv(f,E))}if(b===1)throw b=Hc,Da(f,0),Fo(f,m),ln(f,pr()),b;if(b===6)throw Error(s(345));return f.finishedWork=f.current.alternate,f.finishedLanes=m,Hl(f,Cn,Oo),ln(f,pr()),null}function iT(f){Bo!==null&&Bo.tag===0&&!(6&Je)&&Ua();var m=Je;Je|=1;var b=Gt.transition,E=it;try{if(Gt.transition=null,it=1,f)return f()}finally{it=E,Gt.transition=b,!(6&(Je=m))&&qi()}}function gv(){Pn=jl.current,Ct(jl)}function Da(f,m){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==We&&(f.timeoutHandle=We,ze(b)),Zt!==null)for(b=Zt.return;b!==null;){var E=b;switch(b0(E),E.tag){case 1:(E=E.type.childContextTypes)!=null&&d0();break;case 3:Fl(),Ct(sn),Ct(Lr),F0();break;case 5:B0(E);break;case 4:Fl();break;case 13:case 19:Ct(Ht);break;case 10:A0(E.type._context);break;case 22:case 23:gv()}b=b.return}if(vr=f,Zt=f=Do(f.current,null),Er=Pn=m,nr=0,Hc=null,uv=gf=Fa=0,Cn=zc=null,Ba!==null){for(m=0;m<Ba.length;m++)if((E=(b=Ba[m]).interleaved)!==null){b.interleaved=null;var C=E.next,R=b.pending;if(R!==null){var D=R.next;R.next=C,E.next=D}b.pending=E}Ba=null}return f}function sT(f,m){for(;;){var b=Zt;try{if(C0(),Zd.current=rf,Jd){for(var E=Ot.memoizedState;E!==null;){var C=E.queue;C!==null&&(C.pending=null),E=E.next}Jd=!1}if(La=0,gr=mr=Ot=null,Oc=!1,Nc=0,lv.current=null,b===null||b.return===null){nr=1,Hc=m,Zt=null;break}e:{var R=f,D=b.return,$=b,Q=m;if(m=Er,$.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var ee=Q,ie=$,ve=ie.tag;if(!(1&ie.mode)&&(ve===0||ve===11||ve===15)){var te=ie.alternate;te?(ie.updateQueue=te.updateQueue,ie.memoizedState=te.memoizedState,ie.lanes=te.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var he=AS(D);if(he!==null){he.flags&=-257,kS(he,D,$,0,m),1&he.mode&&CS(R,ee,m),Q=ee;var Ce=(m=he).updateQueue;if(Ce===null){var Ge=new Set;Ge.add(Q),m.updateQueue=Ge}else Ce.add(Q);break e}if(!(1&m)){CS(R,ee,m),vv();break e}Q=Error(s(426))}else if(At&&1&$.mode){var se=AS(D);if(se!==null){!(65536&se.flags)&&(se.flags|=256),kS(se,D,$,0,m),E0(Dl(Q,$));break e}}R=Q=Dl(Q,$),nr!==4&&(nr=2),zc===null?zc=[R]:zc.push(R),R=D;do{switch(R.tag){case 3:R.flags|=65536,m&=-m,R.lanes|=m,Vb(R,ES(0,Q,m));break e;case 1:$=Q;var q=R.type,J=R.stateNode;if(!(128&R.flags)&&(typeof q.getDerivedStateFromError=="function"||J!==null&&typeof J.componentDidCatch=="function"&&(No===null||!No.has(J)))){R.flags|=65536,m&=-m,R.lanes|=m,Vb(R,PS(R,$,m));break e}}R=R.return}while(R!==null)}lT(b)}catch(ae){m=ae,Zt===b&&b!==null&&(Zt=b=b.return);continue}break}}function oT(){var f=mf.current;return mf.current=rf,f===null?rf:f}function vv(){nr!==0&&nr!==3&&nr!==2||(nr=4),vr===null||!(268435455&Fa)&&!(268435455&gf)||Fo(vr,Er)}function bf(f,m){var b=Je;Je|=2;var E=oT();for(vr===f&&Er===m||(Oo=null,Da(f,m));;)try{RN();break}catch(C){sT(f,C)}if(C0(),Je=b,mf.current=E,Zt!==null)throw Error(s(261));return vr=null,Er=0,nr}function RN(){for(;Zt!==null;)aT(Zt)}function ON(){for(;Zt!==null&&!dN();)aT(Zt)}function aT(f){var m=tT(f.alternate,f,Pn);f.memoizedProps=f.pendingProps,m===null?lT(f):Zt=m,lv.current=null}function lT(f){var m=f;do{var b=m.alternate;if(f=m.return,(32768&m.flags)==0){if((b=CN(b,m,Pn))!==null)return void(Zt=b)}else{if((b=AN(b,m))!==null)return b.flags&=32767,void(Zt=b);if(f===null)return nr=6,void(Zt=null);f.flags|=32768,f.subtreeFlags=0,f.deletions=null}if((m=m.sibling)!==null)return void(Zt=m);Zt=m=f}while(m!==null);nr===0&&(nr=5)}function Hl(f,m,b){var E=it,C=Gt.transition;try{Gt.transition=null,it=1,function(R,D,$,Q){do Ua();while(Bo!==null);if(6&Je)throw Error(s(327));$=R.finishedWork;var ee=R.finishedLanes;if($===null)return null;if(R.finishedWork=null,R.finishedLanes=0,$===R.current)throw Error(s(177));R.callbackNode=null,R.callbackPriority=0;var ie=$.lanes|$.childLanes;if(function(he,Ce){var Ge=he.pendingLanes&~Ce;he.pendingLanes=Ce,he.suspendedLanes=0,he.pingedLanes=0,he.expiredLanes&=Ce,he.mutableReadLanes&=Ce,he.entangledLanes&=Ce,Ce=he.entanglements;var se=he.eventTimes;for(he=he.expirationTimes;0<Ge;){var q=31-di(Ge),J=1<<q;Ce[q]=0,se[q]=-1,he[q]=-1,Ge&=~J}}(R,ie),R===vr&&(Zt=vr=null,Er=0),!(2064&$.subtreeFlags)&&!(2064&$.flags)||yf||(yf=!0,hT(Db,function(){return Ua(),null})),ie=(15990&$.flags)!=0,(15990&$.subtreeFlags)!=0||ie){ie=Gt.transition,Gt.transition=null;var ve=it;it=1;var te=Je;Je|=4,lv.current=null,function(he,Ce){for(W(he.containerInfo),be=Ce;be!==null;)if(Ce=(he=be).child,(1028&he.subtreeFlags)!=0&&Ce!==null)Ce.return=he,be=Ce;else for(;be!==null;){he=be;try{var Ge=he.alternate;if(1024&he.flags)switch(he.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(Ge!==null){var se=Ge.memoizedProps,q=Ge.memoizedState,J=he.stateNode,ae=J.getSnapshotBeforeUpdate(he.elementType===he.type?se:mi(he.type,se),q);J.__reactInternalSnapshotBeforeUpdate=ae}break;case 3:Fe&&jO(he.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Oe){kt(he,he.return,Oe)}if((Ce=he.sibling)!==null){Ce.return=he.return,be=Ce;break}be=he.return}Ge=$S,$S=!1}(R,$),qS($,R),z(R.containerInfo),R.current=$,IN($),fN(),Je=te,it=ve,Gt.transition=ie}else R.current=$;if(yf&&(yf=!1,Bo=R,xf=ee),ie=R.pendingLanes,ie===0&&(No=null),function(he){if(Vi&&typeof Vi.onCommitFiberRoot=="function")try{Vi.onCommitFiberRoot(Ud,he,void 0,(128&he.current.flags)==128)}catch{}}($.stateNode),ln(R,pr()),D!==null)for(Q=R.onRecoverableError,$=0;$<D.length;$++)ee=D[$],Q(ee.value,{componentStack:ee.stack,digest:ee.digest});if(vf)throw vf=!1,R=dv,dv=null,R;1&xf&&R.tag!==0&&Ua(),ie=R.pendingLanes,1&ie?R===fv?$c++:($c=0,fv=R):$c=0,qi()}(f,m,b,E)}finally{Gt.transition=C,it=E}return null}function Ua(){if(Bo!==null){var f=Lb(xf),m=Gt.transition,b=it;try{if(Gt.transition=null,it=16>f?16:f,Bo===null)var E=!1;else{if(f=Bo,Bo=null,xf=0,(6&Je)!=0)throw Error(s(331));var C=Je;for(Je|=4,be=f.current;be!==null;){var R=be,D=R.child;if(16&be.flags){var $=R.deletions;if($!==null){for(var Q=0;Q<$.length;Q++){var ee=$[Q];for(be=ee;be!==null;){var ie=be;switch(ie.tag){case 0:case 11:case 15:jc(8,ie,R)}var ve=ie.child;if(ve!==null)ve.return=ie,be=ve;else for(;be!==null;){var te=(ie=be).sibling,he=ie.return;if(YS(ie),ie===ee){be=null;break}if(te!==null){te.return=he,be=te;break}be=he}}}var Ce=R.alternate;if(Ce!==null){var Ge=Ce.child;if(Ge!==null){Ce.child=null;do{var se=Ge.sibling;Ge.sibling=null,Ge=se}while(Ge!==null)}}be=R}}if(2064&R.subtreeFlags&&D!==null)D.return=R,be=D;else e:for(;be!==null;){if(2048&(R=be).flags)switch(R.tag){case 0:case 11:case 15:jc(9,R,R.return)}var q=R.sibling;if(q!==null){q.return=R.return,be=q;break e}be=R.return}}var J=f.current;for(be=J;be!==null;){var ae=(D=be).child;if(2064&D.subtreeFlags&&ae!==null)ae.return=D,be=ae;else e:for(D=J;be!==null;){if(2048&($=be).flags)try{switch($.tag){case 0:case 11:case 15:uf(9,$)}}catch(ct){kt($,$.return,ct)}if($===D){be=null;break e}var Oe=$.sibling;if(Oe!==null){Oe.return=$.return,be=Oe;break e}be=$.return}}if(Je=C,qi(),Vi&&typeof Vi.onPostCommitFiberRoot=="function")try{Vi.onPostCommitFiberRoot(Ud,f)}catch{}E=!0}return E}finally{it=b,Gt.transition=m}}return!1}function uT(f,m,b){f=Ro(f,m=ES(0,m=Dl(b,m),1),1),m=Ur(),f!==null&&(Ac(f,1,m),ln(f,m))}function kt(f,m,b){if(f.tag===3)uT(f,f,b);else for(;m!==null;){if(m.tag===3){uT(m,f,b);break}if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(No===null||!No.has(E))){m=Ro(m,f=PS(m,f=Dl(b,f),1),1),f=Ur(),m!==null&&(Ac(m,1,f),ln(m,f));break}}m=m.return}}function NN(f,m,b){var E=f.pingCache;E!==null&&E.delete(m),m=Ur(),f.pingedLanes|=f.suspendedLanes&b,vr===f&&(Er&b)===b&&(nr===4||nr===3&&(130023424&Er)===Er&&500>pr()-cv?Da(f,0):uv|=b),ln(f,m)}function cT(f,m){m===0&&(1&f.mode?(m=p0,!(130023424&(p0<<=1))&&(p0=4194304)):m=1);var b=Ur();(f=Qi(f,m))!==null&&(Ac(f,m,b),ln(f,b))}function BN(f){var m=f.memoizedState,b=0;m!==null&&(b=m.retryLane),cT(f,b)}function LN(f,m){var b=0;switch(f.tag){case 13:var E=f.stateNode,C=f.memoizedState;C!==null&&(b=C.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(s(314))}E!==null&&E.delete(m),cT(f,b)}function hT(f,m){return y0(f,m)}function FN(f,m,b,E){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(f,m,b,E){return new FN(f,m,b,E)}function yv(f){return!(!(f=f.prototype)||!f.isReactComponent)}function Do(f,m){var b=f.alternate;return b===null?((b=Qn(f.tag,m,f.key,f.mode)).elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=m,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=14680064&f.flags,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,m=f.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function Sf(f,m,b,E,C,R){var D=2;if(E=f,typeof f=="function")yv(f)&&(D=1);else if(typeof f=="string")D=5;else e:switch(f){case l:return ja(b.children,C,R,m);case h:D=8,C|=8;break;case c:return(f=Qn(12,b,m,2|C)).elementType=c,f.lanes=R,f;case v:return(f=Qn(13,b,m,C)).elementType=v,f.lanes=R,f;case x:return(f=Qn(19,b,m,C)).elementType=x,f.lanes=R,f;case _:return Tf(b,C,R,m);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case d:D=10;break e;case p:D=9;break e;case g:D=11;break e;case y:D=14;break e;case w:D=16,E=null;break e}throw Error(s(130,f==null?f:typeof f,""))}return(m=Qn(D,b,m,C)).elementType=f,m.type=E,m.lanes=R,m}function ja(f,m,b,E){return(f=Qn(7,f,E,m)).lanes=b,f}function Tf(f,m,b,E){return(f=Qn(22,f,E,m)).elementType=_,f.lanes=b,f.stateNode={isHidden:!1},f}function xv(f,m,b){return(f=Qn(6,f,null,m)).lanes=b,f}function _v(f,m,b){return(m=Qn(4,f.children!==null?f.children:[],f.key,m)).lanes=b,m.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},m}function DN(f,m,b,E,C){this.tag=m,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=We,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g0(0),this.expirationTimes=g0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g0(0),this.identifierPrefix=E,this.onRecoverableError=C,Ze&&(this.mutableSourceEagerHydrationData=null)}function dT(f,m,b,E,C,R,D,$,Q){return f=new DN(f,m,b,$,Q),m===1?(m=1,R===!0&&(m|=8)):m=0,R=Qn(3,null,null,m),f.current=R,R.stateNode=f,R.memoizedState={element:E,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},M0(R),f}function fT(f){if(!f)return Io;e:{if(M(f=f._reactInternals)!==f||f.tag!==1)throw Error(s(170));var m=f;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(Tn(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(s(171))}if(f.tag===1){var b=f.type;if(Tn(b))return Ob(f,b,m)}return m}function pT(f){var m=f._reactInternals;if(m===void 0)throw typeof f.render=="function"?Error(s(188)):(f=Object.keys(f).join(","),Error(s(268,f)));return(f=U(m))===null?null:f.stateNode}function mT(f,m){if((f=f.memoizedState)!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<m?b:m}}function Ef(f,m){mT(f,m),(f=f.alternate)&&mT(f,m)}function UN(f){return(f=U(f))===null?null:f.stateNode}function jN(){return null}return tT=function(f,m,b){if(f!==null)if(f.memoizedProps!==m.pendingProps||sn.current)on=!0;else{if(!(f.lanes&b)&&!(128&m.flags))return on=!1,function(ve,te,he){switch(te.tag){case 3:LS(te),Rl();break;case 5:nS(te);break;case 1:Tn(te.type)&&Fd(te);break;case 4:N0(te,te.stateNode.containerInfo);break;case 10:Yb(0,te.type._context,te.memoizedProps.value);break;case 13:var Ce=te.memoizedState;if(Ce!==null)return Ce.dehydrated!==null?(gt(Ht,1&Ht.current),te.flags|=128,null):he&te.child.childLanes?DS(ve,te,he):(gt(Ht,1&Ht.current),(ve=Xs(ve,te,he))!==null?ve.sibling:null);gt(Ht,1&Ht.current);break;case 19:if(Ce=(he&te.childLanes)!=0,(128&ve.flags)!=0){if(Ce)return jS(ve,te,he);te.flags|=128}var Ge=te.memoizedState;if(Ge!==null&&(Ge.rendering=null,Ge.tail=null,Ge.lastEffect=null),gt(Ht,Ht.current),Ce)break;return null;case 22:case 23:return te.lanes=0,OS(ve,te,he)}return Xs(ve,te,he)}(f,m,b);on=(131072&f.flags)!=0}else on=!1,At&&1048576&m.flags&&jb(m,Hd,m.index);switch(m.lanes=0,m.tag){case 2:var E=m.type;af(f,m),f=m.pendingProps;var C=kl(m,Lr.current);Nl(m,b),C=j0(null,m,E,f,C,b);var R=X0();return m.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,Tn(E)?(R=!0,Fd(m)):R=!1,m.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,M0(m),C.updater=qd,m.stateNode=C,C._reactInternals=m,O0(m,E,f,b),m=q0(null,m,E,!0,R,b)):(m.tag=0,At&&R&&w0(m),an(null,m,C,b),m=m.child),m;case 16:E=m.elementType;e:{switch(af(f,m),f=m.pendingProps,E=(C=E._init)(E._payload),m.type=E,C=m.tag=function(ve){if(typeof ve=="function")return yv(ve)?1:0;if(ve!=null){if((ve=ve.$$typeof)===g)return 11;if(ve===y)return 14}return 2}(E),f=mi(E,f),C){case 0:m=V0(null,m,E,f,b);break e;case 1:m=BS(null,m,E,f,b);break e;case 11:m=IS(null,m,E,f,b);break e;case 14:m=MS(null,m,E,mi(E.type,f),b);break e}throw Error(s(306,E,""))}return m;case 0:return E=m.type,C=m.pendingProps,V0(f,m,E,C=m.elementType===E?C:mi(E,C),b);case 1:return E=m.type,C=m.pendingProps,BS(f,m,E,C=m.elementType===E?C:mi(E,C),b);case 3:e:{if(LS(m),f===null)throw Error(s(387));E=m.pendingProps,C=(R=m.memoizedState).element,Wb(f,m),Vd(m,E,null,b);var D=m.memoizedState;if(E=D.element,Ze&&R.isDehydrated){if(R={element:E,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},m.updateQueue.baseState=R,m.memoizedState=R,256&m.flags){m=FS(f,m,E,b,C=Dl(Error(s(423)),m));break e}if(E!==C){m=FS(f,m,E,b,C=Dl(Error(s(424)),m));break e}for(Ze&&(Gn=qO(m.stateNode.containerInfo),En=m,At=!0,pi=null,kc=!1),b=rS(m,null,E,b),m.child=b;b;)b.flags=-3&b.flags|4096,b=b.sibling}else{if(Rl(),E===C){m=Xs(f,m,b);break e}an(f,m,E,b)}m=m.child}return m;case 5:return nS(m),f===null&&T0(m),E=m.type,C=m.pendingProps,R=f!==null?f.memoizedProps:null,D=C.children,xe(E,C)?D=null:R!==null&&xe(E,R)&&(m.flags|=32),NS(f,m),an(f,m,D,b),m.child;case 6:return f===null&&T0(m),null;case 13:return DS(f,m,b);case 4:return N0(m,m.stateNode.containerInfo),E=m.pendingProps,f===null?m.child=Bl(m,null,E,b):an(f,m,E,b),m.child;case 11:return E=m.type,C=m.pendingProps,IS(f,m,E,C=m.elementType===E?C:mi(E,C),b);case 7:return an(f,m,m.pendingProps,b),m.child;case 8:case 12:return an(f,m,m.pendingProps.children,b),m.child;case 10:e:{if(E=m.type._context,C=m.pendingProps,R=m.memoizedProps,Yb(0,E,D=C.value),R!==null)if(fi(R.value,D)){if(R.children===C.children&&!sn.current){m=Xs(f,m,b);break e}}else for((R=m.child)!==null&&(R.return=m);R!==null;){var $=R.dependencies;if($!==null){D=R.child;for(var Q=$.firstContext;Q!==null;){if(Q.context===E){if(R.tag===1){(Q=js(-1,b&-b)).tag=2;var ee=R.updateQueue;if(ee!==null){var ie=(ee=ee.shared).pending;ie===null?Q.next=Q:(Q.next=ie.next,ie.next=Q),ee.pending=Q}}R.lanes|=b,(Q=R.alternate)!==null&&(Q.lanes|=b),k0(R.return,b,m),$.lanes|=b;break}Q=Q.next}}else if(R.tag===10)D=R.type===m.type?null:R.child;else if(R.tag===18){if((D=R.return)===null)throw Error(s(341));D.lanes|=b,($=D.alternate)!==null&&($.lanes|=b),k0(D,b,m),D=R.sibling}else D=R.child;if(D!==null)D.return=R;else for(D=R;D!==null;){if(D===m){D=null;break}if((R=D.sibling)!==null){R.return=D.return,D=R;break}D=D.return}R=D}an(f,m,C.children,b),m=m.child}return m;case 9:return C=m.type,E=m.pendingProps.children,Nl(m,b),E=E(C=Wn(C)),m.flags|=1,an(f,m,E,b),m.child;case 14:return C=mi(E=m.type,m.pendingProps),MS(f,m,E,C=mi(E.type,C),b);case 15:return RS(f,m,m.type,m.pendingProps,b);case 17:return E=m.type,C=m.pendingProps,C=m.elementType===E?C:mi(E,C),af(f,m),m.tag=1,Tn(E)?(f=!0,Fd(m)):f=!1,Nl(m,b),Zb(m,E,C),O0(m,E,C,b),q0(null,m,E,!0,f,b);case 19:return jS(f,m,b);case 22:return OS(f,m,b)}throw Error(s(156,m.tag))},e.attemptContinuousHydration=function(f){if(f.tag===13){var m=Qi(f,134217728);m!==null&&Kn(m,f,134217728,Ur()),Ef(f,134217728)}},e.attemptDiscreteHydration=function(f){if(f.tag===13){var m=Qi(f,1);m!==null&&Kn(m,f,1,Ur()),Ef(f,1)}},e.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var m=Lo(f),b=Qi(f,m);b!==null&&Kn(b,f,m,Ur()),Ef(f,m)}},e.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var m=f.stateNode;if(m.current.memoizedState.isDehydrated){var b=Cc(m.pendingLanes);b!==0&&(v0(m,1|b),ln(m,pr()),!(6&Je)&&(Xl(),qi()))}break;case 13:iT(function(){var E=Qi(f,1);if(E!==null){var C=Ur();Kn(E,f,1,C)}}),Ef(f,1)}},e.batchedUpdates=function(f,m){var b=Je;Je|=1;try{return f(m)}finally{(Je=b)===0&&(Xl(),jd&&qi())}},e.createComponentSelector=function(f){return{$$typeof:cf,value:f}},e.createContainer=function(f,m,b,E,C,R,D){return dT(f,m,!1,null,0,E,0,R,D)},e.createHasPseudoClassSelector=function(f){return{$$typeof:hf,value:f}},e.createHydrationContainer=function(f,m,b,E,C,R,D,$,Q){return(f=dT(b,E,!0,f,0,R,0,$,Q)).context=fT(null),b=f.current,(R=js(E=Ur(),C=Lo(b))).callback=m??null,Ro(b,R,C),f.current.lanes=C,Ac(f,C,E),ln(f,E),f},e.createPortal=function(f,m,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:f,containerInfo:m,implementation:b}},e.createRoleSelector=function(f){return{$$typeof:df,value:f}},e.createTestNameSelector=function(f){return{$$typeof:ff,value:f}},e.createTextSelector=function(f){return{$$typeof:pf,value:f}},e.deferredUpdates=function(f){var m=it,b=Gt.transition;try{return Gt.transition=null,it=16,f()}finally{it=m,Gt.transition=b}},e.discreteUpdates=function(f,m,b,E,C){var R=it,D=Gt.transition;try{return Gt.transition=null,it=1,f(m,b,E,C)}finally{it=R,Gt.transition=D,Je===0&&Xl()}},e.findAllNodes=av,e.findBoundingRects=function(f,m){if(!Co)throw Error(s(363));m=av(f,m),f=[];for(var b=0;b<m.length;b++)f.push(Nd(m[b]));for(m=f.length-1;0<m;m--)for(var E=(b=f[m]).x,C=E+b.width,R=b.y,D=R+b.height,$=m-1;0<=$;$--)if(m!==$){var Q=f[$],ee=Q.x,ie=ee+Q.width,ve=Q.y,te=ve+Q.height;if(E>=ee&&R>=ve&&C<=ie&&D<=te){f.splice(m,1);break}if(!(E!==ee||b.width!==Q.width||te<R||ve>D)){ve>R&&(Q.height+=ve-R,Q.y=R),te<D&&(Q.height=D-ve),f.splice(m,1);break}if(!(R!==ve||b.height!==Q.height||ie<E||ee>C)){ee>E&&(Q.width+=ee-E,Q.x=E),ie<C&&(Q.width=C-ee),f.splice(m,1);break}}return f},e.findHostInstance=pT,e.findHostInstanceWithNoPortals=function(f){return(f=(f=F(f))!==null?L(f):null)===null?null:f.stateNode},e.findHostInstanceWithWarning=function(f){return pT(f)},e.flushControlled=function(f){var m=Je;Je|=1;var b=Gt.transition,E=it;try{Gt.transition=null,it=1,f()}finally{it=E,Gt.transition=b,(Je=m)===0&&(Xl(),qi())}},e.flushPassiveEffects=Ua,e.flushSync=iT,e.focusWithin=function(f,m){if(!Co)throw Error(s(363));for(m=eT(f=iv(f),m),m=Array.from(m),f=0;f<m.length;){var b=m[f++];if(!zn(b)){if(b.tag===5&&EO(b.stateNode))return!0;for(b=b.child;b!==null;)m.push(b),b=b.sibling}}return!1},e.getCurrentUpdatePriority=function(){return it},e.getFindAllNodesFailureDescription=function(f,m){if(!Co)throw Error(s(363));var b=0,E=[];f=[iv(f),0];for(var C=0;C<f.length;){var R=f[C++],D=f[C++],$=m[D];if((R.tag!==5||!zn(R))&&(sv(R,$)&&(E.push(ov($)),++D>b&&(b=D)),D<m.length))for(R=R.child;R!==null;)f.push(R,D),R=R.sibling}if(b<m.length){for(f=[];b<m.length;b++)f.push(ov(m[b]));return`findAllNodes was able to match part of the selector:
  `+E.join(" > ")+`

No matching component was found for:
  `+f.join(" > ")}return null},e.getPublicRootInstance=function(f){return(f=f.current).child?f.child.tag===5?Y(f.child.stateNode):f.child.stateNode:null},e.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:UN,findFiberByHostInstance:f.findFiberByHostInstance||jN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)f=!0;else{try{Ud=m.inject(f),Vi=m}catch{}f=!!m.checkDCE}}return f},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(f,m,b,E){if(!Co)throw Error(s(363));f=av(f,m);var C=PO(f,b,E).disconnect;return{disconnect:function(){C()}}},e.registerMutableSourceForHydration=function(f,m){var b=m._getVersion;b=b(m._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[m,b]:f.mutableSourceEagerHydrationData.push(m,b)},e.runWithPriority=function(f,m){var b=it;try{return it=f,m()}finally{it=b}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(f,m,b,E){var C=m.current,R=Ur(),D=Lo(C);return b=fT(b),m.context===null?m.context=b:m.pendingContext=b,(m=js(R,D)).payload={element:f},(E=E===void 0?null:E)!==null&&(m.callback=E),(f=Ro(C,m,D))!==null&&(Kn(f,C,D,R),Wd(f,C,D)),D},e}),_P}({get exports(){return t_},set exports(r){t_=r}}).exports=tz();var rz=AH(t_),NR={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},n_={},mp={get exports(){return n_},set exports(r){n_=r}};(function(){var r,e,t,n,i,s;typeof performance<"u"&&performance!==null&&performance.now?mp.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(mp.exports=function(){return(r()-i)/1e6},e=process.hrtime,n=(r=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=n-s):Date.now?(mp.exports=function(){return Date.now()-t},t=Date.now()):(mp.exports=function(){return new Date().getTime()-t},t=new Date().getTime())}).call(CH);var SP,wu={},za={};({get exports(){return wu},set exports(r){wu=r}}).exports=(SP||(SP=1,za.ConcurrentRoot=1,za.ContinuousEventPriority=4,za.DefaultEventPriority=16,za.DiscreteEventPriority=1,za.IdleEventPriority=536870912,za.LegacyRoot=0),za);var nz={};function Fy(r,e){r.addChild&&(r.addChild(e),typeof e.didMount=="function"&&e.didMount(e,r))}function BR(r,e){var t,n,i;(t=r.willUnmount)===null||t===void 0||t.call(r,r,e),((n=r.config)===null||n===void 0?void 0:n.destroyChildren)!==!1&&(i=r.children)!==null&&i!==void 0&&i.length&&bo(r.children).forEach(function(s){BR(s,r)})}function TP(r,e){var t;BR(e,r),r.removeChild(e);var n=(t=e.config)!==null&&t!==void 0?t:{},i=n.destroy,s=i===void 0||i,o=n.destroyChildren,a=o===void 0||o,u=n.destroyTexture,l=u!==void 0&&u,h=n.destroyBaseTexture,c=h!==void 0&&h;s&&e.destroy({children:a,texture:l,baseTexture:c})}function EP(r,e,t){var n,i;Yt(e!==t,"Cannot insert node before itself"),r.children.indexOf(e)!==-1&&r.removeChild(e);var s=r.getChildIndex(t);r.addChildAt(e,s),(n=r.__reactpixi)===null||n===void 0||(i=n.root)===null||i===void 0||i.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertBefore"})}var PP=null,Mi=rz({getRootHostContext:function(){return nz},getChildHostContext:function(r){return r},getChildHostContextForEventComponent:function(r){return r},getPublicInstance:function(r){return r},getCurrentEventPriority:function(){return function(){var r,e;if(typeof window>"u")return wu.DefaultEventPriority;switch((r=window)===null||r===void 0||(e=r.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return wu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return wu.ContinuousEventPriority;default:return wu.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(r){var e,t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=QH[r];if(typeof s=="function"&&(e=s(i,n)),!e){var o=OR[r];o&&((e=o.create(n,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((t=e)===null||t===void 0?void 0:t.applyProps)=="function"?e.applyProps:Rs)(e,{},n)),e},hideInstance:function(r){r.visible=!1},unhideInstance:function(r,e){var t=e==null||!e.hasOwnProperty("visible")||e.visible;r.visible=t},finalizeInitialChildren:function(r,e,t){return!1},prepareUpdate:function(r,e,t,n,i,s){return PP=function(o,a,u,l){var h=null;for(var c in u)!l.hasOwnProperty(c)&&u.hasOwnProperty(c)&&u[c]!==null&&(c===Jx||(h||(h=[]),h.push(c,null)));for(var d in l){var p=l[d],g=u!==null?u[d]:void 0;!l.hasOwnProperty(d)||p===g||p===null&&g===null||d===Jx||(h||(h=[]),h.push(d,p))}return h}(0,0,t,n)},shouldSetTextContent:function(r,e){return!1},shouldDeprioritizeSubtree:function(r,e){var t=e.alpha===void 0||e.alpha>0,n=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(t&&n&&i)},createTextInstance:function(r,e,t){Yt(!1,'Error trying to add text node "'.concat(r,'"'),"text strings as children of a Pixi component is not supported. To add some text, use &lt;Text text={string} /&gt;")},unhideTextInstance:function(r,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:n_,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Fy.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Fy.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=Fy.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=TP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=TP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:EP,insertInContainerBefore:function(){for(var r,e,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var s=EP.apply(null,n);return(r=n[0].__reactpixi)===null||r===void 0||(e=r.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(r,e,t,n,i){var s,o,a=r&&r.applyProps;typeof a!="function"&&(a=Rs),(a(r,n,i)||PP)&&((s=r.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(r,e,t,n,i){},commitTextUpdate:function(r,e,t){},resetTextContent:function(r){},clearContainer:function(r){},getFundamentalComponentInstance:function(r){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(r){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(r){throw new Error("Not yet implemented.")},getInstanceFromNode:function(r){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(r){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(r){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(r){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(r){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(r){}}),iz=NR.dependencies["react-dom"].replace(/[^0-9.]/g,""),sz=NR.name;Mi.injectIntoDevTools({bundleType:0,version:iz,rendererPackageName:sz,findHostInstanceByFiber:Mi.findHostInstance});var xa=new Map;function LR(r){if(Yt(qr.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`."),xa.has(r)){var e=xa.get(r).pixiFiberContainer;Mi.updateContainer(null,e,void 0,function(){xa.delete(r)})}}function FR(r){Yt(qr.prototype.isPrototypeOf(r),"Invalid argument `container`, expected instance of `Container`.");var e=xa.get(r);if(Yt(!e,"createRoot should only be called once"),!e){var t=Mi.createContainer(r);e={pixiFiberContainer:t,reactRoot:{render:function(n){return Mi.updateContainer(n,t,void 0),Mi.getPublicRootInstance(t)},unmount:function(){LR(r),xa.delete(r)}}},xa.set(r,e)}return e.reactRoot}function oz(r,e,t){var n;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),t!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),xa.has(e)?n=xa.get(e).reactRoot:n=FR(e),n.render(r)}function az(r){LR(r)}function ld(){return ld=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},ld.apply(this,arguments)}function lz(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function uz(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,IR(n.key),n)}}function Ys(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function qm(r,e){return qm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},qm(r,e)}function cz(r,e){if(e&&(Ln(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ys(r)}function Km(r){return Km=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Km(r)}var Zg=lo.createContext(null),DR=Zg.Provider,UR=Zg.Consumer,hz=function(r){var e=lo.forwardRef(function(t,n){return lo.createElement(UR,null,function(i){return lo.createElement(r,ld({},t,{ref:n,app:i}))})});return e.displayName="withPIXIApp(".concat(r.displayName||r.name,")"),e};function dz(r){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var t,n=Km(r);if(e){var i=Km(this).constructor;t=Reflect.construct(n,arguments,i)}else t=n.apply(this,arguments);return cz(this,t)}}function CP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function gp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(t),!0).forEach(function(n){Vt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):CP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var AP=function(){},jR={width:Tt.number,height:Tt.number,onMount:Tt.func,onUnmount:Tt.func,raf:Tt.bool,renderOnComponentChange:Tt.bool,children:Tt.node,options:Tt.shape({autoStart:Tt.bool,width:Tt.number,height:Tt.number,useContextAlpha:Tt.bool,backgroundAlpha:Tt.number,autoDensity:Tt.bool,antialias:Tt.bool,preserveDrawingBuffer:Tt.bool,resolution:Tt.number,forceCanvas:Tt.bool,backgroundColor:Tt.number,clearBeforeRender:Tt.bool,powerPreference:Tt.string,sharedTicker:Tt.bool,sharedLoader:Tt.bool,resizeTo:function(r,e){var t=r[e];t&&Yt(t===window||t instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(Ln(t),", expect `window` or an `HTMLElement`."))},view:function(r,e,t){var n=r[e];n&&Yt(n instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(Ln(n),", supplied to ").concat(t,", expected `<canvas> Element`"))}})},fz={width:800,height:600,onMount:AP,onUnmount:AP,raf:!0,renderOnComponentChange:!0},i_=function(r){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&qm(s,o)})(i,lo.Component);var e,t,n=dz(i);function i(){var s;lz(this,i);for(var o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];return Vt(Ys(s=n.call.apply(n,[this].concat(a))),"_canvas",null),Vt(Ys(s),"_mediaQuery",null),Vt(Ys(s),"_ticker",null),Vt(Ys(s),"_needsUpdate",!0),Vt(Ys(s),"app",null),Vt(Ys(s),"updateSize",function(){var l=s.props,h=l.width,c=l.height,d=l.options;d!=null&&d.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(h,c)}),Vt(Ys(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),Vt(Ys(s),"renderStage",function(){var l=s.props,h=l.renderOnComponentChange;!l.raf&&h&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(t=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,u=s.height,l=s.options,h=s.raf,c=s.renderOnComponentChange;this.app=new Rg(gp(gp({width:a,height:u,view:this._canvas},l),{},{autoDensity:(l==null?void 0:l.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[h?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=Mi.createContainer(this.app.stage),Mi.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),l!=null&&l.autoDensity&&window.matchMedia&&(l==null?void 0:l.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),c&&!h&&(this._ticker=new Dt,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var u,l=this.props,h=l.width,c=l.height,d=l.raf,p=l.renderOnComponentChange,g=l.options;(g==null?void 0:g.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(g==null?void 0:g.resolution)&&(this.app.renderer.resolution=g.resolution,this.resetInteractionManager()),s.height===c&&s.width===h&&((u=s.options)===null||u===void 0?void 0:u.resolution)===(g==null?void 0:g.resolution)||this.updateSize(),s.raf!==d&&this.app.ticker[d?"start":"stop"](),Mi.updateContainer(this.getChildren(),this.mountNode,this),s.width===h&&s.height===c&&s.raf===d&&s.renderOnComponentChange===p&&s.options===g||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return lo.createElement(DR,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),Mi.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,u=this.props.options;return u&&u.view?(Yt(u.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):lo.createElement("canvas",ld({},(s=this.props,o=[].concat(bo(Object.keys(jR)),bo(Object.keys(e_))),Object.keys(s).filter(function(l){return!o.includes(l)}).reduce(function(l,h){return gp(gp({},l),{},Vt({},h,s[h]))},{})),{ref:function(l){return a._canvas=l}}))}}])&&uz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}();i_.propTypes=jR,i_.defaultProps=fz;var pz=i_;function XR(){var r=B.useContext(Zg);return Yt(r instanceof Rg,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider"),r}function mz(r){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],t=XR();Yt(typeof r=="function","`useTick` needs a callback function."),Yt(t instanceof Rg,"No Context found with `%s`. Make sure to wrap component with `%s`","Application","AppProvider");var n=B.useRef(null);B.useEffect(function(){n.current=r},[r]),B.useEffect(function(){if(e){var i=function(s){return n.current.apply(t.ticker,[s,t.ticker])};return t.ticker.add(i),function(){t.ticker&&t.ticker.remove(i)}}},[e])}function gz(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function s_(r,e,t){return s_=gz()?Reflect.construct.bind():function(n,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(n,o));return s&&qm(a,s.prototype),a},s_.apply(null,arguments)}var vz=["children","apply"];function kP(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function vp(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(t),!0).forEach(function(n){Vt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):kP(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var yz=function(r,e){Yt(Ln(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var t=Object.keys(e),n=function(i){var s=i.children,o=i.apply,a=Ma(i,vz),u=B.useRef(B.useMemo(function(){return t.map(function(c){var d,p=(a==null||(d=a[c])===null||d===void 0?void 0:d.construct)||[];return s_(e[c],bo(p))})},[t])),l=B.useMemo(function(){return t.reduce(function(c,d,p){return vp(vp({},c),{},Vt({},d,u.current[p]))},{})},[t]),h=B.useMemo(function(){return Object.keys(a).filter(RR(MR(t))).reduce(function(c,d){return vp(vp({},c),{},Vt({},d,a[d]))},{})},[a,t]);return t.forEach(function(c,d){return Object.assign(u.current[d],a[c])}),o&&function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];return d.every(function(g){return typeof g=="function"})}(o)&&o.call(r,l),lo.createElement(r,ld({},h,{filters:u.current}),s)};return n.displayName="FilterWrapper",n.propTypes={children:Tt.node,apply:Tt.func},n},xz=Sn.BitmapText,_z=Sn.Container,wz=Sn.Graphics,bz=Sn.NineSlicePlane,Sz=Sn.ParticleContainer,Tz=Sn.Sprite,Ez=Sn.AnimatedSprite,Pz=Sn.Text,Cz=Sn.TilingSprite,Az=Sn.SimpleMesh,kz=Sn.SimpleRope;const Iz=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:Ez,AppConsumer:UR,AppContext:Zg,AppProvider:DR,BitmapText:xz,Container:_z,Graphics:wz,NineSlicePlane:bz,ParticleContainer:Sz,PixiComponent:ZH,PixiFiber:Mi,SimpleMesh:Az,SimpleRope:kz,Sprite:Tz,Stage:pz,TYPES:Sn,Text:Pz,TilingSprite:Cz,applyDefaultProps:Rs,createRoot:FR,eventHandlers:Vm,render:oz,unmountComponentAtNode:az,useApp:XR,useTick:mz,withFilters:yz,withPixiApp:hz},Symbol.toStringTag,{value:"Module"})),Mz=uC(Iz);Qg.exports=Mz;var Rt=Qg.exports;function HR(r,e=!0){const t=fr(Be.Obj),n=B.useRef(null);B.useEffect(()=>{n.current=r},[r]),B.useEffect(()=>{if(e){const i=s=>n.current.apply(t.turboTicker,[s,t.turboTicker]);return t.turboTicker.add(i),()=>{t.turboTicker&&t.turboTicker.remove(i)}}},[e])}function Pd(r,e,t){Rt.useTick(r,e&&!t),HR(r,e&&t)}function o_(r,e,t=[]){const{current:n}=B.useRef({fn:r,timer:null});return B.useEffect(function(){n.fn=r},[r]),B.useCallback(function(...s){n.timer||(n.timer=setTimeout(()=>{clearTimeout(n.timer),delete n.timer},e),n.fn(...s))},t)}function Rz(r,e,t=[]){const{current:n}=B.useRef({fn:r,timer:null});return B.useEffect(function(){n.fn=r},[r]),B.useCallback(function(...s){n.timer&&clearTimeout(n.timer),n.timer=setTimeout(()=>{n.fn(...s)},e)},t)}function Oz(r,e=[]){const{state:t}=B.useContext(_t),n=t.setting.orientation;return PR(r,`${n}-`)}function fr(r){return B.useMemo(()=>r,[])}function zR(r,e,t,n,i=[]){const{current:s}=B.useRef({timer:null}),[o,a]=B.useState(!1);B.useEffect(()=>{n&&(s.timer=0,a(!0))},i),B.useEffect(()=>{a(n),s.timer=0},[n]),Pd((u,l)=>{s.timer+=u,s.timer>t&&(e(),a(!1))},o,r)}function Qm(r,e,t,n=[]){zR(!1,r,e,t,n)}function uc(r,e,t,n=[]){zR(!0,r,e,t,n)}function $R(r,e,t,n,i=[]){const{current:s}=B.useRef({time:null});B.useEffect(()=>{n&&(s.time=0)},i),B.useEffect(()=>{n&&(s.time=0)},[n]),Pd((o,a)=>{s.time+=o,s.time>=e&&(s.time=0,t())},n,r)}function Yu(r,e,t,n=[]){$R(!1,r,e,t,n)}function Nz(r,e,t,n=[]){$R(!0,r,e,t,n)}function Cd(){return B.useContext(_t)}const ge=B.forwardRef(({hitFrame:r,children:e,...t},n)=>{const i=B.useMemo(()=>r?new $e(...r):null,[]);return T.jsx(Rt.Container,{hitArea:i,...t,ref:n,children:e})}),bc=({children:r})=>Oz(r);function Bz({children:r}){const e=B.useMemo(()=>{let i=!1;return i=hn("debug","0")==="1",i},[]);B.useEffect(()=>{e||(window.oncontextmenu=function(i){i.preventDefault()})},[]);const t=B.useMemo(()=>[...B.Children.toArray(r),T.jsx(Lz,{})],[]),n=e?B.Children.map(t,i=>B.cloneElement(i,{debug:e})):[];return T.jsxs(ge,{visible:e,children:[...n]})}function Lz(){const{state:r}=Cd(),{spinModel:e}=r.spin;return B.useEffect(()=>{e&&console.log("spin",e.data)},[e]),T.jsx(T.Fragment,{})}const Fz=({frame:r=[0,0,100,100],color:e,radius:t,...n},i)=>{const s=B.useCallback(o=>{o.clear(),o.beginFill(e),t?o.drawRoundedRect(...r,t):o.drawRect(...r),o.endFill()},[...r,e,t]);return T.jsx(Rt.Graphics,{ref:i,draw:s,...n})},ao=B.forwardRef(Fz),Os=B.forwardRef(({style:r,maxScaleLength:e,...t},n)=>{const i=B.useRef(),s=B.useMemo(()=>r instanceof ks?r:new ks(r),[]);return B.useEffect(()=>{if(e&&i.current){const o=setTimeout(()=>{const a=i.current.width,u=i.current.scale.x,l=e/a*u,h=u>0?1:-1,c=i.current.scale.y>0?1:-1;l<1?i.current.scale.set(l*h,l*c):i.current.scale.x!=1&&i.current.scale.set(1*h,1*c),clearTimeout(o)},1)}},[t.text,e]),B.useImperativeHandle(n,()=>i.current,[i]),T.jsx(Rt.Text,{ref:i,...t,style:s})}),Dz=B.forwardRef(({maxScaleLength:r,...e},t)=>{const n=B.useRef();return B.useEffect(()=>{if(r&&n.current){const i=setTimeout(()=>{const s=n.current.width,o=n.current.scale.x,a=r/s*o,u=o>0?1:-1,l=n.current.scale.y>0?1:-1;a<1?n.current.scale.set(a*u,a*l):n.current.scale.x!=1&&n.current.scale.set(1*u,1*l),clearTimeout(i)},1)}},[e.text,r]),B.useImperativeHandle(t,()=>n.current,[n]),T.jsx(Rt.BitmapText,{ref:n,...e})}),Oh=B.forwardRef(({text:r,...e},t)=>{const n=B.useMemo(()=>Un(bn,r),[r]);return T.jsx(Os,{ref:t,text:n,...e})});function Uz({debug:r,...e}){const[t,n]=B.useState(60);return Rt.useTick(i=>{n(Math.round(1/(i/1e3)))},r),T.jsx(bc,{children:T.jsxs(ge,{...e,children:[T.jsx(ao,{frame:[0,0,70,25]}),T.jsx(Os,{text:`${t} FPS`,style:{align:"center",fill:"#FF0000",fontSize:20}})]})})}function a_(r){return"Minified Redux error #"+r+"; visit https://redux.js.org/Errors?code="+r+" for the full message or use the non-minified dev environment for full errors. "}var Dy=function(){return Math.random().toString(36).substring(7).split("").join(".")},IP={INIT:"@@redux/INIT"+Dy(),REPLACE:"@@redux/REPLACE"+Dy(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Dy()}};function jz(r){Object.keys(r).forEach(function(e){var t=r[e],n=t(void 0,{type:IP.INIT});if(typeof n>"u")throw new Error(a_(12));if(typeof t(void 0,{type:IP.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(a_(13))})}function Xz(r){for(var e=Object.keys(r),t={},n=0;n<e.length;n++){var i=e[n];typeof r[i]=="function"&&(t[i]=r[i])}var s=Object.keys(t),o;try{jz(t)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var h=!1,c={},d=0;d<s.length;d++){var p=s[d],g=t[p],v=u[p],x=g(v,l);if(typeof x>"u")throw l&&l.type,new Error(a_(14));c[p]=x,h=h||x!==v}return h=h||s.length!==Object.keys(u).length,h?c:u}}const Hz=(r={},e)=>{const t=[].concat(r.scenes);switch(e.type){case Oj:return t.push(e.value),{...r,scenes:t};case Nj:return t.pop(),{...r,scenes:t};case aI:return t.pop(),t.push(e.value),{...r,scenes:t};case Bj:return{...r};case lI:return{...r,assetsLoadingProgress:e.value};default:return r}},zz={sceneManager:{scenes:["preload"],assetsLoadingProgress:0}};function Yw(r){return{type:aI,value:r}}function l_(r){return{type:lI,value:r}}const u_="∞",$z=(r={},e)=>{switch(e.type){case Kk:let t=r.status;return r.status=="idle"?t="spin":r.status=="stopping"&&(t="idle"),{...r,status:t};case Qk:return{...r,spinModel:e.value};case Zk:return{...r,loadErrorModel:e.value};case Jk:return{...r,status:"stopping",spinModel:e.value};case eI:return{...r,status:"idle"};case tI:return{...r,betAmount:e.value};case rI:return{...r,betLevel:e.value};case nI:return{...r,autoSpinCount:e.value.autoSpinCount,stopAutoSpinLimit:e.value.stopAutoSpinLimit};case Rj:{let n=r.autoSpinCount;return n!=u_&&--n,{...r,status:"spin",autoSpinCount:n}}case iI:return{...r,autoSpinCount:0};case sI:return{...r,speedModel:e.value};case oI:return{...r,lineBetsModel:e.value};default:return r}},Yz={spin:{status:"idle",autoSpinCount:0,lineBetsModel:null,speedModel:"normal",stopAutoSpinLimit:{totalBetTimes:new ut(0),signleWin:new ut(0),balanceTo:new ut(0)}}};function MP(){return{type:Kk}}function Gz(r){return{type:Qk,value:r}}function Wz(r){return{type:Zk,value:r}}function Vz(r){return{type:Jk,value:r}}function YR(){return{type:eI}}function Qs(r){return{type:tI,value:new ut(r)}}function c_(r){return{type:rI,value:new ut(r)}}function qz(r,e,t,n){return{type:nI,value:{autoSpinCount:r,stopAutoSpinLimit:{totalBetTimes:e==u_?u_:new ut(e),signleWin:new ut(t),balanceTo:new ut(n)}}}}function RP(){return{type:iI}}function Kz(r){return{type:sI,value:r}}function Qz(r){return{type:oI,value:r}}const Zz=(r={},e)=>{switch(e.type){case Cj:return{};case Xk:const t=e.value;return{...r,loggingIn:!0,memberName:t.name,isTestAccount:t.test,balance:t.balance,currency:t.currency};case Hk:return{...r,balance:e.value.balance};default:return r}},Jz={user:{loggingIn:!1,memberName:"w88",currency:"RMB",isTestAccount:!0,balance:new ut(0)}};function e$(r){return{type:Xk,value:r}}function Uy(r){return{type:Hk,value:{balance:new ut(r)}}}function t$(){const r=Yc("user")||Zz,e=Yc("setting")||Lj,t=Yc("spin")||$z,n=Yc("scene")||Hz,i=Yc("reducers");return Xz({user:r,setting:e,spin:t,sceneManager:n,...i})}function yp(r,e={},t){const n=Object.assign(r[t],e[t]||{});return r[t]=n,r}function r$(){const r=yp(Jz,iu("user"),"user"),e=yp(Fj,iu("setting"),"setting"),t=yp(Yz,iu("spin"),"spin"),n=yp(zz,iu("scene"),"sceneManager");return pB(r,e,t,n)}function n$(){const{state:r}=B.useContext(_t),{scenes:e}=r.sceneManager,t=e[e.length-1]=="preload";return T.jsx("div",{className:`page-mod ${t?"db":"dn"}`,children:T.jsx("div",{className:"scene-preload-mod",children:T.jsxs("div",{className:"loading-animation-default-mod",children:[T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{}),T.jsx("div",{})]})})})}var GR=(r=>(r[r.NotEnoughBalance=1e3]="NotEnoughBalance",r[r.UserNotFound=1001]="UserNotFound",r[r.ErrorReadGameState=1002]="ErrorReadGameState",r[r.InvalidCredit=1003]="InvalidCredit",r[r.ConcurrentSpin=1004]="ConcurrentSpin",r[r.NoGameState=1005]="NoGameState",r[r.InvalidGameState=1006]="InvalidGameState",r[r.ExpiredState=1007]="ExpiredState",r[r.InternalFailure=1008]="InternalFailure",r[r.ExternalFailure=1009]="ExternalFailure",r))(GR||{});const i$=()=>{const{state:r,dispatch:e}=B.useContext(_t),{code:t}=r.setting.error;return B.useEffect(()=>{t&&(t==="000"||t==="001"?e(en(t,!0,!1)):t==1e3?e(en(t,!0,!0)):t==1005?e(en("",!1,!0)):e(en(t,!0,!1)))},[t]),T.jsx(T.Fragment,{})};function s$(){const r=document.getElementById("context");r.style.setProperty("opacity","1"),r.className="context-fadein";const e=document.getElementById("logo");document.body.removeChild(e)}const o$=()=>{const{state:r}=B.useContext(_t),{scenes:e}=r.sceneManager,t=e[e.length-1]=="load";return B.useMemo(()=>{t&&s$()},[t]),T.jsx(T.Fragment,{})};var h_={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(r){(function(){var e=function(){this.init()};e.prototype={init:function(){var c=this||t;return c._counter=1e3,c._html5AudioPool=[],c.html5PoolSize=10,c._codecs={},c._howls=[],c._muted=!1,c._volume=1,c._canPlayEvent="canplaythrough",c._navigator=typeof window<"u"&&window.navigator?window.navigator:null,c.masterGain=null,c.noAudio=!1,c.usingWebAudio=!0,c.autoSuspend=!0,c.ctx=null,c.autoUnlock=!0,c._setup(),c},volume:function(c){var d=this||t;if(c=parseFloat(c),d.ctx||h(),typeof c<"u"&&c>=0&&c<=1){if(d._volume=c,d._muted)return d;d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var g=d._howls[p]._getSoundIds(),v=0;v<g.length;v++){var x=d._howls[p]._soundById(g[v]);x&&x._node&&(x._node.volume=x._volume*c)}return d}return d._volume},mute:function(c){var d=this||t;d.ctx||h(),d._muted=c,d.usingWebAudio&&d.masterGain.gain.setValueAtTime(c?0:d._volume,t.ctx.currentTime);for(var p=0;p<d._howls.length;p++)if(!d._howls[p]._webAudio)for(var g=d._howls[p]._getSoundIds(),v=0;v<g.length;v++){var x=d._howls[p]._soundById(g[v]);x&&x._node&&(x._node.muted=c?!0:x._muted)}return d},stop:function(){for(var c=this||t,d=0;d<c._howls.length;d++)c._howls[d].stop();return c},unload:function(){for(var c=this||t,d=c._howls.length-1;d>=0;d--)c._howls[d].unload();return c.usingWebAudio&&c.ctx&&typeof c.ctx.close<"u"&&(c.ctx.close(),c.ctx=null,h()),c},codecs:function(c){return(this||t)._codecs[c.replace(/^x-/,"")]},_setup:function(){var c=this||t;if(c.state=c.ctx&&c.ctx.state||"suspended",c._autoSuspend(),!c.usingWebAudio)if(typeof Audio<"u")try{var d=new Audio;typeof d.oncanplaythrough>"u"&&(c._canPlayEvent="canplay")}catch{c.noAudio=!0}else c.noAudio=!0;try{var d=new Audio;d.muted&&(c.noAudio=!0)}catch{}return c.noAudio||c._setupCodecs(),c},_setupCodecs:function(){var c=this||t,d=null;try{d=typeof Audio<"u"?new Audio:null}catch{return c}if(!d||typeof d.canPlayType!="function")return c;var p=d.canPlayType("audio/mpeg;").replace(/^no$/,""),g=c._navigator?c._navigator.userAgent:"",v=g.match(/OPR\/(\d+)/g),x=v&&parseInt(v[0].split("/")[1],10)<33,y=g.indexOf("Safari")!==-1&&g.indexOf("Chrome")===-1,w=g.match(/Version\/(.*?) /),_=y&&w&&parseInt(w[1],10)<15;return c._codecs={mp3:!!(!x&&(p||d.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!p,opus:!!d.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!d.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(d.canPlayType('audio/wav; codecs="1"')||d.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!d.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!d.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(d.canPlayType("audio/x-m4a;")||d.canPlayType("audio/m4a;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(d.canPlayType("audio/x-m4b;")||d.canPlayType("audio/m4b;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(d.canPlayType("audio/x-mp4;")||d.canPlayType("audio/mp4;")||d.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!_&&d.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!d.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(d.canPlayType("audio/x-flac;")||d.canPlayType("audio/flac;")).replace(/^no$/,"")},c},_unlockAudio:function(){var c=this||t;if(!(c._audioUnlocked||!c.ctx)){c._audioUnlocked=!1,c.autoUnlock=!1,!c._mobileUnloaded&&c.ctx.sampleRate!==44100&&(c._mobileUnloaded=!0,c.unload()),c._scratchBuffer=c.ctx.createBuffer(1,1,22050);var d=function(p){for(;c._html5AudioPool.length<c.html5PoolSize;)try{var g=new Audio;g._unlocked=!0,c._releaseHtml5Audio(g)}catch{c.noAudio=!0;break}for(var v=0;v<c._howls.length;v++)if(!c._howls[v]._webAudio)for(var x=c._howls[v]._getSoundIds(),y=0;y<x.length;y++){var w=c._howls[v]._soundById(x[y]);w&&w._node&&!w._node._unlocked&&(w._node._unlocked=!0,w._node.load())}c._autoResume();var _=c.ctx.createBufferSource();_.buffer=c._scratchBuffer,_.connect(c.ctx.destination),typeof _.start>"u"?_.noteOn(0):_.start(0),typeof c.ctx.resume=="function"&&c.ctx.resume(),_.onended=function(){_.disconnect(0),c._audioUnlocked=!0,document.removeEventListener("touchstart",d,!0),document.removeEventListener("touchend",d,!0),document.removeEventListener("click",d,!0),document.removeEventListener("keydown",d,!0);for(var S=0;S<c._howls.length;S++)c._howls[S]._emit("unlock")}};return document.addEventListener("touchstart",d,!0),document.addEventListener("touchend",d,!0),document.addEventListener("click",d,!0),document.addEventListener("keydown",d,!0),c}},_obtainHtml5Audio:function(){var c=this||t;if(c._html5AudioPool.length)return c._html5AudioPool.pop();var d=new Audio().play();return d&&typeof Promise<"u"&&(d instanceof Promise||typeof d.then=="function")&&d.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(c){var d=this||t;return c._unlocked&&d._html5AudioPool.push(c),d},_autoSuspend:function(){var c=this;if(!(!c.autoSuspend||!c.ctx||typeof c.ctx.suspend>"u"||!t.usingWebAudio)){for(var d=0;d<c._howls.length;d++)if(c._howls[d]._webAudio){for(var p=0;p<c._howls[d]._sounds.length;p++)if(!c._howls[d]._sounds[p]._paused)return c}return c._suspendTimer&&clearTimeout(c._suspendTimer),c._suspendTimer=setTimeout(function(){if(c.autoSuspend){c._suspendTimer=null,c.state="suspending";var g=function(){c.state="suspended",c._resumeAfterSuspend&&(delete c._resumeAfterSuspend,c._autoResume())};c.ctx.suspend().then(g,g)}},3e4),c}},_autoResume:function(){var c=this;if(!(!c.ctx||typeof c.ctx.resume>"u"||!t.usingWebAudio))return c.state==="running"&&c.ctx.state!=="interrupted"&&c._suspendTimer?(clearTimeout(c._suspendTimer),c._suspendTimer=null):c.state==="suspended"||c.state==="running"&&c.ctx.state==="interrupted"?(c.ctx.resume().then(function(){c.state="running";for(var d=0;d<c._howls.length;d++)c._howls[d]._emit("resume")}),c._suspendTimer&&(clearTimeout(c._suspendTimer),c._suspendTimer=null)):c.state==="suspending"&&(c._resumeAfterSuspend=!0),c}};var t=new e,n=function(c){var d=this;if(!c.src||c.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}d.init(c)};n.prototype={init:function(c){var d=this;return t.ctx||h(),d._autoplay=c.autoplay||!1,d._format=typeof c.format!="string"?c.format:[c.format],d._html5=c.html5||!1,d._muted=c.mute||!1,d._loop=c.loop||!1,d._pool=c.pool||5,d._preload=typeof c.preload=="boolean"||c.preload==="metadata"?c.preload:!0,d._rate=c.rate||1,d._sprite=c.sprite||{},d._src=typeof c.src!="string"?c.src:[c.src],d._volume=c.volume!==void 0?c.volume:1,d._xhr={method:c.xhr&&c.xhr.method?c.xhr.method:"GET",headers:c.xhr&&c.xhr.headers?c.xhr.headers:null,withCredentials:c.xhr&&c.xhr.withCredentials?c.xhr.withCredentials:!1},d._duration=0,d._state="unloaded",d._sounds=[],d._endTimers={},d._queue=[],d._playLock=!1,d._onend=c.onend?[{fn:c.onend}]:[],d._onfade=c.onfade?[{fn:c.onfade}]:[],d._onload=c.onload?[{fn:c.onload}]:[],d._onloaderror=c.onloaderror?[{fn:c.onloaderror}]:[],d._onplayerror=c.onplayerror?[{fn:c.onplayerror}]:[],d._onpause=c.onpause?[{fn:c.onpause}]:[],d._onplay=c.onplay?[{fn:c.onplay}]:[],d._onstop=c.onstop?[{fn:c.onstop}]:[],d._onmute=c.onmute?[{fn:c.onmute}]:[],d._onvolume=c.onvolume?[{fn:c.onvolume}]:[],d._onrate=c.onrate?[{fn:c.onrate}]:[],d._onseek=c.onseek?[{fn:c.onseek}]:[],d._onunlock=c.onunlock?[{fn:c.onunlock}]:[],d._onresume=[],d._webAudio=t.usingWebAudio&&!d._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(d),d._autoplay&&d._queue.push({event:"play",action:function(){d.play()}}),d._preload&&d._preload!=="none"&&d.load(),d},load:function(){var c=this,d=null;if(t.noAudio){c._emit("loaderror",null,"No audio support.");return}typeof c._src=="string"&&(c._src=[c._src]);for(var p=0;p<c._src.length;p++){var g,v;if(c._format&&c._format[p])g=c._format[p];else{if(v=c._src[p],typeof v!="string"){c._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(v),g||(g=/\.([^.]+)$/.exec(v.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(g||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),g&&t.codecs(g)){d=c._src[p];break}}if(!d){c._emit("loaderror",null,"No codec support for selected audio sources.");return}return c._src=d,c._state="loading",window.location.protocol==="https:"&&d.slice(0,5)==="http:"&&(c._html5=!0,c._webAudio=!1),new i(c),c._webAudio&&o(c),c},play:function(c,d){var p=this,g=null;if(typeof c=="number")g=c,c=null;else{if(typeof c=="string"&&p._state==="loaded"&&!p._sprite[c])return null;if(typeof c>"u"&&(c="__default",!p._playLock)){for(var v=0,x=0;x<p._sounds.length;x++)p._sounds[x]._paused&&!p._sounds[x]._ended&&(v++,g=p._sounds[x]._id);v===1?c=null:g=null}}var y=g?p._soundById(g):p._inactiveSound();if(!y)return null;if(g&&!c&&(c=y._sprite||"__default"),p._state!=="loaded"){y._sprite=c,y._ended=!1;var w=y._id;return p._queue.push({event:"play",action:function(){p.play(w)}}),w}if(g&&!y._paused)return d||p._loadQueue("play"),y._id;p._webAudio&&t._autoResume();var _=Math.max(0,y._seek>0?y._seek:p._sprite[c][0]/1e3),S=Math.max(0,(p._sprite[c][0]+p._sprite[c][1])/1e3-_),I=S*1e3/Math.abs(y._rate),A=p._sprite[c][0]/1e3,k=(p._sprite[c][0]+p._sprite[c][1])/1e3;y._sprite=c,y._ended=!1;var M=function(){y._paused=!1,y._seek=_,y._start=A,y._stop=k,y._loop=!!(y._loop||p._sprite[c][2])};if(_>=k){p._ended(y);return}var O=y._node;if(p._webAudio){var F=function(){p._playLock=!1,M(),p._refreshBuffer(y);var N=y._muted||p._muted?0:y._volume;O.gain.setValueAtTime(N,t.ctx.currentTime),y._playStart=t.ctx.currentTime,typeof O.bufferSource.start>"u"?y._loop?O.bufferSource.noteGrainOn(0,_,86400):O.bufferSource.noteGrainOn(0,_,S):y._loop?O.bufferSource.start(0,_,86400):O.bufferSource.start(0,_,S),I!==1/0&&(p._endTimers[y._id]=setTimeout(p._ended.bind(p,y),I)),d||setTimeout(function(){p._emit("play",y._id),p._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?F():(p._playLock=!0,p.once("resume",F),p._clearTimer(y._id))}else{var U=function(){O.currentTime=_,O.muted=y._muted||p._muted||t._muted||O.muted,O.volume=y._volume*t.volume(),O.playbackRate=y._rate;try{var N=O.play();if(N&&typeof Promise<"u"&&(N instanceof Promise||typeof N.then=="function")?(p._playLock=!0,M(),N.then(function(){p._playLock=!1,O._unlocked=!0,d?p._loadQueue():p._emit("play",y._id)}).catch(function(){p._playLock=!1,p._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),y._ended=!0,y._paused=!0})):d||(p._playLock=!1,M(),p._emit("play",y._id)),O.playbackRate=y._rate,O.paused){p._emit("playerror",y._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}c!=="__default"||y._loop?p._endTimers[y._id]=setTimeout(p._ended.bind(p,y),I):(p._endTimers[y._id]=function(){p._ended(y),O.removeEventListener("ended",p._endTimers[y._id],!1)},O.addEventListener("ended",p._endTimers[y._id],!1))}catch(j){p._emit("playerror",y._id,j)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=p._src,O.load());var H=window&&window.ejecta||!O.readyState&&t._navigator.isCocoonJS;if(O.readyState>=3||H)U();else{p._playLock=!0,p._state="loading";var L=function(){p._state="loaded",U(),O.removeEventListener(t._canPlayEvent,L,!1)};O.addEventListener(t._canPlayEvent,L,!1),p._clearTimer(y._id)}}return y._id},pause:function(c){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"pause",action:function(){d.pause(c)}}),d;for(var p=d._getSoundIds(c),g=0;g<p.length;g++){d._clearTimer(p[g]);var v=d._soundById(p[g]);if(v&&!v._paused&&(v._seek=d.seek(p[g]),v._rateSeek=0,v._paused=!0,d._stopFade(p[g]),v._node))if(d._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),d._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||d._emit("pause",v?v._id:null)}return d},stop:function(c,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"stop",action:function(){p.stop(c)}}),p;for(var g=p._getSoundIds(c),v=0;v<g.length;v++){p._clearTimer(g[v]);var x=p._soundById(g[v]);x&&(x._seek=x._start||0,x._rateSeek=0,x._paused=!0,x._ended=!0,p._stopFade(g[v]),x._node&&(p._webAudio?x._node.bufferSource&&(typeof x._node.bufferSource.stop>"u"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),p._cleanBuffer(x._node)):(!isNaN(x._node.duration)||x._node.duration===1/0)&&(x._node.currentTime=x._start||0,x._node.pause(),x._node.duration===1/0&&p._clearSound(x._node))),d||p._emit("stop",x._id))}return p},mute:function(c,d){var p=this;if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"mute",action:function(){p.mute(c,d)}}),p;if(typeof d>"u")if(typeof c=="boolean")p._muted=c;else return p._muted;for(var g=p._getSoundIds(d),v=0;v<g.length;v++){var x=p._soundById(g[v]);x&&(x._muted=c,x._interval&&p._stopFade(x._id),p._webAudio&&x._node?x._node.gain.setValueAtTime(c?0:x._volume,t.ctx.currentTime):x._node&&(x._node.muted=t._muted?!0:c),p._emit("mute",x._id))}return p},volume:function(){var c=this,d=arguments,p,g;if(d.length===0)return c._volume;if(d.length===1||d.length===2&&typeof d[1]>"u"){var v=c._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):p=parseFloat(d[0])}else d.length>=2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));var y;if(typeof p<"u"&&p>=0&&p<=1){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"volume",action:function(){c.volume.apply(c,d)}}),c;typeof g>"u"&&(c._volume=p),g=c._getSoundIds(g);for(var w=0;w<g.length;w++)y=c._soundById(g[w]),y&&(y._volume=p,d[2]||c._stopFade(g[w]),c._webAudio&&y._node&&!y._muted?y._node.gain.setValueAtTime(p,t.ctx.currentTime):y._node&&!y._muted&&(y._node.volume=p*t.volume()),c._emit("volume",y._id))}else return y=g?c._soundById(g):c._sounds[0],y?y._volume:0;return c},fade:function(c,d,p,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(c,d,p,g)}}),v;c=Math.min(Math.max(0,parseFloat(c)),1),d=Math.min(Math.max(0,parseFloat(d)),1),p=parseFloat(p),v.volume(c,g);for(var x=v._getSoundIds(g),y=0;y<x.length;y++){var w=v._soundById(x[y]);if(w){if(g||v._stopFade(x[y]),v._webAudio&&!w._muted){var _=t.ctx.currentTime,S=_+p/1e3;w._volume=c,w._node.gain.setValueAtTime(c,_),w._node.gain.linearRampToValueAtTime(d,S)}v._startFadeInterval(w,c,d,p,x[y],typeof g>"u")}}return v},_startFadeInterval:function(c,d,p,g,v,x){var y=this,w=d,_=p-d,S=Math.abs(_/.01),I=Math.max(4,S>0?g/S:g),A=Date.now();c._fadeTo=p,c._interval=setInterval(function(){var k=(Date.now()-A)/g;A=Date.now(),w+=_*k,w=Math.round(w*100)/100,_<0?w=Math.max(p,w):w=Math.min(p,w),y._webAudio?c._volume=w:y.volume(w,c._id,!0),x&&(y._volume=w),(p<d&&w<=p||p>d&&w>=p)&&(clearInterval(c._interval),c._interval=null,c._fadeTo=null,y.volume(p,c._id),y._emit("fade",c._id))},I)},_stopFade:function(c){var d=this,p=d._soundById(c);return p&&p._interval&&(d._webAudio&&p._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(p._interval),p._interval=null,d.volume(p._fadeTo,c),p._fadeTo=null,d._emit("fade",c)),d},loop:function(){var c=this,d=arguments,p,g,v;if(d.length===0)return c._loop;if(d.length===1)if(typeof d[0]=="boolean")p=d[0],c._loop=p;else return v=c._soundById(parseInt(d[0],10)),v?v._loop:!1;else d.length===2&&(p=d[0],g=parseInt(d[1],10));for(var x=c._getSoundIds(g),y=0;y<x.length;y++)v=c._soundById(x[y]),v&&(v._loop=p,c._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=p,p&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,c.playing(x[y])&&(c.pause(x[y],!0),c.play(x[y],!0)))));return c},rate:function(){var c=this,d=arguments,p,g;if(d.length===0)g=c._sounds[0]._id;else if(d.length===1){var v=c._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):p=parseFloat(d[0])}else d.length===2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));var y;if(typeof p=="number"){if(c._state!=="loaded"||c._playLock)return c._queue.push({event:"rate",action:function(){c.rate.apply(c,d)}}),c;typeof g>"u"&&(c._rate=p),g=c._getSoundIds(g);for(var w=0;w<g.length;w++)if(y=c._soundById(g[w]),y){c.playing(g[w])&&(y._rateSeek=c.seek(g[w]),y._playStart=c._webAudio?t.ctx.currentTime:y._playStart),y._rate=p,c._webAudio&&y._node&&y._node.bufferSource?y._node.bufferSource.playbackRate.setValueAtTime(p,t.ctx.currentTime):y._node&&(y._node.playbackRate=p);var _=c.seek(g[w]),S=(c._sprite[y._sprite][0]+c._sprite[y._sprite][1])/1e3-_,I=S*1e3/Math.abs(y._rate);(c._endTimers[g[w]]||!y._paused)&&(c._clearTimer(g[w]),c._endTimers[g[w]]=setTimeout(c._ended.bind(c,y),I)),c._emit("rate",y._id)}}else return y=c._soundById(g),y?y._rate:c._rate;return c},seek:function(){var c=this,d=arguments,p,g;if(d.length===0)c._sounds.length&&(g=c._sounds[0]._id);else if(d.length===1){var v=c._getSoundIds(),x=v.indexOf(d[0]);x>=0?g=parseInt(d[0],10):c._sounds.length&&(g=c._sounds[0]._id,p=parseFloat(d[0]))}else d.length===2&&(p=parseFloat(d[0]),g=parseInt(d[1],10));if(typeof g>"u")return 0;if(typeof p=="number"&&(c._state!=="loaded"||c._playLock))return c._queue.push({event:"seek",action:function(){c.seek.apply(c,d)}}),c;var y=c._soundById(g);if(y)if(typeof p=="number"&&p>=0){var w=c.playing(g);w&&c.pause(g,!0),y._seek=p,y._ended=!1,c._clearTimer(g),!c._webAudio&&y._node&&!isNaN(y._node.duration)&&(y._node.currentTime=p);var _=function(){w&&c.play(g,!0),c._emit("seek",g)};if(w&&!c._webAudio){var S=function(){c._playLock?setTimeout(S,0):_()};setTimeout(S,0)}else _()}else if(c._webAudio){var I=c.playing(g)?t.ctx.currentTime-y._playStart:0,A=y._rateSeek?y._rateSeek-y._seek:0;return y._seek+(A+I*Math.abs(y._rate))}else return y._node.currentTime;return c},playing:function(c){var d=this;if(typeof c=="number"){var p=d._soundById(c);return p?!p._paused:!1}for(var g=0;g<d._sounds.length;g++)if(!d._sounds[g]._paused)return!0;return!1},duration:function(c){var d=this,p=d._duration,g=d._soundById(c);return g&&(p=d._sprite[g._sprite][1]/1e3),p},state:function(){return this._state},unload:function(){for(var c=this,d=c._sounds,p=0;p<d.length;p++)d[p]._paused||c.stop(d[p]._id),c._webAudio||(c._clearSound(d[p]._node),d[p]._node.removeEventListener("error",d[p]._errorFn,!1),d[p]._node.removeEventListener(t._canPlayEvent,d[p]._loadFn,!1),d[p]._node.removeEventListener("ended",d[p]._endFn,!1),t._releaseHtml5Audio(d[p]._node)),delete d[p]._node,c._clearTimer(d[p]._id);var g=t._howls.indexOf(c);g>=0&&t._howls.splice(g,1);var v=!0;for(p=0;p<t._howls.length;p++)if(t._howls[p]._src===c._src||c._src.indexOf(t._howls[p]._src)>=0){v=!1;break}return s&&v&&delete s[c._src],t.noAudio=!1,c._state="unloaded",c._sounds=[],c=null,null},on:function(c,d,p,g){var v=this,x=v["_on"+c];return typeof d=="function"&&x.push(g?{id:p,fn:d,once:g}:{id:p,fn:d}),v},off:function(c,d,p){var g=this,v=g["_on"+c],x=0;if(typeof d=="number"&&(p=d,d=null),d||p)for(x=0;x<v.length;x++){var y=p===v[x].id;if(d===v[x].fn&&y||!d&&y){v.splice(x,1);break}}else if(c)g["_on"+c]=[];else{var w=Object.keys(g);for(x=0;x<w.length;x++)w[x].indexOf("_on")===0&&Array.isArray(g[w[x]])&&(g[w[x]]=[])}return g},once:function(c,d,p){var g=this;return g.on(c,d,p,1),g},_emit:function(c,d,p){for(var g=this,v=g["_on"+c],x=v.length-1;x>=0;x--)(!v[x].id||v[x].id===d||c==="load")&&(setTimeout((function(y){y.call(this,d,p)}).bind(g,v[x].fn),0),v[x].once&&g.off(c,v[x].fn,v[x].id));return g._loadQueue(c),g},_loadQueue:function(c){var d=this;if(d._queue.length>0){var p=d._queue[0];p.event===c&&(d._queue.shift(),d._loadQueue()),c||p.action()}return d},_ended:function(c){var d=this,p=c._sprite;if(!d._webAudio&&c._node&&!c._node.paused&&!c._node.ended&&c._node.currentTime<c._stop)return setTimeout(d._ended.bind(d,c),100),d;var g=!!(c._loop||d._sprite[p][2]);if(d._emit("end",c._id),!d._webAudio&&g&&d.stop(c._id,!0).play(c._id),d._webAudio&&g){d._emit("play",c._id),c._seek=c._start||0,c._rateSeek=0,c._playStart=t.ctx.currentTime;var v=(c._stop-c._start)*1e3/Math.abs(c._rate);d._endTimers[c._id]=setTimeout(d._ended.bind(d,c),v)}return d._webAudio&&!g&&(c._paused=!0,c._ended=!0,c._seek=c._start||0,c._rateSeek=0,d._clearTimer(c._id),d._cleanBuffer(c._node),t._autoSuspend()),!d._webAudio&&!g&&d.stop(c._id,!0),d},_clearTimer:function(c){var d=this;if(d._endTimers[c]){if(typeof d._endTimers[c]!="function")clearTimeout(d._endTimers[c]);else{var p=d._soundById(c);p&&p._node&&p._node.removeEventListener("ended",d._endTimers[c],!1)}delete d._endTimers[c]}return d},_soundById:function(c){for(var d=this,p=0;p<d._sounds.length;p++)if(c===d._sounds[p]._id)return d._sounds[p];return null},_inactiveSound:function(){var c=this;c._drain();for(var d=0;d<c._sounds.length;d++)if(c._sounds[d]._ended)return c._sounds[d].reset();return new i(c)},_drain:function(){var c=this,d=c._pool,p=0,g=0;if(!(c._sounds.length<d)){for(g=0;g<c._sounds.length;g++)c._sounds[g]._ended&&p++;for(g=c._sounds.length-1;g>=0;g--){if(p<=d)return;c._sounds[g]._ended&&(c._webAudio&&c._sounds[g]._node&&c._sounds[g]._node.disconnect(0),c._sounds.splice(g,1),p--)}}},_getSoundIds:function(c){var d=this;if(typeof c>"u"){for(var p=[],g=0;g<d._sounds.length;g++)p.push(d._sounds[g]._id);return p}else return[c]},_refreshBuffer:function(c){var d=this;return c._node.bufferSource=t.ctx.createBufferSource(),c._node.bufferSource.buffer=s[d._src],c._panner?c._node.bufferSource.connect(c._panner):c._node.bufferSource.connect(c._node),c._node.bufferSource.loop=c._loop,c._loop&&(c._node.bufferSource.loopStart=c._start||0,c._node.bufferSource.loopEnd=c._stop||0),c._node.bufferSource.playbackRate.setValueAtTime(c._rate,t.ctx.currentTime),d},_cleanBuffer:function(c){var d=this,p=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(!c.bufferSource)return d;if(t._scratchBuffer&&c.bufferSource&&(c.bufferSource.onended=null,c.bufferSource.disconnect(0),p))try{c.bufferSource.buffer=t._scratchBuffer}catch{}return c.bufferSource=null,d},_clearSound:function(c){var d=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);d||(c.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(c){this._parent=c,this.init()};i.prototype={init:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,d._sounds.push(c),c.create(),c},create:function(){var c=this,d=c._parent,p=t._muted||c._muted||c._parent._muted?0:c._volume;return d._webAudio?(c._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),c._node.gain.setValueAtTime(p,t.ctx.currentTime),c._node.paused=!0,c._node.connect(t.masterGain)):t.noAudio||(c._node=t._obtainHtml5Audio(),c._errorFn=c._errorListener.bind(c),c._node.addEventListener("error",c._errorFn,!1),c._loadFn=c._loadListener.bind(c),c._node.addEventListener(t._canPlayEvent,c._loadFn,!1),c._endFn=c._endListener.bind(c),c._node.addEventListener("ended",c._endFn,!1),c._node.src=d._src,c._node.preload=d._preload===!0?"auto":d._preload,c._node.volume=p*t.volume(),c._node.load()),c},reset:function(){var c=this,d=c._parent;return c._muted=d._muted,c._loop=d._loop,c._volume=d._volume,c._rate=d._rate,c._seek=0,c._rateSeek=0,c._paused=!0,c._ended=!0,c._sprite="__default",c._id=++t._counter,c},_errorListener:function(){var c=this;c._parent._emit("loaderror",c._id,c._node.error?c._node.error.code:0),c._node.removeEventListener("error",c._errorFn,!1)},_loadListener:function(){var c=this,d=c._parent;d._duration=Math.ceil(c._node.duration*10)/10,Object.keys(d._sprite).length===0&&(d._sprite={__default:[0,d._duration*1e3]}),d._state!=="loaded"&&(d._state="loaded",d._emit("load"),d._loadQueue()),c._node.removeEventListener(t._canPlayEvent,c._loadFn,!1)},_endListener:function(){var c=this,d=c._parent;d._duration===1/0&&(d._duration=Math.ceil(c._node.duration*10)/10,d._sprite.__default[1]===1/0&&(d._sprite.__default[1]=d._duration*1e3),d._ended(c)),c._node.removeEventListener("ended",c._endFn,!1)}};var s={},o=function(c){var d=c._src;if(s[d]){c._duration=s[d].duration,l(c);return}if(/^data:[^;]+;base64,/.test(d)){for(var p=atob(d.split(",")[1]),g=new Uint8Array(p.length),v=0;v<p.length;++v)g[v]=p.charCodeAt(v);u(g.buffer,c)}else{var x=new XMLHttpRequest;x.open(c._xhr.method,d,!0),x.withCredentials=c._xhr.withCredentials,x.responseType="arraybuffer",c._xhr.headers&&Object.keys(c._xhr.headers).forEach(function(y){x.setRequestHeader(y,c._xhr.headers[y])}),x.onload=function(){var y=(x.status+"")[0];if(y!=="0"&&y!=="2"&&y!=="3"){c._emit("loaderror",null,"Failed loading audio file with status: "+x.status+".");return}u(x.response,c)},x.onerror=function(){c._webAudio&&(c._html5=!0,c._webAudio=!1,c._sounds=[],delete s[d],c.load())},a(x)}},a=function(c){try{c.send()}catch{c.onerror()}},u=function(c,d){var p=function(){d._emit("loaderror",null,"Decoding audio data failed.")},g=function(v){v&&d._sounds.length>0?(s[d._src]=v,l(d,v)):p()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(c).then(g).catch(p):t.ctx.decodeAudioData(c,g,p)},l=function(c,d){d&&!c._duration&&(c._duration=d.duration),Object.keys(c._sprite).length===0&&(c._sprite={__default:[0,c._duration*1e3]}),c._state!=="loaded"&&(c._state="loaded",c._emit("load"),c._loadQueue())},h=function(){if(t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var c=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),d=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),p=d?parseInt(d[1],10):null;if(c&&p&&p<9){var g=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!g&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};r.Howler=t,r.Howl=n,typeof to<"u"?(to.HowlerGlobal=e,to.Howler=t,to.Howl=n,to.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var i=n._howls.length-1;i>=0;i--)n._howls[i].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(n=typeof n!="number"?s._pos[1]:n,i=typeof i!="number"?s._pos[2]:i,typeof t=="number")s._pos=[t,n,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(t,n,i,s,o,a){var u=this;if(!u.ctx||!u.ctx.listener)return u;var l=u._orientation;if(n=typeof n!="number"?l[1]:n,i=typeof i!="number"?l[2]:i,s=typeof s!="number"?l[3]:s,o=typeof o!="number"?l[4]:o,a=typeof a!="number"?l[5]:a,typeof t=="number")u._orientation=[t,n,i,s,o,a],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(t,n,i,s,o,a);else return l;return u},Howl.prototype.init=function(t){return function(n){var i=this;return i._orientation=n.orientation||[1,0,0],i._stereo=n.stereo||null,i._pos=n.pos||null,i._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},i._onstereo=n.onstereo?[{fn:n.onstereo}]:[],i._onpos=n.onpos?[{fn:n.onpos}]:[],i._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(t,n)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")i._stereo=t,i._pos=[t,0,0];else return i._stereo;for(var o=i._getSoundIds(n),a=0;a<o.length;a++){var u=i._soundById(o[a]);if(u)if(typeof t=="number")u._stereo=t,u._pos=[t,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,s),s==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(t,0,0):u._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),i._emit("stereo",u._id);else return u._stereo}return i},Howl.prototype.pos=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(t,n,i,s)}}),o;if(n=typeof n!="number"?0:n,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof t=="number")o._pos=[t,n,i];else return o._pos;for(var a=o._getSoundIds(s),u=0;u<a.length;u++){var l=o._soundById(a[u]);if(l)if(typeof t=="number")l._pos=[t,n,i],l._node&&((!l._panner||l._panner.pan)&&e(l,"spatial"),typeof l._panner.positionX<"u"?(l._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setPosition(t,n,i)),o._emit("pos",l._id);else return l._pos}return o},Howl.prototype.orientation=function(t,n,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,i,s)}}),o;if(n=typeof n!="number"?o._orientation[1]:n,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof t=="number")o._orientation=[t,n,i];else return o._orientation;for(var a=o._getSoundIds(s),u=0;u<a.length;u++){var l=o._soundById(a[u]);if(l)if(typeof t=="number")l._orientation=[t,n,i],l._node&&(l._panner||(l._pos||(l._pos=o._pos||[0,0,-.5]),e(l,"spatial")),typeof l._panner.orientationX<"u"?(l._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):l._panner.setOrientation(t,n,i)),o._emit("orientation",l._id);else return l._orientation}return o},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,i,s,o;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")i=n[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),t._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:t._panningModel});else return o=t._soundById(parseInt(n[0],10)),o?o._pannerAttr:t._pannerAttr;else n.length===2&&(i=n[0],s=parseInt(n[1],10));for(var a=t._getSoundIds(s),u=0;u<a.length;u++)if(o=t._soundById(a[u]),o){var l=o._pannerAttr;l={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:l.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:l.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:l.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:l.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:l.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:l.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:l.panningModel};var h=o._panner;h||(o._pos||(o._pos=t._pos||[0,0,-.5]),e(o,"spatial"),h=o._panner),h.coneInnerAngle=l.coneInnerAngle,h.coneOuterAngle=l.coneOuterAngle,h.coneOuterGain=l.coneOuterGain,h.distanceModel=l.distanceModel,h.maxDistance=l.maxDistance,h.refDistance=l.refDistance,h.rolloffFactor=l.rolloffFactor,h.panningModel=l.panningModel}return t},Sound.prototype.init=function(t){return function(){var n=this,i=n._parent;n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,t.call(this),n._stereo?i.stereo(n._stereo):n._pos&&i.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,i=n._parent;return n._orientation=i._orientation,n._stereo=i._stereo,n._pos=i._pos,n._pannerAttr=i._pannerAttr,n._stereo?i.stereo(n._stereo):n._pos?i.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,i._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()})(h_);const a$="IChannelClick";class l${constructor(){P(this,"channels",{})}exist(e,t){const n=this.channels[e];return cr(e)&&cr(n[t])}add(e,t,n,i=1,s=!1,o){let a=this.channels[e];qu(a)&&(a={},this.channels[e]=a),cr(a[t])&&console.warn(`sound "${t}" is existing in channel "${e}"`);const u={channelId:e,name:t,soundId:n,volume:i,softBgm:s,onComplete:o};return a[t]=u,u}getPlaybackBy(e){for(const t in this.channels){const n=this.channels[t];for(const i in n)if(e(n[i]))return n[i]}}getPlaybackBySoundId(e){return this.getPlaybackBy(t=>t.soundId==e)}getPlaybackBySoundName(e){return this.getPlaybackBy(t=>t.name==e)}removeBy(e){for(const t in this.channels){const n=this.channels[t];for(const i in n){const s=n[i];e(s)&&(delete n[i],fB(n)&&delete this.channels[t])}}}removeBySoundId(e){return this.removeBy(t=>t.soundId==e)}removeBySoundName(e){return this.removeBy(t=>t.name==e)}getSoundIds(e){const t=[],n=this.channels[e];for(const i in n)t.push(n[i].soundId);return t}}const Fh=class Fh{constructor(){P(this,"howlers",{});P(this,"_muted",!1);P(this,"_volume",1);P(this,"bgm");P(this,"channelManager");P(this,"_pause");this.channelManager=new l$}static get Obj(){return this._Obj||(this._Obj=new Fh),this._Obj}static clickSound(e="click"){Fh.Obj.play(a$,e,1,!1,!1)}getSoundIdBySoundName(e){const t=this.channelManager.getPlaybackBySoundName(e);if(t)return t.soundId}getChannelIdBySoundName(e){const t=this.channelManager.getPlaybackBySoundName(e);if(t)return t.channelId}play(e,t,n=1,i=!1,s,o){let a=this.channelManager.getPlaybackBySoundName(t);const u=this.getVolumn(n),l=this.getSoundPlayer(e);if(a&&a.channelId==e)l.stop(a.soundId),l.play(a.soundId),l.volume(u,a.soundId);else{const h=l.play(t);l.volume(u,h),a=this.channelManager.add(e,t,h,n,i,c=>{o&&o(c)})}i&&this.softBgm(!0)}plays(e,t,n=1,i=!1,s){const[o,...a]=t;o?this.play(e,o,n,i,!1,()=>{this.plays(e,a,n,i,s)}):s&&s(o)}playBgm(e,t,n=1,i=.3){const s=this.channelManager.getPlaybackBySoundName(t),o=this.getSoundPlayer(e),a=this.getVolumn(n);if(s&&s.channelId==e)o.playing(s.soundId)||(o.play(s.soundId),o.volume(a,s.soundId));else{this.bgm&&this.stop(this.bgm.channelId,this.bgm.name);const u=o.play(t);o.volume(a,u),this.channelManager.add(e,t,u,n),this.bgm={soundId:u,channelId:e,name:t,soft:i}}}isReady(e){return cr(this.howlers[e])}getSoundPlayer(e){if(!this.isReady(e)){const t=fH(bR);if(cr(t)){t.onend=i=>{if(!(this.bgm&&i==this.bgm.soundId)){const s=this.channelManager.getPlaybackBySoundId(i);s&&s.name.indexOf("bgm")==-1&&(s&&(s.softBgm&&this.softBgm(!1),s.onComplete&&s.onComplete(s.name)),this.channelManager.removeBySoundId(i))}};const n=new h_.Howl(t);this.howlers[e]=n}}return this.howlers[e]}pauses(e){if(this._pause!=e){for(const t in this.howlers)if(e)this.howlers[t].pause();else{const n=this.channelManager.getSoundIds(t),i=this.howlers[t];for(const s of n)!i.playing(s)&&i.play(s)}this._pause=e}}pause(e,t){const n=this.getSoundIdBySoundName(t);n&&this.getSoundPlayer(e).pause(n)}stop(e,t){const n=this.getSoundIdBySoundName(t);n&&(this.channelManager.removeBySoundId(n),this.getSoundPlayer(e).stop(n))}stops(e,t){t.forEach(n=>this.stop(e,n))}softBgm(e){if(this.bgm){const t=this.channelManager.getPlaybackBySoundName(this.bgm.name);if(t){const n=this.getVolumn(e?this.bgm.soft:1,t.volume);this.getSoundPlayer(this.bgm.channelId).volume(n,t.soundId)}}}getVolumn(...e){return e.reduce((n,i)=>n*i,this._volume)}setVolumn(e,t,n){this.howlers[e]&&this.howlers[e].volume(n)}get volume(){return this._volume}set volume(e){if(this._volume!=e){this._volume=e;for(const t in this.channelManager.channels){const n=this.channelManager.channels[t],i=this.getSoundPlayer(t);for(const s in n){const o=n[s];i.volume(o.volume*e,o.soundId)}}}}get muted(){return this._muted}set muted(e){this._muted=e,h_.Howler.mute(e)}setRate(e=1){for(const t in this.howlers)this.howlers[t].rate(e)}};P(Fh,"_Obj");let ji=Fh;const u$=document.querySelector("html"),Xi="resize";function c$(r,e=1.5){return 2}const h$=()=>{const r=Rt.useApp(),{current:e}=B.useRef({clientSize:[0,0],renderFrame:[0,0,0,0]}),{state:t,dispatch:n}=B.useContext(_t),i=Be.Obj,[s,o]=B.useMemo(()=>[Be.Obj.isLandscapeOnly,Be.Obj.isPortraitOnly],[]),a=B.useMemo(()=>document.getElementById("App"),[]),[u,l]=B.useMemo(()=>typeof document.hidden<"u"?["hidden","visibilitychange"]:typeof document.msHidden<"u"?["msHidden","msvisibilitychange"]:typeof document.webkitHidden<"u"?["webkitHidden","webkitvisibilitychange"]:(console.error("visibilitychange events not supported"),["hidden","visibilitychange"]),[]);function h(p){p?(ji.Obj.pauses(!0),r.ticker.started&&r.ticker.stop(),Be.Obj.turboTicker.started&&Be.Obj.turboTicker.stop()):(ji.Obj.pauses(!1),!r.ticker.started&&r.ticker.start(),!Be.Obj.turboTicker.started&&Be.Obj.turboTicker.start())}const c=()=>{Be.Obj.updateOrientation();const p=i.orientation;let{safeArea:g}=i.layoutOptions;const{displayArea:v}=i.layoutOptions,[x,y,w,_]=v,S=_/w;g=g||[0,0,w,_];const[I,A,k,M]=g,O=M/k,F=document.documentElement.clientWidth,U=document.documentElement.clientHeight,H=U/F;let L,N,j,Y;p=="l"?H<=O?(N=U*(_/M),L=N/S,N=Math.min(_,N),L=Math.min(w,L),Y=U,j=L):(F<=k?L=F*(w/k):F<=w?L=w:L=F,N=L*S,N=Math.min(_,N),L=Math.min(w,L),Y=N,j=F):H>=O?(L=F*(w/k),N=L*S,N=Math.min(_,N),L=Math.min(w,L),j=F,Y=N):(U<=M?N=U*(_/M):U<=_?N=_:N=U,L=N/S,N=Math.min(_,N),L=Math.min(w,L),j=L,Y=U);const K=L/w,X=(F-L)/2,W=(U-N)/2,z=Math.round(Math.min(X,0)),V=Math.round(Math.min(W,0)),{clientWidth:Z,clientHeight:re}=document.documentElement;if(e.renderFrame[0]!=z||e.renderFrame[1]!=V||e.renderFrame[2]!=L||e.renderFrame[3]!=N||e.clientSize[0]!=Z||e.clientSize[1]!=re){e.renderFrame=[z,V,L,N],e.clientSize=[Z,re],r.stage.scale.set(K),r.renderer.resolution=c$(K,t.setting.maxResolution),r.renderer.resize(L,N);const ce=Math.max(V/K,y-A)*K,xe=Math.max(z/K,-(I-x))*K;r.view.style.top=`${ce}px`,r.view.style.left=`${xe}px`;const Re=Math.ceil(Math.min(F,j,L)),Le=Math.round(Math.min(U,Y,N)),ze=Math.round(Math.max(0,W)),We=Math.round(Math.max(0,X));a.style.width=`${Re}px`,a.style.height=`${Le}px`,a.style.top=`${ze}px`,a.style.left=`${We}px`;let He=0;p=="l"?He=Math.max(12,20*(document.documentElement.clientWidth-We*2)/960):He=Math.max(12,20*(document.documentElement.clientWidth-We*2)/540),u$.style.fontSize=`${He}px`,t.setting.orientation!=p&&n(Dj(p)),Be.Obj.updateViewport(z/K,V/K,Math.round(Re/K),Math.round(Le/K)),i.notice.emit(Xi)}};function d(){h(!!document[u])}return B.useEffect(()=>(document.addEventListener(l,d),()=>{document.removeEventListener(l,d)}),[]),B.useEffect(()=>{function p(g){const v=Math.abs(Math.sin(g/180*Math.PI))==1;if(s){const x=document.getElementById("screen-only-tips-l");v?(x.style.display="none",h(!1)):(x.style.display="block",h(!0))}else if(o){const x=document.getElementById("screen-only-tips-p");v?(x.style.display="block",h(!0)):(x.style.display="none",h(!1))}}ni.any&&(window.screen.orientation?(window.screen.orientation.addEventListener("change",g=>{const v=g.target.angle;p(v)}),p(window.screen.orientation.angle)):(window.addEventListener("orientationchange",g=>{const v=g.target.screen.orientation.angle;p(v)}),p(window.orientation||0)))},[]),Rt.useTick((p,g)=>{(window.scrollX!=0||window.scrollY!=0)&&window.scrollTo(0,0),c()},!0),T.jsx(T.Fragment,{})},d$=()=>{const{state:r}=B.useContext(_t),{soundOn:e,volume:t}=r.setting;return B.useEffect(()=>{ji.Obj.muted=!e},[e]),B.useEffect(()=>{},[t]),T.jsx(T.Fragment,{})},f$=({children:r,Context:e,render:t})=>T.jsx(e.Consumer,{children:n=>t(T.jsxs(e.Provider,{value:n,children:[T.jsx(jj,{}),T.jsx(v$,{}),T.jsx(h$,{}),T.jsx(d$,{}),T.jsx(o$,{}),T.jsx(i$,{}),r]}))}),p$=t$(),m$=r$(),g$=({children:r,antialias:e=!0,...t})=>{const[n,i]=B.useReducer(p$,m$),[s,...o]=B.Children.map(r,a=>a);return T.jsxs(_t.Provider,{value:{state:n,dispatch:i},children:[T.jsx(f$,{Context:_t,render:a=>T.jsx(Rt.Stage,{options:{backgroundColor:1118481,backgroundAlpha:0,resolution:1,antialias:e,autoDensity:!0},...t,children:a}),children:s}),T.jsx(n$,{}),T.jsx(_t.Consumer,{children:({state:a})=>a.sceneManager.scenes[0]=="preload"?T.jsx(T.Fragment,{}):o})]})},WR=60,OP=Number((1e3/WR).toFixed(2));function v$(){const r=Rt.useApp(),e=Be.Obj,{state:t}=Cd(),{speedModel:n}=t.spin;B.useMemo(()=>{r.ticker.maxFPS=r.ticker.minFPS=WR,r.ticker.speed=OP,e.turboTicker.start()},[]);const i=B.useMemo(()=>n=="fast"?2:1,[n]);return B.useMemo(()=>{e.turboTicker.speed=i*OP},[n]),Rt.useTick((s,o)=>{_j(e.getTime(!1)),e.deltaTime(s)},!0),HR((s,o)=>{e.turboTweenGroup.update(e.getTime(!0)),e.deltaTurboTime(s)},!0),T.jsx(T.Fragment,{})}const y$=({children:r})=>{const{state:e}=B.useContext(_t),{scenes:t}=e.sceneManager;return B.useMemo(()=>{const i=[];return B.Children.forEach(r,s=>{t.indexOf(s.props.id)!=-1&&i.push(s)}),i},[t])},Za={Random:(r,e=0)=>Math.floor(Math.random()*(r-e))+e},NP={defaultUp:(r,e,t)=>1/2*e*t*t+r*t,up:(r,e,t,n)=>{if(t=t/1e3,n=n/1e3,t==0)return 0;const i=(e-r)/t;return r*n+i*n*n/2},down:(r,e,t,n)=>{if(t=t/1e3,n=n/1e3,t==0)return 0;const i=(r-e)/t;return r*n-i*n*n/2}};function br(r,e){const t=[];for(let n=0;n<r;n++)t.push(e(n));return t}function Po(r){return r[r.length-1]}function x$(r){return r[Za.Random(r.length)]}function _$({...r}){const e=B.useRef(null),{state:t}=Cd(),{scenes:n}=t.sceneManager,[i,s]=B.useState(""),o=Be.Obj,a=B.useMemo(()=>{let l=!1;return l=hn("hideServerTime","0")==="1",l},[]),[u]=B.useMemo(()=>[Po(n)=="main"],n);return B.useEffect(()=>{if(e.current){let l=function(){if(o.viewport){const[h,c,d]=o.viewport;e.current.x=-h+d-5,e.current.y=-c+5}};return l(),o.notice.on(Xi,l),()=>{o.notice.off(Xi,l)}}},[e]),Yu(1e3,()=>{s($j(8,!1,o.getServerTimeMillisecondNow()))},u),T.jsx(Os,{visible:u&&!a,ref:e,text:`${i}`,anchor:[1,0],style:{fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2},...r})}function w$({...r}){const e=B.useRef(null),{state:t}=Cd(),{scenes:n}=t.sceneManager,i=Be.Obj,[s]=B.useMemo(()=>{const o=Po(n);return[o=="premain"||o=="load"]},n);return B.useEffect(()=>{if(e.current){let o=function(){if(i.viewport){const[a,u,l,h]=i.viewport;e.current.x=-a+l-5,e.current.y=-u+h-5}};return o(),i.notice.on(Xi,o),()=>{i.notice.off(Xi,o)}}},[e]),T.jsx(Os,{visible:s,ref:e,text:`v${i.configOptions.version}`,anchor:[1,1],style:{fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2},...r})}function ye({children:r,tmp:e,replaceMap:t={},tcase:n="default",...i}){const s=B.useMemo(()=>{let o=e?B.Children.map(e,a=>Un(bn,a)).reduce((a,u)=>a+u,""):Un(bn,r);for(const a in t)o=o.replace(a,t[a]);return n=="upper"?o=o.toUpperCase():n=="lower"&&(o=o.toLowerCase()),o},[e,r]);return T.jsx("div",{...i,children:s})}const b$=()=>{const r=B.useRef(null),e=B.useRef(null),{state:t,dispatch:n}=B.useContext(_t),{code:i,show:s,allowClose:o}=t.setting.error;function a(){o?n(en("",!1,!0)):window.location.reload()}const u=B.useMemo(()=>Un(bn,"err_000"),[]),l=B.useMemo(()=>{const c=`err_${i}`,d=Un(bn,c);return c==d?u:d},[i]);function h(){if(e.current){const c=r.current.clientHeight,d=e.current.clientHeight;e.current.style.marginTop=`${(c-d)*.4}px`}}return B.useEffect(()=>{const c=Be.Obj;return c.notice.on(Xi,h),()=>{c.notice.off(Xi,h)}},[]),B.useEffect(()=>{s&&h()},[s]),T.jsx("div",{ref:r,className:`page-mod ${s?"db":"dn"}`,children:T.jsxs("div",{ref:e,className:`error-mod ${t.setting.orientation}`,children:[T.jsxs("div",{className:"top",children:[T.jsx("div",{className:"dib info-icon"}),T.jsx("div",{className:"title",children:i})]}),T.jsxs("div",{className:"bottom",children:[T.jsx(ye,{className:"detail",children:l}),T.jsx(ye,{className:"ok btn-mod dib",onClick:a,children:o?"ok":"refresh"})]}),T.jsx("div",{className:"close"})]})})},Ns=B.forwardRef(({turbo:r=!1,dep:e=[],children:t,id:n,from:i={},to:s={},playing:o=!1,duration:a,yoyo:u,repeat:l,repeatDelay:h,delay:c=0,easing:d=w=>w,onStart:p,onComplete:g,onRepeat:v,onUpdate:x},y)=>{var A,k;const[w,_]=B.useState(!1),{current:S}=B.useRef({tween:null});function I(){var M;(M=S.tween)==null||M.stop(),S.tween=null}return B.useMemo(()=>{if(I(),o){const M=Be.Obj;S.tween=new Z_({...i}).group(r?M.turboTweenGroup:void 0).to({...s},a).repeat(l).repeatDelay(h).delay(c).yoyo(u).start(M.getTime(r))}},[o,...e]),B.useMemo(()=>{var M;(M=S.tween)==null||M.repeat(l)},[l]),B.useMemo(()=>{var M;(M=S.tween)==null||M.delay(c)},[c]),(A=S.tween)==null||A.easing(d).onStart(p).onUpdate((M,O)=>{x&&x(M,O),_(!w)}).onRepeat(v).onComplete(g),B.useImperativeHandle(y,()=>({get repeated(){return S.tween._initialRepeat-S.tween._repeat},get repeat(){return S.tween._repeat}})),B.useEffect(()=>{},[]),t(S.tween?S.tween._object:i,((k=S.tween)==null?void 0:k.isPlaying())||!1)}),Gw="IchannelDefault",ro=ji.Obj;function Ko(r){const{dep:e=[],channelId:t=Gw,sound:n,sounds:i=[],volum:s=1,playing:o=!0,allowStop:a=!0,softBgm:u,loop:l=!1,onSoundEnd:h}=r;return B.useEffect(()=>{n&&(o?ro.play(t,n,s,u,l,h):a&&ro.stop(t,n))},[n,o,...e]),B.useEffect(()=>{i.length>0&&(o?ro.plays(t,i,s,u,h):a&&ro.stops(t,i))},[i,o,...e]),B.useEffect(()=>{ro.setVolumn(t,n,s)},[s]),T.jsx(T.Fragment,{})}function S$(r){const{dep:e=[],channelId:t="channelBgm",sound:n="bgm",volum:i=1,playing:s=!0,soft:o=.3}=r;return B.useEffect(()=>{if(s)return ro.playBgm(t,n,i,o),()=>{ro.pause(t,n)};ro.pause(t,n)},[n,s,...e]),B.useEffect(()=>{ro.setVolumn(t,n,i)},[i]),T.jsx(T.Fragment,{})}function VR(r,e="click"){function t(n){const i={};return i[e]=n,i}return B.forwardRef(({channelId:n=Gw,sound:i,volum:s=1,softBgm:o,onSoundEnd:a,...u},l)=>{const h=u[e];function c(d){ji.clickSound(),h&&h(d)}return T.jsx(r,{...u,ref:l,...t(c)})})}const T$=ji.Obj,Rn=({children:r,onClick:e,channelId:t=Gw,sound:n="click",volum:i=1,playing:s,softBgm:o=!0,soft:a,...u})=>{function l(h){e(h),T$.play(t,n,i,o,!1)}return T.jsx("div",{...u,onClick:e?l:null,children:r})};function qR(r){return({children:e,on:t,style:n,duration:i=250,...s})=>{const[o,a]=B.useState(!1),[u,l]=B.useState(!1);B.useEffect(()=>{t&&a(!0)},[t]);function h(){l(!1),t||a(!1)}function c(){l(!0)}return T.jsxs("div",{className:`page-mod ${o?"db":"dn"}`,style:{overflow:"hidden"},children:[T.jsx(Ns,{dep:[t],from:{k:0},to:{k:100},duration:i,playing:!0,onComplete:h,onStart:c,children:({k:d})=>{const p=t?100-d:d;return T.jsx(Rn,{className:`page-mod ${o?"db":"dn"}`,style:{...r(p),...n},...s,children:e})}}),T.jsx("div",{className:`page-mod ${u?"db":"dn"}`})]})}}const Ww=qR(r=>({top:`${r}%`})),E$=qR(r=>({left:`${r}%`}));function P$({cls:r="menu-mod",style:e,...t}){const{state:n,dispatch:i}=B.useContext(_t),{menuOn:s,soundOn:o}=n.setting,[a,u]=B.useState(!1),{fundsUrl:l,livechatUrl:h,lang:c,funPLay:d}=Be.Obj.urlOptions;function p(I){a&&i(cI(!1)),I&&I.stopPropagation()}function g(I){a&&(p(),i(hI(!0)))}function v(I){a&&i(uI(!o))}function x(){a&&window.open(l,"_self")}function y(){a&&(p(),i(dI(!0)))}function w(){a&&window.open(l,"fund")}function _(){a&&window.open(h,"LiveChat")}B.useEffect(()=>{s?setTimeout(()=>{u(!0)},300):u(!1)},[s]);const S=fr(Be.Obj.filterImageFormat(["avif","webp","png"]));return T.jsx(Ww,{on:s,onClick:p,duration:300,children:T.jsx("div",{className:`${r}`,style:e,onClick:I=>I.stopPropagation(),children:T.jsxs("div",{className:"list",children:[T.jsxs("div",{className:`cell ${d?"fun-play":""}`,children:[T.jsxs(Rn,{className:"item w-33 btn-mod btn-mod-active",onClick:g,children:[T.jsx("div",{className:`icon-mod icon paytable ${S}`}),T.jsx(ye,{className:`title ${c}`,children:"paytable"})]}),T.jsxs(Rn,{className:"item w-33 btn-mod btn-mod-active",onClick:v,children:[T.jsx("div",{className:`icon-mod icon ${o?"sound-on":"sound-off"} ${S}`}),T.jsx(ye,{className:"title",children:"sound"})]}),T.jsxs(Rn,{className:"item w-33 btn-mod btn-mod-active",onClick:x,children:[T.jsx("div",{className:`icon-mod icon lobby ${S}`}),T.jsx(ye,{className:"title",children:"lobby"})]})]}),T.jsxs("div",{className:`cell ${d?"hidden":"visible"}`,children:[T.jsxs(Rn,{className:"item w-33 btn-mod btn-mod-active",onClick:y,children:[T.jsx("div",{className:`icon-mod icon history ${S}`}),T.jsx(ye,{className:"title",children:"bethistory"})]}),T.jsxs(Rn,{className:"item w-33 btn-mod btn-mod-active",onClick:w,children:[T.jsx("div",{className:`icon-mod icon transfer ${S}`}),T.jsx(ye,{className:"title",children:"transfer"})]}),T.jsxs(Rn,{className:"item w-33 btn-mod btn-mod-active",onClick:_,children:[T.jsx("div",{className:`icon-mod icon chat ${S}`}),T.jsx(ye,{className:"title",children:"customservice"})]})]})]})})})}const C$="ISoundOn_",A$="IBetAmount_",k$="IBetLevel_";function I$({children:r}){const{state:e,dispatch:t}=Cd(),{soundOn:n}=e.setting,{betAmount:i,betLevel:s,spinModel:o,lineBetsModel:a,status:u}=e.spin,{scenes:l}=e.sceneManager,[h,c,d]=B.useMemo(()=>{const{id:p}=Be.Obj.configOptions;return[C$,A$,k$].map(g=>g+p)},[]);return B.useEffect(()=>{cr(n)&&localStorage.setItem(h,n?"1":"0")},[n]),B.useEffect(()=>{if(u=="spin"&&a&&cr(i)){const p=i.toNumber();localStorage.setItem(c,`${a.lineBets.map(g=>Number(g)).indexOf(p)}`)}},[u]),B.useEffect(()=>{cr(s)&&localStorage.setItem(d,`${s}`)},[s]),B.useEffect(()=>{if(Po(l)=="premain"){const g=localStorage.getItem(h)!="0",v=Number(localStorage.getItem(c)),x=localStorage.getItem(d);if(t(uI(g)),o){const y=o.lineBet,w=o.credit,_=o.betLevel;y&&!y.isZero()?t(Qs(y)):w&&!w.isZero()?t(Qs(w)):a&&(cr(v)?t(Qs(a.lineBets[v]||a.lineBets[0])):t(Qs(a.lineBets[0]))),cr(_)&&_!=0&&t(c_(_))}else a&&(cr(v)?t(Qs(a.lineBets[v]||a.lineBets[0])):t(Qs(a.lineBets[0]))),cr(x)&&t(c_(x))}},[l]),T.jsx(T.Fragment,{children:B.Children.map(r,p=>p)})}const Nh=yg(),M$=({children:r})=>{const{state:e,dispatch:t}=B.useContext(_t),[n,i]=B.useState(!1),{loggingIn:s}=e.user,[o,a]=B.useState(null),{current:u}=B.useRef({httpDoneCount:0}),[l,h]=B.useState(!1);B.useEffect(()=>{n?!s&&!o&&Nh.player().then(d=>{d.code?(d.code==500||d.code==404||d.code==401)&&Nh.authAndCanReTry()&&(t(en("")),i(!1)):a(d)}):Nh.auth().then(d=>{i(!0)})},[n]),B.useEffect(()=>{B.Children.count(r)==u.httpDoneCount&&o&&!o.code&&(Be.Obj.setServerTime(o.st),t(e$(o)))},[o,u.httpDoneCount]);function c(){u.httpDoneCount++,h(!l)}return T.jsx(T.Fragment,{children:B.Children.map(r,d=>B.cloneElement(d,{on:n&&!!o&&!o.code,onComplete:c}))})};function R$({on:r,onComplete:e}){const{dispatch:t}=B.useContext(_t);B.useEffect(()=>{r&&Nh.load().then(n=>{n.code?t(Wz(n)):t(Gz(n)),e(n)})},[r])}function O$({on:r,onComplete:e}){const{dispatch:t}=B.useContext(_t);B.useEffect(()=>{r&&Nh.lineBets().then(n=>{n.code||(t(Qz(n)),e(n))})},[r])}function N$(){const{state:r,dispatch:e}=B.useContext(_t),{status:t,betAmount:n,betLevel:i}=r.spin;return B.useEffect(()=>{const s=yg();t=="spin"&&s.spin2(n.toNumber(),i.toNumber()).then(o=>{o.code?e(YR()):e(Vz(o))}).catch(()=>{})},[t]),T.jsx(T.Fragment,{})}function B$({children:r,progress:e,onComplete:t,...n}){const{current:i}=B.useRef({percent:0,oldPercent:0});return B.useMemo(()=>{i.oldPercent=i.percent},[e]),T.jsx(ge,{...n,children:T.jsx(Ns,{dep:[e],from:{k:0},to:{k:1},playing:!0,duration:500,onComplete:()=>{t&&t(e)},children:({k:s})=>{const o=i.oldPercent+(e-i.oldPercent)*s;return i.percent=o,r(o)}})})}const Jg=r=>{const{children:e,...t}=r,{l:n,p:i}=Be.Obj.configOptions.layoutMap,s=B.useMemo(()=>!!(n&&i),[]),[o,a,u,l]=B.useMemo(()=>{if(s)return[-n.displayArea[0],-n.displayArea[1],-i.displayArea[0],-i.displayArea[1]];{const h=n??i;return[-h.displayArea[0],-h.displayArea[1],0,0]}},[]);return T.jsx(ge,{...t,children:s?T.jsx(bc,{children:T.jsx(ge,{"l-x":o,"l-y":a,"p-x":u,"p-y":l,children:e})}):T.jsx(ge,{x:o,y:a,children:e})})},L$=({assets:r,next:e,...t})=>{const n=Be.Obj.configOptions.assetVersion,{dispatch:i}=B.useContext(_t),{current:s}=B.useRef({loaded:!1,loggingIn:!1});return B.useEffect(()=>(i(l_(0)),ER(r,n,o=>{i(l_(Math.floor(o*100)))}).then(()=>{s.loaded=!0,i(Yw(e))}),()=>{const o=Un(bn,"gametitle");document.title=o}),[]),T.jsx(Jg,{...t})},F$=({children:r,assets:e,next:t,...n})=>{const i=Be.Obj.configOptions.assetVersion,{state:s,dispatch:o}=B.useContext(_t),{current:a}=B.useRef({loaded:!1,loggingIn:!1}),{loggingIn:u}=s.user,[l,h]=B.useState(0),[c,d]=B.useState(0);function p(){a.loggingIn&&a.loaded&&t&&o(Yw(t))}function g(w){l==100&&(a.loaded=!0,p())}B.useEffect(()=>{u&&(a.loggingIn=!0),p()},[u]);const[v,x]=B.useMemo(()=>[Un(bn,"loggingin"),Un(bn,"loading")],[]),y=B.useMemo(()=>l==100?[`${v}.`,`${v}..`,`${v}...`][c]:[`${x}.`,`${x}..`,`${x}...`][c],[c,l]);return B.useEffect(()=>{o(l_(0)),ER(e,i,w=>{h(Math.floor(w*100))})},[]),Yu(400,()=>{d((c+1)%3)},!0),T.jsx(Jg,{...n,children:T.jsx(B$,{progress:l,onComplete:g,children:w=>r(w,y)})})};function Sc({children:r,active:e=!0,...t}){const[n,i]=B.useState(!1),s=B.useRef(null);return B.useEffect(()=>{i(!n)},[]),T.jsxs(ge,{...t,children:[B.cloneElement(r[0],{mask:e?s.current:null}),B.cloneElement(r[1],{ref:s,visible:e})]})}function Vw(r){return B.forwardRef(({res:e=r,name:t,...n},i)=>{const s=B.useMemo(()=>dH(e,t),[t]);return T.jsx(Rt.Sprite,{ref:i,texture:s,...n})})}const lt=Vw(SR),Zm=Vw(TR),ws=Vw(wR),KR=B.forwardRef(({name:r,...e},t)=>{const n=B.useMemo(()=>hH(r),[r]);return T.jsx(Rt.Sprite,{ref:t,texture:n,...e})}),qw="preview_Bg";function D$(r){return oH(r,[{id:qw,src:"compress/bg-preview@1x.[avif,webp,jpg]"},{id:em,src:"compress/preload@2x.[avif,webp,png].json"}])}const QR="goldFont@1x",ZR="yellowFont@1x",d_="whiteFont@1x",JR="spine_all_skel",e3="spine_all_atlas",t3="spine_betLevel_skel",r3="spine_betLevel_atlas",n3="spine_bg_skel",i3="spine_bg_atlas",s3="spine_reel_skel",o3="spine_reel_atlas",a3="spine_spin_skel",l3="spine_spin_atlas";function U$(r){return lH(r,[{id:JR,src:"compress/atlas/all/cyberpunkingame.skel"},{id:e3,src:"compress/atlas/all/@1x/cyberpunkingame@1x.[avif,webp,png].atlas"},{id:QR,src:"font/goldFont@1x.xml"},{id:ZR,src:"font/yellowFont@1x.xml"},{id:d_,src:"font/whiteFont@1x.xml"},{id:n3,src:"compress/atlas/bg/BG.skel"},{id:i3,src:"compress/atlas/bg/@05/BG.[avif,webp,png].atlas"},{id:s3,src:"compress/atlas/reel/Reel.skel"},{id:o3,src:"compress/atlas/reel/@05/Reel.[avif,webp,png].atlas"},{id:t3,src:"compress/atlas/betLevel/BetLevel_select.skel"},{id:r3,src:"compress/atlas/betLevel/@1x/BetLevel_select@1x.[webp,avif,png].atlas"},{id:a3,src:"compress/atlas/autospin/SpinButton.skel"},{id:l3,src:"compress/atlas/autospin/@1x/SpinButton@1x.[avif,webp,png].atlas"},{id:TR,src:"uncompress/components@2x.[avif,webp,png].json"}])}const j$=({...r})=>{const e=B.useMemo(()=>U$(Be.Obj.urlOptions.lang),[]);return T.jsx(F$,{assets:e,...r,children:(t,n)=>{const i=-450+450*(t/100);return T.jsxs(bc,{children:[T.jsx(KR,{name:qw}),T.jsxs(ge,{"l-x":329,"l-y":750,"p-x":325,"p-y":870,children:[T.jsx(lt,{res:em,name:"LoadConatiner.png"}),T.jsxs(Sc,{x:13,y:7,children:[T.jsx(lt,{res:em,name:"LoadMeter.png"}),T.jsx(lt,{x:i,res:em,name:"LoadMetermask.png"})]}),T.jsx(Os,{x:260,y:20,text:`${n}`,anchor:.5,style:{align:"center",fill:"#FFFFFF",fontSize:20,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})]})}})};function X$({children:r,...e}){return r(e)}const H$=({dataSource:r,children:e})=>{const{gameStatus:t,nextGameStatus:n}=r.base,[i,s]=B.useMemo(()=>t.startsWith("pause_")?[!0,Number(t.split("_")[1])]:[!1,0],[t]);return Qm(()=>{n()},s,i),B.cloneElement(e,{dataSource:r})},f_=new ut(0);new ut(1);new ut(-1);function z$(r){const e=r.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function gn(r=new ut(0),e=2,t=0){return r instanceof ut||(r=new ut(r)),z$(r.toFixed(e,ut.ROUND_FLOOR))}var Kt=(r=>(r.showWild="showWild",r.showWinAmount="showWinAmount",r.showBigWin="showBigWin",r.showWinLine="showWinLine",r))(Kt||{});const $$=({dataSource:r,children:e})=>{const{state:t,dispatch:n}=B.useContext(_t),{status:i,spinModel:s}=t.spin,[o,a]=B.useState(!1),{current:u}=B.useRef({status:"idle",statusOrder:[],inFreeSpin:!1,totalWin:f_});function l(p,g=!0){u.status!=p&&(p=="idle"&&s&&(s.isExistRespin?u.inFreeSpin=!0:(u.inFreeSpin=!1,u.totalWin=f_)),u.status=p,g&&a(!o))}function h(){const p=u.statusOrder.shift();p&&l(p,!0)}function c(){h()}B.useMemo(()=>{let p;if(i=="spin")p="spin";else if(i=="stopping")p="stopping";else if(i=="idle")if(u.status=="stopping"){u.statusOrder=[];const g=s.newWildReels.length,v=s.tm.gt(0);(g||v)&&u.statusOrder.push("pause_500"),g>0&&u.statusOrder.push(Kt.showWild),v&&(u.totalWin=u.totalWin.add(s.payout),u.statusOrder.push(Kt.showWinLine)),!s.isExistRespin&&u.totalWin.gt(0)&&(s.getWinType(u.totalWin)=="big"?u.statusOrder.push(Kt.showBigWin):u.statusOrder.push(Kt.showWinAmount)),u.statusOrder.push("idle"),p=u.statusOrder.shift()}else p="idle";l(p,!1)},[i]),B.useMemo(()=>{s&&s.isExistRespin&&(u.inFreeSpin=!0,u.status="pause_500",u.statusOrder=["idle"],u.totalWin=new ut(s.tm.mul(s.lineBet).mul(s.level)))},[]);const d={base:{state:t,dispatch:n,onSkip:c,nextGameStatus:h,gameStatus:u.status},fs:{inFreeSpin:u.inFreeSpin},totalWin:u.totalWin,...r};return B.cloneElement(e,{dataSource:d})},Y$=({dataSource:r,children:e})=>{const{gameStatus:t,state:n,nextGameStatus:i}=r==null?void 0:r.base,{spinModel:s}=n.spin,o=t==Kt.showWild,{current:a}=B.useRef({ssMap:{}}),u=t=="spin";B.useMemo(()=>{if(s)for(const h of s.wildReels){const c=s.ssMap[h];c?a.ssMap[h]={ss:[...c],load:!0}:a.ssMap[h]={ss:[Za.Random(6),Za.Random(6),Za.Random(6)],load:!0}}},[]),B.useMemo(()=>{if(o)for(const h of s.wildReels){const c=s.ssMap[h];c?a.ssMap[h]={ss:[...c],load:!1}:cr(a.ssMap[h])&&(a.ssMap[h]={ss:[Za.Random(6),Za.Random(6),Za.Random(6)],load:!0})}},[o]),B.useMemo(()=>{u&&s&&(s.isExistRespin||(a.ssMap={}))},[u]),uc(()=>{i()},4500,o);const l={wild:{ssMap:a.ssMap},...r};return B.cloneElement(e,{dataSource:l})},G$=({dataSource:r,children:e})=>{const{gameStatus:t,state:n,nextGameStatus:i}=r==null?void 0:r.base,{spinModel:s}=n.spin,{current:o}=B.useRef({history:[],linewins:[],alreadyShowWin:!1}),[a,u]=B.useState(!1),l=t==Kt.showWinLine,h=t=="idle",c=t=="spin";B.useMemo(()=>{if(h){let x;o.alreadyShowWin?(o.linewins.pop(),x=o.linewins):s?s.isFromLoad?x=s.isExistRespin?s.wins:[]:x=s.wins||[]:x=[];for(let y=0;y<x.length;y++)o.history.push(x[y]);o.linewins=[],o.alreadyShowWin=!1}},[h]),B.useMemo(()=>{l&&(o.alreadyShowWin=!0,o.linewins=s.wins)},[l]);const d=Po(o.linewins),p=B.useMemo(()=>{if(d)return o.history.push(d),[1500,1500,1500,1500,1500,1500,1500,1500][d.s]},[d]);B.useMemo(()=>{c&&s&&(s.isExistRespin||(o.history=[]))},[c]);function g(){o.linewins.pop(),o.linewins.length==0?i():u(!a)}uc(()=>{g()},p,l&&!!d,[d]);const v={lineWin:{line:d,history:o.history},...r};return B.cloneElement(e,{dataSource:v})};if(typeof window<"u"&&window.PIXI){let r=window.require;window.require=e=>{if(r)return r(e);if(e.startsWith("@pixi/"))return window.PIXI}}class u3{constructor(){P(this,"entries",{});P(this,"size",0)}add(e){let t=this.entries[e];return this.entries[e]=!0,t?!1:(this.size++,!0)}addAll(e){let t=this.size;for(var n=0,i=e.length;n<i;n++)this.add(e[n]);return t!=this.size}contains(e){return this.entries[e]}clear(){this.entries={},this.size=0}}const kn=class kn{constructor(e=0,t=0,n=0,i=0){P(this,"r");P(this,"g");P(this,"b");P(this,"a");this.r=e,this.g=t,this.b=n,this.a=i}set(e,t,n,i){return this.r=e,this.g=t,this.b=n,this.a=i,this.clamp()}setFromColor(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this}setFromString(e){return e=e.charAt(0)=="#"?e.substr(1):e,this.r=parseInt(e.substr(0,2),16)/255,this.g=parseInt(e.substr(2,2),16)/255,this.b=parseInt(e.substr(4,2),16)/255,this.a=e.length!=8?1:parseInt(e.substr(6,2),16)/255,this}add(e,t,n,i){return this.r+=e,this.g+=t,this.b+=n,this.a+=i,this.clamp()}clamp(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this}static rgba8888ToColor(e,t){e.r=((t&4278190080)>>>24)/255,e.g=((t&16711680)>>>16)/255,e.b=((t&65280)>>>8)/255,e.a=(t&255)/255}static rgb888ToColor(e,t){e.r=((t&16711680)>>>16)/255,e.g=((t&65280)>>>8)/255,e.b=(t&255)/255}toRgb888(){const e=t=>("0"+(t*255).toString(16)).slice(-2);return+("0x"+e(this.r)+e(this.g)+e(this.b))}static fromString(e){return new kn().setFromString(e)}};P(kn,"WHITE",new kn(1,1,1,1)),P(kn,"RED",new kn(1,0,0,1)),P(kn,"GREEN",new kn(0,1,0,1)),P(kn,"BLUE",new kn(0,0,1,1)),P(kn,"MAGENTA",new kn(1,0,1,1));let Xe=kn;const ir=class ir{static clamp(e,t,n){return e<t?t:e>n?n:e}static cosDeg(e){return Math.cos(e*ir.degRad)}static sinDeg(e){return Math.sin(e*ir.degRad)}static atan2Deg(e,t){return Math.atan2(e,t)*ir.degRad}static signum(e){return e>0?1:e<0?-1:0}static toInt(e){return e>0?Math.floor(e):Math.ceil(e)}static cbrt(e){let t=Math.pow(Math.abs(e),.3333333333333333);return e<0?-t:t}static randomTriangular(e,t){return ir.randomTriangularWith(e,t,(e+t)*.5)}static randomTriangularWith(e,t,n){let i=Math.random(),s=t-e;return i<=(n-e)/s?e+Math.sqrt(i*s*(n-e)):t-Math.sqrt((1-i)*s*(t-n))}static isPowerOfTwo(e){return e&&(e&e-1)===0}};P(ir,"PI",3.1415927),P(ir,"PI2",ir.PI*2),P(ir,"invPI2",1/ir.PI2),P(ir,"radiansToDegrees",180/ir.PI),P(ir,"radDeg",ir.radiansToDegrees),P(ir,"degreesToRadians",ir.PI/180),P(ir,"degRad",ir.degreesToRadians);let ue=ir;const Qo=class Qo{static arrayCopy(e,t,n,i,s){for(let o=t,a=i;o<t+s;o++,a++)n[a]=e[o]}static arrayFill(e,t,n,i){for(let s=t;s<n;s++)e[s]=i}static setArraySize(e,t,n=0){let i=e.length;if(i==t)return e;if(e.length=t,i<t)for(let s=i;s<t;s++)e[s]=n;return e}static ensureArrayCapacity(e,t,n=0){return e.length>=t?e:Qo.setArraySize(e,t,n)}static newArray(e,t){let n=new Array(e);for(let i=0;i<e;i++)n[i]=t;return n}static newFloatArray(e){if(Qo.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static newShortArray(e){if(Qo.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);{let t=new Array(e);for(let n=0;n<t.length;n++)t[n]=0;return t}}static toFloatArray(e){return Qo.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e}static toSinglePrecision(e){return Qo.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e}static webkit602BugfixHelper(e,t){}static contains(e,t,n=!0){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}static enumValue(e,t){return e[t[0].toUpperCase()+t.slice(1)]}};P(Qo,"SUPPORTS_TYPED_ARRAYS",typeof Float32Array<"u");let pe=Qo;class p_{constructor(e){P(this,"items",new Array);P(this,"instantiator");this.instantiator=e}obtain(){return this.items.length>0?this.items.pop():this.instantiator()}free(e){e.reset&&e.reset(),this.items.push(e)}freeAll(e){for(let t=0;t<e.length;t++)this.free(e[t])}clear(){this.items.length=0}}class Jm{constructor(e=0,t=0){P(this,"x");P(this,"y");this.x=e,this.y=t}set(e,t){return this.x=e,this.y=t,this}length(){let e=this.x,t=this.y;return Math.sqrt(e*e+t*t)}normalize(){let e=this.length();return e!=0&&(this.x/=e,this.y/=e),this}}class c3{constructor(e){P(this,"name");if(!e)throw new Error("name cannot be null.");this.name=e}}const dg=class dg extends c3{constructor(t){super(t);P(this,"id",dg.nextID++);P(this,"bones",null);P(this,"vertices",[]);P(this,"worldVerticesLength",0);P(this,"timelineAttachment",this)}computeWorldVertices(t,n,i,s,o,a){i=o+(i>>1)*a;let u=t.bone.skeleton,l=t.deform,h=this.vertices,c=this.bones;if(!c){l.length>0&&(h=l);let v=t.bone,x=v.worldX,y=v.worldY,w=v.a,_=v.b,S=v.c,I=v.d;for(let A=n,k=o;k<i;A+=2,k+=a){let M=h[A],O=h[A+1];s[k]=M*w+O*_+x,s[k+1]=M*S+O*I+y}return}let d=0,p=0;for(let v=0;v<n;v+=2){let x=c[d];d+=x+1,p+=x}let g=u.bones;if(l.length==0)for(let v=o,x=p*3;v<i;v+=a){let y=0,w=0,_=c[d++];for(_+=d;d<_;d++,x+=3){let S=g[c[d]],I=h[x],A=h[x+1],k=h[x+2];y+=(I*S.a+A*S.b+S.worldX)*k,w+=(I*S.c+A*S.d+S.worldY)*k}s[v]=y,s[v+1]=w}else{let v=l;for(let x=o,y=p*3,w=p<<1;x<i;x+=a){let _=0,S=0,I=c[d++];for(I+=d;d<I;d++,y+=3,w+=2){let A=g[c[d]],k=h[y]+v[w],M=h[y+1]+v[w+1],O=h[y+2];_+=(k*A.a+M*A.b+A.worldX)*O,S+=(k*A.c+M*A.d+A.worldY)*O}s[x]=_,s[x+1]=S}}}copyTo(t){this.bones?(t.bones=new Array(this.bones.length),pe.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices&&(t.vertices=pe.newFloatArray(this.vertices.length),pe.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)),t.worldVerticesLength=this.worldVerticesLength,t.timelineAttachment=this.timelineAttachment}};P(dg,"nextID",0);let Hi=dg;const Eu=class Eu{constructor(e){P(this,"id",Eu.nextID());P(this,"regions");P(this,"start",0);P(this,"digits",0);P(this,"setupIndex",0);this.regions=new Array(e)}copy(){let e=new Eu(this.regions.length);return pe.arrayCopy(this.regions,0,e.regions,0,this.regions.length),e.start=this.start,e.digits=this.digits,e.setupIndex=this.setupIndex,e}apply(e,t){let n=e.sequenceIndex;n==-1&&(n=this.setupIndex),n>=this.regions.length&&(n=this.regions.length-1);let i=this.regions[n];t.region!=i&&(t.region=i,t.updateRegion())}getPath(e,t){let n=e,i=(this.start+t).toString();for(let s=this.digits-i.length;s>0;s--)n+="0";return n+=i,n}static nextID(){return Eu._nextID++}};P(Eu,"_nextID",0);let eg=Eu;var kr;(function(r){r[r.hold=0]="hold",r[r.once=1]="once",r[r.loop=2]="loop",r[r.pingpong=3]="pingpong",r[r.onceReverse=4]="onceReverse",r[r.loopReverse=5]="loopReverse",r[r.pingpongReverse=6]="pingpongReverse"})(kr||(kr={}));const h3=[kr.hold,kr.once,kr.loop,kr.pingpong,kr.onceReverse,kr.loopReverse,kr.pingpongReverse];let Kw=class{constructor(e,t,n){P(this,"name");P(this,"timelines",[]);P(this,"timelineIds",new u3);P(this,"duration");if(!e)throw new Error("name cannot be null.");this.name=e,this.setTimelines(t),this.duration=n}setTimelines(e){if(!e)throw new Error("timelines cannot be null.");this.timelines=e,this.timelineIds.clear();for(var t=0;t<e.length;t++)this.timelineIds.addAll(e[t].getPropertyIds())}hasTimeline(e){for(let t=0;t<e.length;t++)if(this.timelineIds.contains(e[t]))return!0;return!1}apply(e,t,n,i,s,o,a,u){if(!e)throw new Error("skeleton cannot be null.");i&&this.duration!=0&&(n%=this.duration,t>0&&(t%=this.duration));let l=this.timelines;for(let h=0,c=l.length;h<c;h++)l[h].apply(e,t,n,s,o,a,u)}};var ne;(function(r){r[r.setup=0]="setup",r[r.first=1]="first",r[r.replace=2]="replace",r[r.add=3]="add"})(ne||(ne={}));var fn;(function(r){r[r.mixIn=0]="mixIn",r[r.mixOut=1]="mixOut"})(fn||(fn={}));const Ye={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,inherit:7,rgb:8,alpha:9,rgb2:10,attachment:11,deform:12,event:13,drawOrder:14,ikConstraint:15,transformConstraint:16,pathConstraintPosition:17,pathConstraintSpacing:18,pathConstraintMix:19,physicsConstraintInertia:20,physicsConstraintStrength:21,physicsConstraintDamping:22,physicsConstraintMass:23,physicsConstraintWind:24,physicsConstraintGravity:25,physicsConstraintMix:26,physicsConstraintReset:27,sequence:28};class Pt{constructor(e,t){P(this,"propertyIds");P(this,"frames");this.propertyIds=t,this.frames=pe.newFloatArray(e*this.getFrameEntries())}getPropertyIds(){return this.propertyIds}getFrameEntries(){return 1}getFrameCount(){return this.frames.length/this.getFrameEntries()}getDuration(){return this.frames[this.frames.length-this.getFrameEntries()]}static search1(e,t){let n=e.length;for(let i=1;i<n;i++)if(e[i]>t)return i-1;return n-1}static search(e,t,n){let i=e.length;for(let s=n;s<i;s+=n)if(e[s]>t)return s-n;return i-n}}class Ls extends Pt{constructor(t,n,i){super(t,i);P(this,"curves");this.curves=pe.newFloatArray(t+n*18),this.curves[t-1]=1}setLinear(t){this.curves[t]=0}setStepped(t){this.curves[t]=1}shrink(t){let n=this.getFrameCount()+t*18;if(this.curves.length>n){let i=pe.newFloatArray(n);pe.arrayCopy(this.curves,0,i,0,n),this.curves=i}}setBezier(t,n,i,s,o,a,u,l,h,c,d){let p=this.curves,g=this.getFrameCount()+t*18;i==0&&(p[n]=2+g);let v=(s-a*2+l)*.03,x=(o-u*2+h)*.03,y=((a-l)*3-s+c)*.006,w=((u-h)*3-o+d)*.006,_=v*2+y,S=x*2+w,I=(a-s)*.3+v+y*.16666667,A=(u-o)*.3+x+w*.16666667,k=s+I,M=o+A;for(let O=g+18;g<O;g+=2)p[g]=k,p[g+1]=M,I+=_,A+=S,_+=y,S+=w,k+=I,M+=A}getBezierValue(t,n,i,s){let o=this.curves;if(o[s]>t){let h=this.frames[n],c=this.frames[n+i];return c+(t-h)/(o[s]-h)*(o[s+1]-c)}let a=s+18;for(s+=2;s<a;s+=2)if(o[s]>=t){let h=o[s-2],c=o[s-1];return c+(t-h)/(o[s]-h)*(o[s+1]-c)}n+=this.getFrameEntries();let u=o[a-2],l=o[a-1];return l+(t-u)/(this.frames[n]-u)*(this.frames[n+i]-l)}}class Gi extends Ls{constructor(e,t,n){super(e,t,[n])}getFrameEntries(){return 2}setFrame(e,t,n){e<<=1,this.frames[e]=t,this.frames[e+1]=n}getCurveValue(e){let t=this.frames,n=t.length-2;for(let s=2;s<=n;s+=2)if(t[s]>e){n=s-2;break}let i=this.curves[n>>1];switch(i){case 0:let s=t[n],o=t[n+1];return o+(e-s)/(t[n+2]-s)*(t[n+2+1]-o);case 1:return t[n+1]}return this.getBezierValue(e,n,1,i-2)}getRelativeValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case ne.setup:return s;case ne.first:return i+(s-i)*t}return i}let o=this.getCurveValue(e);switch(n){case ne.setup:return s+o*t;case ne.first:case ne.replace:o+=s-i}return i+o*t}getAbsoluteValue(e,t,n,i,s){if(e<this.frames[0]){switch(n){case ne.setup:return s;case ne.first:return i+(s-i)*t}return i}let o=this.getCurveValue(e);return n==ne.setup?s+(o-s)*t:i+(o-i)*t}getAbsoluteValue2(e,t,n,i,s,o){if(e<this.frames[0]){switch(n){case ne.setup:return s;case ne.first:return i+(s-i)*t}return i}return n==ne.setup?s+(o-s)*t:i+(o-i)*t}getScaleValue(e,t,n,i,s,o){const a=this.frames;if(e<a[0]){switch(n){case ne.setup:return o;case ne.first:return s+(o-s)*t}return s}let u=this.getCurveValue(e)*o;if(t==1)return n==ne.add?s+u-o:u;if(i==fn.mixOut)switch(n){case ne.setup:return o+(Math.abs(u)*ue.signum(o)-o)*t;case ne.first:case ne.replace:return s+(Math.abs(u)*ue.signum(s)-s)*t}else{let l=0;switch(n){case ne.setup:return l=Math.abs(o)*ue.signum(u),l+(u-l)*t;case ne.first:case ne.replace:return l=Math.abs(s)*ue.signum(u),l+(u-l)*t}}return s+(u-o)*t}}class Qw extends Ls{constructor(e,t,n,i){super(e,t,[n,i])}getFrameEntries(){return 3}setFrame(e,t,n,i){e*=3,this.frames[e]=t,this.frames[e+1]=n,this.frames[e+2]=i}}class tg extends Gi{constructor(t,n,i){super(t,n,Ye.rotate+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.rotation=this.getRelativeValue(i,o,a,l.rotation,l.data.rotation))}}class d3 extends Qw{constructor(t,n,i){super(t,n,Ye.x+"|"+i,Ye.y+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let h=this.frames;if(i<h[0]){switch(a){case ne.setup:l.x=l.data.x,l.y=l.data.y;return;case ne.first:l.x+=(l.data.x-l.x)*o,l.y+=(l.data.y-l.y)*o}return}let c=0,d=0,p=Pt.search(h,i,3),g=this.curves[p/3];switch(g){case 0:let v=h[p];c=h[p+1],d=h[p+2];let x=(i-v)/(h[p+3]-v);c+=(h[p+3+1]-c)*x,d+=(h[p+3+2]-d)*x;break;case 1:c=h[p+1],d=h[p+2];break;default:c=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}switch(a){case ne.setup:l.x=l.data.x+c*o,l.y=l.data.y+d*o;break;case ne.first:case ne.replace:l.x+=(l.data.x+c-l.x)*o,l.y+=(l.data.y+d-l.y)*o;break;case ne.add:l.x+=c*o,l.y+=d*o}}}class f3 extends Gi{constructor(t,n,i){super(t,n,Ye.x+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.x=this.getRelativeValue(i,o,a,l.x,l.data.x))}}class p3 extends Gi{constructor(t,n,i){super(t,n,Ye.y+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.y=this.getRelativeValue(i,o,a,l.y,l.data.y))}}class m3 extends Qw{constructor(t,n,i){super(t,n,Ye.scaleX+"|"+i,Ye.scaleY+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let h=this.frames;if(i<h[0]){switch(a){case ne.setup:l.scaleX=l.data.scaleX,l.scaleY=l.data.scaleY;return;case ne.first:l.scaleX+=(l.data.scaleX-l.scaleX)*o,l.scaleY+=(l.data.scaleY-l.scaleY)*o}return}let c,d,p=Pt.search(h,i,3),g=this.curves[p/3];switch(g){case 0:let v=h[p];c=h[p+1],d=h[p+2];let x=(i-v)/(h[p+3]-v);c+=(h[p+3+1]-c)*x,d+=(h[p+3+2]-d)*x;break;case 1:c=h[p+1],d=h[p+2];break;default:c=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}if(c*=l.data.scaleX,d*=l.data.scaleY,o==1)a==ne.add?(l.scaleX+=c-l.data.scaleX,l.scaleY+=d-l.data.scaleY):(l.scaleX=c,l.scaleY=d);else{let v=0,x=0;if(u==fn.mixOut)switch(a){case ne.setup:v=l.data.scaleX,x=l.data.scaleY,l.scaleX=v+(Math.abs(c)*ue.signum(v)-v)*o,l.scaleY=x+(Math.abs(d)*ue.signum(x)-x)*o;break;case ne.first:case ne.replace:v=l.scaleX,x=l.scaleY,l.scaleX=v+(Math.abs(c)*ue.signum(v)-v)*o,l.scaleY=x+(Math.abs(d)*ue.signum(x)-x)*o;break;case ne.add:l.scaleX+=(c-l.data.scaleX)*o,l.scaleY+=(d-l.data.scaleY)*o}else switch(a){case ne.setup:v=Math.abs(l.data.scaleX)*ue.signum(c),x=Math.abs(l.data.scaleY)*ue.signum(d),l.scaleX=v+(c-v)*o,l.scaleY=x+(d-x)*o;break;case ne.first:case ne.replace:v=Math.abs(l.scaleX)*ue.signum(c),x=Math.abs(l.scaleY)*ue.signum(d),l.scaleX=v+(c-v)*o,l.scaleY=x+(d-x)*o;break;case ne.add:l.scaleX+=(c-l.data.scaleX)*o,l.scaleY+=(d-l.data.scaleY)*o}}}}class g3 extends Gi{constructor(t,n,i){super(t,n,Ye.scaleX+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.scaleX=this.getScaleValue(i,o,a,u,l.scaleX,l.data.scaleX))}}class v3 extends Gi{constructor(t,n,i){super(t,n,Ye.scaleY+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.scaleY=this.getScaleValue(i,o,a,u,l.scaleY,l.data.scaleY))}}class y3 extends Qw{constructor(t,n,i){super(t,n,Ye.shearX+"|"+i,Ye.shearY+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let h=this.frames;if(i<h[0]){switch(a){case ne.setup:l.shearX=l.data.shearX,l.shearY=l.data.shearY;return;case ne.first:l.shearX+=(l.data.shearX-l.shearX)*o,l.shearY+=(l.data.shearY-l.shearY)*o}return}let c=0,d=0,p=Pt.search(h,i,3),g=this.curves[p/3];switch(g){case 0:let v=h[p];c=h[p+1],d=h[p+2];let x=(i-v)/(h[p+3]-v);c+=(h[p+3+1]-c)*x,d+=(h[p+3+2]-d)*x;break;case 1:c=h[p+1],d=h[p+2];break;default:c=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}switch(a){case ne.setup:l.shearX=l.data.shearX+c*o,l.shearY=l.data.shearY+d*o;break;case ne.first:case ne.replace:l.shearX+=(l.data.shearX+c-l.shearX)*o,l.shearY+=(l.data.shearY+d-l.shearY)*o;break;case ne.add:l.shearX+=c*o,l.shearY+=d*o}}}class x3 extends Gi{constructor(t,n,i){super(t,n,Ye.shearX+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.shearX=this.getRelativeValue(i,o,a,l.shearX,l.data.shearX))}}class _3 extends Gi{constructor(t,n,i){super(t,n,Ye.shearY+"|"+i);P(this,"boneIndex",0);this.boneIndex=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];l.active&&(l.shearY=this.getRelativeValue(i,o,a,l.shearY,l.data.shearY))}}class w3 extends Pt{constructor(t,n){super(t,[Ye.inherit+"|"+n]);P(this,"boneIndex",0);this.boneIndex=n}getFrameEntries(){return 2}setFrame(t,n,i){t*=2,this.frames[t]=n,this.frames[t+1]=i}apply(t,n,i,s,o,a,u){let l=t.bones[this.boneIndex];if(!l.active)return;let h=this.frames;if(i<h[0]){(a==ne.setup||a==ne.first)&&(l.inherit=l.data.inherit);return}l.inherit=this.frames[Pt.search(h,i,2)+1]}}class b3 extends Ls{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i,Ye.alpha+"|"+i]);P(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 5}setFrame(t,n,i,s,o,a){t*=5,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=this.frames,c=l.color;if(i<h[0]){let w=l.data.color;switch(a){case ne.setup:c.setFromColor(w);return;case ne.first:c.add((w.r-c.r)*o,(w.g-c.g)*o,(w.b-c.b)*o,(w.a-c.a)*o)}return}let d=0,p=0,g=0,v=0,x=Pt.search(h,i,5),y=this.curves[x/5];switch(y){case 0:let w=h[x];d=h[x+1],p=h[x+2],g=h[x+3],v=h[x+4];let _=(i-w)/(h[x+5]-w);d+=(h[x+5+1]-d)*_,p+=(h[x+5+2]-p)*_,g+=(h[x+5+3]-g)*_,v+=(h[x+5+4]-v)*_;break;case 1:d=h[x+1],p=h[x+2],g=h[x+3],v=h[x+4];break;default:d=this.getBezierValue(i,x,1,y-2),p=this.getBezierValue(i,x,2,y+18-2),g=this.getBezierValue(i,x,3,y+18*2-2),v=this.getBezierValue(i,x,4,y+18*3-2)}o==1?c.set(d,p,g,v):(a==ne.setup&&c.setFromColor(l.data.color),c.add((d-c.r)*o,(p-c.g)*o,(g-c.b)*o,(v-c.a)*o))}}class S3 extends Ls{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i]);P(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 4}setFrame(t,n,i,s,o){t<<=2,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=this.frames,c=l.color;if(i<h[0]){let y=l.data.color;switch(a){case ne.setup:c.r=y.r,c.g=y.g,c.b=y.b;return;case ne.first:c.r+=(y.r-c.r)*o,c.g+=(y.g-c.g)*o,c.b+=(y.b-c.b)*o}return}let d=0,p=0,g=0,v=Pt.search(h,i,4),x=this.curves[v>>2];switch(x){case 0:let y=h[v];d=h[v+1],p=h[v+2],g=h[v+3];let w=(i-y)/(h[v+4]-y);d+=(h[v+4+1]-d)*w,p+=(h[v+4+2]-p)*w,g+=(h[v+4+3]-g)*w;break;case 1:d=h[v+1],p=h[v+2],g=h[v+3];break;default:d=this.getBezierValue(i,v,1,x-2),p=this.getBezierValue(i,v,2,x+18-2),g=this.getBezierValue(i,v,3,x+18*2-2)}if(o==1)c.r=d,c.g=p,c.b=g;else{if(a==ne.setup){let y=l.data.color;c.r=y.r,c.g=y.g,c.b=y.b}c.r+=(d-c.r)*o,c.g+=(p-c.g)*o,c.b+=(g-c.b)*o}}}class T3 extends Gi{constructor(t,n,i){super(t,n,Ye.alpha+"|"+i);P(this,"slotIndex",0);this.slotIndex=i}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=l.color;if(i<this.frames[0]){let d=l.data.color;switch(a){case ne.setup:h.a=d.a;return;case ne.first:h.a+=(d.a-h.a)*o}return}let c=this.getCurveValue(i);o==1?h.a=c:(a==ne.setup&&(h.a=l.data.color.a),h.a+=(c-h.a)*o)}}class E3 extends Ls{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i,Ye.alpha+"|"+i,Ye.rgb2+"|"+i]);P(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 8}setFrame(t,n,i,s,o,a,u,l,h){t<<=3,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a,this.frames[t+5]=u,this.frames[t+6]=l,this.frames[t+7]=h}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=this.frames,c=l.color,d=l.darkColor;if(i<h[0]){let A=l.data.color,k=l.data.darkColor;switch(a){case ne.setup:c.setFromColor(A),d.r=k.r,d.g=k.g,d.b=k.b;return;case ne.first:c.add((A.r-c.r)*o,(A.g-c.g)*o,(A.b-c.b)*o,(A.a-c.a)*o),d.r+=(k.r-d.r)*o,d.g+=(k.g-d.g)*o,d.b+=(k.b-d.b)*o}return}let p=0,g=0,v=0,x=0,y=0,w=0,_=0,S=Pt.search(h,i,8),I=this.curves[S>>3];switch(I){case 0:let A=h[S];p=h[S+1],g=h[S+2],v=h[S+3],x=h[S+4],y=h[S+5],w=h[S+6],_=h[S+7];let k=(i-A)/(h[S+8]-A);p+=(h[S+8+1]-p)*k,g+=(h[S+8+2]-g)*k,v+=(h[S+8+3]-v)*k,x+=(h[S+8+4]-x)*k,y+=(h[S+8+5]-y)*k,w+=(h[S+8+6]-w)*k,_+=(h[S+8+7]-_)*k;break;case 1:p=h[S+1],g=h[S+2],v=h[S+3],x=h[S+4],y=h[S+5],w=h[S+6],_=h[S+7];break;default:p=this.getBezierValue(i,S,1,I-2),g=this.getBezierValue(i,S,2,I+18-2),v=this.getBezierValue(i,S,3,I+18*2-2),x=this.getBezierValue(i,S,4,I+18*3-2),y=this.getBezierValue(i,S,5,I+18*4-2),w=this.getBezierValue(i,S,6,I+18*5-2),_=this.getBezierValue(i,S,7,I+18*6-2)}if(o==1)c.set(p,g,v,x),d.r=y,d.g=w,d.b=_;else{if(a==ne.setup){c.setFromColor(l.data.color);let A=l.data.darkColor;d.r=A.r,d.g=A.g,d.b=A.b}c.add((p-c.r)*o,(g-c.g)*o,(v-c.b)*o,(x-c.a)*o),d.r+=(y-d.r)*o,d.g+=(w-d.g)*o,d.b+=(_-d.b)*o}}}class P3 extends Ls{constructor(t,n,i){super(t,n,[Ye.rgb+"|"+i,Ye.rgb2+"|"+i]);P(this,"slotIndex",0);this.slotIndex=i}getFrameEntries(){return 7}setFrame(t,n,i,s,o,a,u,l){t*=7,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a,this.frames[t+5]=u,this.frames[t+6]=l}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=this.frames,c=l.color,d=l.darkColor;if(i<h[0]){let I=l.data.color,A=l.data.darkColor;switch(a){case ne.setup:c.r=I.r,c.g=I.g,c.b=I.b,d.r=A.r,d.g=A.g,d.b=A.b;return;case ne.first:c.r+=(I.r-c.r)*o,c.g+=(I.g-c.g)*o,c.b+=(I.b-c.b)*o,d.r+=(A.r-d.r)*o,d.g+=(A.g-d.g)*o,d.b+=(A.b-d.b)*o}return}let p=0,g=0,v=0,x=0,y=0,w=0,_=Pt.search(h,i,7),S=this.curves[_/7];switch(S){case 0:let I=h[_];p=h[_+1],g=h[_+2],v=h[_+3],x=h[_+4],y=h[_+5],w=h[_+6];let A=(i-I)/(h[_+7]-I);p+=(h[_+7+1]-p)*A,g+=(h[_+7+2]-g)*A,v+=(h[_+7+3]-v)*A,x+=(h[_+7+4]-x)*A,y+=(h[_+7+5]-y)*A,w+=(h[_+7+6]-w)*A;break;case 1:p=h[_+1],g=h[_+2],v=h[_+3],x=h[_+4],y=h[_+5],w=h[_+6];break;default:p=this.getBezierValue(i,_,1,S-2),g=this.getBezierValue(i,_,2,S+18-2),v=this.getBezierValue(i,_,3,S+18*2-2),x=this.getBezierValue(i,_,4,S+18*3-2),y=this.getBezierValue(i,_,5,S+18*4-2),w=this.getBezierValue(i,_,6,S+18*5-2)}if(o==1)c.r=p,c.g=g,c.b=v,d.r=x,d.g=y,d.b=w;else{if(a==ne.setup){let I=l.data.color,A=l.data.darkColor;c.r=I.r,c.g=I.g,c.b=I.b,d.r=A.r,d.g=A.g,d.b=A.b}c.r+=(p-c.r)*o,c.g+=(g-c.g)*o,c.b+=(v-c.b)*o,d.r+=(x-d.r)*o,d.g+=(y-d.g)*o,d.b+=(w-d.b)*o}}}class bu extends Pt{constructor(t,n){super(t,[Ye.attachment+"|"+n]);P(this,"slotIndex",0);P(this,"attachmentNames");this.slotIndex=n,this.attachmentNames=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.attachmentNames[t]=i}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(l.bone.active){if(u==fn.mixOut){a==ne.setup&&this.setAttachment(t,l,l.data.attachmentName);return}if(i<this.frames[0]){(a==ne.setup||a==ne.first)&&this.setAttachment(t,l,l.data.attachmentName);return}this.setAttachment(t,l,this.attachmentNames[Pt.search1(this.frames,i)])}}setAttachment(t,n,i){n.setAttachment(i?t.getAttachment(this.slotIndex,i):null)}}class C3 extends Ls{constructor(t,n,i,s){super(t,n,[Ye.deform+"|"+i+"|"+s.id]);P(this,"slotIndex",0);P(this,"attachment");P(this,"vertices");this.slotIndex=i,this.attachment=s,this.vertices=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.vertices[t]=i}setBezier(t,n,i,s,o,a,u,l,h,c,d){let p=this.curves,g=this.getFrameCount()+t*18;i==0&&(p[n]=2+g);let v=(s-a*2+l)*.03,x=h*.03-u*.06,y=((a-l)*3-s+c)*.006,w=(u-h+.33333333)*.018,_=v*2+y,S=x*2+w,I=(a-s)*.3+v+y*.16666667,A=u*.3+x+w*.16666667,k=s+I,M=A;for(let O=g+18;g<O;g+=2)p[g]=k,p[g+1]=M,I+=_,A+=S,_+=y,S+=w,k+=I,M+=A}getCurvePercent(t,n){let i=this.curves,s=i[n];switch(s){case 0:let l=this.frames[n];return(t-l)/(this.frames[n+this.getFrameEntries()]-l);case 1:return 0}if(s-=2,i[s]>t){let l=this.frames[n];return i[s+1]*(t-l)/(i[s]-l)}let o=s+18;for(s+=2;s<o;s+=2)if(i[s]>=t){let l=i[s-2],h=i[s-1];return h+(t-l)/(i[s]-l)*(i[s+1]-h)}let a=i[o-2],u=i[o-1];return u+(1-u)*(t-a)/(this.frames[n+this.getFrameEntries()]-a)}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=l.getAttachment();if(!h||!(h instanceof Hi)||h.timelineAttachment!=this.attachment)return;let c=l.deform;c.length==0&&(a=ne.setup);let d=this.vertices,p=d[0].length,g=this.frames;if(i<g[0]){switch(a){case ne.setup:c.length=0;return;case ne.first:if(o==1){c.length=0;return}c.length=p;let S=h;if(S.bones){o=1-o;for(var v=0;v<p;v++)c[v]*=o}else{let I=S.vertices;for(var v=0;v<p;v++)c[v]+=(I[v]-c[v])*o}}return}if(c.length=p,i>=g[g.length-1]){let S=d[g.length-1];if(o==1)if(a==ne.add){let I=h;if(I.bones)for(let A=0;A<p;A++)c[A]+=S[A];else{let A=I.vertices;for(let k=0;k<p;k++)c[k]+=S[k]-A[k]}}else pe.arrayCopy(S,0,c,0,p);else switch(a){case ne.setup:{let A=h;if(A.bones)for(let k=0;k<p;k++)c[k]=S[k]*o;else{let k=A.vertices;for(let M=0;M<p;M++){let O=k[M];c[M]=O+(S[M]-O)*o}}break}case ne.first:case ne.replace:for(let A=0;A<p;A++)c[A]+=(S[A]-c[A])*o;break;case ne.add:let I=h;if(I.bones)for(let A=0;A<p;A++)c[A]+=S[A]*o;else{let A=I.vertices;for(let k=0;k<p;k++)c[k]+=(S[k]-A[k])*o}}return}let x=Pt.search1(g,i),y=this.getCurvePercent(i,x),w=d[x],_=d[x+1];if(o==1)if(a==ne.add){let S=h;if(S.bones)for(let I=0;I<p;I++){let A=w[I];c[I]+=A+(_[I]-A)*y}else{let I=S.vertices;for(let A=0;A<p;A++){let k=w[A];c[A]+=k+(_[A]-k)*y-I[A]}}}else for(let S=0;S<p;S++){let I=w[S];c[S]=I+(_[S]-I)*y}else switch(a){case ne.setup:{let I=h;if(I.bones)for(let A=0;A<p;A++){let k=w[A];c[A]=(k+(_[A]-k)*y)*o}else{let A=I.vertices;for(let k=0;k<p;k++){let M=w[k],O=A[k];c[k]=O+(M+(_[k]-M)*y-O)*o}}break}case ne.first:case ne.replace:for(let I=0;I<p;I++){let A=w[I];c[I]+=(A+(_[I]-A)*y-c[I])*o}break;case ne.add:let S=h;if(S.bones)for(let I=0;I<p;I++){let A=w[I];c[I]+=(A+(_[I]-A)*y)*o}else{let I=S.vertices;for(let A=0;A<p;A++){let k=w[A];c[A]+=(k+(_[A]-k)*y-I[A])*o}}}}}const fg=class fg extends Pt{constructor(t){super(t,fg.propertyIds);P(this,"events");this.events=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n){this.frames[t]=n.time,this.events[t]=n}apply(t,n,i,s,o,a,u){if(!s)return;let l=this.frames,h=this.frames.length;if(n>i)this.apply(t,n,Number.MAX_VALUE,s,o,a,u),n=-1;else if(n>=l[h-1])return;if(i<l[0])return;let c=0;if(n<l[0])c=0;else{c=Pt.search1(l,n)+1;let d=l[c];for(;c>0&&l[c-1]==d;)c--}for(;c<h&&i>=l[c];c++)s.push(this.events[c])}};P(fg,"propertyIds",[""+Ye.event]);let ud=fg;const pg=class pg extends Pt{constructor(t){super(t,pg.propertyIds);P(this,"drawOrders");this.drawOrders=new Array(t)}getFrameCount(){return this.frames.length}setFrame(t,n,i){this.frames[t]=n,this.drawOrders[t]=i}apply(t,n,i,s,o,a,u){if(u==fn.mixOut){a==ne.setup&&pe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}if(i<this.frames[0]){(a==ne.setup||a==ne.first)&&pe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);return}let l=Pt.search1(this.frames,i),h=this.drawOrders[l];if(!h)pe.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{let c=t.drawOrder,d=t.slots;for(let p=0,g=h.length;p<g;p++)c[p]=d[h[p]]}}};P(pg,"propertyIds",[""+Ye.drawOrder]);let ul=pg;class A3 extends Ls{constructor(t,n,i){super(t,n,[Ye.ikConstraint+"|"+i]);P(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 6}setFrame(t,n,i,s,o,a,u){t*=6,this.frames[t]=n,this.frames[t+1]=i,this.frames[t+2]=s,this.frames[t+3]=o,this.frames[t+4]=a?1:0,this.frames[t+5]=u?1:0}apply(t,n,i,s,o,a,u){let l=t.ikConstraints[this.constraintIndex];if(!l.active)return;let h=this.frames;if(i<h[0]){switch(a){case ne.setup:l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch;return;case ne.first:l.mix+=(l.data.mix-l.mix)*o,l.softness+=(l.data.softness-l.softness)*o,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}return}let c=0,d=0,p=Pt.search(h,i,6),g=this.curves[p/6];switch(g){case 0:let v=h[p];c=h[p+1],d=h[p+2];let x=(i-v)/(h[p+6]-v);c+=(h[p+6+1]-c)*x,d+=(h[p+6+2]-d)*x;break;case 1:c=h[p+1],d=h[p+2];break;default:c=this.getBezierValue(i,p,1,g-2),d=this.getBezierValue(i,p,2,g+18-2)}a==ne.setup?(l.mix=l.data.mix+(c-l.data.mix)*o,l.softness=l.data.softness+(d-l.data.softness)*o,u==fn.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=h[p+3],l.compress=h[p+4]!=0,l.stretch=h[p+5]!=0)):(l.mix+=(c-l.mix)*o,l.softness+=(d-l.softness)*o,u==fn.mixIn&&(l.bendDirection=h[p+3],l.compress=h[p+4]!=0,l.stretch=h[p+5]!=0))}}class k3 extends Ls{constructor(t,n,i){super(t,n,[Ye.transformConstraint+"|"+i]);P(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 7}setFrame(t,n,i,s,o,a,u,l){let h=this.frames;t*=7,h[t]=n,h[t+1]=i,h[t+2]=s,h[t+3]=o,h[t+4]=a,h[t+5]=u,h[t+6]=l}apply(t,n,i,s,o,a,u){let l=t.transformConstraints[this.constraintIndex];if(!l.active)return;let h=this.frames;if(i<h[0]){let _=l.data;switch(a){case ne.setup:l.mixRotate=_.mixRotate,l.mixX=_.mixX,l.mixY=_.mixY,l.mixScaleX=_.mixScaleX,l.mixScaleY=_.mixScaleY,l.mixShearY=_.mixShearY;return;case ne.first:l.mixRotate+=(_.mixRotate-l.mixRotate)*o,l.mixX+=(_.mixX-l.mixX)*o,l.mixY+=(_.mixY-l.mixY)*o,l.mixScaleX+=(_.mixScaleX-l.mixScaleX)*o,l.mixScaleY+=(_.mixScaleY-l.mixScaleY)*o,l.mixShearY+=(_.mixShearY-l.mixShearY)*o}return}let c,d,p,g,v,x,y=Pt.search(h,i,7),w=this.curves[y/7];switch(w){case 0:let _=h[y];c=h[y+1],d=h[y+2],p=h[y+3],g=h[y+4],v=h[y+5],x=h[y+6];let S=(i-_)/(h[y+7]-_);c+=(h[y+7+1]-c)*S,d+=(h[y+7+2]-d)*S,p+=(h[y+7+3]-p)*S,g+=(h[y+7+4]-g)*S,v+=(h[y+7+5]-v)*S,x+=(h[y+7+6]-x)*S;break;case 1:c=h[y+1],d=h[y+2],p=h[y+3],g=h[y+4],v=h[y+5],x=h[y+6];break;default:c=this.getBezierValue(i,y,1,w-2),d=this.getBezierValue(i,y,2,w+18-2),p=this.getBezierValue(i,y,3,w+18*2-2),g=this.getBezierValue(i,y,4,w+18*3-2),v=this.getBezierValue(i,y,5,w+18*4-2),x=this.getBezierValue(i,y,6,w+18*5-2)}if(a==ne.setup){let _=l.data;l.mixRotate=_.mixRotate+(c-_.mixRotate)*o,l.mixX=_.mixX+(d-_.mixX)*o,l.mixY=_.mixY+(p-_.mixY)*o,l.mixScaleX=_.mixScaleX+(g-_.mixScaleX)*o,l.mixScaleY=_.mixScaleY+(v-_.mixScaleY)*o,l.mixShearY=_.mixShearY+(x-_.mixShearY)*o}else l.mixRotate+=(c-l.mixRotate)*o,l.mixX+=(d-l.mixX)*o,l.mixY+=(p-l.mixY)*o,l.mixScaleX+=(g-l.mixScaleX)*o,l.mixScaleY+=(v-l.mixScaleY)*o,l.mixShearY+=(x-l.mixShearY)*o}}class I3 extends Gi{constructor(t,n,i){super(t,n,Ye.pathConstraintPosition+"|"+i);P(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,u){let l=t.pathConstraints[this.constraintIndex];l.active&&(l.position=this.getAbsoluteValue(i,o,a,l.position,l.data.position))}}class M3 extends Gi{constructor(t,n,i){super(t,n,Ye.pathConstraintSpacing+"|"+i);P(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,u){let l=t.pathConstraints[this.constraintIndex];l.active&&(l.spacing=this.getAbsoluteValue(i,o,a,l.spacing,l.data.spacing))}}class R3 extends Ls{constructor(t,n,i){super(t,n,[Ye.pathConstraintMix+"|"+i]);P(this,"constraintIndex",0);this.constraintIndex=i}getFrameEntries(){return 4}setFrame(t,n,i,s,o){let a=this.frames;t<<=2,a[t]=n,a[t+1]=i,a[t+2]=s,a[t+3]=o}apply(t,n,i,s,o,a,u){let l=t.pathConstraints[this.constraintIndex];if(!l.active)return;let h=this.frames;if(i<h[0]){switch(a){case ne.setup:l.mixRotate=l.data.mixRotate,l.mixX=l.data.mixX,l.mixY=l.data.mixY;return;case ne.first:l.mixRotate+=(l.data.mixRotate-l.mixRotate)*o,l.mixX+=(l.data.mixX-l.mixX)*o,l.mixY+=(l.data.mixY-l.mixY)*o}return}let c,d,p,g=Pt.search(h,i,4),v=this.curves[g>>2];switch(v){case 0:let x=h[g];c=h[g+1],d=h[g+2],p=h[g+3];let y=(i-x)/(h[g+4]-x);c+=(h[g+4+1]-c)*y,d+=(h[g+4+2]-d)*y,p+=(h[g+4+3]-p)*y;break;case 1:c=h[g+1],d=h[g+2],p=h[g+3];break;default:c=this.getBezierValue(i,g,1,v-2),d=this.getBezierValue(i,g,2,v+18-2),p=this.getBezierValue(i,g,3,v+18*2-2)}if(a==ne.setup){let x=l.data;l.mixRotate=x.mixRotate+(c-x.mixRotate)*o,l.mixX=x.mixX+(d-x.mixX)*o,l.mixY=x.mixY+(p-x.mixY)*o}else l.mixRotate+=(c-l.mixRotate)*o,l.mixX+=(d-l.mixX)*o,l.mixY+=(p-l.mixY)*o}}class Pl extends Gi{constructor(t,n,i,s){super(t,n,s+"|"+i);P(this,"constraintIndex",0);this.constraintIndex=i}apply(t,n,i,s,o,a,u){let l;if(this.constraintIndex==-1){const h=i>=this.frames[0]?this.getCurveValue(i):0;for(const c of t.physicsConstraints)c.active&&this.global(c.data)&&this.set(c,this.getAbsoluteValue2(i,o,a,this.get(c),this.setup(c),h))}else l=t.physicsConstraints[this.constraintIndex],l.active&&this.set(l,this.getAbsoluteValue(i,o,a,this.get(l),this.setup(l)))}}class O3 extends Pl{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintInertia)}setup(e){return e.data.inertia}get(e){return e.inertia}set(e,t){e.inertia=t}global(e){return e.inertiaGlobal}}class N3 extends Pl{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintStrength)}setup(e){return e.data.strength}get(e){return e.strength}set(e,t){e.strength=t}global(e){return e.strengthGlobal}}class B3 extends Pl{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintDamping)}setup(e){return e.data.damping}get(e){return e.damping}set(e,t){e.damping=t}global(e){return e.dampingGlobal}}class L3 extends Pl{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintMass)}setup(e){return 1/e.data.massInverse}get(e){return 1/e.massInverse}set(e,t){e.massInverse=1/t}global(e){return e.massGlobal}}class F3 extends Pl{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintWind)}setup(e){return e.data.wind}get(e){return e.wind}set(e,t){e.wind=t}global(e){return e.windGlobal}}class D3 extends Pl{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintGravity)}setup(e){return e.data.gravity}get(e){return e.gravity}set(e,t){e.gravity=t}global(e){return e.gravityGlobal}}class U3 extends Pl{constructor(e,t,n){super(e,t,n,Ye.physicsConstraintMix)}setup(e){return e.data.mix}get(e){return e.mix}set(e,t){e.mix=t}global(e){return e.mixGlobal}}const mg=class mg extends Pt{constructor(t,n){super(t,mg.propertyIds);P(this,"constraintIndex");this.constraintIndex=n}getFrameCount(){return this.frames.length}setFrame(t,n){this.frames[t]=n}apply(t,n,i,s,o,a,u){let l;if(this.constraintIndex!=-1&&(l=t.physicsConstraints[this.constraintIndex],!l.active))return;const h=this.frames;if(n>i)this.apply(t,n,Number.MAX_VALUE,[],o,a,u),n=-1;else if(n>=h[h.length-1])return;if(!(i<h[0])&&(n<h[0]||i>=h[Pt.search1(h,n)+1]))if(l!=null)l.reset();else for(const c of t.physicsConstraints)c.active&&c.reset()}};P(mg,"propertyIds",[Ye.physicsConstraintReset.toString()]);let rg=mg;const Zn=class Zn extends Pt{constructor(t,n,i){super(t,[Ye.sequence+"|"+n+"|"+i.sequence.id]);P(this,"slotIndex");P(this,"attachment");this.slotIndex=n,this.attachment=i}getFrameEntries(){return Zn.ENTRIES}getSlotIndex(){return this.slotIndex}getAttachment(){return this.attachment}setFrame(t,n,i,s,o){let a=this.frames;t*=Zn.ENTRIES,a[t]=n,a[t+Zn.MODE]=i|s<<4,a[t+Zn.DELAY]=o}apply(t,n,i,s,o,a,u){let l=t.slots[this.slotIndex];if(!l.bone.active)return;let h=l.attachment,c=this.attachment;if(h!=c&&(!(h instanceof Hi)||h.timelineAttachment!=c))return;let d=this.frames;if(i<d[0]){(a==ne.setup||a==ne.first)&&(l.sequenceIndex=-1);return}let p=Pt.search(d,i,Zn.ENTRIES),g=d[p],v=d[p+Zn.MODE],x=d[p+Zn.DELAY];if(!this.attachment.sequence)return;let y=v>>4,w=this.attachment.sequence.regions.length,_=h3[v&15];if(_!=kr.hold)switch(y+=(i-g)/x+1e-5|0,_){case kr.once:y=Math.min(w-1,y);break;case kr.loop:y%=w;break;case kr.pingpong:{let S=(w<<1)-2;y=S==0?0:y%S,y>=w&&(y=S-y);break}case kr.onceReverse:y=Math.max(w-1-y,0);break;case kr.loopReverse:y=w-1-y%w;break;case kr.pingpongReverse:{let S=(w<<1)-2;y=S==0?0:(y+w-1)%S,y>=w&&(y=S-y)}}l.sequenceIndex=y}};P(Zn,"ENTRIES",3),P(Zn,"MODE",1),P(Zn,"DELAY",2);let ng=Zn;const Pu=class Pu{constructor(e){P(this,"data");P(this,"tracks",new Array);P(this,"timeScale",1);P(this,"unkeyedState",0);P(this,"events",new Array);P(this,"listeners",new Array);P(this,"queue",new V$(this));P(this,"propertyIDs",new u3);P(this,"animationsChanged",!1);P(this,"trackEntryPool",new p_(()=>new W$));this.data=e}static emptyAnimation(){return Pu._emptyAnimation}update(e){e*=this.timeScale;let t=this.tracks;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(!s)continue;s.animationLast=s.nextAnimationLast,s.trackLast=s.nextTrackLast;let o=e*s.timeScale;if(s.delay>0){if(s.delay-=o,s.delay>0)continue;o=-s.delay,s.delay=0}let a=s.next;if(a){let u=s.trackLast-a.delay;if(u>=0){for(a.delay=0,a.trackTime+=s.timeScale==0?0:(u/s.timeScale+e)*a.timeScale,s.trackTime+=o,this.setCurrent(n,a,!0);a.mixingFrom;)a.mixTime+=e,a=a.mixingFrom;continue}}else if(s.trackLast>=s.trackEnd&&!s.mixingFrom){t[n]=null,this.queue.end(s),this.clearNext(s);continue}if(s.mixingFrom&&this.updateMixingFrom(s,e)){let u=s.mixingFrom;for(s.mixingFrom=null,u&&(u.mixingTo=null);u;)this.queue.end(u),u=u.mixingFrom}s.trackTime+=o}this.queue.drain()}updateMixingFrom(e,t){let n=e.mixingFrom;if(!n)return!0;let i=this.updateMixingFrom(n,t);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,e.mixTime>0&&e.mixTime>=e.mixDuration?((n.totalAlpha==0||e.mixDuration==0)&&(e.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=e),e.interruptAlpha=n.interruptAlpha,this.queue.end(n)),i):(n.trackTime+=t*n.timeScale,e.mixTime+=t,!1)}apply(e){if(!e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();let t=this.events,n=this.tracks,i=!1;for(let d=0,p=n.length;d<p;d++){let g=n[d];if(!g||g.delay>0)continue;i=!0;let v=d==0?ne.first:g.mixBlend,x=g.alpha;g.mixingFrom?x*=this.applyMixingFrom(g,e,v):g.trackTime>=g.trackEnd&&!g.next&&(x=0);let y=x>=g.alphaAttachmentThreshold,w=g.animationLast,_=g.getAnimationTime(),S=_,I=t;g.reverse&&(S=g.animation.duration-S,I=null);let A=g.animation.timelines,k=A.length;if(d==0&&x==1||v==ne.add){d==0&&(y=!0);for(let M=0;M<k;M++){var s=A[M];s instanceof bu?this.applyAttachmentTimeline(s,e,S,v,y):s.apply(e,w,S,I,x,v,fn.mixIn)}}else{let M=g.timelineMode,O=g.shortestRotation,F=!O&&g.timelinesRotation.length!=k<<1;F&&(g.timelinesRotation.length=k<<1);for(let U=0;U<k;U++){let H=A[U],L=M[U]==jy?v:ne.setup;!O&&H instanceof tg?this.applyRotateTimeline(H,e,S,x,L,g.timelinesRotation,U<<1,F):H instanceof bu?this.applyAttachmentTimeline(H,e,S,v,y):H.apply(e,w,S,I,x,L,fn.mixIn)}}this.queueEvents(g,_),t.length=0,g.nextAnimationLast=_,g.nextTrackLast=g.trackTime}for(var o=this.unkeyedState+FP,a=e.slots,u=0,l=e.slots.length;u<l;u++){var h=a[u];if(h.attachmentState==o){var c=h.data.attachmentName;h.setAttachment(c?e.getAttachment(h.data.index,c):null)}}return this.unkeyedState+=2,this.queue.drain(),i}applyMixingFrom(e,t,n){let i=e.mixingFrom;i.mixingFrom&&this.applyMixingFrom(i,t,n);let s=0;e.mixDuration==0?(s=1,n==ne.first&&(n=ne.setup)):(s=e.mixTime/e.mixDuration,s>1&&(s=1),n!=ne.first&&(n=i.mixBlend));let o=s<i.mixAttachmentThreshold,a=s<i.mixDrawOrderThreshold,u=i.animation.timelines,l=u.length,h=i.alpha*e.interruptAlpha,c=h*(1-s),d=i.animationLast,p=i.getAnimationTime(),g=p,v=null;if(i.reverse?g=i.animation.duration-g:s<i.eventThreshold&&(v=this.events),n==ne.add)for(let x=0;x<l;x++)u[x].apply(t,d,g,v,c,n,fn.mixOut);else{let x=i.timelineMode,y=i.timelineHoldMix,w=i.shortestRotation,_=!w&&i.timelinesRotation.length!=l<<1;_&&(i.timelinesRotation.length=l<<1),i.totalAlpha=0;for(let S=0;S<l;S++){let I=u[S],A=fn.mixOut,k,M=0;switch(x[S]){case jy:if(!a&&I instanceof ul)continue;k=n,M=c;break;case BP:k=ne.setup,M=c;break;case LP:k=n,M=h;break;case Xy:k=ne.setup,M=h;break;default:k=ne.setup;let O=y[S];M=h*Math.max(0,1-O.mixTime/O.mixDuration);break}i.totalAlpha+=M,!w&&I instanceof tg?this.applyRotateTimeline(I,t,g,M,k,i.timelinesRotation,S<<1,_):I instanceof bu?this.applyAttachmentTimeline(I,t,g,k,o&&M>=i.alphaAttachmentThreshold):(a&&I instanceof ul&&k==ne.setup&&(A=fn.mixIn),I.apply(t,d,g,v,M,k,A))}}return e.mixDuration>0&&this.queueEvents(i,p),this.events.length=0,i.nextAnimationLast=p,i.nextTrackLast=i.trackTime,s}applyAttachmentTimeline(e,t,n,i,s){var o=t.slots[e.slotIndex];o.bone.active&&(n<e.frames[0]?(i==ne.setup||i==ne.first)&&this.setAttachment(t,o,o.data.attachmentName,s):this.setAttachment(t,o,e.attachmentNames[Pt.search1(e.frames,n)],s),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+FP))}setAttachment(e,t,n,i){t.setAttachment(n?e.getAttachment(t.data.index,n):null),i&&(t.attachmentState=this.unkeyedState+K$)}applyRotateTimeline(e,t,n,i,s,o,a,u){if(u&&(o[a]=0),i==1){e.apply(t,0,n,null,1,s,fn.mixIn);return}let l=t.bones[e.boneIndex];if(!l.active)return;let h=e.frames,c=0,d=0;if(n<h[0])switch(s){case ne.setup:l.rotation=l.data.rotation;default:return;case ne.first:c=l.rotation,d=l.data.rotation}else c=s==ne.setup?l.data.rotation:l.rotation,d=l.data.rotation+e.getCurveValue(n);let p=0,g=d-c;if(g-=Math.ceil(g/360-.5)*360,g==0)p=o[a];else{let v=0,x=0;u?(v=0,x=g):(v=o[a],x=o[a+1]);let y=v-v%360;p=g+y;let w=g>=0,_=v>=0;Math.abs(x)<=90&&ue.signum(x)!=ue.signum(g)&&(Math.abs(v-y)>180?(p+=360*ue.signum(v),_=w):y!=0?p-=360*ue.signum(v):_=w),_!=w&&(p+=360*ue.signum(v)),o[a]=p}o[a+1]=g,l.rotation=c+p*i}queueEvents(e,t){let n=e.animationStart,i=e.animationEnd,s=i-n,o=e.trackLast%s,a=this.events,u=0,l=a.length;for(;u<l;u++){let c=a[u];if(c.time<o)break;c.time>i||this.queue.event(e,c)}let h=!1;if(e.loop)if(s==0)h=!0;else{const c=Math.floor(e.trackTime/s);h=c>0&&c>Math.floor(e.trackLast/s)}else h=t>=i&&e.animationLast<i;for(h&&this.queue.complete(e);u<l;u++){let c=a[u];c.time<n||this.queue.event(e,c)}}clearTracks(){let e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let t=0,n=this.tracks.length;t<n;t++)this.clearTrack(t);this.tracks.length=0,this.queue.drainDisabled=e,this.queue.drain()}clearTrack(e){if(e>=this.tracks.length)return;let t=this.tracks[e];if(!t)return;this.queue.end(t),this.clearNext(t);let n=t;for(;;){let i=n.mixingFrom;if(!i)break;this.queue.end(i),n.mixingFrom=null,n.mixingTo=null,n=i}this.tracks[t.trackIndex]=null,this.queue.drain()}setCurrent(e,t,n){let i=this.expandToIndex(e);this.tracks[e]=t,t.previous=null,i&&(n&&this.queue.interrupt(i),t.mixingFrom=i,i.mixingTo=t,t.mixTime=0,i.mixingFrom&&i.mixDuration>0&&(t.interruptAlpha*=Math.min(1,i.mixTime/i.mixDuration)),i.timelinesRotation.length=0),this.queue.start(t)}setAnimation(e,t,n=!1){let i=this.data.skeletonData.findAnimation(t);if(!i)throw new Error("Animation not found: "+t);return this.setAnimationWith(e,i,n)}setAnimationWith(e,t,n=!1){if(!t)throw new Error("animation cannot be null.");let i=!0,s=this.expandToIndex(e);s&&(s.nextTrackLast==-1?(this.tracks[e]=s.mixingFrom,this.queue.interrupt(s),this.queue.end(s),this.clearNext(s),s=s.mixingFrom,i=!1):this.clearNext(s));let o=this.trackEntry(e,t,n,s);return this.setCurrent(e,o,i),this.queue.drain(),o}addAnimation(e,t,n=!1,i=0){let s=this.data.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);return this.addAnimationWith(e,s,n,i)}addAnimationWith(e,t,n=!1,i=0){if(!t)throw new Error("animation cannot be null.");let s=this.expandToIndex(e);if(s)for(;s.next;)s=s.next;let o=this.trackEntry(e,t,n,s);return s?(s.next=o,o.previous=s,i<=0&&(i+=s.getTrackComplete()-o.mixDuration)):(this.setCurrent(e,o,!0),this.queue.drain()),o.delay=i,o}setEmptyAnimation(e,t=0){let n=this.setAnimationWith(e,Pu.emptyAnimation(),!1);return n.mixDuration=t,n.trackEnd=t,n}addEmptyAnimation(e,t=0,n=0){let i=this.addAnimationWith(e,Pu.emptyAnimation(),!1,n);return n<=0&&(i.delay+=i.mixDuration-t),i.mixDuration=t,i.trackEnd=t,i}setEmptyAnimations(e=0){let t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(let n=0,i=this.tracks.length;n<i;n++){let s=this.tracks[n];s&&this.setEmptyAnimation(s.trackIndex,e)}this.queue.drainDisabled=t,this.queue.drain()}expandToIndex(e){return e<this.tracks.length?this.tracks[e]:(pe.ensureArrayCapacity(this.tracks,e+1,null),this.tracks.length=e+1,null)}trackEntry(e,t,n,i){let s=this.trackEntryPool.obtain();return s.reset(),s.trackIndex=e,s.animation=t,s.loop=n,s.holdPrevious=!1,s.reverse=!1,s.shortestRotation=!1,s.eventThreshold=0,s.alphaAttachmentThreshold=0,s.mixAttachmentThreshold=0,s.mixDrawOrderThreshold=0,s.animationStart=0,s.animationEnd=t.duration,s.animationLast=-1,s.nextAnimationLast=-1,s.delay=0,s.trackTime=0,s.trackLast=-1,s.nextTrackLast=-1,s.trackEnd=Number.MAX_VALUE,s.timeScale=1,s.alpha=1,s.mixTime=0,s.mixDuration=i?this.data.getMix(i.animation,t):0,s.interruptAlpha=1,s.totalAlpha=0,s.mixBlend=ne.replace,s}clearNext(e){let t=e.next;for(;t;)this.queue.dispose(t),t=t.next;e.next=null}_animationsChanged(){this.animationsChanged=!1,this.propertyIDs.clear();let e=this.tracks;for(let t=0,n=e.length;t<n;t++){let i=e[t];if(i){for(;i.mixingFrom;)i=i.mixingFrom;do(!i.mixingTo||i.mixBlend!=ne.add)&&this.computeHold(i),i=i.mixingTo;while(i)}}}computeHold(e){let t=e.mixingTo,n=e.animation.timelines,i=e.animation.timelines.length,s=e.timelineMode;s.length=i;let o=e.timelineHoldMix;o.length=0;let a=this.propertyIDs;if(t&&t.holdPrevious){for(let u=0;u<i;u++)s[u]=a.addAll(n[u].getPropertyIds())?Xy:LP;return}e:for(let u=0;u<i;u++){let l=n[u],h=l.getPropertyIds();if(!a.addAll(h))s[u]=jy;else if(!t||l instanceof bu||l instanceof ul||l instanceof ud||!t.animation.hasTimeline(h))s[u]=BP;else{for(let c=t.mixingTo;c;c=c.mixingTo)if(!c.animation.hasTimeline(h)){if(e.mixDuration>0){s[u]=q$,o[u]=c;continue e}break}s[u]=Xy}}}getCurrent(e){return e>=this.tracks.length?null:this.tracks[e]}addListener(e){if(!e)throw new Error("listener cannot be null.");this.listeners.push(e)}removeListener(e){let t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}clearListeners(){this.listeners.length=0}clearListenerNotifications(){this.queue.clear()}};P(Pu,"_emptyAnimation",new Kw("<empty>",[],0));let m_=Pu;class W${constructor(){P(this,"animation",null);P(this,"previous",null);P(this,"next",null);P(this,"mixingFrom",null);P(this,"mixingTo",null);P(this,"listener",null);P(this,"trackIndex",0);P(this,"loop",!1);P(this,"holdPrevious",!1);P(this,"reverse",!1);P(this,"shortestRotation",!1);P(this,"eventThreshold",0);P(this,"mixAttachmentThreshold",0);P(this,"alphaAttachmentThreshold",0);P(this,"mixDrawOrderThreshold",0);P(this,"animationStart",0);P(this,"animationEnd",0);P(this,"animationLast",0);P(this,"nextAnimationLast",0);P(this,"delay",0);P(this,"trackTime",0);P(this,"trackLast",0);P(this,"nextTrackLast",0);P(this,"trackEnd",0);P(this,"timeScale",0);P(this,"alpha",0);P(this,"mixTime",0);P(this,"_mixDuration",0);P(this,"interruptAlpha",0);P(this,"totalAlpha",0);P(this,"mixBlend",ne.replace);P(this,"timelineMode",new Array);P(this,"timelineHoldMix",new Array);P(this,"timelinesRotation",new Array)}get mixDuration(){return this._mixDuration}set mixDuration(e){this._mixDuration=e}setMixDurationWithDelay(e,t){this._mixDuration=e,this.previous!=null&&t<=0&&(t+=this.previous.getTrackComplete()-e),this.delay=t}reset(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0}getAnimationTime(){if(this.loop){let e=this.animationEnd-this.animationStart;return e==0?this.animationStart:this.trackTime%e+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)}setAnimationLast(e){this.animationLast=e,this.nextAnimationLast=e}isComplete(){return this.trackTime>=this.animationEnd-this.animationStart}resetRotationDirections(){this.timelinesRotation.length=0}getTrackComplete(){let e=this.animationEnd-this.animationStart;if(e!=0){if(this.loop)return e*(1+(this.trackTime/e|0));if(this.trackTime<e)return e}return this.trackTime}wasApplied(){return this.nextTrackLast!=-1}isNextReady(){return this.next!=null&&this.nextTrackLast-this.next.delay>=0}}class V${constructor(e){P(this,"objects",[]);P(this,"drainDisabled",!1);P(this,"animState");this.animState=e}start(e){this.objects.push(un.start),this.objects.push(e),this.animState.animationsChanged=!0}interrupt(e){this.objects.push(un.interrupt),this.objects.push(e)}end(e){this.objects.push(un.end),this.objects.push(e),this.animState.animationsChanged=!0}dispose(e){this.objects.push(un.dispose),this.objects.push(e)}complete(e){this.objects.push(un.complete),this.objects.push(e)}event(e,t){this.objects.push(un.event),this.objects.push(e),this.objects.push(t)}drain(){if(this.drainDisabled)return;this.drainDisabled=!0;let e=this.objects,t=this.animState.listeners;for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];switch(i){case un.start:s.listener&&s.listener.start&&s.listener.start(s);for(let a=0;a<t.length;a++){let u=t[a];u.start&&u.start(s)}break;case un.interrupt:s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(let a=0;a<t.length;a++){let u=t[a];u.interrupt&&u.interrupt(s)}break;case un.end:s.listener&&s.listener.end&&s.listener.end(s);for(let a=0;a<t.length;a++){let u=t[a];u.end&&u.end(s)}case un.dispose:s.listener&&s.listener.dispose&&s.listener.dispose(s);for(let a=0;a<t.length;a++){let u=t[a];u.dispose&&u.dispose(s)}this.animState.trackEntryPool.free(s);break;case un.complete:s.listener&&s.listener.complete&&s.listener.complete(s);for(let a=0;a<t.length;a++){let u=t[a];u.complete&&u.complete(s)}break;case un.event:let o=e[n+++2];s.listener&&s.listener.event&&s.listener.event(s,o);for(let a=0;a<t.length;a++){let u=t[a];u.event&&u.event(s,o)}break}}this.clear(),this.drainDisabled=!1}clear(){this.objects.length=0}}var un;(function(r){r[r.start=0]="start",r[r.interrupt=1]="interrupt",r[r.end=2]="end",r[r.dispose=3]="dispose",r[r.complete=4]="complete",r[r.event=5]="event"})(un||(un={}));const jy=0,BP=1,LP=2,Xy=3,q$=4,FP=1,K$=2;class Q${constructor(e){P(this,"skeletonData");P(this,"animationToMixTime",{});P(this,"defaultMix",0);if(!e)throw new Error("skeletonData cannot be null.");this.skeletonData=e}setMix(e,t,n){let i=this.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);let s=this.skeletonData.findAnimation(t);if(!s)throw new Error("Animation not found: "+t);this.setMixWith(i,s,n)}setMixWith(e,t,n){if(!e)throw new Error("from cannot be null.");if(!t)throw new Error("to cannot be null.");let i=e.name+"."+t.name;this.animationToMixTime[i]=n}getMix(e,t){let n=e.name+"."+t.name,i=this.animationToMixTime[n];return i===void 0?this.defaultMix:i}}class Zw extends Hi{constructor(t){super(t);P(this,"color",new Xe(1,1,1,1))}copy(){let t=new Zw(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t}}class Ad extends Hi{constructor(t){super(t);P(this,"endSlot",null);P(this,"color",new Xe(.2275,.2275,.8078,1))}copy(){let t=new Ad(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t}}class Z${constructor(e){P(this,"_image");this._image=e}getImage(){return this._image}}var yr;(function(r){r[r.Nearest=9728]="Nearest",r[r.Linear=9729]="Linear",r[r.MipMap=9987]="MipMap",r[r.MipMapNearestNearest=9984]="MipMapNearestNearest",r[r.MipMapLinearNearest=9985]="MipMapLinearNearest",r[r.MipMapNearestLinear=9986]="MipMapNearestLinear",r[r.MipMapLinearLinear=9987]="MipMapLinearLinear"})(yr||(yr={}));var fo;(function(r){r[r.MirroredRepeat=33648]="MirroredRepeat",r[r.ClampToEdge=33071]="ClampToEdge",r[r.Repeat=10497]="Repeat"})(fo||(fo={}));class J${constructor(){P(this,"texture");P(this,"u",0);P(this,"v",0);P(this,"u2",0);P(this,"v2",0);P(this,"width",0);P(this,"height",0);P(this,"degrees",0);P(this,"offsetX",0);P(this,"offsetY",0);P(this,"originalWidth",0);P(this,"originalHeight",0)}}class e9{constructor(e){P(this,"pages",new Array);P(this,"regions",new Array);let t=new t9(e),n=new Array(4),i={};i.size=h=>{h.width=parseInt(n[1]),h.height=parseInt(n[2])},i.format=()=>{},i.filter=h=>{h.minFilter=pe.enumValue(yr,n[1]),h.magFilter=pe.enumValue(yr,n[2])},i.repeat=h=>{n[1].indexOf("x")!=-1&&(h.uWrap=fo.Repeat),n[1].indexOf("y")!=-1&&(h.vWrap=fo.Repeat)},i.pma=h=>{h.pma=n[1]=="true"};var s={};s.xy=h=>{h.x=parseInt(n[1]),h.y=parseInt(n[2])},s.size=h=>{h.width=parseInt(n[1]),h.height=parseInt(n[2])},s.bounds=h=>{h.x=parseInt(n[1]),h.y=parseInt(n[2]),h.width=parseInt(n[3]),h.height=parseInt(n[4])},s.offset=h=>{h.offsetX=parseInt(n[1]),h.offsetY=parseInt(n[2])},s.orig=h=>{h.originalWidth=parseInt(n[1]),h.originalHeight=parseInt(n[2])},s.offsets=h=>{h.offsetX=parseInt(n[1]),h.offsetY=parseInt(n[2]),h.originalWidth=parseInt(n[3]),h.originalHeight=parseInt(n[4])},s.rotate=h=>{let c=n[1];c=="true"?h.degrees=90:c!="false"&&(h.degrees=parseInt(c))},s.index=h=>{h.index=parseInt(n[1])};let o=t.readLine();for(;o&&o.trim().length==0;)o=t.readLine();for(;!(!o||o.trim().length==0||t.readEntry(n,o)==0);)o=t.readLine();let a=null,u=null,l=null;for(;o!==null;)if(o.trim().length==0)a=null,o=t.readLine();else if(a){let h=new j3(a,o);for(;;){let c=t.readEntry(n,o=t.readLine());if(c==0)break;let d=s[n[0]];if(d)d(h);else{u||(u=[]),l||(l=[]),u.push(n[0]);let p=[];for(let g=0;g<c;g++)p.push(parseInt(n[g+1]));l.push(p)}}h.originalWidth==0&&h.originalHeight==0&&(h.originalWidth=h.width,h.originalHeight=h.height),u&&u.length>0&&l&&l.length>0&&(h.names=u,h.values=l,u=null,l=null),h.u=h.x/a.width,h.v=h.y/a.height,h.degrees==90?(h.u2=(h.x+h.height)/a.width,h.v2=(h.y+h.width)/a.height):(h.u2=(h.x+h.width)/a.width,h.v2=(h.y+h.height)/a.height),this.regions.push(h)}else{for(a=new r9(o.trim());t.readEntry(n,o=t.readLine())!=0;){let h=i[n[0]];h&&h(a)}this.pages.push(a)}}findRegion(e){for(let t=0;t<this.regions.length;t++)if(this.regions[t].name==e)return this.regions[t];return null}setTextures(e,t=""){for(let n of this.pages)n.setTexture(e.get(t+n.name))}dispose(){var e;for(let t=0;t<this.pages.length;t++)(e=this.pages[t].texture)==null||e.dispose()}}class t9{constructor(e){P(this,"lines");P(this,"index",0);this.lines=e.split(/\r\n|\r|\n/)}readLine(){return this.index>=this.lines.length?null:this.lines[this.index++]}readEntry(e,t){if(!t||(t=t.trim(),t.length==0))return 0;let n=t.indexOf(":");if(n==-1)return 0;e[0]=t.substr(0,n).trim();for(let i=1,s=n+1;;i++){let o=t.indexOf(",",s);if(o==-1)return e[i]=t.substr(s).trim(),i;if(e[i]=t.substr(s,o-s).trim(),s=o+1,i==4)return 4}}}class r9{constructor(e){P(this,"name");P(this,"minFilter",yr.Nearest);P(this,"magFilter",yr.Nearest);P(this,"uWrap",fo.ClampToEdge);P(this,"vWrap",fo.ClampToEdge);P(this,"texture",null);P(this,"width",0);P(this,"height",0);P(this,"pma",!1);P(this,"regions",new Array);this.name=e}setTexture(e){this.texture=e,e.setFilters(this.minFilter,this.magFilter),e.setWraps(this.uWrap,this.vWrap);for(let t of this.regions)t.texture=e}}class j3 extends J${constructor(t,n){super();P(this,"page");P(this,"name");P(this,"x",0);P(this,"y",0);P(this,"offsetX",0);P(this,"offsetY",0);P(this,"originalWidth",0);P(this,"originalHeight",0);P(this,"index",0);P(this,"degrees",0);P(this,"names",null);P(this,"values",null);this.page=t,this.name=n,t.regions.push(this)}}class _l extends Hi{constructor(t,n){super(t);P(this,"region",null);P(this,"path");P(this,"regionUVs",[]);P(this,"uvs",[]);P(this,"triangles",[]);P(this,"color",new Xe(1,1,1,1));P(this,"width",0);P(this,"height",0);P(this,"hullLength",0);P(this,"edges",[]);P(this,"parentMesh",null);P(this,"sequence",null);P(this,"tempColor",new Xe(0,0,0,0));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.regionUVs;(!this.uvs||this.uvs.length!=t.length)&&(this.uvs=pe.newFloatArray(t.length));let n=this.uvs,i=this.uvs.length,s=this.region.u,o=this.region.v,a=0,u=0;if(this.region instanceof j3){let l=this.region,h=l.page,c=h.width,d=h.height;switch(l.degrees){case 90:s-=(l.originalHeight-l.offsetY-l.height)/c,o-=(l.originalWidth-l.offsetX-l.width)/d,a=l.originalHeight/c,u=l.originalWidth/d;for(let p=0;p<i;p+=2)n[p]=s+t[p+1]*a,n[p+1]=o+(1-t[p])*u;return;case 180:s-=(l.originalWidth-l.offsetX-l.width)/c,o-=l.offsetY/d,a=l.originalWidth/c,u=l.originalHeight/d;for(let p=0;p<i;p+=2)n[p]=s+(1-t[p])*a,n[p+1]=o+(1-t[p+1])*u;return;case 270:s-=l.offsetY/c,o-=l.offsetX/d,a=l.originalHeight/c,u=l.originalWidth/d;for(let p=0;p<i;p+=2)n[p]=s+(1-t[p+1])*a,n[p+1]=o+t[p]*u;return}s-=l.offsetX/c,o-=(l.originalHeight-l.offsetY-l.height)/d,a=l.originalWidth/c,u=l.originalHeight/d}else this.region?(a=this.region.u2-s,u=this.region.v2-o):(s=o=0,a=u=1);for(let l=0;l<i;l+=2)n[l]=s+t[l]*a,n[l+1]=o+t[l+1]*u}getParentMesh(){return this.parentMesh}setParentMesh(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)}copy(){if(this.parentMesh)return this.newLinkedMesh();let t=new _l(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Array(this.regionUVs.length),pe.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.uvs=new Array(this.uvs.length),pe.arrayCopy(this.uvs,0,t.uvs,0,this.uvs.length),t.triangles=new Array(this.triangles.length),pe.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,t.sequence=this.sequence!=null?this.sequence.copy():null,this.edges&&(t.edges=new Array(this.edges.length),pe.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t}computeWorldVertices(t,n,i,s,o,a){this.sequence!=null&&this.sequence.apply(t,this),super.computeWorldVertices(t,n,i,s,o,a)}newLinkedMesh(){let t=new _l(this.name,this.path);return t.region=this.region,t.color.setFromColor(this.color),t.timelineAttachment=this.timelineAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t.region!=null&&t.updateRegion(),t}}class cc extends Hi{constructor(t){super(t);P(this,"lengths",[]);P(this,"closed",!1);P(this,"constantSpeed",!1);P(this,"color",new Xe(1,1,1,1))}copy(){let t=new cc(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),pe.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t}}class Jw extends Hi{constructor(t){super(t);P(this,"x",0);P(this,"y",0);P(this,"rotation",0);P(this,"color",new Xe(.38,.94,0,1))}computeWorldPosition(t,n){return n.x=this.x*t.a+this.y*t.b+t.worldX,n.y=this.x*t.c+this.y*t.d+t.worldY,n}computeWorldRotation(t){const n=this.rotation*ue.degRad,i=Math.cos(n),s=Math.sin(n),o=i*t.a+s*t.b,a=i*t.c+s*t.d;return ue.atan2Deg(a,o)}copy(){let t=new Jw(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t}}const et=class et extends c3{constructor(t,n){super(t);P(this,"x",0);P(this,"y",0);P(this,"scaleX",1);P(this,"scaleY",1);P(this,"rotation",0);P(this,"width",0);P(this,"height",0);P(this,"color",new Xe(1,1,1,1));P(this,"path");P(this,"region",null);P(this,"sequence",null);P(this,"offset",pe.newFloatArray(8));P(this,"uvs",pe.newFloatArray(8));P(this,"tempColor",new Xe(1,1,1,1));this.path=n}updateRegion(){if(!this.region)throw new Error("Region not set.");let t=this.region,n=this.uvs;if(t==null){n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=1,n[5]=1,n[6]=1,n[7]=0;return}let i=this.width/this.region.originalWidth*this.scaleX,s=this.height/this.region.originalHeight*this.scaleY,o=-this.width/2*this.scaleX+this.region.offsetX*i,a=-this.height/2*this.scaleY+this.region.offsetY*s,u=o+this.region.width*i,l=a+this.region.height*s,h=this.rotation*ue.degRad,c=Math.cos(h),d=Math.sin(h),p=this.x,g=this.y,v=o*c+p,x=o*d,y=a*c+g,w=a*d,_=u*c+p,S=u*d,I=l*c+g,A=l*d,k=this.offset;k[0]=v-w,k[1]=y+x,k[2]=v-A,k[3]=I+x,k[4]=_-A,k[5]=I+S,k[6]=_-w,k[7]=y+S,t.degrees==90?(n[0]=t.u2,n[1]=t.v2,n[2]=t.u,n[3]=t.v2,n[4]=t.u,n[5]=t.v,n[6]=t.u2,n[7]=t.v):(n[0]=t.u,n[1]=t.v2,n[2]=t.u,n[3]=t.v,n[4]=t.u2,n[5]=t.v,n[6]=t.u2,n[7]=t.v2)}computeWorldVertices(t,n,i,s){this.sequence!=null&&this.sequence.apply(t,this);let o=t.bone,a=this.offset,u=o.worldX,l=o.worldY,h=o.a,c=o.b,d=o.c,p=o.d,g=0,v=0;g=a[0],v=a[1],n[i]=g*h+v*c+u,n[i+1]=g*d+v*p+l,i+=s,g=a[2],v=a[3],n[i]=g*h+v*c+u,n[i+1]=g*d+v*p+l,i+=s,g=a[4],v=a[5],n[i]=g*h+v*c+u,n[i+1]=g*d+v*p+l,i+=s,g=a[6],v=a[7],n[i]=g*h+v*c+u,n[i+1]=g*d+v*p+l}copy(){let t=new et(this.name,this.path);return t.region=this.region,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,pe.arrayCopy(this.uvs,0,t.uvs,0,8),pe.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t.sequence=this.sequence!=null?this.sequence.copy():null,t}};P(et,"X1",0),P(et,"Y1",1),P(et,"C1R",2),P(et,"C1G",3),P(et,"C1B",4),P(et,"C1A",5),P(et,"U1",6),P(et,"V1",7),P(et,"X2",8),P(et,"Y2",9),P(et,"C2R",10),P(et,"C2G",11),P(et,"C2B",12),P(et,"C2A",13),P(et,"U2",14),P(et,"V2",15),P(et,"X3",16),P(et,"Y3",17),P(et,"C3R",18),P(et,"C3G",19),P(et,"C3B",20),P(et,"C3A",21),P(et,"U3",22),P(et,"V3",23),P(et,"X4",24),P(et,"Y4",25),P(et,"C4R",26),P(et,"C4G",27),P(et,"C4B",28),P(et,"C4A",29),P(et,"U4",30),P(et,"V4",31);let cd=et;class n9{constructor(e){P(this,"atlas");this.atlas=e}loadSequence(e,t,n){let i=n.regions;for(let s=0,o=i.length;s<o;s++){let a=n.getPath(t,s),u=this.atlas.findRegion(a);if(u==null)throw new Error("Region not found in atlas: "+a+" (sequence: "+e+")");i[s]=u}}newRegionAttachment(e,t,n,i){let s=new cd(t,n);if(i!=null)this.loadSequence(t,n,i);else{let o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (region attachment: "+t+")");s.region=o}return s}newMeshAttachment(e,t,n,i){let s=new _l(t,n);if(i!=null)this.loadSequence(t,n,i);else{let o=this.atlas.findRegion(n);if(!o)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+t+")");s.region=o}return s}newBoundingBoxAttachment(e,t){return new Zw(t)}newPathAttachment(e,t){return new cc(t)}newPointAttachment(e,t){return new Jw(t)}newClippingAttachment(e,t){return new Ad(t)}}class X3{constructor(e,t,n){P(this,"index",0);P(this,"name");P(this,"parent",null);P(this,"length",0);P(this,"x",0);P(this,"y",0);P(this,"rotation",0);P(this,"scaleX",1);P(this,"scaleY",1);P(this,"shearX",0);P(this,"shearY",0);P(this,"inherit",Bt.Normal);P(this,"skinRequired",!1);P(this,"color",new Xe);P(this,"icon");P(this,"visible",!1);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");this.index=e,this.name=t,this.parent=n}}var Bt;(function(r){r[r.Normal=0]="Normal",r[r.OnlyTranslation=1]="OnlyTranslation",r[r.NoRotationOrReflection=2]="NoRotationOrReflection",r[r.NoScale=3]="NoScale",r[r.NoScaleOrReflection=4]="NoScaleOrReflection"})(Bt||(Bt={}));class DP{constructor(e,t,n){P(this,"data");P(this,"skeleton");P(this,"parent",null);P(this,"children",new Array);P(this,"x",0);P(this,"y",0);P(this,"rotation",0);P(this,"scaleX",0);P(this,"scaleY",0);P(this,"shearX",0);P(this,"shearY",0);P(this,"ax",0);P(this,"ay",0);P(this,"arotation",0);P(this,"ascaleX",0);P(this,"ascaleY",0);P(this,"ashearX",0);P(this,"ashearY",0);P(this,"a",0);P(this,"b",0);P(this,"c",0);P(this,"d",0);P(this,"worldY",0);P(this,"worldX",0);P(this,"inherit",Bt.Normal);P(this,"sorted",!1);P(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.skeleton=t,this.parent=n,this.setToSetupPose()}isActive(){return this.active}update(e){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)}updateWorldTransform(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)}updateWorldTransformWith(e,t,n,i,s,o,a){this.ax=e,this.ay=t,this.arotation=n,this.ascaleX=i,this.ascaleY=s,this.ashearX=o,this.ashearY=a;let u=this.parent;if(!u){let p=this.skeleton;const g=p.scaleX,v=p.scaleY,x=(n+o)*ue.degRad,y=(n+90+a)*ue.degRad;this.a=Math.cos(x)*i*g,this.b=Math.cos(y)*s*g,this.c=Math.sin(x)*i*v,this.d=Math.sin(y)*s*v,this.worldX=e*g+p.x,this.worldY=t*v+p.y;return}let l=u.a,h=u.b,c=u.c,d=u.d;switch(this.worldX=l*e+h*t+u.worldX,this.worldY=c*e+d*t+u.worldY,this.inherit){case Bt.Normal:{const p=(n+o)*ue.degRad,g=(n+90+a)*ue.degRad,v=Math.cos(p)*i,x=Math.cos(g)*s,y=Math.sin(p)*i,w=Math.sin(g)*s;this.a=l*v+h*y,this.b=l*x+h*w,this.c=c*v+d*y,this.d=c*x+d*w;return}case Bt.OnlyTranslation:{const p=(n+o)*ue.degRad,g=(n+90+a)*ue.degRad;this.a=Math.cos(p)*i,this.b=Math.cos(g)*s,this.c=Math.sin(p)*i,this.d=Math.sin(g)*s;break}case Bt.NoRotationOrReflection:{let p=l*l+c*c,g=0;p>1e-4?(p=Math.abs(l*d-h*c)/p,l/=this.skeleton.scaleX,c/=this.skeleton.scaleY,h=c*p,d=l*p,g=Math.atan2(c,l)*ue.radDeg):(l=0,c=0,g=90-Math.atan2(d,h)*ue.radDeg);const v=(n+o-g)*ue.degRad,x=(n+a-g+90)*ue.degRad,y=Math.cos(v)*i,w=Math.cos(x)*s,_=Math.sin(v)*i,S=Math.sin(x)*s;this.a=l*y-h*_,this.b=l*w-h*S,this.c=c*y+d*_,this.d=c*w+d*S;break}case Bt.NoScale:case Bt.NoScaleOrReflection:{n*=ue.degRad;const p=Math.cos(n),g=Math.sin(n);let v=(l*p+h*g)/this.skeleton.scaleX,x=(c*p+d*g)/this.skeleton.scaleY,y=Math.sqrt(v*v+x*x);y>1e-5&&(y=1/y),v*=y,x*=y,y=Math.sqrt(v*v+x*x),this.inherit==Bt.NoScale&&l*d-h*c<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(y=-y),n=Math.PI/2+Math.atan2(x,v);const w=Math.cos(n)*y,_=Math.sin(n)*y;o*=ue.degRad,a=(90+a)*ue.degRad;const S=Math.cos(o)*i,I=Math.cos(a)*s,A=Math.sin(o)*i,k=Math.sin(a)*s;this.a=v*S+w*A,this.b=v*I+w*k,this.c=x*S+_*A,this.d=x*I+_*k;break}}this.a*=this.skeleton.scaleX,this.b*=this.skeleton.scaleX,this.c*=this.skeleton.scaleY,this.d*=this.skeleton.scaleY}setToSetupPose(){let e=this.data;this.x=e.x,this.y=e.y,this.rotation=e.rotation,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.shearX=e.shearX,this.shearY=e.shearY,this.inherit=e.inherit}updateAppliedTransform(){let e=this.parent;if(!e){this.ax=this.worldX-this.skeleton.x,this.ay=this.worldY-this.skeleton.y,this.arotation=Math.atan2(this.c,this.a)*ue.radDeg,this.ascaleX=Math.sqrt(this.a*this.a+this.c*this.c),this.ascaleY=Math.sqrt(this.b*this.b+this.d*this.d),this.ashearX=0,this.ashearY=Math.atan2(this.a*this.b+this.c*this.d,this.a*this.d-this.b*this.c)*ue.radDeg;return}let t=e.a,n=e.b,i=e.c,s=e.d,o=1/(t*s-n*i),a=s*o,u=n*o,l=i*o,h=t*o,c=this.worldX-e.worldX,d=this.worldY-e.worldY;this.ax=c*a-d*u,this.ay=d*h-c*l;let p,g,v,x;if(this.inherit==Bt.OnlyTranslation)p=this.a,g=this.b,v=this.c,x=this.d;else{switch(this.inherit){case Bt.NoRotationOrReflection:{let I=Math.abs(t*s-n*i)/(t*t+i*i),A=t/this.skeleton.scaleX;n=-(i/this.skeleton.scaleY)*I*this.skeleton.scaleX,s=A*I*this.skeleton.scaleY,o=1/(t*s-n*i),a=s*o,u=n*o;break}case Bt.NoScale:case Bt.NoScaleOrReflection:let y=ue.cosDeg(this.rotation),w=ue.sinDeg(this.rotation);t=(t*y+n*w)/this.skeleton.scaleX,i=(i*y+s*w)/this.skeleton.scaleY;let _=Math.sqrt(t*t+i*i);_>1e-5&&(_=1/_),t*=_,i*=_,_=Math.sqrt(t*t+i*i),this.inherit==Bt.NoScale&&o<0!=(this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(_=-_);let S=ue.PI/2+Math.atan2(i,t);n=Math.cos(S)*_,s=Math.sin(S)*_,o=1/(t*s-n*i),a=s*o,u=n*o,l=i*o,h=t*o}p=a*this.a-u*this.c,g=a*this.b-u*this.d,v=h*this.c-l*this.a,x=h*this.d-l*this.b}if(this.ashearX=0,this.ascaleX=Math.sqrt(p*p+v*v),this.ascaleX>1e-4){let y=p*x-g*v;this.ascaleY=y/this.ascaleX,this.ashearY=-Math.atan2(p*g+v*x,y)*ue.radDeg,this.arotation=Math.atan2(v,p)*ue.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(g*g+x*x),this.ashearY=0,this.arotation=90-Math.atan2(x,g)*ue.radDeg}getWorldRotationX(){return Math.atan2(this.c,this.a)*ue.radDeg}getWorldRotationY(){return Math.atan2(this.d,this.b)*ue.radDeg}getWorldScaleX(){return Math.sqrt(this.a*this.a+this.c*this.c)}getWorldScaleY(){return Math.sqrt(this.b*this.b+this.d*this.d)}worldToLocal(e){let t=1/(this.a*this.d-this.b*this.c),n=e.x-this.worldX,i=e.y-this.worldY;return e.x=n*this.d*t-i*this.b*t,e.y=i*this.a*t-n*this.c*t,e}localToWorld(e){let t=e.x,n=e.y;return e.x=t*this.a+n*this.b+this.worldX,e.y=t*this.c+n*this.d+this.worldY,e}worldToParent(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.worldToLocal(e)}parentToWorld(e){if(e==null)throw new Error("world cannot be null.");return this.parent==null?e:this.parent.localToWorld(e)}worldToLocalRotation(e){let t=ue.sinDeg(e),n=ue.cosDeg(e);return Math.atan2(this.a*t-this.c*n,this.d*n-this.b*t)*ue.radDeg+this.rotation-this.shearX}localToWorldRotation(e){e-=this.rotation-this.shearX;let t=ue.sinDeg(e),n=ue.cosDeg(e);return Math.atan2(n*this.c+t*this.d,n*this.a+t*this.b)*ue.radDeg}rotateWorld(e){e*=ue.degRad;const t=Math.sin(e),n=Math.cos(e),i=this.a,s=this.b;this.a=n*i-t*this.c,this.b=n*s-t*this.d,this.c=t*i+n*this.c,this.d=t*s+n*this.d}}class e0{constructor(e,t,n){P(this,"name");P(this,"order");P(this,"skinRequired");this.name=e,this.order=t,this.skinRequired=n}}let H3=class{constructor(e,t){P(this,"data");P(this,"intValue",0);P(this,"floatValue",0);P(this,"stringValue",null);P(this,"time",0);P(this,"volume",0);P(this,"balance",0);if(!t)throw new Error("data cannot be null.");this.time=e,this.data=t}};class z3{constructor(e){P(this,"name");P(this,"intValue",0);P(this,"floatValue",0);P(this,"stringValue",null);P(this,"audioPath",null);P(this,"volume",0);P(this,"balance",0);this.name=e}}class i9{constructor(e,t){P(this,"data");P(this,"bones");P(this,"target");P(this,"bendDirection",0);P(this,"compress",!1);P(this,"stretch",!1);P(this,"mix",1);P(this,"softness",0);P(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0;i<e.bones.length;i++){let s=t.findBone(e.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${e.bones[i].name}`);this.bones.push(s)}let n=t.findBone(e.target.name);if(!n)throw new Error(`Couldn't find bone ${e.target.name}`);this.target=n,this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mix=e.mix,this.softness=e.softness,this.bendDirection=e.bendDirection,this.compress=e.compress,this.stretch=e.stretch}update(e){if(this.mix==0)return;let t=this.target,n=this.bones;switch(n.length){case 1:this.apply1(n[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(n[0],n[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix);break}}apply1(e,t,n,i,s,o,a){let u=e.parent;if(!u)throw new Error("IK bone must have parent.");let l=u.a,h=u.b,c=u.c,d=u.d,p=-e.ashearX-e.arotation,g=0,v=0;switch(e.inherit){case Bt.OnlyTranslation:g=(t-e.worldX)*ue.signum(e.skeleton.scaleX),v=(n-e.worldY)*ue.signum(e.skeleton.scaleY);break;case Bt.NoRotationOrReflection:let w=Math.abs(l*d-h*c)/Math.max(1e-4,l*l+c*c),_=l/e.skeleton.scaleX,S=c/e.skeleton.scaleY;h=-S*w*e.skeleton.scaleX,d=_*w*e.skeleton.scaleY,p+=Math.atan2(S,_)*ue.radDeg;default:let I=t-u.worldX,A=n-u.worldY,k=l*d-h*c;Math.abs(k)<=1e-4?(g=0,v=0):(g=(I*d-A*h)/k-e.ax,v=(A*l-I*c)/k-e.ay)}p+=Math.atan2(v,g)*ue.radDeg,e.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);let x=e.ascaleX,y=e.ascaleY;if(i||s){switch(e.inherit){case Bt.NoScale:case Bt.NoScaleOrReflection:g=t-e.worldX,v=n-e.worldY}const w=e.data.length*x;if(w>1e-4){const _=g*g+v*v;if(i&&_<w*w||s&&_>w*w){const S=(Math.sqrt(_)/w-1)*a+1;x*=S,o&&(y*=S)}}}e.updateWorldTransformWith(e.ax,e.ay,e.arotation+p*a,x,y,e.ashearX,e.ashearY)}apply2(e,t,n,i,s,o,a,u,l){if(e.inherit!=Bt.Normal||t.inherit!=Bt.Normal)return;let h=e.ax,c=e.ay,d=e.ascaleX,p=e.ascaleY,g=d,v=p,x=t.ascaleX,y=0,w=0,_=0;d<0?(d=-d,y=180,_=-1):(y=0,_=1),p<0&&(p=-p,_=-_),x<0?(x=-x,w=180):w=0;let S=t.ax,I=0,A=0,k=0,M=e.a,O=e.b,F=e.c,U=e.d,H=Math.abs(d-p)<=1e-4;!H||o?(I=0,A=M*S+e.worldX,k=F*S+e.worldY):(I=t.ay,A=M*S+O*I+e.worldX,k=F*S+U*I+e.worldY);let L=e.parent;if(!L)throw new Error("IK parent must itself have a parent.");M=L.a,O=L.b,F=L.c,U=L.d;let N=M*U-O*F,j=A-L.worldX,Y=k-L.worldY;N=Math.abs(N)<=1e-4?0:1/N;let K=(j*U-Y*O)*N-h,X=(Y*M-j*F)*N-c,W=Math.sqrt(K*K+X*X),z=t.data.length*x,V,Z;if(W<1e-4){this.apply1(e,n,i,!1,o,!1,l),t.updateWorldTransformWith(S,I,0,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY);return}j=n-L.worldX,Y=i-L.worldY;let re=(j*U-Y*O)*N-h,ce=(Y*M-j*F)*N-c,xe=re*re+ce*ce;if(u!=0){u*=d*(x+1)*.5;let ze=Math.sqrt(xe),We=ze-W-z*d+u;if(We>0){let He=Math.min(1,We/(u*2))-1;He=(We-u*(1-He*He))/ze,re-=He*re,ce-=He*ce,xe=re*re+ce*ce}}e:if(H){z*=d;let ze=(xe-W*W-z*z)/(2*W*z);ze<-1?(ze=-1,Z=Math.PI*s):ze>1?(ze=1,Z=0,o&&(M=(Math.sqrt(xe)/(W+z)-1)*l+1,g*=M,a&&(v*=M))):Z=Math.acos(ze)*s,M=W+z*ze,O=z*Math.sin(Z),V=Math.atan2(ce*M-re*O,re*M+ce*O)}else{M=d*z,O=p*z;let ze=M*M,We=O*O,He=Math.atan2(ce,re);F=We*W*W+ze*xe-ze*We;let Fe=-2*We*W,at=We-ze;if(U=Fe*Fe-4*at*F,U>=0){let Ao=Math.sqrt(U);Fe<0&&(Ao=-Ao),Ao=-(Fe+Ao)*.5;let Nd=Ao/at,Bd=F/Ao,zn=Math.abs(Nd)<Math.abs(Bd)?Nd:Bd;if(zn*zn<=xe){Y=Math.sqrt(xe-zn*zn)*s,V=He-Math.atan2(Y,zn),Z=Math.atan2(Y/p,(zn-W)/d);break e}}let Ze=ue.PI,Tr=W-M,Br=Tr*Tr,Wi=0,Cl=0,hi=W+M,Ec=hi*hi,Co=0;F=-M*W/(ze-We),F>=-1&&F<=1&&(F=Math.acos(F),j=M*Math.cos(F)+W,Y=O*Math.sin(F),U=j*j+Y*Y,U<Br&&(Ze=F,Br=U,Tr=j,Wi=Y),U>Ec&&(Cl=F,Ec=U,hi=j,Co=Y)),xe<=(Br+Ec)*.5?(V=He-Math.atan2(Wi*s,Tr),Z=Ze*s):(V=He-Math.atan2(Co*s,hi),Z=Cl*s)}let Re=Math.atan2(I,S)*_,Le=e.arotation;V=(V-Re)*ue.radDeg+y-Le,V>180?V-=360:V<-180&&(V+=360),e.updateWorldTransformWith(h,c,Le+V*l,g,v,0,0),Le=t.arotation,Z=((Z+Re)*ue.radDeg-t.ashearX)*_+w-Le,Z>180?Z-=360:Z<-180&&(Z+=360),t.updateWorldTransformWith(S,I,Le+Z*l,t.ascaleX,t.ascaleY,t.ashearX,t.ashearY)}}class $3 extends e0{constructor(t){super(t,0,!1);P(this,"bones",new Array);P(this,"_target",null);P(this,"bendDirection",0);P(this,"compress",!1);P(this,"stretch",!1);P(this,"uniform",!1);P(this,"mix",0);P(this,"softness",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class Y3 extends e0{constructor(t){super(t,0,!1);P(this,"bones",new Array);P(this,"_target",null);P(this,"positionMode",Ps.Fixed);P(this,"spacingMode",hr.Fixed);P(this,"rotateMode",cl.Chain);P(this,"offsetRotation",0);P(this,"position",0);P(this,"spacing",0);P(this,"mixRotate",0);P(this,"mixX",0);P(this,"mixY",0)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("SlotData not set.")}}var Ps;(function(r){r[r.Fixed=0]="Fixed",r[r.Percent=1]="Percent"})(Ps||(Ps={}));var hr;(function(r){r[r.Length=0]="Length",r[r.Fixed=1]="Fixed",r[r.Percent=2]="Percent",r[r.Proportional=3]="Proportional"})(hr||(hr={}));var cl;(function(r){r[r.Tangent=0]="Tangent",r[r.Chain=1]="Chain",r[r.ChainScale=2]="ChainScale"})(cl||(cl={}));const In=class In{constructor(e,t){P(this,"data");P(this,"bones");P(this,"target");P(this,"position",0);P(this,"spacing",0);P(this,"mixRotate",0);P(this,"mixX",0);P(this,"mixY",0);P(this,"spaces",new Array);P(this,"positions",new Array);P(this,"world",new Array);P(this,"curves",new Array);P(this,"lengths",new Array);P(this,"segments",new Array);P(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0,s=e.bones.length;i<s;i++){let o=t.findBone(e.bones[i].name);if(!o)throw new Error(`Couldn't find bone ${e.bones[i].name}.`);this.bones.push(o)}let n=t.findSlot(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}`);this.target=n,this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.position=e.position,this.spacing=e.spacing,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY}update(e){let t=this.target.getAttachment();if(!(t instanceof cc))return;let n=this.mixRotate,i=this.mixX,s=this.mixY;if(n==0&&i==0&&s==0)return;let o=this.data,a=o.rotateMode==cl.Tangent,u=o.rotateMode==cl.ChainScale,l=this.bones,h=l.length,c=a?h:h+1,d=pe.setArraySize(this.spaces,c),p=u?this.lengths=pe.setArraySize(this.lengths,h):[],g=this.spacing;switch(o.spacingMode){case hr.Percent:if(u)for(let A=0,k=c-1;A<k;A++){let M=l[A],O=M.data.length,F=O*M.a,U=O*M.c;p[A]=Math.sqrt(F*F+U*U)}pe.arrayFill(d,1,c,g);break;case hr.Proportional:let S=0;for(let A=0,k=c-1;A<k;){let M=l[A],O=M.data.length;if(O<In.epsilon)u&&(p[A]=0),d[++A]=g;else{let F=O*M.a,U=O*M.c,H=Math.sqrt(F*F+U*U);u&&(p[A]=H),d[++A]=H,S+=H}}if(S>0){S=c/S*g;for(let A=1;A<c;A++)d[A]*=S}break;default:let I=o.spacingMode==hr.Length;for(let A=0,k=c-1;A<k;){let M=l[A],O=M.data.length;if(O<In.epsilon)u&&(p[A]=0),d[++A]=g;else{let F=O*M.a,U=O*M.c,H=Math.sqrt(F*F+U*U);u&&(p[A]=H),d[++A]=(I?O+g:g)*H/O}}}let v=this.computeWorldPositions(t,c,a),x=v[0],y=v[1],w=o.offsetRotation,_=!1;if(w==0)_=o.rotateMode==cl.Chain;else{_=!1;let S=this.target.bone;w*=S.a*S.d-S.b*S.c>0?ue.degRad:-ue.degRad}for(let S=0,I=3;S<h;S++,I+=3){let A=l[S];A.worldX+=(x-A.worldX)*i,A.worldY+=(y-A.worldY)*s;let k=v[I],M=v[I+1],O=k-x,F=M-y;if(u){let U=p[S];if(U!=0){let H=(Math.sqrt(O*O+F*F)/U-1)*n+1;A.a*=H,A.c*=H}}if(x=k,y=M,n>0){let U=A.a,H=A.b,L=A.c,N=A.d,j=0,Y=0,K=0;if(a?j=v[I-1]:d[S+1]==0?j=v[I+2]:j=Math.atan2(F,O),j-=Math.atan2(L,U),_){Y=Math.cos(j),K=Math.sin(j);let X=A.data.length;x+=(X*(Y*U-K*L)-O)*n,y+=(X*(K*U+Y*L)-F)*n}else j+=w;j>ue.PI?j-=ue.PI2:j<-ue.PI&&(j+=ue.PI2),j*=n,Y=Math.cos(j),K=Math.sin(j),A.a=Y*U-K*L,A.b=Y*H-K*N,A.c=K*U+Y*L,A.d=K*H+Y*N}A.updateAppliedTransform()}}computeWorldPositions(e,t,n){let i=this.target,s=this.position,o=this.spaces,a=pe.setArraySize(this.positions,t*3+2),u=this.world,l=e.closed,h=e.worldVerticesLength,c=h/6,d=In.NONE;if(!e.constantSpeed){let X=e.lengths;c-=l?1:2;let W=X[c];this.data.positionMode==Ps.Percent&&(s*=W);let z;switch(this.data.spacingMode){case hr.Percent:z=W;break;case hr.Proportional:z=W/t;break;default:z=1}u=pe.setArraySize(this.world,8);for(let V=0,Z=0,re=0;V<t;V++,Z+=3){let ce=o[V]*z;s+=ce;let xe=s;if(l)xe%=W,xe<0&&(xe+=W),re=0;else if(xe<0){d!=In.BEFORE&&(d=In.BEFORE,e.computeWorldVertices(i,2,4,u,0,2)),this.addBeforePosition(xe,u,0,a,Z);continue}else if(xe>W){d!=In.AFTER&&(d=In.AFTER,e.computeWorldVertices(i,h-6,4,u,0,2)),this.addAfterPosition(xe-W,u,0,a,Z);continue}for(;;re++){let Re=X[re];if(!(xe>Re)){if(re==0)xe/=Re;else{let Le=X[re-1];xe=(xe-Le)/(Re-Le)}break}}re!=d&&(d=re,l&&re==c?(e.computeWorldVertices(i,h-4,4,u,0,2),e.computeWorldVertices(i,0,4,u,4,2)):e.computeWorldVertices(i,re*6+2,8,u,0,2)),this.addCurvePosition(xe,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],a,Z,n||V>0&&ce==0)}return a}l?(h+=2,u=pe.setArraySize(this.world,h),e.computeWorldVertices(i,2,h-4,u,0,2),e.computeWorldVertices(i,0,2,u,h-4,2),u[h-2]=u[0],u[h-1]=u[1]):(c--,h-=4,u=pe.setArraySize(this.world,h),e.computeWorldVertices(i,2,h,u,0,2));let p=pe.setArraySize(this.curves,c),g=0,v=u[0],x=u[1],y=0,w=0,_=0,S=0,I=0,A=0,k=0,M=0,O=0,F=0,U=0,H=0,L=0,N=0;for(let X=0,W=2;X<c;X++,W+=6)y=u[W],w=u[W+1],_=u[W+2],S=u[W+3],I=u[W+4],A=u[W+5],k=(v-y*2+_)*.1875,M=(x-w*2+S)*.1875,O=((y-_)*3-v+I)*.09375,F=((w-S)*3-x+A)*.09375,U=k*2+O,H=M*2+F,L=(y-v)*.75+k+O*.16666667,N=(w-x)*.75+M+F*.16666667,g+=Math.sqrt(L*L+N*N),L+=U,N+=H,U+=O,H+=F,g+=Math.sqrt(L*L+N*N),L+=U,N+=H,g+=Math.sqrt(L*L+N*N),L+=U+O,N+=H+F,g+=Math.sqrt(L*L+N*N),p[X]=g,v=I,x=A;this.data.positionMode==Ps.Percent&&(s*=g);let j;switch(this.data.spacingMode){case hr.Percent:j=g;break;case hr.Proportional:j=g/t;break;default:j=1}let Y=this.segments,K=0;for(let X=0,W=0,z=0,V=0;X<t;X++,W+=3){let Z=o[X]*j;s+=Z;let re=s;if(l)re%=g,re<0&&(re+=g),z=0;else if(re<0){this.addBeforePosition(re,u,0,a,W);continue}else if(re>g){this.addAfterPosition(re-g,u,h-4,a,W);continue}for(;;z++){let ce=p[z];if(!(re>ce)){if(z==0)re/=ce;else{let xe=p[z-1];re=(re-xe)/(ce-xe)}break}}if(z!=d){d=z;let ce=z*6;for(v=u[ce],x=u[ce+1],y=u[ce+2],w=u[ce+3],_=u[ce+4],S=u[ce+5],I=u[ce+6],A=u[ce+7],k=(v-y*2+_)*.03,M=(x-w*2+S)*.03,O=((y-_)*3-v+I)*.006,F=((w-S)*3-x+A)*.006,U=k*2+O,H=M*2+F,L=(y-v)*.3+k+O*.16666667,N=(w-x)*.3+M+F*.16666667,K=Math.sqrt(L*L+N*N),Y[0]=K,ce=1;ce<8;ce++)L+=U,N+=H,U+=O,H+=F,K+=Math.sqrt(L*L+N*N),Y[ce]=K;L+=U,N+=H,K+=Math.sqrt(L*L+N*N),Y[8]=K,L+=U+O,N+=H+F,K+=Math.sqrt(L*L+N*N),Y[9]=K,V=0}for(re*=K;;V++){let ce=Y[V];if(!(re>ce)){if(V==0)re/=ce;else{let xe=Y[V-1];re=V+(re-xe)/(ce-xe)}break}}this.addCurvePosition(re*.1,v,x,y,w,_,S,I,A,a,W,n||X>0&&Z==0)}return a}addBeforePosition(e,t,n,i,s){let o=t[n],a=t[n+1],u=t[n+2]-o,l=t[n+3]-a,h=Math.atan2(l,u);i[s]=o+e*Math.cos(h),i[s+1]=a+e*Math.sin(h),i[s+2]=h}addAfterPosition(e,t,n,i,s){let o=t[n+2],a=t[n+3],u=o-t[n],l=a-t[n+1],h=Math.atan2(l,u);i[s]=o+e*Math.cos(h),i[s+1]=a+e*Math.sin(h),i[s+2]=h}addCurvePosition(e,t,n,i,s,o,a,u,l,h,c,d){if(e==0||isNaN(e)){h[c]=t,h[c+1]=n,h[c+2]=Math.atan2(s-n,i-t);return}let p=e*e,g=p*e,v=1-e,x=v*v,y=x*v,w=v*e,_=w*3,S=v*_,I=_*e,A=t*y+i*S+o*I+u*g,k=n*y+s*S+a*I+l*g;h[c]=A,h[c+1]=k,d&&(e<.001?h[c+2]=Math.atan2(s-n,i-t):h[c+2]=Math.atan2(k-(n*x+s*w*2+a*p),A-(t*x+i*w*2+o*p)))}};P(In,"NONE",-1),P(In,"BEFORE",-2),P(In,"AFTER",-3),P(In,"epsilon",1e-5);let g_=In;class s9{constructor(e,t){P(this,"data");P(this,"_bone",null);P(this,"inertia",0);P(this,"strength",0);P(this,"damping",0);P(this,"massInverse",0);P(this,"wind",0);P(this,"gravity",0);P(this,"mix",0);P(this,"_reset",!0);P(this,"ux",0);P(this,"uy",0);P(this,"cx",0);P(this,"cy",0);P(this,"tx",0);P(this,"ty",0);P(this,"xOffset",0);P(this,"xVelocity",0);P(this,"yOffset",0);P(this,"yVelocity",0);P(this,"rotateOffset",0);P(this,"rotateVelocity",0);P(this,"scaleOffset",0);P(this,"scaleVelocity",0);P(this,"active",!1);P(this,"skeleton");P(this,"remaining",0);P(this,"lastTime",0);this.data=e,this.skeleton=t,this.bone=t.bones[e.bone.index],this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}set bone(e){this._bone=e}get bone(){if(this._bone)return this._bone;throw new Error("Bone not set.")}reset(){this.remaining=0,this.lastTime=this.skeleton.time,this._reset=!0,this.xOffset=0,this.xVelocity=0,this.yOffset=0,this.yVelocity=0,this.rotateOffset=0,this.rotateVelocity=0,this.scaleOffset=0,this.scaleVelocity=0}setToSetupPose(){const e=this.data;this.inertia=e.inertia,this.strength=e.strength,this.damping=e.damping,this.massInverse=e.massInverse,this.wind=e.wind,this.gravity=e.gravity,this.mix=e.mix}isActive(){return this.active}update(e){const t=this.mix;if(t==0)return;const n=this.data.x>0,i=this.data.y>0,s=this.data.rotate>0||this.data.shearX>0,o=this.data.scaleX>0,a=this.bone,u=a.data.length;switch(e){case no.none:return;case no.reset:this.reset();case no.update:const l=Math.max(this.skeleton.time-this.lastTime,0);this.remaining+=l,this.lastTime=this.skeleton.time;const h=a.worldX,c=a.worldY;if(this._reset)this._reset=!1,this.ux=h,this.uy=c;else{let d=this.remaining,p=this.inertia,g=this.data.limit*l,v=this.data.step,x=this.skeleton.data.referenceScale,y=-1;if(n||i){if(n){const w=(this.ux-h)*p;this.xOffset+=w>g?g:w<-g?-g:w,this.ux=h}if(i){const w=(this.uy-c)*p;this.yOffset+=w>g?g:w<-g?-g:w,this.uy=c}if(d>=v){y=Math.pow(this.damping,60*v);const w=this.massInverse*v,_=this.strength,S=this.wind*x,I=(hc.yDown?-this.gravity:this.gravity)*x;do n&&(this.xVelocity+=(S-this.xOffset*_)*w,this.xOffset+=this.xVelocity*v,this.xVelocity*=y),i&&(this.yVelocity-=(I+this.yOffset*_)*w,this.yOffset+=this.yVelocity*v,this.yVelocity*=y),d-=v;while(d>=v)}n&&(a.worldX+=this.xOffset*t*this.data.x),i&&(a.worldY+=this.yOffset*t*this.data.y)}if(s||o){let w=Math.atan2(a.c,a.a),_=0,S=0,I=0,A=this.cx-a.worldX,k=this.cy-a.worldY;if(A>g?A=g:A<-g&&(A=-g),k>g?k=g:k<-g&&(k=-g),s){I=(this.data.rotate+this.data.shearX)*t;let M=Math.atan2(k+this.ty,A+this.tx)-w-this.rotateOffset*I;this.rotateOffset+=(M-Math.ceil(M*ue.invPI2-.5)*ue.PI2)*p,M=this.rotateOffset*I+w,_=Math.cos(M),S=Math.sin(M),o&&(M=u*a.getWorldScaleX(),M>0&&(this.scaleOffset+=(A*_+k*S)*p/M))}else{_=Math.cos(w),S=Math.sin(w);const M=u*a.getWorldScaleX();M>0&&(this.scaleOffset+=(A*_+k*S)*p/M)}if(d=this.remaining,d>=v){y==-1&&(y=Math.pow(this.damping,60*v));const M=this.massInverse*v,O=this.strength,F=this.wind,U=hc.yDown?-this.gravity:this.gravity,H=u/x;for(;;)if(d-=v,o&&(this.scaleVelocity+=(F*_-U*S-this.scaleOffset*O)*M,this.scaleOffset+=this.scaleVelocity*v,this.scaleVelocity*=y),s){if(this.rotateVelocity-=((F*S+U*_)*H+this.rotateOffset*O)*M,this.rotateOffset+=this.rotateVelocity*v,this.rotateVelocity*=y,d<v)break;const L=this.rotateOffset*I+w;_=Math.cos(L),S=Math.sin(L)}else if(d<v)break}}this.remaining=d}this.cx=a.worldX,this.cy=a.worldY;break;case no.pose:n&&(a.worldX+=this.xOffset*t*this.data.x),i&&(a.worldY+=this.yOffset*t*this.data.y)}if(s){let l=this.rotateOffset*t,h=0,c=0,d=0;if(this.data.shearX>0){let p=0;this.data.rotate>0&&(p=l*this.data.rotate,h=Math.sin(p),c=Math.cos(p),d=a.b,a.b=c*d-h*a.d,a.d=h*d+c*a.d),p+=l*this.data.shearX,h=Math.sin(p),c=Math.cos(p),d=a.a,a.a=c*d-h*a.c,a.c=h*d+c*a.c}else l*=this.data.rotate,h=Math.sin(l),c=Math.cos(l),d=a.a,a.a=c*d-h*a.c,a.c=h*d+c*a.c,d=a.b,a.b=c*d-h*a.d,a.d=h*d+c*a.d}if(o){const l=1+this.scaleOffset*t*this.data.scaleX;a.a*=l,a.c*=l}e!=no.pose&&(this.tx=u*a.a,this.ty=u*a.c),a.updateAppliedTransform()}translate(e,t){this.ux-=e,this.uy-=t,this.cx-=e,this.cy-=t}rotate(e,t,n){const i=n*ue.degRad,s=Math.cos(i),o=Math.sin(i),a=this.cx-e,u=this.cy-t;this.translate(a*s-u*o-a,a*o+u*s-u)}}class o9{constructor(e,t){P(this,"data");P(this,"bone");P(this,"color");P(this,"darkColor",null);P(this,"attachment",null);P(this,"attachmentState",0);P(this,"sequenceIndex",-1);P(this,"deform",new Array);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("bone cannot be null.");this.data=e,this.bone=t,this.color=new Xe,this.darkColor=e.darkColor?new Xe:null,this.setToSetupPose()}getSkeleton(){return this.bone.skeleton}getAttachment(){return this.attachment}setAttachment(e){this.attachment!=e&&((!(e instanceof Hi)||!(this.attachment instanceof Hi)||e.timelineAttachment!=this.attachment.timelineAttachment)&&(this.deform.length=0),this.attachment=e,this.sequenceIndex=-1)}setToSetupPose(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null}}class a9{constructor(e,t){P(this,"data");P(this,"bones");P(this,"target");P(this,"mixRotate",0);P(this,"mixX",0);P(this,"mixY",0);P(this,"mixScaleX",0);P(this,"mixScaleY",0);P(this,"mixShearY",0);P(this,"temp",new Jm);P(this,"active",!1);if(!e)throw new Error("data cannot be null.");if(!t)throw new Error("skeleton cannot be null.");this.data=e,this.bones=new Array;for(let i=0;i<e.bones.length;i++){let s=t.findBone(e.bones[i].name);if(!s)throw new Error(`Couldn't find bone ${e.bones[i].name}.`);this.bones.push(s)}let n=t.findBone(e.target.name);if(!n)throw new Error(`Couldn't find target bone ${e.target.name}.`);this.target=n,this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}isActive(){return this.active}setToSetupPose(){const e=this.data;this.mixRotate=e.mixRotate,this.mixX=e.mixX,this.mixY=e.mixY,this.mixScaleX=e.mixScaleX,this.mixScaleY=e.mixScaleY,this.mixShearY=e.mixShearY}update(e){this.mixRotate==0&&this.mixX==0&&this.mixY==0&&this.mixScaleX==0&&this.mixScaleY==0&&this.mixShearY==0||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())}applyAbsoluteWorld(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=t!=0||n!=0,u=this.target,l=u.a,h=u.b,c=u.c,d=u.d,p=l*d-h*c>0?ue.degRad:-ue.degRad,g=this.data.offsetRotation*p,v=this.data.offsetShearY*p,x=this.bones;for(let y=0,w=x.length;y<w;y++){let _=x[y];if(e!=0){let S=_.a,I=_.b,A=_.c,k=_.d,M=Math.atan2(c,l)-Math.atan2(A,S)+g;M>ue.PI?M-=ue.PI2:M<-ue.PI&&(M+=ue.PI2),M*=e;let O=Math.cos(M),F=Math.sin(M);_.a=O*S-F*A,_.b=O*I-F*k,_.c=F*S+O*A,_.d=F*I+O*k}if(a){let S=this.temp;u.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=(S.x-_.worldX)*t,_.worldY+=(S.y-_.worldY)*n}if(i!=0){let S=Math.sqrt(_.a*_.a+_.c*_.c);S!=0&&(S=(S+(Math.sqrt(l*l+c*c)-S+this.data.offsetScaleX)*i)/S),_.a*=S,_.c*=S}if(s!=0){let S=Math.sqrt(_.b*_.b+_.d*_.d);S!=0&&(S=(S+(Math.sqrt(h*h+d*d)-S+this.data.offsetScaleY)*s)/S),_.b*=S,_.d*=S}if(o>0){let S=_.b,I=_.d,A=Math.atan2(I,S),k=Math.atan2(d,h)-Math.atan2(c,l)-(A-Math.atan2(_.c,_.a));k>ue.PI?k-=ue.PI2:k<-ue.PI&&(k+=ue.PI2),k=A+(k+v)*o;let M=Math.sqrt(S*S+I*I);_.b=Math.cos(k)*M,_.d=Math.sin(k)*M}_.updateAppliedTransform()}}applyRelativeWorld(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=t!=0||n!=0,u=this.target,l=u.a,h=u.b,c=u.c,d=u.d,p=l*d-h*c>0?ue.degRad:-ue.degRad,g=this.data.offsetRotation*p,v=this.data.offsetShearY*p,x=this.bones;for(let y=0,w=x.length;y<w;y++){let _=x[y];if(e!=0){let S=_.a,I=_.b,A=_.c,k=_.d,M=Math.atan2(c,l)+g;M>ue.PI?M-=ue.PI2:M<-ue.PI&&(M+=ue.PI2),M*=e;let O=Math.cos(M),F=Math.sin(M);_.a=O*S-F*A,_.b=O*I-F*k,_.c=F*S+O*A,_.d=F*I+O*k}if(a){let S=this.temp;u.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.worldX+=S.x*t,_.worldY+=S.y*n}if(i!=0){let S=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*i+1;_.a*=S,_.c*=S}if(s!=0){let S=(Math.sqrt(h*h+d*d)-1+this.data.offsetScaleY)*s+1;_.b*=S,_.d*=S}if(o>0){let S=Math.atan2(d,h)-Math.atan2(c,l);S>ue.PI?S-=ue.PI2:S<-ue.PI&&(S+=ue.PI2);let I=_.b,A=_.d;S=Math.atan2(A,I)+(S-ue.PI/2+v)*o;let k=Math.sqrt(I*I+A*A);_.b=Math.cos(S)*k,_.d=Math.sin(S)*k}_.updateAppliedTransform()}}applyAbsoluteLocal(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=this.target,u=this.bones;for(let l=0,h=u.length;l<h;l++){let c=u[l],d=c.arotation;e!=0&&(d+=(a.arotation-d+this.data.offsetRotation)*e);let p=c.ax,g=c.ay;p+=(a.ax-p+this.data.offsetX)*t,g+=(a.ay-g+this.data.offsetY)*n;let v=c.ascaleX,x=c.ascaleY;i!=0&&v!=0&&(v=(v+(a.ascaleX-v+this.data.offsetScaleX)*i)/v),s!=0&&x!=0&&(x=(x+(a.ascaleY-x+this.data.offsetScaleY)*s)/x);let y=c.ashearY;o!=0&&(y+=(a.ashearY-y+this.data.offsetShearY)*o),c.updateWorldTransformWith(p,g,d,v,x,c.ashearX,y)}}applyRelativeLocal(){let e=this.mixRotate,t=this.mixX,n=this.mixY,i=this.mixScaleX,s=this.mixScaleY,o=this.mixShearY,a=this.target,u=this.bones;for(let l=0,h=u.length;l<h;l++){let c=u[l],d=c.arotation+(a.arotation+this.data.offsetRotation)*e,p=c.ax+(a.ax+this.data.offsetX)*t,g=c.ay+(a.ay+this.data.offsetY)*n,v=c.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*i+1),x=c.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*s+1),y=c.ashearY+(a.ashearY+this.data.offsetShearY)*o;c.updateWorldTransformWith(p,g,d,v,x,c.ashearX,y)}}}const Cu=class Cu{constructor(e){P(this,"data");P(this,"bones");P(this,"slots");P(this,"drawOrder");P(this,"ikConstraints");P(this,"transformConstraints");P(this,"pathConstraints");P(this,"physicsConstraints");P(this,"_updateCache",new Array);P(this,"skin",null);P(this,"color");P(this,"scaleX",1);P(this,"_scaleY",1);P(this,"x",0);P(this,"y",0);P(this,"time",0);if(!e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(let t=0;t<e.bones.length;t++){let n=e.bones[t],i;if(!n.parent)i=new DP(n,this,null);else{let s=this.bones[n.parent.index];i=new DP(n,this,s),s.children.push(i)}this.bones.push(i)}this.slots=new Array,this.drawOrder=new Array;for(let t=0;t<e.slots.length;t++){let n=e.slots[t],i=this.bones[n.boneData.index],s=new o9(n,i);this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(let t=0;t<e.ikConstraints.length;t++){let n=e.ikConstraints[t];this.ikConstraints.push(new i9(n,this))}this.transformConstraints=new Array;for(let t=0;t<e.transformConstraints.length;t++){let n=e.transformConstraints[t];this.transformConstraints.push(new a9(n,this))}this.pathConstraints=new Array;for(let t=0;t<e.pathConstraints.length;t++){let n=e.pathConstraints[t];this.pathConstraints.push(new g_(n,this))}this.physicsConstraints=new Array;for(let t=0;t<e.physicsConstraints.length;t++){let n=e.physicsConstraints[t];this.physicsConstraints.push(new s9(n,this))}this.color=new Xe(1,1,1,1),this.updateCache()}get scaleY(){return Cu.yDown?-this._scaleY:this._scaleY}set scaleY(e){this._scaleY=e}updateCache(){let e=this._updateCache;e.length=0;let t=this.bones;for(let d=0,p=t.length;d<p;d++){let g=t[d];g.sorted=g.data.skinRequired,g.active=!g.sorted}if(this.skin){let d=this.skin.bones;for(let p=0,g=this.skin.bones.length;p<g;p++){let v=this.bones[d[p].index];do v.sorted=!1,v.active=!0,v=v.parent;while(v)}}let n=this.ikConstraints,i=this.transformConstraints,s=this.pathConstraints,o=this.physicsConstraints,a=n.length,u=i.length,l=s.length,h=this.physicsConstraints.length,c=a+u+l+h;e:for(let d=0;d<c;d++){for(let p=0;p<a;p++){let g=n[p];if(g.data.order==d){this.sortIkConstraint(g);continue e}}for(let p=0;p<u;p++){let g=i[p];if(g.data.order==d){this.sortTransformConstraint(g);continue e}}for(let p=0;p<l;p++){let g=s[p];if(g.data.order==d){this.sortPathConstraint(g);continue e}}for(let p=0;p<h;p++){const g=o[p];if(g.data.order==d){this.sortPhysicsConstraint(g);continue e}}}for(let d=0,p=t.length;d<p;d++)this.sortBone(t[d])}sortIkConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&pe.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target;this.sortBone(t);let n=e.bones,i=n[0];if(this.sortBone(i),n.length==1)this._updateCache.push(e),this.sortReset(i.children);else{let s=n[n.length-1];this.sortBone(s),this._updateCache.push(e),this.sortReset(i.children),s.sorted=!0}}sortPathConstraint(e){if(e.active=e.target.bone.isActive()&&(!e.data.skinRequired||this.skin&&pe.contains(this.skin.constraints,e.data,!0)),!e.active)return;let t=e.target,n=t.data.index,i=t.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,i),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,i);for(let u=0,l=this.data.skins.length;u<l;u++)this.sortPathConstraintAttachment(this.data.skins[u],n,i);let s=t.getAttachment();s instanceof cc&&this.sortPathConstraintAttachmentWith(s,i);let o=e.bones,a=o.length;for(let u=0;u<a;u++)this.sortBone(o[u]);this._updateCache.push(e);for(let u=0;u<a;u++)this.sortReset(o[u].children);for(let u=0;u<a;u++)o[u].sorted=!0}sortTransformConstraint(e){if(e.active=e.target.isActive()&&(!e.data.skinRequired||this.skin&&pe.contains(this.skin.constraints,e.data,!0)),!e.active)return;this.sortBone(e.target);let t=e.bones,n=t.length;if(e.data.local)for(let i=0;i<n;i++){let s=t[i];this.sortBone(s.parent),this.sortBone(s)}else for(let i=0;i<n;i++)this.sortBone(t[i]);this._updateCache.push(e);for(let i=0;i<n;i++)this.sortReset(t[i].children);for(let i=0;i<n;i++)t[i].sorted=!0}sortPathConstraintAttachment(e,t,n){let i=e.attachments[t];if(i)for(let s in i)this.sortPathConstraintAttachmentWith(i[s],n)}sortPathConstraintAttachmentWith(e,t){if(!(e instanceof cc))return;let n=e.bones;if(!n)this.sortBone(t);else{let i=this.bones;for(let s=0,o=n.length;s<o;){let a=n[s++];for(a+=s;s<a;)this.sortBone(i[n[s++]])}}}sortPhysicsConstraint(e){const t=e.bone;e.active=t.active&&(!e.data.skinRequired||this.skin!=null&&pe.contains(this.skin.constraints,e.data,!0)),e.active&&(this.sortBone(t),this._updateCache.push(e),this.sortReset(t.children),t.sorted=!0)}sortBone(e){if(!e||e.sorted)return;let t=e.parent;t&&this.sortBone(t),e.sorted=!0,this._updateCache.push(e)}sortReset(e){for(let t=0,n=e.length;t<n;t++){let i=e[t];i.active&&(i.sorted&&this.sortReset(i.children),i.sorted=!1)}}updateWorldTransform(e){if(e==null)throw new Error("physics is undefined");let t=this.bones;for(let i=0,s=t.length;i<s;i++){let o=t[i];o.ax=o.x,o.ay=o.y,o.arotation=o.rotation,o.ascaleX=o.scaleX,o.ascaleY=o.scaleY,o.ashearX=o.shearX,o.ashearY=o.shearY}let n=this._updateCache;for(let i=0,s=n.length;i<s;i++)n[i].update(e)}updateWorldTransformWith(e,t){let n=this.getRootBone();if(!n)throw new Error("Root bone must not be null.");let i=t.a,s=t.b,o=t.c,a=t.d;n.worldX=i*this.x+s*this.y+t.worldX,n.worldY=o*this.x+a*this.y+t.worldY;const u=(n.rotation+n.shearX)*ue.degRad,l=(n.rotation+90+n.shearY)*ue.degRad,h=Math.cos(u)*n.scaleX,c=Math.cos(l)*n.scaleY,d=Math.sin(u)*n.scaleX,p=Math.sin(l)*n.scaleY;n.a=(i*h+s*d)*this.scaleX,n.b=(i*c+s*p)*this.scaleX,n.c=(o*h+a*d)*this.scaleY,n.d=(o*c+a*p)*this.scaleY;let g=this._updateCache;for(let v=0,x=g.length;v<x;v++){let y=g[v];y!=n&&y.update(e)}}setToSetupPose(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()}setBonesToSetupPose(){for(const e of this.bones)e.setToSetupPose();for(const e of this.ikConstraints)e.setToSetupPose();for(const e of this.transformConstraints)e.setToSetupPose();for(const e of this.pathConstraints)e.setToSetupPose();for(const e of this.physicsConstraints)e.setToSetupPose()}setSlotsToSetupPose(){let e=this.slots;pe.arrayCopy(e,0,this.drawOrder,0,e.length);for(let t=0,n=e.length;t<n;t++)e[t].setToSetupPose()}getRootBone(){return this.bones.length==0?null:this.bones[0]}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.data.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.data.name==e)return s}return null}setSkinByName(e){let t=this.data.findSkin(e);if(!t)throw new Error("Skin not found: "+e);this.setSkin(t)}setSkin(e){if(e!=this.skin){if(e)if(this.skin)e.attachAll(this,this.skin);else{let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n],o=s.data.attachmentName;if(o){let a=e.getAttachment(n,o);a&&s.setAttachment(a)}}}this.skin=e,this.updateCache()}}getAttachmentByName(e,t){let n=this.data.findSlot(e);if(!n)throw new Error(`Can't find slot with name ${e}`);return this.getAttachment(n.index,t)}getAttachment(e,t){if(!t)throw new Error("attachmentName cannot be null.");if(this.skin){let n=this.skin.getAttachment(e,t);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(e,t):null}setAttachment(e,t){if(!e)throw new Error("slotName cannot be null.");let n=this.slots;for(let i=0,s=n.length;i<s;i++){let o=n[i];if(o.data.name==e){let a=null;if(t&&(a=this.getAttachment(i,t),!a))throw new Error("Attachment not found: "+t+", for slot: "+e);o.setAttachment(a);return}}throw new Error("Slot not found: "+e)}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.ikConstraints.find(t=>t.data.name==e)??null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.transformConstraints.find(t=>t.data.name==e)??null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");return this.pathConstraints.find(t=>t.data.name==e)??null}findPhysicsConstraint(e){if(e==null)throw new Error("constraintName cannot be null.");return this.physicsConstraints.find(t=>t.data.name==e)??null}getBoundsRect(){let e=new Jm,t=new Jm;return this.getBounds(e,t),{x:e.x,y:e.y,width:t.x,height:t.y}}getBounds(e,t,n=new Array(2),i=null){if(!e)throw new Error("offset cannot be null.");if(!t)throw new Error("size cannot be null.");let s=this.drawOrder,o=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;for(let h=0,c=s.length;h<c;h++){let d=s[h];if(!d.bone.active)continue;let p=0,g=null,v=null,x=d.getAttachment();if(x instanceof cd)p=8,g=pe.setArraySize(n,p,0),x.computeWorldVertices(d,g,0,2),v=Cu.quadTriangles;else if(x instanceof _l){let y=x;p=y.worldVerticesLength,g=pe.setArraySize(n,p,0),y.computeWorldVertices(d,0,p,g,0,2),v=y.triangles}else if(x instanceof Ad&&i!=null){i.clipStart(d,x);continue}if(g&&v){i!=null&&i.isClipping()&&(i.clipTriangles(g,v,v.length),g=i.clippedVertices,p=i.clippedVertices.length);for(let y=0,w=g.length;y<w;y+=2){let _=g[y],S=g[y+1];o=Math.min(o,_),a=Math.min(a,S),u=Math.max(u,_),l=Math.max(l,S)}}i!=null&&i.clipEndWithSlot(d)}i!=null&&i.clipEnd(),e.set(o,a),t.set(u-o,l-a)}update(e){this.time+=e}physicsTranslate(e,t){const n=this.physicsConstraints;for(let i=0,s=n.length;i<s;i++)n[i].translate(e,t)}physicsRotate(e,t,n){const i=this.physicsConstraints;for(let s=0,o=i.length;s<o;s++)i[s].rotate(e,t,n)}};P(Cu,"quadTriangles",[0,1,2,2,3,0]),P(Cu,"yDown",!1);let hc=Cu;var no;(function(r){r[r.none=0]="none",r[r.reset=1]="reset",r[r.update=2]="update",r[r.pose=3]="pose"})(no||(no={}));class G3 extends e0{constructor(t){super(t,0,!1);P(this,"_bone",null);P(this,"x",0);P(this,"y",0);P(this,"rotate",0);P(this,"scaleX",0);P(this,"shearX",0);P(this,"limit",0);P(this,"step",0);P(this,"inertia",0);P(this,"strength",0);P(this,"damping",0);P(this,"massInverse",0);P(this,"wind",0);P(this,"gravity",0);P(this,"mix",0);P(this,"inertiaGlobal",!1);P(this,"strengthGlobal",!1);P(this,"dampingGlobal",!1);P(this,"massGlobal",!1);P(this,"windGlobal",!1);P(this,"gravityGlobal",!1);P(this,"mixGlobal",!1)}set bone(t){this._bone=t}get bone(){if(this._bone)return this._bone;throw new Error("BoneData not set.")}}class W3{constructor(){P(this,"name",null);P(this,"bones",new Array);P(this,"slots",new Array);P(this,"skins",new Array);P(this,"defaultSkin",null);P(this,"events",new Array);P(this,"animations",new Array);P(this,"ikConstraints",new Array);P(this,"transformConstraints",new Array);P(this,"pathConstraints",new Array);P(this,"physicsConstraints",new Array);P(this,"x",0);P(this,"y",0);P(this,"width",0);P(this,"height",0);P(this,"referenceScale",100);P(this,"version",null);P(this,"hash",null);P(this,"fps",0);P(this,"imagesPath",null);P(this,"audioPath",null)}findBone(e){if(!e)throw new Error("boneName cannot be null.");let t=this.bones;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findSlot(e){if(!e)throw new Error("slotName cannot be null.");let t=this.slots;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findSkin(e){if(!e)throw new Error("skinName cannot be null.");let t=this.skins;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findEvent(e){if(!e)throw new Error("eventDataName cannot be null.");let t=this.events;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findAnimation(e){if(!e)throw new Error("animationName cannot be null.");let t=this.animations;for(let n=0,i=t.length;n<i;n++){let s=t[n];if(s.name==e)return s}return null}findIkConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.ikConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findTransformConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.transformConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findPathConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.pathConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}findPhysicsConstraint(e){if(!e)throw new Error("constraintName cannot be null.");const t=this.physicsConstraints;for(let n=0,i=t.length;n<i;n++){const s=t[n];if(s.name==e)return s}return null}}class UP{constructor(e=0,t,n){P(this,"slotIndex");P(this,"name");P(this,"attachment");this.slotIndex=e,this.name=t,this.attachment=n}}class v_{constructor(e){P(this,"name");P(this,"attachments",new Array);P(this,"bones",Array());P(this,"constraints",new Array);P(this,"color",new Xe(.99607843,.61960787,.30980393,1));if(!e)throw new Error("name cannot be null.");this.name=e}setAttachment(e,t,n){if(!n)throw new Error("attachment cannot be null.");let i=this.attachments;e>=i.length&&(i.length=e+1),i[e]||(i[e]={}),i[e][t]=n}addSkin(e){for(let i=0;i<e.bones.length;i++){let s=e.bones[i],o=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){o=!0;break}o||this.bones.push(s)}for(let i=0;i<e.constraints.length;i++){let s=e.constraints[i],o=!1;for(let a=0;a<this.constraints.length;a++)if(this.constraints[a]==s){o=!0;break}o||this.constraints.push(s)}let t=e.getAttachments();for(let i=0;i<t.length;i++){var n=t[i];this.setAttachment(n.slotIndex,n.name,n.attachment)}}copySkin(e){for(let i=0;i<e.bones.length;i++){let s=e.bones[i],o=!1;for(let a=0;a<this.bones.length;a++)if(this.bones[a]==s){o=!0;break}o||this.bones.push(s)}for(let i=0;i<e.constraints.length;i++){let s=e.constraints[i],o=!1;for(let a=0;a<this.constraints.length;a++)if(this.constraints[a]==s){o=!0;break}o||this.constraints.push(s)}let t=e.getAttachments();for(let i=0;i<t.length;i++){var n=t[i];n.attachment&&(n.attachment instanceof _l?(n.attachment=n.attachment.newLinkedMesh(),this.setAttachment(n.slotIndex,n.name,n.attachment)):(n.attachment=n.attachment.copy(),this.setAttachment(n.slotIndex,n.name,n.attachment)))}}getAttachment(e,t){let n=this.attachments[e];return n?n[t]:null}removeAttachment(e,t){let n=this.attachments[e];n&&delete n[t]}getAttachments(){let e=new Array;for(var t=0;t<this.attachments.length;t++){let n=this.attachments[t];if(n)for(let i in n){let s=n[i];s&&e.push(new UP(t,i,s))}}return e}getAttachmentsForSlot(e,t){let n=this.attachments[e];if(n)for(let i in n){let s=n[i];s&&t.push(new UP(e,i,s))}}clear(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0}attachAll(e,t){let n=0;for(let i=0;i<e.slots.length;i++){let s=e.slots[i],o=s.getAttachment();if(o&&n<t.attachments.length){let a=t.attachments[n];for(let u in a){let l=a[u];if(o==l){let h=this.getAttachment(n,u);h&&s.setAttachment(h);break}}}n++}}}class V3{constructor(e,t,n){P(this,"index",0);P(this,"name");P(this,"boneData");P(this,"color",new Xe(1,1,1,1));P(this,"darkColor",null);P(this,"attachmentName",null);P(this,"blendMode",aa.Normal);P(this,"visible",!0);if(e<0)throw new Error("index must be >= 0.");if(!t)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=e,this.name=t,this.boneData=n}}var aa;(function(r){r[r.Normal=0]="Normal",r[r.Additive=1]="Additive",r[r.Multiply=2]="Multiply",r[r.Screen=3]="Screen"})(aa||(aa={}));class q3 extends e0{constructor(t){super(t,0,!1);P(this,"bones",new Array);P(this,"_target",null);P(this,"mixRotate",0);P(this,"mixX",0);P(this,"mixY",0);P(this,"mixScaleX",0);P(this,"mixScaleY",0);P(this,"mixShearY",0);P(this,"offsetRotation",0);P(this,"offsetX",0);P(this,"offsetY",0);P(this,"offsetScaleX",0);P(this,"offsetScaleY",0);P(this,"offsetShearY",0);P(this,"relative",!1);P(this,"local",!1)}set target(t){this._target=t}get target(){if(this._target)return this._target;throw new Error("BoneData not set.")}}class l9{constructor(e){P(this,"scale",1);P(this,"attachmentLoader");P(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,n=new W3;n.name="";let i=new u9(e),s=i.readInt32(),o=i.readInt32();n.hash=o==0&&s==0?null:o.toString(16)+s.toString(16),n.version=i.readString(),n.x=i.readFloat(),n.y=i.readFloat(),n.width=i.readFloat(),n.height=i.readFloat(),n.referenceScale=i.readFloat()*t;let a=i.readBoolean();a&&(n.fps=i.readFloat(),n.imagesPath=i.readString(),n.audioPath=i.readString());let u=0;u=i.readInt(!0);for(let h=0;h<u;h++){let c=i.readString();if(!c)throw new Error("String in string table must not be null.");i.strings.push(c)}u=i.readInt(!0);for(let h=0;h<u;h++){let c=i.readString();if(!c)throw new Error("Bone name must not be null.");let d=h==0?null:n.bones[i.readInt(!0)],p=new X3(h,c,d);p.rotation=i.readFloat(),p.x=i.readFloat()*t,p.y=i.readFloat()*t,p.scaleX=i.readFloat(),p.scaleY=i.readFloat(),p.shearX=i.readFloat(),p.shearY=i.readFloat(),p.length=i.readFloat()*t,p.inherit=i.readByte(),p.skinRequired=i.readBoolean(),a&&(Xe.rgba8888ToColor(p.color,i.readInt32()),p.icon=i.readString()??void 0,p.visible=i.readBoolean()),n.bones.push(p)}u=i.readInt(!0);for(let h=0;h<u;h++){let c=i.readString();if(!c)throw new Error("Slot name must not be null.");let d=n.bones[i.readInt(!0)],p=new V3(h,c,d);Xe.rgba8888ToColor(p.color,i.readInt32());let g=i.readInt32();g!=-1&&Xe.rgb888ToColor(p.darkColor=new Xe,g),p.attachmentName=i.readStringRef(),p.blendMode=i.readInt(!0),a&&(p.visible=i.readBoolean()),n.slots.push(p)}u=i.readInt(!0);for(let h=0,c;h<u;h++){let d=i.readString();if(!d)throw new Error("IK constraint data name must not be null.");let p=new $3(d);p.order=i.readInt(!0),c=i.readInt(!0);for(let v=0;v<c;v++)p.bones.push(n.bones[i.readInt(!0)]);p.target=n.bones[i.readInt(!0)];let g=i.readByte();p.skinRequired=(g&1)!=0,p.bendDirection=g&2?1:-1,p.compress=(g&4)!=0,p.stretch=(g&8)!=0,p.uniform=(g&16)!=0,g&32&&(p.mix=g&64?i.readFloat():1),g&128&&(p.softness=i.readFloat()*t),n.ikConstraints.push(p)}u=i.readInt(!0);for(let h=0,c;h<u;h++){let d=i.readString();if(!d)throw new Error("Transform constraint data name must not be null.");let p=new q3(d);p.order=i.readInt(!0),c=i.readInt(!0);for(let v=0;v<c;v++)p.bones.push(n.bones[i.readInt(!0)]);p.target=n.bones[i.readInt(!0)];let g=i.readByte();p.skinRequired=(g&1)!=0,p.local=(g&2)!=0,p.relative=(g&4)!=0,g&8&&(p.offsetRotation=i.readFloat()),g&16&&(p.offsetX=i.readFloat()*t),g&32&&(p.offsetY=i.readFloat()*t),g&64&&(p.offsetScaleX=i.readFloat()),g&128&&(p.offsetScaleY=i.readFloat()),g=i.readByte(),g&1&&(p.offsetShearY=i.readFloat()),g&2&&(p.mixRotate=i.readFloat()),g&4&&(p.mixX=i.readFloat()),g&8&&(p.mixY=i.readFloat()),g&16&&(p.mixScaleX=i.readFloat()),g&32&&(p.mixScaleY=i.readFloat()),g&64&&(p.mixShearY=i.readFloat()),n.transformConstraints.push(p)}u=i.readInt(!0);for(let h=0,c;h<u;h++){let d=i.readString();if(!d)throw new Error("Path constraint data name must not be null.");let p=new Y3(d);p.order=i.readInt(!0),p.skinRequired=i.readBoolean(),c=i.readInt(!0);for(let v=0;v<c;v++)p.bones.push(n.bones[i.readInt(!0)]);p.target=n.slots[i.readInt(!0)];const g=i.readByte();p.positionMode=g&1,p.spacingMode=g>>1&3,p.rotateMode=g>>3&3,g&128&&(p.offsetRotation=i.readFloat()),p.position=i.readFloat(),p.positionMode==Ps.Fixed&&(p.position*=t),p.spacing=i.readFloat(),(p.spacingMode==hr.Length||p.spacingMode==hr.Fixed)&&(p.spacing*=t),p.mixRotate=i.readFloat(),p.mixX=i.readFloat(),p.mixY=i.readFloat(),n.pathConstraints.push(p)}u=i.readInt(!0);for(let h=0,c;h<u;h++){const d=i.readString();if(!d)throw new Error("Physics constraint data name must not be null.");const p=new G3(d);p.order=i.readInt(!0),p.bone=n.bones[i.readInt(!0)];let g=i.readByte();p.skinRequired=(g&1)!=0,g&2&&(p.x=i.readFloat()),g&4&&(p.y=i.readFloat()),g&8&&(p.rotate=i.readFloat()),g&16&&(p.scaleX=i.readFloat()),g&32&&(p.shearX=i.readFloat()),p.limit=(g&64?i.readFloat():5e3)*t,p.step=1/i.readUnsignedByte(),p.inertia=i.readFloat(),p.strength=i.readFloat(),p.damping=i.readFloat(),p.massInverse=g&128?i.readFloat():1,p.wind=i.readFloat(),p.gravity=i.readFloat(),g=i.readByte(),g&1&&(p.inertiaGlobal=!0),g&2&&(p.strengthGlobal=!0),g&4&&(p.dampingGlobal=!0),g&8&&(p.massGlobal=!0),g&16&&(p.windGlobal=!0),g&32&&(p.gravityGlobal=!0),g&64&&(p.mixGlobal=!0),p.mix=g&128?i.readFloat():1,n.physicsConstraints.push(p)}let l=this.readSkin(i,n,!0,a);l&&(n.defaultSkin=l,n.skins.push(l));{let h=n.skins.length;for(pe.setArraySize(n.skins,u=h+i.readInt(!0));h<u;h++){let c=this.readSkin(i,n,!1,a);if(!c)throw new Error("readSkin() should not have returned null.");n.skins[h]=c}}u=this.linkedMeshes.length;for(let h=0;h<u;h++){let c=this.linkedMeshes[h];const d=n.skins[c.skinIndex];if(!c.parent)throw new Error("Linked mesh parent must not be null");let p=d.getAttachment(c.slotIndex,c.parent);if(!p)throw new Error(`Parent mesh not found: ${c.parent}`);c.mesh.timelineAttachment=c.inheritTimeline?p:c.mesh,c.mesh.setParentMesh(p),c.mesh.region!=null&&c.mesh.updateRegion()}this.linkedMeshes.length=0,u=i.readInt(!0);for(let h=0;h<u;h++){let c=i.readString();if(!c)throw new Error("Event data name must not be null");let d=new z3(c);d.intValue=i.readInt(!1),d.floatValue=i.readFloat(),d.stringValue=i.readString(),d.audioPath=i.readString(),d.audioPath&&(d.volume=i.readFloat(),d.balance=i.readFloat()),n.events.push(d)}u=i.readInt(!0);for(let h=0;h<u;h++){let c=i.readString();if(!c)throw new Error("Animatio name must not be null.");n.animations.push(this.readAnimation(i,c,n))}return n}readSkin(e,t,n,i){let s=null,o=0;if(n){if(o=e.readInt(!0),o==0)return null;s=new v_("default")}else{let a=e.readString();if(!a)throw new Error("Skin name must not be null.");s=new v_(a),i&&Xe.rgba8888ToColor(s.color,e.readInt32()),s.bones.length=e.readInt(!0);for(let u=0,l=s.bones.length;u<l;u++)s.bones[u]=t.bones[e.readInt(!0)];for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.ikConstraints[e.readInt(!0)]);for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.transformConstraints[e.readInt(!0)]);for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.pathConstraints[e.readInt(!0)]);for(let u=0,l=e.readInt(!0);u<l;u++)s.constraints.push(t.physicsConstraints[e.readInt(!0)]);o=e.readInt(!0)}for(let a=0;a<o;a++){let u=e.readInt(!0);for(let l=0,h=e.readInt(!0);l<h;l++){let c=e.readStringRef();if(!c)throw new Error("Attachment name must not be null");let d=this.readAttachment(e,t,s,u,c,i);d&&s.setAttachment(u,c,d)}}return s}readAttachment(e,t,n,i,s,o){let a=this.scale,u=e.readByte();const l=u&8?e.readStringRef():s;if(!l)throw new Error("Attachment name must not be null");switch(u&7){case Ws.Region:{let h=u&16?e.readStringRef():null;const c=u&32?e.readInt32():4294967295,d=u&64?this.readSequence(e):null;let p=u&128?e.readFloat():0,g=e.readFloat(),v=e.readFloat(),x=e.readFloat(),y=e.readFloat(),w=e.readFloat(),_=e.readFloat();h||(h=l);let S=this.attachmentLoader.newRegionAttachment(n,l,h,d);return S?(S.path=h,S.x=g*a,S.y=v*a,S.scaleX=x,S.scaleY=y,S.rotation=p,S.width=w*a,S.height=_*a,Xe.rgba8888ToColor(S.color,c),S.sequence=d,d==null&&S.updateRegion(),S):null}case Ws.BoundingBox:{let h=this.readVertices(e,(u&16)!=0),c=o?e.readInt32():0,d=this.attachmentLoader.newBoundingBoxAttachment(n,l);return d?(d.worldVerticesLength=h.length,d.vertices=h.vertices,d.bones=h.bones,o&&Xe.rgba8888ToColor(d.color,c),d):null}case Ws.Mesh:{let h=u&16?e.readStringRef():l;const c=u&32?e.readInt32():4294967295,d=u&64?this.readSequence(e):null,p=e.readInt(!0),g=this.readVertices(e,(u&128)!=0),v=this.readFloatArray(e,g.length,1),x=this.readShortArray(e,(g.length-p-2)*3);let y=[],w=0,_=0;o&&(y=this.readShortArray(e,e.readInt(!0)),w=e.readFloat(),_=e.readFloat()),h||(h=l);let S=this.attachmentLoader.newMeshAttachment(n,l,h,d);return S?(S.path=h,Xe.rgba8888ToColor(S.color,c),S.bones=g.bones,S.vertices=g.vertices,S.worldVerticesLength=g.length,S.triangles=x,S.regionUVs=v,d==null&&S.updateRegion(),S.hullLength=p<<1,S.sequence=d,o&&(S.edges=y,S.width=w*a,S.height=_*a),S):null}case Ws.LinkedMesh:{const h=u&16?e.readStringRef():l;if(h==null)throw new Error("Path of linked mesh must not be null");const c=u&32?e.readInt32():4294967295,d=u&64?this.readSequence(e):null,p=(u&128)!=0,g=e.readInt(!0),v=e.readStringRef();let x=0,y=0;o&&(x=e.readFloat(),y=e.readFloat());let w=this.attachmentLoader.newMeshAttachment(n,l,h,d);return w?(w.path=h,Xe.rgba8888ToColor(w.color,c),w.sequence=d,o&&(w.width=x*a,w.height=y*a),this.linkedMeshes.push(new c9(w,g,i,v,p)),w):null}case Ws.Path:{const h=(u&16)!=0,c=(u&32)!=0,d=this.readVertices(e,(u&64)!=0),p=pe.newArray(d.length/6,0);for(let x=0,y=p.length;x<y;x++)p[x]=e.readFloat()*a;const g=o?e.readInt32():0,v=this.attachmentLoader.newPathAttachment(n,l);return v?(v.closed=h,v.constantSpeed=c,v.worldVerticesLength=d.length,v.vertices=d.vertices,v.bones=d.bones,v.lengths=p,o&&Xe.rgba8888ToColor(v.color,g),v):null}case Ws.Point:{const h=e.readFloat(),c=e.readFloat(),d=e.readFloat(),p=o?e.readInt32():0,g=this.attachmentLoader.newPointAttachment(n,l);return g?(g.x=c*a,g.y=d*a,g.rotation=h,o&&Xe.rgba8888ToColor(g.color,p),g):null}case Ws.Clipping:{const h=e.readInt(!0),c=this.readVertices(e,(u&16)!=0);let d=o?e.readInt32():0,p=this.attachmentLoader.newClippingAttachment(n,l);return p?(p.endSlot=t.slots[h],p.worldVerticesLength=c.length,p.vertices=c.vertices,p.bones=c.bones,o&&Xe.rgba8888ToColor(p.color,d),p):null}}return null}readSequence(e){let t=new eg(e.readInt(!0));return t.start=e.readInt(!0),t.digits=e.readInt(!0),t.setupIndex=e.readInt(!0),t}readVertices(e,t){const n=this.scale,i=e.readInt(!0),s=new h9;if(s.length=i<<1,!t)return s.vertices=this.readFloatArray(e,s.length,n),s;let o=new Array,a=new Array;for(let u=0;u<i;u++){let l=e.readInt(!0);a.push(l);for(let h=0;h<l;h++)a.push(e.readInt(!0)),o.push(e.readFloat()*n),o.push(e.readFloat()*n),o.push(e.readFloat())}return s.vertices=pe.toFloatArray(o),s.bones=a,s}readFloatArray(e,t,n){let i=new Array(t);if(n==1)for(let s=0;s<t;s++)i[s]=e.readFloat();else for(let s=0;s<t;s++)i[s]=e.readFloat()*n;return i}readShortArray(e,t){let n=new Array(t);for(let i=0;i<t;i++)n[i]=e.readInt(!0);return n}readAnimation(e,t,n){e.readInt(!0);let i=new Array,s=this.scale;for(let l=0,h=e.readInt(!0);l<h;l++){let c=e.readInt(!0);for(let d=0,p=e.readInt(!0);d<p;d++){let g=e.readByte(),v=e.readInt(!0),x=v-1;switch(g){case S9:{let y=new bu(v,c);for(let w=0;w<v;w++)y.setFrame(w,e.readFloat(),e.readStringRef());i.push(y);break}case T9:{let y=e.readInt(!0),w=new b3(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255;for(let M=0,O=0;w.setFrame(M,_,S,I,A,k),M!=x;M++){let F=e.readFloat(),U=e.readUnsignedByte()/255,H=e.readUnsignedByte()/255,L=e.readUnsignedByte()/255,N=e.readUnsignedByte()/255;switch(e.readByte()){case ds:w.setStepped(M);break;case fs:Qe(e,w,O++,M,0,_,F,S,U,1),Qe(e,w,O++,M,1,_,F,I,H,1),Qe(e,w,O++,M,2,_,F,A,L,1),Qe(e,w,O++,M,3,_,F,k,N,1)}_=F,S=U,I=H,A=L,k=N}i.push(w);break}case E9:{let y=e.readInt(!0),w=new S3(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255;for(let k=0,M=0;w.setFrame(k,_,S,I,A),k!=x;k++){let O=e.readFloat(),F=e.readUnsignedByte()/255,U=e.readUnsignedByte()/255,H=e.readUnsignedByte()/255;switch(e.readByte()){case ds:w.setStepped(k);break;case fs:Qe(e,w,M++,k,0,_,O,S,F,1),Qe(e,w,M++,k,1,_,O,I,U,1),Qe(e,w,M++,k,2,_,O,A,H,1)}_=O,S=F,I=U,A=H}i.push(w);break}case P9:{let y=e.readInt(!0),w=new E3(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255,F=e.readUnsignedByte()/255;for(let U=0,H=0;w.setFrame(U,_,S,I,A,k,M,O,F),U!=x;U++){let L=e.readFloat(),N=e.readUnsignedByte()/255,j=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,K=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255,W=e.readUnsignedByte()/255,z=e.readUnsignedByte()/255;switch(e.readByte()){case ds:w.setStepped(U);break;case fs:Qe(e,w,H++,U,0,_,L,S,N,1),Qe(e,w,H++,U,1,_,L,I,j,1),Qe(e,w,H++,U,2,_,L,A,Y,1),Qe(e,w,H++,U,3,_,L,k,K,1),Qe(e,w,H++,U,4,_,L,M,X,1),Qe(e,w,H++,U,5,_,L,O,W,1),Qe(e,w,H++,U,6,_,L,F,z,1)}_=L,S=N,I=j,A=Y,k=K,M=X,O=W,F=z}i.push(w);break}case C9:{let y=e.readInt(!0),w=new P3(v,y,c),_=e.readFloat(),S=e.readUnsignedByte()/255,I=e.readUnsignedByte()/255,A=e.readUnsignedByte()/255,k=e.readUnsignedByte()/255,M=e.readUnsignedByte()/255,O=e.readUnsignedByte()/255;for(let F=0,U=0;w.setFrame(F,_,S,I,A,k,M,O),F!=x;F++){let H=e.readFloat(),L=e.readUnsignedByte()/255,N=e.readUnsignedByte()/255,j=e.readUnsignedByte()/255,Y=e.readUnsignedByte()/255,K=e.readUnsignedByte()/255,X=e.readUnsignedByte()/255;switch(e.readByte()){case ds:w.setStepped(F);break;case fs:Qe(e,w,U++,F,0,_,H,S,L,1),Qe(e,w,U++,F,1,_,H,I,N,1),Qe(e,w,U++,F,2,_,H,A,j,1),Qe(e,w,U++,F,3,_,H,k,Y,1),Qe(e,w,U++,F,4,_,H,M,K,1),Qe(e,w,U++,F,5,_,H,O,X,1)}_=H,S=L,I=N,A=j,k=Y,M=K,O=X}i.push(w);break}case A9:{let y=new T3(v,e.readInt(!0),c),w=e.readFloat(),_=e.readUnsignedByte()/255;for(let S=0,I=0;y.setFrame(S,w,_),S!=x;S++){let A=e.readFloat(),k=e.readUnsignedByte()/255;switch(e.readByte()){case ds:y.setStepped(S);break;case fs:Qe(e,y,I++,S,0,w,A,_,k,1)}w=A,_=k}i.push(y)}}}}for(let l=0,h=e.readInt(!0);l<h;l++){let c=e.readInt(!0);for(let d=0,p=e.readInt(!0);d<p;d++){let g=e.readByte(),v=e.readInt(!0);if(g==b9){let y=new w3(v,c);for(let w=0;w<v;w++)y.setFrame(w,e.readFloat(),e.readByte());i.push(y);continue}let x=e.readInt(!0);switch(g){case d9:i.push(Hr(e,new tg(v,x,c),1));break;case f9:i.push(Hy(e,new d3(v,x,c),s));break;case p9:i.push(Hr(e,new f3(v,x,c),s));break;case m9:i.push(Hr(e,new p3(v,x,c),s));break;case g9:i.push(Hy(e,new m3(v,x,c),1));break;case v9:i.push(Hr(e,new g3(v,x,c),1));break;case y9:i.push(Hr(e,new v3(v,x,c),1));break;case x9:i.push(Hy(e,new y3(v,x,c),1));break;case _9:i.push(Hr(e,new x3(v,x,c),1));break;case w9:i.push(Hr(e,new _3(v,x,c),1))}}}for(let l=0,h=e.readInt(!0);l<h;l++){let c=e.readInt(!0),d=e.readInt(!0),p=d-1,g=new A3(d,e.readInt(!0),c),v=e.readByte(),x=e.readFloat(),y=v&1?v&2?e.readFloat():1:0,w=v&4?e.readFloat()*s:0;for(let _=0,S=0;g.setFrame(_,x,y,w,v&8?1:-1,(v&16)!=0,(v&32)!=0),_!=p;_++){v=e.readByte();const I=e.readFloat(),A=v&1?v&2?e.readFloat():1:0,k=v&4?e.readFloat()*s:0;v&64?g.setStepped(_):v&128&&(Qe(e,g,S++,_,0,x,I,y,A,1),Qe(e,g,S++,_,1,x,I,w,k,s)),x=I,y=A,w=k}i.push(g)}for(let l=0,h=e.readInt(!0);l<h;l++){let c=e.readInt(!0),d=e.readInt(!0),p=d-1,g=new k3(d,e.readInt(!0),c),v=e.readFloat(),x=e.readFloat(),y=e.readFloat(),w=e.readFloat(),_=e.readFloat(),S=e.readFloat(),I=e.readFloat();for(let A=0,k=0;g.setFrame(A,v,x,y,w,_,S,I),A!=p;A++){let M=e.readFloat(),O=e.readFloat(),F=e.readFloat(),U=e.readFloat(),H=e.readFloat(),L=e.readFloat(),N=e.readFloat();switch(e.readByte()){case ds:g.setStepped(A);break;case fs:Qe(e,g,k++,A,0,v,M,x,O,1),Qe(e,g,k++,A,1,v,M,y,F,1),Qe(e,g,k++,A,2,v,M,w,U,1),Qe(e,g,k++,A,3,v,M,_,H,1),Qe(e,g,k++,A,4,v,M,S,L,1),Qe(e,g,k++,A,5,v,M,I,N,1)}v=M,x=O,y=F,w=U,_=H,S=L,I=N}i.push(g)}for(let l=0,h=e.readInt(!0);l<h;l++){let c=e.readInt(!0),d=n.pathConstraints[c];for(let p=0,g=e.readInt(!0);p<g;p++){const v=e.readByte(),x=e.readInt(!0),y=e.readInt(!0);switch(v){case M9:i.push(Hr(e,new I3(x,y,c),d.positionMode==Ps.Fixed?s:1));break;case R9:i.push(Hr(e,new M3(x,y,c),d.spacingMode==hr.Length||d.spacingMode==hr.Fixed?s:1));break;case O9:let w=new R3(x,y,c),_=e.readFloat(),S=e.readFloat(),I=e.readFloat(),A=e.readFloat();for(let k=0,M=0,O=w.getFrameCount()-1;w.setFrame(k,_,S,I,A),k!=O;k++){let F=e.readFloat(),U=e.readFloat(),H=e.readFloat(),L=e.readFloat();switch(e.readByte()){case ds:w.setStepped(k);break;case fs:Qe(e,w,M++,k,0,_,F,S,U,1),Qe(e,w,M++,k,1,_,F,I,H,1),Qe(e,w,M++,k,2,_,F,A,L,1)}_=F,S=U,I=H,A=L}i.push(w)}}}for(let l=0,h=e.readInt(!0);l<h;l++){const c=e.readInt(!0)-1;for(let d=0,p=e.readInt(!0);d<p;d++){const g=e.readByte(),v=e.readInt(!0);if(g==X9){const y=new rg(v,c);for(let w=0;w<v;w++)y.setFrame(w,e.readFloat());i.push(y);continue}const x=e.readInt(!0);switch(g){case N9:i.push(Hr(e,new O3(v,x,c),1));break;case B9:i.push(Hr(e,new N3(v,x,c),1));break;case L9:i.push(Hr(e,new B3(v,x,c),1));break;case F9:i.push(Hr(e,new L3(v,x,c),1));break;case D9:i.push(Hr(e,new F3(v,x,c),1));break;case U9:i.push(Hr(e,new D3(v,x,c),1));break;case j9:i.push(Hr(e,new U3(v,x,c),1))}}}for(let l=0,h=e.readInt(!0);l<h;l++){let c=n.skins[e.readInt(!0)];for(let d=0,p=e.readInt(!0);d<p;d++){let g=e.readInt(!0);for(let v=0,x=e.readInt(!0);v<x;v++){let y=e.readStringRef();if(!y)throw new Error("attachmentName must not be null.");let w=c.getAttachment(g,y),_=e.readByte(),S=e.readInt(!0),I=S-1;switch(_){case k9:{let A=w,k=A.bones,M=A.vertices,O=k?M.length/3*2:M.length,F=e.readInt(!0),U=new C3(S,F,g,A),H=e.readFloat();for(let L=0,N=0;;L++){let j,Y=e.readInt(!0);if(Y==0)j=k?pe.newFloatArray(O):M;else{j=pe.newFloatArray(O);let X=e.readInt(!0);if(Y+=X,s==1)for(let W=X;W<Y;W++)j[W]=e.readFloat();else for(let W=X;W<Y;W++)j[W]=e.readFloat()*s;if(!k)for(let W=0,z=j.length;W<z;W++)j[W]+=M[W]}if(U.setFrame(L,H,j),L==I)break;let K=e.readFloat();switch(e.readByte()){case ds:U.setStepped(L);break;case fs:Qe(e,U,N++,L,0,H,K,0,1,1)}H=K}i.push(U);break}case I9:{let A=new ng(S,g,w);for(let k=0;k<S;k++){let M=e.readFloat(),O=e.readInt32();A.setFrame(k,M,h3[O&15],O>>4,e.readFloat())}i.push(A);break}}}}}let o=e.readInt(!0);if(o>0){let l=new ul(o),h=n.slots.length;for(let c=0;c<o;c++){let d=e.readFloat(),p=e.readInt(!0),g=pe.newArray(h,0);for(let w=h-1;w>=0;w--)g[w]=-1;let v=pe.newArray(h-p,0),x=0,y=0;for(let w=0;w<p;w++){let _=e.readInt(!0);for(;x!=_;)v[y++]=x++;g[x+e.readInt(!0)]=x++}for(;x<h;)v[y++]=x++;for(let w=h-1;w>=0;w--)g[w]==-1&&(g[w]=v[--y]);l.setFrame(c,d,g)}i.push(l)}let a=e.readInt(!0);if(a>0){let l=new ud(a);for(let h=0;h<a;h++){let c=e.readFloat(),d=n.events[e.readInt(!0)],p=new H3(c,d);p.intValue=e.readInt(!1),p.floatValue=e.readFloat(),p.stringValue=e.readString(),p.stringValue==null&&(p.stringValue=d.stringValue),p.data.audioPath&&(p.volume=e.readFloat(),p.balance=e.readFloat()),l.setFrame(h,p)}i.push(l)}let u=0;for(let l=0,h=i.length;l<h;l++)u=Math.max(u,i[l].getDuration());return new Kw(t,i,u)}}class u9{constructor(e,t=new Array,n=0,i=new DataView(e instanceof ArrayBuffer?e:e.buffer)){P(this,"strings");P(this,"index");P(this,"buffer");this.strings=t,this.index=n,this.buffer=i}readByte(){return this.buffer.getInt8(this.index++)}readUnsignedByte(){return this.buffer.getUint8(this.index++)}readShort(){let e=this.buffer.getInt16(this.index);return this.index+=2,e}readInt32(){let e=this.buffer.getInt32(this.index);return this.index+=4,e}readInt(e){let t=this.readByte(),n=t&127;return t&128&&(t=this.readByte(),n|=(t&127)<<7,t&128&&(t=this.readByte(),n|=(t&127)<<14,t&128&&(t=this.readByte(),n|=(t&127)<<21,t&128&&(t=this.readByte(),n|=(t&127)<<28)))),e?n:n>>>1^-(n&1)}readStringRef(){let e=this.readInt(!0);return e==0?null:this.strings[e-1]}readString(){let e=this.readInt(!0);switch(e){case 0:return null;case 1:return""}e--;let t="";for(let n=0;n<e;){let i=this.readUnsignedByte();switch(i>>4){case 12:case 13:t+=String.fromCharCode((i&31)<<6|this.readByte()&63),n+=2;break;case 14:t+=String.fromCharCode((i&15)<<12|(this.readByte()&63)<<6|this.readByte()&63),n+=3;break;default:t+=String.fromCharCode(i),n++}}return t}readFloat(){let e=this.buffer.getFloat32(this.index);return this.index+=4,e}readBoolean(){return this.readByte()!=0}}let c9=class{constructor(e,t,n,i,s){P(this,"parent");P(this,"skinIndex");P(this,"slotIndex");P(this,"mesh");P(this,"inheritTimeline");this.mesh=e,this.skinIndex=t,this.slotIndex=n,this.parent=i,this.inheritTimeline=s}};class h9{constructor(e=null,t=null,n=0){P(this,"bones");P(this,"vertices");P(this,"length");this.bones=e,this.vertices=t,this.length=n}}var Ws;(function(r){r[r.Region=0]="Region",r[r.BoundingBox=1]="BoundingBox",r[r.Mesh=2]="Mesh",r[r.LinkedMesh=3]="LinkedMesh",r[r.Path=4]="Path",r[r.Point=5]="Point",r[r.Clipping=6]="Clipping"})(Ws||(Ws={}));function Hr(r,e,t){let n=r.readFloat(),i=r.readFloat()*t;for(let s=0,o=0,a=e.getFrameCount()-1;e.setFrame(s,n,i),s!=a;s++){let u=r.readFloat(),l=r.readFloat()*t;switch(r.readByte()){case ds:e.setStepped(s);break;case fs:Qe(r,e,o++,s,0,n,u,i,l,t)}n=u,i=l}return e}function Hy(r,e,t){let n=r.readFloat(),i=r.readFloat()*t,s=r.readFloat()*t;for(let o=0,a=0,u=e.getFrameCount()-1;e.setFrame(o,n,i,s),o!=u;o++){let l=r.readFloat(),h=r.readFloat()*t,c=r.readFloat()*t;switch(r.readByte()){case ds:e.setStepped(o);break;case fs:Qe(r,e,a++,o,0,n,l,i,h,t),Qe(r,e,a++,o,1,n,l,s,c,t)}n=l,i=h,s=c}return e}function Qe(r,e,t,n,i,s,o,a,u,l){e.setBezier(t,n,i,s,a,r.readFloat(),r.readFloat()*l,r.readFloat(),r.readFloat()*l,o,u)}const d9=0,f9=1,p9=2,m9=3,g9=4,v9=5,y9=6,x9=7,_9=8,w9=9,b9=10,S9=0,T9=1,E9=2,P9=3,C9=4,A9=5,k9=0,I9=1,M9=0,R9=1,O9=2,N9=0,B9=1,L9=2,F9=4,D9=5,U9=6,j9=7,X9=8,ds=1,fs=2;class cn{constructor(){P(this,"convexPolygons",new Array);P(this,"convexPolygonsIndices",new Array);P(this,"indicesArray",new Array);P(this,"isConcaveArray",new Array);P(this,"triangles",new Array);P(this,"polygonPool",new p_(()=>new Array));P(this,"polygonIndicesPool",new p_(()=>new Array))}triangulate(e){let t=e,n=e.length>>1,i=this.indicesArray;i.length=0;for(let a=0;a<n;a++)i[a]=a;let s=this.isConcaveArray;s.length=0;for(let a=0,u=n;a<u;++a)s[a]=cn.isConcave(a,n,t,i);let o=this.triangles;for(o.length=0;n>3;){let a=n-1,u=0,l=1;for(;;){e:if(!s[u]){let d=i[a]<<1,p=i[u]<<1,g=i[l]<<1,v=t[d],x=t[d+1],y=t[p],w=t[p+1],_=t[g],S=t[g+1];for(let I=(l+1)%n;I!=a;I=(I+1)%n){if(!s[I])continue;let A=i[I]<<1,k=t[A],M=t[A+1];if(cn.positiveArea(_,S,v,x,k,M)&&cn.positiveArea(v,x,y,w,k,M)&&cn.positiveArea(y,w,_,S,k,M))break e}break}if(l==0){do{if(!s[u])break;u--}while(u>0);break}a=u,u=l,l=(l+1)%n}o.push(i[(n+u-1)%n]),o.push(i[u]),o.push(i[(u+1)%n]),i.splice(u,1),s.splice(u,1),n--;let h=(n+u-1)%n,c=u==n?0:u;s[h]=cn.isConcave(h,n,t,i),s[c]=cn.isConcave(c,n,t,i)}return n==3&&(o.push(i[2]),o.push(i[0]),o.push(i[1])),o}decompose(e,t){let n=e,i=this.convexPolygons;this.polygonPool.freeAll(i),i.length=0;let s=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(s),s.length=0;let o=this.polygonIndicesPool.obtain();o.length=0;let a=this.polygonPool.obtain();a.length=0;let u=-1,l=0;for(let h=0,c=t.length;h<c;h+=3){let d=t[h]<<1,p=t[h+1]<<1,g=t[h+2]<<1,v=n[d],x=n[d+1],y=n[p],w=n[p+1],_=n[g],S=n[g+1],I=!1;if(u==d){let A=a.length-4,k=cn.winding(a[A],a[A+1],a[A+2],a[A+3],_,S),M=cn.winding(_,S,a[0],a[1],a[2],a[3]);k==l&&M==l&&(a.push(_),a.push(S),o.push(g),I=!0)}I||(a.length>0?(i.push(a),s.push(o)):(this.polygonPool.free(a),this.polygonIndicesPool.free(o)),a=this.polygonPool.obtain(),a.length=0,a.push(v),a.push(x),a.push(y),a.push(w),a.push(_),a.push(S),o=this.polygonIndicesPool.obtain(),o.length=0,o.push(d),o.push(p),o.push(g),l=cn.winding(v,x,y,w,_,S),u=d)}a.length>0&&(i.push(a),s.push(o));for(let h=0,c=i.length;h<c;h++){if(o=s[h],o.length==0)continue;let d=o[0],p=o[o.length-1];a=i[h];let g=a.length-4,v=a[g],x=a[g+1],y=a[g+2],w=a[g+3],_=a[0],S=a[1],I=a[2],A=a[3],k=cn.winding(v,x,y,w,_,S);for(let M=0;M<c;M++){if(M==h)continue;let O=s[M];if(O.length!=3)continue;let F=O[0],U=O[1],H=O[2],L=i[M],N=L[L.length-2],j=L[L.length-1];if(F!=d||U!=p)continue;let Y=cn.winding(v,x,y,w,N,j),K=cn.winding(N,j,_,S,I,A);Y==k&&K==k&&(L.length=0,O.length=0,a.push(N),a.push(j),o.push(H),v=y,x=w,y=N,w=j,M=0)}}for(let h=i.length-1;h>=0;h--)a=i[h],a.length==0&&(i.splice(h,1),this.polygonPool.free(a),o=s[h],s.splice(h,1),this.polygonIndicesPool.free(o));return i}static isConcave(e,t,n,i){let s=i[(t+e-1)%t]<<1,o=i[e]<<1,a=i[(e+1)%t]<<1;return!this.positiveArea(n[s],n[s+1],n[o],n[o+1],n[a],n[a+1])}static positiveArea(e,t,n,i,s,o){return e*(o-i)+n*(t-o)+s*(i-t)>=0}static winding(e,t,n,i,s,o){let a=n-e,u=i-t;return s*u-o*a+a*t-e*u>=0?1:-1}}class ig{constructor(){P(this,"triangulator",new cn);P(this,"clippingPolygon",new Array);P(this,"clipOutput",new Array);P(this,"clippedVertices",new Array);P(this,"clippedUVs",new Array);P(this,"clippedTriangles",new Array);P(this,"scratch",new Array);P(this,"clipAttachment",null);P(this,"clippingPolygons",null)}clipStart(e,t){if(this.clipAttachment)return 0;this.clipAttachment=t;let n=t.worldVerticesLength,i=pe.setArraySize(this.clippingPolygon,n);t.computeWorldVertices(e,0,n,i,0,2);let s=this.clippingPolygon;ig.makeClockwise(s);let o=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s));for(let a=0,u=o.length;a<u;a++){let l=o[a];ig.makeClockwise(l),l.push(l[0]),l.push(l[1])}return o.length}clipEndWithSlot(e){this.clipAttachment&&this.clipAttachment.endSlot==e.data&&this.clipEnd()}clipEnd(){this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)}isClipping(){return this.clipAttachment!=null}clipTriangles(e,t,n,i,s,o,a){i&&s&&o&&typeof a=="boolean"?this.clipTrianglesRender(e,t,n,i,s,o,a):this.clipTrianglesNoRender(e,t,n)}clipTrianglesNoRender(e,t,n){let i=this.clipOutput,s=this.clippedVertices,o=this.clippedTriangles,a=this.clippingPolygons,u=a.length,l=0;s.length=0,o.length=0;for(let h=0;h<n;h+=3){let c=t[h]<<1,d=e[c],p=e[c+1];c=t[h+1]<<1;let g=e[c],v=e[c+1];c=t[h+2]<<1;let x=e[c],y=e[c+1];for(let w=0;w<u;w++){let _=s.length;if(this.clip(d,p,g,v,x,y,a[w],i)){let S=i.length;if(S==0)continue;let I=S>>1,A=this.clipOutput,k=pe.setArraySize(s,_+I*2);for(let O=0;O<S;O+=2,_+=2){let F=A[O],U=A[O+1];k[_]=F,k[_+1]=U}_=o.length;let M=pe.setArraySize(o,_+3*(I-2));I--;for(let O=1;O<I;O++,_+=3)M[_]=l,M[_+1]=l+O,M[_+2]=l+O+1;l+=I+1}else{let S=pe.setArraySize(s,_+6);S[_]=d,S[_+1]=p,S[_+2]=g,S[_+3]=v,S[_+4]=x,S[_+5]=y,_=o.length;let I=pe.setArraySize(o,_+3);I[_]=l,I[_+1]=l+1,I[_+2]=l+2,l+=3;break}}}}clipTrianglesRender(e,t,n,i,s,o,a){let u=this.clipOutput,l=this.clippedVertices,h=this.clippedTriangles,c=this.clippingPolygons,d=c.length,p=a?12:8,g=0;l.length=0,h.length=0;for(let v=0;v<n;v+=3){let x=t[v]<<1,y=e[x],w=e[x+1],_=i[x],S=i[x+1];x=t[v+1]<<1;let I=e[x],A=e[x+1],k=i[x],M=i[x+1];x=t[v+2]<<1;let O=e[x],F=e[x+1],U=i[x],H=i[x+1];for(let L=0;L<d;L++){let N=l.length;if(this.clip(y,w,I,A,O,F,c[L],u)){let j=u.length;if(j==0)continue;let Y=A-F,K=O-I,X=y-O,W=F-w,z=1/(Y*X+K*(w-F)),V=j>>1,Z=this.clipOutput,re=pe.setArraySize(l,N+V*p);for(let xe=0;xe<j;xe+=2,N+=p){let Re=Z[xe],Le=Z[xe+1];re[N]=Re,re[N+1]=Le,re[N+2]=s.r,re[N+3]=s.g,re[N+4]=s.b,re[N+5]=s.a;let ze=Re-O,We=Le-F,He=(Y*ze+K*We)*z,Fe=(W*ze+X*We)*z,at=1-He-Fe;re[N+6]=_*He+k*Fe+U*at,re[N+7]=S*He+M*Fe+H*at,a&&(re[N+8]=o.r,re[N+9]=o.g,re[N+10]=o.b,re[N+11]=o.a)}N=h.length;let ce=pe.setArraySize(h,N+3*(V-2));V--;for(let xe=1;xe<V;xe++,N+=3)ce[N]=g,ce[N+1]=g+xe,ce[N+2]=g+xe+1;g+=V+1}else{let j=pe.setArraySize(l,N+3*p);j[N]=y,j[N+1]=w,j[N+2]=s.r,j[N+3]=s.g,j[N+4]=s.b,j[N+5]=s.a,a?(j[N+6]=_,j[N+7]=S,j[N+8]=o.r,j[N+9]=o.g,j[N+10]=o.b,j[N+11]=o.a,j[N+12]=I,j[N+13]=A,j[N+14]=s.r,j[N+15]=s.g,j[N+16]=s.b,j[N+17]=s.a,j[N+18]=k,j[N+19]=M,j[N+20]=o.r,j[N+21]=o.g,j[N+22]=o.b,j[N+23]=o.a,j[N+24]=O,j[N+25]=F,j[N+26]=s.r,j[N+27]=s.g,j[N+28]=s.b,j[N+29]=s.a,j[N+30]=U,j[N+31]=H,j[N+32]=o.r,j[N+33]=o.g,j[N+34]=o.b,j[N+35]=o.a):(j[N+6]=_,j[N+7]=S,j[N+8]=I,j[N+9]=A,j[N+10]=s.r,j[N+11]=s.g,j[N+12]=s.b,j[N+13]=s.a,j[N+14]=k,j[N+15]=M,j[N+16]=O,j[N+17]=F,j[N+18]=s.r,j[N+19]=s.g,j[N+20]=s.b,j[N+21]=s.a,j[N+22]=U,j[N+23]=H),N=h.length;let Y=pe.setArraySize(h,N+3);Y[N]=g,Y[N+1]=g+1,Y[N+2]=g+2,g+=3;break}}}}clipTrianglesUnpacked(e,t,n,i){let s=this.clipOutput,o=this.clippedVertices,a=this.clippedUVs,u=this.clippedTriangles,l=this.clippingPolygons,h=l.length,c=0;o.length=0,a.length=0,u.length=0;for(let d=0;d<n;d+=3){let p=t[d]<<1,g=e[p],v=e[p+1],x=i[p],y=i[p+1];p=t[d+1]<<1;let w=e[p],_=e[p+1],S=i[p],I=i[p+1];p=t[d+2]<<1;let A=e[p],k=e[p+1],M=i[p],O=i[p+1];for(let F=0;F<h;F++){let U=o.length;if(this.clip(g,v,w,_,A,k,l[F],s)){let H=s.length;if(H==0)continue;let L=_-k,N=A-w,j=g-A,Y=k-v,K=1/(L*j+N*(v-k)),X=H>>1,W=this.clipOutput,z=pe.setArraySize(o,U+X*2),V=pe.setArraySize(a,U+X*2);for(let re=0;re<H;re+=2,U+=2){let ce=W[re],xe=W[re+1];z[U]=ce,z[U+1]=xe;let Re=ce-A,Le=xe-k,ze=(L*Re+N*Le)*K,We=(Y*Re+j*Le)*K,He=1-ze-We;V[U]=x*ze+S*We+M*He,V[U+1]=y*ze+I*We+O*He}U=u.length;let Z=pe.setArraySize(u,U+3*(X-2));X--;for(let re=1;re<X;re++,U+=3)Z[U]=c,Z[U+1]=c+re,Z[U+2]=c+re+1;c+=X+1}else{let H=pe.setArraySize(o,U+6);H[U]=g,H[U+1]=v,H[U+2]=w,H[U+3]=_,H[U+4]=A,H[U+5]=k;let L=pe.setArraySize(a,U+3*2);L[U]=x,L[U+1]=y,L[U+2]=S,L[U+3]=I,L[U+4]=M,L[U+5]=O,U=u.length;let N=pe.setArraySize(u,U+3);N[U]=c,N[U+1]=c+1,N[U+2]=c+2,c+=3;break}}}}clip(e,t,n,i,s,o,a,u){let l=u,h=!1,c;a.length%4>=2?(c=u,u=this.scratch):c=this.scratch,c.length=0,c.push(e),c.push(t),c.push(n),c.push(i),c.push(s),c.push(o),c.push(e),c.push(t),u.length=0;let d=a.length-4,p=a;for(let g=0;;g+=2){let v=p[g],x=p[g+1],y=v-p[g+2],w=x-p[g+3],_=u.length,S=c;for(let A=0,k=c.length-2;A<k;){let M=S[A],O=S[A+1];A+=2;let F=S[A],U=S[A+1],H=w*(v-F)>y*(x-U),L=w*(v-M)-y*(x-O);if(L>0){if(H){u.push(F),u.push(U);continue}let N=F-M,j=U-O,Y=L/(N*w-j*y);if(Y>=0&&Y<=1)u.push(M+N*Y),u.push(O+j*Y);else{u.push(F),u.push(U);continue}}else if(H){let N=F-M,j=U-O,Y=L/(N*w-j*y);if(Y>=0&&Y<=1)u.push(M+N*Y),u.push(O+j*Y),u.push(F),u.push(U);else{u.push(F),u.push(U);continue}}h=!0}if(_==u.length)return l.length=0,!0;if(u.push(u[0]),u.push(u[1]),g==d)break;let I=u;u=c,u.length=0,c=I}if(l!=u){l.length=0;for(let g=0,v=u.length-2;g<v;g++)l[g]=u[g]}else l.length=l.length-2;return h}static makeClockwise(e){let t=e,n=e.length,i=t[n-2]*t[1]-t[0]*t[n-1],s=0,o=0,a=0,u=0;for(let l=0,h=n-3;l<h;l+=2)s=t[l],o=t[l+1],a=t[l+2],u=t[l+3],i+=s*u-a*o;if(!(i<0))for(let l=0,h=n-2,c=n>>1;l<c;l+=2){let d=t[l],p=t[l+1],g=h-l;t[l]=t[g],t[l+1]=t[g+1],t[g]=d,t[g+1]=p}}}class H9{constructor(e){P(this,"attachmentLoader");P(this,"scale",1);P(this,"linkedMeshes",new Array);this.attachmentLoader=e}readSkeletonData(e){let t=this.scale,n=new W3,i=typeof e=="string"?JSON.parse(e):e,s=i.skeleton;if(s&&(n.hash=s.hash,n.version=s.spine,n.x=s.x,n.y=s.y,n.width=s.width,n.height=s.height,n.referenceScale=G(s,"referenceScale",100)*t,n.fps=s.fps,n.imagesPath=s.images??null,n.audioPath=s.audio??null),i.bones)for(let o=0;o<i.bones.length;o++){let a=i.bones[o],u=null,l=G(a,"parent",null);l&&(u=n.findBone(l));let h=new X3(n.bones.length,a.name,u);h.length=G(a,"length",0)*t,h.x=G(a,"x",0)*t,h.y=G(a,"y",0)*t,h.rotation=G(a,"rotation",0),h.scaleX=G(a,"scaleX",1),h.scaleY=G(a,"scaleY",1),h.shearX=G(a,"shearX",0),h.shearY=G(a,"shearY",0),h.inherit=pe.enumValue(Bt,G(a,"inherit","Normal")),h.skinRequired=G(a,"skin",!1);let c=G(a,"color",null);c&&h.color.setFromString(c),n.bones.push(h)}if(i.slots)for(let o=0;o<i.slots.length;o++){let a=i.slots[o],u=a.name,l=n.findBone(a.bone);if(!l)throw new Error(`Couldn't find bone ${a.bone} for slot ${u}`);let h=new V3(n.slots.length,u,l),c=G(a,"color",null);c&&h.color.setFromString(c);let d=G(a,"dark",null);d&&(h.darkColor=Xe.fromString(d)),h.attachmentName=G(a,"attachment",null),h.blendMode=pe.enumValue(aa,G(a,"blend","normal")),h.visible=G(a,"visible",!0),n.slots.push(h)}if(i.ik)for(let o=0;o<i.ik.length;o++){let a=i.ik[o],u=new $3(a.name);u.order=G(a,"order",0),u.skinRequired=G(a,"skin",!1);for(let h=0;h<a.bones.length;h++){let c=n.findBone(a.bones[h]);if(!c)throw new Error(`Couldn't find bone ${a.bones[h]} for IK constraint ${a.name}.`);u.bones.push(c)}let l=n.findBone(a.target);if(!l)throw new Error(`Couldn't find target bone ${a.target} for IK constraint ${a.name}.`);u.target=l,u.mix=G(a,"mix",1),u.softness=G(a,"softness",0)*t,u.bendDirection=G(a,"bendPositive",!0)?1:-1,u.compress=G(a,"compress",!1),u.stretch=G(a,"stretch",!1),u.uniform=G(a,"uniform",!1),n.ikConstraints.push(u)}if(i.transform)for(let o=0;o<i.transform.length;o++){let a=i.transform[o],u=new q3(a.name);u.order=G(a,"order",0),u.skinRequired=G(a,"skin",!1);for(let c=0;c<a.bones.length;c++){let d=a.bones[c],p=n.findBone(d);if(!p)throw new Error(`Couldn't find bone ${d} for transform constraint ${a.name}.`);u.bones.push(p)}let l=a.target,h=n.findBone(l);if(!h)throw new Error(`Couldn't find target bone ${l} for transform constraint ${a.name}.`);u.target=h,u.local=G(a,"local",!1),u.relative=G(a,"relative",!1),u.offsetRotation=G(a,"rotation",0),u.offsetX=G(a,"x",0)*t,u.offsetY=G(a,"y",0)*t,u.offsetScaleX=G(a,"scaleX",0),u.offsetScaleY=G(a,"scaleY",0),u.offsetShearY=G(a,"shearY",0),u.mixRotate=G(a,"mixRotate",1),u.mixX=G(a,"mixX",1),u.mixY=G(a,"mixY",u.mixX),u.mixScaleX=G(a,"mixScaleX",1),u.mixScaleY=G(a,"mixScaleY",u.mixScaleX),u.mixShearY=G(a,"mixShearY",1),n.transformConstraints.push(u)}if(i.path)for(let o=0;o<i.path.length;o++){let a=i.path[o],u=new Y3(a.name);u.order=G(a,"order",0),u.skinRequired=G(a,"skin",!1);for(let c=0;c<a.bones.length;c++){let d=a.bones[c],p=n.findBone(d);if(!p)throw new Error(`Couldn't find bone ${d} for path constraint ${a.name}.`);u.bones.push(p)}let l=a.target,h=n.findSlot(l);if(!h)throw new Error(`Couldn't find target slot ${l} for path constraint ${a.name}.`);u.target=h,u.positionMode=pe.enumValue(Ps,G(a,"positionMode","Percent")),u.spacingMode=pe.enumValue(hr,G(a,"spacingMode","Length")),u.rotateMode=pe.enumValue(cl,G(a,"rotateMode","Tangent")),u.offsetRotation=G(a,"rotation",0),u.position=G(a,"position",0),u.positionMode==Ps.Fixed&&(u.position*=t),u.spacing=G(a,"spacing",0),(u.spacingMode==hr.Length||u.spacingMode==hr.Fixed)&&(u.spacing*=t),u.mixRotate=G(a,"mixRotate",1),u.mixX=G(a,"mixX",1),u.mixY=G(a,"mixY",u.mixX),n.pathConstraints.push(u)}if(i.physics)for(let o=0;o<i.physics.length;o++){const a=i.physics[o],u=new G3(a.name);u.order=G(a,"order",0),u.skinRequired=G(a,"skin",!1);const l=a.bone,h=n.findBone(l);if(h==null)throw new Error("Physics bone not found: "+l);u.bone=h,u.x=G(a,"x",0),u.y=G(a,"y",0),u.rotate=G(a,"rotate",0),u.scaleX=G(a,"scaleX",0),u.shearX=G(a,"shearX",0),u.limit=G(a,"limit",5e3)*t,u.step=1/G(a,"fps",60),u.inertia=G(a,"inertia",1),u.strength=G(a,"strength",100),u.damping=G(a,"damping",1),u.massInverse=1/G(a,"mass",1),u.wind=G(a,"wind",0),u.gravity=G(a,"gravity",0),u.mix=G(a,"mix",1),u.inertiaGlobal=G(a,"inertiaGlobal",!1),u.strengthGlobal=G(a,"strengthGlobal",!1),u.dampingGlobal=G(a,"dampingGlobal",!1),u.massGlobal=G(a,"massGlobal",!1),u.windGlobal=G(a,"windGlobal",!1),u.gravityGlobal=G(a,"gravityGlobal",!1),u.mixGlobal=G(a,"mixGlobal",!1),n.physicsConstraints.push(u)}if(i.skins)for(let o=0;o<i.skins.length;o++){let a=i.skins[o],u=new v_(a.name);if(a.bones)for(let l=0;l<a.bones.length;l++){let h=a.bones[l],c=n.findBone(h);if(!c)throw new Error(`Couldn't find bone ${h} for skin ${a.name}.`);u.bones.push(c)}if(a.ik)for(let l=0;l<a.ik.length;l++){let h=a.ik[l],c=n.findIkConstraint(h);if(!c)throw new Error(`Couldn't find IK constraint ${h} for skin ${a.name}.`);u.constraints.push(c)}if(a.transform)for(let l=0;l<a.transform.length;l++){let h=a.transform[l],c=n.findTransformConstraint(h);if(!c)throw new Error(`Couldn't find transform constraint ${h} for skin ${a.name}.`);u.constraints.push(c)}if(a.path)for(let l=0;l<a.path.length;l++){let h=a.path[l],c=n.findPathConstraint(h);if(!c)throw new Error(`Couldn't find path constraint ${h} for skin ${a.name}.`);u.constraints.push(c)}if(a.physics)for(let l=0;l<a.physics.length;l++){let h=a.physics[l],c=n.findPhysicsConstraint(h);if(!c)throw new Error(`Couldn't find physics constraint ${h} for skin ${a.name}.`);u.constraints.push(c)}for(let l in a.attachments){let h=n.findSlot(l);if(!h)throw new Error(`Couldn't find slot ${l} for skin ${a.name}.`);let c=a.attachments[l];for(let d in c){let p=this.readAttachment(c[d],u,h.index,d,n);p&&u.setAttachment(h.index,d,p)}}n.skins.push(u),u.name=="default"&&(n.defaultSkin=u)}for(let o=0,a=this.linkedMeshes.length;o<a;o++){let u=this.linkedMeshes[o],l=u.skin?n.findSkin(u.skin):n.defaultSkin;if(!l)throw new Error(`Skin not found: ${u.skin}`);let h=l.getAttachment(u.slotIndex,u.parent);if(!h)throw new Error(`Parent mesh not found: ${u.parent}`);u.mesh.timelineAttachment=u.inheritTimeline?h:u.mesh,u.mesh.setParentMesh(h),u.mesh.region!=null&&u.mesh.updateRegion()}if(this.linkedMeshes.length=0,i.events)for(let o in i.events){let a=i.events[o],u=new z3(o);u.intValue=G(a,"int",0),u.floatValue=G(a,"float",0),u.stringValue=G(a,"string",""),u.audioPath=G(a,"audio",null),u.audioPath&&(u.volume=G(a,"volume",1),u.balance=G(a,"balance",0)),n.events.push(u)}if(i.animations)for(let o in i.animations){let a=i.animations[o];this.readAnimation(a,o,n)}return n}readAttachment(e,t,n,i,s){let o=this.scale;switch(i=G(e,"name",i),G(e,"type","region")){case"region":{let a=G(e,"path",i),u=this.readSequence(G(e,"sequence",null)),l=this.attachmentLoader.newRegionAttachment(t,i,a,u);if(!l)return null;l.path=a,l.x=G(e,"x",0)*o,l.y=G(e,"y",0)*o,l.scaleX=G(e,"scaleX",1),l.scaleY=G(e,"scaleY",1),l.rotation=G(e,"rotation",0),l.width=e.width*o,l.height=e.height*o,l.sequence=u;let h=G(e,"color",null);return h&&l.color.setFromString(h),l.region!=null&&l.updateRegion(),l}case"boundingbox":{let a=this.attachmentLoader.newBoundingBoxAttachment(t,i);if(!a)return null;this.readVertices(e,a,e.vertexCount<<1);let u=G(e,"color",null);return u&&a.color.setFromString(u),a}case"mesh":case"linkedmesh":{let a=G(e,"path",i),u=this.readSequence(G(e,"sequence",null)),l=this.attachmentLoader.newMeshAttachment(t,i,a,u);if(!l)return null;l.path=a;let h=G(e,"color",null);h&&l.color.setFromString(h),l.width=G(e,"width",0)*o,l.height=G(e,"height",0)*o,l.sequence=u;let c=G(e,"parent",null);if(c)return this.linkedMeshes.push(new z9(l,G(e,"skin",null),n,c,G(e,"timelines",!0))),l;let d=e.uvs;return this.readVertices(e,l,d.length),l.triangles=e.triangles,l.regionUVs=d,l.region!=null&&l.updateRegion(),l.edges=G(e,"edges",null),l.hullLength=G(e,"hull",0)*2,l}case"path":{let a=this.attachmentLoader.newPathAttachment(t,i);if(!a)return null;a.closed=G(e,"closed",!1),a.constantSpeed=G(e,"constantSpeed",!0);let u=e.vertexCount;this.readVertices(e,a,u<<1);let l=pe.newArray(u/3,0);for(let c=0;c<e.lengths.length;c++)l[c]=e.lengths[c]*o;a.lengths=l;let h=G(e,"color",null);return h&&a.color.setFromString(h),a}case"point":{let a=this.attachmentLoader.newPointAttachment(t,i);if(!a)return null;a.x=G(e,"x",0)*o,a.y=G(e,"y",0)*o,a.rotation=G(e,"rotation",0);let u=G(e,"color",null);return u&&a.color.setFromString(u),a}case"clipping":{let a=this.attachmentLoader.newClippingAttachment(t,i);if(!a)return null;let u=G(e,"end",null);u&&(a.endSlot=s.findSlot(u));let l=e.vertexCount;this.readVertices(e,a,l<<1);let h=G(e,"color",null);return h&&a.color.setFromString(h),a}}return null}readSequence(e){if(e==null)return null;let t=new eg(G(e,"count",0));return t.start=G(e,"start",1),t.digits=G(e,"digits",0),t.setupIndex=G(e,"setup",0),t}readVertices(e,t,n){let i=this.scale;t.worldVerticesLength=n;let s=e.vertices;if(n==s.length){let u=pe.toFloatArray(s);if(i!=1)for(let l=0,h=s.length;l<h;l++)u[l]*=i;t.vertices=u;return}let o=new Array,a=new Array;for(let u=0,l=s.length;u<l;){let h=s[u++];a.push(h);for(let c=u+h*4;u<c;u+=4)a.push(s[u]),o.push(s[u+1]*i),o.push(s[u+2]*i),o.push(s[u+3])}t.bones=a,t.vertices=pe.toFloatArray(o)}readAnimation(e,t,n){let i=this.scale,s=new Array;if(e.slots)for(let a in e.slots){let u=e.slots[a],l=n.findSlot(a);if(!l)throw new Error("Slot not found: "+a);let h=l.index;for(let c in u){let d=u[c];if(!d)continue;let p=d.length;if(c=="attachment"){let g=new bu(p,h);for(let v=0;v<p;v++){let x=d[v];g.setFrame(v,G(x,"time",0),G(x,"name",null))}s.push(g)}else if(c=="rgba"){let g=new b3(p,p<<2,h),v=d[0],x=G(v,"time",0),y=Xe.fromString(v.color);for(let w=0,_=0;;w++){g.setFrame(w,x,y.r,y.g,y.b,y.a);let S=d[w+1];if(!S){g.shrink(_);break}let I=G(S,"time",0),A=Xe.fromString(S.color),k=v.curve;k&&(_=tt(k,g,_,w,0,x,I,y.r,A.r,1),_=tt(k,g,_,w,1,x,I,y.g,A.g,1),_=tt(k,g,_,w,2,x,I,y.b,A.b,1),_=tt(k,g,_,w,3,x,I,y.a,A.a,1)),x=I,y=A,v=S}s.push(g)}else if(c=="rgb"){let g=new S3(p,p*3,h),v=d[0],x=G(v,"time",0),y=Xe.fromString(v.color);for(let w=0,_=0;;w++){g.setFrame(w,x,y.r,y.g,y.b);let S=d[w+1];if(!S){g.shrink(_);break}let I=G(S,"time",0),A=Xe.fromString(S.color),k=v.curve;k&&(_=tt(k,g,_,w,0,x,I,y.r,A.r,1),_=tt(k,g,_,w,1,x,I,y.g,A.g,1),_=tt(k,g,_,w,2,x,I,y.b,A.b,1)),x=I,y=A,v=S}s.push(g)}else if(c=="alpha")s.push(_i(d,new T3(p,p,h),0,1));else if(c=="rgba2"){let g=new E3(p,p*7,h),v=d[0],x=G(v,"time",0),y=Xe.fromString(v.light),w=Xe.fromString(v.dark);for(let _=0,S=0;;_++){g.setFrame(_,x,y.r,y.g,y.b,y.a,w.r,w.g,w.b);let I=d[_+1];if(!I){g.shrink(S);break}let A=G(I,"time",0),k=Xe.fromString(I.light),M=Xe.fromString(I.dark),O=v.curve;O&&(S=tt(O,g,S,_,0,x,A,y.r,k.r,1),S=tt(O,g,S,_,1,x,A,y.g,k.g,1),S=tt(O,g,S,_,2,x,A,y.b,k.b,1),S=tt(O,g,S,_,3,x,A,y.a,k.a,1),S=tt(O,g,S,_,4,x,A,w.r,M.r,1),S=tt(O,g,S,_,5,x,A,w.g,M.g,1),S=tt(O,g,S,_,6,x,A,w.b,M.b,1)),x=A,y=k,w=M,v=I}s.push(g)}else if(c=="rgb2"){let g=new P3(p,p*6,h),v=d[0],x=G(v,"time",0),y=Xe.fromString(v.light),w=Xe.fromString(v.dark);for(let _=0,S=0;;_++){g.setFrame(_,x,y.r,y.g,y.b,w.r,w.g,w.b);let I=d[_+1];if(!I){g.shrink(S);break}let A=G(I,"time",0),k=Xe.fromString(I.light),M=Xe.fromString(I.dark),O=v.curve;O&&(S=tt(O,g,S,_,0,x,A,y.r,k.r,1),S=tt(O,g,S,_,1,x,A,y.g,k.g,1),S=tt(O,g,S,_,2,x,A,y.b,k.b,1),S=tt(O,g,S,_,3,x,A,w.r,M.r,1),S=tt(O,g,S,_,4,x,A,w.g,M.g,1),S=tt(O,g,S,_,5,x,A,w.b,M.b,1)),x=A,y=k,w=M,v=I}s.push(g)}}}if(e.bones)for(let a in e.bones){let u=e.bones[a],l=n.findBone(a);if(!l)throw new Error("Bone not found: "+a);let h=l.index;for(let c in u){let d=u[c],p=d.length;if(p!=0){if(c==="rotate")s.push(_i(d,new tg(p,p,h),0,1));else if(c==="translate"){let g=new d3(p,p<<1,h);s.push(zy(d,g,"x","y",0,i))}else if(c==="translatex"){let g=new f3(p,p,h);s.push(_i(d,g,0,i))}else if(c==="translatey"){let g=new p3(p,p,h);s.push(_i(d,g,0,i))}else if(c==="scale"){let g=new m3(p,p<<1,h);s.push(zy(d,g,"x","y",1,1))}else if(c==="scalex"){let g=new g3(p,p,h);s.push(_i(d,g,1,1))}else if(c==="scaley"){let g=new v3(p,p,h);s.push(_i(d,g,1,1))}else if(c==="shear"){let g=new y3(p,p<<1,h);s.push(zy(d,g,"x","y",0,1))}else if(c==="shearx"){let g=new x3(p,p,h);s.push(_i(d,g,0,1))}else if(c==="sheary"){let g=new _3(p,p,h);s.push(_i(d,g,0,1))}else if(c==="inherit"){let g=new w3(p,l.index);for(let v=0;v<d.length;v++){let x=d[v];g.setFrame(v,G(x,"time",0),pe.enumValue(Bt,G(x,"inherit","Normal")))}s.push(g)}}}}if(e.ik)for(let a in e.ik){let u=e.ik[a],l=u[0];if(!l)continue;let h=n.findIkConstraint(a);if(!h)throw new Error("IK Constraint not found: "+a);let c=n.ikConstraints.indexOf(h),d=new A3(u.length,u.length<<1,c),p=G(l,"time",0),g=G(l,"mix",1),v=G(l,"softness",0)*i;for(let x=0,y=0;;x++){d.setFrame(x,p,g,v,G(l,"bendPositive",!0)?1:-1,G(l,"compress",!1),G(l,"stretch",!1));let w=u[x+1];if(!w){d.shrink(y);break}let _=G(w,"time",0),S=G(w,"mix",1),I=G(w,"softness",0)*i,A=l.curve;A&&(y=tt(A,d,y,x,0,p,_,g,S,1),y=tt(A,d,y,x,1,p,_,v,I,i)),p=_,g=S,v=I,l=w}s.push(d)}if(e.transform)for(let a in e.transform){let u=e.transform[a],l=u[0];if(!l)continue;let h=n.findTransformConstraint(a);if(!h)throw new Error("Transform constraint not found: "+a);let c=n.transformConstraints.indexOf(h),d=new k3(u.length,u.length*6,c),p=G(l,"time",0),g=G(l,"mixRotate",1),v=G(l,"mixX",1),x=G(l,"mixY",v),y=G(l,"mixScaleX",1),w=G(l,"mixScaleY",y),_=G(l,"mixShearY",1);for(let S=0,I=0;;S++){d.setFrame(S,p,g,v,x,y,w,_);let A=u[S+1];if(!A){d.shrink(I);break}let k=G(A,"time",0),M=G(A,"mixRotate",1),O=G(A,"mixX",1),F=G(A,"mixY",O),U=G(A,"mixScaleX",1),H=G(A,"mixScaleY",U),L=G(A,"mixShearY",1),N=l.curve;N&&(I=tt(N,d,I,S,0,p,k,g,M,1),I=tt(N,d,I,S,1,p,k,v,O,1),I=tt(N,d,I,S,2,p,k,x,F,1),I=tt(N,d,I,S,3,p,k,y,U,1),I=tt(N,d,I,S,4,p,k,w,H,1),I=tt(N,d,I,S,5,p,k,_,L,1)),p=k,g=M,v=O,x=F,y=U,w=H,y=U,l=A}s.push(d)}if(e.path)for(let a in e.path){let u=e.path[a],l=n.findPathConstraint(a);if(!l)throw new Error("Path constraint not found: "+a);let h=n.pathConstraints.indexOf(l);for(let c in u){let d=u[c],p=d[0];if(!p)continue;let g=d.length;if(c==="position"){let v=new I3(g,g,h);s.push(_i(d,v,0,l.positionMode==Ps.Fixed?i:1))}else if(c==="spacing"){let v=new M3(g,g,h);s.push(_i(d,v,0,l.spacingMode==hr.Length||l.spacingMode==hr.Fixed?i:1))}else if(c==="mix"){let v=new R3(g,g*3,h),x=G(p,"time",0),y=G(p,"mixRotate",1),w=G(p,"mixX",1),_=G(p,"mixY",w);for(let S=0,I=0;;S++){v.setFrame(S,x,y,w,_);let A=d[S+1];if(!A){v.shrink(I);break}let k=G(A,"time",0),M=G(A,"mixRotate",1),O=G(A,"mixX",1),F=G(A,"mixY",O),U=p.curve;U&&(I=tt(U,v,I,S,0,x,k,y,M,1),I=tt(U,v,I,S,1,x,k,w,O,1),I=tt(U,v,I,S,2,x,k,_,F,1)),x=k,y=M,w=O,_=F,p=A}s.push(v)}}}if(e.physics)for(let a in e.physics){let u=e.physics[a],l=-1;if(a.length>0){let h=n.findPhysicsConstraint(a);if(!h)throw new Error("Physics constraint not found: "+a);l=n.physicsConstraints.indexOf(h)}for(let h in u){let c=u[h],d=c[0];if(!d)continue;let p=c.length;if(h=="reset"){const v=new rg(p,l);for(let x=0;d!=null;d=c[x+1],x++)v.setFrame(x,G(d,"time",0));s.push(v);continue}let g;if(h=="inertia")g=new O3(p,p,l);else if(h=="strength")g=new N3(p,p,l);else if(h=="damping")g=new B3(p,p,l);else if(h=="mass")g=new L3(p,p,l);else if(h=="wind")g=new F3(p,p,l);else if(h=="gravity")g=new D3(p,p,l);else if(h=="mix")g=new U3(p,p,l);else continue;s.push(_i(c,g,0,1))}}if(e.attachments)for(let a in e.attachments){let u=e.attachments[a],l=n.findSkin(a);if(!l)throw new Error("Skin not found: "+a);for(let h in u){let c=u[h],d=n.findSlot(h);if(!d)throw new Error("Slot not found: "+h);let p=d.index;for(let g in c){let v=c[g],x=l.getAttachment(p,g);for(let y in v){let w=v[y],_=w[0];if(_){if(y=="deform"){let S=x.bones,I=x.vertices,A=S?I.length/3*2:I.length,k=new C3(w.length,w.length,p,x),M=G(_,"time",0);for(let O=0,F=0;;O++){let U,H=G(_,"vertices",null);if(!H)U=S?pe.newFloatArray(A):I;else{U=pe.newFloatArray(A);let Y=G(_,"offset",0);if(pe.arrayCopy(H,0,U,Y,H.length),i!=1)for(let K=Y,X=K+H.length;K<X;K++)U[K]*=i;if(!S)for(let K=0;K<A;K++)U[K]+=I[K]}k.setFrame(O,M,U);let L=w[O+1];if(!L){k.shrink(F);break}let N=G(L,"time",0),j=_.curve;j&&(F=tt(j,k,F,O,0,M,N,0,1,1)),M=N,_=L}s.push(k)}else if(y=="sequence"){let S=new ng(w.length,p,x),I=0;for(let A=0;A<w.length;A++){let k=G(_,"delay",I),M=G(_,"time",0),O=kr[G(_,"mode","hold")],F=G(_,"index",0);S.setFrame(A,M,O,F,k),I=k,_=w[A+1]}s.push(S)}}}}}}if(e.drawOrder){let a=new ul(e.drawOrder.length),u=n.slots.length,l=0;for(let h=0;h<e.drawOrder.length;h++,l++){let c=e.drawOrder[h],d=null,p=G(c,"offsets",null);if(p){d=pe.newArray(u,-1);let g=pe.newArray(u-p.length,0),v=0,x=0;for(let y=0;y<p.length;y++){let w=p[y],_=n.findSlot(w.slot);if(!_)throw new Error("Slot not found: "+_);let S=_.index;for(;v!=S;)g[x++]=v++;d[v+w.offset]=v++}for(;v<u;)g[x++]=v++;for(let y=u-1;y>=0;y--)d[y]==-1&&(d[y]=g[--x])}a.setFrame(l,G(c,"time",0),d)}s.push(a)}if(e.events){let a=new ud(e.events.length),u=0;for(let l=0;l<e.events.length;l++,u++){let h=e.events[l],c=n.findEvent(h.name);if(!c)throw new Error("Event not found: "+h.name);let d=new H3(pe.toSinglePrecision(G(h,"time",0)),c);d.intValue=G(h,"int",c.intValue),d.floatValue=G(h,"float",c.floatValue),d.stringValue=G(h,"string",c.stringValue),d.data.audioPath&&(d.volume=G(h,"volume",1),d.balance=G(h,"balance",0)),a.setFrame(u,d)}s.push(a)}let o=0;for(let a=0,u=s.length;a<u;a++)o=Math.max(o,s[a].getDuration());n.animations.push(new Kw(t,s,o))}}class z9{constructor(e,t,n,i,s){P(this,"parent");P(this,"skin");P(this,"slotIndex");P(this,"mesh");P(this,"inheritTimeline");this.mesh=e,this.skin=t,this.slotIndex=n,this.parent=i,this.inheritTimeline=s}}function _i(r,e,t,n){let i=r[0],s=G(i,"time",0),o=G(i,"value",t)*n,a=0;for(let u=0;;u++){e.setFrame(u,s,o);let l=r[u+1];if(!l)return e.shrink(a),e;let h=G(l,"time",0),c=G(l,"value",t)*n;i.curve&&(a=tt(i.curve,e,a,u,0,s,h,o,c,n)),s=h,o=c,i=l}}function zy(r,e,t,n,i,s){let o=r[0],a=G(o,"time",0),u=G(o,t,i)*s,l=G(o,n,i)*s,h=0;for(let c=0;;c++){e.setFrame(c,a,u,l);let d=r[c+1];if(!d)return e.shrink(h),e;let p=G(d,"time",0),g=G(d,t,i)*s,v=G(d,n,i)*s,x=o.curve;x&&(h=tt(x,e,h,c,0,a,p,u,g,s),h=tt(x,e,h,c,1,a,p,l,v,s)),a=p,u=g,l=v,o=d}}function tt(r,e,t,n,i,s,o,a,u,l){if(r=="stepped")return e.setStepped(n),t;let h=i<<2,c=r[h],d=r[h+1]*l,p=r[h+2],g=r[h+3]*l;return e.setBezier(t,n,i,s,a,c,d,p,g,o,u),t+1}function G(r,e,t){return r[e]!==void 0?r[e]:t}typeof Math.fround>"u"&&(Math.fround=function(r){return function(e){return r[0]=e,r[0]}}(new Float32Array(1)));const Vs=class Vs extends Z${constructor(t){super(t.resource.source);P(this,"texture");this.texture=Me.from(t)}static from(t){return Vs.textureMap.has(t)?Vs.textureMap.get(t):new Vs(t)}setFilters(t,n){this.texture.baseTexture.scaleMode=Vs.toPixiTextureFilter(t),this.texture.baseTexture.mipmap=Vs.toPixiMipMap(t)}setWraps(t,n){this.texture.baseTexture.wrapMode=Vs.toPixiTextureWrap(t)}dispose(){this.texture.destroy()}static toPixiTextureFilter(t){switch(t){case yr.Nearest:case yr.MipMapNearestLinear:case yr.MipMapNearestNearest:return ki.NEAREST;case yr.Linear:case yr.MipMapLinearLinear:case yr.MipMapLinearNearest:return ki.LINEAR;default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiMipMap(t){switch(t){case yr.Nearest:case yr.Linear:return li.OFF;case yr.MipMapNearestLinear:case yr.MipMapNearestNearest:case yr.MipMapLinearLinear:case yr.MipMapLinearNearest:return li.ON;default:throw new Error(`Unknown texture filter: ${String(t)}`)}}static toPixiTextureWrap(t){switch(t){case fo.ClampToEdge:return oi.CLAMP;case fo.MirroredRepeat:return oi.MIRRORED_REPEAT;case fo.Repeat:return oi.REPEAT;default:throw new Error(`Unknown texture wrap: ${String(t)}`)}}static toPixiBlending(t){switch(t){case aa.Normal:return Pe.NORMAL;case aa.Additive:return Pe.ADD;case aa.Multiply:return Pe.MULTIPLY;case aa.Screen:return Pe.SCREEN;default:throw new Error(`Unknown blendMode: ${String(t)}`)}}};P(Vs,"textureMap",new Map);let dc=Vs;const qs=class qs extends pl{constructor(){const t=new _d;t.getBuffer("aVertexPosition").static=!1,t.getBuffer("aTextureCoord").static=!1;const n=new tc(Me.EMPTY);super(t,n);P(this,"name","");P(this,"warnedTwoTint",!1)}updateFromSpineData(t,n,i,s,o,a,u,l){var y,w;this.texture=t.texture;const h=o/(l?12:8)*2,c=this.geometry.getBuffer("aTextureCoord");((y=c.data)==null?void 0:y.length)!==h&&(c.data=new Float32Array(h));const d=this.geometry.getBuffer("aVertexPosition");((w=d.data)==null?void 0:w.length)!==h&&(d.data=new Float32Array(h));let p=0,g=c.data,v=d.data;for(let _=0;_<o;_+=l?12:8){let S=_;v[p]=s[S++],v[p+1]=s[S++],S+=4,g[p]=s[S++],g[p+1]=s[S++],p+=2}l&&!this.warnedTwoTint&&(console.warn("DarkTint is not enabled by default. To enable use a DarkSlotMesh factory while creating the Spine object."),this.warnedTwoTint=!0),qs.auxColor[0]=s[2],qs.auxColor[1]=s[3],qs.auxColor[2]=s[4],qs.auxColor[3]=s[5],this.tint=qs.auxColor,this.alpha=qs.auxColor[3],this.blendMode=dc.toPixiBlending(n);const x=this.geometry.indexBuffer;if(x.data.length!==a.length)x.data=new Uint32Array(a);else{const _=x.data;for(let S=0;S<u;S++)_[S]=a[S]}this.name=i,c.update(),d.update(),x.update()}};P(qs,"auxColor",[0,0,0,0]);let y_=qs;class $9 extends As{constructor(e=!1){super();const t=new yt(void 0),n=new yt(void 0,!0),i=new yt(void 0,!0,!0);this.addAttribute("aVertexPosition",t,2,!1,Te.FLOAT),this.addAttribute("aTextureCoord",n,2,!1,Te.FLOAT),this.addIndex(i)}}const Y9=`
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,G9=`
varying vec2 vTextureCoord;
uniform vec4 uColor;
uniform vec4 uDarkColor;

uniform sampler2D uSampler;

void main(void)
{
	vec4 texColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor.a = texColor.a * uColor.a;
    gl_FragColor.rgb = ((texColor.a - 1.0) * uDarkColor.a + 1.0 - texColor.rgb) * uDarkColor.rgb + texColor.rgb * uColor.rgb;
}
`;class W9 extends Bi{constructor(t){const n={uSampler:t??Me.EMPTY,alpha:1,uTextureMatrix:wt.IDENTITY,uColor:new Float32Array([1,1,1,1]),uDarkColor:new Float32Array([0,0,0,0])},i={tint:16777215,darkTint:0,alpha:1,pluginName:"darkTintBatch"};super(_s.from(Y9,G9),n);P(this,"uvMatrix");P(this,"batchable");P(this,"pluginName");P(this,"_tintRGB");P(this,"_darkTintRGB");P(this,"_colorDirty");P(this,"_alpha");P(this,"_tintColor");P(this,"_darkTintColor");this._colorDirty=!1,this.uvMatrix=new Mg(n.uSampler),this.batchable=!0,this.pluginName=i.pluginName,this._tintColor=new ot(i.tint),this._darkTintColor=new ot(i.darkTint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._darkTintRGB=this._darkTintColor.toLittleEndianNumber(),this._alpha=i.alpha,this._colorDirty=!0}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}set darkTint(t){t!==this.darkTint&&(this._darkTintColor.setValue(t),this._darkTintRGB=this._darkTintColor.toLittleEndianNumber(),this._colorDirty=!0)}get darkTint(){return this._darkTintColor.value}get tintValue(){return this._tintColor.toNumber()}get darkTintValue(){return this._darkTintColor.toNumber()}update(){this._colorDirty&&(this._colorDirty=!1,ot.shared.setValue(this._tintColor).premultiply(this._alpha,!0).toArray(this.uniforms.uColor),ot.shared.setValue(this._darkTintColor).premultiply(this._alpha,!0).premultiply(1,!1).toArray(this.uniforms.uDarkColor)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class V9 extends pl{constructor(t){super(new $9,new W9(t),void 0,void 0);P(this,"_darkTintRGB",0)}get darkTint(){return"darkTint"in this.shader?this.shader.darkTint:null}set darkTint(t){this.shader.darkTint=t}get darkTintValue(){return this.shader.darkTintValue}_renderToBatch(t){const n=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=i._tintRGB,this._darkTintRGB=i._darkTintRGB,this._texture=i.texture;const s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}}const sr=class sr extends V9{constructor(){super();P(this,"name","")}updateFromSpineData(t,n,i,s,o,a,u,l){var y,w;this.texture=t.texture;const h=o/(l?12:8)*2,c=this.geometry.getBuffer("aTextureCoord");((y=c.data)==null?void 0:y.length)!==h&&(c.data=new Float32Array(h));const d=this.geometry.getBuffer("aVertexPosition");((w=d.data)==null?void 0:w.length)!==h&&(d.data=new Float32Array(h));let p=0,g=c.data,v=d.data;for(let _=0;_<o;_+=l?12:8){let S=_;v[p]=s[S++],v[p+1]=s[S++],S+=4,g[p]=s[S++],g[p+1]=s[S++],p+=2}l?(sr.auxColor[0]=s[8],sr.auxColor[1]=s[9],sr.auxColor[2]=s[10],sr.auxColor[3]=s[11],this.darkTint=sr.auxColor,sr.auxColor[0]=s[2],sr.auxColor[1]=s[3],sr.auxColor[2]=s[4],sr.auxColor[3]=s[5],this.tint=sr.auxColor):(sr.auxColor[0]=s[2],sr.auxColor[1]=s[3],sr.auxColor[2]=s[4],sr.auxColor[3]=s[5],this.tint=sr.auxColor),this.blendMode=dc.toPixiBlending(n),this.alpha=sr.auxColor[3];const x=this.geometry.indexBuffer;if(x.data.length!==a.length)x.data=new Uint32Array(a);else{const _=x.data;for(let S=0;S<u;S++)_[S]=a[S]}this.name=i,c.update(),d.update(),x.update()}};P(sr,"auxColor",[0,0,0,0]);let x_=sr;var rt;let q9=(rt=class extends qr{constructor(t,n){super();P(this,"skeleton");P(this,"state");P(this,"_debug");P(this,"slotMeshFactory",()=>new y_);P(this,"beforeUpdateWorldTransforms",()=>{});P(this,"afterUpdateWorldTransforms",()=>{});P(this,"autoUpdateWarned",!1);P(this,"_autoUpdate",!0);P(this,"meshesCache",new Map);P(this,"lightColor",new Xe);P(this,"darkColor",new Xe);P(this,"slotsObject",new Map);P(this,"verticesCache",pe.newFloatArray(1024));P(this,"clippingSlotToPixiMasks",{});this.skeleton=new hc(t);const i=new Q$(t);this.state=new m_(i),this.autoUpdate=(n==null?void 0:n.autoUpdate)??!0,this.initializeMeshFactory(n),this.skeleton.setToSetupPose(),this.skeleton.updateWorldTransform(no.update)}get debug(){return this._debug}set debug(t){this._debug&&this._debug.unregisterSpine(this),t&&t.registerSpine(this),this._debug=t}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t?(Dt.shared.add(this.internalUpdate,this),this.autoUpdateWarned=!1):Dt.shared.remove(this.internalUpdate,this),this._autoUpdate=t}initializeMeshFactory(t){if(t!=null&&t.slotMeshFactory)this.slotMeshFactory=t==null?void 0:t.slotMeshFactory;else for(let n=0;n<this.skeleton.slots.length;n++)if(this.skeleton.slots[n].data.darkColor){this.slotMeshFactory=(t==null?void 0:t.slotMeshFactory)??(()=>new x_);break}}update(t){this.autoUpdate&&!this.autoUpdateWarned&&(console.warn("You are calling update on a Spine instance that has autoUpdate set to true. This is probably not what you want."),this.autoUpdateWarned=!0),this.internalUpdate(0,t)}internalUpdate(t,n){const i=n??Dt.shared.deltaMS/1e3;this.state.update(i),this.state.apply(this.skeleton),this.beforeUpdateWorldTransforms(this),this.skeleton.update(i),this.skeleton.updateWorldTransform(no.update),this.afterUpdateWorldTransforms(this)}updateTransform(){var t;this.renderMeshes(),this.sortChildren(),(t=this.debug)==null||t.renderDebug(this),super.updateTransform()}destroy(t){this.autoUpdate&&(this.autoUpdate=!1);for(const[,n]of this.meshesCache)n==null||n.destroy();this.state.clearListeners(),this.debug=void 0,this.meshesCache.clear(),this.slotsObject.clear();for(let n in this.clippingSlotToPixiMasks)this.clippingSlotToPixiMasks[n].destroy(),delete this.clippingSlotToPixiMasks[n];super.destroy(t)}resetMeshes(){for(const[,t]of this.meshesCache)t.zIndex=-1,t.visible=!1}getMeshForSlot(t){if(this.meshesCache.has(t)){let n=this.meshesCache.get(t);return n.visible=!0,n}else{let n=this.slotMeshFactory();return this.addChild(n),this.meshesCache.set(t,n),n}}getSlotFromRef(t){let n;if(typeof t=="number"?n=this.skeleton.slots[t]:typeof t=="string"?n=this.skeleton.findSlot(t):n=t,!n)throw new Error(`No slot found with the given slot reference: ${t}`);return n}addSlotObject(t,n){let i=this.getSlotFromRef(t),s=this.slotsObject.get(i);if(s!==n){for(const[o,a]of this.slotsObject)if(o!==i&&a===n){this.removeSlotObject(o,n);break}s&&this.removeChild(s),this.slotsObject.set(i,n),this.addChild(n)}}getSlotObject(t){return this.slotsObject.get(this.getSlotFromRef(t))}removeSlotObject(t,n){let i=this.getSlotFromRef(t),s=this.slotsObject.get(i);s&&(n&&n!==s||(this.removeChild(s),this.slotsObject.delete(i)))}pixiMaskCleanup(t){let n=this.clippingSlotToPixiMasks[t.data.name];n&&(delete this.clippingSlotToPixiMasks[t.data.name],n.destroy())}updatePixiObject(t,n,i){t.setTransform(n.bone.worldX,n.bone.worldY,n.bone.getWorldScaleX(),n.bone.getWorldScaleX(),n.bone.getWorldRotationX()*ue.degRad),t.zIndex=i+1,t.alpha=this.skeleton.color.a*n.color.a}updateAndSetPixiMask(t,n){if(rt.clipper.isClipping()&&t){let i=this.clippingSlotToPixiMasks[t.slot.data.name];if(i||(i=new Fu,this.clippingSlotToPixiMasks[t.slot.data.name]=i,this.addChild(i)),!t.computed){t.computed=!0;const s=t.slot.attachment,o=Array.from(s.vertices);s.computeWorldVertices(t.slot,0,s.worldVerticesLength,o,0,2),i.clear().lineStyle(0).beginFill(0).drawPolygon(o)}n.mask=i}else n.mask&&(n.mask=null)}renderMeshes(){var o,a;this.resetMeshes();let t=null,n=null,i=null;const s=this.skeleton.drawOrder;for(let u=0,l=s.length,h=0;u<l;u++){const c=s[u];let d=this.slotsObject.get(c),p=u+h;d&&(this.updatePixiObject(d,c,p+1),h++,this.updateAndSetPixiMask(i,d));const g=c.darkColor!=null,v=rt.clipper.isClipping()?2:g?rt.DARK_VERTEX_SIZE:rt.VERTEX_SIZE;if(!c.bone.active){rt.clipper.clipEndWithSlot(c),this.pixiMaskCleanup(c);continue}const x=c.getAttachment();let y,w,_=0;if(x instanceof cd){const S=x;y=S.color,_=v*4,S.computeWorldVertices(c,this.verticesCache,0,v),t=rt.QUAD_TRIANGLES,n=S.uvs,w=(o=S.region)==null?void 0:o.texture}else if(x instanceof _l){const S=x;y=S.color,_=(S.worldVerticesLength>>1)*v,_>this.verticesCache.length&&(this.verticesCache=pe.newFloatArray(_)),S.computeWorldVertices(c,0,S.worldVerticesLength,this.verticesCache,0,v),t=S.triangles,n=S.uvs,w=(a=S.region)==null?void 0:a.texture}else if(x instanceof Ad){rt.clipper.clipStart(c,x),i={slot:c,computed:!1};continue}else{rt.clipper.clipEndWithSlot(c),this.pixiMaskCleanup(c);continue}if(w!=null){const I=c.bone.skeleton.color,A=c.color,k=I.a*A.a*y.a;this.lightColor.set(I.r*A.r*y.r,I.g*A.g*y.g,I.b*A.b*y.b,k),c.darkColor!=null?this.darkColor.set(c.darkColor.r,c.darkColor.g,c.darkColor.b,1):this.darkColor.set(0,0,0,1);let M,O,F,U;if(rt.clipper.isClipping())rt.clipper.clipTriangles(this.verticesCache,t,t.length,n,this.lightColor,this.darkColor,g),M=rt.clipper.clippedVertices,O=M.length,F=rt.clipper.clippedTriangles,U=F.length;else{const L=this.verticesCache;for(let N=2,j=0,Y=_;N<Y;N+=v,j+=2){let K=N;L[K++]=this.lightColor.r,L[K++]=this.lightColor.g,L[K++]=this.lightColor.b,L[K++]=this.lightColor.a,L[K++]=n[j],L[K++]=n[j+1],g&&(L[K++]=this.darkColor.r,L[K++]=this.darkColor.g,L[K++]=this.darkColor.b,L[K++]=this.darkColor.a)}M=this.verticesCache,O=_,F=t,U=t.length}if(O==0||U==0){rt.clipper.clipEndWithSlot(c);continue}const H=this.getMeshForSlot(c);H.zIndex=p,H.updateFromSpineData(w,c.data.blendMode,c.data.name,M,O,F,U,g)}rt.clipper.clipEndWithSlot(c),this.pixiMaskCleanup(c)}rt.clipper.clipEnd()}setBonePosition(t,n){const i=t;if(typeof t=="string"&&(t=this.skeleton.findBone(t)),!t)throw Error(`Cannot set bone position, bone ${String(i)} not found`);if(rt.vectorAux.set(n.x,n.y),t.parent){const s=t.parent.worldToLocal(rt.vectorAux);t.x=s.x,t.y=s.y}else t.x=rt.vectorAux.x,t.y=rt.vectorAux.y}getBonePosition(t,n){const i=t;return typeof t=="string"&&(t=this.skeleton.findBone(t)),t?(n||(n={x:0,y:0}),n.x=t.worldX,n.y=t.worldY,n):(console.error(`Cannot get bone position! Bone ${String(i)} not found`),n)}skeletonToPixiWorldCoordinates(t){this.worldTransform.apply(t,t)}pixiWorldCoordinatesToSkeleton(t){this.worldTransform.applyInverse(t,t)}pixiWorldCoordinatesToBone(t,n){this.pixiWorldCoordinatesToSkeleton(t),n.parent?n.parent.worldToLocal(t):n.worldToLocal(t)}static from(t,n,i){const s=`${t}-${n}-${(i==null?void 0:i.scale)??1}`;let o=rt.skeletonCache[s];if(o)return new rt(o,i);const a=pn.get(t),u=pn.get(n),l=new n9(u);let h=a instanceof Uint8Array?new l9(l):new H9(l);return h.scale=(i==null?void 0:i.scale)??1,o=h.readSkeletonData(a),rt.skeletonCache[s]=o,new this(o,i)}get tint(){return this.skeleton.color.toRgb888()}set tint(t){Xe.rgb888ToColor(this.skeleton.color,t)}},P(rt,"vectorAux",new Jm),P(rt,"clipper",new ig),P(rt,"QUAD_TRIANGLES",[0,1,2,2,3,0]),P(rt,"VERTEX_SIZE",8),P(rt,"DARK_VERTEX_SIZE",12),P(rt,"skeletonCache",Object.create(null)),rt);hc.yDown=!0;const K9={extension:me.Asset,loader:{extension:{type:me.LoadParser,priority:jn.Normal,name:"spineTextureAtlasLoader"},test(r){return Nn(r,".atlas")},async load(r){return await(await _e.ADAPTER.fetch(r)).text()},testParse(r,e){const t=Nn(e.src,".atlas"),n=typeof r=="string";return Promise.resolve(t&&n)},unload(r){r.dispose()},async parse(r,e,t){var u;const n=e.data||{};let i=$t.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");const s=new e9(r);if(n.images instanceof De||typeof n.images=="string"){const l=n.images;n.images={},n.images[s.pages[0].name]=l}const o=[];let a=!0;for(const l of t.parsers)if(l.name=="loadTextures"){a=(u=l.config)==null?void 0:u.preferCreateImageBitmap;break}pn.setPreferences({preferCreateImageBitmap:!1});for(const l of s.pages){const h=l.name,c=n!=null&&n.images?n.images[h]:void 0;if(c instanceof De)l.setTexture(dc.from(c));else{const p={src:c??$t.normalize([...i.split($t.sep),h].join($t.sep)),data:{...n.imageMetadata,alphaMode:l.pma?$r.PMA:$r.UNPACK}},g=t.load(p).then(v=>{l.setTexture(dc.from(v.baseTexture))});o.push(g)}}return await Promise.all(o),pn.setPreferences({preferCreateImageBitmap:a}),s}}};Ee.add(K9);function Q9(r){return r.hasOwnProperty("bones")}function Z9(r){return r instanceof Uint8Array}const J9={extension:me.Asset,loader:{extension:{type:me.LoadParser,priority:jn.Normal},test(r){return Nn(r,".skel")},async load(r){const e=await _e.ADAPTER.fetch(r);return new Uint8Array(await e.arrayBuffer())},testParse(r,e){const t=Nn(e.src,".json")&&Q9(r),n=Nn(e.src,".skel")&&Z9(r);return Promise.resolve(t||n)}}};Ee.add(J9);class eY extends As{constructor(t=!1){super();P(this,"_buffer");P(this,"_indexBuffer");this._buffer=new yt(void 0,t,!1),this._indexBuffer=new yt(void 0,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Te.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Te.FLOAT).addAttribute("aColor",this._buffer,4,!0,Te.UNSIGNED_BYTE).addAttribute("aDarkColor",this._buffer,4,!0,Te.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Te.FLOAT).addIndex(this._indexBuffer)}}const tY=`
precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute vec4 aDarkColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec4 vDarkColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
    vDarkColor = aDarkColor * tint;

}
`,rY=`
varying vec2 vTextureCoord;
varying vec4 vColor;
varying vec4 vDarkColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%


    gl_FragColor.a = color.a * vColor.a;
    gl_FragColor.rgb = ((color.a - 1.0) * vDarkColor.a + 1.0 - color.rgb) * vDarkColor.rgb + color.rgb * vColor.rgb;
}
`;class K3 extends Go{constructor(e){super(e),this.shaderGenerator=new RA(tY,rY),this.geometryClass=eY,this.vertexSize=7}packInterleavedGeometry(e,t,n,i,s){const{uint32View:o,float32View:a}=t,u=i/this.vertexSize,l=e.uvs,h=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,p=Math.min(e.worldAlpha,1),g=ot.shared.setValue(e._tintRGB).toPremultiplied(p,!0),v=ot.shared.setValue(e._darkTintRGB).premultiply(p,!0).toPremultiplied(1,!1);for(let x=0;x<c.length;x+=2)a[i++]=c[x],a[i++]=c[x+1],a[i++]=l[x],a[i++]=l[x+1],o[i++]=g,o[i++]=v,a[i++]=d;for(let x=0;x<h.length;x++)n[s++]=u+h[x]}}P(K3,"extension",{name:"darkTintBatch",type:me.RendererPlugin});Ee.add(K3);const nY=Rt.PixiComponent("Spine",{create:({atlas:r,skel:e})=>q9.from(e,r,{autoUpdate:!1}),didMount:(r,e)=>{},willUnmount:(r,e)=>{r.state.clearListeners()},applyProps:(r,e,t)=>{const{onComplete:n,event:i,...s}=t;Rt.applyDefaultProps(r,e,s),r.state.clearListeners(),r.state.addListener({complete:n,event:i})},config:{destroy:!0,destroyChildren:!0}}),Tc=B.forwardRef((r,e)=>{const{children:t,atlas:n,skel:i,tint:s=16777215,onComplete:o,event:a,playing:u=!1,action:l,actions:h,skin:c,timeScale:d=1,toFrameOneWhenStop:p,turbo:g=!1,...v}=r,x=B.useRef(),{current:y}=B.useRef({updateTime:0});return Pd((w,_)=>{y.updateTime+=w/1e3,y.updateTime>.03&&(x.current&&x.current.update(y.updateTime),y.updateTime=0)},u,g),B.useEffect(()=>{l&&(x.current.state.setAnimation(...l),c&&x.current.skeleton.setSkinByName(c),x.current.update(0))},[l]),B.useEffect(()=>{x.current.update(0)},[s]),B.useEffect(()=>{if(h){const w=h[0];w&&(x.current.state.setAnimation(...w),x.current.update(0));for(let _=1;_<h.length;_++)x.current.state.addAnimation(...h[_],0)}},[u,h]),B.useEffect(()=>{!u&&p&&l&&(x.current.state.setAnimation(...l),x.current.update(0))},[u]),B.useEffect(()=>{c&&(x.current.skeleton.setSkinByName(c),x.current.skeleton.setSlotsToSetupPose(),x.current.update(0))},[c]),B.useEffect(()=>{x.current.state.timeScale=d},[d]),B.useImperativeHandle(e,()=>x.current,[x]),T.jsx(ge,{...v,children:T.jsx(nY,{ref:x,skel:i,atlas:n,tint:s,onComplete:o,event:a})})});B.forwardRef(({onLoop:r,onRepeatComplete:e,repeat:t,...n},i)=>{const{current:s}=B.useRef({loopTimes:0}),o=n.playing;function a(u){n.onComplete&&n.onComplete(u),s.loopTimes++;const l=s.loopTimes;t==l&&e&&e(),r&&r(l)}return B.useEffect(()=>{s.loopTimes=0},[n.action,n.actions,o,n.id]),T.jsx(Tc,{ref:i,...n,onComplete:a})});function kd(r,e,t,n){return B.forwardRef((i,s)=>T.jsx(r,{ref:s,atlas:t,skel:e,...n,...i}))}const Ta=kd(Tc,JR,e3,{skin:Be.Obj.urlOptions.lang==co.Chinese?"CH":"EN"}),iY=kd(Tc,n3,i3),sY=kd(Tc,s3,o3),oY=kd(Tc,t3,r3),aY=kd(Tc,a3,l3),sg=B.forwardRef(({children:r,enable:e=!0,click:t,...n},i)=>{const s=o_(t,300,[]),o={};return o.ontouchend=s||null,o.click=s,T.jsx(ge,{cursor:"pointer",interactive:e,...o,...n,ref:i,children:r})}),lY=1e3;function Q3({children:r,enable:e=!0,onpointerup:t,onLongPress:n,...i}){const{isMobile:s,isTablet:o}=Be.Obj,[a,u]=B.useState(0),[l,h]=B.useState(!1),[c,d]=B.useState(!1);function p(y){h(!0),u(Date.now())}function g(){d(!1),u(0),h(!1)}function v(y){(!n||!c)&&t&&t(y),g()}Rt.useTick(()=>{!c&&Date.now()-a>=lY&&(d(!0),n&&n())},a>0&&!c);const x={};return s||o?(x.ontouchstart=p,x.ontouchend=v,x.ontouchcancel=g,x.ontouchendoutside=g):(x.onmousedown=p,x.onmouseup=v,x.onmouseout=g,x.onmouseupoutside=g),T.jsx(ge,{cursor:"pointer",interactive:e,...i,...x,children:T.jsx(ge,{scale:l?.9:1,children:r})})}const po=VR(sg);VR(Q3,"onpointerup");function uY({dataSource:r,isP:e,...t}){const{gameStatus:n,state:i,dispatch:s}=r.base,{betLevel:o,spinModel:a}=i.spin,u=i.spin.autoSpinCount=="∞"||i.spin.autoSpinCount>0,l=n=="idle"&&(!a||!a.isExistRespin)&&!u,h=l?16777215:8421504,c=o.toNumber();return T.jsx(ge,{...t,children:[10,15,20].map((d,p)=>T.jsxs(po,{x:p*(e?150:85),click:()=>{s(c_(d))},scale:.8,enable:l,children:[T.jsx(oY,{x:335,y:-190,visible:d==c,playing:d==c,scale:.4,skin:`${d}`,action:fr([0,"selected_Level",!0])}),T.jsx(lt,{visible:d!=c,tint:h,anchor:.5,scale:.9,name:`bet_${d}.png`})]},`bet_level_${p}`))})}const __=B.forwardRef(({maxScaleLength:r,...e},t)=>{const n=B.useRef();return B.useEffect(()=>{if(r&&n.current){const i=setTimeout(()=>{const s=n.current.width,o=n.current.scale.x,a=r/s*o,u=o>0?1:-1,l=n.current.scale.y>0?1:-1;a<1?n.current.scale.set(a*u,a*l):n.current.scale.x!=1&&n.current.scale.set(1*u,1*l),clearTimeout(i)},1)}},[e.text]),B.useImperativeHandle(t,()=>n.current,[n]),T.jsx(Rt.BitmapText,{ref:n,...e})});/*!
 * @pixi/particle-emitter - v5.0.8
 * Compiled Mon, 28 Nov 2022 04:01:38 UTC
 *
 * @pixi/particle-emitter is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */class bs{constructor(e,t,n){this.value=e,this.time=t,this.next=null,this.isStepped=!1,n?this.ease=typeof n=="function"?n:eO(n):this.ease=null}static createList(e){if("list"in e){const n=e.list;let i;const{value:s,time:o}=n[0],a=i=new bs(typeof s=="string"?xp(s):s,o,e.ease);if(n.length>2||n.length===2&&n[1].value!==s)for(let u=1;u<n.length;++u){const{value:l,time:h}=n[u];i.next=new bs(typeof l=="string"?xp(l):l,h),i=i.next}return a.isStepped=!!e.isStepped,a}const t=new bs(typeof e.start=="string"?xp(e.start):e.start,0);return e.end!==e.start&&(t.next=new bs(typeof e.end=="string"?xp(e.end):e.end,1)),t}}let hd=Me.from;const xs=Math.PI/180;function mo(r,e){if(!r)return;const t=Math.sin(r),n=Math.cos(r),i=e.x*n-e.y*t,s=e.x*t+e.y*n;e.x=i,e.y=s}function t0(r,e,t){return r<<16|e<<8|t}function Z3(r){return Math.sqrt(r.x*r.x+r.y*r.y)}function cY(r){const e=1/Z3(r);r.x*=e,r.y*=e}function J3(r,e){r.x*=e,r.y*=e}function xp(r,e){e||(e={}),r.charAt(0)==="#"?r=r.substr(1):r.indexOf("0x")===0&&(r=r.substr(2));let t;return r.length===8&&(t=r.substr(0,2),r=r.substr(2)),e.r=parseInt(r.substr(0,2),16),e.g=parseInt(r.substr(2,2),16),e.b=parseInt(r.substr(4,2),16),t&&(e.a=parseInt(t,16)),e}function eO(r){const e=r.length,t=1/e;return function(n){const i=e*n|0,s=(n-i*t)*e,o=r[i]||r[e-1];return o.s+s*(2*(1-s)*(o.cp-o.s)+s*(o.e-o.s))}}function hY(r){return r?(r=r.toUpperCase().replace(/ /g,"_"),Pe[r]||Pe.NORMAL):Pe.NORMAL}class $y extends Yi{constructor(e){super(),this.prevChild=this.nextChild=null,this.emitter=e,this.config={},this.anchor.x=this.anchor.y=.5,this.maxLife=0,this.age=0,this.agePercent=0,this.oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.kill=this.kill}init(e){this.maxLife=e,this.age=this.agePercent=0,this.rotation=0,this.position.x=this.position.y=0,this.scale.x=this.scale.y=1,this.tint=16777215,this.alpha=1,this.oneOverLife=1/this.maxLife,this.visible=!0}kill(){this.emitter.recycle(this)}destroy(){this.parent&&this.parent.removeChild(this),this.emitter=this.next=this.prev=null,super.destroy()}}var bt;(function(r){r[r.Spawn=0]="Spawn",r[r.Normal=2]="Normal",r[r.Late=5]="Late"})(bt||(bt={}));const Yy=Dt.shared,$a=Symbol("Position particle per emitter position");class dt{constructor(e,t){this.initBehaviors=[],this.updateBehaviors=[],this.recycleBehaviors=[],this.minLifetime=0,this.maxLifetime=0,this.customEase=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=new je,this.particlesPerWave=1,this.rotation=0,this.ownerPos=new je,this._prevEmitterPos=new je,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=e,t&&this.init(t),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}static registerBehavior(e){dt.knownBehaviors[e.type]=e}get frequency(){return this._frequency}set frequency(e){typeof e=="number"&&e>0?this._frequency=e:this._frequency=1}get parent(){return this._parent}set parent(e){this.cleanup(),this._parent=e}init(e){if(!e)return;this.cleanup(),this._origConfig=e,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,e.ease?this.customEase=typeof e.ease=="function"?e.ease:eO(e.ease):this.customEase=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.frequency=e.frequency,this.spawnChance=typeof e.spawnChance=="number"&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos.set(0),e.pos?this.spawnPos.copyFrom(e.pos):this.spawnPos.set(0),this._prevEmitterPos.copyFrom(this.spawnPos),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=e.emit===void 0?!0:!!e.emit,this.autoUpdate=!!e.autoUpdate;const t=e.behaviors.map(n=>{const i=dt.knownBehaviors[n.type];return i?new i(n.config):(console.error(`Unknown behavior: ${n.type}`),null)}).filter(n=>!!n);t.push($a),t.sort((n,i)=>n===$a?i.order===bt.Spawn?1:-1:i===$a?n.order===bt.Spawn?-1:1:n.order-i.order),this.initBehaviors=t.slice(),this.updateBehaviors=t.filter(n=>n!==$a&&n.updateParticle),this.recycleBehaviors=t.filter(n=>n!==$a&&n.recycleParticle)}getBehavior(e){return dt.knownBehaviors[e]&&this.initBehaviors.find(t=>t instanceof dt.knownBehaviors[e])||null}fillPool(e){for(;e>0;--e){const t=new $y(this);t.next=this._poolFirst,this._poolFirst=t}}recycle(e,t=!1){for(let n=0;n<this.recycleBehaviors.length;++n)this.recycleBehaviors[n].recycleParticle(e,!t);e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next),e===this._activeParticlesLast&&(this._activeParticlesLast=e.prev),e===this._activeParticlesFirst&&(this._activeParticlesFirst=e.next),e.prev=null,e.next=this._poolFirst,this._poolFirst=e,e.parent&&e.parent.removeChild(e),--this.particleCount}rotate(e){if(this.rotation===e)return;const t=e-this.rotation;this.rotation=e,mo(t,this.spawnPos),this._posChanged=!0}updateSpawnPos(e,t){this._posChanged=!0,this.spawnPos.x=e,this.spawnPos.y=t}updateOwnerPos(e,t){this._posChanged=!0,this.ownerPos.x=e,this.ownerPos.y=t}resetPositionTracking(){this._prevPosIsValid=!1}get emit(){return this._emit}set emit(e){this._emit=!!e,this._emitterLife=this.emitterLifetime}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){this._autoUpdate&&!e?Yy.remove(this.update,this):!this._autoUpdate&&e&&Yy.add(this.update,this),this._autoUpdate=!!e}playOnceAndDestroy(e){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=e}playOnce(e){this.emit=!0,this._completeCallback=e}update(e){if(this._autoUpdate&&(e=Yy.elapsedMS*.001),!this._parent)return;for(let o=this._activeParticlesFirst,a;o;o=a)if(a=o.next,o.age+=e,o.age>o.maxLife||o.age<0)this.recycle(o);else{let u=o.age*o.oneOverLife;this.customEase&&(this.customEase.length===4?u=this.customEase(u,0,1,1):u=this.customEase(u)),o.agePercent=u;for(let l=0;l<this.updateBehaviors.length;++l)if(this.updateBehaviors[l].updateParticle(o,e)){this.recycle(o);break}}let t,n;this._prevPosIsValid&&(t=this._prevEmitterPos.x,n=this._prevEmitterPos.y);const i=this.ownerPos.x+this.spawnPos.x,s=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=e<0?0:e;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles){this._spawnTimer+=this._frequency;continue}let o,a;if(this._prevPosIsValid&&this._posChanged){const h=1+this._spawnTimer/e;o=(i-t)*h+t,a=(s-n)*h+n}else o=i,a=s;let u=null,l=null;for(let h=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),c=0;c<h;++c){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let d;if(this.minLifetime===this.maxLifetime?d=this.minLifetime:d=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer>=d)continue;let p;this._poolFirst?(p=this._poolFirst,this._poolFirst=this._poolFirst.next,p.next=null):p=new $y(this),p.init(d),this.addAtBack?this._parent.addChildAt(p,0):this._parent.addChild(p),u?(l.next=p,p.prev=l,l=p):l=u=p,++this.particleCount}if(u){this._activeParticlesLast?(this._activeParticlesLast.next=u,u.prev=this._activeParticlesLast,this._activeParticlesLast=l):(this._activeParticlesFirst=u,this._activeParticlesLast=l);for(let h=0;h<this.initBehaviors.length;++h){const c=this.initBehaviors[h];if(c===$a)for(let d=u,p;d;d=p){p=d.next,this.rotation!==0&&(mo(this.rotation,d.position),d.rotation+=this.rotation),d.position.x+=o,d.position.y+=a,d.age+=-this._spawnTimer;let g=d.age*d.oneOverLife;this.customEase&&(this.customEase.length===4?g=this.customEase(g,0,1,1):g=this.customEase(g)),d.agePercent=g}else c.initParticles(u)}for(let h=u,c;h;h=c){c=h.next;for(let d=0;d<this.updateBehaviors.length;++d)if(this.updateBehaviors[d].updateParticle(h,-this._spawnTimer)){this.recycle(h);break}}}this._spawnTimer+=this._frequency}if(this._posChanged&&(this._prevEmitterPos.x=i,this._prevEmitterPos.y=s,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){const o=this._completeCallback;this._completeCallback=null,o()}this._destroyWhenComplete&&this.destroy()}}emitNow(){const e=this.ownerPos.x+this.spawnPos.x,t=this.ownerPos.y+this.spawnPos.y;let n=null,i=null;for(let s=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount),o=0;o<s;++o){if(this.spawnChance<1&&Math.random()>=this.spawnChance)continue;let a;this._poolFirst?(a=this._poolFirst,this._poolFirst=this._poolFirst.next,a.next=null):a=new $y(this);let u;this.minLifetime===this.maxLifetime?u=this.minLifetime:u=Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,a.init(u),this.addAtBack?this._parent.addChildAt(a,0):this._parent.addChild(a),n?(i.next=a,a.prev=i,i=a):i=n=a,++this.particleCount}if(n){this._activeParticlesLast?(this._activeParticlesLast.next=n,n.prev=this._activeParticlesLast,this._activeParticlesLast=i):(this._activeParticlesFirst=n,this._activeParticlesLast=i);for(let s=0;s<this.initBehaviors.length;++s){const o=this.initBehaviors[s];if(o===$a)for(let a=n,u;a;a=u)u=a.next,this.rotation!==0&&(mo(this.rotation,a.position),a.rotation+=this.rotation),a.position.x+=e,a.position.y+=t;else o.initParticles(n)}}}cleanup(){let e,t;for(e=this._activeParticlesFirst;e;e=t)t=e.next,this.recycle(e,!0);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0}get destroyed(){return!(this._parent&&this.initBehaviors.length)}destroy(){this.autoUpdate=!1,this.cleanup();let e;for(let t=this._poolFirst;t;t=e)e=t.next,t.destroy();this._poolFirst=this._parent=this.spawnPos=this.ownerPos=this.customEase=this._completeCallback=null,this.initBehaviors.length=this.updateBehaviors.length=this.recycleBehaviors.length=0}}dt.knownBehaviors={};class eb{constructor(e){this.x=e.x,this.y=e.y,this.w=e.w,this.h=e.h}getRandPos(e){e.x=Math.random()*this.w+this.x,e.y=Math.random()*this.h+this.y}}eb.type="rect";eb.editorConfig=null;class r0{constructor(e){this.x=e.x||0,this.y=e.y||0,this.radius=e.radius,this.innerRadius=e.innerRadius||0,this.rotation=!!e.affectRotation}getRandPos(e){this.innerRadius!==this.radius?e.x=Math.random()*(this.radius-this.innerRadius)+this.innerRadius:e.x=this.radius,e.y=0;const t=Math.random()*Math.PI*2;this.rotation&&(e.rotation+=t),mo(t,e.position),e.position.x+=this.x,e.position.y+=this.y}}r0.type="torus";r0.editorConfig=null;class tb{constructor(e){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(e)}init(e){if(!e||!e.length)this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});else if(Array.isArray(e[0]))for(let t=0;t<e.length;++t){const n=e[t];let i=n[0];for(let s=1;s<n.length;++s){const o=n[s];this.segments.push({p1:i,p2:o,l:0}),i=o}}else{let t=e[0];for(let n=1;n<e.length;++n){const i=e[n];this.segments.push({p1:t,p2:i,l:0}),t=i}}for(let t=0;t<this.segments.length;++t){const{p1:n,p2:i}=this.segments[t],s=Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y));this.segments[t].l=s,this.totalLength+=s,this.countingLengths.push(this.totalLength)}}getRandPos(e){const t=Math.random()*this.totalLength;let n,i;if(this.segments.length===1)n=this.segments[0],i=t;else for(let a=0;a<this.countingLengths.length;++a)if(t<this.countingLengths[a]){n=this.segments[a],i=a===0?t:t-this.countingLengths[a-1];break}i/=n.l||1;const{p1:s,p2:o}=n;e.x=s.x+i*(o.x-s.x),e.y=s.y+i*(o.y-s.y)}}tb.type="polygonalChain";tb.editorConfig=null;class rb{constructor(e){var t;this.order=bt.Late,this.minStart=e.minStart,this.maxStart=e.maxStart,this.accel=e.accel,this.rotate=!!e.rotate,this.maxSpeed=(t=e.maxSpeed)!==null&&t!==void 0?t:0}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.maxStart-this.minStart)+this.minStart;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new je(n,0),mo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity,i=n.x,s=n.y;if(n.x+=this.accel.x*t,n.y+=this.accel.y*t,this.maxSpeed){const o=Z3(n);o>this.maxSpeed&&J3(n,this.maxSpeed/o)}e.x+=(i+n.x)/2*t,e.y+=(s+n.y)/2*t,this.rotate&&(e.rotation=Math.atan2(n.y,n.x))}}rb.type="moveAcceleration";rb.editorConfig=null;function dY(r){return this.ease&&(r=this.ease(r)),(this.first.next.value-this.first.value)*r+this.first.value}function fY(r){this.ease&&(r=this.ease(r));const e=this.first.value,t=this.first.next.value,n=(t.r-e.r)*r+e.r,i=(t.g-e.g)*r+e.g,s=(t.b-e.b)*r+e.b;return t0(n,i,s)}function pY(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;return r=(r-e.time)/(t.time-e.time),(t.value-e.value)*r+e.value}function mY(r){this.ease&&(r=this.ease(r));let e=this.first,t=e.next;for(;r>t.time;)e=t,t=t.next;r=(r-e.time)/(t.time-e.time);const n=e.value,i=t.value,s=(i.r-n.r)*r+n.r,o=(i.g-n.g)*r+n.g,a=(i.b-n.b)*r+n.b;return t0(s,o,a)}function gY(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;return e.value}function vY(r){this.ease&&(r=this.ease(r));let e=this.first;for(;e.next&&r>e.next.time;)e=e.next;const t=e.value;return t0(t.r,t.g,t.b)}class Id{constructor(e=!1){this.first=null,this.isColor=!!e,this.interpolate=null,this.ease=null}reset(e){this.first=e,e.next&&e.next.time>=1?this.interpolate=this.isColor?fY:dY:e.isStepped?this.interpolate=this.isColor?vY:gY:this.interpolate=this.isColor?mY:pY,this.ease=this.first.ease}}class nb{constructor(e){this.order=bt.Normal,this.list=new Id(!1),this.list.reset(bs.createList(e.alpha))}initParticles(e){let t=e;for(;t;)t.alpha=this.list.first.value,t=t.next}updateParticle(e){e.alpha=this.list.interpolate(e.agePercent)}}nb.type="alpha";nb.editorConfig=null;class ib{constructor(e){this.order=bt.Normal,this.value=e.alpha}initParticles(e){let t=e;for(;t;)t.alpha=this.value,t=t.next}}ib.type="alphaStatic";ib.editorConfig=null;function tO(r){const e=[];for(let t=0;t<r.length;++t){let n=r[t];if(typeof n=="string")e.push(hd(n));else if(n instanceof Me)e.push(n);else{let i=n.count||1;for(typeof n.texture=="string"?n=hd(n.texture):n=n.texture;i>0;--i)e.push(n)}}return e}class sb{constructor(e){this.order=bt.Normal,this.anims=[];for(let t=0;t<e.anims.length;++t){const n=e.anims[t],i=tO(n.textures),s=n.framerate<0?-1:n.framerate>0?n.framerate:60,o={textures:i,duration:s>0?i.length/s:0,framerate:s,loop:s>0?!!n.loop:!1};this.anims.push(o)}}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.anims.length),i=t.config.anim=this.anims[n];t.texture=i.textures[0],t.config.animElapsed=0,i.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=i.textures.length/t.maxLife):(t.config.animDuration=i.duration,t.config.animFramerate=i.framerate),t=t.next}}updateParticle(e,t){const n=e.config,i=n.anim;n.animElapsed+=t,n.animElapsed>=n.animDuration&&(n.anim.loop?n.animElapsed=n.animElapsed%n.animDuration:n.animElapsed=n.animDuration-1e-6);const s=n.animElapsed*n.animFramerate+1e-7|0;e.texture=i.textures[s]||i.textures[i.textures.length-1]||Me.EMPTY}}sb.type="animatedRandom";sb.editorConfig=null;class ob{constructor(e){this.order=bt.Normal;const t=e.anim,n=tO(t.textures),i=t.framerate<0?-1:t.framerate>0?t.framerate:60;this.anim={textures:n,duration:i>0?n.length/i:0,framerate:i,loop:i>0?!!t.loop:!1}}initParticles(e){let t=e;const n=this.anim;for(;t;)t.texture=n.textures[0],t.config.animElapsed=0,n.framerate===-1?(t.config.animDuration=t.maxLife,t.config.animFramerate=n.textures.length/t.maxLife):(t.config.animDuration=n.duration,t.config.animFramerate=n.framerate),t=t.next}updateParticle(e,t){const n=this.anim,i=e.config;i.animElapsed+=t,i.animElapsed>=i.animDuration&&(n.loop?i.animElapsed=i.animElapsed%i.animDuration:i.animElapsed=i.animDuration-1e-6);const s=i.animElapsed*i.animFramerate+1e-7|0;e.texture=n.textures[s]||n.textures[n.textures.length-1]||Me.EMPTY}}ob.type="animatedSingle";ob.editorConfig=null;class ab{constructor(e){this.order=bt.Normal,this.value=e.blendMode}initParticles(e){let t=e;for(;t;)t.blendMode=hY(this.value),t=t.next}}ab.type="blendMode";ab.editorConfig=null;class lb{constructor(e){this.order=bt.Spawn,this.spacing=e.spacing*xs,this.start=e.start*xs,this.distance=e.distance}initParticles(e){let t=0,n=e;for(;n;){let i;this.spacing?i=this.start+this.spacing*t:i=Math.random()*Math.PI*2,n.rotation=i,this.distance&&(n.position.x=this.distance,mo(i,n.position)),n=n.next,++t}}}lb.type="spawnBurst";lb.editorConfig=null;class ub{constructor(e){this.order=bt.Normal,this.list=new Id(!0),this.list.reset(bs.createList(e.color))}initParticles(e){let t=e;const n=this.list.first.value,i=t0(n.r,n.g,n.b);for(;t;)t.tint=i,t=t.next}updateParticle(e){e.tint=this.list.interpolate(e.agePercent)}}ub.type="color";ub.editorConfig=null;class cb{constructor(e){this.order=bt.Normal;let t=e.color;t.charAt(0)==="#"?t=t.substr(1):t.indexOf("0x")===0&&(t=t.substr(2)),this.value=parseInt(t,16)}initParticles(e){let t=e;for(;t;)t.tint=this.value,t=t.next}}cb.type="colorStatic";cb.editorConfig=null;class hb{constructor(e){this.order=bt.Normal,this.index=0,this.textures=e.textures.map(t=>typeof t=="string"?hd(t):t)}initParticles(e){let t=e;for(;t;)t.texture=this.textures[this.index],++this.index>=this.textures.length&&(this.index=0),t=t.next}}hb.type="textureOrdered";hb.editorConfig=null;const Kl=new je,rO=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2","abs","acos","acosh","asin","asinh","atan","atanh","atan2","cbrt","ceil","cos","cosh","exp","expm1","floor","fround","hypot","log","log1p","log10","log2","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh"],yY=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(rO).join("|"),"g");function xY(r){const e=r.match(yY);for(let t=e.length-1;t>=0;--t)rO.indexOf(e[t])>=0&&(e[t]=`Math.${e[t]}`);return r=e.join(""),new Function("x",`return ${r};`)}class db{constructor(e){var t;if(this.order=bt.Late,e.path)if(typeof e.path=="function")this.path=e.path;else try{this.path=xY(e.path)}catch{this.path=null}else this.path=n=>n;this.list=new Id(!1),this.list.reset(bs.createList(e.speed)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){t.config.initRotation=t.rotation,t.config.initPosition?t.config.initPosition.copyFrom(t.position):t.config.initPosition=new je(t.x,t.y),t.config.movement=0;const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult;e.config.movement+=n*t,Kl.x=e.config.movement,Kl.y=this.path(Kl.x),mo(e.config.initRotation,Kl),e.position.x=e.config.initPosition.x+Kl.x,e.position.y=e.config.initPosition.y+Kl.y}}db.type="movePath";db.editorConfig=null;class fb{constructor(){this.order=bt.Spawn}initParticles(e){}}fb.type="spawnPoint";fb.editorConfig=null;class pb{constructor(e){this.order=bt.Normal,this.textures=e.textures.map(t=>typeof t=="string"?hd(t):t)}initParticles(e){let t=e;for(;t;){const n=Math.floor(Math.random()*this.textures.length);t.texture=this.textures[n],t=t.next}}}pb.type="textureRandom";pb.editorConfig=null;class mb{constructor(e){this.order=bt.Normal,this.minStart=e.minStart*xs,this.maxStart=e.maxStart*xs,this.minSpeed=e.minSpeed*xs,this.maxSpeed=e.maxSpeed*xs,this.accel=e.accel*xs}initParticles(e){let t=e;for(;t;)this.minStart===this.maxStart?t.rotation+=this.maxStart:t.rotation+=Math.random()*(this.maxStart-this.minStart)+this.minStart,t.config.rotSpeed=Math.random()*(this.maxSpeed-this.minSpeed)+this.minSpeed,t=t.next}updateParticle(e,t){if(this.accel){const n=e.config.rotSpeed;e.config.rotSpeed+=this.accel*t,e.rotation+=(e.config.rotSpeed+n)/2*t}else e.rotation+=e.config.rotSpeed*t}}mb.type="rotation";mb.editorConfig=null;class gb{constructor(e){this.order=bt.Normal,this.min=e.min*xs,this.max=e.max*xs}initParticles(e){let t=e;for(;t;)this.min===this.max?t.rotation+=this.max:t.rotation+=Math.random()*(this.max-this.min)+this.min,t=t.next}}gb.type="rotationStatic";gb.editorConfig=null;class vb{constructor(e){this.order=bt.Late+1,this.rotation=(e.rotation||0)*xs}initParticles(e){let t=e;for(;t;)t.rotation=this.rotation,t=t.next}}vb.type="noRotation";vb.editorConfig=null;class yb{constructor(e){var t;this.order=bt.Normal,this.list=new Id(!1),this.list.reset(bs.createList(e.scale)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.scaleMult=n,t.scale.x=t.scale.y=this.list.first.value*n,t=t.next}}updateParticle(e){e.scale.x=e.scale.y=this.list.interpolate(e.agePercent)*e.config.scaleMult}}yb.type="scale";yb.editorConfig=null;class xb{constructor(e){this.order=bt.Normal,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.scale.x=t.scale.y=n,t=t.next}}}xb.type="scaleStatic";xb.editorConfig=null;class zi{constructor(e){this.order=bt.Spawn;const t=zi.shapes[e.type];if(!t)throw new Error(`No shape found with type '${e.type}'`);this.shape=new t(e.data)}static registerShape(e,t){zi.shapes[t||e.type]=e}initParticles(e){let t=e;for(;t;)this.shape.getRandPos(t),t=t.next}}zi.type="spawnShape";zi.editorConfig=null;zi.shapes={};zi.registerShape(tb);zi.registerShape(eb);zi.registerShape(r0);zi.registerShape(r0,"circle");class _b{constructor(e){this.order=bt.Normal,this.texture=typeof e.texture=="string"?hd(e.texture):e.texture}initParticles(e){let t=e;for(;t;)t.texture=this.texture,t=t.next}}_b.type="textureSingle";_b.editorConfig=null;class wb{constructor(e){var t;this.order=bt.Late,this.list=new Id(!1),this.list.reset(bs.createList(e.speed)),this.minMult=(t=e.minMult)!==null&&t!==void 0?t:1}initParticles(e){let t=e;for(;t;){const n=Math.random()*(1-this.minMult)+this.minMult;t.config.speedMult=n,t.config.velocity?t.config.velocity.set(this.list.first.value*n,0):t.config.velocity=new je(this.list.first.value*n,0),mo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=this.list.interpolate(e.agePercent)*e.config.speedMult,i=e.config.velocity;cY(i),J3(i,n),e.x+=i.x*t,e.y+=i.y*t}}wb.type="moveSpeed";wb.editorConfig=null;class bb{constructor(e){this.order=bt.Late,this.min=e.min,this.max=e.max}initParticles(e){let t=e;for(;t;){const n=Math.random()*(this.max-this.min)+this.min;t.config.velocity?t.config.velocity.set(n,0):t.config.velocity=new je(n,0),mo(t.rotation,t.config.velocity),t=t.next}}updateParticle(e,t){const n=e.config.velocity;e.x+=n.x*t,e.y+=n.y*t}}bb.type="moveSpeedStatic";bb.editorConfig=null;function Sb(r,e){var t,n,i,s,o,a,u,l,h,c,d,p,g,v,x,y,w,_,S,I,A;if("behaviors"in r)return r;const k={lifetime:r.lifetime,ease:r.ease,particlesPerWave:r.particlesPerWave,frequency:r.frequency,spawnChance:r.spawnChance,emitterLifetime:r.emitterLifetime,maxParticles:r.maxParticles,addAtBack:r.addAtBack,pos:r.pos,emit:r.emit,autoUpdate:r.autoUpdate,behaviors:[]};if(r.alpha)if("start"in r.alpha)if(r.alpha.start===r.alpha.end)r.alpha.start!==1&&k.behaviors.push({type:"alphaStatic",config:{alpha:r.alpha.start}});else{const M={list:[{time:0,value:r.alpha.start},{time:1,value:r.alpha.end}]};k.behaviors.push({type:"alpha",config:{alpha:M}})}else r.alpha.list.length===1?r.alpha.list[0].value!==1&&k.behaviors.push({type:"alphaStatic",config:{alpha:r.alpha.list[0].value}}):k.behaviors.push({type:"alpha",config:{alpha:r.alpha}});if(r.acceleration&&(r.acceleration.x||r.acceleration.y)){let M,O;"start"in r.speed?(M=r.speed.start*((t=r.speed.minimumSpeedMultiplier)!==null&&t!==void 0?t:1),O=r.speed.start):(M=r.speed.list[0].value*((n=r.minimumSpeedMultiplier)!==null&&n!==void 0?n:1),O=r.speed.list[0].value),k.behaviors.push({type:"moveAcceleration",config:{accel:r.acceleration,minStart:M,maxStart:O,rotate:!r.noRotation,maxSpeed:r.maxSpeed}})}else if(!((i=r.extraData)===null||i===void 0)&&i.path){let M,O;"start"in r.speed?(O=(s=r.speed.minimumSpeedMultiplier)!==null&&s!==void 0?s:1,r.speed.start===r.speed.end?M={list:[{time:0,value:r.speed.start}]}:M={list:[{time:0,value:r.speed.start},{time:1,value:r.speed.end}]}):(M=r.speed,O=(o=r.minimumSpeedMultiplier)!==null&&o!==void 0?o:1),k.behaviors.push({type:"movePath",config:{path:r.extraData.path,speed:M,minMult:O}})}else if(r.speed)if("start"in r.speed)if(r.speed.start===r.speed.end)k.behaviors.push({type:"moveSpeedStatic",config:{min:r.speed.start*((a=r.speed.minimumSpeedMultiplier)!==null&&a!==void 0?a:1),max:r.speed.start}});else{const M={list:[{time:0,value:r.speed.start},{time:1,value:r.speed.end}]};k.behaviors.push({type:"moveSpeed",config:{speed:M,minMult:r.speed.minimumSpeedMultiplier}})}else r.speed.list.length===1?k.behaviors.push({type:"moveSpeedStatic",config:{min:r.speed.list[0].value*((u=r.minimumSpeedMultiplier)!==null&&u!==void 0?u:1),max:r.speed.list[0].value}}):k.behaviors.push({type:"moveSpeed",config:{speed:r.speed,minMult:(l=r.minimumSpeedMultiplier)!==null&&l!==void 0?l:1}});if(r.scale)if("start"in r.scale){const M=(h=r.scale.minimumScaleMultiplier)!==null&&h!==void 0?h:1;if(r.scale.start===r.scale.end)k.behaviors.push({type:"scaleStatic",config:{min:r.scale.start*M,max:r.scale.start}});else{const O={list:[{time:0,value:r.scale.start},{time:1,value:r.scale.end}]};k.behaviors.push({type:"scale",config:{scale:O,minMult:M}})}}else if(r.scale.list.length===1){const M=(c=r.minimumScaleMultiplier)!==null&&c!==void 0?c:1,O=r.scale.list[0].value;k.behaviors.push({type:"scaleStatic",config:{min:O*M,max:O}})}else k.behaviors.push({type:"scale",config:{scale:r.scale,minMult:(d=r.minimumScaleMultiplier)!==null&&d!==void 0?d:1}});if(r.color)if("start"in r.color)if(r.color.start===r.color.end)r.color.start!=="ffffff"&&k.behaviors.push({type:"colorStatic",config:{color:r.color.start}});else{const M={list:[{time:0,value:r.color.start},{time:1,value:r.color.end}]};k.behaviors.push({type:"color",config:{color:M}})}else r.color.list.length===1?r.color.list[0].value!=="ffffff"&&k.behaviors.push({type:"colorStatic",config:{color:r.color.list[0].value}}):k.behaviors.push({type:"color",config:{color:r.color}});if(r.rotationAcceleration||!((p=r.rotationSpeed)===null||p===void 0)&&p.min||!((g=r.rotationSpeed)===null||g===void 0)&&g.max?k.behaviors.push({type:"rotation",config:{accel:r.rotationAcceleration||0,minSpeed:((v=r.rotationSpeed)===null||v===void 0?void 0:v.min)||0,maxSpeed:((x=r.rotationSpeed)===null||x===void 0?void 0:x.max)||0,minStart:((y=r.startRotation)===null||y===void 0?void 0:y.min)||0,maxStart:((w=r.startRotation)===null||w===void 0?void 0:w.max)||0}}):(!((_=r.startRotation)===null||_===void 0)&&_.min||!((S=r.startRotation)===null||S===void 0)&&S.max)&&k.behaviors.push({type:"rotationStatic",config:{min:((I=r.startRotation)===null||I===void 0?void 0:I.min)||0,max:((A=r.startRotation)===null||A===void 0?void 0:A.max)||0}}),r.noRotation&&k.behaviors.push({type:"noRotation",config:{}}),r.blendMode&&r.blendMode!=="normal"&&k.behaviors.push({type:"blendMode",config:{blendMode:r.blendMode}}),Array.isArray(e)&&typeof e[0]!="string"&&"framerate"in e[0]){for(let M=0;M<e.length;++M)e[M].framerate==="matchLife"&&(e[M].framerate=-1);k.behaviors.push({type:"animatedRandom",config:{anims:e}})}else typeof e!="string"&&"framerate"in e?(e.framerate==="matchLife"&&(e.framerate=-1),k.behaviors.push({type:"animatedSingle",config:{anim:e}})):r.orderedArt&&Array.isArray(e)?k.behaviors.push({type:"textureOrdered",config:{textures:e}}):Array.isArray(e)?k.behaviors.push({type:"textureRandom",config:{textures:e}}):k.behaviors.push({type:"textureSingle",config:{texture:e}});if(r.spawnType==="burst")k.behaviors.push({type:"spawnBurst",config:{start:r.angleStart||0,spacing:r.particleSpacing,distance:0}});else if(r.spawnType==="point")k.behaviors.push({type:"spawnPoint",config:{}});else{let M;r.spawnType==="ring"?M={type:"torus",data:{x:r.spawnCircle.x,y:r.spawnCircle.y,radius:r.spawnCircle.r,innerRadius:r.spawnCircle.minR,affectRotation:!0}}:r.spawnType==="circle"?M={type:"torus",data:{x:r.spawnCircle.x,y:r.spawnCircle.y,radius:r.spawnCircle.r,innerRadius:0,affectRotation:!1}}:r.spawnType==="rect"?M={type:"rect",data:r.spawnRect}:r.spawnType==="polygonalChain"&&(M={type:"polygonalChain",data:r.spawnPolygon}),M&&k.behaviors.push({type:"spawnShape",config:M})}return k}dt.registerBehavior(rb);dt.registerBehavior(nb);dt.registerBehavior(ib);dt.registerBehavior(sb);dt.registerBehavior(ob);dt.registerBehavior(ab);dt.registerBehavior(lb);dt.registerBehavior(ub);dt.registerBehavior(cb);dt.registerBehavior(hb);dt.registerBehavior(db);dt.registerBehavior(fb);dt.registerBehavior(pb);dt.registerBehavior(mb);dt.registerBehavior(gb);dt.registerBehavior(vb);dt.registerBehavior(yb);dt.registerBehavior(xb);dt.registerBehavior(zi);dt.registerBehavior(_b);dt.registerBehavior(wb);dt.registerBehavior(bb);function _Y(r){return Sb({alpha:{start:1,end:.7},scale:{start:.4,end:.8,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:800,minimumSpeedMultiplier:3},acceleration:{x:0,y:700},maxSpeed:0,startRotation:{min:240,max:270},noRotation:!1,rotationSpeed:{min:-50,max:50},lifetime:{min:2,max:3},blendMode:"normal",frequency:.1,emitterLifetime:r,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-25,y:0,w:50,h:0}},{framerate:0,loop:!0,textures:br(18,e=>`coin_${e+1}.png`)})}function n0(r){return Sb({alpha:{start:1,end:.8},scale:{start:.5,end:.9,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:500,minimumSpeedMultiplier:2.5},acceleration:{x:0,y:1e3},maxSpeed:0,startRotation:{min:240,max:290},noRotation:!1,rotationSpeed:{min:-50,max:50},lifetime:{min:1.5,max:2},blendMode:"normal",frequency:.1,emitterLifetime:r,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-25,y:0,w:50,h:0}},{framerate:0,loop:!0,textures:br(18,e=>`coin_${e+1}.png`)})}const vs=({turbo:r=!1,playing:e=!1,config:t,...n})=>{const i=B.useRef(),[s,o]=B.useState(null);return Pd((a,u)=>{s.update(a/1e3)},e,r),B.useEffect(()=>{!e&&s?s.cleanup():e&&s&&s.playOnce()},[e]),B.useEffect(()=>{const a=new dt(i.current,t);return o(a),()=>{a.destroy()}},[]),T.jsx(Rt.ParticleContainer,{ref:i,...n})};function wY({selected:r=0,children:e,duration:t,...n}){const{current:i}=B.useRef({index:r}),[s,o]=B.useState(!1),a=B.useMemo(()=>B.Children.count(e),[]);return Yu(t,()=>{i.index=(i.index+1)%a,o(!s)},!0),T.jsx(ge,{...n,children:B.Children.map(e,(u,l)=>{let h,c=!1;return l==i.index?(h={from:{alpha:0,visible:1},to:{alpha:1,visible:1},duration:200},c=!0):h={from:{visible:0}},T.jsx(Ns,{dep:[`${l}${r}`],...h,playing:c,children:d=>B.cloneElement(u,d)},`SlideTipTween${l}`)})})}function nO({children:r,slotName:e}){const[t,n]=r,i=B.useRef(null),s=B.useRef(null);return B.useEffect(()=>{if(i.current&&s.current){const o=i.current.skeleton.findSlot(e);i.current.addSlotObject(o,s.current)}},[i,s]),T.jsxs(ge,{children:[B.cloneElement(t,{ref:i}),T.jsx(ge,{ref:s,children:n})]})}function Md(r){return B.forwardRef(({turbo:e=!1,text:t=new ut(0),tweenOptions:n={},tmp:i="{}",...s},o)=>{const{current:a}=B.useRef({amount:0,id:0}),u=Number(t.toString()),[l,h]=B.useMemo(()=>{const c=a.amount;return a.amount=u,[a.id++,c]},[u]);return T.jsx(Ns,{dep:[l],playing:!0,turbo:e,from:{text:h},to:{text:u},duration:1e3,...n,children:c=>T.jsx(r,{ref:o,...s,text:i.replace("{}",gn(c.text))})})})}const jP=Md(Os);Md(Oh);const bY=Md(Dz);Md(({text:r,...e})=>T.jsx("div",{...e,children:r}));Md(({text:r,cb:e,...t})=>T.jsx("div",{...t,children:e(r)}));function SY({children:r,speed:e}){const[t,n]=B.useState(0);return Rt.useTick((i,s)=>{n((i/1e3*(e*360)+t)%360)},!0),r(Math.PI*2*(t/360))}function iO(r){return Sb({alpha:{start:1,end:0},scale:{start:.8,end:1.6,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:800,minimumSpeedMultiplier:3},acceleration:{x:0,y:700},maxSpeed:0,startRotation:{min:240,max:270},noRotation:!1,rotationSpeed:{min:270,max:360},lifetime:{min:2,max:3},blendMode:"screen",frequency:.1,emitterLifetime:14.5,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-25,y:0,w:50,h:0}},{framerate:0,loop:!1,textures:[r]})}const XP=iO("sparkle_cyan.jpg"),HP=iO("sparkle_purple.jpg"),TY=n0(1.5),EY=n0(2.5),PY=n0(4),CY=n0(6.5),zP=_Y(14.5);function AY({dataSource:r}){const{gameStatus:e,nextGameStatus:t}=r.base,n=e==Kt.showBigWin;function i(o){o.animation.name=="BIGWIN_OUT"&&t()}const s=n?r.totalWin.toNumber():0;return T.jsx(bc,{children:T.jsxs(ge,{visible:n,children:[T.jsx(ao,{frame:[0,0,1170,1170],alpha:.32,interactive:!0}),T.jsxs(Rt.Container,{children:[T.jsx(vs,{turbo:!0,x:470,y:505,scale:1,playing:n,config:zP}),T.jsx(vs,{turbo:!0,x:700,y:505,scale:[-1,1],playing:n,config:zP}),T.jsx(vs,{turbo:!0,x:470,y:505,scale:1,playing:n,blendMode:Pe.SCREEN,config:XP}),T.jsx(vs,{turbo:!0,x:470,y:505,scale:1,playing:n,blendMode:Pe.SCREEN,config:HP}),T.jsx(vs,{turbo:!0,x:700,y:505,scale:[-1,1],playing:n,blendMode:Pe.SCREEN,config:XP}),T.jsx(vs,{turbo:!0,x:700,y:505,scale:[-1,1],playing:n,blendMode:Pe.SCREEN,config:HP})]}),T.jsxs(nO,{slotName:"88800",children:[T.jsx(Ta,{turbo:!0,x:565,"p-y":585,"l-y":625,onComplete:i,playing:n,"l-scale":.4,"p-scale":.33,actions:fr([[0,"BIGWIN_ENTER",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_IDLE",!1],[0,"BIGWIN_OUT",!1]]),toFrameOneWhenStop:!0}),T.jsx(__,{scale:[1,1],anchor:.5,text:`${gn(s)}`,maxScaleLength:1700,style:{fontName:QR,fontSize:150,align:"center",letterSpacing:10}})]})]})})}function kY({dataSource:r,...e}){const{gameStatus:t,state:n}=r.base,{autoSpinCount:i,spinModel:s}=n.spin,o=i=="∞"||i>0,a=t=="spin"||t=="stopping",u=t==Kt.showWild,h=t=="idle"&&(!s||!s.isExistRespin);return T.jsxs(ge,{...e,children:[T.jsxs(wY,{selected:0,duration:3e3,visible:h&&!o,children:[T.jsx(ws,{anchor:.5,scale:1,name:"Hold for autospin.png"}),T.jsx(ws,{anchor:.5,scale:1,name:"Place your bets.png"})]}),T.jsx(ws,{anchor:.5,y:-3,scale:1,name:"Good luck.png",visible:a}),T.jsx(ws,{anchor:.5,y:-3,scale:1,name:"youwinrespin.png",visible:u})]})}function IY({dataSource:r,...e}){const{gameStatus:t,state:n}=r.base,i=t==Kt.showWinAmount,s=i?r.totalWin.toNumber():0,o=B.useMemo(()=>{var d;return i?(d=n.spin.spinModel)==null?void 0:d.getWinType(r.totalWin):""},[i]),a=B.useMemo(()=>i?o=="big"?1e3:o=="high"?4500:o=="medium"?3500:o=="normal"?2500:1500:0,[i]),[u,l,h,c]=B.useMemo(()=>i?[o=="small",o=="normal",o=="medium",o=="high"]:[!1,!1,!1,!1],[i]);return T.jsxs(ge,{...e,visible:i,children:[T.jsx(bY,{anchor:.5,scale:1,tweenOptions:{duration:a,playing:i,turbo:!0},text:s,style:{fontName:ZR,fontSize:50,align:"center",letterSpacing:0}}),T.jsx(vs,{turbo:!0,y:-45,scale:1,playing:u,config:TY}),T.jsx(vs,{turbo:!0,y:-45,scale:1,playing:l,config:EY}),T.jsx(vs,{turbo:!0,y:-45,scale:1,playing:h,config:PY}),T.jsx(vs,{turbo:!0,y:-45,scale:1,playing:c,config:CY})]})}function MY({dataSource:r,...e}){const{gameStatus:t,state:n}=r.base,{history:i}=r.lineWin,{currency:s}=n.user,{spinModel:o}=n.spin,a=Po(i),u=(o==null?void 0:o.credit)||f_,l=a?u.mul(a.cls.m).mul(o.level).toNumber():0;return T.jsx(ge,{...e,visible:t==Kt.showWinLine,children:T.jsx(Os,{text:`${fr(Un(bn,"win"))} ${s} ${gn(l)}`,anchor:.5,style:{fill:"#00dfff",fontFamily:fr(Be.Obj.urlOptions.lang),fontWeight:"500",fontSize:30,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})}function RY({dataSource:r}){const{inFreeSpin:e}=r.fs,t=B.useMemo(()=>[0,e?"respin_idle":"main_game",!0],[e]);return T.jsx(iY,{playing:!0,scale:.5,x:585,y:585,action:t})}function OY({dataSource:r}){const{inFreeSpin:e}=r.fs,t=B.useMemo(()=>[0,e?"Respin_Idle":"main_game_idle",!0],[e]);return T.jsx(sY,{playing:!0,x:319,y:282,scale:.5,action:t})}function NY({dataSource:r,...e}){const{state:t}=r.base,{history:n}=r.lineWin,i=n.length,{spinModel:s}=t.spin;let o=0;return s&&(o=s.lineBet.mul(s.level).toNumber()),T.jsxs(ge,{...e,children:[T.jsx(lt,{name:"side ui panel.png"}),T.jsxs(Sc,{x:20,y:20,children:[T.jsx(ge,{children:n.map((a,u)=>T.jsx(LY,{line:a,lineIndex:u,lineCount:i,levelAmount:o},`history${u}`))}),T.jsx(ao,{frame:[0,-3,153,217]})]}),T.jsx(oO,{x:24,y:247,line:Po(r.lineWin.history)})]})}function BY({dataSource:r,...e}){const{state:t}=r.base,{history:n}=r.lineWin,i=n.length,{spinModel:s}=t.spin;let o=0;return s&&(o=s.lineBet.mul(s.level).toNumber()),T.jsxs(ge,{...e,children:[T.jsx(lt,{name:"side ui panel portrait.png"}),T.jsxs(Sc,{x:256,y:17,children:[T.jsx(ge,{children:n.map((a,u)=>T.jsx(FY,{line:a,lineIndex:u,lineCount:i,levelAmount:o},`history${u}`))}),T.jsx(ao,{frame:[0,0,320,114]})]}),T.jsx(oO,{x:36,y:31,line:Po(r.lineWin.history)})]})}function sO({point:r,isActive:e,s:t,c:n,m:i,levelAmount:s}){return T.jsxs(ge,{...r,children:[T.jsx(ge,{children:T.jsx(lt,{name:"ui side select.png",visible:e})}),T.jsxs(ge,{children:[T.jsx(Zm,{y:[6,6,6,6,6,6,3,2][t],scale:[1,1,1,1,.9,1,.9,1][t]*.5,x:6,name:`${t}.png`}),T.jsx(__,{x:50,y:23,text:`x${n}`,style:{fontName:d_,fontSize:70,align:"center",letterSpacing:-2}}),T.jsx(__,{x:150,y:33,text:`${gn(i*s)}`,alpha:.72,maxScaleLength:90,anchor:[1,.5],style:{fontName:d_,fontSize:50,align:"center"}})]})]})}function LY({line:r,lineIndex:e,lineCount:t,levelAmount:n}){const i=e==t-1,[s,o,a]=[r.s,r.cls.c.length,r.cls.m.valueOf()],[u,l]=B.useMemo(()=>t<=4?e+1==t?[{x:0,y:-1},{x:0,y:3-e}]:[{x:0,y:3-e},{x:0,y:3-e}]:[{x:0,y:t-2-e},{x:0,y:t-1-e}],[t]);function h(c){return{x:(u.x+(l.x-u.x)*c)*141,y:(u.y+(l.y-u.y)*c)*54}}return T.jsx(Ns,{turbo:!0,dep:[t],from:{k:0},to:{k:1},duration:500,playing:!0,children:({k:c})=>{const d=h(c);return T.jsx(sO,{point:d,isActive:i,s,c:o,m:a,levelAmount:n})}})}function FY({line:r,lineIndex:e,lineCount:t,levelAmount:n}){const i=e==t-1,[s,o,a]=[r.s,r.cls.c.length,r.cls.m.valueOf()],[u,l]=B.useMemo(()=>{const c=t-e;return c<=2?[{x:0,y:t-2-e},{x:0,y:t-1-e}]:c==3?[{x:0,y:1},{x:1,y:0}]:[{x:1,y:c-4},{x:1,y:1+(c-4)}]},[t]);function h(c){return{x:(u.x+(l.x-u.x)*c)*166,y:(u.y+(l.y-u.y)*c)*58}}return T.jsx(Ns,{turbo:!0,dep:[t],from:{k:0},to:{k:1},duration:500,playing:!0,children:({k:c})=>{const d=h(c);return T.jsx(sO,{point:d,isActive:i,s,c:o,m:a,levelAmount:n})}})}function oO({line:r,...e}){return T.jsx(ge,{...e,children:r==null?void 0:r.cls.c.map((t,n)=>T.jsx(lt,{x:t[0]*28.5,y:t[1]*28,name:"side ui hightlight.png"},`h${n}`))})}function DY({...r}){const{startSpeed:e=0,endSpeed:t=0,spinStatus:n,speed:i=24,accTime:s,decTime:o,accEasing:a=ca.Linear.None,decEasing:u=ca.Linear.None}=r,{children:l,turbo:h=!1,inColumn:c,cellCount:d,symbols:p,result:g=[],playing:v,stop:x,onEnd:y}=r,{current:w}=B.useRef({spinTime:0,stopingTime:0,resultK:0,ssMap:{}}),[_,S]=B.useState(!1);function I(N){return NP.up(e,i,s,N)}function A(N){return NP.down(i,t,o,N)}function k(N,j){let Y=w.ssMap[N];if(qu(Y)){const K=Math.floor(w.resultK-j);x&&K<d?Y=g[K]:Y=x$(p),w.ssMap[N]=Y}return Y}const M=I(s),O=A(o);B.useMemo(()=>{w.spinTime=0,w.resultK=0,v?(w.stopingTime=0,w.resultK=0):(w.ssMap={},g.forEach((N,j)=>{w.ssMap[j+1]=N}))},[v]),B.useMemo(()=>{n=="idle"&&(w.ssMap={},g.forEach((N,j)=>{w.ssMap[j+1]=N}))},[n]),B.useMemo(()=>{if(x){const N=M+Math.max(0,w.spinTime-s)/1e3*i,j=Math.ceil(N+Math.max(d,O));w.resultK=j;for(let Y=0;Y<d;Y++)w.ssMap[-j+1+Y]=g[Y];w.stopingTime=s+(j-O-M)/i*1e3}},[x]),Pd((N,j)=>{w.spinTime+=N,S(!_),x&&w.spinTime>=w.stopingTime+o&&y(c)},v,h);const[F,U,H]=B.useMemo(()=>{let N=0,j=!1,Y=!0;const K=w.spinTime;if(v)if(K<=s)N=I(a(K/s)*s);else if(!x||K<=w.stopingTime)N=M+(K-s)/1e3*i,j=!0;else if(K>=w.stopingTime+o)Y=!1,N=w.resultK;else{const X=K-w.stopingTime;N=M+(w.stopingTime-s)/1e3*i+A(u(X/o)*o)}else Y=!1;return[N,j,Y]},[w.spinTime,v,n]),L=B.useMemo(()=>{const N=(F+1)%1-1;return br(d+1,Y=>{const K=N+Y;return{k:K,visible:K!=-1&&K!=d||H,selected:k(-Math.floor(F)+Y,F)}})},[F,v,n]);return l(L,H,U)}var UY=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,jY=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`;class XY extends Yr{constructor(e=[0,0],t=5,n=0){super(UY,jY),this.kernelSize=5,this.uniforms.uVelocity=new Float32Array(2),this._velocity=new Ii(this.velocityChanged,this),this.setVelocity(e),this.kernelSize=t,this.offset=n}apply(e,t,n,i){const{x:s,y:o}=this.velocity;this.uniforms.uKernelSize=s!==0||o!==0?this.kernelSize:0,e.applyFilter(this,t,n,i)}set velocity(e){this.setVelocity(e)}get velocity(){return this._velocity}setVelocity(e){if(Array.isArray(e)){const[t,n]=e;this._velocity.set(t,n)}else this._velocity.copyFrom(e)}velocityChanged(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)+1}set offset(e){this.uniforms.uOffset=e}get offset(){return this.uniforms.uOffset}}const HY=({children:r,velocity:e=[0,0],offset:t,kernelSize:n,enabled:i=!0,...s})=>{const o=B.useMemo(()=>new XY(e,n,t),[]);B.useEffect(()=>{o.velocity=new je(...e)},[...e]),B.useEffect(()=>{o.offset=t},[t]),B.useEffect(()=>{o.enabled=i},[i]);function a(){o.destroy()}return T.jsx(ge,{filters:[o],destroy:a,...s,children:r})};function aO({inspin:r,isBlur:e=!1,tint:t=16777215,selected:n,active:i,...s}){const a=Be.Obj.urlOptions.lang==co.Chinese&&n==7?"cn":"",u=B.useMemo(()=>{const h=[[0,"HP_TRIANGLE_WIN",!0],[0,"HP_CIRDE_WIN",!0],[0,"HP_SQUARE_WIN",!0],[0,"HP_GLOVES_WIN",!0],[0,"HP_HELMET_WIN",!0],[0,"HP_LASERGUN_WIN",!0],[0,"HP_LORE PORTRAITL_WIN",!0]];return i?h[n]:n==6?[0,"HP_LORE PORTRAITL_IDLE",!0]:null},[n,i]),l=!e&&!r&&!!u;return T.jsx(ge,{...s,children:T.jsxs(HY,{enabled:e,kernelSize:9,offset:0,velocity:[0,25],children:[T.jsx(ge,{x:52,y:44,children:T.jsx(Zm,{anchor:.5,visible:!l,name:`${n}${a}.png`,tint:t})}),T.jsx(Ta,{turbo:!0,visible:l,x:52,y:44,playing:l,scale:.5,action:u,tint:t})]})})}function zY({map:r}){return T.jsx(ge,{children:br(5,e=>{let t,n=!1;const i=r[e];return i&&(t=i.ss,n=i.load),T.jsx(ge,{x:uO[e],children:t?T.jsx(lO,{ss:t,load:n},e):T.jsx(T.Fragment,{})},`wildTween${e}`)})})}function lO({ss:r,load:e,...t}){const[n,i]=B.useState(e?"explode":"fire"),s=n=="fire",o=n=="tween",a=n=="explode",u=B.useMemo(()=>r.indexOf(7),[]);uc(()=>{i("tween")},1200,s),uc(()=>{i("explode")},700,o);const l=B.useMemo(()=>e?[[0,"WILD_IDLE",!0]]:[[0,"WILD_DROP",!1],[0,"WILD_CLICK",!1],[0,"WILD_WIN",!1],[0,"WILD_IDLE",!0]],[e]);return T.jsxs(ge,{...t,children:[r.map((h,c)=>{const d=s&&c!=u;return T.jsx(Ns,{turbo:!0,from:{k:0},to:{k:1},playing:c==u&&o,duration:500,children:({k:p})=>T.jsxs(ge,{y:c*100+(1-c)*p*100,visible:s||o&&c==u,children:[T.jsx(Ns,{from:{k:1},to:{k:0},playing:d,duration:300,children:({k:g})=>T.jsx(aO,{selected:h,active:!1,alpha:g})}),T.jsx(Ta,{turbo:!0,x:60,y:50,playing:d,visible:d,scale:.5,action:fr([0,"SYMBOL_OUT",!1])})]})},`drop${c}`)}),T.jsx(Ta,{turbo:!0,x:56,y:143,visible:a,playing:a,scale:.5,actions:l,toFrameOneWhenStop:!0})]})}function $Y({points:r,...e}){function t(n,i){for(const[s,o]of r)if(s==n&&o==i)return!0;return!1}return T.jsx(ge,{...e,children:br(5,n=>T.jsx(ge,{children:br(3,i=>{const s=t(n,i);return T.jsx(Ta,{x:80+n*104,y:84+i*104,playing:s,visible:s,scale:.5,action:fr([0,"SYMBOL",!0])},`cluster_${n}${i}`)})},`c_c_${n}`))})}const uO=[10,116,222,328,434];function YY({children:r,dataSource:e}){const{gameStatus:t,dispatch:n,state:i}=e.base,{ssMap:s}=e.wild,{spinModel:o}=i.spin,{current:a}=B.useRef({stopSpinIndex:-1,stopedColumn:[],stopping:!1}),[u,l]=B.useState(!1),h=t=="stopping",c=t=="spin"||h,[d]=B.useMemo(()=>[5-Object.keys(s).length],[c]),p=B.useMemo(()=>br(5,g=>{const v=cr(s[g]);return{playing:!v&&c&&a.stopedColumn.indexOf(g)<0,stop:!v&&h&&g<=a.stopSpinIndex,result:v?s[g].ss:(o==null?void 0:o.ssMap[g])||[],onEnd:x=>{a.stopedColumn.indexOf(x)<0&&(a.stopedColumn.push(x),a.stopedColumn.length==d?n(YR()):l(!u))}}}),[t,a.stopSpinIndex]);return Nz(500,()=>{let g=a.stopSpinIndex;for(let v=0;v<5;v++)if(g++,!cr(s[g])){a.stopSpinIndex=g;break}l(!u)},a.stopping&&h&&a.stopSpinIndex<5),uc(()=>{a.stopping=!0,l(!u)},500,h&&a.stopSpinIndex<5&&!a.stopping),B.useEffect(()=>{c||(a.stopSpinIndex=-1,a.stopedColumn=[],a.stopping=!1,l(!u))},[c]),r(p)}function GY({dataSource:r,...e}){const{gameStatus:t,state:n}=r.base,{ssMap:i}=r.wild,{line:s}=r.lineWin,o=fr(br(7,g=>g)),a=t=="spin"||t=="stopping",u=t==Kt.showWinAmount,l=t==Kt.showWinLine;function h(g,v){if(l&&s)for(const x of s.cls.c){const[y,w]=x;if(y==g&&w==v-1)return!0}return!1}const[c,d,p]=fr([500,500,20]);return T.jsxs(ge,{...e,x:310,y:427,children:[T.jsx(ge,{children:T.jsx($Y,{x:-15,y:-40,points:(s==null?void 0:s.cls.c)||[]})}),T.jsxs(Sc,{active:a,children:[T.jsx(ge,{children:T.jsx(YY,{dataSource:r,children:g=>br(5,v=>{const x=g[v],y=cr(i[v])?"":x.result.indexOf(7)>=0?"reel_stop_wild":"reel_stop";return T.jsx(ge,{x:uO[v],visible:!cr(i[v]),children:T.jsx(DY,{turbo:!0,...x,spinStatus:n.spin.status,inColumn:v,startSpeed:0,endSpeed:-2,speed:p,accTime:c,decTime:d,cellCount:3,symbols:o,children:(w,_,S)=>T.jsxs(ge,{children:[w.map((I,A)=>{const{k,...M}=I,O=h(v,A),F=l?O?16777215:8947848:u?8947848:16777215;return T.jsx(aO,{...M,isBlur:S,active:O,y:105*k,tint:F},`symbols${A}`)}),T.jsx(WY,{sound:y,inSpin:_})]})})},`reel${v}`)})})}),T.jsx(lt,{name:"spin_mask.jpg",y:-7,scale:[1.77,1.5]})]}),T.jsx(ge,{children:T.jsx(zY,{map:i})}),T.jsx(Ko,{dep:[s],sound:"sfx_winline_panel",volum:1,playing:cr(s==null?void 0:s.s),softBgm:!0})]})}function WY({sound:r,inSpin:e}){const{current:t}=B.useRef({playing:!1}),n=B.useMemo(()=>t.playing&&!e?(t.playing=!1,!0):(t.playing=e,!1),[e]);return T.jsx(Ko,{sound:r,playing:n,allowStop:!1,volum:1})}function VY(){const{state:r}=B.useContext(_t),e=Po(r.sceneManager.scenes),t=B.useMemo(()=>{if(e=="main")return"bgm";if(e=="premain")return"loading_bgm"},[e]);return T.jsx(S$,{sound:t,playing:!!t})}function qY({dataSource:r}){const{gameStatus:e,state:t,nextGameStatus:n}=r.base,i=e==Kt.showWinAmount,s=e==Kt.showBigWin,o=e==Kt.showWinLine,a=t.spin.status=="spin",u=t.spin.status=="stopping",[l,h]=B.useMemo(()=>{var d;const c=(d=t.spin.spinModel)==null?void 0:d.getWinType(r.totalWin);return c=="high"?[["HighWin"],8e3]:c=="medium"?[["MediumWin"],6e3]:c=="normal"?[["NormalWin"],4e3]:[["SmallWin"],3e3]},[i]);return uc(()=>{n()},h,i),T.jsxs(T.Fragment,{children:[T.jsx(Ko,{sound:"spin",playing:a}),T.jsx(Ko,{sounds:l,playing:i,softBgm:!0}),T.jsx(Ko,{sounds:["win_big","win_big_outro"],playing:s,softBgm:!0}),T.jsx(Ko,{sound:"sfx_wild_expand",playing:e==Kt.showWild,softBgm:!0}),T.jsx(Ko,{sound:"reel_spin_bgm",playing:a||u,loop:!0,allowStop:!0}),T.jsx(Ko,{sound:"short_win_panel",playing:o})]})}const KY=({path:r,color:e,bColor:t,border:n=0,...i},s)=>{const o=B.useCallback(a=>{a.clear(),a.beginFill(e),a.lineStyle(n,t,1),a.moveTo(...r[0]);for(let u=1;u<r.length;u++)a.lineTo(...r[u]);a.lineTo(...r[0]),a.endFill()},[r,e]);return T.jsx(Rt.Graphics,{ref:s,draw:o,...i})},$P=B.forwardRef(KY);function QY({children:r,selected:e=0,cellHeight:t,onSelectedChange:n,onScrollStart:i,onScrollEnd:s,selectedColor:o=16691720,...a}){const{isMobile:u,isTablet:l}=Be.Obj,[h,c]=B.useState(!1),{current:d}=B.useRef({tween:null,startPoint:null,movement:{x:0,y:0},page:e,update:!1}),p=B.Children.count(r),g=Math.floor(p/2);function v(M){return(M+g+p)%p-g}function x(){const M=d.movement.y/t;return(d.page+M+p)%p}function y(M,O=!0,F=d.page){O&&F!=M?(d.tween&&(d.tween.stop(),jk(d.tween)),d.tween=new Z_({page:F}).to({page:M},200).onUpdate(U=>{d.page=U.page,d.update=!0}).onComplete(()=>{const U=Math.round((M+p)%p);n&&n(U),d.page=U,d.update=!0}).start(Be.Obj.getTime(!1))):d.page=M}function w(M){d.startPoint={x:M.x,y:M.y},i&&i()}function _(M){d.startPoint&&(d.update=!0,d.movement={x:-(M.x-d.startPoint.x),y:-(M.y-d.startPoint.y)})}function S(M){if(d.startPoint){let O=d.movement.y/t;const F=d.page+O;O=Math.round(O+(O>0?.25:-.25));const U=d.page+O;d.startPoint=null,s&&s(),d.movement={x:0,y:0},y(U,!0,F)}}const I=B.useMemo(()=>x(),[d.movement.x,d.movement.y,d.page]);B.useEffect(()=>{d.page!=e&&y(e,!0,d.page)},[e]),Rt.useTick(()=>{d.update&&(c(!h),d.update=!1)},!0);function A(M){const O=t,F=Math.abs(M),U=Math.max(0,3-F),H=F<2.5?.4+U*.2:0,L=F<.5?o:16777215;return{y:M*O,scale:H,tint:L}}const k={};return u||l?(k.ontouchstart=w,k.ontouchmove=_,k.ontouchend=S,k.ontouchcancel=S,k.ontouchendoutside=S):(k.onmousedown=w,k.onmousemove=_,k.onmouseup=S,k.onmouseout=S,k.onmouseupoutside=S),T.jsx(ge,{interactive:!0,cursor:"pointer",...k,...a,children:B.Children.map(r,(M,O)=>{const F=v(-I+O);return B.cloneElement(M,A(F))})})}function ZY({betAmount:r,on:e,onClose:t,onSelectedChange:n,lineBets:i}){const[s,o]=B.useState(0),{current:a}=B.useRef({inScroll:!1,ebaleClose:!1}),u=Be.Obj;B.useEffect(()=>{const p=()=>{const g=u.viewport[1],v=u.viewport[3],x=u.layoutOptions.displayArea[1];o(-g+v+x)};return p(),u.notice.on(Xi,p),()=>{u.notice.off(Xi,p)}},[]);const l=B.useMemo(()=>i.map(p=>Number(p)).indexOf(r),[r]);function h(){a.inScroll=!0}function c(){a.inScroll=!1}function d(){a.ebaleClose&&!a.inScroll&&t&&t()}return B.useMemo(()=>{e&&(a.ebaleClose=!1)},[e]),Qm(()=>{a.ebaleClose=!0},500,e&&!a.ebaleClose),T.jsxs(ge,{children:[T.jsx(sg,{click:d,hitFrame:[0,0,1170,1170],visible:e}),T.jsx(Ns,{dep:[e],from:{k:0},to:{k:1},playing:!0,duration:300,easing:ca.Cubic.In,children:({k:p})=>{const g=(e?-380*p:1e3)+s;return T.jsxs(ge,{y:g,children:[T.jsx(ao,{frame:[0,0,1170,380],color:1908791,alpha:.9,interactive:!0}),T.jsx(ge,{children:T.jsx(Oh,{x:588,y:20,anchor:.5,text:"betamount",style:{fill:"#ffffff",fontFamily:"Verdana",fontWeight:"bold",fontSize:23}})}),T.jsxs(ge,{y:173,children:[T.jsx(ao,{frame:[0,0,1170,60],alpha:.72}),T.jsx(ao,{frame:[0,0,1170,2],color:57343}),T.jsx(ao,{frame:[0,0,1170,2],color:57343,y:57}),T.jsx($P,{x:735,y:15,path:[[0,0],[0,30],[-15,15]],color:57343}),T.jsx($P,{x:435,y:15,path:[[0,0],[0,30],[15,15]],color:57343})]}),T.jsxs(Sc,{children:[T.jsx(QY,{hitFrame:[0,-270,1170,500],selected:l,cellHeight:60,y:203,onSelectedChange:n,selectedColor:57343,onScrollStart:h,onScrollEnd:c,children:i.map((v,x)=>T.jsx(Os,{x:588,y:25,anchor:.5,text:`${v}`,style:{fill:"#ffffff",fontWeight:"500",fontSize:50}},`selecterItem${x}`))}),T.jsx(lt,{name:"selecter_mask.png",scale:[234,2],y:35})]})]})}})]})}const gg=class gg{constructor(){P(this,"keys",[]);P(this,"keysChangedFCMap",{});window.addEventListener("keydown",this.onKeyDownHandler.bind(this)),window.addEventListener("keyup",this.onKeyUpHandler.bind(this))}static get Obj(){return this._Obj||(this._Obj=new gg),this._Obj}onKeyDownHandler(e){if(e&&e.key){const t=e.key.toLowerCase();this.keys.indexOf(t)==-1&&this.keys.push(t)}}onKeyUpHandler(e){if(e&&e.key){let t=e.key.toLowerCase();const n=this.keys.indexOf(t);if(n>-1){t=Xj(t);const i=`onKey${t==" "?"Space":t}`,s=this.keysChangedFCMap[i];for(const o of s||[])o();this.keys.splice(n,1)}}}setKeysFCMap(e,t){const n=this.keysChangedFCMap[e];n?n.push(t):this.keysChangedFCMap[e]=[t]}removeFc(e,t){const n=this.keysChangedFCMap[e],i=n.indexOf(t);i>-1&&n.splice(i,1)}};P(gg,"_Obj");let w_=gg;function cO({enable:r=!0,sound:e=!0,...t}){return B.useEffect(()=>{const n=w_.Obj,i=[];if(r){for(const o in t)o.match(/onKey[A-Z]\w+/)&&i.push(o);const s={};for(const o of i){let a=function(){u(),ji.clickSound()};const u=t[o];n.setKeysFCMap(o,a),s[o]=a}return()=>{for(const o of i)n.removeFc(o,s[o])}}},[t]),T.jsx(T.Fragment,{})}function JY({enable:r=!0,dataSource:e,...t}){const{dispatch:n,gameStatus:i,state:s,onSkip:o}=e.base,{betAmount:a,betLevel:u,spinModel:l}=s.spin,{balance:h}=s.user,{code:c}=s.setting.error,[d,p]=B.useState("idle"),g=s.spin.autoSpinCount=="∞"||s.spin.autoSpinCount>0,v=h.greaterThanOrEqualTo(a.mul(u)),x=i=="idle",y=d=="idle",w=d=="fast"||d=="fast1500",_=d=="stop",S=d=="skip",I=(l==null?void 0:l.isExistRespin)==!0,A=i==Kt.showWinAmount||i==Kt.showWinLine,{historyListOn:k,historyDetail:{on:M},payTableOn:O,menuOn:F}=s.setting,U=r&&!k&&!M&&!O&&!F;function H(){!(l?l.isExistRespin:!1)&&!v?(g&&n(RP()),n(en(GR.NotEnoughBalance,!0,!0))):c||n(MP())}function L(re=null,ce=!1){!A&&g&&!ce&&n(RP()),_?(n(MP()),ji.clickSound()):A?(o(),ji.clickSound()):x&&H()}function N(){!g&&x&&!I&&n(qz("∞","∞",0,0))}B.useEffect(()=>{if(i=="spin"&&(l==null?void 0:l.isExistRespin)==!1){const re=a.mul(u);n(Uy(h.sub(re)))}else i=="idle"&&l&&!l.isExistRespin&&!l.isFromLoad?n(Uy(l.balance||h)):i=="stopping"&&l.payout.isZero()&&!h.eq(l.balance)&&n(Uy(l.balance))},[i]),B.useEffect(()=>{i=="spin"?p("fast"):x?p("idle"):i!="stopping"&&d!="fast"?p("skip"):i=="stopping"&&d=="fast1500"&&p("stop")},[i]),Qm(()=>{i=="stopping"?p("stop"):x?p("idle"):i!="spin"?p("skip"):p("fast1500")},1500,d=="fast"),Qm(()=>{L(null,!0)},500,x&&(g||I));const j=w||y&&!g&&!I,Y=_,K=S&&(i==Kt.showWinAmount||i==Kt.showWinLine),X=x&&(g||I),W=U&&(x||Y||K),z=W||g,V=w||W?16777215:11184810,Z=B.useMemo(()=>g?[0,"Auto",!0]:[0,"Idle",!0],[g]);return T.jsxs(ge,{children:[T.jsx(cO,{onKeySpace:L.bind(null,null,!0),onKeyEnter:L.bind(null,null,!0),enable:W,sound:!1}),T.jsx(ge,{...t,children:T.jsx(Q3,{hitFrame:[-55,-60,110,110],onpointerup:L,onLongPress:N,enable:z,children:T.jsxs(ge,{x:97,y:81,pivot:[98,94],children:[T.jsxs(nO,{slotName:"Counter",children:[T.jsx(aY,{scale:.5,action:Z,playing:!0,timeScale:1,tint:V}),T.jsx(lt,{y:20,anchor:.5,scale:2.5,name:"infinite.png",visible:X})]}),T.jsx(SY,{speed:d!="idle"?2:.1,children:re=>T.jsxs(ge,{children:[T.jsx(lt,{visible:j,anchor:[.48,.49],name:"Spin.png",rotation:re}),T.jsx(lt,{y:11,visible:Y,anchor:.5,name:"stop.png"}),T.jsx(lt,{x:2,y:12,visible:K,anchor:.5,name:"skip.png"})]})})]})})})]})}const eG=({dataSource:r})=>{const{dispatch:e,gameStatus:t,state:n}=r.base,{speedModel:i,spinModel:s}=n.spin,o=n.spin.autoSpinCount=="∞"||n.spin.autoSpinCount>0,a=i=="fast",l=t=="idle"&&(!s||!s.isExistRespin);function h(){l&&e(Kz(a?"normal":"fast"))}return T.jsx(bc,{children:T.jsxs(ge,{"l-x":925,"l-y":-28,"p-x":582,"p-y":-100,"l-scale":1,"p-scale":1,children:[T.jsx(JY,{dataSource:r,"l-x":73,"l-y":-60,"p-x":0,"p-y":0,"l-visible":!0,"p-visible":!0,"l-enable":!0,"p-enable":!0}),T.jsxs(po,{"l-x":75,"l-y":93,"p-x":230,"p-y":5,click:h,"l-scale":1,"p-scale":.8,interactive:l&&!o,children:[T.jsx(lt,{name:"turbo_disable.png",anchor:.5,visible:a||!l||o}),T.jsx(lt,{name:"turbo_enable.png",anchor:.5,visible:!a&&l&&!o}),T.jsx(Ns,{from:{k:0},to:{k:1},playing:a,duration:2e3,repeat:1e6,children:({k:c})=>T.jsx(lt,{visible:a,alpha:.5+Math.sin(Math.PI*2*c)*.5,name:"turbo_activate.png",anchor:.5,y:-2})})]})]})})};function tG({dataSource:r}){const{state:e,dispatch:t,gameStatus:n}=r.base,{menuOn:i}=e.setting,{currency:s}=e.user,{betLevel:o,betAmount:a,lineBetsModel:u,spinModel:l}=e.spin,[h,c]=B.useState(!1),{lineBets:d}=e.spin.lineBetsModel,p=B.useRef(null),g=B.useRef(null),v=Be.Obj,x=ni.any,w=n=="idle"&&(!l||!l.isExistRespin),_=e.spin.autoSpinCount=="∞"||e.spin.autoSpinCount>0;function S(){const F=d.indexOf(a.toFixed(2))+1;F<d.length&&t(Qs(d[F]))}function I(){const F=d.indexOf(a.toFixed(2))-1;F>=0&&t(Qs(d[F]))}function A(){t(cI(!i))}B.useEffect(()=>{if(p.current,g.current){const F=()=>{const U=v.orientation,H=v.viewport[0],L=v.viewport[1],N=v.viewport[3],j=v.layoutOptions.displayArea[0],Y=v.layoutOptions.displayArea[1];p.current.y=N-L+Y,U=="l"||g.current.position.set(-H+50+j,-L+50+Y)};return F(),v.notice.on(Xi,F),()=>{v.notice.off(Xi,F)}}},[p]);const k=w&&!_&&a.toNumber()!=Number(u.lineBets[0]),M=w&&!_&&a.toNumber()!=Number(Po(u.lineBets)),O=fr(Be.Obj.urlOptions.lang);return T.jsxs(ge,{children:[T.jsxs(bc,{children:[T.jsxs(ge,{"l-x":585,"p-x":585,"l-pivot":[585,115],"p-pivot":[585,82],ref:p,children:[T.jsx(lt,{name:"UI_Container.jpg","l-y":0,"p-y":-160}),T.jsx(lt,{name:"value_bg.png","l-y":52,"p-y":27}),T.jsx(po,{interactive:w&&!_,"l-x":73,"l-y":77,"p-x":335,"p-y":-97,"l-visible":!0,"p-visible":!0,click:A,children:T.jsx(lt,{name:"menu-on.png",anchor:.5,tint:w&&!_?16777215:8947848})}),T.jsxs(ge,{"l-x":315,"l-y":35,"p-x":390,"p-y":10,children:[T.jsxs(ge,{"l-x":265,"l-y":-15,"p-x":195,"p-y":-15,children:[x?T.jsx(ge,{children:T.jsxs(sg,{y:52,interactive:w&&!_,click:c.bind(null,!0),children:[T.jsx(lt,{name:"bet_amount_bg.png",anchor:.5,"l-scale":1,"p-scale":.8,tint:w&&!_?16777215:8947848}),T.jsx(Os,{anchor:.5,y:-2,text:gn(a),maxScaleLength:150,style:{fill:"#00dfff",fontFamily:O,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]})}):T.jsxs(ge,{children:[T.jsxs(ge,{y:55,children:[T.jsx(po,{"l-x":-95,"p-x":-75,click:I,interactive:k,children:T.jsx(lt,{name:"bet_minus.png",anchor:.5,tint:k?16777215:8947848})}),T.jsx(po,{"l-x":82,"p-x":75,click:S,interactive:M,children:T.jsx(lt,{name:"bet_plus.png",anchor:.5,tint:M?16777215:8947848})})]}),T.jsx(ge,{y:52,children:T.jsx(Os,{anchor:.5,x:-1,y:-1,text:gn(a),maxScaleLength:100,style:{fill:"#00dfff",fontFamily:O,fontWeight:"500",dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]}),T.jsx(Oh,{"l-x":-2,"p-x":0,"l-y":x?5:15,"p-y":0,anchor:.5,text:"betamount",style:{fill:"#00dfff",fontFamily:O,fontWeight:"500",fontSize:24,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})]}),T.jsxs(ge,{x:-13,children:[T.jsx(Oh,{y:5,anchor:.5,text:"balance",maxScaleLength:140,style:{fill:"#eeeeee",fontFamily:O,fontWeight:"500",fontSize:24,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),T.jsx(ge,{y:37,children:T.jsx(jP,{anchor:.5,tmp:`${s} {}`,"p-maxScaleLength":200,"l-maxScaleLength":280,text:e.user.balance.toNumber(),style:{fontSize:26,fill:"#eeeeee",fontFamily:O,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]}),T.jsxs(ge,{"l-x":500,"p-x":403,children:[T.jsx(Oh,{y:5,anchor:.5,text:"totalbet",maxScaleLength:140,style:{fill:"#eeeeee",fontFamily:O,fontWeight:"500",fontSize:24,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}}),T.jsx(ge,{y:37,children:T.jsx(jP,{anchor:.5,tmp:`${s} {}`,"p-maxScaleLength":200,"l-maxScaleLength":230,text:o==null?void 0:o.mul(a),style:{fontSize:26,fill:"#eeeeee",fontFamily:O,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:2,dropShadowAngle:Math.PI/6,dropShadowDistance:2}})})]})]}),T.jsx(ge,{children:T.jsx(eG,{dataSource:r})})]}),T.jsx(sg,{ref:g,"l-visible":!1,"p-visible":!1,click:A,children:T.jsx(lt,{name:"menu-on.png",anchor:.5})})]}),T.jsx(ZY,{on:h,onClose:c.bind(null,!1),betAmount:a.toNumber(),lineBets:d,onSelectedChange:F=>{d[F]&&t(Qs(d[F]))}})]})}const rG=({...r})=>T.jsx($$,{children:T.jsx(H$,{children:T.jsx(Y$,{children:T.jsx(G$,{children:T.jsx(X$,{children:({dataSource:e})=>T.jsxs(Jg,{...r,children:[T.jsx(RY,{dataSource:e}),T.jsxs(ge,{x:266,y:303,children:[T.jsx(OY,{dataSource:e}),T.jsx(ws,{x:314,y:52,anchor:.5,scale:.66,name:"logo.png"})]}),T.jsx(Ta,{x:1030,y:945,"l-playing":!0,"p-playing":!1,"l-visible":!0,"p-visible":!1,scale:.45,action:fr([0,"HP_LORE_IDLE",!0])}),T.jsx(NY,{dataSource:e,x:44,y:378,"l-visible":!0,"p-visible":!1}),T.jsx(BY,{dataSource:e,x:288,y:140,"l-visible":!1,"p-visible":!0}),T.jsx(GY,{dataSource:e}),T.jsx(uY,{dataSource:e,"l-x":60,"l-y":760,"l-isP":!1,"p-x":439,"p-y":830,"p-isP":!0}),T.jsx(kY,{x:588,y:765,dataSource:e}),T.jsx(tG,{dataSource:e}),T.jsx(MY,{x:588,y:765,dataSource:e}),T.jsx(IY,{x:588,y:774,dataSource:e}),T.jsx(AY,{dataSource:e}),T.jsx(qY,{dataSource:e})]})})})})})}),nG=({...r})=>{const e=B.useMemo(()=>D$(Be.Obj.urlOptions.lang),[]);return T.jsx(L$,{assets:e,...r})};function iG({children:r,selected:e=0,direction:t="H",size:n,onSelectedChange:i,onScrollStart:s,onScrollEnd:o,...a}){const[u,l]=B.useState(!1),[h,c]=B.useState(!0),{current:d}=B.useRef({tween:null,startPoint:null,movement:{x:0,y:0},page:e,update:!1}),p=B.Children.count(r),g=Math.floor(p/2);function v(k){return(k+g+p)%p-g}function x(){let k;return t=="H"?k=d.movement.x/n[0]:k=d.movement.y/n[1],(d.page+k+p)%p}function y(k,M=!0,O=d.page){M&&O!=k?(d.tween&&(d.tween.stop(),d.tween.end(),jk(d.tween)),d.tween=new Z_({page:O}).to({page:k},200).onStart(()=>{c(!1)}).onUpdate(F=>{d.page=F.page,d.update=!0}).onComplete(()=>{c(!0);const F=(k+p)%p;i&&i(F),d.page=F,d.update=!0}).start(Be.Obj.getTime(!1))):d.page=k}function w(k){d.startPoint={x:k.x,y:k.y},s&&s()}function _(k){d.startPoint&&(d.update=!0,d.movement={x:-(k.x-d.startPoint.x),y:-(k.y-d.startPoint.y)})}function S(k){if(d.startPoint){let M;t=="H"?M=d.movement.x/n[0]:M=d.movement.y/n[1];const O=d.page+M;M=Math.round(M+(M>0?.25:-.25));const F=d.page+M;d.startPoint=null,o&&o(),d.movement={x:0,y:0},d.page=O,y(F,!0,O)}}const I=B.useMemo(()=>{if(t=="H"){const k=n[0];return M=>({x:M*k})}else{const k=n[1];return M=>({y:M*k})}},[t]),A=B.useMemo(()=>x(),[d.movement.x,d.movement.y,d.page]);return B.useEffect(()=>{d.page!=e&&!d.startPoint&&y(e,!0,d.page)},[e]),Rt.useTick(()=>{d.update&&(l(!u),d.update=!1)},!0),T.jsx(ge,{hitFrame:[0,0,...n],interactive:h,cursor:"pointer",onpointerdown:w,onpointermove:_,onpointerupoutside:S,onpointerup:S,onpointerout:S,...a,children:B.Children.map(r,(k,M)=>{const O=v(-A+M);return T.jsx(ge,{...I(O),visible:O>-1&&O<1,children:k})})})}const la=[0,105,210,315,420],Bh=[0,100,200],sG=[[1,3,0],[6,5,4],[6,6,6],[2,5,6],[0,4,1]],oG=[[0,0],[la[1],0],[la[1],Bh[1]],[la[1],Bh[2]],[la[2],Bh[2]]],aG=[[1,3,0],[6,5,4],[6,6,6],[2,5,6]];function lG({...r}){const{current:e}=B.useRef({inScroll:!1}),[t,n]=B.useState(0),i=Be.Obj.urlOptions.lang;Yu(8e3,()=>{e.inScroll||n(1)},t==0),Yu(8e3,()=>{e.inScroll||n(2)},t==1),Yu(8e3,()=>{e.inScroll||n(0)},t==2);function s(){n((t+3-1)%3)}function o(){n((t+1)%3)}function a(){e.inScroll=!0}function u(){e.inScroll=!1}return T.jsxs(ge,{...r,children:[T.jsx(lt,{name:"loading_panel.png"}),T.jsxs(Sc,{x:120,y:45,children:[T.jsxs(iG,{y:5,x:60,size:[655,425],selected:t,onSelectedChange:n,onScrollStart:a,onScrollEnd:u,children:[T.jsxs(ge,{children:[T.jsx(Rt.Container,{x:155,y:50,children:oG.map(([l,h],c)=>T.jsx(Ta,{x:l,y:h,playing:t==0,scale:.5,action:fr([0,"SYMBOL",!0])},`p1-${c}`))}),sG.map((l,h)=>T.jsx(ge,{x:la[h]+52.5,children:l.map((c,d)=>T.jsx(Zm,{anchor:.5,y:Bh[d]+50,name:`${c}.png`},`p1_${d}`))},`p1${h}`)),T.jsx(ws,{x:258,y:325,anchor:[.5,0],name:"text1.png",scale:i==co.Portuguese?1:1.34})]}),T.jsxs(ge,{children:[aG.map((l,h)=>T.jsx(ge,{x:la[h]+52.5,children:l.map((c,d)=>T.jsx(Zm,{anchor:.5,y:Bh[d]+50,name:`${c}.png`},`p1_${d}`))},`p1${h}`)),t==1?T.jsx(lO,{x:la[4],ss:[7,0,1],y:10,scale:.92}):T.jsx(T.Fragment,{}),T.jsx(ws,{x:258,y:325,anchor:[.5,0],name:"text2.png",scale:1.34})]}),T.jsxs(ge,{children:[br(5,l=>T.jsx(Ta,{x:la[l]+55,y:145,playing:t==2,scale:.46,action:fr([0,"WILD_IDLE",!0])},`p3-${l}`)),T.jsx(ws,{x:258,y:315,anchor:[.5,0],name:"text3.png",scale:1.34})]})]}),T.jsx(ao,{frame:[0,0,655,425],color:0})]}),T.jsx(ge,{x:375,y:535,children:br(3,l=>T.jsxs(po,{x:50*l,click:n.bind(null,l),children:[T.jsx(lt,{visible:t==l,y:0,name:"loading_panel_lit.png"}),T.jsx(lt,{visible:t!=l,name:"loading_panel_unlit.png"})]},`page_tip_${l}`))}),T.jsxs(ge,{y:200,children:[T.jsx(po,{x:80,click:s,children:T.jsx(lt,{name:"loading_arrow_left.png"})}),T.jsx(po,{x:740,click:o,children:T.jsx(lt,{name:"loading_arrow_right.png"})})]})]})}const uG=({...r})=>{const{dispatch:e}=B.useContext(_t);function t(){e(Yw("main"))}return T.jsx(Jg,{...r,children:T.jsxs(ge,{children:[T.jsx(cO,{onKeySpace:t,onKeyEnter:t,enable:!0}),T.jsx(KR,{name:qw}),T.jsx(lt,{"l-x":80,"l-y":310,"l-scale":1,"p-x":480,"p-y":180,"p-scale":.7,name:"loraloading.png"}),T.jsx(lG,{"l-x":300,"l-y":390,"l-scale":.75,"p-x":256,"p-y":530,"p-scale":.75}),T.jsx(ws,{"l-x":614,"l-y":365,"p-x":560,"p-y":500,"l-scale":.96,"p-scale":1,anchor:.5,name:"logo.png"}),T.jsxs(po,{"l-x":488,"l-y":820,"p-x":430,"p-y":1e3,click:t,children:[T.jsx(lt,{name:"loading_continue.png"}),T.jsx(ws,{x:146,y:46,anchor:.5,scale:2,name:"continue.png"})]})]})})};/*!
 * better-scroll / slide
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 */function hO(r){console.error("[BScroll warn]: "+r)}var Rd=typeof window<"u",og=Rd&&navigator.userAgent.toLowerCase();og&&og.indexOf("android")>0;(function(){if(typeof og=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(og);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var cG=!1;if(Rd){var hG="test-passive";try{var YP={};Object.defineProperty(YP,"passive",{get:function(){cG=!0}}),window.addEventListener(hG,function(){},YP)}catch{}}var Lh=function(r,e){for(var t in e)r[t]=e[t];return r};function Su(r,e,t){return r<e?e:r>t?t:r}var dO=Rd&&document.createElement("div").style,Gu=function(){if(!Rd)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(dO[n.value]!==void 0)return n.key}return!1}();function Zs(r){return Gu===!1?r:Gu==="standard"?r==="transitionEnd"?"transitionend":r:Gu+r.charAt(0).toUpperCase()+r.substr(1)}Gu&&Gu!=="standard"&&""+Gu.toLowerCase();var dG=Zs("transform"),fG=Zs("transition");Rd&&Zs("perspective")in dO;Zs("transitionTimingFunction"),Zs("transitionDuration"),Zs("transitionDelay"),Zs("transformOrigin"),Zs("transitionEnd"),Zs("transitionProperty");function pG(r,e){var t=e.firstChild;t?mG(r,t):e.appendChild(r)}function mG(r,e){var t=e.parentNode;t.insertBefore(r,e)}function gG(r,e){r.removeChild(e)}var Gy={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(r){return 1+--r*r*r*r*r}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(r){return 1- --r*r*r*r}}},fO={pageX:0,pageY:0,x:0,y:0},vG={x:0,y:0,width:0,height:0,cx:0,cy:0},yG=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY;this.wrapperWidth=t.wrapperSize,this.wrapperHeight=n.wrapperSize,this.scrollerHeight=n.contentSize,this.scrollerWidth=t.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},r.prototype.getPageStats=function(e,t){return this.pages[e]&&this.pages[e][t]?this.pages[e][t]:vG},r.prototype.getNearestPageIndex=function(e,t){for(var n=0,i=0,s=this.pages.length;n<s-1&&!(e>=this.pages[n][0].cx);n++);for(s=this.pages[n]?this.pages[n].length:0;i<s-1&&!(t>=this.pages[0][i].cy);i++);return{pageX:n,pageY:i}},r.prototype.buildPagesMatrix=function(e,t){var n=[],i=0,s,o,a,u=0,l,h=this.scroll.scroller.scrollBehaviorX.maxScrollPos,c=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(o=Math.round(e/2),a=Math.round(t/2);i>-this.scrollerWidth;){for(n[u]=[],l=0,s=0;s>-this.scrollerHeight;)n[u][l]={x:Math.max(i,h),y:Math.max(s,c),width:e,height:t,cx:i-o,cy:s-a},s-=t,l++;i-=e,u++}return n},r}(),xG=function(){function r(e,t){this.scroll=e,this.slideOptions=t,this.slideX=!1,this.slideY=!1,this.currentPage=Lh({},fO)}return r.prototype.refresh=function(){this.pagesMatrix=new yG(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},r.prototype.getAdjustedCurrentPage=function(){var e=this.currentPage,t=e.pageX,n=e.pageY;t=Math.min(t,this.pagesMatrix.pageLengthOfX-1),n=Math.min(n,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(t=Math.min(t,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(n=Math.min(n,this.pagesMatrix.pageLengthOfY-2));var i=this.pagesMatrix.getPageStats(t,n),s=i.x,o=i.y;return{pageX:t,pageY:n,x:s,y:o}},r.prototype.setCurrentPage=function(e){this.currentPage=e},r.prototype.getInternalPage=function(e,t){e>=this.pagesMatrix.pageLengthOfX?e=this.pagesMatrix.pageLengthOfX-1:e<0&&(e=0),t>=this.pagesMatrix.pageLengthOfY?t=this.pagesMatrix.pageLengthOfY-1:t<0&&(t=0);var n=this.pagesMatrix.getPageStats(e,t),i=n.x,s=n.y;return{pageX:e,pageY:t,x:i,y:s}},r.prototype.getInitialPage=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=this.slideOptions,i=n.startPageXIndex,s=n.startPageYIndex,o=this.loopX?1:0,a=this.loopY?1:0,u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY;t?(u=this.loopX?i+1:i,l=this.loopY?s+1:s):(u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY);var h=this.pagesMatrix.getPageStats(u,l),c=h.x,d=h.y;return{pageX:u,pageY:l,x:c,y:d}},r.prototype.getExposedPage=function(e){var t=Lh({},e);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},r.prototype.getExposedPageByPageIndex=function(e,t){var n={pageX:e,pageY:t};this.loopX&&(n.pageX=e+1),this.loopY&&(n.pageY=t+1);var i=this.pagesMatrix.getPageStats(n.pageX,n.pageY),s=i.x,o=i.y;return{x:s,y:o,pageX:e,pageY:t}},r.prototype.getWillChangedPage=function(e){return e=Lh({},e),this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2),e.x=this.pagesMatrix.getPageStats(e.pageX+1,0).x),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2),e.y=this.pagesMatrix.getPageStats(0,e.pageY+1).y),e},r.prototype.fixedPage=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},r.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},r.prototype.getValidPageIndex=function(e,t){var n=this.pagesMatrix.pageLengthOfX-1,i=this.pagesMatrix.pageLengthOfY-1,s=0,o=0;return this.loopX&&(e+=1,s=s+1,n=n-1),this.loopY&&(t+=1,o=o+1,i=i-1),e=Su(e,s,n),t=Su(t,o,i),{pageX:e,pageY:t}},r.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},r.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},r.prototype.getNearestPage=function(e,t){var n=this.pagesMatrix.getNearestPageIndex(e,t),i=n.pageX,s=n.pageY,o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.getPageByDirection=function(e,t,n){var i=e.pageX,s=e.pageY;i===this.currentPage.pageX&&(i=Su(i+t,0,this.pagesMatrix.pageLengthOfX-1)),s===this.currentPage.pageY&&(s=Su(s+n,0,this.pagesMatrix.pageLengthOfY-1));var o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.resetLoopPage=function(){if(this.loopX){if(this.currentPage.pageX===0)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(this.currentPage.pageY===0)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},r.prototype.getPageIndexByDirection=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t=e==="negative"?t-1:t+1),this.slideY&&(n=e==="negative"?n-1:n+1),{pageX:t,pageY:n}},r.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&hO("slide does not support two direction at the same time.")},r}(),_G="plugins.slide",wG=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],bG=wG.map(function(r){return{key:r.key,sourceKey:_G+"."+r.name}}),SG=function(r,e){return r.pageX===e.pageX&&r.pageY===e.pageY},TG=function(){function r(e){this.scroll=e,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return r.prototype.satisfyInitialization=function(){return this.scroll.scroller.content.children.length<=0?(hO("slide need at least one slide page to be initialised.please check your DOM layout."),!1):!0},r.prototype.init=function(){this.willChangeToPage=Lh({},fO),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},r.prototype.createPages=function(){this.pages=new xG(this.scroll,this.options)},r.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(bG)},r.prototype.handleOptions=function(){var e=this.scroll.options.slide===!0?{}:this.scroll.options.slide,t={loop:!0,threshold:.1,speed:400,easing:Gy.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0};this.options=Lh(t,e)},r.prototype.handleLoop=function(e){var t=this.options.loop,n=this.scroll.scroller.content,i=n.children.length;t&&(n!==e?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(e),i>1&&this.cloneFirstAndLastSlidePage(n)):i===3&&this.initialised?(this.removeClonedSlidePage(n),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):i>1?(this.initialised&&this.cachedClonedPageDOM.length===0?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(n),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(n)):this.resetLoopChangedStatus())},r.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,n=this.scroll.scroller.hooks,i=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,function(){return!0}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(s){(s.directionX===1||s.directionY===1)&&e.next(),(s.directionX===-1||s.directionY===-1)&&e.prev()})),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(n,n.eventTypes.beforeRefresh,function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()}),this.registerHooks(n,n.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(n,n.eventTypes.scroll,this.scrollHandler),this.registerHooks(n,n.eventTypes.checkClick,this.startPlay),i&&this.registerHooks(n,n.eventTypes.flick,this.flickHandler)},r.prototype.startPlay=function(){var e=this,t=this.options,n=t.interval,i=t.autoplay;i&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout(function(){e.next()},n))},r.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},r.prototype.setSlideInlineStyle=function(){var e=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],t=this.scroll.scroller,n=t.content,i=t.wrapper,s=this.scroll.options;e.forEach(function(o){var a=o.direction,u=o.sizeType,l=o.styleType;if(s[a]){for(var h=i[u],c=n.children,d=c.length,p=0;p<d;p++){var g=c[p];g.style[l]=h+"px"}n.style[l]=h*d+"px"}})},r.prototype.next=function(e,t){var n=this.pages.nextPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.prev=function(e,t){var n=this.pages.prevPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.goToPage=function(e,t,n,i){var s=this.pages.getValidPageIndex(e,t);this.goTo(s.pageX,s.pageY,n,i)},r.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},r.prototype.setCurrentPage=function(e){this.pages.setCurrentPage(e),this.exposedPage=this.pages.getExposedPage(e)},r.prototype.nearestPage=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=i.maxScrollPos,a=i.minScrollPos,u=s.maxScrollPos,l=s.minScrollPos;return this.pages.getNearestPage(Su(e,o,a),Su(t,u,l))},r.prototype.satisfyThreshold=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=!0;return Math.abs(e-i.absStartPos)<=this.thresholdX&&Math.abs(t-s.absStartPos)<=this.thresholdY&&(o=!1),o},r.prototype.refreshHandler=function(e){var t=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var n=this.contentChanged=this.prevContent!==e;n&&(this.prevContent=e);var i=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,n||!this.initialised);this.initialised?this.goTo(i.pageX,i.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(s){t.initialised=!0,s.x=i.x,s.y=i.y}),this.startPlay()}},r.prototype.computeThreshold=function(){var e=this.options.threshold;if(e%1===0)this.thresholdX=e,this.thresholdY=e;else{var t=this.pages.getPageStats(),n=t.width,i=t.height;this.thresholdX=Math.round(n*e),this.thresholdY=Math.round(i*e)}},r.prototype.cloneFirstAndLastSlidePage=function(e){var t=e.children,n=t[t.length-1].cloneNode(!0),i=t[0].cloneNode(!0);pG(n,e),e.appendChild(i),this.cachedClonedPageDOM=[n,i]},r.prototype.removeClonedSlidePage=function(e){var t=e&&e.children||[];t.length&&this.cachedClonedPageDOM.forEach(function(n){gG(e,n)}),this.cachedClonedPageDOM=[]},r.prototype.modifyCurrentPage=function(e){var t=this.getCurrentPage(),n=t.pageX,i=t.pageY,s=this.nearestPage(e.x,e.y);if(this.setCurrentPage(s),this.contentChanged)return this.contentChanged=!1,!0;var o=this.getCurrentPage(),a=o.pageX,u=o.pageY;if(this.pageWillChangeTo(s),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&n===0&&i===0)return this.moreToOnePageInLoop=!1,!0;if(n!==a||i!==u){var l=this.pages.getExposedPageByPageIndex(a,u);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,l)}if(this.resetLooping){this.resetLooping=!1;return}var h=this.pages.resetLoopPage();if(h)return this.resetLooping=!0,this.goTo(h.pageX,h.pageY,0),!0},r.prototype.goTo=function(e,t,n,i){var s=this.pages.getInternalPage(e,t),o=i||this.options.easing||Gy.bounce,a=s.x,u=s.y,l=a-this.scroll.scroller.scrollBehaviorX.currentPos,h=u-this.scroll.scroller.scrollBehaviorY.currentPos;if(!l&&!h){this.scroll.scroller.togglePointerEvents(!0);return}n=n===void 0?this.getEaseTime(l,h):n,this.scroll.scroller.scrollTo(a,u,n,o)},r.prototype.flickHandler=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos,s=t.startPos,o=t.direction,a=n.currentPos,u=n.startPos,l=n.direction,h=this.pages.currentPage,c=h.pageX,d=h.pageY,p=this.getEaseTime(i-s,a-u);this.goTo(c+o,d+l,p)},r.prototype.getEaseTime=function(e,t){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},r.prototype.modifyScrollMetaHandler=function(e){var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=t.animater,o=e.newX,a=e.newY,u=this.satisfyThreshold(o,a)||s.forceStopped?this.pages.getPageByDirection(this.nearestPage(o,a),n.direction,i.direction):this.pages.currentPage;e.time=this.getEaseTime(e.newX-u.x,e.newY-u.y),e.newX=u.x,e.newY=u.y,e.easing=this.options.easing||Gy.bounce},r.prototype.scrollHandler=function(e){var t=e.x,n=e.y;if(this.satisfyThreshold(t,n)){var i=this.nearestPage(t,n);this.pageWillChangeTo(i)}},r.prototype.pageWillChangeTo=function(e){var t=this.pages.getWillChangedPage(e);SG(this.willChangeToPage,t)||(this.willChangeToPage=t,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){var e=this.scroll.scroller.content,t=this.options,n=t.loop,i=t.autoplay;n&&this.removeClonedSlidePage(e),i&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],u=s[2];o.eventTypes[a]&&o.off(a,u)}),this.hooksFn.length=0},r.pluginName="slide",r}();/*!
 * better-scroll / better-scroll
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var b_=function(r,e){return b_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},b_(r,e)};function i0(r,e){b_(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var $i=function(){return $i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},$i.apply(this,arguments)};function Wy(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(n.next(h))}catch(c){o(c)}}function u(h){try{l(n.throw(h))}catch(c){o(c)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function Vy(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(h){return u([l,h])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(h){l=[6,h],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ag(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}var EG=[{sourceKey:"scroller.scrollBehaviorX.currentPos",key:"x"},{sourceKey:"scroller.scrollBehaviorY.currentPos",key:"y"},{sourceKey:"scroller.scrollBehaviorX.hasScroll",key:"hasHorizontalScroll"},{sourceKey:"scroller.scrollBehaviorY.hasScroll",key:"hasVerticalScroll"},{sourceKey:"scroller.scrollBehaviorX.contentSize",key:"scrollerWidth"},{sourceKey:"scroller.scrollBehaviorY.contentSize",key:"scrollerHeight"},{sourceKey:"scroller.scrollBehaviorX.maxScrollPos",key:"maxScrollX"},{sourceKey:"scroller.scrollBehaviorY.maxScrollPos",key:"maxScrollY"},{sourceKey:"scroller.scrollBehaviorX.minScrollPos",key:"minScrollX"},{sourceKey:"scroller.scrollBehaviorY.minScrollPos",key:"minScrollY"},{sourceKey:"scroller.scrollBehaviorX.movingDirection",key:"movingDirectionX"},{sourceKey:"scroller.scrollBehaviorY.movingDirection",key:"movingDirectionY"},{sourceKey:"scroller.scrollBehaviorX.direction",key:"directionX"},{sourceKey:"scroller.scrollBehaviorY.direction",key:"directionY"},{sourceKey:"scroller.actions.enabled",key:"enabled"},{sourceKey:"scroller.animater.pending",key:"pending"},{sourceKey:"scroller.animater.stop",key:"stop"},{sourceKey:"scroller.scrollTo",key:"scrollTo"},{sourceKey:"scroller.scrollBy",key:"scrollBy"},{sourceKey:"scroller.scrollToElement",key:"scrollToElement"},{sourceKey:"scroller.resetPosition",key:"resetPosition"}];function Di(r){console.error("[BScroll warn]: "+r)}function GP(r,e){if(!r)throw new Error("[BScroll] "+e)}var Fs=typeof window<"u",fc=Fs&&navigator.userAgent.toLowerCase(),PG=!!(fc&&/wechatdevtools/.test(fc)),CG=fc&&fc.indexOf("android")>0,AG=function(){if(typeof fc=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(fc);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1}(),pO=!1;if(Fs){var kG="test-passive";try{var WP={};Object.defineProperty(WP,"passive",{get:function(){pO=!0}}),window.addEventListener(kG,function(){},WP)}catch{}}function Fn(){return window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:+new Date}var Gr=function(r,e){for(var t in e)r[t]=e[t];return r};function S_(r){return r==null}function IG(r,e){return Math.sqrt(r*r+e*e)}function tr(r,e,t){return r<e?e:r>t?t:r}function Tu(r,e){if(r.findIndex)return r.findIndex(e);var t=-1;return r.some(function(n,i,s){var o=e(n,i,s);if(o)return t=i,o}),t}var Tb=Fs&&document.createElement("div").style,Wu=function(){if(!Fs)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(Tb[n.value]!==void 0)return n.key}return!1}();function Js(r){return Wu===!1?r:Wu==="standard"?r==="transitionEnd"?"transitionend":r:Wu+r.charAt(0).toUpperCase()+r.substr(1)}function mO(r){return typeof r=="string"?document.querySelector(r):r}function MG(r,e,t,n){var i=pO?{passive:!1,capture:!!n}:!!n;r.addEventListener(e,t,i)}function RG(r,e,t,n){r.removeEventListener(e,t,{capture:!!n})}function hl(r){r.cancelable&&r.preventDefault()}function VP(r){for(var e=0,t=0;r;)e-=r.offsetLeft,t-=r.offsetTop,r=r.offsetParent;return{left:e,top:t}}function OG(r){var e=r.getBoundingClientRect();return{left:-(e.left+window.pageXOffset),top:-(e.top+window.pageYOffset)}}var NG=Wu&&Wu!=="standard"?"-"+Wu.toLowerCase()+"-":"",BG=Js("transform"),gO=Js("transition"),LG=Fs&&Js("perspective")in Tb,qP=Fs&&("ontouchstart"in window||PG),FG=Fs&&gO in Tb,Ut={transform:BG,transition:gO,transitionTimingFunction:Js("transitionTimingFunction"),transitionDuration:Js("transitionDuration"),transitionDelay:Js("transitionDelay"),transformOrigin:Js("transformOrigin"),transitionEnd:Js("transitionEnd"),transitionProperty:Js("transitionProperty")},qy={touchstart:1,touchmove:1,touchend:1,touchcancel:1,mousedown:2,mousemove:2,mouseup:2};function wl(r){if(r instanceof window.SVGElement){var e=r.getBoundingClientRect();return{top:e.top,left:e.left,width:e.width,height:e.height}}else return{top:r.offsetTop,left:r.offsetLeft,width:r.offsetWidth,height:r.offsetHeight}}function pc(r,e){for(var t in e)if(e[t].test(r[t]))return!0;return!1}var DG=pc;function UG(r,e){var t=document.createEvent("Event");t.initEvent(e,!0,!0),t.pageX=r.pageX,t.pageY=r.pageY,r.target.dispatchEvent(t)}function vO(r,e){e===void 0&&(e="click");var t;r.type==="mouseup"?t=r:(r.type==="touchend"||r.type==="touchcancel")&&(t=r.changedTouches[0]);var n={};t&&(n.screenX=t.screenX||0,n.screenY=t.screenY||0,n.clientX=t.clientX||0,n.clientY=t.clientY||0);var i,s=!0,o=!0,a=r.ctrlKey,u=r.shiftKey,l=r.altKey,h=r.metaKey,c={ctrlKey:a,shiftKey:u,altKey:l,metaKey:h};if(typeof MouseEvent<"u")try{i=new MouseEvent(e,Gr($i({bubbles:s,cancelable:o},c),n))}catch{d()}else d();function d(){i=document.createEvent("Event"),i.initEvent(e,s,o),Gr(i,n)}i.forwardedTouchEvent=!0,i._constructed=!0,r.target.dispatchEvent(i)}function jG(r){vO(r,"dblclick")}function XG(r,e){var t=e.firstChild;t?HG(r,t):e.appendChild(r)}function HG(r,e){var t=e.parentNode;t.insertBefore(r,e)}function zG(r,e){r.removeChild(e)}function _p(r,e){var t=new RegExp("(^|\\s)"+e+"(\\s|$)");return t.test(r.className)}function $G(r){return Array.prototype.slice.call(r,0)}function YG(r){return{width:r.clientWidth,height:r.clientHeight}}var Ir={swipe:{style:"cubic-bezier(0.23, 1, 0.32, 1)",fn:function(r){return 1+--r*r*r*r*r}},swipeBounce:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(r){return r*(2-r)}},bounce:{style:"cubic-bezier(0.165, 0.84, 0.44, 1)",fn:function(r){return 1- --r*r*r*r}}},GG=1e3/60,ua=Fs&&window;function yO(){}var Eb=function(){return Fs?ua.requestAnimationFrame||ua.webkitRequestAnimationFrame||ua.mozRequestAnimationFrame||ua.oRequestAnimationFrame||function(r){return window.setTimeout(r,r.interval||GG)}:yO}(),Ea=function(){return Fs?ua.cancelAnimationFrame||ua.webkitCancelAnimationFrame||ua.mozCancelAnimationFrame||ua.oCancelAnimationFrame||function(r){window.clearTimeout(r)}:yO}(),KP=function(r){},Ky={enumerable:!0,configurable:!0,get:KP,set:KP},WG=function(r,e){for(var t=e.split("."),n=0;n<t.length-1;n++)if(r=r[t[n]],typeof r!="object"||!r)return;var i=t.pop();return typeof r[i]=="function"?function(){return r[i].apply(r,arguments)}:r[i]},VG=function(r,e,t){for(var n=e.split("."),i,s=0;s<n.length-1;s++)i=n[s],r[i]||(r[i]={}),r=r[i];r[n.pop()]=t};function qG(r,e,t){Ky.get=function(){return WG(this,e)},Ky.set=function(i){VG(this,e,i)},Object.defineProperty(r,t,Ky)}var So=function(){function r(e){this.events={},this.eventTypes={},this.registerType(e)}return r.prototype.on=function(e,t,n){return n===void 0&&(n=this),this.hasType(e),this.events[e]||(this.events[e]=[]),this.events[e].push([t,n]),this},r.prototype.once=function(e,t,n){var i=this;n===void 0&&(n=this),this.hasType(e);var s=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];i.off(e,s);var u=t.apply(n,o);if(u===!0)return u};return s.fn=t,this.on(e,s),this},r.prototype.off=function(e,t){if(!e&&!t)return this.events={},this;if(e){if(this.hasType(e),!t)return this.events[e]=[],this;var n=this.events[e];if(!n)return this;for(var i=n.length;i--;)(n[i][0]===t||n[i][0]&&n[i][0].fn===t)&&n.splice(i,1);return this}},r.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.hasType(e);var i=this.events[e];if(i)for(var s=i.length,o=ag(i),a,u=0;u<s;u++){var l=o[u],h=l[0],c=l[1];if(h&&(a=h.apply(c,t),a===!0))return a}},r.prototype.registerType=function(e){var t=this;e.forEach(function(n){t.eventTypes[n]=n})},r.prototype.destroy=function(){this.events={},this.eventTypes={}},r.prototype.hasType=function(e){var t=this.eventTypes,n=t[e]===e;n||Di('EventEmitter has used unknown event type: "'+e+'", should be oneof ['+(""+Object.keys(t).map(function(i){return JSON.stringify(i)}))+"]")},r}(),_n=function(){function r(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return r.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},r.prototype.addDOMEvents=function(){this.handleDOMEvents(MG)},r.prototype.removeDOMEvents=function(){this.handleDOMEvents(RG)},r.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach(function(i){e(n,i.name,t,!!i.capture)})},r.prototype.handleEvent=function(e){var t=e.type;this.events.some(function(n){return n.name===t?(n.handler(e),!0):!1})},r}(),KG=function(){function r(){}return r}(),QG=function(r){i0(e,r);function e(){var t=r.call(this)||this;return t.startX=0,t.startY=0,t.scrollX=!1,t.scrollY=!0,t.freeScroll=!1,t.directionLockThreshold=0,t.eventPassthrough="",t.click=!1,t.dblclick=!1,t.tap="",t.bounce={top:!0,bottom:!0,left:!0,right:!0},t.bounceTime=800,t.momentum=!0,t.momentumLimitTime=300,t.momentumLimitDistance=15,t.swipeTime=2500,t.swipeBounceTime=500,t.deceleration=.0015,t.flickLimitTime=200,t.flickLimitDistance=100,t.resizePolling=60,t.probeType=0,t.stopPropagation=!1,t.preventDefault=!0,t.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/},t.tagException={tagName:/^TEXTAREA$/},t.HWCompositing=!0,t.useTransition=!0,t.bindToWrapper=!1,t.bindToTarget=!1,t.disableMouse=qP,t.disableTouch=!qP,t.autoBlur=!0,t.autoEndDistance=5,t.outOfBoundaryDampingFactor=1/3,t.specifiedIndexAsContent=0,t.quadrant=1,t}return e.prototype.merge=function(t){if(!t)return this;for(var n in t){if(n==="bounce"){this.bounce=this.resolveBounce(t[n]);continue}this[n]=t[n]}return this},e.prototype.process=function(){return this.translateZ=this.HWCompositing&&LG?" translateZ(1px)":"",this.useTransition=this.useTransition&&FG,this.preventDefault=!this.eventPassthrough&&this.preventDefault,this.scrollX=this.eventPassthrough==="horizontal"?!1:this.scrollX,this.scrollY=this.eventPassthrough==="vertical"?!1:this.scrollY,this.freeScroll=this.freeScroll&&!this.eventPassthrough,this.scrollX=this.freeScroll?!0:this.scrollX,this.scrollY=this.freeScroll?!0:this.scrollY,this.directionLockThreshold=this.eventPassthrough?0:this.directionLockThreshold,this},e.prototype.resolveBounce=function(t){var n={top:!0,right:!0,bottom:!0,left:!0},i={top:!1,right:!1,bottom:!1,left:!1},s;return typeof t=="object"?s=Gr(n,t):s=t?n:i,s},e}(KG),ZG=function(){function r(e,t){this.wrapper=e,this.options=t,this.hooks=new So(["beforeStart","start","move","end","click"]),this.handleDOMEvents()}return r.prototype.handleDOMEvents=function(){var e=this.options,t=e.bindToWrapper,n=e.disableMouse,i=e.disableTouch,s=e.click,o=this.wrapper,a=t?o:window,u=[],l=[],h=!i,c=!n;s&&u.push({name:"click",handler:this.click.bind(this),capture:!0}),h&&(u.push({name:"touchstart",handler:this.start.bind(this)}),l.push({name:"touchmove",handler:this.move.bind(this)},{name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),c&&(u.push({name:"mousedown",handler:this.start.bind(this)}),l.push({name:"mousemove",handler:this.move.bind(this)},{name:"mouseup",handler:this.end.bind(this)})),this.wrapperEventRegister=new _n(o,u),this.targetEventRegister=new _n(a,l)},r.prototype.beforeHandler=function(e,t){var n=this.options,i=n.preventDefault,s=n.stopPropagation,o=n.preventDefaultException,a={start:function(){return i&&!pc(e.target,o)},end:function(){return i&&!pc(e.target,o)},move:function(){return i}};a[t]()&&e.preventDefault(),s&&e.stopPropagation()},r.prototype.setInitiated=function(e){e===void 0&&(e=0),this.initiated=e},r.prototype.start=function(e){var t=qy[e.type];if(!(this.initiated&&this.initiated!==t)){if(this.setInitiated(t),DG(e.target,this.options.tagException)){this.setInitiated();return}if(!(t===2&&e.button!==0)&&!this.hooks.trigger(this.hooks.eventTypes.beforeStart,e)){this.beforeHandler(e,"start");var n=e.touches?e.touches[0]:e;this.pointX=n.pageX,this.pointY=n.pageY,this.hooks.trigger(this.hooks.eventTypes.start,e)}}},r.prototype.move=function(e){if(qy[e.type]===this.initiated){this.beforeHandler(e,"move");var t=e.touches?e.touches[0]:e,n=t.pageX-this.pointX,i=t.pageY-this.pointY;if(this.pointX=t.pageX,this.pointY=t.pageY,!this.hooks.trigger(this.hooks.eventTypes.move,{deltaX:n,deltaY:i,e})){var s=document.documentElement.scrollLeft||window.pageXOffset||document.body.scrollLeft,o=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,a=this.pointX-s,u=this.pointY-o,l=this.options.autoEndDistance;(a>document.documentElement.clientWidth-l||u>document.documentElement.clientHeight-l||a<l||u<l)&&this.end(e)}}},r.prototype.end=function(e){qy[e.type]===this.initiated&&(this.setInitiated(),this.beforeHandler(e,"end"),this.hooks.trigger(this.hooks.eventTypes.end,e))},r.prototype.click=function(e){this.hooks.trigger(this.hooks.eventTypes.click,e)},r.prototype.setContent=function(e){e!==this.wrapper&&(this.wrapper=e,this.rebindDOMEvents())},r.prototype.rebindDOMEvents=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.handleDOMEvents()},r.prototype.destroy=function(){this.wrapperEventRegister.destroy(),this.targetEventRegister.destroy(),this.hooks.destroy()},r}(),Qy={x:["translateX","px"],y:["translateY","px"]},JG=function(){function r(e){this.setContent(e),this.hooks=new So(["beforeTranslate","translate"])}return r.prototype.getComputedPosition=function(){var e=window.getComputedStyle(this.content,null),t=e[Ut.transform].split(")")[0].split(", "),n=+(t[12]||t[4])||0,i=+(t[13]||t[5])||0;return{x:n,y:i}},r.prototype.translate=function(e){var t=[];Object.keys(e).forEach(function(n){if(Qy[n]){var i=Qy[n][0];if(i){var s=Qy[n][1],o=e[n];t.push(i+"("+o+s+")")}}}),this.hooks.trigger(this.hooks.eventTypes.beforeTranslate,t,e),this.style[Ut.transform]=t.join(" "),this.hooks.trigger(this.hooks.eventTypes.translate,e)},r.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style)},r.prototype.destroy=function(){this.hooks.destroy()},r}(),xO=function(){function r(e,t,n){this.translater=t,this.options=n,this.timer=0,this.hooks=new So(["move","end","beforeForceStop","forceStop","callStop","time","timeFunction"]),this.setContent(e)}return r.prototype.translate=function(e){this.translater.translate(e)},r.prototype.setPending=function(e){this.pending=e},r.prototype.setForceStopped=function(e){this.forceStopped=e},r.prototype.setCallStop=function(e){this.callStopWhenPending=e},r.prototype.setContent=function(e){this.content!==e&&(this.content=e,this.style=e.style,this.stop())},r.prototype.clearTimer=function(){this.timer&&(Ea(this.timer),this.timer=0)},r.prototype.destroy=function(){this.hooks.destroy(),Ea(this.timer)},r}(),eW=function(r,e,t,n){var i=function(l,h){var c=l-h,d=c>0?-1:c<0?1:0;return d},s=i(e.x,r.x),o=i(e.y,r.y),a=t.x-n.x,u=t.y-n.y;return s*a<=0&&o*u<=0},tW=function(r){i0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.startProbe=function(t,n){var i=this,s=t,o=function(){var a=i.translater.getComputedPosition();eW(t,n,a,s)&&i.hooks.trigger(i.hooks.eventTypes.move,a),i.pending||(i.callStopWhenPending?i.callStopWhenPending=!1:i.hooks.trigger(i.hooks.eventTypes.end,a)),s=a,i.pending&&(i.timer=Eb(o))};this.callStopWhenPending&&this.setCallStop(!1),Ea(this.timer),o()},e.prototype.transitionTime=function(t){t===void 0&&(t=0),this.style[Ut.transitionDuration]=t+"ms",this.hooks.trigger(this.hooks.eventTypes.time,t)},e.prototype.transitionTimingFunction=function(t){this.style[Ut.transitionTimingFunction]=t,this.hooks.trigger(this.hooks.eventTypes.timeFunction,t)},e.prototype.transitionProperty=function(){this.style[Ut.transitionProperty]=Ut.transform},e.prototype.move=function(t,n,i,s){this.setPending(i>0),this.transitionTimingFunction(s),this.transitionProperty(),this.transitionTime(i),this.translate(n);var o=this.options.probeType===3;i&&o&&this.startProbe(t,n),i||(this._reflow=this.content.offsetHeight,o&&this.hooks.trigger(this.hooks.eventTypes.move,n),this.hooks.trigger(this.hooks.eventTypes.end,n))},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),Ea(this.timer);var n=this.translater.getComputedPosition(),i=n.x,s=n.y;this.transitionTime(),this.translate({x:i,y:s}),this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,{x:i,y:s})}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(xO),rW=function(r){i0(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.move=function(t,n,i,s){if(!i){this.translate(n),this.options.probeType===3&&this.hooks.trigger(this.hooks.eventTypes.move,n),this.hooks.trigger(this.hooks.eventTypes.end,n);return}this.animate(t,n,i,s)},e.prototype.animate=function(t,n,i,s){var o=this,a=Fn(),u=a+i,l=this.options.probeType===3,h=function(){var c=Fn();if(c>=u){o.translate(n),l&&o.hooks.trigger(o.hooks.eventTypes.move,n),o.hooks.trigger(o.hooks.eventTypes.end,n);return}c=(c-a)/i;var d=s(c),p={};Object.keys(n).forEach(function(g){var v=t[g],x=n[g];p[g]=(x-v)*d+v}),o.translate(p),l&&o.hooks.trigger(o.hooks.eventTypes.move,p),o.pending&&(o.timer=Eb(h)),o.pending||(o.callStopWhenPending?o.callStopWhenPending=!1:o.hooks.trigger(o.hooks.eventTypes.end,n))};this.setPending(!0),this.callStopWhenPending&&this.setCallStop(!1),Ea(this.timer),h()},e.prototype.doStop=function(){var t=this.pending;if(this.setForceStopped(!1),this.setCallStop(!1),t){this.setPending(!1),Ea(this.timer);var n=this.translater.getComputedPosition();this.setForceStopped(!0),this.setCallStop(!0),this.hooks.trigger(this.hooks.eventTypes.forceStop,n)}return t},e.prototype.stop=function(){var t=this.doStop();t&&this.hooks.trigger(this.hooks.eventTypes.callStop)},e}(xO);function nW(r,e,t){var n=t.useTransition,i={};return Object.defineProperty(i,"probeType",{enumerable:!0,configurable:!1,get:function(){return t.probeType}}),n?new tW(r,e,i):new rW(r,e,i)}var QP=function(){function r(e,t,n){this.wrapper=e,this.options=n,this.hooks=new So(["beforeComputeBoundary","computeBoundary","momentum","end","ignoreHasScroll"]),this.refresh(t)}return r.prototype.start=function(){this.dist=0,this.setMovingDirection(0),this.setDirection(0)},r.prototype.move=function(e){return e=this.hasScroll?e:0,this.setMovingDirection(e),this.performDampingAlgorithm(e,this.options.outOfBoundaryDampingFactor)},r.prototype.setMovingDirection=function(e){this.movingDirection=e>0?-1:e<0?1:0},r.prototype.setDirection=function(e){this.direction=e>0?-1:e<0?1:0},r.prototype.performDampingAlgorithm=function(e,t){var n=this.currentPos+e;return(n>this.minScrollPos||n<this.maxScrollPos)&&(n>this.minScrollPos&&this.options.bounces[0]||n<this.maxScrollPos&&this.options.bounces[1]?n=this.currentPos+e*t:n=n>this.minScrollPos?this.minScrollPos:this.maxScrollPos),n},r.prototype.end=function(e){var t={duration:0},n=Math.abs(this.currentPos-this.startPos);if(this.options.momentum&&e<this.options.momentumLimitTime&&n>this.options.momentumLimitDistance){var i=this.direction===-1&&this.options.bounces[0]||this.direction===1&&this.options.bounces[1]?this.wrapperSize:0;t=this.hasScroll?this.momentum(this.currentPos,this.startPos,e,this.maxScrollPos,this.minScrollPos,i,this.options):{destination:this.currentPos,duration:0}}else this.hooks.trigger(this.hooks.eventTypes.end,t);return t},r.prototype.momentum=function(e,t,n,i,s,o,a){a===void 0&&(a=this.options);var u=e-t,l=Math.abs(u)/n,h=a.deceleration,c=a.swipeBounceTime,d=a.swipeTime,p=Math.min(d,l*2/h),g={destination:e+l*l/h*(u<0?-1:1),duration:p,rate:15};return this.hooks.trigger(this.hooks.eventTypes.momentum,g,u),g.destination<i?(g.destination=o?Math.max(i-o/4,i-o/g.rate*l):i,g.duration=c):g.destination>s&&(g.destination=o?Math.min(s+o/4,s+o/g.rate*l):s,g.duration=c),g.destination=Math.round(g.destination),g},r.prototype.updateDirection=function(){var e=this.currentPos-this.absStartPos;this.setDirection(e)},r.prototype.refresh=function(e){var t=this.options.rect,n=t.size,i=t.position,s=window.getComputedStyle(this.wrapper,null).position==="static",o=wl(this.wrapper);this.wrapperSize=this.wrapper[n==="width"?"clientWidth":"clientHeight"],this.setContent(e);var a=wl(this.content);this.contentSize=a[n],this.relativeOffset=a[i],s&&(this.relativeOffset-=o[i]),this.computeBoundary(),this.setDirection(0)},r.prototype.setContent=function(e){e!==this.content&&(this.content=e,this.resetState())},r.prototype.resetState=function(){this.currentPos=0,this.startPos=0,this.dist=0,this.setDirection(0),this.setMovingDirection(0),this.resetStartPos()},r.prototype.computeBoundary=function(){this.hooks.trigger(this.hooks.eventTypes.beforeComputeBoundary);var e={minScrollPos:0,maxScrollPos:this.wrapperSize-this.contentSize};e.maxScrollPos<0&&(e.maxScrollPos-=this.relativeOffset,this.options.specifiedIndexAsContent===0&&(e.minScrollPos=-this.relativeOffset)),this.hooks.trigger(this.hooks.eventTypes.computeBoundary,e),this.minScrollPos=e.minScrollPos,this.maxScrollPos=e.maxScrollPos,this.hasScroll=this.options.scrollable&&this.maxScrollPos<this.minScrollPos,!this.hasScroll&&this.minScrollPos<this.maxScrollPos&&(this.maxScrollPos=this.minScrollPos,this.contentSize=this.wrapperSize)},r.prototype.updatePosition=function(e){this.currentPos=e},r.prototype.getCurrentPos=function(){return this.currentPos},r.prototype.checkInBoundary=function(){var e=this.adjustPosition(this.currentPos),t=e===this.getCurrentPos();return{position:e,inBoundary:t}},r.prototype.adjustPosition=function(e){return!this.hasScroll&&!this.hooks.trigger(this.hooks.eventTypes.ignoreHasScroll)?e=this.minScrollPos:e>this.minScrollPos?e=this.minScrollPos:e<this.maxScrollPos&&(e=this.maxScrollPos),e},r.prototype.updateStartPos=function(){this.startPos=this.currentPos},r.prototype.updateAbsStartPos=function(){this.absStartPos=this.currentPos},r.prototype.resetStartPos=function(){this.updateStartPos(),this.updateAbsStartPos()},r.prototype.getAbsDist=function(e){return this.dist+=e,Math.abs(this.dist)},r.prototype.destroy=function(){this.hooks.destroy()},r}(),wp,bp,Sp,Tp,ZP=(wp={},wp.yes=function(r){return!0},wp.no=function(r){return hl(r),!1},wp),iW=(bp={},bp.horizontal=(Sp={},Sp.yes="horizontal",Sp.no="vertical",Sp),bp.vertical=(Tp={},Tp.yes="vertical",Tp.no="horizontal",Tp),bp),sW=function(){function r(e,t,n){this.directionLockThreshold=e,this.freeScroll=t,this.eventPassthrough=n,this.reset()}return r.prototype.reset=function(){this.directionLocked=""},r.prototype.checkMovingDirection=function(e,t,n){return this.computeDirectionLock(e,t),this.handleEventPassthrough(n)},r.prototype.adjustDelta=function(e,t){return this.directionLocked==="horizontal"?t=0:this.directionLocked==="vertical"&&(e=0),{deltaX:e,deltaY:t}},r.prototype.computeDirectionLock=function(e,t){this.directionLocked===""&&!this.freeScroll&&(e>t+this.directionLockThreshold?this.directionLocked="horizontal":t>=e+this.directionLockThreshold?this.directionLocked="vertical":this.directionLocked="none")},r.prototype.handleEventPassthrough=function(e){var t=iW[this.directionLocked];if(t){if(this.eventPassthrough===t.yes)return ZP.yes(e);if(this.eventPassthrough===t.no)return ZP.no(e)}return!1},r}(),oW=function(r,e,t){return t===2?[e,-r]:t===3?[-r,-e]:t===4?[-e,r]:[r,e]},aW=function(){function r(e,t,n,i,s){this.hooks=new So(["start","beforeMove","scrollStart","scroll","beforeEnd","end","scrollEnd","contentNotMoved","detectMovingDirection","coordinateTransformation"]),this.scrollBehaviorX=e,this.scrollBehaviorY=t,this.actionsHandler=n,this.animater=i,this.options=s,this.directionLockAction=new sW(s.directionLockThreshold,s.freeScroll,s.eventPassthrough),this.enabled=!0,this.bindActionsHandler()}return r.prototype.bindActionsHandler=function(){var e=this;this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start,function(t){return e.enabled?e.handleStart(t):!0}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move,function(t){var n=t.deltaX,i=t.deltaY,s=t.e;if(!e.enabled)return!0;var o=oW(n,i,e.options.quadrant),a=o[0],u=o[1],l={deltaX:a,deltaY:u};return e.hooks.trigger(e.hooks.eventTypes.coordinateTransformation,l),e.handleMove(l.deltaX,l.deltaY,s)}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end,function(t){return e.enabled?e.handleEnd(t):!0}),this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click,function(t){e.enabled&&!t._constructed&&e.handleClick(t)})},r.prototype.handleStart=function(e){var t=Fn();this.fingerMoved=!1,this.contentMoved=!1,this.startTime=t,this.directionLockAction.reset(),this.scrollBehaviorX.start(),this.scrollBehaviorY.start(),this.animater.doStop(),this.scrollBehaviorX.resetStartPos(),this.scrollBehaviorY.resetStartPos(),this.hooks.trigger(this.hooks.eventTypes.start,e)},r.prototype.handleMove=function(e,t,n){if(!this.hooks.trigger(this.hooks.eventTypes.beforeMove,n)){var i=this.scrollBehaviorX.getAbsDist(e),s=this.scrollBehaviorY.getAbsDist(t),o=Fn();if(this.checkMomentum(i,s,o))return!0;if(this.directionLockAction.checkMovingDirection(i,s,n))return this.actionsHandler.setInitiated(),!0;var a=this.directionLockAction.adjustDelta(e,t),u=this.scrollBehaviorX.getCurrentPos(),l=this.scrollBehaviorX.move(a.deltaX),h=this.scrollBehaviorY.getCurrentPos(),c=this.scrollBehaviorY.move(a.deltaY);if(!this.hooks.trigger(this.hooks.eventTypes.detectMovingDirection)){this.fingerMoved||(this.fingerMoved=!0);var d=l!==u||c!==h;!this.contentMoved&&!d&&this.hooks.trigger(this.hooks.eventTypes.contentNotMoved),!this.contentMoved&&d&&(this.contentMoved=!0,this.hooks.trigger(this.hooks.eventTypes.scrollStart)),this.contentMoved&&d&&(this.animater.translate({x:l,y:c}),this.dispatchScroll(o))}}},r.prototype.dispatchScroll=function(e){e-this.startTime>this.options.momentumLimitTime&&(this.startTime=e,this.scrollBehaviorX.updateStartPos(),this.scrollBehaviorY.updateStartPos(),this.options.probeType===1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())),this.options.probeType>1&&this.hooks.trigger(this.hooks.eventTypes.scroll,this.getCurrentPos())},r.prototype.checkMomentum=function(e,t,n){return n-this.endTime>this.options.momentumLimitTime&&t<this.options.momentumLimitDistance&&e<this.options.momentumLimitDistance},r.prototype.handleEnd=function(e){if(!this.hooks.trigger(this.hooks.eventTypes.beforeEnd,e)){var t=this.getCurrentPos();if(this.scrollBehaviorX.updateDirection(),this.scrollBehaviorY.updateDirection(),this.hooks.trigger(this.hooks.eventTypes.end,e,t))return!0;t=this.ensureIntegerPos(t),this.animater.translate(t),this.endTime=Fn();var n=this.endTime-this.startTime;this.hooks.trigger(this.hooks.eventTypes.scrollEnd,t,n)}},r.prototype.ensureIntegerPos=function(e){this.ensuringInteger=!0;var t=e.x,n=e.y,i=this.scrollBehaviorX,s=i.minScrollPos,o=i.maxScrollPos,a=this.scrollBehaviorY,u=a.minScrollPos,l=a.maxScrollPos;return t=t>0?Math.ceil(t):Math.floor(t),n=n>0?Math.ceil(n):Math.floor(n),t=tr(t,o,s),n=tr(n,l,u),{x:t,y:n}},r.prototype.handleClick=function(e){pc(e.target,this.options.preventDefaultException)||(hl(e),e.stopPropagation())},r.prototype.getCurrentPos=function(){return{x:this.scrollBehaviorX.getCurrentPos(),y:this.scrollBehaviorY.getCurrentPos()}},r.prototype.refresh=function(){this.endTime=0},r.prototype.destroy=function(){this.hooks.destroy()},r}();function lW(r){var e=["click","bindToWrapper","disableMouse","disableTouch","preventDefault","stopPropagation","tagException","preventDefaultException","autoEndDistance"].reduce(function(t,n){return t[n]=r[n],t},{});return e}function JP(r,e,t,n){var i=["momentum","momentumLimitTime","momentumLimitDistance","deceleration","swipeBounceTime","swipeTime","outOfBoundaryDampingFactor","specifiedIndexAsContent"].reduce(function(s,o){return s[o]=r[o],s},{});return i.scrollable=!!r[e],i.bounces=t,i.rect=n,i}function T_(r,e,t){t.forEach(function(n){var i,s;typeof n=="string"?i=s=n:(i=n.source,s=n.target),r.on(i,function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return e.trigger.apply(e,ag([s],o))})})}function uW(r,e){for(var t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];if(r[s]!==e[s])return!1}return!0}var eC=1,cW=function(){function r(e,t,n){this.wrapper=e,this.content=t,this.resizeTimeout=0,this.hooks=new So(["beforeStart","beforeMove","beforeScrollStart","scrollStart","scroll","beforeEnd","scrollEnd","resize","touchEnd","end","flick","scrollCancel","momentum","scrollTo","minDistanceScroll","scrollToElement","beforeRefresh"]),this.options=n;var i=this.options.bounce,s=i.left,o=i.right,a=i.top,u=i.bottom;this.scrollBehaviorX=new QP(e,t,JP(n,"scrollX",[s,o],{size:"width",position:"left"})),this.scrollBehaviorY=new QP(e,t,JP(n,"scrollY",[a,u],{size:"height",position:"top"})),this.translater=new JG(this.content),this.animater=nW(this.content,this.translater,this.options),this.actionsHandler=new ZG(this.options.bindToTarget?this.content:e,lW(this.options)),this.actions=new aW(this.scrollBehaviorX,this.scrollBehaviorY,this.actionsHandler,this.animater,this.options);var l=this.resize.bind(this);this.resizeRegister=new _n(window,[{name:"orientationchange",handler:l},{name:"resize",handler:l}]),this.registerTransitionEnd(),this.init()}return r.prototype.init=function(){var e=this;this.bindTranslater(),this.bindAnimater(),this.bindActions(),this.hooks.on(this.hooks.eventTypes.scrollEnd,function(){e.togglePointerEvents(!0)})},r.prototype.registerTransitionEnd=function(){this.transitionEndRegister=new _n(this.content,[{name:Ut.transitionEnd,handler:this.transitionEnd.bind(this)}])},r.prototype.bindTranslater=function(){var e=this,t=this.translater.hooks;t.on(t.eventTypes.beforeTranslate,function(n){e.options.translateZ&&n.push(e.options.translateZ)}),t.on(t.eventTypes.translate,function(n){var i=e.getCurrentPos();if(e.updatePositions(n),e.actions.ensuringInteger===!0){e.actions.ensuringInteger=!1;return}(n.x!==i.x||n.y!==i.y)&&e.togglePointerEvents(!1)})},r.prototype.bindAnimater=function(){var e=this;this.animater.hooks.on(this.animater.hooks.eventTypes.end,function(t){e.resetPosition(e.options.bounceTime)||(e.animater.setPending(!1),e.hooks.trigger(e.hooks.eventTypes.scrollEnd,t))}),T_(this.animater.hooks,this.hooks,[{source:this.animater.hooks.eventTypes.move,target:this.hooks.eventTypes.scroll},{source:this.animater.hooks.eventTypes.forceStop,target:this.hooks.eventTypes.scrollEnd}])},r.prototype.bindActions=function(){var e=this,t=this.actions;T_(t.hooks,this.hooks,[{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeStart},{source:t.hooks.eventTypes.start,target:this.hooks.eventTypes.beforeScrollStart},{source:t.hooks.eventTypes.beforeMove,target:this.hooks.eventTypes.beforeMove},{source:t.hooks.eventTypes.scrollStart,target:this.hooks.eventTypes.scrollStart},{source:t.hooks.eventTypes.scroll,target:this.hooks.eventTypes.scroll},{source:t.hooks.eventTypes.beforeEnd,target:this.hooks.eventTypes.beforeEnd}]),t.hooks.on(t.hooks.eventTypes.end,function(n,i){if(e.hooks.trigger(e.hooks.eventTypes.touchEnd,i),e.hooks.trigger(e.hooks.eventTypes.end,i)||!t.fingerMoved&&(e.hooks.trigger(e.hooks.eventTypes.scrollCancel),e.checkClick(n)))return!0;if(e.resetPosition(e.options.bounceTime,Ir.bounce))return e.animater.setForceStopped(!1),!0}),t.hooks.on(t.hooks.eventTypes.scrollEnd,function(n,i){var s=Math.abs(n.x-e.scrollBehaviorX.startPos),o=Math.abs(n.y-e.scrollBehaviorY.startPos);if(e.checkFlick(i,s,o)){e.animater.setForceStopped(!1),e.hooks.trigger(e.hooks.eventTypes.flick);return}if(e.momentum(n,i)){e.animater.setForceStopped(!1);return}t.contentMoved&&e.hooks.trigger(e.hooks.eventTypes.scrollEnd,n),e.animater.forceStopped&&e.animater.setForceStopped(!1)})},r.prototype.checkFlick=function(e,t,n){var i=1;if(this.hooks.events.flick.length>1&&e<this.options.flickLimitTime&&t<this.options.flickLimitDistance&&n<this.options.flickLimitDistance&&(n>i||t>i))return!0},r.prototype.momentum=function(e,t){var n={time:0,easing:Ir.swiper,newX:e.x,newY:e.y},i=this.scrollBehaviorX.end(t),s=this.scrollBehaviorY.end(t);if(n.newX=S_(i.destination)?n.newX:i.destination,n.newY=S_(s.destination)?n.newY:s.destination,n.time=Math.max(i.duration,s.duration),this.hooks.trigger(this.hooks.eventTypes.momentum,n,this),n.newX!==e.x||n.newY!==e.y)return(n.newX>this.scrollBehaviorX.minScrollPos||n.newX<this.scrollBehaviorX.maxScrollPos||n.newY>this.scrollBehaviorY.minScrollPos||n.newY<this.scrollBehaviorY.maxScrollPos)&&(n.easing=Ir.swipeBounce),this.scrollTo(n.newX,n.newY,n.time,n.easing),!0},r.prototype.checkClick=function(e){var t={preventClick:this.animater.forceStopped};if(this.hooks.trigger(this.hooks.eventTypes.checkClick))return this.animater.setForceStopped(!1),!0;if(!t.preventClick){var n=this.options.dblclick,i=!1;if(n&&this.lastClickTime){var s=n.delay,o=s===void 0?300:s;Fn()-this.lastClickTime<o&&(i=!0,jG(e))}return this.options.tap&&UG(e,this.options.tap),this.options.click&&!pc(e.target,this.options.preventDefaultException)&&vO(e),this.lastClickTime=i?null:Fn(),!0}return!1},r.prototype.resize=function(){var e=this;this.actions.enabled&&(CG&&(this.wrapper.scrollTop=0),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(function(){e.hooks.trigger(e.hooks.eventTypes.resize)},this.options.resizePolling))},r.prototype.transitionEnd=function(e){if(!(e.target!==this.content||!this.animater.pending)){var t=this.animater;t.transitionTime(),this.resetPosition(this.options.bounceTime,Ir.bounce)||(this.animater.setPending(!1),this.options.probeType!==3&&this.hooks.trigger(this.hooks.eventTypes.scrollEnd,this.getCurrentPos()))}},r.prototype.togglePointerEvents=function(e){e===void 0&&(e=!0);for(var t=this.content.children.length?this.content.children:[this.content],n=e?"auto":"none",i=0;i<t.length;i++){var s=t[i];s.isBScrollContainer||(s.style.pointerEvents=n)}},r.prototype.refresh=function(e){var t=this.setContent(e);this.hooks.trigger(this.hooks.eventTypes.beforeRefresh),this.scrollBehaviorX.refresh(e),this.scrollBehaviorY.refresh(e),t&&(this.translater.setContent(e),this.animater.setContent(e),this.transitionEndRegister.destroy(),this.registerTransitionEnd(),this.options.bindToTarget&&this.actionsHandler.setContent(e)),this.actions.refresh(),this.wrapperOffset=VP(this.wrapper)},r.prototype.setContent=function(e){var t=e!==this.content;return t&&(this.content=e),t},r.prototype.scrollBy=function(e,t,n,i){n===void 0&&(n=0);var s=this.getCurrentPos(),o=s.x,a=s.y;i=i||Ir.bounce,e+=o,t+=a,this.scrollTo(e,t,n,i)},r.prototype.scrollTo=function(e,t,n,i,s){n===void 0&&(n=0),i===void 0&&(i=Ir.bounce),s===void 0&&(s={start:{},end:{}});var o=this.options.useTransition?i.style:i.fn,a=this.getCurrentPos(),u=$i({x:a.x,y:a.y},s.start),l=$i({x:e,y:t},s.end);if(this.hooks.trigger(this.hooks.eventTypes.scrollTo,l),!uW(u,l)){var h=Math.abs(l.x-u.x),c=Math.abs(l.y-u.y);h<eC&&c<eC&&(n=0,this.hooks.trigger(this.hooks.eventTypes.minDistanceScroll)),this.animater.move(u,l,n,o)}},r.prototype.scrollToElement=function(e,t,n,i,s){var o=mO(e),a=VP(o),u=function(h,c,d){return typeof h=="number"?h:h?Math.round(c/2-d/2):0};n=u(n,o.offsetWidth,this.wrapper.offsetWidth),i=u(i,o.offsetHeight,this.wrapper.offsetHeight);var l=function(h,c,d,p){return h-=c,h=p.adjustPosition(h-d),h};a.left=l(a.left,this.wrapperOffset.left,n,this.scrollBehaviorX),a.top=l(a.top,this.wrapperOffset.top,i,this.scrollBehaviorY),!this.hooks.trigger(this.hooks.eventTypes.scrollToElement,o,a)&&this.scrollTo(a.left,a.top,t,s)},r.prototype.resetPosition=function(e,t){e===void 0&&(e=0),t===void 0&&(t=Ir.bounce);var n=this.scrollBehaviorX.checkInBoundary(),i=n.position,s=n.inBoundary,o=this.scrollBehaviorY.checkInBoundary(),a=o.position,u=o.inBoundary;return s&&u?!1:(AG&&this.reflow(),this.scrollTo(i,a,e,t),!0)},r.prototype.reflow=function(){this._reflow=this.content.offsetHeight},r.prototype.updatePositions=function(e){this.scrollBehaviorX.updatePosition(e.x),this.scrollBehaviorY.updatePosition(e.y)},r.prototype.getCurrentPos=function(){return this.actions.getCurrentPos()},r.prototype.enable=function(){this.actions.enabled=!0},r.prototype.disable=function(){Ea(this.animater.timer),this.actions.enabled=!1},r.prototype.destroy=function(){var e=this,t=["resizeRegister","transitionEndRegister","actionsHandler","actions","hooks","animater","translater","scrollBehaviorX","scrollBehaviorY"];t.forEach(function(n){return e[n].destroy()})},r}(),s0=function(r){i0(e,r);function e(t,n){var i=r.call(this,["refresh","contentChanged","enable","disable","beforeScrollStart","scrollStart","scroll","scrollEnd","scrollCancel","touchEnd","flick","destroy"])||this,s=mO(t);return s?(i.plugins={},i.options=new QG().merge(n).process(),i.setContent(s).valid&&(i.hooks=new So(["refresh","enable","disable","destroy","beforeInitialScrollTo","contentChanged"]),i.init(s)),i):(Di("Can not resolve the wrapper DOM."),i)}return e.use=function(t){var n=t.pluginName,i=e.plugins.some(function(s){return t===s.ctor});return i?e:S_(n)?(Di("Plugin Class must specify plugin's name in static property by 'pluginName' field."),e):(e.pluginsMap[n]=!0,e.plugins.push({name:n,applyOrder:t.applyOrder,ctor:t}),e)},e.prototype.setContent=function(t){var n=!1,i=!0,s=t.children[this.options.specifiedIndexAsContent];return s?(n=this.content!==s,n&&(this.content=s)):(Di("The wrapper need at least one child element to be content element to scroll."),i=!1),{valid:i,contentChanged:n}},e.prototype.init=function(t){var n=this;this.wrapper=t,t.isBScrollContainer=!0,this.scroller=new cW(t,this.content,this.options),this.scroller.hooks.on(this.scroller.hooks.eventTypes.resize,function(){n.refresh()}),this.eventBubbling(),this.handleAutoBlur(),this.enable(),this.proxy(EG),this.applyPlugins(),this.refreshWithoutReset(this.content);var i=this.options,s=i.startX,o=i.startY,a={x:s,y:o};this.hooks.trigger(this.hooks.eventTypes.beforeInitialScrollTo,a)||this.scroller.scrollTo(a.x,a.y)},e.prototype.applyPlugins=function(){var t=this,n=this.options;e.plugins.sort(function(i,s){var o,a=(o={},o.pre=-1,o.post=1,o),u=i.applyOrder?a[i.applyOrder]:0,l=s.applyOrder?a[s.applyOrder]:0;return u-l}).forEach(function(i){var s=i.ctor;n[i.name]&&typeof s=="function"&&(t.plugins[i.name]=new s(t))})},e.prototype.handleAutoBlur=function(){this.options.autoBlur&&this.on(this.eventTypes.beforeScrollStart,function(){var t=document.activeElement;t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA")&&t.blur()})},e.prototype.eventBubbling=function(){T_(this.scroller.hooks,this,[this.eventTypes.beforeScrollStart,this.eventTypes.scrollStart,this.eventTypes.scroll,this.eventTypes.scrollEnd,this.eventTypes.scrollCancel,this.eventTypes.touchEnd,this.eventTypes.flick])},e.prototype.refreshWithoutReset=function(t){this.scroller.refresh(t),this.hooks.trigger(this.hooks.eventTypes.refresh,t),this.trigger(this.eventTypes.refresh,t)},e.prototype.proxy=function(t){var n=this;t.forEach(function(i){var s=i.key,o=i.sourceKey;qG(n,o,s)})},e.prototype.refresh=function(){var t=this.setContent(this.wrapper),n=t.contentChanged,i=t.valid;if(i){var s=this.content;this.refreshWithoutReset(s),n&&(this.hooks.trigger(this.hooks.eventTypes.contentChanged,s),this.trigger(this.eventTypes.contentChanged,s)),this.scroller.resetPosition()}},e.prototype.enable=function(){this.scroller.enable(),this.hooks.trigger(this.hooks.eventTypes.enable),this.trigger(this.eventTypes.enable)},e.prototype.disable=function(){this.scroller.disable(),this.hooks.trigger(this.hooks.eventTypes.disable),this.trigger(this.eventTypes.disable)},e.prototype.destroy=function(){this.hooks.trigger(this.hooks.eventTypes.destroy),this.trigger(this.eventTypes.destroy),this.scroller.destroy()},e.prototype.eventRegister=function(t){this.registerType(t)},e.plugins=[],e.pluginsMap={},e}(So);function o0(r,e){var t=new s0(r,e);return t}o0.use=s0.use;o0.plugins=s0.plugins;o0.pluginsMap=s0.pluginsMap;var mc=o0,hW=function(){function r(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},r.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.mouseWheel===!0?{}:this.scroll.options.mouseWheel,t={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=Gr(t,e)},r.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.registerEvent=function(){this.eventRegister=new _n(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},r.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},r.prototype.cleanCache=function(){this.deltaCache=[]},r.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,s=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var o=this.deltaCache.reduce(function(p,g){return{x:p.x+g.x,y:p.y+g.y}},{x:0,y:0});this.cleanCache();var a=this.scroll.scroller,u=a.scrollBehaviorX,l=a.scrollBehaviorY;u.setMovingDirection(-e.directionX),l.setMovingDirection(-e.directionY),u.setDirection(e.x),l.setDirection(e.y);var h=u.performDampingAlgorithm(Math.round(e.x)+o.x,s),c=l.performDampingAlgorithm(Math.round(e.y)+o.x,s);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:h,y:c})){var d=this.getEaseTime();(h!==this.scroll.x||c!==this.scroll.y)&&this.scroll.scrollTo(h,c,d)}i&&(this.wheelMoveTimer=window.setTimeout(function(){t.wheelMoveTimer=0},i))}},r.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)},this.mouseWheelOpt.discreteTime)},r.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=t.invert,s=0,o=0,a=i?-1:1;switch(!0){case"deltaX"in e:e.deltaMode===1?(s=-e.deltaX*n,o=-e.deltaY*n):(s=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:s=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:s=o=e.wheelDelta/120*n;break;case"detail"in e:s=o=-e.detail/3*n;break}s*=a,o*=a,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(s)&&(s=o),o=0),this.scroll.hasHorizontalScroll||(s=0);var u=s>0?-1:s<0?1:0,l=o>0?-1:o<0?1:0;return{x:s,y:o,directionX:u,directionY:l}},r.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,s=t.preventDefaultException;n&&!pc(e.target,s)&&hl(e),i&&e.stopPropagation()},r.prototype.getEaseTime=function(){var e=100,t=this.mouseWheelOpt.easeTime;return t<e&&Di("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,e)},r.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})},r.pluginName="mouseWheel",r.applyOrder="pre",r}(),dW=function(){function r(e){this.scroll=e,this.stopObserver=!1,this.init()}return r.prototype.init=function(){this.handleMutationObserver(),this.handleHooks()},r.prototype.handleMutationObserver=function(){var e=this;if(typeof MutationObserver<"u"){var t=0;this.observer=new MutationObserver(function(n){e.mutationObserverHandler(n,t)}),this.startObserve(this.observer)}else this.checkDOMUpdate()},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[],this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.stopObserve(),e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.enable,function(){e.stopObserver&&e.handleMutationObserver()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.disable,function(){e.stopObserve()}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){e.destroy()})},r.prototype.mutationObserverHandler=function(e,t){var n=this;if(!this.shouldNotRefresh()){for(var i=!1,s=!1,o=0;o<e.length;o++){var a=e[o];if(a.type!=="attributes"){i=!0;break}else if(a.target!==this.scroll.scroller.content){s=!0;break}}i?this.scroll.refresh():s&&(clearTimeout(t),t=window.setTimeout(function(){n.shouldNotRefresh()||n.scroll.refresh()},60))}},r.prototype.startObserve=function(e){var t={attributes:!0,childList:!0,subtree:!0};e.observe(this.scroll.scroller.content,t)},r.prototype.shouldNotRefresh=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos>t.minScrollPos||t.currentPos<t.maxScrollPos||n.currentPos>n.minScrollPos||n.currentPos<n.maxScrollPos;return e.animater.pending||i},r.prototype.checkDOMUpdate=function(){var e=this,t=this.scroll.scroller.content,n=wl(t),i=n.width,s=n.height,o=function(){if(!e.stopObserver){n=wl(t);var u=n.width,l=n.height;(i!==u||s!==l)&&e.scroll.refresh(),i=u,s=l,a()}},a=function(){setTimeout(function(){o()},1e3)};a()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.stopObserve=function(){this.stopObserver=!0,this.observer&&this.observer.disconnect()},r.prototype.destroy=function(){this.stopObserve(),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.pluginName="observeDOM",r}(),fW="plugins.pullDownRefresh",pW=[{key:"finishPullDown",name:"finishPullDown"},{key:"openPullDown",name:"openPullDown"},{key:"closePullDown",name:"closePullDown"},{key:"autoPullDownRefresh",name:"autoPullDownRefresh"}],mW=pW.map(function(r){return{key:r.key,sourceKey:fW+"."+r.name}}),Zy="pullingDown",tC="enterThreshold",rC="leaveThreshold",gW=function(){function r(e){this.scroll=e,this.pulling=0,this.thresholdBoundary=0,this.init()}return r.prototype.setPulling=function(e){this.pulling=e},r.prototype.setThresholdBoundary=function(e){this.thresholdBoundary=e},r.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullDownRefresh),this.handleHooks(),this.watch()},r.prototype.handleBScroll=function(){this.scroll.registerType([Zy,tC,rC]),this.scroll.proxy(mW)},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={threshold:90,stop:40};this.options=Gr(t,e),this.scroll.options.probeType=3},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY=n.minScrollPos,this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.finishPullDown()}),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,function(i){i.maxScrollPos>0&&(i.maxScrollPos=-1),i.minScrollPos=e.currentMinScrollY}),this.hasMouseWheelPlugin()&&(this.registerHooks(this.scroll,this.scroll.eventTypes.alterOptions,function(i){var s=300,o=350;i.discreteTime=s,i.easeTime=o}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(){t.hooks.trigger(t.hooks.eventTypes.end)}))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.hasMouseWheelPlugin=function(){return!!this.scroll.eventTypes.alterOptions},r.prototype.watch=function(){var e=this.scroll.scroller;this.watching=!0,this.registerHooks(e.hooks,e.hooks.eventTypes.end,this.checkPullDown),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollStart,this.resetStateBeforeScrollStart),this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},r.prototype.resetStateBeforeScrollStart=function(){this.isFetchingStatus()||(this.setPulling(1),this.setThresholdBoundary(0))},r.prototype.checkLocationOfThresholdBoundary=function(){if(this.pulling===1){var e=this.scroll,t=this.thresholdBoundary!==1&&this.locateInsideThresholdBoundary(),n=this.thresholdBoundary!==2&&!this.locateInsideThresholdBoundary();t&&(this.setThresholdBoundary(1),e.trigger(tC)),n&&(this.setThresholdBoundary(2),e.trigger(rC))}},r.prototype.locateInsideThresholdBoundary=function(){return this.scroll.y<=this.options.threshold},r.prototype.unwatch=function(){var e=this.scroll,t=e.scroller;this.watching=!1,t.hooks.off(t.hooks.eventTypes.end,this.checkPullDown),e.off(e.eventTypes.scrollStart,this.resetStateBeforeScrollStart),e.off(e.eventTypes.scroll,this.checkLocationOfThresholdBoundary),this.hasMouseWheelPlugin()&&e.off(e.eventTypes.mousewheelStart,this.resetStateBeforeScrollStart)},r.prototype.checkPullDown=function(){var e=this.options,t=e.threshold,n=e.stop;return this.scroll.y<t?!1:(this.pulling===1&&(this.modifyBehaviorYBoundary(n),this.setPulling(2),this.scroll.trigger(Zy)),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,Ir.bounce),this.isFetchingStatus())},r.prototype.isFetchingStatus=function(){return this.pulling===2},r.prototype.modifyBehaviorYBoundary=function(e){var t=this.scroll.scroller.scrollBehaviorY;this.cachedOriginanMinScrollY=t.minScrollPos,this.currentMinScrollY=e,t.computeBoundary()},r.prototype.finishPullDown=function(){if(this.isFetchingStatus()){var e=this.scroll.scroller.scrollBehaviorY;this.currentMinScrollY=this.cachedOriginanMinScrollY,e.computeBoundary(),this.setPulling(0),this.scroll.resetPosition(this.scroll.options.bounceTime,Ir.bounce)}},r.prototype.openPullDown=function(e){e===void 0&&(e={}),this.handleOptions(e),this.watching||this.watch()},r.prototype.closePullDown=function(){this.unwatch()},r.prototype.autoPullDownRefresh=function(){var e=this.options,t=e.threshold,n=e.stop;this.isFetchingStatus()||!this.watching||(this.modifyBehaviorYBoundary(n),this.scroll.trigger(this.scroll.eventTypes.scrollStart),this.scroll.scrollTo(this.scroll.x,t),this.setPulling(2),this.scroll.trigger(Zy),this.scroll.scrollTo(this.scroll.x,n,this.scroll.options.bounceTime,Ir.bounce))},r.pluginName="pullDownRefresh",r}(),vW="plugins.pullUpLoad",yW=[{key:"finishPullUp",name:"finishPullUp"},{key:"openPullUp",name:"openPullUp"},{key:"closePullUp",name:"closePullUp"},{key:"autoPullUpLoad",name:"autoPullUpLoad"}],xW=yW.map(function(r){return{key:r.key,sourceKey:vW+"."+r.name}}),nC="pullingUp",_W=function(){function r(e){this.scroll=e,this.pulling=!1,this.watching=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(this.scroll.options.pullUpLoad),this.handleHooks(),this.watch()},r.prototype.handleBScroll=function(){this.scroll.registerType([nC]),this.scroll.proxy(xW)},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={threshold:0};this.options=Gr(t,e),this.scroll.options.probeType=3},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller.scrollBehaviorY;this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.contentChanged,function(){e.finishPullUp()}),this.registerHooks(t.hooks,t.hooks.eventTypes.computeBoundary,function(n){n.maxScrollPos>0&&(n.maxScrollPos=-1)})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.watch=function(){this.watching||(this.watching=!0,this.registerHooks(this.scroll,this.scroll.eventTypes.scroll,this.checkPullUp))},r.prototype.unwatch=function(){this.watching=!1,this.scroll.off(this.scroll.eventTypes.scroll,this.checkPullUp)},r.prototype.checkPullUp=function(e){var t=this,n=this.options.threshold;this.scroll.movingDirectionY===1&&e.y<=this.scroll.maxScrollY+n&&(this.pulling=!0,this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){t.pulling=!1}),this.unwatch(),this.scroll.trigger(nC))},r.prototype.finishPullUp=function(){var e=this;this.scroll.scroller.scrollBehaviorY.setMovingDirection(0),this.pulling?this.scroll.once(this.scroll.eventTypes.scrollEnd,function(){e.watch()}):this.watch()},r.prototype.openPullUp=function(e){e===void 0&&(e={}),this.handleOptions(e),this.watch()},r.prototype.closePullUp=function(){this.unwatch()},r.prototype.autoPullUpLoad=function(){var e=this.options.threshold,t=this.scroll.scroller.scrollBehaviorY;if(!(this.pulling||!this.watching)){var n=-1,i=t.maxScrollPos+e+n;this.scroll.scroller.scrollBehaviorY.setMovingDirection(n),this.scroll.scrollTo(this.scroll.x,i,this.scroll.options.bounceTime)}},r.pluginName="pullUpLoad",r}(),wW=function(){function r(e,t){this.indicator=e,this.options=t,this.hooks=new So(["touchStart","touchMove","touchEnd"]),this.registerEvents()}return r.prototype.registerEvents=function(){var e=this.options,t=e.disableMouse,n=e.disableTouch,i=[],s=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),s.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),s.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new _n(this.indicator.indicatorEl,i),this.moveEventRegister=new _n(window,s),this.endEventRegister=new _n(window,o)},r.prototype.BScrollIsDisabled=function(){return!this.indicator.scroll.enabled},r.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;hl(e),e.stopPropagation(),this.initiated=!0,this.lastPoint=t[this.indicator.keysMap.point],this.hooks.trigger(this.hooks.eventTypes.touchStart)}},r.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t[this.indicator.keysMap.point];hl(e),e.stopPropagation();var i=n-this.lastPoint;this.lastPoint=n,this.hooks.trigger(this.hooks.eventTypes.touchMove,i)}},r.prototype.end=function(e){this.initiated&&(this.initiated=!1,hl(e),e.stopPropagation(),this.hooks.trigger(this.hooks.eventTypes.touchEnd))},r.prototype.destroy=function(){this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()},r}(),bW=function(){function r(e,t){this.scroll=e,this.options=t,this.hooksFn=[],this.wrapper=t.wrapper,this.direction=t.direction,this.indicatorEl=this.wrapper.children[0],this.keysMap=this.getKeysMap(),this.handleFade(),this.handleHooks()}return r.prototype.handleFade=function(){this.options.fade&&(this.wrapper.style.opacity="0")},r.prototype.handleHooks=function(){var e=this,t=this.options,n=t.fade,i=t.interactive,s=t.scrollbarTrackClickable,o=this.scroll,a=o.hooks,u=o.scroller.translater.hooks,l=o.scroller.animater.hooks;if(this.registerHooks(a,a.eventTypes.refresh,this.refresh),this.registerHooks(u,u.eventTypes.translate,function(g){var v=e.keysMap.hasScroll;e.scroll[v]&&e.updatePosition(g)}),this.registerHooks(l,l.eventTypes.time,this.transitionTime),this.registerHooks(l,l.eventTypes.timeFunction,this.transitionTimingFunction),n&&(this.registerHooks(o,o.eventTypes.scrollEnd,function(){e.fade()}),this.registerHooks(o,o.eventTypes.scrollStart,function(){e.fade(!0)}),o.eventTypes.mousewheelStart&&o.eventTypes.mousewheelEnd&&(this.registerHooks(o,o.eventTypes.mousewheelStart,function(){e.fade(!0)}),this.registerHooks(o,o.eventTypes.mousewheelMove,function(){e.fade(!0)}),this.registerHooks(o,o.eventTypes.mousewheelEnd,function(){e.fade()}))),i){var h=this.scroll.options,c=h.disableMouse,d=h.disableTouch;this.eventHandler=new wW(this,{disableMouse:c,disableTouch:d});var p=this.eventHandler.hooks;this.registerHooks(p,p.eventTypes.touchStart,this.startHandler),this.registerHooks(p,p.eventTypes.touchMove,this.moveHandler),this.registerHooks(p,p.eventTypes.touchEnd,this.endHandler)}s&&this.bindClick()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.bindClick=function(){var e=this.wrapper;this.clickEventRegister=new _n(e,[{name:"click",handler:this.handleClick.bind(this)}])},r.prototype.handleClick=function(e){var t=this.calculateclickOffsetPos(e),n=this.scroll,i=n.x,s=n.y;i=this.direction==="horizontal"?t:i,s=this.direction==="vertical"?t:s,this.scroll.scrollTo(i,s,this.options.scrollbarTrackOffsetTime)},r.prototype.calculateclickOffsetPos=function(e){var t=this.keysMap,n=t.point,i=t.domRect,s=this.options.scrollbarTrackOffsetType,o=e[n]-this.wrapperRect[i],a=o<this.currentPos?-1:1,u=0,l=this.currentPos;return s==="step"?u=this.scrollInfo.baseSize*a:(u=0,l=o),this.newPos(l,u,this.scrollInfo)},r.prototype.getKeysMap=function(){return this.direction==="vertical"?{hasScroll:"hasVerticalScroll",size:"height",wrapperSize:"clientHeight",scrollerSize:"scrollerHeight",maxScrollPos:"maxScrollY",pos:"y",point:"pageY",translateProperty:"translateY",domRect:"top"}:{hasScroll:"hasHorizontalScroll",size:"width",wrapperSize:"clientWidth",scrollerSize:"scrollerWidth",maxScrollPos:"maxScrollX",pos:"x",point:"pageX",translateProperty:"translateX",domRect:"left"}},r.prototype.fade=function(e){var t=this.options,n=t.fadeInTime,i=t.fadeOutTime,s=e?n:i,o=this.wrapper;o.style[Ut.transitionDuration]=s+"ms",o.style.opacity=e?"1":"0"},r.prototype.refresh=function(){var e=this.keysMap.hasScroll,t=this.scroll,n=t.x,i=t.y;if(this.wrapperRect=this.wrapper.getBoundingClientRect(),this.canScroll(t[e])){var s=this.keysMap,o=s.wrapperSize,a=s.scrollerSize,u=s.maxScrollPos;this.scrollInfo=this.refreshScrollInfo(this.wrapper[o],t[a],t[u],this.indicatorEl[o]),this.updatePosition({x:n,y:i})}},r.prototype.transitionTime=function(e){e===void 0&&(e=0),this.indicatorEl.style[Ut.transitionDuration]=e+"ms"},r.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[Ut.transitionTimingFunction]=e},r.prototype.canScroll=function(e){return this.wrapper.style.display=e?"block":"none",e},r.prototype.refreshScrollInfo=function(e,t,n,i){var s=Math.max(Math.round(e*e/(t||e||1)),this.options.minSize);this.options.isCustom&&(s=i);var o=e-s,a=o/n;return{baseSize:s,maxScrollPos:o,minScrollPos:0,sizeRatio:a}},r.prototype.updatePosition=function(e){var t=this.caculatePosAndSize(e,this.scrollInfo),n=t.pos,i=t.size;this.refreshStyle(i,n),this.currentPos=n},r.prototype.caculatePosAndSize=function(e,t){var n=this.keysMap.pos,i=t.sizeRatio,s=t.baseSize,o=t.maxScrollPos,a=t.minScrollPos,u=this.options.minSize,l=Math.round(i*e[n]),h;return l<a?(h=Math.max(s+l*3,u),l=a):l>o?(h=Math.max(s-(l-o)*3,u),l=o+s-h):h=s,{pos:l,size:h}},r.prototype.refreshStyle=function(e,t){var n=this.keysMap,i=n.translateProperty,s=n.size,o=this.scroll.options.translateZ;this.indicatorEl.style[s]=e+"px",this.indicatorEl.style[Ut.transform]=i+"("+t+"px)"+o},r.prototype.startHandler=function(){this.moved=!1,this.startTime=Fn(),this.transitionTime(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)},r.prototype.moveHandler=function(e){if(!this.moved&&!this.indicatorNotMoved(e)&&(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var t=this.newPos(this.currentPos,e,this.scrollInfo);this.syncBScroll(t)}},r.prototype.endHandler=function(){if(this.moved){var e=this.scroll,t=e.x,n=e.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:t,y:n})}},r.prototype.indicatorNotMoved=function(e){var t=this.currentPos,n=this.scrollInfo,i=n.maxScrollPos,s=n.minScrollPos,o=t===s&&e<=0||t===i&&e>=0;return o},r.prototype.syncBScroll=function(e){var t=Fn(),n=this.scroll,i=n.x,s=n.y,o=n.options,a=n.scroller,u=n.maxScrollY,l=n.minScrollY,h=n.maxScrollX,c=n.minScrollX,d=o.probeType,p=o.momentumLimitTime,g={x:i,y:s};this.direction==="vertical"?g.y=tr(e,u,l):g.x=tr(e,h,c),a.translater.translate(g),t-this.startTime>p&&(this.startTime=t,d===1&&a.hooks.trigger(a.hooks.eventTypes.scroll,g)),d>1&&a.hooks.trigger(a.hooks.eventTypes.scroll,g)},r.prototype.newPos=function(e,t,n){var i=n.maxScrollPos,s=n.sizeRatio,o=n.minScrollPos,a=e+t;return a=tr(a,o,i),Math.round(a/s)},r.prototype.destroy=function(){var e=this.options,t=e.interactive,n=e.scrollbarTrackClickable,i=e.isCustom;t&&this.eventHandler.destroy(),n&&this.clickEventRegister.destroy(),i||this.wrapper.parentNode.removeChild(this.wrapper),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],u=s[2];o.off(a,u)}),this.hooksFn.length=0},r}(),SW=function(){function r(e){this.scroll=e,this.handleOptions(),this.createIndicators(),this.handleHooks()}return r.prototype.handleHooks=function(){var e=this,t=this.scroll;t.hooks.on(t.hooks.eventTypes.destroy,function(){for(var n=0,i=e.indicators;n<i.length;n++){var s=i[n];s.destroy()}})},r.prototype.handleOptions=function(){var e=this.scroll.options.scrollbar===!0?{}:this.scroll.options.scrollbar,t={fade:!0,fadeInTime:250,fadeOutTime:500,interactive:!1,customElements:[],minSize:8,scrollbarTrackClickable:!1,scrollbarTrackOffsetType:"step",scrollbarTrackOffsetTime:300};this.options=Gr(t,e)},r.prototype.createIndicators=function(){for(var e,t=this.scroll,n=[],i=["scrollX","scrollY"],s=["horizontal","vertical"],o=this.options.customElements,a=0;a<i.length;a++){var u=i[a];if(t.options[u]){var l=o.shift(),h=s[a],c=!1,d=l||this.createScrollbarElement(h);d!==l?t.wrapper.appendChild(d):c=!0,e=$i($i({wrapper:d,direction:h},this.options),{isCustom:c}),n.push(new bW(t,e))}}this.indicators=n},r.prototype.createScrollbarElement=function(e,t){t===void 0&&(t=this.options.scrollbarTrackClickable);var n=document.createElement("div"),i=document.createElement("div");return n.style.cssText="position:absolute;z-index:9999;overflow:hidden;",i.style.cssText="box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;",i.className="bscroll-indicator",e==="horizontal"?(n.style.cssText+="height:7px;left:2px;right:2px;bottom:0;",i.style.height="100%",n.className="bscroll-horizontal-scrollbar"):(n.style.cssText+="width:7px;bottom:2px;top:2px;right:1px;",i.style.width="100%",n.className="bscroll-vertical-scrollbar"),t||(n.style.cssText+="pointer-events:none;"),n.appendChild(i),n},r.pluginName="scrollbar",r}(),_O={pageX:0,pageY:0,x:0,y:0},TW={x:0,y:0,width:0,height:0,cx:0,cy:0},EW=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY;this.wrapperWidth=t.wrapperSize,this.wrapperHeight=n.wrapperSize,this.scrollerHeight=n.contentSize,this.scrollerWidth=t.contentSize,this.pages=this.buildPagesMatrix(this.wrapperWidth,this.wrapperHeight),this.pageLengthOfX=this.pages?this.pages.length:0,this.pageLengthOfY=this.pages&&this.pages[0]?this.pages[0].length:0},r.prototype.getPageStats=function(e,t){return this.pages[e]&&this.pages[e][t]?this.pages[e][t]:TW},r.prototype.getNearestPageIndex=function(e,t){for(var n=0,i=0,s=this.pages.length;n<s-1&&!(e>=this.pages[n][0].cx);n++);for(s=this.pages[n]?this.pages[n].length:0;i<s-1&&!(t>=this.pages[0][i].cy);i++);return{pageX:n,pageY:i}},r.prototype.buildPagesMatrix=function(e,t){var n=[],i=0,s,o,a,u=0,l,h=this.scroll.scroller.scrollBehaviorX.maxScrollPos,c=this.scroll.scroller.scrollBehaviorY.maxScrollPos;for(o=Math.round(e/2),a=Math.round(t/2);i>-this.scrollerWidth;){for(n[u]=[],l=0,s=0;s>-this.scrollerHeight;)n[u][l]={x:Math.max(i,h),y:Math.max(s,c),width:e,height:t,cx:i-o,cy:s-a},s-=t,l++;i-=e,u++}return n},r}(),PW=function(){function r(e,t){this.scroll=e,this.slideOptions=t,this.slideX=!1,this.slideY=!1,this.currentPage=Gr({},_O)}return r.prototype.refresh=function(){this.pagesMatrix=new EW(this.scroll),this.checkSlideLoop(),this.currentPage=this.getAdjustedCurrentPage()},r.prototype.getAdjustedCurrentPage=function(){var e=this.currentPage,t=e.pageX,n=e.pageY;t=Math.min(t,this.pagesMatrix.pageLengthOfX-1),n=Math.min(n,this.pagesMatrix.pageLengthOfY-1),this.loopX&&(t=Math.min(t,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(n=Math.min(n,this.pagesMatrix.pageLengthOfY-2));var i=this.pagesMatrix.getPageStats(t,n),s=i.x,o=i.y;return{pageX:t,pageY:n,x:s,y:o}},r.prototype.setCurrentPage=function(e){this.currentPage=e},r.prototype.getInternalPage=function(e,t){e>=this.pagesMatrix.pageLengthOfX?e=this.pagesMatrix.pageLengthOfX-1:e<0&&(e=0),t>=this.pagesMatrix.pageLengthOfY?t=this.pagesMatrix.pageLengthOfY-1:t<0&&(t=0);var n=this.pagesMatrix.getPageStats(e,t),i=n.x,s=n.y;return{pageX:e,pageY:t,x:i,y:s}},r.prototype.getInitialPage=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=this.slideOptions,i=n.startPageXIndex,s=n.startPageYIndex,o=this.loopX?1:0,a=this.loopY?1:0,u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY;t?(u=this.loopX?i+1:i,l=this.loopY?s+1:s):(u=e?o:this.currentPage.pageX,l=e?a:this.currentPage.pageY);var h=this.pagesMatrix.getPageStats(u,l),c=h.x,d=h.y;return{pageX:u,pageY:l,x:c,y:d}},r.prototype.getExposedPage=function(e){var t=Gr({},e);return this.loopX&&(t.pageX=this.fixedPage(t.pageX,this.pagesMatrix.pageLengthOfX-2)),this.loopY&&(t.pageY=this.fixedPage(t.pageY,this.pagesMatrix.pageLengthOfY-2)),t},r.prototype.getExposedPageByPageIndex=function(e,t){var n={pageX:e,pageY:t};this.loopX&&(n.pageX=e+1),this.loopY&&(n.pageY=t+1);var i=this.pagesMatrix.getPageStats(n.pageX,n.pageY),s=i.x,o=i.y;return{x:s,y:o,pageX:e,pageY:t}},r.prototype.getWillChangedPage=function(e){return e=Gr({},e),this.loopX&&(e.pageX=this.fixedPage(e.pageX,this.pagesMatrix.pageLengthOfX-2),e.x=this.pagesMatrix.getPageStats(e.pageX+1,0).x),this.loopY&&(e.pageY=this.fixedPage(e.pageY,this.pagesMatrix.pageLengthOfY-2),e.y=this.pagesMatrix.getPageStats(0,e.pageY+1).y),e},r.prototype.fixedPage=function(e,t){for(var n=[],i=0;i<t;i++)n.push(i);return n.unshift(t-1),n.push(0),n[e]},r.prototype.getPageStats=function(){return this.pagesMatrix.getPageStats(this.currentPage.pageX,this.currentPage.pageY)},r.prototype.getValidPageIndex=function(e,t){var n=this.pagesMatrix.pageLengthOfX-1,i=this.pagesMatrix.pageLengthOfY-1,s=0,o=0;return this.loopX&&(e+=1,s=s+1,n=n-1),this.loopY&&(t+=1,o=o+1,i=i-1),e=tr(e,s,n),t=tr(t,o,i),{pageX:e,pageY:t}},r.prototype.nextPageIndex=function(){return this.getPageIndexByDirection("positive")},r.prototype.prevPageIndex=function(){return this.getPageIndexByDirection("negative")},r.prototype.getNearestPage=function(e,t){var n=this.pagesMatrix.getNearestPageIndex(e,t),i=n.pageX,s=n.pageY,o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.getPageByDirection=function(e,t,n){var i=e.pageX,s=e.pageY;i===this.currentPage.pageX&&(i=tr(i+t,0,this.pagesMatrix.pageLengthOfX-1)),s===this.currentPage.pageY&&(s=tr(s+n,0,this.pagesMatrix.pageLengthOfY-1));var o=this.pagesMatrix.getPageStats(i,0).x,a=this.pagesMatrix.getPageStats(0,s).y;return{x:o,y:a,pageX:i,pageY:s}},r.prototype.resetLoopPage=function(){if(this.loopX){if(this.currentPage.pageX===0)return{pageX:this.pagesMatrix.pageLengthOfX-2,pageY:this.currentPage.pageY};if(this.currentPage.pageX===this.pagesMatrix.pageLengthOfX-1)return{pageX:1,pageY:this.currentPage.pageY}}if(this.loopY){if(this.currentPage.pageY===0)return{pageX:this.currentPage.pageX,pageY:this.pagesMatrix.pageLengthOfY-2};if(this.currentPage.pageY===this.pagesMatrix.pageLengthOfY-1)return{pageX:this.currentPage.pageX,pageY:1}}},r.prototype.getPageIndexByDirection=function(e){var t=this.currentPage.pageX,n=this.currentPage.pageY;return this.slideX&&(t=e==="negative"?t-1:t+1),this.slideY&&(n=e==="negative"?n-1:n+1),{pageX:t,pageY:n}},r.prototype.checkSlideLoop=function(){this.wannaLoop=this.slideOptions.loop,this.pagesMatrix.pageLengthOfX>1?this.slideX=!0:this.slideX=!1,this.pagesMatrix.pages[0]&&this.pagesMatrix.pageLengthOfY>1?this.slideY=!0:this.slideY=!1,this.loopX=this.wannaLoop&&this.slideX,this.loopY=this.wannaLoop&&this.slideY,this.slideX&&this.slideY&&Di("slide does not support two direction at the same time.")},r}(),CW="plugins.slide",AW=[{key:"next",name:"next"},{key:"prev",name:"prev"},{key:"goToPage",name:"goToPage"},{key:"getCurrentPage",name:"getCurrentPage"},{key:"startPlay",name:"startPlay"},{key:"pausePlay",name:"pausePlay"}],kW=AW.map(function(r){return{key:r.key,sourceKey:CW+"."+r.name}}),IW=function(r,e){return r.pageX===e.pageX&&r.pageY===e.pageY},MW=function(){function r(e){this.scroll=e,this.cachedClonedPageDOM=[],this.resetLooping=!1,this.autoplayTimer=0,this.satisfyInitialization()&&this.init()}return r.prototype.satisfyInitialization=function(){return this.scroll.scroller.content.children.length<=0?(Di("slide need at least one slide page to be initialised.please check your DOM layout."),!1):!0},r.prototype.init=function(){this.willChangeToPage=Gr({},_O),this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.createPages()},r.prototype.createPages=function(){this.pages=new PW(this.scroll,this.options)},r.prototype.handleBScroll=function(){this.scroll.registerType(["slideWillChange","slidePageChanged"]),this.scroll.proxy(kW)},r.prototype.handleOptions=function(){var e=this.scroll.options.slide===!0?{}:this.scroll.options.slide,t={loop:!0,threshold:.1,speed:400,easing:Ir.bounce,listenFlick:!0,autoplay:!0,interval:3e3,startPageXIndex:0,startPageYIndex:0};this.options=Gr(t,e)},r.prototype.handleLoop=function(e){var t=this.options.loop,n=this.scroll.scroller.content,i=n.children.length;t&&(n!==e?(this.resetLoopChangedStatus(),this.removeClonedSlidePage(e),i>1&&this.cloneFirstAndLastSlidePage(n)):i===3&&this.initialised?(this.removeClonedSlidePage(n),this.moreToOnePageInLoop=!0,this.oneToMorePagesInLoop=!1):i>1?(this.initialised&&this.cachedClonedPageDOM.length===0?(this.oneToMorePagesInLoop=!0,this.moreToOnePageInLoop=!1):(this.removeClonedSlidePage(n),this.resetLoopChangedStatus()),this.cloneFirstAndLastSlidePage(n)):this.resetLoopChangedStatus())},r.prototype.resetLoopChangedStatus=function(){this.moreToOnePageInLoop=!1,this.oneToMorePagesInLoop=!1},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks,n=this.scroll.scroller.hooks,i=this.options.listenFlick;this.prevContent=this.scroll.scroller.content,this.hooksFn=[],this.registerHooks(this.scroll,this.scroll.eventTypes.beforeScrollStart,this.pausePlay),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.modifyCurrentPage),this.registerHooks(this.scroll,this.scroll.eventTypes.scrollEnd,this.startPlay),this.scroll.eventTypes.mousewheelMove&&(this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelMove,function(){return!0}),this.registerHooks(this.scroll,this.scroll.eventTypes.mousewheelEnd,function(s){(s.directionX===1||s.directionY===1)&&e.next(),(s.directionX===-1||s.directionY===-1)&&e.prev()})),this.registerHooks(t,t.eventTypes.refresh,this.refreshHandler),this.registerHooks(t,t.eventTypes.destroy,this.destroy),this.registerHooks(n,n.eventTypes.beforeRefresh,function(){e.handleLoop(e.prevContent),e.setSlideInlineStyle()}),this.registerHooks(n,n.eventTypes.momentum,this.modifyScrollMetaHandler),this.registerHooks(n,n.eventTypes.scroll,this.scrollHandler),this.registerHooks(n,n.eventTypes.checkClick,this.startPlay),i&&this.registerHooks(n,n.eventTypes.flick,this.flickHandler)},r.prototype.startPlay=function(){var e=this,t=this.options,n=t.interval,i=t.autoplay;i&&(clearTimeout(this.autoplayTimer),this.autoplayTimer=window.setTimeout(function(){e.next()},n))},r.prototype.pausePlay=function(){this.options.autoplay&&clearTimeout(this.autoplayTimer)},r.prototype.setSlideInlineStyle=function(){var e=[{direction:"scrollX",sizeType:"offsetWidth",styleType:"width"},{direction:"scrollY",sizeType:"offsetHeight",styleType:"height"}],t=this.scroll.scroller,n=t.content,i=t.wrapper,s=this.scroll.options;e.forEach(function(o){var a=o.direction,u=o.sizeType,l=o.styleType;if(s[a]){for(var h=i[u],c=n.children,d=c.length,p=0;p<d;p++){var g=c[p];g.style[l]=h+"px"}n.style[l]=h*d+"px"}})},r.prototype.next=function(e,t){var n=this.pages.nextPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.prev=function(e,t){var n=this.pages.prevPageIndex(),i=n.pageX,s=n.pageY;this.goTo(i,s,e,t)},r.prototype.goToPage=function(e,t,n,i){var s=this.pages.getValidPageIndex(e,t);this.goTo(s.pageX,s.pageY,n,i)},r.prototype.getCurrentPage=function(){return this.exposedPage||this.pages.getInitialPage(!1,!0)},r.prototype.setCurrentPage=function(e){this.pages.setCurrentPage(e),this.exposedPage=this.pages.getExposedPage(e)},r.prototype.nearestPage=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=i.maxScrollPos,a=i.minScrollPos,u=s.maxScrollPos,l=s.minScrollPos;return this.pages.getNearestPage(tr(e,o,a),tr(t,u,l))},r.prototype.satisfyThreshold=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o=!0;return Math.abs(e-i.absStartPos)<=this.thresholdX&&Math.abs(t-s.absStartPos)<=this.thresholdY&&(o=!1),o},r.prototype.refreshHandler=function(e){var t=this;if(this.satisfyInitialization()){this.pages.refresh(),this.computeThreshold();var n=this.contentChanged=this.prevContent!==e;n&&(this.prevContent=e);var i=this.pages.getInitialPage(this.oneToMorePagesInLoop||this.moreToOnePageInLoop,n||!this.initialised);this.initialised?this.goTo(i.pageX,i.pageY,0):this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(s){t.initialised=!0,s.x=i.x,s.y=i.y}),this.startPlay()}},r.prototype.computeThreshold=function(){var e=this.options.threshold;if(e%1===0)this.thresholdX=e,this.thresholdY=e;else{var t=this.pages.getPageStats(),n=t.width,i=t.height;this.thresholdX=Math.round(n*e),this.thresholdY=Math.round(i*e)}},r.prototype.cloneFirstAndLastSlidePage=function(e){var t=e.children,n=t[t.length-1].cloneNode(!0),i=t[0].cloneNode(!0);XG(n,e),e.appendChild(i),this.cachedClonedPageDOM=[n,i]},r.prototype.removeClonedSlidePage=function(e){var t=e&&e.children||[];t.length&&this.cachedClonedPageDOM.forEach(function(n){zG(e,n)}),this.cachedClonedPageDOM=[]},r.prototype.modifyCurrentPage=function(e){var t=this.getCurrentPage(),n=t.pageX,i=t.pageY,s=this.nearestPage(e.x,e.y);if(this.setCurrentPage(s),this.contentChanged)return this.contentChanged=!1,!0;var o=this.getCurrentPage(),a=o.pageX,u=o.pageY;if(this.pageWillChangeTo(s),this.oneToMorePagesInLoop)return this.oneToMorePagesInLoop=!1,!0;if(this.moreToOnePageInLoop&&n===0&&i===0)return this.moreToOnePageInLoop=!1,!0;if(n!==a||i!==u){var l=this.pages.getExposedPageByPageIndex(a,u);this.scroll.trigger(this.scroll.eventTypes.slidePageChanged,l)}if(this.resetLooping){this.resetLooping=!1;return}var h=this.pages.resetLoopPage();if(h)return this.resetLooping=!0,this.goTo(h.pageX,h.pageY,0),!0},r.prototype.goTo=function(e,t,n,i){var s=this.pages.getInternalPage(e,t),o=i||this.options.easing||Ir.bounce,a=s.x,u=s.y,l=a-this.scroll.scroller.scrollBehaviorX.currentPos,h=u-this.scroll.scroller.scrollBehaviorY.currentPos;if(!l&&!h){this.scroll.scroller.togglePointerEvents(!0);return}n=n===void 0?this.getEaseTime(l,h):n,this.scroll.scroller.scrollTo(a,u,n,o)},r.prototype.flickHandler=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=t.currentPos,s=t.startPos,o=t.direction,a=n.currentPos,u=n.startPos,l=n.direction,h=this.pages.currentPage,c=h.pageX,d=h.pageY,p=this.getEaseTime(i-s,a-u);this.goTo(c+o,d+l,p)},r.prototype.getEaseTime=function(e,t){return this.options.speed||Math.max(Math.max(Math.min(Math.abs(e),1e3),Math.min(Math.abs(t),1e3)),300)},r.prototype.modifyScrollMetaHandler=function(e){var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=t.animater,o=e.newX,a=e.newY,u=this.satisfyThreshold(o,a)||s.forceStopped?this.pages.getPageByDirection(this.nearestPage(o,a),n.direction,i.direction):this.pages.currentPage;e.time=this.getEaseTime(e.newX-u.x,e.newY-u.y),e.newX=u.x,e.newY=u.y,e.easing=this.options.easing||Ir.bounce},r.prototype.scrollHandler=function(e){var t=e.x,n=e.y;if(this.satisfyThreshold(t,n)){var i=this.nearestPage(t,n);this.pageWillChangeTo(i)}},r.prototype.pageWillChangeTo=function(e){var t=this.pages.getWillChangedPage(e);IW(this.willChangeToPage,t)||(this.willChangeToPage=t,this.scroll.trigger(this.scroll.eventTypes.slideWillChange,this.willChangeToPage))},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){var e=this.scroll.scroller.content,t=this.options,n=t.loop,i=t.autoplay;n&&this.removeClonedSlidePage(e),i&&clearTimeout(this.autoplayTimer),this.hooksFn.forEach(function(s){var o=s[0],a=s[1],u=s[2];o.eventTypes[a]&&o.off(a,u)}),this.hooksFn.length=0},r.pluginName="slide",r}(),RW="plugins.wheel",OW=[{key:"wheelTo",name:"wheelTo"},{key:"getSelectedIndex",name:"getSelectedIndex"},{key:"restorePosition",name:"restorePosition"}],NW=OW.map(function(r){return{key:r.key,sourceKey:RW+"."+r.name}}),iC="wheelIndexChanged",BW={rate:4},LW=function(){function r(e){this.scroll=e,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.refreshBoundary(),this.setSelectedIndex(this.options.selectedIndex)},r.prototype.handleBScroll=function(){this.scroll.proxy(NW),this.scroll.registerType([iC])},r.prototype.handleOptions=function(){var e=this.scroll.options.wheel===!0?{}:this.scroll.options.wheel,t={wheelWrapperClass:"wheel-scroll",wheelItemClass:"wheel-item",rotate:25,adjustTime:400,selectedIndex:0,wheelDisabledItemClass:"wheel-disabled-item"};this.options=Gr(t,e)},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller,i=n.actionsHandler,s=n.scrollBehaviorX,o=n.scrollBehaviorY,a=n.animater,u=n.content;t.on(t.eventTypes.scrollEnd,function(l){var h=e.findNearestValidWheel(l.y).index;if(n.animater.forceStopped&&!e.isAdjustingPosition)return e.target=e.items[h],!0;e.setSelectedIndex(h),e.isAdjustingPosition&&(e.isAdjustingPosition=!1)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.refresh,function(l){l!==u&&(u=l,e.setSelectedIndex(e.options.selectedIndex,!0)),e.rotateX(e.scroll.y),e.wheelTo(e.selectedIndex,0)}),this.scroll.hooks.on(this.scroll.hooks.eventTypes.beforeInitialScrollTo,function(l){l.x=0,l.y=-(e.selectedIndex*e.itemHeight)}),n.hooks.on(n.hooks.eventTypes.checkClick,function(){var l=$G(e.items).indexOf(e.target);return l===-1||e.wheelTo(l,e.options.adjustTime,Ir.swipe),!0}),n.hooks.on(n.hooks.eventTypes.scrollTo,function(l){l.y=e.findNearestValidWheel(l.y).y}),n.hooks.on(n.hooks.eventTypes.minDistanceScroll,function(){var l=n.animater;l.forceStopped===!0&&(l.forceStopped=!1)}),n.hooks.on(n.hooks.eventTypes.scrollToElement,function(l,h){if(_p(l,e.options.wheelItemClass))h.top=e.findNearestValidWheel(h.top).y;else return!0}),i.hooks.on(i.hooks.eventTypes.beforeStart,function(l){e.target=l.target}),s.hooks.on(s.hooks.eventTypes.computeBoundary,function(l){l.maxScrollPos=0,l.minScrollPos=0}),o.hooks.on(o.hooks.eventTypes.computeBoundary,function(l){e.items=e.scroll.scroller.content.children,e.checkWheelAllDisabled(),e.itemHeight=e.items.length>0?o.contentSize/e.items.length:0,l.maxScrollPos=-e.itemHeight*(e.items.length-1),l.minScrollPos=0}),o.hooks.on(o.hooks.eventTypes.momentum,function(l){l.rate=BW.rate,l.destination=e.findNearestValidWheel(l.destination).y}),o.hooks.on(o.hooks.eventTypes.end,function(l){var h=e.findNearestValidWheel(o.currentPos);l.destination=h.y,l.duration=e.options.adjustTime}),a.hooks.on(a.hooks.eventTypes.time,function(l){e.transitionDuration(l)}),a.hooks.on(a.hooks.eventTypes.timeFunction,function(l){e.timeFunction(l)}),a.hooks.on(a.hooks.eventTypes.callStop,function(){var l=e.findNearestValidWheel(e.scroll.y).index;e.isAdjustingPosition=!0,e.wheelTo(l,0)}),a.translater.hooks.on(a.translater.hooks.eventTypes.translate,function(l){e.rotateX(l.y)})},r.prototype.refreshBoundary=function(){var e=this.scroll.scroller,t=e.scrollBehaviorX,n=e.scrollBehaviorY,i=e.content;t.refresh(i),n.refresh(i)},r.prototype.setSelectedIndex=function(e,t){t===void 0&&(t=!1);var n=this.selectedIndex;this.selectedIndex=e,n!==e&&!t&&this.scroll.trigger(iC,e)},r.prototype.getSelectedIndex=function(){return this.selectedIndex},r.prototype.wheelTo=function(e,t,n){e===void 0&&(e=0),t===void 0&&(t=0);var i=-e*this.itemHeight;this.scroll.scrollTo(0,i,t,n)},r.prototype.restorePosition=function(){var e=this.scroll.pending;if(e){var t=this.getSelectedIndex();this.scroll.scroller.animater.clearTimer(),this.wheelTo(t,0)}},r.prototype.transitionDuration=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[Ut.transitionDuration]=e+"ms"},r.prototype.timeFunction=function(e){for(var t=0;t<this.items.length;t++)this.items[t].style[Ut.transitionTimingFunction]=e},r.prototype.rotateX=function(e){for(var t=this.options.rotate,n=t===void 0?25:t,i=0;i<this.items.length;i++){var s=n*(e/this.itemHeight+i),o=s.toFixed(3);this.items[i].style[Ut.transform]="rotateX("+o+"deg)"}},r.prototype.findNearestValidWheel=function(e){e=e>0?0:e<this.scroll.maxScrollY?this.scroll.maxScrollY:e;for(var t=Math.abs(Math.round(-e/this.itemHeight)),n=t,i=this.items,s=this.options.wheelDisabledItemClass;t>=0&&_p(i[t],s);)t--;if(t<0)for(t=n;t<=i.length-1&&_p(i[t],s);)t++;return t===i.length&&(t=n),{index:this.wheelItemsAllDisabled?-1:t,y:-t*this.itemHeight}},r.prototype.checkWheelAllDisabled=function(){var e=this.options.wheelDisabledItemClass,t=this.items;this.wheelItemsAllDisabled=!0;for(var n=0;n<t.length;n++)if(!_p(t[n],e)){this.wheelItemsAllDisabled=!1;break}},r.pluginName="wheel",r}(),FW="plugins.zoom",DW=[{key:"zoomTo",name:"zoomTo"}],UW=DW.map(function(r){return{key:r.key,sourceKey:FW+"."+r.name}}),Ep=2,Pp=1,jW=function(){function r(e){this.scroll=e,this.scale=Pp,this.prevScale=1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.tryInitialZoomTo(this.zoomOpt)},r.prototype.zoomTo=function(e,t,n,i){var s=this.resolveOrigin(t,n),o=s.originX,a=s.originY,u={x:o,y:a,baseScale:this.scale};this._doZoomTo(e,u,i,!0)},r.prototype.handleBScroll=function(){this.scroll.proxy(UW),this.scroll.registerType(["beforeZoomStart","zoomStart","zooming","zoomEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.zoom===!0?{}:this.scroll.options.zoom,t={start:1,min:1,max:4,initialOrigin:[0,0],minimalZoomDistance:5,bounceTime:800};this.zoomOpt=Gr(t,e)},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=this.scroll.scroller;this.wrapper=this.scroll.scroller.wrapper,this.setTransformOrigin(this.scroll.scroller.content);var i=n.scrollBehaviorX,s=n.scrollBehaviorY;this.hooksFn=[],this.registerHooks(t.hooks,t.hooks.eventTypes.contentChanged,function(o){e.setTransformOrigin(o),e.scale=Pp,e.tryInitialZoomTo(e.zoomOpt)}),this.registerHooks(t.hooks,t.hooks.eventTypes.beforeInitialScrollTo,function(){if(e.zoomOpt.start!==Pp)return!0}),this.registerHooks(i.hooks,i.hooks.eventTypes.beforeComputeBoundary,function(){var o=wl(e.scroll.scroller.content);i.contentSize=Math.floor(o.width*e.scale)}),this.registerHooks(s.hooks,s.hooks.eventTypes.beforeComputeBoundary,function(){var o=wl(e.scroll.scroller.content);s.contentSize=Math.floor(o.height*e.scale)}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.start,function(o){var a=o.touches&&o.touches.length||0;e.fingersOperation(a),a===Ep&&e.zoomStart(o)}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeMove,function(o){var a=o.touches&&o.touches.length||0;if(e.fingersOperation(a),a===Ep)return e.zoom(o),!0}),this.registerHooks(n.actions.hooks,n.actions.hooks.eventTypes.beforeEnd,function(o){var a=e.fingersOperation();if(a===Ep)return e.zoomEnd(),!0}),this.registerHooks(n.translater.hooks,n.translater.hooks.eventTypes.beforeTranslate,function(o,a){var u=a.scale?a.scale:e.prevScale;e.prevScale=u,o.push("scale("+u+")")}),this.registerHooks(n.hooks,n.hooks.eventTypes.scrollEnd,function(){e.fingersOperation()===Ep&&e.scroll.trigger(e.scroll.eventTypes.zoomEnd,{scale:e.scale})}),this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.setTransformOrigin=function(e){e.style[Ut.transformOrigin]="0 0"},r.prototype.tryInitialZoomTo=function(e){var t=e.start,n=e.initialOrigin,i=this.scroll.scroller,s=i.scrollBehaviorX,o=i.scrollBehaviorY;t!==Pp&&(this.resetBoundaries([s,o]),this.zoomTo(t,n[0],n[1],0))},r.prototype.fingersOperation=function(e){if(typeof e=="number")this.numberOfFingers=e;else return this.numberOfFingers},r.prototype._doZoomTo=function(e,t,n,i){var s=this;n===void 0&&(n=this.zoomOpt.bounceTime),i===void 0&&(i=!1);var o=this.zoomOpt,a=o.min,u=o.max,l=this.scale,h=tr(e,a,u);(function(){if(n===0){s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:h});return}if(n>0){var c,d=Fn(),p=d+n,g=function(){var v=Fn();if(v>=p){s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:h}),Ea(c);return}var x=Ir.bounce.fn((v-d)/n),y=x*(h-l)+l;s.scroll.trigger(s.scroll.eventTypes.zooming,{scale:y}),c=Eb(g)};g()}})(),this.fingersOperation(2),this._zoomTo(h,l,t,n,i)},r.prototype._zoomTo=function(e,t,n,i,s){s===void 0&&(s=!1);var o=e/n.baseScale;this.setScale(e);var a=this.scroll.scroller,u=a.scrollBehaviorX,l=a.scrollBehaviorY;this.resetBoundaries([u,l]);var h=this.getNewPos(n.x,o,u,!0,s),c=this.getNewPos(n.y,o,l,!0,s);(u.currentPos!==Math.round(h)||l.currentPos!==Math.round(c)||e!==t)&&a.scrollTo(h,c,i,Ir.bounce,{start:{scale:t},end:{scale:e}})},r.prototype.resolveOrigin=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.contentSize},bottom:function(){return s.contentSize},center:function(a){var u=a===0?i.contentSize:s.contentSize;return u/2}};return{originX:typeof e=="number"?e:o[e](0),originY:typeof t=="number"?t:o[t](1)}},r.prototype.zoomStart=function(e){var t=e.touches[0],n=e.touches[1];this.startDistance=this.getFingerDistance(e),this.startScale=this.scale;var i=OG(this.wrapper),s=i.left,o=i.top;this.origin={x:Math.abs(t.pageX+n.pageX)/2+s-this.scroll.x,y:Math.abs(t.pageY+n.pageY)/2+o-this.scroll.y,baseScale:this.startScale},this.scroll.trigger(this.scroll.eventTypes.beforeZoomStart)},r.prototype.zoom=function(e){var t=this.getFingerDistance(e);if(!(!this.zoomed&&Math.abs(t-this.startDistance)<this.zoomOpt.minimalZoomDistance)){var n=this.dampingScale(t/this.startDistance*this.startScale),i=n/this.startScale;this.setScale(n),this.zoomed||(this.zoomed=!0,this.scroll.trigger(this.scroll.eventTypes.zoomStart));var s=this.scroll.scroller,o=s.scrollBehaviorX,a=s.scrollBehaviorY,u=this.getNewPos(this.origin.x,i,o,!1,!1),l=this.getNewPos(this.origin.y,i,a,!1,!1);this.scroll.trigger(this.scroll.eventTypes.zooming,{scale:this.scale}),s.translater.translate({x:u,y:l,scale:n})}},r.prototype.zoomEnd=function(){if(this.zoomed){if(this.shouldRebound()){this._doZoomTo(this.scale,this.origin,this.zoomOpt.bounceTime);return}this.scroll.trigger(this.scroll.eventTypes.zoomEnd,{scale:this.scale})}},r.prototype.getFingerDistance=function(e){var t=e.touches[0],n=e.touches[1],i=Math.abs(t.pageX-n.pageX),s=Math.abs(t.pageY-n.pageY);return IG(i,s)},r.prototype.shouldRebound=function(){var e=this.zoomOpt,t=e.min,n=e.max,i=this.scale;if(i!==tr(i,t,n))return!0;var s=this.scroll.scroller,o=s.scrollBehaviorX,a=s.scrollBehaviorY;this.resetBoundaries([o,a]);var u=o.checkInBoundary().inBoundary,l=o.checkInBoundary().inBoundary;return!(u&&l)},r.prototype.dampingScale=function(e){var t=this.zoomOpt,n=t.min,i=t.max;return e<n?e=.5*n*Math.pow(2,e/n):e>i&&(e=2*i*Math.pow(.5,i/e)),e},r.prototype.setScale=function(e){this.scale=e},r.prototype.resetBoundaries=function(e){e.forEach(function(t){return t.computeBoundary()})},r.prototype.getNewPos=function(e,t,n,i,s){s===void 0&&(s=!1);var o=e-e*t+(s?n.currentPos:n.startPos);return i&&(o=tr(o,n.maxScrollPos,n.minScrollPos)),o>0?Math.floor(o):Math.ceil(o)},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.destroy=function(){this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.pluginName="zoom",r}(),XW=function(){function r(e){this.ancestors=[],this.descendants=[],this.hooksManager=[],this.analyzed=!1,this.selfScroll=e}return r.create=function(e){return new r(e)},r.prototype.hasAncestors=function(e){var t=Tu(this.ancestors,function(n){var i=n[0];return i===e});return t>-1},r.prototype.hasDescendants=function(e){var t=Tu(this.descendants,function(n){var i=n[0];return i===e});return t>-1},r.prototype.addAncestor=function(e,t){var n=this.ancestors;n.push([e,t]),n.sort(function(i,s){return i[1]-s[1]})},r.prototype.addDescendant=function(e,t){var n=this.descendants;n.push([e,t]),n.sort(function(i,s){return i[1]-s[1]})},r.prototype.removeAncestor=function(e){var t=this.ancestors;if(t.length){var n=Tu(this.ancestors,function(i){var s=i[0];return s===e});if(n>-1)return t.splice(n,1)}},r.prototype.removeDescendant=function(e){var t=this.descendants;if(t.length){var n=Tu(this.descendants,function(i){var s=i[0];return s===e});if(n>-1)return t.splice(n,1)}},r.prototype.registerHooks=function(e,t,n){e.on(t,n),this.hooksManager.push([e,t,n])},r.prototype.setAnalyzed=function(e){e===void 0&&(e=!1),this.analyzed=e},r.prototype.purge=function(){var e=this;this.ancestors.forEach(function(t){var n=t[0];n.removeDescendant(e)}),this.descendants.forEach(function(t){var n=t[0];n.removeAncestor(e)}),this.hooksManager.forEach(function(t){var n=t[0],i=t[1],s=t[2];n.off(i,s)}),this.hooksManager=[]},r}(),HW="plugins.nestedScroll",zW=[{key:"purgeNestedScroll",name:"purgeNestedScroll"}],$W=zW.map(function(r){return{key:r.key,sourceKey:HW+"."+r.name}}),YW="INTERNAL_NESTED_SCROLL",GW=function(r){r.forEach(function(e){e.pending&&(e.stop(),e.resetPosition())})},sC=function(r){r.forEach(function(e){e.enable()})},Cp=function(r,e){r.forEach(function(t){(t.hasHorizontalScroll===e.hasHorizontalScroll||t.hasVerticalScroll===e.hasVerticalScroll)&&t.disable()})},WW=function(r){r.forEach(function(e){var t=e.scroller,n=t.actions,i=t.scrollBehaviorX,s=t.scrollBehaviorY;n.fingerMoved=!0,n.contentMoved=!1,n.directionLockAction.reset(),i.start(),s.start(),i.resetStartPos(),s.resetStartPos(),n.startTime=+new Date})},VW=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,s=r.minScrollX,o=r.maxScrollX,a=r.minScrollY,u=r.maxScrollY,l=r.movingDirectionX,h=r.movingDirectionY,c=!1,d=n>=s&&l===-1,p=n<=o&&l===1,g=i>=a&&h===-1,v=i<=u&&h===1;return t?c=g||v:e&&(c=d||p),c},qW=function(r){var e=r.hasHorizontalScroll,t=r.hasVerticalScroll,n=r.x,i=r.y,s=r.minScrollX,o=r.maxScrollX,a=r.minScrollY,u=r.maxScrollY,l=!1,h=n>s,c=n<o,d=i>a,p=i<u;return t?l=d||p:e&&(l=h||c),l},KW=function(r){r.scroller.reflow(),r.resetPosition(0)},QW=function(r,e){for(var t=0,n=r.parentNode;n&&n!==e;)t++,n=n.parentNode;return t},ZW=function(){function r(e){var t=this.handleOptions(e),n=r.instancesMap[t];return n||(n=r.instancesMap[t]=this,n.store=[],n.hooksFn=[]),n.init(e),n}return r.getAllNestedScrolls=function(){var e=r.instancesMap;return Object.keys(e).map(function(t){return e[t]})},r.purgeAllNestedScrolls=function(){var e=r.getAllNestedScrolls();e.forEach(function(t){return t.purgeNestedScroll()})},r.prototype.handleOptions=function(e){var t=e.options.nestedScroll===!0?{}:e.options.nestedScroll,n={groupId:YW};this.options=Gr(n,t);var i=typeof this.options.groupId;return i!=="string"&&i!=="number"&&Di("groupId must be string or number for NestedScroll plugin"),this.options.groupId},r.prototype.init=function(e){e.proxy($W),this.addBScroll(e),this.buildBScrollGraph(),this.analyzeBScrollGraph(),this.ensureEventInvokeSequence(),this.handleHooks(e)},r.prototype.handleHooks=function(e){var t=this;this.registerHooks(e.hooks,e.hooks.eventTypes.destroy,function(){t.deleteScroll(e)})},r.prototype.deleteScroll=function(e){var t=e.wrapper;t.isBScrollContainer=void 0;var n=this.store,i=this.hooksFn,s=Tu(n,function(d){return d.selfScroll===e});if(s>-1){var o=n[s];o.purge(),n.splice(s,1)}var a=Tu(i,function(d){var p=d[0];return p===e.hooks});if(a>-1){var u=i[a],l=u[0],h=u[1],c=u[2];l.off(h,c),i.splice(a,1)}},r.prototype.addBScroll=function(e){this.store.push(XW.create(e))},r.prototype.buildBScrollGraph=function(){for(var e=this.store,t,n,i,s,o=this.store.length,a=0;a<o;a++){t=e[a],i=t.selfScroll.wrapper;for(var u=0;u<o;u++)if(n=e[u],s=n.selfScroll.wrapper,t!==n&&i.contains(s)){var l=QW(s,i);t.hasDescendants(n)||t.addDescendant(n,l),n.hasAncestors(t)||n.addAncestor(t,l)}}},r.prototype.analyzeBScrollGraph=function(){this.store.forEach(function(e){if(!e.analyzed){var t=e.ancestors,n=e.descendants,i=e.selfScroll,s=function(){var u=t.map(function(h){var c=h[0];return c.selfScroll}),l=n.map(function(h){var c=h[0];return c.selfScroll});GW(ag(u,l)),qW(i)&&KW(i),WW(u),Cp(u,i)},o=function(){var u=t.map(function(h){var c=h[0];return c.selfScroll}),l=n.map(function(h){var c=h[0];return c.selfScroll});sC(ag(u,l))};e.registerHooks(i,i.eventTypes.beforeScrollStart,s),e.registerHooks(i,i.eventTypes.touchEnd,o);var a=i.scroller.actions.hooks;e.registerHooks(a,a.eventTypes.detectMovingDirection,function(){var u=t.map(function(p){var g=p[0];return g.selfScroll}),l=u[0],h=u.slice(1),c=i.scroller.actions.contentMoved,d=u.length===0;if(c)Cp(u,i);else if(!d&&VW(i))return Cp([i],i),l&&sC([l]),Cp(h,i),!0}),e.setAnalyzed(!0)}})},r.prototype.ensureEventInvokeSequence=function(){var e=this.store.slice(),t=e.sort(function(n,i){return n.descendants.length-i.descendants.length});t.forEach(function(n){var i=n.selfScroll;i.scroller.actionsHandler.rebindDOMEvents()})},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.purgeNestedScroll=function(){var e=this.options.groupId;this.store.forEach(function(t){t.purge()}),this.store=[],this.hooksFn.forEach(function(t){var n=t[0],i=t[1],s=t[2];n.off(i,s)}),this.hooksFn=[],delete r.instancesMap[e]},r.pluginName="nestedScroll",r.instancesMap={},r}(),oC=10,aC=30,JW=function(){function r(e,t){this.wrapperHeight=e,this.tombstoneHeight=t,this.lastDirection=1,this.lastPos=0}return r.prototype.calculate=function(e,t){var n=e-this.lastPos;this.lastPos=e;var i=this.getDirection(n),s=this.calculateIndex(0,e,t),o=this.calculateIndex(s,e+this.wrapperHeight,t);return i===1?(s-=oC,o+=aC):(s-=aC,o+=oC),s<0&&(s=0),{start:s,end:o}},r.prototype.getDirection=function(e){var t;if(e>0)t=1;else if(e<0)t=0;else return this.lastDirection;return this.lastDirection=t,t},r.prototype.calculateIndex=function(e,t,n){if(t<=0)return e;for(var i=e,s=n[i]&&n[i].pos!==-1?n[i].pos:0,o=s,a=0;i<n.length&&n[i].pos<t;)o=n[i].pos,i++;return i===n.length&&(a=Math.floor((t-o)/this.tombstoneHeight)),i+=a,i},r.prototype.resetState=function(){this.lastDirection=1,this.lastPos=0},r}(),eV=function(){function r(){this.data=null,this.dom=null,this.tombstone=null,this.width=0,this.height=0,this.pos=0}return r}(),tV=function(){function r(e,t,n){this.fetchFn=t,this.onFetchFinish=n,this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=e||[]}return r.prototype.update=function(e){return Wy(this,void 0,void 0,function(){var t;return Vy(this,function(n){return this.hasMore||(e=Math.min(e,this.list.length)),e>this.list.length&&(t=e-this.list.length,this.addEmptyData(t)),[2,this.checkToFetch(e)]})})},r.prototype.add=function(e){for(var t=0;t<e.length;t++)this.list[this.loadedNum]?this.list[this.loadedNum]=$i($i({},this.list[this.loadedNum]),{data:e[t]}):this.list[this.loadedNum]={data:e[t]},this.loadedNum++;return this.list},r.prototype.addEmptyData=function(e){for(var t=0;t<e;t++)this.list.push(new eV);return this.list},r.prototype.fetch=function(e){return Wy(this,void 0,void 0,function(){var t;return Vy(this,function(n){switch(n.label){case 0:return this.fetching?[2,[]]:(this.fetching=!0,[4,this.fetchFn(e)]);case 1:return t=n.sent(),this.fetching=!1,[2,t]}})})},r.prototype.checkToFetch=function(e){return Wy(this,void 0,void 0,function(){var t,n,i;return Vy(this,function(s){switch(s.label){case 0:return this.hasMore?e<=this.loadedNum?[2]:(t=e-this.loadedNum,[4,this.fetch(t)]):[2];case 1:return n=s.sent(),n instanceof Array&&n.length?(this.add(n),i=this.onFetchFinish(this.list,!0),[2,this.checkToFetch(i)]):(typeof n=="boolean"&&n===!1&&(this.hasMore=!1,this.list.splice(this.loadedNum),this.onFetchFinish(this.list,!1)),[2])}})})},r.prototype.getList=function(){return this.list},r.prototype.resetState=function(){this.loadedNum=0,this.fetching=!1,this.hasMore=!0,this.list=[]},r}(),tm=function(){function r(e){this.create=e,this.cached=[],this.width=0,this.height=0,this.initialed=!1,this.getSize()}return r.isTombstone=function(e){return e&&e.classList?e.classList.contains("tombstone"):!1},r.prototype.getSize=function(){if(!this.initialed){var e=this.create();e.style.position="absolute",document.body.appendChild(e),e.style.display="",this.height=e.offsetHeight,this.width=e.offsetWidth,document.body.removeChild(e),this.cached.push(e)}},r.prototype.getOne=function(){var e=this.cached.pop();if(e){var t=e.style;return t.display="",t.opacity="1",t[Ut.transform]="",t[Ut.transition]="",e}return this.create()},r.prototype.recycle=function(e){for(var t=0,n=e;t<n.length;t++){var i=n[t];i.style.display="none",this.cached.push(i)}return this.cached},r.prototype.recycleOne=function(e){return this.cached.push(e),this.cached},r}(),Jy=200,rV=function(){function r(e,t,n){this.renderFn=t,this.tombstone=n,this.unusedDom=[],this.timers=[],this.setContent(e)}return r.prototype.update=function(e,t,n){t>=e.length&&(t=e.length-1),n>e.length&&(n=e.length),this.collectUnusedDom(e,t,n),this.createDom(e,t,n),this.cacheHeight(e,t,n);var i=this.positionDom(e,t,n),s=i.startPos,o=i.startDelta,a=i.endPos;return{start:t,startPos:s,startDelta:o,end:n,endPos:a}},r.prototype.collectUnusedDom=function(e,t,n){for(var i=0;i<e.length;i++){if(i===t){i=n-1;continue}if(e[i].dom){var s=e[i].dom;tm.isTombstone(s)?(this.tombstone.recycleOne(s),s.style.display="none"):this.unusedDom.push(s),e[i].dom=null}}return e},r.prototype.createDom=function(e,t,n){for(var i=t;i<n;i++){var s=e[i].dom,o=e[i].data;if(s)if(tm.isTombstone(s)&&o)e[i].tombstone=s,e[i].dom=null;else continue;s=o?this.renderFn(o,this.unusedDom.pop()):this.tombstone.getOne(),s.style.position="absolute",e[i].dom=s,e[i].pos=-1,this.content.appendChild(s)}},r.prototype.cacheHeight=function(e,t,n){for(var i=t;i<n;i++)e[i].data&&!e[i].height&&(e[i].height=e[i].dom.offsetHeight)},r.prototype.positionDom=function(e,t,n){for(var i=this,s=[],o=this.getStartPos(e,t,n),a=o.start,u=o.delta,l=a,h=t;h<n;h++){var c=e[h].tombstone;if(c){var d=c.style;d[Ut.transition]=NG+"transform "+Jy+"ms, opacity "+Jy+"ms",d[Ut.transform]="translateY("+l+"px)",d.opacity="0",e[h].tombstone=null,s.push(c)}e[h].dom&&e[h].pos!==l&&(e[h].dom.style[Ut.transform]="translateY("+l+"px)",e[h].pos=l),l+=e[h].height||this.tombstone.height}var p=window.setTimeout(function(){i.tombstone.recycle(s)},Jy);return this.timers.push(p),{startPos:a,startDelta:u,endPos:l}},r.prototype.getStartPos=function(e,t,n){if(e[t]&&e[t].pos!==-1)return{start:e[t].pos,delta:0};for(var i=e[0].pos===-1?0:e[0].pos,s=0;s<t;s++)i+=e[s].height||this.tombstone.height;var o=i,a;for(a=t;a<n;a++)if(!tm.isTombstone(e[a].dom)&&e[a].pos!==-1){i=e[a].pos;break}var u=a;if(u<n)for(;u>t;)i-=e[u-1].height,u--;var l=o-i;return{start:i,delta:l}},r.prototype.removeTombstone=function(){for(var e=this.content.querySelectorAll(".tombstone"),t=e.length-1;t>=0;t--)this.content.removeChild(e[t])},r.prototype.setContent=function(e){e!==this.content&&(this.content=e)},r.prototype.destroy=function(){this.removeTombstone(),this.timers.forEach(function(e){clearTimeout(e)})},r.prototype.resetState=function(){this.destroy(),this.timers=[],this.unusedDom=[]},r}(),nV=-2e3,iV=function(){function r(e){this.scroll=e,this.start=0,this.end=0,this.init()}return r.prototype.init=function(){var e=this;this.handleOptions();var t=this.options,n=t.fetch,i=t.render,s=t.createTombstone;this.tombstone=new tm(s),this.indexCalculator=new JW(this.scroll.scroller.scrollBehaviorY.wrapperSize,this.tombstone.height),this.domManager=new rV(this.scroll.scroller.content,i,this.tombstone),this.dataManager=new tV([],n,this.onFetchFinish.bind(this)),this.scroll.on(this.scroll.eventTypes.destroy,this.destroy,this),this.scroll.on(this.scroll.eventTypes.scroll,this.update,this),this.scroll.on(this.scroll.eventTypes.contentChanged,function(a){e.domManager.setContent(a),e.indexCalculator.resetState(),e.domManager.resetState(),e.dataManager.resetState(),e.update({y:0})});var o=this.scroll.scroller.scrollBehaviorY;o.hooks.on(o.hooks.eventTypes.computeBoundary,this.modifyBoundary,this),this.update({y:0})},r.prototype.modifyBoundary=function(e){e.maxScrollPos=nV},r.prototype.handleOptions=function(){var e=this.scroll.options.infinity;e&&(typeof e.fetch!="function"&&Di("Infinity plugin need fetch Function to new data."),typeof e.render!="function"&&Di("Infinity plugin need render Function to render each item."),typeof e.render!="function"&&Di("Infinity plugin need createTombstone Function to create tombstone."),this.options=e),this.scroll.options.probeType=3},r.prototype.update=function(e){var t=Math.round(-e.y),n=this.indexCalculator.calculate(t,this.dataManager.getList()),i=n.start,s=n.end;this.start=i,this.end=s,this.dataManager.update(s),this.updateDom(this.dataManager.getList())},r.prototype.onFetchFinish=function(e,t){var n=this.updateDom(e).end;return t||(this.domManager.removeTombstone(),this.scroll.scroller.animater.stop(),this.scroll.resetPosition()),n},r.prototype.updateDom=function(e){var t=this.domManager.update(e,this.start,this.end),n=t.end,i=t.startPos,s=t.endPos,o=t.startDelta;return o&&(this.scroll.minScrollY=o),s>this.scroll.maxScrollY&&(this.scroll.maxScrollY=-(s-this.scroll.scroller.scrollBehaviorY.wrapperSize)),{end:n,startPos:i,endPos:s}},r.prototype.destroy=function(){for(var e=this.scroll.scroller,t=e.content,n=e.scrollBehaviorY;t.firstChild;)t.removeChild(t.firstChild);this.domManager.destroy(),this.scroll.off("scroll",this.update),this.scroll.off("destroy",this.destroy),n.hooks.off(n.hooks.eventTypes.computeBoundary)},r.pluginName="infinity",r}(),sV="plugins.movable",oV=[{key:"putAt",name:"putAt"}],aV=oV.map(function(r){return{key:r.key,sourceKey:sV+"."+r.name}}),lV=function(){function r(e){this.scroll=e,this.handleBScroll(),this.handleHooks()}return r.prototype.handleBScroll=function(){this.scroll.proxy(aV)},r.prototype.handleHooks=function(){var e=this;this.hooksFn=[];var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY,s=function(o,a){o.maxScrollPos>0&&(o.minScrollPos=a.wrapperSize-a.contentSize,o.maxScrollPos=0)};this.registerHooks(n.hooks,n.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(n.hooks,n.hooks.eventTypes.computeBoundary,function(o){s(o,n)}),this.registerHooks(i.hooks,i.hooks.eventTypes.ignoreHasScroll,function(){return!0}),this.registerHooks(i.hooks,i.hooks.eventTypes.computeBoundary,function(o){s(o,i)}),this.registerHooks(this.scroll.hooks,this.scroll.hooks.eventTypes.destroy,function(){e.destroy()})},r.prototype.putAt=function(e,t,n,i){n===void 0&&(n=this.scroll.options.bounceTime),i===void 0&&(i=Ir.bounce);var s=this.resolvePostion(e,t);this.scroll.scrollTo(s.x,s.y,n,i)},r.prototype.resolvePostion=function(e,t){var n=this.scroll.scroller,i=n.scrollBehaviorX,s=n.scrollBehaviorY,o={left:function(){return 0},top:function(){return 0},right:function(){return i.minScrollPos},bottom:function(){return s.minScrollPos},center:function(a){var u=a===0?i.minScrollPos:s.minScrollPos;return u/2}};return{x:typeof e=="number"?e:o[e](0),y:typeof t=="number"?t:o[t](1)}},r.prototype.destroy=function(){this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.pluginName="movable",r.applyOrder="pre",r}(),uV=function(r){return r.tagName.toLowerCase()==="img"},cV=function(){function r(e){this.scroll=e,this.refreshTimer=0,this.init()}return r.prototype.init=function(){this.handleOptions(this.scroll.options.observeImage),this.bindEventsToWrapper()},r.prototype.handleOptions=function(e){e===void 0&&(e={}),e=e===!0?{}:e;var t={debounceTime:100};this.options=Gr(t,e)},r.prototype.bindEventsToWrapper=function(){var e=this.scroll.scroller.wrapper;this.imageLoadEventRegister=new _n(e,[{name:"load",handler:this.load.bind(this),capture:!0}]),this.imageErrorEventRegister=new _n(e,[{name:"error",handler:this.load.bind(this),capture:!0}])},r.prototype.load=function(e){var t=this,n=e.target,i=this.options.debounceTime;n&&uV(n)&&(i===0?this.scroll.refresh():(clearTimeout(this.refreshTimer),this.refreshTimer=window.setTimeout(function(){t.scroll.refresh()},this.options.debounceTime)))},r.pluginName="observeImage",r}(),hV=function(r){var e={ratioX:0,ratioY:0};return r&&(typeof r=="number"?e.ratioX=e.ratioY=r:typeof r=="object"&&r&&(e.ratioX=r.x||0,e.ratioY=r.y||0)),e},e1=function(r){hl(r),r.stopPropagation()},dV=function(){function r(e,t){this.scroll=e,this.options=t,this.currentPos={x:0,y:0},this.hooksFn=[],this.handleDOM(),this.handleHooks(),this.handleInteractive()}return r.prototype.handleDOM=function(){var e=this.options,t=e.relationElement,n=e.relationElementHandleElementIndex,i=n===void 0?0:n;this.wrapper=t,this.indicatorEl=this.wrapper.children[i]},r.prototype.handleHooks=function(){var e=this,t=this.scroll,n=t.hooks,i=t.scroller.translater.hooks,s=t.scroller.animater.hooks;this.registerHooks(n,n.eventTypes.refresh,this.refresh),this.registerHooks(i,i.eventTypes.translate,function(o){e.updatePosition(o)}),this.registerHooks(s,s.eventTypes.time,this.transitionTime),this.registerHooks(s,s.eventTypes.timeFunction,this.transitionTimingFunction)},r.prototype.transitionTime=function(e){e===void 0&&(e=0),this.indicatorEl.style[Ut.transitionDuration]=e+"ms"},r.prototype.transitionTimingFunction=function(e){this.indicatorEl.style[Ut.transitionTimingFunction]=e},r.prototype.handleInteractive=function(){this.options.interactive!==!1&&this.registerEvents()},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.registerEvents=function(){var e=this.scroll.options,t=e.disableMouse,n=e.disableTouch,i=[],s=[],o=[];t||(i.push({name:"mousedown",handler:this.start.bind(this)}),s.push({name:"mousemove",handler:this.move.bind(this)}),o.push({name:"mouseup",handler:this.end.bind(this)})),n||(i.push({name:"touchstart",handler:this.start.bind(this)}),s.push({name:"touchmove",handler:this.move.bind(this)}),o.push({name:"touchend",handler:this.end.bind(this)},{name:"touchcancel",handler:this.end.bind(this)})),this.startEventRegister=new _n(this.indicatorEl,i),this.moveEventRegister=new _n(window,s),this.endEventRegister=new _n(window,o)},r.prototype.refresh=function(){var e=this.scroll,t=e.x,n=e.y,i=e.hasHorizontalScroll,s=e.hasVerticalScroll,o=e.maxScrollX,a=e.maxScrollY,u=hV(this.options.ratio),l=u.ratioX,h=u.ratioY,c=YG(this.wrapper),d=c.width,p=c.height,g=wl(this.indicatorEl),v=g.width,x=g.height;i&&(this.maxScrollX=d-v,this.translateXSign=this.maxScrollX>0?-1:1,this.minScrollX=0,this.ratioX=l||Math.abs(this.maxScrollX/o)),s&&(this.maxScrollY=p-x,this.translateYSign=this.maxScrollY>0?-1:1,this.minScrollY=0,this.ratioY=h||Math.abs(this.maxScrollY/a)),this.updatePosition({x:t,y:n})},r.prototype.start=function(e){if(!this.BScrollIsDisabled()){var t=e.touches?e.touches[0]:e;e1(e),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=Fn(),this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.beforeScrollStart)}},r.prototype.BScrollIsDisabled=function(){return!this.scroll.enabled},r.prototype.move=function(e){if(this.initiated){var t=e.touches?e.touches[0]:e,n=t.pageX,i=t.pageY;e1(e);var s=n-this.lastPointX,o=i-this.lastPointY;if(this.lastPointX=n,this.lastPointY=i,!this.moved&&!this.indicatorNotMoved(s,o)&&(this.moved=!0,this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollStart)),this.moved){var a=this.getBScrollPosByRatio(this.currentPos,s,o);this.syncBScroll(a)}}},r.prototype.end=function(e){if(this.initiated&&(this.initiated=!1,e1(e),this.moved)){var t=this.scroll,n=t.x,i=t.y;this.scroll.scroller.hooks.trigger(this.scroll.scroller.hooks.eventTypes.scrollEnd,{x:n,y:i})}},r.prototype.getBScrollPosByRatio=function(e,t,n){var i=e.x,s=e.y,o=this.scroll,a=o.hasHorizontalScroll,u=o.hasVerticalScroll,l=o.minScrollX,h=o.maxScrollX,c=o.minScrollY,d=o.maxScrollY,p=this.scroll,g=p.x,v=p.y;if(a){var x=tr(i+t,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX)),y=Math.round(x/this.ratioX*this.translateXSign);g=tr(y,h,l)}if(u){var w=tr(s+n,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY)),_=Math.round(w/this.ratioY*this.translateYSign);v=tr(_,d,c)}return{x:g,y:v}},r.prototype.indicatorNotMoved=function(e,t){var n=this.currentPos,i=n.x,s=n.y,o=i===this.minScrollX&&e<=0||i===this.maxScrollX&&e>=0,a=s===this.minScrollY&&t<=0||s===this.maxScrollY&&t>=0;return o&&a},r.prototype.syncBScroll=function(e){var t=Fn(),n=this.scroll,i=n.options,s=n.scroller,o=i.probeType,a=i.momentumLimitTime;s.translater.translate(e),t-this.startTime>a&&(this.startTime=t,o===1&&s.hooks.trigger(s.hooks.eventTypes.scroll,e)),o>1&&s.hooks.trigger(s.hooks.eventTypes.scroll,e)},r.prototype.updatePosition=function(e){var t=this.getIndicatorPosByRatio(e);this.applyTransformProperty(t),this.currentPos=$i({},t)},r.prototype.applyTransformProperty=function(e){var t=this.scroll.options.translateZ,n=["translateX("+e.x+"px)","translateY("+e.y+"px)",""+t];this.indicatorEl.style[Ut.transform]=n.join(" ")},r.prototype.getIndicatorPosByRatio=function(e){var t=e.x,n=e.y,i=this.scroll,s=i.hasHorizontalScroll,o=i.hasVerticalScroll,a=$i({},this.currentPos);if(s){var u=Math.round(this.ratioX*t*this.translateXSign);a.x=tr(u,Math.min(this.minScrollX,this.maxScrollX),Math.max(this.minScrollX,this.maxScrollX))}if(o){var l=Math.round(this.ratioY*n*this.translateYSign);a.y=tr(l,Math.min(this.minScrollY,this.maxScrollY),Math.max(this.minScrollY,this.maxScrollY))}return a},r.prototype.destroy=function(){this.options.interactive!==!1&&(this.startEventRegister.destroy(),this.moveEventRegister.destroy(),this.endEventRegister.destroy()),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)}),this.hooksFn.length=0},r}(),fV=function(){function r(e){this.scroll=e,this.options=[],this.indicators=[],this.handleOptions(),this.handleHooks()}return r.prototype.handleOptions=function(){var e=this.scroll.options.indicators;GP(Array.isArray(e),"'indicators' must be an array.");for(var t=0,n=e;t<n.length;t++){var i=n[t];GP(!!i.relationElement,"'relationElement' must be a HTMLElement."),this.createIndicators(i)}},r.prototype.createIndicators=function(e){this.indicators.push(new dV(this.scroll,e))},r.prototype.handleHooks=function(){var e=this,t=this.scroll.hooks;t.on(t.eventTypes.destroy,function(){for(var n=0,i=e.indicators;n<i.length;n++){var s=i[n];s.destroy()}e.indicators=[]})},r.pluginName="indicators",r}();mc.use(hW).use(dW).use(gW).use(_W).use(SW).use(MW).use(LW).use(jW).use(ZW).use(iV).use(lV).use(cV).use(fV);mc.use(TG);function pV(r,e){return()=>{const{state:t,dispatch:n}=B.useContext(_t),{on:i,data:s,index:o}=t.setting.historyDetail,a=B.useRef(null),{current:u}=B.useRef({detailList:null,call:null}),{currency:l}=t.user,{orientation:h}=t.setting,{tableOptions:c}=Be.Obj,[d,p]=B.useState(0),g=Array.isArray(s)?s:s?[s]:[];function v(S){n(fI(!1,s,o)),S==null||S.stopPropagation()}B.useEffect(()=>{a.current&&!u.detailList&&s&&(u.detailList=new mc(a.current,{scrollX:!0,scrollY:!1,disableTouch:!0,slide:{threshold:100,loop:!1,autoplay:!1},click:!1,momentum:!1,bounce:!1,probeType:0}),u.detailList.on("slidePageChanged",S=>{u.call?(u.call(),u.call=null):p(S.pageX)}))},[a,s]),B.useEffect(()=>{if(i&&u.detailList){const S=setTimeout(()=>{clearTimeout(S),u.detailList.plugins.slide.setCurrentPage({pageX:o,pageY:0}),u.detailList.refresh()},100)}},[i]);const x=o_(()=>{u.detailList&&u.detailList.plugins.slide.prev()},300),y=o_(()=>{u.detailList&&u.detailList.plugins.slide.next()},300);B.useMemo(()=>{h&&u.detailList&&(u.call=()=>{u.detailList.plugins.slide.setCurrentPage({pageX:d,pageY:0})})},[h]);const w=fr(Be.Obj.filterImageFormat(["avif","webp","png"])),_=g.length;return T.jsx(E$,{on:i,style:{backgroundColor:"#25232d"},children:T.jsxs("div",{className:`base-history-detail-mod ${r}`,children:[T.jsx(ye,{className:"head-mod",children:"gametitle"}),T.jsx("div",{ref:a,className:"content-scroll-mod hidden-scroolbar",children:T.jsx("div",{className:"slide-content",children:g.map((S,I)=>T.jsx(e,{render:I==d||I==d-1||I==d+1,symbolFormat:w,data:S,currency:l,table:c},`hid_${I}`))})}),T.jsx(Rn,{className:"arrow-icon left  btn-mod btn-mod-active",onClick:v,style:{position:"absolute",left:"1rem",top:"0.8rem",height:"2rem",width:"2rem"}}),T.jsx(Rn,{className:`arrow-btn left-arrow-btn btn-mod btn-mod-active ${d>0?"db":"dn"}`,onClick:x,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:T.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})}),T.jsx(Rn,{className:`arrow-btn right-arrow-btn btn-mod btn-mod-active ${d<_-1&&_>1?"db":"dn"}`,onClick:y,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:T.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})})]})})}}const mV=pV("cyberpunklora-history-detail-mod",gV);function gV({symbolFormat:r,currency:e,data:t,table:n,render:i}){const s=B.useMemo(()=>{if(t)return new J_(t)},[t]),o=(s==null?void 0:s.data.result.ss)||[],a=fr(Un(bn,"respin").toUpperCase()),u=B.useMemo(()=>t&&t.cost>0?gn(Number(t.cost)):a,[s]);return i?T.jsx("div",{className:"content-mod clearfix hidden-scroolbar",children:T.jsxs("div",{className:"content-box",children:[t?T.jsx("div",{className:"content-top",children:T.jsxs("table",{children:[T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:T.jsx(ye,{tcase:"upper",children:"dateandtime"})}),T.jsx("th",{children:T.jsx(ye,{tcase:"upper",children:"betlevel"})}),T.jsxs("th",{children:[T.jsx(ye,{className:"dib",tcase:"upper",children:"linebet"}),T.jsx("br",{}),"(",e,")"]}),T.jsxs("th",{children:[T.jsx(ye,{className:"dib",tcase:"upper",children:"totalbet"}),T.jsx("br",{}),"(",e,")"]}),T.jsxs("th",{children:[T.jsx(ye,{className:"dib",tcase:"upper",children:"totalwin"}),T.jsx("br",{}),"(",e,")"]})]})}),T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:t.createdOnFormat||vI(t.createdOn)}),T.jsx("th",{children:(s==null?void 0:s.level)||0}),T.jsx("th",{children:gn(Number(t.credit))}),T.jsx("th",{children:u}),T.jsx("th",{children:gn(Number(t.payout))})]})})]})}):T.jsx(T.Fragment,{}),T.jsx("div",{className:"content-right",children:T.jsx("div",{style:{width:"100%"},children:o.length!=0?T.jsx("div",{className:"payline-table",style:{verticalAlign:"middle"},children:br(5,l=>{const h=s.ssMap[l];return h?T.jsx("div",{className:"s-column",children:br(3,c=>{let d=0;return h?d=h[c]:d=7,T.jsx("div",{className:`s-item icon-mod symbol cyberpunklora-symbol-${d} ${r}`},`payline-i-${c}`)})},`s-${l}`):T.jsxs("div",{className:"s-column",children:[T.jsx("div",{className:`s-item icon-mod symbol ${r}`,style:{borderBottomColor:"transparent"}}),T.jsx("div",{className:`s-item icon-mod symbol ${r}`,style:{borderTopColor:"transparent",borderBottomColor:"transparent"}}),T.jsx("div",{className:`s-item icon-mod symbol ${r}`,style:{borderTopColor:"transparent"}}),T.jsx("div",{className:`s-item icon-mod symbol cyberpunklora-symbol-8 ${r}`,style:{paddingBottom:"300%",paddingTop:"2px"}})]},`s-${l}`)})}):T.jsx(T.Fragment,{})})}),T.jsx("div",{className:"content-left",children:T.jsxs("table",{style:{width:"100%"},children:[T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{}),T.jsx("th",{children:T.jsx(ye,{tcase:"upper",children:"cluster"})}),T.jsxs("th",{children:[T.jsx(ye,{className:"dib",tcase:"upper",children:"win"}),T.jsx("br",{}),"(",e,")"]})]})}),s?s.wins.map((l,h)=>{const c=l.cls.c;return T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:h+1}),T.jsx("th",{children:T.jsx("div",{className:"payline-table",children:br(5,d=>{const p=s.ssMap[d];let v=s.wildReels.indexOf(d)!=-1||!p;return v&&c.findIndex(([y,w])=>y==d)==-1&&(v=!1),v?T.jsxs("div",{className:"s-column",children:[T.jsx("div",{className:`s-item icon-mod symbol ${r}`,style:{fontSize:0,borderBottomColor:"transparent"}}),T.jsx("div",{className:`s-item icon-mod symbol ${r}`,style:{fontSize:0,borderTopColor:"transparent",borderBottomColor:"transparent"}}),T.jsx("div",{className:`s-item icon-mod symbol ${r}`,style:{fontSize:0,borderTopColor:"transparent"}}),T.jsx("div",{className:`s-item icon-mod symbol cyberpunklora-symbol-8 ${r}`,style:{paddingBottom:"300%",paddingTop:"2px",fontSize:0}})]},`s-${d}`):T.jsx("div",{className:"s-column",children:br(3,x=>{let y;if(c.findIndex(([_,S])=>_==d&&S==x)>=0){const _=s.ssMap[d];_&&s.wildReels.indexOf(d)==-1?y=_[x]:y=7}return T.jsx("div",{className:`s-item icon-mod symbol cyberpunklora-symbol-${y} ${r}`,style:{fontSize:0}},`payline-i-${x}`)})},`s-${d}`)})})}),T.jsx("th",{children:gn(s.credit.mul(s.level).mul(l.cls.m).toNumber(),2)})]})},`table${h}`)}):null]})})]})}):T.jsx("div",{className:"content-mod"})}/*!
 * better-scroll / mouse-wheel
 * (c) 2016-2023 ustbhuangyi
 * Released under the MIT License.
 */function vV(r){console.error("[BScroll warn]: "+r)}var Od=typeof window<"u",lg=Od&&navigator.userAgent.toLowerCase();lg&&lg.indexOf("android")>0;(function(){if(typeof lg=="string"){var r=/os (\d\d?_\d(_\d)?)/,e=r.exec(lg);if(!e)return!1;var t=e[1].split("_").map(function(n){return parseInt(n,10)});return t[0]===13&&t[1]>=4}return!1})();var wO=!1;if(Od){var yV="test-passive";try{var lC={};Object.defineProperty(lC,"passive",{get:function(){wO=!0}}),window.addEventListener(yV,function(){},lC)}catch{}}var xV=function(r,e){for(var t in e)r[t]=e[t];return r},bO=Od&&document.createElement("div").style,Vu=function(){if(!Od)return!1;for(var r=[{key:"standard",value:"transform"},{key:"webkit",value:"webkitTransform"},{key:"Moz",value:"MozTransform"},{key:"O",value:"OTransform"},{key:"ms",value:"msTransform"}],e=0,t=r;e<t.length;e++){var n=t[e];if(bO[n.value]!==void 0)return n.key}return!1}();function eo(r){return Vu===!1?r:Vu==="standard"?r==="transitionEnd"?"transitionend":r:Vu+r.charAt(0).toUpperCase()+r.substr(1)}function _V(r,e,t,n){var i=wO?{passive:!1,capture:!!n}:!!n;r.addEventListener(e,t,i)}function wV(r,e,t,n){r.removeEventListener(e,t,{capture:!!n})}function bV(r){r.cancelable&&r.preventDefault()}Vu&&Vu!=="standard"&&""+Vu.toLowerCase();var SV=eo("transform"),TV=eo("transition");Od&&eo("perspective")in bO;eo("transitionTimingFunction"),eo("transitionDuration"),eo("transitionDelay"),eo("transformOrigin"),eo("transitionEnd"),eo("transitionProperty");function EV(r,e){for(var t in e)if(e[t].test(r[t]))return!0;return!1}var PV=function(){function r(e,t){this.wrapper=e,this.events=t,this.addDOMEvents()}return r.prototype.destroy=function(){this.removeDOMEvents(),this.events=[]},r.prototype.addDOMEvents=function(){this.handleDOMEvents(_V)},r.prototype.removeDOMEvents=function(){this.handleDOMEvents(wV)},r.prototype.handleDOMEvents=function(e){var t=this,n=this.wrapper;this.events.forEach(function(i){e(n,i.name,t,!!i.capture)})},r.prototype.handleEvent=function(e){var t=e.type;this.events.some(function(n){return n.name===t?(n.handler(e),!0):!1})},r}(),CV=function(){function r(e){this.scroll=e,this.wheelEndTimer=0,this.wheelMoveTimer=0,this.wheelStart=!1,this.init()}return r.prototype.init=function(){this.handleBScroll(),this.handleOptions(),this.handleHooks(),this.registerEvent()},r.prototype.handleBScroll=function(){this.scroll.registerType(["alterOptions","mousewheelStart","mousewheelMove","mousewheelEnd"])},r.prototype.handleOptions=function(){var e=this.scroll.options.mouseWheel===!0?{}:this.scroll.options.mouseWheel,t={speed:20,invert:!1,easeTime:300,discreteTime:400,throttleTime:0,dampingFactor:.1};this.mouseWheelOpt=xV(t,e)},r.prototype.handleHooks=function(){this.hooksFn=[],this.registerHooks(this.scroll.hooks,"destroy",this.destroy)},r.prototype.registerEvent=function(){this.eventRegister=new PV(this.scroll.scroller.wrapper,[{name:"wheel",handler:this.wheelHandler.bind(this)},{name:"mousewheel",handler:this.wheelHandler.bind(this)},{name:"DOMMouseScroll",handler:this.wheelHandler.bind(this)}])},r.prototype.registerHooks=function(e,t,n){e.on(t,n,this),this.hooksFn.push([e,t,n])},r.prototype.wheelHandler=function(e){if(this.scroll.enabled){this.beforeHandler(e),this.wheelStart||(this.wheelStartHandler(e),this.wheelStart=!0);var t=this.getWheelDelta(e);this.wheelMoveHandler(t),this.wheelEndDetector(t)}},r.prototype.wheelStartHandler=function(e){this.cleanCache();var t=this.scroll.scroller,n=t.scrollBehaviorX,i=t.scrollBehaviorY;n.setMovingDirection(0),i.setMovingDirection(0),n.setDirection(0),i.setDirection(0),this.scroll.trigger(this.scroll.eventTypes.alterOptions,this.mouseWheelOpt),this.scroll.trigger(this.scroll.eventTypes.mousewheelStart)},r.prototype.cleanCache=function(){this.deltaCache=[]},r.prototype.wheelMoveHandler=function(e){var t=this,n=this.mouseWheelOpt,i=n.throttleTime,s=n.dampingFactor;if(i&&this.wheelMoveTimer)this.deltaCache.push(e);else{var o=this.deltaCache.reduce(function(p,g){return{x:p.x+g.x,y:p.y+g.y}},{x:0,y:0});this.cleanCache();var a=this.scroll.scroller,u=a.scrollBehaviorX,l=a.scrollBehaviorY;u.setMovingDirection(-e.directionX),l.setMovingDirection(-e.directionY),u.setDirection(e.x),l.setDirection(e.y);var h=u.performDampingAlgorithm(Math.round(e.x)+o.x,s),c=l.performDampingAlgorithm(Math.round(e.y)+o.x,s);if(!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove,{x:h,y:c})){var d=this.getEaseTime();(h!==this.scroll.x||c!==this.scroll.y)&&this.scroll.scrollTo(h,c,d)}i&&(this.wheelMoveTimer=window.setTimeout(function(){t.wheelMoveTimer=0},i))}},r.prototype.wheelEndDetector=function(e){var t=this;window.clearTimeout(this.wheelEndTimer),this.wheelEndTimer=window.setTimeout(function(){t.wheelStart=!1,window.clearTimeout(t.wheelMoveTimer),t.wheelMoveTimer=0,t.scroll.trigger(t.scroll.eventTypes.mousewheelEnd,e)},this.mouseWheelOpt.discreteTime)},r.prototype.getWheelDelta=function(e){var t=this.mouseWheelOpt,n=t.speed,i=t.invert,s=0,o=0,a=i?-1:1;switch(!0){case"deltaX"in e:e.deltaMode===1?(s=-e.deltaX*n,o=-e.deltaY*n):(s=-e.deltaX,o=-e.deltaY);break;case"wheelDeltaX"in e:s=e.wheelDeltaX/120*n,o=e.wheelDeltaY/120*n;break;case"wheelDelta"in e:s=o=e.wheelDelta/120*n;break;case"detail"in e:s=o=-e.detail/3*n;break}s*=a,o*=a,this.scroll.hasVerticalScroll||(Math.abs(o)>Math.abs(s)&&(s=o),o=0),this.scroll.hasHorizontalScroll||(s=0);var u=s>0?-1:s<0?1:0,l=o>0?-1:o<0?1:0;return{x:s,y:o,directionX:u,directionY:l}},r.prototype.beforeHandler=function(e){var t=this.scroll.options,n=t.preventDefault,i=t.stopPropagation,s=t.preventDefaultException;n&&!EV(e.target,s)&&bV(e),i&&e.stopPropagation()},r.prototype.getEaseTime=function(){var e=100,t=this.mouseWheelOpt.easeTime;return t<e&&vV("easeTime should be greater than 100.If mouseWheel easeTime is too small,scrollEnd will be triggered many times."),Math.max(t,e)},r.prototype.destroy=function(){this.eventRegister.destroy(),window.clearTimeout(this.wheelEndTimer),window.clearTimeout(this.wheelMoveTimer),this.hooksFn.forEach(function(e){var t=e[0],n=e[1],i=e[2];t.off(n,i)})},r.pluginName="mouseWheel",r.applyOrder="pre",r}();mc.use(CV);function AV({TitleEL:r=SO,ItemEL:e=kV,order:t=1}){const{state:n,dispatch:i}=B.useContext(_t),{historyListOn:s,orientation:o,historyDetail:a}=n.setting,u=B.useRef(null),l=B.useRef(null),[h,c]=B.useState(0),[d,p]=B.useState(!1),{current:g}=B.useRef({selectedDate:h,historyList:null,dateList:null,page:0,size:20,list:[],isNoMoreData:!1,recordMap:{},loading:!1}),v=Be.Obj.urlOptions.lang;function x(){g.loading=!1,g.historyList.finishPullUp();const M=setTimeout(()=>{g.historyList.refresh(),clearTimeout(M)},200);p(!1)}function y(M){g.recordMap[M]={page:g.page,list:g.list,isNoMoreData:g.isNoMoreData}}function w(){if(g.isNoMoreData||g.loading)g.historyList.finishPullUp();else{p(!0);const M=new Date,O=M.getTime(),F=M.getTimezoneOffset()*60;let U=M.setHours(0,0,0,0)/1e3-g.selectedDate*24*60*60,H=U+24*60*60-1;g.selectedDate==6&&(U-=F),g.selectedDate==0&&(H=Math.floor(O/1e3)-1),g.loading=!0,yg().history(U,H,g.page,g.size,t).then(L=>{L.code?i(en("")):(g.page++,g.list=g.list.concat(L.list),g.isNoMoreData=L.list<g.size,y(g.selectedDate)),x()}).catch(()=>{x()})}}function _(){!a.on&&i(dI(!1))}function S(M,O){i(fI(!0,g.list,O))}function I(M,O){if(!(O&&O.button==2)&&h!=M&&!g.loading){const F=g.recordMap[M];F?(g.page=F.page,g.isNoMoreData=F.isNoMoreData,g.list=F.list):(g.page=0,g.isNoMoreData=!1,g.list=[]),c(M)}}function A(M){g.historyList.scrollTo(0,0,500)}const k=B.useMemo(()=>{const M=new Date().getTime(),O=v==co.Chinese?"MMdd":"dd/MM";return br(7,F=>gI(new Date(M-F*24*60*60*1e3),8,O,v))},[]);return B.useEffect(()=>{if(u.current)return g.historyList=new mc(u.current,{scrollY:!0,pullUpLoad:!0,click:"ontouchstart"in window,mouseWheel:{speed:20,invert:!1,easeTime:300}}),g.historyList.on("pullingUp",w),()=>{g.historyList.destroy()}},[u]),B.useEffect(()=>{if(l.current&&s){const M=setTimeout(()=>{clearTimeout(M),g.dateList=new mc(l.current,{scrollX:!0,click:!1,eventPassthrough:"vertical"}),g.dateList.scrollTo(0,0)},200);return()=>{g.dateList&&g.dateList.destroy()}}},[l,s]),B.useEffect(()=>{s&&(g.selectedDate=h,g.recordMap={},g.page=0,g.isNoMoreData=!1,g.list=[],w())},[s,h]),B.useEffect(()=>{s||c(0)},[s]),T.jsx(Ww,{on:s,style:{backgroundColor:"#1B1B21"},children:T.jsxs("div",{className:"history-list-mod",children:[T.jsx(ye,{className:"head-mod",children:"gametitle"}),T.jsx("div",{ref:l,className:"date-list hidden-scroolbar",children:T.jsx("ul",{className:"content",children:k.map((M,O)=>T.jsx("li",{className:`item btn-mod btn-mod-active ${O==h?"selected":""} ${v}`,onClick:I.bind(null,O),children:M},`dateItem${O}`))})}),T.jsxs("div",{className:"history-model",children:[T.jsx("div",{ref:u,className:"history-list",children:T.jsxs("ul",{className:"content",children:[g.list.map((M,O)=>T.jsx(e,{item:M,index:O,onHistoryDetail:S,lang:v},`historyItem${O}`)),T.jsx("div",{className:"pullup-tips",children:g.isNoMoreData?T.jsx("div",{className:"before-trigger",children:T.jsx("span",{className:"pullup-txt",children:T.jsx(ye,{children:"nomorehostory"})})}):d?T.jsx("div",{className:"after-trigger",children:T.jsxs("span",{className:"pullup-txt",children:[T.jsx(ye,{className:"dib",children:"loading"}),"..."]})}):T.jsx("div",{className:"before-trigger",children:T.jsx("span",{className:"pullup-txt",children:T.jsx(ye,{children:"pullload"})})})})]})}),T.jsx(r,{currency:n.user.currency,lang:v})]}),T.jsxs("div",{className:"footer",children:[T.jsx(ye,{style:{lineHeight:"1rem"},className:"item",replaceMap:{"{%day%}":"7"},children:"history1"}),T.jsx(ye,{style:{lineHeight:"1rem"},className:"item",children:"history2"})]}),T.jsx(Rn,{className:"close-icon btn-mod btn-mod-active",onClick:_,style:{position:"absolute",right:"1rem",top:"0.5rem",height:"2rem",width:"2rem"}}),T.jsx(Rn,{className:`fab icon-mod btn-mod btn-mod-active ${o}`,onClick:A,children:T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"info",viewBox:"0 1 24 24",children:T.jsx("path",{d:"M18.2929 15.2893C18.6834 14.8988 18.6834 14.2656 18.2929 13.8751L13.4007 8.98766C12.6195 8.20726 11.3537 8.20757 10.5729 8.98835L5.68257 13.8787C5.29205 14.2692 5.29205 14.9024 5.68257 15.2929C6.0731 15.6835 6.70626 15.6835 7.09679 15.2929L11.2824 11.1073C11.673 10.7168 12.3061 10.7168 12.6966 11.1073L16.8787 15.2893C17.2692 15.6798 17.9024 15.6798 18.2929 15.2893Z"})})})]})})}function SO({currency:r}){return T.jsxs("div",{className:"default-history-list-item list history-info history-head",children:[T.jsx(ye,{className:"item time",tcase:"upper",children:"dateandtime"}),T.jsxs("div",{className:"item bet",children:[T.jsx(ye,{className:"dib",tcase:"upper",children:"totalbet"}),T.jsx("br",{}),"(",r,")"]}),T.jsxs("div",{className:"item payout",children:[T.jsx(ye,{className:"dib",tcase:"upper",children:"totalwin"}),T.jsx("br",{}),"(",r,")"]}),T.jsx("div",{className:"item detail",children:T.jsx(ye,{})}),T.jsx("div",{className:"line-bottom"})]},"historyItemHead")}function kV({item:r,index:e,onHistoryDetail:t}){return T.jsxs("li",{className:`default-history-list-item list history-info btn-mod ${e%2==0?"even-line":""}`,onClick:t.bind(null,r,e),children:[T.jsx("div",{className:"item time",children:r.createdOnFormat}),T.jsx("div",{className:"item bet",children:gn(Number(r.cost))}),T.jsx("div",{className:"item payout",children:gn(Number(r.payout))}),T.jsx("div",{className:"item detail btn-mod",children:T.jsx("svg",{className:"info",style:{fontWeight:"bolder",verticalAlign:"middle"},version:"1.1",viewBox:"0 0 330 330",xmlSpace:"preserve",children:T.jsx("path",{id:"XMLID_222_",d:`M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001
c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213
C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606
C255,161.018,253.42,157.202,250.606,154.389z`})})}),T.jsx("div",{className:"line-bottom"})]})}function IV(){return T.jsx(AV,{order:1,TitleEL:SO,ItemEL:MV})}function MV({item:r,index:e,onHistoryDetail:t}){const n=fr(Un(bn,"respin").toUpperCase()),i=Number(r.cost);return T.jsxs("li",{className:`default-history-list-item list history-info btn-mod  ${e%2==0?"even-line":""}`,onClick:t.bind(null,r,e),children:[T.jsx("div",{className:"item time",children:r.createdOnFormat}),T.jsx("div",{className:"item bet",children:i==0?n:gn(i)}),T.jsx("div",{className:"item payout",children:gn(Number(r.payout))}),T.jsx("div",{className:"item detail btn-mod",children:T.jsx("svg",{className:"info",style:{fontWeight:"bolder",verticalAlign:"middle"},version:"1.1",viewBox:"0 0 330 330",xmlSpace:"preserve",children:T.jsx("path",{id:"XMLID_222_",d:`M250.606,154.389l-150-149.996c-5.857-5.858-15.355-5.858-21.213,0.001
c-5.857,5.858-5.857,15.355,0.001,21.213l139.393,139.39L79.393,304.394c-5.857,5.858-5.857,15.355,0.001,21.213
C82.322,328.536,86.161,330,90,330s7.678-1.464,10.607-4.394l149.999-150.004c2.814-2.813,4.394-6.628,4.394-10.606
C255,161.018,253.42,157.202,250.606,154.389z`})})}),T.jsx("div",{className:"line-bottom"})]})}const RV=[[[4],[6,"c-s6"],[6,"c-s6"],[6,"c-s6"],[6,"c-s6"]],[[0],[5],[6,"c-s6"],[6,"c-s6"],[6,"c-s6"]],[[4],[1],[5],[2],[6,"c-s6"]]],OV=[[[0,"c-s0"],[0,"c-s0"],[6,"c-s6"],[6,"c-s6"],[6,"c-s6"]],[[0,"c-s0"],[0,"c-s0"],[0,"c-s0"],[5,"c-s5"],[6,"c-s6"]],[[5,"c-s5"],[5,"c-s5"],[5,"c-s5"],[5,"c-s5"],[6,"c-s6"]]],NV=[[[2,"c-s2"],[2,"c-s2"],[2,"c-s2"],[5],[2,"c-s3"]],[[2,"c-s2"],[2,"c-s2"],[0],[6],[2,"c-s3"]],[[5],[0],[2,"c-s3"],[2,"c-s3"],[2,"c-s3"]]],BV=[[0,1,1,0,0],[1,1,0,0,0],[0,1,0,0,0]],LV=[[0,1,0,0,1],[1,1,0,0,0],[0,1,0,0,0]],FV=[[7,0,0,0,3],[0,0,4,2,1],[1,4,2,6,6]],DV=[[2,0,0,0,3],[0,7,3,2,0],[0,3,0,6,6]],UV=[[2,0,0,0,3],[0,0,4,2,1],[0,3,7,6,6]],jV=[[2,0,0,0,3],[0,0,4,7,1],[0,3,2,6,6]],XV=[[2,0,0,0,3],[0,0,4,2,1],[1,3,6,6,7]],HV=[[2,0,0,0,3],[0,0,4,2,7],[1,3,1,5,3]],zV=[[2,0,0,0],[0,0,4,2],[1,3,1,5]];function $V(){const r=B.useRef(null),e=B.useRef(null),t=B.useRef(null),n=B.useRef(null),i=B.useRef(null),{state:s,dispatch:o}=B.useContext(_t),[a,u]=B.useState(0),{payTableOn:l}=s.setting,{orientation:h}=s.setting,c=Be.Obj.urlOptions.lang,d=fr(Be.Obj.filterImageFormat(["avif","webp","png"]));function p(x){o(hI(!1)),x.stopPropagation()}const g=Rz(()=>{var _,S,I;const x=((_=r.current)==null?void 0:_.scrollTop)||0,y=((S=t.current)==null?void 0:S.offsetTop)||0,w=((I=i.current)==null?void 0:I.offsetTop)||0;x>w-250?u(2):x>y-100?u(1):u(0)},300);function v(x){var w,_,S;let y=0;x==1?y=((w=t.current)==null?void 0:w.offsetTop)||0:x==2&&(y=((_=i.current)==null?void 0:_.offsetTop)||0),(S=r.current)==null||S.scrollTo({top:y,behavior:"smooth"}),u(x)}return B.useEffect(()=>{var x;l&&((x=r.current)==null||x.scrollTo({top:0}))},[l]),T.jsxs(Ww,{on:l,children:[T.jsxs("div",{className:"rule-bg-mod",children:[T.jsx("div",{className:`blur-bg bg ${fr(Be.Obj.filterImageFormat(["avif","webp","jpg"]))}`}),T.jsx("div",{className:"cover blur-filter-mod"})]}),T.jsx("div",{className:`rule-head-mod ${h}`,children:T.jsxs("div",{className:"list",children:[T.jsx(ye,{tcase:"upper",className:`item btn-mod ${a==0?"selected":""} ${c}`,onClick:v.bind(null,0),children:"payout"}),T.jsx(ye,{tcase:"upper",className:`item btn-mod ${a==1?"selected":""} ${c}`,onClick:v.bind(null,1),children:"features"}),T.jsx(ye,{tcase:"upper",className:`item btn-mod ${a==2?"selected":""} ${c}`,onClick:v.bind(null,2),children:"gameplay"})]})}),T.jsxs("div",{ref:r,className:`rule-page-mod hidden-scroolbar ${h}`,onScroll:g,children:[T.jsxs("div",{ref:e,id:"geisha-payout",className:"paytable-mod clearfix",children:[T.jsx(ye,{className:"title",children:"clusterpaytable"}),T.jsxs("div",{className:"pay-table-mod",style:{width:"90%",margin:"0 auto"},children:[T.jsxs("div",{className:"column-item",children:[T.jsx("div",{className:"row-item"}),br(11,x=>T.jsx("div",{className:`row-item ${x%2==0?"odd":""}`,children:15-x},`row-${x}`))]}),T.jsxs("div",{className:"column-item color-1",children:[T.jsx("div",{className:"row-item",children:T.jsx("div",{className:`icon-mod cyberpunklora-symbol-6 ${d}`})}),[500,250,150,100,50,25,20,15,10,5,3].map((x,y)=>T.jsx("div",{className:`row-item ${y%2==0?"odd":""}`,children:x},`row-${y}`))]}),T.jsxs("div",{className:"column-item color-2",children:[T.jsx("div",{className:"row-item",children:T.jsx("div",{className:`icon-mod cyberpunklora-symbol-5 ${d}`})}),[300,200,100,50,25,16,11,8,6,4,2].map((x,y)=>T.jsx("div",{className:`row-item ${y%2==0?"odd":""}`,children:x},`row-${y}`))]}),T.jsxs("div",{className:"column-item color-3",children:[T.jsx("div",{className:"row-item",children:T.jsx("div",{className:`icon-mod cyberpunklora-symbol-4 ${d}`})}),[250,150,100,40,20,15,10,5,3.5,2,1].map((x,y)=>T.jsx("div",{className:`row-item ${y%2==0?"odd":""}`,children:x},`row-${y}`))]}),T.jsxs("div",{className:"column-item color-4",children:[T.jsx("div",{className:"row-item",children:T.jsx("div",{className:`icon-mod cyberpunklora-symbol-3 ${d}`})}),[250,150,100,40,20,15,10,5,3.5,2,1].map((x,y)=>T.jsx("div",{className:`row-item ${y%2==0?"odd":""}`,children:x},`row-${y}`))]}),T.jsxs("div",{className:"column-item color-5",children:[T.jsxs("div",{className:"row-item",children:[T.jsx("div",{className:`icon-mod cyberpunklora-symbol-0 small ${h} ${d}`}),T.jsxs("div",{className:"half-row",children:[T.jsx("div",{className:`icon-mod cyberpunklora-symbol-1 small ${h} ${d}`}),T.jsx("div",{className:`icon-mod cyberpunklora-symbol-2 small ${h} ${d}`})]})]}),[100,50,20,10,7,4,3,2,1.5,1,.5].map((x,y)=>T.jsx("div",{className:`row-item ${y%2==0?"odd":""}`,children:x},`row-${y}`))]})]})]}),T.jsxs("div",{ref:t,id:"geisha-features",className:"payline-mod",children:[T.jsx(ye,{className:"title",tcase:"upper",children:"cluster"}),T.jsx(ye,{tmp:["waytowin",":"]}),T.jsxs("div",{className:"detail0",style:{padding:"1rem 0"},children:[T.jsxs("div",{className:"dib w-50",children:[T.jsx("svg",{width:"5rem",height:"5rem",viewBox:"4 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{d:"M18 7L9.42857 17L6 13",stroke:"#ffde17",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),T.jsx("div",{className:"table",children:BV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod w-20 cell yellow ${["","selected"][w]}`},`column-${_}`))},`row-${y}`))})]}),T.jsxs("div",{className:"dib w-50",children:[T.jsx("svg",{width:"5rem",height:"5rem",viewBox:"2 -4 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{d:"M19 5L4.99998 19M5.00001 5L19 19",stroke:"#ff1700",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),T.jsx("div",{className:"table",children:LV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod w-20 cell ${["","selected"][w]}`},`column-${_}`))},`row-${y}`))})]})]}),T.jsxs("div",{children:[T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clpayline1"}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clpayline2"})]}),T.jsx("div",{className:"detail1",children:T.jsxs("div",{className:"row row-1 clearfix",children:[T.jsxs("div",{className:`item fl left ${h}`,children:[T.jsx("div",{children:T.jsx("div",{className:"reel-mod",children:RV.map((x,y)=>T.jsx("div",{children:x.map(([w,_],S)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${_} w-20`,style:{paddingBottom:"20%"}},`column-${S}`))},`row-${y}`))})}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem",padding:"0 0.5rem"},children:"clpayline3"})]}),T.jsxs("div",{className:`item fl right ${h}`,children:[T.jsx("div",{children:T.jsx("div",{className:"reel-mod w-50",children:OV.map((x,y)=>T.jsx("div",{children:x.map(([w,_],S)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${_} w-20`,style:{paddingBottom:"20%"}},`column-${S}`))},`row-${y}`))})}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem",padding:"0 0.5rem"},children:"clpayline4"})]}),T.jsxs("div",{className:`item fr left ${h}`,children:[T.jsx("div",{children:T.jsx("div",{className:"reel-mod",children:NV.map((x,y)=>T.jsx("div",{children:x.map(([w,_],S)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${_} w-20`,style:{paddingBottom:"20%"}},`column-${S}`))},`row-${y}`))})}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem",padding:"0 0.5rem"},children:"clpayline5"})]})]})}),T.jsxs("div",{children:[T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clpayline7"}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clpayline8"}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clpayline9"})]})]}),T.jsxs("div",{ref:n,className:"wild-scatter-mod",children:[T.jsx(ye,{className:"title",children:"expandingwild"}),T.jsxs("div",{style:{padding:"0.5rem 0"},children:[T.jsxs("div",{style:{textAlign:"center",whiteSpace:"pre-wrap"},children:[T.jsx("div",{className:`dib ${h=="p"?"w-50":"w-20"}`,children:T.jsx("div",{className:"dib",style:{width:"90%",margin:"0.5rem 0"},children:FV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${c} c-s-${w} w-20`,style:{paddingBottom:"20%"}},`column-${_}`))},`row-${y}`))})}),T.jsx("div",{className:`dib ${h=="p"?"w-50":"w-20"}`,children:T.jsx("div",{className:"dib",style:{width:"90%",margin:"0.5rem 0"},children:DV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${c} c-s-${w} w-20`,style:{paddingBottom:"20%"}},`column-${_}`))},`row-${y}`))})}),T.jsx("div",{className:`dib ${h=="p"?"w-50":"w-20"}`,children:T.jsx("div",{className:"dib",style:{width:"90%",margin:"0.5rem 0"},children:UV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${c} c-s-${w} w-20`,style:{paddingBottom:"20%"}},`column-${_}`))},`row-${y}`))})}),T.jsx("div",{className:`dib ${h=="p"?"w-50":"w-20"}`,children:T.jsx("div",{className:"dib",style:{width:"90%",margin:"0.5rem 0"},children:jV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${c} c-s-${w} w-20`,style:{paddingBottom:"20%"}},`column-${_}`))},`row-${y}`))})}),T.jsx("div",{className:`dib ${h=="p"?"w-50":"w-20"}`,children:T.jsx("div",{className:"dib",style:{width:"90%",margin:"0.5rem 0"},children:XV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${c} c-s-${w} w-20`,style:{paddingBottom:"20%"}},`column-${_}`))},`row-${y}`))})})]}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem"},children:"clwild1"})]}),T.jsxs("div",{style:{padding:"0.5rem 0"},children:[T.jsxs("div",{style:{textAlign:"center"},children:[T.jsx("div",{className:"dib",style:{width:"44%"},children:T.jsx("div",{className:"dib",style:{width:"90%",verticalAlign:"middle"},children:HV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} ${c} c-s-${w} w-20`,style:{paddingBottom:"20%"}},`column-${_}`))},`row-${y}`))})}),T.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",style:{verticalAlign:"middle",padding:"0 0.2rem",fill:"white"},width:"2rem",height:"2rem",viewBox:"0 0 24 24",children:T.jsx("path",{d:"m21.707 11.293-7-7A1 1 0 0 0 13 5v3H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10v3a1 1 0 0 0 1.707.707l7-7a1 1 0 0 0 0-1.414z","data-name":"Right"})}),T.jsx("div",{className:"dib",style:{width:"44%"},children:T.jsxs("div",{className:"dib",style:{width:"90%",verticalAlign:"middle"},children:[T.jsx("div",{className:"dib",style:{width:"77%"},children:zV.map((x,y)=>T.jsx("div",{children:x.map((w,_)=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-${w} ${d} w-25`,style:{paddingBottom:"25%"}},`column-${_}`))},`row-${y}`))}),T.jsx("div",{className:`icon-mod cyberpunklora-symbol-8 ${d} ${c} c-s-7`,style:{width:"20%",paddingBottom:"61%",backgroundSize:"100%!important"}},"column-")]})})]}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem"},children:"clwild2"})]}),T.jsxs("div",{style:{padding:"0.5rem 0"},children:[T.jsx("div",{className:"dib w-50",children:T.jsx("div",{className:"dib",style:{width:"90%"},children:br(5,x=>T.jsx("div",{className:`icon-mod cyberpunklora-symbol-8 ${d} ${c} w-20`,style:{paddingBottom:"60%"}},`column-${x}`))})}),T.jsxs("div",{children:[T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"0.5rem"},children:"clwild3"}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"1rem"},children:"clwild7"})]})]}),T.jsxs("div",{style:{paddingTop:"2rem"},children:[T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clwild4"}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clwild5"}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap"},children:"clwild6"})]}),T.jsxs("div",{style:{padding:"2rem 0"},children:[T.jsxs("table",{className:`detail4-table ${h}`,children:[T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",tcase:"upper",children:"betlevel"})}),T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",children:"wildpayout"})})]})}),T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",tcase:"upper",children:"20"})}),T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",children:"3000"})})]})}),T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",tcase:"upper",children:"15"})}),T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",children:"1500"})})]})}),T.jsx("tbody",{children:T.jsxs("tr",{children:[T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",tcase:"upper",children:"10"})}),T.jsx("th",{children:T.jsx(ye,{className:"dib w-50 detail4-item",children:"500"})})]})})]}),T.jsx(ye,{className:`desc ${h}`,style:{whiteSpace:"pre-wrap",paddingTop:"1rem"},children:"clwild8"})]})]}),T.jsxs("div",{ref:i,id:"geisha-gameplay",className:"game-info-mod",children:[T.jsx(ye,{className:"title",children:"gameplay"}),T.jsx("div",{className:"detail-table",children:T.jsxs("div",{children:[T.jsxs("div",{className:`item ${h} ${c}`,children:[T.jsx(ye,{className:"text1",children:"reel"}),T.jsx(ye,{className:"text2",replaceMap:{"{%reel%}":"3 x 5"},children:"3_5reel"})]}),T.jsxs("div",{className:`item ${h} ${c}`,children:[T.jsx(ye,{className:"text1",children:"wintype"}),T.jsx(ye,{className:`text2 ${h}`,children:"clusterwin"})]}),T.jsxs("div",{className:`item ${h} ${c}`,children:[T.jsx(ye,{className:"text1",children:"betlevel"}),T.jsx(ye,{className:"text2",children:"10,15,20"})]}),T.jsxs("div",{className:`item ${h} ${c}`,children:[T.jsx(ye,{className:"text1",children:"defaultrtp"}),T.jsx("div",{className:"text2",children:"96.75%"})]})]})}),T.jsxs("div",{className:`description ${h}`,style:{marginTop:"2rem"},children:[T.jsx(ye,{className:"text text-coral",children:"minmaxbet"}),T.jsx(ye,{className:"text",style:{paddingLeft:"1rem"},children:"gameplay1"}),T.jsxs("div",{className:"clearfix",style:{paddingLeft:"1rem"},children:[T.jsx("div",{className:"text fl",children:T.jsx(ye,{style:{fontWeight:"bold"},tmp:["example",":"]})}),T.jsxs("div",{className:"fl",style:{width:"70%",paddingLeft:"0.5rem"},children:[T.jsx(ye,{className:"text",children:"gameplay2"}),T.jsx(ye,{className:"text",replaceMap:{"{%line%}":"10","{%amount%}":"1.00"},children:"gameplay3_1"}),T.jsx(ye,{className:"text",replaceMap:{"{%amount%}":"10.00"},children:"gameplay4"})]})]})]}),T.jsxs("div",{className:`description ${h}`,children:[T.jsx(ye,{className:"text text-coral",tmp:["howtoplay"]}),T.jsx("div",{children:T.jsx(ye,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["1. ","howtoplay1"]})}),T.jsx("div",{children:T.jsx(ye,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["2. ","howtoplay2"]})}),T.jsx("div",{children:T.jsx(ye,{className:"dib text",style:{paddingLeft:"1rem"},tmp:["3. ","howtoplay3"]})})]})]})]}),T.jsx(Rn,{className:"close-icon btn-mod",onClick:p,style:{position:"absolute",right:"1rem",top:"1.4rem",height:"2rem",width:"2rem"}})]})}const YV=()=>T.jsxs(g$,{id:"game-canvas",className:"game-context-mod",antialias:!1,children:[T.jsxs(ge,{children:[T.jsxs(y$,{children:[T.jsx(nG,{id:"preload",next:"load"}),T.jsx(j$,{id:"load",next:"premain"}),T.jsx(uG,{id:"premain"}),T.jsx(rG,{id:"main"})]}),T.jsx(Bz,{children:T.jsx(Uz,{x:340,y:136})}),T.jsx(w$,{}),T.jsx(_$,{})]}),T.jsx(P$,{}),T.jsx($V,{}),T.jsx(IV,{}),T.jsx(mV,{}),T.jsx(b$,{}),T.jsx(N$,{}),T.jsxs(M$,{children:[T.jsx(O$,{}),T.jsx(R$,{})]}),T.jsx(VY,{}),T.jsx(I$,{})]});wH(T.jsx(YV,{}),[Be.Obj.urlOptions.lang])});export default GV();
